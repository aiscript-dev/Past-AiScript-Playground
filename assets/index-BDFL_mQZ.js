var vw=Object.defineProperty;var gw=(t,r,e)=>r in t?vw(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var he=(t,r,e)=>gw(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))n(v);new MutationObserver(v=>{for(const w of v)if(w.type==="childList")for(const _ of w.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&n(_)}).observe(document,{childList:!0,subtree:!0});function e(v){const w={};return v.integrity&&(w.integrity=v.integrity),v.referrerPolicy&&(w.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?w.credentials="include":v.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function n(v){if(v.ep)return;v.ep=!0;const w=e(v);fetch(v.href,w)}})();/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wv(t,r){const e=new Set(t.split(","));return r?n=>e.has(n.toLowerCase()):n=>e.has(n)}const rs={},xo=[],qi=()=>{},dw=()=>!1,wh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mv=t=>t.startsWith("onUpdate:"),Es=Object.assign,$v=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},yw=Object.prototype.hasOwnProperty,fr=(t,r)=>yw.call(t,r),yt=Array.isArray,bo=t=>mh(t)==="[object Map]",bd=t=>mh(t)==="[object Set]",Tt=t=>typeof t=="function",Ss=t=>typeof t=="string",wf=t=>typeof t=="symbol",Zr=t=>t!==null&&typeof t=="object",Ad=t=>(Zr(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch),Cd=Object.prototype.toString,mh=t=>Cd.call(t),ww=t=>mh(t).slice(8,-1),_d=t=>mh(t)==="[object Object]",xv=t=>Ss(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,sc=wv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$h=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},mw=/-(\w)/g,qo=$h(t=>t.replace(mw,(r,e)=>e?e.toUpperCase():"")),$w=/\B([A-Z])/g,Vo=$h(t=>t.replace($w,"-$1").toLowerCase()),Pd=$h(t=>t.charAt(0).toUpperCase()+t.slice(1)),Rh=$h(t=>t?`on${Pd(t)}`:""),df=(t,r)=>!Object.is(t,r),Dh=(t,...r)=>{for(let e=0;e<t.length;e++)t[e](...r)},kd=(t,r,e,n=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:n,value:e})},xw=t=>{const r=parseFloat(t);return isNaN(r)?t:r},bw=t=>{const r=Ss(t)?Number(t):NaN;return isNaN(r)?t:r};let Jv;const Md=()=>Jv||(Jv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bv(t){if(yt(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],v=Ss(n)?Pw(n):bv(n);if(v)for(const w in v)r[w]=v[w]}return r}else if(Ss(t)||Zr(t))return t}const Aw=/;(?![^(]*\))/g,Cw=/:([^]+)/,_w=/\/\*[^]*?\*\//g;function Pw(t){const r={};return t.replace(_w,"").split(Aw).forEach(e=>{if(e){const n=e.split(Cw);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Cn(t){let r="";if(Ss(t))r=t;else if(yt(t))for(let e=0;e<t.length;e++){const n=Cn(t[e]);n&&(r+=n+" ")}else if(Zr(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const kw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mw=wv(kw);function Ed(t){return!!t||t===""}const Sd=t=>!!(t&&t.__v_isRef===!0),hf=t=>Ss(t)?t:t==null?"":yt(t)||Zr(t)&&(t.toString===Cd||!Tt(t.toString))?Sd(t)?hf(t.value):JSON.stringify(t,Nd,2):String(t),Nd=(t,r)=>Sd(r)?Nd(t,r.value):bo(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,v],w)=>(e[Lh(n,w)+" =>"]=v,e),{})}:bd(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>Lh(e))}:wf(r)?Lh(r):Zr(r)&&!yt(r)&&!_d(r)?String(r):r,Lh=(t,r="")=>{var e;return wf(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $u;class Ew{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$u,!r&&$u&&(this.index=($u.scopes||($u.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=$u;try{return $u=this,r()}finally{$u=e}}}on(){$u=this}off(){$u=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function Sw(t,r=$u){r&&r.active&&r.effects.push(t)}function Nw(){return $u}let Lf;class Av{constructor(r,e,n,v){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Sw(this,v)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,mf();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(Fw(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),$f()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=pf,e=Lf;try{return pf=!0,Lf=this,this._runnings++,Zv(this),this.fn()}finally{Qv(this),this._runnings--,Lf=e,pf=r}}stop(){this.active&&(Zv(this),Qv(this),this.onStop&&this.onStop(),this.active=!1)}}function Fw(t){return t.value}function Zv(t){t._trackId++,t._depsLength=0}function Qv(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)Fd(t.deps[r],t);t.deps.length=t._depsLength}}function Fd(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let pf=!0,mp=0;const Od=[];function mf(){Od.push(pf),pf=!1}function $f(){const t=Od.pop();pf=t===void 0?!0:t}function Cv(){mp++}function _v(){for(mp--;!mp&&$p.length;)$p.shift()()}function Td(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&Fd(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const $p=[];function Id(t,r,e){Cv();for(const n of t.keys()){let v;n._dirtyLevel<r&&(v??(v=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(v??(v=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&$p.push(n.scheduler)))}_v()}const jd=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},xp=new WeakMap,Hf=Symbol(""),bp=Symbol("");function Ma(t,r,e){if(pf&&Lf){let n=xp.get(t);n||xp.set(t,n=new Map);let v=n.get(e);v||n.set(e,v=jd(()=>n.delete(e))),Td(Lf,v)}}function zu(t,r,e,n,v,w){const _=xp.get(t);if(!_)return;let P=[];if(r==="clear")P=[..._.values()];else if(e==="length"&&yt(t)){const E=Number(n);_.forEach((N,T)=>{(T==="length"||!wf(T)&&T>=E)&&P.push(N)})}else switch(e!==void 0&&P.push(_.get(e)),r){case"add":yt(t)?xv(e)&&P.push(_.get("length")):(P.push(_.get(Hf)),bo(t)&&P.push(_.get(bp)));break;case"delete":yt(t)||(P.push(_.get(Hf)),bo(t)&&P.push(_.get(bp)));break;case"set":bo(t)&&P.push(_.get(Hf));break}Cv();for(const E of P)E&&Id(E,4);_v()}const Ow=wv("__proto__,__v_isRef,__isVue"),Rd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(wf)),Xv=Tw();function Tw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=mr(this);for(let w=0,_=this.length;w<_;w++)Ma(n,"get",w+"");const v=n[r](...e);return v===-1||v===!1?n[r](...e.map(mr)):v}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){mf(),Cv();const n=mr(this)[r].apply(this,e);return _v(),$f(),n}}),t}function Iw(t){wf(t)||(t=String(t));const r=mr(this);return Ma(r,"has",t),r.hasOwnProperty(t)}class Dd{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const v=this._isReadonly,w=this._isShallow;if(e==="__v_isReactive")return!v;if(e==="__v_isReadonly")return v;if(e==="__v_isShallow")return w;if(e==="__v_raw")return n===(v?w?Gw:Bd:w?Ud:Hd).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const _=yt(r);if(!v){if(_&&fr(Xv,e))return Reflect.get(Xv,e,n);if(e==="hasOwnProperty")return Iw}const P=Reflect.get(r,e,n);return(wf(e)?Rd.has(e):Ow(e))||(v||Ma(r,"get",e),w)?P:Ea(P)?_&&xv(e)?P:P.value:Zr(P)?v?qd(P):Mv(P):P}}class Ld extends Dd{constructor(r=!1){super(!1,r)}set(r,e,n,v){let w=r[e];if(!this._isShallow){const E=hc(w);if(!ih(n)&&!hc(n)&&(w=mr(w),n=mr(n)),!yt(r)&&Ea(w)&&!Ea(n))return E?!1:(w.value=n,!0)}const _=yt(r)&&xv(e)?Number(e)<r.length:fr(r,e),P=Reflect.set(r,e,n,v);return r===mr(v)&&(_?df(n,w)&&zu(r,"set",e,n):zu(r,"add",e,n)),P}deleteProperty(r,e){const n=fr(r,e);r[e];const v=Reflect.deleteProperty(r,e);return v&&n&&zu(r,"delete",e,void 0),v}has(r,e){const n=Reflect.has(r,e);return(!wf(e)||!Rd.has(e))&&Ma(r,"has",e),n}ownKeys(r){return Ma(r,"iterate",yt(r)?"length":Hf),Reflect.ownKeys(r)}}class jw extends Dd{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Rw=new Ld,Dw=new jw,Lw=new Ld(!0);const Pv=t=>t,xh=t=>Reflect.getPrototypeOf(t);function Cc(t,r,e=!1,n=!1){t=t.__v_raw;const v=mr(t),w=mr(r);e||(df(r,w)&&Ma(v,"get",r),Ma(v,"get",w));const{has:_}=xh(v),P=n?Pv:e?Sv:pc;if(_.call(v,r))return P(t.get(r));if(_.call(v,w))return P(t.get(w));t!==v&&t.get(r)}function _c(t,r=!1){const e=this.__v_raw,n=mr(e),v=mr(t);return r||(df(t,v)&&Ma(n,"has",t),Ma(n,"has",v)),t===v?e.has(t):e.has(t)||e.has(v)}function Pc(t,r=!1){return t=t.__v_raw,!r&&Ma(mr(t),"iterate",Hf),Reflect.get(t,"size",t)}function Yv(t){t=mr(t);const r=mr(this);return xh(r).has.call(r,t)||(r.add(t),zu(r,"add",t,t)),this}function eg(t,r){r=mr(r);const e=mr(this),{has:n,get:v}=xh(e);let w=n.call(e,t);w||(t=mr(t),w=n.call(e,t));const _=v.call(e,t);return e.set(t,r),w?df(r,_)&&zu(e,"set",t,r):zu(e,"add",t,r),this}function tg(t){const r=mr(this),{has:e,get:n}=xh(r);let v=e.call(r,t);v||(t=mr(t),v=e.call(r,t)),n&&n.call(r,t);const w=r.delete(t);return v&&zu(r,"delete",t,void 0),w}function rg(){const t=mr(this),r=t.size!==0,e=t.clear();return r&&zu(t,"clear",void 0,void 0),e}function kc(t,r){return function(n,v){const w=this,_=w.__v_raw,P=mr(_),E=r?Pv:t?Sv:pc;return!t&&Ma(P,"iterate",Hf),_.forEach((N,T)=>n.call(v,E(N),E(T),w))}}function Mc(t,r,e){return function(...n){const v=this.__v_raw,w=mr(v),_=bo(w),P=t==="entries"||t===Symbol.iterator&&_,E=t==="keys"&&_,N=v[t](...n),T=e?Pv:r?Sv:pc;return!r&&Ma(w,"iterate",E?bp:Hf),{next(){const{value:H,done:B}=N.next();return B?{value:H,done:B}:{value:P?[T(H[0]),T(H[1])]:T(H),done:B}},[Symbol.iterator](){return this}}}}function Qu(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function Hw(){const t={get(w){return Cc(this,w)},get size(){return Pc(this)},has:_c,add:Yv,set:eg,delete:tg,clear:rg,forEach:kc(!1,!1)},r={get(w){return Cc(this,w,!1,!0)},get size(){return Pc(this)},has:_c,add:Yv,set:eg,delete:tg,clear:rg,forEach:kc(!1,!0)},e={get(w){return Cc(this,w,!0)},get size(){return Pc(this,!0)},has(w){return _c.call(this,w,!0)},add:Qu("add"),set:Qu("set"),delete:Qu("delete"),clear:Qu("clear"),forEach:kc(!0,!1)},n={get(w){return Cc(this,w,!0,!0)},get size(){return Pc(this,!0)},has(w){return _c.call(this,w,!0)},add:Qu("add"),set:Qu("set"),delete:Qu("delete"),clear:Qu("clear"),forEach:kc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{t[w]=Mc(w,!1,!1),e[w]=Mc(w,!0,!1),r[w]=Mc(w,!1,!0),n[w]=Mc(w,!0,!0)}),[t,e,r,n]}const[Uw,Bw,qw,zw]=Hw();function kv(t,r){const e=r?t?zw:qw:t?Bw:Uw;return(n,v,w)=>v==="__v_isReactive"?!t:v==="__v_isReadonly"?t:v==="__v_raw"?n:Reflect.get(fr(e,v)&&v in n?e:n,v,w)}const Kw={get:kv(!1,!1)},Vw={get:kv(!1,!0)},Ww={get:kv(!0,!1)};const Hd=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,Gw=new WeakMap;function Jw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zw(t){return t.__v_skip||!Object.isExtensible(t)?0:Jw(ww(t))}function Mv(t){return hc(t)?t:Ev(t,!1,Rw,Kw,Hd)}function Qw(t){return Ev(t,!1,Lw,Vw,Ud)}function qd(t){return Ev(t,!0,Dw,Ww,Bd)}function Ev(t,r,e,n,v){if(!Zr(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const w=v.get(t);if(w)return w;const _=Zw(t);if(_===0)return t;const P=new Proxy(t,_===2?n:e);return v.set(t,P),P}function nc(t){return hc(t)?nc(t.__v_raw):!!(t&&t.__v_isReactive)}function hc(t){return!!(t&&t.__v_isReadonly)}function ih(t){return!!(t&&t.__v_isShallow)}function zd(t){return t?!!t.__v_raw:!1}function mr(t){const r=t&&t.__v_raw;return r?mr(r):t}function Xw(t){return Object.isExtensible(t)&&kd(t,"__v_skip",!0),t}const pc=t=>Zr(t)?Mv(t):t,Sv=t=>Zr(t)?qd(t):t;class Kd{constructor(r,e,n,v){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Av(()=>r(this._value),()=>Ic(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=n}get value(){const r=mr(this);return(!r._cacheable||r.effect.dirty)&&df(r._value,r._value=r.effect.run())&&Ic(r,4),Vd(r),r.effect._dirtyLevel>=2&&Ic(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function Yw(t,r,e=!1){let n,v;const w=Tt(t);return w?(n=t,v=qi):(n=t.get,v=t.set),new Kd(n,v,w||!v,e)}function Vd(t){var r;pf&&Lf&&(t=mr(t),Td(Lf,(r=t.dep)!=null?r:t.dep=jd(()=>t.dep=void 0,t instanceof Kd?t:void 0)))}function Ic(t,r=4,e,n){t=mr(t);const v=t.dep;v&&Id(v,r)}function Ea(t){return!!(t&&t.__v_isRef===!0)}function Ff(t){return e0(t,!1)}function e0(t,r){return Ea(t)?t:new t0(t,r)}class t0{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:mr(r),this._value=e?r:pc(r)}get value(){return Vd(this),this._value}set value(r){const e=this.__v_isShallow||ih(r)||hc(r);r=e?r:mr(r),df(r,this._rawValue)&&(this._rawValue,this._rawValue=r,this._value=e?r:pc(r),Ic(this,4))}}function vc(t){return Ea(t)?t.value:t}const r0={get:(t,r,e)=>vc(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const v=t[r];return Ea(v)&&!Ea(e)?(v.value=e,!0):Reflect.set(t,r,e,n)}};function Wd(t){return nc(t)?t:new Proxy(t,r0)}/**
* @vue/runtime-core v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vf(t,r,e,n){try{return n?t(...n):t()}catch(v){bh(v,r,e)}}function Ki(t,r,e,n){if(Tt(t)){const v=vf(t,r,e,n);return v&&Ad(v)&&v.catch(w=>{bh(w,r,e)}),v}if(yt(t)){const v=[];for(let w=0;w<t.length;w++)v.push(Ki(t[w],r,e,n));return v}}function bh(t,r,e,n=!0){const v=r?r.vnode:null;if(r){let w=r.parent;const _=r.proxy,P=`https://vuejs.org/error-reference/#runtime-${e}`;for(;w;){const N=w.ec;if(N){for(let T=0;T<N.length;T++)if(N[T](t,_,P)===!1)return}w=w.parent}const E=r.appContext.config.errorHandler;if(E){mf(),vf(E,null,10,[t,_,P]),$f();return}}s0(t,e,v,n)}function s0(t,r,e,n=!0){console.error(t)}let gc=!1,Ap=!1;const bn=[];let Fu=0;const Ao=[];let nf=null,Mf=0;const Gd=Promise.resolve();let Nv=null;function n0(t){const r=Nv||Gd;return t?r.then(this?t.bind(this):t):r}function a0(t){let r=Fu+1,e=bn.length;for(;r<e;){const n=r+e>>>1,v=bn[n],w=dc(v);w<t||w===t&&v.pre?r=n+1:e=n}return r}function Fv(t){(!bn.length||!bn.includes(t,gc&&t.allowRecurse?Fu+1:Fu))&&(t.id==null?bn.push(t):bn.splice(a0(t.id),0,t),Jd())}function Jd(){!gc&&!Ap&&(Ap=!0,Nv=Gd.then(Qd))}function i0(t){const r=bn.indexOf(t);r>Fu&&bn.splice(r,1)}function l0(t){yt(t)?Ao.push(...t):(!nf||!nf.includes(t,t.allowRecurse?Mf+1:Mf))&&Ao.push(t),Jd()}function sg(t,r,e=gc?Fu+1:0){for(;e<bn.length;e++){const n=bn[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;bn.splice(e,1),e--,n()}}}function Zd(t){if(Ao.length){const r=[...new Set(Ao)].sort((e,n)=>dc(e)-dc(n));if(Ao.length=0,nf){nf.push(...r);return}for(nf=r,Mf=0;Mf<nf.length;Mf++){const e=nf[Mf];e.active!==!1&&e()}nf=null,Mf=0}}const dc=t=>t.id==null?1/0:t.id,u0=(t,r)=>{const e=dc(t)-dc(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Qd(t){Ap=!1,gc=!0,bn.sort(u0);try{for(Fu=0;Fu<bn.length;Fu++){const r=bn[Fu];r&&r.active!==!1&&vf(r,null,14)}}finally{Fu=0,bn.length=0,Zd(),gc=!1,Nv=null,(bn.length||Ao.length)&&Qd()}}function f0(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||rs;let v=e;const w=r.startsWith("update:"),_=w&&r.slice(7);if(_&&_ in n){const T=`${_==="modelValue"?"model":_}Modifiers`,{number:H,trim:B}=n[T]||rs;B&&(v=e.map(J=>Ss(J)?J.trim():J)),H&&(v=e.map(xw))}let P,E=n[P=Rh(r)]||n[P=Rh(qo(r))];!E&&w&&(E=n[P=Rh(Vo(r))]),E&&Ki(E,t,6,v);const N=n[P+"Once"];if(N){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,Ki(N,t,6,v)}}function Xd(t,r,e=!1){const n=r.emitsCache,v=n.get(t);if(v!==void 0)return v;const w=t.emits;let _={},P=!1;if(!Tt(t)){const E=N=>{const T=Xd(N,r,!0);T&&(P=!0,Es(_,T))};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!w&&!P?(Zr(t)&&n.set(t,null),null):(yt(w)?w.forEach(E=>_[E]=null):Es(_,w),Zr(t)&&n.set(t,_),_)}function Ah(t,r){return!t||!wh(r)?!1:(r=r.slice(2).replace(/Once$/,""),fr(t,r[0].toLowerCase()+r.slice(1))||fr(t,Vo(r))||fr(t,r))}let ca=null,Ch=null;function lh(t){const r=ca;return ca=t,Ch=t&&t.type.__scopeId||null,r}function o0(t){Ch=t}function c0(){Ch=null}function Pa(t,r=ca,e){if(!r||t._n)return t;const n=(...v)=>{n._d&&gg(-1);const w=lh(r);let _;try{_=t(...v)}finally{lh(w),n._d&&gg(1)}return _};return n._n=!0,n._c=!0,n._d=!0,n}function Hh(t){const{type:r,vnode:e,proxy:n,withProxy:v,propsOptions:[w],slots:_,attrs:P,emit:E,render:N,renderCache:T,props:H,data:B,setupState:J,ctx:we,inheritAttrs:ue}=t,oe=lh(t);let ke,G;try{if(e.shapeFlag&4){const Q=v||n,X=Q;ke=Nu(N.call(X,Q,T,H,J,B,we)),G=P}else{const Q=r;ke=Nu(Q.length>1?Q(H,{attrs:P,slots:_,emit:E}):Q(H,null)),G=r.props?P:h0(P)}}catch(Q){fc.length=0,bh(Q,t,1),ke=cs(ka)}let V=ke;if(G&&ue!==!1){const Q=Object.keys(G),{shapeFlag:X}=V;Q.length&&X&7&&(w&&Q.some(mv)&&(G=p0(G,w)),V=yf(V,G,!1,!0))}return e.dirs&&(V=yf(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(e.dirs):e.dirs),e.transition&&(V.transition=e.transition),ke=V,lh(oe),ke}const h0=t=>{let r;for(const e in t)(e==="class"||e==="style"||wh(e))&&((r||(r={}))[e]=t[e]);return r},p0=(t,r)=>{const e={};for(const n in t)(!mv(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function v0(t,r,e){const{props:n,children:v,component:w}=t,{props:_,children:P,patchFlag:E}=r,N=w.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&E>=0){if(E&1024)return!0;if(E&16)return n?ng(n,_,N):!!_;if(E&8){const T=r.dynamicProps;for(let H=0;H<T.length;H++){const B=T[H];if(_[B]!==n[B]&&!Ah(N,B))return!0}}}else return(v||P)&&(!P||!P.$stable)?!0:n===_?!1:n?_?ng(n,_,N):!0:!!_;return!1}function ng(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let v=0;v<n.length;v++){const w=n[v];if(r[w]!==t[w]&&!Ah(e,w))return!0}return!1}function g0({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const d0=Symbol.for("v-ndc"),y0=t=>t.__isSuspense;function w0(t,r){r&&r.pendingBranch?yt(t)?r.effects.push(...t):r.effects.push(t):l0(t)}function _h(t,r,e=An,n=!1){if(e){const v=e[t]||(e[t]=[]),w=r.__weh||(r.__weh=(..._)=>{mf();const P=$c(e),E=Ki(r,e,t,_);return P(),$f(),E});return n?v.unshift(w):v.push(w),w}}const Ku=t=>(r,e=An)=>{(!Eh||t==="sp")&&_h(t,(...n)=>r(...n),e)},m0=Ku("bm"),Yd=Ku("m"),$0=Ku("bu"),x0=Ku("u"),ey=Ku("bum"),ty=Ku("um"),b0=Ku("sp"),A0=Ku("rtg"),C0=Ku("rtc");function _0(t,r=An){_h("ec",t,r)}function Cf(t,r,e,n){const v=t.dirs,w=r&&r.dirs;for(let _=0;_<v.length;_++){const P=v[_];w&&(P.oldValue=w[_].value);let E=P.dir[n];E&&(mf(),Ki(E,e,8,[t.el,P,t,r]),$f())}}function uh(t,r,e,n){let v;const w=e&&e[n];if(yt(t)||Ss(t)){v=new Array(t.length);for(let _=0,P=t.length;_<P;_++)v[_]=r(t[_],_,void 0,w&&w[_])}else if(typeof t=="number"){v=new Array(t);for(let _=0;_<t;_++)v[_]=r(_+1,_,void 0,w&&w[_])}else if(Zr(t))if(t[Symbol.iterator])v=Array.from(t,(_,P)=>r(_,P,void 0,w&&w[P]));else{const _=Object.keys(t);v=new Array(_.length);for(let P=0,E=_.length;P<E;P++){const N=_[P];v[P]=r(t[N],N,P,w&&w[P])}}else v=[];return e&&(e[n]=v),v}/*! #__NO_SIDE_EFFECTS__ */function mc(t,r){return Tt(t)?Es({name:t.name},r,{setup:t}):t}const ac=t=>!!t.type.__asyncLoader;function jc(t,r,e={},n,v){if(ca.isCE||ca.parent&&ac(ca.parent)&&ca.parent.isCE)return r!=="default"&&(e.name=r),cs("slot",e,n&&n());let w=t[r];w&&w._c&&(w._d=!1),os();const _=w&&ry(w(e)),P=Mh(xn,{key:e.key||_&&_.key||`_${r}`},_||(n?n():[]),_&&t._===1?64:-2);return!v&&P.scopeId&&(P.slotScopeIds=[P.scopeId+"-s"]),w&&w._c&&(w._d=!0),P}function ry(t){return t.some(r=>ch(r)?!(r.type===ka||r.type===xn&&!ry(r.children)):!0)?t:null}const Cp=t=>t?Cy(t)?jv(t):Cp(t.parent):null,ic=Es(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cp(t.parent),$root:t=>Cp(t.root),$emit:t=>t.emit,$options:t=>Ov(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Fv(t.update)}),$nextTick:t=>t.n||(t.n=n0.bind(t.proxy)),$watch:t=>V0.bind(t)}),Uh=(t,r)=>t!==rs&&!t.__isScriptSetup&&fr(t,r),P0={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:n,data:v,props:w,accessCache:_,type:P,appContext:E}=t;let N;if(r[0]!=="$"){const J=_[r];if(J!==void 0)switch(J){case 1:return n[r];case 2:return v[r];case 4:return e[r];case 3:return w[r]}else{if(Uh(n,r))return _[r]=1,n[r];if(v!==rs&&fr(v,r))return _[r]=2,v[r];if((N=t.propsOptions[0])&&fr(N,r))return _[r]=3,w[r];if(e!==rs&&fr(e,r))return _[r]=4,e[r];_p&&(_[r]=0)}}const T=ic[r];let H,B;if(T)return r==="$attrs"&&Ma(t.attrs,"get",""),T(t);if((H=P.__cssModules)&&(H=H[r]))return H;if(e!==rs&&fr(e,r))return _[r]=4,e[r];if(B=E.config.globalProperties,fr(B,r))return B[r]},set({_:t},r,e){const{data:n,setupState:v,ctx:w}=t;return Uh(v,r)?(v[r]=e,!0):n!==rs&&fr(n,r)?(n[r]=e,!0):fr(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(w[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:v,propsOptions:w}},_){let P;return!!e[_]||t!==rs&&fr(t,_)||Uh(r,_)||(P=w[0])&&fr(P,_)||fr(n,_)||fr(ic,_)||fr(v.config.globalProperties,_)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:fr(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function ag(t){return yt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let _p=!0;function k0(t){const r=Ov(t),e=t.proxy,n=t.ctx;_p=!1,r.beforeCreate&&ig(r.beforeCreate,t,"bc");const{data:v,computed:w,methods:_,watch:P,provide:E,inject:N,created:T,beforeMount:H,mounted:B,beforeUpdate:J,updated:we,activated:ue,deactivated:oe,beforeDestroy:ke,beforeUnmount:G,destroyed:V,unmounted:Q,render:X,renderTracked:Z,renderTriggered:ee,errorCaptured:ie,serverPrefetch:ae,expose:Me,inheritAttrs:Te,components:_e,directives:at,filters:pt}=r;if(N&&M0(N,n,null),_)for(const wt in _){const Ze=_[wt];Tt(Ze)&&(n[wt]=Ze.bind(e))}if(v){const wt=v.call(e,e);Zr(wt)&&(t.data=Mv(wt))}if(_p=!0,w)for(const wt in w){const Ze=w[wt],mt=Tt(Ze)?Ze.bind(e,e):Tt(Ze.get)?Ze.get.bind(e,e):qi,Jt=!Tt(Ze)&&Tt(Ze.set)?Ze.set.bind(e):qi,Zt=pm({get:mt,set:Jt});Object.defineProperty(n,wt,{enumerable:!0,configurable:!0,get:()=>Zt.value,set:ht=>Zt.value=ht})}if(P)for(const wt in P)sy(P[wt],n,e,wt);if(E){const wt=Tt(E)?E.call(e):E;Reflect.ownKeys(wt).forEach(Ze=>{T0(Ze,wt[Ze])})}T&&ig(T,t,"c");function $t(wt,Ze){yt(Ze)?Ze.forEach(mt=>wt(mt.bind(e))):Ze&&wt(Ze.bind(e))}if($t(m0,H),$t(Yd,B),$t($0,J),$t(x0,we),$t(W0,ue),$t(G0,oe),$t(_0,ie),$t(C0,Z),$t(A0,ee),$t(ey,G),$t(ty,Q),$t(b0,ae),yt(Me))if(Me.length){const wt=t.exposed||(t.exposed={});Me.forEach(Ze=>{Object.defineProperty(wt,Ze,{get:()=>e[Ze],set:mt=>e[Ze]=mt})})}else t.exposed||(t.exposed={});X&&t.render===qi&&(t.render=X),Te!=null&&(t.inheritAttrs=Te),_e&&(t.components=_e),at&&(t.directives=at)}function M0(t,r,e=qi){yt(t)&&(t=Pp(t));for(const n in t){const v=t[n];let w;Zr(v)?"default"in v?w=Rc(v.from||n,v.default,!0):w=Rc(v.from||n):w=Rc(v),Ea(w)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>w.value,set:_=>w.value=_}):r[n]=w}}function ig(t,r,e){Ki(yt(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function sy(t,r,e,n){const v=n.includes(".")?dy(e,n):()=>e[n];if(Ss(t)){const w=r[t];Tt(w)&&uc(v,w)}else if(Tt(t))uc(v,t.bind(e));else if(Zr(t))if(yt(t))t.forEach(w=>sy(w,r,e,n));else{const w=Tt(t.handler)?t.handler.bind(e):r[t.handler];Tt(w)&&uc(v,w,t)}}function Ov(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:v,optionsCache:w,config:{optionMergeStrategies:_}}=t.appContext,P=w.get(r);let E;return P?E=P:!v.length&&!e&&!n?E=r:(E={},v.length&&v.forEach(N=>fh(E,N,_,!0)),fh(E,r,_)),Zr(r)&&w.set(r,E),E}function fh(t,r,e,n=!1){const{mixins:v,extends:w}=r;w&&fh(t,w,e,!0),v&&v.forEach(_=>fh(t,_,e,!0));for(const _ in r)if(!(n&&_==="expose")){const P=E0[_]||e&&e[_];t[_]=P?P(t[_],r[_]):r[_]}return t}const E0={data:lg,props:ug,emits:ug,methods:tc,computed:tc,beforeCreate:ia,created:ia,beforeMount:ia,mounted:ia,beforeUpdate:ia,updated:ia,beforeDestroy:ia,beforeUnmount:ia,destroyed:ia,unmounted:ia,activated:ia,deactivated:ia,errorCaptured:ia,serverPrefetch:ia,components:tc,directives:tc,watch:N0,provide:lg,inject:S0};function lg(t,r){return r?t?function(){return Es(Tt(t)?t.call(this,this):t,Tt(r)?r.call(this,this):r)}:r:t}function S0(t,r){return tc(Pp(t),Pp(r))}function Pp(t){if(yt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function ia(t,r){return t?[...new Set([].concat(t,r))]:r}function tc(t,r){return t?Es(Object.create(null),t,r):r}function ug(t,r){return t?yt(t)&&yt(r)?[...new Set([...t,...r])]:Es(Object.create(null),ag(t),ag(r??{})):r}function N0(t,r){if(!t)return r;if(!r)return t;const e=Es(Object.create(null),t);for(const n in r)e[n]=ia(t[n],r[n]);return e}function ny(){return{app:null,config:{isNativeTag:dw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let F0=0;function O0(t,r){return function(n,v=null){Tt(n)||(n=Es({},n)),v!=null&&!Zr(v)&&(v=null);const w=ny(),_=new WeakSet;let P=!1;const E=w.app={_uid:F0++,_component:n,_props:v,_container:null,_context:w,_instance:null,version:vm,get config(){return w.config},set config(N){},use(N,...T){return _.has(N)||(N&&Tt(N.install)?(_.add(N),N.install(E,...T)):Tt(N)&&(_.add(N),N(E,...T))),E},mixin(N){return w.mixins.includes(N)||w.mixins.push(N),E},component(N,T){return T?(w.components[N]=T,E):w.components[N]},directive(N,T){return T?(w.directives[N]=T,E):w.directives[N]},mount(N,T,H){if(!P){const B=cs(n,v);return B.appContext=w,H===!0?H="svg":H===!1&&(H=void 0),T&&r?r(B,N):t(B,N,H),P=!0,E._container=N,N.__vue_app__=E,jv(B.component)}},unmount(){P&&(t(null,E._container),delete E._container.__vue_app__)},provide(N,T){return w.provides[N]=T,E},runWithContext(N){const T=lc;lc=E;try{return N()}finally{lc=T}}};return E}}let lc=null;function T0(t,r){if(An){let e=An.provides;const n=An.parent&&An.parent.provides;n===e&&(e=An.provides=Object.create(n)),e[t]=r}}function Rc(t,r,e=!1){const n=An||ca;if(n||lc){const v=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:lc._context.provides;if(v&&t in v)return v[t];if(arguments.length>1)return e&&Tt(r)?r.call(n&&n.proxy):r}}const ay={},iy=()=>Object.create(ay),ly=t=>Object.getPrototypeOf(t)===ay;function I0(t,r,e,n=!1){const v={},w=iy();t.propsDefaults=Object.create(null),uy(t,r,v,w);for(const _ in t.propsOptions[0])_ in v||(v[_]=void 0);e?t.props=n?v:Qw(v):t.type.props?t.props=v:t.props=w,t.attrs=w}function j0(t,r,e,n){const{props:v,attrs:w,vnode:{patchFlag:_}}=t,P=mr(v),[E]=t.propsOptions;let N=!1;if((n||_>0)&&!(_&16)){if(_&8){const T=t.vnode.dynamicProps;for(let H=0;H<T.length;H++){let B=T[H];if(Ah(t.emitsOptions,B))continue;const J=r[B];if(E)if(fr(w,B))J!==w[B]&&(w[B]=J,N=!0);else{const we=qo(B);v[we]=kp(E,P,we,J,t,!1)}else J!==w[B]&&(w[B]=J,N=!0)}}}else{uy(t,r,v,w)&&(N=!0);let T;for(const H in P)(!r||!fr(r,H)&&((T=Vo(H))===H||!fr(r,T)))&&(E?e&&(e[H]!==void 0||e[T]!==void 0)&&(v[H]=kp(E,P,H,void 0,t,!0)):delete v[H]);if(w!==P)for(const H in w)(!r||!fr(r,H))&&(delete w[H],N=!0)}N&&zu(t.attrs,"set","")}function uy(t,r,e,n){const[v,w]=t.propsOptions;let _=!1,P;if(r)for(let E in r){if(sc(E))continue;const N=r[E];let T;v&&fr(v,T=qo(E))?!w||!w.includes(T)?e[T]=N:(P||(P={}))[T]=N:Ah(t.emitsOptions,E)||(!(E in n)||N!==n[E])&&(n[E]=N,_=!0)}if(w){const E=mr(e),N=P||rs;for(let T=0;T<w.length;T++){const H=w[T];e[H]=kp(v,E,H,N[H],t,!fr(N,H))}}return _}function kp(t,r,e,n,v,w){const _=t[e];if(_!=null){const P=fr(_,"default");if(P&&n===void 0){const E=_.default;if(_.type!==Function&&!_.skipFactory&&Tt(E)){const{propsDefaults:N}=v;if(e in N)n=N[e];else{const T=$c(v);n=N[e]=E.call(null,r),T()}}else n=E}_[0]&&(w&&!P?n=!1:_[1]&&(n===""||n===Vo(e))&&(n=!0))}return n}function fy(t,r,e=!1){const n=r.propsCache,v=n.get(t);if(v)return v;const w=t.props,_={},P=[];let E=!1;if(!Tt(t)){const T=H=>{E=!0;const[B,J]=fy(H,r,!0);Es(_,B),J&&P.push(...J)};!e&&r.mixins.length&&r.mixins.forEach(T),t.extends&&T(t.extends),t.mixins&&t.mixins.forEach(T)}if(!w&&!E)return Zr(t)&&n.set(t,xo),xo;if(yt(w))for(let T=0;T<w.length;T++){const H=qo(w[T]);fg(H)&&(_[H]=rs)}else if(w)for(const T in w){const H=qo(T);if(fg(H)){const B=w[T],J=_[H]=yt(B)||Tt(B)?{type:B}:Es({},B);if(J){const we=hg(Boolean,J.type),ue=hg(String,J.type);J[0]=we>-1,J[1]=ue<0||we<ue,(we>-1||fr(J,"default"))&&P.push(H)}}}const N=[_,P];return Zr(t)&&n.set(t,N),N}function fg(t){return t[0]!=="$"&&!sc(t)}function og(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function cg(t,r){return og(t)===og(r)}function hg(t,r){return yt(r)?r.findIndex(e=>cg(e,t)):Tt(r)&&cg(r,t)?0:-1}const oy=t=>t[0]==="_"||t==="$stable",Tv=t=>yt(t)?t.map(Nu):[Nu(t)],R0=(t,r,e)=>{if(r._n)return r;const n=Pa((...v)=>Tv(r(...v)),e);return n._c=!1,n},cy=(t,r,e)=>{const n=t._ctx;for(const v in t){if(oy(v))continue;const w=t[v];if(Tt(w))r[v]=R0(v,w,n);else if(w!=null){const _=Tv(w);r[v]=()=>_}}},hy=(t,r)=>{const e=Tv(r);t.slots.default=()=>e},D0=(t,r)=>{const e=t.slots=iy();if(t.vnode.shapeFlag&32){const n=r._;n?(Es(e,r),kd(e,"_",n,!0)):cy(r,e)}else r&&hy(t,r)},L0=(t,r,e)=>{const{vnode:n,slots:v}=t;let w=!0,_=rs;if(n.shapeFlag&32){const P=r._;P?e&&P===1?w=!1:(Es(v,r),!e&&P===1&&delete v._):(w=!r.$stable,cy(r,v)),_=r}else r&&(hy(t,r),_={default:1});if(w)for(const P in v)!oy(P)&&_[P]==null&&delete v[P]};function Mp(t,r,e,n,v=!1){if(yt(t)){t.forEach((B,J)=>Mp(B,r&&(yt(r)?r[J]:r),e,n,v));return}if(ac(n)&&!v)return;const w=n.shapeFlag&4?jv(n.component):n.el,_=v?null:w,{i:P,r:E}=t,N=r&&r.r,T=P.refs===rs?P.refs={}:P.refs,H=P.setupState;if(N!=null&&N!==E&&(Ss(N)?(T[N]=null,fr(H,N)&&(H[N]=null)):Ea(N)&&(N.value=null)),Tt(E))vf(E,P,12,[_,T]);else{const B=Ss(E),J=Ea(E);if(B||J){const we=()=>{if(t.f){const ue=B?fr(H,E)?H[E]:T[E]:E.value;v?yt(ue)&&$v(ue,w):yt(ue)?ue.includes(w)||ue.push(w):B?(T[E]=[w],fr(H,E)&&(H[E]=T[E])):(E.value=[w],t.k&&(T[t.k]=E.value))}else B?(T[E]=_,fr(H,E)&&(H[E]=_)):J&&(E.value=_,t.k&&(T[t.k]=_))};_?(we.id=-1,da(we,e)):we()}}}const da=w0;function H0(t){return U0(t)}function U0(t,r){const e=Md();e.__VUE__=!0;const{insert:n,remove:v,patchProp:w,createElement:_,createText:P,createComment:E,setText:N,setElementText:T,parentNode:H,nextSibling:B,setScopeId:J=qi,insertStaticContent:we}=t,ue=(W,re,fe,xe=null,ce=null,Ee=null,Ie=void 0,Ae=null,Pe=!!re.dynamicChildren)=>{if(W===re)return;W&&!Sf(W,re)&&(xe=Ar(W),ht(W,ce,Ee,!0),W=null),re.patchFlag===-2&&(Pe=!1,re.dynamicChildren=null);const{type:$e,ref:Je,shapeFlag:rt}=re;switch($e){case kh:oe(W,re,fe,xe);break;case ka:ke(W,re,fe,xe);break;case zh:W==null&&G(re,fe,xe,Ie);break;case xn:_e(W,re,fe,xe,ce,Ee,Ie,Ae,Pe);break;default:rt&1?X(W,re,fe,xe,ce,Ee,Ie,Ae,Pe):rt&6?at(W,re,fe,xe,ce,Ee,Ie,Ae,Pe):(rt&64||rt&128)&&$e.process(W,re,fe,xe,ce,Ee,Ie,Ae,Pe,jr)}Je!=null&&ce&&Mp(Je,W&&W.ref,Ee,re||W,!re)},oe=(W,re,fe,xe)=>{if(W==null)n(re.el=P(re.children),fe,xe);else{const ce=re.el=W.el;re.children!==W.children&&N(ce,re.children)}},ke=(W,re,fe,xe)=>{W==null?n(re.el=E(re.children||""),fe,xe):re.el=W.el},G=(W,re,fe,xe)=>{[W.el,W.anchor]=we(W.children,re,fe,xe,W.el,W.anchor)},V=({el:W,anchor:re},fe,xe)=>{let ce;for(;W&&W!==re;)ce=B(W),n(W,fe,xe),W=ce;n(re,fe,xe)},Q=({el:W,anchor:re})=>{let fe;for(;W&&W!==re;)fe=B(W),v(W),W=fe;v(re)},X=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe)=>{re.type==="svg"?Ie="svg":re.type==="math"&&(Ie="mathml"),W==null?Z(re,fe,xe,ce,Ee,Ie,Ae,Pe):ae(W,re,ce,Ee,Ie,Ae,Pe)},Z=(W,re,fe,xe,ce,Ee,Ie,Ae)=>{let Pe,$e;const{props:Je,shapeFlag:rt,transition:Ye,dirs:Qe}=W;if(Pe=W.el=_(W.type,Ee,Je&&Je.is,Je),rt&8?T(Pe,W.children):rt&16&&ie(W.children,Pe,null,xe,ce,Bh(W,Ee),Ie,Ae),Qe&&Cf(W,null,xe,"created"),ee(Pe,W,W.scopeId,Ie,xe),Je){for(const _t in Je)_t!=="value"&&!sc(_t)&&w(Pe,_t,null,Je[_t],Ee,W.children,xe,ce,Bt);"value"in Je&&w(Pe,"value",null,Je.value,Ee),($e=Je.onVnodeBeforeMount)&&Pu($e,xe,W)}Qe&&Cf(W,null,xe,"beforeMount");const it=B0(ce,Ye);it&&Ye.beforeEnter(Pe),n(Pe,re,fe),(($e=Je&&Je.onVnodeMounted)||it||Qe)&&da(()=>{$e&&Pu($e,xe,W),it&&Ye.enter(Pe),Qe&&Cf(W,null,xe,"mounted")},ce)},ee=(W,re,fe,xe,ce)=>{if(fe&&J(W,fe),xe)for(let Ee=0;Ee<xe.length;Ee++)J(W,xe[Ee]);if(ce){let Ee=ce.subTree;if(re===Ee){const Ie=ce.vnode;ee(W,Ie,Ie.scopeId,Ie.slotScopeIds,ce.parent)}}},ie=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe=0)=>{for(let $e=Pe;$e<W.length;$e++){const Je=W[$e]=Ae?lf(W[$e]):Nu(W[$e]);ue(null,Je,re,fe,xe,ce,Ee,Ie,Ae)}},ae=(W,re,fe,xe,ce,Ee,Ie)=>{const Ae=re.el=W.el;let{patchFlag:Pe,dynamicChildren:$e,dirs:Je}=re;Pe|=W.patchFlag&16;const rt=W.props||rs,Ye=re.props||rs;let Qe;if(fe&&_f(fe,!1),(Qe=Ye.onVnodeBeforeUpdate)&&Pu(Qe,fe,re,W),Je&&Cf(re,W,fe,"beforeUpdate"),fe&&_f(fe,!0),$e?Me(W.dynamicChildren,$e,Ae,fe,xe,Bh(re,ce),Ee):Ie||Ze(W,re,Ae,null,fe,xe,Bh(re,ce),Ee,!1),Pe>0){if(Pe&16)Te(Ae,re,rt,Ye,fe,xe,ce);else if(Pe&2&&rt.class!==Ye.class&&w(Ae,"class",null,Ye.class,ce),Pe&4&&w(Ae,"style",rt.style,Ye.style,ce),Pe&8){const it=re.dynamicProps;for(let _t=0;_t<it.length;_t++){const dt=it[_t],Ct=rt[dt],Pt=Ye[dt];(Pt!==Ct||dt==="value")&&w(Ae,dt,Ct,Pt,ce,W.children,fe,xe,Bt)}}Pe&1&&W.children!==re.children&&T(Ae,re.children)}else!Ie&&$e==null&&Te(Ae,re,rt,Ye,fe,xe,ce);((Qe=Ye.onVnodeUpdated)||Je)&&da(()=>{Qe&&Pu(Qe,fe,re,W),Je&&Cf(re,W,fe,"updated")},xe)},Me=(W,re,fe,xe,ce,Ee,Ie)=>{for(let Ae=0;Ae<re.length;Ae++){const Pe=W[Ae],$e=re[Ae],Je=Pe.el&&(Pe.type===xn||!Sf(Pe,$e)||Pe.shapeFlag&70)?H(Pe.el):fe;ue(Pe,$e,Je,null,xe,ce,Ee,Ie,!0)}},Te=(W,re,fe,xe,ce,Ee,Ie)=>{if(fe!==xe){if(fe!==rs)for(const Ae in fe)!sc(Ae)&&!(Ae in xe)&&w(W,Ae,fe[Ae],null,Ie,re.children,ce,Ee,Bt);for(const Ae in xe){if(sc(Ae))continue;const Pe=xe[Ae],$e=fe[Ae];Pe!==$e&&Ae!=="value"&&w(W,Ae,$e,Pe,Ie,re.children,ce,Ee,Bt)}"value"in xe&&w(W,"value",fe.value,xe.value,Ie)}},_e=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe)=>{const $e=re.el=W?W.el:P(""),Je=re.anchor=W?W.anchor:P("");let{patchFlag:rt,dynamicChildren:Ye,slotScopeIds:Qe}=re;Qe&&(Ae=Ae?Ae.concat(Qe):Qe),W==null?(n($e,fe,xe),n(Je,fe,xe),ie(re.children||[],fe,Je,ce,Ee,Ie,Ae,Pe)):rt>0&&rt&64&&Ye&&W.dynamicChildren?(Me(W.dynamicChildren,Ye,fe,ce,Ee,Ie,Ae),(re.key!=null||ce&&re===ce.subTree)&&py(W,re,!0)):Ze(W,re,fe,Je,ce,Ee,Ie,Ae,Pe)},at=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe)=>{re.slotScopeIds=Ae,W==null?re.shapeFlag&512?ce.ctx.activate(re,fe,xe,Ie,Pe):pt(re,fe,xe,ce,Ee,Ie,Pe):tr(W,re,Pe)},pt=(W,re,fe,xe,ce,Ee,Ie)=>{const Ae=W.component=im(W,xe,ce);if(Ph(W)&&(Ae.ctx.renderer=jr),um(Ae),Ae.asyncDep){if(ce&&ce.registerDep(Ae,$t,Ie),!W.el){const Pe=Ae.subTree=cs(ka);ke(null,Pe,re,fe)}}else $t(Ae,W,re,fe,ce,Ee,Ie)},tr=(W,re,fe)=>{const xe=re.component=W.component;if(v0(W,re,fe))if(xe.asyncDep&&!xe.asyncResolved){wt(xe,re,fe);return}else xe.next=re,i0(xe.update),xe.effect.dirty=!0,xe.update();else re.el=W.el,xe.vnode=re},$t=(W,re,fe,xe,ce,Ee,Ie)=>{const Ae=()=>{if(W.isMounted){let{next:Je,bu:rt,u:Ye,parent:Qe,vnode:it}=W;{const ot=vy(W);if(ot){Je&&(Je.el=it.el,wt(W,Je,Ie)),ot.asyncDep.then(()=>{W.isUnmounted||Ae()});return}}let _t=Je,dt;_f(W,!1),Je?(Je.el=it.el,wt(W,Je,Ie)):Je=it,rt&&Dh(rt),(dt=Je.props&&Je.props.onVnodeBeforeUpdate)&&Pu(dt,Qe,Je,it),_f(W,!0);const Ct=Hh(W),Pt=W.subTree;W.subTree=Ct,ue(Pt,Ct,H(Pt.el),Ar(Pt),W,ce,Ee),Je.el=Ct.el,_t===null&&g0(W,Ct.el),Ye&&da(Ye,ce),(dt=Je.props&&Je.props.onVnodeUpdated)&&da(()=>Pu(dt,Qe,Je,it),ce)}else{let Je;const{el:rt,props:Ye}=re,{bm:Qe,m:it,parent:_t}=W,dt=ac(re);if(_f(W,!1),Qe&&Dh(Qe),!dt&&(Je=Ye&&Ye.onVnodeBeforeMount)&&Pu(Je,_t,re),_f(W,!0),rt&&$r){const Ct=()=>{W.subTree=Hh(W),$r(rt,W.subTree,W,ce,null)};dt?re.type.__asyncLoader().then(()=>!W.isUnmounted&&Ct()):Ct()}else{const Ct=W.subTree=Hh(W);ue(null,Ct,fe,xe,W,ce,Ee),re.el=Ct.el}if(it&&da(it,ce),!dt&&(Je=Ye&&Ye.onVnodeMounted)){const Ct=re;da(()=>Pu(Je,_t,Ct),ce)}(re.shapeFlag&256||_t&&ac(_t.vnode)&&_t.vnode.shapeFlag&256)&&W.a&&da(W.a,ce),W.isMounted=!0,re=fe=xe=null}},Pe=W.effect=new Av(Ae,qi,()=>Fv($e),W.scope),$e=W.update=()=>{Pe.dirty&&Pe.run()};$e.id=W.uid,_f(W,!0),$e()},wt=(W,re,fe)=>{re.component=W;const xe=W.vnode.props;W.vnode=re,W.next=null,j0(W,re.props,xe,fe),L0(W,re.children,fe),mf(),sg(W),$f()},Ze=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe=!1)=>{const $e=W&&W.children,Je=W?W.shapeFlag:0,rt=re.children,{patchFlag:Ye,shapeFlag:Qe}=re;if(Ye>0){if(Ye&128){Jt($e,rt,fe,xe,ce,Ee,Ie,Ae,Pe);return}else if(Ye&256){mt($e,rt,fe,xe,ce,Ee,Ie,Ae,Pe);return}}Qe&8?(Je&16&&Bt($e,ce,Ee),rt!==$e&&T(fe,rt)):Je&16?Qe&16?Jt($e,rt,fe,xe,ce,Ee,Ie,Ae,Pe):Bt($e,ce,Ee,!0):(Je&8&&T(fe,""),Qe&16&&ie(rt,fe,xe,ce,Ee,Ie,Ae,Pe))},mt=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe)=>{W=W||xo,re=re||xo;const $e=W.length,Je=re.length,rt=Math.min($e,Je);let Ye;for(Ye=0;Ye<rt;Ye++){const Qe=re[Ye]=Pe?lf(re[Ye]):Nu(re[Ye]);ue(W[Ye],Qe,fe,null,ce,Ee,Ie,Ae,Pe)}$e>Je?Bt(W,ce,Ee,!0,!1,rt):ie(re,fe,xe,ce,Ee,Ie,Ae,Pe,rt)},Jt=(W,re,fe,xe,ce,Ee,Ie,Ae,Pe)=>{let $e=0;const Je=re.length;let rt=W.length-1,Ye=Je-1;for(;$e<=rt&&$e<=Ye;){const Qe=W[$e],it=re[$e]=Pe?lf(re[$e]):Nu(re[$e]);if(Sf(Qe,it))ue(Qe,it,fe,null,ce,Ee,Ie,Ae,Pe);else break;$e++}for(;$e<=rt&&$e<=Ye;){const Qe=W[rt],it=re[Ye]=Pe?lf(re[Ye]):Nu(re[Ye]);if(Sf(Qe,it))ue(Qe,it,fe,null,ce,Ee,Ie,Ae,Pe);else break;rt--,Ye--}if($e>rt){if($e<=Ye){const Qe=Ye+1,it=Qe<Je?re[Qe].el:xe;for(;$e<=Ye;)ue(null,re[$e]=Pe?lf(re[$e]):Nu(re[$e]),fe,it,ce,Ee,Ie,Ae,Pe),$e++}}else if($e>Ye)for(;$e<=rt;)ht(W[$e],ce,Ee,!0),$e++;else{const Qe=$e,it=$e,_t=new Map;for($e=it;$e<=Ye;$e++){const xt=re[$e]=Pe?lf(re[$e]):Nu(re[$e]);xt.key!=null&&_t.set(xt.key,$e)}let dt,Ct=0;const Pt=Ye-it+1;let ot=!1,ks=0;const as=new Array(Pt);for($e=0;$e<Pt;$e++)as[$e]=0;for($e=Qe;$e<=rt;$e++){const xt=W[$e];if(Ct>=Pt){ht(xt,ce,Ee,!0);continue}let It;if(xt.key!=null)It=_t.get(xt.key);else for(dt=it;dt<=Ye;dt++)if(as[dt-it]===0&&Sf(xt,re[dt])){It=dt;break}It===void 0?ht(xt,ce,Ee,!0):(as[It-it]=$e+1,It>=ks?ks=It:ot=!0,ue(xt,re[It],fe,null,ce,Ee,Ie,Ae,Pe),Ct++)}const Xr=ot?q0(as):xo;for(dt=Xr.length-1,$e=Pt-1;$e>=0;$e--){const xt=it+$e,It=re[xt],yn=xt+1<Je?re[xt+1].el:xe;as[$e]===0?ue(null,It,fe,yn,ce,Ee,Ie,Ae,Pe):ot&&(dt<0||$e!==Xr[dt]?Zt(It,fe,yn,2):dt--)}}},Zt=(W,re,fe,xe,ce=null)=>{const{el:Ee,type:Ie,transition:Ae,children:Pe,shapeFlag:$e}=W;if($e&6){Zt(W.component.subTree,re,fe,xe);return}if($e&128){W.suspense.move(re,fe,xe);return}if($e&64){Ie.move(W,re,fe,jr);return}if(Ie===xn){n(Ee,re,fe);for(let rt=0;rt<Pe.length;rt++)Zt(Pe[rt],re,fe,xe);n(W.anchor,re,fe);return}if(Ie===zh){V(W,re,fe);return}if(xe!==2&&$e&1&&Ae)if(xe===0)Ae.beforeEnter(Ee),n(Ee,re,fe),da(()=>Ae.enter(Ee),ce);else{const{leave:rt,delayLeave:Ye,afterLeave:Qe}=Ae,it=()=>n(Ee,re,fe),_t=()=>{rt(Ee,()=>{it(),Qe&&Qe()})};Ye?Ye(Ee,it,_t):_t()}else n(Ee,re,fe)},ht=(W,re,fe,xe=!1,ce=!1)=>{const{type:Ee,props:Ie,ref:Ae,children:Pe,dynamicChildren:$e,shapeFlag:Je,patchFlag:rt,dirs:Ye,memoIndex:Qe}=W;if(rt===-2&&(ce=!1),Ae!=null&&Mp(Ae,null,fe,W,!0),Qe!=null&&(re.renderCache[Qe]=void 0),Je&256){re.ctx.deactivate(W);return}const it=Je&1&&Ye,_t=!ac(W);let dt;if(_t&&(dt=Ie&&Ie.onVnodeBeforeUnmount)&&Pu(dt,re,W),Je&6)Pr(W.component,fe,xe);else{if(Je&128){W.suspense.unmount(fe,xe);return}it&&Cf(W,null,re,"beforeUnmount"),Je&64?W.type.remove(W,re,fe,jr,xe):$e&&(Ee!==xn||rt>0&&rt&64)?Bt($e,re,fe,!1,!0):(Ee===xn&&rt&384||!ce&&Je&16)&&Bt(Pe,re,fe),xe&&Ir(W)}(_t&&(dt=Ie&&Ie.onVnodeUnmounted)||it)&&da(()=>{dt&&Pu(dt,re,W),it&&Cf(W,null,re,"unmounted")},fe)},Ir=W=>{const{type:re,el:fe,anchor:xe,transition:ce}=W;if(re===xn){Qt(fe,xe);return}if(re===zh){Q(W);return}const Ee=()=>{v(fe),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(W.shapeFlag&1&&ce&&!ce.persisted){const{leave:Ie,delayLeave:Ae}=ce,Pe=()=>Ie(fe,Ee);Ae?Ae(W.el,Ee,Pe):Pe()}else Ee()},Qt=(W,re)=>{let fe;for(;W!==re;)fe=B(W),v(W),W=fe;v(re)},Pr=(W,re,fe)=>{const{bum:xe,scope:ce,update:Ee,subTree:Ie,um:Ae,m:Pe,a:$e}=W;pg(Pe),pg($e),xe&&Dh(xe),ce.stop(),Ee&&(Ee.active=!1,ht(Ie,W,re,fe)),Ae&&da(Ae,re),da(()=>{W.isUnmounted=!0},re),re&&re.pendingBranch&&!re.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===re.pendingId&&(re.deps--,re.deps===0&&re.resolve())},Bt=(W,re,fe,xe=!1,ce=!1,Ee=0)=>{for(let Ie=Ee;Ie<W.length;Ie++)ht(W[Ie],re,fe,xe,ce)},Ar=W=>W.shapeFlag&6?Ar(W.component.subTree):W.shapeFlag&128?W.suspense.next():B(W.anchor||W.el);let Ur=!1;const rr=(W,re,fe)=>{W==null?re._vnode&&ht(re._vnode,null,null,!0):ue(re._vnode||null,W,re,null,null,null,fe),Ur||(Ur=!0,sg(),Zd(),Ur=!1),re._vnode=W},jr={p:ue,um:ht,m:Zt,r:Ir,mt:pt,mc:ie,pc:Ze,pbc:Me,n:Ar,o:t};let Xt,$r;return r&&([Xt,$r]=r(jr)),{render:rr,hydrate:Xt,createApp:O0(rr,Xt)}}function Bh({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function _f({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function B0(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function py(t,r,e=!1){const n=t.children,v=r.children;if(yt(n)&&yt(v))for(let w=0;w<n.length;w++){const _=n[w];let P=v[w];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=v[w]=lf(v[w]),P.el=_.el),!e&&P.patchFlag!==-2&&py(_,P)),P.type===kh&&(P.el=_.el)}}function q0(t){const r=t.slice(),e=[0];let n,v,w,_,P;const E=t.length;for(n=0;n<E;n++){const N=t[n];if(N!==0){if(v=e[e.length-1],t[v]<N){r[n]=v,e.push(n);continue}for(w=0,_=e.length-1;w<_;)P=w+_>>1,t[e[P]]<N?w=P+1:_=P;N<t[e[w]]&&(w>0&&(r[n]=e[w-1]),e[w]=n)}}for(w=e.length,_=e[w-1];w-- >0;)e[w]=_,_=r[_];return e}function vy(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:vy(r)}function pg(t){if(t)for(let r=0;r<t.length;r++)t[r].active=!1}const z0=Symbol.for("v-scx"),K0=()=>Rc(z0),Ec={};function uc(t,r,e){return gy(t,r,e)}function gy(t,r,{immediate:e,deep:n,flush:v,once:w,onTrack:_,onTrigger:P}=rs){if(r&&w){const Z=r;r=(...ee)=>{Z(...ee),X()}}const E=An,N=Z=>n===!0?Z:Ef(Z,n===!1?1:void 0);let T,H=!1,B=!1;if(Ea(t)?(T=()=>t.value,H=ih(t)):nc(t)?(T=()=>N(t),H=!0):yt(t)?(B=!0,H=t.some(Z=>nc(Z)||ih(Z)),T=()=>t.map(Z=>{if(Ea(Z))return Z.value;if(nc(Z))return N(Z);if(Tt(Z))return vf(Z,E,2)})):Tt(t)?r?T=()=>vf(t,E,2):T=()=>(J&&J(),Ki(t,E,3,[we])):T=qi,r&&n){const Z=T;T=()=>Ef(Z())}let J,we=Z=>{J=V.onStop=()=>{vf(Z,E,4),J=V.onStop=void 0}},ue;if(Eh)if(we=qi,r?e&&Ki(r,E,3,[T(),B?[]:void 0,we]):T(),v==="sync"){const Z=K0();ue=Z.__watcherHandles||(Z.__watcherHandles=[])}else return qi;let oe=B?new Array(t.length).fill(Ec):Ec;const ke=()=>{if(!(!V.active||!V.dirty))if(r){const Z=V.run();(n||H||(B?Z.some((ee,ie)=>df(ee,oe[ie])):df(Z,oe)))&&(J&&J(),Ki(r,E,3,[Z,oe===Ec?void 0:B&&oe[0]===Ec?[]:oe,we]),oe=Z)}else V.run()};ke.allowRecurse=!!r;let G;v==="sync"?G=ke:v==="post"?G=()=>da(ke,E&&E.suspense):(ke.pre=!0,E&&(ke.id=E.uid),G=()=>Fv(ke));const V=new Av(T,qi,G),Q=Nw(),X=()=>{V.stop(),Q&&$v(Q.effects,V)};return r?e?ke():oe=V.run():v==="post"?da(V.run.bind(V),E&&E.suspense):V.run(),ue&&ue.push(X),X}function V0(t,r,e){const n=this.proxy,v=Ss(t)?t.includes(".")?dy(n,t):()=>n[t]:t.bind(n,n);let w;Tt(r)?w=r:(w=r.handler,e=r);const _=$c(this),P=gy(v,w.bind(n),e);return _(),P}function dy(t,r){const e=r.split(".");return()=>{let n=t;for(let v=0;v<e.length&&n;v++)n=n[e[v]];return n}}function Ef(t,r=1/0,e){if(r<=0||!Zr(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,Ea(t))Ef(t.value,r,e);else if(yt(t))for(let n=0;n<t.length;n++)Ef(t[n],r,e);else if(bd(t)||bo(t))t.forEach(n=>{Ef(n,r,e)});else if(_d(t)){for(const n in t)Ef(t[n],r,e);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Ef(t[n],r,e)}return t}const Ph=t=>t.type.__isKeepAlive;function W0(t,r){yy(t,"a",r)}function G0(t,r){yy(t,"da",r)}function yy(t,r,e=An){const n=t.__wdc||(t.__wdc=()=>{let v=e;for(;v;){if(v.isDeactivated)return;v=v.parent}return t()});if(_h(r,n,e),e){let v=e.parent;for(;v&&v.parent;)Ph(v.parent.vnode)&&J0(n,r,e,v),v=v.parent}}function J0(t,r,e,n){const v=_h(r,t,n,!0);ty(()=>{$v(n[r],v)},e)}const af=Symbol("_leaveCb"),Sc=Symbol("_enterCb");function Z0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yd(()=>{t.isMounted=!0}),ey(()=>{t.isUnmounting=!0}),t}const Di=[Function,Array],wy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Di,onEnter:Di,onAfterEnter:Di,onEnterCancelled:Di,onBeforeLeave:Di,onLeave:Di,onAfterLeave:Di,onLeaveCancelled:Di,onBeforeAppear:Di,onAppear:Di,onAfterAppear:Di,onAppearCancelled:Di},my=t=>{const r=t.subTree;return r.component?my(r.component):r},Q0={name:"BaseTransition",props:wy,setup(t,{slots:r}){const e=lm(),n=Z0();return()=>{const v=r.default&&xy(r.default(),!0);if(!v||!v.length)return;let w=v[0];if(v.length>1){for(const B of v)if(B.type!==ka){w=B;break}}const _=mr(t),{mode:P}=_;if(n.isLeaving)return qh(w);const E=vg(w);if(!E)return qh(w);let N=Ep(E,_,n,e,B=>N=B);oh(E,N);const T=e.subTree,H=T&&vg(T);if(H&&H.type!==ka&&!Sf(E,H)&&my(e).type!==ka){const B=Ep(H,_,n,e);if(oh(H,B),P==="out-in"&&E.type!==ka)return n.isLeaving=!0,B.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},qh(w);P==="in-out"&&E.type!==ka&&(B.delayLeave=(J,we,ue)=>{const oe=$y(n,H);oe[String(H.key)]=H,J[af]=()=>{we(),J[af]=void 0,delete N.delayedLeave},N.delayedLeave=ue})}return w}}},X0=Q0;function $y(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Ep(t,r,e,n,v){const{appear:w,mode:_,persisted:P=!1,onBeforeEnter:E,onEnter:N,onAfterEnter:T,onEnterCancelled:H,onBeforeLeave:B,onLeave:J,onAfterLeave:we,onLeaveCancelled:ue,onBeforeAppear:oe,onAppear:ke,onAfterAppear:G,onAppearCancelled:V}=r,Q=String(t.key),X=$y(e,t),Z=(ae,Me)=>{ae&&Ki(ae,n,9,Me)},ee=(ae,Me)=>{const Te=Me[1];Z(ae,Me),yt(ae)?ae.every(_e=>_e.length<=1)&&Te():ae.length<=1&&Te()},ie={mode:_,persisted:P,beforeEnter(ae){let Me=E;if(!e.isMounted)if(w)Me=oe||E;else return;ae[af]&&ae[af](!0);const Te=X[Q];Te&&Sf(t,Te)&&Te.el[af]&&Te.el[af](),Z(Me,[ae])},enter(ae){let Me=N,Te=T,_e=H;if(!e.isMounted)if(w)Me=ke||N,Te=G||T,_e=V||H;else return;let at=!1;const pt=ae[Sc]=tr=>{at||(at=!0,tr?Z(_e,[ae]):Z(Te,[ae]),ie.delayedLeave&&ie.delayedLeave(),ae[Sc]=void 0)};Me?ee(Me,[ae,pt]):pt()},leave(ae,Me){const Te=String(t.key);if(ae[Sc]&&ae[Sc](!0),e.isUnmounting)return Me();Z(B,[ae]);let _e=!1;const at=ae[af]=pt=>{_e||(_e=!0,Me(),pt?Z(ue,[ae]):Z(we,[ae]),ae[af]=void 0,X[Te]===t&&delete X[Te])};X[Te]=t,J?ee(J,[ae,at]):at()},clone(ae){const Me=Ep(ae,r,e,n,v);return v&&v(Me),Me}};return ie}function qh(t){if(Ph(t))return t=yf(t),t.children=null,t}function vg(t){if(!Ph(t))return t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&Tt(e.default))return e.default()}}function oh(t,r){t.shapeFlag&6&&t.component?oh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function xy(t,r=!1,e){let n=[],v=0;for(let w=0;w<t.length;w++){let _=t[w];const P=e==null?_.key:String(e)+String(_.key!=null?_.key:w);_.type===xn?(_.patchFlag&128&&v++,n=n.concat(xy(_.children,r,P))):(r||_.type!==ka)&&n.push(P!=null?yf(_,{key:P}):_)}if(v>1)for(let w=0;w<n.length;w++)n[w].patchFlag=-2;return n}const Y0=t=>t.__isTeleport,xn=Symbol.for("v-fgt"),kh=Symbol.for("v-txt"),ka=Symbol.for("v-cmt"),zh=Symbol.for("v-stc"),fc=[];let _u=null;function os(t=!1){fc.push(_u=t?null:[])}function em(){fc.pop(),_u=fc[fc.length-1]||null}let yc=1;function gg(t){yc+=t}function by(t){return t.dynamicChildren=yc>0?_u||xo:null,em(),yc>0&&_u&&_u.push(t),t}function Us(t,r,e,n,v,w){return by(zi(t,r,e,n,v,w,!0))}function Mh(t,r,e,n,v){return by(cs(t,r,e,n,v,!0))}function ch(t){return t?t.__v_isVNode===!0:!1}function Sf(t,r){return t.type===r.type&&t.key===r.key}const Ay=({key:t})=>t??null,Dc=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ss(t)||Ea(t)||Tt(t)?{i:ca,r:t,k:r,f:!!e}:t:null);function zi(t,r=null,e=null,n=0,v=null,w=t===xn?0:1,_=!1,P=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&Ay(r),ref:r&&Dc(r),scopeId:Ch,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:n,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:ca};return P?(Iv(E,e),w&128&&t.normalize(E)):e&&(E.shapeFlag|=Ss(e)?8:16),yc>0&&!_&&_u&&(E.patchFlag>0||w&6)&&E.patchFlag!==32&&_u.push(E),E}const cs=tm;function tm(t,r=null,e=null,n=0,v=null,w=!1){if((!t||t===d0)&&(t=ka),ch(t)){const P=yf(t,r,!0);return e&&Iv(P,e),yc>0&&!w&&_u&&(P.shapeFlag&6?_u[_u.indexOf(t)]=P:_u.push(P)),P.patchFlag=-2,P}if(hm(t)&&(t=t.__vccOpts),r){r=rm(r);let{class:P,style:E}=r;P&&!Ss(P)&&(r.class=Cn(P)),Zr(E)&&(zd(E)&&!yt(E)&&(E=Es({},E)),r.style=bv(E))}const _=Ss(t)?1:y0(t)?128:Y0(t)?64:Zr(t)?4:Tt(t)?2:0;return zi(t,r,e,n,v,_,w,!0)}function rm(t){return t?zd(t)||ly(t)?Es({},t):t:null}function yf(t,r,e=!1,n=!1){const{props:v,ref:w,patchFlag:_,children:P,transition:E}=t,N=r?sm(v||{},r):v,T={__v_isVNode:!0,__v_skip:!0,type:t.type,props:N,key:N&&Ay(N),ref:r&&r.ref?e&&w?yt(w)?w.concat(Dc(r)):[w,Dc(r)]:Dc(r):w,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:P,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==xn?_===-1?16:_|16:_,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:E,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&yf(t.ssContent),ssFallback:t.ssFallback&&yf(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return E&&n&&oh(T,E.clone(T)),T}function Cu(t=" ",r=0){return cs(kh,null,t,r)}function zo(t="",r=!1){return r?(os(),Mh(ka,null,t)):cs(ka,null,t)}function Nu(t){return t==null||typeof t=="boolean"?cs(ka):yt(t)?cs(xn,null,t.slice()):typeof t=="object"?lf(t):cs(kh,null,String(t))}function lf(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:yf(t)}function Iv(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(yt(r))e=16;else if(typeof r=="object")if(n&65){const v=r.default;v&&(v._c&&(v._d=!1),Iv(t,v()),v._c&&(v._d=!0));return}else{e=32;const v=r._;!v&&!ly(r)?r._ctx=ca:v===3&&ca&&(ca.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else Tt(r)?(r={default:r,_ctx:ca},e=32):(r=String(r),n&64?(e=16,r=[Cu(r)]):e=8);t.children=r,t.shapeFlag|=e}function sm(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const v in n)if(v==="class")r.class!==n.class&&(r.class=Cn([r.class,n.class]));else if(v==="style")r.style=bv([r.style,n.style]);else if(wh(v)){const w=r[v],_=n[v];_&&w!==_&&!(yt(w)&&w.includes(_))&&(r[v]=w?[].concat(w,_):_)}else v!==""&&(r[v]=n[v])}return r}function Pu(t,r,e,n=null){Ki(t,r,7,[e,n])}const nm=ny();let am=0;function im(t,r,e){const n=t.type,v=(r?r.appContext:t.appContext)||nm,w={uid:am++,vnode:t,type:n,parent:r,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ew(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fy(n,v),emitsOptions:Xd(n,v),emit:null,emitted:null,propsDefaults:rs,inheritAttrs:n.inheritAttrs,ctx:rs,data:rs,props:rs,attrs:rs,slots:rs,refs:rs,setupState:rs,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=r?r.root:w,w.emit=f0.bind(null,w),t.ce&&t.ce(w),w}let An=null;const lm=()=>An||ca;let hh,Sp;{const t=Md(),r=(e,n)=>{let v;return(v=t[e])||(v=t[e]=[]),v.push(n),w=>{v.length>1?v.forEach(_=>_(w)):v[0](w)}};hh=r("__VUE_INSTANCE_SETTERS__",e=>An=e),Sp=r("__VUE_SSR_SETTERS__",e=>Eh=e)}const $c=t=>{const r=An;return hh(t),t.scope.on(),()=>{t.scope.off(),hh(r)}},dg=()=>{An&&An.scope.off(),hh(null)};function Cy(t){return t.vnode.shapeFlag&4}let Eh=!1;function um(t,r=!1){r&&Sp(r);const{props:e,children:n}=t.vnode,v=Cy(t);I0(t,e,v,r),D0(t,n);const w=v?fm(t,r):void 0;return r&&Sp(!1),w}function fm(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,P0);const{setup:n}=e;if(n){const v=t.setupContext=n.length>1?cm(t):null,w=$c(t);mf();const _=vf(n,t,0,[t.props,v]);if($f(),w(),Ad(_)){if(_.then(dg,dg),r)return _.then(P=>{yg(t,P,r)}).catch(P=>{bh(P,t,0)});t.asyncDep=_}else yg(t,_,r)}else _y(t,r)}function yg(t,r,e){Tt(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:Zr(r)&&(t.setupState=Wd(r)),_y(t,e)}let wg;function _y(t,r,e){const n=t.type;if(!t.render){if(!r&&wg&&!n.render){const v=n.template||Ov(t).template;if(v){const{isCustomElement:w,compilerOptions:_}=t.appContext.config,{delimiters:P,compilerOptions:E}=n,N=Es(Es({isCustomElement:w,delimiters:P},_),E);n.render=wg(v,N)}}t.render=n.render||qi}{const v=$c(t);mf();try{k0(t)}finally{$f(),v()}}}const om={get(t,r){return Ma(t,"get",""),t[r]}};function cm(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,om),slots:t.slots,emit:t.emit,expose:r}}function jv(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Wd(Xw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in ic)return ic[e](t)},has(r,e){return e in r||e in ic}})):t.proxy}function hm(t){return Tt(t)&&"__vccOpts"in t}const pm=(t,r)=>Yw(t,r,Eh);function ef(t,r,e){const n=arguments.length;return n===2?Zr(r)&&!yt(r)?ch(r)?cs(t,null,[r]):cs(t,r):cs(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&ch(e)&&(e=[e]),cs(t,r,e))}const vm="3.4.31";/**
* @vue/runtime-dom v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gm="http://www.w3.org/2000/svg",dm="http://www.w3.org/1998/Math/MathML",qu=typeof document<"u"?document:null,mg=qu&&qu.createElement("template"),ym={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const v=r==="svg"?qu.createElementNS(gm,t):r==="mathml"?qu.createElementNS(dm,t):e?qu.createElement(t,{is:e}):qu.createElement(t);return t==="select"&&n&&n.multiple!=null&&v.setAttribute("multiple",n.multiple),v},createText:t=>qu.createTextNode(t),createComment:t=>qu.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>qu.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,v,w){const _=e?e.previousSibling:r.lastChild;if(v&&(v===w||v.nextSibling))for(;r.insertBefore(v.cloneNode(!0),e),!(v===w||!(v=v.nextSibling)););else{mg.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const P=mg.content;if(n==="svg"||n==="mathml"){const E=P.firstChild;for(;E.firstChild;)P.appendChild(E.firstChild);P.removeChild(E)}r.insertBefore(P,e)}return[_?_.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},Xu="transition",Wo="animation",wc=Symbol("_vtc"),Rv=(t,{slots:r})=>ef(X0,wm(t),r);Rv.displayName="Transition";const Py={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Rv.props=Es({},wy,Py);const Pf=(t,r=[])=>{yt(t)?t.forEach(e=>e(...r)):t&&t(...r)},$g=t=>t?yt(t)?t.some(r=>r.length>1):t.length>1:!1;function wm(t){const r={};for(const _e in t)_e in Py||(r[_e]=t[_e]);if(t.css===!1)return r;const{name:e="v",type:n,duration:v,enterFromClass:w=`${e}-enter-from`,enterActiveClass:_=`${e}-enter-active`,enterToClass:P=`${e}-enter-to`,appearFromClass:E=w,appearActiveClass:N=_,appearToClass:T=P,leaveFromClass:H=`${e}-leave-from`,leaveActiveClass:B=`${e}-leave-active`,leaveToClass:J=`${e}-leave-to`}=t,we=mm(v),ue=we&&we[0],oe=we&&we[1],{onBeforeEnter:ke,onEnter:G,onEnterCancelled:V,onLeave:Q,onLeaveCancelled:X,onBeforeAppear:Z=ke,onAppear:ee=G,onAppearCancelled:ie=V}=r,ae=(_e,at,pt)=>{kf(_e,at?T:P),kf(_e,at?N:_),pt&&pt()},Me=(_e,at)=>{_e._isLeaving=!1,kf(_e,H),kf(_e,J),kf(_e,B),at&&at()},Te=_e=>(at,pt)=>{const tr=_e?ee:G,$t=()=>ae(at,_e,pt);Pf(tr,[at,$t]),xg(()=>{kf(at,_e?E:w),Yu(at,_e?T:P),$g(tr)||bg(at,n,ue,$t)})};return Es(r,{onBeforeEnter(_e){Pf(ke,[_e]),Yu(_e,w),Yu(_e,_)},onBeforeAppear(_e){Pf(Z,[_e]),Yu(_e,E),Yu(_e,N)},onEnter:Te(!1),onAppear:Te(!0),onLeave(_e,at){_e._isLeaving=!0;const pt=()=>Me(_e,at);Yu(_e,H),Yu(_e,B),bm(),xg(()=>{_e._isLeaving&&(kf(_e,H),Yu(_e,J),$g(Q)||bg(_e,n,oe,pt))}),Pf(Q,[_e,pt])},onEnterCancelled(_e){ae(_e,!1),Pf(V,[_e])},onAppearCancelled(_e){ae(_e,!0),Pf(ie,[_e])},onLeaveCancelled(_e){Me(_e),Pf(X,[_e])}})}function mm(t){if(t==null)return null;if(Zr(t))return[Kh(t.enter),Kh(t.leave)];{const r=Kh(t);return[r,r]}}function Kh(t){return bw(t)}function Yu(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[wc]||(t[wc]=new Set)).add(r)}function kf(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[wc];e&&(e.delete(r),e.size||(t[wc]=void 0))}function xg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let $m=0;function bg(t,r,e,n){const v=t._endId=++$m,w=()=>{v===t._endId&&n()};if(e)return setTimeout(w,e);const{type:_,timeout:P,propCount:E}=xm(t,r);if(!_)return n();const N=_+"end";let T=0;const H=()=>{t.removeEventListener(N,B),w()},B=J=>{J.target===t&&++T>=E&&H()};setTimeout(()=>{T<E&&H()},P+1),t.addEventListener(N,B)}function xm(t,r){const e=window.getComputedStyle(t),n=we=>(e[we]||"").split(", "),v=n(`${Xu}Delay`),w=n(`${Xu}Duration`),_=Ag(v,w),P=n(`${Wo}Delay`),E=n(`${Wo}Duration`),N=Ag(P,E);let T=null,H=0,B=0;r===Xu?_>0&&(T=Xu,H=_,B=w.length):r===Wo?N>0&&(T=Wo,H=N,B=E.length):(H=Math.max(_,N),T=H>0?_>N?Xu:Wo:null,B=T?T===Xu?w.length:E.length:0);const J=T===Xu&&/\b(transform|all)(,|$)/.test(n(`${Xu}Property`).toString());return{type:T,timeout:H,propCount:B,hasTransform:J}}function Ag(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Cg(e)+Cg(t[n])))}function Cg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function bm(){return document.body.offsetHeight}function Am(t,r,e){const n=t[wc];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const _g=Symbol("_vod"),Cm=Symbol("_vsh"),_m=Symbol(""),Pm=/(^|;)\s*display\s*:/;function km(t,r,e){const n=t.style,v=Ss(e);let w=!1;if(e&&!v){if(r)if(Ss(r))for(const _ of r.split(";")){const P=_.slice(0,_.indexOf(":")).trim();e[P]==null&&Lc(n,P,"")}else for(const _ in r)e[_]==null&&Lc(n,_,"");for(const _ in e)_==="display"&&(w=!0),Lc(n,_,e[_])}else if(v){if(r!==e){const _=n[_m];_&&(e+=";"+_),n.cssText=e,w=Pm.test(e)}}else r&&t.removeAttribute("style");_g in t&&(t[_g]=w?n.display:"",t[Cm]&&(n.display="none"))}const Pg=/\s*!important$/;function Lc(t,r,e){if(yt(e))e.forEach(n=>Lc(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=Mm(t,r);Pg.test(e)?t.setProperty(Vo(n),e.replace(Pg,""),"important"):t[n]=e}}const kg=["Webkit","Moz","ms"],Vh={};function Mm(t,r){const e=Vh[r];if(e)return e;let n=qo(r);if(n!=="filter"&&n in t)return Vh[r]=n;n=Pd(n);for(let v=0;v<kg.length;v++){const w=kg[v]+n;if(w in t)return Vh[r]=w}return r}const Mg="http://www.w3.org/1999/xlink";function Eg(t,r,e,n,v,w=Mw(r)){n&&r.startsWith("xlink:")?e==null?t.removeAttributeNS(Mg,r.slice(6,r.length)):t.setAttributeNS(Mg,r,e):e==null||w&&!Ed(e)?t.removeAttribute(r):t.setAttribute(r,w?"":wf(e)?String(e):e)}function Em(t,r,e,n,v,w,_){if(r==="innerHTML"||r==="textContent"){n&&_(n,v,w),t[r]=e??"";return}const P=t.tagName;if(r==="value"&&P!=="PROGRESS"&&!P.includes("-")){const N=P==="OPTION"?t.getAttribute("value")||"":t.value,T=e==null?"":String(e);(N!==T||!("_value"in t))&&(t.value=T),e==null&&t.removeAttribute(r),t._value=e;return}let E=!1;if(e===""||e==null){const N=typeof t[r];N==="boolean"?e=Ed(e):e==null&&N==="string"?(e="",E=!0):N==="number"&&(e=0,E=!0)}try{t[r]=e}catch{}E&&t.removeAttribute(r)}function Sm(t,r,e,n){t.addEventListener(r,e,n)}function Nm(t,r,e,n){t.removeEventListener(r,e,n)}const Sg=Symbol("_vei");function Fm(t,r,e,n,v=null){const w=t[Sg]||(t[Sg]={}),_=w[r];if(n&&_)_.value=n;else{const[P,E]=Om(r);if(n){const N=w[r]=jm(n,v);Sm(t,P,N,E)}else _&&(Nm(t,P,_,E),w[r]=void 0)}}const Ng=/(?:Once|Passive|Capture)$/;function Om(t){let r;if(Ng.test(t)){r={};let n;for(;n=t.match(Ng);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vo(t.slice(2)),r]}let Wh=0;const Tm=Promise.resolve(),Im=()=>Wh||(Tm.then(()=>Wh=0),Wh=Date.now());function jm(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;Ki(Rm(n,e.value),r,5,[n])};return e.value=t,e.attached=Im(),e}function Rm(t,r){if(yt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>v=>!v._stopped&&n&&n(v))}else return r}const Fg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Dm=(t,r,e,n,v,w,_,P,E)=>{const N=v==="svg";r==="class"?Am(t,n,N):r==="style"?km(t,e,n):wh(r)?mv(r)||Fm(t,r,e,n,_):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Lm(t,r,n,N))?(Em(t,r,n,w,_,P,E),!t.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&Eg(t,r,n,N,_,r!=="value")):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),Eg(t,r,n,N))};function Lm(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&Fg(r)&&Tt(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const v=t.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return Fg(r)&&Ss(e)?!1:r in t}const Hm=Es({patchProp:Dm},ym);let Og;function Um(){return Og||(Og=H0(Hm))}const Bm=(...t)=>{const r=Um().createApp(...t),{mount:e}=r;return r.mount=n=>{const v=zm(n);if(!v)return;const w=r._component;!Tt(w)&&!w.render&&!w.template&&(w.template=v.innerHTML),v.innerHTML="";const _=e(v,!1,qm(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),_},r};function qm(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zm(t){return Ss(t)?document.querySelector(t):t}function oc(){return oc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},oc.apply(this,arguments)}var Km=13,Vm=9,Wm=8,Gm=89,Nc=90,Jm=77,Tg=57,Ig=219,jg=222,Rg=192,Zm=27,Dg=100,Qm=3e3,Xm=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),Gh=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Ym=mc({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var v="border-top-left-radius",w="border-bottom-left-radius";if(e){e.style[v]=n[v],e.style[w]=n[w],r.style[v]="0",r.style[w]="0";var _=["background-color","margin-top","padding-top","font-family","font-size","line-height"];_.forEach(function(P){e.style[P]=n[P]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,v=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:v})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=oc({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,v=n.stack,w=n.offset;if(v.length&&w>-1){this.history.stack=v.slice(0,w+1);var _=this.history.stack.length;if(_>Dg){var P=_-Dg;this.history.stack=v.slice(P,_),this.history.offset=Math.max(this.history.offset-P,0)}}var E=Date.now();if(e){var N=this.history.stack[this.history.offset];if(N&&E-N.timestamp<Qm){var T,H,B=/[^a-z0-9]([a-z0-9]+)$/i,J=(T=this._getLines(N.value,N.selectionStart).pop())===null||T===void 0?void 0:T.match(B),we=(H=this._getLines(r.value,r.selectionStart).pop())===null||H===void 0?void 0:H.match(B);if(J&&we&&we[1].startsWith(J[1])){this.history.stack[this.history.offset]=oc({},r,{timestamp:E});return}}}this.history.stack.push(oc({},r,{timestamp:E})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,v=e.selectionStart,w=e.selectionEnd;this._recordChange({value:n,selectionStart:v,selectionEnd:w},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n-1];v&&(this._updateInput(v),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n+1];v&&(this._updateInput(v),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,v=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Zm&&(r.target.blur(),this.$emit("blur",r));var w=r.target,_=w.value,P=w.selectionStart,E=w.selectionEnd,N=(n?" ":"	").repeat(e);if(r.keyCode===Vm&&!v&&this.capture)if(r.preventDefault(),r.shiftKey){var T=this._getLines(_,P),H=T.length-1,B=this._getLines(_,E).length-1,J=_.split(`
`).map(function(_e,at){return at>=H&&at<=B&&_e.startsWith(N)?_e.substring(N.length):_e}).join(`
`);if(_!==J){var we=T[H];this._applyEdits({value:J,selectionStart:we.startsWith(N)?P-N.length:P,selectionEnd:E-(_.length-J.length)})}}else if(P!==E){var ue=this._getLines(_,P),oe=ue.length-1,ke=this._getLines(_,E).length-1,G=ue[oe];this._applyEdits({value:_.split(`
`).map(function(_e,at){return at>=oe&&at<=ke?N+_e:_e}).join(`
`),selectionStart:/\S/.test(G)?P+N.length:P,selectionEnd:E+N.length*(ke-oe+1)})}else{var V=P+N.length;this._applyEdits({value:_.substring(0,P)+N+_.substring(E),selectionStart:V,selectionEnd:V})}else if(r.keyCode===Wm){var Q=P!==E,X=_.substring(0,P);if(X.endsWith(N)&&!Q){r.preventDefault();var Z=P-N.length;this._applyEdits({value:_.substring(0,P-N.length)+_.substring(E),selectionStart:Z,selectionEnd:Z})}}else if(r.keyCode===Km){if(P===E){var ee=this._getLines(_,P).pop(),ie=ee==null?void 0:ee.match(/^\s+/);if(ie&&ie[0]){r.preventDefault();var ae=`
`+ie[0],Me=P+ae.length;this._applyEdits({value:_.substring(0,P)+ae+_.substring(E),selectionStart:Me,selectionEnd:Me})}}}else if(r.keyCode===Tg||r.keyCode===Ig||r.keyCode===jg||r.keyCode===Rg){var Te;r.keyCode===Tg&&r.shiftKey?Te=["(",")"]:r.keyCode===Ig?r.shiftKey?Te=["{","}"]:Te=["[","]"]:r.keyCode===jg?r.shiftKey?Te=['"','"']:Te=["'","'"]:r.keyCode===Rg&&!r.shiftKey&&(Te=["`","`"]),P!==E&&Te&&(r.preventDefault(),this._applyEdits({value:_.substring(0,P)+Te[0]+_.substring(P,E)+Te[1]+_.substring(E),selectionStart:P,selectionEnd:E+2}))}else(Gh?r.metaKey&&r.keyCode===Nc:r.ctrlKey&&r.keyCode===Nc)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(Gh?r.metaKey&&r.keyCode===Nc&&r.shiftKey:Xm?r.ctrlKey&&r.keyCode===Gm:r.ctrlKey&&r.keyCode===Nc&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===Jm&&r.ctrlKey&&(!Gh||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=ef("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=ef("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(P,E){return ef("div",{class:"prism-editor__line-number token comment"},""+ ++E)})]),v=ef("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(E){r.$emit("click",E)},onKeyup:function(E){r.$emit("keyup",E)},onFocus:function(E){r.$emit("focus",E)},onBlur:function(E){r.$emit("blur",E)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),w=ef("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),_=ef("div",{class:"prism-editor__container"},[v,w]);return ef("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,_])}}),Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t$(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var v=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,v.get?v:{enumerable:!0,get:function(){return t[n]}})}),e}var r$={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,w=0,_={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof E?new E(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++w}),G.__id},clone:function G(V,Q){Q=Q||{};var X,Z;switch(P.util.type(V)){case"Object":if(Z=P.util.objId(V),Q[Z])return Q[Z];X={},Q[Z]=X;for(var ee in V)V.hasOwnProperty(ee)&&(X[ee]=G(V[ee],Q));return X;case"Array":return Z=P.util.objId(V),Q[Z]?Q[Z]:(X=[],Q[Z]=X,V.forEach(function(ie,ae){X[ae]=G(ie,Q)}),X);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Q in V)if(V[Q].src==G)return V[Q]}return null}},isActive:function(G,V,Q){for(var X="no-"+V;G;){var Z=G.classList;if(Z.contains(V))return!0;if(Z.contains(X))return!1;G=G.parentElement}return!!Q}},languages:{plain:_,plaintext:_,text:_,txt:_,extend:function(G,V){var Q=P.util.clone(P.languages[G]);for(var X in V)Q[X]=V[X];return Q},insertBefore:function(G,V,Q,X){X=X||P.languages;var Z=X[G],ee={};for(var ie in Z)if(Z.hasOwnProperty(ie)){if(ie==V)for(var ae in Q)Q.hasOwnProperty(ae)&&(ee[ae]=Q[ae]);Q.hasOwnProperty(ie)||(ee[ie]=Z[ie])}var Me=X[G];return X[G]=ee,P.languages.DFS(P.languages,function(Te,_e){_e===Me&&Te!=G&&(this[Te]=ee)}),ee},DFS:function G(V,Q,X,Z){Z=Z||{};var ee=P.util.objId;for(var ie in V)if(V.hasOwnProperty(ie)){Q.call(V,ie,V[ie],X||ie);var ae=V[ie],Me=P.util.type(ae);Me==="Object"&&!Z[ee(ae)]?(Z[ee(ae)]=!0,G(ae,Q,null,Z)):Me==="Array"&&!Z[ee(ae)]&&(Z[ee(ae)]=!0,G(ae,Q,ie,Z))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Q){var X={callback:Q,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),P.hooks.run("before-all-elements-highlight",X);for(var Z=0,ee;ee=X.elements[Z++];)P.highlightElement(ee,V===!0,X.callback)},highlightElement:function(G,V,Q){var X=P.util.getLanguage(G),Z=P.languages[X];P.util.setLanguage(G,X);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,X);var ie=G.textContent,ae={element:G,language:X,grammar:Z,code:ie};function Me(_e){ae.highlightedCode=_e,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),Q&&Q.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),ee=ae.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),Q&&Q.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Me(P.util.encode(ae.code));return}if(V&&n.Worker){var Te=new Worker(P.filename);Te.onmessage=function(_e){Me(_e.data)},Te.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Me(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(G,V,Q){var X={code:G,grammar:V,language:Q};if(P.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=P.tokenize(X.code,X.grammar),P.hooks.run("after-tokenize",X),E.stringify(P.util.encode(X.tokens),X.language)},tokenize:function(G,V){var Q=V.rest;if(Q){for(var X in Q)V[X]=Q[X];delete V.rest}var Z=new H;return B(Z,Z.head,G),T(G,Z,V,Z.head,0),we(Z)},hooks:{all:{},add:function(G,V){var Q=P.hooks.all;Q[G]=Q[G]||[],Q[G].push(V)},run:function(G,V){var Q=P.hooks.all[G];if(!(!Q||!Q.length))for(var X=0,Z;Z=Q[X++];)Z(V)}},Token:E};n.Prism=P;function E(G,V,Q,X){this.type=G,this.content=V,this.alias=Q,this.length=(X||"").length|0}E.stringify=function G(V,Q){if(typeof V=="string")return V;if(Array.isArray(V)){var X="";return V.forEach(function(Me){X+=G(Me,Q)}),X}var Z={type:V.type,content:G(V.content,Q),tag:"span",classes:["token",V.type],attributes:{},language:Q},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(Z.classes,ee):Z.classes.push(ee)),P.hooks.run("wrap",Z);var ie="";for(var ae in Z.attributes)ie+=" "+ae+'="'+(Z.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+Z.tag+' class="'+Z.classes.join(" ")+'"'+ie+">"+Z.content+"</"+Z.tag+">"};function N(G,V,Q,X){G.lastIndex=V;var Z=G.exec(Q);if(Z&&X&&Z[1]){var ee=Z[1].length;Z.index+=ee,Z[0]=Z[0].slice(ee)}return Z}function T(G,V,Q,X,Z,ee){for(var ie in Q)if(!(!Q.hasOwnProperty(ie)||!Q[ie])){var ae=Q[ie];ae=Array.isArray(ae)?ae:[ae];for(var Me=0;Me<ae.length;++Me){if(ee&&ee.cause==ie+","+Me)return;var Te=ae[Me],_e=Te.inside,at=!!Te.lookbehind,pt=!!Te.greedy,tr=Te.alias;if(pt&&!Te.pattern.global){var $t=Te.pattern.toString().match(/[imsuy]*$/)[0];Te.pattern=RegExp(Te.pattern.source,$t+"g")}for(var wt=Te.pattern||Te,Ze=X.next,mt=Z;Ze!==V.tail&&!(ee&&mt>=ee.reach);mt+=Ze.value.length,Ze=Ze.next){var Jt=Ze.value;if(V.length>G.length)return;if(!(Jt instanceof E)){var Zt=1,ht;if(pt){if(ht=N(wt,mt,G,at),!ht||ht.index>=G.length)break;var Bt=ht.index,Ir=ht.index+ht[0].length,Qt=mt;for(Qt+=Ze.value.length;Bt>=Qt;)Ze=Ze.next,Qt+=Ze.value.length;if(Qt-=Ze.value.length,mt=Qt,Ze.value instanceof E)continue;for(var Pr=Ze;Pr!==V.tail&&(Qt<Ir||typeof Pr.value=="string");Pr=Pr.next)Zt++,Qt+=Pr.value.length;Zt--,Jt=G.slice(mt,Qt),ht.index-=mt}else if(ht=N(wt,0,Jt,at),!ht)continue;var Bt=ht.index,Ar=ht[0],Ur=Jt.slice(0,Bt),rr=Jt.slice(Bt+Ar.length),jr=mt+Jt.length;ee&&jr>ee.reach&&(ee.reach=jr);var Xt=Ze.prev;Ur&&(Xt=B(V,Xt,Ur),mt+=Ur.length),J(V,Xt,Zt);var $r=new E(ie,_e?P.tokenize(Ar,_e):Ar,tr,Ar);if(Ze=B(V,Xt,$r),rr&&B(V,Ze,rr),Zt>1){var W={cause:ie+","+Me,reach:jr};T(G,V,Q,Ze.prev,mt,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function B(G,V,Q){var X=V.next,Z={value:Q,prev:V,next:X};return V.next=Z,X.prev=Z,G.length++,Z}function J(G,V,Q){for(var X=V.next,Z=0;Z<Q&&X!==G.tail;Z++)X=X.next;V.next=X,X.prev=V,G.length-=Z}function we(G){for(var V=[],Q=G.head.next;Q!==G.tail;)V.push(Q.value),Q=Q.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Q=V.language,X=V.code,Z=V.immediateClose;n.postMessage(P.highlight(X,P.languages[Q],Q)),Z&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function oe(){P.manual||P.highlightAll()}if(!P.manual){var ke=document.readyState;ke==="loading"||ke==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",oe):window.requestAnimationFrame?window.requestAnimationFrame(oe):window.setTimeout(oe,16)}return P}(r);t.exports&&(t.exports=e),typeof Ii<"u"&&(Ii.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(v,w){var _={};_["language-"+w]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[w]},_.cdata=/^<!\[CDATA\[|\]\]>$/i;var P={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:_}};P["language-"+w]={pattern:/[\s\S]+/,inside:e.languages[w]};var E={};E[v]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return v}),"i"),lookbehind:!0,greedy:!0,inside:P},e.languages.insertBefore("markup","cdata",E)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,v){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[v,"language-"+v],inside:e.languages[v]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var v=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+v.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+v.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+v.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+v.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:v,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var w=n.languages.markup;w&&(w.tag.addInlined("style","css"),w.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",v=function(ue,oe){return"✖ Error "+ue+" while fetching file: "+oe},w="✖ Error: File does not exist or is empty",_={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},P="data-src-status",E="loading",N="loaded",T="failed",H="pre[data-src]:not(["+P+'="'+N+'"]):not(['+P+'="'+E+'"])';function B(ue,oe,ke){var G=new XMLHttpRequest;G.open("GET",ue,!0),G.onreadystatechange=function(){G.readyState==4&&(G.status<400&&G.responseText?oe(G.responseText):G.status>=400?ke(v(G.status,G.statusText)):ke(w))},G.send(null)}function J(ue){var oe=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ue||"");if(oe){var ke=Number(oe[1]),G=oe[2],V=oe[3];return G?V?[ke,Number(V)]:[ke,void 0]:[ke,ke]}}e.hooks.add("before-highlightall",function(ue){ue.selector+=", "+H}),e.hooks.add("before-sanity-check",function(ue){var oe=ue.element;if(oe.matches(H)){ue.code="",oe.setAttribute(P,E);var ke=oe.appendChild(document.createElement("CODE"));ke.textContent=n;var G=oe.getAttribute("data-src"),V=ue.language;if(V==="none"){var Q=(/\.(\w+)$/.exec(G)||[,"none"])[1];V=_[Q]||Q}e.util.setLanguage(ke,V),e.util.setLanguage(oe,V);var X=e.plugins.autoloader;X&&X.loadLanguages(V),B(G,function(Z){oe.setAttribute(P,N);var ee=J(oe.getAttribute("data-range"));if(ee){var ie=Z.split(/\r\n?|\n/g),ae=ee[0],Me=ee[1]==null?ie.length:ee[1];ae<0&&(ae+=ie.length),ae=Math.max(0,Math.min(ae-1,ie.length)),Me<0&&(Me+=ie.length),Me=Math.max(0,Math.min(Me,ie.length)),Z=ie.slice(ae,Me).join(`
`),oe.hasAttribute("data-start")||oe.setAttribute("data-start",String(ae+1))}ke.textContent=Z,e.highlightElement(ke)},function(Z){oe.setAttribute(P,T),ke.textContent=Z})}}),e.plugins.fileHighlight={highlight:function(oe){for(var ke=(oe||document).querySelectorAll(H),G=0,V;V=ke[G++];)e.highlightElement(V)}};var we=!1;e.fileHighlight=function(){we||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),we=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(r$);var ky={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,w=0,_={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof E?new E(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++w}),G.__id},clone:function G(V,Q){Q=Q||{};var X,Z;switch(P.util.type(V)){case"Object":if(Z=P.util.objId(V),Q[Z])return Q[Z];X={},Q[Z]=X;for(var ee in V)V.hasOwnProperty(ee)&&(X[ee]=G(V[ee],Q));return X;case"Array":return Z=P.util.objId(V),Q[Z]?Q[Z]:(X=[],Q[Z]=X,V.forEach(function(ie,ae){X[ae]=G(ie,Q)}),X);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Q in V)if(V[Q].src==G)return V[Q]}return null}},isActive:function(G,V,Q){for(var X="no-"+V;G;){var Z=G.classList;if(Z.contains(V))return!0;if(Z.contains(X))return!1;G=G.parentElement}return!!Q}},languages:{plain:_,plaintext:_,text:_,txt:_,extend:function(G,V){var Q=P.util.clone(P.languages[G]);for(var X in V)Q[X]=V[X];return Q},insertBefore:function(G,V,Q,X){X=X||P.languages;var Z=X[G],ee={};for(var ie in Z)if(Z.hasOwnProperty(ie)){if(ie==V)for(var ae in Q)Q.hasOwnProperty(ae)&&(ee[ae]=Q[ae]);Q.hasOwnProperty(ie)||(ee[ie]=Z[ie])}var Me=X[G];return X[G]=ee,P.languages.DFS(P.languages,function(Te,_e){_e===Me&&Te!=G&&(this[Te]=ee)}),ee},DFS:function G(V,Q,X,Z){Z=Z||{};var ee=P.util.objId;for(var ie in V)if(V.hasOwnProperty(ie)){Q.call(V,ie,V[ie],X||ie);var ae=V[ie],Me=P.util.type(ae);Me==="Object"&&!Z[ee(ae)]?(Z[ee(ae)]=!0,G(ae,Q,null,Z)):Me==="Array"&&!Z[ee(ae)]&&(Z[ee(ae)]=!0,G(ae,Q,ie,Z))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Q){var X={callback:Q,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),P.hooks.run("before-all-elements-highlight",X);for(var Z=0,ee;ee=X.elements[Z++];)P.highlightElement(ee,V===!0,X.callback)},highlightElement:function(G,V,Q){var X=P.util.getLanguage(G),Z=P.languages[X];P.util.setLanguage(G,X);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,X);var ie=G.textContent,ae={element:G,language:X,grammar:Z,code:ie};function Me(_e){ae.highlightedCode=_e,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),Q&&Q.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),ee=ae.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),Q&&Q.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Me(P.util.encode(ae.code));return}if(V&&n.Worker){var Te=new Worker(P.filename);Te.onmessage=function(_e){Me(_e.data)},Te.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Me(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(G,V,Q){var X={code:G,grammar:V,language:Q};if(P.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=P.tokenize(X.code,X.grammar),P.hooks.run("after-tokenize",X),E.stringify(P.util.encode(X.tokens),X.language)},tokenize:function(G,V){var Q=V.rest;if(Q){for(var X in Q)V[X]=Q[X];delete V.rest}var Z=new H;return B(Z,Z.head,G),T(G,Z,V,Z.head,0),we(Z)},hooks:{all:{},add:function(G,V){var Q=P.hooks.all;Q[G]=Q[G]||[],Q[G].push(V)},run:function(G,V){var Q=P.hooks.all[G];if(!(!Q||!Q.length))for(var X=0,Z;Z=Q[X++];)Z(V)}},Token:E};n.Prism=P;function E(G,V,Q,X){this.type=G,this.content=V,this.alias=Q,this.length=(X||"").length|0}E.stringify=function G(V,Q){if(typeof V=="string")return V;if(Array.isArray(V)){var X="";return V.forEach(function(Me){X+=G(Me,Q)}),X}var Z={type:V.type,content:G(V.content,Q),tag:"span",classes:["token",V.type],attributes:{},language:Q},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(Z.classes,ee):Z.classes.push(ee)),P.hooks.run("wrap",Z);var ie="";for(var ae in Z.attributes)ie+=" "+ae+'="'+(Z.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+Z.tag+' class="'+Z.classes.join(" ")+'"'+ie+">"+Z.content+"</"+Z.tag+">"};function N(G,V,Q,X){G.lastIndex=V;var Z=G.exec(Q);if(Z&&X&&Z[1]){var ee=Z[1].length;Z.index+=ee,Z[0]=Z[0].slice(ee)}return Z}function T(G,V,Q,X,Z,ee){for(var ie in Q)if(!(!Q.hasOwnProperty(ie)||!Q[ie])){var ae=Q[ie];ae=Array.isArray(ae)?ae:[ae];for(var Me=0;Me<ae.length;++Me){if(ee&&ee.cause==ie+","+Me)return;var Te=ae[Me],_e=Te.inside,at=!!Te.lookbehind,pt=!!Te.greedy,tr=Te.alias;if(pt&&!Te.pattern.global){var $t=Te.pattern.toString().match(/[imsuy]*$/)[0];Te.pattern=RegExp(Te.pattern.source,$t+"g")}for(var wt=Te.pattern||Te,Ze=X.next,mt=Z;Ze!==V.tail&&!(ee&&mt>=ee.reach);mt+=Ze.value.length,Ze=Ze.next){var Jt=Ze.value;if(V.length>G.length)return;if(!(Jt instanceof E)){var Zt=1,ht;if(pt){if(ht=N(wt,mt,G,at),!ht||ht.index>=G.length)break;var Bt=ht.index,Ir=ht.index+ht[0].length,Qt=mt;for(Qt+=Ze.value.length;Bt>=Qt;)Ze=Ze.next,Qt+=Ze.value.length;if(Qt-=Ze.value.length,mt=Qt,Ze.value instanceof E)continue;for(var Pr=Ze;Pr!==V.tail&&(Qt<Ir||typeof Pr.value=="string");Pr=Pr.next)Zt++,Qt+=Pr.value.length;Zt--,Jt=G.slice(mt,Qt),ht.index-=mt}else if(ht=N(wt,0,Jt,at),!ht)continue;var Bt=ht.index,Ar=ht[0],Ur=Jt.slice(0,Bt),rr=Jt.slice(Bt+Ar.length),jr=mt+Jt.length;ee&&jr>ee.reach&&(ee.reach=jr);var Xt=Ze.prev;Ur&&(Xt=B(V,Xt,Ur),mt+=Ur.length),J(V,Xt,Zt);var $r=new E(ie,_e?P.tokenize(Ar,_e):Ar,tr,Ar);if(Ze=B(V,Xt,$r),rr&&B(V,Ze,rr),Zt>1){var W={cause:ie+","+Me,reach:jr};T(G,V,Q,Ze.prev,mt,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function B(G,V,Q){var X=V.next,Z={value:Q,prev:V,next:X};return V.next=Z,X.prev=Z,G.length++,Z}function J(G,V,Q){for(var X=V.next,Z=0;Z<Q&&X!==G.tail;Z++)X=X.next;V.next=X,X.prev=V,G.length-=Z}function we(G){for(var V=[],Q=G.head.next;Q!==G.tail;)V.push(Q.value),Q=Q.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Q=V.language,X=V.code,Z=V.immediateClose;n.postMessage(P.highlight(X,P.languages[Q],Q)),Z&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function oe(){P.manual||P.highlightAll()}if(!P.manual){var ke=document.readyState;ke==="loading"||ke==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",oe):window.requestAnimationFrame?window.requestAnimationFrame(oe):window.setTimeout(oe,16)}return P}(r);t.exports&&(t.exports=e),typeof Ii<"u"&&(Ii.Prism=e)})(ky);var Lg=ky.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const s$={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},n$="_container_zhbxc_2",a$="_header_zhbxc_9",i$="_main_zhbxc_14",l$="_footer_zhbxc_19",u$={container:n$,header:a$,main:i$,footer:l$},xc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,v]of r)e[n]=v;return e};function f$(t,r,e,n,v,w){return os(),Us("div",{class:Cn(t.$style.container)},[w.hasHeader?(os(),Us("header",{key:0,class:Cn(t.$style.header)},[jc(t.$slots,"header")],2)):zo("",!0),zi("main",{class:Cn(t.$style.main)},[jc(t.$slots,"default")],2),w.hasFooter?(os(),Us("footer",{key:1,class:Cn(t.$style.footer)},[jc(t.$slots,"footer")],2)):zo("",!0)],2)}const o$={$style:u$},rc=xc(s$,[["render",f$],["__cssModules",o$]]),c$={key:0},h$=["onClick"],p$={key:1},v$=["onClick"],g$=mc({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=Ff(!1),n=r;return(v,w)=>(os(),Us("div",{class:Cn(v.$style.wrapper)},[zi("button",{onClick:w[0]||(w[0]=_=>e.value=!e.value)},[jc(v.$slots,"default")]),cs(Rv,null,{default:Pa(()=>[e.value?(os(),Us("div",{key:0,class:Cn(v.$style.menu)},[v.options instanceof Array?(os(),Us("div",c$,[(os(!0),Us(xn,null,uh(v.options,_=>(os(),Us("div",{class:Cn(v.$style.opt),onClick:P=>{e.value=!1,n("select",_)}},hf(_),11,h$))),256))])):(os(),Us("div",p$,[(os(!0),Us(xn,null,uh(Object.keys(v.options),_=>(os(),Us("div",{class:Cn(v.$style.opt),onClick:P=>{e.value=!1,n("select",_)}},hf(v.options[_]),11,v$))),256))]))],2)):zo("",!0)]),_:1})],2))}}),d$="_wrapper_1dk0z_2",y$="_menu_1dk0z_5",w$="_opt_1dk0z_12",m$={wrapper:d$,menu:y$,opt:w$},$$={$style:m$},My=xc(g$,[["__cssModules",$$]]),x$=mc({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,v=Ff(e.modelValue);uc(v,()=>{n("update:modelValue",v.value)},{immediate:!0});function w(P){v.value=e.samples[P]}const _=P=>Lg.highlight(P,Lg.languages.js,"javascript");return(P,E)=>(os(),Mh(rc,null,{header:Pa(()=>[Cu(" Input "),e.samples?(os(),Us("div",{key:0,class:Cn(P.$style.actions)},[cs(My,{options:Object.keys(e.samples),onSelect:w},{default:Pa(()=>[Cu("Samples")]),_:1},8,["options"])],2)):zo("",!0)]),footer:Pa(()=>[e.parseError?(os(),Us("span",{key:0,class:Cn(P.$style.parseError)},hf(e.parseError),3)):zo("",!0),zi("div",{class:Cn(P.$style.actions)},[zi("button",{onClick:E[1]||(E[1]=N=>n("run"))},"RUN")],2)]),default:Pa(()=>[cs(vc(Ym),{class:Cn(P.$style.code),modelValue:v.value,"onUpdate:modelValue":E[0]||(E[0]=N=>v.value=N),highlight:_,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),b$="_code_af8rl_2",A$="_parseError_af8rl_6",C$="_actions_af8rl_9",_$={code:b$,parseError:A$,actions:C$},P$={$style:_$},k$=xc(x$,[["__cssModules",P$]]);function Qr(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Ko=class Ey extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");he(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ey)}},Hg=class extends Ko{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},Gt=class extends Ko{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);he(this,"loc");he(this,"name","Syntax");this.loc=n}};class Ug extends Ko{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);he(this,"loc");he(this,"name","Namespace");this.loc=n}}let hr=class extends Ko{constructor(e,n){super(e,n);he(this,"name","Runtime")}},Bg=class extends hr{constructor(r,e){super(r,e)}},M$=class extends hr{constructor(e,n){super(e,n);he(this,"name","")}};var Vu=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Lu=class Np{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Np(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Np(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new hr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new hr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Vu([Qr],Lu.prototype,"log",null);Vu([Qr],Lu.prototype,"onUpdated",null);Vu([Qr],Lu.prototype,"createChildScope",null);Vu([Qr],Lu.prototype,"createChildNamespaceScope",null);Vu([Qr],Lu.prototype,"get",null);Vu([Qr],Lu.prototype,"exists",null);Vu([Qr],Lu.prototype,"getAll",null);Vu([Qr],Lu.prototype,"add",null);Vu([Qr],Lu.prototype,"assign",null);let Fc;const E$=new Uint8Array(16);function S$(){if(!Fc&&(Fc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fc(E$)}const on=[];for(let t=0;t<256;++t)on.push((t+256).toString(16).slice(1));function N$(t,r=0){return on[t[r+0]]+on[t[r+1]]+on[t[r+2]]+on[t[r+3]]+"-"+on[t[r+4]]+on[t[r+5]]+"-"+on[t[r+6]]+on[t[r+7]]+"-"+on[t[r+8]]+on[t[r+9]]+"-"+on[t[r+10]]+on[t[r+11]]+on[t[r+12]]+on[t[r+13]]+on[t[r+14]]+on[t[r+15]]}const F$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qg={randomUUID:F$};function bc(t,r,e){if(qg.randomUUID&&!r&&!t)return qg.randomUUID();t=t||{};const n=t.random||(t.rng||S$)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return N$(n)}var Dv={exports:{}};Dv.exports;(function(t){(function(r,e,n){function v(E){var N=this,T=P();N.next=function(){var H=2091639*N.s0+N.c*23283064365386963e-26;return N.s0=N.s1,N.s1=N.s2,N.s2=H-(N.c=H|0)},N.c=1,N.s0=T(" "),N.s1=T(" "),N.s2=T(" "),N.s0-=T(E),N.s0<0&&(N.s0+=1),N.s1-=T(E),N.s1<0&&(N.s1+=1),N.s2-=T(E),N.s2<0&&(N.s2+=1),T=null}function w(E,N){return N.c=E.c,N.s0=E.s0,N.s1=E.s1,N.s2=E.s2,N}function _(E,N){var T=new v(E),H=N&&N.state,B=T.next;return B.int32=function(){return T.next()*4294967296|0},B.double=function(){return B()+(B()*2097152|0)*11102230246251565e-32},B.quick=B,H&&(typeof H=="object"&&w(H,T),B.state=function(){return w(T,{})}),B}function P(){var E=4022871197,N=function(T){T=String(T);for(var H=0;H<T.length;H++){E+=T.charCodeAt(H);var B=.02519603282416938*E;E=B>>>0,B-=E,B*=E,E=B>>>0,B-=E,E+=B*4294967296}return(E>>>0)*23283064365386963e-26};return N}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.alea=_})(Ii,t,!1)})(Dv);var O$=Dv.exports,Lv={exports:{}};Lv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var H=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^H^H>>>8},P===(P|0)?E.x=P:N+=P;for(var T=0;T<N.length+64;T++)E.x^=N.charCodeAt(T)|0,E.next()}function w(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E}function _(P,E){var N=new v(P),T=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,T&&(typeof T=="object"&&w(T,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xor128=_})(Ii,t,!1)})(Lv);var T$=Lv.exports,Hv={exports:{}};Hv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.next=function(){var H=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(H^H<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,P===(P|0)?E.x=P:N+=P;for(var T=0;T<N.length+64;T++)E.x^=N.charCodeAt(T)|0,T==N.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function w(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E.v=P.v,E.d=P.d,E}function _(P,E){var N=new v(P),T=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,T&&(typeof T=="object"&&w(T,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xorwow=_})(Ii,t,!1)})(Hv);var I$=Hv.exports,Uv={exports:{}};Uv.exports;(function(t){(function(r,e,n){function v(P){var E=this;E.next=function(){var T=E.x,H=E.i,B,J;return B=T[H],B^=B>>>7,J=B^B<<24,B=T[H+1&7],J^=B^B>>>10,B=T[H+3&7],J^=B^B>>>3,B=T[H+4&7],J^=B^B<<7,B=T[H+7&7],B=B^B<<13,J^=B^B<<9,T[H]=J,E.i=H+1&7,J};function N(T,H){var B,J=[];if(H===(H|0))J[0]=H;else for(H=""+H,B=0;B<H.length;++B)J[B&7]=J[B&7]<<15^H.charCodeAt(B)+J[B+1&7]<<13;for(;J.length<8;)J.push(0);for(B=0;B<8&&J[B]===0;++B);for(B==8?J[7]=-1:J[B],T.x=J,T.i=0,B=256;B>0;--B)T.next()}N(E,P)}function w(P,E){return E.x=P.x.slice(),E.i=P.i,E}function _(P,E){P==null&&(P=+new Date);var N=new v(P),T=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,T&&(T.x&&w(T,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xorshift7=_})(Ii,t,!1)})(Uv);var j$=Uv.exports,Bv={exports:{}};Bv.exports;(function(t){(function(r,e,n){function v(P){var E=this;E.next=function(){var T=E.w,H=E.X,B=E.i,J,we;return E.w=T=T+1640531527|0,we=H[B+34&127],J=H[B=B+1&127],we^=we<<13,J^=J<<17,we^=we>>>15,J^=J>>>12,we=H[B]=we^J,E.i=B,we+(T^T>>>16)|0};function N(T,H){var B,J,we,ue,oe,ke=[],G=128;for(H===(H|0)?(J=H,H=null):(H=H+"\0",J=0,G=Math.max(G,H.length)),we=0,ue=-32;ue<G;++ue)H&&(J^=H.charCodeAt((ue+32)%H.length)),ue===0&&(oe=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,ue>=0&&(oe=oe+1640531527|0,B=ke[ue&127]^=J+oe,we=B==0?we+1:0);for(we>=128&&(ke[(H&&H.length||0)&127]=-1),we=127,ue=4*128;ue>0;--ue)J=ke[we+34&127],B=ke[we=we+1&127],J^=J<<13,B^=B<<17,J^=J>>>15,B^=B>>>12,ke[we]=J^B;T.w=oe,T.X=ke,T.i=we}N(E,P)}function w(P,E){return E.i=P.i,E.w=P.w,E.X=P.X.slice(),E}function _(P,E){P==null&&(P=+new Date);var N=new v(P),T=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,T&&(T.X&&w(T,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xor4096=_})(Ii,t,!1)})(Bv);var R$=Bv.exports,qv={exports:{}};qv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.next=function(){var H=E.b,B=E.c,J=E.d,we=E.a;return H=H<<25^H>>>7^B,B=B-J|0,J=J<<24^J>>>8^we,we=we-H|0,E.b=H=H<<20^H>>>12^B,E.c=B=B-J|0,E.d=J<<16^B>>>16^we,E.a=we-H|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,P===Math.floor(P)?(E.a=P/4294967296|0,E.b=P|0):N+=P;for(var T=0;T<N.length+20;T++)E.b^=N.charCodeAt(T)|0,E.next()}function w(P,E){return E.a=P.a,E.b=P.b,E.c=P.c,E.d=P.d,E}function _(P,E){var N=new v(P),T=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,T&&(typeof T=="object"&&w(T,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.tychei=_})(Ii,t,!1)})(qv);var D$=qv.exports,Sy={exports:{}};const L$={},H$=Object.freeze(Object.defineProperty({__proto__:null,default:L$},Symbol.toStringTag,{value:"Module"})),U$=t$(H$);(function(t){(function(r,e,n){var v=256,w=6,_=52,P="random",E=n.pow(v,w),N=n.pow(2,_),T=N*2,H=v-1,B;function J(Q,X,Z){var ee=[];X=X==!0?{entropy:!0}:X||{};var ie=ke(oe(X.entropy?[Q,V(e)]:Q??G(),3),ee),ae=new we(ee),Me=function(){for(var Te=ae.g(w),_e=E,at=0;Te<N;)Te=(Te+at)*v,_e*=v,at=ae.g(1);for(;Te>=T;)Te/=2,_e/=2,at>>>=1;return(Te+at)/_e};return Me.int32=function(){return ae.g(4)|0},Me.quick=function(){return ae.g(4)/4294967296},Me.double=Me,ke(V(ae.S),e),(X.pass||Z||function(Te,_e,at,pt){return pt&&(pt.S&&ue(pt,ae),Te.state=function(){return ue(ae,{})}),at?(n[P]=Te,_e):Te})(Me,ie,"global"in X?X.global:this==n,X.state)}function we(Q){var X,Z=Q.length,ee=this,ie=0,ae=ee.i=ee.j=0,Me=ee.S=[];for(Z||(Q=[Z++]);ie<v;)Me[ie]=ie++;for(ie=0;ie<v;ie++)Me[ie]=Me[ae=H&ae+Q[ie%Z]+(X=Me[ie])],Me[ae]=X;(ee.g=function(Te){for(var _e,at=0,pt=ee.i,tr=ee.j,$t=ee.S;Te--;)_e=$t[pt=H&pt+1],at=at*v+$t[H&($t[pt]=$t[tr=H&tr+_e])+($t[tr]=_e)];return ee.i=pt,ee.j=tr,at})(v)}function ue(Q,X){return X.i=Q.i,X.j=Q.j,X.S=Q.S.slice(),X}function oe(Q,X){var Z=[],ee=typeof Q,ie;if(X&&ee=="object")for(ie in Q)try{Z.push(oe(Q[ie],X-1))}catch{}return Z.length?Z:ee=="string"?Q:Q+"\0"}function ke(Q,X){for(var Z=Q+"",ee,ie=0;ie<Z.length;)X[H&ie]=H&(ee^=X[H&ie]*19)+Z.charCodeAt(ie++);return V(X)}function G(){try{var Q;return B&&(Q=B.randomBytes)?Q=Q(v):(Q=new Uint8Array(v),(r.crypto||r.msCrypto).getRandomValues(Q)),V(Q)}catch{var X=r.navigator,Z=X&&X.plugins;return[+new Date,r,Z,r.screen,V(e)]}}function V(Q){return String.fromCharCode.apply(0,Q)}if(ke(n.random(),e),t.exports){t.exports=J;try{B=U$}catch{}}else n["seed"+P]=J})(typeof self<"u"?self:Ii,[],Math)})(Sy);var B$=Sy.exports,q$=O$,z$=T$,K$=I$,V$=j$,W$=R$,G$=D$,uo=B$;uo.alea=q$;uo.xor128=z$;uo.xorwow=K$;uo.xorshift7=V$;uo.xor4096=W$;uo.tychei=G$;var J$=uo;const fo=e$(J$),Kt={type:"null"},ya={type:"bool",value:!0},wa={type:"bool",value:!1},Re=t=>({type:"num",value:t}),ir=t=>({type:"str",value:t}),Uf=t=>({type:"bool",value:t}),ph=t=>({type:"obj",value:t}),Yr=t=>({type:"arr",value:t}),Z$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ye=t=>({type:"fn",native:t}),Q$=t=>({type:"return",value:t}),X$=()=>({type:"break",value:null}),Y$=()=>({type:"continue",value:null}),ex=t=>t.type==="return"?t.value:t,Fp=(t,r)=>({type:"error",value:t,info:r});function Aa(t){if(t==null)throw new hr("Expect anything, but got nothing.")}function pn(t){if(t==null)throw new hr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new hr(`Expect boolean, but got ${t.type}.`)}function Mu(t){if(t==null)throw new hr("Expect function, but got nothing.");if(t.type!=="fn")throw new hr(`Expect function, but got ${t.type}.`)}function gs(t){if(t==null)throw new hr("Expect string, but got nothing.");if(t.type!=="str")throw new hr(`Expect string, but got ${t.type}.`)}function Oe(t){if(t==null)throw new hr("Expect number, but got nothing.");if(t.type!=="num")throw new hr(`Expect number, but got ${t.type}.`)}function xu(t){if(t==null)throw new hr("Expect object, but got nothing.");if(t.type!=="obj")throw new hr(`Expect object, but got ${t.type}.`)}function Bf(t){if(t==null)throw new hr("Expect array, but got nothing.");if(t.type!=="arr")throw new hr(`Expect array, but got ${t.type}.`)}function Jh(t){return t.type==="obj"}function zg(t){return t.type==="arr"}function Co(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Op(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Op(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Tp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Tp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Tp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ip(t){if(t===null)return Kt;if(typeof t=="boolean")return Uf(t);if(typeof t=="string")return ir(t);if(typeof t=="number")return Re(t);if(Array.isArray(t))return Yr(t.map(r=>Ip(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ip(n));return ph(r)}return Kt}function _o(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(_o(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${_o(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const tx={version:"0.18.0"},rx=tx.version,sx=new TextEncoder,nx=new TextDecoder,ax={help:ir("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ir(rx),"Core:ai":ir("kawaii"),"Core:not":ye(([t])=>(pn(t),t.value?wa:ya)),"Core:eq":ye(([t,r])=>(Aa(t),Aa(r),Co(t,r)?ya:wa)),"Core:neq":ye(([t,r])=>(Aa(t),Aa(r),Co(t,r)?wa:ya)),"Core:and":ye(([t,r])=>(pn(t),t.value?(pn(r),r.value?ya:wa):wa)),"Core:or":ye(([t,r])=>(pn(t),t.value?ya:(pn(r),r.value?ya:wa))),"Core:add":ye(([t,r])=>(Oe(t),Oe(r),Re(t.value+r.value))),"Core:sub":ye(([t,r])=>(Oe(t),Oe(r),Re(t.value-r.value))),"Core:mul":ye(([t,r])=>(Oe(t),Oe(r),Re(t.value*r.value))),"Core:pow":ye(([t,r])=>{Oe(t),Oe(r);const e=t.value**r.value;if(isNaN(e))throw new hr("Invalid operation.");return Re(e)}),"Core:div":ye(([t,r])=>{Oe(t),Oe(r);const e=t.value/r.value;if(isNaN(e))throw new hr("Invalid operation.");return Re(e)}),"Core:mod":ye(([t,r])=>(Oe(t),Oe(r),Re(t.value%r.value))),"Core:gt":ye(([t,r])=>(Oe(t),Oe(r),t.value>r.value?ya:wa)),"Core:lt":ye(([t,r])=>(Oe(t),Oe(r),t.value<r.value?ya:wa)),"Core:gteq":ye(([t,r])=>(Oe(t),Oe(r),t.value>=r.value?ya:wa)),"Core:lteq":ye(([t,r])=>(Oe(t),Oe(r),t.value<=r.value?ya:wa)),"Core:type":ye(([t])=>(Aa(t),ir(t.type))),"Core:to_str":ye(([t])=>(Aa(t),ir(_o(t)))),"Core:range":ye(([t,r])=>(Oe(t),Oe(r),t.value<r.value?Yr(Array.from({length:r.value-t.value+1},(e,n)=>Re(n+t.value))):t.value>r.value?Yr(Array.from({length:t.value-r.value+1},(e,n)=>Re(t.value-n))):Yr([t]))),"Core:sleep":ye(async([t])=>(Oe(t),await new Promise(r=>setTimeout(r,t.value)),Kt)),"Core:abort":ye(async([t])=>{throw gs(t),new M$(t.value)}),"Util:uuid":ye(()=>ir(bc())),"Json:stringify":ye(([t])=>(Aa(t),ir(JSON.stringify(Tp(t))))),"Json:parse":ye(([t])=>{gs(t);try{return Ip(JSON.parse(t.value))}catch{return Fp("not_json")}}),"Json:parsable":ye(([t])=>{gs(t);try{JSON.parse(t.value)}catch{return Uf(!1)}return Uf(!0)}),"Date:now":ye(()=>Re(Date.now())),"Date:year":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":ye(([t])=>(t&&Oe(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":ye(([t])=>(gs(t),Re(new Date(t.value).getTime()))),"Date:to_iso_str":ye(([t,r])=>{t&&Oe(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Oe(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),ke=we.toString().padStart(2,"0");v=`${ue}${oe}:${ke}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),T=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return ir(`${w}-${_}-${P}T${E}:${N}:${T}.${H}${v}`)}),"Math:Infinity":Re(1/0),"Math:E":Re(Math.E),"Math:LN2":Re(Math.LN2),"Math:LN10":Re(Math.LN10),"Math:LOG2E":Re(Math.LOG2E),"Math:LOG10E":Re(Math.LOG10E),"Math:PI":Re(Math.PI),"Math:SQRT1_2":Re(Math.SQRT1_2),"Math:SQRT2":Re(Math.SQRT2),"Math:abs":ye(([t])=>(Oe(t),Re(Math.abs(t.value)))),"Math:acos":ye(([t])=>(Oe(t),Re(Math.acos(t.value)))),"Math:acosh":ye(([t])=>(Oe(t),Re(Math.acosh(t.value)))),"Math:asin":ye(([t])=>(Oe(t),Re(Math.asin(t.value)))),"Math:asinh":ye(([t])=>(Oe(t),Re(Math.asinh(t.value)))),"Math:atan":ye(([t])=>(Oe(t),Re(Math.atan(t.value)))),"Math:atanh":ye(([t])=>(Oe(t),Re(Math.atanh(t.value)))),"Math:atan2":ye(([t,r])=>(Oe(t),Oe(r),Re(Math.atan2(t.value,r.value)))),"Math:cbrt":ye(([t])=>(Oe(t),Re(Math.cbrt(t.value)))),"Math:ceil":ye(([t])=>(Oe(t),Re(Math.ceil(t.value)))),"Math:clz32":ye(([t])=>(Oe(t),Re(Math.clz32(t.value)))),"Math:cos":ye(([t])=>(Oe(t),Re(Math.cos(t.value)))),"Math:cosh":ye(([t])=>(Oe(t),Re(Math.cosh(t.value)))),"Math:exp":ye(([t])=>(Oe(t),Re(Math.exp(t.value)))),"Math:expm1":ye(([t])=>(Oe(t),Re(Math.expm1(t.value)))),"Math:floor":ye(([t])=>(Oe(t),Re(Math.floor(t.value)))),"Math:fround":ye(([t])=>(Oe(t),Re(Math.fround(t.value)))),"Math:hypot":ye(([t])=>{Bf(t);const r=[];for(const e of t.value)Oe(e),r.push(e.value);return Re(Math.hypot(...r))}),"Math:imul":ye(([t,r])=>(Oe(t),Oe(r),Re(Math.imul(t.value,r.value)))),"Math:log":ye(([t])=>(Oe(t),Re(Math.log(t.value)))),"Math:log1p":ye(([t])=>(Oe(t),Re(Math.log1p(t.value)))),"Math:log10":ye(([t])=>(Oe(t),Re(Math.log10(t.value)))),"Math:log2":ye(([t])=>(Oe(t),Re(Math.log2(t.value)))),"Math:max":ye(([t,r])=>(Oe(t),Oe(r),Re(Math.max(t.value,r.value)))),"Math:min":ye(([t,r])=>(Oe(t),Oe(r),Re(Math.min(t.value,r.value)))),"Math:pow":ye(([t,r])=>(Oe(t),Oe(r),Re(Math.pow(t.value,r.value)))),"Math:round":ye(([t])=>(Oe(t),Re(Math.round(t.value)))),"Math:sign":ye(([t])=>(Oe(t),Re(Math.sign(t.value)))),"Math:sin":ye(([t])=>(Oe(t),Re(Math.sin(t.value)))),"Math:sinh":ye(([t])=>(Oe(t),Re(Math.sinh(t.value)))),"Math:sqrt":ye(([t])=>{Oe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new hr("Invalid operation.");return Re(r)}),"Math:tan":ye(([t])=>(Oe(t),Re(Math.tan(t.value)))),"Math:tanh":ye(([t])=>(Oe(t),Re(Math.tanh(t.value)))),"Math:trunc":ye(([t])=>(Oe(t),Re(Math.trunc(t.value)))),"Math:rnd":ye(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Re(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Re(Math.random())),"Math:gen_rng":ye(([t])=>{if(Aa(t),t.type!=="num"&&t.type!=="str")return Kt;const r=fo(t.value.toString());return ye(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Re(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Re(r()))}),"Num:from_hex":ye(([t])=>(gs(t),Re(parseInt(t.value,16)))),"Str:lf":ir(`
`),"Str:lt":ye(([t,r])=>(gs(t),gs(r),t.value<r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:gt":ye(([t,r])=>(gs(t),gs(r),t.value>r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:from_codepoint":ye(([t])=>(Oe(t),ir(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ye(([t])=>(Bf(t),ir(Array.from(t.value.map(r=>(Oe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ye(([t])=>(Bf(t),ir(nx.decode(Uint8Array.from(t.value.map(r=>(Oe(r),r.value))))))),"Arr:create":ye(([t,r])=>{Oe(t);try{return Yr(Array(t.value).fill(r??Kt))}catch(e){throw t.value<0?new hr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new hr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ye(([t])=>(xu(t),Yr(Array.from(t.value.keys()).map(r=>ir(r))))),"Obj:vals":ye(([t])=>(xu(t),Yr(Array.from(t.value.values())))),"Obj:kvs":ye(([t])=>(xu(t),Yr(Array.from(t.value.entries()).map(([r,e])=>Yr([ir(r),e]))))),"Obj:get":ye(([t,r])=>(xu(t),gs(r),t.value.get(r.value)??Kt)),"Obj:set":ye(([t,r,e])=>(xu(t),gs(r),Aa(e),t.value.set(r.value,e),Kt)),"Obj:has":ye(([t,r])=>(xu(t),gs(r),Uf(t.value.has(r.value)))),"Obj:copy":ye(([t])=>(xu(t),ph(new Map(t.value)))),"Obj:merge":ye(([t,r])=>(xu(t),xu(r),ph(new Map([...t.value,...r.value])))),"Error:create":ye(([t,r])=>(gs(t),Fp(t.value,r))),"Async:interval":ye(async([t,r,e],n)=>{Oe(t),Mu(r),e&&(pn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ye(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ye(async([t,r],e)=>{Oe(t),Mu(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ye(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})};var oo={},ix=()=>{const t="\\ud800-\\udfff",_="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",P="\\ufe0e\\ufe0f",E="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",N=`[${t}]`,T=`[${_}]`,H="\\ud83c[\\udffb-\\udfff]",B=`(?:${T}|${H})`,J=`[^${t}]`,we="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="\\u200d",ke="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",G=`[${E}]`,V=`${B}?`,Q=`[${P}]?`,X=`(?:${oe}(?:${[J,we,ue].join("|")})${Q+V})*`,Z=Q+V+X,ie=`(?:${[`${J}${T}?`,T,we,ue,N,G].join("|")})`;return new RegExp(`${ke}|${H}(?=${H})|${ie+Z}`,"g")},lx=Ii&&Ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});var Sh=lx(ix);function jp(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Sh.default())||[]}var zs=oo.toArray=jp;function zv(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Sh.default());return r===null?0:r.length}var co=oo.length=zv;function Ny(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(Sh.default());return n?n.slice(r,e).join(""):""}var ho=oo.substring=Ny;function ux(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=zv(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var v;typeof e>"u"?v=n:(typeof e!="number"&&(e=parseInt(e,10)),v=e>=0?e+r:r);var w=t.match(Sh.default());return w?w.slice(r,v).join(""):""}oo.substr=ux;function fx(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var v=zv(t);if(v>r)return Ny(t,0,r);if(v<r){var w=e.repeat(r-v);return n==="left"?w+t:t+w}return t}oo.limit=fx;function ox(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=jp(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var v=jp(r),w=!1,_;for(_=e;_<n.length;_+=1){for(var P=0;P<v.length&&v[P]===n[_+P];)P+=1;if(P===v.length&&v[P-1]===n[_+P-1]){w=!0;break}}return w?_:-1}var po=oo.indexOf=ox;const Kg={num:{to_str:t=>ye(async(r,e)=>ir(t.value.toString())),to_hex:t=>ye(async(r,e)=>ir(t.value.toString(16)))},str:{to_num:t=>ye(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Kt:Re(n)}),to_arr:t=>ye(async(r,e)=>Yr(zs(t.value).map(n=>ir(n)))),to_unicode_arr:t=>ye(async(r,e)=>Yr([...t.value].map(n=>ir(n)))),to_unicode_codepoint_arr:t=>ye(async(r,e)=>Yr([...t.value].map(n=>{const v=n.codePointAt(0);return Re(v??n.charCodeAt(0))}))),to_char_arr:t=>ye(async(r,e)=>Yr(t.value.split("").map(n=>ir(n)))),to_charcode_arr:t=>ye(async(r,e)=>Yr(t.value.split("").map(n=>Re(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ye(async(r,e)=>Yr(Array.from(sx.encode(t.value)).map(n=>Re(n)))),len:t=>Re(co(t.value)),replace:t=>ye(async([r,e],n)=>(gs(r),gs(e),ir(t.value.split(r.value).join(e.value)))),index_of:t=>ye(async([r,e],n)=>{gs(r),e&&Oe(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Re(po(t.value,r.value,v))}),incl:t=>ye(async([r],e)=>(gs(r),t.value.includes(r.value)?ya:wa)),trim:t=>ye(async(r,e)=>ir(t.value.trim())),upper:t=>ye(async(r,e)=>ir(t.value.toUpperCase())),lower:t=>ye(async(r,e)=>ir(t.value.toLowerCase())),split:t=>ye(async([r],e)=>(r&&gs(r),Yr(r?t.value.split(r?r.value:"").map(n=>ir(n)):zs(t.value).map(n=>ir(n))))),slice:t=>ye(async([r,e],n)=>(Oe(r),Oe(e),ir(ho(t.value,r.value,e.value)))),pick:t=>ye(async([r],e)=>{Oe(r);const v=zs(t.value)[r.value];return v?ir(v):Kt}),charcode_at:t=>ye(([r],e)=>{Oe(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Kt:Re(n)}),codepoint_at:t=>ye(([r],e)=>{Oe(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Kt:Re(n)})},arr:{len:t=>Re(t.value.length),push:t=>ye(async([r],e)=>(Aa(r),t.value.push(r),t)),unshift:t=>ye(async([r],e)=>(Aa(r),t.value.unshift(r),t)),pop:t=>ye(async(r,e)=>t.value.pop()??Kt),shift:t=>ye(async(r,e)=>t.value.shift()??Kt),concat:t=>ye(async([r],e)=>(Bf(r),Yr(t.value.concat(r.value)))),slice:t=>ye(async([r,e],n)=>(Oe(r),Oe(e),Yr(t.value.slice(r.value,e.value)))),join:t=>ye(async([r],e)=>(r&&gs(r),ir(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ye(async([r],e)=>{Mu(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Re(w)]));return Yr(await Promise.all(n))}),filter:t=>ye(async([r],e)=>{Mu(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Re(v)]);pn(_),_.value&&n.push(w)}return Yr(n)}),reduce:t=>ye(async([r,e],n)=>{Mu(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Re(_)])}return w}),find:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(pn(w),w.value)return v}return Kt}),incl:t=>ye(async([r],e)=>(Aa(r),t.value.some(n=>Co(r,n))?ya:wa)),index_of:t=>ye(async([r,e],n)=>{if(Aa(r),e){Oe(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>Co(_,r));return Re(w<0?w:w+v)}else return Re(t.value.findIndex(v=>Co(v,r)))}),reverse:t=>ye(async(r,e)=>(t.value.reverse(),Kt)),copy:t=>ye(async(r,e)=>Yr([...t.value])),sort:t=>ye(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);Oe(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return Mu(r),Bf(t),t.value=await n(t.value,r),t}),fill:t=>ye(async([r,e,n],v)=>{const w=r??Kt,_=e&&(Oe(e),e.value),P=n&&(Oe(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>ye(async([r],e)=>{Oe(r);try{return Yr(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new hr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new hr("arr.repeat expected integer, got non-integer")}}),every:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(pn(w),!w.value)return wa}return ya}),some:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(pn(w),w.value)return ya}return wa})},error:{name:t=>ir(t.value),info:t=>t.info??Kt}};function cx(t,r){if(Object.hasOwn(Kg,t.type)){const e=Kg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new hr(`No such prop (${r}) in ${t.type}.`)}else throw new hr(`Cannot read prop of ${t.type}. (reading ${r})`)}const hx={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var _n=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Fy=300,px=Fy-1;let dn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:ye(([v])=>{Aa(v),this.opts.out&&this.opts.out(v)}),readline:ye(async v=>{const w=v[0];if(gs(w),this.opts.in==null)return Kt;const _=await this.opts.in(w.value);return ir(_)})};this.vars=Object.fromEntries(Object.entries({...r,...ax,...n}).map(([v,w])=>[v,hx.const(w)])),this.scope=new Lu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Fp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ko?this.opts.err(r):this.opts.err(new Hg(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Ug('No "var" in namespace declaration: '+v.name,v.loc);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:{const _=v;throw new Ug("invalid ns member type: "+_.type,_.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Kt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return ex(await this._run(r.statements,v))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const v=n instanceof Ko?n:new Hg(n);throw v.loc=r.loc,v.message=`${v.message} (Line ${r.loc.line}, Column ${r.loc.column})`,v}})}async __eval(r,e){if(this.stop)return Kt;if(this.stepCount%Fy===px&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new hr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Mu(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(pn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(pn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Kt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(Co(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Kt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Kt}case"for":{if(r.times){const n=await this._eval(r.times,e);Oe(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Oe(n),Oe(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Re(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Kt}case"each":{const n=await this._eval(r.items,e);Bf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Kt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Kt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Kt}case"addAssign":{const n=await this._eval(r.dest,e);Oe(n);const v=await this._eval(r.expr,e);return Oe(v),await this.assign(e,r.dest,Re(n.value+v.value)),Kt}case"subAssign":{const n=await this._eval(r.dest,e);Oe(n);const v=await this._eval(r.expr,e);return Oe(v),await this.assign(e,r.dest,Re(n.value-v.value)),Kt}case"null":return Kt;case"bool":return Uf(r.value);case"num":return Re(r.value);case"str":return ir(r.value);case"arr":return Yr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return ph(n)}case"prop":{const n=await this._eval(r.target,e);return Jh(n)?n.value.has(r.name)?n.value.get(r.name):Kt:cx(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(zg(n)){Oe(v);const w=n.value[v.value];if(w===void 0)throw new Bg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(Jh(n))return gs(v),n.value.has(v.value)?n.value.get(v.value):Kt;throw new hr(`Cannot read prop (${_o(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return pn(n),Uf(!n.value)}case"fn":return Z$(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Uf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=_o(w)}return ir(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Q$(n)}case"break":return this.log("block:break",{scope:e.name}),X$();case"continue":return this.log("block:continue",{scope:e.name}),Y$();case"ns":return Kt;case"meta":return Kt;case"and":{const n=await this._eval(r.left,e);if(pn(n),n.value){const v=await this._eval(r.right,e);return pn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(pn(n),n.value)return n;{const v=await this._eval(r.right,e);return pn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Kt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(zg(v)){if(Oe(w),v.value[w.value]===void 0)throw new Bg(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(Jh(v))gs(w),v.value.set(w.value,n);else throw new hr(`Cannot read prop (${_o(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);xu(v),v.value.set(e.name,n)}else if(e.type==="arr")Bf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Kt)));else if(e.type==="obj")xu(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Kt)));else throw new hr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};_n([Qr],dn.prototype,"exec",null);_n([Qr],dn.prototype,"execFn",null);_n([Qr],dn.prototype,"execFnSimple",null);_n([Qr],dn.prototype,"handleError",null);_n([Qr],dn.prototype,"log",null);_n([Qr],dn.prototype,"collectNs",null);_n([Qr],dn.prototype,"collectNsMember",null);_n([Qr],dn.prototype,"_fn",null);_n([Qr],dn.prototype,"_eval",null);_n([Qr],dn.prototype,"__eval",null);_n([Qr],dn.prototype,"_run",null);_n([Qr],dn.prototype,"registerAbortHandler",null);_n([Qr],dn.prototype,"unregisterAbortHandler",null);_n([Qr],dn.prototype,"abort",null);_n([Qr],dn.prototype,"assign",null);_n([Qr],dn,"collectMetadata",null);class vx{constructor(r,e){he(this,"pages");he(this,"firstPageIndex");he(this,"lastPageIndex");he(this,"pageIndex");he(this,"address");he(this,"_char");he(this,"line");he(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var z;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(z||(z={}));class gx{constructor(r,e,n=!1,v,w){he(this,"kind");he(this,"loc");he(this,"hasLeftSpacing");he(this,"value");he(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=v,this.children=w}}function nt(t,r,e){return new gx(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const Vg=[" ","	"],dx=["\r",`
`],Wg=/^[0-9]$/,yx=/^[A-Za-z0-9_]$/;class wx{constructor(r){he(this,"stream");he(this,"_tokens",[]);typeof r=="string"?this.stream=new vx(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}getKind(){return this.token.kind}next(){this._tokens[0].kind!==z.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.getKind()!==r)throw new Gt(`unexpected token: ${z[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=nt(z.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(Vg.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(dx.includes(this.stream.char))return this.stream.next(),r=nt(z.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.NotEq,n,{hasLeftSpacing:e})):r=nt(z.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=nt(z.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=nt(z.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new Gt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=nt(z.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=nt(z.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=nt(z.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=nt(z.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=nt(z.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.PlusEq,n,{hasLeftSpacing:e})):r=nt(z.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=nt(z.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.MinusEq,n,{hasLeftSpacing:e})):r=nt(z.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=nt(z.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=nt(z.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=nt(z.Colon2,n,{hasLeftSpacing:e})):r=nt(z.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=nt(z.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=nt(z.Out,n,{hasLeftSpacing:e})):r=nt(z.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=nt(z.Arrow,n,{hasLeftSpacing:e})):r=nt(z.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.GtEq,n,{hasLeftSpacing:e})):r=nt(z.Gt,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=nt(z.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=nt(z.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=nt(z.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=nt(z.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=nt(z.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=nt(z.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=nt(z.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=nt(z.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const v=this.tryReadDigits(e);if(v){r=v;break}const w=this.tryReadWord(e);if(w){r=w;break}throw new Gt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&yx.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return nt(z.NullKeyword,n,{hasLeftSpacing:r});case"true":return nt(z.TrueKeyword,n,{hasLeftSpacing:r});case"false":return nt(z.FalseKeyword,n,{hasLeftSpacing:r});case"each":return nt(z.EachKeyword,n,{hasLeftSpacing:r});case"for":return nt(z.ForKeyword,n,{hasLeftSpacing:r});case"loop":return nt(z.LoopKeyword,n,{hasLeftSpacing:r});case"break":return nt(z.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return nt(z.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return nt(z.MatchKeyword,n,{hasLeftSpacing:r});case"case":return nt(z.CaseKeyword,n,{hasLeftSpacing:r});case"default":return nt(z.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return nt(z.IfKeyword,n,{hasLeftSpacing:r});case"elif":return nt(z.ElifKeyword,n,{hasLeftSpacing:r});case"else":return nt(z.ElseKeyword,n,{hasLeftSpacing:r});case"return":return nt(z.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return nt(z.EvalKeyword,n,{hasLeftSpacing:r});case"var":return nt(z.VarKeyword,n,{hasLeftSpacing:r});case"let":return nt(z.LetKeyword,n,{hasLeftSpacing:r});case"exists":return nt(z.ExistsKeyword,n,{hasLeftSpacing:r});default:return nt(z.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const v=this.stream.getPos();for(;!this.stream.eof&&Wg.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Wg.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new Gt("digit expected",v)}let w;return n.length>0?w=e+"."+n:w=e,nt(z.NumberLiteral,v,{hasLeftSpacing:r,value:w})}readStringLiteral(r){let e="";const n=this.stream.char;let v="string";const w=this.stream.getPos();for(this.stream.next();v!=="finish";)switch(v){case"string":{if(this.stream.eof)throw new Gt("unexpected EOF",w);if(this.stream.char==="\\"){this.stream.next(),v="escape";break}if(this.stream.char===n){this.stream.next(),v="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Gt("unexpected EOF",w);e+=this.stream.char,this.stream.next(),v="string";break}}return nt(z.StringLiteral,w,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",v=[],w="string";const _=this.stream.getPos();let P=_;for(this.stream.next();w!=="finish";)switch(w){case"string":{if(this.stream.eof)throw new Gt("unexpected EOF",_);if(this.stream.char==="\\"){this.stream.next(),w="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(nt(z.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),w="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(nt(z.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),n=""),P=this.stream.getPos(),w="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Gt("unexpected EOF",_);n+=this.stream.char,this.stream.next(),w="string";break}case"expr":{if(this.stream.eof)throw new Gt("unexpected EOF",_);if(Vg.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(nt(z.TemplateExprElement,P,{hasLeftSpacing:r,children:v})),v=[],P=this.stream.getPos(),w="string";break}const E=this.readToken();v.push(E);break}}return nt(z.Template,_,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function At(t,r,e){const n={type:t};for(const v of Object.keys(r))r[v]!==void 0&&(n[v]=r[v]);return n.loc=e,n}function Pi(t,r,e){return At("call",{target:At("identifier",{name:t},e),args:r},e)}function Oy(t){const r=[];for(t.nextWith(z.OpenParen),t.getKind()===z.NewLine&&t.next();t.getKind()!==z.CloseParen;){t.expect(z.Identifier);const e=t.token.value;t.next();let n;switch(t.getKind()===z.Colon&&(t.next(),n=to(t)),r.push({name:e,argType:n}),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseParen:break;default:throw new Gt("separator expected",t.token.loc)}}return t.nextWith(z.CloseParen),r}function Ac(t){for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();const r=[];for(;t.getKind()!==z.CloseBrace;)switch(r.push(Nh(t)),t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.CloseBrace:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(z.CloseBrace),r}function to(t){return t.getKind()===z.At?mx(t):$x(t)}function mx(t){const r=t.token.loc;t.nextWith(z.At),t.nextWith(z.OpenParen);const e=[];for(;t.getKind()!==z.CloseParen;){if(e.length>0)switch(t.getKind()){case z.Comma:{t.next();break}default:throw new Gt("separator expected",t.token.loc)}const v=to(t);e.push(v)}t.nextWith(z.CloseParen),t.nextWith(z.Arrow);const n=to(t);return At("fnTypeSource",{args:e,result:n},r)}function $x(t){const r=t.token.loc;t.expect(z.Identifier);const e=t.token.value;t.next();let n=null;return t.getKind()===z.Lt&&(t.next(),n=to(t),t.nextWith(z.Gt)),At("namedTypeSource",{name:e,inner:n},r)}class xx{constructor(r){he(this,"source");he(this,"index");he(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?nt(z.EOF,{line:-1,column:-1}):this._token}getKind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:nt(z.EOF,{line:-1,column:-1})}expect(r){if(this.getKind()!==r)throw new Gt(`unexpected token: ${z[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=nt(z.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function hs(t,r){return r?Ty(t,!0):Kv(t,0)}const Zh=[{opKind:"postfix",kind:z.OpenParen,bp:20},{opKind:"postfix",kind:z.OpenBracket,bp:20},{opKind:"infix",kind:z.Dot,lbp:18,rbp:19},{opKind:"infix",kind:z.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:z.Plus,bp:14},{opKind:"prefix",kind:z.Minus,bp:14},{opKind:"prefix",kind:z.Not,bp:14},{opKind:"infix",kind:z.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:z.Slash,lbp:12,rbp:13},{opKind:"infix",kind:z.Percent,lbp:12,rbp:13},{opKind:"infix",kind:z.Plus,lbp:10,rbp:11},{opKind:"infix",kind:z.Minus,lbp:10,rbp:11},{opKind:"infix",kind:z.Lt,lbp:8,rbp:9},{opKind:"infix",kind:z.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:z.Gt,lbp:8,rbp:9},{opKind:"infix",kind:z.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:z.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:z.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:z.And2,lbp:4,rbp:5},{opKind:"infix",kind:z.Or2,lbp:2,rbp:3}];function bx(t,r){const e=t.token.loc,n=t.getKind();t.next(),t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine));const v=Kv(t,r);switch(n){case z.Plus:{if(v.type==="num")return At("num",{value:v.value},e);throw new Gt("currently, sign is only supported for number literal.",e)}case z.Minus:{if(v.type==="num")return At("num",{value:-1*v.value},e);throw new Gt("currently, sign is only supported for number literal.",e)}case z.Not:return At("not",{expr:v},e);default:throw new Gt(`unexpected token: ${z[n]}`,e)}}function Ax(t,r,e){const n=t.token.loc,v=t.getKind();if(t.next(),t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine)),v===z.Dot){t.expect(z.Identifier);const w=t.token.value;return t.next(),At("prop",{target:r,name:w},n)}else{const w=Kv(t,e);switch(v){case z.Hat:return Pi("Core:pow",[r,w],n);case z.Asterisk:return Pi("Core:mul",[r,w],n);case z.Slash:return Pi("Core:div",[r,w],n);case z.Percent:return Pi("Core:mod",[r,w],n);case z.Plus:return Pi("Core:add",[r,w],n);case z.Minus:return Pi("Core:sub",[r,w],n);case z.Lt:return Pi("Core:lt",[r,w],n);case z.LtEq:return Pi("Core:lteq",[r,w],n);case z.Gt:return Pi("Core:gt",[r,w],n);case z.GtEq:return Pi("Core:gteq",[r,w],n);case z.Eq2:return Pi("Core:eq",[r,w],n);case z.NotEq:return Pi("Core:neq",[r,w],n);case z.And2:return At("and",{left:r,right:w},n);case z.Or2:return At("or",{left:r,right:w},n);default:throw new Gt(`unexpected token: ${z[v]}`,n)}}}function Cx(t,r){const e=t.token.loc,n=t.getKind();switch(n){case z.OpenParen:return _x(t,r);case z.OpenBracket:{t.next();const v=hs(t,!1);return t.nextWith(z.CloseBracket),At("index",{target:r,index:v},e)}default:throw new Gt(`unexpected token: ${z[n]}`,e)}}function Ty(t,r){const e=t.token.loc;switch(t.getKind()){case z.IfKeyword:{if(r)break;return Px(t)}case z.At:{if(r)break;return kx(t)}case z.MatchKeyword:{if(r)break;return Mx(t)}case z.EvalKeyword:{if(r)break;return Ex(t)}case z.ExistsKeyword:{if(r)break;return Sx(t)}case z.Template:{const n=[];if(r)break;for(const v of t.token.children)switch(v.kind){case z.TemplateStringElement:{n.push(At("str",{value:v.value},v.loc));break}case z.TemplateExprElement:{const w=new xx(v.children),_=hs(w,!1);if(w.getKind()!==z.EOF)throw new Gt(`unexpected token: ${z[w.token.kind]}`,w.token.loc);n.push(_);break}default:throw new Gt(`unexpected token: ${z[v.kind]}`,v.loc)}return t.next(),At("tmpl",{tmpl:n},e)}case z.StringLiteral:{const n=t.token.value;return t.next(),At("str",{value:n},e)}case z.NumberLiteral:{const n=Number(t.token.value);return t.next(),At("num",{value:n},e)}case z.TrueKeyword:case z.FalseKeyword:{const n=t.getKind()===z.TrueKeyword;return t.next(),At("bool",{value:n},e)}case z.NullKeyword:return t.next(),At("null",{},e);case z.OpenBrace:return Nx(t,r);case z.OpenBracket:return Fx(t,r);case z.Identifier:{if(r)break;return Iy(t)}case z.OpenParen:{t.next();const n=hs(t,r);return t.nextWith(z.CloseParen),n}}throw new Gt(`unexpected token: ${z[t.getKind()]}`,e)}function _x(t,r){const e=t.token.loc,n=[];for(t.nextWith(z.OpenParen),t.getKind()===z.NewLine&&t.next();t.getKind()!==z.CloseParen;)switch(n.push(hs(t,!1)),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseParen:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseParen),At("call",{target:r,args:n},e)}function Px(t){const r=t.token.loc;t.nextWith(z.IfKeyword);const e=hs(t,!1),n=gf(t);t.getKind()===z.NewLine&&[z.ElifKeyword,z.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const v=[];for(;t.getKind()===z.ElifKeyword;){t.next();const _=hs(t,!1),P=gf(t);t.getKind()===z.NewLine&&[z.ElifKeyword,z.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),v.push({cond:_,then:P})}let w;return t.getKind()===z.ElseKeyword&&(t.next(),w=gf(t)),At("if",{cond:e,then:n,elseif:v,else:w},r)}function kx(t){const r=t.token.loc;t.nextWith(z.At);const e=Oy(t);let n;t.getKind()===z.Colon&&(t.next(),n=to(t));const v=Ac(t);return At("fn",{args:e,retType:n,children:v},r)}function Mx(t){const r=t.token.loc;t.nextWith(z.MatchKeyword);const e=hs(t,!1);t.nextWith(z.OpenBrace),t.getKind()===z.NewLine&&t.next();const n=[];for(;t.getKind()!==z.DefaultKeyword&&t.getKind()!==z.CloseBrace;){t.nextWith(z.CaseKeyword);const w=hs(t,!1);t.nextWith(z.Arrow);const _=gf(t);switch(n.push({q:w,a:_}),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.DefaultKeyword:case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}}let v;if(t.getKind()===z.DefaultKeyword)switch(t.next(),t.nextWith(z.Arrow),v=gf(t),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseBrace),At("match",{about:e,qs:n,default:v},r)}function Ex(t){const r=t.token.loc;t.nextWith(z.EvalKeyword);const e=Ac(t);return At("block",{statements:e},r)}function Sx(t){const r=t.token.loc;t.nextWith(z.ExistsKeyword);const e=Iy(t);return At("exists",{identifier:e},r)}function Iy(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.getKind()===z.Colon){if(t.token.hasLeftSpacing)throw new Gt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new Gt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(z.Identifier),e.push(t.token.value),t.next()}return At("identifier",{name:e.join(":")},r)}function Nx(t,r){const e=t.token.loc;for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();const n=new Map;for(;t.getKind()!==z.CloseBrace;){t.expect(z.Identifier);const v=t.token.value;t.next(),t.nextWith(z.Colon);const w=hs(t,r);switch(n.set(v,w),t.getKind()){case z.NewLine:case z.Comma:{for(t.next();t.getKind()===z.NewLine;)t.next();break}case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}}return t.nextWith(z.CloseBrace),At("obj",{value:n},e)}function Fx(t,r){const e=t.token.loc;for(t.nextWith(z.OpenBracket);t.getKind()===z.NewLine;)t.next();const n=[];for(;t.getKind()!==z.CloseBracket;)switch(n.push(hs(t,r)),t.getKind()){case z.NewLine:case z.Comma:{for(t.next();t.getKind()===z.NewLine;)t.next();break}case z.CloseBracket:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseBracket),At("arr",{value:n},e)}function Kv(t,r){let e;const n=t.getKind(),v=Zh.find(w=>w.opKind==="prefix"&&w.kind===n);for(v!=null?e=bx(t,v.bp):e=Ty(t,!1);;){t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine));const w=t.getKind(),_=Zh.find(E=>E.opKind==="postfix"&&E.kind===w);if(_!=null){if(_.bp<r)break;if(!([z.OpenBracket,z.OpenParen].includes(w)&&t.token.hasLeftSpacing)){e=Cx(t,e);continue}}const P=Zh.find(E=>E.opKind==="infix"&&E.kind===w);if(P!=null){if(P.lbp<r)break;e=Ax(t,e,P.rbp);continue}break}return e}function Nh(t){const r=t.token.loc;switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:return jy(t);case z.At:{if(t.lookahead(1).kind===z.Identifier)return Ry(t);break}case z.Out:return Tx(t);case z.ReturnKeyword:return Rx(t);case z.OpenSharpBracket:return Dx(t);case z.EachKeyword:return Ix(t);case z.ForKeyword:return jx(t);case z.LoopKeyword:return Hx(t);case z.BreakKeyword:return t.next(),At("break",{},r);case z.ContinueKeyword:return t.next(),At("continue",{},r)}const e=hs(t,!1),n=Ux(t,e);return n||e}function Ox(t){switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:return jy(t);case z.At:return Ry(t);default:throw new Gt(`unexpected token: ${z[t.getKind()]}`,t.token.loc)}}function gf(t){const r=t.token.loc;if(t.getKind()===z.OpenBrace){const e=Ac(t);return At("block",{statements:e},r)}else return Nh(t)}function jy(t){const r=t.token.loc;let e;switch(t.getKind()){case z.LetKeyword:{e=!1;break}case z.VarKeyword:{e=!0;break}default:throw new Gt(`unexpected token: ${z[t.getKind()]}`,t.token.loc)}t.next(),t.expect(z.Identifier);const n=t.token.value;t.next();let v;t.getKind()===z.Colon&&(t.next(),v=to(t)),t.nextWith(z.Eq),t.getKind()===z.NewLine&&t.next();const w=hs(t,!1);return At("def",{name:n,varType:v,expr:w,mut:e,attr:[]},r)}function Ry(t){const r=t.token.loc;t.nextWith(z.At),t.expect(z.Identifier);const e=t.token.value;t.next();const n=Oy(t);let v;t.getKind()===z.Colon&&(t.next(),v=to(t));const w=Ac(t);return At("def",{name:e,expr:At("fn",{args:n,retType:v,children:w},r),mut:!1,attr:[]},r)}function Tx(t){const r=t.token.loc;t.nextWith(z.Out);const e=hs(t,!1);return Pi("print",[e],r)}function Ix(t){const r=t.token.loc;let e=!1;t.nextWith(z.EachKeyword),t.getKind()===z.OpenParen&&(e=!0,t.next()),t.nextWith(z.LetKeyword),t.expect(z.Identifier);const n=t.token.value;if(t.next(),t.getKind()===z.Comma)t.next();else throw new Gt("separator expected",t.token.loc);const v=hs(t,!1);e&&t.nextWith(z.CloseParen);const w=gf(t);return At("each",{var:n,items:v,for:w},r)}function jx(t){const r=t.token.loc;let e=!1;if(t.nextWith(z.ForKeyword),t.getKind()===z.OpenParen&&(e=!0,t.next()),t.getKind()===z.LetKeyword){t.next();const n=t.token.loc;t.expect(z.Identifier);const v=t.token.value;t.next();let w;if(t.getKind()===z.Eq?(t.next(),w=hs(t,!1)):w=At("num",{value:0},n),t.getKind()===z.Comma)t.next();else throw new Gt("separator expected",t.token.loc);const _=hs(t,!1);e&&t.nextWith(z.CloseParen);const P=gf(t);return At("for",{var:v,from:w,to:_,for:P},r)}else{const n=hs(t,!1);e&&t.nextWith(z.CloseParen);const v=gf(t);return At("for",{times:n,for:v},r)}}function Rx(t){const r=t.token.loc;t.nextWith(z.ReturnKeyword);const e=hs(t,!1);return At("return",{expr:e},r)}function Dx(t){const r=[];for(;t.getKind()===z.OpenSharpBracket;)r.push(Lx(t)),t.nextWith(z.NewLine);const e=Nh(t);if(e.type!=="def")throw new Gt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function Lx(t){const r=t.token.loc;t.nextWith(z.OpenSharpBracket),t.expect(z.Identifier);const e=t.token.value;t.next();let n;return t.getKind()!==z.CloseBracket?n=hs(t,!0):n=At("bool",{value:!0},r),t.nextWith(z.CloseBracket),At("attr",{name:e,value:n},r)}function Hx(t){const r=t.token.loc;t.nextWith(z.LoopKeyword);const e=Ac(t);return At("loop",{statements:e},r)}function Ux(t,r){const e=t.token.loc;switch(t.getKind()){case z.Eq:{t.next();const n=hs(t,!1);return At("assign",{dest:r,expr:n},e)}case z.PlusEq:{t.next();const n=hs(t,!1);return At("addAssign",{dest:r,expr:n},e)}case z.MinusEq:{t.next();const n=hs(t,!1);return At("subAssign",{dest:r,expr:n},e)}default:return}}function Bx(t){const r=[];for(;t.getKind()===z.NewLine;)t.next();for(;t.getKind()!==z.EOF;){switch(t.getKind()){case z.Colon2:{r.push(Dy(t));break}case z.Sharp3:{r.push(qx(t));break}default:{r.push(Nh(t));break}}switch(t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.EOF:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Dy(t){const r=t.token.loc;t.nextWith(z.Colon2),t.expect(z.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();for(;t.getKind()!==z.CloseBrace;){switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:case z.At:{n.push(Ox(t));break}case z.Colon2:{n.push(Dy(t));break}}switch(t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.CloseBrace:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(z.CloseBrace),At("ns",{name:e,members:n},r)}function qx(t){const r=t.token.loc;t.nextWith(z.Sharp3);let e=null;t.getKind()===z.Identifier&&(e=t.token.value,t.next());const n=hs(t,!0);return At("meta",{name:e,value:n},r)}function zt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=zt(e.expr,r);break}case"return":{e.expr=zt(e.expr,r);break}case"each":{e.items=zt(e.items,r),e.for=zt(e.for,r);break}case"for":{e.from!=null&&(e.from=zt(e.from,r)),e.to!=null&&(e.to=zt(e.to,r)),e.times!=null&&(e.times=zt(e.times,r)),e.for=zt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=zt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=zt(e.expr,r),e.dest=zt(e.dest,r);break}case"not":{e.expr=zt(e.expr,r);break}case"if":{e.cond=zt(e.cond,r),e.then=zt(e.then,r);for(const n of e.elseif)n.cond=zt(n.cond,r),n.then=zt(n.then,r);e.else!=null&&(e.else=zt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=zt(e.children[n],r);break}case"match":{e.about=zt(e.about,r);for(const n of e.qs)n.q=zt(n.q,r),n.a=zt(n.a,r);e.default!=null&&(e.default=zt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=zt(e.statements[n],r);break}case"exists":{e.identifier=zt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=zt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],zt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=zt(e.value[n],r);break}case"call":{e.target=zt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=zt(e.args[n],r);break}case"index":{e.target=zt(e.target,r),e.index=zt(e.index,r);break}case"prop":{e.target=zt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=zt(e.members[n],r);break}case"or":case"and":{e.left=zt(e.left,r),e.right=zt(e.right,r);break}}return e}const yo=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function wo(t,r){throw new Gt(`Reserved word "${t}" cannot be used as variable name.`,r)}function zx(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{yo.includes(t.name)&&wo(t.name,t.loc);break}case"meta":{t.name!=null&&yo.includes(t.name)&&wo(t.name,t.loc);break}case"each":{yo.includes(t.var)&&wo(t.var,t.loc);break}case"for":{t.var!=null&&yo.includes(t.var)&&wo(t.var,t.loc);break}case"fn":{for(const r of t.args)yo.includes(r.name)&&wo(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())yo.includes(r)&&wo(r,t.loc);break}}return t}function Kx(t){for(const r of t)zt(r,zx);return t}function Gg(t){return{type:"simple",name:t}}function Vx(t,r){return{type:"generic",name:t,inners:r}}function Wx(t,r){return{type:"fn",args:t,result:r}}function Hc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Hc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Hc(n)).join(", "),e=Hc(t.result);return`@(${r}) { ${e} }`}}}function Po(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Gg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Po(t.inner):r=Gg("any"),Vx(t.name,[r])}}throw new Gt(`Unknown type: '${Hc(t)}'`,t.loc)}else{const r=t.args.map(e=>Po(e));return Wx(r,Po(t.result))}}function Gx(t){switch(t.type){case"def":{t.varType!=null&&Po(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Po(r.argType);t.retType!=null&&Po(t.retType);break}}return t}function Jx(t){for(const r of t)zt(r,Gx);return t}var Ou;let Zx=(Ou=class{constructor(){he(this,"plugins");this.plugins={validate:[Kx,Jx],transform:[]}}static parse(r){return Ou.instance==null&&(Ou.instance=new Ou),Ou.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new wx(r);e=Bx(n);for(const v of this.plugins.validate)e=v(e);for(const v of this.plugins.transform)e=v(e);return e}},he(Ou,"instance"),Ou);const Qx="next",Xx={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Rp=[],Go=null;function Yx(t){return Rp=Zx.parse(t),JSON.stringify(Rp,null,"	")}async function eb(t){Go==null||Go.abort(),Go=new dn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Op(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Op(e.val,!0),print:!1});break}}});try{await Go.exec(Rp)}catch(r){t.err(r)}}const tb=Object.freeze(Object.defineProperty({__proto__:null,exec:eb,parse:Yx,samples:Xx,version:Qx},Symbol.toStringTag,{value:"Module"}));function ss(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Fh=class Ly extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ly)}},rb=class extends Fh{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},ro=class extends Fh{constructor(e,n){super(e,n);he(this,"name","Syntax")}},pr=class extends Fh{constructor(e,n){super(e,n);he(this,"name","Runtime")}},Jg=class extends pr{constructor(r,e){super(r,e)}},sb=class extends pr{constructor(e,n){super(e,n);he(this,"name","")}};var Wu=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Hu=class Dp{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Dp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Dp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new pr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new pr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Wu([ss],Hu.prototype,"log",null);Wu([ss],Hu.prototype,"onUpdated",null);Wu([ss],Hu.prototype,"createChildScope",null);Wu([ss],Hu.prototype,"createChildNamespaceScope",null);Wu([ss],Hu.prototype,"get",null);Wu([ss],Hu.prototype,"exists",null);Wu([ss],Hu.prototype,"getAll",null);Wu([ss],Hu.prototype,"add",null);Wu([ss],Hu.prototype,"assign",null);const Vt={type:"null"},ma={type:"bool",value:!0},$a={type:"bool",value:!1},De=t=>({type:"num",value:t}),lr=t=>({type:"str",value:t}),qf=t=>({type:"bool",value:t}),vh=t=>({type:"obj",value:t}),es=t=>({type:"arr",value:t}),nb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ge=t=>({type:"fn",native:t}),ab=t=>({type:"return",value:t}),ib=()=>({type:"break",value:null}),lb=()=>({type:"continue",value:null}),ub=t=>t.type==="return"?t.value:t,Lp=(t,r)=>({type:"error",value:t,info:r});function Ca(t){if(t==null)throw new pr("Expect anything, but got nothing.")}function vn(t){if(t==null)throw new pr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new pr(`Expect boolean, but got ${t.type}.`)}function Eu(t){if(t==null)throw new pr("Expect function, but got nothing.");if(t.type!=="fn")throw new pr(`Expect function, but got ${t.type}.`)}function ds(t){if(t==null)throw new pr("Expect string, but got nothing.");if(t.type!=="str")throw new pr(`Expect string, but got ${t.type}.`)}function Se(t){if(t==null)throw new pr("Expect number, but got nothing.");if(t.type!=="num")throw new pr(`Expect number, but got ${t.type}.`)}function bu(t){if(t==null)throw new pr("Expect object, but got nothing.");if(t.type!=="obj")throw new pr(`Expect object, but got ${t.type}.`)}function zf(t){if(t==null)throw new pr("Expect array, but got nothing.");if(t.type!=="arr")throw new pr(`Expect array, but got ${t.type}.`)}function Qh(t){return t.type==="obj"}function Zg(t){return t.type==="arr"}function ko(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Hp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Hp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Up(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Up(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Up(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Bp(t){if(t===null)return Vt;if(typeof t=="boolean")return qf(t);if(typeof t=="string")return lr(t);if(typeof t=="number")return De(t);if(Array.isArray(t))return es(t.map(r=>Bp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Bp(n));return vh(r)}return Vt}function Mo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Mo(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${Mo(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const fb={version:"0.18.0"},ob=fb.version,cb=new TextEncoder,hb=new TextDecoder,pb={help:lr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":lr(ob),"Core:ai":lr("kawaii"),"Core:not":ge(([t])=>(vn(t),t.value?$a:ma)),"Core:eq":ge(([t,r])=>(Ca(t),Ca(r),ko(t,r)?ma:$a)),"Core:neq":ge(([t,r])=>(Ca(t),Ca(r),ko(t,r)?$a:ma)),"Core:and":ge(([t,r])=>(vn(t),t.value?(vn(r),r.value?ma:$a):$a)),"Core:or":ge(([t,r])=>(vn(t),t.value?ma:(vn(r),r.value?ma:$a))),"Core:add":ge(([t,r])=>(Se(t),Se(r),De(t.value+r.value))),"Core:sub":ge(([t,r])=>(Se(t),Se(r),De(t.value-r.value))),"Core:mul":ge(([t,r])=>(Se(t),Se(r),De(t.value*r.value))),"Core:pow":ge(([t,r])=>{Se(t),Se(r);const e=t.value**r.value;if(isNaN(e))throw new pr("Invalid operation.");return De(e)}),"Core:div":ge(([t,r])=>{Se(t),Se(r);const e=t.value/r.value;if(isNaN(e))throw new pr("Invalid operation.");return De(e)}),"Core:mod":ge(([t,r])=>(Se(t),Se(r),De(t.value%r.value))),"Core:gt":ge(([t,r])=>(Se(t),Se(r),t.value>r.value?ma:$a)),"Core:lt":ge(([t,r])=>(Se(t),Se(r),t.value<r.value?ma:$a)),"Core:gteq":ge(([t,r])=>(Se(t),Se(r),t.value>=r.value?ma:$a)),"Core:lteq":ge(([t,r])=>(Se(t),Se(r),t.value<=r.value?ma:$a)),"Core:type":ge(([t])=>(Ca(t),lr(t.type))),"Core:to_str":ge(([t])=>(Ca(t),lr(Mo(t)))),"Core:range":ge(([t,r])=>(Se(t),Se(r),t.value<r.value?es(Array.from({length:r.value-t.value+1},(e,n)=>De(n+t.value))):t.value>r.value?es(Array.from({length:t.value-r.value+1},(e,n)=>De(t.value-n))):es([t]))),"Core:sleep":ge(async([t])=>(Se(t),await new Promise(r=>setTimeout(r,t.value)),Vt)),"Core:abort":ge(async([t])=>{throw ds(t),new sb(t.value)}),"Util:uuid":ge(()=>lr(bc())),"Json:stringify":ge(([t])=>(Ca(t),lr(JSON.stringify(Up(t))))),"Json:parse":ge(([t])=>{ds(t);try{return Bp(JSON.parse(t.value))}catch{return Lp("not_json")}}),"Json:parsable":ge(([t])=>{ds(t);try{JSON.parse(t.value)}catch{return qf(!1)}return qf(!0)}),"Date:now":ge(()=>De(Date.now())),"Date:year":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":ge(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":ge(([t])=>(ds(t),De(new Date(t.value).getTime()))),"Date:to_iso_str":ge(([t,r])=>{t&&Se(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Se(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),ke=we.toString().padStart(2,"0");v=`${ue}${oe}:${ke}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),T=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return lr(`${w}-${_}-${P}T${E}:${N}:${T}.${H}${v}`)}),"Math:Infinity":De(1/0),"Math:E":De(Math.E),"Math:LN2":De(Math.LN2),"Math:LN10":De(Math.LN10),"Math:LOG2E":De(Math.LOG2E),"Math:LOG10E":De(Math.LOG10E),"Math:PI":De(Math.PI),"Math:SQRT1_2":De(Math.SQRT1_2),"Math:SQRT2":De(Math.SQRT2),"Math:abs":ge(([t])=>(Se(t),De(Math.abs(t.value)))),"Math:acos":ge(([t])=>(Se(t),De(Math.acos(t.value)))),"Math:acosh":ge(([t])=>(Se(t),De(Math.acosh(t.value)))),"Math:asin":ge(([t])=>(Se(t),De(Math.asin(t.value)))),"Math:asinh":ge(([t])=>(Se(t),De(Math.asinh(t.value)))),"Math:atan":ge(([t])=>(Se(t),De(Math.atan(t.value)))),"Math:atanh":ge(([t])=>(Se(t),De(Math.atanh(t.value)))),"Math:atan2":ge(([t,r])=>(Se(t),Se(r),De(Math.atan2(t.value,r.value)))),"Math:cbrt":ge(([t])=>(Se(t),De(Math.cbrt(t.value)))),"Math:ceil":ge(([t])=>(Se(t),De(Math.ceil(t.value)))),"Math:clz32":ge(([t])=>(Se(t),De(Math.clz32(t.value)))),"Math:cos":ge(([t])=>(Se(t),De(Math.cos(t.value)))),"Math:cosh":ge(([t])=>(Se(t),De(Math.cosh(t.value)))),"Math:exp":ge(([t])=>(Se(t),De(Math.exp(t.value)))),"Math:expm1":ge(([t])=>(Se(t),De(Math.expm1(t.value)))),"Math:floor":ge(([t])=>(Se(t),De(Math.floor(t.value)))),"Math:fround":ge(([t])=>(Se(t),De(Math.fround(t.value)))),"Math:hypot":ge(([t])=>{zf(t);const r=[];for(const e of t.value)Se(e),r.push(e.value);return De(Math.hypot(...r))}),"Math:imul":ge(([t,r])=>(Se(t),Se(r),De(Math.imul(t.value,r.value)))),"Math:log":ge(([t])=>(Se(t),De(Math.log(t.value)))),"Math:log1p":ge(([t])=>(Se(t),De(Math.log1p(t.value)))),"Math:log10":ge(([t])=>(Se(t),De(Math.log10(t.value)))),"Math:log2":ge(([t])=>(Se(t),De(Math.log2(t.value)))),"Math:max":ge(([t,r])=>(Se(t),Se(r),De(Math.max(t.value,r.value)))),"Math:min":ge(([t,r])=>(Se(t),Se(r),De(Math.min(t.value,r.value)))),"Math:pow":ge(([t,r])=>(Se(t),Se(r),De(Math.pow(t.value,r.value)))),"Math:round":ge(([t])=>(Se(t),De(Math.round(t.value)))),"Math:sign":ge(([t])=>(Se(t),De(Math.sign(t.value)))),"Math:sin":ge(([t])=>(Se(t),De(Math.sin(t.value)))),"Math:sinh":ge(([t])=>(Se(t),De(Math.sinh(t.value)))),"Math:sqrt":ge(([t])=>{Se(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new pr("Invalid operation.");return De(r)}),"Math:tan":ge(([t])=>(Se(t),De(Math.tan(t.value)))),"Math:tanh":ge(([t])=>(Se(t),De(Math.tanh(t.value)))),"Math:trunc":ge(([t])=>(Se(t),De(Math.trunc(t.value)))),"Math:rnd":ge(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?De(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):De(Math.random())),"Math:gen_rng":ge(([t])=>{if(Ca(t),t.type!=="num"&&t.type!=="str")return Vt;const r=fo(t.value.toString());return ge(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?De(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):De(r()))}),"Num:to_hex":ge(([t])=>(Se(t),lr(t.value.toString(16)))),"Num:from_hex":ge(([t])=>(ds(t),De(parseInt(t.value,16)))),"Str:lf":lr(`
`),"Str:lt":ge(([t,r])=>(ds(t),ds(r),t.value<r.value?De(-1):t.value===r.value?De(0):De(1))),"Str:gt":ge(([t,r])=>(ds(t),ds(r),t.value>r.value?De(-1):t.value===r.value?De(0):De(1))),"Str:from_codepoint":ge(([t])=>(Se(t),lr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ge(([t])=>(zf(t),lr(Array.from(t.value.map(r=>(Se(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ge(([t])=>(zf(t),lr(hb.decode(Uint8Array.from(t.value.map(r=>(Se(r),r.value))))))),"Arr:create":ge(([t,r])=>{Se(t);try{return es(Array(t.value).fill(r??Vt))}catch(e){throw t.value<0?new pr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new pr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ge(([t])=>(bu(t),es(Array.from(t.value.keys()).map(r=>lr(r))))),"Obj:vals":ge(([t])=>(bu(t),es(Array.from(t.value.values())))),"Obj:kvs":ge(([t])=>(bu(t),es(Array.from(t.value.entries()).map(([r,e])=>es([lr(r),e]))))),"Obj:get":ge(([t,r])=>(bu(t),ds(r),t.value.get(r.value)??Vt)),"Obj:set":ge(([t,r,e])=>(bu(t),ds(r),Ca(e),t.value.set(r.value,e),Vt)),"Obj:has":ge(([t,r])=>(bu(t),ds(r),qf(t.value.has(r.value)))),"Obj:copy":ge(([t])=>(bu(t),vh(new Map(t.value)))),"Obj:merge":ge(([t,r])=>(bu(t),bu(r),vh(new Map([...t.value,...r.value])))),"Error:create":ge(([t,r])=>(ds(t),Lp(t.value,r))),"Async:interval":ge(async([t,r,e],n)=>{Se(t),Eu(r),e&&(vn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ge(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ge(async([t,r],e)=>{Se(t),Eu(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ge(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},Qg={num:{to_str:t=>ge(async(r,e)=>lr(t.value.toString()))},str:{to_num:t=>ge(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Vt:De(n)}),to_arr:t=>ge(async(r,e)=>es(zs(t.value).map(n=>lr(n)))),to_unicode_arr:t=>ge(async(r,e)=>es([...t.value].map(n=>lr(n)))),to_unicode_codepoint_arr:t=>ge(async(r,e)=>es([...t.value].map(n=>{const v=n.codePointAt(0);return De(v??n.charCodeAt(0))}))),to_char_arr:t=>ge(async(r,e)=>es(t.value.split("").map(n=>lr(n)))),to_charcode_arr:t=>ge(async(r,e)=>es(t.value.split("").map(n=>De(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ge(async(r,e)=>es(Array.from(cb.encode(t.value)).map(n=>De(n)))),len:t=>De(co(t.value)),replace:t=>ge(async([r,e],n)=>(ds(r),ds(e),lr(t.value.split(r.value).join(e.value)))),index_of:t=>ge(async([r,e],n)=>{ds(r),e&&Se(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return De(po(t.value,r.value,v))}),incl:t=>ge(async([r],e)=>(ds(r),t.value.includes(r.value)?ma:$a)),trim:t=>ge(async(r,e)=>lr(t.value.trim())),upper:t=>ge(async(r,e)=>lr(t.value.toUpperCase())),lower:t=>ge(async(r,e)=>lr(t.value.toLowerCase())),split:t=>ge(async([r],e)=>(r&&ds(r),es(r?t.value.split(r?r.value:"").map(n=>lr(n)):zs(t.value).map(n=>lr(n))))),slice:t=>ge(async([r,e],n)=>(Se(r),Se(e),lr(ho(t.value,r.value,e.value)))),pick:t=>ge(async([r],e)=>{Se(r);const v=zs(t.value)[r.value];return v?lr(v):Vt}),charcode_at:t=>ge(([r],e)=>{Se(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Vt:De(n)}),codepoint_at:t=>ge(([r],e)=>{Se(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Vt:De(n)})},arr:{len:t=>De(t.value.length),push:t=>ge(async([r],e)=>(Ca(r),t.value.push(r),t)),unshift:t=>ge(async([r],e)=>(Ca(r),t.value.unshift(r),t)),pop:t=>ge(async(r,e)=>t.value.pop()??Vt),shift:t=>ge(async(r,e)=>t.value.shift()??Vt),concat:t=>ge(async([r],e)=>(zf(r),es(t.value.concat(r.value)))),slice:t=>ge(async([r,e],n)=>(Se(r),Se(e),es(t.value.slice(r.value,e.value)))),join:t=>ge(async([r],e)=>(r&&ds(r),lr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ge(async([r],e)=>{Eu(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,De(w)]));return es(await Promise.all(n))}),filter:t=>ge(async([r],e)=>{Eu(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,De(v)]);vn(_),_.value&&n.push(w)}return es(n)}),reduce:t=>ge(async([r,e],n)=>{Eu(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,De(_)])}return w}),find:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(vn(w),w.value)return v}return Vt}),incl:t=>ge(async([r],e)=>(Ca(r),t.value.some(n=>ko(r,n))?ma:$a)),index_of:t=>ge(async([r,e],n)=>{if(Ca(r),e){Se(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>ko(_,r));return De(w<0?w:w+v)}else return De(t.value.findIndex(v=>ko(v,r)))}),reverse:t=>ge(async(r,e)=>(t.value.reverse(),Vt)),copy:t=>ge(async(r,e)=>es([...t.value])),sort:t=>ge(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);Se(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return Eu(r),zf(t),t.value=await n(t.value,r),t}),fill:t=>ge(async([r,e,n],v)=>{const w=r??Vt,_=e&&(Se(e),e.value),P=n&&(Se(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>ge(async([r],e)=>{Se(r);try{return es(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new pr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new pr("arr.repeat expected integer, got non-integer")}}),every:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(vn(w),!w.value)return $a}return ma}),some:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(vn(w),w.value)return ma}return $a})},error:{name:t=>lr(t.value),info:t=>t.info??Vt}};function vb(t,r){if(Object.hasOwn(Qg,t.type)){const e=Qg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new pr(`No such prop (${r}) in ${t.type}.`)}else throw new pr(`Cannot read prop of ${t.type}. (reading ${r})`)}const gb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ha=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Hy=300,db=Hy-1;let Pn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:ge(([v])=>{Ca(v),this.opts.out&&this.opts.out(v)}),readline:ge(async v=>{const w=v[0];if(ds(w),this.opts.in==null)return Vt;const _=await this.opts.in(w.value);return lr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...pb,...n}).map(([v,w])=>[v,gb.const(w)])),this.scope=new Hu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Lp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Fh?this.opts.err(r):this.opts.err(new rb(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Vt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return ub(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Vt;if(this.stepCount%Hy===db&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new pr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Eu(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(vn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(vn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Vt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(ko(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Vt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Vt}case"for":{if(r.times){const n=await this._eval(r.times,e);Se(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Se(n),Se(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:De(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Vt}case"each":{const n=await this._eval(r.items,e);zf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Vt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Vt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Vt}case"addAssign":{const n=await this._eval(r.dest,e);Se(n);const v=await this._eval(r.expr,e);return Se(v),await this.assign(e,r.dest,De(n.value+v.value)),Vt}case"subAssign":{const n=await this._eval(r.dest,e);Se(n);const v=await this._eval(r.expr,e);return Se(v),await this.assign(e,r.dest,De(n.value-v.value)),Vt}case"null":return Vt;case"bool":return qf(r.value);case"num":return De(r.value);case"str":return lr(r.value);case"arr":return es(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return vh(n)}case"prop":{const n=await this._eval(r.target,e);return Qh(n)?n.value.has(r.name)?n.value.get(r.name):Vt:vb(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Zg(n)){Se(v);const w=n.value[v.value];if(w===void 0)throw new Jg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(Qh(n))return ds(v),n.value.has(v.value)?n.value.get(v.value):Vt;throw new pr(`Cannot read prop (${Mo(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return vn(n),qf(!n.value)}case"fn":return nb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return qf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=Mo(w)}return lr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),ab(n)}case"break":return this.log("block:break",{scope:e.name}),ib();case"continue":return this.log("block:continue",{scope:e.name}),lb();case"ns":return Vt;case"meta":return Vt;case"and":{const n=await this._eval(r.left,e);if(vn(n),n.value){const v=await this._eval(r.right,e);return vn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(vn(n),n.value)return n;{const v=await this._eval(r.right,e);return vn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Vt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(Zg(v)){if(Se(w),v.value[w.value]===void 0)throw new Jg(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(Qh(v))ds(w),v.value.set(w.value,n);else throw new pr(`Cannot read prop (${Mo(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);bu(v),v.value.set(e.name,n)}else if(e.type==="arr")zf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Vt)));else if(e.type==="obj")bu(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Vt)));else throw new pr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ha([ss],Pn.prototype,"exec",null);ha([ss],Pn.prototype,"execFn",null);ha([ss],Pn.prototype,"execFnSimple",null);ha([ss],Pn.prototype,"handleError",null);ha([ss],Pn.prototype,"log",null);ha([ss],Pn.prototype,"collectNs",null);ha([ss],Pn.prototype,"collectNsMember",null);ha([ss],Pn.prototype,"_fn",null);ha([ss],Pn.prototype,"_eval",null);ha([ss],Pn.prototype,"_run",null);ha([ss],Pn.prototype,"registerAbortHandler",null);ha([ss],Pn.prototype,"unregisterAbortHandler",null);ha([ss],Pn.prototype,"abort",null);ha([ss],Pn.prototype,"assign",null);ha([ss],Pn,"collectMetadata",null);function yb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Kf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Kf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}yb(Kf,Error);function Xh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Kf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=Xh("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+Xh("",v.column-1," ")+Xh("",H,"^")}else r+=`
 at `+_}return r};Kf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Xg(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:er,Main:ci},w=er,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="!",Ir="[",Qt=".",Pr="if",Bt="elif",Ar="else",Ur="match",rr="=>",jr="*",Xt="eval",$r="exists",W="`",re='"',fe="'",xe='\\"',ce="\\'",Ee="true",Ie="false",Ae="null",Pe="@",$e="@(",Je="<",rt=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,it=/^[%*-+\-\/<>\^]/,_t=/^[^`{]/,dt=/^[{}`]/,Ct=/^[+\-]/,Pt=/^[1-9]/,ot=/^[0-9]/,ks=/^[,;]/,as=/^[A-Z_]/i,Xr=/^[A-Z0-9_]/i,xt=/^[\r\n]/,It=/^[ \t\r\n]/,yn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),sr=j("*/",!1),Dt=j("(",!1),Br=j(")",!1),Sn=j("::",!1),kt=j("{",!1),ut=j("}",!1),kr=j("###",!1),qt=j("let",!1),st=j(":",!1),Lt=j("=",!1),ms=j("var",!1),Ht=j("<:",!1),Ut=j("#[",!1),qr=j("]",!1),Fa=j("each",!1),Mr=j(",",!1),is=j("for",!1),Ns=j("return",!1),ft=bt([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=j("loop",!1),Ks=j("break",!1),Er=j("continue",!1),Sr=j("+=",!1),Gi=j("-=",!1),Oa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Ia=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=bt(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),Nn=j("[",!1),Vs=j(".",!1),Fn=j("if",!1),ja=j("elif",!1),tl=j("else",!1),Ra=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Os=bt(["`","{"],!0,!1),On=bt(["{","}","`"],!1,!1),Ws=j('"',!1),Gs=j("'",!1),al=j('\\"',!1),Js=j("\\'",!1),ls=bt(["+","-"],!1,!1),Ts=bt([["1","9"]],!1,!1),xr=bt([["0","9"]],!1,!1),Zs=j("true",!1),Qs=j("false",!1),Xs=j("null",!1),us=bt([",",";"],!1,!1),Ys=j("@",!1),Is=j("@(",!1),Da=j("<",!1),Yt=j(">",!1),La=bt([["A","Z"],"_"],!1,!0),dr=bt([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),en=bt(["\r",`
`],!1,!1),ll=bt([" ","	","\r",`
`],!1,!1),js=bt([" ","	"],!1,!1),ul=function(o){return o.join("")},Tn=function(){return f()},fl=function(){return f()},Ha=function(){return""},ol=function(){return""},cl=function(o){return o??[]},Ua=function(o,g){return g},hl=function(o,g){return[o,...g]},Ba=function(o,g){return g},pl=function(o,g){return[o,...g]},qa=function(o,g){return g},vl=function(o,g){return[o,...g]},za=function(o){return o},gl=function(o,g){return ne("ns",{name:o,members:g})},In=function(o,g){return ne("meta",{name:o,value:g})},dl=function(o){return ne("meta",{name:null,value:o})},jn=function(o,g,b){return ne("def",{name:o,varType:g,expr:b,mut:!1,attr:[]})},yl=function(o,g,b){return ne("def",{name:o,varType:g,expr:b,mut:!0,attr:[]})},Ka=function(o){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[o]})]})},wl=function(o,g){return ne("attr",{name:o,value:g??ne("bool",{value:!0})})},ml=function(o,g,b){return ne("each",{var:o,items:g,for:b})},$l=function(o,g,b){return ne("each",{var:o,items:g,for:b})},xl=function(o,g){return g},bl=function(o,g,b,y){return ne("for",{var:o,from:g??ne("num",{value:0}),to:b,for:y})},Al=function(o,g){return g},Cl=function(o,g,b,y){return ne("for",{var:o,from:g??ne("num",{value:0}),to:b,for:y})},_l=function(o,g){return ne("for",{times:o,for:g})},Pl=function(o,g){return ne("for",{times:o,for:g})},kl=function(o){return ne("return",{expr:o})},Ml=function(o){return ne("loop",{statements:o})},El=function(){return ne("break",{})},Sl=function(){return ne("continue",{})},Nl=function(o,g,b){return g==="+="?ne("addAssign",{dest:o,expr:b}):g==="-="?ne("subAssign",{dest:o,expr:b}):ne("assign",{dest:o,expr:b})},Va=function(o,g,b){return{op:g,term:b}},Fl=function(o,g){return ne("infix",{operands:[o,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Ol=function(){return f()},Tl=function(o){return ne("not",{expr:o})},Il=function(o,g){return o.chain?{...o,chain:[...o.chain,...g]}:{...o,chain:g}},jl=function(o){return ne("callChain",{args:o??[]})},Rn=function(o,g){return g},Rl=function(o,g){return[o,...g]},Wa=function(o){return ne("indexChain",{index:o})},Dl=function(o){return ne("propChain",{name:o})},Ll=function(o,g,b,y){return ne("if",{cond:o,then:g,elseif:b??[],else:y})},Hl=function(o,g){return[o,...g]},Ga=function(o,g){return{cond:o,then:g}},Ul=function(o){return o},Dn=function(o,g,b){return{q:g,a:b}},Bl=function(o,g,b){return ne("match",{about:o,qs:g??[],default:b})},ql=function(o){return ne("block",{statements:o})},zl=function(o){return ne("exists",{identifier:o})},Kl=function(o){return ne("identifier",{name:o})},Vl=function(o){return ne("tmpl",{tmpl:o})},Ja=function(o){return o.join("")},Za=function(o){return o},Qa=function(o){return ne("str",{value:o.join("")})},Xa=function(o){return o},Wl=function(o){return ne("str",{value:o.join("")})},Gl=function(){return'"'},Ya=function(){return"'"},Jl=function(){return ne("num",{value:parseFloat(f())})},ei=function(){return ne("num",{value:parseFloat(f())})},ti=function(){return ne("num",{value:parseInt(f(),10)})},Zl=function(){return ne("num",{value:parseInt(f(),10)})},ri=function(){return ne("bool",{value:!0})},Ql=function(){return ne("bool",{value:!1})},Xl=function(){return ne("null",{})},si=function(o,g){return{k:o,v:g}},Yl=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ne("obj",{value:g})},ni=function(o){return o},eu=function(o){return ne("arr",{value:o})},tu=function(o,g){return{name:o,argType:g}},ai=function(o,g){return[o,...g]},ru=function(o,g,b,y,a,l){return(o.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:y??[],retType:a},l??[]),mut:!1,attr:[]})},ii=function(o,g,b){return ne("fn",{args:o??[],retType:g},b??[])},Ln=function(o){return o},su=function(o){return ne("arr",{value:o})},Hn=function(o,g){return{k:o,v:g}},nu=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ne("obj",{value:g})},au=function(o,g){return ne("fnTypeSource",{args:o??[],result:g})},li=function(o,g){return[o,...g]},iu=function(o,g){return ne("namedTypeSource",{name:o,inner:g})},ui=function(o){return ne("namedTypeSource",{name:o,inner:null})},fi=function(){return f()},lu=function(){return f()},oi=function(o){return ne("block",{statements:o??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,tn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},zr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function f(){return t.substring(te,c)}function Y(){return le(te,c)}function O(o,g){throw g=g!==void 0?g:le(te,c),uu(o,g)}function j(o,g){return{type:"literal",text:o,ignoreCase:g}}function bt(o,g,b){return{type:"class",parts:o,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function q(){return{type:"end"}}function Rs(o){var g=xs[o],b;if(g)return g;if(o>=xs.length)b=xs.length-1;else for(b=o;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<o;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[o]=g,g}function le(o,g,b){var y=Rs(o),a=Rs(g),l={source:n,start:{offset:o,line:y.line,column:y.column},end:{offset:g,line:a.line,column:a.column}};return b&&n&&typeof n.offset=="function"&&(l.start=n.offset(l.start),l.end=n.offset(l.end)),l}function D(o){c<yr||(c>yr&&(yr=c,tn=[]),tn.push(o))}function uu(o,g){return new Kf(o,null,null,g)}function pe(o,g,b){return new Kf(Kf.buildMessage(o,g),o,g,b)}function er(){var o,g,b,y=c*77+0,a=S[y];if(a)return c=a.nextPos,a.result;for(o=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=o,g=ul(g),o=g,S[y]={nextPos:c,result:o},o}function Ds(){var o,g,b=c*77+1,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=$i(),g!==e&&(te=o,g=Tn()),o=g,o===e&&(o=c,g=ln(),g!==e&&(te=o,g=fl()),o=g,o===e&&(o=L(),o===e&&(t.length>c?(o=t.charAt(c),c++):(o=e,i===0&&D(gr))))),S[b]={nextPos:c,result:o},o)}function L(){var o,g,b,y,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,2)===_?(g=_,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],y=c,a=c,i++,l=_i(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,l=_i(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=Ha()}else c=o,o=e;if(o===e)if(o=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(sr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(sr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);t.substr(c,2)===E?(y=E,c+=2):(y=e,i===0&&D(sr)),y!==e?(te=o,o=ol()):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ci(){var o,g,b,y,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=rn(),b===e&&(b=null),y=[],a=k();a!==e;)y.push(a),a=k();return te=o,o=cl(b),S[l]={nextPos:c,result:o},o}function rn(){var o,g,b,y,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Un(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=hl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function R(){var o,g,b,y,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=sn(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=pl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function bs(){var o,g,b,y,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=As(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=qa(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=qa(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=vl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Un(){var o,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(o=br(),o===e&&(o=Xe(),o===e&&(o=As())),S[g]={nextPos:c,result:o},o)}function sn(){var o,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=br())),S[g]={nextPos:c,result:o},o)}function As(){var o,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=Cs(),o===e&&(o=Vr(),o===e&&(o=Ve(),o===e&&(o=Ls(),o===e&&(o=hi(),o===e&&(o=pi(),o===e&&(o=fu(),o===e&&(o=vi(),o===e&&(o=ou(),o===e&&(o=et()))))))))))),S[g]={nextPos:c,result:o},o)}function et(){var o,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(o=cu(),o===e&&(o=Kr()),S[g]={nextPos:c,result:o},o)}function Kr(){var o,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(o=Jr(),o===e&&(o=du(),o===e&&(o=pu(),o===e&&(o=nn()))),S[g]={nextPos:c,result:o},o)}function nn(){var o,g,b,y,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(o=Kn(),o===e&&(o=vu(),o===e&&(o=mi(),o===e&&(o=$i(),o===e&&(o=ln(),o===e&&(o=Gn(),o===e&&(o=fn(),o===e&&(o=Qn(),o===e&&(o=Xn(),o===e&&(o=Ai(),o===e&&(o=hu(),o===e&&(o=Hs(),o===e))))))))))))if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=za(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Nr(){var o,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(o=Gn(),o===e&&(o=ln(),o===e&&(o=fn(),o===e&&(o=ra(),o===e&&(o=sa(),o===e&&(o=Qn()))))),S[g]={nextPos:c,result:o},o)}function br(){var o,g,b,y,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(Sn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=B,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=o,o=gl(y,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Xe(){var o,g,b,y,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=tt(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Nr(),l!==e?(te=o,o=In(y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();y=Nr(),y!==e?(te=o,o=dl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function fs(){var o,g,b,y,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(o=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(qt)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=ke,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=jn(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=ke,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=yl(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[u]={nextPos:c,result:o},o}function Cs(){var o,g,b,y,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();y=et(),y!==e?(te=o,o=Ka(y)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Ve(){var o,g,b,y,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,2)===Q?(g=Q,c+=2):(g=e,i===0&&D(Ut)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Nr(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&D(qr)),$!==e?(te=o,o=wl(y,a)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Ls(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+19,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=T,c++):(h=e,i===0&&D(Br)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=nr(),m!==e?(te=o,o=ml($,d,m)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=nr(),h!==e?(te=o,o=$l(l,u,h)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function hi(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A=c*77+20,M=S[A];if(M)return c=M.nextPos,M.result;if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=ke,c++):(u=e,i===0&&D(Lt)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Mr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=T,c++):(x=e,i===0&&D(Br)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=nr(),C!==e?(te=o,o=bl($,s,h,C)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=ke,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=nr(),x!==e?(te=o,o=Cl(l,p,d,x)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=nr(),p!==e?(te=o,o=_l(a,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=nr(),l!==e?(te=o,o=Pl(y,l)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e}}return S[A]={nextPos:c,result:o},o}function Vr(){var o,g,b,y,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=et(),a!==e?(te=o,o=kl(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function pi(){var o,g,b,y,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(kt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=Ml(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function fu(){var o,g,b,y,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Te?(g=Te,c+=5):(g=e,i===0&&D(Ks)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=El()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function vi(){var o,g,b,y,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,8)===_e?(g=_e,c+=8):(g=e,i===0&&D(Er)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Sl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function ou(){var o,g,b,y,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.substr(c,2)===at?(y=at,c+=2):(y=e,i===0&&D(Sr)),y===e&&(t.substr(c,2)===pt?(y=pt,c+=2):(y=e,i===0&&D(Gi)),y===e&&(t.charCodeAt(c)===61?(y=ke,c++):(y=e,i===0&&D(Lt)))),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=o,o=Nl(g,y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function cu(){var o,g,b,y,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Kr(),g!==e){for(b=[],y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=gi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Va(g,l,p)):(c=y,y=e)}else c=y,y=e;if(y!==e)for(;y!==e;){for(b.push(y),y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=gi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Va(g,l,p)):(c=y,y=e)}else c=y,y=e}else b=e;b!==e?(te=o,o=Fl(g,b)):(c=o,o=e)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Wr(){var o,g,b,y=c*77+27,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=tr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=We(),b!==e?(g=[g,b],o=g):(c=o,o=e)):(c=o,o=e),o===e&&(o=je()),S[y]={nextPos:c,result:o},o)}function gi(){var o,g,b=c*77+28,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===wt?(g=wt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Ia)),g===e&&(t.substr(c,2)===Jt?(g=Jt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Zt?(g=Zt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),it.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=o,g=Ol()),o=g,S[b]={nextPos:c,result:o},o)}function hu(){var o,g,b,y=c*77+29,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===33?(g=ht,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=o,o=Tl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function pu(){var o,g,b,y,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=nn(),g!==e){if(b=[],y=di(),y===e&&(y=Bn(),y===e&&(y=yi())),y!==e)for(;y!==e;)b.push(y),y=di(),y===e&&(y=Bn(),y===e&&(y=yi()));else b=e;b!==e?(te=o,o=Il(g,b)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function di(){var o,g,b,y,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=Gr(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=jl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Gr(){var o,g,b,y,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);te=o,o=Rl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Bn(){var o,g,b,y,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=Wa(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function yi(){var o,g,b,y=c*77+34,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===46?(g=Qt,c++):(g=e,i===0&&D(Vs)),g!==e?(b=tt(),b!==e?(te=o,o=Dl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function Jr(){var o,g,b,y,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===Pr?(g=Pr,c+=2):(g=e,i===0&&D(Fn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=nr(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=qn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=wi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=o,o=Ll(y,l,$,p)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function qn(){var o,g,b,y,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=zn(),g!==e){for(b=[],y=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=zn(),l!==e?y=l:(c=y,y=e);y!==e;){for(b.push(y),y=c,a=[],l=k();l!==e;)a.push(l),l=k();l=zn(),l!==e?y=l:(c=y,y=e)}te=o,o=Hl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function zn(){var o,g,b,y,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,4)===Bt?(g=Bt,c+=4):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=nr(),$!==e?(te=o,o=Ga(a,$)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function wi(){var o,g,b,y,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,4)===Ar?(g=Ar,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=nr(),a!==e?(te=o,o=Ul(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function Kn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.substr(c,5)===Ur?(g=Ur,c+=5):(g=e,i===0&&D(Ra)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=B,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=jr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=C}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=o,o=Bl(a,s,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[I]={nextPos:c,result:o},o}function vu(){var o,g,b,y,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Xt?(g=Xt,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(kt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=ql(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function mi(){var o,g,b,y,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,6)===$r?(g=$r,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;b!==e?(y=Hs(),y!==e?(te=o,o=zl(y)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Hs(){var o,g,b=c*77+42,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=wu(),g!==e&&(te=o,g=Kl(g)),o=g,S[b]={nextPos:c,result:o},o)}function $i(){var o,g,b,y,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===96?(y=W,c++):(y=e,i===0&&D($s)),y!==e?(te=o,o=Vl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function xi(){var o,g,b,y,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=et(),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?o=y:(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,g=[],b=an(),b!==e)for(;b!==e;)g.push(b),b=an();else g=e;g!==e&&(te=o,g=Ja(g)),o=g}return S[$]={nextPos:c,result:o},o}function an(){var o,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(o=gu(),o===e&&(o=t.charAt(c),_t.test(o)?c++:(o=e,i===0&&D(Os))),S[g]={nextPos:c,result:o},o)}function gu(){var o,g,b,y=c*77+46,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=tr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=t.charAt(c),dt.test(b)?c++:(b=e,i===0&&D(On)),b!==e?o=b:(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function ln(){var o,g,b,y,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Ws)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Za(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Za(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===34?(y=re,c++):(y=e,i===0&&D(Ws)),y!==e?(te=o,o=Qa(b)):(c=o,o=e)}else c=o,o=e;if(o===e)if(o=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(Gs)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Xa(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Xa(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===39?(y=fe,c++):(y=e,i===0&&D(Gs)),y!==e?(te=o,o=Wl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Vn(){var o,g,b=c*77+48,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=o,g=Gl()),o=g,S[b]={nextPos:c,result:o},o)}function Wn(){var o,g,b=c*77+49,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===ce?(g=ce,c+=2):(g=e,i===0&&D(Js)),g!==e&&(te=o,g=Ya()),o=g,S[b]={nextPos:c,result:o},o)}function Gn(){var o,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(o=un(),o===e&&(o=Jn()),S[g]={nextPos:c,result:o},o)}function un(){var o,g,b,y,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;if(y!==e)if(t.charCodeAt(c)===46?(a=Qt,c++):(a=e,i===0&&D(Vs)),a!==e){if(l=[],$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr));else l=e;l!==e?(te=o,o=Jl()):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e)if(t.charCodeAt(c)===46?(y=Qt,c++):(y=e,i===0&&D(Vs)),y!==e){if(a=[],l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr));else a=e;a!==e?(te=o,o=ei()):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Jn(){var o,g,b,y,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;y!==e?(te=o,o=ti()):(c=o,o=e)}else c=o,o=e;return o===e&&(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e?(te=o,o=Zl()):(c=o,o=e)),S[l]={nextPos:c,result:o},o}function fn(){var o,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(o=bi(),o===e&&(o=Zn()),S[g]={nextPos:c,result:o},o)}function bi(){var o,g,b,y,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ee?(g=Ee,c+=4):(g=e,i===0&&D(Zs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=ri()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Zn(){var o,g,b,y,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Qs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Ql()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Qn(){var o,g,b,y,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Xl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Xn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+57,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=Yl(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function Ai(){var o,g,b,y,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=eu(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Yn(){var o,g,b,y,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=tt(),g!==e){for(b=c,y=[],a=k();a!==e;)y.push(a),a=k();if(t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=o,o=tu(g,b)}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function ea(){var o,g,b,y,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=Yn(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ai(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ta(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.charCodeAt(c)===64?(g=Pe,c++):(g=e,i===0&&D(Ys)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=tt(),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Dt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=ea(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=T,c++):(u=e,i===0&&D(Br)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=oe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=wr(),C!==e?d=C:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=B,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();for(C=bs(),C===e&&(C=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=J,c++):(M=e,i===0&&D(ut)),M!==e?(te=o,o=ru(b,y,a,p,d,C)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[I]={nextPos:c,result:o},o}function du(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m=c*77+62,C=S[m];if(C)return c=C.nextPos,C.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=ea(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=oe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=B,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=o,o=ii(y,$,d)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[m]={nextPos:c,result:o},o}function ra(){var o,g,b,y,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=su(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function sa(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+64,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=nu(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function wr(){var o,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(o=yu(),o===e&&(o=Ci()),S[g]={nextPos:c,result:o},o)}function yu(){var o,g,b,y,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=na(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===rr?(p=rr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=o,o=au(y,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function na(){var o,g,b,y,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=wr(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=li(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Ci(){var o,g,b,y,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=tt(),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(t.charCodeAt(c)===60?(y=Je,c++):(y=e,i===0&&D(Da)),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();if(l=wr(),l!==e){for($=[],p=je();p!==e;)$.push(p),p=je();t.charCodeAt(c)===62?(p=rt,c++):(p=e,i===0&&D(Yt)),p!==e?(te=o,o=iu(g,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return o===e&&(o=c,g=tt(),g!==e&&(te=o,g=ui(g)),o=g),S[s]={nextPos:c,result:o},o}function tt(){var o,g,b,y,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=t.charAt(c),as.test(g)?c++:(g=e,i===0&&D(La)),g!==e){for(b=[],y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));y!==e;)b.push(y),y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));te=o,o=fi()}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function wu(){var o,g,b,y,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=tt(),g!==e){for(b=[],y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=lu()}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function _s(){var o,g,b,y,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Mr)),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();g=[g,b,y],o=g}else c=o,o=e;if(o===e)if(o=[],g=k(),g!==e)for(;g!==e;)o.push(g),g=k();else o=e;return S[l]={nextPos:c,result:o},o}function nr(){var o,g,b,y,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=bs(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=o,o=oi(y)):(c=o,o=e)}else c=o,o=e;return o===e&&(o=As()),S[$]={nextPos:c,result:o},o}function We(){var o,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(o=Ye,c+=2):(o=e,i===0&&D(il)),o===e&&(o=t.charAt(c),xt.test(o)?c++:(o=e,i===0&&D(en))),S[g]={nextPos:c,result:o},o)}function _i(){var o,g,b=c*77+74,y=S[b];return y?(c=y.nextPos,y.result):(o=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?o=void 0:(c=o,o=e),o===e&&(o=We()),S[b]={nextPos:c,result:o},o)}function k(){var o,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),It.test(o)?c++:(o=e,i===0&&D(ll)),S[g]={nextPos:c,result:o},o)}function je(){var o,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),yn.test(o)?c++:(o=e,i===0&&D(js)),S[g]={nextPos:c,result:o},o)}function ne(o,g,b){const y={type:o};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(y[l]=g[l]);const a=Y();return y.loc={start:a.start.offset,end:a.end.offset-1},y}if(zr=w(),r.peg$library)return{peg$result:zr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:tn,peg$maxFailPos:yr};if(zr!==e&&c===t.length)return zr;throw zr!==e&&c<t.length&&D(q()),pe(tn,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const wb=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function mb(t){return wb.includes(t.type)}function Uy(t){return"chain"in t&&t.chain!==null}function $b(t,r,e){return{type:"call",target:t,args:r,loc:e}}function xb(t,r,e){return{type:"index",target:t,index:r,loc:e}}function bb(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Mt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Mt(e.expr,r);break}case"return":{e.expr=Mt(e.expr,r);break}case"each":{e.items=Mt(e.items,r),e.for=Mt(e.for,r);break}case"for":{e.from!=null&&(e.from=Mt(e.from,r)),e.to!=null&&(e.to=Mt(e.to,r)),e.times!=null&&(e.times=Mt(e.times,r)),e.for=Mt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Mt(e.expr,r),e.dest=Mt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Mt(e.operands[n],r);break}case"not":{e.expr=Mt(e.expr,r);break}case"if":{e.cond=Mt(e.cond,r),e.then=Mt(e.then,r);for(const n of e.elseif)n.cond=Mt(n.cond,r),n.then=Mt(n.then,r);e.else!=null&&(e.else=Mt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Mt(e.children[n],r);break}case"match":{e.about=Mt(e.about,r);for(const n of e.qs)n.q=Mt(n.q,r),n.a=Mt(n.a,r);e.default!=null&&(e.default=Mt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"exists":{e.identifier=Mt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Mt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Mt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Mt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"indexChain":{e.index=Mt(e.index,r);break}case"call":{e.target=Mt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"index":{e.target=Mt(e.target,r),e.index=Mt(e.index,r);break}case"prop":{e.target=Mt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Mt(e.members[n],r);break}case"or":case"and":{e.left=Mt(e.left,r),e.right=Mt(e.right,r);break}}if(Uy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Mt(e.chain[n],r);return e}const Yh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function ep(t){throw new ro(`Reserved word "${t}" cannot be used as variable name.`)}function Ab(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Yh.includes(t.name)&&ep(t.name);break}case"meta":{t.name!=null&&Yh.includes(t.name)&&ep(t.name);break}case"fn":{for(const r of t.args)Yh.includes(r.name)&&ep(r.name);break}}return t}function Cb(t){for(const r of t)Mt(r,Ab);return t}function Yg(t){return{type:"simple",name:t}}function _b(t,r){return{type:"generic",name:t,inners:r}}function Pb(t,r){return{type:"fn",args:t,result:r}}function Uc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Uc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Uc(n)).join(", "),e=Uc(t.result);return`@(${r}) { ${e} }`}}}function Eo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Yg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Eo(t.inner):r=Yg("any"),_b(t.name,[r])}}throw new ro(`Unknown type: '${Uc(t)}'`)}else{const r=t.args.map(e=>Eo(e));return Pb(r,Eo(t.result))}}function kb(t){switch(t.type){case"def":{t.varType!=null&&Eo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Eo(r.argType);t.retType!=null&&Eo(t.retType);break}}return t}function Mb(t){for(const r of t)Mt(r,kb);return t}function Bc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Bc(n.expr.children)),r.push(n);else{if(e.length>0)throw new ro("invalid attribute.");switch(n.type){case"fn":{n.children=Bc(n.children);break}case"block":{n.statements=Bc(n.statements);break}}r.push(n)}if(e.length>0)throw new ro("invalid attribute.");return r}function Eb(t){if(mb(t)&&Uy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=$b(n,v.args,v.loc);break}case"indexChain":{n=xb(n,v.index,v.loc);break}case"propChain":{n=bb(n,v.name,v.loc);break}}return n}return t}function Sb(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],Eb);return t}function qc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function By(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return qc(t,r,e);{const{left:n,right:v,info:w}=t;return qc(n,By(v,r,e),w)}}function Of(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Of(t.left),Of(t.right)]}}const Nb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Of(t.left),right:Of(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Of(t.left),right:Of(t.right)}),priority:3}};function Fb(t){const r=t.operators.map(n=>{const v=Nb[n];if(v==null)throw new ro(`No such operator: ${n}.`);return v});let e=qc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=By(e,t.operands[2+n],r[1+n]);return Of(e)}function Ob(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],e=>e.type==="infix"?Fb(e):e);return t}var Tu;let Tb=(Tu=class{constructor(){he(this,"plugins");this.plugins={validate:[Cb,Mb],transform:[Bc,Sb,Ob]}}static parse(r){return Tu.instance==null&&(Tu.instance=new Tu),Tu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Xg(r,{startRule:"Preprocess"});e=Xg(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ro(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new ro(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Tu,"instance"),Tu);const Ib="develop",jb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let qp=[],Jo=null;function Rb(t){return qp=Tb.parse(t),JSON.stringify(qp,null,"	")}async function Db(t){Jo==null||Jo.abort(),Jo=new Pn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Hp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Hp(e.val,!0),print:!1});break}}});try{await Jo.exec(qp)}catch(r){t.err(r)}}const Lb=Object.freeze(Object.defineProperty({__proto__:null,exec:Db,parse:Rb,samples:jb,version:Ib},Symbol.toStringTag,{value:"Module"}));function ns(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Oh=class qy extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,qy)}},Hb=class extends Oh{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},so=class extends Oh{constructor(e,n){super(e,n);he(this,"name","Syntax")}},vr=class extends Oh{constructor(e,n){super(e,n);he(this,"name","Runtime")}},ed=class extends vr{constructor(r,e){super(r,e)}};class Ub extends vr{constructor(e,n){super(e,n);he(this,"name","")}}var Gu=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Uu=class zp{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new zp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new zp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new vr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new vr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Gu([ns],Uu.prototype,"log",null);Gu([ns],Uu.prototype,"onUpdated",null);Gu([ns],Uu.prototype,"createChildScope",null);Gu([ns],Uu.prototype,"createChildNamespaceScope",null);Gu([ns],Uu.prototype,"get",null);Gu([ns],Uu.prototype,"exists",null);Gu([ns],Uu.prototype,"getAll",null);Gu([ns],Uu.prototype,"add",null);Gu([ns],Uu.prototype,"assign",null);const Wt={type:"null"},xa={type:"bool",value:!0},ba={type:"bool",value:!1},Le=t=>({type:"num",value:t}),ur=t=>({type:"str",value:t}),Vf=t=>({type:"bool",value:t}),gh=t=>({type:"obj",value:t}),ts=t=>({type:"arr",value:t}),Bb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),de=t=>({type:"fn",native:t}),qb=t=>({type:"return",value:t}),zb=()=>({type:"break",value:null}),Kb=()=>({type:"continue",value:null}),Vb=t=>t.type==="return"?t.value:t,Kp=(t,r)=>({type:"error",value:t,info:r});function _a(t){if(t==null)throw new vr("Expect anything, but got nothing.")}function gn(t){if(t==null)throw new vr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new vr(`Expect boolean, but got ${t.type}.`)}function Su(t){if(t==null)throw new vr("Expect function, but got nothing.");if(t.type!=="fn")throw new vr(`Expect function, but got ${t.type}.`)}function ys(t){if(t==null)throw new vr("Expect string, but got nothing.");if(t.type!=="str")throw new vr(`Expect string, but got ${t.type}.`)}function Ne(t){if(t==null)throw new vr("Expect number, but got nothing.");if(t.type!=="num")throw new vr(`Expect number, but got ${t.type}.`)}function Au(t){if(t==null)throw new vr("Expect object, but got nothing.");if(t.type!=="obj")throw new vr(`Expect object, but got ${t.type}.`)}function Wf(t){if(t==null)throw new vr("Expect array, but got nothing.");if(t.type!=="arr")throw new vr(`Expect array, but got ${t.type}.`)}function tp(t){return t.type==="obj"}function td(t){return t.type==="arr"}function So(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Vp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Vp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Wp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Wp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Wp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Gp(t){if(t===null)return Wt;if(typeof t=="boolean")return Vf(t);if(typeof t=="string")return ur(t);if(typeof t=="number")return Le(t);if(Array.isArray(t))return ts(t.map(r=>Gp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Gp(n));return gh(r)}return Wt}function No(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(No(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${No(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Wb={version:"0.18.0"},Gb=Wb.version,Jb=new TextEncoder,Zb=new TextDecoder,Qb={help:ur("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ur(Gb),"Core:ai":ur("kawaii"),"Core:not":de(([t])=>(gn(t),t.value?ba:xa)),"Core:eq":de(([t,r])=>(_a(t),_a(r),So(t,r)?xa:ba)),"Core:neq":de(([t,r])=>(_a(t),_a(r),So(t,r)?ba:xa)),"Core:and":de(([t,r])=>(gn(t),t.value?(gn(r),r.value?xa:ba):ba)),"Core:or":de(([t,r])=>(gn(t),t.value?xa:(gn(r),r.value?xa:ba))),"Core:add":de(([t,r])=>(Ne(t),Ne(r),Le(t.value+r.value))),"Core:sub":de(([t,r])=>(Ne(t),Ne(r),Le(t.value-r.value))),"Core:mul":de(([t,r])=>(Ne(t),Ne(r),Le(t.value*r.value))),"Core:pow":de(([t,r])=>{Ne(t),Ne(r);const e=t.value**r.value;if(isNaN(e))throw new vr("Invalid operation.");return Le(e)}),"Core:div":de(([t,r])=>{Ne(t),Ne(r);const e=t.value/r.value;if(isNaN(e))throw new vr("Invalid operation.");return Le(e)}),"Core:mod":de(([t,r])=>(Ne(t),Ne(r),Le(t.value%r.value))),"Core:gt":de(([t,r])=>(Ne(t),Ne(r),t.value>r.value?xa:ba)),"Core:lt":de(([t,r])=>(Ne(t),Ne(r),t.value<r.value?xa:ba)),"Core:gteq":de(([t,r])=>(Ne(t),Ne(r),t.value>=r.value?xa:ba)),"Core:lteq":de(([t,r])=>(Ne(t),Ne(r),t.value<=r.value?xa:ba)),"Core:type":de(([t])=>(_a(t),ur(t.type))),"Core:to_str":de(([t])=>(_a(t),ur(No(t)))),"Core:range":de(([t,r])=>(Ne(t),Ne(r),t.value<r.value?ts(Array.from({length:r.value-t.value+1},(e,n)=>Le(n+t.value))):t.value>r.value?ts(Array.from({length:t.value-r.value+1},(e,n)=>Le(t.value-n))):ts([t]))),"Core:sleep":de(async([t])=>(Ne(t),await new Promise(r=>setTimeout(r,t.value)),Wt)),"Core:abort":de(async([t])=>{throw ys(t),new Ub(t.value)}),"Util:uuid":de(()=>ur(bc())),"Json:stringify":de(([t])=>(_a(t),ur(JSON.stringify(Wp(t))))),"Json:parse":de(([t])=>{ys(t);try{return Gp(JSON.parse(t.value))}catch{return Kp("not_json")}}),"Json:parsable":de(([t])=>{ys(t);try{JSON.parse(t.value)}catch{return Vf(!1)}return Vf(!0)}),"Date:now":de(()=>Le(Date.now())),"Date:year":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":de(([t])=>(t&&Ne(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":de(([t])=>(ys(t),Le(new Date(t.value).getTime()))),"Date:to_iso_str":de(([t,r])=>{t&&Ne(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ne(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),ke=we.toString().padStart(2,"0");v=`${ue}${oe}:${ke}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),T=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return ur(`${w}-${_}-${P}T${E}:${N}:${T}.${H}${v}`)}),"Math:Infinity":Le(1/0),"Math:E":Le(Math.E),"Math:LN2":Le(Math.LN2),"Math:LN10":Le(Math.LN10),"Math:LOG2E":Le(Math.LOG2E),"Math:LOG10E":Le(Math.LOG10E),"Math:PI":Le(Math.PI),"Math:SQRT1_2":Le(Math.SQRT1_2),"Math:SQRT2":Le(Math.SQRT2),"Math:abs":de(([t])=>(Ne(t),Le(Math.abs(t.value)))),"Math:acos":de(([t])=>(Ne(t),Le(Math.acos(t.value)))),"Math:acosh":de(([t])=>(Ne(t),Le(Math.acosh(t.value)))),"Math:asin":de(([t])=>(Ne(t),Le(Math.asin(t.value)))),"Math:asinh":de(([t])=>(Ne(t),Le(Math.asinh(t.value)))),"Math:atan":de(([t])=>(Ne(t),Le(Math.atan(t.value)))),"Math:atanh":de(([t])=>(Ne(t),Le(Math.atanh(t.value)))),"Math:atan2":de(([t,r])=>(Ne(t),Ne(r),Le(Math.atan2(t.value,r.value)))),"Math:cbrt":de(([t])=>(Ne(t),Le(Math.cbrt(t.value)))),"Math:ceil":de(([t])=>(Ne(t),Le(Math.ceil(t.value)))),"Math:clz32":de(([t])=>(Ne(t),Le(Math.clz32(t.value)))),"Math:cos":de(([t])=>(Ne(t),Le(Math.cos(t.value)))),"Math:cosh":de(([t])=>(Ne(t),Le(Math.cosh(t.value)))),"Math:exp":de(([t])=>(Ne(t),Le(Math.exp(t.value)))),"Math:expm1":de(([t])=>(Ne(t),Le(Math.expm1(t.value)))),"Math:floor":de(([t])=>(Ne(t),Le(Math.floor(t.value)))),"Math:fround":de(([t])=>(Ne(t),Le(Math.fround(t.value)))),"Math:hypot":de(([t])=>{Wf(t);const r=[];for(const e of t.value)Ne(e),r.push(e.value);return Le(Math.hypot(...r))}),"Math:imul":de(([t,r])=>(Ne(t),Ne(r),Le(Math.imul(t.value,r.value)))),"Math:log":de(([t])=>(Ne(t),Le(Math.log(t.value)))),"Math:log1p":de(([t])=>(Ne(t),Le(Math.log1p(t.value)))),"Math:log10":de(([t])=>(Ne(t),Le(Math.log10(t.value)))),"Math:log2":de(([t])=>(Ne(t),Le(Math.log2(t.value)))),"Math:max":de(([t,r])=>(Ne(t),Ne(r),Le(Math.max(t.value,r.value)))),"Math:min":de(([t,r])=>(Ne(t),Ne(r),Le(Math.min(t.value,r.value)))),"Math:pow":de(([t,r])=>(Ne(t),Ne(r),Le(Math.pow(t.value,r.value)))),"Math:round":de(([t])=>(Ne(t),Le(Math.round(t.value)))),"Math:sign":de(([t])=>(Ne(t),Le(Math.sign(t.value)))),"Math:sin":de(([t])=>(Ne(t),Le(Math.sin(t.value)))),"Math:sinh":de(([t])=>(Ne(t),Le(Math.sinh(t.value)))),"Math:sqrt":de(([t])=>{Ne(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new vr("Invalid operation.");return Le(r)}),"Math:tan":de(([t])=>(Ne(t),Le(Math.tan(t.value)))),"Math:tanh":de(([t])=>(Ne(t),Le(Math.tanh(t.value)))),"Math:trunc":de(([t])=>(Ne(t),Le(Math.trunc(t.value)))),"Math:rnd":de(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Le(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Le(Math.random())),"Math:gen_rng":de(([t])=>{if(_a(t),t.type!=="num"&&t.type!=="str")return Wt;const r=fo(t.value.toString());return de(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Le(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Le(r()))}),"Num:to_hex":de(([t])=>(Ne(t),ur(t.value.toString(16)))),"Num:from_hex":de(([t])=>(ys(t),Le(parseInt(t.value,16)))),"Str:lf":ur(`
`),"Str:lt":de(([t,r])=>(ys(t),ys(r),t.value<r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:gt":de(([t,r])=>(ys(t),ys(r),t.value>r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:from_codepoint":de(([t])=>(Ne(t),ur(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":de(([t])=>(Wf(t),ur(Array.from(t.value.map(r=>(Ne(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":de(([t])=>(Wf(t),ur(Zb.decode(Uint8Array.from(t.value.map(r=>(Ne(r),r.value))))))),"Arr:create":de(([t,r])=>{Ne(t);try{return ts(Array(t.value).fill(r??Wt))}catch(e){throw t.value<0?new vr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new vr("Arr:create expected integer, got non-integer")}}),"Obj:keys":de(([t])=>(Au(t),ts(Array.from(t.value.keys()).map(r=>ur(r))))),"Obj:vals":de(([t])=>(Au(t),ts(Array.from(t.value.values())))),"Obj:kvs":de(([t])=>(Au(t),ts(Array.from(t.value.entries()).map(([r,e])=>ts([ur(r),e]))))),"Obj:get":de(([t,r])=>(Au(t),ys(r),t.value.get(r.value)??Wt)),"Obj:set":de(([t,r,e])=>(Au(t),ys(r),_a(e),t.value.set(r.value,e),Wt)),"Obj:has":de(([t,r])=>(Au(t),ys(r),Vf(t.value.has(r.value)))),"Obj:copy":de(([t])=>(Au(t),gh(new Map(t.value)))),"Obj:merge":de(([t,r])=>(Au(t),Au(r),gh(new Map([...t.value,...r.value])))),"Error:create":de(([t,r])=>(ys(t),Kp(t.value,r))),"Async:interval":de(async([t,r,e],n)=>{Ne(t),Su(r),e&&(gn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),de(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":de(async([t,r],e)=>{Ne(t),Su(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),de(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},rd={num:{to_str:t=>de(async(r,e)=>ur(t.value.toString()))},str:{to_num:t=>de(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Wt:Le(n)}),to_arr:t=>de(async(r,e)=>ts(zs(t.value).map(n=>ur(n)))),to_unicode_arr:t=>de(async(r,e)=>ts([...t.value].map(n=>ur(n)))),to_unicode_codepoint_arr:t=>de(async(r,e)=>ts([...t.value].map(n=>{const v=n.codePointAt(0);return Le(v??n.charCodeAt(0))}))),to_char_arr:t=>de(async(r,e)=>ts(t.value.split("").map(n=>ur(n)))),to_charcode_arr:t=>de(async(r,e)=>ts(t.value.split("").map(n=>Le(n.charCodeAt(0))))),to_utf8_byte_arr:t=>de(async(r,e)=>ts(Array.from(Jb.encode(t.value)).map(n=>Le(n)))),len:t=>Le(co(t.value)),replace:t=>de(async([r,e],n)=>(ys(r),ys(e),ur(t.value.split(r.value).join(e.value)))),index_of:t=>de(async([r,e],n)=>{ys(r),e&&Ne(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Le(po(t.value,r.value,v))}),incl:t=>de(async([r],e)=>(ys(r),t.value.includes(r.value)?xa:ba)),trim:t=>de(async(r,e)=>ur(t.value.trim())),upper:t=>de(async(r,e)=>ur(t.value.toUpperCase())),lower:t=>de(async(r,e)=>ur(t.value.toLowerCase())),split:t=>de(async([r],e)=>(r&&ys(r),ts(r?t.value.split(r?r.value:"").map(n=>ur(n)):zs(t.value).map(n=>ur(n))))),slice:t=>de(async([r,e],n)=>(Ne(r),Ne(e),ur(ho(t.value,r.value,e.value)))),pick:t=>de(async([r],e)=>{Ne(r);const v=zs(t.value)[r.value];return v?ur(v):Wt}),charcode_at:t=>de(([r],e)=>{Ne(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Wt:Le(n)}),codepoint_at:t=>de(([r],e)=>{Ne(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Wt:Le(n)})},arr:{len:t=>Le(t.value.length),push:t=>de(async([r],e)=>(_a(r),t.value.push(r),t)),unshift:t=>de(async([r],e)=>(_a(r),t.value.unshift(r),t)),pop:t=>de(async(r,e)=>t.value.pop()??Wt),shift:t=>de(async(r,e)=>t.value.shift()??Wt),concat:t=>de(async([r],e)=>(Wf(r),ts(t.value.concat(r.value)))),slice:t=>de(async([r,e],n)=>(Ne(r),Ne(e),ts(t.value.slice(r.value,e.value)))),join:t=>de(async([r],e)=>(r&&ys(r),ur(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>de(async([r],e)=>{Su(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Le(w)]));return ts(await Promise.all(n))}),filter:t=>de(async([r],e)=>{Su(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Le(v)]);gn(_),_.value&&n.push(w)}return ts(n)}),reduce:t=>de(async([r,e],n)=>{Su(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Le(_)])}return w}),find:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Le(n)]);if(gn(w),w.value)return v}return Wt}),incl:t=>de(async([r],e)=>(_a(r),t.value.some(n=>So(r,n))?xa:ba)),index_of:t=>de(async([r,e],n)=>{if(_a(r),e){Ne(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>So(_,r));return Le(w<0?w:w+v)}else return Le(t.value.findIndex(v=>So(v,r)))}),reverse:t=>de(async(r,e)=>(t.value.reverse(),Wt)),copy:t=>de(async(r,e)=>ts([...t.value])),sort:t=>de(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);Ne(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return Su(r),Wf(t),t.value=await n(t.value,r),t}),fill:t=>de(async([r,e,n],v)=>{const w=r??Wt,_=e&&(Ne(e),e.value),P=n&&(Ne(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>de(async([r],e)=>{Ne(r);try{return ts(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new vr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new vr("arr.repeat expected integer, got non-integer")}}),every:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Le(n)]);if(gn(w),!w.value)return ba}return xa}),some:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Le(n)]);if(gn(w),w.value)return xa}return ba})},error:{name:t=>ur(t.value),info:t=>t.info??Wt}};function Xb(t,r){if(Object.hasOwn(rd,t.type)){const e=rd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new vr(`No such prop (${r}) in ${t.type}.`)}else throw new vr(`Cannot read prop of ${t.type}. (reading ${r})`)}const Yb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var pa=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const zy=300,e1=zy-1;let kn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:de(([v])=>{_a(v),this.opts.out&&this.opts.out(v)}),readline:de(async v=>{const w=v[0];if(ys(w),this.opts.in==null)return Wt;const _=await this.opts.in(w.value);return ur(_)})};this.vars=Object.fromEntries(Object.entries({...r,...Qb,...n}).map(([v,w])=>[v,Yb.const(w)])),this.scope=new Uu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Kp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Oh?this.opts.err(r):this.opts.err(new Hb(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Wt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return Vb(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Wt;if(this.stepCount%zy===e1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new vr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Su(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(gn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(gn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Wt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(So(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Wt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Wt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ne(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ne(n),Ne(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Le(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Wt}case"each":{const n=await this._eval(r.items,e);Wf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Wt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Wt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Wt}case"addAssign":{const n=await this._eval(r.dest,e);Ne(n);const v=await this._eval(r.expr,e);return Ne(v),await this.assign(e,r.dest,Le(n.value+v.value)),Wt}case"subAssign":{const n=await this._eval(r.dest,e);Ne(n);const v=await this._eval(r.expr,e);return Ne(v),await this.assign(e,r.dest,Le(n.value-v.value)),Wt}case"null":return Wt;case"bool":return Vf(r.value);case"num":return Le(r.value);case"str":return ur(r.value);case"arr":return ts(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return gh(n)}case"prop":{const n=await this._eval(r.target,e);return tp(n)?n.value.has(r.name)?n.value.get(r.name):Wt:Xb(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(td(n)){Ne(v);const w=n.value[v.value];if(w===void 0)throw new ed(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(tp(n))return ys(v),n.value.has(v.value)?n.value.get(v.value):Wt;throw new vr(`Cannot read prop (${No(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return gn(n),Vf(!n.value)}case"fn":return Bb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Vf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=No(w)}return ur(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),qb(n)}case"break":return this.log("block:break",{scope:e.name}),zb();case"continue":return this.log("block:continue",{scope:e.name}),Kb();case"ns":return Wt;case"meta":return Wt;case"and":{const n=await this._eval(r.left,e);if(gn(n),n.value){const v=await this._eval(r.right,e);return gn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(gn(n),n.value)return n;{const v=await this._eval(r.right,e);return gn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Wt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(td(v)){if(Ne(w),v.value[w.value]===void 0)throw new ed(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(tp(v))ys(w),v.value.set(w.value,n);else throw new vr(`Cannot read prop (${No(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Au(v),v.value.set(e.name,n)}else if(e.type==="arr")Wf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Wt)));else if(e.type==="obj")Au(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Wt)));else throw new vr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};pa([ns],kn.prototype,"exec",null);pa([ns],kn.prototype,"execFn",null);pa([ns],kn.prototype,"execFnSimple",null);pa([ns],kn.prototype,"handleError",null);pa([ns],kn.prototype,"log",null);pa([ns],kn.prototype,"collectNs",null);pa([ns],kn.prototype,"collectNsMember",null);pa([ns],kn.prototype,"_fn",null);pa([ns],kn.prototype,"_eval",null);pa([ns],kn.prototype,"_run",null);pa([ns],kn.prototype,"registerAbortHandler",null);pa([ns],kn.prototype,"unregisterAbortHandler",null);pa([ns],kn.prototype,"abort",null);pa([ns],kn.prototype,"assign",null);pa([ns],kn,"collectMetadata",null);function t1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Gf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Gf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}t1(Gf,Error);function rp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Gf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=rp("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+rp("",v.column-1," ")+rp("",H,"^")}else r+=`
 at `+_}return r};Gf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function sd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:er,Main:ci},w=er,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="!",Ir="[",Qt=".",Pr="if",Bt="elif",Ar="else",Ur="match",rr="=>",jr="*",Xt="eval",$r="exists",W="`",re='"',fe="'",xe='\\"',ce="\\'",Ee="true",Ie="false",Ae="null",Pe="@",$e="@(",Je="<",rt=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,it=/^[%*-+\-\/<>\^]/,_t=/^[^`{]/,dt=/^[{}`]/,Ct=/^[+\-]/,Pt=/^[1-9]/,ot=/^[0-9]/,ks=/^[,;]/,as=/^[A-Z_]/i,Xr=/^[A-Z0-9_]/i,xt=/^[\r\n]/,It=/^[ \t\r\n]/,yn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),sr=j("*/",!1),Dt=j("(",!1),Br=j(")",!1),Sn=j("::",!1),kt=j("{",!1),ut=j("}",!1),kr=j("###",!1),qt=j("let",!1),st=j(":",!1),Lt=j("=",!1),ms=j("var",!1),Ht=j("<:",!1),Ut=j("#[",!1),qr=j("]",!1),Fa=j("each",!1),Mr=j(",",!1),is=j("for",!1),Ns=j("return",!1),ft=bt([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=j("loop",!1),Ks=j("break",!1),Er=j("continue",!1),Sr=j("+=",!1),Gi=j("-=",!1),Oa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Ia=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=bt(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),Nn=j("[",!1),Vs=j(".",!1),Fn=j("if",!1),ja=j("elif",!1),tl=j("else",!1),Ra=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Os=bt(["`","{"],!0,!1),On=bt(["{","}","`"],!1,!1),Ws=j('"',!1),Gs=j("'",!1),al=j('\\"',!1),Js=j("\\'",!1),ls=bt(["+","-"],!1,!1),Ts=bt([["1","9"]],!1,!1),xr=bt([["0","9"]],!1,!1),Zs=j("true",!1),Qs=j("false",!1),Xs=j("null",!1),us=bt([",",";"],!1,!1),Ys=j("@",!1),Is=j("@(",!1),Da=j("<",!1),Yt=j(">",!1),La=bt([["A","Z"],"_"],!1,!0),dr=bt([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),en=bt(["\r",`
`],!1,!1),ll=bt([" ","	","\r",`
`],!1,!1),js=bt([" ","	"],!1,!1),ul=function(o){return o.join("")},Tn=function(){return f()},fl=function(){return f()},Ha=function(){return""},ol=function(){return""},cl=function(o){return o??[]},Ua=function(o,g){return g},hl=function(o,g){return[o,...g]},Ba=function(o,g){return g},pl=function(o,g){return[o,...g]},qa=function(o,g){return g},vl=function(o,g){return[o,...g]},za=function(o){return o},gl=function(o,g){return ne("ns",{name:o,members:g})},In=function(o,g){return ne("meta",{name:o,value:g})},dl=function(o){return ne("meta",{name:null,value:o})},jn=function(o,g,b){return ne("def",{name:o,varType:g,expr:b,mut:!1,attr:[]})},yl=function(o,g,b){return ne("def",{name:o,varType:g,expr:b,mut:!0,attr:[]})},Ka=function(o){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[o]})]})},wl=function(o,g){return ne("attr",{name:o,value:g??ne("bool",{value:!0})})},ml=function(o,g,b){return ne("each",{var:o,items:g,for:b})},$l=function(o,g,b){return ne("each",{var:o,items:g,for:b})},xl=function(o,g){return g},bl=function(o,g,b,y){return ne("for",{var:o,from:g??ne("num",{value:0}),to:b,for:y})},Al=function(o,g){return g},Cl=function(o,g,b,y){return ne("for",{var:o,from:g??ne("num",{value:0}),to:b,for:y})},_l=function(o,g){return ne("for",{times:o,for:g})},Pl=function(o,g){return ne("for",{times:o,for:g})},kl=function(o){return ne("return",{expr:o})},Ml=function(o){return ne("loop",{statements:o})},El=function(){return ne("break",{})},Sl=function(){return ne("continue",{})},Nl=function(o,g,b){return g==="+="?ne("addAssign",{dest:o,expr:b}):g==="-="?ne("subAssign",{dest:o,expr:b}):ne("assign",{dest:o,expr:b})},Va=function(o,g,b){return{op:g,term:b}},Fl=function(o,g){return ne("infix",{operands:[o,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Ol=function(){return f()},Tl=function(o){return ne("not",{expr:o})},Il=function(o,g){return o.chain?{...o,chain:[...o.chain,...g]}:{...o,chain:g}},jl=function(o){return ne("callChain",{args:o??[]})},Rn=function(o,g){return g},Rl=function(o,g){return[o,...g]},Wa=function(o){return ne("indexChain",{index:o})},Dl=function(o){return ne("propChain",{name:o})},Ll=function(o,g,b,y){return ne("if",{cond:o,then:g,elseif:b??[],else:y})},Hl=function(o,g){return[o,...g]},Ga=function(o,g){return{cond:o,then:g}},Ul=function(o){return o},Dn=function(o,g,b){return{q:g,a:b}},Bl=function(o,g,b){return ne("match",{about:o,qs:g??[],default:b})},ql=function(o){return ne("block",{statements:o})},zl=function(o){return ne("exists",{identifier:o})},Kl=function(o){return ne("identifier",{name:o})},Vl=function(o){return ne("tmpl",{tmpl:o})},Ja=function(o){return o.join("")},Za=function(o){return o},Qa=function(o){return ne("str",{value:o.join("")})},Xa=function(o){return o},Wl=function(o){return ne("str",{value:o.join("")})},Gl=function(){return'"'},Ya=function(){return"'"},Jl=function(){return ne("num",{value:parseFloat(f())})},ei=function(){return ne("num",{value:parseFloat(f())})},ti=function(){return ne("num",{value:parseInt(f(),10)})},Zl=function(){return ne("num",{value:parseInt(f(),10)})},ri=function(){return ne("bool",{value:!0})},Ql=function(){return ne("bool",{value:!1})},Xl=function(){return ne("null",{})},si=function(o,g){return{k:o,v:g}},Yl=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ne("obj",{value:g})},ni=function(o){return o},eu=function(o){return ne("arr",{value:o})},tu=function(o,g){return{name:o,argType:g}},ai=function(o,g){return[o,...g]},ru=function(o,g,b,y,a,l){return(o.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:y??[],retType:a},l??[]),mut:!1,attr:[]})},ii=function(o,g,b){return ne("fn",{args:o??[],retType:g},b??[])},Ln=function(o){return o},su=function(o){return ne("arr",{value:o})},Hn=function(o,g){return{k:o,v:g}},nu=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ne("obj",{value:g})},au=function(o,g){return ne("fnTypeSource",{args:o??[],result:g})},li=function(o,g){return[o,...g]},iu=function(o,g){return ne("namedTypeSource",{name:o,inner:g})},ui=function(o){return ne("namedTypeSource",{name:o,inner:null})},fi=function(){return f()},lu=function(){return f()},oi=function(o){return ne("block",{statements:o??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,tn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},zr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function f(){return t.substring(te,c)}function Y(){return le(te,c)}function O(o,g){throw g=g!==void 0?g:le(te,c),uu(o,g)}function j(o,g){return{type:"literal",text:o,ignoreCase:g}}function bt(o,g,b){return{type:"class",parts:o,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function q(){return{type:"end"}}function Rs(o){var g=xs[o],b;if(g)return g;if(o>=xs.length)b=xs.length-1;else for(b=o;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<o;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[o]=g,g}function le(o,g,b){var y=Rs(o),a=Rs(g),l={source:n,start:{offset:o,line:y.line,column:y.column},end:{offset:g,line:a.line,column:a.column}};return b&&n&&typeof n.offset=="function"&&(l.start=n.offset(l.start),l.end=n.offset(l.end)),l}function D(o){c<yr||(c>yr&&(yr=c,tn=[]),tn.push(o))}function uu(o,g){return new Gf(o,null,null,g)}function pe(o,g,b){return new Gf(Gf.buildMessage(o,g),o,g,b)}function er(){var o,g,b,y=c*77+0,a=S[y];if(a)return c=a.nextPos,a.result;for(o=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=o,g=ul(g),o=g,S[y]={nextPos:c,result:o},o}function Ds(){var o,g,b=c*77+1,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=$i(),g!==e&&(te=o,g=Tn()),o=g,o===e&&(o=c,g=ln(),g!==e&&(te=o,g=fl()),o=g,o===e&&(o=L(),o===e&&(t.length>c?(o=t.charAt(c),c++):(o=e,i===0&&D(gr))))),S[b]={nextPos:c,result:o},o)}function L(){var o,g,b,y,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,2)===_?(g=_,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],y=c,a=c,i++,l=_i(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,l=_i(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=Ha()}else c=o,o=e;if(o===e)if(o=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(sr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(sr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);t.substr(c,2)===E?(y=E,c+=2):(y=e,i===0&&D(sr)),y!==e?(te=o,o=ol()):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ci(){var o,g,b,y,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=rn(),b===e&&(b=null),y=[],a=k();a!==e;)y.push(a),a=k();return te=o,o=cl(b),S[l]={nextPos:c,result:o},o}function rn(){var o,g,b,y,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Un(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=hl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function R(){var o,g,b,y,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=sn(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=pl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function bs(){var o,g,b,y,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=As(),g!==e){for(b=[],y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=qa(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=je();l!==e;)a.push(l),l=je();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=qa(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=vl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Un(){var o,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(o=br(),o===e&&(o=Xe(),o===e&&(o=As())),S[g]={nextPos:c,result:o},o)}function sn(){var o,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=br())),S[g]={nextPos:c,result:o},o)}function As(){var o,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=Cs(),o===e&&(o=Vr(),o===e&&(o=Ve(),o===e&&(o=Ls(),o===e&&(o=hi(),o===e&&(o=pi(),o===e&&(o=fu(),o===e&&(o=vi(),o===e&&(o=ou(),o===e&&(o=et()))))))))))),S[g]={nextPos:c,result:o},o)}function et(){var o,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(o=cu(),o===e&&(o=Kr()),S[g]={nextPos:c,result:o},o)}function Kr(){var o,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(o=Jr(),o===e&&(o=du(),o===e&&(o=pu(),o===e&&(o=nn()))),S[g]={nextPos:c,result:o},o)}function nn(){var o,g,b,y,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(o=Kn(),o===e&&(o=vu(),o===e&&(o=mi(),o===e&&(o=$i(),o===e&&(o=ln(),o===e&&(o=Gn(),o===e&&(o=fn(),o===e&&(o=Qn(),o===e&&(o=Xn(),o===e&&(o=Ai(),o===e&&(o=hu(),o===e&&(o=Hs(),o===e))))))))))))if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=za(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Nr(){var o,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(o=Gn(),o===e&&(o=ln(),o===e&&(o=fn(),o===e&&(o=ra(),o===e&&(o=sa(),o===e&&(o=Qn()))))),S[g]={nextPos:c,result:o},o)}function br(){var o,g,b,y,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(Sn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=B,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=o,o=gl(y,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Xe(){var o,g,b,y,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=tt(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Nr(),l!==e?(te=o,o=In(y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();y=Nr(),y!==e?(te=o,o=dl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function fs(){var o,g,b,y,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(o=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(qt)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=ke,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=jn(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=ke,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=yl(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[u]={nextPos:c,result:o},o}function Cs(){var o,g,b,y,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();y=et(),y!==e?(te=o,o=Ka(y)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Ve(){var o,g,b,y,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,2)===Q?(g=Q,c+=2):(g=e,i===0&&D(Ut)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Nr(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&D(qr)),$!==e?(te=o,o=wl(y,a)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Ls(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+19,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=T,c++):(h=e,i===0&&D(Br)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=nr(),m!==e?(te=o,o=ml($,d,m)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=nr(),h!==e?(te=o,o=$l(l,u,h)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function hi(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A=c*77+20,M=S[A];if(M)return c=M.nextPos,M.result;if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=ke,c++):(u=e,i===0&&D(Lt)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Mr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=T,c++):(x=e,i===0&&D(Br)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=nr(),C!==e?(te=o,o=bl($,s,h,C)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=ke,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=nr(),x!==e?(te=o,o=Cl(l,p,d,x)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=nr(),p!==e?(te=o,o=_l(a,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=nr(),l!==e?(te=o,o=Pl(y,l)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e}}return S[A]={nextPos:c,result:o},o}function Vr(){var o,g,b,y,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=et(),a!==e?(te=o,o=kl(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function pi(){var o,g,b,y,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(kt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=Ml(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function fu(){var o,g,b,y,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Te?(g=Te,c+=5):(g=e,i===0&&D(Ks)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=El()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function vi(){var o,g,b,y,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,8)===_e?(g=_e,c+=8):(g=e,i===0&&D(Er)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Sl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function ou(){var o,g,b,y,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.substr(c,2)===at?(y=at,c+=2):(y=e,i===0&&D(Sr)),y===e&&(t.substr(c,2)===pt?(y=pt,c+=2):(y=e,i===0&&D(Gi)),y===e&&(t.charCodeAt(c)===61?(y=ke,c++):(y=e,i===0&&D(Lt)))),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=o,o=Nl(g,y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function cu(){var o,g,b,y,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Kr(),g!==e){for(b=[],y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=gi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Va(g,l,p)):(c=y,y=e)}else c=y,y=e;if(y!==e)for(;y!==e;){for(b.push(y),y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=gi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Va(g,l,p)):(c=y,y=e)}else c=y,y=e}else b=e;b!==e?(te=o,o=Fl(g,b)):(c=o,o=e)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Wr(){var o,g,b,y=c*77+27,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=tr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=We(),b!==e?(g=[g,b],o=g):(c=o,o=e)):(c=o,o=e),o===e&&(o=je()),S[y]={nextPos:c,result:o},o)}function gi(){var o,g,b=c*77+28,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===wt?(g=wt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Ia)),g===e&&(t.substr(c,2)===Jt?(g=Jt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Zt?(g=Zt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),it.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=o,g=Ol()),o=g,S[b]={nextPos:c,result:o},o)}function hu(){var o,g,b,y=c*77+29,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===33?(g=ht,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=o,o=Tl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function pu(){var o,g,b,y,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=nn(),g!==e){if(b=[],y=di(),y===e&&(y=Bn(),y===e&&(y=yi())),y!==e)for(;y!==e;)b.push(y),y=di(),y===e&&(y=Bn(),y===e&&(y=yi()));else b=e;b!==e?(te=o,o=Il(g,b)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function di(){var o,g,b,y,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=Gr(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=jl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Gr(){var o,g,b,y,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);te=o,o=Rl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Bn(){var o,g,b,y,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=Wa(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function yi(){var o,g,b,y=c*77+34,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===46?(g=Qt,c++):(g=e,i===0&&D(Vs)),g!==e?(b=tt(),b!==e?(te=o,o=Dl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function Jr(){var o,g,b,y,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===Pr?(g=Pr,c+=2):(g=e,i===0&&D(Fn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=nr(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=qn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=wi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=o,o=Ll(y,l,$,p)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function qn(){var o,g,b,y,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=zn(),g!==e){for(b=[],y=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=zn(),l!==e?y=l:(c=y,y=e);y!==e;){for(b.push(y),y=c,a=[],l=k();l!==e;)a.push(l),l=k();l=zn(),l!==e?y=l:(c=y,y=e)}te=o,o=Hl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function zn(){var o,g,b,y,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,4)===Bt?(g=Bt,c+=4):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=nr(),$!==e?(te=o,o=Ga(a,$)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function wi(){var o,g,b,y,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,4)===Ar?(g=Ar,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=nr(),a!==e?(te=o,o=Ul(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function Kn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.substr(c,5)===Ur?(g=Ur,c+=5):(g=e,i===0&&D(Ra)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=B,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=jr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===rr?(x=rr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=nr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=C}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=o,o=Bl(a,s,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[I]={nextPos:c,result:o},o}function vu(){var o,g,b,y,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Xt?(g=Xt,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(kt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=ql(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function mi(){var o,g,b,y,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,6)===$r?(g=$r,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;b!==e?(y=Hs(),y!==e?(te=o,o=zl(y)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Hs(){var o,g,b=c*77+42,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=wu(),g!==e&&(te=o,g=Kl(g)),o=g,S[b]={nextPos:c,result:o},o)}function $i(){var o,g,b,y,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===96?(y=W,c++):(y=e,i===0&&D($s)),y!==e?(te=o,o=Vl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function xi(){var o,g,b,y,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=et(),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?o=y:(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,g=[],b=an(),b!==e)for(;b!==e;)g.push(b),b=an();else g=e;g!==e&&(te=o,g=Ja(g)),o=g}return S[$]={nextPos:c,result:o},o}function an(){var o,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(o=gu(),o===e&&(o=t.charAt(c),_t.test(o)?c++:(o=e,i===0&&D(Os))),S[g]={nextPos:c,result:o},o)}function gu(){var o,g,b,y=c*77+46,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=tr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=t.charAt(c),dt.test(b)?c++:(b=e,i===0&&D(On)),b!==e?o=b:(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function ln(){var o,g,b,y,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Ws)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Za(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Za(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===34?(y=re,c++):(y=e,i===0&&D(Ws)),y!==e?(te=o,o=Qa(b)):(c=o,o=e)}else c=o,o=e;if(o===e)if(o=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(Gs)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Xa(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Xa(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===39?(y=fe,c++):(y=e,i===0&&D(Gs)),y!==e?(te=o,o=Wl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Vn(){var o,g,b=c*77+48,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=o,g=Gl()),o=g,S[b]={nextPos:c,result:o},o)}function Wn(){var o,g,b=c*77+49,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===ce?(g=ce,c+=2):(g=e,i===0&&D(Js)),g!==e&&(te=o,g=Ya()),o=g,S[b]={nextPos:c,result:o},o)}function Gn(){var o,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(o=un(),o===e&&(o=Jn()),S[g]={nextPos:c,result:o},o)}function un(){var o,g,b,y,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;if(y!==e)if(t.charCodeAt(c)===46?(a=Qt,c++):(a=e,i===0&&D(Vs)),a!==e){if(l=[],$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr));else l=e;l!==e?(te=o,o=Jl()):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e)if(t.charCodeAt(c)===46?(y=Qt,c++):(y=e,i===0&&D(Vs)),y!==e){if(a=[],l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr));else a=e;a!==e?(te=o,o=ei()):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Jn(){var o,g,b,y,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;y!==e?(te=o,o=ti()):(c=o,o=e)}else c=o,o=e;return o===e&&(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e?(te=o,o=Zl()):(c=o,o=e)),S[l]={nextPos:c,result:o},o}function fn(){var o,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(o=bi(),o===e&&(o=Zn()),S[g]={nextPos:c,result:o},o)}function bi(){var o,g,b,y,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ee?(g=Ee,c+=4):(g=e,i===0&&D(Zs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=ri()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Zn(){var o,g,b,y,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Qs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Ql()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Qn(){var o,g,b,y,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Xl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Xn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+57,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=Yl(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function Ai(){var o,g,b,y,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=eu(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Yn(){var o,g,b,y,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=tt(),g!==e){for(b=c,y=[],a=k();a!==e;)y.push(a),a=k();if(t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=o,o=tu(g,b)}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function ea(){var o,g,b,y,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=Yn(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ai(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ta(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.charCodeAt(c)===64?(g=Pe,c++):(g=e,i===0&&D(Ys)),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(y=tt(),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Dt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=ea(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=T,c++):(u=e,i===0&&D(Br)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=oe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=wr(),C!==e?d=C:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=B,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();for(C=bs(),C===e&&(C=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=J,c++):(M=e,i===0&&D(ut)),M!==e?(te=o,o=ru(b,y,a,p,d,C)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[I]={nextPos:c,result:o},o}function du(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m=c*77+62,C=S[m];if(C)return c=C.nextPos,C.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=ea(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=oe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=B,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=o,o=ii(y,$,d)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[m]={nextPos:c,result:o},o}function ra(){var o,g,b,y,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=su(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function sa(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+64,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=nu(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function wr(){var o,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(o=yu(),o===e&&(o=Ci()),S[g]={nextPos:c,result:o},o)}function yu(){var o,g,b,y,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=na(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=T,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===rr?(p=rr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=o,o=au(y,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function na(){var o,g,b,y,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=wr(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=li(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Ci(){var o,g,b,y,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=tt(),g!==e){for(b=[],y=je();y!==e;)b.push(y),y=je();if(t.charCodeAt(c)===60?(y=Je,c++):(y=e,i===0&&D(Da)),y!==e){for(a=[],l=je();l!==e;)a.push(l),l=je();if(l=wr(),l!==e){for($=[],p=je();p!==e;)$.push(p),p=je();t.charCodeAt(c)===62?(p=rt,c++):(p=e,i===0&&D(Yt)),p!==e?(te=o,o=iu(g,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return o===e&&(o=c,g=tt(),g!==e&&(te=o,g=ui(g)),o=g),S[s]={nextPos:c,result:o},o}function tt(){var o,g,b,y,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=t.charAt(c),as.test(g)?c++:(g=e,i===0&&D(La)),g!==e){for(b=[],y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));y!==e;)b.push(y),y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));te=o,o=fi()}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function wu(){var o,g,b,y,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=tt(),g!==e){for(b=[],y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=lu()}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function _s(){var o,g,b,y,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Mr)),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();g=[g,b,y],o=g}else c=o,o=e;if(o===e)if(o=[],g=k(),g!==e)for(;g!==e;)o.push(g),g=k();else o=e;return S[l]={nextPos:c,result:o},o}function nr(){var o,g,b,y,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=bs(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=o,o=oi(y)):(c=o,o=e)}else c=o,o=e;return o===e&&(o=As()),S[$]={nextPos:c,result:o},o}function We(){var o,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(o=Ye,c+=2):(o=e,i===0&&D(il)),o===e&&(o=t.charAt(c),xt.test(o)?c++:(o=e,i===0&&D(en))),S[g]={nextPos:c,result:o},o)}function _i(){var o,g,b=c*77+74,y=S[b];return y?(c=y.nextPos,y.result):(o=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?o=void 0:(c=o,o=e),o===e&&(o=We()),S[b]={nextPos:c,result:o},o)}function k(){var o,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),It.test(o)?c++:(o=e,i===0&&D(ll)),S[g]={nextPos:c,result:o},o)}function je(){var o,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),yn.test(o)?c++:(o=e,i===0&&D(js)),S[g]={nextPos:c,result:o},o)}function ne(o,g,b){const y={type:o};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(y[l]=g[l]);const a=Y();return y.loc={start:a.start.offset,end:a.end.offset-1},y}if(zr=w(),r.peg$library)return{peg$result:zr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:tn,peg$maxFailPos:yr};if(zr!==e&&c===t.length)return zr;throw zr!==e&&c<t.length&&D(q()),pe(tn,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const r1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function s1(t){return r1.includes(t.type)}function Ky(t){return"chain"in t&&t.chain!==null}function n1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function a1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function i1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Et(e.expr,r);break}case"return":{e.expr=Et(e.expr,r);break}case"each":{e.items=Et(e.items,r),e.for=Et(e.for,r);break}case"for":{e.from!=null&&(e.from=Et(e.from,r)),e.to!=null&&(e.to=Et(e.to,r)),e.times!=null&&(e.times=Et(e.times,r)),e.for=Et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Et(e.expr,r),e.dest=Et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Et(e.operands[n],r);break}case"not":{e.expr=Et(e.expr,r);break}case"if":{e.cond=Et(e.cond,r),e.then=Et(e.then,r);for(const n of e.elseif)n.cond=Et(n.cond,r),n.then=Et(n.then,r);e.else!=null&&(e.else=Et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Et(e.children[n],r);break}case"match":{e.about=Et(e.about,r);for(const n of e.qs)n.q=Et(n.q,r),n.a=Et(n.a,r);e.default!=null&&(e.default=Et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"exists":{e.identifier=Et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Et(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"indexChain":{e.index=Et(e.index,r);break}case"call":{e.target=Et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"index":{e.target=Et(e.target,r),e.index=Et(e.index,r);break}case"prop":{e.target=Et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Et(e.members[n],r);break}case"or":case"and":{e.left=Et(e.left,r),e.right=Et(e.right,r);break}}if(Ky(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Et(e.chain[n],r);return e}const sp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function np(t){throw new so(`Reserved word "${t}" cannot be used as variable name.`)}function l1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{sp.includes(t.name)&&np(t.name);break}case"meta":{t.name!=null&&sp.includes(t.name)&&np(t.name);break}case"fn":{for(const r of t.args)sp.includes(r.name)&&np(r.name);break}}return t}function u1(t){for(const r of t)Et(r,l1);return t}function nd(t){return{type:"simple",name:t}}function f1(t,r){return{type:"generic",name:t,inners:r}}function o1(t,r){return{type:"fn",args:t,result:r}}function zc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=zc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>zc(n)).join(", "),e=zc(t.result);return`@(${r}) { ${e} }`}}}function Fo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return nd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Fo(t.inner):r=nd("any"),f1(t.name,[r])}}throw new so(`Unknown type: '${zc(t)}'`)}else{const r=t.args.map(e=>Fo(e));return o1(r,Fo(t.result))}}function c1(t){switch(t.type){case"def":{t.varType!=null&&Fo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Fo(r.argType);t.retType!=null&&Fo(t.retType);break}}return t}function h1(t){for(const r of t)Et(r,c1);return t}function Kc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Kc(n.expr.children)),r.push(n);else{if(e.length>0)throw new so("invalid attribute.");switch(n.type){case"fn":{n.children=Kc(n.children);break}case"block":{n.statements=Kc(n.statements);break}}r.push(n)}if(e.length>0)throw new so("invalid attribute.");return r}function p1(t){if(s1(t)&&Ky(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=n1(n,v.args,v.loc);break}case"indexChain":{n=a1(n,v.index,v.loc);break}case"propChain":{n=i1(n,v.name,v.loc);break}}return n}return t}function v1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],p1);return t}function Vc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Vc(t,r,e);{const{left:n,right:v,info:w}=t;return Vc(n,Vy(v,r,e),w)}}function Tf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Tf(t.left),Tf(t.right)]}}const g1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Tf(t.left),right:Tf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Tf(t.left),right:Tf(t.right)}),priority:3}};function d1(t){const r=t.operators.map(n=>{const v=g1[n];if(v==null)throw new so(`No such operator: ${n}.`);return v});let e=Vc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Vy(e,t.operands[2+n],r[1+n]);return Tf(e)}function y1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],e=>e.type==="infix"?d1(e):e);return t}var Iu;let w1=(Iu=class{constructor(){he(this,"plugins");this.plugins={validate:[u1,h1],transform:[Kc,v1,y1]}}static parse(r){return Iu.instance==null&&(Iu.instance=new Iu),Iu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=sd(r,{startRule:"Preprocess"});e=sd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new so(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new so(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Iu,"instance"),Iu);const m1="0.18.0",$1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Jp=[],Zo=null;function x1(t){return Jp=w1.parse(t),JSON.stringify(Jp,null,"	")}async function b1(t){Zo==null||Zo.abort(),Zo=new kn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Vp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Vp(e.val,!0),print:!1});break}}});try{await Zo.exec(Jp)}catch(r){t.err(r)}}const A1=Object.freeze(Object.defineProperty({__proto__:null,exec:b1,parse:x1,samples:$1,version:m1},Symbol.toStringTag,{value:"Module"}));function ps(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Th=class Wy extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Wy)}},C1=class extends Th{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},no=class extends Th{constructor(e,n){super(e,n);he(this,"name","Syntax")}},Or=class extends Th{constructor(e,n){super(e,n);he(this,"name","Runtime")}},ad=class extends Or{constructor(r,e){super(r,e)}};var xf=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Ju=class Gy{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Gy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Or(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new Or(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};xf([ps],Ju.prototype,"log",null);xf([ps],Ju.prototype,"onUpdated",null);xf([ps],Ju.prototype,"createChildScope",null);xf([ps],Ju.prototype,"get",null);xf([ps],Ju.prototype,"exists",null);xf([ps],Ju.prototype,"getAll",null);xf([ps],Ju.prototype,"add",null);xf([ps],Ju.prototype,"assign",null);const ar={type:"null"},Li={type:"bool",value:!0},ki={type:"bool",value:!1},Be=t=>({type:"num",value:t}),cr=t=>({type:"str",value:t}),Jf=t=>({type:"bool",value:t}),dh=t=>({type:"obj",value:t}),ws=t=>({type:"arr",value:t}),_1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),me=t=>({type:"fn",native:t}),P1=t=>({type:"return",value:t}),k1=()=>({type:"break",value:null}),M1=()=>({type:"continue",value:null}),E1=t=>t.type==="return"?t.value:t,Zp=(t,r)=>({type:"error",value:t,info:r});function Ni(t){if(t==null)throw new Or("Expect anything, but got nothing.")}function la(t){if(t==null)throw new Or("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Or(`Expect boolean, but got ${t.type}.`)}function uf(t){if(t==null)throw new Or("Expect function, but got nothing.");if(t.type!=="fn")throw new Or(`Expect function, but got ${t.type}.`)}function Ps(t){if(t==null)throw new Or("Expect string, but got nothing.");if(t.type!=="str")throw new Or(`Expect string, but got ${t.type}.`)}function He(t){if(t==null)throw new Or("Expect number, but got nothing.");if(t.type!=="num")throw new Or(`Expect number, but got ${t.type}.`)}function ku(t){if(t==null)throw new Or("Expect object, but got nothing.");if(t.type!=="obj")throw new Or(`Expect object, but got ${t.type}.`)}function Oo(t){if(t==null)throw new Or("Expect array, but got nothing.");if(t.type!=="arr")throw new Or(`Expect array, but got ${t.type}.`)}function ap(t){return t.type==="obj"}function id(t){return t.type==="arr"}function Qp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Xp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Xp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Yp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Yp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Yp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ev(t){if(t===null)return ar;if(typeof t=="boolean")return Jf(t);if(typeof t=="string")return cr(t);if(typeof t=="number")return Be(t);if(Array.isArray(t))return ws(t.map(r=>ev(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ev(n));return dh(r)}return ar}function To(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(To(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${To(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const S1={version:"0.17.0"},N1=S1.version,F1=new TextEncoder,O1=new TextDecoder,T1={help:cr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":cr(N1),"Core:ai":cr("kawaii"),"Core:not":me(([t])=>(la(t),t.value?ki:Li)),"Core:eq":me(([t,r])=>(Ni(t),Ni(r),Qp(t,r)?Li:ki)),"Core:neq":me(([t,r])=>(Ni(t),Ni(r),Qp(t,r)?ki:Li)),"Core:and":me(([t,r])=>(la(t),t.value?(la(r),r.value?Li:ki):ki)),"Core:or":me(([t,r])=>(la(t),t.value?Li:(la(r),r.value?Li:ki))),"Core:add":me(([t,r])=>(He(t),He(r),Be(t.value+r.value))),"Core:sub":me(([t,r])=>(He(t),He(r),Be(t.value-r.value))),"Core:mul":me(([t,r])=>(He(t),He(r),Be(t.value*r.value))),"Core:pow":me(([t,r])=>{He(t),He(r);const e=t.value**r.value;if(isNaN(e))throw new Or("Invalid operation.");return Be(e)}),"Core:div":me(([t,r])=>{He(t),He(r);const e=t.value/r.value;if(isNaN(e))throw new Or("Invalid operation.");return Be(e)}),"Core:mod":me(([t,r])=>(He(t),He(r),Be(t.value%r.value))),"Core:gt":me(([t,r])=>(He(t),He(r),t.value>r.value?Li:ki)),"Core:lt":me(([t,r])=>(He(t),He(r),t.value<r.value?Li:ki)),"Core:gteq":me(([t,r])=>(He(t),He(r),t.value>=r.value?Li:ki)),"Core:lteq":me(([t,r])=>(He(t),He(r),t.value<=r.value?Li:ki)),"Core:type":me(([t])=>(Ni(t),cr(t.type))),"Core:to_str":me(([t])=>(Ni(t),cr(To(t)))),"Core:range":me(([t,r])=>(He(t),He(r),t.value<r.value?ws(Array.from({length:r.value-t.value+1},(e,n)=>Be(n+t.value))):t.value>r.value?ws(Array.from({length:t.value-r.value+1},(e,n)=>Be(t.value-n))):ws([t]))),"Core:sleep":me(async([t])=>(He(t),await new Promise(r=>setTimeout(r,t.value)),ar)),"Util:uuid":me(()=>cr(bc())),"Json:stringify":me(([t])=>(Ni(t),cr(JSON.stringify(Yp(t))))),"Json:parse":me(([t])=>{Ps(t);try{return ev(JSON.parse(t.value))}catch{return Zp("not_json")}}),"Json:parsable":me(([t])=>{Ps(t);try{JSON.parse(t.value)}catch{return Jf(!1)}return Jf(!0)}),"Date:now":me(()=>Be(Date.now())),"Date:year":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":me(([t])=>(Ps(t),Be(new Date(t.value).getTime()))),"Math:Infinity":Be(1/0),"Math:E":Be(Math.E),"Math:LN2":Be(Math.LN2),"Math:LN10":Be(Math.LN10),"Math:LOG2E":Be(Math.LOG2E),"Math:LOG10E":Be(Math.LOG10E),"Math:PI":Be(Math.PI),"Math:SQRT1_2":Be(Math.SQRT1_2),"Math:SQRT2":Be(Math.SQRT2),"Math:abs":me(([t])=>(He(t),Be(Math.abs(t.value)))),"Math:acos":me(([t])=>(He(t),Be(Math.acos(t.value)))),"Math:acosh":me(([t])=>(He(t),Be(Math.acosh(t.value)))),"Math:asin":me(([t])=>(He(t),Be(Math.asin(t.value)))),"Math:asinh":me(([t])=>(He(t),Be(Math.asinh(t.value)))),"Math:atan":me(([t])=>(He(t),Be(Math.atan(t.value)))),"Math:atanh":me(([t])=>(He(t),Be(Math.atanh(t.value)))),"Math:atan2":me(([t,r])=>(He(t),He(r),Be(Math.atan2(t.value,r.value)))),"Math:cbrt":me(([t])=>(He(t),Be(Math.cbrt(t.value)))),"Math:ceil":me(([t])=>(He(t),Be(Math.ceil(t.value)))),"Math:clz32":me(([t])=>(He(t),Be(Math.clz32(t.value)))),"Math:cos":me(([t])=>(He(t),Be(Math.cos(t.value)))),"Math:cosh":me(([t])=>(He(t),Be(Math.cosh(t.value)))),"Math:exp":me(([t])=>(He(t),Be(Math.exp(t.value)))),"Math:expm1":me(([t])=>(He(t),Be(Math.expm1(t.value)))),"Math:floor":me(([t])=>(He(t),Be(Math.floor(t.value)))),"Math:fround":me(([t])=>(He(t),Be(Math.fround(t.value)))),"Math:hypot":me(([t])=>{Oo(t);const r=[];for(const e of t.value)He(e),r.push(e.value);return Be(Math.hypot(...r))}),"Math:imul":me(([t,r])=>(He(t),He(r),Be(Math.imul(t.value,r.value)))),"Math:log":me(([t])=>(He(t),Be(Math.log(t.value)))),"Math:log1p":me(([t])=>(He(t),Be(Math.log1p(t.value)))),"Math:log10":me(([t])=>(He(t),Be(Math.log10(t.value)))),"Math:log2":me(([t])=>(He(t),Be(Math.log2(t.value)))),"Math:max":me(([t,r])=>(He(t),He(r),Be(Math.max(t.value,r.value)))),"Math:min":me(([t,r])=>(He(t),He(r),Be(Math.min(t.value,r.value)))),"Math:pow":me(([t,r])=>(He(t),He(r),Be(Math.pow(t.value,r.value)))),"Math:round":me(([t])=>(He(t),Be(Math.round(t.value)))),"Math:sign":me(([t])=>(He(t),Be(Math.sign(t.value)))),"Math:sin":me(([t])=>(He(t),Be(Math.sin(t.value)))),"Math:sinh":me(([t])=>(He(t),Be(Math.sinh(t.value)))),"Math:sqrt":me(([t])=>{He(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Or("Invalid operation.");return Be(r)}),"Math:tan":me(([t])=>(He(t),Be(Math.tan(t.value)))),"Math:tanh":me(([t])=>(He(t),Be(Math.tanh(t.value)))),"Math:trunc":me(([t])=>(He(t),Be(Math.trunc(t.value)))),"Math:rnd":me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Be(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Be(Math.random())),"Math:gen_rng":me(([t])=>{if(Ni(t),t.type!=="num"&&t.type!=="str")return ar;const r=fo(t.value.toString());return me(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Be(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Be(r()))}),"Num:to_hex":me(([t])=>(He(t),cr(t.value.toString(16)))),"Num:from_hex":me(([t])=>(Ps(t),Be(parseInt(t.value,16)))),"Str:lf":cr(`
`),"Str:lt":me(([t,r])=>(Ps(t),Ps(r),t.value<r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:gt":me(([t,r])=>(Ps(t),Ps(r),t.value>r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:from_codepoint":me(([t])=>(He(t),cr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":me(([t])=>(Oo(t),cr(Array.from(t.value.map(r=>(He(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":me(([t])=>(Oo(t),cr(O1.decode(Uint8Array.from(t.value.map(r=>(He(r),r.value))))))),"Obj:keys":me(([t])=>(ku(t),ws(Array.from(t.value.keys()).map(r=>cr(r))))),"Obj:vals":me(([t])=>(ku(t),ws(Array.from(t.value.values())))),"Obj:kvs":me(([t])=>(ku(t),ws(Array.from(t.value.entries()).map(([r,e])=>ws([cr(r),e]))))),"Obj:get":me(([t,r])=>(ku(t),Ps(r),t.value.get(r.value)??ar)),"Obj:set":me(([t,r,e])=>(ku(t),Ps(r),Ni(e),t.value.set(r.value,e),ar)),"Obj:has":me(([t,r])=>(ku(t),Ps(r),Jf(t.value.has(r.value)))),"Obj:copy":me(([t])=>(ku(t),dh(new Map(t.value)))),"Obj:merge":me(([t,r])=>(ku(t),ku(r),dh(new Map([...t.value,...r.value])))),"Error:create":me(([t,r])=>(Ps(t),Zp(t.value,r))),"Async:interval":me(async([t,r,e],n)=>{He(t),uf(r),e&&(la(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),me(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":me(async([t,r],e)=>{He(t),uf(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),me(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},ld={num:{to_str:t=>me(async(r,e)=>cr(t.value.toString()))},str:{to_num:t=>me(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?ar:Be(n)}),to_arr:t=>me(async(r,e)=>ws(zs(t.value).map(n=>cr(n)))),to_unicode_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>cr(n)))),to_unicode_codepoint_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>{const v=n.codePointAt(0);return Be(v??n.charCodeAt(0))}))),to_char_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>cr(n)))),to_charcode_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>Be(n.charCodeAt(0))))),to_utf8_byte_arr:t=>me(async(r,e)=>ws(Array.from(F1.encode(t.value)).map(n=>Be(n)))),len:t=>Be(co(t.value)),replace:t=>me(async([r,e],n)=>(Ps(r),Ps(e),cr(t.value.split(r.value).join(e.value)))),index_of:t=>me(async([r],e)=>(Ps(r),Be(po(t.value,r.value)))),incl:t=>me(async([r],e)=>(Ps(r),t.value.includes(r.value)?Li:ki)),trim:t=>me(async(r,e)=>cr(t.value.trim())),upper:t=>me(async(r,e)=>cr(t.value.toUpperCase())),lower:t=>me(async(r,e)=>cr(t.value.toLowerCase())),split:t=>me(async([r],e)=>(r&&Ps(r),ws(r?t.value.split(r?r.value:"").map(n=>cr(n)):zs(t.value).map(n=>cr(n))))),slice:t=>me(async([r,e],n)=>(He(r),He(e),cr(ho(t.value,r.value,e.value)))),pick:t=>me(async([r],e)=>{He(r);const v=zs(t.value)[r.value];return v?cr(v):ar}),charcode_at:t=>me(([r],e)=>{He(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?ar:Be(n)}),codepoint_at:t=>me(([r],e)=>{He(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?ar:Be(n)})},arr:{len:t=>Be(t.value.length),push:t=>me(async([r],e)=>(Ni(r),t.value.push(r),t)),unshift:t=>me(async([r],e)=>(Ni(r),t.value.unshift(r),t)),pop:t=>me(async(r,e)=>t.value.pop()??ar),shift:t=>me(async(r,e)=>t.value.shift()??ar),concat:t=>me(async([r],e)=>(Oo(r),ws(t.value.concat(r.value)))),slice:t=>me(async([r,e],n)=>(He(r),He(e),ws(t.value.slice(r.value,e.value)))),join:t=>me(async([r],e)=>(r&&Ps(r),cr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>me(async([r],e)=>{uf(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Be(w)]));return ws(await Promise.all(n))}),filter:t=>me(async([r],e)=>{uf(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Be(v)]);la(_),_.value&&n.push(w)}return ws(n)}),reduce:t=>me(async([r,e],n)=>{uf(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Be(_)])}return w}),find:t=>me(async([r],e)=>{uf(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Be(n)]);if(la(w),w.value)return v}return ar}),incl:t=>me(async([r],e)=>(Ni(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?ki:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Li:ki)),reverse:t=>me(async(r,e)=>(t.value.reverse(),ar)),copy:t=>me(async(r,e)=>ws([...t.value])),sort:t=>me(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);He(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return uf(r),Oo(t),t.value=await n(t.value,r),t})},error:{name:t=>cr(t.value),info:t=>t.info??ar}};function I1(t,r){if(Object.hasOwn(ld,t.type)){const e=ld[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Or(`No such prop (${r}) in ${t.type}.`)}else throw new Or(`Cannot read prop of ${t.type}. (reading ${r})`)}const j1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var va=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Jy=300,R1=Jy-1;let Mn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:me(([v])=>{Ni(v),this.opts.out&&this.opts.out(v)}),readline:me(async v=>{const w=v[0];if(Ps(w),this.opts.in==null)return ar;const _=await this.opts.in(w.value);return cr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...T1,...n}).map(([v,w])=>[v,j1.const(w)])),this.scope=new Ju([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Zp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Th?this.opts.err(r):this.opts.err(new C1(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??ar;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return E1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return ar;if(this.stepCount%Jy===R1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Or("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);uf(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(la(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(la(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return ar}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(Qp(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):ar}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return ar}case"for":{if(r.times){const n=await this._eval(r.times,e);He(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);He(n),He(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Be(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return ar}case"each":{const n=await this._eval(r.items,e);Oo(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return ar}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),ar}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),ar}case"addAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value+v.value)),ar}case"subAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value-v.value)),ar}case"null":return ar;case"bool":return Jf(r.value);case"num":return Be(r.value);case"str":return cr(r.value);case"arr":return ws(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return dh(n)}case"prop":{const n=await this._eval(r.target,e);return ap(n)?n.value.has(r.name)?n.value.get(r.name):ar:I1(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(id(n)){He(v);const w=n.value[v.value];if(w===void 0)throw new ad(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(ap(n))return Ps(v),n.value.has(v.value)?n.value.get(v.value):ar;throw new Or(`Cannot read prop (${To(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return la(n),Jf(!n.value)}case"fn":return _1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Jf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=To(w)}return cr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),P1(n)}case"break":return this.log("block:break",{scope:e.name}),k1();case"continue":return this.log("block:continue",{scope:e.name}),M1();case"ns":return ar;case"meta":return ar;case"and":{const n=await this._eval(r.left,e);if(la(n),n.value){const v=await this._eval(r.right,e);return la(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(la(n),n.value)return n;{const v=await this._eval(r.right,e);return la(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=ar;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(id(v)){if(He(w),v.value[w.value]===void 0)throw new ad(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(ap(v))Ps(w),v.value.set(w.value,n);else throw new Or(`Cannot read prop (${To(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ku(v),v.value.set(e.name,n)}else throw new Or("The left-hand side of an assignment expression must be a variable or a property/index access.")}};va([ps],Mn.prototype,"exec",null);va([ps],Mn.prototype,"execFn",null);va([ps],Mn.prototype,"execFnSimple",null);va([ps],Mn.prototype,"handleError",null);va([ps],Mn.prototype,"log",null);va([ps],Mn.prototype,"collectNs",null);va([ps],Mn.prototype,"collectNsMember",null);va([ps],Mn.prototype,"_fn",null);va([ps],Mn.prototype,"_eval",null);va([ps],Mn.prototype,"_run",null);va([ps],Mn.prototype,"registerAbortHandler",null);va([ps],Mn.prototype,"unregisterAbortHandler",null);va([ps],Mn.prototype,"abort",null);va([ps],Mn.prototype,"assign",null);va([ps],Mn,"collectMetadata",null);function D1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Zf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Zf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}D1(Zf,Error);function ip(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Zf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=ip("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+ip("",v.column-1," ")+ip("",H,"^")}else r+=`
 at `+_}return r};Zf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function ud(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:sn,Main:Kr},w=sn,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",rr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Ee="eval",Ie="exists",Ae="`",Pe='"',$e="'",Je='\\"',rt="\\'",Ye="true",Qe="false",it="null",_t=";",dt="@",Ct="@(",Pt=`\r
`,ot=/^[A-Z0-9_:]/i,ks=/^[^`{]/,as=/^[{}`]/,Xr=/^[+\-]/,xt=/^[1-9]/,It=/^[0-9]/,yn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,sr=/^[ \t]/,Dt=Ds(),Br=pe("//",!1),Sn=pe("/*",!1),kt=pe("*/",!1),ut=pe("(",!1),kr=pe(")",!1),qt=pe("::",!1),st=pe("{",!1),Lt=pe("}",!1),ms=pe("###",!1),Ht=pe("let",!1),Ut=pe(":",!1),qr=pe("=",!1),Fa=pe("var",!1),Mr=pe("<:",!1),is=pe("#[",!1),Ns=pe("]",!1),ft=pe("each",!1),Ot=pe(",",!1),Ks=pe("for",!1),Er=pe("return",!1),Sr=er([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=pe("loop",!1),Oa=pe("break",!1),Ji=pe("continue",!1),Zi=pe("+=",!1),Ta=pe("-=",!1),Ia=pe("\\",!1),Qi=pe("||",!1),Xi=pe("&&",!1),Yi=pe("==",!1),el=pe("!=",!1),Nn=pe("<=",!1),Vs=pe(">=",!1),Fn=pe("<",!1),ja=pe(">",!1),tl=pe("+",!1),Ra=pe("-",!1),Fs=pe("*",!1),rl=pe("^",!1),sl=pe("/",!1),nl=pe("%",!1),$s=pe("!",!1),Os=pe("[",!1),On=pe(".",!1),Ws=pe("if",!1),Gs=pe("elif",!1),al=pe("else",!1),Js=pe("match",!1),ls=pe("=>",!1),Ts=pe("eval",!1),xr=pe("exists",!1),Zs=pe("`",!1),Qs=er(["`","{"],!0,!1),Xs=er(["{","}","`"],!1,!1),us=pe('"',!1),Ys=pe("'",!1),Is=pe('\\"',!1),Da=pe("\\'",!1),Yt=er(["+","-"],!1,!1),La=er([["1","9"]],!1,!1),dr=er([["0","9"]],!1,!1),il=pe("true",!1),en=pe("false",!1),ll=pe("null",!1),js=pe(";",!1),ul=pe("@",!1),Tn=pe("@(",!1),fl=er([["A","Z"],"_"],!1,!0),Ha=er([["A","Z"],["0","9"],"_"],!1,!0),ol=pe(`\r
`,!1),cl=er(["\r",`
`],!1,!1),Ua=er([" ","	","\r",`
`],!1,!1),hl=er([" ","	"],!1,!1),Ba=function(s){return s.join("")},pl=function(){return le()},qa=function(){return le()},vl=function(){return""},za=function(){return""},gl=function(s){return s??[]},In=function(s,u){return u},dl=function(s,u){return[s,...u]},jn=function(s,u){return u},yl=function(s,u){return[s,...u]},Ka=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},Cl=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},_l=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Va=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s,u){return p("for",{times:s,for:u})},Tl=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Rn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Wa=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Ga=function(s,u){return s.chain?{...s,chain:[...s.chain,...u]}:{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},Dn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},zl=function(s){return p("propChain",{name:s})},Kl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ja=function(s,u){return{cond:s,then:u}},Za=function(s){return s},Qa=function(s,u,d){return{q:u,a:d}},Xa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Ya=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},ei=function(s){return s.join("")},ti=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ri=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},si=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},ni=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ai=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ii=function(){return p("null",{})},Ln=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},Hn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},li=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},ui=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},fi=function(s){return s},lu=function(s){return p("arr",{value:s})},oi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},tn=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},zr=function(s){return p("block",{statements:s??[]})},f=0,Y=0,O=[{line:1,column:1}],j=0,bt=[],F=0,q={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function le(){return t.substring(Y,f)}function D(){return rn(Y,f)}function uu(s,u){throw u=u!==void 0?u:rn(Y,f),bs(s,u)}function pe(s,u){return{type:"literal",text:s,ignoreCase:u}}function er(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function ci(s){var u=O[s],d;if(u)return u;for(d=s-1;!O[d];)d--;for(u=O[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return O[s]=u,u}function rn(s,u,d){var h=ci(s),x=ci(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return d&&n&&typeof n.offset=="function"&&(m.start=n.offset(m.start),m.end=n.offset(m.end)),m}function R(s){f<j||(f>j&&(j=f,bt=[]),bt.push(s))}function bs(s,u){return new Zf(s,null,null,u)}function Un(s,u,d){return new Zf(Zf.buildMessage(s,u),s,u,d)}function sn(){var s,u,d,h=f*77+0,x=q[h];if(x)return f=x.nextPos,x.result;for(s=f,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ba(u),s=u,q[h]={nextPos:f,result:s},s}function As(){var s,u,d=f*77+1,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=un(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=f,u=Zn(),u!==e&&(Y=s,u=qa()),s=u,s===e&&(s=et(),s===e&&(t.length>f?(s=t.charAt(f),f++):(s=e,F===0&&R(Dt))))),q[d]={nextPos:f,result:s},s)}function et(){var s,u,d,h,x,m,C=f*77+2,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,2)===_?(u=_,f+=2):(u=e,F===0&&R(Br)),u!==e){for(d=[],h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=vl()}else f=s,s=e;if(s===e)if(s=f,t.substr(f,2)===P?(u=P,f+=2):(u=e,F===0&&R(Sn)),u!==e){for(d=[],h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);t.substr(f,2)===E?(h=E,f+=2):(h=e,F===0&&R(kt)),h!==e?(Y=s,s=za()):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Kr(){var s,u,d,h,x,m=f*77+3,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();for(d=nn(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),q[m]={nextPos:f,result:s},s}function nn(){var s,u,d,h,x,m,C,A,M=f*77+4,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Xe(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=dl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Nr(){var s,u,d,h,x,m,C,A,M=f*77+5,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=fs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=yl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function br(){var s,u,d,h,x,m,C,A,M=f*77+6,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Cs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=Ka(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=Ka(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=wl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Xe(){var s,u=f*77+7,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=fu(),s===e&&(s=Cs())),q[u]={nextPos:f,result:s},s)}function fs(){var s,u=f*77+8,d=q[u];return d?(f=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=pi())),q[u]={nextPos:f,result:s},s)}function Cs(){var s,u=f*77+9,d=q[u];return d?(f=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=ou(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Wr(),s===e&&(s=gi(),s===e&&(s=pu(),s===e&&(s=di(),s===e&&(s=Gr(),s===e&&(s=Bn(),s===e&&(s=Ve()))))))))))),q[u]={nextPos:f,result:s},s)}function Ve(){var s,u=f*77+10,d=q[u];return d?(f=d.nextPos,d.result):(s=yi(),s===e&&(s=Ls()),q[u]={nextPos:f,result:s},s)}function Ls(){var s,u=f*77+11,d=q[u];return d?(f=d.nextPos,d.result):(s=$i(),s===e&&(s=wu(),s===e&&(s=wi(),s===e&&(s=hi()))),q[u]={nextPos:f,result:s},s)}function hi(){var s,u,d,h,x,m,C=f*77+12,A=q[C];if(A)return f=A.nextPos,A.result;if(s=ln(),s===e&&(s=Vn(),s===e&&(s=Wn(),s===e&&(s=un(),s===e&&(s=Zn(),s===e&&(s=Ai(),s===e&&(s=ta(),s===e&&(s=sa(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=zn(),s===e&&(s=Gn(),s===e))))))))))))if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=ml(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Vr(){var s,u=f*77+13,d=q[u];return d?(f=d.nextPos,d.result):(s=Ai(),s===e&&(s=Zn(),s===e&&(s=ta(),s===e&&(s=_s(),s===e&&(s=nr(),s===e&&(s=sa()))))),q[u]={nextPos:f,result:s},s)}function pi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+14,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===H?(u=H,f+=2):(u=e,F===0&&R(qt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(f)===123?(m=B,f++):(m=e,F===0&&R(st)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Nr(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(f)===125?(I=J,f++):(I=e,F===0&&R(Lt)),I!==e?(Y=s,s=$l(h,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function fu(){var s,u,d,h,x,m,C=f*77+15,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Vr(),m!==e?(Y=s,s=xl(h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Vr(),h!==e?(Y=s,s=bl(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vi(){var s,u,d,h,x,m,C,A,M,I=f*77+16,U=q[I];if(U)return f=U.nextPos,U.result;if(s=f,t.substr(f,3)===ue?(u=ue,f+=3):(u=e,F===0&&R(Ht)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=ke,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Al(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===G?(u=G,f+=3):(u=e,F===0&&R(Fa)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=ke,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Cl(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[I]={nextPos:f,result:s},s}function ou(){var s,u,d,h,x=f*77+17,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,2)===V?(u=V,f+=2):(u=e,F===0&&R(Mr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=_l(h)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function cu(){var s,u,d,h,x,m,C,A=f*77+18,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,2)===Q?(u=Q,f+=2):(u=e,F===0&&R(is)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();for(C=Vr(),C!==e?x=C:(f=x,x=e),x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();t.charCodeAt(f)===93?(C=X,f++):(C=e,F===0&&R(Ns)),C!==e?(Y=s,s=Pl(h,x)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+19,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.substr(f,4)===Z?(u=Z,f+=4):(u=e,F===0&&R(ft)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ne(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Ot)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(f)===41?(K=T,f++):(K=e,F===0&&R(kr)),K!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(Y=s,s=kl(C,U,Fe)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,4)===Z?(u=Z,f+=4):(u=e,F===0&&R(ft)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=Ve(),I!==e){if(U=[],K=l(),K!==e)for(;K!==e;)U.push(K),K=l();else U=e;U!==e?(K=b(),K!==e?(Y=s,s=Ml(m,I,K)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function gi(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt=f*77+20,gt=q[vt];if(gt)return f=gt.nextPos,gt.result;if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ne(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=f,t.charCodeAt(f)===61?(I=ke,f++):(I=e,F===0&&R(qr)),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();K=Ve(),K!==e?(Y=M,M=El(C,K)):(f=M,M=e)}else f=M,M=e;for(M===e&&(M=null),t.charCodeAt(f)===44?(I=ee,f++):(I=e,F===0&&R(Ot)),I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();if(K=Ve(),K!==e)if(t.charCodeAt(f)===41?(se=T,f++):(se=e,F===0&&R(kr)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();ve=b(),ve!==e?(Y=s,s=Sl(C,M,K,ve)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(A=f,t.charCodeAt(f)===61?(M=ke,f++):(M=e,F===0&&R(qr)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(f=A,A=e)}else f=A,A=e;for(A===e&&(A=null),t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Ot)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(K=[],se=l(),se!==e)for(;se!==e;)K.push(se),se=l();else K=e;K!==e?(se=b(),se!==e?(Y=s,s=Va(m,A,U,se)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Ol(h,m)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e}}return q[vt]={nextPos:f,result:s},s}function hu(){var s,u,d,h,x,m=f*77+21,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,6)===ae?(u=ae,f+=6):(u=e,F===0&&R(Er)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Tl(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function pu(){var s,u,d,h,x,m,C,A,M=f*77+22,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Me?(u=Me,f+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Il(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function di(){var s,u,d,h,x=f*77+23,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Te?(u=Te,f+=5):(u=e,F===0&&R(Oa)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=jl()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Gr(){var s,u,d,h,x=f*77+24,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,8)===_e?(u=_e,f+=8):(u=e,F===0&&R(Ji)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=Rn()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Bn(){var s,u,d,h,x,m,C=f*77+25,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(f,2)===at?(h=at,f+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(f,2)===pt?(h=pt,f+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(f)===61?(h=ke,f++):(h=e,F===0&&R(qr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function yi(){var s,u,d,h,x,m,C,A,M=f*77+26,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Ls(),u!==e){for(d=[],h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(f=h,h=e)}else f=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(f=h,h=e)}else f=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(f=s,s=e)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Jr(){var s,u,d,h=f*77+27,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=tr,f++):(u=e,F===0&&R(Ia)),u!==e?(d=y(),d!==e?(u=[u,d],s=u):(f=s,s=e)):(f=s,s=e),s===e&&(s=$()),q[h]={nextPos:f,result:s},s)}function qn(){var s,u,d=f*77+28,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===$t?(u=$t,f+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(f,2)===wt?(u=wt,f+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(f,2)===Ze?(u=Ze,f+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(f,2)===mt?(u=mt,f+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(f,2)===Jt?(u=Jt,f+=2):(u=e,F===0&&R(Nn)),u===e&&(t.substr(f,2)===Zt?(u=Zt,f+=2):(u=e,F===0&&R(Vs)),u===e&&(t.charCodeAt(f)===60?(u=ht,f++):(u=e,F===0&&R(Fn)),u===e&&(t.charCodeAt(f)===62?(u=Ir,f++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(f)===43?(u=Qt,f++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(f)===45?(u=Pr,f++):(u=e,F===0&&R(Ra)),u===e&&(t.charCodeAt(f)===42?(u=Bt,f++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(f)===94?(u=Ar,f++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(f)===47?(u=Ur,f++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(f)===37?(u=rr,f++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,q[d]={nextPos:f,result:s},s)}function zn(){var s,u,d,h=f*77+29,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===33?(u=jr,f++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function wi(){var s,u,d,h,x=f*77+30,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,u=hi(),u!==e){if(d=[],h=Kn(),h===e&&(h=mi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Kn(),h===e&&(h=mi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Ga(u,d)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Kn(){var s,u,d,h,x,m,C=f*77+31,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=Ul(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vu(){var s,u,d,h,x,m,C=f*77+32,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);Y=s,s=Bl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function mi(){var s,u,d,h,x,m,C=f*77+33,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Hs(){var s,u,d,h=f*77+34,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===46?(u=$r,f++):(u=e,F===0&&R(On)),u!==e?(d=ne(),d!==e?(Y=s,s=zl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function $i(){var s,u,d,h,x,m,C,A,M,I,U=f*77+35,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===W?(u=W,f+=2):(u=e,F===0&&R(Ws)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(C=f,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=xi(),M!==e?C=M:(f=C,C=e)):(f=C,C=e),C===e&&(C=null),A=f,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=gu(),I!==e?A=I:(f=A,A=e)):(f=A,A=e),A===e&&(A=null),Y=s,s=Kl(h,m,C,A)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function xi(){var s,u,d,h,x,m,C=f*77+36,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=an(),u!==e){for(d=[],h=f,x=[],m=l();m!==e;)x.push(m),m=l();for(m=an(),m!==e?h=m:(f=h,h=e);h!==e;){for(d.push(h),h=f,x=[],m=l();m!==e;)x.push(m),m=l();m=an(),m!==e?h=m:(f=h,h=e)}Y=s,s=Vl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function an(){var s,u,d,h,x,m,C,A=f*77+37,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,4)===re?(u=re,f+=4):(u=e,F===0&&R(Gs)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=b(),C!==e?(Y=s,s=Ja(x,C)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[A]={nextPos:f,result:s},s}function gu(){var s,u,d,h,x,m=f*77+38,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,4)===fe?(u=fe,f+=4):(u=e,F===0&&R(al)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Za(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function ln(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt,gt,mu=f*77+39,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.substr(f,5)===xe?(u=xe,f+=5):(u=e,F===0&&R(Js)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===123?(C=B,f++):(C=e,F===0&&R(st)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();Y=I,I=Qa(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();Y=I,I=Qa(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;else M=e;if(M!==e){if(I=f,t.charCodeAt(f)===42?(U=Bt,f++):(U=e,F===0&&R(Fs)),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();I=ve}else f=I,I=e}else f=I,I=e}else f=I,I=e;for(I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();t.charCodeAt(f)===125?(K=J,f++):(K=e,F===0&&R(Lt)),K!==e?(Y=s,s=Xa(x,M,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function Vn(){var s,u,d,h,x,m,C,A,M=f*77+40,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Ee?(u=Ee,f+=4):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Wl(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Wn(){var s,u,d,h,x=f*77+41,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,6)===Ie?(u=Ie,f+=6):(u=e,F===0&&R(xr)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Gn(),h!==e?(Y=s,s=Gl(h)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Gn(){var s,u,d=f*77+42,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=o(),u!==e&&(Y=s,u=Ya(u)),s=u,q[d]={nextPos:f,result:s},s)}function un(){var s,u,d,h,x,m,C=f*77+43,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===96?(u=Ae,f++):(u=e,F===0&&R(Zs)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===96?(h=Ae,f++):(h=e,F===0&&R(Zs)),h!==e?(Y=s,s=Jl(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Jn(){var s,u,d,h,x,m,C=f*77+44,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?s=h:(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,u=[],d=fn(),d!==e)for(;d!==e;)u.push(d),d=fn();else u=e;u!==e&&(Y=s,u=ei(u)),s=u}return q[C]={nextPos:f,result:s},s}function fn(){var s,u=f*77+45,d=q[u];return d?(f=d.nextPos,d.result):(s=bi(),s===e&&(ks.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Qs))),q[u]={nextPos:f,result:s},s)}function bi(){var s,u,d,h=f*77+46,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=tr,f++):(u=e,F===0&&R(Ia)),u!==e?(as.test(t.charAt(f))?(d=t.charAt(f),f++):(d=e,F===0&&R(Xs)),d!==e?s=d:(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function Zn(){var s,u,d,h,x,m,C=f*77+47,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===34?(u=Pe,f++):(u=e,F===0&&R(us)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===34?(m=Pe,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===34?(m=Pe,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===34?(h=Pe,f++):(h=e,F===0&&R(us)),h!==e?(Y=s,s=Zl(d)):(f=s,s=e)}else f=s,s=e;if(s===e)if(s=f,t.charCodeAt(f)===39?(u=$e,f++):(u=e,F===0&&R(Ys)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ri(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ri(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===39?(h=$e,f++):(h=e,F===0&&R(Ys)),h!==e?(Y=s,s=Ql(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Qn(){var s,u,d=f*77+48,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===Je?(u=Je,f+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,q[d]={nextPos:f,result:s},s)}function Xn(){var s,u,d=f*77+49,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===rt?(u=rt,f+=2):(u=e,F===0&&R(Da)),u!==e&&(Y=s,u=si()),s=u,q[d]={nextPos:f,result:s},s)}function Ai(){var s,u=f*77+50,d=q[u];return d?(f=d.nextPos,d.result):(s=Yn(),s===e&&(s=ea()),q[u]={nextPos:f,result:s},s)}function Yn(){var s,u,d,h,x,m,C=f*77+51,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(La)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(f)===46?(h=$r,f++):(h=e,F===0&&R(On)),h!==e){if(x=[],It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(f)===46?(d=$r,f++):(d=e,F===0&&R(On)),d!==e){if(h=[],It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=ni()):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[C]={nextPos:f,result:s},s}function ea(){var s,u,d,h,x=f*77+52,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(La)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(f=s,s=e)}else f=s,s=e;return s===e&&(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(f=s,s=e)),q[x]={nextPos:f,result:s},s}function ta(){var s,u=f*77+53,d=q[u];return d?(f=d.nextPos,d.result):(s=du(),s===e&&(s=ra()),q[u]={nextPos:f,result:s},s)}function du(){var s,u,d,h,x=f*77+54,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===Ye?(u=Ye,f+=4):(u=e,F===0&&R(il)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ai()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function ra(){var s,u,d,h,x=f*77+55,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Qe?(u=Qe,f+=5):(u=e,F===0&&R(en)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ru()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function sa(){var s,u,d,h,x=f*77+56,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===it?(u=it,f+=4):(u=e,F===0&&R(ll)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ii()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+57,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=su(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function yu(){var s,u,d,h,x,m,C,A,M,I,U=f*77+58,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function na(){var s,u,d,h,x,m,C,A=f*77+59,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,u=ne(),u!==e){for(d=f,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=We(),C!==e?d=C:(f=d,d=e)}else f=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Ci(){var s,u,d,h,x,m,C=f*77+60,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=na(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=li(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function tt(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt,gt,mu=f*77+61,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.charCodeAt(f)===64?(u=dt,f++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(f)===40?(m=N,f++):(m=e,F===0&&R(ut)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Ci(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(f)===41?(I=T,f++):(I=e,F===0&&R(kr)),I!==e){for(U=f,K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===58?(se=oe,f++):(se=e,F===0&&R(Ut)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();ve=We(),ve!==e?U=ve:(f=U,U=e)}else f=U,U=e;for(U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===123?(se=B,f++):(se=e,F===0&&R(st)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();for(ve=br(),ve===e&&(ve=null),vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();t.charCodeAt(f)===125?(gt=J,f++):(gt=e,F===0&&R(Lt)),gt!==e?(Y=s,s=iu(d,h,x,A,U,ve)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function wu(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=f*77+62,ve=q[Fe];if(ve)return f=ve.nextPos,ve.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(Tn)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ci(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=f,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===58?(M=oe,f++):(M=e,F===0&&R(Ut)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?C=U:(f=C,C=e)}else f=C,C=e;for(C===e&&(C=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===123?(M=B,f++):(M=e,F===0&&R(st)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=br(),U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();t.charCodeAt(f)===125?(se=J,f++):(se=e,F===0&&R(Lt)),se!==e?(Y=s,s=ui(h,C,U)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[Fe]={nextPos:f,result:s},s}function _s(){var s,u,d,h,x,m,C,A,M,I,U=f*77+63,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=fi(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=fi(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function nr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+64,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=oi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=oi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=c(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function We(){var s,u=f*77+65,d=q[u];return d?(f=d.nextPos,d.result):(s=_i(),s===e&&(s=je()),q[u]={nextPos:f,result:s},s)}function _i(){var s,u,d,h,x,m,C,A,M,I,U=f*77+66,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(Tn)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.substr(f,2)===ce?(A=ce,f+=2):(A=e,F===0&&R(ls)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function k(){var s,u,d,h,x,m,C=f*77+67,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=We(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=xs(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function je(){var s,u,d,h,x,m,C,A,M=f*77+68,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=ne(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(f)===60?(h=ht,f++):(h=e,F===0&&R(Fn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(C=[],A=$();A!==e;)C.push(A),A=$();t.charCodeAt(f)===62?(A=Ir,f++):(A=e,F===0&&R(ja)),A!==e?(Y=s,s=yr(u,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return s===e&&(s=f,u=ne(),u!==e&&(Y=s,u=tn(u)),s=u),q[M]={nextPos:f,result:s},s}function ne(){var s,u,d,h,x=f*77+69,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,yn.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(fl)),u!==e){for(d=[],gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Ha));h!==e;)d.push(h),gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Ha));Y=s,s=i()}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function o(){var s,u,d,h,x,m,C=f*77+70,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=ne(),u!==e){for(d=[],h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=S()}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function g(){var s,u,d,h,x,m=f*77+71,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(f)===44?(d=ee,f++):(d=e,F===0&&R(Ot)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else f=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return q[m]={nextPos:f,result:s},s}function b(){var s,u,d,h,x,m,C=f*77+72,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=br(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?(Y=s,s=zr(h)):(f=s,s=e)}else f=s,s=e;return s===e&&(s=Cs()),q[C]={nextPos:f,result:s},s}function y(){var s,u=f*77+73,d=q[u];return d?(f=d.nextPos,d.result):(t.substr(f,2)===Pt?(s=Pt,f+=2):(s=e,F===0&&R(ol)),s===e&&(Vi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(cl))),q[u]={nextPos:f,result:s},s)}function a(){var s,u,d=f*77+74,h=q[d];return h?(f=h.nextPos,h.result):(s=f,F++,t.length>f?(u=t.charAt(f),f++):(u=e,F===0&&R(Dt)),F--,u===e?s=void 0:(f=s,s=e),s===e&&(s=y()),q[d]={nextPos:f,result:s},s)}function l(){var s,u=f*77+75,d=q[u];return d?(f=d.nextPos,d.result):(Wi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Ua)),q[u]={nextPos:f,result:s},s)}function $(){var s,u=f*77+76,d=q[u];return d?(f=d.nextPos,d.result):(sr.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(hl)),q[u]={nextPos:f,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=w(),Rs!==e&&f===t.length)return Rs;throw Rs!==e&&f<t.length&&R(L()),Un(bt,j<t.length?t.charAt(j):null,j<t.length?rn(j,j+1):rn(j,j))}const L1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function H1(t){return L1.includes(t.type)}function Zy(t){return"chain"in t&&t.chain!==null}function U1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function B1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function q1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function St(t,r){const e=r(t);switch(e.type){case"def":{e.expr=St(e.expr,r);break}case"return":{e.expr=St(e.expr,r);break}case"each":{e.items=St(e.items,r),e.for=St(e.for,r);break}case"for":{e.from!=null&&(e.from=St(e.from,r)),e.to!=null&&(e.to=St(e.to,r)),e.times!=null&&(e.times=St(e.times,r)),e.for=St(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=St(e.expr,r),e.dest=St(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=St(e.operands[n],r);break}case"not":{e.expr=St(e.expr,r);break}case"if":{e.cond=St(e.cond,r),e.then=St(e.then,r);for(const n of e.elseif)n.cond=St(n.cond,r),n.then=St(n.then,r);e.else!=null&&(e.else=St(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=St(e.children[n],r);break}case"match":{e.about=St(e.about,r);for(const n of e.qs)n.q=St(n.q,r),n.a=St(n.a,r);e.default!=null&&(e.default=St(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"exists":{e.identifier=St(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=St(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],St(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=St(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"indexChain":{e.index=St(e.index,r);break}case"call":{e.target=St(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"index":{e.target=St(e.target,r),e.index=St(e.index,r);break}case"prop":{e.target=St(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=St(e.members[n],r);break}case"or":case"and":{e.left=St(e.left,r),e.right=St(e.right,r);break}}if(Zy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=St(e.chain[n],r);return e}const lp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function up(t){throw new no(`Reserved word "${t}" cannot be used as variable name.`)}function z1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{lp.includes(t.name)&&up(t.name);break}case"meta":{t.name!=null&&lp.includes(t.name)&&up(t.name);break}case"fn":{for(const r of t.args)lp.includes(r.name)&&up(r.name);break}}return t}function K1(t){for(const r of t)St(r,z1);return t}function fd(t){return{type:"simple",name:t}}function V1(t,r){return{type:"generic",name:t,inners:r}}function W1(t,r){return{type:"fn",args:t,result:r}}function Wc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Wc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Wc(n)).join(", "),e=Wc(t.result);return`@(${r}) { ${e} }`}}}function Io(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return fd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Io(t.inner):r=fd("any"),V1(t.name,[r])}}throw new no(`Unknown type: '${Wc(t)}'`)}else{const r=t.args.map(e=>Io(e));return W1(r,Io(t.result))}}function G1(t){switch(t.type){case"def":{t.varType!=null&&Io(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Io(r.argType);t.retType!=null&&Io(t.retType);break}}return t}function J1(t){for(const r of t)St(r,G1);return t}function Gc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Gc(n.expr.children)),r.push(n);else{if(e.length>0)throw new no("invalid attribute.");switch(n.type){case"fn":{n.children=Gc(n.children);break}case"block":{n.statements=Gc(n.statements);break}}r.push(n)}if(e.length>0)throw new no("invalid attribute.");return r}function Z1(t){if(H1(t)&&Zy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=U1(n,v.args,v.loc);break}case"indexChain":{n=B1(n,v.index,v.loc);break}case"propChain":{n=q1(n,v.name,v.loc);break}}return n}return t}function Q1(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],Z1);return t}function Jc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Qy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Jc(t,r,e);{const{left:n,right:v,info:w}=t;return Jc(n,Qy(v,r,e),w)}}function If(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[If(t.left),If(t.right)]}}const X1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:If(t.left),right:If(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:If(t.left),right:If(t.right)}),priority:3}};function Y1(t){const r=t.operators.map(n=>{const v=X1[n];if(v==null)throw new no(`No such operator: ${n}.`);return v});let e=Jc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Qy(e,t.operands[2+n],r[1+n]);return If(e)}function eA(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],e=>e.type==="infix"?Y1(e):e);return t}var ju;let tA=(ju=class{constructor(){he(this,"plugins");this.plugins={validate:[K1,J1],transform:[Gc,Q1,eA]}}static parse(r){return ju.instance==null&&(ju.instance=new ju),ju.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=ud(r,{startRule:"Preprocess"});e=ud(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new no(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new no(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(ju,"instance"),ju);const rA="0.17.0",sA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let tv=[],Qo=null;function nA(t){return tv=tA.parse(t),JSON.stringify(tv,null,"	")}async function aA(t){Qo==null||Qo.abort(),Qo=new Mn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Xp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Xp(e.val,!0),print:!1});break}}});try{await Qo.exec(tv)}catch(r){t.err(r)}}const iA=Object.freeze(Object.defineProperty({__proto__:null,exec:aA,parse:nA,samples:sA,version:rA},Symbol.toStringTag,{value:"Module"}));function vs(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Ih=class Xy extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Xy)}};class lA extends Ih{constructor(r){super(`Internal Error. ${r}`,r)}}class ao extends Ih{constructor(r,e){super(r,e)}}class Tr extends Ih{constructor(r,e){super(r,e)}}class uA extends Tr{constructor(r,e){super(r,e)}}var bf=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Zu=class Yy{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Yy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Tr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new Tr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};bf([vs],Zu.prototype,"log",null);bf([vs],Zu.prototype,"onUpdated",null);bf([vs],Zu.prototype,"createChildScope",null);bf([vs],Zu.prototype,"get",null);bf([vs],Zu.prototype,"exists",null);bf([vs],Zu.prototype,"getAll",null);bf([vs],Zu.prototype,"add",null);bf([vs],Zu.prototype,"assign",null);const or={type:"null"},Hi={type:"bool",value:!0},Mi={type:"bool",value:!1},Ke=t=>({type:"num",value:t}),Fr=t=>({type:"str",value:t}),Qf=t=>({type:"bool",value:t}),Vv=t=>({type:"obj",value:t}),wn=t=>({type:"arr",value:t}),fA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),be=t=>({type:"fn",native:t}),oA=t=>({type:"return",value:t}),cA=()=>({type:"break",value:null}),hA=()=>({type:"continue",value:null}),pA=t=>t.type==="return"?t.value:t,ew=(t,r)=>({type:"error",value:t,info:r});function Fi(t){if(t==null)throw new Tr("Expect anything, but got nothing.")}function ua(t){if(t==null)throw new Tr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Tr(`Expect boolean, but got ${t.type}.`)}function ff(t){if(t==null)throw new Tr("Expect function, but got nothing.");if(t.type!=="fn")throw new Tr(`Expect function, but got ${t.type}.`)}function Ms(t){if(t==null)throw new Tr("Expect string, but got nothing.");if(t.type!=="str")throw new Tr(`Expect string, but got ${t.type}.`)}function Ue(t){if(t==null)throw new Tr("Expect number, but got nothing.");if(t.type!=="num")throw new Tr(`Expect number, but got ${t.type}.`)}function tf(t){if(t==null)throw new Tr("Expect object, but got nothing.");if(t.type!=="obj")throw new Tr(`Expect object, but got ${t.type}.`)}function yh(t){if(t==null)throw new Tr("Expect array, but got nothing.");if(t.type!=="arr")throw new Tr(`Expect array, but got ${t.type}.`)}function fp(t){return t.type==="obj"}function od(t){return t.type==="arr"}function rv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function sv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>sv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function nv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>nv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=nv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function av(t){if(t===null)return or;if(typeof t=="boolean")return Qf(t);if(typeof t=="string")return Fr(t);if(typeof t=="number")return Ke(t);if(Array.isArray(t))return wn(t.map(r=>av(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,av(n));return Vv(r)}return or}function jo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(jo(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${jo(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const vA={help:Fr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Fr("0.16.0"),"Core:ai":Fr("kawaii"),"Core:not":be(([t])=>(ua(t),t.value?Mi:Hi)),"Core:eq":be(([t,r])=>(Fi(t),Fi(r),rv(t,r)?Hi:Mi)),"Core:neq":be(([t,r])=>(Fi(t),Fi(r),rv(t,r)?Mi:Hi)),"Core:and":be(([t,r])=>(ua(t),t.value?(ua(r),r.value?Hi:Mi):Mi)),"Core:or":be(([t,r])=>(ua(t),t.value?Hi:(ua(r),r.value?Hi:Mi))),"Core:add":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value+r.value))),"Core:sub":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value-r.value))),"Core:mul":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value*r.value))),"Core:pow":be(([t,r])=>{Ue(t),Ue(r);const e=t.value**r.value;if(isNaN(e))throw new Tr("Invalid operation.");return Ke(e)}),"Core:div":be(([t,r])=>{Ue(t),Ue(r);const e=t.value/r.value;if(isNaN(e))throw new Tr("Invalid operation.");return Ke(e)}),"Core:mod":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value%r.value))),"Core:gt":be(([t,r])=>(Ue(t),Ue(r),t.value>r.value?Hi:Mi)),"Core:lt":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?Hi:Mi)),"Core:gteq":be(([t,r])=>(Ue(t),Ue(r),t.value>=r.value?Hi:Mi)),"Core:lteq":be(([t,r])=>(Ue(t),Ue(r),t.value<=r.value?Hi:Mi)),"Core:type":be(([t])=>(Fi(t),Fr(t.type))),"Core:to_str":be(([t])=>(Fi(t),Fr(jo(t)))),"Core:range":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?wn(Array.from({length:r.value-t.value+1},(e,n)=>Ke(n+t.value))):t.value>r.value?wn(Array.from({length:t.value-r.value+1},(e,n)=>Ke(t.value-n))):wn([t]))),"Core:sleep":be(async([t])=>(Ue(t),await new Promise(r=>setTimeout(r,t.value)),or)),"Util:uuid":be(()=>Fr(bc())),"Json:stringify":be(([t])=>(Fi(t),Fr(JSON.stringify(nv(t))))),"Json:parse":be(([t])=>{Ms(t);try{return av(JSON.parse(t.value))}catch{return ew("not_json")}}),"Json:parsable":be(([t])=>{Ms(t);try{JSON.parse(t.value)}catch{return Qf(!1)}return Qf(!0)}),"Date:now":be(()=>Ke(Date.now())),"Date:year":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":be(([t])=>(Ms(t),Ke(new Date(t.value).getTime()))),"Math:Infinity":Ke(1/0),"Math:E":Ke(Math.E),"Math:LN2":Ke(Math.LN2),"Math:LN10":Ke(Math.LN10),"Math:LOG2E":Ke(Math.LOG2E),"Math:LOG10E":Ke(Math.LOG10E),"Math:PI":Ke(Math.PI),"Math:SQRT1_2":Ke(Math.SQRT1_2),"Math:SQRT2":Ke(Math.SQRT2),"Math:abs":be(([t])=>(Ue(t),Ke(Math.abs(t.value)))),"Math:acos":be(([t])=>(Ue(t),Ke(Math.acos(t.value)))),"Math:acosh":be(([t])=>(Ue(t),Ke(Math.acosh(t.value)))),"Math:asin":be(([t])=>(Ue(t),Ke(Math.asin(t.value)))),"Math:asinh":be(([t])=>(Ue(t),Ke(Math.asinh(t.value)))),"Math:atan":be(([t])=>(Ue(t),Ke(Math.atan(t.value)))),"Math:atanh":be(([t])=>(Ue(t),Ke(Math.atanh(t.value)))),"Math:atan2":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.atan2(t.value,r.value)))),"Math:cbrt":be(([t])=>(Ue(t),Ke(Math.cbrt(t.value)))),"Math:ceil":be(([t])=>(Ue(t),Ke(Math.ceil(t.value)))),"Math:clz32":be(([t])=>(Ue(t),Ke(Math.clz32(t.value)))),"Math:cos":be(([t])=>(Ue(t),Ke(Math.cos(t.value)))),"Math:cosh":be(([t])=>(Ue(t),Ke(Math.cosh(t.value)))),"Math:exp":be(([t])=>(Ue(t),Ke(Math.exp(t.value)))),"Math:expm1":be(([t])=>(Ue(t),Ke(Math.expm1(t.value)))),"Math:floor":be(([t])=>(Ue(t),Ke(Math.floor(t.value)))),"Math:fround":be(([t])=>(Ue(t),Ke(Math.fround(t.value)))),"Math:hypot":be(([t])=>{yh(t);const r=[];for(const e of t.value)Ue(e),r.push(e.value);return Ke(Math.hypot(...r))}),"Math:imul":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.imul(t.value,r.value)))),"Math:log":be(([t])=>(Ue(t),Ke(Math.log(t.value)))),"Math:log1p":be(([t])=>(Ue(t),Ke(Math.log1p(t.value)))),"Math:log10":be(([t])=>(Ue(t),Ke(Math.log10(t.value)))),"Math:log2":be(([t])=>(Ue(t),Ke(Math.log2(t.value)))),"Math:max":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.max(t.value,r.value)))),"Math:min":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.min(t.value,r.value)))),"Math:pow":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.pow(t.value,r.value)))),"Math:round":be(([t])=>(Ue(t),Ke(Math.round(t.value)))),"Math:sign":be(([t])=>(Ue(t),Ke(Math.sign(t.value)))),"Math:sin":be(([t])=>(Ue(t),Ke(Math.sin(t.value)))),"Math:sinh":be(([t])=>(Ue(t),Ke(Math.sinh(t.value)))),"Math:sqrt":be(([t])=>{Ue(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Tr("Invalid operation.");return Ke(r)}),"Math:tan":be(([t])=>(Ue(t),Ke(Math.tan(t.value)))),"Math:tanh":be(([t])=>(Ue(t),Ke(Math.tanh(t.value)))),"Math:trunc":be(([t])=>(Ue(t),Ke(Math.trunc(t.value)))),"Math:rnd":be(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ke(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ke(Math.random())),"Math:gen_rng":be(([t])=>{if(Fi(t),t.type!=="num"&&t.type!=="str")return or;const r=fo(t.value.toString());return be(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ke(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ke(r()))}),"Num:to_hex":be(([t])=>(Ue(t),Fr(t.value.toString(16)))),"Num:from_hex":be(([t])=>(Ms(t),Ke(parseInt(t.value,16)))),"Str:lf":Fr(`
`),"Str:lt":be(([t,r])=>(Ms(t),Ms(r),t.value<r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:gt":be(([t,r])=>(Ms(t),Ms(r),t.value>r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:from_codepoint":be(([t])=>(Ue(t),Fr(String.fromCodePoint(t.value)))),"Obj:keys":be(([t])=>(tf(t),wn(Array.from(t.value.keys()).map(r=>Fr(r))))),"Obj:vals":be(([t])=>(tf(t),wn(Array.from(t.value.values())))),"Obj:kvs":be(([t])=>(tf(t),wn(Array.from(t.value.entries()).map(([r,e])=>wn([Fr(r),e]))))),"Obj:get":be(([t,r])=>(tf(t),Ms(r),t.value.get(r.value)??or)),"Obj:set":be(([t,r,e])=>(tf(t),Ms(r),Fi(e),t.value.set(r.value,e),or)),"Obj:has":be(([t,r])=>(tf(t),Ms(r),Qf(t.value.has(r.value)))),"Obj:copy":be(([t])=>(tf(t),Vv(new Map(t.value)))),"Async:interval":be(async([t,r,e],n)=>{Ue(t),ff(r),e&&(ua(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),be(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":be(async([t,r],e)=>{Ue(t),ff(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),be(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},cd={num:{to_str:t=>be(async(r,e)=>Fr(t.value.toString()))},str:{to_num:t=>be(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?or:Ke(n)}),len:t=>Ke(co(t.value)),replace:t=>be(async([r,e],n)=>(Ms(r),Ms(e),Fr(t.value.split(r.value).join(e.value)))),index_of:t=>be(async([r],e)=>(Ms(r),Ke(po(t.value,r.value)))),incl:t=>be(async([r],e)=>(Ms(r),t.value.includes(r.value)?Hi:Mi)),trim:t=>be(async(r,e)=>Fr(t.value.trim())),upper:t=>be(async(r,e)=>Fr(t.value.toUpperCase())),lower:t=>be(async(r,e)=>Fr(t.value.toLowerCase())),split:t=>be(async([r],e)=>(r&&Ms(r),wn(r?t.value.split(r?r.value:"").map(n=>Fr(n)):zs(t.value).map(n=>Fr(n))))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),Fr(ho(t.value,r.value,e.value)))),pick:t=>be(async([r],e)=>{Ue(r);const v=zs(t.value)[r.value];return v?Fr(v):or}),codepoint_at:t=>be(([r],e)=>{Ue(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?or:Ke(n)})},arr:{len:t=>Ke(t.value.length),push:t=>be(async([r],e)=>(Fi(r),t.value.push(r),t)),unshift:t=>be(async([r],e)=>(Fi(r),t.value.unshift(r),t)),pop:t=>be(async(r,e)=>t.value.pop()??or),shift:t=>be(async(r,e)=>t.value.shift()??or),concat:t=>be(async([r],e)=>(yh(r),wn(t.value.concat(r.value)))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),wn(t.value.slice(r.value,e.value)))),join:t=>be(async([r],e)=>(r&&Ms(r),Fr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>be(async([r],e)=>{ff(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Ke(w)]));return wn(await Promise.all(n))}),filter:t=>be(async([r],e)=>{ff(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Ke(v)]);ua(_),_.value&&n.push(w)}return wn(n)}),reduce:t=>be(async([r,e],n)=>{ff(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Ke(_)])}return w}),find:t=>be(async([r],e)=>{ff(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Ke(n)]);if(ua(w),w.value)return v}return or}),incl:t=>be(async([r],e)=>(Fi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Mi:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Hi:Mi)),reverse:t=>be(async(r,e)=>(t.value.reverse(),or)),copy:t=>be(async(r,e)=>wn([...t.value])),sort:t=>be(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);Ue(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return ff(r),yh(t),t.value=await n(t.value,r),t})},error:{name:t=>Fr(t.value),info:t=>t.info??or}};function gA(t,r){if(Object.hasOwn(cd,t.type)){const e=cd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Tr(`No such prop (${r}) in ${t.type}.`)}else throw new Tr(`Cannot read prop of ${t.type}. (reading ${r})`)}const dA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ga=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const tw=300,yA=tw-1;let En=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:be(([v])=>{Fi(v),this.opts.out&&this.opts.out(v)}),readline:be(async v=>{const w=v[0];if(Ms(w),this.opts.in==null)return or;const _=await this.opts.in(w.value);return Fr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...vA,...n}).map(([v,w])=>[v,dA.const(w)])),this.scope=new Zu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),ew("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ih?this.opts.err(r):this.opts.err(new lA(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??or;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return pA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return or;if(this.stepCount%tw===yA&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Tr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);ff(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(ua(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(ua(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return or}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(rv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):or}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return or}case"for":{if(r.times){const n=await this._eval(r.times,e);Ue(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ue(n),Ue(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ke(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return or}case"each":{const n=await this._eval(r.items,e);yh(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return or}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),or}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),or}case"addAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,Ke(n.value+v.value)),or}case"subAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,Ke(n.value-v.value)),or}case"null":return or;case"bool":return Qf(r.value);case"num":return Ke(r.value);case"str":return Fr(r.value);case"arr":return wn(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Vv(n)}case"prop":{const n=await this._eval(r.target,e);return fp(n)?n.value.has(r.name)?n.value.get(r.name):or:gA(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(od(n)){Ue(v);const w=n.value[v.value];if(w===void 0)throw new uA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(fp(n))return Ms(v),n.value.has(v.value)?n.value.get(v.value):or;throw new Tr(`Cannot read prop (${jo(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return ua(n),Qf(!n.value)}case"fn":return fA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Qf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=jo(w)}return Fr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),oA(n)}case"break":return this.log("block:break",{scope:e.name}),cA();case"continue":return this.log("block:continue",{scope:e.name}),hA();case"ns":return or;case"meta":return or;case"and":{const n=await this._eval(r.left,e);if(ua(n),n.value){const v=await this._eval(r.right,e);return ua(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(ua(n),n.value)return n;{const v=await this._eval(r.right,e);return ua(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=or;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(od(v))Ue(w),v.value[w.value]=n;else if(fp(v))Ms(w),v.value.set(w.value,n);else throw new Tr(`Cannot read prop (${jo(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);tf(v),v.value.set(e.name,n)}else throw new Tr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ga([vs],En.prototype,"exec",null);ga([vs],En.prototype,"execFn",null);ga([vs],En.prototype,"execFnSimple",null);ga([vs],En.prototype,"handleError",null);ga([vs],En.prototype,"log",null);ga([vs],En.prototype,"collectNs",null);ga([vs],En.prototype,"collectNsMember",null);ga([vs],En.prototype,"_fn",null);ga([vs],En.prototype,"_eval",null);ga([vs],En.prototype,"_run",null);ga([vs],En.prototype,"registerAbortHandler",null);ga([vs],En.prototype,"unregisterAbortHandler",null);ga([vs],En.prototype,"abort",null);ga([vs],En.prototype,"assign",null);ga([vs],En,"collectMetadata",null);function wA(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Xf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Xf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}wA(Xf,Error);function op(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Xf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=op("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+op("",v.column-1," ")+op("",H,"^")}else r+=`
 at `+_}return r};Xf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function hd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:sn,Main:Kr},w=sn,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",rr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Ee="eval",Ie="exists",Ae="`",Pe='"',$e="'",Je='\\"',rt="\\'",Ye="true",Qe="false",it="null",_t=";",dt="@",Ct="@(",Pt=`\r
`,ot=/^[A-Z0-9_:]/i,ks=/^[^`{]/,as=/^[{}`]/,Xr=/^[+\-]/,xt=/^[1-9]/,It=/^[0-9]/,yn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,sr=/^[ \t]/,Dt=Ds(),Br=pe("//",!1),Sn=pe("/*",!1),kt=pe("*/",!1),ut=pe("(",!1),kr=pe(")",!1),qt=pe("::",!1),st=pe("{",!1),Lt=pe("}",!1),ms=pe("###",!1),Ht=pe("let",!1),Ut=pe(":",!1),qr=pe("=",!1),Fa=pe("var",!1),Mr=pe("<:",!1),is=pe("#[",!1),Ns=pe("]",!1),ft=pe("each",!1),Ot=pe(",",!1),Ks=pe("for",!1),Er=pe("return",!1),Sr=er([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=pe("loop",!1),Oa=pe("break",!1),Ji=pe("continue",!1),Zi=pe("+=",!1),Ta=pe("-=",!1),Ia=pe("\\",!1),Qi=pe("||",!1),Xi=pe("&&",!1),Yi=pe("==",!1),el=pe("!=",!1),Nn=pe("<=",!1),Vs=pe(">=",!1),Fn=pe("<",!1),ja=pe(">",!1),tl=pe("+",!1),Ra=pe("-",!1),Fs=pe("*",!1),rl=pe("^",!1),sl=pe("/",!1),nl=pe("%",!1),$s=pe("!",!1),Os=pe("[",!1),On=pe(".",!1),Ws=pe("if",!1),Gs=pe("elif",!1),al=pe("else",!1),Js=pe("match",!1),ls=pe("=>",!1),Ts=pe("eval",!1),xr=pe("exists",!1),Zs=pe("`",!1),Qs=er(["`","{"],!0,!1),Xs=er(["{","}","`"],!1,!1),us=pe('"',!1),Ys=pe("'",!1),Is=pe('\\"',!1),Da=pe("\\'",!1),Yt=er(["+","-"],!1,!1),La=er([["1","9"]],!1,!1),dr=er([["0","9"]],!1,!1),il=pe("true",!1),en=pe("false",!1),ll=pe("null",!1),js=pe(";",!1),ul=pe("@",!1),Tn=pe("@(",!1),fl=er([["A","Z"],"_"],!1,!0),Ha=er([["A","Z"],["0","9"],"_"],!1,!0),ol=pe(`\r
`,!1),cl=er(["\r",`
`],!1,!1),Ua=er([" ","	","\r",`
`],!1,!1),hl=er([" ","	"],!1,!1),Ba=function(s){return s.join("")},pl=function(){return le()},qa=function(){return le()},vl=function(){return""},za=function(){return""},gl=function(s){return s??[]},In=function(s,u){return u},dl=function(s,u){return[s,...u]},jn=function(s,u){return u},yl=function(s,u){return[s,...u]},Ka=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},Cl=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},_l=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Va=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s,u){return p("for",{times:s,for:u})},Tl=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Rn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Wa=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Ga=function(s,u){return{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},Dn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},zl=function(s){return p("propChain",{name:s})},Kl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ja=function(s,u){return{cond:s,then:u}},Za=function(s){return s},Qa=function(s,u,d){return{q:u,a:d}},Xa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Ya=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},ei=function(s){return s.join("")},ti=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ri=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},si=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},ni=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ai=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ii=function(){return p("null",{})},Ln=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},Hn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},li=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},ui=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},fi=function(s){return s},lu=function(s){return p("arr",{value:s})},oi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},tn=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},zr=function(s){return p("block",{statements:s??[]})},f=0,Y=0,O=[{line:1,column:1}],j=0,bt=[],F=0,q={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function le(){return t.substring(Y,f)}function D(){return rn(Y,f)}function uu(s,u){throw u=u!==void 0?u:rn(Y,f),bs(s,u)}function pe(s,u){return{type:"literal",text:s,ignoreCase:u}}function er(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function ci(s){var u=O[s],d;if(u)return u;for(d=s-1;!O[d];)d--;for(u=O[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return O[s]=u,u}function rn(s,u,d){var h=ci(s),x=ci(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return d&&n&&typeof n.offset=="function"&&(m.start=n.offset(m.start),m.end=n.offset(m.end)),m}function R(s){f<j||(f>j&&(j=f,bt=[]),bt.push(s))}function bs(s,u){return new Xf(s,null,null,u)}function Un(s,u,d){return new Xf(Xf.buildMessage(s,u),s,u,d)}function sn(){var s,u,d,h=f*77+0,x=q[h];if(x)return f=x.nextPos,x.result;for(s=f,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ba(u),s=u,q[h]={nextPos:f,result:s},s}function As(){var s,u,d=f*77+1,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=un(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=f,u=Zn(),u!==e&&(Y=s,u=qa()),s=u,s===e&&(s=et(),s===e&&(t.length>f?(s=t.charAt(f),f++):(s=e,F===0&&R(Dt))))),q[d]={nextPos:f,result:s},s)}function et(){var s,u,d,h,x,m,C=f*77+2,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,2)===_?(u=_,f+=2):(u=e,F===0&&R(Br)),u!==e){for(d=[],h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=vl()}else f=s,s=e;if(s===e)if(s=f,t.substr(f,2)===P?(u=P,f+=2):(u=e,F===0&&R(Sn)),u!==e){for(d=[],h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);t.substr(f,2)===E?(h=E,f+=2):(h=e,F===0&&R(kt)),h!==e?(Y=s,s=za()):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Kr(){var s,u,d,h,x,m=f*77+3,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();for(d=nn(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),q[m]={nextPos:f,result:s},s}function nn(){var s,u,d,h,x,m,C,A,M=f*77+4,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Xe(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=dl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Nr(){var s,u,d,h,x,m,C,A,M=f*77+5,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=fs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=yl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function br(){var s,u,d,h,x,m,C,A,M=f*77+6,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Cs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=Ka(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=Ka(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=wl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Xe(){var s,u=f*77+7,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=fu(),s===e&&(s=Cs())),q[u]={nextPos:f,result:s},s)}function fs(){var s,u=f*77+8,d=q[u];return d?(f=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=pi())),q[u]={nextPos:f,result:s},s)}function Cs(){var s,u=f*77+9,d=q[u];return d?(f=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=ou(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Wr(),s===e&&(s=gi(),s===e&&(s=pu(),s===e&&(s=di(),s===e&&(s=Gr(),s===e&&(s=Bn(),s===e&&(s=Ve()))))))))))),q[u]={nextPos:f,result:s},s)}function Ve(){var s,u=f*77+10,d=q[u];return d?(f=d.nextPos,d.result):(s=yi(),s===e&&(s=Ls()),q[u]={nextPos:f,result:s},s)}function Ls(){var s,u=f*77+11,d=q[u];return d?(f=d.nextPos,d.result):(s=$i(),s===e&&(s=wu(),s===e&&(s=wi(),s===e&&(s=hi()))),q[u]={nextPos:f,result:s},s)}function hi(){var s,u,d,h,x,m,C=f*77+12,A=q[C];if(A)return f=A.nextPos,A.result;if(s=ln(),s===e&&(s=Vn(),s===e&&(s=Wn(),s===e&&(s=un(),s===e&&(s=Zn(),s===e&&(s=Ai(),s===e&&(s=ta(),s===e&&(s=sa(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=zn(),s===e&&(s=Gn(),s===e))))))))))))if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=ml(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Vr(){var s,u=f*77+13,d=q[u];return d?(f=d.nextPos,d.result):(s=Ai(),s===e&&(s=Zn(),s===e&&(s=ta(),s===e&&(s=_s(),s===e&&(s=nr(),s===e&&(s=sa()))))),q[u]={nextPos:f,result:s},s)}function pi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+14,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===H?(u=H,f+=2):(u=e,F===0&&R(qt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(f)===123?(m=B,f++):(m=e,F===0&&R(st)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Nr(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(f)===125?(I=J,f++):(I=e,F===0&&R(Lt)),I!==e?(Y=s,s=$l(h,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function fu(){var s,u,d,h,x,m,C=f*77+15,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Vr(),m!==e?(Y=s,s=xl(h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Vr(),h!==e?(Y=s,s=bl(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vi(){var s,u,d,h,x,m,C,A,M,I=f*77+16,U=q[I];if(U)return f=U.nextPos,U.result;if(s=f,t.substr(f,3)===ue?(u=ue,f+=3):(u=e,F===0&&R(Ht)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=ke,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Al(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===G?(u=G,f+=3):(u=e,F===0&&R(Fa)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=ke,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Cl(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[I]={nextPos:f,result:s},s}function ou(){var s,u,d,h,x=f*77+17,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,2)===V?(u=V,f+=2):(u=e,F===0&&R(Mr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=_l(h)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function cu(){var s,u,d,h,x,m,C,A=f*77+18,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,2)===Q?(u=Q,f+=2):(u=e,F===0&&R(is)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ne(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();for(C=Vr(),C!==e?x=C:(f=x,x=e),x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();t.charCodeAt(f)===93?(C=X,f++):(C=e,F===0&&R(Ns)),C!==e?(Y=s,s=Pl(h,x)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+19,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.substr(f,4)===Z?(u=Z,f+=4):(u=e,F===0&&R(ft)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ne(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Ot)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(f)===41?(K=T,f++):(K=e,F===0&&R(kr)),K!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(Y=s,s=kl(C,U,Fe)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,4)===Z?(u=Z,f+=4):(u=e,F===0&&R(ft)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=Ve(),I!==e){if(U=[],K=l(),K!==e)for(;K!==e;)U.push(K),K=l();else U=e;U!==e?(K=b(),K!==e?(Y=s,s=Ml(m,I,K)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function gi(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt=f*77+20,gt=q[vt];if(gt)return f=gt.nextPos,gt.result;if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ne(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=f,t.charCodeAt(f)===61?(I=ke,f++):(I=e,F===0&&R(qr)),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();K=Ve(),K!==e?(Y=M,M=El(C,K)):(f=M,M=e)}else f=M,M=e;for(M===e&&(M=null),t.charCodeAt(f)===44?(I=ee,f++):(I=e,F===0&&R(Ot)),I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();if(K=Ve(),K!==e)if(t.charCodeAt(f)===41?(se=T,f++):(se=e,F===0&&R(kr)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();ve=b(),ve!==e?(Y=s,s=Sl(C,M,K,ve)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(A=f,t.charCodeAt(f)===61?(M=ke,f++):(M=e,F===0&&R(qr)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(f=A,A=e)}else f=A,A=e;for(A===e&&(A=null),t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Ot)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(K=[],se=l(),se!==e)for(;se!==e;)K.push(se),se=l();else K=e;K!==e?(se=b(),se!==e?(Y=s,s=Va(m,A,U,se)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===ie?(u=ie,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Ol(h,m)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e}}return q[vt]={nextPos:f,result:s},s}function hu(){var s,u,d,h,x,m=f*77+21,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,6)===ae?(u=ae,f+=6):(u=e,F===0&&R(Er)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Tl(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function pu(){var s,u,d,h,x,m,C,A,M=f*77+22,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Me?(u=Me,f+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Il(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function di(){var s,u,d,h,x=f*77+23,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Te?(u=Te,f+=5):(u=e,F===0&&R(Oa)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=jl()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Gr(){var s,u,d,h,x=f*77+24,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,8)===_e?(u=_e,f+=8):(u=e,F===0&&R(Ji)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=Rn()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Bn(){var s,u,d,h,x,m,C=f*77+25,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(f,2)===at?(h=at,f+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(f,2)===pt?(h=pt,f+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(f)===61?(h=ke,f++):(h=e,F===0&&R(qr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function yi(){var s,u,d,h,x,m,C,A,M=f*77+26,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Ls(),u!==e){for(d=[],h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(f=h,h=e)}else f=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(f=h,h=e)}else f=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(f=s,s=e)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Jr(){var s,u,d,h=f*77+27,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=tr,f++):(u=e,F===0&&R(Ia)),u!==e?(d=y(),d!==e?(u=[u,d],s=u):(f=s,s=e)):(f=s,s=e),s===e&&(s=$()),q[h]={nextPos:f,result:s},s)}function qn(){var s,u,d=f*77+28,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===$t?(u=$t,f+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(f,2)===wt?(u=wt,f+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(f,2)===Ze?(u=Ze,f+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(f,2)===mt?(u=mt,f+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(f,2)===Jt?(u=Jt,f+=2):(u=e,F===0&&R(Nn)),u===e&&(t.substr(f,2)===Zt?(u=Zt,f+=2):(u=e,F===0&&R(Vs)),u===e&&(t.charCodeAt(f)===60?(u=ht,f++):(u=e,F===0&&R(Fn)),u===e&&(t.charCodeAt(f)===62?(u=Ir,f++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(f)===43?(u=Qt,f++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(f)===45?(u=Pr,f++):(u=e,F===0&&R(Ra)),u===e&&(t.charCodeAt(f)===42?(u=Bt,f++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(f)===94?(u=Ar,f++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(f)===47?(u=Ur,f++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(f)===37?(u=rr,f++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,q[d]={nextPos:f,result:s},s)}function zn(){var s,u,d,h=f*77+29,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===33?(u=jr,f++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function wi(){var s,u,d,h,x=f*77+30,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,u=hi(),u!==e){if(d=[],h=Kn(),h===e&&(h=mi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Kn(),h===e&&(h=mi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Ga(u,d)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Kn(){var s,u,d,h,x,m,C=f*77+31,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=Ul(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vu(){var s,u,d,h,x,m,C=f*77+32,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);Y=s,s=Bl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function mi(){var s,u,d,h,x,m,C=f*77+33,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Hs(){var s,u,d,h=f*77+34,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===46?(u=$r,f++):(u=e,F===0&&R(On)),u!==e?(d=ne(),d!==e?(Y=s,s=zl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function $i(){var s,u,d,h,x,m,C,A,M,I,U=f*77+35,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===W?(u=W,f+=2):(u=e,F===0&&R(Ws)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(C=f,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=xi(),M!==e?C=M:(f=C,C=e)):(f=C,C=e),C===e&&(C=null),A=f,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=gu(),I!==e?A=I:(f=A,A=e)):(f=A,A=e),A===e&&(A=null),Y=s,s=Kl(h,m,C,A)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function xi(){var s,u,d,h,x,m,C=f*77+36,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=an(),u!==e){for(d=[],h=f,x=[],m=l();m!==e;)x.push(m),m=l();for(m=an(),m!==e?h=m:(f=h,h=e);h!==e;){for(d.push(h),h=f,x=[],m=l();m!==e;)x.push(m),m=l();m=an(),m!==e?h=m:(f=h,h=e)}Y=s,s=Vl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function an(){var s,u,d,h,x,m,C,A=f*77+37,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,4)===re?(u=re,f+=4):(u=e,F===0&&R(Gs)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=b(),C!==e?(Y=s,s=Ja(x,C)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[A]={nextPos:f,result:s},s}function gu(){var s,u,d,h,x,m=f*77+38,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,4)===fe?(u=fe,f+=4):(u=e,F===0&&R(al)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Za(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function ln(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt,gt,mu=f*77+39,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.substr(f,5)===xe?(u=xe,f+=5):(u=e,F===0&&R(Js)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===123?(C=B,f++):(C=e,F===0&&R(st)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();Y=I,I=Qa(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();Y=I,I=Qa(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;else M=e;if(M!==e){if(I=f,t.charCodeAt(f)===42?(U=Bt,f++):(U=e,F===0&&R(Fs)),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();if(ve=b(),ve!==e){for(vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();I=ve}else f=I,I=e}else f=I,I=e}else f=I,I=e;for(I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();t.charCodeAt(f)===125?(K=J,f++):(K=e,F===0&&R(Lt)),K!==e?(Y=s,s=Xa(x,M,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function Vn(){var s,u,d,h,x,m,C,A,M=f*77+40,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Ee?(u=Ee,f+=4):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Wl(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Wn(){var s,u,d,h,x=f*77+41,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,6)===Ie?(u=Ie,f+=6):(u=e,F===0&&R(xr)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Gn(),h!==e?(Y=s,s=Gl(h)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Gn(){var s,u,d=f*77+42,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=o(),u!==e&&(Y=s,u=Ya(u)),s=u,q[d]={nextPos:f,result:s},s)}function un(){var s,u,d,h,x,m,C=f*77+43,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===96?(u=Ae,f++):(u=e,F===0&&R(Zs)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===96?(h=Ae,f++):(h=e,F===0&&R(Zs)),h!==e?(Y=s,s=Jl(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Jn(){var s,u,d,h,x,m,C=f*77+44,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?s=h:(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,u=[],d=fn(),d!==e)for(;d!==e;)u.push(d),d=fn();else u=e;u!==e&&(Y=s,u=ei(u)),s=u}return q[C]={nextPos:f,result:s},s}function fn(){var s,u=f*77+45,d=q[u];return d?(f=d.nextPos,d.result):(s=bi(),s===e&&(ks.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Qs))),q[u]={nextPos:f,result:s},s)}function bi(){var s,u,d,h=f*77+46,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=tr,f++):(u=e,F===0&&R(Ia)),u!==e?(as.test(t.charAt(f))?(d=t.charAt(f),f++):(d=e,F===0&&R(Xs)),d!==e?s=d:(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function Zn(){var s,u,d,h,x,m,C=f*77+47,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===34?(u=Pe,f++):(u=e,F===0&&R(us)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===34?(m=Pe,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===34?(m=Pe,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===34?(h=Pe,f++):(h=e,F===0&&R(us)),h!==e?(Y=s,s=Zl(d)):(f=s,s=e)}else f=s,s=e;if(s===e)if(s=f,t.charCodeAt(f)===39?(u=$e,f++):(u=e,F===0&&R(Ys)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ri(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ri(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===39?(h=$e,f++):(h=e,F===0&&R(Ys)),h!==e?(Y=s,s=Ql(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Qn(){var s,u,d=f*77+48,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===Je?(u=Je,f+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,q[d]={nextPos:f,result:s},s)}function Xn(){var s,u,d=f*77+49,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===rt?(u=rt,f+=2):(u=e,F===0&&R(Da)),u!==e&&(Y=s,u=si()),s=u,q[d]={nextPos:f,result:s},s)}function Ai(){var s,u=f*77+50,d=q[u];return d?(f=d.nextPos,d.result):(s=Yn(),s===e&&(s=ea()),q[u]={nextPos:f,result:s},s)}function Yn(){var s,u,d,h,x,m,C=f*77+51,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(La)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(f)===46?(h=$r,f++):(h=e,F===0&&R(On)),h!==e){if(x=[],It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(f)===46?(d=$r,f++):(d=e,F===0&&R(On)),d!==e){if(h=[],It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=ni()):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[C]={nextPos:f,result:s},s}function ea(){var s,u,d,h,x=f*77+52,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(La)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(f=s,s=e)}else f=s,s=e;return s===e&&(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(f=s,s=e)),q[x]={nextPos:f,result:s},s}function ta(){var s,u=f*77+53,d=q[u];return d?(f=d.nextPos,d.result):(s=du(),s===e&&(s=ra()),q[u]={nextPos:f,result:s},s)}function du(){var s,u,d,h,x=f*77+54,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===Ye?(u=Ye,f+=4):(u=e,F===0&&R(il)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ai()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function ra(){var s,u,d,h,x=f*77+55,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Qe?(u=Qe,f+=5):(u=e,F===0&&R(en)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ru()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function sa(){var s,u,d,h,x=f*77+56,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===it?(u=it,f+=4):(u=e,F===0&&R(ll)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ii()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+57,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=su(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function yu(){var s,u,d,h,x,m,C,A,M,I,U=f*77+58,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function na(){var s,u,d,h,x,m,C,A=f*77+59,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,u=ne(),u!==e){for(d=f,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=We(),C!==e?d=C:(f=d,d=e)}else f=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Ci(){var s,u,d,h,x,m,C=f*77+60,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=na(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=li(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function tt(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve,vt,gt,mu=f*77+61,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.charCodeAt(f)===64?(u=dt,f++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(f)===40?(m=N,f++):(m=e,F===0&&R(ut)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Ci(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(f)===41?(I=T,f++):(I=e,F===0&&R(kr)),I!==e){for(U=f,K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===58?(se=oe,f++):(se=e,F===0&&R(Ut)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();ve=We(),ve!==e?U=ve:(f=U,U=e)}else f=U,U=e;for(U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===123?(se=B,f++):(se=e,F===0&&R(st)),se!==e){for(Fe=[],ve=l();ve!==e;)Fe.push(ve),ve=l();for(ve=br(),ve===e&&(ve=null),vt=[],gt=l();gt!==e;)vt.push(gt),gt=l();t.charCodeAt(f)===125?(gt=J,f++):(gt=e,F===0&&R(Lt)),gt!==e?(Y=s,s=iu(d,h,x,A,U,ve)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function wu(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=f*77+62,ve=q[Fe];if(ve)return f=ve.nextPos,ve.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(Tn)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ci(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=f,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===58?(M=oe,f++):(M=e,F===0&&R(Ut)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?C=U:(f=C,C=e)}else f=C,C=e;for(C===e&&(C=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===123?(M=B,f++):(M=e,F===0&&R(st)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=br(),U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();t.charCodeAt(f)===125?(se=J,f++):(se=e,F===0&&R(Lt)),se!==e?(Y=s,s=ui(h,C,U)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[Fe]={nextPos:f,result:s},s}function _s(){var s,u,d,h,x,m,C,A,M,I,U=f*77+63,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=fi(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=fi(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=X,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function nr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Fe,ve=f*77+64,vt=q[ve];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=oi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ne(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Ot)),K===e&&(t.charCodeAt(f)===59?(K=_t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Y=x,x=oi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=c(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function We(){var s,u=f*77+65,d=q[u];return d?(f=d.nextPos,d.result):(s=_i(),s===e&&(s=je()),q[u]={nextPos:f,result:s},s)}function _i(){var s,u,d,h,x,m,C,A,M,I,U=f*77+66,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(Tn)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=T,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.substr(f,2)===ce?(A=ce,f+=2):(A=e,F===0&&R(ls)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function k(){var s,u,d,h,x,m,C=f*77+67,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=We(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=xs(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function je(){var s,u,d,h,x,m,C,A,M=f*77+68,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=ne(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(f)===60?(h=ht,f++):(h=e,F===0&&R(Fn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(C=[],A=$();A!==e;)C.push(A),A=$();t.charCodeAt(f)===62?(A=Ir,f++):(A=e,F===0&&R(ja)),A!==e?(Y=s,s=yr(u,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return s===e&&(s=f,u=ne(),u!==e&&(Y=s,u=tn(u)),s=u),q[M]={nextPos:f,result:s},s}function ne(){var s,u,d,h,x=f*77+69,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,yn.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(fl)),u!==e){for(d=[],gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Ha));h!==e;)d.push(h),gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Ha));Y=s,s=i()}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function o(){var s,u,d,h,x,m,C=f*77+70,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=ne(),u!==e){for(d=[],h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=S()}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function g(){var s,u,d,h,x,m=f*77+71,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(f)===44?(d=ee,f++):(d=e,F===0&&R(Ot)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else f=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return q[m]={nextPos:f,result:s},s}function b(){var s,u,d,h,x,m,C=f*77+72,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=br(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?(Y=s,s=zr(h)):(f=s,s=e)}else f=s,s=e;return s===e&&(s=Cs()),q[C]={nextPos:f,result:s},s}function y(){var s,u=f*77+73,d=q[u];return d?(f=d.nextPos,d.result):(t.substr(f,2)===Pt?(s=Pt,f+=2):(s=e,F===0&&R(ol)),s===e&&(Vi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(cl))),q[u]={nextPos:f,result:s},s)}function a(){var s,u,d=f*77+74,h=q[d];return h?(f=h.nextPos,h.result):(s=f,F++,t.length>f?(u=t.charAt(f),f++):(u=e,F===0&&R(Dt)),F--,u===e?s=void 0:(f=s,s=e),s===e&&(s=y()),q[d]={nextPos:f,result:s},s)}function l(){var s,u=f*77+75,d=q[u];return d?(f=d.nextPos,d.result):(Wi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Ua)),q[u]={nextPos:f,result:s},s)}function $(){var s,u=f*77+76,d=q[u];return d?(f=d.nextPos,d.result):(sr.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(hl)),q[u]={nextPos:f,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=w(),Rs!==e&&f===t.length)return Rs;throw Rs!==e&&f<t.length&&R(L()),Un(bt,j<t.length?t.charAt(j):null,j<t.length?rn(j,j+1):rn(j,j))}const mA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function $A(t){return mA.includes(t.type)}function rw(t){return"chain"in t&&t.chain!==null}function xA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function bA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function AA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Nt(e.expr,r);break}case"return":{e.expr=Nt(e.expr,r);break}case"each":{e.items=Nt(e.items,r),e.for=Nt(e.for,r);break}case"for":{e.from!=null&&(e.from=Nt(e.from,r)),e.to!=null&&(e.to=Nt(e.to,r)),e.times!=null&&(e.times=Nt(e.times,r)),e.for=Nt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Nt(e.expr,r),e.dest=Nt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Nt(e.operands[n],r);break}case"not":{e.expr=Nt(e.expr,r);break}case"if":{e.cond=Nt(e.cond,r),e.then=Nt(e.then,r);for(const n of e.elseif)n.cond=Nt(n.cond,r),n.then=Nt(n.then,r);e.else!=null&&(e.else=Nt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Nt(e.children[n],r);break}case"match":{e.about=Nt(e.about,r);for(const n of e.qs)n.q=Nt(n.q,r),n.a=Nt(n.a,r);e.default!=null&&(e.default=Nt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"exists":{e.identifier=Nt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Nt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Nt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Nt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"indexChain":{e.index=Nt(e.index,r);break}case"call":{e.target=Nt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"index":{e.target=Nt(e.target,r),e.index=Nt(e.index,r);break}case"prop":{e.target=Nt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Nt(e.members[n],r);break}case"or":case"and":{e.left=Nt(e.left,r),e.right=Nt(e.right,r);break}}if(rw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Nt(e.chain[n],r);return e}const cp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function hp(t){throw new ao(`Reserved word "${t}" cannot be used as variable name.`)}function CA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{cp.includes(t.name)&&hp(t.name);break}case"meta":{t.name!=null&&cp.includes(t.name)&&hp(t.name);break}case"fn":{for(const r of t.args)cp.includes(r.name)&&hp(r.name);break}}return t}function _A(t){for(const r of t)Nt(r,CA);return t}function pd(t){return{type:"simple",name:t}}function PA(t,r){return{type:"generic",name:t,inners:r}}function kA(t,r){return{type:"fn",args:t,result:r}}function Zc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Zc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Zc(n)).join(", "),e=Zc(t.result);return`@(${r}) { ${e} }`}}}function Ro(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return pd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ro(t.inner):r=pd("any"),PA(t.name,[r])}}throw new ao(`Unknown type: '${Zc(t)}'`)}else{const r=t.args.map(e=>Ro(e));return kA(r,Ro(t.result))}}function MA(t){switch(t.type){case"def":{t.varType!=null&&Ro(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ro(r.argType);t.retType!=null&&Ro(t.retType);break}}return t}function EA(t){for(const r of t)Nt(r,MA);return t}function Qc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Qc(n.expr.children)),r.push(n);else{if(e.length>0)throw new ao("invalid attribute.");switch(n.type){case"fn":{n.children=Qc(n.children);break}case"block":{n.statements=Qc(n.statements);break}}r.push(n)}if(e.length>0)throw new ao("invalid attribute.");return r}function SA(t){if($A(t)&&rw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=xA(n,v.args,v.loc);break}case"indexChain":{n=bA(n,v.index,v.loc);break}case"propChain":{n=AA(n,v.name,v.loc);break}}return n}return t}function NA(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],SA);return t}function Xc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function sw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Xc(t,r,e);{const{left:n,right:v,info:w}=t;return Xc(n,sw(v,r,e),w)}}function jf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[jf(t.left),jf(t.right)]}}const FA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:jf(t.left),right:jf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:jf(t.left),right:jf(t.right)}),priority:3}};function OA(t){const r=t.operators.map(n=>{const v=FA[n];if(v==null)throw new ao(`No such operator: ${n}.`);return v});let e=Xc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=sw(e,t.operands[2+n],r[1+n]);return jf(e)}function TA(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],e=>e.type==="infix"?OA(e):e);return t}var Ru;let IA=(Ru=class{constructor(){he(this,"plugins");this.plugins={validate:[_A,EA],transform:[Qc,NA,TA]}}static parse(r){return Ru.instance==null&&(Ru.instance=new Ru),Ru.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=hd(r,{startRule:"Preprocess"});e=hd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ao(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new ao(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Ru,"instance"),Ru);const jA="0.16.0",RA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let iv=[],Xo=null;function DA(t){return iv=IA.parse(t),JSON.stringify(iv,null,"	")}async function LA(t){Xo==null||Xo.abort(),Xo=new En({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:sv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:sv(e.val,!0),print:!1});break}}});try{await Xo.exec(iv)}catch(r){t.err(r)}}const HA=Object.freeze(Object.defineProperty({__proto__:null,exec:LA,parse:DA,samples:RA,version:jA},Symbol.toStringTag,{value:"Module"}));function Yc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yc=function(e){return typeof e}:Yc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function nw(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Yc(n)));var v=!1;return{configurable:!0,get:function(){if(v||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var _=n.bind(this);return v=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return _},set:function(E){n=E,delete this[r]}}),v=!1,_},set:function(_){n=_}}}function UA(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,nw(t,e,n))}}),t}function Rt(){return arguments.length===1?UA.apply(void 0,arguments):nw.apply(void 0,arguments)}let aw=class iw extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,iw)}},io=class extends aw{constructor(r,e){super(r,e)}},Lr=class extends aw{constructor(r,e){super(r,e)}},BA=class extends Lr{constructor(r,e){super(r,e)}};var vo=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Af=class lw{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new lw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Lr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};vo([Rt],Af.prototype,"log",null);vo([Rt],Af.prototype,"onUpdated",null);vo([Rt],Af.prototype,"createChildScope",null);vo([Rt],Af.prototype,"get",null);vo([Rt],Af.prototype,"getAll",null);vo([Rt],Af.prototype,"add",null);vo([Rt],Af.prototype,"assign",null);let Oc;const qA=new Uint8Array(16);function zA(){if(!Oc&&(Oc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oc(qA)}const cn=[];for(let t=0;t<256;++t)cn.push((t+256).toString(16).slice(1));function KA(t,r=0){return(cn[t[r+0]]+cn[t[r+1]]+cn[t[r+2]]+cn[t[r+3]]+"-"+cn[t[r+4]]+cn[t[r+5]]+"-"+cn[t[r+6]]+cn[t[r+7]]+"-"+cn[t[r+8]]+cn[t[r+9]]+"-"+cn[t[r+10]]+cn[t[r+11]]+cn[t[r+12]]+cn[t[r+13]]+cn[t[r+14]]+cn[t[r+15]]).toLowerCase()}const VA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vd={randomUUID:VA};function WA(t,r,e){if(vd.randomUUID&&!r&&!t)return vd.randomUUID();t=t||{};const n=t.random||(t.rng||zA)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return KA(n)}const Cr={type:"null"},Ui={type:"bool",value:!0},Ei={type:"bool",value:!1},Ge=t=>({type:"num",value:t}),Rr=t=>({type:"str",value:t}),Do=t=>({type:"bool",value:t}),Wv=t=>({type:"obj",value:t}),mn=t=>({type:"arr",value:t}),GA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ce=t=>({type:"fn",native:t}),JA=t=>({type:"return",value:t}),ZA=()=>({type:"break",value:null}),QA=()=>({type:"continue",value:null}),XA=t=>t.type==="return"?t.value:t;function Oi(t){if(t==null)throw new Lr("Expect anything, but got nothing.")}function fa(t){if(t==null)throw new Lr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Lr(`Expect boolean, but got ${t.type}.`)}function of(t){if(t==null)throw new Lr("Expect function, but got nothing.");if(t.type!=="fn")throw new Lr(`Expect function, but got ${t.type}.`)}function Bs(t){if(t==null)throw new Lr("Expect string, but got nothing.");if(t.type!=="str")throw new Lr(`Expect string, but got ${t.type}.`)}function qe(t){if(t==null)throw new Lr("Expect number, but got nothing.");if(t.type!=="num")throw new Lr(`Expect number, but got ${t.type}.`)}function rf(t){if(t==null)throw new Lr("Expect object, but got nothing.");if(t.type!=="obj")throw new Lr(`Expect object, but got ${t.type}.`)}function Lo(t){if(t==null)throw new Lr("Expect array, but got nothing.");if(t.type!=="arr")throw new Lr(`Expect array, but got ${t.type}.`)}function YA(t){return t.type==="str"}function e2(t){return t.type==="num"}function t2(t){return t.type==="obj"}function r2(t){return t.type==="arr"}function lv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function uv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>uv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function fv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>fv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=fv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ov(t){if(t===null)return Cr;if(typeof t=="boolean")return Do(t);if(typeof t=="string")return Rr(t);if(typeof t=="number")return Ge(t);if(Array.isArray(t))return mn(t.map(r=>ov(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ov(n));return Wv(r)}return Cr}const s2={help:Rr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Rr("0.14.1"),"Core:ai":Rr("kawaii"),"Core:not":Ce(([t])=>(fa(t),t.value?Ei:Ui)),"Core:eq":Ce(([t,r])=>(Oi(t),Oi(r),lv(t,r)?Ui:Ei)),"Core:neq":Ce(([t,r])=>(Oi(t),Oi(r),lv(t,r)?Ei:Ui)),"Core:and":Ce(([t,r])=>(fa(t),t.value?(fa(r),r.value?Ui:Ei):Ei)),"Core:or":Ce(([t,r])=>(fa(t),t.value?Ui:(fa(r),r.value?Ui:Ei))),"Core:add":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value+r.value))),"Core:sub":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value-r.value))),"Core:mul":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value*r.value))),"Core:pow":Ce(([t,r])=>{qe(t),qe(r);const e=t.value**r.value;if(isNaN(e))throw new Lr("Invalid operation.");return Ge(e)}),"Core:div":Ce(([t,r])=>{qe(t),qe(r);const e=t.value/r.value;if(isNaN(e))throw new Lr("Invalid operation.");return Ge(e)}),"Core:mod":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value%r.value))),"Core:gt":Ce(([t,r])=>(qe(t),qe(r),t.value>r.value?Ui:Ei)),"Core:lt":Ce(([t,r])=>(qe(t),qe(r),t.value<r.value?Ui:Ei)),"Core:gteq":Ce(([t,r])=>(qe(t),qe(r),t.value>=r.value?Ui:Ei)),"Core:lteq":Ce(([t,r])=>(qe(t),qe(r),t.value<=r.value?Ui:Ei)),"Core:type":Ce(([t])=>(Oi(t),Rr(t.type))),"Core:to_str":Ce(([t])=>(Oi(t),t.type==="str"?t:t.type==="num"?Rr(t.value.toString()):Rr("?"))),"Core:range":Ce(([t,r])=>(qe(t),qe(r),t.value<r.value?mn(Array.from({length:r.value-t.value+1},(e,n)=>Ge(n+t.value))):t.value>r.value?mn(Array.from({length:t.value-r.value+1},(e,n)=>Ge(t.value-n))):mn([t]))),"Util:uuid":Ce(()=>Rr(WA())),"Json:stringify":Ce(([t])=>(Oi(t),Rr(JSON.stringify(fv(t))))),"Json:parse":Ce(([t])=>(Bs(t),ov(JSON.parse(t.value)))),"Json:parsable":Ce(([t])=>{Bs(t);try{JSON.parse(t.value)}catch{return Do(!1)}return Do(!0)}),"Date:now":Ce(()=>Ge(Date.now())),"Date:year":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ce(([t])=>(Bs(t),Ge(new Date(t.value).getTime()))),"Math:Infinity":Ge(1/0),"Math:E":Ge(Math.E),"Math:LN2":Ge(Math.LN2),"Math:LN10":Ge(Math.LN10),"Math:LOG2E":Ge(Math.LOG2E),"Math:LOG10E":Ge(Math.LOG10E),"Math:PI":Ge(Math.PI),"Math:SQRT1_2":Ge(Math.SQRT1_2),"Math:SQRT2":Ge(Math.SQRT2),"Math:abs":Ce(([t])=>(qe(t),Ge(Math.abs(t.value)))),"Math:acos":Ce(([t])=>(qe(t),Ge(Math.acos(t.value)))),"Math:acosh":Ce(([t])=>(qe(t),Ge(Math.acosh(t.value)))),"Math:asin":Ce(([t])=>(qe(t),Ge(Math.asin(t.value)))),"Math:asinh":Ce(([t])=>(qe(t),Ge(Math.asinh(t.value)))),"Math:atan":Ce(([t])=>(qe(t),Ge(Math.atan(t.value)))),"Math:atanh":Ce(([t])=>(qe(t),Ge(Math.atanh(t.value)))),"Math:atan2":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.atan2(t.value,r.value)))),"Math:cbrt":Ce(([t])=>(qe(t),Ge(Math.cbrt(t.value)))),"Math:ceil":Ce(([t])=>(qe(t),Ge(Math.ceil(t.value)))),"Math:clz32":Ce(([t])=>(qe(t),Ge(Math.clz32(t.value)))),"Math:cos":Ce(([t])=>(qe(t),Ge(Math.cos(t.value)))),"Math:cosh":Ce(([t])=>(qe(t),Ge(Math.cosh(t.value)))),"Math:exp":Ce(([t])=>(qe(t),Ge(Math.exp(t.value)))),"Math:expm1":Ce(([t])=>(qe(t),Ge(Math.expm1(t.value)))),"Math:floor":Ce(([t])=>(qe(t),Ge(Math.floor(t.value)))),"Math:fround":Ce(([t])=>(qe(t),Ge(Math.fround(t.value)))),"Math:hypot":Ce(([t])=>{Lo(t);const r=[];for(const e of t.value)qe(e),r.push(e.value);return Ge(Math.hypot(...r))}),"Math:imul":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.imul(t.value,r.value)))),"Math:log":Ce(([t])=>(qe(t),Ge(Math.log(t.value)))),"Math:log1p":Ce(([t])=>(qe(t),Ge(Math.log1p(t.value)))),"Math:log10":Ce(([t])=>(qe(t),Ge(Math.log10(t.value)))),"Math:log2":Ce(([t])=>(qe(t),Ge(Math.log2(t.value)))),"Math:max":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.max(t.value,r.value)))),"Math:min":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.min(t.value,r.value)))),"Math:pow":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.pow(t.value,r.value)))),"Math:round":Ce(([t])=>(qe(t),Ge(Math.round(t.value)))),"Math:sign":Ce(([t])=>(qe(t),Ge(Math.sign(t.value)))),"Math:sin":Ce(([t])=>(qe(t),Ge(Math.sin(t.value)))),"Math:sinh":Ce(([t])=>(qe(t),Ge(Math.sinh(t.value)))),"Math:sqrt":Ce(([t])=>{qe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Lr("Invalid operation.");return Ge(r)}),"Math:tan":Ce(([t])=>(qe(t),Ge(Math.tan(t.value)))),"Math:tanh":Ce(([t])=>(qe(t),Ge(Math.tanh(t.value)))),"Math:trunc":Ce(([t])=>(qe(t),Ge(Math.trunc(t.value)))),"Math:rnd":Ce(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ge(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ge(Math.random())),"Math:gen_rng":Ce(([t])=>{if(Oi(t),t.type!=="num"&&t.type!=="str")return Cr;const r=fo(t.value.toString());return Ce(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ge(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ge(r()))}),"Num:to_hex":Ce(([t])=>(qe(t),Rr(t.value.toString(16)))),"Num:from_hex":Ce(([t])=>(Bs(t),Ge(parseInt(t.value,16)))),"Str:lf":Rr(`
`),"Str:lt":Ce(([t,r])=>(Bs(t),Bs(r),t.value<r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Str:gt":Ce(([t,r])=>(Bs(t),Bs(r),t.value>r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Obj:keys":Ce(([t])=>(rf(t),mn(Array.from(t.value.keys()).map(r=>Rr(r))))),"Obj:vals":Ce(([t])=>(rf(t),mn(Array.from(t.value.values())))),"Obj:kvs":Ce(([t])=>(rf(t),mn(Array.from(t.value.entries()).map(([r,e])=>mn([Rr(r),e]))))),"Obj:get":Ce(([t,r])=>(rf(t),Bs(r),t.value.get(r.value)??Cr)),"Obj:set":Ce(([t,r,e])=>(rf(t),Bs(r),Oi(e),t.value.set(r.value,e),Cr)),"Obj:has":Ce(([t,r])=>(rf(t),Bs(r),Do(t.value.has(r.value)))),"Obj:copy":Ce(([t])=>(rf(t),Wv(new Map(t.value)))),"Async:interval":Ce(async([t,r,e],n)=>{qe(t),of(r),e&&(fa(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),Ce(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":Ce(async([t,r],e)=>{qe(t),of(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),Ce(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},mo={num:{to_str:t=>Ce(async(r,e)=>Rr(t.value.toString()))},str:{to_num:t=>Ce(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Cr:Ge(n)}),len:t=>Ge(co(t.value)),replace:t=>Ce(async([r,e],n)=>(Bs(r),Bs(e),Rr(t.value.split(r.value).join(e.value)))),index_of:t=>Ce(async([r],e)=>(Bs(r),Ge(po(t.value,r.value)))),incl:t=>Ce(async([r],e)=>(Bs(r),t.value.includes(r.value)?Ui:Ei)),trim:t=>Ce(async(r,e)=>Rr(t.value.trim())),upper:t=>Ce(async(r,e)=>Rr(t.value.toUpperCase())),lower:t=>Ce(async(r,e)=>Rr(t.value.toLowerCase())),split:t=>Ce(async([r],e)=>(r&&Bs(r),mn(r?t.value.split(r?r.value:"").map(n=>Rr(n)):zs(t.value).map(n=>Rr(n))))),slice:t=>Ce(async([r,e],n)=>(qe(r),qe(e),Rr(ho(t.value,r.value,e.value)))),pick:t=>Ce(async([r],e)=>{qe(r);const v=zs(t.value)[r.value];return v?Rr(v):Cr})},arr:{len:t=>Ge(t.value.length),push:t=>Ce(async([r],e)=>(Oi(r),t.value.push(r),t)),unshift:t=>Ce(async([r],e)=>(Oi(r),t.value.unshift(r),t)),pop:t=>Ce(async(r,e)=>t.value.pop()??Cr),shift:t=>Ce(async(r,e)=>t.value.shift()??Cr),concat:t=>Ce(async([r],e)=>(Lo(r),mn(t.value.concat(r.value)))),slice:t=>Ce(async([r,e],n)=>(qe(r),qe(e),mn(t.value.slice(r.value,e.value)))),join:t=>Ce(async([r],e)=>(r&&Bs(r),Rr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Ce(async([r],e)=>{of(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Ge(w)]));return mn(await Promise.all(n))}),filter:t=>Ce(async([r],e)=>{of(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Ge(v)]);fa(_),_.value&&n.push(w)}return mn(n)}),reduce:t=>Ce(async([r,e],n)=>{of(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Ge(_)])}return w}),find:t=>Ce(async([r],e)=>{of(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Ge(n)]);if(fa(w),w.value)return v}return Cr}),incl:t=>Ce(async([r],e)=>(Oi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ei:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Ui:Ei)),reverse:t=>Ce(async(r,e)=>(t.value.reverse(),Cr)),copy:t=>Ce(async(r,e)=>mn([...t.value])),sort:t=>Ce(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);qe(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return of(r),Lo(t),t.value=await n(t.value,r),t})}};var ji=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const uw=300,n2=uw-1;let Sa=class{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const n={print:Ce(([v])=>{Oi(v),this.opts.out&&this.opts.out(v)}),readline:Ce(async v=>{const w=v[0];if(Bs(w),this.opts.in==null)return Cr;const _=await this.opts.in(w.value);return Rr(_)})};this.vars={...r,...s2,...n},this.scope=new Af([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Cr;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],e[w]);const v=r.scope.createChildScope(n);return XA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Cr;if(this.stepCount%uw===n2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Lr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);of(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(fa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(fa(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Cr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(lv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Cr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Cr}case"for":{if(r.times){const n=await this._eval(r.times,e);qe(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);qe(n),qe(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ge(w)]])));if(_.type==="break")break;if(_.type==="return")return _}}return Cr}case"each":{const n=await this._eval(r.items,e);Lo(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(w.type==="break")break;if(w.type==="return")return w}return Cr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,n),Cr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Cr}case"addAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value+v.value)),Cr}case"subAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value-v.value)),Cr}case"null":return Cr;case"bool":return Do(r.value);case"num":return Ge(r.value);case"str":return Rr(r.value);case"arr":return mn(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Wv(n)}case"prop":{const n=await this._eval(r.target,e);if(t2(n))return n.value.has(r.name)?n.value.get(r.name):Cr;if(e2(n)){if(Object.hasOwn(mo.num,r.name))return mo.num[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else if(YA(n)){if(Object.hasOwn(mo.str,r.name))return mo.str[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else if(r2(n)){if(Object.hasOwn(mo.arr,r.name))return mo.arr[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Lr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Lo(n);const v=await this._eval(r.index,e);qe(v);const w=n.value[v.value];if(w===void 0)throw new BA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}case"not":{const n=await this._eval(r.expr,e);return fa(n),Do(!n.value)}case"fn":return GA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);let _="";w.type==="str"?_=w.value:w.type==="num"&&(_=w.value.toString()),n+=_}return Rr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),JA(n)}case"break":return this.log("block:break",{scope:e.name}),ZA();case"continue":return this.log("block:continue",{scope:e.name}),QA();case"ns":return Cr;case"meta":return Cr;case"and":{const n=await this._eval(r.left,e);if(fa(n),n.value){const v=await this._eval(r.right,e);return fa(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(fa(n),n.value)return n;{const v=await this._eval(r.right,e);return fa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Cr;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);Lo(v);const w=await this._eval(e.index,r);qe(w),v.value[w.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);rf(v),v.value.set(e.name,n)}else throw new Lr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ji([Rt],Sa.prototype,"exec",null);ji([Rt],Sa.prototype,"execFn",null);ji([Rt],Sa.prototype,"log",null);ji([Rt],Sa.prototype,"collectNs",null);ji([Rt],Sa.prototype,"collectNsMember",null);ji([Rt],Sa.prototype,"_fn",null);ji([Rt],Sa.prototype,"_eval",null);ji([Rt],Sa.prototype,"_run",null);ji([Rt],Sa.prototype,"registerAbortHandler",null);ji([Rt],Sa.prototype,"unregisterAbortHandler",null);ji([Rt],Sa.prototype,"abort",null);ji([Rt],Sa.prototype,"assign",null);ji([Rt],Sa,"collectMetadata",null);function a2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Yf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Yf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}a2(Yf,Error);function pp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Yf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=pp("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+pp("",v.column-1," ")+pp("",H,"^")}else r+=`
 at `+_}return r};Yf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function gd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:sn},w=R,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",rr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Ee="eval",Ie="`",Ae='"',Pe="'",$e='\\"',Je="\\'",rt="true",Ye="false",Qe="null",it=";",_t="@",dt="@(",Ct=`\r
`,Pt=/^[A-Z0-9_:]/i,ot=/^[^`{]/,ks=/^[{}`]/,as=/^[+\-]/,Xr=/^[1-9]/,xt=/^[0-9]/,It=/^[A-Z_]/i,yn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,sr=uu(),Dt=le("//",!1),Br=le("/*",!1),Sn=le("*/",!1),kt=le("(",!1),ut=le(")",!1),kr=le("::",!1),qt=le("{",!1),st=le("}",!1),Lt=le("###",!1),ms=le("let",!1),Ht=le(":",!1),Ut=le("=",!1),qr=le("var",!1),Fa=le("<:",!1),Mr=le("#[",!1),is=le("]",!1),Ns=le("each",!1),ft=le(",",!1),Ot=le("for",!1),Ks=le("return",!1),Er=D([["A","Z"],["0","9"],"_",":"],!1,!0),Sr=le("loop",!1),Gi=le("break",!1),Oa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Ia=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),Nn=le(">=",!1),Vs=le("<",!1),Fn=le(">",!1),ja=le("+",!1),tl=le("-",!1),Ra=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Os=le(".",!1),On=le("if",!1),Ws=le("elif",!1),Gs=le("else",!1),al=le("match",!1),Js=le("=>",!1),ls=le("eval",!1),Ts=le("`",!1),xr=D(["`","{"],!0,!1),Zs=D(["{","}","`"],!1,!1),Qs=le('"',!1),Xs=le("'",!1),us=le('\\"',!1),Ys=le("\\'",!1),Is=D(["+","-"],!1,!1),Da=D([["1","9"]],!1,!1),Yt=D([["0","9"]],!1,!1),La=le("true",!1),dr=le("false",!1),il=le("null",!1),en=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),Tn=D([["A","Z"],["0","9"],"_"],!1,!0),fl=le(`\r
`,!1),Ha=D(["\r",`
`],!1,!1),ol=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ua=function(a){return a.join("")},hl=function(){return F()},Ba=function(){return F()},pl=function(){return""},qa=function(){return""},vl=function(a){return a??[]},za=function(a,l){return l},gl=function(a,l){return[a,...l]},In=function(a,l){return l},dl=function(a,l){return[a,...l]},jn=function(a,l){return l},yl=function(a,l){return[a,...l]},Ka=function(a){return a},wl=function(a,l){return y("ns",{name:a,members:l})},ml=function(a,l){return y("meta",{name:a,value:l})},$l=function(a){return y("meta",{name:null,value:a})},xl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return y("identifier",{name:"print",chain:[y("callChain",{args:[a]})]})},Cl=function(a,l){return y("attr",{name:a,value:l??y("bool",{value:!0})})},_l=function(a,l,$){return y("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return y("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},Nl=function(a,l){return y("for",{times:a,for:l})},Va=function(a,l){return y("for",{times:a,for:l})},Fl=function(a){return y("return",{expr:a})},Ol=function(a){return y("loop",{statements:a})},Tl=function(){return y("break",{})},Il=function(){return y("continue",{})},jl=function(a,l,$){return l==="+="?y("addAssign",{dest:a,expr:$}):l==="-="?y("subAssign",{dest:a,expr:$}):y("assign",{dest:a,expr:$})},Rn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return y("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Wa=function(){return F()},Dl=function(a){return y("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return y("callChain",{args:a??[]})},Ga=function(a,l){return l},Ul=function(a,l){return[a,...l]},Dn=function(a){return y("indexChain",{index:a})},Bl=function(a){return y("propChain",{name:a})},ql=function(a,l,$,p){return y("if",{cond:a,then:l,elseif:$??[],else:p})},zl=function(a,l){return[a,...l]},Kl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ja=function(a,l,$){return{q:l,a:$}},Za=function(a,l,$){return y("match",{about:a,qs:l??[],default:$})},Qa=function(a){return y("block",{statements:a})},Xa=function(a){return y("identifier",{name:a})},Wl=function(a){return y("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Ya=function(a){return a},Jl=function(a){return y("str",{value:a.join("")})},ei=function(a){return a},ti=function(a){return y("str",{value:a.join("")})},Zl=function(){return'"'},ri=function(){return"'"},Ql=function(){return y("num",{value:parseFloat(F())})},Xl=function(){return y("num",{value:parseFloat(F())})},si=function(){return y("num",{value:parseInt(F(),10)})},Yl=function(){return y("num",{value:parseInt(F(),10)})},ni=function(){return y("bool",{value:!0})},eu=function(){return y("bool",{value:!1})},tu=function(){return y("null",{})},ai=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},ii=function(a){return a},Ln=function(a){return y("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},Hn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),y("def",{name:l,expr:y("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return y("fn",{args:a??[],retType:l},$??[])},li=function(a){return a},iu=function(a){return y("arr",{value:a})},ui=function(a,l){return{k:a,v:l}},fi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},lu=function(a,l){return y("fnTypeSource",{args:a??[],result:l})},oi=function(a,l){return[a,...l]},c=function(a,l){return y("namedTypeSource",{name:a,inner:l})},te=function(a){return y("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},tn=function(a){return y("block",{statements:a??[]})},i=0,S=0,zr=[{line:1,column:1}],f=0,Y=[],O=0,j={},bt;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function F(){return t.substring(S,i)}function q(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),ci(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function pe(){return{type:"end"}}function er(a){var l=zr[a],$;if(l)return l;for($=a-1;!zr[$];)$--;for(l=zr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return zr[a]=l,l}function Ds(a,l,$){var p=er(a),s=er(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return $&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function L(a){i<f||(i>f&&(f=i,Y=[]),Y.push(a))}function ci(a,l){return new Yf(a,null,null,l)}function rn(a,l,$){return new Yf(Yf.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ua(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=ln(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=un(),l!==e&&(S=a,l=Ba()),a=l,a===e&&(a=Un(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&L(sr))))),j[$]={nextPos:i,result:a},a)}function Un(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,O===0&&L(Dt)),l!==e){for($=[],p=i,s=i,O++,u=o(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,u=o(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&L(Br)),l!==e){for($=[],p=i,s=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&L(Sn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&L(Sn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,O===0&&L(Sn)),p!==e?(S=a,a=qa()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sn(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=nn(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=za(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=za(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Kr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=br(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function nn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=hi(),a===e&&(a=br())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function br(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=pi(),a===e&&(a=cu(),a===e&&(a=fu(),a===e&&(a=vi(),a===e&&(a=ou(),a===e&&(a=Wr(),a===e&&(a=gi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=di(),a===e&&(a=fs()),j[l]={nextPos:i,result:a},a)}function fs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=Jr(),a===e&&(a=Cs()))),j[l]={nextPos:i,result:a},a)}function Cs(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=xi(),a===e&&(a=an(),a===e&&(a=ln(),a===e&&(a=un(),a===e&&(a=bi(),a===e&&(a=Xn(),a===e&&(a=ea(),a===e&&(a=ta(),a===e&&(a=du(),a===e&&(a=yi(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e?(S=a,a=Ka(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=un(),a===e&&(a=Xn(),a===e&&(a=na(),a===e&&(a=Ci(),a===e&&(a=ea()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,C=i*76+14,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,O===0&&L(kr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=B,i++):(u=e,O===0&&L(qt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,O===0&&L(st)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,O===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,O===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,C=j[m];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,O===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,O===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=ke,i++):(d=e,O===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,O===0&&L(qr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,O===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=ke,i++):(d=e,O===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,O===0&&L(Fa)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,O===0&&L(Mr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=X,i++):(d=e,O===0&&L(is)),d!==e?(S=a,a=Cl(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+19,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,O===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,O===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,O===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e)if(t.charCodeAt(i)===41?(A=T,i++):(A=e,O===0&&L(ut)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=je(),I!==e?(S=a,a=_l(d,C,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,O===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,O===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(C=[],A=g(),A!==e)for(;A!==e;)C.push(A),A=g();else C=e;C!==e?(A=je(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K=i*76+20,se=j[K];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,O===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=ke,i++):(m=e,O===0&&L(Ut)),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,O===0&&L(ft)),m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=T,i++):(M=e,O===0&&L(ut)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=je(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,O===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=ke,i++):(x=e,O===0&&L(Ut)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=Xe(),C!==e?(S=h,h=El(u,C)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,O===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=je(),M!==e?(S=a,a=Sl(u,h,C,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=je(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=je(),u!==e?(S=a,a=Va(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[K]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&L(Ks)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Wr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Me?(l=Me,i+=4):(l=e,O===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,O===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,O===0&&L(st)),h!==e?(S=a,a=Ol(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Te?(l=Te,i+=5):(l=e,O===0&&L(Gi)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Tl()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===_e?(l=_e,i+=8):(l=e,O===0&&L(Oa)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,O===0&&L(Ji)),p===e&&(t.substr(i,2)===pt?(p=pt,i+=2):(p=e,O===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=ke,i++):(p=e,O===0&&L(Ut)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function di(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=fs(),l!==e){for($=[],p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Gr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=tr,i++):(l=e,O===0&&L(Ta)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Bn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&L(Ia)),l===e&&(t.substr(i,2)===wt?(l=wt,i+=2):(l=e,O===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&L(Xi)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&L(Yi)),l===e&&(t.substr(i,2)===Jt?(l=Jt,i+=2):(l=e,O===0&&L(el)),l===e&&(t.substr(i,2)===Zt?(l=Zt,i+=2):(l=e,O===0&&L(Nn)),l===e&&(t.charCodeAt(i)===60?(l=ht,i++):(l=e,O===0&&L(Vs)),l===e&&(t.charCodeAt(i)===62?(l=Ir,i++):(l=e,O===0&&L(Fn)),l===e&&(t.charCodeAt(i)===43?(l=Qt,i++):(l=e,O===0&&L(ja)),l===e&&(t.charCodeAt(i)===45?(l=Pr,i++):(l=e,O===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Bt,i++):(l=e,O===0&&L(Ra)),l===e&&(t.charCodeAt(i)===94?(l=Ar,i++):(l=e,O===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Ur,i++):(l=e,O===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=rr,i++):(l=e,O===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Wa()),a=l,j[$]={nextPos:i,result:a},a)}function yi(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=jr,i++):(l=e,O===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function Jr(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=Cs(),l!==e){if($=[],p=qn(),p===e&&(p=wi(),p===e&&(p=Kn())),p!==e)for(;p!==e;)$.push(p),p=qn(),p===e&&(p=wi(),p===e&&(p=Kn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function qn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=zn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function zn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=Dn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Kn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=$r,i++):(l=e,O===0&&L(Os)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+35,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,O===0&&L(On)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=je(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=mi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=$i(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=zl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&L(Ws)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=je(),d!==e?(S=a,a=Kl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,O===0&&L(Gs)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=je(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function xi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=i*76+39,ve=j[Fe];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,O===0&&L(al)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=B,i++):(d=e,O===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ja(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ja(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(C=Bt,i++):(C=e,O===0&&L(Ra)),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,O===0&&L(st)),A!==e?(S=a,a=Za(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Fe]={nextPos:i,result:a},a}function an(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ee?(l=Ee,i+=4):(l=e,O===0&&L(ls)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,O===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,O===0&&L(st)),h!==e?(S=a,a=Qa(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=_i(),l!==e&&(S=a,l=Xa(l)),a=l,j[$]={nextPos:i,result:a},a)}function ln(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Ie,i++):(l=e,O===0&&L(Ts)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,O===0&&L(Ts)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,O===0&&L(Ts)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Ie,i++):(p=e,O===0&&L(Ts)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,O===0&&L(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Wn(),$!==e)for(;$!==e;)l.push($),$=Wn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Wn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Gn(),a===e&&(ot.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(xr))),j[l]={nextPos:i,result:a},a)}function Gn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=tr,i++):(l=e,O===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&L(Zs)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function un(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,O===0&&L(Qs)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,O===0&&L(Qs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,O===0&&L(Qs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,O===0&&L(Qs)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Pe,i++):(l=e,O===0&&L(Xs)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===39?(u=Pe,i++):(u=e,O===0&&L(Xs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===39?(u=Pe,i++):(u=e,O===0&&L(Xs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Pe,i++):(p=e,O===0&&L(Xs)),p!==e?(S=a,a=ti($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&L(us)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function fn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,O===0&&L(Ys)),l!==e&&(S=a,l=ri()),a=l,j[$]={nextPos:i,result:a},a)}function bi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=Zn(),a===e&&(a=Qn()),j[l]={nextPos:i,result:a},a)}function Zn(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Da)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=$r,i++):(p=e,O===0&&L(Os)),p!==e){if(s=[],xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&L(Yt)),u!==e)for(;u!==e;)s.push(u),xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&L(Yt));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Yt)),l!==e)if(t.charCodeAt(i)===46?($=$r,i++):($=e,O===0&&L(Os)),$!==e){if(p=[],xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&L(Yt)),s!==e)for(;s!==e;)p.push(s),xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&L(Yt));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Da)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt));else $=e;$!==e?(S=a,a=si()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Yt)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Ai(),a===e&&(a=Yn()),j[l]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===rt?(l=rt,i+=4):(l=e,O===0&&L(La)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=ni()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&L(dr)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&L(il)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+56,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,O===0&&L(st)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,C=i*76+57,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=Ln(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function sa(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=ra(),l!==e){for($=[],p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=Hn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=i*76+60,ve=j[Fe];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.charCodeAt(i)===64?(l=_t,i++):(l=e,O===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,O===0&&L(kt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=sa(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=T,i++):(m=e,O===0&&L(ut)),m!==e){for(C=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=oe,i++):(M=e,O===0&&L(Ht)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?C=U:(i=C,C=e)}else i=C,C=e;for(C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=B,i++):(M=e,O===0&&L(qt)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Kr(),U===e&&(U=null),K=[],se=g();se!==e;)K.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,O===0&&L(st)),se!==e?(S=a,a=nu($,p,s,h,C,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Fe]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===dt?(l=dt,i+=2):(l=e,O===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=oe,i++):(x=e,O===0&&L(Ht)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=tt(),C!==e?d=C:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=B,i++):(x=e,O===0&&L(qt)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();for(C=Kr(),C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=J,i++):(M=e,O===0&&L(st)),M!==e?(S=a,a=au(p,d,C)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function na(){var a,l,$,p,s,u,d,h,x,m,C=i*76+62,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+63,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,O===0&&L(st)),s!==e?(S=a,a=fi(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=nr()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+65,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===dt?(l=dt,i+=2):(l=e,O===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=_s(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===ce?(h=ce,i+=2):(h=e,O===0&&L(Js)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function _s(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=oi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function nr(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=ht,i++):(p=e,O===0&&L(Vs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Ir,i++):(h=e,O===0&&L(Fn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,It.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(ul)),l!==e){for($=[],yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Tn));p!==e;)$.push(p),yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Tn));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function _i(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,O===0&&L(ft)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function je(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Kr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,O===0&&L(st)),u!==e?(S=a,a=tn(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=br()),j[d]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ct?(a=Ct,i+=2):(a=e,O===0&&L(fl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(Ha))),j[l]={nextPos:i,result:a},a)}function o(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&L(sr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(ol)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function y(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=q();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(bt=w(),bt!==e&&i===t.length)return bt;throw bt!==e&&i<t.length&&L(pe()),rn(Y,f<t.length?t.charAt(f):null,f<t.length?Ds(f,f+1):Ds(f,f))}const i2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function l2(t){return i2.includes(t.type)}function fw(t){return"chain"in t&&t.chain!==null}function u2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function f2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function o2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Ft(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Ft(e.expr,r);break}case"return":{e.expr=Ft(e.expr,r);break}case"each":{e.items=Ft(e.items,r),e.for=Ft(e.for,r);break}case"for":{e.from!=null&&(e.from=Ft(e.from,r)),e.to!=null&&(e.to=Ft(e.to,r)),e.times!=null&&(e.times=Ft(e.times,r)),e.for=Ft(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Ft(e.expr,r),e.dest=Ft(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Ft(e.operands[n],r);break}case"not":{e.expr=Ft(e.expr,r);break}case"if":{e.cond=Ft(e.cond,r),e.then=Ft(e.then,r);for(const n of e.elseif)n.cond=Ft(n.cond,r),n.then=Ft(n.then,r);e.else!=null&&(e.else=Ft(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Ft(e.children[n],r);break}case"match":{e.about=Ft(e.about,r);for(const n of e.qs)n.q=Ft(n.q,r),n.a=Ft(n.a,r);e.default!=null&&(e.default=Ft(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Ft(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Ft(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Ft(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"indexChain":{e.index=Ft(e.index,r);break}case"call":{e.target=Ft(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"index":{e.target=Ft(e.target,r),e.index=Ft(e.index,r);break}case"prop":{e.target=Ft(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Ft(e.members[n],r);break}case"or":case"and":{e.left=Ft(e.left,r),e.right=Ft(e.right,r);break}}if(fw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Ft(e.chain[n],r);return e}const vp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function gp(t){throw new io(`Reserved word "${t}" cannot be used as variable name.`)}function c2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{vp.includes(t.name)&&gp(t.name);break}case"meta":{t.name!=null&&vp.includes(t.name)&&gp(t.name);break}case"fn":{for(const r of t.args)vp.includes(r.name)&&gp(r.name);break}}return t}function h2(t){for(const r of t)Ft(r,c2);return t}function dd(t){return{type:"simple",name:t}}function p2(t,r){return{type:"generic",name:t,inners:r}}function v2(t,r){return{type:"fn",args:t,result:r}}function eh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=eh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>eh(n)).join(", "),e=eh(t.result);return`@(${r}) { ${e} }`}}}function Ho(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return dd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ho(t.inner):r=dd("any"),p2(t.name,[r])}}throw new io(`Unknown type: '${eh(t)}'`)}else{const r=t.args.map(e=>Ho(e));return v2(r,Ho(t.result))}}function g2(t){switch(t.type){case"def":{t.varType!=null&&Ho(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ho(r.argType);t.retType!=null&&Ho(t.retType);break}}return t}function d2(t){for(const r of t)Ft(r,g2);return t}function th(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=th(n.expr.children)),r.push(n);else{if(e.length>0)throw new io("invalid attribute.");switch(n.type){case"fn":{n.children=th(n.children);break}case"block":{n.statements=th(n.statements);break}}r.push(n)}if(e.length>0)throw new io("invalid attribute.");return r}function y2(t){if(l2(t)&&fw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=u2(n,v.args,v.loc);break}case"indexChain":{n=f2(n,v.index,v.loc);break}case"propChain":{n=o2(n,v.name,v.loc);break}}return n}return t}function w2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],y2);return t}function rh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function ow(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return rh(t,r,e);{const{left:n,right:v,info:w}=t;return rh(n,ow(v,r,e),w)}}function Rf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Rf(t.left),Rf(t.right)]}}const m2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Rf(t.left),right:Rf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Rf(t.left),right:Rf(t.right)}),priority:3}};function $2(t){const r=t.operators.map(n=>{const v=m2[n];if(v==null)throw new io(`No such operator: ${n}.`);return v});let e=rh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=ow(e,t.operands[2+n],r[1+n]);return Rf(e)}function x2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],e=>e.type==="infix"?$2(e):e);return t}var Du;let b2=(Du=class{constructor(){he(this,"plugins");this.plugins={validate:[h2,d2],transform:[th,w2,x2]}}static parse(r){return Du.instance==null&&(Du.instance=new Du),Du.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=gd(r,{startRule:"Preprocess"});e=gd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new io(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new io(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Du,"instance"),Du);const A2="0.15.0",C2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let cv=[],Yo=null;function _2(t){return cv=b2.parse(t),JSON.stringify(cv,null,"	")}async function P2(t){Yo==null||Yo.abort(),Yo=new Sa({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:uv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:uv(e.val,!0),print:!1});break}}});try{await Yo.exec(cv)}catch(r){t.err(r)}}const k2=Object.freeze(Object.defineProperty({__proto__:null,exec:P2,parse:_2,samples:C2,version:A2},Symbol.toStringTag,{value:"Module"}));class jh extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,jh)}}class lo extends jh{constructor(r,e){super(r,e)}}class Hr extends jh{constructor(r,e){super(r,e)}}class M2 extends Hr{constructor(r,e){super(r,e)}}var go=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};class Bu{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Bu(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Hr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}go([Rt],Bu.prototype,"log",null);go([Rt],Bu.prototype,"onUpdated",null);go([Rt],Bu.prototype,"createChildScope",null);go([Rt],Bu.prototype,"get",null);go([Rt],Bu.prototype,"getAll",null);go([Rt],Bu.prototype,"add",null);go([Rt],Bu.prototype,"assign",null);let Tc;const E2=new Uint8Array(16);function S2(){if(!Tc&&(Tc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tc(E2)}const hn=[];for(let t=0;t<256;++t)hn.push((t+256).toString(16).slice(1));function N2(t,r=0){return(hn[t[r+0]]+hn[t[r+1]]+hn[t[r+2]]+hn[t[r+3]]+"-"+hn[t[r+4]]+hn[t[r+5]]+"-"+hn[t[r+6]]+hn[t[r+7]]+"-"+hn[t[r+8]]+hn[t[r+9]]+"-"+hn[t[r+10]]+hn[t[r+11]]+hn[t[r+12]]+hn[t[r+13]]+hn[t[r+14]]+hn[t[r+15]]).toLowerCase()}const F2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yd={randomUUID:F2};function O2(t,r,e){if(yd.randomUUID&&!r&&!t)return yd.randomUUID();t=t||{};const n=t.random||(t.rng||S2)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return N2(n)}const _r={type:"null"},Bi={type:"bool",value:!0},Si={type:"bool",value:!1},ct=t=>({type:"num",value:t}),Dr=t=>({type:"str",value:t}),Uo=t=>({type:"bool",value:t}),Gv=t=>({type:"obj",value:t}),$n=t=>({type:"arr",value:t}),T2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ze=t=>({type:"fn",native:t}),I2=t=>({type:"return",value:t}),j2=()=>({type:"break",value:null}),R2=()=>({type:"continue",value:null}),D2=t=>t.type==="return"?t.value:t;function Ti(t){if(t==null)throw new Hr("Expect anything, but got nothing.")}function oa(t){if(t==null)throw new Hr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Hr(`Expect boolean, but got ${t.type}.`)}function cf(t){if(t==null)throw new Hr("Expect function, but got nothing.");if(t.type!=="fn")throw new Hr(`Expect function, but got ${t.type}.`)}function qs(t){if(t==null)throw new Hr("Expect string, but got nothing.");if(t.type!=="str")throw new Hr(`Expect string, but got ${t.type}.`)}function lt(t){if(t==null)throw new Hr("Expect number, but got nothing.");if(t.type!=="num")throw new Hr(`Expect number, but got ${t.type}.`)}function sf(t){if(t==null)throw new Hr("Expect object, but got nothing.");if(t.type!=="obj")throw new Hr(`Expect object, but got ${t.type}.`)}function cc(t){if(t==null)throw new Hr("Expect array, but got nothing.");if(t.type!=="arr")throw new Hr(`Expect array, but got ${t.type}.`)}function L2(t){return t.type==="str"}function H2(t){return t.type==="num"}function U2(t){return t.type==="obj"}function B2(t){return t.type==="arr"}function hv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function pv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>pv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function vv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>vv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=vv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function gv(t){if(t===null)return _r;if(typeof t=="boolean")return Uo(t);if(typeof t=="string")return Dr(t);if(typeof t=="number")return ct(t);if(Array.isArray(t))return $n(t.map(r=>gv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,gv(n));return Gv(r)}return _r}const q2={help:Dr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Dr("0.14.1"),"Core:ai":Dr("kawaii"),"Core:not":ze(([t])=>(oa(t),t.value?Si:Bi)),"Core:eq":ze(([t,r])=>(Ti(t),Ti(r),hv(t,r)?Bi:Si)),"Core:neq":ze(([t,r])=>(Ti(t),Ti(r),hv(t,r)?Si:Bi)),"Core:and":ze(([t,r])=>(oa(t),t.value?(oa(r),r.value?Bi:Si):Si)),"Core:or":ze(([t,r])=>(oa(t),t.value?Bi:(oa(r),r.value?Bi:Si))),"Core:add":ze(([t,r])=>(lt(t),lt(r),ct(t.value+r.value))),"Core:sub":ze(([t,r])=>(lt(t),lt(r),ct(t.value-r.value))),"Core:mul":ze(([t,r])=>(lt(t),lt(r),ct(t.value*r.value))),"Core:pow":ze(([t,r])=>{lt(t),lt(r);const e=t.value**r.value;if(isNaN(e))throw new Hr("Invalid operation.");return ct(e)}),"Core:div":ze(([t,r])=>{lt(t),lt(r);const e=t.value/r.value;if(isNaN(e))throw new Hr("Invalid operation.");return ct(e)}),"Core:mod":ze(([t,r])=>(lt(t),lt(r),ct(t.value%r.value))),"Core:gt":ze(([t,r])=>(lt(t),lt(r),t.value>r.value?Bi:Si)),"Core:lt":ze(([t,r])=>(lt(t),lt(r),t.value<r.value?Bi:Si)),"Core:gteq":ze(([t,r])=>(lt(t),lt(r),t.value>=r.value?Bi:Si)),"Core:lteq":ze(([t,r])=>(lt(t),lt(r),t.value<=r.value?Bi:Si)),"Core:type":ze(([t])=>(Ti(t),Dr(t.type))),"Core:to_str":ze(([t])=>(Ti(t),t.type==="str"?t:t.type==="num"?Dr(t.value.toString()):Dr("?"))),"Core:range":ze(([t,r])=>(lt(t),lt(r),t.value<r.value?$n(Array.from({length:r.value-t.value+1},(e,n)=>ct(n+t.value))):t.value>r.value?$n(Array.from({length:t.value-r.value+1},(e,n)=>ct(t.value-n))):$n([t]))),"Util:uuid":ze(()=>Dr(O2())),"Json:stringify":ze(([t])=>(Ti(t),Dr(JSON.stringify(vv(t))))),"Json:parse":ze(([t])=>(qs(t),gv(JSON.parse(t.value)))),"Json:parsable":ze(([t])=>{qs(t);try{JSON.parse(t.value)}catch{return Uo(!1)}return Uo(!0)}),"Date:now":ze(()=>ct(Date.now())),"Date:year":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ze(([t])=>(t&&lt(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ze(([t])=>(qs(t),ct(new Date(t.value).getTime()))),"Math:Infinity":ct(1/0),"Math:PI":ct(Math.PI),"Math:sin":ze(([t])=>(lt(t),ct(Math.sin(t.value)))),"Math:cos":ze(([t])=>(lt(t),ct(Math.cos(t.value)))),"Math:abs":ze(([t])=>(lt(t),ct(Math.abs(t.value)))),"Math:sqrt":ze(([t])=>{lt(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Hr("Invalid operation.");return ct(r)}),"Math:round":ze(([t])=>(lt(t),ct(Math.round(t.value)))),"Math:ceil":ze(([t])=>(lt(t),ct(Math.ceil(t.value)))),"Math:floor":ze(([t])=>(lt(t),ct(Math.floor(t.value)))),"Math:min":ze(([t,r])=>(lt(t),lt(r),ct(Math.min(t.value,r.value)))),"Math:max":ze(([t,r])=>(lt(t),lt(r),ct(Math.max(t.value,r.value)))),"Math:rnd":ze(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ct(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ct(Math.random())),"Math:gen_rng":ze(([t])=>{if(Ti(t),t.type!=="num"&&t.type!=="str")return _r;const r=fo(t.value.toString());return ze(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?ct(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ct(r()))}),"Num:to_hex":ze(([t])=>(lt(t),Dr(t.value.toString(16)))),"Num:from_hex":ze(([t])=>(qs(t),ct(parseInt(t.value,16)))),"Str:lf":Dr(`
`),"Str:lt":ze(([t,r])=>(qs(t),qs(r),t.value<r.value?ct(-1):t.value===r.value?ct(0):ct(1))),"Str:gt":ze(([t,r])=>(qs(t),qs(r),t.value>r.value?ct(-1):t.value===r.value?ct(0):ct(1))),"Obj:keys":ze(([t])=>(sf(t),$n(Array.from(t.value.keys()).map(r=>Dr(r))))),"Obj:vals":ze(([t])=>(sf(t),$n(Array.from(t.value.values())))),"Obj:kvs":ze(([t])=>(sf(t),$n(Array.from(t.value.entries()).map(([r,e])=>$n([Dr(r),e]))))),"Obj:get":ze(([t,r])=>(sf(t),qs(r),t.value.get(r.value)??_r)),"Obj:set":ze(([t,r,e])=>(sf(t),qs(r),Ti(e),t.value.set(r.value,e),_r)),"Obj:has":ze(([t,r])=>(sf(t),qs(r),Uo(t.value.has(r.value)))),"Obj:copy":ze(([t])=>(sf(t),Gv(new Map(t.value)))),"Async:interval":ze(async([t,r,e],n)=>{lt(t),cf(r),e&&(oa(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ze(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ze(async([t,r],e)=>{lt(t),cf(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ze(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},$o={num:{to_str:t=>ze(async(r,e)=>Dr(t.value.toString()))},str:{to_num:t=>ze(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?_r:ct(n)}),len:t=>ct(co(t.value)),replace:t=>ze(async([r,e],n)=>(qs(r),qs(e),Dr(t.value.split(r.value).join(e.value)))),index_of:t=>ze(async([r],e)=>(qs(r),ct(po(t.value,r.value)))),incl:t=>ze(async([r],e)=>(qs(r),t.value.includes(r.value)?Bi:Si)),trim:t=>ze(async(r,e)=>Dr(t.value.trim())),upper:t=>ze(async(r,e)=>Dr(t.value.toUpperCase())),lower:t=>ze(async(r,e)=>Dr(t.value.toLowerCase())),split:t=>ze(async([r],e)=>(r&&qs(r),$n(r?t.value.split(r?r.value:"").map(n=>Dr(n)):zs(t.value).map(n=>Dr(n))))),slice:t=>ze(async([r,e],n)=>(lt(r),lt(e),Dr(ho(t.value,r.value,e.value)))),pick:t=>ze(async([r],e)=>{lt(r);const v=zs(t.value)[r.value];return v?Dr(v):_r})},arr:{len:t=>ct(t.value.length),push:t=>ze(async([r],e)=>(Ti(r),t.value.push(r),t)),unshift:t=>ze(async([r],e)=>(Ti(r),t.value.unshift(r),t)),pop:t=>ze(async(r,e)=>t.value.pop()??_r),shift:t=>ze(async(r,e)=>t.value.shift()??_r),concat:t=>ze(async([r],e)=>(cc(r),$n(t.value.concat(r.value)))),slice:t=>ze(async([r,e],n)=>(lt(r),lt(e),$n(t.value.slice(r.value,e.value)))),join:t=>ze(async([r],e)=>(r&&qs(r),Dr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ze(async([r],e)=>{cf(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,ct(w)]));return $n(await Promise.all(n))}),filter:t=>ze(async([r],e)=>{cf(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,ct(v)]);oa(_),_.value&&n.push(w)}return $n(n)}),reduce:t=>ze(async([r,e],n)=>{cf(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,ct(_)])}return w}),find:t=>ze(async([r],e)=>{cf(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,ct(n)]);if(oa(w),w.value)return v}return _r}),incl:t=>ze(async([r],e)=>(Ti(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Si:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Bi:Si)),reverse:t=>ze(async(r,e)=>(t.value.reverse(),_r)),copy:t=>ze(async(r,e)=>$n([...t.value])),sort:t=>ze(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,T=0;for(;N<w.length&&T<_.length;){const H=w[N],B=_[T],J=await e.call(P,[H,B]);lt(J),J.value<0?(E.push(w[N]),N++):(E.push(_[T]),T++)}return E.concat(w.slice(N)).concat(_.slice(T))};return cf(r),cc(t),t.value=await n(t.value,r),t})}};var Ri=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const cw=300,z2=cw-1;class Na{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const n={print:ze(([v])=>{Ti(v),this.opts.out&&this.opts.out(v)}),readline:ze(async v=>{const w=v[0];if(qs(w),this.opts.in==null)return _r;const _=await this.opts.in(w.value);return Dr(_)})};this.vars={...r,...q2,...n},this.scope=new Bu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??_r;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],e[w]);const v=r.scope.createChildScope(n);return D2(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return _r;if(this.stepCount%cw===z2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Hr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);cf(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(oa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(oa(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return _r}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(hv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):_r}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return _r}case"for":{if(r.times){const n=await this._eval(r.times,e);lt(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);lt(n),lt(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,ct(w)]])));if(_.type==="break")break;if(_.type==="return")return _}}return _r}case"each":{const n=await this._eval(r.items,e);cc(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(w.type==="break")break;if(w.type==="return")return w}return _r}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,n),_r}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),_r}case"addAssign":{const n=await this._eval(r.dest,e);lt(n);const v=await this._eval(r.expr,e);return lt(v),await this.assign(e,r.dest,ct(n.value+v.value)),_r}case"subAssign":{const n=await this._eval(r.dest,e);lt(n);const v=await this._eval(r.expr,e);return lt(v),await this.assign(e,r.dest,ct(n.value-v.value)),_r}case"null":return _r;case"bool":return Uo(r.value);case"num":return ct(r.value);case"str":return Dr(r.value);case"arr":return $n(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Gv(n)}case"prop":{const n=await this._eval(r.target,e);if(U2(n))return n.value.has(r.name)?n.value.get(r.name):_r;if(H2(n)){if(Object.hasOwn($o.num,r.name))return $o.num[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else if(L2(n)){if(Object.hasOwn($o.str,r.name))return $o.str[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else if(B2(n)){if(Object.hasOwn($o.arr,r.name))return $o.arr[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Hr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);cc(n);const v=await this._eval(r.index,e);lt(v);const w=n.value[v.value];if(w===void 0)throw new M2(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}case"not":{const n=await this._eval(r.expr,e);return oa(n),Uo(!n.value)}case"fn":return T2(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);let _="";w.type==="str"?_=w.value:w.type==="num"&&(_=w.value.toString()),n+=_}return Dr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),I2(n)}case"break":return this.log("block:break",{scope:e.name}),j2();case"continue":return this.log("block:continue",{scope:e.name}),R2();case"ns":return _r;case"meta":return _r;case"and":{const n=await this._eval(r.left,e);if(oa(n),n.value){const v=await this._eval(r.right,e);return oa(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(oa(n),n.value)return n;{const v=await this._eval(r.right,e);return oa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=_r;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);cc(v);const w=await this._eval(e.index,r);lt(w),v.value[w.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);sf(v),v.value.set(e.name,n)}else throw new Hr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}Ri([Rt],Na.prototype,"exec",null);Ri([Rt],Na.prototype,"execFn",null);Ri([Rt],Na.prototype,"log",null);Ri([Rt],Na.prototype,"collectNs",null);Ri([Rt],Na.prototype,"collectNsMember",null);Ri([Rt],Na.prototype,"_fn",null);Ri([Rt],Na.prototype,"_eval",null);Ri([Rt],Na.prototype,"_run",null);Ri([Rt],Na.prototype,"registerAbortHandler",null);Ri([Rt],Na.prototype,"unregisterAbortHandler",null);Ri([Rt],Na.prototype,"abort",null);Ri([Rt],Na.prototype,"assign",null);Ri([Rt],Na,"collectMetadata",null);function K2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function eo(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,eo.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}K2(eo,Error);function dp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}eo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=dp("",w.line.toString().length," "),N=e[v.line-1],T=v.line===P.line?P.column:N.length+1,H=T-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+dp("",v.column-1," ")+dp("",H,"^")}else r+=`
 at `+_}return r};eo.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var T=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+T.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(T){return"\\x0"+n(T)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(T){return"\\x"+n(T)})}function _(N){return e[N.type](N)}function P(N){var T=N.map(_),H,B;if(T.sort(),T.length>0){for(H=1,B=1;H<T.length;H++)T[H-1]!==T[H]&&(T[B]=T[H],B++);T.length=B}switch(T.length){case 1:return T[0];case 2:return T[0]+" or "+T[1];default:return T.slice(0,-1).join(", ")+", or "+T[T.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function wd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:sn},w=R,_="//",P="/*",E="*/",N="(",T=")",H="::",B="{",J="}",we="###",ue="let",oe=":",ke="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Me="loop",Te="break",_e="continue",at="+=",pt="-=",tr="\\",$t="||",wt="&&",Ze="==",mt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",rr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Ee="eval",Ie="`",Ae='"',Pe="'",$e='\\"',Je="\\'",rt="true",Ye="false",Qe="null",it=";",_t="@",dt="@(",Ct=`\r
`,Pt=/^[A-Z0-9_:]/i,ot=/^[^`{]/,ks=/^[{}`]/,as=/^[+\-]/,Xr=/^[1-9]/,xt=/^[0-9]/,It=/^[A-Z_]/i,yn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,sr=uu(),Dt=le("//",!1),Br=le("/*",!1),Sn=le("*/",!1),kt=le("(",!1),ut=le(")",!1),kr=le("::",!1),qt=le("{",!1),st=le("}",!1),Lt=le("###",!1),ms=le("let",!1),Ht=le(":",!1),Ut=le("=",!1),qr=le("var",!1),Fa=le("<:",!1),Mr=le("#[",!1),is=le("]",!1),Ns=le("each",!1),ft=le(",",!1),Ot=le("for",!1),Ks=le("return",!1),Er=D([["A","Z"],["0","9"],"_",":"],!1,!0),Sr=le("loop",!1),Gi=le("break",!1),Oa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Ia=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),Nn=le(">=",!1),Vs=le("<",!1),Fn=le(">",!1),ja=le("+",!1),tl=le("-",!1),Ra=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Os=le(".",!1),On=le("if",!1),Ws=le("elif",!1),Gs=le("else",!1),al=le("match",!1),Js=le("=>",!1),ls=le("eval",!1),Ts=le("`",!1),xr=D(["`","{"],!0,!1),Zs=D(["{","}","`"],!1,!1),Qs=le('"',!1),Xs=le("'",!1),us=le('\\"',!1),Ys=le("\\'",!1),Is=D(["+","-"],!1,!1),Da=D([["1","9"]],!1,!1),Yt=D([["0","9"]],!1,!1),La=le("true",!1),dr=le("false",!1),il=le("null",!1),en=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),Tn=D([["A","Z"],["0","9"],"_"],!1,!0),fl=le(`\r
`,!1),Ha=D(["\r",`
`],!1,!1),ol=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ua=function(a){return a.join("")},hl=function(){return F()},Ba=function(){return F()},pl=function(){return""},qa=function(){return""},vl=function(a){return a??[]},za=function(a,l){return l},gl=function(a,l){return[a,...l]},In=function(a,l){return l},dl=function(a,l){return[a,...l]},jn=function(a,l){return l},yl=function(a,l){return[a,...l]},Ka=function(a){return a},wl=function(a,l){return y("ns",{name:a,members:l})},ml=function(a,l){return y("meta",{name:a,value:l})},$l=function(a){return y("meta",{name:null,value:a})},xl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return y("identifier",{name:"print",chain:[y("callChain",{args:[a]})]})},Cl=function(a,l){return y("attr",{name:a,value:l??y("bool",{value:!0})})},_l=function(a,l,$){return y("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return y("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},Nl=function(a,l){return y("for",{times:a,for:l})},Va=function(a,l){return y("for",{times:a,for:l})},Fl=function(a){return y("return",{expr:a})},Ol=function(a){return y("loop",{statements:a})},Tl=function(){return y("break",{})},Il=function(){return y("continue",{})},jl=function(a,l,$){return l==="+="?y("addAssign",{dest:a,expr:$}):l==="-="?y("subAssign",{dest:a,expr:$}):y("assign",{dest:a,expr:$})},Rn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return y("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Wa=function(){return F()},Dl=function(a){return y("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return y("callChain",{args:a??[]})},Ga=function(a,l){return l},Ul=function(a,l){return[a,...l]},Dn=function(a){return y("indexChain",{index:a})},Bl=function(a){return y("propChain",{name:a})},ql=function(a,l,$,p){return y("if",{cond:a,then:l,elseif:$??[],else:p})},zl=function(a,l){return[a,...l]},Kl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ja=function(a,l,$){return{q:l,a:$}},Za=function(a,l,$){return y("match",{about:a,qs:l??[],default:$})},Qa=function(a){return y("block",{statements:a})},Xa=function(a){return y("identifier",{name:a})},Wl=function(a){return y("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Ya=function(a){return a},Jl=function(a){return y("str",{value:a.join("")})},ei=function(a){return a},ti=function(a){return y("str",{value:a.join("")})},Zl=function(){return'"'},ri=function(){return"'"},Ql=function(){return y("num",{value:parseFloat(F())})},Xl=function(){return y("num",{value:parseFloat(F())})},si=function(){return y("num",{value:parseInt(F(),10)})},Yl=function(){return y("num",{value:parseInt(F(),10)})},ni=function(){return y("bool",{value:!0})},eu=function(){return y("bool",{value:!1})},tu=function(){return y("null",{})},ai=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},ii=function(a){return a},Ln=function(a){return y("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},Hn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),y("def",{name:l,expr:y("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return y("fn",{args:a??[],retType:l},$??[])},li=function(a){return a},iu=function(a){return y("arr",{value:a})},ui=function(a,l){return{k:a,v:l}},fi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},lu=function(a,l){return y("fnTypeSource",{args:a??[],result:l})},oi=function(a,l){return[a,...l]},c=function(a,l){return y("namedTypeSource",{name:a,inner:l})},te=function(a){return y("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},tn=function(a){return y("block",{statements:a??[]})},i=0,S=0,zr=[{line:1,column:1}],f=0,Y=[],O=0,j={},bt;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function F(){return t.substring(S,i)}function q(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),ci(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function pe(){return{type:"end"}}function er(a){var l=zr[a],$;if(l)return l;for($=a-1;!zr[$];)$--;for(l=zr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return zr[a]=l,l}function Ds(a,l,$){var p=er(a),s=er(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return $&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function L(a){i<f||(i>f&&(f=i,Y=[]),Y.push(a))}function ci(a,l){return new eo(a,null,null,l)}function rn(a,l,$){return new eo(eo.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ua(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=ln(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=un(),l!==e&&(S=a,l=Ba()),a=l,a===e&&(a=Un(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&L(sr))))),j[$]={nextPos:i,result:a},a)}function Un(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,O===0&&L(Dt)),l!==e){for($=[],p=i,s=i,O++,u=o(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,u=o(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&L(Br)),l!==e){for($=[],p=i,s=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&L(Sn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&L(Sn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,O===0&&L(Sn)),p!==e?(S=a,a=qa()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sn(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=nn(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=za(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=za(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Kr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=br(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function nn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=hi(),a===e&&(a=br())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function br(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=pi(),a===e&&(a=cu(),a===e&&(a=fu(),a===e&&(a=vi(),a===e&&(a=ou(),a===e&&(a=Wr(),a===e&&(a=gi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=di(),a===e&&(a=fs()),j[l]={nextPos:i,result:a},a)}function fs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=Jr(),a===e&&(a=Cs()))),j[l]={nextPos:i,result:a},a)}function Cs(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=xi(),a===e&&(a=an(),a===e&&(a=ln(),a===e&&(a=un(),a===e&&(a=bi(),a===e&&(a=Xn(),a===e&&(a=ea(),a===e&&(a=ta(),a===e&&(a=du(),a===e&&(a=yi(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e?(S=a,a=Ka(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=un(),a===e&&(a=Xn(),a===e&&(a=na(),a===e&&(a=Ci(),a===e&&(a=ea()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,C=i*76+14,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,O===0&&L(kr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=B,i++):(u=e,O===0&&L(qt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,O===0&&L(st)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,O===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,O===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,C=j[m];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,O===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,O===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=ke,i++):(d=e,O===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,O===0&&L(qr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,O===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=ke,i++):(d=e,O===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,O===0&&L(Fa)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,O===0&&L(Mr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=X,i++):(d=e,O===0&&L(is)),d!==e?(S=a,a=Cl(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+19,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,O===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,O===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,O===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e)if(t.charCodeAt(i)===41?(A=T,i++):(A=e,O===0&&L(ut)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=je(),I!==e?(S=a,a=_l(d,C,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,O===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,O===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(C=[],A=g(),A!==e)for(;A!==e;)C.push(A),A=g();else C=e;C!==e?(A=je(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K=i*76+20,se=j[K];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,O===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=ke,i++):(m=e,O===0&&L(Ut)),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,O===0&&L(ft)),m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=T,i++):(M=e,O===0&&L(ut)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=je(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,O===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=ke,i++):(x=e,O===0&&L(Ut)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=Xe(),C!==e?(S=h,h=El(u,C)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,O===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=je(),M!==e?(S=a,a=Sl(u,h,C,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&L(kt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=je(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=je(),u!==e?(S=a,a=Va(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[K]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&L(Ks)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Wr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Me?(l=Me,i+=4):(l=e,O===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,O===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,O===0&&L(st)),h!==e?(S=a,a=Ol(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Te?(l=Te,i+=5):(l=e,O===0&&L(Gi)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Tl()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===_e?(l=_e,i+=8):(l=e,O===0&&L(Oa)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,O===0&&L(Ji)),p===e&&(t.substr(i,2)===pt?(p=pt,i+=2):(p=e,O===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=ke,i++):(p=e,O===0&&L(Ut)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function di(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=fs(),l!==e){for($=[],p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Gr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=tr,i++):(l=e,O===0&&L(Ta)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Bn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&L(Ia)),l===e&&(t.substr(i,2)===wt?(l=wt,i+=2):(l=e,O===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&L(Xi)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&L(Yi)),l===e&&(t.substr(i,2)===Jt?(l=Jt,i+=2):(l=e,O===0&&L(el)),l===e&&(t.substr(i,2)===Zt?(l=Zt,i+=2):(l=e,O===0&&L(Nn)),l===e&&(t.charCodeAt(i)===60?(l=ht,i++):(l=e,O===0&&L(Vs)),l===e&&(t.charCodeAt(i)===62?(l=Ir,i++):(l=e,O===0&&L(Fn)),l===e&&(t.charCodeAt(i)===43?(l=Qt,i++):(l=e,O===0&&L(ja)),l===e&&(t.charCodeAt(i)===45?(l=Pr,i++):(l=e,O===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Bt,i++):(l=e,O===0&&L(Ra)),l===e&&(t.charCodeAt(i)===94?(l=Ar,i++):(l=e,O===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Ur,i++):(l=e,O===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=rr,i++):(l=e,O===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Wa()),a=l,j[$]={nextPos:i,result:a},a)}function yi(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=jr,i++):(l=e,O===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function Jr(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=Cs(),l!==e){if($=[],p=qn(),p===e&&(p=wi(),p===e&&(p=Kn())),p!==e)for(;p!==e;)$.push(p),p=qn(),p===e&&(p=wi(),p===e&&(p=Kn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function qn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=zn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function zn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=Dn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Kn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=$r,i++):(l=e,O===0&&L(Os)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+35,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,O===0&&L(On)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=je(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=mi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=$i(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=zl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&L(Ws)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=je(),d!==e?(S=a,a=Kl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,O===0&&L(Gs)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=je(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function xi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=i*76+39,ve=j[Fe];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,O===0&&L(al)),l!==e)if($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=B,i++):(d=e,O===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ja(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ja(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(C=Bt,i++):(C=e,O===0&&L(Ra)),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,O===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=je(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,O===0&&L(st)),A!==e?(S=a,a=Za(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Fe]={nextPos:i,result:a},a}function an(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ee?(l=Ee,i+=4):(l=e,O===0&&L(ls)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,O===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,O===0&&L(st)),h!==e?(S=a,a=Qa(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=_i(),l!==e&&(S=a,l=Xa(l)),a=l,j[$]={nextPos:i,result:a},a)}function ln(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Ie,i++):(l=e,O===0&&L(Ts)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,O===0&&L(Ts)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,O===0&&L(Ts)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Ie,i++):(p=e,O===0&&L(Ts)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,O===0&&L(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Wn(),$!==e)for(;$!==e;)l.push($),$=Wn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Wn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Gn(),a===e&&(ot.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(xr))),j[l]={nextPos:i,result:a},a)}function Gn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=tr,i++):(l=e,O===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&L(Zs)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function un(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,O===0&&L(Qs)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,O===0&&L(Qs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,O===0&&L(Qs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,O===0&&L(Qs)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Pe,i++):(l=e,O===0&&L(Xs)),l!==e){for($=[],p=i,s=i,O++,t.charCodeAt(i)===39?(u=Pe,i++):(u=e,O===0&&L(Xs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,O++,t.charCodeAt(i)===39?(u=Pe,i++):(u=e,O===0&&L(Xs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&L(sr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Pe,i++):(p=e,O===0&&L(Xs)),p!==e?(S=a,a=ti($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&L(us)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function fn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,O===0&&L(Ys)),l!==e&&(S=a,l=ri()),a=l,j[$]={nextPos:i,result:a},a)}function bi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=Zn(),a===e&&(a=Qn()),j[l]={nextPos:i,result:a},a)}function Zn(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Da)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=$r,i++):(p=e,O===0&&L(Os)),p!==e){if(s=[],xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&L(Yt)),u!==e)for(;u!==e;)s.push(u),xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&L(Yt));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Yt)),l!==e)if(t.charCodeAt(i)===46?($=$r,i++):($=e,O===0&&L(Os)),$!==e){if(p=[],xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&L(Yt)),s!==e)for(;s!==e;)p.push(s),xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&L(Yt));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Da)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Yt));else $=e;$!==e?(S=a,a=si()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):O===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(Yt)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Ai(),a===e&&(a=Yn()),j[l]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===rt?(l=rt,i+=4):(l=e,O===0&&L(La)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=ni()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&L(dr)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&L(il)),l!==e?($=i,O++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Er)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+56,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,O===0&&L(st)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,C=i*76+57,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=Ln(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function sa(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=ra(),l!==e){for($=[],p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=Hn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Fe=i*76+60,ve=j[Fe];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.charCodeAt(i)===64?(l=_t,i++):(l=e,O===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,O===0&&L(kt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=sa(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=T,i++):(m=e,O===0&&L(ut)),m!==e){for(C=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=oe,i++):(M=e,O===0&&L(Ht)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?C=U:(i=C,C=e)}else i=C,C=e;for(C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=B,i++):(M=e,O===0&&L(qt)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Kr(),U===e&&(U=null),K=[],se=g();se!==e;)K.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,O===0&&L(st)),se!==e?(S=a,a=nu($,p,s,h,C,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Fe]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===dt?(l=dt,i+=2):(l=e,O===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=oe,i++):(x=e,O===0&&L(Ht)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=tt(),C!==e?d=C:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=B,i++):(x=e,O===0&&L(qt)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();for(C=Kr(),C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=J,i++):(M=e,O===0&&L(st)),M!==e?(S=a,a=au(p,d,C)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function na(){var a,l,$,p,s,u,d,h,x,m,C=i*76+62,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,O===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,O===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,O===0&&L(is)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+63,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,O===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,O===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,O===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,O===0&&L(st)),s!==e?(S=a,a=fi(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=nr()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+65,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===dt?(l=dt,i+=2):(l=e,O===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=_s(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=T,i++):(u=e,O===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===ce?(h=ce,i+=2):(h=e,O===0&&L(Js)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function _s(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=oi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function nr(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=ht,i++):(p=e,O===0&&L(Vs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Ir,i++):(h=e,O===0&&L(Fn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,It.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&L(ul)),l!==e){for($=[],yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Tn));p!==e;)$.push(p),yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&L(Tn));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function _i(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,O===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,O===0&&L(ft)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function je(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,O===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Kr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,O===0&&L(st)),u!==e?(S=a,a=tn(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=br()),j[d]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ct?(a=Ct,i+=2):(a=e,O===0&&L(fl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(Ha))),j[l]={nextPos:i,result:a},a)}function o(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&L(sr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(ol)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function y(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=q();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(bt=w(),bt!==e&&i===t.length)return bt;throw bt!==e&&i<t.length&&L(pe()),rn(Y,f<t.length?t.charAt(f):null,f<t.length?Ds(f,f+1):Ds(f,f))}const V2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function W2(t){return V2.includes(t.type)}function hw(t){return"chain"in t&&t.chain!==null}function G2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function J2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Z2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function jt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=jt(e.expr,r);break}case"return":{e.expr=jt(e.expr,r);break}case"each":{e.items=jt(e.items,r),e.for=jt(e.for,r);break}case"for":{e.from!=null&&(e.from=jt(e.from,r)),e.to!=null&&(e.to=jt(e.to,r)),e.times!=null&&(e.times=jt(e.times,r)),e.for=jt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=jt(e.expr,r),e.dest=jt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=jt(e.operands[n],r);break}case"not":{e.expr=jt(e.expr,r);break}case"if":{e.cond=jt(e.cond,r),e.then=jt(e.then,r);for(const n of e.elseif)n.cond=jt(n.cond,r),n.then=jt(n.then,r);e.else!=null&&(e.else=jt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=jt(e.children[n],r);break}case"match":{e.about=jt(e.about,r);for(const n of e.qs)n.q=jt(n.q,r),n.a=jt(n.a,r);e.default!=null&&(e.default=jt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=jt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],jt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=jt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"indexChain":{e.index=jt(e.index,r);break}case"call":{e.target=jt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"index":{e.target=jt(e.target,r),e.index=jt(e.index,r);break}case"prop":{e.target=jt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=jt(e.members[n],r);break}}if(hw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=jt(e.chain[n],r);return e}const yp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function wp(t){throw new lo(`Reserved word "${t}" cannot be used as variable name.`)}function Q2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{yp.includes(t.name)&&wp(t.name);break}case"meta":{t.name!=null&&yp.includes(t.name)&&wp(t.name);break}case"fn":{for(const r of t.args)yp.includes(r.name)&&wp(r.name);break}}return t}function X2(t){for(const r of t)jt(r,Q2);return t}function md(t){return{type:"simple",name:t}}function Y2(t,r){return{type:"generic",name:t,inners:r}}function eC(t,r){return{type:"fn",args:t,result:r}}function sh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=sh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>sh(n)).join(", "),e=sh(t.result);return`@(${r}) { ${e} }`}}}function Bo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return md(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Bo(t.inner):r=md("any"),Y2(t.name,[r])}}throw new lo(`Unknown type: '${sh(t)}'`)}else{const r=t.args.map(e=>Bo(e));return eC(r,Bo(t.result))}}function tC(t){switch(t.type){case"def":{t.varType!=null&&Bo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Bo(r.argType);t.retType!=null&&Bo(t.retType);break}}return t}function rC(t){for(const r of t)jt(r,tC);return t}function nh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=nh(n.expr.children)),r.push(n);else{if(e.length>0)throw new lo("invalid attribute.");switch(n.type){case"fn":{n.children=nh(n.children);break}case"block":{n.statements=nh(n.statements);break}}r.push(n)}if(e.length>0)throw new lo("invalid attribute.");return r}function sC(t){if(W2(t)&&hw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=G2(n,v.args,v.loc);break}case"indexChain":{n=J2(n,v.index,v.loc);break}case"propChain":{n=Z2(n,v.name,v.loc);break}}return n}return t}function nC(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],sC);return t}function ah(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function pw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return ah(t,r,e);{const{left:n,right:v,info:w}=t;return ah(n,pw(v,r,e),w)}}function Df(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Df(t.left),Df(t.right)]}}const aC={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Df(t.left),right:Df(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Df(t.left),right:Df(t.right)}),priority:3}};function iC(t){const r=t.operators.map(n=>{const v=aC[n];if(v==null)throw new lo(`No such operator: ${n}.`);return v});let e=ah(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=pw(e,t.operands[2+n],r[1+n]);return Df(e)}function lC(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],e=>e.type==="infix"?iC(e):e);return t}const Nf=class Nf{constructor(){he(this,"plugins");this.plugins={validate:[X2,rC],transform:[nh,nC,lC]}}static parse(r){return Nf.instance==null&&(Nf.instance=new Nf),Nf.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=wd(r,{startRule:"Preprocess"});e=wd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new lo(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new lo(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};he(Nf,"instance");let dv=Nf;const uC="0.14.1",fC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let yv=[],ec=null;function oC(t){return yv=dv.parse(t),JSON.stringify(yv,null,"	")}async function cC(t){ec==null||ec.abort(),ec=new Na({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:pv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:pv(e.val,!0),print:!1});break}}});try{await ec.exec(yv)}catch(r){t.err(r)}}const hC=Object.freeze(Object.defineProperty({__proto__:null,exec:cC,parse:oC,samples:fC,version:uC},Symbol.toStringTag,{value:"Module"})),pC=t=>(o0("data-v-c56fd67b"),t=t(),c0(),t),vC={id:"root"},gC={id:"grid1"},dC={class:"type"},yC={id:"grid2"},wC=pC(()=>zi("header",null,null,-1)),$d=["next","develop","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],xd="0.18.0",mC=mc({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:v,samples:w}={next:tb,develop:Lb,"0.18.0":A1,"0.17.0":iA,"0.16.0":HA,"0.15.0":k2,"0.14.1":hC}[r.ver],_=Ff(window.localStorage.getItem(v)??'<: "Hello, AiScript!"'),P=Ff([]),E=Ff(""),N=Ff(null);uc(_,()=>{window.localStorage.setItem(v,_.value);try{E.value=e(_.value),N.value=null}catch(H){const B=H;N.value=B.message,console.error("info"in B?B.info:B);return}},{immediate:!0});function T(){P.value=[],n({in:H=>new Promise(B=>{const J=window.prompt(H);B(J??"")}),out:H=>P.value.push(H),end:H=>P.value.push(H),err:H=>{console.error(H),window.alert(`${H}`)}})}return(H,B)=>(os(),Us("div",vC,[zi("div",gC,[cs(k$,{modelValue:_.value,"onUpdate:modelValue":B[0]||(B[0]=J=>_.value=J),samples:vc(w),parseError:N.value,onRun:T},null,8,["modelValue","samples","parseError"]),cs(rc,{id:"logs"},{header:Pa(()=>[Cu("Output")]),default:Pa(()=>[(os(!0),Us(xn,null,uh(P.value,J=>(os(),Us("div",{class:Cn(["log",[{print:J.print},J.type]]),key:J.id},[zi("span",dC,hf(J.type),1),Cu(" "+hf(J.text),1)],2))),128))]),_:1})]),zi("div",yC,[cs(rc,{id:"ast"},{header:Pa(()=>[Cu("AST")]),default:Pa(()=>[zi("pre",null,hf(E.value),1)]),_:1}),cs(rc,{id:"bin"},{header:Pa(()=>[Cu("Bytecode")]),default:Pa(()=>[wC]),_:1}),cs(rc,{id:"debugger"},{header:Pa(()=>[Cu("Debugger")]),_:1})])]))}}),$C=xc(mC,[["__scopeId","data-v-c56fd67b"]]),xC={id:"wrapper"},bC=mc({__name:"App",setup(t){const r=Ff(window.localStorage.getItem("version")??xd),e=Object.fromEntries($d.map(v=>[v,v+(v==xd?"(latest)":"")]));function n(v){r.value=v,window.localStorage.setItem("version",r.value)}return(v,w)=>(os(),Us("div",xC,[zi("h1",null,[Cu(" AiScript ( "),cs(My,{id:"version",options:vc(e),onSelect:n},{default:Pa(()=>[Cu(hf(r.value),1)]),_:1},8,["options"]),Cu(" ) Playground ")]),(os(!0),Us(xn,null,uh(vc($d),_=>(os(),Us("div",null,[_==r.value?(os(),Mh($C,{key:0,ver:_},null,8,["ver"])):zo("",!0)]))),256))]))}}),AC=xc(bC,[["__scopeId","data-v-caf8f745"]]);Bm(AC).mount("#app");
