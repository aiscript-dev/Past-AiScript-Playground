var ow=Object.defineProperty;var cw=(t,r,e)=>r in t?ow(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var he=(t,r,e)=>(cw(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))n(v);new MutationObserver(v=>{for(const w of v)if(w.type==="childList")for(const _ of w.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&n(_)}).observe(document,{childList:!0,subtree:!0});function e(v){const w={};return v.integrity&&(w.integrity=v.integrity),v.referrerPolicy&&(w.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?w.credentials="include":v.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function n(v){if(v.ep)return;v.ep=!0;const w=e(v);fetch(v.href,w)}})();/**
* @vue/shared v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function wv(t,r){const e=new Set(t.split(","));return r?n=>e.has(n.toLowerCase()):n=>e.has(n)}const rs={},xo=[],Bi=()=>{},hw=()=>!1,yh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),mv=t=>t.startsWith("onUpdate:"),Es=Object.assign,$v=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},pw=Object.prototype.hasOwnProperty,ur=(t,r)=>pw.call(t,r),gt=Array.isArray,bo=t=>wh(t)==="[object Map]",$d=t=>wh(t)==="[object Set]",Ot=t=>typeof t=="function",Ss=t=>typeof t=="string",io=t=>typeof t=="symbol",Zr=t=>t!==null&&typeof t=="object",xd=t=>(Zr(t)||Ot(t))&&Ot(t.then)&&Ot(t.catch),bd=Object.prototype.toString,wh=t=>bd.call(t),vw=t=>wh(t).slice(8,-1),Ad=t=>wh(t)==="[object Object]",xv=t=>Ss(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,sc=wv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),mh=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},gw=/-(\w)/g,qo=mh(t=>t.replace(gw,(r,e)=>e?e.toUpperCase():"")),dw=/\B([A-Z])/g,Vo=mh(t=>t.replace(dw,"-$1").toLowerCase()),Cd=mh(t=>t.charAt(0).toUpperCase()+t.slice(1)),jh=mh(t=>t?`on${Cd(t)}`:""),gf=(t,r)=>!Object.is(t,r),Rh=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},_d=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},yw=t=>{const r=parseFloat(t);return isNaN(r)?t:r},ww=t=>{const r=Ss(t)?Number(t):NaN;return isNaN(r)?t:r};let Jv;const Pd=()=>Jv||(Jv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bv(t){if(gt(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],v=Ss(n)?bw(n):bv(n);if(v)for(const w in v)r[w]=v[w]}return r}else if(Ss(t)||Zr(t))return t}const mw=/;(?![^(]*\))/g,$w=/:([^]+)/,xw=/\/\*[^]*?\*\//g;function bw(t){const r={};return t.replace(xw,"").split(mw).forEach(e=>{if(e){const n=e.split($w);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Cn(t){let r="";if(Ss(t))r=t;else if(gt(t))for(let e=0;e<t.length;e++){const n=Cn(t[e]);n&&(r+=n+" ")}else if(Zr(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const Aw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Cw=wv(Aw);function kd(t){return!!t||t===""}const jf=t=>Ss(t)?t:t==null?"":gt(t)||Zr(t)&&(t.toString===bd||!Ot(t.toString))?JSON.stringify(t,Md,2):String(t),Md=(t,r)=>r&&r.__v_isRef?Md(t,r.value):bo(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,v],w)=>(e[Dh(n,w)+" =>"]=v,e),{})}:$d(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>Dh(e))}:io(r)?Dh(r):Zr(r)&&!gt(r)&&!Ad(r)?String(r):r,Dh=(t,r="")=>{var e;return io(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $u;class _w{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$u,!r&&$u&&(this.index=($u.scopes||($u.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=$u;try{return $u=this,r()}finally{$u=e}}}on(){$u=this}off(){$u=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function Pw(t,r=$u){r&&r.active&&r.effects.push(t)}function kw(){return $u}let Rf;class Av{constructor(r,e,n,v){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Pw(this,v)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,yf();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(Mw(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),wf()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=hf,e=Rf;try{return hf=!0,Rf=this,this._runnings++,Zv(this),this.fn()}finally{Qv(this),this._runnings--,Rf=e,hf=r}}stop(){var r;this.active&&(Zv(this),Qv(this),(r=this.onStop)==null||r.call(this),this.active=!1)}}function Mw(t){return t.value}function Zv(t){t._trackId++,t._depsLength=0}function Qv(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)Ed(t.deps[r],t);t.deps.length=t._depsLength}}function Ed(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let hf=!0,wp=0;const Sd=[];function yf(){Sd.push(hf),hf=!1}function wf(){const t=Sd.pop();hf=t===void 0?!0:t}function Cv(){wp++}function _v(){for(wp--;!wp&&mp.length;)mp.shift()()}function Nd(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&Ed(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const mp=[];function Fd(t,r,e){Cv();for(const n of t.keys()){let v;n._dirtyLevel<r&&(v??(v=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(v??(v=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&mp.push(n.scheduler)))}_v()}const Td=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},$p=new WeakMap,Df=Symbol(""),xp=Symbol("");function ka(t,r,e){if(hf&&Rf){let n=$p.get(t);n||$p.set(t,n=new Map);let v=n.get(e);v||n.set(e,v=Td(()=>n.delete(e))),Nd(Rf,v)}}function qu(t,r,e,n,v,w){const _=$p.get(t);if(!_)return;let P=[];if(r==="clear")P=[..._.values()];else if(e==="length"&&gt(t)){const E=Number(n);_.forEach((N,O)=>{(O==="length"||!io(O)&&O>=E)&&P.push(N)})}else switch(e!==void 0&&P.push(_.get(e)),r){case"add":gt(t)?xv(e)&&P.push(_.get("length")):(P.push(_.get(Df)),bo(t)&&P.push(_.get(xp)));break;case"delete":gt(t)||(P.push(_.get(Df)),bo(t)&&P.push(_.get(xp)));break;case"set":bo(t)&&P.push(_.get(Df));break}Cv();for(const E of P)E&&Fd(E,4);_v()}const Ew=wv("__proto__,__v_isRef,__isVue"),Od=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(io)),Xv=Sw();function Sw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=mr(this);for(let w=0,_=this.length;w<_;w++)ka(n,"get",w+"");const v=n[r](...e);return v===-1||v===!1?n[r](...e.map(mr)):v}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){yf(),Cv();const n=mr(this)[r].apply(this,e);return _v(),wf(),n}}),t}function Nw(t){io(t)||(t=String(t));const r=mr(this);return ka(r,"has",t),r.hasOwnProperty(t)}class Id{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const v=this._isReadonly,w=this._isShallow;if(e==="__v_isReactive")return!v;if(e==="__v_isReadonly")return v;if(e==="__v_isShallow")return w;if(e==="__v_raw")return n===(v?w?zw:Ld:w?Dd:Rd).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const _=gt(r);if(!v){if(_&&ur(Xv,e))return Reflect.get(Xv,e,n);if(e==="hasOwnProperty")return Nw}const P=Reflect.get(r,e,n);return(io(e)?Od.has(e):Ew(e))||(v||ka(r,"get",e),w)?P:Ma(P)?_&&xv(e)?P:P.value:Zr(P)?v?Hd(P):Mv(P):P}}class jd extends Id{constructor(r=!1){super(!1,r)}set(r,e,n,v){let w=r[e];if(!this._isShallow){const E=hc(w);if(!ih(n)&&!hc(n)&&(w=mr(w),n=mr(n)),!gt(r)&&Ma(w)&&!Ma(n))return E?!1:(w.value=n,!0)}const _=gt(r)&&xv(e)?Number(e)<r.length:ur(r,e),P=Reflect.set(r,e,n,v);return r===mr(v)&&(_?gf(n,w)&&qu(r,"set",e,n):qu(r,"add",e,n)),P}deleteProperty(r,e){const n=ur(r,e);r[e];const v=Reflect.deleteProperty(r,e);return v&&n&&qu(r,"delete",e,void 0),v}has(r,e){const n=Reflect.has(r,e);return(!io(e)||!Od.has(e))&&ka(r,"has",e),n}ownKeys(r){return ka(r,"iterate",gt(r)?"length":Df),Reflect.ownKeys(r)}}class Fw extends Id{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Tw=new jd,Ow=new Fw,Iw=new jd(!0);const Pv=t=>t,$h=t=>Reflect.getPrototypeOf(t);function Cc(t,r,e=!1,n=!1){t=t.__v_raw;const v=mr(t),w=mr(r);e||(gf(r,w)&&ka(v,"get",r),ka(v,"get",w));const{has:_}=$h(v),P=n?Pv:e?Sv:pc;if(_.call(v,r))return P(t.get(r));if(_.call(v,w))return P(t.get(w));t!==v&&t.get(r)}function _c(t,r=!1){const e=this.__v_raw,n=mr(e),v=mr(t);return r||(gf(t,v)&&ka(n,"has",t),ka(n,"has",v)),t===v?e.has(t):e.has(t)||e.has(v)}function Pc(t,r=!1){return t=t.__v_raw,!r&&ka(mr(t),"iterate",Df),Reflect.get(t,"size",t)}function Yv(t){t=mr(t);const r=mr(this);return $h(r).has.call(r,t)||(r.add(t),qu(r,"add",t,t)),this}function eg(t,r){r=mr(r);const e=mr(this),{has:n,get:v}=$h(e);let w=n.call(e,t);w||(t=mr(t),w=n.call(e,t));const _=v.call(e,t);return e.set(t,r),w?gf(r,_)&&qu(e,"set",t,r):qu(e,"add",t,r),this}function tg(t){const r=mr(this),{has:e,get:n}=$h(r);let v=e.call(r,t);v||(t=mr(t),v=e.call(r,t)),n&&n.call(r,t);const w=r.delete(t);return v&&qu(r,"delete",t,void 0),w}function rg(){const t=mr(this),r=t.size!==0,e=t.clear();return r&&qu(t,"clear",void 0,void 0),e}function kc(t,r){return function(n,v){const w=this,_=w.__v_raw,P=mr(_),E=r?Pv:t?Sv:pc;return!t&&ka(P,"iterate",Df),_.forEach((N,O)=>n.call(v,E(N),E(O),w))}}function Mc(t,r,e){return function(...n){const v=this.__v_raw,w=mr(v),_=bo(w),P=t==="entries"||t===Symbol.iterator&&_,E=t==="keys"&&_,N=v[t](...n),O=e?Pv:r?Sv:pc;return!r&&ka(w,"iterate",E?xp:Df),{next(){const{value:H,done:B}=N.next();return B?{value:H,done:B}:{value:P?[O(H[0]),O(H[1])]:O(H),done:B}},[Symbol.iterator](){return this}}}}function Zu(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function jw(){const t={get(w){return Cc(this,w)},get size(){return Pc(this)},has:_c,add:Yv,set:eg,delete:tg,clear:rg,forEach:kc(!1,!1)},r={get(w){return Cc(this,w,!1,!0)},get size(){return Pc(this)},has:_c,add:Yv,set:eg,delete:tg,clear:rg,forEach:kc(!1,!0)},e={get(w){return Cc(this,w,!0)},get size(){return Pc(this,!0)},has(w){return _c.call(this,w,!0)},add:Zu("add"),set:Zu("set"),delete:Zu("delete"),clear:Zu("clear"),forEach:kc(!0,!1)},n={get(w){return Cc(this,w,!0,!0)},get size(){return Pc(this,!0)},has(w){return _c.call(this,w,!0)},add:Zu("add"),set:Zu("set"),delete:Zu("delete"),clear:Zu("clear"),forEach:kc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(w=>{t[w]=Mc(w,!1,!1),e[w]=Mc(w,!0,!1),r[w]=Mc(w,!1,!0),n[w]=Mc(w,!0,!0)}),[t,e,r,n]}const[Rw,Dw,Lw,Hw]=jw();function kv(t,r){const e=r?t?Hw:Lw:t?Dw:Rw;return(n,v,w)=>v==="__v_isReactive"?!t:v==="__v_isReadonly"?t:v==="__v_raw"?n:Reflect.get(ur(e,v)&&v in n?e:n,v,w)}const Uw={get:kv(!1,!1)},Bw={get:kv(!1,!0)},qw={get:kv(!0,!1)};const Rd=new WeakMap,Dd=new WeakMap,Ld=new WeakMap,zw=new WeakMap;function Kw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vw(t){return t.__v_skip||!Object.isExtensible(t)?0:Kw(vw(t))}function Mv(t){return hc(t)?t:Ev(t,!1,Tw,Uw,Rd)}function Ww(t){return Ev(t,!1,Iw,Bw,Dd)}function Hd(t){return Ev(t,!0,Ow,qw,Ld)}function Ev(t,r,e,n,v){if(!Zr(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const w=v.get(t);if(w)return w;const _=Vw(t);if(_===0)return t;const P=new Proxy(t,_===2?n:e);return v.set(t,P),P}function nc(t){return hc(t)?nc(t.__v_raw):!!(t&&t.__v_isReactive)}function hc(t){return!!(t&&t.__v_isReadonly)}function ih(t){return!!(t&&t.__v_isShallow)}function Ud(t){return t?!!t.__v_raw:!1}function mr(t){const r=t&&t.__v_raw;return r?mr(r):t}function Gw(t){return Object.isExtensible(t)&&_d(t,"__v_skip",!0),t}const pc=t=>Zr(t)?Mv(t):t,Sv=t=>Zr(t)?Hd(t):t;class Bd{constructor(r,e,n,v){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Av(()=>r(this._value),()=>Ic(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=n}get value(){const r=mr(this);return(!r._cacheable||r.effect.dirty)&&gf(r._value,r._value=r.effect.run())&&Ic(r,4),qd(r),r.effect._dirtyLevel>=2&&Ic(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function Jw(t,r,e=!1){let n,v;const w=Ot(t);return w?(n=t,v=Bi):(n=t.get,v=t.set),new Bd(n,v,w||!v,e)}function qd(t){var r;hf&&Rf&&(t=mr(t),Nd(Rf,(r=t.dep)!=null?r:t.dep=Td(()=>t.dep=void 0,t instanceof Bd?t:void 0)))}function Ic(t,r=4,e){t=mr(t);const n=t.dep;n&&Fd(n,r)}function Ma(t){return!!(t&&t.__v_isRef===!0)}function Ef(t){return Zw(t,!1)}function Zw(t,r){return Ma(t)?t:new Qw(t,r)}class Qw{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:mr(r),this._value=e?r:pc(r)}get value(){return qd(this),this._value}set value(r){const e=this.__v_isShallow||ih(r)||hc(r);r=e?r:mr(r),gf(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:pc(r),Ic(this,4))}}function vc(t){return Ma(t)?t.value:t}const Xw={get:(t,r,e)=>vc(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const v=t[r];return Ma(v)&&!Ma(e)?(v.value=e,!0):Reflect.set(t,r,e,n)}};function zd(t){return nc(t)?t:new Proxy(t,Xw)}/**
* @vue/runtime-core v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pf(t,r,e,n){try{return n?t(...n):t()}catch(v){xh(v,r,e)}}function zi(t,r,e,n){if(Ot(t)){const v=pf(t,r,e,n);return v&&xd(v)&&v.catch(w=>{xh(w,r,e)}),v}if(gt(t)){const v=[];for(let w=0;w<t.length;w++)v.push(zi(t[w],r,e,n));return v}}function xh(t,r,e,n=!0){const v=r?r.vnode:null;if(r){let w=r.parent;const _=r.proxy,P=`https://vuejs.org/error-reference/#runtime-${e}`;for(;w;){const N=w.ec;if(N){for(let O=0;O<N.length;O++)if(N[O](t,_,P)===!1)return}w=w.parent}const E=r.appContext.config.errorHandler;if(E){yf(),pf(E,null,10,[t,_,P]),wf();return}}Yw(t,e,v,n)}function Yw(t,r,e,n=!0){console.error(t)}let gc=!1,bp=!1;const bn=[];let Fu=0;const Ao=[];let sf=null,Pf=0;const Kd=Promise.resolve();let Nv=null;function e0(t){const r=Nv||Kd;return t?r.then(this?t.bind(this):t):r}function t0(t){let r=Fu+1,e=bn.length;for(;r<e;){const n=r+e>>>1,v=bn[n],w=dc(v);w<t||w===t&&v.pre?r=n+1:e=n}return r}function Fv(t){(!bn.length||!bn.includes(t,gc&&t.allowRecurse?Fu+1:Fu))&&(t.id==null?bn.push(t):bn.splice(t0(t.id),0,t),Vd())}function Vd(){!gc&&!bp&&(bp=!0,Nv=Kd.then(Gd))}function r0(t){const r=bn.indexOf(t);r>Fu&&bn.splice(r,1)}function s0(t){gt(t)?Ao.push(...t):(!sf||!sf.includes(t,t.allowRecurse?Pf+1:Pf))&&Ao.push(t),Vd()}function sg(t,r,e=gc?Fu+1:0){for(;e<bn.length;e++){const n=bn[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;bn.splice(e,1),e--,n()}}}function Wd(t){if(Ao.length){const r=[...new Set(Ao)].sort((e,n)=>dc(e)-dc(n));if(Ao.length=0,sf){sf.push(...r);return}for(sf=r,Pf=0;Pf<sf.length;Pf++)sf[Pf]();sf=null,Pf=0}}const dc=t=>t.id==null?1/0:t.id,n0=(t,r)=>{const e=dc(t)-dc(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Gd(t){bp=!1,gc=!0,bn.sort(n0);try{for(Fu=0;Fu<bn.length;Fu++){const r=bn[Fu];r&&r.active!==!1&&pf(r,null,14)}}finally{Fu=0,bn.length=0,Wd(),gc=!1,Nv=null,(bn.length||Ao.length)&&Gd()}}function a0(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||rs;let v=e;const w=r.startsWith("update:"),_=w&&r.slice(7);if(_&&_ in n){const O=`${_==="modelValue"?"model":_}Modifiers`,{number:H,trim:B}=n[O]||rs;B&&(v=e.map(J=>Ss(J)?J.trim():J)),H&&(v=e.map(yw))}let P,E=n[P=jh(r)]||n[P=jh(qo(r))];!E&&w&&(E=n[P=jh(Vo(r))]),E&&zi(E,t,6,v);const N=n[P+"Once"];if(N){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,zi(N,t,6,v)}}function Jd(t,r,e=!1){const n=r.emitsCache,v=n.get(t);if(v!==void 0)return v;const w=t.emits;let _={},P=!1;if(!Ot(t)){const E=N=>{const O=Jd(N,r,!0);O&&(P=!0,Es(_,O))};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!w&&!P?(Zr(t)&&n.set(t,null),null):(gt(w)?w.forEach(E=>_[E]=null):Es(_,w),Zr(t)&&n.set(t,_),_)}function bh(t,r){return!t||!yh(r)?!1:(r=r.slice(2).replace(/Once$/,""),ur(t,r[0].toLowerCase()+r.slice(1))||ur(t,Vo(r))||ur(t,r))}let ca=null,Ah=null;function lh(t){const r=ca;return ca=t,Ah=t&&t.type.__scopeId||null,r}function i0(t){Ah=t}function l0(){Ah=null}function Pa(t,r=ca,e){if(!r||t._n)return t;const n=(...v)=>{n._d&&vg(-1);const w=lh(r);let _;try{_=t(...v)}finally{lh(w),n._d&&vg(1)}return _};return n._n=!0,n._c=!0,n._d=!0,n}function Lh(t){const{type:r,vnode:e,proxy:n,withProxy:v,propsOptions:[w],slots:_,attrs:P,emit:E,render:N,renderCache:O,props:H,data:B,setupState:J,ctx:we,inheritAttrs:ue}=t,oe=lh(t);let Pe,G;try{if(e.shapeFlag&4){const Z=v||n,Q=Z;Pe=Nu(N.call(Q,Z,O,H,J,B,we)),G=P}else{const Z=r;Pe=Nu(Z.length>1?Z(H,{attrs:P,slots:_,emit:E}):Z(H,null)),G=r.props?P:u0(P)}}catch(Z){fc.length=0,xh(Z,t,1),Pe=cs(Ki)}let V=Pe;if(G&&ue!==!1){const Z=Object.keys(G),{shapeFlag:Q}=V;Z.length&&Q&7&&(w&&Z.some(mv)&&(G=f0(G,w)),V=df(V,G))}return e.dirs&&(V=df(V),V.dirs=V.dirs?V.dirs.concat(e.dirs):e.dirs),e.transition&&(V.transition=e.transition),Pe=V,lh(oe),Pe}const u0=t=>{let r;for(const e in t)(e==="class"||e==="style"||yh(e))&&((r||(r={}))[e]=t[e]);return r},f0=(t,r)=>{const e={};for(const n in t)(!mv(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function o0(t,r,e){const{props:n,children:v,component:w}=t,{props:_,children:P,patchFlag:E}=r,N=w.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&E>=0){if(E&1024)return!0;if(E&16)return n?ng(n,_,N):!!_;if(E&8){const O=r.dynamicProps;for(let H=0;H<O.length;H++){const B=O[H];if(_[B]!==n[B]&&!bh(N,B))return!0}}}else return(v||P)&&(!P||!P.$stable)?!0:n===_?!1:n?_?ng(n,_,N):!0:!!_;return!1}function ng(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let v=0;v<n.length;v++){const w=n[v];if(r[w]!==t[w]&&!bh(e,w))return!0}return!1}function c0({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const h0=Symbol.for("v-ndc"),p0=t=>t.__isSuspense;function v0(t,r){r&&r.pendingBranch?gt(t)?r.effects.push(...t):r.effects.push(t):s0(t)}const g0=Symbol.for("v-scx"),d0=()=>Rc(g0),Ec={};function ac(t,r,e){return Zd(t,r,e)}function Zd(t,r,{immediate:e,deep:n,flush:v,once:w,onTrack:_,onTrigger:P}=rs){if(r&&w){const X=r;r=(...ee)=>{X(...ee),Q()}}const E=An,N=X=>n===!0?X:$o(X,n===!1?1:void 0);let O,H=!1,B=!1;if(Ma(t)?(O=()=>t.value,H=ih(t)):nc(t)?(O=()=>N(t),H=!0):gt(t)?(B=!0,H=t.some(X=>nc(X)||ih(X)),O=()=>t.map(X=>{if(Ma(X))return X.value;if(nc(X))return N(X);if(Ot(X))return pf(X,E,2)})):Ot(t)?r?O=()=>pf(t,E,2):O=()=>(J&&J(),zi(t,E,3,[we])):O=Bi,r&&n){const X=O;O=()=>$o(X())}let J,we=X=>{J=V.onStop=()=>{pf(X,E,4),J=V.onStop=void 0}},ue;if(Mh)if(we=Bi,r?e&&zi(r,E,3,[O(),B?[]:void 0,we]):O(),v==="sync"){const X=d0();ue=X.__watcherHandles||(X.__watcherHandles=[])}else return Bi;let oe=B?new Array(t.length).fill(Ec):Ec;const Pe=()=>{if(!(!V.active||!V.dirty))if(r){const X=V.run();(n||H||(B?X.some((ee,ne)=>gf(ee,oe[ne])):gf(X,oe)))&&(J&&J(),zi(r,E,3,[X,oe===Ec?void 0:B&&oe[0]===Ec?[]:oe,we]),oe=X)}else V.run()};Pe.allowRecurse=!!r;let G;v==="sync"?G=Pe:v==="post"?G=()=>da(Pe,E&&E.suspense):(Pe.pre=!0,E&&(Pe.id=E.uid),G=()=>Fv(Pe));const V=new Av(O,Bi,G),Z=kw(),Q=()=>{V.stop(),Z&&$v(Z.effects,V)};return r?e?Pe():oe=V.run():v==="post"?da(V.run.bind(V),E&&E.suspense):V.run(),ue&&ue.push(Q),Q}function y0(t,r,e){const n=this.proxy,v=Ss(t)?t.includes(".")?Qd(n,t):()=>n[t]:t.bind(n,n);let w;Ot(r)?w=r:(w=r.handler,e=r);const _=$c(this),P=Zd(v,w.bind(n),e);return _(),P}function Qd(t,r){const e=r.split(".");return()=>{let n=t;for(let v=0;v<e.length&&n;v++)n=n[e[v]];return n}}function $o(t,r,e=0,n){if(!Zr(t)||t.__v_skip)return t;if(r&&r>0){if(e>=r)return t;e++}if(n=n||new Set,n.has(t))return t;if(n.add(t),Ma(t))$o(t.value,r,e,n);else if(gt(t))for(let v=0;v<t.length;v++)$o(t[v],r,e,n);else if($d(t)||bo(t))t.forEach(v=>{$o(v,r,e,n)});else if(Ad(t))for(const v in t)$o(t[v],r,e,n);return t}function bf(t,r,e,n){const v=t.dirs,w=r&&r.dirs;for(let _=0;_<v.length;_++){const P=v[_];w&&(P.oldValue=w[_].value);let E=P.dir[n];E&&(yf(),zi(E,e,8,[t.el,P,t,r]),wf())}}const nf=Symbol("_leaveCb"),Sc=Symbol("_enterCb");function w0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ry(()=>{t.isMounted=!0}),sy(()=>{t.isUnmounting=!0}),t}const Ri=[Function,Array],Xd={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ri,onEnter:Ri,onAfterEnter:Ri,onEnterCancelled:Ri,onBeforeLeave:Ri,onLeave:Ri,onAfterLeave:Ri,onLeaveCancelled:Ri,onBeforeAppear:Ri,onAppear:Ri,onAfterAppear:Ri,onAppearCancelled:Ri},m0={name:"BaseTransition",props:Xd,setup(t,{slots:r}){const e=sm(),n=w0();return()=>{const v=r.default&&ey(r.default(),!0);if(!v||!v.length)return;let w=v[0];if(v.length>1){for(const B of v)if(B.type!==Ki){w=B;break}}const _=mr(t),{mode:P}=_;if(n.isLeaving)return Hh(w);const E=ag(w);if(!E)return Hh(w);const N=Ap(E,_,n,e);Cp(E,N);const O=e.subTree,H=O&&ag(O);if(H&&H.type!==Ki&&!kf(E,H)){const B=Ap(H,_,n,e);if(Cp(H,B),P==="out-in")return n.isLeaving=!0,B.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},Hh(w);P==="in-out"&&E.type!==Ki&&(B.delayLeave=(J,we,ue)=>{const oe=Yd(n,H);oe[String(H.key)]=H,J[nf]=()=>{we(),J[nf]=void 0,delete N.delayedLeave},N.delayedLeave=ue})}return w}}},$0=m0;function Yd(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Ap(t,r,e,n){const{appear:v,mode:w,persisted:_=!1,onBeforeEnter:P,onEnter:E,onAfterEnter:N,onEnterCancelled:O,onBeforeLeave:H,onLeave:B,onAfterLeave:J,onLeaveCancelled:we,onBeforeAppear:ue,onAppear:oe,onAfterAppear:Pe,onAppearCancelled:G}=r,V=String(t.key),Z=Yd(e,t),Q=(ne,ie)=>{ne&&zi(ne,n,9,ie)},X=(ne,ie)=>{const Te=ie[1];Q(ne,ie),gt(ne)?ne.every(Le=>Le.length<=1)&&Te():ne.length<=1&&Te()},ee={mode:w,persisted:_,beforeEnter(ne){let ie=P;if(!e.isMounted)if(v)ie=ue||P;else return;ne[nf]&&ne[nf](!0);const Te=Z[V];Te&&kf(t,Te)&&Te.el[nf]&&Te.el[nf](),Q(ie,[ne])},enter(ne){let ie=E,Te=N,Le=O;if(!e.isMounted)if(v)ie=oe||E,Te=Pe||N,Le=G||O;else return;let _e=!1;const at=ne[Sc]=wt=>{_e||(_e=!0,wt?Q(Le,[ne]):Q(Te,[ne]),ee.delayedLeave&&ee.delayedLeave(),ne[Sc]=void 0)};ie?X(ie,[ne,at]):at()},leave(ne,ie){const Te=String(t.key);if(ne[Sc]&&ne[Sc](!0),e.isUnmounting)return ie();Q(H,[ne]);let Le=!1;const _e=ne[nf]=at=>{Le||(Le=!0,ie(),at?Q(we,[ne]):Q(J,[ne]),ne[nf]=void 0,Z[Te]===t&&delete Z[Te])};Z[Te]=t,B?X(B,[ne,_e]):_e()},clone(ne){return Ap(ne,r,e,n)}};return ee}function Hh(t){if(Ch(t))return t=df(t),t.children=null,t}function ag(t){if(!Ch(t))return t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&Ot(e.default))return e.default()}}function Cp(t,r){t.shapeFlag&6&&t.component?Cp(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function ey(t,r=!1,e){let n=[],v=0;for(let w=0;w<t.length;w++){let _=t[w];const P=e==null?_.key:String(e)+String(_.key!=null?_.key:w);_.type===xn?(_.patchFlag&128&&v++,n=n.concat(ey(_.children,r,P))):(r||_.type!==Ki)&&n.push(P!=null?df(_,{key:P}):_)}if(v>1)for(let w=0;w<n.length;w++)n[w].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function mc(t,r){return Ot(t)?Es({name:t.name},r,{setup:t}):t}const ic=t=>!!t.type.__asyncLoader,Ch=t=>t.type.__isKeepAlive;function x0(t,r){ty(t,"a",r)}function b0(t,r){ty(t,"da",r)}function ty(t,r,e=An){const n=t.__wdc||(t.__wdc=()=>{let v=e;for(;v;){if(v.isDeactivated)return;v=v.parent}return t()});if(_h(r,n,e),e){let v=e.parent;for(;v&&v.parent;)Ch(v.parent.vnode)&&A0(n,r,e,v),v=v.parent}}function A0(t,r,e,n){const v=_h(r,t,n,!0);ny(()=>{$v(n[r],v)},e)}function _h(t,r,e=An,n=!1){if(e){const v=e[t]||(e[t]=[]),w=r.__weh||(r.__weh=(..._)=>{if(e.isUnmounted)return;yf();const P=$c(e),E=zi(r,e,t,_);return P(),wf(),E});return n?v.unshift(w):v.push(w),w}}const zu=t=>(r,e=An)=>(!Mh||t==="sp")&&_h(t,(...n)=>r(...n),e),C0=zu("bm"),ry=zu("m"),_0=zu("bu"),P0=zu("u"),sy=zu("bum"),ny=zu("um"),k0=zu("sp"),M0=zu("rtg"),E0=zu("rtc");function S0(t,r=An){_h("ec",t,r)}function uh(t,r,e,n){let v;const w=e&&e[n];if(gt(t)||Ss(t)){v=new Array(t.length);for(let _=0,P=t.length;_<P;_++)v[_]=r(t[_],_,void 0,w&&w[_])}else if(typeof t=="number"){v=new Array(t);for(let _=0;_<t;_++)v[_]=r(_+1,_,void 0,w&&w[_])}else if(Zr(t))if(t[Symbol.iterator])v=Array.from(t,(_,P)=>r(_,P,void 0,w&&w[P]));else{const _=Object.keys(t);v=new Array(_.length);for(let P=0,E=_.length;P<E;P++){const N=_[P];v[P]=r(t[N],N,P,w&&w[P])}}else v=[];return e&&(e[n]=v),v}function jc(t,r,e={},n,v){if(ca.isCE||ca.parent&&ic(ca.parent)&&ca.parent.isCE)return r!=="default"&&(e.name=r),cs("slot",e,n&&n());let w=t[r];w&&w._c&&(w._d=!1),os();const _=w&&ay(w(e)),P=kh(xn,{key:e.key||_&&_.key||`_${r}`},_||(n?n():[]),_&&t._===1?64:-2);return!v&&P.scopeId&&(P.slotScopeIds=[P.scopeId+"-s"]),w&&w._c&&(w._d=!0),P}function ay(t){return t.some(r=>oh(r)?!(r.type===Ki||r.type===xn&&!ay(r.children)):!0)?t:null}const _p=t=>t?$y(t)?jv(t)||t.proxy:_p(t.parent):null,lc=Es(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>_p(t.parent),$root:t=>_p(t.root),$emit:t=>t.emit,$options:t=>Tv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Fv(t.update)}),$nextTick:t=>t.n||(t.n=e0.bind(t.proxy)),$watch:t=>y0.bind(t)}),Uh=(t,r)=>t!==rs&&!t.__isScriptSetup&&ur(t,r),N0={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:n,data:v,props:w,accessCache:_,type:P,appContext:E}=t;let N;if(r[0]!=="$"){const J=_[r];if(J!==void 0)switch(J){case 1:return n[r];case 2:return v[r];case 4:return e[r];case 3:return w[r]}else{if(Uh(n,r))return _[r]=1,n[r];if(v!==rs&&ur(v,r))return _[r]=2,v[r];if((N=t.propsOptions[0])&&ur(N,r))return _[r]=3,w[r];if(e!==rs&&ur(e,r))return _[r]=4,e[r];Pp&&(_[r]=0)}}const O=lc[r];let H,B;if(O)return r==="$attrs"&&ka(t.attrs,"get",""),O(t);if((H=P.__cssModules)&&(H=H[r]))return H;if(e!==rs&&ur(e,r))return _[r]=4,e[r];if(B=E.config.globalProperties,ur(B,r))return B[r]},set({_:t},r,e){const{data:n,setupState:v,ctx:w}=t;return Uh(v,r)?(v[r]=e,!0):n!==rs&&ur(n,r)?(n[r]=e,!0):ur(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(w[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:v,propsOptions:w}},_){let P;return!!e[_]||t!==rs&&ur(t,_)||Uh(r,_)||(P=w[0])&&ur(P,_)||ur(n,_)||ur(lc,_)||ur(v.config.globalProperties,_)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:ur(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function ig(t){return gt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let Pp=!0;function F0(t){const r=Tv(t),e=t.proxy,n=t.ctx;Pp=!1,r.beforeCreate&&lg(r.beforeCreate,t,"bc");const{data:v,computed:w,methods:_,watch:P,provide:E,inject:N,created:O,beforeMount:H,mounted:B,beforeUpdate:J,updated:we,activated:ue,deactivated:oe,beforeDestroy:Pe,beforeUnmount:G,destroyed:V,unmounted:Z,render:Q,renderTracked:X,renderTriggered:ee,errorCaptured:ne,serverPrefetch:ie,expose:Te,inheritAttrs:Le,components:_e,directives:at,filters:wt}=r;if(N&&T0(N,n,null),_)for(const dt in _){const Ze=_[dt];Ot(Ze)&&(n[dt]=Ze.bind(e))}if(v){const dt=v.call(e,e);Zr(dt)&&(t.data=Mv(dt))}if(Pp=!0,w)for(const dt in w){const Ze=w[dt],yt=Ot(Ze)?Ze.bind(e,e):Ot(Ze.get)?Ze.get.bind(e,e):Bi,Jt=!Ot(Ze)&&Ot(Ze.set)?Ze.set.bind(e):Bi,Zt=fm({get:yt,set:Jt});Object.defineProperty(n,dt,{enumerable:!0,configurable:!0,get:()=>Zt.value,set:ht=>Zt.value=ht})}if(P)for(const dt in P)iy(P[dt],n,e,dt);if(E){const dt=Ot(E)?E.call(e):E;Reflect.ownKeys(dt).forEach(Ze=>{L0(Ze,dt[Ze])})}O&&lg(O,t,"c");function mt(dt,Ze){gt(Ze)?Ze.forEach(yt=>dt(yt.bind(e))):Ze&&dt(Ze.bind(e))}if(mt(C0,H),mt(ry,B),mt(_0,J),mt(P0,we),mt(x0,ue),mt(b0,oe),mt(S0,ne),mt(E0,X),mt(M0,ee),mt(sy,G),mt(ny,Z),mt(k0,ie),gt(Te))if(Te.length){const dt=t.exposed||(t.exposed={});Te.forEach(Ze=>{Object.defineProperty(dt,Ze,{get:()=>e[Ze],set:yt=>e[Ze]=yt})})}else t.exposed||(t.exposed={});Q&&t.render===Bi&&(t.render=Q),Le!=null&&(t.inheritAttrs=Le),_e&&(t.components=_e),at&&(t.directives=at)}function T0(t,r,e=Bi){gt(t)&&(t=kp(t));for(const n in t){const v=t[n];let w;Zr(v)?"default"in v?w=Rc(v.from||n,v.default,!0):w=Rc(v.from||n):w=Rc(v),Ma(w)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>w.value,set:_=>w.value=_}):r[n]=w}}function lg(t,r,e){zi(gt(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function iy(t,r,e,n){const v=n.includes(".")?Qd(e,n):()=>e[n];if(Ss(t)){const w=r[t];Ot(w)&&ac(v,w)}else if(Ot(t))ac(v,t.bind(e));else if(Zr(t))if(gt(t))t.forEach(w=>iy(w,r,e,n));else{const w=Ot(t.handler)?t.handler.bind(e):r[t.handler];Ot(w)&&ac(v,w,t)}}function Tv(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:v,optionsCache:w,config:{optionMergeStrategies:_}}=t.appContext,P=w.get(r);let E;return P?E=P:!v.length&&!e&&!n?E=r:(E={},v.length&&v.forEach(N=>fh(E,N,_,!0)),fh(E,r,_)),Zr(r)&&w.set(r,E),E}function fh(t,r,e,n=!1){const{mixins:v,extends:w}=r;w&&fh(t,w,e,!0),v&&v.forEach(_=>fh(t,_,e,!0));for(const _ in r)if(!(n&&_==="expose")){const P=O0[_]||e&&e[_];t[_]=P?P(t[_],r[_]):r[_]}return t}const O0={data:ug,props:fg,emits:fg,methods:tc,computed:tc,beforeCreate:ia,created:ia,beforeMount:ia,mounted:ia,beforeUpdate:ia,updated:ia,beforeDestroy:ia,beforeUnmount:ia,destroyed:ia,unmounted:ia,activated:ia,deactivated:ia,errorCaptured:ia,serverPrefetch:ia,components:tc,directives:tc,watch:j0,provide:ug,inject:I0};function ug(t,r){return r?t?function(){return Es(Ot(t)?t.call(this,this):t,Ot(r)?r.call(this,this):r)}:r:t}function I0(t,r){return tc(kp(t),kp(r))}function kp(t){if(gt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function ia(t,r){return t?[...new Set([].concat(t,r))]:r}function tc(t,r){return t?Es(Object.create(null),t,r):r}function fg(t,r){return t?gt(t)&&gt(r)?[...new Set([...t,...r])]:Es(Object.create(null),ig(t),ig(r??{})):r}function j0(t,r){if(!t)return r;if(!r)return t;const e=Es(Object.create(null),t);for(const n in r)e[n]=ia(t[n],r[n]);return e}function ly(){return{app:null,config:{isNativeTag:hw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let R0=0;function D0(t,r){return function(n,v=null){Ot(n)||(n=Es({},n)),v!=null&&!Zr(v)&&(v=null);const w=ly(),_=new WeakSet;let P=!1;const E=w.app={_uid:R0++,_component:n,_props:v,_container:null,_context:w,_instance:null,version:om,get config(){return w.config},set config(N){},use(N,...O){return _.has(N)||(N&&Ot(N.install)?(_.add(N),N.install(E,...O)):Ot(N)&&(_.add(N),N(E,...O))),E},mixin(N){return w.mixins.includes(N)||w.mixins.push(N),E},component(N,O){return O?(w.components[N]=O,E):w.components[N]},directive(N,O){return O?(w.directives[N]=O,E):w.directives[N]},mount(N,O,H){if(!P){const B=cs(n,v);return B.appContext=w,H===!0?H="svg":H===!1&&(H=void 0),O&&r?r(B,N):t(B,N,H),P=!0,E._container=N,N.__vue_app__=E,jv(B.component)||B.component.proxy}},unmount(){P&&(t(null,E._container),delete E._container.__vue_app__)},provide(N,O){return w.provides[N]=O,E},runWithContext(N){const O=uc;uc=E;try{return N()}finally{uc=O}}};return E}}let uc=null;function L0(t,r){if(An){let e=An.provides;const n=An.parent&&An.parent.provides;n===e&&(e=An.provides=Object.create(n)),e[t]=r}}function Rc(t,r,e=!1){const n=An||ca;if(n||uc){const v=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:uc._context.provides;if(v&&t in v)return v[t];if(arguments.length>1)return e&&Ot(r)?r.call(n&&n.proxy):r}}const uy={},fy=()=>Object.create(uy),oy=t=>Object.getPrototypeOf(t)===uy;function H0(t,r,e,n=!1){const v={},w=fy();t.propsDefaults=Object.create(null),cy(t,r,v,w);for(const _ in t.propsOptions[0])_ in v||(v[_]=void 0);e?t.props=n?v:Ww(v):t.type.props?t.props=v:t.props=w,t.attrs=w}function U0(t,r,e,n){const{props:v,attrs:w,vnode:{patchFlag:_}}=t,P=mr(v),[E]=t.propsOptions;let N=!1;if((n||_>0)&&!(_&16)){if(_&8){const O=t.vnode.dynamicProps;for(let H=0;H<O.length;H++){let B=O[H];if(bh(t.emitsOptions,B))continue;const J=r[B];if(E)if(ur(w,B))J!==w[B]&&(w[B]=J,N=!0);else{const we=qo(B);v[we]=Mp(E,P,we,J,t,!1)}else J!==w[B]&&(w[B]=J,N=!0)}}}else{cy(t,r,v,w)&&(N=!0);let O;for(const H in P)(!r||!ur(r,H)&&((O=Vo(H))===H||!ur(r,O)))&&(E?e&&(e[H]!==void 0||e[O]!==void 0)&&(v[H]=Mp(E,P,H,void 0,t,!0)):delete v[H]);if(w!==P)for(const H in w)(!r||!ur(r,H))&&(delete w[H],N=!0)}N&&qu(t.attrs,"set","")}function cy(t,r,e,n){const[v,w]=t.propsOptions;let _=!1,P;if(r)for(let E in r){if(sc(E))continue;const N=r[E];let O;v&&ur(v,O=qo(E))?!w||!w.includes(O)?e[O]=N:(P||(P={}))[O]=N:bh(t.emitsOptions,E)||(!(E in n)||N!==n[E])&&(n[E]=N,_=!0)}if(w){const E=mr(e),N=P||rs;for(let O=0;O<w.length;O++){const H=w[O];e[H]=Mp(v,E,H,N[H],t,!ur(N,H))}}return _}function Mp(t,r,e,n,v,w){const _=t[e];if(_!=null){const P=ur(_,"default");if(P&&n===void 0){const E=_.default;if(_.type!==Function&&!_.skipFactory&&Ot(E)){const{propsDefaults:N}=v;if(e in N)n=N[e];else{const O=$c(v);n=N[e]=E.call(null,r),O()}}else n=E}_[0]&&(w&&!P?n=!1:_[1]&&(n===""||n===Vo(e))&&(n=!0))}return n}function hy(t,r,e=!1){const n=r.propsCache,v=n.get(t);if(v)return v;const w=t.props,_={},P=[];let E=!1;if(!Ot(t)){const O=H=>{E=!0;const[B,J]=hy(H,r,!0);Es(_,B),J&&P.push(...J)};!e&&r.mixins.length&&r.mixins.forEach(O),t.extends&&O(t.extends),t.mixins&&t.mixins.forEach(O)}if(!w&&!E)return Zr(t)&&n.set(t,xo),xo;if(gt(w))for(let O=0;O<w.length;O++){const H=qo(w[O]);og(H)&&(_[H]=rs)}else if(w)for(const O in w){const H=qo(O);if(og(H)){const B=w[O],J=_[H]=gt(B)||Ot(B)?{type:B}:Es({},B);if(J){const we=pg(Boolean,J.type),ue=pg(String,J.type);J[0]=we>-1,J[1]=ue<0||we<ue,(we>-1||ur(J,"default"))&&P.push(H)}}}const N=[_,P];return Zr(t)&&n.set(t,N),N}function og(t){return t[0]!=="$"&&!sc(t)}function cg(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function hg(t,r){return cg(t)===cg(r)}function pg(t,r){return gt(r)?r.findIndex(e=>hg(e,t)):Ot(r)&&hg(r,t)?0:-1}const py=t=>t[0]==="_"||t==="$stable",Ov=t=>gt(t)?t.map(Nu):[Nu(t)],B0=(t,r,e)=>{if(r._n)return r;const n=Pa((...v)=>Ov(r(...v)),e);return n._c=!1,n},vy=(t,r,e)=>{const n=t._ctx;for(const v in t){if(py(v))continue;const w=t[v];if(Ot(w))r[v]=B0(v,w,n);else if(w!=null){const _=Ov(w);r[v]=()=>_}}},gy=(t,r)=>{const e=Ov(r);t.slots.default=()=>e},q0=(t,r)=>{const e=t.slots=fy();if(t.vnode.shapeFlag&32){const n=r._;n?(Es(e,r),_d(e,"_",n)):vy(r,e)}else r&&gy(t,r)},z0=(t,r,e)=>{const{vnode:n,slots:v}=t;let w=!0,_=rs;if(n.shapeFlag&32){const P=r._;P?e&&P===1?w=!1:(Es(v,r),!e&&P===1&&delete v._):(w=!r.$stable,vy(r,v)),_=r}else r&&(gy(t,r),_={default:1});if(w)for(const P in v)!py(P)&&_[P]==null&&delete v[P]};function Ep(t,r,e,n,v=!1){if(gt(t)){t.forEach((B,J)=>Ep(B,r&&(gt(r)?r[J]:r),e,n,v));return}if(ic(n)&&!v)return;const w=n.shapeFlag&4?jv(n.component)||n.component.proxy:n.el,_=v?null:w,{i:P,r:E}=t,N=r&&r.r,O=P.refs===rs?P.refs={}:P.refs,H=P.setupState;if(N!=null&&N!==E&&(Ss(N)?(O[N]=null,ur(H,N)&&(H[N]=null)):Ma(N)&&(N.value=null)),Ot(E))pf(E,P,12,[_,O]);else{const B=Ss(E),J=Ma(E);if(B||J){const we=()=>{if(t.f){const ue=B?ur(H,E)?H[E]:O[E]:E.value;v?gt(ue)&&$v(ue,w):gt(ue)?ue.includes(w)||ue.push(w):B?(O[E]=[w],ur(H,E)&&(H[E]=O[E])):(E.value=[w],t.k&&(O[t.k]=E.value))}else B?(O[E]=_,ur(H,E)&&(H[E]=_)):J&&(E.value=_,t.k&&(O[t.k]=_))};_?(we.id=-1,da(we,e)):we()}}}const da=v0;function K0(t){return V0(t)}function V0(t,r){const e=Pd();e.__VUE__=!0;const{insert:n,remove:v,patchProp:w,createElement:_,createText:P,createComment:E,setText:N,setElementText:O,parentNode:H,nextSibling:B,setScopeId:J=Bi,insertStaticContent:we}=t,ue=(W,re,fe,xe=null,ce=null,Me=null,Oe=void 0,Ae=null,ke=!!re.dynamicChildren)=>{if(W===re)return;W&&!kf(W,re)&&(xe=Ar(W),ht(W,ce,Me,!0),W=null),re.patchFlag===-2&&(ke=!1,re.dynamicChildren=null);const{type:$e,ref:Je,shapeFlag:rt}=re;switch($e){case Ph:oe(W,re,fe,xe);break;case Ki:Pe(W,re,fe,xe);break;case qh:W==null&&G(re,fe,xe,Oe);break;case xn:_e(W,re,fe,xe,ce,Me,Oe,Ae,ke);break;default:rt&1?Q(W,re,fe,xe,ce,Me,Oe,Ae,ke):rt&6?at(W,re,fe,xe,ce,Me,Oe,Ae,ke):(rt&64||rt&128)&&$e.process(W,re,fe,xe,ce,Me,Oe,Ae,ke,jr)}Je!=null&&ce&&Ep(Je,W&&W.ref,Me,re||W,!re)},oe=(W,re,fe,xe)=>{if(W==null)n(re.el=P(re.children),fe,xe);else{const ce=re.el=W.el;re.children!==W.children&&N(ce,re.children)}},Pe=(W,re,fe,xe)=>{W==null?n(re.el=E(re.children||""),fe,xe):re.el=W.el},G=(W,re,fe,xe)=>{[W.el,W.anchor]=we(W.children,re,fe,xe,W.el,W.anchor)},V=({el:W,anchor:re},fe,xe)=>{let ce;for(;W&&W!==re;)ce=B(W),n(W,fe,xe),W=ce;n(re,fe,xe)},Z=({el:W,anchor:re})=>{let fe;for(;W&&W!==re;)fe=B(W),v(W),W=fe;v(re)},Q=(W,re,fe,xe,ce,Me,Oe,Ae,ke)=>{re.type==="svg"?Oe="svg":re.type==="math"&&(Oe="mathml"),W==null?X(re,fe,xe,ce,Me,Oe,Ae,ke):ie(W,re,ce,Me,Oe,Ae,ke)},X=(W,re,fe,xe,ce,Me,Oe,Ae)=>{let ke,$e;const{props:Je,shapeFlag:rt,transition:Ye,dirs:Qe}=W;if(ke=W.el=_(W.type,Me,Je&&Je.is,Je),rt&8?O(ke,W.children):rt&16&&ne(W.children,ke,null,xe,ce,Bh(W,Me),Oe,Ae),Qe&&bf(W,null,xe,"created"),ee(ke,W,W.scopeId,Oe,xe),Je){for(const $t in Je)$t!=="value"&&!sc($t)&&w(ke,$t,null,Je[$t],Me,W.children,xe,ce,Bt);"value"in Je&&w(ke,"value",null,Je.value,Me),($e=Je.onVnodeBeforeMount)&&Pu($e,xe,W)}Qe&&bf(W,null,xe,"beforeMount");const lt=W0(ce,Ye);lt&&Ye.beforeEnter(ke),n(ke,re,fe),(($e=Je&&Je.onVnodeMounted)||lt||Qe)&&da(()=>{$e&&Pu($e,xe,W),lt&&Ye.enter(ke),Qe&&bf(W,null,xe,"mounted")},ce)},ee=(W,re,fe,xe,ce)=>{if(fe&&J(W,fe),xe)for(let Me=0;Me<xe.length;Me++)J(W,xe[Me]);if(ce){let Me=ce.subTree;if(re===Me){const Oe=ce.vnode;ee(W,Oe,Oe.scopeId,Oe.slotScopeIds,ce.parent)}}},ne=(W,re,fe,xe,ce,Me,Oe,Ae,ke=0)=>{for(let $e=ke;$e<W.length;$e++){const Je=W[$e]=Ae?af(W[$e]):Nu(W[$e]);ue(null,Je,re,fe,xe,ce,Me,Oe,Ae)}},ie=(W,re,fe,xe,ce,Me,Oe)=>{const Ae=re.el=W.el;let{patchFlag:ke,dynamicChildren:$e,dirs:Je}=re;ke|=W.patchFlag&16;const rt=W.props||rs,Ye=re.props||rs;let Qe;if(fe&&Af(fe,!1),(Qe=Ye.onVnodeBeforeUpdate)&&Pu(Qe,fe,re,W),Je&&bf(re,W,fe,"beforeUpdate"),fe&&Af(fe,!0),$e?Te(W.dynamicChildren,$e,Ae,fe,xe,Bh(re,ce),Me):Oe||Ze(W,re,Ae,null,fe,xe,Bh(re,ce),Me,!1),ke>0){if(ke&16)Le(Ae,re,rt,Ye,fe,xe,ce);else if(ke&2&&rt.class!==Ye.class&&w(Ae,"class",null,Ye.class,ce),ke&4&&w(Ae,"style",rt.style,Ye.style,ce),ke&8){const lt=re.dynamicProps;for(let $t=0;$t<lt.length;$t++){const Nt=lt[$t],Ct=rt[Nt],_t=Ye[Nt];(_t!==Ct||Nt==="value")&&w(Ae,Nt,Ct,_t,ce,W.children,fe,xe,Bt)}}ke&1&&W.children!==re.children&&O(Ae,re.children)}else!Oe&&$e==null&&Le(Ae,re,rt,Ye,fe,xe,ce);((Qe=Ye.onVnodeUpdated)||Je)&&da(()=>{Qe&&Pu(Qe,fe,re,W),Je&&bf(re,W,fe,"updated")},xe)},Te=(W,re,fe,xe,ce,Me,Oe)=>{for(let Ae=0;Ae<re.length;Ae++){const ke=W[Ae],$e=re[Ae],Je=ke.el&&(ke.type===xn||!kf(ke,$e)||ke.shapeFlag&70)?H(ke.el):fe;ue(ke,$e,Je,null,xe,ce,Me,Oe,!0)}},Le=(W,re,fe,xe,ce,Me,Oe)=>{if(fe!==xe){if(fe!==rs)for(const Ae in fe)!sc(Ae)&&!(Ae in xe)&&w(W,Ae,fe[Ae],null,Oe,re.children,ce,Me,Bt);for(const Ae in xe){if(sc(Ae))continue;const ke=xe[Ae],$e=fe[Ae];ke!==$e&&Ae!=="value"&&w(W,Ae,$e,ke,Oe,re.children,ce,Me,Bt)}"value"in xe&&w(W,"value",fe.value,xe.value,Oe)}},_e=(W,re,fe,xe,ce,Me,Oe,Ae,ke)=>{const $e=re.el=W?W.el:P(""),Je=re.anchor=W?W.anchor:P("");let{patchFlag:rt,dynamicChildren:Ye,slotScopeIds:Qe}=re;Qe&&(Ae=Ae?Ae.concat(Qe):Qe),W==null?(n($e,fe,xe),n(Je,fe,xe),ne(re.children||[],fe,Je,ce,Me,Oe,Ae,ke)):rt>0&&rt&64&&Ye&&W.dynamicChildren?(Te(W.dynamicChildren,Ye,fe,ce,Me,Oe,Ae),(re.key!=null||ce&&re===ce.subTree)&&dy(W,re,!0)):Ze(W,re,fe,Je,ce,Me,Oe,Ae,ke)},at=(W,re,fe,xe,ce,Me,Oe,Ae,ke)=>{re.slotScopeIds=Ae,W==null?re.shapeFlag&512?ce.ctx.activate(re,fe,xe,Oe,ke):wt(re,fe,xe,ce,Me,Oe,ke):fr(W,re,ke)},wt=(W,re,fe,xe,ce,Me,Oe)=>{const Ae=W.component=rm(W,xe,ce);if(Ch(W)&&(Ae.ctx.renderer=jr),nm(Ae),Ae.asyncDep){if(ce&&ce.registerDep(Ae,mt),!W.el){const ke=Ae.subTree=cs(Ki);Pe(null,ke,re,fe)}}else mt(Ae,W,re,fe,ce,Me,Oe)},fr=(W,re,fe)=>{const xe=re.component=W.component;if(o0(W,re,fe))if(xe.asyncDep&&!xe.asyncResolved){dt(xe,re,fe);return}else xe.next=re,r0(xe.update),xe.effect.dirty=!0,xe.update();else re.el=W.el,xe.vnode=re},mt=(W,re,fe,xe,ce,Me,Oe)=>{const Ae=()=>{if(W.isMounted){let{next:Je,bu:rt,u:Ye,parent:Qe,vnode:lt}=W;{const ot=yy(W);if(ot){Je&&(Je.el=lt.el,dt(W,Je,Oe)),ot.asyncDep.then(()=>{W.isUnmounted||Ae()});return}}let $t=Je,Nt;Af(W,!1),Je?(Je.el=lt.el,dt(W,Je,Oe)):Je=lt,rt&&Rh(rt),(Nt=Je.props&&Je.props.onVnodeBeforeUpdate)&&Pu(Nt,Qe,Je,lt),Af(W,!0);const Ct=Lh(W),_t=W.subTree;W.subTree=Ct,ue(_t,Ct,H(_t.el),Ar(_t),W,ce,Me),Je.el=Ct.el,$t===null&&c0(W,Ct.el),Ye&&da(Ye,ce),(Nt=Je.props&&Je.props.onVnodeUpdated)&&da(()=>Pu(Nt,Qe,Je,lt),ce)}else{let Je;const{el:rt,props:Ye}=re,{bm:Qe,m:lt,parent:$t}=W,Nt=ic(re);if(Af(W,!1),Qe&&Rh(Qe),!Nt&&(Je=Ye&&Ye.onVnodeBeforeMount)&&Pu(Je,$t,re),Af(W,!0),rt&&$r){const Ct=()=>{W.subTree=Lh(W),$r(rt,W.subTree,W,ce,null)};Nt?re.type.__asyncLoader().then(()=>!W.isUnmounted&&Ct()):Ct()}else{const Ct=W.subTree=Lh(W);ue(null,Ct,fe,xe,W,ce,Me),re.el=Ct.el}if(lt&&da(lt,ce),!Nt&&(Je=Ye&&Ye.onVnodeMounted)){const Ct=re;da(()=>Pu(Je,$t,Ct),ce)}(re.shapeFlag&256||$t&&ic($t.vnode)&&$t.vnode.shapeFlag&256)&&W.a&&da(W.a,ce),W.isMounted=!0,re=fe=xe=null}},ke=W.effect=new Av(Ae,Bi,()=>Fv($e),W.scope),$e=W.update=()=>{ke.dirty&&ke.run()};$e.id=W.uid,Af(W,!0),$e()},dt=(W,re,fe)=>{re.component=W;const xe=W.vnode.props;W.vnode=re,W.next=null,U0(W,re.props,xe,fe),z0(W,re.children,fe),yf(),sg(W),wf()},Ze=(W,re,fe,xe,ce,Me,Oe,Ae,ke=!1)=>{const $e=W&&W.children,Je=W?W.shapeFlag:0,rt=re.children,{patchFlag:Ye,shapeFlag:Qe}=re;if(Ye>0){if(Ye&128){Jt($e,rt,fe,xe,ce,Me,Oe,Ae,ke);return}else if(Ye&256){yt($e,rt,fe,xe,ce,Me,Oe,Ae,ke);return}}Qe&8?(Je&16&&Bt($e,ce,Me),rt!==$e&&O(fe,rt)):Je&16?Qe&16?Jt($e,rt,fe,xe,ce,Me,Oe,Ae,ke):Bt($e,ce,Me,!0):(Je&8&&O(fe,""),Qe&16&&ne(rt,fe,xe,ce,Me,Oe,Ae,ke))},yt=(W,re,fe,xe,ce,Me,Oe,Ae,ke)=>{W=W||xo,re=re||xo;const $e=W.length,Je=re.length,rt=Math.min($e,Je);let Ye;for(Ye=0;Ye<rt;Ye++){const Qe=re[Ye]=ke?af(re[Ye]):Nu(re[Ye]);ue(W[Ye],Qe,fe,null,ce,Me,Oe,Ae,ke)}$e>Je?Bt(W,ce,Me,!0,!1,rt):ne(re,fe,xe,ce,Me,Oe,Ae,ke,rt)},Jt=(W,re,fe,xe,ce,Me,Oe,Ae,ke)=>{let $e=0;const Je=re.length;let rt=W.length-1,Ye=Je-1;for(;$e<=rt&&$e<=Ye;){const Qe=W[$e],lt=re[$e]=ke?af(re[$e]):Nu(re[$e]);if(kf(Qe,lt))ue(Qe,lt,fe,null,ce,Me,Oe,Ae,ke);else break;$e++}for(;$e<=rt&&$e<=Ye;){const Qe=W[rt],lt=re[Ye]=ke?af(re[Ye]):Nu(re[Ye]);if(kf(Qe,lt))ue(Qe,lt,fe,null,ce,Me,Oe,Ae,ke);else break;rt--,Ye--}if($e>rt){if($e<=Ye){const Qe=Ye+1,lt=Qe<Je?re[Qe].el:xe;for(;$e<=Ye;)ue(null,re[$e]=ke?af(re[$e]):Nu(re[$e]),fe,lt,ce,Me,Oe,Ae,ke),$e++}}else if($e>Ye)for(;$e<=rt;)ht(W[$e],ce,Me,!0),$e++;else{const Qe=$e,lt=$e,$t=new Map;for($e=lt;$e<=Ye;$e++){const xt=re[$e]=ke?af(re[$e]):Nu(re[$e]);xt.key!=null&&$t.set(xt.key,$e)}let Nt,Ct=0;const _t=Ye-lt+1;let ot=!1,ks=0;const as=new Array(_t);for($e=0;$e<_t;$e++)as[$e]=0;for($e=Qe;$e<=rt;$e++){const xt=W[$e];if(Ct>=_t){ht(xt,ce,Me,!0);continue}let It;if(xt.key!=null)It=$t.get(xt.key);else for(Nt=lt;Nt<=Ye;Nt++)if(as[Nt-lt]===0&&kf(xt,re[Nt])){It=Nt;break}It===void 0?ht(xt,ce,Me,!0):(as[It-lt]=$e+1,It>=ks?ks=It:ot=!0,ue(xt,re[It],fe,null,ce,Me,Oe,Ae,ke),Ct++)}const Xr=ot?G0(as):xo;for(Nt=Xr.length-1,$e=_t-1;$e>=0;$e--){const xt=lt+$e,It=re[xt],yn=xt+1<Je?re[xt+1].el:xe;as[$e]===0?ue(null,It,fe,yn,ce,Me,Oe,Ae,ke):ot&&(Nt<0||$e!==Xr[Nt]?Zt(It,fe,yn,2):Nt--)}}},Zt=(W,re,fe,xe,ce=null)=>{const{el:Me,type:Oe,transition:Ae,children:ke,shapeFlag:$e}=W;if($e&6){Zt(W.component.subTree,re,fe,xe);return}if($e&128){W.suspense.move(re,fe,xe);return}if($e&64){Oe.move(W,re,fe,jr);return}if(Oe===xn){n(Me,re,fe);for(let rt=0;rt<ke.length;rt++)Zt(ke[rt],re,fe,xe);n(W.anchor,re,fe);return}if(Oe===qh){V(W,re,fe);return}if(xe!==2&&$e&1&&Ae)if(xe===0)Ae.beforeEnter(Me),n(Me,re,fe),da(()=>Ae.enter(Me),ce);else{const{leave:rt,delayLeave:Ye,afterLeave:Qe}=Ae,lt=()=>n(Me,re,fe),$t=()=>{rt(Me,()=>{lt(),Qe&&Qe()})};Ye?Ye(Me,lt,$t):$t()}else n(Me,re,fe)},ht=(W,re,fe,xe=!1,ce=!1)=>{const{type:Me,props:Oe,ref:Ae,children:ke,dynamicChildren:$e,shapeFlag:Je,patchFlag:rt,dirs:Ye}=W;if(Ae!=null&&Ep(Ae,null,fe,W,!0),Je&256){re.ctx.deactivate(W);return}const Qe=Je&1&&Ye,lt=!ic(W);let $t;if(lt&&($t=Oe&&Oe.onVnodeBeforeUnmount)&&Pu($t,re,W),Je&6)Pr(W.component,fe,xe);else{if(Je&128){W.suspense.unmount(fe,xe);return}Qe&&bf(W,null,re,"beforeUnmount"),Je&64?W.type.remove(W,re,fe,ce,jr,xe):$e&&(Me!==xn||rt>0&&rt&64)?Bt($e,re,fe,!1,!0):(Me===xn&&rt&384||!ce&&Je&16)&&Bt(ke,re,fe),xe&&Ir(W)}(lt&&($t=Oe&&Oe.onVnodeUnmounted)||Qe)&&da(()=>{$t&&Pu($t,re,W),Qe&&bf(W,null,re,"unmounted")},fe)},Ir=W=>{const{type:re,el:fe,anchor:xe,transition:ce}=W;if(re===xn){Qt(fe,xe);return}if(re===qh){Z(W);return}const Me=()=>{v(fe),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(W.shapeFlag&1&&ce&&!ce.persisted){const{leave:Oe,delayLeave:Ae}=ce,ke=()=>Oe(fe,Me);Ae?Ae(W.el,Me,ke):ke()}else Me()},Qt=(W,re)=>{let fe;for(;W!==re;)fe=B(W),v(W),W=fe;v(re)},Pr=(W,re,fe)=>{const{bum:xe,scope:ce,update:Me,subTree:Oe,um:Ae}=W;xe&&Rh(xe),ce.stop(),Me&&(Me.active=!1,ht(Oe,W,re,fe)),Ae&&da(Ae,re),da(()=>{W.isUnmounted=!0},re),re&&re.pendingBranch&&!re.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===re.pendingId&&(re.deps--,re.deps===0&&re.resolve())},Bt=(W,re,fe,xe=!1,ce=!1,Me=0)=>{for(let Oe=Me;Oe<W.length;Oe++)ht(W[Oe],re,fe,xe,ce)},Ar=W=>W.shapeFlag&6?Ar(W.component.subTree):W.shapeFlag&128?W.suspense.next():B(W.anchor||W.el);let Ur=!1;const tr=(W,re,fe)=>{W==null?re._vnode&&ht(re._vnode,null,null,!0):ue(re._vnode||null,W,re,null,null,null,fe),Ur||(Ur=!0,sg(),Wd(),Ur=!1),re._vnode=W},jr={p:ue,um:ht,m:Zt,r:Ir,mt:wt,mc:ne,pc:Ze,pbc:Te,n:Ar,o:t};let Xt,$r;return r&&([Xt,$r]=r(jr)),{render:tr,hydrate:Xt,createApp:D0(tr,Xt)}}function Bh({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function Af({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function W0(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function dy(t,r,e=!1){const n=t.children,v=r.children;if(gt(n)&&gt(v))for(let w=0;w<n.length;w++){const _=n[w];let P=v[w];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=v[w]=af(v[w]),P.el=_.el),e||dy(_,P)),P.type===Ph&&(P.el=_.el)}}function G0(t){const r=t.slice(),e=[0];let n,v,w,_,P;const E=t.length;for(n=0;n<E;n++){const N=t[n];if(N!==0){if(v=e[e.length-1],t[v]<N){r[n]=v,e.push(n);continue}for(w=0,_=e.length-1;w<_;)P=w+_>>1,t[e[P]]<N?w=P+1:_=P;N<t[e[w]]&&(w>0&&(r[n]=e[w-1]),e[w]=n)}}for(w=e.length,_=e[w-1];w-- >0;)e[w]=_,_=r[_];return e}function yy(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:yy(r)}const J0=t=>t.__isTeleport,xn=Symbol.for("v-fgt"),Ph=Symbol.for("v-txt"),Ki=Symbol.for("v-cmt"),qh=Symbol.for("v-stc"),fc=[];let _u=null;function os(t=!1){fc.push(_u=t?null:[])}function Z0(){fc.pop(),_u=fc[fc.length-1]||null}let yc=1;function vg(t){yc+=t}function wy(t){return t.dynamicChildren=yc>0?_u||xo:null,Z0(),yc>0&&_u&&_u.push(t),t}function Us(t,r,e,n,v,w){return wy(qi(t,r,e,n,v,w,!0))}function kh(t,r,e,n,v){return wy(cs(t,r,e,n,v,!0))}function oh(t){return t?t.__v_isVNode===!0:!1}function kf(t,r){return t.type===r.type&&t.key===r.key}const my=({key:t})=>t??null,Dc=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ss(t)||Ma(t)||Ot(t)?{i:ca,r:t,k:r,f:!!e}:t:null);function qi(t,r=null,e=null,n=0,v=null,w=t===xn?0:1,_=!1,P=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&my(r),ref:r&&Dc(r),scopeId:Ah,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:w,patchFlag:n,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:ca};return P?(Iv(E,e),w&128&&t.normalize(E)):e&&(E.shapeFlag|=Ss(e)?8:16),yc>0&&!_&&_u&&(E.patchFlag>0||w&6)&&E.patchFlag!==32&&_u.push(E),E}const cs=Q0;function Q0(t,r=null,e=null,n=0,v=null,w=!1){if((!t||t===h0)&&(t=Ki),oh(t)){const P=df(t,r,!0);return e&&Iv(P,e),yc>0&&!w&&_u&&(P.shapeFlag&6?_u[_u.indexOf(t)]=P:_u.push(P)),P.patchFlag|=-2,P}if(um(t)&&(t=t.__vccOpts),r){r=X0(r);let{class:P,style:E}=r;P&&!Ss(P)&&(r.class=Cn(P)),Zr(E)&&(Ud(E)&&!gt(E)&&(E=Es({},E)),r.style=bv(E))}const _=Ss(t)?1:p0(t)?128:J0(t)?64:Zr(t)?4:Ot(t)?2:0;return qi(t,r,e,n,v,_,w,!0)}function X0(t){return t?Ud(t)||oy(t)?Es({},t):t:null}function df(t,r,e=!1){const{props:n,ref:v,patchFlag:w,children:_}=t,P=r?Y0(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:P,key:P&&my(P),ref:r&&r.ref?e&&v?gt(v)?v.concat(Dc(r)):[v,Dc(r)]:Dc(r):v,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:_,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==xn?w===-1?16:w|16:w,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&df(t.ssContent),ssFallback:t.ssFallback&&df(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Cu(t=" ",r=0){return cs(Ph,null,t,r)}function zo(t="",r=!1){return r?(os(),kh(Ki,null,t)):cs(Ki,null,t)}function Nu(t){return t==null||typeof t=="boolean"?cs(Ki):gt(t)?cs(xn,null,t.slice()):typeof t=="object"?af(t):cs(Ph,null,String(t))}function af(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:df(t)}function Iv(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(gt(r))e=16;else if(typeof r=="object")if(n&65){const v=r.default;v&&(v._c&&(v._d=!1),Iv(t,v()),v._c&&(v._d=!0));return}else{e=32;const v=r._;!v&&!oy(r)?r._ctx=ca:v===3&&ca&&(ca.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else Ot(r)?(r={default:r,_ctx:ca},e=32):(r=String(r),n&64?(e=16,r=[Cu(r)]):e=8);t.children=r,t.shapeFlag|=e}function Y0(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const v in n)if(v==="class")r.class!==n.class&&(r.class=Cn([r.class,n.class]));else if(v==="style")r.style=bv([r.style,n.style]);else if(yh(v)){const w=r[v],_=n[v];_&&w!==_&&!(gt(w)&&w.includes(_))&&(r[v]=w?[].concat(w,_):_)}else v!==""&&(r[v]=n[v])}return r}function Pu(t,r,e,n=null){zi(t,r,7,[e,n])}const em=ly();let tm=0;function rm(t,r,e){const n=t.type,v=(r?r.appContext:t.appContext)||em,w={uid:tm++,vnode:t,type:n,parent:r,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new _w(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hy(n,v),emitsOptions:Jd(n,v),emit:null,emitted:null,propsDefaults:rs,inheritAttrs:n.inheritAttrs,ctx:rs,data:rs,props:rs,attrs:rs,slots:rs,refs:rs,setupState:rs,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return w.ctx={_:w},w.root=r?r.root:w,w.emit=a0.bind(null,w),t.ce&&t.ce(w),w}let An=null;const sm=()=>An||ca;let ch,Sp;{const t=Pd(),r=(e,n)=>{let v;return(v=t[e])||(v=t[e]=[]),v.push(n),w=>{v.length>1?v.forEach(_=>_(w)):v[0](w)}};ch=r("__VUE_INSTANCE_SETTERS__",e=>An=e),Sp=r("__VUE_SSR_SETTERS__",e=>Mh=e)}const $c=t=>{const r=An;return ch(t),t.scope.on(),()=>{t.scope.off(),ch(r)}},gg=()=>{An&&An.scope.off(),ch(null)};function $y(t){return t.vnode.shapeFlag&4}let Mh=!1;function nm(t,r=!1){r&&Sp(r);const{props:e,children:n}=t.vnode,v=$y(t);H0(t,e,v,r),q0(t,n);const w=v?am(t,r):void 0;return r&&Sp(!1),w}function am(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,N0);const{setup:n}=e;if(n){const v=t.setupContext=n.length>1?lm(t):null,w=$c(t);yf();const _=pf(n,t,0,[t.props,v]);if(wf(),w(),xd(_)){if(_.then(gg,gg),r)return _.then(P=>{dg(t,P,r)}).catch(P=>{xh(P,t,0)});t.asyncDep=_}else dg(t,_,r)}else xy(t,r)}function dg(t,r,e){Ot(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:Zr(r)&&(t.setupState=zd(r)),xy(t,e)}let yg;function xy(t,r,e){const n=t.type;if(!t.render){if(!r&&yg&&!n.render){const v=n.template||Tv(t).template;if(v){const{isCustomElement:w,compilerOptions:_}=t.appContext.config,{delimiters:P,compilerOptions:E}=n,N=Es(Es({isCustomElement:w,delimiters:P},_),E);n.render=yg(v,N)}}t.render=n.render||Bi}{const v=$c(t);yf();try{F0(t)}finally{wf(),v()}}}const im={get(t,r){return ka(t,"get",""),t[r]}};function lm(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,im),slots:t.slots,emit:t.emit,expose:r}}function jv(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(zd(Gw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in lc)return lc[e](t)},has(r,e){return e in r||e in lc}}))}function um(t){return Ot(t)&&"__vccOpts"in t}const fm=(t,r)=>Jw(t,r,Mh);function Yu(t,r,e){const n=arguments.length;return n===2?Zr(r)&&!gt(r)?oh(r)?cs(t,null,[r]):cs(t,r):cs(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&oh(e)&&(e=[e]),cs(t,r,e))}const om="3.4.25";/**
* @vue/runtime-dom v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const cm="http://www.w3.org/2000/svg",hm="http://www.w3.org/1998/Math/MathML",lf=typeof document<"u"?document:null,wg=lf&&lf.createElement("template"),pm={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const v=r==="svg"?lf.createElementNS(cm,t):r==="mathml"?lf.createElementNS(hm,t):lf.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&v.setAttribute("multiple",n.multiple),v},createText:t=>lf.createTextNode(t),createComment:t=>lf.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>lf.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,v,w){const _=e?e.previousSibling:r.lastChild;if(v&&(v===w||v.nextSibling))for(;r.insertBefore(v.cloneNode(!0),e),!(v===w||!(v=v.nextSibling)););else{wg.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const P=wg.content;if(n==="svg"||n==="mathml"){const E=P.firstChild;for(;E.firstChild;)P.appendChild(E.firstChild);P.removeChild(E)}r.insertBefore(P,e)}return[_?_.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},Qu="transition",Wo="animation",wc=Symbol("_vtc"),Rv=(t,{slots:r})=>Yu($0,vm(t),r);Rv.displayName="Transition";const by={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Rv.props=Es({},Xd,by);const Cf=(t,r=[])=>{gt(t)?t.forEach(e=>e(...r)):t&&t(...r)},mg=t=>t?gt(t)?t.some(r=>r.length>1):t.length>1:!1;function vm(t){const r={};for(const _e in t)_e in by||(r[_e]=t[_e]);if(t.css===!1)return r;const{name:e="v",type:n,duration:v,enterFromClass:w=`${e}-enter-from`,enterActiveClass:_=`${e}-enter-active`,enterToClass:P=`${e}-enter-to`,appearFromClass:E=w,appearActiveClass:N=_,appearToClass:O=P,leaveFromClass:H=`${e}-leave-from`,leaveActiveClass:B=`${e}-leave-active`,leaveToClass:J=`${e}-leave-to`}=t,we=gm(v),ue=we&&we[0],oe=we&&we[1],{onBeforeEnter:Pe,onEnter:G,onEnterCancelled:V,onLeave:Z,onLeaveCancelled:Q,onBeforeAppear:X=Pe,onAppear:ee=G,onAppearCancelled:ne=V}=r,ie=(_e,at,wt)=>{_f(_e,at?O:P),_f(_e,at?N:_),wt&&wt()},Te=(_e,at)=>{_e._isLeaving=!1,_f(_e,H),_f(_e,J),_f(_e,B),at&&at()},Le=_e=>(at,wt)=>{const fr=_e?ee:G,mt=()=>ie(at,_e,wt);Cf(fr,[at,mt]),$g(()=>{_f(at,_e?E:w),Xu(at,_e?O:P),mg(fr)||xg(at,n,ue,mt)})};return Es(r,{onBeforeEnter(_e){Cf(Pe,[_e]),Xu(_e,w),Xu(_e,_)},onBeforeAppear(_e){Cf(X,[_e]),Xu(_e,E),Xu(_e,N)},onEnter:Le(!1),onAppear:Le(!0),onLeave(_e,at){_e._isLeaving=!0;const wt=()=>Te(_e,at);Xu(_e,H),Xu(_e,B),wm(),$g(()=>{_e._isLeaving&&(_f(_e,H),Xu(_e,J),mg(Z)||xg(_e,n,oe,wt))}),Cf(Z,[_e,wt])},onEnterCancelled(_e){ie(_e,!1),Cf(V,[_e])},onAppearCancelled(_e){ie(_e,!0),Cf(ne,[_e])},onLeaveCancelled(_e){Te(_e),Cf(Q,[_e])}})}function gm(t){if(t==null)return null;if(Zr(t))return[zh(t.enter),zh(t.leave)];{const r=zh(t);return[r,r]}}function zh(t){return ww(t)}function Xu(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[wc]||(t[wc]=new Set)).add(r)}function _f(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[wc];e&&(e.delete(r),e.size||(t[wc]=void 0))}function $g(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let dm=0;function xg(t,r,e,n){const v=t._endId=++dm,w=()=>{v===t._endId&&n()};if(e)return setTimeout(w,e);const{type:_,timeout:P,propCount:E}=ym(t,r);if(!_)return n();const N=_+"end";let O=0;const H=()=>{t.removeEventListener(N,B),w()},B=J=>{J.target===t&&++O>=E&&H()};setTimeout(()=>{O<E&&H()},P+1),t.addEventListener(N,B)}function ym(t,r){const e=window.getComputedStyle(t),n=we=>(e[we]||"").split(", "),v=n(`${Qu}Delay`),w=n(`${Qu}Duration`),_=bg(v,w),P=n(`${Wo}Delay`),E=n(`${Wo}Duration`),N=bg(P,E);let O=null,H=0,B=0;r===Qu?_>0&&(O=Qu,H=_,B=w.length):r===Wo?N>0&&(O=Wo,H=N,B=E.length):(H=Math.max(_,N),O=H>0?_>N?Qu:Wo:null,B=O?O===Qu?w.length:E.length:0);const J=O===Qu&&/\b(transform|all)(,|$)/.test(n(`${Qu}Property`).toString());return{type:O,timeout:H,propCount:B,hasTransform:J}}function bg(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Ag(e)+Ag(t[n])))}function Ag(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function wm(){return document.body.offsetHeight}function mm(t,r,e){const n=t[wc];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const Cg=Symbol("_vod"),$m=Symbol("_vsh"),xm=Symbol(""),bm=/(^|;)\s*display\s*:/;function Am(t,r,e){const n=t.style,v=Ss(e);let w=!1;if(e&&!v){if(r)if(Ss(r))for(const _ of r.split(";")){const P=_.slice(0,_.indexOf(":")).trim();e[P]==null&&Lc(n,P,"")}else for(const _ in r)e[_]==null&&Lc(n,_,"");for(const _ in e)_==="display"&&(w=!0),Lc(n,_,e[_])}else if(v){if(r!==e){const _=n[xm];_&&(e+=";"+_),n.cssText=e,w=bm.test(e)}}else r&&t.removeAttribute("style");Cg in t&&(t[Cg]=w?n.display:"",t[$m]&&(n.display="none"))}const _g=/\s*!important$/;function Lc(t,r,e){if(gt(e))e.forEach(n=>Lc(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=Cm(t,r);_g.test(e)?t.setProperty(Vo(n),e.replace(_g,""),"important"):t[n]=e}}const Pg=["Webkit","Moz","ms"],Kh={};function Cm(t,r){const e=Kh[r];if(e)return e;let n=qo(r);if(n!=="filter"&&n in t)return Kh[r]=n;n=Cd(n);for(let v=0;v<Pg.length;v++){const w=Pg[v]+n;if(w in t)return Kh[r]=w}return r}const kg="http://www.w3.org/1999/xlink";function _m(t,r,e,n,v){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(kg,r.slice(6,r.length)):t.setAttributeNS(kg,r,e);else{const w=Cw(r);e==null||w&&!kd(e)?t.removeAttribute(r):t.setAttribute(r,w?"":e)}}function Pm(t,r,e,n,v,w,_){if(r==="innerHTML"||r==="textContent"){n&&_(n,v,w),t[r]=e??"";return}const P=t.tagName;if(r==="value"&&P!=="PROGRESS"&&!P.includes("-")){const N=P==="OPTION"?t.getAttribute("value")||"":t.value,O=e??"";(N!==O||!("_value"in t))&&(t.value=O),e==null&&t.removeAttribute(r),t._value=e;return}let E=!1;if(e===""||e==null){const N=typeof t[r];N==="boolean"?e=kd(e):e==null&&N==="string"?(e="",E=!0):N==="number"&&(e=0,E=!0)}try{t[r]=e}catch{}E&&t.removeAttribute(r)}function km(t,r,e,n){t.addEventListener(r,e,n)}function Mm(t,r,e,n){t.removeEventListener(r,e,n)}const Mg=Symbol("_vei");function Em(t,r,e,n,v=null){const w=t[Mg]||(t[Mg]={}),_=w[r];if(n&&_)_.value=n;else{const[P,E]=Sm(r);if(n){const N=w[r]=Tm(n,v);km(t,P,N,E)}else _&&(Mm(t,P,_,E),w[r]=void 0)}}const Eg=/(?:Once|Passive|Capture)$/;function Sm(t){let r;if(Eg.test(t)){r={};let n;for(;n=t.match(Eg);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vo(t.slice(2)),r]}let Vh=0;const Nm=Promise.resolve(),Fm=()=>Vh||(Nm.then(()=>Vh=0),Vh=Date.now());function Tm(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;zi(Om(n,e.value),r,5,[n])};return e.value=t,e.attached=Fm(),e}function Om(t,r){if(gt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>v=>!v._stopped&&n&&n(v))}else return r}const Sg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Im=(t,r,e,n,v,w,_,P,E)=>{const N=v==="svg";r==="class"?mm(t,n,N):r==="style"?Am(t,e,n):yh(r)?mv(r)||Em(t,r,e,n,_):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):jm(t,r,n,N))?Pm(t,r,n,w,_,P,E):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),_m(t,r,n,N))};function jm(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&Sg(r)&&Ot(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const v=t.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return Sg(r)&&Ss(e)?!1:r in t}const Rm=Es({patchProp:Im},pm);let Ng;function Dm(){return Ng||(Ng=K0(Rm))}const Lm=(...t)=>{const r=Dm().createApp(...t),{mount:e}=r;return r.mount=n=>{const v=Um(n);if(!v)return;const w=r._component;!Ot(w)&&!w.render&&!w.template&&(w.template=v.innerHTML),v.innerHTML="";const _=e(v,!1,Hm(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),_},r};function Hm(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Um(t){return Ss(t)?document.querySelector(t):t}function oc(){return oc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},oc.apply(this,arguments)}var Bm=13,qm=9,zm=8,Km=89,Nc=90,Vm=77,Fg=57,Tg=219,Og=222,Ig=192,Wm=27,jg=100,Gm=3e3,Jm=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),Wh=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Zm=mc({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var v="border-top-left-radius",w="border-bottom-left-radius";if(e){e.style[v]=n[v],e.style[w]=n[w],r.style[v]="0",r.style[w]="0";var _=["background-color","margin-top","padding-top","font-family","font-size","line-height"];_.forEach(function(P){e.style[P]=n[P]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,v=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:v})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=oc({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,v=n.stack,w=n.offset;if(v.length&&w>-1){this.history.stack=v.slice(0,w+1);var _=this.history.stack.length;if(_>jg){var P=_-jg;this.history.stack=v.slice(P,_),this.history.offset=Math.max(this.history.offset-P,0)}}var E=Date.now();if(e){var N=this.history.stack[this.history.offset];if(N&&E-N.timestamp<Gm){var O,H,B=/[^a-z0-9]([a-z0-9]+)$/i,J=(O=this._getLines(N.value,N.selectionStart).pop())===null||O===void 0?void 0:O.match(B),we=(H=this._getLines(r.value,r.selectionStart).pop())===null||H===void 0?void 0:H.match(B);if(J&&we&&we[1].startsWith(J[1])){this.history.stack[this.history.offset]=oc({},r,{timestamp:E});return}}}this.history.stack.push(oc({},r,{timestamp:E})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,v=e.selectionStart,w=e.selectionEnd;this._recordChange({value:n,selectionStart:v,selectionEnd:w},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n-1];v&&(this._updateInput(v),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n+1];v&&(this._updateInput(v),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,v=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Wm&&(r.target.blur(),this.$emit("blur",r));var w=r.target,_=w.value,P=w.selectionStart,E=w.selectionEnd,N=(n?" ":"	").repeat(e);if(r.keyCode===qm&&!v&&this.capture)if(r.preventDefault(),r.shiftKey){var O=this._getLines(_,P),H=O.length-1,B=this._getLines(_,E).length-1,J=_.split(`
`).map(function(_e,at){return at>=H&&at<=B&&_e.startsWith(N)?_e.substring(N.length):_e}).join(`
`);if(_!==J){var we=O[H];this._applyEdits({value:J,selectionStart:we.startsWith(N)?P-N.length:P,selectionEnd:E-(_.length-J.length)})}}else if(P!==E){var ue=this._getLines(_,P),oe=ue.length-1,Pe=this._getLines(_,E).length-1,G=ue[oe];this._applyEdits({value:_.split(`
`).map(function(_e,at){return at>=oe&&at<=Pe?N+_e:_e}).join(`
`),selectionStart:/\S/.test(G)?P+N.length:P,selectionEnd:E+N.length*(Pe-oe+1)})}else{var V=P+N.length;this._applyEdits({value:_.substring(0,P)+N+_.substring(E),selectionStart:V,selectionEnd:V})}else if(r.keyCode===zm){var Z=P!==E,Q=_.substring(0,P);if(Q.endsWith(N)&&!Z){r.preventDefault();var X=P-N.length;this._applyEdits({value:_.substring(0,P-N.length)+_.substring(E),selectionStart:X,selectionEnd:X})}}else if(r.keyCode===Bm){if(P===E){var ee=this._getLines(_,P).pop(),ne=ee==null?void 0:ee.match(/^\s+/);if(ne&&ne[0]){r.preventDefault();var ie=`
`+ne[0],Te=P+ie.length;this._applyEdits({value:_.substring(0,P)+ie+_.substring(E),selectionStart:Te,selectionEnd:Te})}}}else if(r.keyCode===Fg||r.keyCode===Tg||r.keyCode===Og||r.keyCode===Ig){var Le;r.keyCode===Fg&&r.shiftKey?Le=["(",")"]:r.keyCode===Tg?r.shiftKey?Le=["{","}"]:Le=["[","]"]:r.keyCode===Og?r.shiftKey?Le=['"','"']:Le=["'","'"]:r.keyCode===Ig&&!r.shiftKey&&(Le=["`","`"]),P!==E&&Le&&(r.preventDefault(),this._applyEdits({value:_.substring(0,P)+Le[0]+_.substring(P,E)+Le[1]+_.substring(E),selectionStart:P,selectionEnd:E+2}))}else(Wh?r.metaKey&&r.keyCode===Nc:r.ctrlKey&&r.keyCode===Nc)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(Wh?r.metaKey&&r.keyCode===Nc&&r.shiftKey:Jm?r.ctrlKey&&r.keyCode===Km:r.ctrlKey&&r.keyCode===Nc&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===Vm&&r.ctrlKey&&(!Wh||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=Yu("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=Yu("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(P,E){return Yu("div",{class:"prism-editor__line-number token comment"},""+ ++E)})]),v=Yu("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(E){r.$emit("click",E)},onKeyup:function(E){r.$emit("keyup",E)},onFocus:function(E){r.$emit("focus",E)},onBlur:function(E){r.$emit("blur",E)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),w=Yu("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),_=Yu("div",{class:"prism-editor__container"},[v,w]);return Yu("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,_])}}),Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Xm(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var v=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,v.get?v:{enumerable:!0,get:function(){return t[n]}})}),e}var Ym={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,w=0,_={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof E?new E(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++w}),G.__id},clone:function G(V,Z){Z=Z||{};var Q,X;switch(P.util.type(V)){case"Object":if(X=P.util.objId(V),Z[X])return Z[X];Q={},Z[X]=Q;for(var ee in V)V.hasOwnProperty(ee)&&(Q[ee]=G(V[ee],Z));return Q;case"Array":return X=P.util.objId(V),Z[X]?Z[X]:(Q=[],Z[X]=Q,V.forEach(function(ne,ie){Q[ie]=G(ne,Z)}),Q);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Z in V)if(V[Z].src==G)return V[Z]}return null}},isActive:function(G,V,Z){for(var Q="no-"+V;G;){var X=G.classList;if(X.contains(V))return!0;if(X.contains(Q))return!1;G=G.parentElement}return!!Z}},languages:{plain:_,plaintext:_,text:_,txt:_,extend:function(G,V){var Z=P.util.clone(P.languages[G]);for(var Q in V)Z[Q]=V[Q];return Z},insertBefore:function(G,V,Z,Q){Q=Q||P.languages;var X=Q[G],ee={};for(var ne in X)if(X.hasOwnProperty(ne)){if(ne==V)for(var ie in Z)Z.hasOwnProperty(ie)&&(ee[ie]=Z[ie]);Z.hasOwnProperty(ne)||(ee[ne]=X[ne])}var Te=Q[G];return Q[G]=ee,P.languages.DFS(P.languages,function(Le,_e){_e===Te&&Le!=G&&(this[Le]=ee)}),ee},DFS:function G(V,Z,Q,X){X=X||{};var ee=P.util.objId;for(var ne in V)if(V.hasOwnProperty(ne)){Z.call(V,ne,V[ne],Q||ne);var ie=V[ne],Te=P.util.type(ie);Te==="Object"&&!X[ee(ie)]?(X[ee(ie)]=!0,G(ie,Z,null,X)):Te==="Array"&&!X[ee(ie)]&&(X[ee(ie)]=!0,G(ie,Z,ne,X))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Z){var Q={callback:Z,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var X=0,ee;ee=Q.elements[X++];)P.highlightElement(ee,V===!0,Q.callback)},highlightElement:function(G,V,Z){var Q=P.util.getLanguage(G),X=P.languages[Q];P.util.setLanguage(G,Q);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,Q);var ne=G.textContent,ie={element:G,language:Q,grammar:X,code:ne};function Te(_e){ie.highlightedCode=_e,P.hooks.run("before-insert",ie),ie.element.innerHTML=ie.highlightedCode,P.hooks.run("after-highlight",ie),P.hooks.run("complete",ie),Z&&Z.call(ie.element)}if(P.hooks.run("before-sanity-check",ie),ee=ie.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ie.code){P.hooks.run("complete",ie),Z&&Z.call(ie.element);return}if(P.hooks.run("before-highlight",ie),!ie.grammar){Te(P.util.encode(ie.code));return}if(V&&n.Worker){var Le=new Worker(P.filename);Le.onmessage=function(_e){Te(_e.data)},Le.postMessage(JSON.stringify({language:ie.language,code:ie.code,immediateClose:!0}))}else Te(P.highlight(ie.code,ie.grammar,ie.language))},highlight:function(G,V,Z){var Q={code:G,grammar:V,language:Z};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),E.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(G,V){var Z=V.rest;if(Z){for(var Q in Z)V[Q]=Z[Q];delete V.rest}var X=new H;return B(X,X.head,G),O(G,X,V,X.head,0),we(X)},hooks:{all:{},add:function(G,V){var Z=P.hooks.all;Z[G]=Z[G]||[],Z[G].push(V)},run:function(G,V){var Z=P.hooks.all[G];if(!(!Z||!Z.length))for(var Q=0,X;X=Z[Q++];)X(V)}},Token:E};n.Prism=P;function E(G,V,Z,Q){this.type=G,this.content=V,this.alias=Z,this.length=(Q||"").length|0}E.stringify=function G(V,Z){if(typeof V=="string")return V;if(Array.isArray(V)){var Q="";return V.forEach(function(Te){Q+=G(Te,Z)}),Q}var X={type:V.type,content:G(V.content,Z),tag:"span",classes:["token",V.type],attributes:{},language:Z},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(X.classes,ee):X.classes.push(ee)),P.hooks.run("wrap",X);var ne="";for(var ie in X.attributes)ne+=" "+ie+'="'+(X.attributes[ie]||"").replace(/"/g,"&quot;")+'"';return"<"+X.tag+' class="'+X.classes.join(" ")+'"'+ne+">"+X.content+"</"+X.tag+">"};function N(G,V,Z,Q){G.lastIndex=V;var X=G.exec(Z);if(X&&Q&&X[1]){var ee=X[1].length;X.index+=ee,X[0]=X[0].slice(ee)}return X}function O(G,V,Z,Q,X,ee){for(var ne in Z)if(!(!Z.hasOwnProperty(ne)||!Z[ne])){var ie=Z[ne];ie=Array.isArray(ie)?ie:[ie];for(var Te=0;Te<ie.length;++Te){if(ee&&ee.cause==ne+","+Te)return;var Le=ie[Te],_e=Le.inside,at=!!Le.lookbehind,wt=!!Le.greedy,fr=Le.alias;if(wt&&!Le.pattern.global){var mt=Le.pattern.toString().match(/[imsuy]*$/)[0];Le.pattern=RegExp(Le.pattern.source,mt+"g")}for(var dt=Le.pattern||Le,Ze=Q.next,yt=X;Ze!==V.tail&&!(ee&&yt>=ee.reach);yt+=Ze.value.length,Ze=Ze.next){var Jt=Ze.value;if(V.length>G.length)return;if(!(Jt instanceof E)){var Zt=1,ht;if(wt){if(ht=N(dt,yt,G,at),!ht||ht.index>=G.length)break;var Bt=ht.index,Ir=ht.index+ht[0].length,Qt=yt;for(Qt+=Ze.value.length;Bt>=Qt;)Ze=Ze.next,Qt+=Ze.value.length;if(Qt-=Ze.value.length,yt=Qt,Ze.value instanceof E)continue;for(var Pr=Ze;Pr!==V.tail&&(Qt<Ir||typeof Pr.value=="string");Pr=Pr.next)Zt++,Qt+=Pr.value.length;Zt--,Jt=G.slice(yt,Qt),ht.index-=yt}else if(ht=N(dt,0,Jt,at),!ht)continue;var Bt=ht.index,Ar=ht[0],Ur=Jt.slice(0,Bt),tr=Jt.slice(Bt+Ar.length),jr=yt+Jt.length;ee&&jr>ee.reach&&(ee.reach=jr);var Xt=Ze.prev;Ur&&(Xt=B(V,Xt,Ur),yt+=Ur.length),J(V,Xt,Zt);var $r=new E(ne,_e?P.tokenize(Ar,_e):Ar,fr,Ar);if(Ze=B(V,Xt,$r),tr&&B(V,Ze,tr),Zt>1){var W={cause:ne+","+Te,reach:jr};O(G,V,Z,Ze.prev,yt,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function B(G,V,Z){var Q=V.next,X={value:Z,prev:V,next:Q};return V.next=X,Q.prev=X,G.length++,X}function J(G,V,Z){for(var Q=V.next,X=0;X<Z&&Q!==G.tail;X++)Q=Q.next;V.next=Q,Q.prev=V,G.length-=X}function we(G){for(var V=[],Z=G.head.next;Z!==G.tail;)V.push(Z.value),Z=Z.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Z=V.language,Q=V.code,X=V.immediateClose;n.postMessage(P.highlight(Q,P.languages[Z],Z)),X&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function oe(){P.manual||P.highlightAll()}if(!P.manual){var Pe=document.readyState;Pe==="loading"||Pe==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",oe):window.requestAnimationFrame?window.requestAnimationFrame(oe):window.setTimeout(oe,16)}return P}(r);t.exports&&(t.exports=e),typeof Oi<"u"&&(Oi.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(v,w){var _={};_["language-"+w]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[w]},_.cdata=/^<!\[CDATA\[|\]\]>$/i;var P={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:_}};P["language-"+w]={pattern:/[\s\S]+/,inside:e.languages[w]};var E={};E[v]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return v}),"i"),lookbehind:!0,greedy:!0,inside:P},e.languages.insertBefore("markup","cdata",E)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,v){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[v,"language-"+v],inside:e.languages[v]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var v=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+v.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+v.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+v.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+v.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:v,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var w=n.languages.markup;w&&(w.tag.addInlined("style","css"),w.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",v=function(ue,oe){return" Error "+ue+" while fetching file: "+oe},w=" Error: File does not exist or is empty",_={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},P="data-src-status",E="loading",N="loaded",O="failed",H="pre[data-src]:not(["+P+'="'+N+'"]):not(['+P+'="'+E+'"])';function B(ue,oe,Pe){var G=new XMLHttpRequest;G.open("GET",ue,!0),G.onreadystatechange=function(){G.readyState==4&&(G.status<400&&G.responseText?oe(G.responseText):G.status>=400?Pe(v(G.status,G.statusText)):Pe(w))},G.send(null)}function J(ue){var oe=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ue||"");if(oe){var Pe=Number(oe[1]),G=oe[2],V=oe[3];return G?V?[Pe,Number(V)]:[Pe,void 0]:[Pe,Pe]}}e.hooks.add("before-highlightall",function(ue){ue.selector+=", "+H}),e.hooks.add("before-sanity-check",function(ue){var oe=ue.element;if(oe.matches(H)){ue.code="",oe.setAttribute(P,E);var Pe=oe.appendChild(document.createElement("CODE"));Pe.textContent=n;var G=oe.getAttribute("data-src"),V=ue.language;if(V==="none"){var Z=(/\.(\w+)$/.exec(G)||[,"none"])[1];V=_[Z]||Z}e.util.setLanguage(Pe,V),e.util.setLanguage(oe,V);var Q=e.plugins.autoloader;Q&&Q.loadLanguages(V),B(G,function(X){oe.setAttribute(P,N);var ee=J(oe.getAttribute("data-range"));if(ee){var ne=X.split(/\r\n?|\n/g),ie=ee[0],Te=ee[1]==null?ne.length:ee[1];ie<0&&(ie+=ne.length),ie=Math.max(0,Math.min(ie-1,ne.length)),Te<0&&(Te+=ne.length),Te=Math.max(0,Math.min(Te,ne.length)),X=ne.slice(ie,Te).join(`
`),oe.hasAttribute("data-start")||oe.setAttribute("data-start",String(ie+1))}Pe.textContent=X,e.highlightElement(Pe)},function(X){oe.setAttribute(P,O),Pe.textContent=X})}}),e.plugins.fileHighlight={highlight:function(oe){for(var Pe=(oe||document).querySelectorAll(H),G=0,V;V=Pe[G++];)e.highlightElement(V)}};var we=!1;e.fileHighlight=function(){we||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),we=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Ym);var Ay={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,w=0,_={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof E?new E(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++w}),G.__id},clone:function G(V,Z){Z=Z||{};var Q,X;switch(P.util.type(V)){case"Object":if(X=P.util.objId(V),Z[X])return Z[X];Q={},Z[X]=Q;for(var ee in V)V.hasOwnProperty(ee)&&(Q[ee]=G(V[ee],Z));return Q;case"Array":return X=P.util.objId(V),Z[X]?Z[X]:(Q=[],Z[X]=Q,V.forEach(function(ne,ie){Q[ie]=G(ne,Z)}),Q);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Z in V)if(V[Z].src==G)return V[Z]}return null}},isActive:function(G,V,Z){for(var Q="no-"+V;G;){var X=G.classList;if(X.contains(V))return!0;if(X.contains(Q))return!1;G=G.parentElement}return!!Z}},languages:{plain:_,plaintext:_,text:_,txt:_,extend:function(G,V){var Z=P.util.clone(P.languages[G]);for(var Q in V)Z[Q]=V[Q];return Z},insertBefore:function(G,V,Z,Q){Q=Q||P.languages;var X=Q[G],ee={};for(var ne in X)if(X.hasOwnProperty(ne)){if(ne==V)for(var ie in Z)Z.hasOwnProperty(ie)&&(ee[ie]=Z[ie]);Z.hasOwnProperty(ne)||(ee[ne]=X[ne])}var Te=Q[G];return Q[G]=ee,P.languages.DFS(P.languages,function(Le,_e){_e===Te&&Le!=G&&(this[Le]=ee)}),ee},DFS:function G(V,Z,Q,X){X=X||{};var ee=P.util.objId;for(var ne in V)if(V.hasOwnProperty(ne)){Z.call(V,ne,V[ne],Q||ne);var ie=V[ne],Te=P.util.type(ie);Te==="Object"&&!X[ee(ie)]?(X[ee(ie)]=!0,G(ie,Z,null,X)):Te==="Array"&&!X[ee(ie)]&&(X[ee(ie)]=!0,G(ie,Z,ne,X))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Z){var Q={callback:Z,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var X=0,ee;ee=Q.elements[X++];)P.highlightElement(ee,V===!0,Q.callback)},highlightElement:function(G,V,Z){var Q=P.util.getLanguage(G),X=P.languages[Q];P.util.setLanguage(G,Q);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,Q);var ne=G.textContent,ie={element:G,language:Q,grammar:X,code:ne};function Te(_e){ie.highlightedCode=_e,P.hooks.run("before-insert",ie),ie.element.innerHTML=ie.highlightedCode,P.hooks.run("after-highlight",ie),P.hooks.run("complete",ie),Z&&Z.call(ie.element)}if(P.hooks.run("before-sanity-check",ie),ee=ie.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ie.code){P.hooks.run("complete",ie),Z&&Z.call(ie.element);return}if(P.hooks.run("before-highlight",ie),!ie.grammar){Te(P.util.encode(ie.code));return}if(V&&n.Worker){var Le=new Worker(P.filename);Le.onmessage=function(_e){Te(_e.data)},Le.postMessage(JSON.stringify({language:ie.language,code:ie.code,immediateClose:!0}))}else Te(P.highlight(ie.code,ie.grammar,ie.language))},highlight:function(G,V,Z){var Q={code:G,grammar:V,language:Z};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),E.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(G,V){var Z=V.rest;if(Z){for(var Q in Z)V[Q]=Z[Q];delete V.rest}var X=new H;return B(X,X.head,G),O(G,X,V,X.head,0),we(X)},hooks:{all:{},add:function(G,V){var Z=P.hooks.all;Z[G]=Z[G]||[],Z[G].push(V)},run:function(G,V){var Z=P.hooks.all[G];if(!(!Z||!Z.length))for(var Q=0,X;X=Z[Q++];)X(V)}},Token:E};n.Prism=P;function E(G,V,Z,Q){this.type=G,this.content=V,this.alias=Z,this.length=(Q||"").length|0}E.stringify=function G(V,Z){if(typeof V=="string")return V;if(Array.isArray(V)){var Q="";return V.forEach(function(Te){Q+=G(Te,Z)}),Q}var X={type:V.type,content:G(V.content,Z),tag:"span",classes:["token",V.type],attributes:{},language:Z},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(X.classes,ee):X.classes.push(ee)),P.hooks.run("wrap",X);var ne="";for(var ie in X.attributes)ne+=" "+ie+'="'+(X.attributes[ie]||"").replace(/"/g,"&quot;")+'"';return"<"+X.tag+' class="'+X.classes.join(" ")+'"'+ne+">"+X.content+"</"+X.tag+">"};function N(G,V,Z,Q){G.lastIndex=V;var X=G.exec(Z);if(X&&Q&&X[1]){var ee=X[1].length;X.index+=ee,X[0]=X[0].slice(ee)}return X}function O(G,V,Z,Q,X,ee){for(var ne in Z)if(!(!Z.hasOwnProperty(ne)||!Z[ne])){var ie=Z[ne];ie=Array.isArray(ie)?ie:[ie];for(var Te=0;Te<ie.length;++Te){if(ee&&ee.cause==ne+","+Te)return;var Le=ie[Te],_e=Le.inside,at=!!Le.lookbehind,wt=!!Le.greedy,fr=Le.alias;if(wt&&!Le.pattern.global){var mt=Le.pattern.toString().match(/[imsuy]*$/)[0];Le.pattern=RegExp(Le.pattern.source,mt+"g")}for(var dt=Le.pattern||Le,Ze=Q.next,yt=X;Ze!==V.tail&&!(ee&&yt>=ee.reach);yt+=Ze.value.length,Ze=Ze.next){var Jt=Ze.value;if(V.length>G.length)return;if(!(Jt instanceof E)){var Zt=1,ht;if(wt){if(ht=N(dt,yt,G,at),!ht||ht.index>=G.length)break;var Bt=ht.index,Ir=ht.index+ht[0].length,Qt=yt;for(Qt+=Ze.value.length;Bt>=Qt;)Ze=Ze.next,Qt+=Ze.value.length;if(Qt-=Ze.value.length,yt=Qt,Ze.value instanceof E)continue;for(var Pr=Ze;Pr!==V.tail&&(Qt<Ir||typeof Pr.value=="string");Pr=Pr.next)Zt++,Qt+=Pr.value.length;Zt--,Jt=G.slice(yt,Qt),ht.index-=yt}else if(ht=N(dt,0,Jt,at),!ht)continue;var Bt=ht.index,Ar=ht[0],Ur=Jt.slice(0,Bt),tr=Jt.slice(Bt+Ar.length),jr=yt+Jt.length;ee&&jr>ee.reach&&(ee.reach=jr);var Xt=Ze.prev;Ur&&(Xt=B(V,Xt,Ur),yt+=Ur.length),J(V,Xt,Zt);var $r=new E(ne,_e?P.tokenize(Ar,_e):Ar,fr,Ar);if(Ze=B(V,Xt,$r),tr&&B(V,Ze,tr),Zt>1){var W={cause:ne+","+Te,reach:jr};O(G,V,Z,Ze.prev,yt,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function B(G,V,Z){var Q=V.next,X={value:Z,prev:V,next:Q};return V.next=X,Q.prev=X,G.length++,X}function J(G,V,Z){for(var Q=V.next,X=0;X<Z&&Q!==G.tail;X++)Q=Q.next;V.next=Q,Q.prev=V,G.length-=X}function we(G){for(var V=[],Z=G.head.next;Z!==G.tail;)V.push(Z.value),Z=Z.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Z=V.language,Q=V.code,X=V.immediateClose;n.postMessage(P.highlight(Q,P.languages[Z],Z)),X&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function oe(){P.manual||P.highlightAll()}if(!P.manual){var Pe=document.readyState;Pe==="loading"||Pe==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",oe):window.requestAnimationFrame?window.requestAnimationFrame(oe):window.setTimeout(oe,16)}return P}(r);t.exports&&(t.exports=e),typeof Oi<"u"&&(Oi.Prism=e)})(Ay);var Rg=Ay.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const e$={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},t$="_container_zhbxc_2",r$="_header_zhbxc_9",s$="_main_zhbxc_14",n$="_footer_zhbxc_19",a$={container:t$,header:r$,main:s$,footer:n$},xc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,v]of r)e[n]=v;return e};function i$(t,r,e,n,v,w){return os(),Us("div",{class:Cn(t.$style.container)},[w.hasHeader?(os(),Us("header",{key:0,class:Cn(t.$style.header)},[jc(t.$slots,"header")],2)):zo("",!0),qi("main",{class:Cn(t.$style.main)},[jc(t.$slots,"default")],2),w.hasFooter?(os(),Us("footer",{key:1,class:Cn(t.$style.footer)},[jc(t.$slots,"footer")],2)):zo("",!0)],2)}const l$={$style:a$},rc=xc(e$,[["render",i$],["__cssModules",l$]]),u$={key:0},f$=["onClick"],o$={key:1},c$=["onClick"],h$=mc({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=Ef(!1),n=r;return(v,w)=>(os(),Us("div",{class:Cn(v.$style.wrapper)},[qi("button",{onClick:w[0]||(w[0]=_=>e.value=!e.value)},[jc(v.$slots,"default")]),cs(Rv,null,{default:Pa(()=>[e.value?(os(),Us("div",{key:0,class:Cn(v.$style.menu)},[v.options instanceof Array?(os(),Us("div",u$,[(os(!0),Us(xn,null,uh(v.options,_=>(os(),Us("div",{class:Cn(v.$style.opt),onClick:P=>{e.value=!1,n("select",_)}},jf(_),11,f$))),256))])):(os(),Us("div",o$,[(os(!0),Us(xn,null,uh(Object.keys(v.options),_=>(os(),Us("div",{class:Cn(v.$style.opt),onClick:P=>{e.value=!1,n("select",_)}},jf(v.options[_]),11,c$))),256))]))],2)):zo("",!0)]),_:1})],2))}}),p$="_wrapper_1dk0z_2",v$="_menu_1dk0z_5",g$="_opt_1dk0z_12",d$={wrapper:p$,menu:v$,opt:g$},y$={$style:d$},Cy=xc(h$,[["__cssModules",y$]]),w$=mc({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,v=Ef(e.modelValue);ac(v,()=>{n("update:modelValue",v.value)},{immediate:!0});function w(P){v.value=e.samples[P]}const _=P=>Rg.highlight(P,Rg.languages.js,"javascript");return(P,E)=>(os(),kh(rc,null,{header:Pa(()=>[Cu(" Input "),e.samples?(os(),Us("div",{key:0,class:Cn(P.$style.actions)},[cs(Cy,{options:Object.keys(e.samples),onSelect:w},{default:Pa(()=>[Cu("Samples")]),_:1},8,["options"])],2)):zo("",!0)]),footer:Pa(()=>[e.parseError?(os(),Us("span",{key:0,class:Cn(P.$style.parseError)},jf(e.parseError),3)):zo("",!0),qi("div",{class:Cn(P.$style.actions)},[qi("button",{onClick:E[1]||(E[1]=N=>n("run"))},"RUN")],2)]),default:Pa(()=>[cs(vc(Zm),{class:Cn(P.$style.code),modelValue:v.value,"onUpdate:modelValue":E[0]||(E[0]=N=>v.value=N),highlight:_,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),m$="_code_af8rl_2",$$="_parseError_af8rl_6",x$="_actions_af8rl_9",b$={code:m$,parseError:$$,actions:x$},A$={$style:b$},C$=xc(w$,[["__cssModules",A$]]);function Qr(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Ko=class _y extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");he(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,_y)}},Dg=class extends Ko{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},Gt=class extends Ko{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);he(this,"loc");he(this,"name","Syntax");this.loc=n}};class Lg extends Ko{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);he(this,"loc");he(this,"name","Namespace");this.loc=n}}let hr=class extends Ko{constructor(e,n){super(e,n);he(this,"name","Runtime")}},Hg=class extends hr{constructor(r,e){super(r,e)}},_$=class extends hr{constructor(e,n){super(e,n);he(this,"name","")}};var Ku=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Tu=class Np{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Np(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Np(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new hr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new hr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ku([Qr],Tu.prototype,"log",null);Ku([Qr],Tu.prototype,"onUpdated",null);Ku([Qr],Tu.prototype,"createChildScope",null);Ku([Qr],Tu.prototype,"createChildNamespaceScope",null);Ku([Qr],Tu.prototype,"get",null);Ku([Qr],Tu.prototype,"exists",null);Ku([Qr],Tu.prototype,"getAll",null);Ku([Qr],Tu.prototype,"add",null);Ku([Qr],Tu.prototype,"assign",null);let Fc;const P$=new Uint8Array(16);function k$(){if(!Fc&&(Fc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fc(P$)}const on=[];for(let t=0;t<256;++t)on.push((t+256).toString(16).slice(1));function M$(t,r=0){return on[t[r+0]]+on[t[r+1]]+on[t[r+2]]+on[t[r+3]]+"-"+on[t[r+4]]+on[t[r+5]]+"-"+on[t[r+6]]+on[t[r+7]]+"-"+on[t[r+8]]+on[t[r+9]]+"-"+on[t[r+10]]+on[t[r+11]]+on[t[r+12]]+on[t[r+13]]+on[t[r+14]]+on[t[r+15]]}const E$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ug={randomUUID:E$};function bc(t,r,e){if(Ug.randomUUID&&!r&&!t)return Ug.randomUUID();t=t||{};const n=t.random||(t.rng||k$)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return M$(n)}var Dv={exports:{}};Dv.exports;(function(t){(function(r,e,n){function v(E){var N=this,O=P();N.next=function(){var H=2091639*N.s0+N.c*23283064365386963e-26;return N.s0=N.s1,N.s1=N.s2,N.s2=H-(N.c=H|0)},N.c=1,N.s0=O(" "),N.s1=O(" "),N.s2=O(" "),N.s0-=O(E),N.s0<0&&(N.s0+=1),N.s1-=O(E),N.s1<0&&(N.s1+=1),N.s2-=O(E),N.s2<0&&(N.s2+=1),O=null}function w(E,N){return N.c=E.c,N.s0=E.s0,N.s1=E.s1,N.s2=E.s2,N}function _(E,N){var O=new v(E),H=N&&N.state,B=O.next;return B.int32=function(){return O.next()*4294967296|0},B.double=function(){return B()+(B()*2097152|0)*11102230246251565e-32},B.quick=B,H&&(typeof H=="object"&&w(H,O),B.state=function(){return w(O,{})}),B}function P(){var E=4022871197,N=function(O){O=String(O);for(var H=0;H<O.length;H++){E+=O.charCodeAt(H);var B=.02519603282416938*E;E=B>>>0,B-=E,B*=E,E=B>>>0,B-=E,E+=B*4294967296}return(E>>>0)*23283064365386963e-26};return N}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.alea=_})(Oi,t,!1)})(Dv);var S$=Dv.exports,Lv={exports:{}};Lv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var H=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^H^H>>>8},P===(P|0)?E.x=P:N+=P;for(var O=0;O<N.length+64;O++)E.x^=N.charCodeAt(O)|0,E.next()}function w(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E}function _(P,E){var N=new v(P),O=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&w(O,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xor128=_})(Oi,t,!1)})(Lv);var N$=Lv.exports,Hv={exports:{}};Hv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.next=function(){var H=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(H^H<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,P===(P|0)?E.x=P:N+=P;for(var O=0;O<N.length+64;O++)E.x^=N.charCodeAt(O)|0,O==N.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function w(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E.v=P.v,E.d=P.d,E}function _(P,E){var N=new v(P),O=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&w(O,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xorwow=_})(Oi,t,!1)})(Hv);var F$=Hv.exports,Uv={exports:{}};Uv.exports;(function(t){(function(r,e,n){function v(P){var E=this;E.next=function(){var O=E.x,H=E.i,B,J;return B=O[H],B^=B>>>7,J=B^B<<24,B=O[H+1&7],J^=B^B>>>10,B=O[H+3&7],J^=B^B>>>3,B=O[H+4&7],J^=B^B<<7,B=O[H+7&7],B=B^B<<13,J^=B^B<<9,O[H]=J,E.i=H+1&7,J};function N(O,H){var B,J=[];if(H===(H|0))J[0]=H;else for(H=""+H,B=0;B<H.length;++B)J[B&7]=J[B&7]<<15^H.charCodeAt(B)+J[B+1&7]<<13;for(;J.length<8;)J.push(0);for(B=0;B<8&&J[B]===0;++B);for(B==8?J[7]=-1:J[B],O.x=J,O.i=0,B=256;B>0;--B)O.next()}N(E,P)}function w(P,E){return E.x=P.x.slice(),E.i=P.i,E}function _(P,E){P==null&&(P=+new Date);var N=new v(P),O=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(O.x&&w(O,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xorshift7=_})(Oi,t,!1)})(Uv);var T$=Uv.exports,Bv={exports:{}};Bv.exports;(function(t){(function(r,e,n){function v(P){var E=this;E.next=function(){var O=E.w,H=E.X,B=E.i,J,we;return E.w=O=O+1640531527|0,we=H[B+34&127],J=H[B=B+1&127],we^=we<<13,J^=J<<17,we^=we>>>15,J^=J>>>12,we=H[B]=we^J,E.i=B,we+(O^O>>>16)|0};function N(O,H){var B,J,we,ue,oe,Pe=[],G=128;for(H===(H|0)?(J=H,H=null):(H=H+"\0",J=0,G=Math.max(G,H.length)),we=0,ue=-32;ue<G;++ue)H&&(J^=H.charCodeAt((ue+32)%H.length)),ue===0&&(oe=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,ue>=0&&(oe=oe+1640531527|0,B=Pe[ue&127]^=J+oe,we=B==0?we+1:0);for(we>=128&&(Pe[(H&&H.length||0)&127]=-1),we=127,ue=4*128;ue>0;--ue)J=Pe[we+34&127],B=Pe[we=we+1&127],J^=J<<13,B^=B<<17,J^=J>>>15,B^=B>>>12,Pe[we]=J^B;O.w=oe,O.X=Pe,O.i=we}N(E,P)}function w(P,E){return E.i=P.i,E.w=P.w,E.X=P.X.slice(),E}function _(P,E){P==null&&(P=+new Date);var N=new v(P),O=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(O.X&&w(O,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.xor4096=_})(Oi,t,!1)})(Bv);var O$=Bv.exports,qv={exports:{}};qv.exports;(function(t){(function(r,e,n){function v(P){var E=this,N="";E.next=function(){var H=E.b,B=E.c,J=E.d,we=E.a;return H=H<<25^H>>>7^B,B=B-J|0,J=J<<24^J>>>8^we,we=we-H|0,E.b=H=H<<20^H>>>12^B,E.c=B=B-J|0,E.d=J<<16^B>>>16^we,E.a=we-H|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,P===Math.floor(P)?(E.a=P/4294967296|0,E.b=P|0):N+=P;for(var O=0;O<N.length+20;O++)E.b^=N.charCodeAt(O)|0,E.next()}function w(P,E){return E.a=P.a,E.b=P.b,E.c=P.c,E.d=P.d,E}function _(P,E){var N=new v(P),O=E&&E.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var B=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(B+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&w(O,N),H.state=function(){return w(N,{})}),H}e&&e.exports?e.exports=_:n&&n.amd?n(function(){return _}):this.tychei=_})(Oi,t,!1)})(qv);var I$=qv.exports,Py={exports:{}};const j$={},R$=Object.freeze(Object.defineProperty({__proto__:null,default:j$},Symbol.toStringTag,{value:"Module"})),D$=Xm(R$);(function(t){(function(r,e,n){var v=256,w=6,_=52,P="random",E=n.pow(v,w),N=n.pow(2,_),O=N*2,H=v-1,B;function J(Z,Q,X){var ee=[];Q=Q==!0?{entropy:!0}:Q||{};var ne=Pe(oe(Q.entropy?[Z,V(e)]:Z??G(),3),ee),ie=new we(ee),Te=function(){for(var Le=ie.g(w),_e=E,at=0;Le<N;)Le=(Le+at)*v,_e*=v,at=ie.g(1);for(;Le>=O;)Le/=2,_e/=2,at>>>=1;return(Le+at)/_e};return Te.int32=function(){return ie.g(4)|0},Te.quick=function(){return ie.g(4)/4294967296},Te.double=Te,Pe(V(ie.S),e),(Q.pass||X||function(Le,_e,at,wt){return wt&&(wt.S&&ue(wt,ie),Le.state=function(){return ue(ie,{})}),at?(n[P]=Le,_e):Le})(Te,ne,"global"in Q?Q.global:this==n,Q.state)}function we(Z){var Q,X=Z.length,ee=this,ne=0,ie=ee.i=ee.j=0,Te=ee.S=[];for(X||(Z=[X++]);ne<v;)Te[ne]=ne++;for(ne=0;ne<v;ne++)Te[ne]=Te[ie=H&ie+Z[ne%X]+(Q=Te[ne])],Te[ie]=Q;(ee.g=function(Le){for(var _e,at=0,wt=ee.i,fr=ee.j,mt=ee.S;Le--;)_e=mt[wt=H&wt+1],at=at*v+mt[H&(mt[wt]=mt[fr=H&fr+_e])+(mt[fr]=_e)];return ee.i=wt,ee.j=fr,at})(v)}function ue(Z,Q){return Q.i=Z.i,Q.j=Z.j,Q.S=Z.S.slice(),Q}function oe(Z,Q){var X=[],ee=typeof Z,ne;if(Q&&ee=="object")for(ne in Z)try{X.push(oe(Z[ne],Q-1))}catch{}return X.length?X:ee=="string"?Z:Z+"\0"}function Pe(Z,Q){for(var X=Z+"",ee,ne=0;ne<X.length;)Q[H&ne]=H&(ee^=Q[H&ne]*19)+X.charCodeAt(ne++);return V(Q)}function G(){try{var Z;return B&&(Z=B.randomBytes)?Z=Z(v):(Z=new Uint8Array(v),(r.crypto||r.msCrypto).getRandomValues(Z)),V(Z)}catch{var Q=r.navigator,X=Q&&Q.plugins;return[+new Date,r,X,r.screen,V(e)]}}function V(Z){return String.fromCharCode.apply(0,Z)}if(Pe(n.random(),e),t.exports){t.exports=J;try{B=D$}catch{}}else n["seed"+P]=J})(typeof self<"u"?self:Oi,[],Math)})(Py);var L$=Py.exports,H$=S$,U$=N$,B$=F$,q$=T$,z$=O$,K$=I$,lo=L$;lo.alea=H$;lo.xor128=U$;lo.xorwow=B$;lo.xorshift7=q$;lo.xor4096=z$;lo.tychei=K$;var V$=lo;const uo=Qm(V$),Kt={type:"null"},ya={type:"bool",value:!0},wa={type:"bool",value:!1},je=t=>({type:"num",value:t}),ar=t=>({type:"str",value:t}),Lf=t=>({type:"bool",value:t}),hh=t=>({type:"obj",value:t}),Yr=t=>({type:"arr",value:t}),W$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ye=t=>({type:"fn",native:t}),G$=t=>({type:"return",value:t}),J$=()=>({type:"break",value:null}),Z$=()=>({type:"continue",value:null}),Q$=t=>t.type==="return"?t.value:t,Fp=(t,r)=>({type:"error",value:t,info:r});function Aa(t){if(t==null)throw new hr("Expect anything, but got nothing.")}function pn(t){if(t==null)throw new hr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new hr(`Expect boolean, but got ${t.type}.`)}function Mu(t){if(t==null)throw new hr("Expect function, but got nothing.");if(t.type!=="fn")throw new hr(`Expect function, but got ${t.type}.`)}function gs(t){if(t==null)throw new hr("Expect string, but got nothing.");if(t.type!=="str")throw new hr(`Expect string, but got ${t.type}.`)}function Fe(t){if(t==null)throw new hr("Expect number, but got nothing.");if(t.type!=="num")throw new hr(`Expect number, but got ${t.type}.`)}function xu(t){if(t==null)throw new hr("Expect object, but got nothing.");if(t.type!=="obj")throw new hr(`Expect object, but got ${t.type}.`)}function Hf(t){if(t==null)throw new hr("Expect array, but got nothing.");if(t.type!=="arr")throw new hr(`Expect array, but got ${t.type}.`)}function Gh(t){return t.type==="obj"}function Bg(t){return t.type==="arr"}function Co(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Tp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Tp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Op(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Op(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Op(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ip(t){if(t===null)return Kt;if(typeof t=="boolean")return Lf(t);if(typeof t=="string")return ar(t);if(typeof t=="number")return je(t);if(Array.isArray(t))return Yr(t.map(r=>Ip(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ip(n));return hh(r)}return Kt}function _o(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(_o(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${_o(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const X$={version:"0.18.0"},Y$=X$.version,ex=new TextEncoder,tx=new TextDecoder,rx={help:ar("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ar(Y$),"Core:ai":ar("kawaii"),"Core:not":ye(([t])=>(pn(t),t.value?wa:ya)),"Core:eq":ye(([t,r])=>(Aa(t),Aa(r),Co(t,r)?ya:wa)),"Core:neq":ye(([t,r])=>(Aa(t),Aa(r),Co(t,r)?wa:ya)),"Core:and":ye(([t,r])=>(pn(t),t.value?(pn(r),r.value?ya:wa):wa)),"Core:or":ye(([t,r])=>(pn(t),t.value?ya:(pn(r),r.value?ya:wa))),"Core:add":ye(([t,r])=>(Fe(t),Fe(r),je(t.value+r.value))),"Core:sub":ye(([t,r])=>(Fe(t),Fe(r),je(t.value-r.value))),"Core:mul":ye(([t,r])=>(Fe(t),Fe(r),je(t.value*r.value))),"Core:pow":ye(([t,r])=>{Fe(t),Fe(r);const e=t.value**r.value;if(isNaN(e))throw new hr("Invalid operation.");return je(e)}),"Core:div":ye(([t,r])=>{Fe(t),Fe(r);const e=t.value/r.value;if(isNaN(e))throw new hr("Invalid operation.");return je(e)}),"Core:mod":ye(([t,r])=>(Fe(t),Fe(r),je(t.value%r.value))),"Core:gt":ye(([t,r])=>(Fe(t),Fe(r),t.value>r.value?ya:wa)),"Core:lt":ye(([t,r])=>(Fe(t),Fe(r),t.value<r.value?ya:wa)),"Core:gteq":ye(([t,r])=>(Fe(t),Fe(r),t.value>=r.value?ya:wa)),"Core:lteq":ye(([t,r])=>(Fe(t),Fe(r),t.value<=r.value?ya:wa)),"Core:type":ye(([t])=>(Aa(t),ar(t.type))),"Core:to_str":ye(([t])=>(Aa(t),ar(_o(t)))),"Core:range":ye(([t,r])=>(Fe(t),Fe(r),t.value<r.value?Yr(Array.from({length:r.value-t.value+1},(e,n)=>je(n+t.value))):t.value>r.value?Yr(Array.from({length:t.value-r.value+1},(e,n)=>je(t.value-n))):Yr([t]))),"Core:sleep":ye(async([t])=>(Fe(t),await new Promise(r=>setTimeout(r,t.value)),Kt)),"Core:abort":ye(async([t])=>{throw gs(t),new _$(t.value)}),"Util:uuid":ye(()=>ar(bc())),"Json:stringify":ye(([t])=>(Aa(t),ar(JSON.stringify(Op(t))))),"Json:parse":ye(([t])=>{gs(t);try{return Ip(JSON.parse(t.value))}catch{return Fp("not_json")}}),"Json:parsable":ye(([t])=>{gs(t);try{JSON.parse(t.value)}catch{return Lf(!1)}return Lf(!0)}),"Date:now":ye(()=>je(Date.now())),"Date:year":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":ye(([t])=>(t&&Fe(t),je(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":ye(([t])=>(gs(t),je(new Date(t.value).getTime()))),"Date:to_iso_str":ye(([t,r])=>{t&&Fe(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Fe(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),Pe=we.toString().padStart(2,"0");v=`${ue}${oe}:${Pe}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return ar(`${w}-${_}-${P}T${E}:${N}:${O}.${H}${v}`)}),"Math:Infinity":je(1/0),"Math:E":je(Math.E),"Math:LN2":je(Math.LN2),"Math:LN10":je(Math.LN10),"Math:LOG2E":je(Math.LOG2E),"Math:LOG10E":je(Math.LOG10E),"Math:PI":je(Math.PI),"Math:SQRT1_2":je(Math.SQRT1_2),"Math:SQRT2":je(Math.SQRT2),"Math:abs":ye(([t])=>(Fe(t),je(Math.abs(t.value)))),"Math:acos":ye(([t])=>(Fe(t),je(Math.acos(t.value)))),"Math:acosh":ye(([t])=>(Fe(t),je(Math.acosh(t.value)))),"Math:asin":ye(([t])=>(Fe(t),je(Math.asin(t.value)))),"Math:asinh":ye(([t])=>(Fe(t),je(Math.asinh(t.value)))),"Math:atan":ye(([t])=>(Fe(t),je(Math.atan(t.value)))),"Math:atanh":ye(([t])=>(Fe(t),je(Math.atanh(t.value)))),"Math:atan2":ye(([t,r])=>(Fe(t),Fe(r),je(Math.atan2(t.value,r.value)))),"Math:cbrt":ye(([t])=>(Fe(t),je(Math.cbrt(t.value)))),"Math:ceil":ye(([t])=>(Fe(t),je(Math.ceil(t.value)))),"Math:clz32":ye(([t])=>(Fe(t),je(Math.clz32(t.value)))),"Math:cos":ye(([t])=>(Fe(t),je(Math.cos(t.value)))),"Math:cosh":ye(([t])=>(Fe(t),je(Math.cosh(t.value)))),"Math:exp":ye(([t])=>(Fe(t),je(Math.exp(t.value)))),"Math:expm1":ye(([t])=>(Fe(t),je(Math.expm1(t.value)))),"Math:floor":ye(([t])=>(Fe(t),je(Math.floor(t.value)))),"Math:fround":ye(([t])=>(Fe(t),je(Math.fround(t.value)))),"Math:hypot":ye(([t])=>{Hf(t);const r=[];for(const e of t.value)Fe(e),r.push(e.value);return je(Math.hypot(...r))}),"Math:imul":ye(([t,r])=>(Fe(t),Fe(r),je(Math.imul(t.value,r.value)))),"Math:log":ye(([t])=>(Fe(t),je(Math.log(t.value)))),"Math:log1p":ye(([t])=>(Fe(t),je(Math.log1p(t.value)))),"Math:log10":ye(([t])=>(Fe(t),je(Math.log10(t.value)))),"Math:log2":ye(([t])=>(Fe(t),je(Math.log2(t.value)))),"Math:max":ye(([t,r])=>(Fe(t),Fe(r),je(Math.max(t.value,r.value)))),"Math:min":ye(([t,r])=>(Fe(t),Fe(r),je(Math.min(t.value,r.value)))),"Math:pow":ye(([t,r])=>(Fe(t),Fe(r),je(Math.pow(t.value,r.value)))),"Math:round":ye(([t])=>(Fe(t),je(Math.round(t.value)))),"Math:sign":ye(([t])=>(Fe(t),je(Math.sign(t.value)))),"Math:sin":ye(([t])=>(Fe(t),je(Math.sin(t.value)))),"Math:sinh":ye(([t])=>(Fe(t),je(Math.sinh(t.value)))),"Math:sqrt":ye(([t])=>{Fe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new hr("Invalid operation.");return je(r)}),"Math:tan":ye(([t])=>(Fe(t),je(Math.tan(t.value)))),"Math:tanh":ye(([t])=>(Fe(t),je(Math.tanh(t.value)))),"Math:trunc":ye(([t])=>(Fe(t),je(Math.trunc(t.value)))),"Math:rnd":ye(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):je(Math.random())),"Math:gen_rng":ye(([t])=>{if(Aa(t),t.type!=="num"&&t.type!=="str")return Kt;const r=uo(t.value.toString());return ye(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?je(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):je(r()))}),"Num:from_hex":ye(([t])=>(gs(t),je(parseInt(t.value,16)))),"Str:lf":ar(`
`),"Str:lt":ye(([t,r])=>(gs(t),gs(r),t.value<r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:gt":ye(([t,r])=>(gs(t),gs(r),t.value>r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:from_codepoint":ye(([t])=>(Fe(t),ar(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ye(([t])=>(Hf(t),ar(Array.from(t.value.map(r=>(Fe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ye(([t])=>(Hf(t),ar(tx.decode(Uint8Array.from(t.value.map(r=>(Fe(r),r.value))))))),"Arr:create":ye(([t,r])=>{Fe(t);try{return Yr(Array(t.value).fill(r??Kt))}catch(e){throw t.value<0?new hr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new hr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ye(([t])=>(xu(t),Yr(Array.from(t.value.keys()).map(r=>ar(r))))),"Obj:vals":ye(([t])=>(xu(t),Yr(Array.from(t.value.values())))),"Obj:kvs":ye(([t])=>(xu(t),Yr(Array.from(t.value.entries()).map(([r,e])=>Yr([ar(r),e]))))),"Obj:get":ye(([t,r])=>(xu(t),gs(r),t.value.get(r.value)??Kt)),"Obj:set":ye(([t,r,e])=>(xu(t),gs(r),Aa(e),t.value.set(r.value,e),Kt)),"Obj:has":ye(([t,r])=>(xu(t),gs(r),Lf(t.value.has(r.value)))),"Obj:copy":ye(([t])=>(xu(t),hh(new Map(t.value)))),"Obj:merge":ye(([t,r])=>(xu(t),xu(r),hh(new Map([...t.value,...r.value])))),"Error:create":ye(([t,r])=>(gs(t),Fp(t.value,r))),"Async:interval":ye(async([t,r,e],n)=>{Fe(t),Mu(r),e&&(pn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ye(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ye(async([t,r],e)=>{Fe(t),Mu(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ye(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})};var fo={},sx=()=>{const t="\\ud800-\\udfff",_="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",P="\\ufe0e\\ufe0f",E="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",N=`[${t}]`,O=`[${_}]`,H="\\ud83c[\\udffb-\\udfff]",B=`(?:${O}|${H})`,J=`[^${t}]`,we="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",oe="\\u200d",Pe="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",G=`[${E}]`,V=`${B}?`,Z=`[${P}]?`,Q=`(?:${oe}(?:${[J,we,ue].join("|")})${Z+V})*`,X=Z+V+Q,ne=`(?:${[`${J}${O}?`,O,we,ue,N,G].join("|")})`;return new RegExp(`${Pe}|${H}(?=${H})|${ne+X}`,"g")},nx=Oi&&Oi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fo,"__esModule",{value:!0});var Eh=nx(sx);function jp(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Eh.default())||[]}var zs=fo.toArray=jp;function zv(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Eh.default());return r===null?0:r.length}var oo=fo.length=zv;function ky(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(Eh.default());return n?n.slice(r,e).join(""):""}var co=fo.substring=ky;function ax(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=zv(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var v;typeof e>"u"?v=n:(typeof e!="number"&&(e=parseInt(e,10)),v=e>=0?e+r:r);var w=t.match(Eh.default());return w?w.slice(r,v).join(""):""}fo.substr=ax;function ix(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var v=zv(t);if(v>r)return ky(t,0,r);if(v<r){var w=e.repeat(r-v);return n==="left"?w+t:t+w}return t}fo.limit=ix;function lx(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=jp(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var v=jp(r),w=!1,_;for(_=e;_<n.length;_+=1){for(var P=0;P<v.length&&v[P]===n[_+P];)P+=1;if(P===v.length&&v[P-1]===n[_+P-1]){w=!0;break}}return w?_:-1}var ho=fo.indexOf=lx;const qg={num:{to_str:t=>ye(async(r,e)=>ar(t.value.toString())),to_hex:t=>ye(async(r,e)=>ar(t.value.toString(16)))},str:{to_num:t=>ye(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Kt:je(n)}),to_arr:t=>ye(async(r,e)=>Yr(zs(t.value).map(n=>ar(n)))),to_unicode_arr:t=>ye(async(r,e)=>Yr([...t.value].map(n=>ar(n)))),to_unicode_codepoint_arr:t=>ye(async(r,e)=>Yr([...t.value].map(n=>{const v=n.codePointAt(0);return je(v??n.charCodeAt(0))}))),to_char_arr:t=>ye(async(r,e)=>Yr(t.value.split("").map(n=>ar(n)))),to_charcode_arr:t=>ye(async(r,e)=>Yr(t.value.split("").map(n=>je(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ye(async(r,e)=>Yr(Array.from(ex.encode(t.value)).map(n=>je(n)))),len:t=>je(oo(t.value)),replace:t=>ye(async([r,e],n)=>(gs(r),gs(e),ar(t.value.split(r.value).join(e.value)))),index_of:t=>ye(async([r,e],n)=>{gs(r),e&&Fe(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return je(ho(t.value,r.value,v))}),incl:t=>ye(async([r],e)=>(gs(r),t.value.includes(r.value)?ya:wa)),trim:t=>ye(async(r,e)=>ar(t.value.trim())),upper:t=>ye(async(r,e)=>ar(t.value.toUpperCase())),lower:t=>ye(async(r,e)=>ar(t.value.toLowerCase())),split:t=>ye(async([r],e)=>(r&&gs(r),Yr(r?t.value.split(r?r.value:"").map(n=>ar(n)):zs(t.value).map(n=>ar(n))))),slice:t=>ye(async([r,e],n)=>(Fe(r),Fe(e),ar(co(t.value,r.value,e.value)))),pick:t=>ye(async([r],e)=>{Fe(r);const v=zs(t.value)[r.value];return v?ar(v):Kt}),charcode_at:t=>ye(([r],e)=>{Fe(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Kt:je(n)}),codepoint_at:t=>ye(([r],e)=>{Fe(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Kt:je(n)})},arr:{len:t=>je(t.value.length),push:t=>ye(async([r],e)=>(Aa(r),t.value.push(r),t)),unshift:t=>ye(async([r],e)=>(Aa(r),t.value.unshift(r),t)),pop:t=>ye(async(r,e)=>t.value.pop()??Kt),shift:t=>ye(async(r,e)=>t.value.shift()??Kt),concat:t=>ye(async([r],e)=>(Hf(r),Yr(t.value.concat(r.value)))),slice:t=>ye(async([r,e],n)=>(Fe(r),Fe(e),Yr(t.value.slice(r.value,e.value)))),join:t=>ye(async([r],e)=>(r&&gs(r),ar(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ye(async([r],e)=>{Mu(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,je(w)]));return Yr(await Promise.all(n))}),filter:t=>ye(async([r],e)=>{Mu(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,je(v)]);pn(_),_.value&&n.push(w)}return Yr(n)}),reduce:t=>ye(async([r,e],n)=>{Mu(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,je(_)])}return w}),find:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,je(n)]);if(pn(w),w.value)return v}return Kt}),incl:t=>ye(async([r],e)=>(Aa(r),t.value.some(n=>Co(r,n))?ya:wa)),index_of:t=>ye(async([r,e],n)=>{if(Aa(r),e){Fe(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>Co(_,r));return je(w<0?w:w+v)}else return je(t.value.findIndex(v=>Co(v,r)))}),reverse:t=>ye(async(r,e)=>(t.value.reverse(),Kt)),copy:t=>ye(async(r,e)=>Yr([...t.value])),sort:t=>ye(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);Fe(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return Mu(r),Hf(t),t.value=await n(t.value,r),t}),fill:t=>ye(async([r,e,n],v)=>{const w=r??Kt,_=e&&(Fe(e),e.value),P=n&&(Fe(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>ye(async([r],e)=>{Fe(r);try{return Yr(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new hr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new hr("arr.repeat expected integer, got non-integer")}}),every:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,je(n)]);if(pn(w),!w.value)return wa}return ya}),some:t=>ye(async([r],e)=>{Mu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,je(n)]);if(pn(w),w.value)return ya}return wa})},error:{name:t=>ar(t.value),info:t=>t.info??Kt}};function ux(t,r){if(Object.hasOwn(qg,t.type)){const e=qg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new hr(`No such prop (${r}) in ${t.type}.`)}else throw new hr(`Cannot read prop of ${t.type}. (reading ${r})`)}const fx={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var _n=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const My=300,ox=My-1;let dn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:ye(([v])=>{Aa(v),this.opts.out&&this.opts.out(v)}),readline:ye(async v=>{const w=v[0];if(gs(w),this.opts.in==null)return Kt;const _=await this.opts.in(w.value);return ar(_)})};this.vars=Object.fromEntries(Object.entries({...r,...rx,...n}).map(([v,w])=>[v,fx.const(w)])),this.scope=new Tu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Fp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ko?this.opts.err(r):this.opts.err(new Dg(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Lg('No "var" in namespace declaration: '+v.name,v.loc);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:{const _=v;throw new Lg("invalid ns member type: "+_.type,_.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Kt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return Q$(await this._run(r.statements,v))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const v=n instanceof Ko?n:new Dg(n);throw v.loc=r.loc,v.message=`${v.message} (Line ${r.loc.line}, Column ${r.loc.column})`,v}})}async __eval(r,e){if(this.stop)return Kt;if(this.stepCount%My===ox&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new hr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Mu(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(pn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(pn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Kt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(Co(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Kt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Kt}case"for":{if(r.times){const n=await this._eval(r.times,e);Fe(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Fe(n),Fe(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:je(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Kt}case"each":{const n=await this._eval(r.items,e);Hf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Kt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Kt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Kt}case"addAssign":{const n=await this._eval(r.dest,e);Fe(n);const v=await this._eval(r.expr,e);return Fe(v),await this.assign(e,r.dest,je(n.value+v.value)),Kt}case"subAssign":{const n=await this._eval(r.dest,e);Fe(n);const v=await this._eval(r.expr,e);return Fe(v),await this.assign(e,r.dest,je(n.value-v.value)),Kt}case"null":return Kt;case"bool":return Lf(r.value);case"num":return je(r.value);case"str":return ar(r.value);case"arr":return Yr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return hh(n)}case"prop":{const n=await this._eval(r.target,e);return Gh(n)?n.value.has(r.name)?n.value.get(r.name):Kt:ux(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Bg(n)){Fe(v);const w=n.value[v.value];if(w===void 0)throw new Hg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(Gh(n))return gs(v),n.value.has(v.value)?n.value.get(v.value):Kt;throw new hr(`Cannot read prop (${_o(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return pn(n),Lf(!n.value)}case"fn":return W$(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Lf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=_o(w)}return ar(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),G$(n)}case"break":return this.log("block:break",{scope:e.name}),J$();case"continue":return this.log("block:continue",{scope:e.name}),Z$();case"ns":return Kt;case"meta":return Kt;case"and":{const n=await this._eval(r.left,e);if(pn(n),n.value){const v=await this._eval(r.right,e);return pn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(pn(n),n.value)return n;{const v=await this._eval(r.right,e);return pn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Kt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(Bg(v)){if(Fe(w),v.value[w.value]===void 0)throw new Hg(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(Gh(v))gs(w),v.value.set(w.value,n);else throw new hr(`Cannot read prop (${_o(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);xu(v),v.value.set(e.name,n)}else if(e.type==="arr")Hf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Kt)));else if(e.type==="obj")xu(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Kt)));else throw new hr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};_n([Qr],dn.prototype,"exec",null);_n([Qr],dn.prototype,"execFn",null);_n([Qr],dn.prototype,"execFnSimple",null);_n([Qr],dn.prototype,"handleError",null);_n([Qr],dn.prototype,"log",null);_n([Qr],dn.prototype,"collectNs",null);_n([Qr],dn.prototype,"collectNsMember",null);_n([Qr],dn.prototype,"_fn",null);_n([Qr],dn.prototype,"_eval",null);_n([Qr],dn.prototype,"__eval",null);_n([Qr],dn.prototype,"_run",null);_n([Qr],dn.prototype,"registerAbortHandler",null);_n([Qr],dn.prototype,"unregisterAbortHandler",null);_n([Qr],dn.prototype,"abort",null);_n([Qr],dn.prototype,"assign",null);_n([Qr],dn,"collectMetadata",null);class cx{constructor(r,e){he(this,"pages");he(this,"firstPageIndex");he(this,"lastPageIndex");he(this,"pageIndex");he(this,"address");he(this,"_char");he(this,"line");he(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var z;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(z||(z={}));class hx{constructor(r,e,n=!1,v,w){he(this,"kind");he(this,"loc");he(this,"hasLeftSpacing");he(this,"value");he(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=v,this.children=w}}function nt(t,r,e){return new hx(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const zg=[" ","	"],px=["\r",`
`],Kg=/^[0-9]$/,vx=/^[A-Za-z0-9_]$/;class gx{constructor(r){he(this,"stream");he(this,"_tokens",[]);typeof r=="string"?this.stream=new cx(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}getKind(){return this.token.kind}next(){this._tokens[0].kind!==z.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.getKind()!==r)throw new Gt(`unexpected token: ${z[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=nt(z.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(zg.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(px.includes(this.stream.char))return this.stream.next(),r=nt(z.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.NotEq,n,{hasLeftSpacing:e})):r=nt(z.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=nt(z.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=nt(z.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new Gt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=nt(z.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=nt(z.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=nt(z.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=nt(z.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=nt(z.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.PlusEq,n,{hasLeftSpacing:e})):r=nt(z.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=nt(z.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.MinusEq,n,{hasLeftSpacing:e})):r=nt(z.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=nt(z.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=nt(z.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=nt(z.Colon2,n,{hasLeftSpacing:e})):r=nt(z.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=nt(z.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=nt(z.Out,n,{hasLeftSpacing:e})):r=nt(z.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=nt(z.Arrow,n,{hasLeftSpacing:e})):r=nt(z.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=nt(z.GtEq,n,{hasLeftSpacing:e})):r=nt(z.Gt,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=nt(z.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=nt(z.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=nt(z.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=nt(z.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=nt(z.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=nt(z.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=nt(z.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=nt(z.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const v=this.tryReadDigits(e);if(v){r=v;break}const w=this.tryReadWord(e);if(w){r=w;break}throw new Gt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&vx.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return nt(z.NullKeyword,n,{hasLeftSpacing:r});case"true":return nt(z.TrueKeyword,n,{hasLeftSpacing:r});case"false":return nt(z.FalseKeyword,n,{hasLeftSpacing:r});case"each":return nt(z.EachKeyword,n,{hasLeftSpacing:r});case"for":return nt(z.ForKeyword,n,{hasLeftSpacing:r});case"loop":return nt(z.LoopKeyword,n,{hasLeftSpacing:r});case"break":return nt(z.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return nt(z.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return nt(z.MatchKeyword,n,{hasLeftSpacing:r});case"case":return nt(z.CaseKeyword,n,{hasLeftSpacing:r});case"default":return nt(z.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return nt(z.IfKeyword,n,{hasLeftSpacing:r});case"elif":return nt(z.ElifKeyword,n,{hasLeftSpacing:r});case"else":return nt(z.ElseKeyword,n,{hasLeftSpacing:r});case"return":return nt(z.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return nt(z.EvalKeyword,n,{hasLeftSpacing:r});case"var":return nt(z.VarKeyword,n,{hasLeftSpacing:r});case"let":return nt(z.LetKeyword,n,{hasLeftSpacing:r});case"exists":return nt(z.ExistsKeyword,n,{hasLeftSpacing:r});default:return nt(z.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const v=this.stream.getPos();for(;!this.stream.eof&&Kg.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Kg.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new Gt("digit expected",v)}let w;return n.length>0?w=e+"."+n:w=e,nt(z.NumberLiteral,v,{hasLeftSpacing:r,value:w})}readStringLiteral(r){let e="";const n=this.stream.char;let v="string";const w=this.stream.getPos();for(this.stream.next();v!=="finish";)switch(v){case"string":{if(this.stream.eof)throw new Gt("unexpected EOF",w);if(this.stream.char==="\\"){this.stream.next(),v="escape";break}if(this.stream.char===n){this.stream.next(),v="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Gt("unexpected EOF",w);e+=this.stream.char,this.stream.next(),v="string";break}}return nt(z.StringLiteral,w,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",v=[],w="string";const _=this.stream.getPos();let P=_;for(this.stream.next();w!=="finish";)switch(w){case"string":{if(this.stream.eof)throw new Gt("unexpected EOF",_);if(this.stream.char==="\\"){this.stream.next(),w="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(nt(z.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),w="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(nt(z.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),n=""),P=this.stream.getPos(),w="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Gt("unexpected EOF",_);n+=this.stream.char,this.stream.next(),w="string";break}case"expr":{if(this.stream.eof)throw new Gt("unexpected EOF",_);if(zg.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(nt(z.TemplateExprElement,P,{hasLeftSpacing:r,children:v})),v=[],P=this.stream.getPos(),w="string";break}const E=this.readToken();v.push(E);break}}return nt(z.Template,_,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function At(t,r,e){const n={type:t};for(const v of Object.keys(r))r[v]!==void 0&&(n[v]=r[v]);return n.loc=e,n}function _i(t,r,e){return At("call",{target:At("identifier",{name:t},e),args:r},e)}function Ey(t){const r=[];for(t.nextWith(z.OpenParen),t.getKind()===z.NewLine&&t.next();t.getKind()!==z.CloseParen;){t.expect(z.Identifier);const e=t.token.value;t.next();let n;switch(t.getKind()===z.Colon&&(t.next(),n=Yf(t)),r.push({name:e,argType:n}),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseParen:break;default:throw new Gt("separator expected",t.token.loc)}}return t.nextWith(z.CloseParen),r}function Ac(t){for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();const r=[];for(;t.getKind()!==z.CloseBrace;)switch(r.push(Sh(t)),t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.CloseBrace:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(z.CloseBrace),r}function Yf(t){return t.getKind()===z.At?dx(t):yx(t)}function dx(t){const r=t.token.loc;t.nextWith(z.At),t.nextWith(z.OpenParen);const e=[];for(;t.getKind()!==z.CloseParen;){if(e.length>0)switch(t.getKind()){case z.Comma:{t.next();break}default:throw new Gt("separator expected",t.token.loc)}const v=Yf(t);e.push(v)}t.nextWith(z.CloseParen),t.nextWith(z.Arrow);const n=Yf(t);return At("fnTypeSource",{args:e,result:n},r)}function yx(t){const r=t.token.loc;t.expect(z.Identifier);const e=t.token.value;t.next();let n=null;return t.getKind()===z.Lt&&(t.next(),n=Yf(t),t.nextWith(z.Gt)),At("namedTypeSource",{name:e,inner:n},r)}class wx{constructor(r){he(this,"source");he(this,"index");he(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?nt(z.EOF,{line:-1,column:-1}):this._token}getKind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:nt(z.EOF,{line:-1,column:-1})}expect(r){if(this.getKind()!==r)throw new Gt(`unexpected token: ${z[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=nt(z.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function hs(t,r){return r?Sy(t,!0):Kv(t,0)}const Jh=[{opKind:"postfix",kind:z.OpenParen,bp:20},{opKind:"postfix",kind:z.OpenBracket,bp:20},{opKind:"infix",kind:z.Dot,lbp:18,rbp:19},{opKind:"infix",kind:z.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:z.Plus,bp:14},{opKind:"prefix",kind:z.Minus,bp:14},{opKind:"prefix",kind:z.Not,bp:14},{opKind:"infix",kind:z.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:z.Slash,lbp:12,rbp:13},{opKind:"infix",kind:z.Percent,lbp:12,rbp:13},{opKind:"infix",kind:z.Plus,lbp:10,rbp:11},{opKind:"infix",kind:z.Minus,lbp:10,rbp:11},{opKind:"infix",kind:z.Lt,lbp:8,rbp:9},{opKind:"infix",kind:z.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:z.Gt,lbp:8,rbp:9},{opKind:"infix",kind:z.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:z.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:z.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:z.And2,lbp:4,rbp:5},{opKind:"infix",kind:z.Or2,lbp:2,rbp:3}];function mx(t,r){const e=t.token.loc,n=t.getKind();t.next(),t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine));const v=Kv(t,r);switch(n){case z.Plus:{if(v.type==="num")return At("num",{value:v.value},e);throw new Gt("currently, sign is only supported for number literal.",e)}case z.Minus:{if(v.type==="num")return At("num",{value:-1*v.value},e);throw new Gt("currently, sign is only supported for number literal.",e)}case z.Not:return At("not",{expr:v},e);default:throw new Gt(`unexpected token: ${z[n]}`,e)}}function $x(t,r,e){const n=t.token.loc,v=t.getKind();if(t.next(),t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine)),v===z.Dot){t.expect(z.Identifier);const w=t.token.value;return t.next(),At("prop",{target:r,name:w},n)}else{const w=Kv(t,e);switch(v){case z.Hat:return _i("Core:pow",[r,w],n);case z.Asterisk:return _i("Core:mul",[r,w],n);case z.Slash:return _i("Core:div",[r,w],n);case z.Percent:return _i("Core:mod",[r,w],n);case z.Plus:return _i("Core:add",[r,w],n);case z.Minus:return _i("Core:sub",[r,w],n);case z.Lt:return _i("Core:lt",[r,w],n);case z.LtEq:return _i("Core:lteq",[r,w],n);case z.Gt:return _i("Core:gt",[r,w],n);case z.GtEq:return _i("Core:gteq",[r,w],n);case z.Eq2:return _i("Core:eq",[r,w],n);case z.NotEq:return _i("Core:neq",[r,w],n);case z.And2:return At("and",{left:r,right:w},n);case z.Or2:return At("or",{left:r,right:w},n);default:throw new Gt(`unexpected token: ${z[v]}`,n)}}}function xx(t,r){const e=t.token.loc,n=t.getKind();switch(n){case z.OpenParen:return bx(t,r);case z.OpenBracket:{t.next();const v=hs(t,!1);return t.nextWith(z.CloseBracket),At("index",{target:r,index:v},e)}default:throw new Gt(`unexpected token: ${z[n]}`,e)}}function Sy(t,r){const e=t.token.loc;switch(t.getKind()){case z.IfKeyword:{if(r)break;return Ax(t)}case z.At:{if(r)break;return Cx(t)}case z.MatchKeyword:{if(r)break;return _x(t)}case z.EvalKeyword:{if(r)break;return Px(t)}case z.ExistsKeyword:{if(r)break;return kx(t)}case z.Template:{const n=[];if(r)break;for(const v of t.token.children)switch(v.kind){case z.TemplateStringElement:{n.push(At("str",{value:v.value},v.loc));break}case z.TemplateExprElement:{const w=new wx(v.children),_=hs(w,!1);if(w.getKind()!==z.EOF)throw new Gt(`unexpected token: ${z[w.token.kind]}`,w.token.loc);n.push(_);break}default:throw new Gt(`unexpected token: ${z[v.kind]}`,v.loc)}return t.next(),At("tmpl",{tmpl:n},e)}case z.StringLiteral:{const n=t.token.value;return t.next(),At("str",{value:n},e)}case z.NumberLiteral:{const n=Number(t.token.value);return t.next(),At("num",{value:n},e)}case z.TrueKeyword:case z.FalseKeyword:{const n=t.getKind()===z.TrueKeyword;return t.next(),At("bool",{value:n},e)}case z.NullKeyword:return t.next(),At("null",{},e);case z.OpenBrace:return Mx(t,r);case z.OpenBracket:return Ex(t,r);case z.Identifier:{if(r)break;return Ny(t)}case z.OpenParen:{t.next();const n=hs(t,r);return t.nextWith(z.CloseParen),n}}throw new Gt(`unexpected token: ${z[t.getKind()]}`,e)}function bx(t,r){const e=t.token.loc,n=[];for(t.nextWith(z.OpenParen),t.getKind()===z.NewLine&&t.next();t.getKind()!==z.CloseParen;)switch(n.push(hs(t,!1)),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseParen:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseParen),At("call",{target:r,args:n},e)}function Ax(t){const r=t.token.loc;t.nextWith(z.IfKeyword);const e=hs(t,!1),n=vf(t);t.getKind()===z.NewLine&&[z.ElifKeyword,z.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const v=[];for(;t.getKind()===z.ElifKeyword;){t.next();const _=hs(t,!1),P=vf(t);t.getKind()===z.NewLine&&[z.ElifKeyword,z.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),v.push({cond:_,then:P})}let w;return t.getKind()===z.ElseKeyword&&(t.next(),w=vf(t)),At("if",{cond:e,then:n,elseif:v,else:w},r)}function Cx(t){const r=t.token.loc;t.nextWith(z.At);const e=Ey(t);let n;t.getKind()===z.Colon&&(t.next(),n=Yf(t));const v=Ac(t);return At("fn",{args:e,retType:n,children:v},r)}function _x(t){const r=t.token.loc;t.nextWith(z.MatchKeyword);const e=hs(t,!1);t.nextWith(z.OpenBrace),t.getKind()===z.NewLine&&t.next();const n=[];for(;t.getKind()!==z.DefaultKeyword&&t.getKind()!==z.CloseBrace;){t.nextWith(z.CaseKeyword);const w=hs(t,!1);t.nextWith(z.Arrow);const _=vf(t);switch(n.push({q:w,a:_}),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.DefaultKeyword:case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}}let v;if(t.getKind()===z.DefaultKeyword)switch(t.next(),t.nextWith(z.Arrow),v=vf(t),t.getKind()){case z.NewLine:{t.next();break}case z.Comma:{t.next(),t.getKind()===z.NewLine&&t.next();break}case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseBrace),At("match",{about:e,qs:n,default:v},r)}function Px(t){const r=t.token.loc;t.nextWith(z.EvalKeyword);const e=Ac(t);return At("block",{statements:e},r)}function kx(t){const r=t.token.loc;t.nextWith(z.ExistsKeyword);const e=Ny(t);return At("exists",{identifier:e},r)}function Ny(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.getKind()===z.Colon){if(t.token.hasLeftSpacing)throw new Gt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new Gt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(z.Identifier),e.push(t.token.value),t.next()}return At("identifier",{name:e.join(":")},r)}function Mx(t,r){const e=t.token.loc;for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();const n=new Map;for(;t.getKind()!==z.CloseBrace;){t.expect(z.Identifier);const v=t.token.value;t.next(),t.nextWith(z.Colon);const w=hs(t,r);switch(n.set(v,w),t.getKind()){case z.NewLine:case z.Comma:{for(t.next();t.getKind()===z.NewLine;)t.next();break}case z.CloseBrace:break;default:throw new Gt("separator expected",t.token.loc)}}return t.nextWith(z.CloseBrace),At("obj",{value:n},e)}function Ex(t,r){const e=t.token.loc;for(t.nextWith(z.OpenBracket);t.getKind()===z.NewLine;)t.next();const n=[];for(;t.getKind()!==z.CloseBracket;)switch(n.push(hs(t,r)),t.getKind()){case z.NewLine:case z.Comma:{for(t.next();t.getKind()===z.NewLine;)t.next();break}case z.CloseBracket:break;default:throw new Gt("separator expected",t.token.loc)}return t.nextWith(z.CloseBracket),At("arr",{value:n},e)}function Kv(t,r){let e;const n=t.getKind(),v=Jh.find(w=>w.opKind==="prefix"&&w.kind===n);for(v!=null?e=mx(t,v.bp):e=Sy(t,!1);;){t.getKind()===z.BackSlash&&(t.next(),t.nextWith(z.NewLine));const w=t.getKind(),_=Jh.find(E=>E.opKind==="postfix"&&E.kind===w);if(_!=null){if(_.bp<r)break;if(!([z.OpenBracket,z.OpenParen].includes(w)&&t.token.hasLeftSpacing)){e=xx(t,e);continue}}const P=Jh.find(E=>E.opKind==="infix"&&E.kind===w);if(P!=null){if(P.lbp<r)break;e=$x(t,e,P.rbp);continue}break}return e}function Sh(t){const r=t.token.loc;switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:return Fy(t);case z.At:{if(t.lookahead(1).kind===z.Identifier)return Ty(t);break}case z.Out:return Nx(t);case z.ReturnKeyword:return Ox(t);case z.OpenSharpBracket:return Ix(t);case z.EachKeyword:return Fx(t);case z.ForKeyword:return Tx(t);case z.LoopKeyword:return Rx(t);case z.BreakKeyword:return t.next(),At("break",{},r);case z.ContinueKeyword:return t.next(),At("continue",{},r)}const e=hs(t,!1),n=Dx(t,e);return n||e}function Sx(t){switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:return Fy(t);case z.At:return Ty(t);default:throw new Gt(`unexpected token: ${z[t.getKind()]}`,t.token.loc)}}function vf(t){const r=t.token.loc;if(t.getKind()===z.OpenBrace){const e=Ac(t);return At("block",{statements:e},r)}else return Sh(t)}function Fy(t){const r=t.token.loc;let e;switch(t.getKind()){case z.LetKeyword:{e=!1;break}case z.VarKeyword:{e=!0;break}default:throw new Gt(`unexpected token: ${z[t.getKind()]}`,t.token.loc)}t.next(),t.expect(z.Identifier);const n=t.token.value;t.next();let v;t.getKind()===z.Colon&&(t.next(),v=Yf(t)),t.nextWith(z.Eq),t.getKind()===z.NewLine&&t.next();const w=hs(t,!1);return At("def",{name:n,varType:v,expr:w,mut:e,attr:[]},r)}function Ty(t){const r=t.token.loc;t.nextWith(z.At),t.expect(z.Identifier);const e=t.token.value;t.next();const n=Ey(t);let v;t.getKind()===z.Colon&&(t.next(),v=Yf(t));const w=Ac(t);return At("def",{name:e,expr:At("fn",{args:n,retType:v,children:w},r),mut:!1,attr:[]},r)}function Nx(t){const r=t.token.loc;t.nextWith(z.Out);const e=hs(t,!1);return _i("print",[e],r)}function Fx(t){const r=t.token.loc;let e=!1;t.nextWith(z.EachKeyword),t.getKind()===z.OpenParen&&(e=!0,t.next()),t.nextWith(z.LetKeyword),t.expect(z.Identifier);const n=t.token.value;if(t.next(),t.getKind()===z.Comma)t.next();else throw new Gt("separator expected",t.token.loc);const v=hs(t,!1);e&&t.nextWith(z.CloseParen);const w=vf(t);return At("each",{var:n,items:v,for:w},r)}function Tx(t){const r=t.token.loc;let e=!1;if(t.nextWith(z.ForKeyword),t.getKind()===z.OpenParen&&(e=!0,t.next()),t.getKind()===z.LetKeyword){t.next();const n=t.token.loc;t.expect(z.Identifier);const v=t.token.value;t.next();let w;if(t.getKind()===z.Eq?(t.next(),w=hs(t,!1)):w=At("num",{value:0},n),t.getKind()===z.Comma)t.next();else throw new Gt("separator expected",t.token.loc);const _=hs(t,!1);e&&t.nextWith(z.CloseParen);const P=vf(t);return At("for",{var:v,from:w,to:_,for:P},r)}else{const n=hs(t,!1);e&&t.nextWith(z.CloseParen);const v=vf(t);return At("for",{times:n,for:v},r)}}function Ox(t){const r=t.token.loc;t.nextWith(z.ReturnKeyword);const e=hs(t,!1);return At("return",{expr:e},r)}function Ix(t){const r=[];for(;t.getKind()===z.OpenSharpBracket;)r.push(jx(t)),t.nextWith(z.NewLine);const e=Sh(t);if(e.type!=="def")throw new Gt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function jx(t){const r=t.token.loc;t.nextWith(z.OpenSharpBracket),t.expect(z.Identifier);const e=t.token.value;t.next();let n;return t.getKind()!==z.CloseBracket?n=hs(t,!0):n=At("bool",{value:!0},r),t.nextWith(z.CloseBracket),At("attr",{name:e,value:n},r)}function Rx(t){const r=t.token.loc;t.nextWith(z.LoopKeyword);const e=Ac(t);return At("loop",{statements:e},r)}function Dx(t,r){const e=t.token.loc;switch(t.getKind()){case z.Eq:{t.next();const n=hs(t,!1);return At("assign",{dest:r,expr:n},e)}case z.PlusEq:{t.next();const n=hs(t,!1);return At("addAssign",{dest:r,expr:n},e)}case z.MinusEq:{t.next();const n=hs(t,!1);return At("subAssign",{dest:r,expr:n},e)}default:return}}function Lx(t){const r=[];for(;t.getKind()===z.NewLine;)t.next();for(;t.getKind()!==z.EOF;){switch(t.getKind()){case z.Colon2:{r.push(Oy(t));break}case z.Sharp3:{r.push(Hx(t));break}default:{r.push(Sh(t));break}}switch(t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.EOF:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Oy(t){const r=t.token.loc;t.nextWith(z.Colon2),t.expect(z.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(z.OpenBrace);t.getKind()===z.NewLine;)t.next();for(;t.getKind()!==z.CloseBrace;){switch(t.getKind()){case z.VarKeyword:case z.LetKeyword:case z.At:{n.push(Sx(t));break}case z.Colon2:{n.push(Oy(t));break}}switch(t.getKind()){case z.NewLine:case z.SemiColon:{for(;[z.NewLine,z.SemiColon].includes(t.getKind());)t.next();break}case z.CloseBrace:break;default:throw new Gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(z.CloseBrace),At("ns",{name:e,members:n},r)}function Hx(t){const r=t.token.loc;t.nextWith(z.Sharp3);let e=null;t.getKind()===z.Identifier&&(e=t.token.value,t.next());const n=hs(t,!0);return At("meta",{name:e,value:n},r)}function zt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=zt(e.expr,r);break}case"return":{e.expr=zt(e.expr,r);break}case"each":{e.items=zt(e.items,r),e.for=zt(e.for,r);break}case"for":{e.from!=null&&(e.from=zt(e.from,r)),e.to!=null&&(e.to=zt(e.to,r)),e.times!=null&&(e.times=zt(e.times,r)),e.for=zt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=zt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=zt(e.expr,r),e.dest=zt(e.dest,r);break}case"not":{e.expr=zt(e.expr,r);break}case"if":{e.cond=zt(e.cond,r),e.then=zt(e.then,r);for(const n of e.elseif)n.cond=zt(n.cond,r),n.then=zt(n.then,r);e.else!=null&&(e.else=zt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=zt(e.children[n],r);break}case"match":{e.about=zt(e.about,r);for(const n of e.qs)n.q=zt(n.q,r),n.a=zt(n.a,r);e.default!=null&&(e.default=zt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=zt(e.statements[n],r);break}case"exists":{e.identifier=zt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=zt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],zt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=zt(e.value[n],r);break}case"call":{e.target=zt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=zt(e.args[n],r);break}case"index":{e.target=zt(e.target,r),e.index=zt(e.index,r);break}case"prop":{e.target=zt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=zt(e.members[n],r);break}case"or":case"and":{e.left=zt(e.left,r),e.right=zt(e.right,r);break}}return e}const go=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function yo(t,r){throw new Gt(`Reserved word "${t}" cannot be used as variable name.`,r)}function Ux(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{go.includes(t.name)&&yo(t.name,t.loc);break}case"meta":{t.name!=null&&go.includes(t.name)&&yo(t.name,t.loc);break}case"each":{go.includes(t.var)&&yo(t.var,t.loc);break}case"for":{t.var!=null&&go.includes(t.var)&&yo(t.var,t.loc);break}case"fn":{for(const r of t.args)go.includes(r.name)&&yo(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())go.includes(r)&&yo(r,t.loc);break}}return t}function Bx(t){for(const r of t)zt(r,Ux);return t}function Vg(t){return{type:"simple",name:t}}function qx(t,r){return{type:"generic",name:t,inners:r}}function zx(t,r){return{type:"fn",args:t,result:r}}function Hc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Hc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Hc(n)).join(", "),e=Hc(t.result);return`@(${r}) { ${e} }`}}}function Po(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Vg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Po(t.inner):r=Vg("any"),qx(t.name,[r])}}throw new Gt(`Unknown type: '${Hc(t)}'`,t.loc)}else{const r=t.args.map(e=>Po(e));return zx(r,Po(t.result))}}function Kx(t){switch(t.type){case"def":{t.varType!=null&&Po(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Po(r.argType);t.retType!=null&&Po(t.retType);break}}return t}function Vx(t){for(const r of t)zt(r,Kx);return t}var Ru;let Wx=(Ru=class{constructor(){he(this,"plugins");this.plugins={validate:[Bx,Vx],transform:[]}}static parse(r){return Ru.instance==null&&(Ru.instance=new Ru),Ru.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new gx(r);e=Lx(n);for(const v of this.plugins.validate)e=v(e);for(const v of this.plugins.transform)e=v(e);return e}},he(Ru,"instance"),Ru);const Gx="next",Jx={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Rp=[],Go=null;function Zx(t){return Rp=Wx.parse(t),JSON.stringify(Rp,null,"	")}async function Qx(t){Go==null||Go.abort(),Go=new dn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Tp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Tp(e.val,!0),print:!1});break}}});try{await Go.exec(Rp)}catch(r){t.err(r)}}const Xx=Object.freeze(Object.defineProperty({__proto__:null,exec:Qx,parse:Zx,samples:Jx,version:Gx},Symbol.toStringTag,{value:"Module"}));function ss(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Nh=class Iy extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Iy)}},Yx=class extends Nh{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},eo=class extends Nh{constructor(e,n){super(e,n);he(this,"name","Syntax")}},pr=class extends Nh{constructor(e,n){super(e,n);he(this,"name","Runtime")}},Wg=class extends pr{constructor(r,e){super(r,e)}},eb=class extends pr{constructor(e,n){super(e,n);he(this,"name","")}};var Vu=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Ou=class Dp{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Dp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Dp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new pr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new pr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Vu([ss],Ou.prototype,"log",null);Vu([ss],Ou.prototype,"onUpdated",null);Vu([ss],Ou.prototype,"createChildScope",null);Vu([ss],Ou.prototype,"createChildNamespaceScope",null);Vu([ss],Ou.prototype,"get",null);Vu([ss],Ou.prototype,"exists",null);Vu([ss],Ou.prototype,"getAll",null);Vu([ss],Ou.prototype,"add",null);Vu([ss],Ou.prototype,"assign",null);const Vt={type:"null"},ma={type:"bool",value:!0},$a={type:"bool",value:!1},Re=t=>({type:"num",value:t}),ir=t=>({type:"str",value:t}),Uf=t=>({type:"bool",value:t}),ph=t=>({type:"obj",value:t}),es=t=>({type:"arr",value:t}),tb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ge=t=>({type:"fn",native:t}),rb=t=>({type:"return",value:t}),sb=()=>({type:"break",value:null}),nb=()=>({type:"continue",value:null}),ab=t=>t.type==="return"?t.value:t,Lp=(t,r)=>({type:"error",value:t,info:r});function Ca(t){if(t==null)throw new pr("Expect anything, but got nothing.")}function vn(t){if(t==null)throw new pr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new pr(`Expect boolean, but got ${t.type}.`)}function Eu(t){if(t==null)throw new pr("Expect function, but got nothing.");if(t.type!=="fn")throw new pr(`Expect function, but got ${t.type}.`)}function ds(t){if(t==null)throw new pr("Expect string, but got nothing.");if(t.type!=="str")throw new pr(`Expect string, but got ${t.type}.`)}function Ee(t){if(t==null)throw new pr("Expect number, but got nothing.");if(t.type!=="num")throw new pr(`Expect number, but got ${t.type}.`)}function bu(t){if(t==null)throw new pr("Expect object, but got nothing.");if(t.type!=="obj")throw new pr(`Expect object, but got ${t.type}.`)}function Bf(t){if(t==null)throw new pr("Expect array, but got nothing.");if(t.type!=="arr")throw new pr(`Expect array, but got ${t.type}.`)}function Zh(t){return t.type==="obj"}function Gg(t){return t.type==="arr"}function ko(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Hp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Hp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Up(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Up(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Up(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Bp(t){if(t===null)return Vt;if(typeof t=="boolean")return Uf(t);if(typeof t=="string")return ir(t);if(typeof t=="number")return Re(t);if(Array.isArray(t))return es(t.map(r=>Bp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Bp(n));return ph(r)}return Vt}function Mo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Mo(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${Mo(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const ib={version:"0.18.0"},lb=ib.version,ub=new TextEncoder,fb=new TextDecoder,ob={help:ir("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ir(lb),"Core:ai":ir("kawaii"),"Core:not":ge(([t])=>(vn(t),t.value?$a:ma)),"Core:eq":ge(([t,r])=>(Ca(t),Ca(r),ko(t,r)?ma:$a)),"Core:neq":ge(([t,r])=>(Ca(t),Ca(r),ko(t,r)?$a:ma)),"Core:and":ge(([t,r])=>(vn(t),t.value?(vn(r),r.value?ma:$a):$a)),"Core:or":ge(([t,r])=>(vn(t),t.value?ma:(vn(r),r.value?ma:$a))),"Core:add":ge(([t,r])=>(Ee(t),Ee(r),Re(t.value+r.value))),"Core:sub":ge(([t,r])=>(Ee(t),Ee(r),Re(t.value-r.value))),"Core:mul":ge(([t,r])=>(Ee(t),Ee(r),Re(t.value*r.value))),"Core:pow":ge(([t,r])=>{Ee(t),Ee(r);const e=t.value**r.value;if(isNaN(e))throw new pr("Invalid operation.");return Re(e)}),"Core:div":ge(([t,r])=>{Ee(t),Ee(r);const e=t.value/r.value;if(isNaN(e))throw new pr("Invalid operation.");return Re(e)}),"Core:mod":ge(([t,r])=>(Ee(t),Ee(r),Re(t.value%r.value))),"Core:gt":ge(([t,r])=>(Ee(t),Ee(r),t.value>r.value?ma:$a)),"Core:lt":ge(([t,r])=>(Ee(t),Ee(r),t.value<r.value?ma:$a)),"Core:gteq":ge(([t,r])=>(Ee(t),Ee(r),t.value>=r.value?ma:$a)),"Core:lteq":ge(([t,r])=>(Ee(t),Ee(r),t.value<=r.value?ma:$a)),"Core:type":ge(([t])=>(Ca(t),ir(t.type))),"Core:to_str":ge(([t])=>(Ca(t),ir(Mo(t)))),"Core:range":ge(([t,r])=>(Ee(t),Ee(r),t.value<r.value?es(Array.from({length:r.value-t.value+1},(e,n)=>Re(n+t.value))):t.value>r.value?es(Array.from({length:t.value-r.value+1},(e,n)=>Re(t.value-n))):es([t]))),"Core:sleep":ge(async([t])=>(Ee(t),await new Promise(r=>setTimeout(r,t.value)),Vt)),"Core:abort":ge(async([t])=>{throw ds(t),new eb(t.value)}),"Util:uuid":ge(()=>ir(bc())),"Json:stringify":ge(([t])=>(Ca(t),ir(JSON.stringify(Up(t))))),"Json:parse":ge(([t])=>{ds(t);try{return Bp(JSON.parse(t.value))}catch{return Lp("not_json")}}),"Json:parsable":ge(([t])=>{ds(t);try{JSON.parse(t.value)}catch{return Uf(!1)}return Uf(!0)}),"Date:now":ge(()=>Re(Date.now())),"Date:year":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":ge(([t])=>(t&&Ee(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":ge(([t])=>(ds(t),Re(new Date(t.value).getTime()))),"Date:to_iso_str":ge(([t,r])=>{t&&Ee(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ee(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),Pe=we.toString().padStart(2,"0");v=`${ue}${oe}:${Pe}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return ir(`${w}-${_}-${P}T${E}:${N}:${O}.${H}${v}`)}),"Math:Infinity":Re(1/0),"Math:E":Re(Math.E),"Math:LN2":Re(Math.LN2),"Math:LN10":Re(Math.LN10),"Math:LOG2E":Re(Math.LOG2E),"Math:LOG10E":Re(Math.LOG10E),"Math:PI":Re(Math.PI),"Math:SQRT1_2":Re(Math.SQRT1_2),"Math:SQRT2":Re(Math.SQRT2),"Math:abs":ge(([t])=>(Ee(t),Re(Math.abs(t.value)))),"Math:acos":ge(([t])=>(Ee(t),Re(Math.acos(t.value)))),"Math:acosh":ge(([t])=>(Ee(t),Re(Math.acosh(t.value)))),"Math:asin":ge(([t])=>(Ee(t),Re(Math.asin(t.value)))),"Math:asinh":ge(([t])=>(Ee(t),Re(Math.asinh(t.value)))),"Math:atan":ge(([t])=>(Ee(t),Re(Math.atan(t.value)))),"Math:atanh":ge(([t])=>(Ee(t),Re(Math.atanh(t.value)))),"Math:atan2":ge(([t,r])=>(Ee(t),Ee(r),Re(Math.atan2(t.value,r.value)))),"Math:cbrt":ge(([t])=>(Ee(t),Re(Math.cbrt(t.value)))),"Math:ceil":ge(([t])=>(Ee(t),Re(Math.ceil(t.value)))),"Math:clz32":ge(([t])=>(Ee(t),Re(Math.clz32(t.value)))),"Math:cos":ge(([t])=>(Ee(t),Re(Math.cos(t.value)))),"Math:cosh":ge(([t])=>(Ee(t),Re(Math.cosh(t.value)))),"Math:exp":ge(([t])=>(Ee(t),Re(Math.exp(t.value)))),"Math:expm1":ge(([t])=>(Ee(t),Re(Math.expm1(t.value)))),"Math:floor":ge(([t])=>(Ee(t),Re(Math.floor(t.value)))),"Math:fround":ge(([t])=>(Ee(t),Re(Math.fround(t.value)))),"Math:hypot":ge(([t])=>{Bf(t);const r=[];for(const e of t.value)Ee(e),r.push(e.value);return Re(Math.hypot(...r))}),"Math:imul":ge(([t,r])=>(Ee(t),Ee(r),Re(Math.imul(t.value,r.value)))),"Math:log":ge(([t])=>(Ee(t),Re(Math.log(t.value)))),"Math:log1p":ge(([t])=>(Ee(t),Re(Math.log1p(t.value)))),"Math:log10":ge(([t])=>(Ee(t),Re(Math.log10(t.value)))),"Math:log2":ge(([t])=>(Ee(t),Re(Math.log2(t.value)))),"Math:max":ge(([t,r])=>(Ee(t),Ee(r),Re(Math.max(t.value,r.value)))),"Math:min":ge(([t,r])=>(Ee(t),Ee(r),Re(Math.min(t.value,r.value)))),"Math:pow":ge(([t,r])=>(Ee(t),Ee(r),Re(Math.pow(t.value,r.value)))),"Math:round":ge(([t])=>(Ee(t),Re(Math.round(t.value)))),"Math:sign":ge(([t])=>(Ee(t),Re(Math.sign(t.value)))),"Math:sin":ge(([t])=>(Ee(t),Re(Math.sin(t.value)))),"Math:sinh":ge(([t])=>(Ee(t),Re(Math.sinh(t.value)))),"Math:sqrt":ge(([t])=>{Ee(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new pr("Invalid operation.");return Re(r)}),"Math:tan":ge(([t])=>(Ee(t),Re(Math.tan(t.value)))),"Math:tanh":ge(([t])=>(Ee(t),Re(Math.tanh(t.value)))),"Math:trunc":ge(([t])=>(Ee(t),Re(Math.trunc(t.value)))),"Math:rnd":ge(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Re(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Re(Math.random())),"Math:gen_rng":ge(([t])=>{if(Ca(t),t.type!=="num"&&t.type!=="str")return Vt;const r=uo(t.value.toString());return ge(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Re(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Re(r()))}),"Num:to_hex":ge(([t])=>(Ee(t),ir(t.value.toString(16)))),"Num:from_hex":ge(([t])=>(ds(t),Re(parseInt(t.value,16)))),"Str:lf":ir(`
`),"Str:lt":ge(([t,r])=>(ds(t),ds(r),t.value<r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:gt":ge(([t,r])=>(ds(t),ds(r),t.value>r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:from_codepoint":ge(([t])=>(Ee(t),ir(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ge(([t])=>(Bf(t),ir(Array.from(t.value.map(r=>(Ee(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ge(([t])=>(Bf(t),ir(fb.decode(Uint8Array.from(t.value.map(r=>(Ee(r),r.value))))))),"Arr:create":ge(([t,r])=>{Ee(t);try{return es(Array(t.value).fill(r??Vt))}catch(e){throw t.value<0?new pr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new pr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ge(([t])=>(bu(t),es(Array.from(t.value.keys()).map(r=>ir(r))))),"Obj:vals":ge(([t])=>(bu(t),es(Array.from(t.value.values())))),"Obj:kvs":ge(([t])=>(bu(t),es(Array.from(t.value.entries()).map(([r,e])=>es([ir(r),e]))))),"Obj:get":ge(([t,r])=>(bu(t),ds(r),t.value.get(r.value)??Vt)),"Obj:set":ge(([t,r,e])=>(bu(t),ds(r),Ca(e),t.value.set(r.value,e),Vt)),"Obj:has":ge(([t,r])=>(bu(t),ds(r),Uf(t.value.has(r.value)))),"Obj:copy":ge(([t])=>(bu(t),ph(new Map(t.value)))),"Obj:merge":ge(([t,r])=>(bu(t),bu(r),ph(new Map([...t.value,...r.value])))),"Error:create":ge(([t,r])=>(ds(t),Lp(t.value,r))),"Async:interval":ge(async([t,r,e],n)=>{Ee(t),Eu(r),e&&(vn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ge(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ge(async([t,r],e)=>{Ee(t),Eu(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ge(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},Jg={num:{to_str:t=>ge(async(r,e)=>ir(t.value.toString()))},str:{to_num:t=>ge(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Vt:Re(n)}),to_arr:t=>ge(async(r,e)=>es(zs(t.value).map(n=>ir(n)))),to_unicode_arr:t=>ge(async(r,e)=>es([...t.value].map(n=>ir(n)))),to_unicode_codepoint_arr:t=>ge(async(r,e)=>es([...t.value].map(n=>{const v=n.codePointAt(0);return Re(v??n.charCodeAt(0))}))),to_char_arr:t=>ge(async(r,e)=>es(t.value.split("").map(n=>ir(n)))),to_charcode_arr:t=>ge(async(r,e)=>es(t.value.split("").map(n=>Re(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ge(async(r,e)=>es(Array.from(ub.encode(t.value)).map(n=>Re(n)))),len:t=>Re(oo(t.value)),replace:t=>ge(async([r,e],n)=>(ds(r),ds(e),ir(t.value.split(r.value).join(e.value)))),index_of:t=>ge(async([r,e],n)=>{ds(r),e&&Ee(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Re(ho(t.value,r.value,v))}),incl:t=>ge(async([r],e)=>(ds(r),t.value.includes(r.value)?ma:$a)),trim:t=>ge(async(r,e)=>ir(t.value.trim())),upper:t=>ge(async(r,e)=>ir(t.value.toUpperCase())),lower:t=>ge(async(r,e)=>ir(t.value.toLowerCase())),split:t=>ge(async([r],e)=>(r&&ds(r),es(r?t.value.split(r?r.value:"").map(n=>ir(n)):zs(t.value).map(n=>ir(n))))),slice:t=>ge(async([r,e],n)=>(Ee(r),Ee(e),ir(co(t.value,r.value,e.value)))),pick:t=>ge(async([r],e)=>{Ee(r);const v=zs(t.value)[r.value];return v?ir(v):Vt}),charcode_at:t=>ge(([r],e)=>{Ee(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Vt:Re(n)}),codepoint_at:t=>ge(([r],e)=>{Ee(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Vt:Re(n)})},arr:{len:t=>Re(t.value.length),push:t=>ge(async([r],e)=>(Ca(r),t.value.push(r),t)),unshift:t=>ge(async([r],e)=>(Ca(r),t.value.unshift(r),t)),pop:t=>ge(async(r,e)=>t.value.pop()??Vt),shift:t=>ge(async(r,e)=>t.value.shift()??Vt),concat:t=>ge(async([r],e)=>(Bf(r),es(t.value.concat(r.value)))),slice:t=>ge(async([r,e],n)=>(Ee(r),Ee(e),es(t.value.slice(r.value,e.value)))),join:t=>ge(async([r],e)=>(r&&ds(r),ir(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ge(async([r],e)=>{Eu(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Re(w)]));return es(await Promise.all(n))}),filter:t=>ge(async([r],e)=>{Eu(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Re(v)]);vn(_),_.value&&n.push(w)}return es(n)}),reduce:t=>ge(async([r,e],n)=>{Eu(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Re(_)])}return w}),find:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(vn(w),w.value)return v}return Vt}),incl:t=>ge(async([r],e)=>(Ca(r),t.value.some(n=>ko(r,n))?ma:$a)),index_of:t=>ge(async([r,e],n)=>{if(Ca(r),e){Ee(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>ko(_,r));return Re(w<0?w:w+v)}else return Re(t.value.findIndex(v=>ko(v,r)))}),reverse:t=>ge(async(r,e)=>(t.value.reverse(),Vt)),copy:t=>ge(async(r,e)=>es([...t.value])),sort:t=>ge(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);Ee(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return Eu(r),Bf(t),t.value=await n(t.value,r),t}),fill:t=>ge(async([r,e,n],v)=>{const w=r??Vt,_=e&&(Ee(e),e.value),P=n&&(Ee(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>ge(async([r],e)=>{Ee(r);try{return es(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new pr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new pr("arr.repeat expected integer, got non-integer")}}),every:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(vn(w),!w.value)return $a}return ma}),some:t=>ge(async([r],e)=>{Eu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Re(n)]);if(vn(w),w.value)return ma}return $a})},error:{name:t=>ir(t.value),info:t=>t.info??Vt}};function cb(t,r){if(Object.hasOwn(Jg,t.type)){const e=Jg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new pr(`No such prop (${r}) in ${t.type}.`)}else throw new pr(`Cannot read prop of ${t.type}. (reading ${r})`)}const hb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ha=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const jy=300,pb=jy-1;let Pn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:ge(([v])=>{Ca(v),this.opts.out&&this.opts.out(v)}),readline:ge(async v=>{const w=v[0];if(ds(w),this.opts.in==null)return Vt;const _=await this.opts.in(w.value);return ir(_)})};this.vars=Object.fromEntries(Object.entries({...r,...ob,...n}).map(([v,w])=>[v,hb.const(w)])),this.scope=new Ou([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Lp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Nh?this.opts.err(r):this.opts.err(new Yx(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Vt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return ab(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Vt;if(this.stepCount%jy===pb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new pr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Eu(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(vn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(vn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Vt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(ko(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Vt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Vt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ee(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ee(n),Ee(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Re(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Vt}case"each":{const n=await this._eval(r.items,e);Bf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Vt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Vt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Vt}case"addAssign":{const n=await this._eval(r.dest,e);Ee(n);const v=await this._eval(r.expr,e);return Ee(v),await this.assign(e,r.dest,Re(n.value+v.value)),Vt}case"subAssign":{const n=await this._eval(r.dest,e);Ee(n);const v=await this._eval(r.expr,e);return Ee(v),await this.assign(e,r.dest,Re(n.value-v.value)),Vt}case"null":return Vt;case"bool":return Uf(r.value);case"num":return Re(r.value);case"str":return ir(r.value);case"arr":return es(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return ph(n)}case"prop":{const n=await this._eval(r.target,e);return Zh(n)?n.value.has(r.name)?n.value.get(r.name):Vt:cb(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Gg(n)){Ee(v);const w=n.value[v.value];if(w===void 0)throw new Wg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(Zh(n))return ds(v),n.value.has(v.value)?n.value.get(v.value):Vt;throw new pr(`Cannot read prop (${Mo(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return vn(n),Uf(!n.value)}case"fn":return tb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Uf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=Mo(w)}return ir(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),rb(n)}case"break":return this.log("block:break",{scope:e.name}),sb();case"continue":return this.log("block:continue",{scope:e.name}),nb();case"ns":return Vt;case"meta":return Vt;case"and":{const n=await this._eval(r.left,e);if(vn(n),n.value){const v=await this._eval(r.right,e);return vn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(vn(n),n.value)return n;{const v=await this._eval(r.right,e);return vn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Vt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(Gg(v)){if(Ee(w),v.value[w.value]===void 0)throw new Wg(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(Zh(v))ds(w),v.value.set(w.value,n);else throw new pr(`Cannot read prop (${Mo(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);bu(v),v.value.set(e.name,n)}else if(e.type==="arr")Bf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Vt)));else if(e.type==="obj")bu(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Vt)));else throw new pr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ha([ss],Pn.prototype,"exec",null);ha([ss],Pn.prototype,"execFn",null);ha([ss],Pn.prototype,"execFnSimple",null);ha([ss],Pn.prototype,"handleError",null);ha([ss],Pn.prototype,"log",null);ha([ss],Pn.prototype,"collectNs",null);ha([ss],Pn.prototype,"collectNsMember",null);ha([ss],Pn.prototype,"_fn",null);ha([ss],Pn.prototype,"_eval",null);ha([ss],Pn.prototype,"_run",null);ha([ss],Pn.prototype,"registerAbortHandler",null);ha([ss],Pn.prototype,"unregisterAbortHandler",null);ha([ss],Pn.prototype,"abort",null);ha([ss],Pn.prototype,"assign",null);ha([ss],Pn,"collectMetadata",null);function vb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function qf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,qf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}vb(qf,Error);function Qh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}qf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=Qh("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+Qh("",v.column-1," ")+Qh("",H,"^")}else r+=`
 at `+_}return r};qf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Zg(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:er,Main:oi},w=er,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="!",Ir="[",Qt=".",Pr="if",Bt="elif",Ar="else",Ur="match",tr="=>",jr="*",Xt="eval",$r="exists",W="`",re='"',fe="'",xe='\\"',ce="\\'",Me="true",Oe="false",Ae="null",ke="@",$e="@(",Je="<",rt=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,lt=/^[%*-+\-\/<>\^]/,$t=/^[^`{]/,Nt=/^[{}`]/,Ct=/^[+\-]/,_t=/^[1-9]/,ot=/^[0-9]/,ks=/^[,;]/,as=/^[A-Z_]/i,Xr=/^[A-Z0-9_]/i,xt=/^[\r\n]/,It=/^[ \t\r\n]/,yn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),rr=j("*/",!1),Dt=j("(",!1),Br=j(")",!1),Sn=j("::",!1),Pt=j("{",!1),ut=j("}",!1),kr=j("###",!1),qt=j("let",!1),st=j(":",!1),Lt=j("=",!1),ms=j("var",!1),Ht=j("<:",!1),Ut=j("#[",!1),qr=j("]",!1),Na=j("each",!1),Mr=j(",",!1),is=j("for",!1),Ns=j("return",!1),ft=bt([["A","Z"],["0","9"],"_",":"],!1,!0),Tt=j("loop",!1),Ks=j("break",!1),Er=j("continue",!1),Sr=j("+=",!1),Gi=j("-=",!1),Fa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Oa=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=bt(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),Nn=j("[",!1),Vs=j(".",!1),Fn=j("if",!1),Ia=j("elif",!1),tl=j("else",!1),ja=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Ts=bt(["`","{"],!0,!1),Tn=bt(["{","}","`"],!1,!1),Ws=j('"',!1),Gs=j("'",!1),al=j('\\"',!1),Js=j("\\'",!1),ls=bt(["+","-"],!1,!1),Os=bt([["1","9"]],!1,!1),xr=bt([["0","9"]],!1,!1),Zs=j("true",!1),Qs=j("false",!1),Xs=j("null",!1),us=bt([",",";"],!1,!1),Ys=j("@",!1),Is=j("@(",!1),Ra=j("<",!1),Yt=j(">",!1),Da=bt([["A","Z"],"_"],!1,!0),dr=bt([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),en=bt(["\r",`
`],!1,!1),ll=bt([" ","	","\r",`
`],!1,!1),js=bt([" ","	"],!1,!1),ul=function(o){return o.join("")},On=function(){return f()},fl=function(){return f()},La=function(){return""},ol=function(){return""},cl=function(o){return o??[]},Ha=function(o,g){return g},hl=function(o,g){return[o,...g]},Ua=function(o,g){return g},pl=function(o,g){return[o,...g]},Ba=function(o,g){return g},vl=function(o,g){return[o,...g]},qa=function(o){return o},gl=function(o,g){return ae("ns",{name:o,members:g})},In=function(o,g){return ae("meta",{name:o,value:g})},dl=function(o){return ae("meta",{name:null,value:o})},jn=function(o,g,b){return ae("def",{name:o,varType:g,expr:b,mut:!1,attr:[]})},yl=function(o,g,b){return ae("def",{name:o,varType:g,expr:b,mut:!0,attr:[]})},za=function(o){return ae("identifier",{name:"print",chain:[ae("callChain",{args:[o]})]})},wl=function(o,g){return ae("attr",{name:o,value:g??ae("bool",{value:!0})})},ml=function(o,g,b){return ae("each",{var:o,items:g,for:b})},$l=function(o,g,b){return ae("each",{var:o,items:g,for:b})},xl=function(o,g){return g},bl=function(o,g,b,y){return ae("for",{var:o,from:g??ae("num",{value:0}),to:b,for:y})},Al=function(o,g){return g},Cl=function(o,g,b,y){return ae("for",{var:o,from:g??ae("num",{value:0}),to:b,for:y})},_l=function(o,g){return ae("for",{times:o,for:g})},Pl=function(o,g){return ae("for",{times:o,for:g})},kl=function(o){return ae("return",{expr:o})},Ml=function(o){return ae("loop",{statements:o})},El=function(){return ae("break",{})},Sl=function(){return ae("continue",{})},Nl=function(o,g,b){return g==="+="?ae("addAssign",{dest:o,expr:b}):g==="-="?ae("subAssign",{dest:o,expr:b}):ae("assign",{dest:o,expr:b})},Ka=function(o,g,b){return{op:g,term:b}},Fl=function(o,g){return ae("infix",{operands:[o,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Tl=function(){return f()},Ol=function(o){return ae("not",{expr:o})},Il=function(o,g){return o.chain?{...o,chain:[...o.chain,...g]}:{...o,chain:g}},jl=function(o){return ae("callChain",{args:o??[]})},Rn=function(o,g){return g},Rl=function(o,g){return[o,...g]},Va=function(o){return ae("indexChain",{index:o})},Dl=function(o){return ae("propChain",{name:o})},Ll=function(o,g,b,y){return ae("if",{cond:o,then:g,elseif:b??[],else:y})},Hl=function(o,g){return[o,...g]},Wa=function(o,g){return{cond:o,then:g}},Ul=function(o){return o},Dn=function(o,g,b){return{q:g,a:b}},Bl=function(o,g,b){return ae("match",{about:o,qs:g??[],default:b})},ql=function(o){return ae("block",{statements:o})},zl=function(o){return ae("exists",{identifier:o})},Kl=function(o){return ae("identifier",{name:o})},Vl=function(o){return ae("tmpl",{tmpl:o})},Ga=function(o){return o.join("")},Ja=function(o){return o},Za=function(o){return ae("str",{value:o.join("")})},Qa=function(o){return o},Wl=function(o){return ae("str",{value:o.join("")})},Gl=function(){return'"'},Xa=function(){return"'"},Jl=function(){return ae("num",{value:parseFloat(f())})},Ya=function(){return ae("num",{value:parseFloat(f())})},ei=function(){return ae("num",{value:parseInt(f(),10)})},Zl=function(){return ae("num",{value:parseInt(f(),10)})},ti=function(){return ae("bool",{value:!0})},Ql=function(){return ae("bool",{value:!1})},Xl=function(){return ae("null",{})},ri=function(o,g){return{k:o,v:g}},Yl=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ae("obj",{value:g})},si=function(o){return o},eu=function(o){return ae("arr",{value:o})},tu=function(o,g){return{name:o,argType:g}},ni=function(o,g){return[o,...g]},ru=function(o,g,b,y,a,l){return(o.length>0||b.length>0)&&T("Cannot use spaces before or after the function name."),ae("def",{name:g,expr:ae("fn",{args:y??[],retType:a},l??[]),mut:!1,attr:[]})},ai=function(o,g,b){return ae("fn",{args:o??[],retType:g},b??[])},Ln=function(o){return o},su=function(o){return ae("arr",{value:o})},Hn=function(o,g){return{k:o,v:g}},nu=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ae("obj",{value:g})},au=function(o,g){return ae("fnTypeSource",{args:o??[],result:g})},ii=function(o,g){return[o,...g]},iu=function(o,g){return ae("namedTypeSource",{name:o,inner:g})},li=function(o){return ae("namedTypeSource",{name:o,inner:null})},ui=function(){return f()},lu=function(){return f()},fi=function(o){return ae("block",{statements:o??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,tn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},zr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function f(){return t.substring(te,c)}function Y(){return le(te,c)}function T(o,g){throw g=g!==void 0?g:le(te,c),uu(o,g)}function j(o,g){return{type:"literal",text:o,ignoreCase:g}}function bt(o,g,b){return{type:"class",parts:o,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function q(){return{type:"end"}}function Rs(o){var g=xs[o],b;if(g)return g;if(o>=xs.length)b=xs.length-1;else for(b=o;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<o;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[o]=g,g}function le(o,g,b){var y=Rs(o),a=Rs(g),l={source:n,start:{offset:o,line:y.line,column:y.column},end:{offset:g,line:a.line,column:a.column}};return b&&n&&typeof n.offset=="function"&&(l.start=n.offset(l.start),l.end=n.offset(l.end)),l}function D(o){c<yr||(c>yr&&(yr=c,tn=[]),tn.push(o))}function uu(o,g){return new qf(o,null,null,g)}function pe(o,g,b){return new qf(qf.buildMessage(o,g),o,g,b)}function er(){var o,g,b,y=c*77+0,a=S[y];if(a)return c=a.nextPos,a.result;for(o=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=o,g=ul(g),o=g,S[y]={nextPos:c,result:o},o}function Ds(){var o,g,b=c*77+1,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=mi(),g!==e&&(te=o,g=On()),o=g,o===e&&(o=c,g=ln(),g!==e&&(te=o,g=fl()),o=g,o===e&&(o=L(),o===e&&(t.length>c?(o=t.charAt(c),c++):(o=e,i===0&&D(gr))))),S[b]={nextPos:c,result:o},o)}function L(){var o,g,b,y,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,2)===_?(g=_,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],y=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=La()}else c=o,o=e;if(o===e)if(o=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(rr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(rr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);t.substr(c,2)===E?(y=E,c+=2):(y=e,i===0&&D(rr)),y!==e?(te=o,o=ol()):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function oi(){var o,g,b,y,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=rn(),b===e&&(b=null),y=[],a=k();a!==e;)y.push(a),a=k();return te=o,o=cl(b),S[l]={nextPos:c,result:o},o}function rn(){var o,g,b,y,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Un(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ha(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ha(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=hl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function R(){var o,g,b,y,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=sn(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=pl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function bs(){var o,g,b,y,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=As(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=vl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Un(){var o,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(o=br(),o===e&&(o=Xe(),o===e&&(o=As())),S[g]={nextPos:c,result:o},o)}function sn(){var o,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=br())),S[g]={nextPos:c,result:o},o)}function As(){var o,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=Cs(),o===e&&(o=Vr(),o===e&&(o=Ve(),o===e&&(o=Ls(),o===e&&(o=ci(),o===e&&(o=hi(),o===e&&(o=fu(),o===e&&(o=pi(),o===e&&(o=ou(),o===e&&(o=et()))))))))))),S[g]={nextPos:c,result:o},o)}function et(){var o,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(o=cu(),o===e&&(o=Kr()),S[g]={nextPos:c,result:o},o)}function Kr(){var o,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(o=Jr(),o===e&&(o=du(),o===e&&(o=pu(),o===e&&(o=nn()))),S[g]={nextPos:c,result:o},o)}function nn(){var o,g,b,y,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(o=Kn(),o===e&&(o=vu(),o===e&&(o=wi(),o===e&&(o=mi(),o===e&&(o=ln(),o===e&&(o=Gn(),o===e&&(o=fn(),o===e&&(o=Qn(),o===e&&(o=Xn(),o===e&&(o=bi(),o===e&&(o=hu(),o===e&&(o=Hs(),o===e))))))))))))if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=qa(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Nr(){var o,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(o=Gn(),o===e&&(o=ln(),o===e&&(o=fn(),o===e&&(o=ra(),o===e&&(o=sa(),o===e&&(o=Qn()))))),S[g]={nextPos:c,result:o},o)}function br(){var o,g,b,y,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(Sn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=B,c++):(l=e,i===0&&D(Pt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=o,o=gl(y,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Xe(){var o,g,b,y,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=tt(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Nr(),l!==e?(te=o,o=In(y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();y=Nr(),y!==e?(te=o,o=dl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function fs(){var o,g,b,y,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(o=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(qt)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Pe,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=jn(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Pe,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=yl(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[u]={nextPos:c,result:o},o}function Cs(){var o,g,b,y,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();y=et(),y!==e?(te=o,o=za(y)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Ve(){var o,g,b,y,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,2)===Z?(g=Z,c+=2):(g=e,i===0&&D(Ut)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Nr(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(qr)),$!==e?(te=o,o=wl(y,a)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Ls(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+19,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.substr(c,4)===X?(g=X,c+=4):(g=e,i===0&&D(Na)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=O,c++):(h=e,i===0&&D(Br)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=sr(),m!==e?(te=o,o=ml($,d,m)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,4)===X?(g=X,c+=4):(g=e,i===0&&D(Na)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=sr(),h!==e?(te=o,o=$l(l,u,h)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function ci(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A=c*77+20,M=S[A];if(M)return c=M.nextPos,M.result;if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=Pe,c++):(u=e,i===0&&D(Lt)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Mr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=O,c++):(x=e,i===0&&D(Br)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=sr(),C!==e?(te=o,o=bl($,s,h,C)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=Pe,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=sr(),x!==e?(te=o,o=Cl(l,p,d,x)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sr(),p!==e?(te=o,o=_l(a,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=sr(),l!==e?(te=o,o=Pl(y,l)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e}}return S[A]={nextPos:c,result:o},o}function Vr(){var o,g,b,y,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,6)===ie?(g=ie,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=et(),a!==e?(te=o,o=kl(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function hi(){var o,g,b,y,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Tt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(Pt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=Ml(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function fu(){var o,g,b,y,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Le?(g=Le,c+=5):(g=e,i===0&&D(Ks)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=El()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function pi(){var o,g,b,y,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,8)===_e?(g=_e,c+=8):(g=e,i===0&&D(Er)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Sl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function ou(){var o,g,b,y,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.substr(c,2)===at?(y=at,c+=2):(y=e,i===0&&D(Sr)),y===e&&(t.substr(c,2)===wt?(y=wt,c+=2):(y=e,i===0&&D(Gi)),y===e&&(t.charCodeAt(c)===61?(y=Pe,c++):(y=e,i===0&&D(Lt)))),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=o,o=Nl(g,y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function cu(){var o,g,b,y,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Kr(),g!==e){for(b=[],y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=vi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Ka(g,l,p)):(c=y,y=e)}else c=y,y=e;if(y!==e)for(;y!==e;){for(b.push(y),y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=vi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Ka(g,l,p)):(c=y,y=e)}else c=y,y=e}else b=e;b!==e?(te=o,o=Fl(g,b)):(c=o,o=e)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Wr(){var o,g,b,y=c*77+27,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=fr,c++):(g=e,i===0&&D(Fa)),g!==e?(b=We(),b!==e?(g=[g,b],o=g):(c=o,o=e)):(c=o,o=e),o===e&&(o=Ie()),S[y]={nextPos:c,result:o},o)}function vi(){var o,g,b=c*77+28,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===dt?(g=dt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===yt?(g=yt,c+=2):(g=e,i===0&&D(Oa)),g===e&&(t.substr(c,2)===Jt?(g=Jt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Zt?(g=Zt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),lt.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=o,g=Tl()),o=g,S[b]={nextPos:c,result:o},o)}function hu(){var o,g,b,y=c*77+29,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===33?(g=ht,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=o,o=Ol(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function pu(){var o,g,b,y,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=nn(),g!==e){if(b=[],y=gi(),y===e&&(y=Bn(),y===e&&(y=di())),y!==e)for(;y!==e;)b.push(y),y=gi(),y===e&&(y=Bn(),y===e&&(y=di()));else b=e;b!==e?(te=o,o=Il(g,b)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function gi(){var o,g,b,y,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=Gr(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=jl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Gr(){var o,g,b,y,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);te=o,o=Rl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Bn(){var o,g,b,y,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=Va(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function di(){var o,g,b,y=c*77+34,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===46?(g=Qt,c++):(g=e,i===0&&D(Vs)),g!==e?(b=tt(),b!==e?(te=o,o=Dl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function Jr(){var o,g,b,y,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===Pr?(g=Pr,c+=2):(g=e,i===0&&D(Fn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=sr(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=qn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=yi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=o,o=Ll(y,l,$,p)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function qn(){var o,g,b,y,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=zn(),g!==e){for(b=[],y=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=zn(),l!==e?y=l:(c=y,y=e);y!==e;){for(b.push(y),y=c,a=[],l=k();l!==e;)a.push(l),l=k();l=zn(),l!==e?y=l:(c=y,y=e)}te=o,o=Hl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function zn(){var o,g,b,y,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,4)===Bt?(g=Bt,c+=4):(g=e,i===0&&D(Ia)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=sr(),$!==e?(te=o,o=Wa(a,$)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function yi(){var o,g,b,y,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,4)===Ar?(g=Ar,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=sr(),a!==e?(te=o,o=Ul(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function Kn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.substr(c,5)===Ur?(g=Ur,c+=5):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=B,c++):($=e,i===0&&D(Pt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=jr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=C}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=o,o=Bl(a,s,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[I]={nextPos:c,result:o},o}function vu(){var o,g,b,y,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Xt?(g=Xt,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(Pt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=ql(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function wi(){var o,g,b,y,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,6)===$r?(g=$r,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;b!==e?(y=Hs(),y!==e?(te=o,o=zl(y)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Hs(){var o,g,b=c*77+42,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=wu(),g!==e&&(te=o,g=Kl(g)),o=g,S[b]={nextPos:c,result:o},o)}function mi(){var o,g,b,y,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=$i(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=$i(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===96?(y=W,c++):(y=e,i===0&&D($s)),y!==e?(te=o,o=Vl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function $i(){var o,g,b,y,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=et(),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?o=y:(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,g=[],b=an(),b!==e)for(;b!==e;)g.push(b),b=an();else g=e;g!==e&&(te=o,g=Ga(g)),o=g}return S[$]={nextPos:c,result:o},o}function an(){var o,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(o=gu(),o===e&&(o=t.charAt(c),$t.test(o)?c++:(o=e,i===0&&D(Ts))),S[g]={nextPos:c,result:o},o)}function gu(){var o,g,b,y=c*77+46,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=fr,c++):(g=e,i===0&&D(Fa)),g!==e?(b=t.charAt(c),Nt.test(b)?c++:(b=e,i===0&&D(Tn)),b!==e?o=b:(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function ln(){var o,g,b,y,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Ws)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Ja(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Ja(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===34?(y=re,c++):(y=e,i===0&&D(Ws)),y!==e?(te=o,o=Za(b)):(c=o,o=e)}else c=o,o=e;if(o===e)if(o=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(Gs)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Qa(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Qa(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===39?(y=fe,c++):(y=e,i===0&&D(Gs)),y!==e?(te=o,o=Wl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Vn(){var o,g,b=c*77+48,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=o,g=Gl()),o=g,S[b]={nextPos:c,result:o},o)}function Wn(){var o,g,b=c*77+49,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===ce?(g=ce,c+=2):(g=e,i===0&&D(Js)),g!==e&&(te=o,g=Xa()),o=g,S[b]={nextPos:c,result:o},o)}function Gn(){var o,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(o=un(),o===e&&(o=Jn()),S[g]={nextPos:c,result:o},o)}function un(){var o,g,b,y,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),_t.test(b)?c++:(b=e,i===0&&D(Os)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;if(y!==e)if(t.charCodeAt(c)===46?(a=Qt,c++):(a=e,i===0&&D(Vs)),a!==e){if(l=[],$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr));else l=e;l!==e?(te=o,o=Jl()):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e)if(t.charCodeAt(c)===46?(y=Qt,c++):(y=e,i===0&&D(Vs)),y!==e){if(a=[],l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr));else a=e;a!==e?(te=o,o=Ya()):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Jn(){var o,g,b,y,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),_t.test(b)?c++:(b=e,i===0&&D(Os)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;y!==e?(te=o,o=ei()):(c=o,o=e)}else c=o,o=e;return o===e&&(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e?(te=o,o=Zl()):(c=o,o=e)),S[l]={nextPos:c,result:o},o}function fn(){var o,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(o=xi(),o===e&&(o=Zn()),S[g]={nextPos:c,result:o},o)}function xi(){var o,g,b,y,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(Zs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=ti()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Zn(){var o,g,b,y,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Oe?(g=Oe,c+=5):(g=e,i===0&&D(Qs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Ql()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Qn(){var o,g,b,y,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Xl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Xn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+57,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=ri(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=ri(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=Yl(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function bi(){var o,g,b,y,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=si(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=si(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=eu(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Yn(){var o,g,b,y,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=tt(),g!==e){for(b=c,y=[],a=k();a!==e;)y.push(a),a=k();if(t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=o,o=tu(g,b)}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function ea(){var o,g,b,y,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=Yn(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ni(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ta(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.charCodeAt(c)===64?(g=ke,c++):(g=e,i===0&&D(Ys)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=tt(),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Dt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=ea(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=O,c++):(u=e,i===0&&D(Br)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=oe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=wr(),C!==e?d=C:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=B,c++):(x=e,i===0&&D(Pt)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();for(C=bs(),C===e&&(C=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=J,c++):(M=e,i===0&&D(ut)),M!==e?(te=o,o=ru(b,y,a,p,d,C)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[I]={nextPos:c,result:o},o}function du(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m=c*77+62,C=S[m];if(C)return c=C.nextPos,C.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=ea(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=oe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=B,c++):(s=e,i===0&&D(Pt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=o,o=ai(y,$,d)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[m]={nextPos:c,result:o},o}function ra(){var o,g,b,y,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=su(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function sa(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+64,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=nu(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function wr(){var o,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(o=yu(),o===e&&(o=Ai()),S[g]={nextPos:c,result:o},o)}function yu(){var o,g,b,y,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=na(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===tr?(p=tr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=o,o=au(y,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function na(){var o,g,b,y,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=wr(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ii(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Ai(){var o,g,b,y,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=tt(),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(t.charCodeAt(c)===60?(y=Je,c++):(y=e,i===0&&D(Ra)),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=wr(),l!==e){for($=[],p=Ie();p!==e;)$.push(p),p=Ie();t.charCodeAt(c)===62?(p=rt,c++):(p=e,i===0&&D(Yt)),p!==e?(te=o,o=iu(g,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return o===e&&(o=c,g=tt(),g!==e&&(te=o,g=li(g)),o=g),S[s]={nextPos:c,result:o},o}function tt(){var o,g,b,y,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=t.charAt(c),as.test(g)?c++:(g=e,i===0&&D(Da)),g!==e){for(b=[],y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));y!==e;)b.push(y),y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));te=o,o=ui()}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function wu(){var o,g,b,y,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=tt(),g!==e){for(b=[],y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=lu()}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function _s(){var o,g,b,y,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Mr)),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();g=[g,b,y],o=g}else c=o,o=e;if(o===e)if(o=[],g=k(),g!==e)for(;g!==e;)o.push(g),g=k();else o=e;return S[l]={nextPos:c,result:o},o}function sr(){var o,g,b,y,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=bs(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=o,o=fi(y)):(c=o,o=e)}else c=o,o=e;return o===e&&(o=As()),S[$]={nextPos:c,result:o},o}function We(){var o,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(o=Ye,c+=2):(o=e,i===0&&D(il)),o===e&&(o=t.charAt(c),xt.test(o)?c++:(o=e,i===0&&D(en))),S[g]={nextPos:c,result:o},o)}function Ci(){var o,g,b=c*77+74,y=S[b];return y?(c=y.nextPos,y.result):(o=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?o=void 0:(c=o,o=e),o===e&&(o=We()),S[b]={nextPos:c,result:o},o)}function k(){var o,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),It.test(o)?c++:(o=e,i===0&&D(ll)),S[g]={nextPos:c,result:o},o)}function Ie(){var o,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),yn.test(o)?c++:(o=e,i===0&&D(js)),S[g]={nextPos:c,result:o},o)}function ae(o,g,b){const y={type:o};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(y[l]=g[l]);const a=Y();return y.loc={start:a.start.offset,end:a.end.offset-1},y}if(zr=w(),r.peg$library)return{peg$result:zr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:tn,peg$maxFailPos:yr};if(zr!==e&&c===t.length)return zr;throw zr!==e&&c<t.length&&D(q()),pe(tn,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const gb=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function db(t){return gb.includes(t.type)}function Ry(t){return"chain"in t&&t.chain!==null}function yb(t,r,e){return{type:"call",target:t,args:r,loc:e}}function wb(t,r,e){return{type:"index",target:t,index:r,loc:e}}function mb(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function kt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=kt(e.expr,r);break}case"return":{e.expr=kt(e.expr,r);break}case"each":{e.items=kt(e.items,r),e.for=kt(e.for,r);break}case"for":{e.from!=null&&(e.from=kt(e.from,r)),e.to!=null&&(e.to=kt(e.to,r)),e.times!=null&&(e.times=kt(e.times,r)),e.for=kt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=kt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=kt(e.expr,r),e.dest=kt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=kt(e.operands[n],r);break}case"not":{e.expr=kt(e.expr,r);break}case"if":{e.cond=kt(e.cond,r),e.then=kt(e.then,r);for(const n of e.elseif)n.cond=kt(n.cond,r),n.then=kt(n.then,r);e.else!=null&&(e.else=kt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=kt(e.children[n],r);break}case"match":{e.about=kt(e.about,r);for(const n of e.qs)n.q=kt(n.q,r),n.a=kt(n.a,r);e.default!=null&&(e.default=kt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=kt(e.statements[n],r);break}case"exists":{e.identifier=kt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=kt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],kt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=kt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=kt(e.args[n],r);break}case"indexChain":{e.index=kt(e.index,r);break}case"call":{e.target=kt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=kt(e.args[n],r);break}case"index":{e.target=kt(e.target,r),e.index=kt(e.index,r);break}case"prop":{e.target=kt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=kt(e.members[n],r);break}case"or":case"and":{e.left=kt(e.left,r),e.right=kt(e.right,r);break}}if(Ry(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=kt(e.chain[n],r);return e}const Xh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Yh(t){throw new eo(`Reserved word "${t}" cannot be used as variable name.`)}function $b(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Xh.includes(t.name)&&Yh(t.name);break}case"meta":{t.name!=null&&Xh.includes(t.name)&&Yh(t.name);break}case"fn":{for(const r of t.args)Xh.includes(r.name)&&Yh(r.name);break}}return t}function xb(t){for(const r of t)kt(r,$b);return t}function Qg(t){return{type:"simple",name:t}}function bb(t,r){return{type:"generic",name:t,inners:r}}function Ab(t,r){return{type:"fn",args:t,result:r}}function Uc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Uc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Uc(n)).join(", "),e=Uc(t.result);return`@(${r}) { ${e} }`}}}function Eo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Qg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Eo(t.inner):r=Qg("any"),bb(t.name,[r])}}throw new eo(`Unknown type: '${Uc(t)}'`)}else{const r=t.args.map(e=>Eo(e));return Ab(r,Eo(t.result))}}function Cb(t){switch(t.type){case"def":{t.varType!=null&&Eo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Eo(r.argType);t.retType!=null&&Eo(t.retType);break}}return t}function _b(t){for(const r of t)kt(r,Cb);return t}function Bc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Bc(n.expr.children)),r.push(n);else{if(e.length>0)throw new eo("invalid attribute.");switch(n.type){case"fn":{n.children=Bc(n.children);break}case"block":{n.statements=Bc(n.statements);break}}r.push(n)}if(e.length>0)throw new eo("invalid attribute.");return r}function Pb(t){if(db(t)&&Ry(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=yb(n,v.args,v.loc);break}case"indexChain":{n=wb(n,v.index,v.loc);break}case"propChain":{n=mb(n,v.name,v.loc);break}}return n}return t}function kb(t){for(let r=0;r<t.length;r++)t[r]=kt(t[r],Pb);return t}function qc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Dy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return qc(t,r,e);{const{left:n,right:v,info:w}=t;return qc(n,Dy(v,r,e),w)}}function Sf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Sf(t.left),Sf(t.right)]}}const Mb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Sf(t.left),right:Sf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Sf(t.left),right:Sf(t.right)}),priority:3}};function Eb(t){const r=t.operators.map(n=>{const v=Mb[n];if(v==null)throw new eo(`No such operator: ${n}.`);return v});let e=qc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Dy(e,t.operands[2+n],r[1+n]);return Sf(e)}function Sb(t){for(let r=0;r<t.length;r++)t[r]=kt(t[r],e=>e.type==="infix"?Eb(e):e);return t}var Du;let Nb=(Du=class{constructor(){he(this,"plugins");this.plugins={validate:[xb,_b],transform:[Bc,kb,Sb]}}static parse(r){return Du.instance==null&&(Du.instance=new Du),Du.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Zg(r,{startRule:"Preprocess"});e=Zg(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new eo(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new eo(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Du,"instance"),Du);const Fb="develop",Tb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let qp=[],Jo=null;function Ob(t){return qp=Nb.parse(t),JSON.stringify(qp,null,"	")}async function Ib(t){Jo==null||Jo.abort(),Jo=new Pn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Hp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Hp(e.val,!0),print:!1});break}}});try{await Jo.exec(qp)}catch(r){t.err(r)}}const jb=Object.freeze(Object.defineProperty({__proto__:null,exec:Ib,parse:Ob,samples:Tb,version:Fb},Symbol.toStringTag,{value:"Module"}));function ns(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Fh=class Ly extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ly)}},Rb=class extends Fh{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},to=class extends Fh{constructor(e,n){super(e,n);he(this,"name","Syntax")}},vr=class extends Fh{constructor(e,n){super(e,n);he(this,"name","Runtime")}},Xg=class extends vr{constructor(r,e){super(r,e)}};class Db extends vr{constructor(e,n){super(e,n);he(this,"name","")}}var Wu=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Iu=class zp{constructor(r=[],e,n,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new zp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new zp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new vr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new vr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Wu([ns],Iu.prototype,"log",null);Wu([ns],Iu.prototype,"onUpdated",null);Wu([ns],Iu.prototype,"createChildScope",null);Wu([ns],Iu.prototype,"createChildNamespaceScope",null);Wu([ns],Iu.prototype,"get",null);Wu([ns],Iu.prototype,"exists",null);Wu([ns],Iu.prototype,"getAll",null);Wu([ns],Iu.prototype,"add",null);Wu([ns],Iu.prototype,"assign",null);const Wt={type:"null"},xa={type:"bool",value:!0},ba={type:"bool",value:!1},De=t=>({type:"num",value:t}),lr=t=>({type:"str",value:t}),zf=t=>({type:"bool",value:t}),vh=t=>({type:"obj",value:t}),ts=t=>({type:"arr",value:t}),Lb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),de=t=>({type:"fn",native:t}),Hb=t=>({type:"return",value:t}),Ub=()=>({type:"break",value:null}),Bb=()=>({type:"continue",value:null}),qb=t=>t.type==="return"?t.value:t,Kp=(t,r)=>({type:"error",value:t,info:r});function _a(t){if(t==null)throw new vr("Expect anything, but got nothing.")}function gn(t){if(t==null)throw new vr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new vr(`Expect boolean, but got ${t.type}.`)}function Su(t){if(t==null)throw new vr("Expect function, but got nothing.");if(t.type!=="fn")throw new vr(`Expect function, but got ${t.type}.`)}function ys(t){if(t==null)throw new vr("Expect string, but got nothing.");if(t.type!=="str")throw new vr(`Expect string, but got ${t.type}.`)}function Se(t){if(t==null)throw new vr("Expect number, but got nothing.");if(t.type!=="num")throw new vr(`Expect number, but got ${t.type}.`)}function Au(t){if(t==null)throw new vr("Expect object, but got nothing.");if(t.type!=="obj")throw new vr(`Expect object, but got ${t.type}.`)}function Kf(t){if(t==null)throw new vr("Expect array, but got nothing.");if(t.type!=="arr")throw new vr(`Expect array, but got ${t.type}.`)}function ep(t){return t.type==="obj"}function Yg(t){return t.type==="arr"}function So(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Vp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Vp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Wp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Wp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Wp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Gp(t){if(t===null)return Wt;if(typeof t=="boolean")return zf(t);if(typeof t=="string")return lr(t);if(typeof t=="number")return De(t);if(Array.isArray(t))return ts(t.map(r=>Gp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Gp(n));return vh(r)}return Wt}function No(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(No(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${No(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const zb={version:"0.18.0"},Kb=zb.version,Vb=new TextEncoder,Wb=new TextDecoder,Gb={help:lr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":lr(Kb),"Core:ai":lr("kawaii"),"Core:not":de(([t])=>(gn(t),t.value?ba:xa)),"Core:eq":de(([t,r])=>(_a(t),_a(r),So(t,r)?xa:ba)),"Core:neq":de(([t,r])=>(_a(t),_a(r),So(t,r)?ba:xa)),"Core:and":de(([t,r])=>(gn(t),t.value?(gn(r),r.value?xa:ba):ba)),"Core:or":de(([t,r])=>(gn(t),t.value?xa:(gn(r),r.value?xa:ba))),"Core:add":de(([t,r])=>(Se(t),Se(r),De(t.value+r.value))),"Core:sub":de(([t,r])=>(Se(t),Se(r),De(t.value-r.value))),"Core:mul":de(([t,r])=>(Se(t),Se(r),De(t.value*r.value))),"Core:pow":de(([t,r])=>{Se(t),Se(r);const e=t.value**r.value;if(isNaN(e))throw new vr("Invalid operation.");return De(e)}),"Core:div":de(([t,r])=>{Se(t),Se(r);const e=t.value/r.value;if(isNaN(e))throw new vr("Invalid operation.");return De(e)}),"Core:mod":de(([t,r])=>(Se(t),Se(r),De(t.value%r.value))),"Core:gt":de(([t,r])=>(Se(t),Se(r),t.value>r.value?xa:ba)),"Core:lt":de(([t,r])=>(Se(t),Se(r),t.value<r.value?xa:ba)),"Core:gteq":de(([t,r])=>(Se(t),Se(r),t.value>=r.value?xa:ba)),"Core:lteq":de(([t,r])=>(Se(t),Se(r),t.value<=r.value?xa:ba)),"Core:type":de(([t])=>(_a(t),lr(t.type))),"Core:to_str":de(([t])=>(_a(t),lr(No(t)))),"Core:range":de(([t,r])=>(Se(t),Se(r),t.value<r.value?ts(Array.from({length:r.value-t.value+1},(e,n)=>De(n+t.value))):t.value>r.value?ts(Array.from({length:t.value-r.value+1},(e,n)=>De(t.value-n))):ts([t]))),"Core:sleep":de(async([t])=>(Se(t),await new Promise(r=>setTimeout(r,t.value)),Wt)),"Core:abort":de(async([t])=>{throw ys(t),new Db(t.value)}),"Util:uuid":de(()=>lr(bc())),"Json:stringify":de(([t])=>(_a(t),lr(JSON.stringify(Wp(t))))),"Json:parse":de(([t])=>{ys(t);try{return Gp(JSON.parse(t.value))}catch{return Kp("not_json")}}),"Json:parsable":de(([t])=>{ys(t);try{JSON.parse(t.value)}catch{return zf(!1)}return zf(!0)}),"Date:now":de(()=>De(Date.now())),"Date:year":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":de(([t])=>(t&&Se(t),De(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":de(([t])=>(ys(t),De(new Date(t.value).getTime()))),"Date:to_iso_str":de(([t,r])=>{t&&Se(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Se(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const B=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+B*J),e.setUTCMinutes(e.getUTCMinutes()+B*we);const ue=n>0?"+":"-",oe=J.toString().padStart(2,"0"),Pe=we.toString().padStart(2,"0");v=`${ue}${oe}:${Pe}`}const w=e.getUTCFullYear().toString().padStart(4,"0"),_=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return lr(`${w}-${_}-${P}T${E}:${N}:${O}.${H}${v}`)}),"Math:Infinity":De(1/0),"Math:E":De(Math.E),"Math:LN2":De(Math.LN2),"Math:LN10":De(Math.LN10),"Math:LOG2E":De(Math.LOG2E),"Math:LOG10E":De(Math.LOG10E),"Math:PI":De(Math.PI),"Math:SQRT1_2":De(Math.SQRT1_2),"Math:SQRT2":De(Math.SQRT2),"Math:abs":de(([t])=>(Se(t),De(Math.abs(t.value)))),"Math:acos":de(([t])=>(Se(t),De(Math.acos(t.value)))),"Math:acosh":de(([t])=>(Se(t),De(Math.acosh(t.value)))),"Math:asin":de(([t])=>(Se(t),De(Math.asin(t.value)))),"Math:asinh":de(([t])=>(Se(t),De(Math.asinh(t.value)))),"Math:atan":de(([t])=>(Se(t),De(Math.atan(t.value)))),"Math:atanh":de(([t])=>(Se(t),De(Math.atanh(t.value)))),"Math:atan2":de(([t,r])=>(Se(t),Se(r),De(Math.atan2(t.value,r.value)))),"Math:cbrt":de(([t])=>(Se(t),De(Math.cbrt(t.value)))),"Math:ceil":de(([t])=>(Se(t),De(Math.ceil(t.value)))),"Math:clz32":de(([t])=>(Se(t),De(Math.clz32(t.value)))),"Math:cos":de(([t])=>(Se(t),De(Math.cos(t.value)))),"Math:cosh":de(([t])=>(Se(t),De(Math.cosh(t.value)))),"Math:exp":de(([t])=>(Se(t),De(Math.exp(t.value)))),"Math:expm1":de(([t])=>(Se(t),De(Math.expm1(t.value)))),"Math:floor":de(([t])=>(Se(t),De(Math.floor(t.value)))),"Math:fround":de(([t])=>(Se(t),De(Math.fround(t.value)))),"Math:hypot":de(([t])=>{Kf(t);const r=[];for(const e of t.value)Se(e),r.push(e.value);return De(Math.hypot(...r))}),"Math:imul":de(([t,r])=>(Se(t),Se(r),De(Math.imul(t.value,r.value)))),"Math:log":de(([t])=>(Se(t),De(Math.log(t.value)))),"Math:log1p":de(([t])=>(Se(t),De(Math.log1p(t.value)))),"Math:log10":de(([t])=>(Se(t),De(Math.log10(t.value)))),"Math:log2":de(([t])=>(Se(t),De(Math.log2(t.value)))),"Math:max":de(([t,r])=>(Se(t),Se(r),De(Math.max(t.value,r.value)))),"Math:min":de(([t,r])=>(Se(t),Se(r),De(Math.min(t.value,r.value)))),"Math:pow":de(([t,r])=>(Se(t),Se(r),De(Math.pow(t.value,r.value)))),"Math:round":de(([t])=>(Se(t),De(Math.round(t.value)))),"Math:sign":de(([t])=>(Se(t),De(Math.sign(t.value)))),"Math:sin":de(([t])=>(Se(t),De(Math.sin(t.value)))),"Math:sinh":de(([t])=>(Se(t),De(Math.sinh(t.value)))),"Math:sqrt":de(([t])=>{Se(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new vr("Invalid operation.");return De(r)}),"Math:tan":de(([t])=>(Se(t),De(Math.tan(t.value)))),"Math:tanh":de(([t])=>(Se(t),De(Math.tanh(t.value)))),"Math:trunc":de(([t])=>(Se(t),De(Math.trunc(t.value)))),"Math:rnd":de(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?De(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):De(Math.random())),"Math:gen_rng":de(([t])=>{if(_a(t),t.type!=="num"&&t.type!=="str")return Wt;const r=uo(t.value.toString());return de(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?De(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):De(r()))}),"Num:to_hex":de(([t])=>(Se(t),lr(t.value.toString(16)))),"Num:from_hex":de(([t])=>(ys(t),De(parseInt(t.value,16)))),"Str:lf":lr(`
`),"Str:lt":de(([t,r])=>(ys(t),ys(r),t.value<r.value?De(-1):t.value===r.value?De(0):De(1))),"Str:gt":de(([t,r])=>(ys(t),ys(r),t.value>r.value?De(-1):t.value===r.value?De(0):De(1))),"Str:from_codepoint":de(([t])=>(Se(t),lr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":de(([t])=>(Kf(t),lr(Array.from(t.value.map(r=>(Se(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":de(([t])=>(Kf(t),lr(Wb.decode(Uint8Array.from(t.value.map(r=>(Se(r),r.value))))))),"Arr:create":de(([t,r])=>{Se(t);try{return ts(Array(t.value).fill(r??Wt))}catch(e){throw t.value<0?new vr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new vr("Arr:create expected integer, got non-integer")}}),"Obj:keys":de(([t])=>(Au(t),ts(Array.from(t.value.keys()).map(r=>lr(r))))),"Obj:vals":de(([t])=>(Au(t),ts(Array.from(t.value.values())))),"Obj:kvs":de(([t])=>(Au(t),ts(Array.from(t.value.entries()).map(([r,e])=>ts([lr(r),e]))))),"Obj:get":de(([t,r])=>(Au(t),ys(r),t.value.get(r.value)??Wt)),"Obj:set":de(([t,r,e])=>(Au(t),ys(r),_a(e),t.value.set(r.value,e),Wt)),"Obj:has":de(([t,r])=>(Au(t),ys(r),zf(t.value.has(r.value)))),"Obj:copy":de(([t])=>(Au(t),vh(new Map(t.value)))),"Obj:merge":de(([t,r])=>(Au(t),Au(r),vh(new Map([...t.value,...r.value])))),"Error:create":de(([t,r])=>(ys(t),Kp(t.value,r))),"Async:interval":de(async([t,r,e],n)=>{Se(t),Su(r),e&&(gn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),de(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":de(async([t,r],e)=>{Se(t),Su(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),de(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},ed={num:{to_str:t=>de(async(r,e)=>lr(t.value.toString()))},str:{to_num:t=>de(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Wt:De(n)}),to_arr:t=>de(async(r,e)=>ts(zs(t.value).map(n=>lr(n)))),to_unicode_arr:t=>de(async(r,e)=>ts([...t.value].map(n=>lr(n)))),to_unicode_codepoint_arr:t=>de(async(r,e)=>ts([...t.value].map(n=>{const v=n.codePointAt(0);return De(v??n.charCodeAt(0))}))),to_char_arr:t=>de(async(r,e)=>ts(t.value.split("").map(n=>lr(n)))),to_charcode_arr:t=>de(async(r,e)=>ts(t.value.split("").map(n=>De(n.charCodeAt(0))))),to_utf8_byte_arr:t=>de(async(r,e)=>ts(Array.from(Vb.encode(t.value)).map(n=>De(n)))),len:t=>De(oo(t.value)),replace:t=>de(async([r,e],n)=>(ys(r),ys(e),lr(t.value.split(r.value).join(e.value)))),index_of:t=>de(async([r,e],n)=>{ys(r),e&&Se(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return De(ho(t.value,r.value,v))}),incl:t=>de(async([r],e)=>(ys(r),t.value.includes(r.value)?xa:ba)),trim:t=>de(async(r,e)=>lr(t.value.trim())),upper:t=>de(async(r,e)=>lr(t.value.toUpperCase())),lower:t=>de(async(r,e)=>lr(t.value.toLowerCase())),split:t=>de(async([r],e)=>(r&&ys(r),ts(r?t.value.split(r?r.value:"").map(n=>lr(n)):zs(t.value).map(n=>lr(n))))),slice:t=>de(async([r,e],n)=>(Se(r),Se(e),lr(co(t.value,r.value,e.value)))),pick:t=>de(async([r],e)=>{Se(r);const v=zs(t.value)[r.value];return v?lr(v):Wt}),charcode_at:t=>de(([r],e)=>{Se(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Wt:De(n)}),codepoint_at:t=>de(([r],e)=>{Se(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Wt:De(n)})},arr:{len:t=>De(t.value.length),push:t=>de(async([r],e)=>(_a(r),t.value.push(r),t)),unshift:t=>de(async([r],e)=>(_a(r),t.value.unshift(r),t)),pop:t=>de(async(r,e)=>t.value.pop()??Wt),shift:t=>de(async(r,e)=>t.value.shift()??Wt),concat:t=>de(async([r],e)=>(Kf(r),ts(t.value.concat(r.value)))),slice:t=>de(async([r,e],n)=>(Se(r),Se(e),ts(t.value.slice(r.value,e.value)))),join:t=>de(async([r],e)=>(r&&ys(r),lr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>de(async([r],e)=>{Su(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,De(w)]));return ts(await Promise.all(n))}),filter:t=>de(async([r],e)=>{Su(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,De(v)]);gn(_),_.value&&n.push(w)}return ts(n)}),reduce:t=>de(async([r,e],n)=>{Su(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,De(_)])}return w}),find:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(gn(w),w.value)return v}return Wt}),incl:t=>de(async([r],e)=>(_a(r),t.value.some(n=>So(r,n))?xa:ba)),index_of:t=>de(async([r,e],n)=>{if(_a(r),e){Se(e);const v=t.value.slice(0,e.value).length,w=t.value.slice(e.value).findIndex(_=>So(_,r));return De(w<0?w:w+v)}else return De(t.value.findIndex(v=>So(v,r)))}),reverse:t=>de(async(r,e)=>(t.value.reverse(),Wt)),copy:t=>de(async(r,e)=>ts([...t.value])),sort:t=>de(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);Se(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return Su(r),Kf(t),t.value=await n(t.value,r),t}),fill:t=>de(async([r,e,n],v)=>{const w=r??Wt,_=e&&(Se(e),e.value),P=n&&(Se(n),n.value);return t.value.fill(w,_,P),t}),repeat:t=>de(async([r],e)=>{Se(r);try{return ts(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new vr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new vr("arr.repeat expected integer, got non-integer")}}),every:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(gn(w),!w.value)return ba}return xa}),some:t=>de(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,De(n)]);if(gn(w),w.value)return xa}return ba})},error:{name:t=>lr(t.value),info:t=>t.info??Wt}};function Jb(t,r){if(Object.hasOwn(ed,t.type)){const e=ed[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new vr(`No such prop (${r}) in ${t.type}.`)}else throw new vr(`Cannot read prop of ${t.type}. (reading ${r})`)}const Zb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var pa=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Hy=300,Qb=Hy-1;let kn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:de(([v])=>{_a(v),this.opts.out&&this.opts.out(v)}),readline:de(async v=>{const w=v[0];if(ys(w),this.opts.in==null)return Wt;const _=await this.opts.in(w.value);return lr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...Gb,...n}).map(([v,w])=>[v,Zb.const(w)])),this.scope=new Iu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Kp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Fh?this.opts.err(r):this.opts.err(new Rb(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const w={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,w);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Wt;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return qb(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Wt;if(this.stepCount%Hy===Qb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new vr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Su(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(gn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(gn(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Wt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(So(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Wt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Wt}case"for":{if(r.times){const n=await this._eval(r.times,e);Se(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Se(n),Se(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:De(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return Wt}case"each":{const n=await this._eval(r.items,e);Kf(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return Wt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Wt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Wt}case"addAssign":{const n=await this._eval(r.dest,e);Se(n);const v=await this._eval(r.expr,e);return Se(v),await this.assign(e,r.dest,De(n.value+v.value)),Wt}case"subAssign":{const n=await this._eval(r.dest,e);Se(n);const v=await this._eval(r.expr,e);return Se(v),await this.assign(e,r.dest,De(n.value-v.value)),Wt}case"null":return Wt;case"bool":return zf(r.value);case"num":return De(r.value);case"str":return lr(r.value);case"arr":return ts(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return vh(n)}case"prop":{const n=await this._eval(r.target,e);return ep(n)?n.value.has(r.name)?n.value.get(r.name):Wt:Jb(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Yg(n)){Se(v);const w=n.value[v.value];if(w===void 0)throw new Xg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(ep(n))return ys(v),n.value.has(v.value)?n.value.get(v.value):Wt;throw new vr(`Cannot read prop (${No(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return gn(n),zf(!n.value)}case"fn":return Lb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return zf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=No(w)}return lr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Hb(n)}case"break":return this.log("block:break",{scope:e.name}),Ub();case"continue":return this.log("block:continue",{scope:e.name}),Bb();case"ns":return Wt;case"meta":return Wt;case"and":{const n=await this._eval(r.left,e);if(gn(n),n.value){const v=await this._eval(r.right,e);return gn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(gn(n),n.value)return n;{const v=await this._eval(r.right,e);return gn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Wt;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(Yg(v)){if(Se(w),v.value[w.value]===void 0)throw new Xg(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(ep(v))ys(w),v.value.set(w.value,n);else throw new vr(`Cannot read prop (${No(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Au(v),v.value.set(e.name,n)}else if(e.type==="arr")Kf(n),await Promise.all(e.value.map((v,w)=>this.assign(r,v,n.value[w]??Wt)));else if(e.type==="obj")Au(n),await Promise.all([...e.value].map(([v,w])=>this.assign(r,w,n.value.get(v)??Wt)));else throw new vr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};pa([ns],kn.prototype,"exec",null);pa([ns],kn.prototype,"execFn",null);pa([ns],kn.prototype,"execFnSimple",null);pa([ns],kn.prototype,"handleError",null);pa([ns],kn.prototype,"log",null);pa([ns],kn.prototype,"collectNs",null);pa([ns],kn.prototype,"collectNsMember",null);pa([ns],kn.prototype,"_fn",null);pa([ns],kn.prototype,"_eval",null);pa([ns],kn.prototype,"_run",null);pa([ns],kn.prototype,"registerAbortHandler",null);pa([ns],kn.prototype,"unregisterAbortHandler",null);pa([ns],kn.prototype,"abort",null);pa([ns],kn.prototype,"assign",null);pa([ns],kn,"collectMetadata",null);function Xb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Vf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Vf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}Xb(Vf,Error);function tp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Vf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=tp("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+tp("",v.column-1," ")+tp("",H,"^")}else r+=`
 at `+_}return r};Vf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function td(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:er,Main:oi},w=er,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="!",Ir="[",Qt=".",Pr="if",Bt="elif",Ar="else",Ur="match",tr="=>",jr="*",Xt="eval",$r="exists",W="`",re='"',fe="'",xe='\\"',ce="\\'",Me="true",Oe="false",Ae="null",ke="@",$e="@(",Je="<",rt=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,lt=/^[%*-+\-\/<>\^]/,$t=/^[^`{]/,Nt=/^[{}`]/,Ct=/^[+\-]/,_t=/^[1-9]/,ot=/^[0-9]/,ks=/^[,;]/,as=/^[A-Z_]/i,Xr=/^[A-Z0-9_]/i,xt=/^[\r\n]/,It=/^[ \t\r\n]/,yn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),rr=j("*/",!1),Dt=j("(",!1),Br=j(")",!1),Sn=j("::",!1),Pt=j("{",!1),ut=j("}",!1),kr=j("###",!1),qt=j("let",!1),st=j(":",!1),Lt=j("=",!1),ms=j("var",!1),Ht=j("<:",!1),Ut=j("#[",!1),qr=j("]",!1),Na=j("each",!1),Mr=j(",",!1),is=j("for",!1),Ns=j("return",!1),ft=bt([["A","Z"],["0","9"],"_",":"],!1,!0),Tt=j("loop",!1),Ks=j("break",!1),Er=j("continue",!1),Sr=j("+=",!1),Gi=j("-=",!1),Fa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Oa=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=bt(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),Nn=j("[",!1),Vs=j(".",!1),Fn=j("if",!1),Ia=j("elif",!1),tl=j("else",!1),ja=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Ts=bt(["`","{"],!0,!1),Tn=bt(["{","}","`"],!1,!1),Ws=j('"',!1),Gs=j("'",!1),al=j('\\"',!1),Js=j("\\'",!1),ls=bt(["+","-"],!1,!1),Os=bt([["1","9"]],!1,!1),xr=bt([["0","9"]],!1,!1),Zs=j("true",!1),Qs=j("false",!1),Xs=j("null",!1),us=bt([",",";"],!1,!1),Ys=j("@",!1),Is=j("@(",!1),Ra=j("<",!1),Yt=j(">",!1),Da=bt([["A","Z"],"_"],!1,!0),dr=bt([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),en=bt(["\r",`
`],!1,!1),ll=bt([" ","	","\r",`
`],!1,!1),js=bt([" ","	"],!1,!1),ul=function(o){return o.join("")},On=function(){return f()},fl=function(){return f()},La=function(){return""},ol=function(){return""},cl=function(o){return o??[]},Ha=function(o,g){return g},hl=function(o,g){return[o,...g]},Ua=function(o,g){return g},pl=function(o,g){return[o,...g]},Ba=function(o,g){return g},vl=function(o,g){return[o,...g]},qa=function(o){return o},gl=function(o,g){return ae("ns",{name:o,members:g})},In=function(o,g){return ae("meta",{name:o,value:g})},dl=function(o){return ae("meta",{name:null,value:o})},jn=function(o,g,b){return ae("def",{name:o,varType:g,expr:b,mut:!1,attr:[]})},yl=function(o,g,b){return ae("def",{name:o,varType:g,expr:b,mut:!0,attr:[]})},za=function(o){return ae("identifier",{name:"print",chain:[ae("callChain",{args:[o]})]})},wl=function(o,g){return ae("attr",{name:o,value:g??ae("bool",{value:!0})})},ml=function(o,g,b){return ae("each",{var:o,items:g,for:b})},$l=function(o,g,b){return ae("each",{var:o,items:g,for:b})},xl=function(o,g){return g},bl=function(o,g,b,y){return ae("for",{var:o,from:g??ae("num",{value:0}),to:b,for:y})},Al=function(o,g){return g},Cl=function(o,g,b,y){return ae("for",{var:o,from:g??ae("num",{value:0}),to:b,for:y})},_l=function(o,g){return ae("for",{times:o,for:g})},Pl=function(o,g){return ae("for",{times:o,for:g})},kl=function(o){return ae("return",{expr:o})},Ml=function(o){return ae("loop",{statements:o})},El=function(){return ae("break",{})},Sl=function(){return ae("continue",{})},Nl=function(o,g,b){return g==="+="?ae("addAssign",{dest:o,expr:b}):g==="-="?ae("subAssign",{dest:o,expr:b}):ae("assign",{dest:o,expr:b})},Ka=function(o,g,b){return{op:g,term:b}},Fl=function(o,g){return ae("infix",{operands:[o,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Tl=function(){return f()},Ol=function(o){return ae("not",{expr:o})},Il=function(o,g){return o.chain?{...o,chain:[...o.chain,...g]}:{...o,chain:g}},jl=function(o){return ae("callChain",{args:o??[]})},Rn=function(o,g){return g},Rl=function(o,g){return[o,...g]},Va=function(o){return ae("indexChain",{index:o})},Dl=function(o){return ae("propChain",{name:o})},Ll=function(o,g,b,y){return ae("if",{cond:o,then:g,elseif:b??[],else:y})},Hl=function(o,g){return[o,...g]},Wa=function(o,g){return{cond:o,then:g}},Ul=function(o){return o},Dn=function(o,g,b){return{q:g,a:b}},Bl=function(o,g,b){return ae("match",{about:o,qs:g??[],default:b})},ql=function(o){return ae("block",{statements:o})},zl=function(o){return ae("exists",{identifier:o})},Kl=function(o){return ae("identifier",{name:o})},Vl=function(o){return ae("tmpl",{tmpl:o})},Ga=function(o){return o.join("")},Ja=function(o){return o},Za=function(o){return ae("str",{value:o.join("")})},Qa=function(o){return o},Wl=function(o){return ae("str",{value:o.join("")})},Gl=function(){return'"'},Xa=function(){return"'"},Jl=function(){return ae("num",{value:parseFloat(f())})},Ya=function(){return ae("num",{value:parseFloat(f())})},ei=function(){return ae("num",{value:parseInt(f(),10)})},Zl=function(){return ae("num",{value:parseInt(f(),10)})},ti=function(){return ae("bool",{value:!0})},Ql=function(){return ae("bool",{value:!1})},Xl=function(){return ae("null",{})},ri=function(o,g){return{k:o,v:g}},Yl=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ae("obj",{value:g})},si=function(o){return o},eu=function(o){return ae("arr",{value:o})},tu=function(o,g){return{name:o,argType:g}},ni=function(o,g){return[o,...g]},ru=function(o,g,b,y,a,l){return(o.length>0||b.length>0)&&T("Cannot use spaces before or after the function name."),ae("def",{name:g,expr:ae("fn",{args:y??[],retType:a},l??[]),mut:!1,attr:[]})},ai=function(o,g,b){return ae("fn",{args:o??[],retType:g},b??[])},Ln=function(o){return o},su=function(o){return ae("arr",{value:o})},Hn=function(o,g){return{k:o,v:g}},nu=function(o){const g=new Map;for(const b of o)g.set(b.k,b.v);return ae("obj",{value:g})},au=function(o,g){return ae("fnTypeSource",{args:o??[],result:g})},ii=function(o,g){return[o,...g]},iu=function(o,g){return ae("namedTypeSource",{name:o,inner:g})},li=function(o){return ae("namedTypeSource",{name:o,inner:null})},ui=function(){return f()},lu=function(){return f()},fi=function(o){return ae("block",{statements:o??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,tn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},zr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function f(){return t.substring(te,c)}function Y(){return le(te,c)}function T(o,g){throw g=g!==void 0?g:le(te,c),uu(o,g)}function j(o,g){return{type:"literal",text:o,ignoreCase:g}}function bt(o,g,b){return{type:"class",parts:o,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function q(){return{type:"end"}}function Rs(o){var g=xs[o],b;if(g)return g;if(o>=xs.length)b=xs.length-1;else for(b=o;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<o;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[o]=g,g}function le(o,g,b){var y=Rs(o),a=Rs(g),l={source:n,start:{offset:o,line:y.line,column:y.column},end:{offset:g,line:a.line,column:a.column}};return b&&n&&typeof n.offset=="function"&&(l.start=n.offset(l.start),l.end=n.offset(l.end)),l}function D(o){c<yr||(c>yr&&(yr=c,tn=[]),tn.push(o))}function uu(o,g){return new Vf(o,null,null,g)}function pe(o,g,b){return new Vf(Vf.buildMessage(o,g),o,g,b)}function er(){var o,g,b,y=c*77+0,a=S[y];if(a)return c=a.nextPos,a.result;for(o=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=o,g=ul(g),o=g,S[y]={nextPos:c,result:o},o}function Ds(){var o,g,b=c*77+1,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=mi(),g!==e&&(te=o,g=On()),o=g,o===e&&(o=c,g=ln(),g!==e&&(te=o,g=fl()),o=g,o===e&&(o=L(),o===e&&(t.length>c?(o=t.charAt(c),c++):(o=e,i===0&&D(gr))))),S[b]={nextPos:c,result:o},o)}function L(){var o,g,b,y,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,2)===_?(g=_,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],y=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=La()}else c=o,o=e;if(o===e)if(o=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(rr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(rr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);t.substr(c,2)===E?(y=E,c+=2):(y=e,i===0&&D(rr)),y!==e?(te=o,o=ol()):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function oi(){var o,g,b,y,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=rn(),b===e&&(b=null),y=[],a=k();a!==e;)y.push(a),a=k();return te=o,o=cl(b),S[l]={nextPos:c,result:o},o}function rn(){var o,g,b,y,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Un(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ha(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Un(),p!==e?(te=y,y=Ha(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=hl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function R(){var o,g,b,y,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=sn(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sn(),p!==e?(te=y,y=Ua(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=pl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function bs(){var o,g,b,y,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=As(),g!==e){for(b=[],y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e;for(;y!==e;){for(b.push(y),y=c,a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=y,y=Ba(g,p)):(c=y,y=e)}else c=y,y=e}te=o,o=vl(g,b)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Un(){var o,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(o=br(),o===e&&(o=Xe(),o===e&&(o=As())),S[g]={nextPos:c,result:o},o)}function sn(){var o,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=br())),S[g]={nextPos:c,result:o},o)}function As(){var o,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(o=fs(),o===e&&(o=ta(),o===e&&(o=Cs(),o===e&&(o=Vr(),o===e&&(o=Ve(),o===e&&(o=Ls(),o===e&&(o=ci(),o===e&&(o=hi(),o===e&&(o=fu(),o===e&&(o=pi(),o===e&&(o=ou(),o===e&&(o=et()))))))))))),S[g]={nextPos:c,result:o},o)}function et(){var o,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(o=cu(),o===e&&(o=Kr()),S[g]={nextPos:c,result:o},o)}function Kr(){var o,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(o=Jr(),o===e&&(o=du(),o===e&&(o=pu(),o===e&&(o=nn()))),S[g]={nextPos:c,result:o},o)}function nn(){var o,g,b,y,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(o=Kn(),o===e&&(o=vu(),o===e&&(o=wi(),o===e&&(o=mi(),o===e&&(o=ln(),o===e&&(o=Gn(),o===e&&(o=fn(),o===e&&(o=Qn(),o===e&&(o=Xn(),o===e&&(o=bi(),o===e&&(o=hu(),o===e&&(o=Hs(),o===e))))))))))))if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=qa(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Nr(){var o,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(o=Gn(),o===e&&(o=ln(),o===e&&(o=fn(),o===e&&(o=ra(),o===e&&(o=sa(),o===e&&(o=Qn()))))),S[g]={nextPos:c,result:o},o)}function br(){var o,g,b,y,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(Sn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=B,c++):(l=e,i===0&&D(Pt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=o,o=gl(y,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Xe(){var o,g,b,y,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=tt(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Nr(),l!==e?(te=o,o=In(y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(kr)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();y=Nr(),y!==e?(te=o,o=dl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function fs(){var o,g,b,y,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(o=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(qt)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Pe,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=jn(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=oe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Pe,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=o,o=yl(y,a,s)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[u]={nextPos:c,result:o},o}function Cs(){var o,g,b,y,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();y=et(),y!==e?(te=o,o=za(y)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Ve(){var o,g,b,y,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,2)===Z?(g=Z,c+=2):(g=e,i===0&&D(Ut)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=tt(),y!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Nr(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(qr)),$!==e?(te=o,o=wl(y,a)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Ls(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+19,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.substr(c,4)===X?(g=X,c+=4):(g=e,i===0&&D(Na)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=O,c++):(h=e,i===0&&D(Br)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=sr(),m!==e?(te=o,o=ml($,d,m)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,4)===X?(g=X,c+=4):(g=e,i===0&&D(Na)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=sr(),h!==e?(te=o,o=$l(l,u,h)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function ci(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A=c*77+20,M=S[A];if(M)return c=M.nextPos,M.result;if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(qt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=Pe,c++):(u=e,i===0&&D(Lt)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Mr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=O,c++):(x=e,i===0&&D(Br)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=sr(),C!==e?(te=o,o=bl($,s,h,C)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(y=ue,c+=3):(y=e,i===0&&D(qt)),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=Pe,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Mr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=sr(),x!==e?(te=o,o=Cl(l,p,d,x)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===40?(y=N,c++):(y=e,i===0&&D(Dt)),y!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=sr(),p!==e?(te=o,o=_l(a,p)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,t.substr(c,3)===ne?(g=ne,c+=3):(g=e,i===0&&D(is)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=sr(),l!==e?(te=o,o=Pl(y,l)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e}}return S[A]={nextPos:c,result:o},o}function Vr(){var o,g,b,y,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,6)===ie?(g=ie,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=et(),a!==e?(te=o,o=kl(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function hi(){var o,g,b,y,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Tt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(Pt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=Ml(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function fu(){var o,g,b,y,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Le?(g=Le,c+=5):(g=e,i===0&&D(Ks)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=El()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function pi(){var o,g,b,y,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,8)===_e?(g=_e,c+=8):(g=e,i===0&&D(Er)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Sl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function ou(){var o,g,b,y,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.substr(c,2)===at?(y=at,c+=2):(y=e,i===0&&D(Sr)),y===e&&(t.substr(c,2)===wt?(y=wt,c+=2):(y=e,i===0&&D(Gi)),y===e&&(t.charCodeAt(c)===61?(y=Pe,c++):(y=e,i===0&&D(Lt)))),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=o,o=Nl(g,y,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function cu(){var o,g,b,y,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=Kr(),g!==e){for(b=[],y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=vi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Ka(g,l,p)):(c=y,y=e)}else c=y,y=e;if(y!==e)for(;y!==e;){for(b.push(y),y=c,a=[],l=Wr();l!==e;)a.push(l),l=Wr();if(l=vi(),l!==e){for($=[],p=Wr();p!==e;)$.push(p),p=Wr();p=Kr(),p!==e?(te=y,y=Ka(g,l,p)):(c=y,y=e)}else c=y,y=e}else b=e;b!==e?(te=o,o=Fl(g,b)):(c=o,o=e)}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function Wr(){var o,g,b,y=c*77+27,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=fr,c++):(g=e,i===0&&D(Fa)),g!==e?(b=We(),b!==e?(g=[g,b],o=g):(c=o,o=e)):(c=o,o=e),o===e&&(o=Ie()),S[y]={nextPos:c,result:o},o)}function vi(){var o,g,b=c*77+28,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===dt?(g=dt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===yt?(g=yt,c+=2):(g=e,i===0&&D(Oa)),g===e&&(t.substr(c,2)===Jt?(g=Jt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Zt?(g=Zt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),lt.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=o,g=Tl()),o=g,S[b]={nextPos:c,result:o},o)}function hu(){var o,g,b,y=c*77+29,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===33?(g=ht,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=o,o=Ol(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function pu(){var o,g,b,y,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=nn(),g!==e){if(b=[],y=gi(),y===e&&(y=Bn(),y===e&&(y=di())),y!==e)for(;y!==e;)b.push(y),y=gi(),y===e&&(y=Bn(),y===e&&(y=di()));else b=e;b!==e?(te=o,o=Il(g,b)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function gi(){var o,g,b,y,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Dt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=Gr(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e?(te=o,o=jl(y)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Gr(){var o,g,b,y,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=et(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=et(),l!==e?(te=y,y=Rn(g,l)):(c=y,y=e)):(c=y,y=e);te=o,o=Rl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Bn(){var o,g,b,y,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=et(),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=Va(y)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function di(){var o,g,b,y=c*77+34,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===46?(g=Qt,c++):(g=e,i===0&&D(Vs)),g!==e?(b=tt(),b!==e?(te=o,o=Dl(b)):(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function Jr(){var o,g,b,y,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===Pr?(g=Pr,c+=2):(g=e,i===0&&D(Fn)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;if(b!==e)if(y=et(),y!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=sr(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=qn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=yi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=o,o=Ll(y,l,$,p)}else c=o,o=e;else c=o,o=e}else c=o,o=e;else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function qn(){var o,g,b,y,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=zn(),g!==e){for(b=[],y=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=zn(),l!==e?y=l:(c=y,y=e);y!==e;){for(b.push(y),y=c,a=[],l=k();l!==e;)a.push(l),l=k();l=zn(),l!==e?y=l:(c=y,y=e)}te=o,o=Hl(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function zn(){var o,g,b,y,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,t.substr(c,4)===Bt?(g=Bt,c+=4):(g=e,i===0&&D(Ia)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=sr(),$!==e?(te=o,o=Wa(a,$)):(c=o,o=e)}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function yi(){var o,g,b,y,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,t.substr(c,4)===Ar?(g=Ar,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();a=sr(),a!==e?(te=o,o=Ul(a)):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[l]={nextPos:c,result:o},o}function Kn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.substr(c,5)===Ur?(g=Ur,c+=5):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=B,c++):($=e,i===0&&D(Pt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Dn(a,d,C)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=jr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===tr?(x=tr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();if(C=sr(),C!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=C}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=o,o=Bl(a,s,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;else c=o,o=e;return S[I]={nextPos:c,result:o},o}function vu(){var o,g,b,y,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,t.substr(c,4)===Xt?(g=Xt,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(t.charCodeAt(c)===123?(y=B,c++):(y=e,i===0&&D(Pt)),y!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=o,o=ql(l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[s]={nextPos:c,result:o},o}function wi(){var o,g,b,y,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,t.substr(c,6)===$r?(g=$r,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],y=k(),y!==e)for(;y!==e;)b.push(y),y=k();else b=e;b!==e?(y=Hs(),y!==e?(te=o,o=zl(y)):(c=o,o=e)):(c=o,o=e)}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function Hs(){var o,g,b=c*77+42,y=S[b];return y?(c=y.nextPos,y.result):(o=c,g=wu(),g!==e&&(te=o,g=Kl(g)),o=g,S[b]={nextPos:c,result:o},o)}function mi(){var o,g,b,y,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=$i(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=$i(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===96?(y=W,c++):(y=e,i===0&&D($s)),y!==e?(te=o,o=Vl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function $i(){var o,g,b,y,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=et(),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?o=y:(c=o,o=e)}else c=o,o=e}else c=o,o=e;if(o===e){if(o=c,g=[],b=an(),b!==e)for(;b!==e;)g.push(b),b=an();else g=e;g!==e&&(te=o,g=Ga(g)),o=g}return S[$]={nextPos:c,result:o},o}function an(){var o,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(o=gu(),o===e&&(o=t.charAt(c),$t.test(o)?c++:(o=e,i===0&&D(Ts))),S[g]={nextPos:c,result:o},o)}function gu(){var o,g,b,y=c*77+46,a=S[y];return a?(c=a.nextPos,a.result):(o=c,t.charCodeAt(c)===92?(g=fr,c++):(g=e,i===0&&D(Fa)),g!==e?(b=t.charAt(c),Nt.test(b)?c++:(b=e,i===0&&D(Tn)),b!==e?o=b:(c=o,o=e)):(c=o,o=e),S[y]={nextPos:c,result:o},o)}function ln(){var o,g,b,y,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Ws)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Ja(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Ws)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Vn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Ja(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===34?(y=re,c++):(y=e,i===0&&D(Ws)),y!==e?(te=o,o=Za(b)):(c=o,o=e)}else c=o,o=e;if(o===e)if(o=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(Gs)),g!==e){for(b=[],y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Qa(l)):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(Gs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Wn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=y,y=Qa(l)):(c=y,y=e)):(c=y,y=e);t.charCodeAt(c)===39?(y=fe,c++):(y=e,i===0&&D(Gs)),y!==e?(te=o,o=Wl(b)):(c=o,o=e)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Vn(){var o,g,b=c*77+48,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=o,g=Gl()),o=g,S[b]={nextPos:c,result:o},o)}function Wn(){var o,g,b=c*77+49,y=S[b];return y?(c=y.nextPos,y.result):(o=c,t.substr(c,2)===ce?(g=ce,c+=2):(g=e,i===0&&D(Js)),g!==e&&(te=o,g=Xa()),o=g,S[b]={nextPos:c,result:o},o)}function Gn(){var o,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(o=un(),o===e&&(o=Jn()),S[g]={nextPos:c,result:o},o)}function un(){var o,g,b,y,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),_t.test(b)?c++:(b=e,i===0&&D(Os)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;if(y!==e)if(t.charCodeAt(c)===46?(a=Qt,c++):(a=e,i===0&&D(Vs)),a!==e){if(l=[],$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ot.test($)?c++:($=e,i===0&&D(xr));else l=e;l!==e?(te=o,o=Jl()):(c=o,o=e)}else c=o,o=e;else c=o,o=e}else c=o,o=e;if(o===e)if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e)if(t.charCodeAt(c)===46?(y=Qt,c++):(y=e,i===0&&D(Vs)),y!==e){if(a=[],l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ot.test(l)?c++:(l=e,i===0&&D(xr));else a=e;a!==e?(te=o,o=Ya()):(c=o,o=e)}else c=o,o=e;else c=o,o=e;return S[p]={nextPos:c,result:o},o}function Jn(){var o,g,b,y,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),_t.test(b)?c++:(b=e,i===0&&D(Os)),b!==e){if(y=[],a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr)),a!==e)for(;a!==e;)y.push(a),a=t.charAt(c),ot.test(a)?c++:(a=e,i===0&&D(xr));else y=e;y!==e?(te=o,o=ei()):(c=o,o=e)}else c=o,o=e;return o===e&&(o=c,g=t.charAt(c),Ct.test(g)?c++:(g=e,i===0&&D(ls)),g===e&&(g=null),b=t.charAt(c),ot.test(b)?c++:(b=e,i===0&&D(xr)),b!==e?(te=o,o=Zl()):(c=o,o=e)),S[l]={nextPos:c,result:o},o}function fn(){var o,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(o=xi(),o===e&&(o=Zn()),S[g]={nextPos:c,result:o},o)}function xi(){var o,g,b,y,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(Zs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=ti()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Zn(){var o,g,b,y,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,5)===Oe?(g=Oe,c+=5):(g=e,i===0&&D(Qs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Ql()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Qn(){var o,g,b,y,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(o=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,y=t.charAt(c),Qe.test(y)?c++:(y=e,i===0&&D(ft)),i--,y===e?b=void 0:(c=b,b=e),b!==e?(te=o,o=Xl()):(c=o,o=e)):(c=o,o=e),S[a]={nextPos:c,result:o},o)}function Xn(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+57,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=ri(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=ri(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=Yl(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function bi(){var o,g,b,y,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=si(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=si(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=eu(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function Yn(){var o,g,b,y,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(o=c,g=tt(),g!==e){for(b=c,y=[],a=k();a!==e;)y.push(a),a=k();if(t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=o,o=tu(g,b)}else c=o,o=e;return S[p]={nextPos:c,result:o},o}function ea(){var o,g,b,y,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=Yn(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=Yn(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ni(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function ta(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C,A,M,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(o=c,t.charCodeAt(c)===64?(g=ke,c++):(g=e,i===0&&D(Ys)),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(y=tt(),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Dt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=ea(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=O,c++):(u=e,i===0&&D(Br)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=oe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();C=wr(),C!==e?d=C:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=B,c++):(x=e,i===0&&D(Pt)),x!==e){for(m=[],C=k();C!==e;)m.push(C),C=k();for(C=bs(),C===e&&(C=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=J,c++):(M=e,i===0&&D(ut)),M!==e?(te=o,o=ru(b,y,a,p,d,C)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[I]={nextPos:c,result:o},o}function du(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m=c*77+62,C=S[m];if(C)return c=C.nextPos,C.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=ea(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=oe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=B,c++):(s=e,i===0&&D(Pt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=o,o=ai(y,$,d)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[m]={nextPos:c,result:o},o}function ra(){var o,g,b,y,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.charCodeAt(c)===91?(g=Ir,c++):(g=e,i===0&&D(Nn)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=Nr(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Mr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Ln(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(qr)),l!==e?(te=o,o=su(y)):(c=o,o=e)}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function sa(){var o,g,b,y,a,l,$,p,s,u,d,h,x,m,C=c*77+64,A=S[C];if(A)return c=A.nextPos,A.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();if(y=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(y.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=oe,c++):(p=e,i===0&&D(st)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Nr(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(us)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Hn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=o,o=nu(y)):(c=o,o=e)}else c=o,o=e;return S[C]={nextPos:c,result:o},o}function wr(){var o,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(o=yu(),o===e&&(o=Ai()),S[g]={nextPos:c,result:o},o)}function yu(){var o,g,b,y,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(o=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=na(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Br)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===tr?(p=tr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=o,o=au(y,u)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return S[d]={nextPos:c,result:o},o}function na(){var o,g,b,y,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=wr(),g!==e){for(b=[],y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,a=_s(),a!==e?(l=wr(),l!==e?y=l:(c=y,y=e)):(c=y,y=e);te=o,o=ii(g,b)}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function Ai(){var o,g,b,y,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(o=c,g=tt(),g!==e){for(b=[],y=Ie();y!==e;)b.push(y),y=Ie();if(t.charCodeAt(c)===60?(y=Je,c++):(y=e,i===0&&D(Ra)),y!==e){for(a=[],l=Ie();l!==e;)a.push(l),l=Ie();if(l=wr(),l!==e){for($=[],p=Ie();p!==e;)$.push(p),p=Ie();t.charCodeAt(c)===62?(p=rt,c++):(p=e,i===0&&D(Yt)),p!==e?(te=o,o=iu(g,l)):(c=o,o=e)}else c=o,o=e}else c=o,o=e}else c=o,o=e;return o===e&&(o=c,g=tt(),g!==e&&(te=o,g=li(g)),o=g),S[s]={nextPos:c,result:o},o}function tt(){var o,g,b,y,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(o=c,g=t.charAt(c),as.test(g)?c++:(g=e,i===0&&D(Da)),g!==e){for(b=[],y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));y!==e;)b.push(y),y=t.charAt(c),Xr.test(y)?c++:(y=e,i===0&&D(dr));te=o,o=ui()}else c=o,o=e;return S[a]={nextPos:c,result:o},o}function wu(){var o,g,b,y,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,g=tt(),g!==e){for(b=[],y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);y!==e;)b.push(y),y=c,t.charCodeAt(c)===58?(a=oe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],y=a):(c=y,y=e)):(c=y,y=e);te=o,o=lu()}else c=o,o=e;return S[$]={nextPos:c,result:o},o}function _s(){var o,g,b,y,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(o=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Mr)),b!==e){for(y=[],a=k();a!==e;)y.push(a),a=k();g=[g,b,y],o=g}else c=o,o=e;if(o===e)if(o=[],g=k(),g!==e)for(;g!==e;)o.push(g),g=k();else o=e;return S[l]={nextPos:c,result:o},o}function sr(){var o,g,b,y,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(o=c,t.charCodeAt(c)===123?(g=B,c++):(g=e,i===0&&D(Pt)),g!==e){for(b=[],y=k();y!==e;)b.push(y),y=k();for(y=bs(),y===e&&(y=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=o,o=fi(y)):(c=o,o=e)}else c=o,o=e;return o===e&&(o=As()),S[$]={nextPos:c,result:o},o}function We(){var o,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(o=Ye,c+=2):(o=e,i===0&&D(il)),o===e&&(o=t.charAt(c),xt.test(o)?c++:(o=e,i===0&&D(en))),S[g]={nextPos:c,result:o},o)}function Ci(){var o,g,b=c*77+74,y=S[b];return y?(c=y.nextPos,y.result):(o=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?o=void 0:(c=o,o=e),o===e&&(o=We()),S[b]={nextPos:c,result:o},o)}function k(){var o,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),It.test(o)?c++:(o=e,i===0&&D(ll)),S[g]={nextPos:c,result:o},o)}function Ie(){var o,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(o=t.charAt(c),yn.test(o)?c++:(o=e,i===0&&D(js)),S[g]={nextPos:c,result:o},o)}function ae(o,g,b){const y={type:o};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(y[l]=g[l]);const a=Y();return y.loc={start:a.start.offset,end:a.end.offset-1},y}if(zr=w(),r.peg$library)return{peg$result:zr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:tn,peg$maxFailPos:yr};if(zr!==e&&c===t.length)return zr;throw zr!==e&&c<t.length&&D(q()),pe(tn,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const Yb=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function e1(t){return Yb.includes(t.type)}function Uy(t){return"chain"in t&&t.chain!==null}function t1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function r1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function s1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Mt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Mt(e.expr,r);break}case"return":{e.expr=Mt(e.expr,r);break}case"each":{e.items=Mt(e.items,r),e.for=Mt(e.for,r);break}case"for":{e.from!=null&&(e.from=Mt(e.from,r)),e.to!=null&&(e.to=Mt(e.to,r)),e.times!=null&&(e.times=Mt(e.times,r)),e.for=Mt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Mt(e.expr,r),e.dest=Mt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Mt(e.operands[n],r);break}case"not":{e.expr=Mt(e.expr,r);break}case"if":{e.cond=Mt(e.cond,r),e.then=Mt(e.then,r);for(const n of e.elseif)n.cond=Mt(n.cond,r),n.then=Mt(n.then,r);e.else!=null&&(e.else=Mt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Mt(e.children[n],r);break}case"match":{e.about=Mt(e.about,r);for(const n of e.qs)n.q=Mt(n.q,r),n.a=Mt(n.a,r);e.default!=null&&(e.default=Mt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"exists":{e.identifier=Mt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Mt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Mt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Mt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"indexChain":{e.index=Mt(e.index,r);break}case"call":{e.target=Mt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"index":{e.target=Mt(e.target,r),e.index=Mt(e.index,r);break}case"prop":{e.target=Mt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Mt(e.members[n],r);break}case"or":case"and":{e.left=Mt(e.left,r),e.right=Mt(e.right,r);break}}if(Uy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Mt(e.chain[n],r);return e}const rp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function sp(t){throw new to(`Reserved word "${t}" cannot be used as variable name.`)}function n1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{rp.includes(t.name)&&sp(t.name);break}case"meta":{t.name!=null&&rp.includes(t.name)&&sp(t.name);break}case"fn":{for(const r of t.args)rp.includes(r.name)&&sp(r.name);break}}return t}function a1(t){for(const r of t)Mt(r,n1);return t}function rd(t){return{type:"simple",name:t}}function i1(t,r){return{type:"generic",name:t,inners:r}}function l1(t,r){return{type:"fn",args:t,result:r}}function zc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=zc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>zc(n)).join(", "),e=zc(t.result);return`@(${r}) { ${e} }`}}}function Fo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return rd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Fo(t.inner):r=rd("any"),i1(t.name,[r])}}throw new to(`Unknown type: '${zc(t)}'`)}else{const r=t.args.map(e=>Fo(e));return l1(r,Fo(t.result))}}function u1(t){switch(t.type){case"def":{t.varType!=null&&Fo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Fo(r.argType);t.retType!=null&&Fo(t.retType);break}}return t}function f1(t){for(const r of t)Mt(r,u1);return t}function Kc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Kc(n.expr.children)),r.push(n);else{if(e.length>0)throw new to("invalid attribute.");switch(n.type){case"fn":{n.children=Kc(n.children);break}case"block":{n.statements=Kc(n.statements);break}}r.push(n)}if(e.length>0)throw new to("invalid attribute.");return r}function o1(t){if(e1(t)&&Uy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=t1(n,v.args,v.loc);break}case"indexChain":{n=r1(n,v.index,v.loc);break}case"propChain":{n=s1(n,v.name,v.loc);break}}return n}return t}function c1(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],o1);return t}function Vc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function By(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Vc(t,r,e);{const{left:n,right:v,info:w}=t;return Vc(n,By(v,r,e),w)}}function Nf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Nf(t.left),Nf(t.right)]}}const h1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Nf(t.left),right:Nf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Nf(t.left),right:Nf(t.right)}),priority:3}};function p1(t){const r=t.operators.map(n=>{const v=h1[n];if(v==null)throw new to(`No such operator: ${n}.`);return v});let e=Vc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=By(e,t.operands[2+n],r[1+n]);return Nf(e)}function v1(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],e=>e.type==="infix"?p1(e):e);return t}var Lu;let g1=(Lu=class{constructor(){he(this,"plugins");this.plugins={validate:[a1,f1],transform:[Kc,c1,v1]}}static parse(r){return Lu.instance==null&&(Lu.instance=new Lu),Lu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=td(r,{startRule:"Preprocess"});e=td(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new to(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new to(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Lu,"instance"),Lu);const d1="0.18.0",y1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Jp=[],Zo=null;function w1(t){return Jp=g1.parse(t),JSON.stringify(Jp,null,"	")}async function m1(t){Zo==null||Zo.abort(),Zo=new kn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Vp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Vp(e.val,!0),print:!1});break}}});try{await Zo.exec(Jp)}catch(r){t.err(r)}}const $1=Object.freeze(Object.defineProperty({__proto__:null,exec:m1,parse:w1,samples:y1,version:d1},Symbol.toStringTag,{value:"Module"}));function ps(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Th=class qy extends Error{constructor(e,n){super(e);he(this,"name","AiScript");he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,qy)}},x1=class extends Th{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},ro=class extends Th{constructor(e,n){super(e,n);he(this,"name","Syntax")}},Tr=class extends Th{constructor(e,n){super(e,n);he(this,"name","Runtime")}},sd=class extends Tr{constructor(r,e){super(r,e)}};var mf=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Gu=class zy{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new zy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Tr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new Tr(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};mf([ps],Gu.prototype,"log",null);mf([ps],Gu.prototype,"onUpdated",null);mf([ps],Gu.prototype,"createChildScope",null);mf([ps],Gu.prototype,"get",null);mf([ps],Gu.prototype,"exists",null);mf([ps],Gu.prototype,"getAll",null);mf([ps],Gu.prototype,"add",null);mf([ps],Gu.prototype,"assign",null);const nr={type:"null"},Di={type:"bool",value:!0},Pi={type:"bool",value:!1},Be=t=>({type:"num",value:t}),cr=t=>({type:"str",value:t}),Wf=t=>({type:"bool",value:t}),gh=t=>({type:"obj",value:t}),ws=t=>({type:"arr",value:t}),b1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),me=t=>({type:"fn",native:t}),A1=t=>({type:"return",value:t}),C1=()=>({type:"break",value:null}),_1=()=>({type:"continue",value:null}),P1=t=>t.type==="return"?t.value:t,Zp=(t,r)=>({type:"error",value:t,info:r});function Si(t){if(t==null)throw new Tr("Expect anything, but got nothing.")}function la(t){if(t==null)throw new Tr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Tr(`Expect boolean, but got ${t.type}.`)}function uf(t){if(t==null)throw new Tr("Expect function, but got nothing.");if(t.type!=="fn")throw new Tr(`Expect function, but got ${t.type}.`)}function Ps(t){if(t==null)throw new Tr("Expect string, but got nothing.");if(t.type!=="str")throw new Tr(`Expect string, but got ${t.type}.`)}function He(t){if(t==null)throw new Tr("Expect number, but got nothing.");if(t.type!=="num")throw new Tr(`Expect number, but got ${t.type}.`)}function ku(t){if(t==null)throw new Tr("Expect object, but got nothing.");if(t.type!=="obj")throw new Tr(`Expect object, but got ${t.type}.`)}function To(t){if(t==null)throw new Tr("Expect array, but got nothing.");if(t.type!=="arr")throw new Tr(`Expect array, but got ${t.type}.`)}function np(t){return t.type==="obj"}function nd(t){return t.type==="arr"}function Qp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Xp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Xp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Yp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Yp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Yp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ev(t){if(t===null)return nr;if(typeof t=="boolean")return Wf(t);if(typeof t=="string")return cr(t);if(typeof t=="number")return Be(t);if(Array.isArray(t))return ws(t.map(r=>ev(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ev(n));return gh(r)}return nr}function Oo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Oo(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${Oo(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const k1={version:"0.17.0"},M1=k1.version,E1=new TextEncoder,S1=new TextDecoder,N1={help:cr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":cr(M1),"Core:ai":cr("kawaii"),"Core:not":me(([t])=>(la(t),t.value?Pi:Di)),"Core:eq":me(([t,r])=>(Si(t),Si(r),Qp(t,r)?Di:Pi)),"Core:neq":me(([t,r])=>(Si(t),Si(r),Qp(t,r)?Pi:Di)),"Core:and":me(([t,r])=>(la(t),t.value?(la(r),r.value?Di:Pi):Pi)),"Core:or":me(([t,r])=>(la(t),t.value?Di:(la(r),r.value?Di:Pi))),"Core:add":me(([t,r])=>(He(t),He(r),Be(t.value+r.value))),"Core:sub":me(([t,r])=>(He(t),He(r),Be(t.value-r.value))),"Core:mul":me(([t,r])=>(He(t),He(r),Be(t.value*r.value))),"Core:pow":me(([t,r])=>{He(t),He(r);const e=t.value**r.value;if(isNaN(e))throw new Tr("Invalid operation.");return Be(e)}),"Core:div":me(([t,r])=>{He(t),He(r);const e=t.value/r.value;if(isNaN(e))throw new Tr("Invalid operation.");return Be(e)}),"Core:mod":me(([t,r])=>(He(t),He(r),Be(t.value%r.value))),"Core:gt":me(([t,r])=>(He(t),He(r),t.value>r.value?Di:Pi)),"Core:lt":me(([t,r])=>(He(t),He(r),t.value<r.value?Di:Pi)),"Core:gteq":me(([t,r])=>(He(t),He(r),t.value>=r.value?Di:Pi)),"Core:lteq":me(([t,r])=>(He(t),He(r),t.value<=r.value?Di:Pi)),"Core:type":me(([t])=>(Si(t),cr(t.type))),"Core:to_str":me(([t])=>(Si(t),cr(Oo(t)))),"Core:range":me(([t,r])=>(He(t),He(r),t.value<r.value?ws(Array.from({length:r.value-t.value+1},(e,n)=>Be(n+t.value))):t.value>r.value?ws(Array.from({length:t.value-r.value+1},(e,n)=>Be(t.value-n))):ws([t]))),"Core:sleep":me(async([t])=>(He(t),await new Promise(r=>setTimeout(r,t.value)),nr)),"Util:uuid":me(()=>cr(bc())),"Json:stringify":me(([t])=>(Si(t),cr(JSON.stringify(Yp(t))))),"Json:parse":me(([t])=>{Ps(t);try{return ev(JSON.parse(t.value))}catch{return Zp("not_json")}}),"Json:parsable":me(([t])=>{Ps(t);try{JSON.parse(t.value)}catch{return Wf(!1)}return Wf(!0)}),"Date:now":me(()=>Be(Date.now())),"Date:year":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":me(([t])=>(Ps(t),Be(new Date(t.value).getTime()))),"Math:Infinity":Be(1/0),"Math:E":Be(Math.E),"Math:LN2":Be(Math.LN2),"Math:LN10":Be(Math.LN10),"Math:LOG2E":Be(Math.LOG2E),"Math:LOG10E":Be(Math.LOG10E),"Math:PI":Be(Math.PI),"Math:SQRT1_2":Be(Math.SQRT1_2),"Math:SQRT2":Be(Math.SQRT2),"Math:abs":me(([t])=>(He(t),Be(Math.abs(t.value)))),"Math:acos":me(([t])=>(He(t),Be(Math.acos(t.value)))),"Math:acosh":me(([t])=>(He(t),Be(Math.acosh(t.value)))),"Math:asin":me(([t])=>(He(t),Be(Math.asin(t.value)))),"Math:asinh":me(([t])=>(He(t),Be(Math.asinh(t.value)))),"Math:atan":me(([t])=>(He(t),Be(Math.atan(t.value)))),"Math:atanh":me(([t])=>(He(t),Be(Math.atanh(t.value)))),"Math:atan2":me(([t,r])=>(He(t),He(r),Be(Math.atan2(t.value,r.value)))),"Math:cbrt":me(([t])=>(He(t),Be(Math.cbrt(t.value)))),"Math:ceil":me(([t])=>(He(t),Be(Math.ceil(t.value)))),"Math:clz32":me(([t])=>(He(t),Be(Math.clz32(t.value)))),"Math:cos":me(([t])=>(He(t),Be(Math.cos(t.value)))),"Math:cosh":me(([t])=>(He(t),Be(Math.cosh(t.value)))),"Math:exp":me(([t])=>(He(t),Be(Math.exp(t.value)))),"Math:expm1":me(([t])=>(He(t),Be(Math.expm1(t.value)))),"Math:floor":me(([t])=>(He(t),Be(Math.floor(t.value)))),"Math:fround":me(([t])=>(He(t),Be(Math.fround(t.value)))),"Math:hypot":me(([t])=>{To(t);const r=[];for(const e of t.value)He(e),r.push(e.value);return Be(Math.hypot(...r))}),"Math:imul":me(([t,r])=>(He(t),He(r),Be(Math.imul(t.value,r.value)))),"Math:log":me(([t])=>(He(t),Be(Math.log(t.value)))),"Math:log1p":me(([t])=>(He(t),Be(Math.log1p(t.value)))),"Math:log10":me(([t])=>(He(t),Be(Math.log10(t.value)))),"Math:log2":me(([t])=>(He(t),Be(Math.log2(t.value)))),"Math:max":me(([t,r])=>(He(t),He(r),Be(Math.max(t.value,r.value)))),"Math:min":me(([t,r])=>(He(t),He(r),Be(Math.min(t.value,r.value)))),"Math:pow":me(([t,r])=>(He(t),He(r),Be(Math.pow(t.value,r.value)))),"Math:round":me(([t])=>(He(t),Be(Math.round(t.value)))),"Math:sign":me(([t])=>(He(t),Be(Math.sign(t.value)))),"Math:sin":me(([t])=>(He(t),Be(Math.sin(t.value)))),"Math:sinh":me(([t])=>(He(t),Be(Math.sinh(t.value)))),"Math:sqrt":me(([t])=>{He(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Tr("Invalid operation.");return Be(r)}),"Math:tan":me(([t])=>(He(t),Be(Math.tan(t.value)))),"Math:tanh":me(([t])=>(He(t),Be(Math.tanh(t.value)))),"Math:trunc":me(([t])=>(He(t),Be(Math.trunc(t.value)))),"Math:rnd":me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Be(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Be(Math.random())),"Math:gen_rng":me(([t])=>{if(Si(t),t.type!=="num"&&t.type!=="str")return nr;const r=uo(t.value.toString());return me(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Be(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Be(r()))}),"Num:to_hex":me(([t])=>(He(t),cr(t.value.toString(16)))),"Num:from_hex":me(([t])=>(Ps(t),Be(parseInt(t.value,16)))),"Str:lf":cr(`
`),"Str:lt":me(([t,r])=>(Ps(t),Ps(r),t.value<r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:gt":me(([t,r])=>(Ps(t),Ps(r),t.value>r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:from_codepoint":me(([t])=>(He(t),cr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":me(([t])=>(To(t),cr(Array.from(t.value.map(r=>(He(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":me(([t])=>(To(t),cr(S1.decode(Uint8Array.from(t.value.map(r=>(He(r),r.value))))))),"Obj:keys":me(([t])=>(ku(t),ws(Array.from(t.value.keys()).map(r=>cr(r))))),"Obj:vals":me(([t])=>(ku(t),ws(Array.from(t.value.values())))),"Obj:kvs":me(([t])=>(ku(t),ws(Array.from(t.value.entries()).map(([r,e])=>ws([cr(r),e]))))),"Obj:get":me(([t,r])=>(ku(t),Ps(r),t.value.get(r.value)??nr)),"Obj:set":me(([t,r,e])=>(ku(t),Ps(r),Si(e),t.value.set(r.value,e),nr)),"Obj:has":me(([t,r])=>(ku(t),Ps(r),Wf(t.value.has(r.value)))),"Obj:copy":me(([t])=>(ku(t),gh(new Map(t.value)))),"Obj:merge":me(([t,r])=>(ku(t),ku(r),gh(new Map([...t.value,...r.value])))),"Error:create":me(([t,r])=>(Ps(t),Zp(t.value,r))),"Async:interval":me(async([t,r,e],n)=>{He(t),uf(r),e&&(la(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),me(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":me(async([t,r],e)=>{He(t),uf(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),me(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},ad={num:{to_str:t=>me(async(r,e)=>cr(t.value.toString()))},str:{to_num:t=>me(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?nr:Be(n)}),to_arr:t=>me(async(r,e)=>ws(zs(t.value).map(n=>cr(n)))),to_unicode_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>cr(n)))),to_unicode_codepoint_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>{const v=n.codePointAt(0);return Be(v??n.charCodeAt(0))}))),to_char_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>cr(n)))),to_charcode_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>Be(n.charCodeAt(0))))),to_utf8_byte_arr:t=>me(async(r,e)=>ws(Array.from(E1.encode(t.value)).map(n=>Be(n)))),len:t=>Be(oo(t.value)),replace:t=>me(async([r,e],n)=>(Ps(r),Ps(e),cr(t.value.split(r.value).join(e.value)))),index_of:t=>me(async([r],e)=>(Ps(r),Be(ho(t.value,r.value)))),incl:t=>me(async([r],e)=>(Ps(r),t.value.includes(r.value)?Di:Pi)),trim:t=>me(async(r,e)=>cr(t.value.trim())),upper:t=>me(async(r,e)=>cr(t.value.toUpperCase())),lower:t=>me(async(r,e)=>cr(t.value.toLowerCase())),split:t=>me(async([r],e)=>(r&&Ps(r),ws(r?t.value.split(r?r.value:"").map(n=>cr(n)):zs(t.value).map(n=>cr(n))))),slice:t=>me(async([r,e],n)=>(He(r),He(e),cr(co(t.value,r.value,e.value)))),pick:t=>me(async([r],e)=>{He(r);const v=zs(t.value)[r.value];return v?cr(v):nr}),charcode_at:t=>me(([r],e)=>{He(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?nr:Be(n)}),codepoint_at:t=>me(([r],e)=>{He(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?nr:Be(n)})},arr:{len:t=>Be(t.value.length),push:t=>me(async([r],e)=>(Si(r),t.value.push(r),t)),unshift:t=>me(async([r],e)=>(Si(r),t.value.unshift(r),t)),pop:t=>me(async(r,e)=>t.value.pop()??nr),shift:t=>me(async(r,e)=>t.value.shift()??nr),concat:t=>me(async([r],e)=>(To(r),ws(t.value.concat(r.value)))),slice:t=>me(async([r,e],n)=>(He(r),He(e),ws(t.value.slice(r.value,e.value)))),join:t=>me(async([r],e)=>(r&&Ps(r),cr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>me(async([r],e)=>{uf(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Be(w)]));return ws(await Promise.all(n))}),filter:t=>me(async([r],e)=>{uf(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Be(v)]);la(_),_.value&&n.push(w)}return ws(n)}),reduce:t=>me(async([r,e],n)=>{uf(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Be(_)])}return w}),find:t=>me(async([r],e)=>{uf(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Be(n)]);if(la(w),w.value)return v}return nr}),incl:t=>me(async([r],e)=>(Si(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Pi:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Di:Pi)),reverse:t=>me(async(r,e)=>(t.value.reverse(),nr)),copy:t=>me(async(r,e)=>ws([...t.value])),sort:t=>me(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);He(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return uf(r),To(t),t.value=await n(t.value,r),t})},error:{name:t=>cr(t.value),info:t=>t.info??nr}};function F1(t,r){if(Object.hasOwn(ad,t.type)){const e=ad[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Tr(`No such prop (${r}) in ${t.type}.`)}else throw new Tr(`Cannot read prop of ${t.type}. (reading ${r})`)}const T1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var va=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Ky=300,O1=Ky-1;let Mn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:me(([v])=>{Si(v),this.opts.out&&this.opts.out(v)}),readline:me(async v=>{const w=v[0];if(Ps(w),this.opts.in==null)return nr;const _=await this.opts.in(w.value);return cr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...N1,...n}).map(([v,w])=>[v,T1.const(w)])),this.scope=new Gu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Zp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Th?this.opts.err(r):this.opts.err(new x1(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??nr;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return P1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return nr;if(this.stepCount%Ky===O1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Tr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);uf(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(la(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(la(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return nr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(Qp(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):nr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return nr}case"for":{if(r.times){const n=await this._eval(r.times,e);He(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);He(n),He(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Be(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return nr}case"each":{const n=await this._eval(r.items,e);To(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return nr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),nr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),nr}case"addAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value+v.value)),nr}case"subAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value-v.value)),nr}case"null":return nr;case"bool":return Wf(r.value);case"num":return Be(r.value);case"str":return cr(r.value);case"arr":return ws(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return gh(n)}case"prop":{const n=await this._eval(r.target,e);return np(n)?n.value.has(r.name)?n.value.get(r.name):nr:F1(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(nd(n)){He(v);const w=n.value[v.value];if(w===void 0)throw new sd(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(np(n))return Ps(v),n.value.has(v.value)?n.value.get(v.value):nr;throw new Tr(`Cannot read prop (${Oo(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return la(n),Wf(!n.value)}case"fn":return b1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Wf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=Oo(w)}return cr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),A1(n)}case"break":return this.log("block:break",{scope:e.name}),C1();case"continue":return this.log("block:continue",{scope:e.name}),_1();case"ns":return nr;case"meta":return nr;case"and":{const n=await this._eval(r.left,e);if(la(n),n.value){const v=await this._eval(r.right,e);return la(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(la(n),n.value)return n;{const v=await this._eval(r.right,e);return la(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=nr;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(nd(v)){if(He(w),v.value[w.value]===void 0)throw new sd(`Index out of range. index: ${w.value} max: ${v.value.length-1}`);v.value[w.value]=n}else if(np(v))Ps(w),v.value.set(w.value,n);else throw new Tr(`Cannot read prop (${Oo(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ku(v),v.value.set(e.name,n)}else throw new Tr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};va([ps],Mn.prototype,"exec",null);va([ps],Mn.prototype,"execFn",null);va([ps],Mn.prototype,"execFnSimple",null);va([ps],Mn.prototype,"handleError",null);va([ps],Mn.prototype,"log",null);va([ps],Mn.prototype,"collectNs",null);va([ps],Mn.prototype,"collectNsMember",null);va([ps],Mn.prototype,"_fn",null);va([ps],Mn.prototype,"_eval",null);va([ps],Mn.prototype,"_run",null);va([ps],Mn.prototype,"registerAbortHandler",null);va([ps],Mn.prototype,"unregisterAbortHandler",null);va([ps],Mn.prototype,"abort",null);va([ps],Mn.prototype,"assign",null);va([ps],Mn,"collectMetadata",null);function I1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Gf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Gf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}I1(Gf,Error);function ap(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Gf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=ap("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+ap("",v.column-1," ")+ap("",H,"^")}else r+=`
 at `+_}return r};Gf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function id(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:sn,Main:Kr},w=sn,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",tr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Me="eval",Oe="exists",Ae="`",ke='"',$e="'",Je='\\"',rt="\\'",Ye="true",Qe="false",lt="null",$t=";",Nt="@",Ct="@(",_t=`\r
`,ot=/^[A-Z0-9_:]/i,ks=/^[^`{]/,as=/^[{}`]/,Xr=/^[+\-]/,xt=/^[1-9]/,It=/^[0-9]/,yn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,rr=/^[ \t]/,Dt=Ds(),Br=pe("//",!1),Sn=pe("/*",!1),Pt=pe("*/",!1),ut=pe("(",!1),kr=pe(")",!1),qt=pe("::",!1),st=pe("{",!1),Lt=pe("}",!1),ms=pe("###",!1),Ht=pe("let",!1),Ut=pe(":",!1),qr=pe("=",!1),Na=pe("var",!1),Mr=pe("<:",!1),is=pe("#[",!1),Ns=pe("]",!1),ft=pe("each",!1),Tt=pe(",",!1),Ks=pe("for",!1),Er=pe("return",!1),Sr=er([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=pe("loop",!1),Fa=pe("break",!1),Ji=pe("continue",!1),Zi=pe("+=",!1),Ta=pe("-=",!1),Oa=pe("\\",!1),Qi=pe("||",!1),Xi=pe("&&",!1),Yi=pe("==",!1),el=pe("!=",!1),Nn=pe("<=",!1),Vs=pe(">=",!1),Fn=pe("<",!1),Ia=pe(">",!1),tl=pe("+",!1),ja=pe("-",!1),Fs=pe("*",!1),rl=pe("^",!1),sl=pe("/",!1),nl=pe("%",!1),$s=pe("!",!1),Ts=pe("[",!1),Tn=pe(".",!1),Ws=pe("if",!1),Gs=pe("elif",!1),al=pe("else",!1),Js=pe("match",!1),ls=pe("=>",!1),Os=pe("eval",!1),xr=pe("exists",!1),Zs=pe("`",!1),Qs=er(["`","{"],!0,!1),Xs=er(["{","}","`"],!1,!1),us=pe('"',!1),Ys=pe("'",!1),Is=pe('\\"',!1),Ra=pe("\\'",!1),Yt=er(["+","-"],!1,!1),Da=er([["1","9"]],!1,!1),dr=er([["0","9"]],!1,!1),il=pe("true",!1),en=pe("false",!1),ll=pe("null",!1),js=pe(";",!1),ul=pe("@",!1),On=pe("@(",!1),fl=er([["A","Z"],"_"],!1,!0),La=er([["A","Z"],["0","9"],"_"],!1,!0),ol=pe(`\r
`,!1),cl=er(["\r",`
`],!1,!1),Ha=er([" ","	","\r",`
`],!1,!1),hl=er([" ","	"],!1,!1),Ua=function(s){return s.join("")},pl=function(){return le()},Ba=function(){return le()},vl=function(){return""},qa=function(){return""},gl=function(s){return s??[]},In=function(s,u){return u},dl=function(s,u){return[s,...u]},jn=function(s,u){return u},yl=function(s,u){return[s,...u]},za=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},Cl=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},_l=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Ka=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Tl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Rn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Va=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Wa=function(s,u){return s.chain?{...s,chain:[...s.chain,...u]}:{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},Dn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},zl=function(s){return p("propChain",{name:s})},Kl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ga=function(s,u){return{cond:s,then:u}},Ja=function(s){return s},Za=function(s,u,d){return{q:u,a:d}},Qa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Xa=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},Ya=function(s){return s.join("")},ei=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ti=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},ri=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},si=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ni=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ai=function(){return p("null",{})},Ln=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},Hn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},ii=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},li=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},ui=function(s){return s},lu=function(s){return p("arr",{value:s})},fi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},tn=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},zr=function(s){return p("block",{statements:s??[]})},f=0,Y=0,T=[{line:1,column:1}],j=0,bt=[],F=0,q={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function le(){return t.substring(Y,f)}function D(){return rn(Y,f)}function uu(s,u){throw u=u!==void 0?u:rn(Y,f),bs(s,u)}function pe(s,u){return{type:"literal",text:s,ignoreCase:u}}function er(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function oi(s){var u=T[s],d;if(u)return u;for(d=s-1;!T[d];)d--;for(u=T[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return T[s]=u,u}function rn(s,u,d){var h=oi(s),x=oi(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return d&&n&&typeof n.offset=="function"&&(m.start=n.offset(m.start),m.end=n.offset(m.end)),m}function R(s){f<j||(f>j&&(j=f,bt=[]),bt.push(s))}function bs(s,u){return new Gf(s,null,null,u)}function Un(s,u,d){return new Gf(Gf.buildMessage(s,u),s,u,d)}function sn(){var s,u,d,h=f*77+0,x=q[h];if(x)return f=x.nextPos,x.result;for(s=f,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ua(u),s=u,q[h]={nextPos:f,result:s},s}function As(){var s,u,d=f*77+1,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=un(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=f,u=Zn(),u!==e&&(Y=s,u=Ba()),s=u,s===e&&(s=et(),s===e&&(t.length>f?(s=t.charAt(f),f++):(s=e,F===0&&R(Dt))))),q[d]={nextPos:f,result:s},s)}function et(){var s,u,d,h,x,m,C=f*77+2,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,2)===_?(u=_,f+=2):(u=e,F===0&&R(Br)),u!==e){for(d=[],h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=vl()}else f=s,s=e;if(s===e)if(s=f,t.substr(f,2)===P?(u=P,f+=2):(u=e,F===0&&R(Sn)),u!==e){for(d=[],h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(Pt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(Pt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);t.substr(f,2)===E?(h=E,f+=2):(h=e,F===0&&R(Pt)),h!==e?(Y=s,s=qa()):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Kr(){var s,u,d,h,x,m=f*77+3,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();for(d=nn(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),q[m]={nextPos:f,result:s},s}function nn(){var s,u,d,h,x,m,C,A,M=f*77+4,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Xe(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=dl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Nr(){var s,u,d,h,x,m,C,A,M=f*77+5,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=fs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=yl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function br(){var s,u,d,h,x,m,C,A,M=f*77+6,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Cs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=za(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=za(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=wl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Xe(){var s,u=f*77+7,d=q[u];return d?(f=d.nextPos,d.result):(s=hi(),s===e&&(s=fu(),s===e&&(s=Cs())),q[u]={nextPos:f,result:s},s)}function fs(){var s,u=f*77+8,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=tt(),s===e&&(s=hi())),q[u]={nextPos:f,result:s},s)}function Cs(){var s,u=f*77+9,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=tt(),s===e&&(s=ou(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Wr(),s===e&&(s=vi(),s===e&&(s=pu(),s===e&&(s=gi(),s===e&&(s=Gr(),s===e&&(s=Bn(),s===e&&(s=Ve()))))))))))),q[u]={nextPos:f,result:s},s)}function Ve(){var s,u=f*77+10,d=q[u];return d?(f=d.nextPos,d.result):(s=di(),s===e&&(s=Ls()),q[u]={nextPos:f,result:s},s)}function Ls(){var s,u=f*77+11,d=q[u];return d?(f=d.nextPos,d.result):(s=mi(),s===e&&(s=wu(),s===e&&(s=yi(),s===e&&(s=ci()))),q[u]={nextPos:f,result:s},s)}function ci(){var s,u,d,h,x,m,C=f*77+12,A=q[C];if(A)return f=A.nextPos,A.result;if(s=ln(),s===e&&(s=Vn(),s===e&&(s=Wn(),s===e&&(s=un(),s===e&&(s=Zn(),s===e&&(s=bi(),s===e&&(s=ta(),s===e&&(s=sa(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=zn(),s===e&&(s=Gn(),s===e))))))))))))if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=ml(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Vr(){var s,u=f*77+13,d=q[u];return d?(f=d.nextPos,d.result):(s=bi(),s===e&&(s=Zn(),s===e&&(s=ta(),s===e&&(s=_s(),s===e&&(s=sr(),s===e&&(s=sa()))))),q[u]={nextPos:f,result:s},s)}function hi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+14,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===H?(u=H,f+=2):(u=e,F===0&&R(qt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(f)===123?(m=B,f++):(m=e,F===0&&R(st)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Nr(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(f)===125?(I=J,f++):(I=e,F===0&&R(Lt)),I!==e?(Y=s,s=$l(h,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function fu(){var s,u,d,h,x,m,C=f*77+15,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ae(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Vr(),m!==e?(Y=s,s=xl(h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Vr(),h!==e?(Y=s,s=bl(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function pi(){var s,u,d,h,x,m,C,A,M,I=f*77+16,U=q[I];if(U)return f=U.nextPos,U.result;if(s=f,t.substr(f,3)===ue?(u=ue,f+=3):(u=e,F===0&&R(Ht)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=Pe,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Al(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===G?(u=G,f+=3):(u=e,F===0&&R(Na)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=Pe,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Cl(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[I]={nextPos:f,result:s},s}function ou(){var s,u,d,h,x=f*77+17,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,2)===V?(u=V,f+=2):(u=e,F===0&&R(Mr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=_l(h)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function cu(){var s,u,d,h,x,m,C,A=f*77+18,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,2)===Z?(u=Z,f+=2):(u=e,F===0&&R(is)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();for(C=Vr(),C!==e?x=C:(f=x,x=e),x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();t.charCodeAt(f)===93?(C=Q,f++):(C=e,F===0&&R(Ns)),C!==e?(Y=s,s=Pl(h,x)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+19,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.substr(f,4)===X?(u=X,f+=4):(u=e,F===0&&R(ft)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ae(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Tt)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(f)===41?(K=O,f++):(K=e,F===0&&R(kr)),K!==e){for(se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Ne=b(),Ne!==e?(Y=s,s=kl(C,U,Ne)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,4)===X?(u=X,f+=4):(u=e,F===0&&R(ft)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=Ve(),I!==e){if(U=[],K=l(),K!==e)for(;K!==e;)U.push(K),K=l();else U=e;U!==e?(K=b(),K!==e?(Y=s,s=Ml(m,I,K)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function vi(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt=f*77+20,vt=q[pt];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ae(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=f,t.charCodeAt(f)===61?(I=Pe,f++):(I=e,F===0&&R(qr)),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();K=Ve(),K!==e?(Y=M,M=El(C,K)):(f=M,M=e)}else f=M,M=e;for(M===e&&(M=null),t.charCodeAt(f)===44?(I=ee,f++):(I=e,F===0&&R(Tt)),I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();if(K=Ve(),K!==e)if(t.charCodeAt(f)===41?(se=O,f++):(se=e,F===0&&R(kr)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();ve=b(),ve!==e?(Y=s,s=Sl(C,M,K,ve)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(A=f,t.charCodeAt(f)===61?(M=Pe,f++):(M=e,F===0&&R(qr)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(f=A,A=e)}else f=A,A=e;for(A===e&&(A=null),t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Tt)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(K=[],se=l(),se!==e)for(;se!==e;)K.push(se),se=l();else K=e;K!==e?(se=b(),se!==e?(Y=s,s=Ka(m,A,U,se)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Tl(h,m)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e}}return q[pt]={nextPos:f,result:s},s}function hu(){var s,u,d,h,x,m=f*77+21,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,6)===ie?(u=ie,f+=6):(u=e,F===0&&R(Er)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Ol(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function pu(){var s,u,d,h,x,m,C,A,M=f*77+22,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Te?(u=Te,f+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Il(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function gi(){var s,u,d,h,x=f*77+23,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Le?(u=Le,f+=5):(u=e,F===0&&R(Fa)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=jl()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Gr(){var s,u,d,h,x=f*77+24,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,8)===_e?(u=_e,f+=8):(u=e,F===0&&R(Ji)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=Rn()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Bn(){var s,u,d,h,x,m,C=f*77+25,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(f,2)===at?(h=at,f+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(f,2)===wt?(h=wt,f+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(f)===61?(h=Pe,f++):(h=e,F===0&&R(qr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function di(){var s,u,d,h,x,m,C,A,M=f*77+26,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Ls(),u!==e){for(d=[],h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Va(u,m,A)):(f=h,h=e)}else f=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Va(u,m,A)):(f=h,h=e)}else f=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(f=s,s=e)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Jr(){var s,u,d,h=f*77+27,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=fr,f++):(u=e,F===0&&R(Oa)),u!==e?(d=y(),d!==e?(u=[u,d],s=u):(f=s,s=e)):(f=s,s=e),s===e&&(s=$()),q[h]={nextPos:f,result:s},s)}function qn(){var s,u,d=f*77+28,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===mt?(u=mt,f+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(f,2)===dt?(u=dt,f+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(f,2)===Ze?(u=Ze,f+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(f,2)===yt?(u=yt,f+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(f,2)===Jt?(u=Jt,f+=2):(u=e,F===0&&R(Nn)),u===e&&(t.substr(f,2)===Zt?(u=Zt,f+=2):(u=e,F===0&&R(Vs)),u===e&&(t.charCodeAt(f)===60?(u=ht,f++):(u=e,F===0&&R(Fn)),u===e&&(t.charCodeAt(f)===62?(u=Ir,f++):(u=e,F===0&&R(Ia)),u===e&&(t.charCodeAt(f)===43?(u=Qt,f++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(f)===45?(u=Pr,f++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(f)===42?(u=Bt,f++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(f)===94?(u=Ar,f++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(f)===47?(u=Ur,f++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(f)===37?(u=tr,f++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,q[d]={nextPos:f,result:s},s)}function zn(){var s,u,d,h=f*77+29,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===33?(u=jr,f++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function yi(){var s,u,d,h,x=f*77+30,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,u=ci(),u!==e){if(d=[],h=Kn(),h===e&&(h=wi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Kn(),h===e&&(h=wi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Wa(u,d)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Kn(){var s,u,d,h,x,m,C=f*77+31,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=Ul(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vu(){var s,u,d,h,x,m,C=f*77+32,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);Y=s,s=Bl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function wi(){var s,u,d,h,x,m,C=f*77+33,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Hs(){var s,u,d,h=f*77+34,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===46?(u=$r,f++):(u=e,F===0&&R(Tn)),u!==e?(d=ae(),d!==e?(Y=s,s=zl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function mi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+35,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===W?(u=W,f+=2):(u=e,F===0&&R(Ws)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(C=f,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=$i(),M!==e?C=M:(f=C,C=e)):(f=C,C=e),C===e&&(C=null),A=f,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=gu(),I!==e?A=I:(f=A,A=e)):(f=A,A=e),A===e&&(A=null),Y=s,s=Kl(h,m,C,A)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function $i(){var s,u,d,h,x,m,C=f*77+36,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=an(),u!==e){for(d=[],h=f,x=[],m=l();m!==e;)x.push(m),m=l();for(m=an(),m!==e?h=m:(f=h,h=e);h!==e;){for(d.push(h),h=f,x=[],m=l();m!==e;)x.push(m),m=l();m=an(),m!==e?h=m:(f=h,h=e)}Y=s,s=Vl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function an(){var s,u,d,h,x,m,C,A=f*77+37,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,4)===re?(u=re,f+=4):(u=e,F===0&&R(Gs)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=b(),C!==e?(Y=s,s=Ga(x,C)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[A]={nextPos:f,result:s},s}function gu(){var s,u,d,h,x,m=f*77+38,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,4)===fe?(u=fe,f+=4):(u=e,F===0&&R(al)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Ja(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function ln(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt,vt,mu=f*77+39,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.substr(f,5)===xe?(u=xe,f+=5):(u=e,F===0&&R(Js)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===123?(C=B,f++):(C=e,F===0&&R(st)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();Y=I,I=Za(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();Y=I,I=Za(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;else M=e;if(M!==e){if(I=f,t.charCodeAt(f)===42?(U=Bt,f++):(U=e,F===0&&R(Fs)),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();I=ve}else f=I,I=e}else f=I,I=e}else f=I,I=e;for(I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();t.charCodeAt(f)===125?(K=J,f++):(K=e,F===0&&R(Lt)),K!==e?(Y=s,s=Qa(x,M,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function Vn(){var s,u,d,h,x,m,C,A,M=f*77+40,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Me?(u=Me,f+=4):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Wl(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Wn(){var s,u,d,h,x=f*77+41,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,6)===Oe?(u=Oe,f+=6):(u=e,F===0&&R(xr)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Gn(),h!==e?(Y=s,s=Gl(h)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Gn(){var s,u,d=f*77+42,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=o(),u!==e&&(Y=s,u=Xa(u)),s=u,q[d]={nextPos:f,result:s},s)}function un(){var s,u,d,h,x,m,C=f*77+43,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===96?(u=Ae,f++):(u=e,F===0&&R(Zs)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===96?(h=Ae,f++):(h=e,F===0&&R(Zs)),h!==e?(Y=s,s=Jl(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Jn(){var s,u,d,h,x,m,C=f*77+44,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?s=h:(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,u=[],d=fn(),d!==e)for(;d!==e;)u.push(d),d=fn();else u=e;u!==e&&(Y=s,u=Ya(u)),s=u}return q[C]={nextPos:f,result:s},s}function fn(){var s,u=f*77+45,d=q[u];return d?(f=d.nextPos,d.result):(s=xi(),s===e&&(ks.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Qs))),q[u]={nextPos:f,result:s},s)}function xi(){var s,u,d,h=f*77+46,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=fr,f++):(u=e,F===0&&R(Oa)),u!==e?(as.test(t.charAt(f))?(d=t.charAt(f),f++):(d=e,F===0&&R(Xs)),d!==e?s=d:(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function Zn(){var s,u,d,h,x,m,C=f*77+47,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===34?(u=ke,f++):(u=e,F===0&&R(us)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===34?(m=ke,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ei(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===34?(m=ke,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ei(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===34?(h=ke,f++):(h=e,F===0&&R(us)),h!==e?(Y=s,s=Zl(d)):(f=s,s=e)}else f=s,s=e;if(s===e)if(s=f,t.charCodeAt(f)===39?(u=$e,f++):(u=e,F===0&&R(Ys)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===39?(h=$e,f++):(h=e,F===0&&R(Ys)),h!==e?(Y=s,s=Ql(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Qn(){var s,u,d=f*77+48,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===Je?(u=Je,f+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,q[d]={nextPos:f,result:s},s)}function Xn(){var s,u,d=f*77+49,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===rt?(u=rt,f+=2):(u=e,F===0&&R(Ra)),u!==e&&(Y=s,u=ri()),s=u,q[d]={nextPos:f,result:s},s)}function bi(){var s,u=f*77+50,d=q[u];return d?(f=d.nextPos,d.result):(s=Yn(),s===e&&(s=ea()),q[u]={nextPos:f,result:s},s)}function Yn(){var s,u,d,h,x,m,C=f*77+51,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(Da)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(f)===46?(h=$r,f++):(h=e,F===0&&R(Tn)),h!==e){if(x=[],It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(f)===46?(d=$r,f++):(d=e,F===0&&R(Tn)),d!==e){if(h=[],It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=si()):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[C]={nextPos:f,result:s},s}function ea(){var s,u,d,h,x=f*77+52,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(Da)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(f=s,s=e)}else f=s,s=e;return s===e&&(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(f=s,s=e)),q[x]={nextPos:f,result:s},s}function ta(){var s,u=f*77+53,d=q[u];return d?(f=d.nextPos,d.result):(s=du(),s===e&&(s=ra()),q[u]={nextPos:f,result:s},s)}function du(){var s,u,d,h,x=f*77+54,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===Ye?(u=Ye,f+=4):(u=e,F===0&&R(il)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ni()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function ra(){var s,u,d,h,x=f*77+55,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Qe?(u=Qe,f+=5):(u=e,F===0&&R(en)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ru()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function sa(){var s,u,d,h,x=f*77+56,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===lt?(u=lt,f+=4):(u=e,F===0&&R(ll)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ai()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+57,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=su(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function yu(){var s,u,d,h,x,m,C,A,M,I,U=f*77+58,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function na(){var s,u,d,h,x,m,C,A=f*77+59,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,u=ae(),u!==e){for(d=f,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=We(),C!==e?d=C:(f=d,d=e)}else f=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Ai(){var s,u,d,h,x,m,C=f*77+60,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=na(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=ii(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function tt(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt,vt,mu=f*77+61,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.charCodeAt(f)===64?(u=Nt,f++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ae(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(f)===40?(m=N,f++):(m=e,F===0&&R(ut)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Ai(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(f)===41?(I=O,f++):(I=e,F===0&&R(kr)),I!==e){for(U=f,K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===58?(se=oe,f++):(se=e,F===0&&R(Ut)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();ve=We(),ve!==e?U=ve:(f=U,U=e)}else f=U,U=e;for(U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===123?(se=B,f++):(se=e,F===0&&R(st)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();for(ve=br(),ve===e&&(ve=null),pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();t.charCodeAt(f)===125?(vt=J,f++):(vt=e,F===0&&R(Lt)),vt!==e?(Y=s,s=iu(d,h,x,A,U,ve)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function wu(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=f*77+62,ve=q[Ne];if(ve)return f=ve.nextPos,ve.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(On)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ai(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=f,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===58?(M=oe,f++):(M=e,F===0&&R(Ut)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?C=U:(f=C,C=e)}else f=C,C=e;for(C===e&&(C=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===123?(M=B,f++):(M=e,F===0&&R(st)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=br(),U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();t.charCodeAt(f)===125?(se=J,f++):(se=e,F===0&&R(Lt)),se!==e?(Y=s,s=li(h,C,U)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[Ne]={nextPos:f,result:s},s}function _s(){var s,u,d,h,x,m,C,A,M,I,U=f*77+63,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=ui(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=ui(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function sr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+64,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=fi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=fi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=c(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function We(){var s,u=f*77+65,d=q[u];return d?(f=d.nextPos,d.result):(s=Ci(),s===e&&(s=Ie()),q[u]={nextPos:f,result:s},s)}function Ci(){var s,u,d,h,x,m,C,A,M,I,U=f*77+66,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(On)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.substr(f,2)===ce?(A=ce,f+=2):(A=e,F===0&&R(ls)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function k(){var s,u,d,h,x,m,C=f*77+67,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=We(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=xs(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Ie(){var s,u,d,h,x,m,C,A,M=f*77+68,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=ae(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(f)===60?(h=ht,f++):(h=e,F===0&&R(Fn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(C=[],A=$();A!==e;)C.push(A),A=$();t.charCodeAt(f)===62?(A=Ir,f++):(A=e,F===0&&R(Ia)),A!==e?(Y=s,s=yr(u,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return s===e&&(s=f,u=ae(),u!==e&&(Y=s,u=tn(u)),s=u),q[M]={nextPos:f,result:s},s}function ae(){var s,u,d,h,x=f*77+69,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,yn.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(fl)),u!==e){for(d=[],gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(La));h!==e;)d.push(h),gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(La));Y=s,s=i()}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function o(){var s,u,d,h,x,m,C=f*77+70,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=ae(),u!==e){for(d=[],h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ae(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ae(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=S()}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function g(){var s,u,d,h,x,m=f*77+71,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(f)===44?(d=ee,f++):(d=e,F===0&&R(Tt)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else f=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return q[m]={nextPos:f,result:s},s}function b(){var s,u,d,h,x,m,C=f*77+72,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=br(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?(Y=s,s=zr(h)):(f=s,s=e)}else f=s,s=e;return s===e&&(s=Cs()),q[C]={nextPos:f,result:s},s}function y(){var s,u=f*77+73,d=q[u];return d?(f=d.nextPos,d.result):(t.substr(f,2)===_t?(s=_t,f+=2):(s=e,F===0&&R(ol)),s===e&&(Vi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(cl))),q[u]={nextPos:f,result:s},s)}function a(){var s,u,d=f*77+74,h=q[d];return h?(f=h.nextPos,h.result):(s=f,F++,t.length>f?(u=t.charAt(f),f++):(u=e,F===0&&R(Dt)),F--,u===e?s=void 0:(f=s,s=e),s===e&&(s=y()),q[d]={nextPos:f,result:s},s)}function l(){var s,u=f*77+75,d=q[u];return d?(f=d.nextPos,d.result):(Wi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Ha)),q[u]={nextPos:f,result:s},s)}function $(){var s,u=f*77+76,d=q[u];return d?(f=d.nextPos,d.result):(rr.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(hl)),q[u]={nextPos:f,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=w(),Rs!==e&&f===t.length)return Rs;throw Rs!==e&&f<t.length&&R(L()),Un(bt,j<t.length?t.charAt(j):null,j<t.length?rn(j,j+1):rn(j,j))}const j1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function R1(t){return j1.includes(t.type)}function Vy(t){return"chain"in t&&t.chain!==null}function D1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function L1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function H1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Et(e.expr,r);break}case"return":{e.expr=Et(e.expr,r);break}case"each":{e.items=Et(e.items,r),e.for=Et(e.for,r);break}case"for":{e.from!=null&&(e.from=Et(e.from,r)),e.to!=null&&(e.to=Et(e.to,r)),e.times!=null&&(e.times=Et(e.times,r)),e.for=Et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Et(e.expr,r),e.dest=Et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Et(e.operands[n],r);break}case"not":{e.expr=Et(e.expr,r);break}case"if":{e.cond=Et(e.cond,r),e.then=Et(e.then,r);for(const n of e.elseif)n.cond=Et(n.cond,r),n.then=Et(n.then,r);e.else!=null&&(e.else=Et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Et(e.children[n],r);break}case"match":{e.about=Et(e.about,r);for(const n of e.qs)n.q=Et(n.q,r),n.a=Et(n.a,r);e.default!=null&&(e.default=Et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"exists":{e.identifier=Et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Et(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"indexChain":{e.index=Et(e.index,r);break}case"call":{e.target=Et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"index":{e.target=Et(e.target,r),e.index=Et(e.index,r);break}case"prop":{e.target=Et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Et(e.members[n],r);break}case"or":case"and":{e.left=Et(e.left,r),e.right=Et(e.right,r);break}}if(Vy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Et(e.chain[n],r);return e}const ip=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function lp(t){throw new ro(`Reserved word "${t}" cannot be used as variable name.`)}function U1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{ip.includes(t.name)&&lp(t.name);break}case"meta":{t.name!=null&&ip.includes(t.name)&&lp(t.name);break}case"fn":{for(const r of t.args)ip.includes(r.name)&&lp(r.name);break}}return t}function B1(t){for(const r of t)Et(r,U1);return t}function ld(t){return{type:"simple",name:t}}function q1(t,r){return{type:"generic",name:t,inners:r}}function z1(t,r){return{type:"fn",args:t,result:r}}function Wc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Wc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Wc(n)).join(", "),e=Wc(t.result);return`@(${r}) { ${e} }`}}}function Io(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return ld(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Io(t.inner):r=ld("any"),q1(t.name,[r])}}throw new ro(`Unknown type: '${Wc(t)}'`)}else{const r=t.args.map(e=>Io(e));return z1(r,Io(t.result))}}function K1(t){switch(t.type){case"def":{t.varType!=null&&Io(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Io(r.argType);t.retType!=null&&Io(t.retType);break}}return t}function V1(t){for(const r of t)Et(r,K1);return t}function Gc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Gc(n.expr.children)),r.push(n);else{if(e.length>0)throw new ro("invalid attribute.");switch(n.type){case"fn":{n.children=Gc(n.children);break}case"block":{n.statements=Gc(n.statements);break}}r.push(n)}if(e.length>0)throw new ro("invalid attribute.");return r}function W1(t){if(R1(t)&&Vy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=D1(n,v.args,v.loc);break}case"indexChain":{n=L1(n,v.index,v.loc);break}case"propChain":{n=H1(n,v.name,v.loc);break}}return n}return t}function G1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],W1);return t}function Jc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Wy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Jc(t,r,e);{const{left:n,right:v,info:w}=t;return Jc(n,Wy(v,r,e),w)}}function Ff(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Ff(t.left),Ff(t.right)]}}const J1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Ff(t.left),right:Ff(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Ff(t.left),right:Ff(t.right)}),priority:3}};function Z1(t){const r=t.operators.map(n=>{const v=J1[n];if(v==null)throw new ro(`No such operator: ${n}.`);return v});let e=Jc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Wy(e,t.operands[2+n],r[1+n]);return Ff(e)}function Q1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],e=>e.type==="infix"?Z1(e):e);return t}var Hu;let X1=(Hu=class{constructor(){he(this,"plugins");this.plugins={validate:[B1,V1],transform:[Gc,G1,Q1]}}static parse(r){return Hu.instance==null&&(Hu.instance=new Hu),Hu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=id(r,{startRule:"Preprocess"});e=id(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ro(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new ro(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Hu,"instance"),Hu);const Y1="0.17.0",eA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let tv=[],Qo=null;function tA(t){return tv=X1.parse(t),JSON.stringify(tv,null,"	")}async function rA(t){Qo==null||Qo.abort(),Qo=new Mn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Xp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Xp(e.val,!0),print:!1});break}}});try{await Qo.exec(tv)}catch(r){t.err(r)}}const sA=Object.freeze(Object.defineProperty({__proto__:null,exec:rA,parse:tA,samples:eA,version:Y1},Symbol.toStringTag,{value:"Module"}));function vs(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Oh=class Gy extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Gy)}};class nA extends Oh{constructor(r){super(`Internal Error. ${r}`,r)}}class so extends Oh{constructor(r,e){super(r,e)}}class Or extends Oh{constructor(r,e){super(r,e)}}class aA extends Or{constructor(r,e){super(r,e)}}var $f=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let Ju=class Jy{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Jy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Or(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const w=v.get(r);if(!w.isMutable)throw new Or(`Cannot assign to an immutable variable ${r}.`);w.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};$f([vs],Ju.prototype,"log",null);$f([vs],Ju.prototype,"onUpdated",null);$f([vs],Ju.prototype,"createChildScope",null);$f([vs],Ju.prototype,"get",null);$f([vs],Ju.prototype,"exists",null);$f([vs],Ju.prototype,"getAll",null);$f([vs],Ju.prototype,"add",null);$f([vs],Ju.prototype,"assign",null);const or={type:"null"},Li={type:"bool",value:!0},ki={type:"bool",value:!1},Ke=t=>({type:"num",value:t}),Fr=t=>({type:"str",value:t}),Jf=t=>({type:"bool",value:t}),Vv=t=>({type:"obj",value:t}),wn=t=>({type:"arr",value:t}),iA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),be=t=>({type:"fn",native:t}),lA=t=>({type:"return",value:t}),uA=()=>({type:"break",value:null}),fA=()=>({type:"continue",value:null}),oA=t=>t.type==="return"?t.value:t,Zy=(t,r)=>({type:"error",value:t,info:r});function Ni(t){if(t==null)throw new Or("Expect anything, but got nothing.")}function ua(t){if(t==null)throw new Or("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Or(`Expect boolean, but got ${t.type}.`)}function ff(t){if(t==null)throw new Or("Expect function, but got nothing.");if(t.type!=="fn")throw new Or(`Expect function, but got ${t.type}.`)}function Ms(t){if(t==null)throw new Or("Expect string, but got nothing.");if(t.type!=="str")throw new Or(`Expect string, but got ${t.type}.`)}function Ue(t){if(t==null)throw new Or("Expect number, but got nothing.");if(t.type!=="num")throw new Or(`Expect number, but got ${t.type}.`)}function ef(t){if(t==null)throw new Or("Expect object, but got nothing.");if(t.type!=="obj")throw new Or(`Expect object, but got ${t.type}.`)}function dh(t){if(t==null)throw new Or("Expect array, but got nothing.");if(t.type!=="arr")throw new Or(`Expect array, but got ${t.type}.`)}function up(t){return t.type==="obj"}function ud(t){return t.type==="arr"}function rv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function sv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>sv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function nv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>nv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=nv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function av(t){if(t===null)return or;if(typeof t=="boolean")return Jf(t);if(typeof t=="string")return Fr(t);if(typeof t=="number")return Ke(t);if(Array.isArray(t))return wn(t.map(r=>av(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,av(n));return Vv(r)}return or}function jo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(jo(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,w]of t.value)n.push(`${v}: ${jo(w,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const cA={help:Fr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Fr("0.16.0"),"Core:ai":Fr("kawaii"),"Core:not":be(([t])=>(ua(t),t.value?ki:Li)),"Core:eq":be(([t,r])=>(Ni(t),Ni(r),rv(t,r)?Li:ki)),"Core:neq":be(([t,r])=>(Ni(t),Ni(r),rv(t,r)?ki:Li)),"Core:and":be(([t,r])=>(ua(t),t.value?(ua(r),r.value?Li:ki):ki)),"Core:or":be(([t,r])=>(ua(t),t.value?Li:(ua(r),r.value?Li:ki))),"Core:add":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value+r.value))),"Core:sub":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value-r.value))),"Core:mul":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value*r.value))),"Core:pow":be(([t,r])=>{Ue(t),Ue(r);const e=t.value**r.value;if(isNaN(e))throw new Or("Invalid operation.");return Ke(e)}),"Core:div":be(([t,r])=>{Ue(t),Ue(r);const e=t.value/r.value;if(isNaN(e))throw new Or("Invalid operation.");return Ke(e)}),"Core:mod":be(([t,r])=>(Ue(t),Ue(r),Ke(t.value%r.value))),"Core:gt":be(([t,r])=>(Ue(t),Ue(r),t.value>r.value?Li:ki)),"Core:lt":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?Li:ki)),"Core:gteq":be(([t,r])=>(Ue(t),Ue(r),t.value>=r.value?Li:ki)),"Core:lteq":be(([t,r])=>(Ue(t),Ue(r),t.value<=r.value?Li:ki)),"Core:type":be(([t])=>(Ni(t),Fr(t.type))),"Core:to_str":be(([t])=>(Ni(t),Fr(jo(t)))),"Core:range":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?wn(Array.from({length:r.value-t.value+1},(e,n)=>Ke(n+t.value))):t.value>r.value?wn(Array.from({length:t.value-r.value+1},(e,n)=>Ke(t.value-n))):wn([t]))),"Core:sleep":be(async([t])=>(Ue(t),await new Promise(r=>setTimeout(r,t.value)),or)),"Util:uuid":be(()=>Fr(bc())),"Json:stringify":be(([t])=>(Ni(t),Fr(JSON.stringify(nv(t))))),"Json:parse":be(([t])=>{Ms(t);try{return av(JSON.parse(t.value))}catch{return Zy("not_json")}}),"Json:parsable":be(([t])=>{Ms(t);try{JSON.parse(t.value)}catch{return Jf(!1)}return Jf(!0)}),"Date:now":be(()=>Ke(Date.now())),"Date:year":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":be(([t])=>(t&&Ue(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":be(([t])=>(Ms(t),Ke(new Date(t.value).getTime()))),"Math:Infinity":Ke(1/0),"Math:E":Ke(Math.E),"Math:LN2":Ke(Math.LN2),"Math:LN10":Ke(Math.LN10),"Math:LOG2E":Ke(Math.LOG2E),"Math:LOG10E":Ke(Math.LOG10E),"Math:PI":Ke(Math.PI),"Math:SQRT1_2":Ke(Math.SQRT1_2),"Math:SQRT2":Ke(Math.SQRT2),"Math:abs":be(([t])=>(Ue(t),Ke(Math.abs(t.value)))),"Math:acos":be(([t])=>(Ue(t),Ke(Math.acos(t.value)))),"Math:acosh":be(([t])=>(Ue(t),Ke(Math.acosh(t.value)))),"Math:asin":be(([t])=>(Ue(t),Ke(Math.asin(t.value)))),"Math:asinh":be(([t])=>(Ue(t),Ke(Math.asinh(t.value)))),"Math:atan":be(([t])=>(Ue(t),Ke(Math.atan(t.value)))),"Math:atanh":be(([t])=>(Ue(t),Ke(Math.atanh(t.value)))),"Math:atan2":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.atan2(t.value,r.value)))),"Math:cbrt":be(([t])=>(Ue(t),Ke(Math.cbrt(t.value)))),"Math:ceil":be(([t])=>(Ue(t),Ke(Math.ceil(t.value)))),"Math:clz32":be(([t])=>(Ue(t),Ke(Math.clz32(t.value)))),"Math:cos":be(([t])=>(Ue(t),Ke(Math.cos(t.value)))),"Math:cosh":be(([t])=>(Ue(t),Ke(Math.cosh(t.value)))),"Math:exp":be(([t])=>(Ue(t),Ke(Math.exp(t.value)))),"Math:expm1":be(([t])=>(Ue(t),Ke(Math.expm1(t.value)))),"Math:floor":be(([t])=>(Ue(t),Ke(Math.floor(t.value)))),"Math:fround":be(([t])=>(Ue(t),Ke(Math.fround(t.value)))),"Math:hypot":be(([t])=>{dh(t);const r=[];for(const e of t.value)Ue(e),r.push(e.value);return Ke(Math.hypot(...r))}),"Math:imul":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.imul(t.value,r.value)))),"Math:log":be(([t])=>(Ue(t),Ke(Math.log(t.value)))),"Math:log1p":be(([t])=>(Ue(t),Ke(Math.log1p(t.value)))),"Math:log10":be(([t])=>(Ue(t),Ke(Math.log10(t.value)))),"Math:log2":be(([t])=>(Ue(t),Ke(Math.log2(t.value)))),"Math:max":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.max(t.value,r.value)))),"Math:min":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.min(t.value,r.value)))),"Math:pow":be(([t,r])=>(Ue(t),Ue(r),Ke(Math.pow(t.value,r.value)))),"Math:round":be(([t])=>(Ue(t),Ke(Math.round(t.value)))),"Math:sign":be(([t])=>(Ue(t),Ke(Math.sign(t.value)))),"Math:sin":be(([t])=>(Ue(t),Ke(Math.sin(t.value)))),"Math:sinh":be(([t])=>(Ue(t),Ke(Math.sinh(t.value)))),"Math:sqrt":be(([t])=>{Ue(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Or("Invalid operation.");return Ke(r)}),"Math:tan":be(([t])=>(Ue(t),Ke(Math.tan(t.value)))),"Math:tanh":be(([t])=>(Ue(t),Ke(Math.tanh(t.value)))),"Math:trunc":be(([t])=>(Ue(t),Ke(Math.trunc(t.value)))),"Math:rnd":be(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ke(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ke(Math.random())),"Math:gen_rng":be(([t])=>{if(Ni(t),t.type!=="num"&&t.type!=="str")return or;const r=uo(t.value.toString());return be(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ke(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ke(r()))}),"Num:to_hex":be(([t])=>(Ue(t),Fr(t.value.toString(16)))),"Num:from_hex":be(([t])=>(Ms(t),Ke(parseInt(t.value,16)))),"Str:lf":Fr(`
`),"Str:lt":be(([t,r])=>(Ms(t),Ms(r),t.value<r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:gt":be(([t,r])=>(Ms(t),Ms(r),t.value>r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:from_codepoint":be(([t])=>(Ue(t),Fr(String.fromCodePoint(t.value)))),"Obj:keys":be(([t])=>(ef(t),wn(Array.from(t.value.keys()).map(r=>Fr(r))))),"Obj:vals":be(([t])=>(ef(t),wn(Array.from(t.value.values())))),"Obj:kvs":be(([t])=>(ef(t),wn(Array.from(t.value.entries()).map(([r,e])=>wn([Fr(r),e]))))),"Obj:get":be(([t,r])=>(ef(t),Ms(r),t.value.get(r.value)??or)),"Obj:set":be(([t,r,e])=>(ef(t),Ms(r),Ni(e),t.value.set(r.value,e),or)),"Obj:has":be(([t,r])=>(ef(t),Ms(r),Jf(t.value.has(r.value)))),"Obj:copy":be(([t])=>(ef(t),Vv(new Map(t.value)))),"Async:interval":be(async([t,r,e],n)=>{Ue(t),ff(r),e&&(ua(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),be(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":be(async([t,r],e)=>{Ue(t),ff(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),be(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},fd={num:{to_str:t=>be(async(r,e)=>Fr(t.value.toString()))},str:{to_num:t=>be(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?or:Ke(n)}),len:t=>Ke(oo(t.value)),replace:t=>be(async([r,e],n)=>(Ms(r),Ms(e),Fr(t.value.split(r.value).join(e.value)))),index_of:t=>be(async([r],e)=>(Ms(r),Ke(ho(t.value,r.value)))),incl:t=>be(async([r],e)=>(Ms(r),t.value.includes(r.value)?Li:ki)),trim:t=>be(async(r,e)=>Fr(t.value.trim())),upper:t=>be(async(r,e)=>Fr(t.value.toUpperCase())),lower:t=>be(async(r,e)=>Fr(t.value.toLowerCase())),split:t=>be(async([r],e)=>(r&&Ms(r),wn(r?t.value.split(r?r.value:"").map(n=>Fr(n)):zs(t.value).map(n=>Fr(n))))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),Fr(co(t.value,r.value,e.value)))),pick:t=>be(async([r],e)=>{Ue(r);const v=zs(t.value)[r.value];return v?Fr(v):or}),codepoint_at:t=>be(([r],e)=>{Ue(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?or:Ke(n)})},arr:{len:t=>Ke(t.value.length),push:t=>be(async([r],e)=>(Ni(r),t.value.push(r),t)),unshift:t=>be(async([r],e)=>(Ni(r),t.value.unshift(r),t)),pop:t=>be(async(r,e)=>t.value.pop()??or),shift:t=>be(async(r,e)=>t.value.shift()??or),concat:t=>be(async([r],e)=>(dh(r),wn(t.value.concat(r.value)))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),wn(t.value.slice(r.value,e.value)))),join:t=>be(async([r],e)=>(r&&Ms(r),Fr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>be(async([r],e)=>{ff(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Ke(w)]));return wn(await Promise.all(n))}),filter:t=>be(async([r],e)=>{ff(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Ke(v)]);ua(_),_.value&&n.push(w)}return wn(n)}),reduce:t=>be(async([r,e],n)=>{ff(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Ke(_)])}return w}),find:t=>be(async([r],e)=>{ff(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Ke(n)]);if(ua(w),w.value)return v}return or}),incl:t=>be(async([r],e)=>(Ni(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?ki:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Li:ki)),reverse:t=>be(async(r,e)=>(t.value.reverse(),or)),copy:t=>be(async(r,e)=>wn([...t.value])),sort:t=>be(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);Ue(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return ff(r),dh(t),t.value=await n(t.value,r),t})},error:{name:t=>Fr(t.value),info:t=>t.info??or}};function hA(t,r){if(Object.hasOwn(fd,t.type)){const e=fd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Or(`No such prop (${r}) in ${t.type}.`)}else throw new Or(`Cannot read prop of ${t.type}. (reading ${r})`)}const pA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ga=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const Qy=300,vA=Qy-1;let En=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const n={print:be(([v])=>{Ni(v),this.opts.out&&this.opts.out(v)}),readline:be(async v=>{const w=v[0];if(Ms(w),this.opts.in==null)return or;const _=await this.opts.in(w.value);return Fr(_)})};this.vars=Object.fromEntries(Object.entries({...r,...cA,...n}).map(([v,w])=>[v,pA.const(w)])),this.scope=new Ju([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Zy("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Oh?this.opts.err(r):this.opts.err(new nA(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??or;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],{isMutable:!0,value:e[w]});const v=r.scope.createChildScope(n);return oA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return or;if(this.stepCount%Qy===vA&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Or("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);ff(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(ua(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(ua(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return or}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(rv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):or}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return or}case"for":{if(r.times){const n=await this._eval(r.times,e);Ue(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ue(n),Ue(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ke(w)}]])));if(_.type==="break")break;if(_.type==="return")return _}}return or}case"each":{const n=await this._eval(r.items,e);dh(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(w.type==="break")break;if(w.type==="return")return w}return or}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),or}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),or}case"addAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,Ke(n.value+v.value)),or}case"subAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,Ke(n.value-v.value)),or}case"null":return or;case"bool":return Jf(r.value);case"num":return Ke(r.value);case"str":return Fr(r.value);case"arr":return wn(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Vv(n)}case"prop":{const n=await this._eval(r.target,e);return up(n)?n.value.has(r.name)?n.value.get(r.name):or:hA(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(ud(n)){Ue(v);const w=n.value[v.value];if(w===void 0)throw new aA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}else{if(up(n))return Ms(v),n.value.has(v.value)?n.value.get(v.value):or;throw new Or(`Cannot read prop (${jo(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return ua(n),Jf(!n.value)}case"fn":return iA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Jf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);n+=jo(w)}return Fr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),lA(n)}case"break":return this.log("block:break",{scope:e.name}),uA();case"continue":return this.log("block:continue",{scope:e.name}),fA();case"ns":return or;case"meta":return or;case"and":{const n=await this._eval(r.left,e);if(ua(n),n.value){const v=await this._eval(r.right,e);return ua(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(ua(n),n.value)return n;{const v=await this._eval(r.right,e);return ua(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=or;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),w=await this._eval(e.index,r);if(ud(v))Ue(w),v.value[w.value]=n;else if(up(v))Ms(w),v.value.set(w.value,n);else throw new Or(`Cannot read prop (${jo(w)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ef(v),v.value.set(e.name,n)}else throw new Or("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ga([vs],En.prototype,"exec",null);ga([vs],En.prototype,"execFn",null);ga([vs],En.prototype,"execFnSimple",null);ga([vs],En.prototype,"handleError",null);ga([vs],En.prototype,"log",null);ga([vs],En.prototype,"collectNs",null);ga([vs],En.prototype,"collectNsMember",null);ga([vs],En.prototype,"_fn",null);ga([vs],En.prototype,"_eval",null);ga([vs],En.prototype,"_run",null);ga([vs],En.prototype,"registerAbortHandler",null);ga([vs],En.prototype,"unregisterAbortHandler",null);ga([vs],En.prototype,"abort",null);ga([vs],En.prototype,"assign",null);ga([vs],En,"collectMetadata",null);function gA(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Zf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Zf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}gA(Zf,Error);function fp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Zf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=fp("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+fp("",v.column-1," ")+fp("",H,"^")}else r+=`
 at `+_}return r};Zf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function od(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:sn,Main:Kr},w=sn,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",tr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Me="eval",Oe="exists",Ae="`",ke='"',$e="'",Je='\\"',rt="\\'",Ye="true",Qe="false",lt="null",$t=";",Nt="@",Ct="@(",_t=`\r
`,ot=/^[A-Z0-9_:]/i,ks=/^[^`{]/,as=/^[{}`]/,Xr=/^[+\-]/,xt=/^[1-9]/,It=/^[0-9]/,yn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,rr=/^[ \t]/,Dt=Ds(),Br=pe("//",!1),Sn=pe("/*",!1),Pt=pe("*/",!1),ut=pe("(",!1),kr=pe(")",!1),qt=pe("::",!1),st=pe("{",!1),Lt=pe("}",!1),ms=pe("###",!1),Ht=pe("let",!1),Ut=pe(":",!1),qr=pe("=",!1),Na=pe("var",!1),Mr=pe("<:",!1),is=pe("#[",!1),Ns=pe("]",!1),ft=pe("each",!1),Tt=pe(",",!1),Ks=pe("for",!1),Er=pe("return",!1),Sr=er([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=pe("loop",!1),Fa=pe("break",!1),Ji=pe("continue",!1),Zi=pe("+=",!1),Ta=pe("-=",!1),Oa=pe("\\",!1),Qi=pe("||",!1),Xi=pe("&&",!1),Yi=pe("==",!1),el=pe("!=",!1),Nn=pe("<=",!1),Vs=pe(">=",!1),Fn=pe("<",!1),Ia=pe(">",!1),tl=pe("+",!1),ja=pe("-",!1),Fs=pe("*",!1),rl=pe("^",!1),sl=pe("/",!1),nl=pe("%",!1),$s=pe("!",!1),Ts=pe("[",!1),Tn=pe(".",!1),Ws=pe("if",!1),Gs=pe("elif",!1),al=pe("else",!1),Js=pe("match",!1),ls=pe("=>",!1),Os=pe("eval",!1),xr=pe("exists",!1),Zs=pe("`",!1),Qs=er(["`","{"],!0,!1),Xs=er(["{","}","`"],!1,!1),us=pe('"',!1),Ys=pe("'",!1),Is=pe('\\"',!1),Ra=pe("\\'",!1),Yt=er(["+","-"],!1,!1),Da=er([["1","9"]],!1,!1),dr=er([["0","9"]],!1,!1),il=pe("true",!1),en=pe("false",!1),ll=pe("null",!1),js=pe(";",!1),ul=pe("@",!1),On=pe("@(",!1),fl=er([["A","Z"],"_"],!1,!0),La=er([["A","Z"],["0","9"],"_"],!1,!0),ol=pe(`\r
`,!1),cl=er(["\r",`
`],!1,!1),Ha=er([" ","	","\r",`
`],!1,!1),hl=er([" ","	"],!1,!1),Ua=function(s){return s.join("")},pl=function(){return le()},Ba=function(){return le()},vl=function(){return""},qa=function(){return""},gl=function(s){return s??[]},In=function(s,u){return u},dl=function(s,u){return[s,...u]},jn=function(s,u){return u},yl=function(s,u){return[s,...u]},za=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},Cl=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},_l=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Ka=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Tl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Rn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Va=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Wa=function(s,u){return{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},Dn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},zl=function(s){return p("propChain",{name:s})},Kl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ga=function(s,u){return{cond:s,then:u}},Ja=function(s){return s},Za=function(s,u,d){return{q:u,a:d}},Qa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Xa=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},Ya=function(s){return s.join("")},ei=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ti=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},ri=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},si=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ni=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ai=function(){return p("null",{})},Ln=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},Hn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},ii=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},li=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},ui=function(s){return s},lu=function(s){return p("arr",{value:s})},fi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},tn=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},zr=function(s){return p("block",{statements:s??[]})},f=0,Y=0,T=[{line:1,column:1}],j=0,bt=[],F=0,q={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function le(){return t.substring(Y,f)}function D(){return rn(Y,f)}function uu(s,u){throw u=u!==void 0?u:rn(Y,f),bs(s,u)}function pe(s,u){return{type:"literal",text:s,ignoreCase:u}}function er(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function oi(s){var u=T[s],d;if(u)return u;for(d=s-1;!T[d];)d--;for(u=T[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return T[s]=u,u}function rn(s,u,d){var h=oi(s),x=oi(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return d&&n&&typeof n.offset=="function"&&(m.start=n.offset(m.start),m.end=n.offset(m.end)),m}function R(s){f<j||(f>j&&(j=f,bt=[]),bt.push(s))}function bs(s,u){return new Zf(s,null,null,u)}function Un(s,u,d){return new Zf(Zf.buildMessage(s,u),s,u,d)}function sn(){var s,u,d,h=f*77+0,x=q[h];if(x)return f=x.nextPos,x.result;for(s=f,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ua(u),s=u,q[h]={nextPos:f,result:s},s}function As(){var s,u,d=f*77+1,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=un(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=f,u=Zn(),u!==e&&(Y=s,u=Ba()),s=u,s===e&&(s=et(),s===e&&(t.length>f?(s=t.charAt(f),f++):(s=e,F===0&&R(Dt))))),q[d]={nextPos:f,result:s},s)}function et(){var s,u,d,h,x,m,C=f*77+2,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,2)===_?(u=_,f+=2):(u=e,F===0&&R(Br)),u!==e){for(d=[],h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,m=a(),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=vl()}else f=s,s=e;if(s===e)if(s=f,t.substr(f,2)===P?(u=P,f+=2):(u=e,F===0&&R(Sn)),u!==e){for(d=[],h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(Pt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.substr(f,2)===E?(m=E,f+=2):(m=e,F===0&&R(Pt)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt)),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);t.substr(f,2)===E?(h=E,f+=2):(h=e,F===0&&R(Pt)),h!==e?(Y=s,s=qa()):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Kr(){var s,u,d,h,x,m=f*77+3,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();for(d=nn(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),q[m]={nextPos:f,result:s},s}function nn(){var s,u,d,h,x,m,C,A,M=f*77+4,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Xe(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Xe(),A!==e?(Y=h,h=In(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=dl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Nr(){var s,u,d,h,x,m,C,A,M=f*77+5,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=fs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=fs(),A!==e?(Y=h,h=jn(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=yl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function br(){var s,u,d,h,x,m,C,A,M=f*77+6,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Cs(),u!==e){for(d=[],h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=za(u,A)):(f=h,h=e)}else f=h,h=e;for(;h!==e;){for(d.push(h),h=f,x=[],m=$();m!==e;)x.push(m),m=$();if(m=y(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=Cs(),A!==e?(Y=h,h=za(u,A)):(f=h,h=e)}else f=h,h=e}Y=s,s=wl(u,d)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Xe(){var s,u=f*77+7,d=q[u];return d?(f=d.nextPos,d.result):(s=hi(),s===e&&(s=fu(),s===e&&(s=Cs())),q[u]={nextPos:f,result:s},s)}function fs(){var s,u=f*77+8,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=tt(),s===e&&(s=hi())),q[u]={nextPos:f,result:s},s)}function Cs(){var s,u=f*77+9,d=q[u];return d?(f=d.nextPos,d.result):(s=pi(),s===e&&(s=tt(),s===e&&(s=ou(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Wr(),s===e&&(s=vi(),s===e&&(s=pu(),s===e&&(s=gi(),s===e&&(s=Gr(),s===e&&(s=Bn(),s===e&&(s=Ve()))))))))))),q[u]={nextPos:f,result:s},s)}function Ve(){var s,u=f*77+10,d=q[u];return d?(f=d.nextPos,d.result):(s=di(),s===e&&(s=Ls()),q[u]={nextPos:f,result:s},s)}function Ls(){var s,u=f*77+11,d=q[u];return d?(f=d.nextPos,d.result):(s=mi(),s===e&&(s=wu(),s===e&&(s=yi(),s===e&&(s=ci()))),q[u]={nextPos:f,result:s},s)}function ci(){var s,u,d,h,x,m,C=f*77+12,A=q[C];if(A)return f=A.nextPos,A.result;if(s=ln(),s===e&&(s=Vn(),s===e&&(s=Wn(),s===e&&(s=un(),s===e&&(s=Zn(),s===e&&(s=bi(),s===e&&(s=ta(),s===e&&(s=sa(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=zn(),s===e&&(s=Gn(),s===e))))))))))))if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=ml(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Vr(){var s,u=f*77+13,d=q[u];return d?(f=d.nextPos,d.result):(s=bi(),s===e&&(s=Zn(),s===e&&(s=ta(),s===e&&(s=_s(),s===e&&(s=sr(),s===e&&(s=sa()))))),q[u]={nextPos:f,result:s},s)}function hi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+14,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===H?(u=H,f+=2):(u=e,F===0&&R(qt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(f)===123?(m=B,f++):(m=e,F===0&&R(st)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Nr(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(f)===125?(I=J,f++):(I=e,F===0&&R(Lt)),I!==e?(Y=s,s=$l(h,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function fu(){var s,u,d,h,x,m,C=f*77+15,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ae(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Vr(),m!==e?(Y=s,s=xl(h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===we?(u=we,f+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Vr(),h!==e?(Y=s,s=bl(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function pi(){var s,u,d,h,x,m,C,A,M,I=f*77+16,U=q[I];if(U)return f=U.nextPos,U.result;if(s=f,t.substr(f,3)===ue?(u=ue,f+=3):(u=e,F===0&&R(Ht)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=Pe,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Al(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===G?(u=G,f+=3):(u=e,F===0&&R(Na)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===58?(C=oe,f++):(C=e,F===0&&R(Ut)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?x=M:(f=x,x=e)}else f=x,x=e;for(x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===61?(C=Pe,f++):(C=e,F===0&&R(qr)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ve(),M!==e?(Y=s,s=Cl(h,x,M)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[I]={nextPos:f,result:s},s}function ou(){var s,u,d,h,x=f*77+17,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,2)===V?(u=V,f+=2):(u=e,F===0&&R(Mr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=_l(h)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function cu(){var s,u,d,h,x,m,C,A=f*77+18,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,2)===Z?(u=Z,f+=2):(u=e,F===0&&R(is)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ae(),h!==e){for(x=f,m=[],C=l();C!==e;)m.push(C),C=l();for(C=Vr(),C!==e?x=C:(f=x,x=e),x===e&&(x=null),m=[],C=l();C!==e;)m.push(C),C=l();t.charCodeAt(f)===93?(C=Q,f++):(C=e,F===0&&R(Ns)),C!==e?(Y=s,s=Pl(h,x)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+19,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.substr(f,4)===X?(u=X,f+=4):(u=e,F===0&&R(ft)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ae(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Tt)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(f)===41?(K=O,f++):(K=e,F===0&&R(kr)),K!==e){for(se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Ne=b(),Ne!==e?(Y=s,s=kl(C,U,Ne)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,4)===X?(u=X,f+=4):(u=e,F===0&&R(ft)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=Ve(),I!==e){if(U=[],K=l(),K!==e)for(;K!==e;)U.push(K),K=l();else U=e;U!==e?(K=b(),K!==e?(Y=s,s=Ml(m,I,K)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function vi(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt=f*77+20,vt=q[pt];if(vt)return f=vt.nextPos,vt.result;if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(f,3)===ue?(x=ue,f+=3):(x=e,F===0&&R(Ht)),x!==e){if(m=[],C=l(),C!==e)for(;C!==e;)m.push(C),C=l();else m=e;if(m!==e)if(C=ae(),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=f,t.charCodeAt(f)===61?(I=Pe,f++):(I=e,F===0&&R(qr)),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();K=Ve(),K!==e?(Y=M,M=El(C,K)):(f=M,M=e)}else f=M,M=e;for(M===e&&(M=null),t.charCodeAt(f)===44?(I=ee,f++):(I=e,F===0&&R(Tt)),I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();if(K=Ve(),K!==e)if(t.charCodeAt(f)===41?(se=O,f++):(se=e,F===0&&R(kr)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();ve=b(),ve!==e?(Y=s,s=Sl(C,M,K,ve)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(f,3)===ue?(h=ue,f+=3):(h=e,F===0&&R(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(A=f,t.charCodeAt(f)===61?(M=Pe,f++):(M=e,F===0&&R(qr)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(f=A,A=e)}else f=A,A=e;for(A===e&&(A=null),t.charCodeAt(f)===44?(M=ee,f++):(M=e,F===0&&R(Tt)),M===e&&(M=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(K=[],se=l(),se!==e)for(;se!==e;)K.push(se),se=l();else K=e;K!==e?(se=b(),se!==e?(Y=s,s=Ka(m,A,U,se)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===40?(h=N,f++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,t.substr(f,3)===ne?(u=ne,f+=3):(u=e,F===0&&R(Ks)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Tl(h,m)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e}}return q[pt]={nextPos:f,result:s},s}function hu(){var s,u,d,h,x,m=f*77+21,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,6)===ie?(u=ie,f+=6):(u=e,F===0&&R(Er)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Ol(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function pu(){var s,u,d,h,x,m,C,A,M=f*77+22,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Te?(u=Te,f+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Il(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function gi(){var s,u,d,h,x=f*77+23,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Le?(u=Le,f+=5):(u=e,F===0&&R(Fa)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=jl()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Gr(){var s,u,d,h,x=f*77+24,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,8)===_e?(u=_e,f+=8):(u=e,F===0&&R(Ji)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=Rn()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function Bn(){var s,u,d,h,x,m,C=f*77+25,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(f,2)===at?(h=at,f+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(f,2)===wt?(h=wt,f+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(f)===61?(h=Pe,f++):(h=e,F===0&&R(qr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function di(){var s,u,d,h,x,m,C,A,M=f*77+26,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=Ls(),u!==e){for(d=[],h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Va(u,m,A)):(f=h,h=e)}else f=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=f,x=[],m=Jr();m!==e;)x.push(m),m=Jr();if(m=qn(),m!==e){for(C=[],A=Jr();A!==e;)C.push(A),A=Jr();A=Ls(),A!==e?(Y=h,h=Va(u,m,A)):(f=h,h=e)}else f=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(f=s,s=e)}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Jr(){var s,u,d,h=f*77+27,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=fr,f++):(u=e,F===0&&R(Oa)),u!==e?(d=y(),d!==e?(u=[u,d],s=u):(f=s,s=e)):(f=s,s=e),s===e&&(s=$()),q[h]={nextPos:f,result:s},s)}function qn(){var s,u,d=f*77+28,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===mt?(u=mt,f+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(f,2)===dt?(u=dt,f+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(f,2)===Ze?(u=Ze,f+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(f,2)===yt?(u=yt,f+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(f,2)===Jt?(u=Jt,f+=2):(u=e,F===0&&R(Nn)),u===e&&(t.substr(f,2)===Zt?(u=Zt,f+=2):(u=e,F===0&&R(Vs)),u===e&&(t.charCodeAt(f)===60?(u=ht,f++):(u=e,F===0&&R(Fn)),u===e&&(t.charCodeAt(f)===62?(u=Ir,f++):(u=e,F===0&&R(Ia)),u===e&&(t.charCodeAt(f)===43?(u=Qt,f++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(f)===45?(u=Pr,f++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(f)===42?(u=Bt,f++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(f)===94?(u=Ar,f++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(f)===47?(u=Ur,f++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(f)===37?(u=tr,f++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,q[d]={nextPos:f,result:s},s)}function zn(){var s,u,d,h=f*77+29,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===33?(u=jr,f++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function yi(){var s,u,d,h,x=f*77+30,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,u=ci(),u!==e){if(d=[],h=Kn(),h===e&&(h=wi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Kn(),h===e&&(h=wi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Wa(u,d)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Kn(){var s,u,d,h,x,m,C=f*77+31,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===40?(u=N,f++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e?(Y=s,s=Ul(h)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function vu(){var s,u,d,h,x,m,C=f*77+32,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=Ve(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=Dn(u,m)):(f=h,h=e)):(f=h,h=e);Y=s,s=Bl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function wi(){var s,u,d,h,x,m,C=f*77+33,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Hs(){var s,u,d,h=f*77+34,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===46?(u=$r,f++):(u=e,F===0&&R(Tn)),u!==e?(d=ae(),d!==e?(Y=s,s=zl(d)):(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function mi(){var s,u,d,h,x,m,C,A,M,I,U=f*77+35,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===W?(u=W,f+=2):(u=e,F===0&&R(Ws)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(C=f,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=$i(),M!==e?C=M:(f=C,C=e)):(f=C,C=e),C===e&&(C=null),A=f,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=gu(),I!==e?A=I:(f=A,A=e)):(f=A,A=e),A===e&&(A=null),Y=s,s=Kl(h,m,C,A)}else f=s,s=e;else f=s,s=e}else f=s,s=e;else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function $i(){var s,u,d,h,x,m,C=f*77+36,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=an(),u!==e){for(d=[],h=f,x=[],m=l();m!==e;)x.push(m),m=l();for(m=an(),m!==e?h=m:(f=h,h=e);h!==e;){for(d.push(h),h=f,x=[],m=l();m!==e;)x.push(m),m=l();m=an(),m!==e?h=m:(f=h,h=e)}Y=s,s=Vl(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function an(){var s,u,d,h,x,m,C,A=f*77+37,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,t.substr(f,4)===re?(u=re,f+=4):(u=e,F===0&&R(Gs)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=b(),C!==e?(Y=s,s=Ga(x,C)):(f=s,s=e)}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[A]={nextPos:f,result:s},s}function gu(){var s,u,d,h,x,m=f*77+38,C=q[m];if(C)return f=C.nextPos,C.result;if(s=f,t.substr(f,4)===fe?(u=fe,f+=4):(u=e,F===0&&R(al)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Ja(x)):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[m]={nextPos:f,result:s},s}function ln(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt,vt,mu=f*77+39,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.substr(f,5)===xe?(u=xe,f+=5):(u=e,F===0&&R(Js)),u!==e)if(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();if(t.charCodeAt(f)===123?(C=B,f++):(C=e,F===0&&R(st)),C!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();Y=I,I=Za(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=f,U=Ve(),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();Y=I,I=Za(x,U,ve)}else f=I,I=e}else f=I,I=e}else f=I,I=e;else M=e;if(M!==e){if(I=f,t.charCodeAt(f)===42?(U=Bt,f++):(U=e,F===0&&R(Fs)),U!==e){for(K=[],se=l();se!==e;)K.push(se),se=l();if(t.substr(f,2)===ce?(se=ce,f+=2):(se=e,F===0&&R(ls)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();if(ve=b(),ve!==e){for(pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();I=ve}else f=I,I=e}else f=I,I=e}else f=I,I=e;for(I===e&&(I=null),U=[],K=l();K!==e;)U.push(K),K=l();t.charCodeAt(f)===125?(K=J,f++):(K=e,F===0&&R(Lt)),K!==e?(Y=s,s=Qa(x,M,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function Vn(){var s,u,d,h,x,m,C,A,M=f*77+40,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,t.substr(f,4)===Me?(u=Me,f+=4):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(f)===123?(h=B,f++):(h=e,F===0&&R(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=br(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();t.charCodeAt(f)===125?(A=J,f++):(A=e,F===0&&R(Lt)),A!==e?(Y=s,s=Wl(m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[M]={nextPos:f,result:s},s}function Wn(){var s,u,d,h,x=f*77+41,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,t.substr(f,6)===Oe?(u=Oe,f+=6):(u=e,F===0&&R(xr)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Gn(),h!==e?(Y=s,s=Gl(h)):(f=s,s=e)):(f=s,s=e)}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function Gn(){var s,u,d=f*77+42,h=q[d];return h?(f=h.nextPos,h.result):(s=f,u=o(),u!==e&&(Y=s,u=Xa(u)),s=u,q[d]={nextPos:f,result:s},s)}function un(){var s,u,d,h,x,m,C=f*77+43,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===96?(u=Ae,f++):(u=e,F===0&&R(Zs)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===96?(m=Ae,f++):(m=e,F===0&&R(Zs)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Jn(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===96?(h=Ae,f++):(h=e,F===0&&R(Zs)),h!==e?(Y=s,s=Jl(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Jn(){var s,u,d,h,x,m,C=f*77+44,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?s=h:(f=s,s=e)}else f=s,s=e}else f=s,s=e;if(s===e){if(s=f,u=[],d=fn(),d!==e)for(;d!==e;)u.push(d),d=fn();else u=e;u!==e&&(Y=s,u=Ya(u)),s=u}return q[C]={nextPos:f,result:s},s}function fn(){var s,u=f*77+45,d=q[u];return d?(f=d.nextPos,d.result):(s=xi(),s===e&&(ks.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Qs))),q[u]={nextPos:f,result:s},s)}function xi(){var s,u,d,h=f*77+46,x=q[h];return x?(f=x.nextPos,x.result):(s=f,t.charCodeAt(f)===92?(u=fr,f++):(u=e,F===0&&R(Oa)),u!==e?(as.test(t.charAt(f))?(d=t.charAt(f),f++):(d=e,F===0&&R(Xs)),d!==e?s=d:(f=s,s=e)):(f=s,s=e),q[h]={nextPos:f,result:s},s)}function Zn(){var s,u,d,h,x,m,C=f*77+47,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===34?(u=ke,f++):(u=e,F===0&&R(us)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===34?(m=ke,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ei(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===34?(m=ke,f++):(m=e,F===0&&R(us)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Qn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ei(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===34?(h=ke,f++):(h=e,F===0&&R(us)),h!==e?(Y=s,s=Zl(d)):(f=s,s=e)}else f=s,s=e;if(s===e)if(s=f,t.charCodeAt(f)===39?(u=$e,f++):(u=e,F===0&&R(Ys)),u!==e){for(d=[],h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=f,F++,t.charCodeAt(f)===39?(m=$e,f++):(m=e,F===0&&R(Ys)),F--,m===e?x=void 0:(f=x,x=e),x!==e?(m=Xn(),m===e&&(t.length>f?(m=t.charAt(f),f++):(m=e,F===0&&R(Dt))),m!==e?(Y=h,h=ti(m)):(f=h,h=e)):(f=h,h=e);t.charCodeAt(f)===39?(h=$e,f++):(h=e,F===0&&R(Ys)),h!==e?(Y=s,s=Ql(d)):(f=s,s=e)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Qn(){var s,u,d=f*77+48,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===Je?(u=Je,f+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,q[d]={nextPos:f,result:s},s)}function Xn(){var s,u,d=f*77+49,h=q[d];return h?(f=h.nextPos,h.result):(s=f,t.substr(f,2)===rt?(u=rt,f+=2):(u=e,F===0&&R(Ra)),u!==e&&(Y=s,u=ri()),s=u,q[d]={nextPos:f,result:s},s)}function bi(){var s,u=f*77+50,d=q[u];return d?(f=d.nextPos,d.result):(s=Yn(),s===e&&(s=ea()),q[u]={nextPos:f,result:s},s)}function Yn(){var s,u,d,h,x,m,C=f*77+51,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(Da)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(f)===46?(h=$r,f++):(h=e,F===0&&R(Tn)),h!==e){if(x=[],It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),It.test(t.charAt(f))?(m=t.charAt(f),f++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(f=s,s=e)}else f=s,s=e;else f=s,s=e}else f=s,s=e;if(s===e)if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(f)===46?(d=$r,f++):(d=e,F===0&&R(Tn)),d!==e){if(h=[],It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),It.test(t.charAt(f))?(x=t.charAt(f),f++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=si()):(f=s,s=e)}else f=s,s=e;else f=s,s=e;return q[C]={nextPos:f,result:s},s}function ea(){var s,u,d,h,x=f*77+52,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),xt.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(Da)),u!==e){if(d=[],It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),It.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(f=s,s=e)}else f=s,s=e;return s===e&&(s=f,Xr.test(t.charAt(f))?(t.charAt(f),f++):F===0&&R(Yt),It.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(f=s,s=e)),q[x]={nextPos:f,result:s},s}function ta(){var s,u=f*77+53,d=q[u];return d?(f=d.nextPos,d.result):(s=du(),s===e&&(s=ra()),q[u]={nextPos:f,result:s},s)}function du(){var s,u,d,h,x=f*77+54,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===Ye?(u=Ye,f+=4):(u=e,F===0&&R(il)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ni()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function ra(){var s,u,d,h,x=f*77+55,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,5)===Qe?(u=Qe,f+=5):(u=e,F===0&&R(en)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ru()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function sa(){var s,u,d,h,x=f*77+56,m=q[x];return m?(f=m.nextPos,m.result):(s=f,t.substr(f,4)===lt?(u=lt,f+=4):(u=e,F===0&&R(ll)),u!==e?(d=f,F++,ot.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(Sr)),F--,h===e?d=void 0:(f=d,d=e),d!==e?(Y=s,s=ai()):(f=s,s=e)):(f=s,s=e),q[x]={nextPos:f,result:s},s)}function wr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+57,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Ve(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=Ln(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=su(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function yu(){var s,u,d,h,x,m,C,A,M,I,U=f*77+58,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Ve(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=Hn(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function na(){var s,u,d,h,x,m,C,A=f*77+59,M=q[A];if(M)return f=M.nextPos,M.result;if(s=f,u=ae(),u!==e){for(d=f,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e){for(m=[],C=l();C!==e;)m.push(C),C=l();C=We(),C!==e?d=C:(f=d,d=e)}else f=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else f=s,s=e;return q[A]={nextPos:f,result:s},s}function Ai(){var s,u,d,h,x,m,C=f*77+60,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=na(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=na(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=ii(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function tt(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve,pt,vt,mu=f*77+61,aa=q[mu];if(aa)return f=aa.nextPos,aa.result;if(s=f,t.charCodeAt(f)===64?(u=Nt,f++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ae(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(f)===40?(m=N,f++):(m=e,F===0&&R(ut)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(A=Ai(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(f)===41?(I=O,f++):(I=e,F===0&&R(kr)),I!==e){for(U=f,K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===58?(se=oe,f++):(se=e,F===0&&R(Ut)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();ve=We(),ve!==e?U=ve:(f=U,U=e)}else f=U,U=e;for(U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();if(t.charCodeAt(f)===123?(se=B,f++):(se=e,F===0&&R(st)),se!==e){for(Ne=[],ve=l();ve!==e;)Ne.push(ve),ve=l();for(ve=br(),ve===e&&(ve=null),pt=[],vt=l();vt!==e;)pt.push(vt),vt=l();t.charCodeAt(f)===125?(vt=J,f++):(vt=e,F===0&&R(Lt)),vt!==e?(Y=s,s=iu(d,h,x,A,U,ve)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[mu]={nextPos:f,result:s},s}function wu(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=f*77+62,ve=q[Ne];if(ve)return f=ve.nextPos,ve.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(On)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ai(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=f,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===58?(M=oe,f++):(M=e,F===0&&R(Ut)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?C=U:(f=C,C=e)}else f=C,C=e;for(C===e&&(C=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(f)===123?(M=B,f++):(M=e,F===0&&R(st)),M!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=br(),U===e&&(U=null),K=[],se=l();se!==e;)K.push(se),se=l();t.charCodeAt(f)===125?(se=J,f++):(se=e,F===0&&R(Lt)),se!==e?(Y=s,s=li(h,C,U)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[Ne]={nextPos:f,result:s},s}function _s(){var s,u,d,h,x,m,C,A,M,I,U=f*77+63,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.charCodeAt(f)===91?(u=Xt,f++):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=ui(m)}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=Vr(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();for(t.charCodeAt(f)===44?(A=ee,f++):(A=e,F===0&&R(Tt)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();Y=x,x=ui(m)}else f=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===93?(m=Q,f++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(f=s,s=e)}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function sr(){var s,u,d,h,x,m,C,A,M,I,U,K,se,Ne,ve=f*77+64,pt=q[ve];if(pt)return f=pt.nextPos,pt.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=fi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;for(;x!==e;)if(h.push(x),x=f,m=ae(),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.charCodeAt(f)===58?(A=oe,f++):(A=e,F===0&&R(Ut)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=Vr(),I!==e){for(U=[],K=l();K!==e;)U.push(K),K=l();for(t.charCodeAt(f)===44?(K=ee,f++):(K=e,F===0&&R(Tt)),K===e&&(t.charCodeAt(f)===59?(K=$t,f++):(K=e,F===0&&R(js))),K===e&&(K=null),se=[],Ne=l();Ne!==e;)se.push(Ne),Ne=l();Y=x,x=fi(m,I)}else f=x,x=e;else f=x,x=e}else f=x,x=e}else f=x,x=e;t.charCodeAt(f)===125?(x=J,f++):(x=e,F===0&&R(Lt)),x!==e?(Y=s,s=c(h)):(f=s,s=e)}else f=s,s=e;return q[ve]={nextPos:f,result:s},s}function We(){var s,u=f*77+65,d=q[u];return d?(f=d.nextPos,d.result):(s=Ci(),s===e&&(s=Ie()),q[u]={nextPos:f,result:s},s)}function Ci(){var s,u,d,h,x,m,C,A,M,I,U=f*77+66,K=q[U];if(K)return f=K.nextPos,K.result;if(s=f,t.substr(f,2)===Ct?(u=Ct,f+=2):(u=e,F===0&&R(On)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(f)===41?(m=O,f++):(m=e,F===0&&R(kr)),m!==e){for(C=[],A=l();A!==e;)C.push(A),A=l();if(t.substr(f,2)===ce?(A=ce,f+=2):(A=e,F===0&&R(ls)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return q[U]={nextPos:f,result:s},s}function k(){var s,u,d,h,x,m,C=f*77+67,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=We(),u!==e){for(d=[],h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,x=g(),x!==e?(m=We(),m!==e?h=m:(f=h,h=e)):(f=h,h=e);Y=s,s=xs(u,d)}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function Ie(){var s,u,d,h,x,m,C,A,M=f*77+68,I=q[M];if(I)return f=I.nextPos,I.result;if(s=f,u=ae(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(f)===60?(h=ht,f++):(h=e,F===0&&R(Fn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(C=[],A=$();A!==e;)C.push(A),A=$();t.charCodeAt(f)===62?(A=Ir,f++):(A=e,F===0&&R(Ia)),A!==e?(Y=s,s=yr(u,m)):(f=s,s=e)}else f=s,s=e}else f=s,s=e}else f=s,s=e;return s===e&&(s=f,u=ae(),u!==e&&(Y=s,u=tn(u)),s=u),q[M]={nextPos:f,result:s},s}function ae(){var s,u,d,h,x=f*77+69,m=q[x];if(m)return f=m.nextPos,m.result;if(s=f,yn.test(t.charAt(f))?(u=t.charAt(f),f++):(u=e,F===0&&R(fl)),u!==e){for(d=[],gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(La));h!==e;)d.push(h),gr.test(t.charAt(f))?(h=t.charAt(f),f++):(h=e,F===0&&R(La));Y=s,s=i()}else f=s,s=e;return q[x]={nextPos:f,result:s},s}function o(){var s,u,d,h,x,m,C=f*77+70,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,u=ae(),u!==e){for(d=[],h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ae(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);h!==e;)d.push(h),h=f,t.charCodeAt(f)===58?(x=oe,f++):(x=e,F===0&&R(Ut)),x!==e?(m=ae(),m!==e?(x=[x,m],h=x):(f=h,h=e)):(f=h,h=e);Y=s,s=S()}else f=s,s=e;return q[C]={nextPos:f,result:s},s}function g(){var s,u,d,h,x,m=f*77+71,C=q[m];if(C)return f=C.nextPos,C.result;for(s=f,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(f)===44?(d=ee,f++):(d=e,F===0&&R(Tt)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else f=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return q[m]={nextPos:f,result:s},s}function b(){var s,u,d,h,x,m,C=f*77+72,A=q[C];if(A)return f=A.nextPos,A.result;if(s=f,t.charCodeAt(f)===123?(u=B,f++):(u=e,F===0&&R(st)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=br(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(f)===125?(m=J,f++):(m=e,F===0&&R(Lt)),m!==e?(Y=s,s=zr(h)):(f=s,s=e)}else f=s,s=e;return s===e&&(s=Cs()),q[C]={nextPos:f,result:s},s}function y(){var s,u=f*77+73,d=q[u];return d?(f=d.nextPos,d.result):(t.substr(f,2)===_t?(s=_t,f+=2):(s=e,F===0&&R(ol)),s===e&&(Vi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(cl))),q[u]={nextPos:f,result:s},s)}function a(){var s,u,d=f*77+74,h=q[d];return h?(f=h.nextPos,h.result):(s=f,F++,t.length>f?(u=t.charAt(f),f++):(u=e,F===0&&R(Dt)),F--,u===e?s=void 0:(f=s,s=e),s===e&&(s=y()),q[d]={nextPos:f,result:s},s)}function l(){var s,u=f*77+75,d=q[u];return d?(f=d.nextPos,d.result):(Wi.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(Ha)),q[u]={nextPos:f,result:s},s)}function $(){var s,u=f*77+76,d=q[u];return d?(f=d.nextPos,d.result):(rr.test(t.charAt(f))?(s=t.charAt(f),f++):(s=e,F===0&&R(hl)),q[u]={nextPos:f,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=w(),Rs!==e&&f===t.length)return Rs;throw Rs!==e&&f<t.length&&R(L()),Un(bt,j<t.length?t.charAt(j):null,j<t.length?rn(j,j+1):rn(j,j))}const dA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function yA(t){return dA.includes(t.type)}function Xy(t){return"chain"in t&&t.chain!==null}function wA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function mA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function $A(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function St(t,r){const e=r(t);switch(e.type){case"def":{e.expr=St(e.expr,r);break}case"return":{e.expr=St(e.expr,r);break}case"each":{e.items=St(e.items,r),e.for=St(e.for,r);break}case"for":{e.from!=null&&(e.from=St(e.from,r)),e.to!=null&&(e.to=St(e.to,r)),e.times!=null&&(e.times=St(e.times,r)),e.for=St(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=St(e.expr,r),e.dest=St(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=St(e.operands[n],r);break}case"not":{e.expr=St(e.expr,r);break}case"if":{e.cond=St(e.cond,r),e.then=St(e.then,r);for(const n of e.elseif)n.cond=St(n.cond,r),n.then=St(n.then,r);e.else!=null&&(e.else=St(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=St(e.children[n],r);break}case"match":{e.about=St(e.about,r);for(const n of e.qs)n.q=St(n.q,r),n.a=St(n.a,r);e.default!=null&&(e.default=St(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"exists":{e.identifier=St(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=St(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],St(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=St(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"indexChain":{e.index=St(e.index,r);break}case"call":{e.target=St(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"index":{e.target=St(e.target,r),e.index=St(e.index,r);break}case"prop":{e.target=St(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=St(e.members[n],r);break}case"or":case"and":{e.left=St(e.left,r),e.right=St(e.right,r);break}}if(Xy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=St(e.chain[n],r);return e}const op=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function cp(t){throw new so(`Reserved word "${t}" cannot be used as variable name.`)}function xA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{op.includes(t.name)&&cp(t.name);break}case"meta":{t.name!=null&&op.includes(t.name)&&cp(t.name);break}case"fn":{for(const r of t.args)op.includes(r.name)&&cp(r.name);break}}return t}function bA(t){for(const r of t)St(r,xA);return t}function cd(t){return{type:"simple",name:t}}function AA(t,r){return{type:"generic",name:t,inners:r}}function CA(t,r){return{type:"fn",args:t,result:r}}function Zc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Zc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Zc(n)).join(", "),e=Zc(t.result);return`@(${r}) { ${e} }`}}}function Ro(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return cd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ro(t.inner):r=cd("any"),AA(t.name,[r])}}throw new so(`Unknown type: '${Zc(t)}'`)}else{const r=t.args.map(e=>Ro(e));return CA(r,Ro(t.result))}}function _A(t){switch(t.type){case"def":{t.varType!=null&&Ro(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ro(r.argType);t.retType!=null&&Ro(t.retType);break}}return t}function PA(t){for(const r of t)St(r,_A);return t}function Qc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Qc(n.expr.children)),r.push(n);else{if(e.length>0)throw new so("invalid attribute.");switch(n.type){case"fn":{n.children=Qc(n.children);break}case"block":{n.statements=Qc(n.statements);break}}r.push(n)}if(e.length>0)throw new so("invalid attribute.");return r}function kA(t){if(yA(t)&&Xy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=wA(n,v.args,v.loc);break}case"indexChain":{n=mA(n,v.index,v.loc);break}case"propChain":{n=$A(n,v.name,v.loc);break}}return n}return t}function MA(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],kA);return t}function Xc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Yy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Xc(t,r,e);{const{left:n,right:v,info:w}=t;return Xc(n,Yy(v,r,e),w)}}function Tf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Tf(t.left),Tf(t.right)]}}const EA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Tf(t.left),right:Tf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Tf(t.left),right:Tf(t.right)}),priority:3}};function SA(t){const r=t.operators.map(n=>{const v=EA[n];if(v==null)throw new so(`No such operator: ${n}.`);return v});let e=Xc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Yy(e,t.operands[2+n],r[1+n]);return Tf(e)}function NA(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],e=>e.type==="infix"?SA(e):e);return t}var Uu;let FA=(Uu=class{constructor(){he(this,"plugins");this.plugins={validate:[bA,PA],transform:[Qc,MA,NA]}}static parse(r){return Uu.instance==null&&(Uu.instance=new Uu),Uu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=od(r,{startRule:"Preprocess"});e=od(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new so(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new so(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Uu,"instance"),Uu);const TA="0.16.0",OA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let iv=[],Xo=null;function IA(t){return iv=FA.parse(t),JSON.stringify(iv,null,"	")}async function jA(t){Xo==null||Xo.abort(),Xo=new En({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:sv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:sv(e.val,!0),print:!1});break}}});try{await Xo.exec(iv)}catch(r){t.err(r)}}const RA=Object.freeze(Object.defineProperty({__proto__:null,exec:jA,parse:IA,samples:OA,version:TA},Symbol.toStringTag,{value:"Module"}));function Yc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yc=function(e){return typeof e}:Yc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function ew(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Yc(n)));var v=!1;return{configurable:!0,get:function(){if(v||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var _=n.bind(this);return v=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return _},set:function(E){n=E,delete this[r]}}),v=!1,_},set:function(_){n=_}}}function DA(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,ew(t,e,n))}}),t}function Rt(){return arguments.length===1?DA.apply(void 0,arguments):ew.apply(void 0,arguments)}let tw=class rw extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,rw)}},no=class extends tw{constructor(r,e){super(r,e)}},Lr=class extends tw{constructor(r,e){super(r,e)}},LA=class extends Lr{constructor(r,e){super(r,e)}};var po=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};let xf=class sw{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new sw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Lr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};po([Rt],xf.prototype,"log",null);po([Rt],xf.prototype,"onUpdated",null);po([Rt],xf.prototype,"createChildScope",null);po([Rt],xf.prototype,"get",null);po([Rt],xf.prototype,"getAll",null);po([Rt],xf.prototype,"add",null);po([Rt],xf.prototype,"assign",null);let Tc;const HA=new Uint8Array(16);function UA(){if(!Tc&&(Tc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tc(HA)}const cn=[];for(let t=0;t<256;++t)cn.push((t+256).toString(16).slice(1));function BA(t,r=0){return(cn[t[r+0]]+cn[t[r+1]]+cn[t[r+2]]+cn[t[r+3]]+"-"+cn[t[r+4]]+cn[t[r+5]]+"-"+cn[t[r+6]]+cn[t[r+7]]+"-"+cn[t[r+8]]+cn[t[r+9]]+"-"+cn[t[r+10]]+cn[t[r+11]]+cn[t[r+12]]+cn[t[r+13]]+cn[t[r+14]]+cn[t[r+15]]).toLowerCase()}const qA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),hd={randomUUID:qA};function zA(t,r,e){if(hd.randomUUID&&!r&&!t)return hd.randomUUID();t=t||{};const n=t.random||(t.rng||UA)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return BA(n)}const Cr={type:"null"},Hi={type:"bool",value:!0},Mi={type:"bool",value:!1},Ge=t=>({type:"num",value:t}),Rr=t=>({type:"str",value:t}),Do=t=>({type:"bool",value:t}),Wv=t=>({type:"obj",value:t}),mn=t=>({type:"arr",value:t}),KA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ce=t=>({type:"fn",native:t}),VA=t=>({type:"return",value:t}),WA=()=>({type:"break",value:null}),GA=()=>({type:"continue",value:null}),JA=t=>t.type==="return"?t.value:t;function Fi(t){if(t==null)throw new Lr("Expect anything, but got nothing.")}function fa(t){if(t==null)throw new Lr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Lr(`Expect boolean, but got ${t.type}.`)}function of(t){if(t==null)throw new Lr("Expect function, but got nothing.");if(t.type!=="fn")throw new Lr(`Expect function, but got ${t.type}.`)}function Bs(t){if(t==null)throw new Lr("Expect string, but got nothing.");if(t.type!=="str")throw new Lr(`Expect string, but got ${t.type}.`)}function qe(t){if(t==null)throw new Lr("Expect number, but got nothing.");if(t.type!=="num")throw new Lr(`Expect number, but got ${t.type}.`)}function tf(t){if(t==null)throw new Lr("Expect object, but got nothing.");if(t.type!=="obj")throw new Lr(`Expect object, but got ${t.type}.`)}function Lo(t){if(t==null)throw new Lr("Expect array, but got nothing.");if(t.type!=="arr")throw new Lr(`Expect array, but got ${t.type}.`)}function ZA(t){return t.type==="str"}function QA(t){return t.type==="num"}function XA(t){return t.type==="obj"}function YA(t){return t.type==="arr"}function lv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function uv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>uv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function fv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>fv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=fv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ov(t){if(t===null)return Cr;if(typeof t=="boolean")return Do(t);if(typeof t=="string")return Rr(t);if(typeof t=="number")return Ge(t);if(Array.isArray(t))return mn(t.map(r=>ov(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ov(n));return Wv(r)}return Cr}const e2={help:Rr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Rr("0.14.1"),"Core:ai":Rr("kawaii"),"Core:not":Ce(([t])=>(fa(t),t.value?Mi:Hi)),"Core:eq":Ce(([t,r])=>(Fi(t),Fi(r),lv(t,r)?Hi:Mi)),"Core:neq":Ce(([t,r])=>(Fi(t),Fi(r),lv(t,r)?Mi:Hi)),"Core:and":Ce(([t,r])=>(fa(t),t.value?(fa(r),r.value?Hi:Mi):Mi)),"Core:or":Ce(([t,r])=>(fa(t),t.value?Hi:(fa(r),r.value?Hi:Mi))),"Core:add":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value+r.value))),"Core:sub":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value-r.value))),"Core:mul":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value*r.value))),"Core:pow":Ce(([t,r])=>{qe(t),qe(r);const e=t.value**r.value;if(isNaN(e))throw new Lr("Invalid operation.");return Ge(e)}),"Core:div":Ce(([t,r])=>{qe(t),qe(r);const e=t.value/r.value;if(isNaN(e))throw new Lr("Invalid operation.");return Ge(e)}),"Core:mod":Ce(([t,r])=>(qe(t),qe(r),Ge(t.value%r.value))),"Core:gt":Ce(([t,r])=>(qe(t),qe(r),t.value>r.value?Hi:Mi)),"Core:lt":Ce(([t,r])=>(qe(t),qe(r),t.value<r.value?Hi:Mi)),"Core:gteq":Ce(([t,r])=>(qe(t),qe(r),t.value>=r.value?Hi:Mi)),"Core:lteq":Ce(([t,r])=>(qe(t),qe(r),t.value<=r.value?Hi:Mi)),"Core:type":Ce(([t])=>(Fi(t),Rr(t.type))),"Core:to_str":Ce(([t])=>(Fi(t),t.type==="str"?t:t.type==="num"?Rr(t.value.toString()):Rr("?"))),"Core:range":Ce(([t,r])=>(qe(t),qe(r),t.value<r.value?mn(Array.from({length:r.value-t.value+1},(e,n)=>Ge(n+t.value))):t.value>r.value?mn(Array.from({length:t.value-r.value+1},(e,n)=>Ge(t.value-n))):mn([t]))),"Util:uuid":Ce(()=>Rr(zA())),"Json:stringify":Ce(([t])=>(Fi(t),Rr(JSON.stringify(fv(t))))),"Json:parse":Ce(([t])=>(Bs(t),ov(JSON.parse(t.value)))),"Json:parsable":Ce(([t])=>{Bs(t);try{JSON.parse(t.value)}catch{return Do(!1)}return Do(!0)}),"Date:now":Ce(()=>Ge(Date.now())),"Date:year":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ce(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ce(([t])=>(Bs(t),Ge(new Date(t.value).getTime()))),"Math:Infinity":Ge(1/0),"Math:E":Ge(Math.E),"Math:LN2":Ge(Math.LN2),"Math:LN10":Ge(Math.LN10),"Math:LOG2E":Ge(Math.LOG2E),"Math:LOG10E":Ge(Math.LOG10E),"Math:PI":Ge(Math.PI),"Math:SQRT1_2":Ge(Math.SQRT1_2),"Math:SQRT2":Ge(Math.SQRT2),"Math:abs":Ce(([t])=>(qe(t),Ge(Math.abs(t.value)))),"Math:acos":Ce(([t])=>(qe(t),Ge(Math.acos(t.value)))),"Math:acosh":Ce(([t])=>(qe(t),Ge(Math.acosh(t.value)))),"Math:asin":Ce(([t])=>(qe(t),Ge(Math.asin(t.value)))),"Math:asinh":Ce(([t])=>(qe(t),Ge(Math.asinh(t.value)))),"Math:atan":Ce(([t])=>(qe(t),Ge(Math.atan(t.value)))),"Math:atanh":Ce(([t])=>(qe(t),Ge(Math.atanh(t.value)))),"Math:atan2":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.atan2(t.value,r.value)))),"Math:cbrt":Ce(([t])=>(qe(t),Ge(Math.cbrt(t.value)))),"Math:ceil":Ce(([t])=>(qe(t),Ge(Math.ceil(t.value)))),"Math:clz32":Ce(([t])=>(qe(t),Ge(Math.clz32(t.value)))),"Math:cos":Ce(([t])=>(qe(t),Ge(Math.cos(t.value)))),"Math:cosh":Ce(([t])=>(qe(t),Ge(Math.cosh(t.value)))),"Math:exp":Ce(([t])=>(qe(t),Ge(Math.exp(t.value)))),"Math:expm1":Ce(([t])=>(qe(t),Ge(Math.expm1(t.value)))),"Math:floor":Ce(([t])=>(qe(t),Ge(Math.floor(t.value)))),"Math:fround":Ce(([t])=>(qe(t),Ge(Math.fround(t.value)))),"Math:hypot":Ce(([t])=>{Lo(t);const r=[];for(const e of t.value)qe(e),r.push(e.value);return Ge(Math.hypot(...r))}),"Math:imul":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.imul(t.value,r.value)))),"Math:log":Ce(([t])=>(qe(t),Ge(Math.log(t.value)))),"Math:log1p":Ce(([t])=>(qe(t),Ge(Math.log1p(t.value)))),"Math:log10":Ce(([t])=>(qe(t),Ge(Math.log10(t.value)))),"Math:log2":Ce(([t])=>(qe(t),Ge(Math.log2(t.value)))),"Math:max":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.max(t.value,r.value)))),"Math:min":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.min(t.value,r.value)))),"Math:pow":Ce(([t,r])=>(qe(t),qe(r),Ge(Math.pow(t.value,r.value)))),"Math:round":Ce(([t])=>(qe(t),Ge(Math.round(t.value)))),"Math:sign":Ce(([t])=>(qe(t),Ge(Math.sign(t.value)))),"Math:sin":Ce(([t])=>(qe(t),Ge(Math.sin(t.value)))),"Math:sinh":Ce(([t])=>(qe(t),Ge(Math.sinh(t.value)))),"Math:sqrt":Ce(([t])=>{qe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Lr("Invalid operation.");return Ge(r)}),"Math:tan":Ce(([t])=>(qe(t),Ge(Math.tan(t.value)))),"Math:tanh":Ce(([t])=>(qe(t),Ge(Math.tanh(t.value)))),"Math:trunc":Ce(([t])=>(qe(t),Ge(Math.trunc(t.value)))),"Math:rnd":Ce(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ge(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ge(Math.random())),"Math:gen_rng":Ce(([t])=>{if(Fi(t),t.type!=="num"&&t.type!=="str")return Cr;const r=uo(t.value.toString());return Ce(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ge(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ge(r()))}),"Num:to_hex":Ce(([t])=>(qe(t),Rr(t.value.toString(16)))),"Num:from_hex":Ce(([t])=>(Bs(t),Ge(parseInt(t.value,16)))),"Str:lf":Rr(`
`),"Str:lt":Ce(([t,r])=>(Bs(t),Bs(r),t.value<r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Str:gt":Ce(([t,r])=>(Bs(t),Bs(r),t.value>r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Obj:keys":Ce(([t])=>(tf(t),mn(Array.from(t.value.keys()).map(r=>Rr(r))))),"Obj:vals":Ce(([t])=>(tf(t),mn(Array.from(t.value.values())))),"Obj:kvs":Ce(([t])=>(tf(t),mn(Array.from(t.value.entries()).map(([r,e])=>mn([Rr(r),e]))))),"Obj:get":Ce(([t,r])=>(tf(t),Bs(r),t.value.get(r.value)??Cr)),"Obj:set":Ce(([t,r,e])=>(tf(t),Bs(r),Fi(e),t.value.set(r.value,e),Cr)),"Obj:has":Ce(([t,r])=>(tf(t),Bs(r),Do(t.value.has(r.value)))),"Obj:copy":Ce(([t])=>(tf(t),Wv(new Map(t.value)))),"Async:interval":Ce(async([t,r,e],n)=>{qe(t),of(r),e&&(fa(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),Ce(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":Ce(async([t,r],e)=>{qe(t),of(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),Ce(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},wo={num:{to_str:t=>Ce(async(r,e)=>Rr(t.value.toString()))},str:{to_num:t=>Ce(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Cr:Ge(n)}),len:t=>Ge(oo(t.value)),replace:t=>Ce(async([r,e],n)=>(Bs(r),Bs(e),Rr(t.value.split(r.value).join(e.value)))),index_of:t=>Ce(async([r],e)=>(Bs(r),Ge(ho(t.value,r.value)))),incl:t=>Ce(async([r],e)=>(Bs(r),t.value.includes(r.value)?Hi:Mi)),trim:t=>Ce(async(r,e)=>Rr(t.value.trim())),upper:t=>Ce(async(r,e)=>Rr(t.value.toUpperCase())),lower:t=>Ce(async(r,e)=>Rr(t.value.toLowerCase())),split:t=>Ce(async([r],e)=>(r&&Bs(r),mn(r?t.value.split(r?r.value:"").map(n=>Rr(n)):zs(t.value).map(n=>Rr(n))))),slice:t=>Ce(async([r,e],n)=>(qe(r),qe(e),Rr(co(t.value,r.value,e.value)))),pick:t=>Ce(async([r],e)=>{qe(r);const v=zs(t.value)[r.value];return v?Rr(v):Cr})},arr:{len:t=>Ge(t.value.length),push:t=>Ce(async([r],e)=>(Fi(r),t.value.push(r),t)),unshift:t=>Ce(async([r],e)=>(Fi(r),t.value.unshift(r),t)),pop:t=>Ce(async(r,e)=>t.value.pop()??Cr),shift:t=>Ce(async(r,e)=>t.value.shift()??Cr),concat:t=>Ce(async([r],e)=>(Lo(r),mn(t.value.concat(r.value)))),slice:t=>Ce(async([r,e],n)=>(qe(r),qe(e),mn(t.value.slice(r.value,e.value)))),join:t=>Ce(async([r],e)=>(r&&Bs(r),Rr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Ce(async([r],e)=>{of(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,Ge(w)]));return mn(await Promise.all(n))}),filter:t=>Ce(async([r],e)=>{of(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,Ge(v)]);fa(_),_.value&&n.push(w)}return mn(n)}),reduce:t=>Ce(async([r,e],n)=>{of(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,Ge(_)])}return w}),find:t=>Ce(async([r],e)=>{of(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,Ge(n)]);if(fa(w),w.value)return v}return Cr}),incl:t=>Ce(async([r],e)=>(Fi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Mi:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Hi:Mi)),reverse:t=>Ce(async(r,e)=>(t.value.reverse(),Cr)),copy:t=>Ce(async(r,e)=>mn([...t.value])),sort:t=>Ce(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);qe(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return of(r),Lo(t),t.value=await n(t.value,r),t})}};var Ii=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const nw=300,t2=nw-1;let Ea=class{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const n={print:Ce(([v])=>{Fi(v),this.opts.out&&this.opts.out(v)}),readline:Ce(async v=>{const w=v[0];if(Bs(w),this.opts.in==null)return Cr;const _=await this.opts.in(w.value);return Rr(_)})};this.vars={...r,...e2,...n},this.scope=new xf([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Cr;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],e[w]);const v=r.scope.createChildScope(n);return JA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Cr;if(this.stepCount%nw===t2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Lr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);of(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(fa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(fa(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Cr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(lv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Cr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Cr}case"for":{if(r.times){const n=await this._eval(r.times,e);qe(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);qe(n),qe(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ge(w)]])));if(_.type==="break")break;if(_.type==="return")return _}}return Cr}case"each":{const n=await this._eval(r.items,e);Lo(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(w.type==="break")break;if(w.type==="return")return w}return Cr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,n),Cr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Cr}case"addAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value+v.value)),Cr}case"subAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value-v.value)),Cr}case"null":return Cr;case"bool":return Do(r.value);case"num":return Ge(r.value);case"str":return Rr(r.value);case"arr":return mn(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Wv(n)}case"prop":{const n=await this._eval(r.target,e);if(XA(n))return n.value.has(r.name)?n.value.get(r.name):Cr;if(QA(n)){if(Object.hasOwn(wo.num,r.name))return wo.num[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else if(ZA(n)){if(Object.hasOwn(wo.str,r.name))return wo.str[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else if(YA(n)){if(Object.hasOwn(wo.arr,r.name))return wo.arr[r.name](n);throw new Lr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Lr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Lo(n);const v=await this._eval(r.index,e);qe(v);const w=n.value[v.value];if(w===void 0)throw new LA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}case"not":{const n=await this._eval(r.expr,e);return fa(n),Do(!n.value)}case"fn":return KA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);let _="";w.type==="str"?_=w.value:w.type==="num"&&(_=w.value.toString()),n+=_}return Rr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),VA(n)}case"break":return this.log("block:break",{scope:e.name}),WA();case"continue":return this.log("block:continue",{scope:e.name}),GA();case"ns":return Cr;case"meta":return Cr;case"and":{const n=await this._eval(r.left,e);if(fa(n),n.value){const v=await this._eval(r.right,e);return fa(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(fa(n),n.value)return n;{const v=await this._eval(r.right,e);return fa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Cr;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);Lo(v);const w=await this._eval(e.index,r);qe(w),v.value[w.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);tf(v),v.value.set(e.name,n)}else throw new Lr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ii([Rt],Ea.prototype,"exec",null);Ii([Rt],Ea.prototype,"execFn",null);Ii([Rt],Ea.prototype,"log",null);Ii([Rt],Ea.prototype,"collectNs",null);Ii([Rt],Ea.prototype,"collectNsMember",null);Ii([Rt],Ea.prototype,"_fn",null);Ii([Rt],Ea.prototype,"_eval",null);Ii([Rt],Ea.prototype,"_run",null);Ii([Rt],Ea.prototype,"registerAbortHandler",null);Ii([Rt],Ea.prototype,"unregisterAbortHandler",null);Ii([Rt],Ea.prototype,"abort",null);Ii([Rt],Ea.prototype,"assign",null);Ii([Rt],Ea,"collectMetadata",null);function r2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Qf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Qf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}r2(Qf,Error);function hp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Qf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=hp("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+hp("",v.column-1," ")+hp("",H,"^")}else r+=`
 at `+_}return r};Qf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function pd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:sn},w=R,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",tr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Me="eval",Oe="`",Ae='"',ke="'",$e='\\"',Je="\\'",rt="true",Ye="false",Qe="null",lt=";",$t="@",Nt="@(",Ct=`\r
`,_t=/^[A-Z0-9_:]/i,ot=/^[^`{]/,ks=/^[{}`]/,as=/^[+\-]/,Xr=/^[1-9]/,xt=/^[0-9]/,It=/^[A-Z_]/i,yn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,rr=uu(),Dt=le("//",!1),Br=le("/*",!1),Sn=le("*/",!1),Pt=le("(",!1),ut=le(")",!1),kr=le("::",!1),qt=le("{",!1),st=le("}",!1),Lt=le("###",!1),ms=le("let",!1),Ht=le(":",!1),Ut=le("=",!1),qr=le("var",!1),Na=le("<:",!1),Mr=le("#[",!1),is=le("]",!1),Ns=le("each",!1),ft=le(",",!1),Tt=le("for",!1),Ks=le("return",!1),Er=D([["A","Z"],["0","9"],"_",":"],!1,!0),Sr=le("loop",!1),Gi=le("break",!1),Fa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Oa=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),Nn=le(">=",!1),Vs=le("<",!1),Fn=le(">",!1),Ia=le("+",!1),tl=le("-",!1),ja=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Ts=le(".",!1),Tn=le("if",!1),Ws=le("elif",!1),Gs=le("else",!1),al=le("match",!1),Js=le("=>",!1),ls=le("eval",!1),Os=le("`",!1),xr=D(["`","{"],!0,!1),Zs=D(["{","}","`"],!1,!1),Qs=le('"',!1),Xs=le("'",!1),us=le('\\"',!1),Ys=le("\\'",!1),Is=D(["+","-"],!1,!1),Ra=D([["1","9"]],!1,!1),Yt=D([["0","9"]],!1,!1),Da=le("true",!1),dr=le("false",!1),il=le("null",!1),en=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),On=D([["A","Z"],["0","9"],"_"],!1,!0),fl=le(`\r
`,!1),La=D(["\r",`
`],!1,!1),ol=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ha=function(a){return a.join("")},hl=function(){return F()},Ua=function(){return F()},pl=function(){return""},Ba=function(){return""},vl=function(a){return a??[]},qa=function(a,l){return l},gl=function(a,l){return[a,...l]},In=function(a,l){return l},dl=function(a,l){return[a,...l]},jn=function(a,l){return l},yl=function(a,l){return[a,...l]},za=function(a){return a},wl=function(a,l){return y("ns",{name:a,members:l})},ml=function(a,l){return y("meta",{name:a,value:l})},$l=function(a){return y("meta",{name:null,value:a})},xl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return y("identifier",{name:"print",chain:[y("callChain",{args:[a]})]})},Cl=function(a,l){return y("attr",{name:a,value:l??y("bool",{value:!0})})},_l=function(a,l,$){return y("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return y("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},Nl=function(a,l){return y("for",{times:a,for:l})},Ka=function(a,l){return y("for",{times:a,for:l})},Fl=function(a){return y("return",{expr:a})},Tl=function(a){return y("loop",{statements:a})},Ol=function(){return y("break",{})},Il=function(){return y("continue",{})},jl=function(a,l,$){return l==="+="?y("addAssign",{dest:a,expr:$}):l==="-="?y("subAssign",{dest:a,expr:$}):y("assign",{dest:a,expr:$})},Rn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return y("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Va=function(){return F()},Dl=function(a){return y("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return y("callChain",{args:a??[]})},Wa=function(a,l){return l},Ul=function(a,l){return[a,...l]},Dn=function(a){return y("indexChain",{index:a})},Bl=function(a){return y("propChain",{name:a})},ql=function(a,l,$,p){return y("if",{cond:a,then:l,elseif:$??[],else:p})},zl=function(a,l){return[a,...l]},Kl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ga=function(a,l,$){return{q:l,a:$}},Ja=function(a,l,$){return y("match",{about:a,qs:l??[],default:$})},Za=function(a){return y("block",{statements:a})},Qa=function(a){return y("identifier",{name:a})},Wl=function(a){return y("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Xa=function(a){return a},Jl=function(a){return y("str",{value:a.join("")})},Ya=function(a){return a},ei=function(a){return y("str",{value:a.join("")})},Zl=function(){return'"'},ti=function(){return"'"},Ql=function(){return y("num",{value:parseFloat(F())})},Xl=function(){return y("num",{value:parseFloat(F())})},ri=function(){return y("num",{value:parseInt(F(),10)})},Yl=function(){return y("num",{value:parseInt(F(),10)})},si=function(){return y("bool",{value:!0})},eu=function(){return y("bool",{value:!1})},tu=function(){return y("null",{})},ni=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},ai=function(a){return a},Ln=function(a){return y("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},Hn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),y("def",{name:l,expr:y("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return y("fn",{args:a??[],retType:l},$??[])},ii=function(a){return a},iu=function(a){return y("arr",{value:a})},li=function(a,l){return{k:a,v:l}},ui=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},lu=function(a,l){return y("fnTypeSource",{args:a??[],result:l})},fi=function(a,l){return[a,...l]},c=function(a,l){return y("namedTypeSource",{name:a,inner:l})},te=function(a){return y("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},tn=function(a){return y("block",{statements:a??[]})},i=0,S=0,zr=[{line:1,column:1}],f=0,Y=[],T=0,j={},bt;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function F(){return t.substring(S,i)}function q(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),oi(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function pe(){return{type:"end"}}function er(a){var l=zr[a],$;if(l)return l;for($=a-1;!zr[$];)$--;for(l=zr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return zr[a]=l,l}function Ds(a,l,$){var p=er(a),s=er(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return $&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function L(a){i<f||(i>f&&(f=i,Y=[]),Y.push(a))}function oi(a,l){return new Qf(a,null,null,l)}function rn(a,l,$){return new Qf(Qf.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ha(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=ln(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=un(),l!==e&&(S=a,l=Ua()),a=l,a===e&&(a=Un(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,T===0&&L(rr))))),j[$]={nextPos:i,result:a},a)}function Un(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,T===0&&L(Dt)),l!==e){for($=[],p=i,s=i,T++,u=o(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,u=o(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,T===0&&L(Br)),l!==e){for($=[],p=i,s=i,T++,t.substr(i,2)===E?(u=E,i+=2):(u=e,T===0&&L(Sn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.substr(i,2)===E?(u=E,i+=2):(u=e,T===0&&L(Sn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,T===0&&L(Sn)),p!==e?(S=a,a=Ba()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sn(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=nn(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=qa(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=qa(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Kr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=br(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function nn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=ci(),a===e&&(a=br())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function br(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=hi(),a===e&&(a=cu(),a===e&&(a=fu(),a===e&&(a=pi(),a===e&&(a=ou(),a===e&&(a=Wr(),a===e&&(a=vi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=gi(),a===e&&(a=fs()),j[l]={nextPos:i,result:a},a)}function fs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=Jr(),a===e&&(a=Cs()))),j[l]={nextPos:i,result:a},a)}function Cs(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=$i(),a===e&&(a=an(),a===e&&(a=ln(),a===e&&(a=un(),a===e&&(a=xi(),a===e&&(a=Xn(),a===e&&(a=ea(),a===e&&(a=ta(),a===e&&(a=du(),a===e&&(a=di(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(Pt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=za(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=xi(),a===e&&(a=un(),a===e&&(a=Xn(),a===e&&(a=na(),a===e&&(a=Ai(),a===e&&(a=ea()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,C=i*76+14,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,T===0&&L(kr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=B,i++):(u=e,T===0&&L(qt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,T===0&&L(st)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ci(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,C=j[m];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,T===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,T===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Pe,i++):(d=e,T===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,T===0&&L(qr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,T===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Pe,i++):(d=e,T===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,T===0&&L(Na)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Z?(l=Z,i+=2):(l=e,T===0&&L(Mr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=Q,i++):(d=e,T===0&&L(is)),d!==e?(S=a,a=Cl(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+19,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.substr(i,4)===X?(l=X,i+=4):(l=e,T===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e)if(t.charCodeAt(i)===41?(A=O,i++):(A=e,T===0&&L(ut)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=Ie(),I!==e?(S=a,a=_l(d,C,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===X?(l=X,i+=4):(l=e,T===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(C=[],A=g(),A!==e)for(;A!==e;)C.push(A),A=g();else C=e;C!==e?(A=Ie(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K=i*76+20,se=j[K];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=Pe,i++):(m=e,T===0&&L(Ut)),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,T===0&&L(ft)),m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=O,i++):(M=e,T===0&&L(ut)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=Ie(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=Pe,i++):(x=e,T===0&&L(Ut)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=Xe(),C!==e?(S=h,h=El(u,C)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=Ie(),M!==e?(S=a,a=Sl(u,h,C,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ie(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=Ie(),u!==e?(S=a,a=Ka(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[K]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ie?(l=ie,i+=6):(l=e,T===0&&L(Ks)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Wr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,T===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,T===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(st)),h!==e?(S=a,a=Tl(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Le?(l=Le,i+=5):(l=e,T===0&&L(Gi)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Ol()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===_e?(l=_e,i+=8):(l=e,T===0&&L(Fa)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,T===0&&L(Ji)),p===e&&(t.substr(i,2)===wt?(p=wt,i+=2):(p=e,T===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=Pe,i++):(p=e,T===0&&L(Ut)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=fs(),l!==e){for($=[],p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Gr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=fr,i++):(l=e,T===0&&L(Ta)),l!==e?($=ae(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Bn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===mt?(l=mt,i+=2):(l=e,T===0&&L(Oa)),l===e&&(t.substr(i,2)===dt?(l=dt,i+=2):(l=e,T===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,T===0&&L(Xi)),l===e&&(t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(Yi)),l===e&&(t.substr(i,2)===Jt?(l=Jt,i+=2):(l=e,T===0&&L(el)),l===e&&(t.substr(i,2)===Zt?(l=Zt,i+=2):(l=e,T===0&&L(Nn)),l===e&&(t.charCodeAt(i)===60?(l=ht,i++):(l=e,T===0&&L(Vs)),l===e&&(t.charCodeAt(i)===62?(l=Ir,i++):(l=e,T===0&&L(Fn)),l===e&&(t.charCodeAt(i)===43?(l=Qt,i++):(l=e,T===0&&L(Ia)),l===e&&(t.charCodeAt(i)===45?(l=Pr,i++):(l=e,T===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Bt,i++):(l=e,T===0&&L(ja)),l===e&&(t.charCodeAt(i)===94?(l=Ar,i++):(l=e,T===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Ur,i++):(l=e,T===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=tr,i++):(l=e,T===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Va()),a=l,j[$]={nextPos:i,result:a},a)}function di(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=jr,i++):(l=e,T===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function Jr(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=Cs(),l!==e){if($=[],p=qn(),p===e&&(p=yi(),p===e&&(p=Kn())),p!==e)for(;p!==e;)$.push(p),p=qn(),p===e&&(p=yi(),p===e&&(p=Kn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function qn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(Pt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=zn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function zn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Wa(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Wa(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function yi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=Dn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Kn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=$r,i++):(l=e,T===0&&L(Ts)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+35,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,T===0&&L(Tn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ie(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=wi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=mi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=zl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,T===0&&L(Ws)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=Ie(),d!==e?(S=a,a=Kl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,T===0&&L(Gs)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Ie(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=i*76+39,ve=j[Ne];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,T===0&&L(al)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=B,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ga(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ga(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(C=Bt,i++):(C=e,T===0&&L(ja)),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,T===0&&L(st)),A!==e?(S=a,a=Ja(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Ne]={nextPos:i,result:a},a}function an(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Me?(l=Me,i+=4):(l=e,T===0&&L(ls)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,T===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(st)),h!==e?(S=a,a=Za(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=Ci(),l!==e&&(S=a,l=Qa(l)),a=l,j[$]={nextPos:i,result:a},a)}function ln(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Oe,i++):(l=e,T===0&&L(Os)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===96?(u=Oe,i++):(u=e,T===0&&L(Os)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===96?(u=Oe,i++):(u=e,T===0&&L(Os)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Oe,i++):(p=e,T===0&&L(Os)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Wn(),$!==e)for(;$!==e;)l.push($),$=Wn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Wn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Gn(),a===e&&(ot.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(xr))),j[l]={nextPos:i,result:a},a)}function Gn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=fr,i++):(l=e,T===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,T===0&&L(Zs)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function un(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,T===0&&L(Qs)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(Qs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Xa(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(Qs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Xa(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,T===0&&L(Qs)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=ke,i++):(l=e,T===0&&L(Xs)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===39?(u=ke,i++):(u=e,T===0&&L(Xs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===39?(u=ke,i++):(u=e,T===0&&L(Xs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=ke,i++):(p=e,T===0&&L(Xs)),p!==e?(S=a,a=ei($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,T===0&&L(us)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function fn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,T===0&&L(Ys)),l!==e&&(S=a,l=ti()),a=l,j[$]={nextPos:i,result:a},a)}function xi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=Zn(),a===e&&(a=Qn()),j[l]={nextPos:i,result:a},a)}function Zn(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Ra)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=$r,i++):(p=e,T===0&&L(Ts)),p!==e){if(s=[],xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(Yt)),u!==e)for(;u!==e;)s.push(u),xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(Yt));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Yt)),l!==e)if(t.charCodeAt(i)===46?($=$r,i++):($=e,T===0&&L(Ts)),$!==e){if(p=[],xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(Yt)),s!==e)for(;s!==e;)p.push(s),xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(Yt));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Ra)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt));else $=e;$!==e?(S=a,a=ri()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Yt)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=Yn()),j[l]={nextPos:i,result:a},a)}function bi(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===rt?(l=rt,i+=4):(l=e,T===0&&L(Da)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=si()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,T===0&&L(dr)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,T===0&&L(il)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+56,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ni(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ni(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(st)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,C=i*76+57,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ai(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ai(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=Ln(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function sa(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=ra(),l!==e){for($=[],p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=Hn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=i*76+60,ve=j[Ne];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.charCodeAt(i)===64?(l=$t,i++):(l=e,T===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,T===0&&L(Pt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=sa(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=O,i++):(m=e,T===0&&L(ut)),m!==e){for(C=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=oe,i++):(M=e,T===0&&L(Ht)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?C=U:(i=C,C=e)}else i=C,C=e;for(C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=B,i++):(M=e,T===0&&L(qt)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Kr(),U===e&&(U=null),K=[],se=g();se!==e;)K.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,T===0&&L(st)),se!==e?(S=a,a=nu($,p,s,h,C,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Ne]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===Nt?(l=Nt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=oe,i++):(x=e,T===0&&L(Ht)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=tt(),C!==e?d=C:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=B,i++):(x=e,T===0&&L(qt)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();for(C=Kr(),C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=J,i++):(M=e,T===0&&L(st)),M!==e?(S=a,a=au(p,d,C)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function na(){var a,l,$,p,s,u,d,h,x,m,C=i*76+62,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function Ai(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+63,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=li(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=li(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(st)),s!==e?(S=a,a=ui(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=sr()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+65,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===Nt?(l=Nt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=_s(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===ce?(h=ce,i+=2):(h=e,T===0&&L(Js)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function _s(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=fi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sr(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=ht,i++):(p=e,T===0&&L(Vs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Ir,i++):(h=e,T===0&&L(Fn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,It.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(ul)),l!==e){for($=[],yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(On));p!==e;)$.push(p),yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(On));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,T===0&&L(ft)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function Ie(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Kr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(st)),u!==e?(S=a,a=tn(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=br()),j[d]={nextPos:i,result:a},a}function ae(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ct?(a=Ct,i+=2):(a=e,T===0&&L(fl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(La))),j[l]={nextPos:i,result:a},a)}function o(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,T++,t.length>i?(l=t.charAt(i),i++):(l=e,T===0&&L(rr)),T--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ae()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(ol)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function y(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=q();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(bt=w(),bt!==e&&i===t.length)return bt;throw bt!==e&&i<t.length&&L(pe()),rn(Y,f<t.length?t.charAt(f):null,f<t.length?Ds(f,f+1):Ds(f,f))}const s2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function n2(t){return s2.includes(t.type)}function aw(t){return"chain"in t&&t.chain!==null}function a2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function i2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function l2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Ft(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Ft(e.expr,r);break}case"return":{e.expr=Ft(e.expr,r);break}case"each":{e.items=Ft(e.items,r),e.for=Ft(e.for,r);break}case"for":{e.from!=null&&(e.from=Ft(e.from,r)),e.to!=null&&(e.to=Ft(e.to,r)),e.times!=null&&(e.times=Ft(e.times,r)),e.for=Ft(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Ft(e.expr,r),e.dest=Ft(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Ft(e.operands[n],r);break}case"not":{e.expr=Ft(e.expr,r);break}case"if":{e.cond=Ft(e.cond,r),e.then=Ft(e.then,r);for(const n of e.elseif)n.cond=Ft(n.cond,r),n.then=Ft(n.then,r);e.else!=null&&(e.else=Ft(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Ft(e.children[n],r);break}case"match":{e.about=Ft(e.about,r);for(const n of e.qs)n.q=Ft(n.q,r),n.a=Ft(n.a,r);e.default!=null&&(e.default=Ft(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Ft(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Ft(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Ft(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"indexChain":{e.index=Ft(e.index,r);break}case"call":{e.target=Ft(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"index":{e.target=Ft(e.target,r),e.index=Ft(e.index,r);break}case"prop":{e.target=Ft(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Ft(e.members[n],r);break}case"or":case"and":{e.left=Ft(e.left,r),e.right=Ft(e.right,r);break}}if(aw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Ft(e.chain[n],r);return e}const pp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function vp(t){throw new no(`Reserved word "${t}" cannot be used as variable name.`)}function u2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{pp.includes(t.name)&&vp(t.name);break}case"meta":{t.name!=null&&pp.includes(t.name)&&vp(t.name);break}case"fn":{for(const r of t.args)pp.includes(r.name)&&vp(r.name);break}}return t}function f2(t){for(const r of t)Ft(r,u2);return t}function vd(t){return{type:"simple",name:t}}function o2(t,r){return{type:"generic",name:t,inners:r}}function c2(t,r){return{type:"fn",args:t,result:r}}function eh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=eh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>eh(n)).join(", "),e=eh(t.result);return`@(${r}) { ${e} }`}}}function Ho(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return vd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ho(t.inner):r=vd("any"),o2(t.name,[r])}}throw new no(`Unknown type: '${eh(t)}'`)}else{const r=t.args.map(e=>Ho(e));return c2(r,Ho(t.result))}}function h2(t){switch(t.type){case"def":{t.varType!=null&&Ho(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ho(r.argType);t.retType!=null&&Ho(t.retType);break}}return t}function p2(t){for(const r of t)Ft(r,h2);return t}function th(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=th(n.expr.children)),r.push(n);else{if(e.length>0)throw new no("invalid attribute.");switch(n.type){case"fn":{n.children=th(n.children);break}case"block":{n.statements=th(n.statements);break}}r.push(n)}if(e.length>0)throw new no("invalid attribute.");return r}function v2(t){if(n2(t)&&aw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=a2(n,v.args,v.loc);break}case"indexChain":{n=i2(n,v.index,v.loc);break}case"propChain":{n=l2(n,v.name,v.loc);break}}return n}return t}function g2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],v2);return t}function rh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function iw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return rh(t,r,e);{const{left:n,right:v,info:w}=t;return rh(n,iw(v,r,e),w)}}function Of(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Of(t.left),Of(t.right)]}}const d2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Of(t.left),right:Of(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Of(t.left),right:Of(t.right)}),priority:3}};function y2(t){const r=t.operators.map(n=>{const v=d2[n];if(v==null)throw new no(`No such operator: ${n}.`);return v});let e=rh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=iw(e,t.operands[2+n],r[1+n]);return Of(e)}function w2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],e=>e.type==="infix"?y2(e):e);return t}var Bu;let m2=(Bu=class{constructor(){he(this,"plugins");this.plugins={validate:[f2,p2],transform:[th,g2,w2]}}static parse(r){return Bu.instance==null&&(Bu.instance=new Bu),Bu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=pd(r,{startRule:"Preprocess"});e=pd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new no(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new no(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},he(Bu,"instance"),Bu);const $2="0.15.0",x2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let cv=[],Yo=null;function b2(t){return cv=m2.parse(t),JSON.stringify(cv,null,"	")}async function A2(t){Yo==null||Yo.abort(),Yo=new Ea({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:uv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:uv(e.val,!0),print:!1});break}}});try{await Yo.exec(cv)}catch(r){t.err(r)}}const C2=Object.freeze(Object.defineProperty({__proto__:null,exec:A2,parse:b2,samples:x2,version:$2},Symbol.toStringTag,{value:"Module"}));class Ih extends Error{constructor(e,n){super(e);he(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ih)}}class ao extends Ih{constructor(r,e){super(r,e)}}class Hr extends Ih{constructor(r,e){super(r,e)}}class _2 extends Hr{constructor(r,e){super(r,e)}}var vo=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};class ju{constructor(r=[],e,n){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new ju(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Hr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}vo([Rt],ju.prototype,"log",null);vo([Rt],ju.prototype,"onUpdated",null);vo([Rt],ju.prototype,"createChildScope",null);vo([Rt],ju.prototype,"get",null);vo([Rt],ju.prototype,"getAll",null);vo([Rt],ju.prototype,"add",null);vo([Rt],ju.prototype,"assign",null);let Oc;const P2=new Uint8Array(16);function k2(){if(!Oc&&(Oc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oc(P2)}const hn=[];for(let t=0;t<256;++t)hn.push((t+256).toString(16).slice(1));function M2(t,r=0){return(hn[t[r+0]]+hn[t[r+1]]+hn[t[r+2]]+hn[t[r+3]]+"-"+hn[t[r+4]]+hn[t[r+5]]+"-"+hn[t[r+6]]+hn[t[r+7]]+"-"+hn[t[r+8]]+hn[t[r+9]]+"-"+hn[t[r+10]]+hn[t[r+11]]+hn[t[r+12]]+hn[t[r+13]]+hn[t[r+14]]+hn[t[r+15]]).toLowerCase()}const E2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gd={randomUUID:E2};function S2(t,r,e){if(gd.randomUUID&&!r&&!t)return gd.randomUUID();t=t||{};const n=t.random||(t.rng||k2)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=n[v];return r}return M2(n)}const _r={type:"null"},Ui={type:"bool",value:!0},Ei={type:"bool",value:!1},ct=t=>({type:"num",value:t}),Dr=t=>({type:"str",value:t}),Uo=t=>({type:"bool",value:t}),Gv=t=>({type:"obj",value:t}),$n=t=>({type:"arr",value:t}),N2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ze=t=>({type:"fn",native:t}),F2=t=>({type:"return",value:t}),T2=()=>({type:"break",value:null}),O2=()=>({type:"continue",value:null}),I2=t=>t.type==="return"?t.value:t;function Ti(t){if(t==null)throw new Hr("Expect anything, but got nothing.")}function oa(t){if(t==null)throw new Hr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Hr(`Expect boolean, but got ${t.type}.`)}function cf(t){if(t==null)throw new Hr("Expect function, but got nothing.");if(t.type!=="fn")throw new Hr(`Expect function, but got ${t.type}.`)}function qs(t){if(t==null)throw new Hr("Expect string, but got nothing.");if(t.type!=="str")throw new Hr(`Expect string, but got ${t.type}.`)}function it(t){if(t==null)throw new Hr("Expect number, but got nothing.");if(t.type!=="num")throw new Hr(`Expect number, but got ${t.type}.`)}function rf(t){if(t==null)throw new Hr("Expect object, but got nothing.");if(t.type!=="obj")throw new Hr(`Expect object, but got ${t.type}.`)}function cc(t){if(t==null)throw new Hr("Expect array, but got nothing.");if(t.type!=="arr")throw new Hr(`Expect array, but got ${t.type}.`)}function j2(t){return t.type==="str"}function R2(t){return t.type==="num"}function D2(t){return t.type==="obj"}function L2(t){return t.type==="arr"}function hv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function pv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>pv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function vv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>vv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=vv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function gv(t){if(t===null)return _r;if(typeof t=="boolean")return Uo(t);if(typeof t=="string")return Dr(t);if(typeof t=="number")return ct(t);if(Array.isArray(t))return $n(t.map(r=>gv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,gv(n));return Gv(r)}return _r}const H2={help:Dr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Dr("0.14.1"),"Core:ai":Dr("kawaii"),"Core:not":ze(([t])=>(oa(t),t.value?Ei:Ui)),"Core:eq":ze(([t,r])=>(Ti(t),Ti(r),hv(t,r)?Ui:Ei)),"Core:neq":ze(([t,r])=>(Ti(t),Ti(r),hv(t,r)?Ei:Ui)),"Core:and":ze(([t,r])=>(oa(t),t.value?(oa(r),r.value?Ui:Ei):Ei)),"Core:or":ze(([t,r])=>(oa(t),t.value?Ui:(oa(r),r.value?Ui:Ei))),"Core:add":ze(([t,r])=>(it(t),it(r),ct(t.value+r.value))),"Core:sub":ze(([t,r])=>(it(t),it(r),ct(t.value-r.value))),"Core:mul":ze(([t,r])=>(it(t),it(r),ct(t.value*r.value))),"Core:pow":ze(([t,r])=>{it(t),it(r);const e=t.value**r.value;if(isNaN(e))throw new Hr("Invalid operation.");return ct(e)}),"Core:div":ze(([t,r])=>{it(t),it(r);const e=t.value/r.value;if(isNaN(e))throw new Hr("Invalid operation.");return ct(e)}),"Core:mod":ze(([t,r])=>(it(t),it(r),ct(t.value%r.value))),"Core:gt":ze(([t,r])=>(it(t),it(r),t.value>r.value?Ui:Ei)),"Core:lt":ze(([t,r])=>(it(t),it(r),t.value<r.value?Ui:Ei)),"Core:gteq":ze(([t,r])=>(it(t),it(r),t.value>=r.value?Ui:Ei)),"Core:lteq":ze(([t,r])=>(it(t),it(r),t.value<=r.value?Ui:Ei)),"Core:type":ze(([t])=>(Ti(t),Dr(t.type))),"Core:to_str":ze(([t])=>(Ti(t),t.type==="str"?t:t.type==="num"?Dr(t.value.toString()):Dr("?"))),"Core:range":ze(([t,r])=>(it(t),it(r),t.value<r.value?$n(Array.from({length:r.value-t.value+1},(e,n)=>ct(n+t.value))):t.value>r.value?$n(Array.from({length:t.value-r.value+1},(e,n)=>ct(t.value-n))):$n([t]))),"Util:uuid":ze(()=>Dr(S2())),"Json:stringify":ze(([t])=>(Ti(t),Dr(JSON.stringify(vv(t))))),"Json:parse":ze(([t])=>(qs(t),gv(JSON.parse(t.value)))),"Json:parsable":ze(([t])=>{qs(t);try{JSON.parse(t.value)}catch{return Uo(!1)}return Uo(!0)}),"Date:now":ze(()=>ct(Date.now())),"Date:year":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ze(([t])=>(t&&it(t),ct(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ze(([t])=>(qs(t),ct(new Date(t.value).getTime()))),"Math:Infinity":ct(1/0),"Math:PI":ct(Math.PI),"Math:sin":ze(([t])=>(it(t),ct(Math.sin(t.value)))),"Math:cos":ze(([t])=>(it(t),ct(Math.cos(t.value)))),"Math:abs":ze(([t])=>(it(t),ct(Math.abs(t.value)))),"Math:sqrt":ze(([t])=>{it(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Hr("Invalid operation.");return ct(r)}),"Math:round":ze(([t])=>(it(t),ct(Math.round(t.value)))),"Math:ceil":ze(([t])=>(it(t),ct(Math.ceil(t.value)))),"Math:floor":ze(([t])=>(it(t),ct(Math.floor(t.value)))),"Math:min":ze(([t,r])=>(it(t),it(r),ct(Math.min(t.value,r.value)))),"Math:max":ze(([t,r])=>(it(t),it(r),ct(Math.max(t.value,r.value)))),"Math:rnd":ze(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ct(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ct(Math.random())),"Math:gen_rng":ze(([t])=>{if(Ti(t),t.type!=="num"&&t.type!=="str")return _r;const r=uo(t.value.toString());return ze(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?ct(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ct(r()))}),"Num:to_hex":ze(([t])=>(it(t),Dr(t.value.toString(16)))),"Num:from_hex":ze(([t])=>(qs(t),ct(parseInt(t.value,16)))),"Str:lf":Dr(`
`),"Str:lt":ze(([t,r])=>(qs(t),qs(r),t.value<r.value?ct(-1):t.value===r.value?ct(0):ct(1))),"Str:gt":ze(([t,r])=>(qs(t),qs(r),t.value>r.value?ct(-1):t.value===r.value?ct(0):ct(1))),"Obj:keys":ze(([t])=>(rf(t),$n(Array.from(t.value.keys()).map(r=>Dr(r))))),"Obj:vals":ze(([t])=>(rf(t),$n(Array.from(t.value.values())))),"Obj:kvs":ze(([t])=>(rf(t),$n(Array.from(t.value.entries()).map(([r,e])=>$n([Dr(r),e]))))),"Obj:get":ze(([t,r])=>(rf(t),qs(r),t.value.get(r.value)??_r)),"Obj:set":ze(([t,r,e])=>(rf(t),qs(r),Ti(e),t.value.set(r.value,e),_r)),"Obj:has":ze(([t,r])=>(rf(t),qs(r),Uo(t.value.has(r.value)))),"Obj:copy":ze(([t])=>(rf(t),Gv(new Map(t.value)))),"Async:interval":ze(async([t,r,e],n)=>{it(t),cf(r),e&&(oa(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),w=()=>{clearInterval(v)};return n.registerAbortHandler(w),ze(([],_)=>{clearInterval(v),_.unregisterAbortHandler(w)})}),"Async:timeout":ze(async([t,r],e)=>{it(t),cf(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ze(([],w)=>{clearTimeout(n),w.unregisterAbortHandler(v)})})},mo={num:{to_str:t=>ze(async(r,e)=>Dr(t.value.toString()))},str:{to_num:t=>ze(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?_r:ct(n)}),len:t=>ct(oo(t.value)),replace:t=>ze(async([r,e],n)=>(qs(r),qs(e),Dr(t.value.split(r.value).join(e.value)))),index_of:t=>ze(async([r],e)=>(qs(r),ct(ho(t.value,r.value)))),incl:t=>ze(async([r],e)=>(qs(r),t.value.includes(r.value)?Ui:Ei)),trim:t=>ze(async(r,e)=>Dr(t.value.trim())),upper:t=>ze(async(r,e)=>Dr(t.value.toUpperCase())),lower:t=>ze(async(r,e)=>Dr(t.value.toLowerCase())),split:t=>ze(async([r],e)=>(r&&qs(r),$n(r?t.value.split(r?r.value:"").map(n=>Dr(n)):zs(t.value).map(n=>Dr(n))))),slice:t=>ze(async([r,e],n)=>(it(r),it(e),Dr(co(t.value,r.value,e.value)))),pick:t=>ze(async([r],e)=>{it(r);const v=zs(t.value)[r.value];return v?Dr(v):_r})},arr:{len:t=>ct(t.value.length),push:t=>ze(async([r],e)=>(Ti(r),t.value.push(r),t)),unshift:t=>ze(async([r],e)=>(Ti(r),t.value.unshift(r),t)),pop:t=>ze(async(r,e)=>t.value.pop()??_r),shift:t=>ze(async(r,e)=>t.value.shift()??_r),concat:t=>ze(async([r],e)=>(cc(r),$n(t.value.concat(r.value)))),slice:t=>ze(async([r,e],n)=>(it(r),it(e),$n(t.value.slice(r.value,e.value)))),join:t=>ze(async([r],e)=>(r&&qs(r),Dr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ze(async([r],e)=>{cf(r);const n=t.value.map(async(v,w)=>await e.call(r,[v,ct(w)]));return $n(await Promise.all(n))}),filter:t=>ze(async([r],e)=>{cf(r);const n=[];for(let v=0;v<t.value.length;v++){const w=t.value[v],_=await e.call(r,[w,ct(v)]);oa(_),_.value&&n.push(w)}return $n(n)}),reduce:t=>ze(async([r,e],n)=>{cf(r);const v=e!=null;let w=v?e:t.value[0];for(let _=v?0:1;_<t.value.length;_++){const P=t.value[_];w=await n.call(r,[w,P,ct(_)])}return w}),find:t=>ze(async([r],e)=>{cf(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],w=await e.call(r,[v,ct(n)]);if(oa(w),w.value)return v}return _r}),incl:t=>ze(async([r],e)=>(Ti(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ei:(v=>v.value.map(w=>w.type==="str"||w.type==="num"||w.type==="bool"?w.value:w.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Ui:Ei)),reverse:t=>ze(async(r,e)=>(t.value.reverse(),_r)),copy:t=>ze(async(r,e)=>$n([...t.value])),sort:t=>ze(async([r],e)=>{const n=async(w,_)=>{if(w.length<=1)return w;const P=Math.floor(w.length/2),E=await n(w.slice(0,P),_),N=await n(w.slice(P),_);return v(E,N,_)},v=async(w,_,P)=>{const E=[];let N=0,O=0;for(;N<w.length&&O<_.length;){const H=w[N],B=_[O],J=await e.call(P,[H,B]);it(J),J.value<0?(E.push(w[N]),N++):(E.push(_[O]),O++)}return E.concat(w.slice(N)).concat(_.slice(O))};return cf(r),cc(t),t.value=await n(t.value,r),t})}};var ji=function(t,r,e,n){var v=arguments.length,w=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(_=t[P])&&(w=(v<3?_(w):v>3?_(r,e,w):_(r,e))||w);return v>3&&w&&Object.defineProperty(r,e,w),w};const lw=300,U2=lw-1;class Sa{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const n={print:ze(([v])=>{Ti(v),this.opts.out&&this.opts.out(v)}),readline:ze(async v=>{const w=v[0];if(qs(w),this.opts.in==null)return _r;const _=await this.opts.in(w.value);return Dr(_)})};this.vars={...r,...H2,...n},this.scope=new ju([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,w)=>{switch(v){case"add":this.log("var:add",w);break;case"read":this.log("var:read",w);break;case"write":this.log("var:write",w);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(w=>e(w));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const w={};for(const[_,P]of v.value.entries())w[_]=e(P);return w}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??_r;{const n=new Map;for(let w=0;w<(r.args??[]).length;w++)n.set(r.args[w],e[w]);const v=r.scope.createChildScope(n);return I2(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return _r;if(this.stepCount%lw===U2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Hr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);cf(n);const v=await Promise.all(r.args.map(w=>this._eval(w,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(oa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const w=await this._eval(v.cond,e);if(oa(w),w.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return _r}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const w=await this._eval(v.q,e);if(hv(n,w))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):_r}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return _r}case"for":{if(r.times){const n=await this._eval(r.times,e);it(n);for(let v=0;v<n.value;v++){const w=await this._eval(r.for,e);if(w.type==="break")break;if(w.type==="return")return w}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);it(n),it(v);for(let w=n.value;w<n.value+v.value;w++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,ct(w)]])));if(_.type==="break")break;if(_.type==="return")return _}}return _r}case"each":{const n=await this._eval(r.items,e);cc(n);for(const v of n.value){const w=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(w.type==="break")break;if(w.type==="return")return w}return _r}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const w of r.attr)v.push({name:w.name,value:await this._eval(w.value,e)});n.attr=v}return e.add(r.name,n),_r}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),_r}case"addAssign":{const n=await this._eval(r.dest,e);it(n);const v=await this._eval(r.expr,e);return it(v),await this.assign(e,r.dest,ct(n.value+v.value)),_r}case"subAssign":{const n=await this._eval(r.dest,e);it(n);const v=await this._eval(r.expr,e);return it(v),await this.assign(e,r.dest,ct(n.value-v.value)),_r}case"null":return _r;case"bool":return Uo(r.value);case"num":return ct(r.value);case"str":return Dr(r.value);case"arr":return $n(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Gv(n)}case"prop":{const n=await this._eval(r.target,e);if(D2(n))return n.value.has(r.name)?n.value.get(r.name):_r;if(R2(n)){if(Object.hasOwn(mo.num,r.name))return mo.num[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else if(j2(n)){if(Object.hasOwn(mo.str,r.name))return mo.str[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else if(L2(n)){if(Object.hasOwn(mo.arr,r.name))return mo.arr[r.name](n);throw new Hr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Hr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);cc(n);const v=await this._eval(r.index,e);it(v);const w=n.value[v.value];if(w===void 0)throw new _2(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return w}case"not":{const n=await this._eval(r.expr,e);return oa(n),Uo(!n.value)}case"fn":return N2(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const w=await this._eval(v,e);let _="";w.type==="str"?_=w.value:w.type==="num"&&(_=w.value.toString()),n+=_}return Dr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),F2(n)}case"break":return this.log("block:break",{scope:e.name}),T2();case"continue":return this.log("block:continue",{scope:e.name}),O2();case"ns":return _r;case"meta":return _r;case"and":{const n=await this._eval(r.left,e);if(oa(n),n.value){const v=await this._eval(r.right,e);return oa(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(oa(n),n.value)return n;{const v=await this._eval(r.right,e);return oa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=_r;for(let v=0;v<r.length;v++){const w=r[v];if(n=await this._eval(w,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);cc(v);const w=await this._eval(e.index,r);it(w),v.value[w.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);rf(v),v.value.set(e.name,n)}else throw new Hr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}ji([Rt],Sa.prototype,"exec",null);ji([Rt],Sa.prototype,"execFn",null);ji([Rt],Sa.prototype,"log",null);ji([Rt],Sa.prototype,"collectNs",null);ji([Rt],Sa.prototype,"collectNsMember",null);ji([Rt],Sa.prototype,"_fn",null);ji([Rt],Sa.prototype,"_eval",null);ji([Rt],Sa.prototype,"_run",null);ji([Rt],Sa.prototype,"registerAbortHandler",null);ji([Rt],Sa.prototype,"unregisterAbortHandler",null);ji([Rt],Sa.prototype,"abort",null);ji([Rt],Sa.prototype,"assign",null);ji([Rt],Sa,"collectMetadata",null);function B2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Xf(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Xf.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}B2(Xf,Error);function gp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Xf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,w=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,_=this.location.source+":"+w.line+":"+w.column;if(e){var P=this.location.end,E=gp("",w.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+_+`
`+E+` |
`+w.line+" | "+N+`
`+E+" | "+gp("",v.column-1," ")+gp("",H,"^")}else r+=`
 at `+_}return r};Xf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?w(H[0])+"-"+w(H[1]):w(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function w(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function _(N){return e[N.type](N)}function P(N){var O=N.map(_),H,B;if(O.sort(),O.length>0){for(H=1,B=1;H<O.length;H++)O[H-1]!==O[H]&&(O[B]=O[H],B++);O.length=B}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function dd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:sn},w=R,_="//",P="/*",E="*/",N="(",O=")",H="::",B="{",J="}",we="###",ue="let",oe=":",Pe="=",G="var",V="<:",Z="#[",Q="]",X="each",ee=",",ne="for",ie="return",Te="loop",Le="break",_e="continue",at="+=",wt="-=",fr="\\",mt="||",dt="&&",Ze="==",yt="!=",Jt="<=",Zt=">=",ht="<",Ir=">",Qt="+",Pr="-",Bt="*",Ar="^",Ur="/",tr="%",jr="!",Xt="[",$r=".",W="if",re="elif",fe="else",xe="match",ce="=>",Me="eval",Oe="`",Ae='"',ke="'",$e='\\"',Je="\\'",rt="true",Ye="false",Qe="null",lt=";",$t="@",Nt="@(",Ct=`\r
`,_t=/^[A-Z0-9_:]/i,ot=/^[^`{]/,ks=/^[{}`]/,as=/^[+\-]/,Xr=/^[1-9]/,xt=/^[0-9]/,It=/^[A-Z_]/i,yn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,rr=uu(),Dt=le("//",!1),Br=le("/*",!1),Sn=le("*/",!1),Pt=le("(",!1),ut=le(")",!1),kr=le("::",!1),qt=le("{",!1),st=le("}",!1),Lt=le("###",!1),ms=le("let",!1),Ht=le(":",!1),Ut=le("=",!1),qr=le("var",!1),Na=le("<:",!1),Mr=le("#[",!1),is=le("]",!1),Ns=le("each",!1),ft=le(",",!1),Tt=le("for",!1),Ks=le("return",!1),Er=D([["A","Z"],["0","9"],"_",":"],!1,!0),Sr=le("loop",!1),Gi=le("break",!1),Fa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Oa=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),Nn=le(">=",!1),Vs=le("<",!1),Fn=le(">",!1),Ia=le("+",!1),tl=le("-",!1),ja=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Ts=le(".",!1),Tn=le("if",!1),Ws=le("elif",!1),Gs=le("else",!1),al=le("match",!1),Js=le("=>",!1),ls=le("eval",!1),Os=le("`",!1),xr=D(["`","{"],!0,!1),Zs=D(["{","}","`"],!1,!1),Qs=le('"',!1),Xs=le("'",!1),us=le('\\"',!1),Ys=le("\\'",!1),Is=D(["+","-"],!1,!1),Ra=D([["1","9"]],!1,!1),Yt=D([["0","9"]],!1,!1),Da=le("true",!1),dr=le("false",!1),il=le("null",!1),en=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),On=D([["A","Z"],["0","9"],"_"],!1,!0),fl=le(`\r
`,!1),La=D(["\r",`
`],!1,!1),ol=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ha=function(a){return a.join("")},hl=function(){return F()},Ua=function(){return F()},pl=function(){return""},Ba=function(){return""},vl=function(a){return a??[]},qa=function(a,l){return l},gl=function(a,l){return[a,...l]},In=function(a,l){return l},dl=function(a,l){return[a,...l]},jn=function(a,l){return l},yl=function(a,l){return[a,...l]},za=function(a){return a},wl=function(a,l){return y("ns",{name:a,members:l})},ml=function(a,l){return y("meta",{name:a,value:l})},$l=function(a){return y("meta",{name:null,value:a})},xl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return y("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return y("identifier",{name:"print",chain:[y("callChain",{args:[a]})]})},Cl=function(a,l){return y("attr",{name:a,value:l??y("bool",{value:!0})})},_l=function(a,l,$){return y("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return y("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return y("for",{var:a,from:l??y("num",{value:0}),to:$,for:p})},Nl=function(a,l){return y("for",{times:a,for:l})},Ka=function(a,l){return y("for",{times:a,for:l})},Fl=function(a){return y("return",{expr:a})},Tl=function(a){return y("loop",{statements:a})},Ol=function(){return y("break",{})},Il=function(){return y("continue",{})},jl=function(a,l,$){return l==="+="?y("addAssign",{dest:a,expr:$}):l==="-="?y("subAssign",{dest:a,expr:$}):y("assign",{dest:a,expr:$})},Rn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return y("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Va=function(){return F()},Dl=function(a){return y("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return y("callChain",{args:a??[]})},Wa=function(a,l){return l},Ul=function(a,l){return[a,...l]},Dn=function(a){return y("indexChain",{index:a})},Bl=function(a){return y("propChain",{name:a})},ql=function(a,l,$,p){return y("if",{cond:a,then:l,elseif:$??[],else:p})},zl=function(a,l){return[a,...l]},Kl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ga=function(a,l,$){return{q:l,a:$}},Ja=function(a,l,$){return y("match",{about:a,qs:l??[],default:$})},Za=function(a){return y("block",{statements:a})},Qa=function(a){return y("identifier",{name:a})},Wl=function(a){return y("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Xa=function(a){return a},Jl=function(a){return y("str",{value:a.join("")})},Ya=function(a){return a},ei=function(a){return y("str",{value:a.join("")})},Zl=function(){return'"'},ti=function(){return"'"},Ql=function(){return y("num",{value:parseFloat(F())})},Xl=function(){return y("num",{value:parseFloat(F())})},ri=function(){return y("num",{value:parseInt(F(),10)})},Yl=function(){return y("num",{value:parseInt(F(),10)})},si=function(){return y("bool",{value:!0})},eu=function(){return y("bool",{value:!1})},tu=function(){return y("null",{})},ni=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},ai=function(a){return a},Ln=function(a){return y("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},Hn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),y("def",{name:l,expr:y("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return y("fn",{args:a??[],retType:l},$??[])},ii=function(a){return a},iu=function(a){return y("arr",{value:a})},li=function(a,l){return{k:a,v:l}},ui=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return y("obj",{value:l})},lu=function(a,l){return y("fnTypeSource",{args:a??[],result:l})},fi=function(a,l){return[a,...l]},c=function(a,l){return y("namedTypeSource",{name:a,inner:l})},te=function(a){return y("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},tn=function(a){return y("block",{statements:a??[]})},i=0,S=0,zr=[{line:1,column:1}],f=0,Y=[],T=0,j={},bt;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');w=v[r.startRule]}function F(){return t.substring(S,i)}function q(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),oi(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function pe(){return{type:"end"}}function er(a){var l=zr[a],$;if(l)return l;for($=a-1;!zr[$];)$--;for(l=zr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return zr[a]=l,l}function Ds(a,l,$){var p=er(a),s=er(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return $&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function L(a){i<f||(i>f&&(f=i,Y=[]),Y.push(a))}function oi(a,l){return new Xf(a,null,null,l)}function rn(a,l,$){return new Xf(Xf.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ha(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=ln(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=un(),l!==e&&(S=a,l=Ua()),a=l,a===e&&(a=Un(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,T===0&&L(rr))))),j[$]={nextPos:i,result:a},a)}function Un(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,T===0&&L(Dt)),l!==e){for($=[],p=i,s=i,T++,u=o(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,u=o(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,T===0&&L(Br)),l!==e){for($=[],p=i,s=i,T++,t.substr(i,2)===E?(u=E,i+=2):(u=e,T===0&&L(Sn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.substr(i,2)===E?(u=E,i+=2):(u=e,T===0&&L(Sn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,T===0&&L(Sn)),p!==e?(S=a,a=Ba()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sn(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=nn(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=qa(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=nn(),h!==e?(S=p,p=qa(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Nr(),h!==e?(S=p,p=In(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Kr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=br(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ae(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=br(),h!==e?(S=p,p=jn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function nn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=ci(),a===e&&(a=br())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function br(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Vr(),a===e&&(a=wr(),a===e&&(a=hi(),a===e&&(a=cu(),a===e&&(a=fu(),a===e&&(a=pi(),a===e&&(a=ou(),a===e&&(a=Wr(),a===e&&(a=vi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=gi(),a===e&&(a=fs()),j[l]={nextPos:i,result:a},a)}function fs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=Jr(),a===e&&(a=Cs()))),j[l]={nextPos:i,result:a},a)}function Cs(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=$i(),a===e&&(a=an(),a===e&&(a=ln(),a===e&&(a=un(),a===e&&(a=xi(),a===e&&(a=Xn(),a===e&&(a=ea(),a===e&&(a=ta(),a===e&&(a=du(),a===e&&(a=di(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(Pt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=za(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=xi(),a===e&&(a=un(),a===e&&(a=Xn(),a===e&&(a=na(),a===e&&(a=Ai(),a===e&&(a=ea()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,C=i*76+14,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,T===0&&L(kr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=B,i++):(u=e,T===0&&L(qt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,T===0&&L(st)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ci(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,C=j[m];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,T===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,T===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Pe,i++):(d=e,T===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,T===0&&L(qr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=oe,i++):(d=e,T===0&&L(Ht)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Pe,i++):(d=e,T===0&&L(Ut)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,T===0&&L(Na)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Z?(l=Z,i+=2):(l=e,T===0&&L(Mr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=Q,i++):(d=e,T===0&&L(is)),d!==e?(S=a,a=Cl(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+19,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.substr(i,4)===X?(l=X,i+=4):(l=e,T===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e)if(t.charCodeAt(i)===41?(A=O,i++):(A=e,T===0&&L(ut)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=Ie(),I!==e?(S=a,a=_l(d,C,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===X?(l=X,i+=4):(l=e,T===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(C=[],A=g(),A!==e)for(;A!==e;)C.push(A),A=g();else C=e;C!==e?(A=Ie(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K=i*76+20,se=j[K];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=Pe,i++):(m=e,T===0&&L(Ut)),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,T===0&&L(ft)),m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=O,i++):(M=e,T===0&&L(ut)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=Ie(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=Pe,i++):(x=e,T===0&&L(Ut)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=Xe(),C!==e?(S=h,h=El(u,C)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ft)),x===e&&(x=null),m=[],C=g();C!==e;)m.push(C),C=g();if(C=Xe(),C!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=Ie(),M!==e?(S=a,a=Sl(u,h,C,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(Pt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ie(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ne?(l=ne,i+=3):(l=e,T===0&&L(Tt)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=Ie(),u!==e?(S=a,a=Ka(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[K]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ie?(l=ie,i+=6):(l=e,T===0&&L(Ks)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Wr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,T===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,T===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(st)),h!==e?(S=a,a=Tl(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Le?(l=Le,i+=5):(l=e,T===0&&L(Gi)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Ol()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===_e?(l=_e,i+=8):(l=e,T===0&&L(Fa)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,T===0&&L(Ji)),p===e&&(t.substr(i,2)===wt?(p=wt,i+=2):(p=e,T===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=Pe,i++):(p=e,T===0&&L(Ut)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=fs(),l!==e){for($=[],p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Gr();u!==e;)s.push(u),u=Gr();if(u=Bn(),u!==e){for(d=[],h=Gr();h!==e;)d.push(h),h=Gr();h=fs(),h!==e?(S=p,p=Rn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Gr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=fr,i++):(l=e,T===0&&L(Ta)),l!==e?($=ae(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Bn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===mt?(l=mt,i+=2):(l=e,T===0&&L(Oa)),l===e&&(t.substr(i,2)===dt?(l=dt,i+=2):(l=e,T===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,T===0&&L(Xi)),l===e&&(t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(Yi)),l===e&&(t.substr(i,2)===Jt?(l=Jt,i+=2):(l=e,T===0&&L(el)),l===e&&(t.substr(i,2)===Zt?(l=Zt,i+=2):(l=e,T===0&&L(Nn)),l===e&&(t.charCodeAt(i)===60?(l=ht,i++):(l=e,T===0&&L(Vs)),l===e&&(t.charCodeAt(i)===62?(l=Ir,i++):(l=e,T===0&&L(Fn)),l===e&&(t.charCodeAt(i)===43?(l=Qt,i++):(l=e,T===0&&L(Ia)),l===e&&(t.charCodeAt(i)===45?(l=Pr,i++):(l=e,T===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Bt,i++):(l=e,T===0&&L(ja)),l===e&&(t.charCodeAt(i)===94?(l=Ar,i++):(l=e,T===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Ur,i++):(l=e,T===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=tr,i++):(l=e,T===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Va()),a=l,j[$]={nextPos:i,result:a},a)}function di(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=jr,i++):(l=e,T===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function Jr(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=Cs(),l!==e){if($=[],p=qn(),p===e&&(p=yi(),p===e&&(p=Kn())),p!==e)for(;p!==e;)$.push(p),p=qn(),p===e&&(p=yi(),p===e&&(p=Kn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function qn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(Pt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=zn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function zn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Wa(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Wa(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function yi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=Dn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Kn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=$r,i++):(l=e,T===0&&L(Ts)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+35,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,T===0&&L(Tn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ie(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=wi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=mi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=zl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,T===0&&L(Ws)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=Ie(),d!==e?(S=a,a=Kl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,T===0&&L(Gs)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Ie(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=i*76+39,ve=j[Ne];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,T===0&&L(al)),l!==e)if($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=B,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ga(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,C=Xe(),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();S=m,m=Ga(s,C,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(C=Bt,i++):(C=e,T===0&&L(ja)),C!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ce?(M=ce,i+=2):(M=e,T===0&&L(Js)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=Ie(),U!==e){for(K=[],se=g();se!==e;)K.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),C=[],A=g();A!==e;)C.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,T===0&&L(st)),A!==e?(S=a,a=Ja(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Ne]={nextPos:i,result:a},a}function an(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Me?(l=Me,i+=4):(l=e,T===0&&L(ls)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=B,i++):(p=e,T===0&&L(qt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Kr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(st)),h!==e?(S=a,a=Za(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=Ci(),l!==e&&(S=a,l=Qa(l)),a=l,j[$]={nextPos:i,result:a},a)}function ln(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Oe,i++):(l=e,T===0&&L(Os)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===96?(u=Oe,i++):(u=e,T===0&&L(Os)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===96?(u=Oe,i++):(u=e,T===0&&L(Os)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Vn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Oe,i++):(p=e,T===0&&L(Os)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Vn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Wn(),$!==e)for(;$!==e;)l.push($),$=Wn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Wn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Gn(),a===e&&(ot.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(xr))),j[l]={nextPos:i,result:a},a)}function Gn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=fr,i++):(l=e,T===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,T===0&&L(Zs)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function un(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,T===0&&L(Qs)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(Qs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Xa(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(Qs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Jn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Xa(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,T===0&&L(Qs)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=ke,i++):(l=e,T===0&&L(Xs)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===39?(u=ke,i++):(u=e,T===0&&L(Xs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===39?(u=ke,i++):(u=e,T===0&&L(Xs)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=fn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(rr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=ke,i++):(p=e,T===0&&L(Xs)),p!==e?(S=a,a=ei($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,T===0&&L(us)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function fn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,T===0&&L(Ys)),l!==e&&(S=a,l=ti()),a=l,j[$]={nextPos:i,result:a},a)}function xi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=Zn(),a===e&&(a=Qn()),j[l]={nextPos:i,result:a},a)}function Zn(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Ra)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=$r,i++):(p=e,T===0&&L(Ts)),p!==e){if(s=[],xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(Yt)),u!==e)for(;u!==e;)s.push(u),xt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(Yt));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Yt)),l!==e)if(t.charCodeAt(i)===46?($=$r,i++):($=e,T===0&&L(Ts)),$!==e){if(p=[],xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(Yt)),s!==e)for(;s!==e;)p.push(s),xt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(Yt));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),Xr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Ra)),l!==e){if($=[],xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt)),p!==e)for(;p!==e;)$.push(p),xt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Yt));else $=e;$!==e?(S=a,a=ri()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,as.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),xt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Yt)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=Yn()),j[l]={nextPos:i,result:a},a)}function bi(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===rt?(l=rt,i+=4):(l=e,T===0&&L(Da)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=si()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,T===0&&L(dr)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,T===0&&L(il)),l!==e?($=i,T++,_t.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Er)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+56,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ni(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=ni(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(st)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,C=i*76+57,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ai(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ai(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=Ln(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function sa(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=ra(),l!==e){for($=[],p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=ra(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=Hn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U,K,se,Ne=i*76+60,ve=j[Ne];if(ve)return i=ve.nextPos,ve.result;if(a=i,t.charCodeAt(i)===64?(l=$t,i++):(l=e,T===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,T===0&&L(Pt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=sa(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=O,i++):(m=e,T===0&&L(ut)),m!==e){for(C=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=oe,i++):(M=e,T===0&&L(Ht)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?C=U:(i=C,C=e)}else i=C,C=e;for(C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=B,i++):(M=e,T===0&&L(qt)),M!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Kr(),U===e&&(U=null),K=[],se=g();se!==e;)K.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,T===0&&L(st)),se!==e?(S=a,a=nu($,p,s,h,C,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Ne]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===Nt?(l=Nt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=oe,i++):(x=e,T===0&&L(Ht)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();C=tt(),C!==e?d=C:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=B,i++):(x=e,T===0&&L(qt)),x!==e){for(m=[],C=g();C!==e;)m.push(C),C=g();for(C=Kr(),C===e&&(C=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=J,i++):(M=e,T===0&&L(st)),M!==e?(S=a,a=au(p,d,C)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function na(){var a,l,$,p,s,u,d,h,x,m,C=i*76+62,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=Xt,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ft)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,T===0&&L(is)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function Ai(){var a,l,$,p,s,u,d,h,x,m,C,A,M,I,U=i*76+63,K=j[U];if(K)return i=K.nextPos,K.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=li(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=oe,i++):(h=e,T===0&&L(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(C=[],A=g();A!==e;)C.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ft)),A===e&&(t.charCodeAt(i)===59?(A=lt,i++):(A=e,T===0&&L(en))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();S=s,s=li(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(st)),s!==e?(S=a,a=ui(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=sr()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,C=i*76+65,A=j[C];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===Nt?(l=Nt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=_s(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===ce?(h=ce,i+=2):(h=e,T===0&&L(Js)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[C]={nextPos:i,result:a},a}function _s(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=fi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function sr(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=ht,i++):(p=e,T===0&&L(Vs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Ir,i++):(h=e,T===0&&L(Fn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,It.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(ul)),l!==e){for($=[],yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(On));p!==e;)$.push(p),yn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(On));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=oe,i++):(s=e,T===0&&L(Ht)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,T===0&&L(ft)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function Ie(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=B,i++):(l=e,T===0&&L(qt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Kr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(st)),u!==e?(S=a,a=tn(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=br()),j[d]={nextPos:i,result:a},a}function ae(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ct?(a=Ct,i+=2):(a=e,T===0&&L(fl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(La))),j[l]={nextPos:i,result:a},a)}function o(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,T++,t.length>i?(l=t.charAt(i),i++):(l=e,T===0&&L(rr)),T--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ae()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(ol)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function y(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=q();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(bt=w(),bt!==e&&i===t.length)return bt;throw bt!==e&&i<t.length&&L(pe()),rn(Y,f<t.length?t.charAt(f):null,f<t.length?Ds(f,f+1):Ds(f,f))}const q2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function z2(t){return q2.includes(t.type)}function uw(t){return"chain"in t&&t.chain!==null}function K2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function V2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function W2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function jt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=jt(e.expr,r);break}case"return":{e.expr=jt(e.expr,r);break}case"each":{e.items=jt(e.items,r),e.for=jt(e.for,r);break}case"for":{e.from!=null&&(e.from=jt(e.from,r)),e.to!=null&&(e.to=jt(e.to,r)),e.times!=null&&(e.times=jt(e.times,r)),e.for=jt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=jt(e.expr,r),e.dest=jt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=jt(e.operands[n],r);break}case"not":{e.expr=jt(e.expr,r);break}case"if":{e.cond=jt(e.cond,r),e.then=jt(e.then,r);for(const n of e.elseif)n.cond=jt(n.cond,r),n.then=jt(n.then,r);e.else!=null&&(e.else=jt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=jt(e.children[n],r);break}case"match":{e.about=jt(e.about,r);for(const n of e.qs)n.q=jt(n.q,r),n.a=jt(n.a,r);e.default!=null&&(e.default=jt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=jt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],jt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=jt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"indexChain":{e.index=jt(e.index,r);break}case"call":{e.target=jt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"index":{e.target=jt(e.target,r),e.index=jt(e.index,r);break}case"prop":{e.target=jt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=jt(e.members[n],r);break}}if(uw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=jt(e.chain[n],r);return e}const dp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function yp(t){throw new ao(`Reserved word "${t}" cannot be used as variable name.`)}function G2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{dp.includes(t.name)&&yp(t.name);break}case"meta":{t.name!=null&&dp.includes(t.name)&&yp(t.name);break}case"fn":{for(const r of t.args)dp.includes(r.name)&&yp(r.name);break}}return t}function J2(t){for(const r of t)jt(r,G2);return t}function yd(t){return{type:"simple",name:t}}function Z2(t,r){return{type:"generic",name:t,inners:r}}function Q2(t,r){return{type:"fn",args:t,result:r}}function sh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=sh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>sh(n)).join(", "),e=sh(t.result);return`@(${r}) { ${e} }`}}}function Bo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return yd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Bo(t.inner):r=yd("any"),Z2(t.name,[r])}}throw new ao(`Unknown type: '${sh(t)}'`)}else{const r=t.args.map(e=>Bo(e));return Q2(r,Bo(t.result))}}function X2(t){switch(t.type){case"def":{t.varType!=null&&Bo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Bo(r.argType);t.retType!=null&&Bo(t.retType);break}}return t}function Y2(t){for(const r of t)jt(r,X2);return t}function nh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=nh(n.expr.children)),r.push(n);else{if(e.length>0)throw new ao("invalid attribute.");switch(n.type){case"fn":{n.children=nh(n.children);break}case"block":{n.statements=nh(n.statements);break}}r.push(n)}if(e.length>0)throw new ao("invalid attribute.");return r}function eC(t){if(z2(t)&&uw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=K2(n,v.args,v.loc);break}case"indexChain":{n=V2(n,v.index,v.loc);break}case"propChain":{n=W2(n,v.name,v.loc);break}}return n}return t}function tC(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],eC);return t}function ah(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function fw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return ah(t,r,e);{const{left:n,right:v,info:w}=t;return ah(n,fw(v,r,e),w)}}function If(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[If(t.left),If(t.right)]}}const rC={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:If(t.left),right:If(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:If(t.left),right:If(t.right)}),priority:3}};function sC(t){const r=t.operators.map(n=>{const v=rC[n];if(v==null)throw new ao(`No such operator: ${n}.`);return v});let e=ah(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=fw(e,t.operands[2+n],r[1+n]);return If(e)}function nC(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],e=>e.type==="infix"?sC(e):e);return t}const Mf=class Mf{constructor(){he(this,"plugins");this.plugins={validate:[J2,Y2],transform:[nh,tC,nC]}}static parse(r){return Mf.instance==null&&(Mf.instance=new Mf),Mf.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=dd(r,{startRule:"Preprocess"});e=dd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ao(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new ao(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};he(Mf,"instance");let dv=Mf;const aC="0.14.1",iC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let yv=[],ec=null;function lC(t){return yv=dv.parse(t),JSON.stringify(yv,null,"	")}async function uC(t){ec==null||ec.abort(),ec=new Sa({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:pv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:pv(e.val,!0),print:!1});break}}});try{await ec.exec(yv)}catch(r){t.err(r)}}const fC=Object.freeze(Object.defineProperty({__proto__:null,exec:uC,parse:lC,samples:iC,version:aC},Symbol.toStringTag,{value:"Module"})),oC=t=>(i0("data-v-c56fd67b"),t=t(),l0(),t),cC={id:"root"},hC={id:"grid1"},pC={class:"type"},vC={id:"grid2"},gC=oC(()=>qi("header",null,null,-1)),wd=["next","develop","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],md="0.18.0",dC=mc({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:v,samples:w}={next:Xx,develop:jb,"0.18.0":$1,"0.17.0":sA,"0.16.0":RA,"0.15.0":C2,"0.14.1":fC}[r.ver],_=Ef(window.localStorage.getItem(v)??'<: "Hello, AiScript!"'),P=Ef([]),E=Ef(""),N=Ef(null);ac(_,()=>{window.localStorage.setItem(v,_.value);try{E.value=e(_.value),N.value=null}catch(H){const B=H;N.value=B.message,console.error("info"in B?B.info:B);return}},{immediate:!0});function O(){P.value=[],n({in:H=>new Promise(B=>{const J=window.prompt(H);B(J??"")}),out:H=>P.value.push(H),end:H=>P.value.push(H),err:H=>{console.error(H),window.alert(`${H}`)}})}return(H,B)=>(os(),Us("div",cC,[qi("div",hC,[cs(C$,{modelValue:_.value,"onUpdate:modelValue":B[0]||(B[0]=J=>_.value=J),samples:vc(w),parseError:N.value,onRun:O},null,8,["modelValue","samples","parseError"]),cs(rc,{id:"logs"},{header:Pa(()=>[Cu("Output")]),default:Pa(()=>[(os(!0),Us(xn,null,uh(P.value,J=>(os(),Us("div",{class:Cn(["log",[{print:J.print},J.type]]),key:J.id},[qi("span",pC,jf(J.type),1),Cu(" "+jf(J.text),1)],2))),128))]),_:1})]),qi("div",vC,[cs(rc,{id:"ast"},{header:Pa(()=>[Cu("AST")]),default:Pa(()=>[qi("pre",null,jf(E.value),1)]),_:1}),cs(rc,{id:"bin"},{header:Pa(()=>[Cu("Bytecode")]),default:Pa(()=>[gC]),_:1}),cs(rc,{id:"debugger"},{header:Pa(()=>[Cu("Debugger")]),_:1})])]))}}),yC=xc(dC,[["__scopeId","data-v-c56fd67b"]]),wC={id:"wrapper"},mC=mc({__name:"App",setup(t){const r=Ef(window.localStorage.getItem("version")??md),e=Object.fromEntries(wd.map(v=>[v,v+(v==md?"(latest)":"")]));function n(v){r.value=v,window.localStorage.setItem("version",r.value)}return(v,w)=>(os(),Us("div",wC,[qi("h1",null,[Cu(" AiScript ( "),cs(Cy,{id:"version",options:vc(e),onSelect:n},{default:Pa(()=>[Cu(jf(r.value),1)]),_:1},8,["options"]),Cu(" ) Playground ")]),(os(!0),Us(xn,null,uh(vc(wd),_=>(os(),Us("div",null,[_==r.value?(os(),kh(yC,{key:0,ver:_},null,8,["ver"])):zo("",!0)]))),256))]))}}),$C=xc(mC,[["__scopeId","data-v-caf8f745"]]);Lm($C).mount("#app");
