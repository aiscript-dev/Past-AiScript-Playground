var vw=Object.defineProperty;var gw=(t,r,e)=>r in t?vw(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var ve=(t,r,e)=>gw(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))n(v);new MutationObserver(v=>{for(const y of v)if(y.type==="childList")for(const C of y.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&n(C)}).observe(document,{childList:!0,subtree:!0});function e(v){const y={};return v.integrity&&(y.integrity=v.integrity),v.referrerPolicy&&(y.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?y.credentials="include":v.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function n(v){if(v.ep)return;v.ep=!0;const y=e(v);fetch(v.href,y)}})();/**
* @vue/shared v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $v(t,r){const e=new Set(t.split(","));return n=>e.has(n)}const as={},xf=[],qi=()=>{},dw=()=>!1,$h=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),xv=t=>t.startsWith("onUpdate:"),Es=Object.assign,bv=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},yw=Object.prototype.hasOwnProperty,cr=(t,r)=>yw.call(t,r),wt=Array.isArray,bf=t=>xh(t)==="[object Map]",bd=t=>xh(t)==="[object Set]",jt=t=>typeof t=="function",Ss=t=>typeof t=="string",$o=t=>typeof t=="symbol",ts=t=>t!==null&&typeof t=="object",Ad=t=>(ts(t)||jt(t))&&jt(t.then)&&jt(t.catch),_d=Object.prototype.toString,xh=t=>_d.call(t),ww=t=>xh(t).slice(8,-1),Cd=t=>xh(t)==="[object Object]",Av=t=>Ss(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,sc=$v(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bh=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},mw=/-(\w)/g,qf=bh(t=>t.replace(mw,(r,e)=>e?e.toUpperCase():"")),$w=/\B([A-Z])/g,Vf=bh(t=>t.replace($w,"-$1").toLowerCase()),Pd=bh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Lh=bh(t=>t?`on${Pd(t)}`:""),wo=(t,r)=>!Object.is(t,r),Hh=(t,...r)=>{for(let e=0;e<t.length;e++)t[e](...r)},kd=(t,r,e,n=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:n,value:e})},xw=t=>{const r=parseFloat(t);return isNaN(r)?t:r},bw=t=>{const r=Ss(t)?Number(t):NaN;return isNaN(r)?t:r};let Qv;const Md=()=>Qv||(Qv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function _v(t){if(wt(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],v=Ss(n)?Pw(n):_v(n);if(v)for(const y in v)r[y]=v[y]}return r}else if(Ss(t)||ts(t))return t}const Aw=/;(?![^(]*\))/g,_w=/:([^]+)/,Cw=/\/\*[^]*?\*\//g;function Pw(t){const r={};return t.replace(Cw,"").split(Aw).forEach(e=>{if(e){const n=e.split(_w);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function En(t){let r="";if(Ss(t))r=t;else if(wt(t))for(let e=0;e<t.length;e++){const n=En(t[e]);n&&(r+=n+" ")}else if(ts(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const kw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Mw=$v(kw);function Ed(t){return!!t||t===""}const Sd=t=>!!(t&&t.__v_isRef===!0),ho=t=>Ss(t)?t:t==null?"":wt(t)||ts(t)&&(t.toString===_d||!jt(t.toString))?Sd(t)?ho(t.value):JSON.stringify(t,Nd,2):String(t),Nd=(t,r)=>Sd(r)?Nd(t,r.value):bf(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,v],y)=>(e[Uh(n,y)+" =>"]=v,e),{})}:bd(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>Uh(e))}:$o(r)?Uh(r):ts(r)&&!wt(r)&&!Cd(r)?String(r):r,Uh=(t,r="")=>{var e;return $o(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $u;class Ew{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$u,!r&&$u&&(this.index=($u.scopes||($u.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=$u;try{return $u=this,r()}finally{$u=e}}}on(){$u=this}off(){$u=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function Sw(t,r=$u){r&&r.active&&r.effects.push(t)}function Nw(){return $u}let Uo;class Cv{constructor(r,e,n,v){this.fn=r,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Sw(this,v)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,xo();for(let r=0;r<this._depsLength;r++){const e=this.deps[r];if(e.computed&&(Fw(e.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),bo()}return this._dirtyLevel>=4}set dirty(r){this._dirtyLevel=r?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=po,e=Uo;try{return po=!0,Uo=this,this._runnings++,Xv(this),this.fn()}finally{Yv(this),this._runnings--,Uo=e,po=r}}stop(){this.active&&(Xv(this),Yv(this),this.onStop&&this.onStop(),this.active=!1)}}function Fw(t){return t.value}function Xv(t){t._trackId++,t._depsLength=0}function Yv(t){if(t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)Fd(t.deps[r],t);t.deps.length=t._depsLength}}function Fd(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let po=!0,xp=0;const Od=[];function xo(){Od.push(po),po=!1}function bo(){const t=Od.pop();po=t===void 0?!0:t}function Pv(){xp++}function kv(){for(xp--;!xp&&bp.length;)bp.shift()()}function Td(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const n=t.deps[t._depsLength];n!==r?(n&&Fd(n,t),t.deps[t._depsLength++]=r):t._depsLength++}}const bp=[];function Id(t,r,e){Pv();for(const n of t.keys()){let v;n._dirtyLevel<r&&(v??(v=t.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=r),n._shouldSchedule&&(v??(v=t.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&bp.push(n.scheduler)))}kv()}const jd=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},Ap=new WeakMap,Bo=Symbol(""),_p=Symbol("");function Ma(t,r,e){if(po&&Uo){let n=Ap.get(t);n||Ap.set(t,n=new Map);let v=n.get(e);v||n.set(e,v=jd(()=>n.delete(e))),Td(Uo,v)}}function zu(t,r,e,n,v,y){const C=Ap.get(t);if(!C)return;let P=[];if(r==="clear")P=[...C.values()];else if(e==="length"&&wt(t)){const M=Number(n);C.forEach((N,O)=>{(O==="length"||!$o(O)&&O>=M)&&P.push(N)})}else switch(e!==void 0&&P.push(C.get(e)),r){case"add":wt(t)?Av(e)&&P.push(C.get("length")):(P.push(C.get(Bo)),bf(t)&&P.push(C.get(_p)));break;case"delete":wt(t)||(P.push(C.get(Bo)),bf(t)&&P.push(C.get(_p)));break;case"set":bf(t)&&P.push(C.get(Bo));break}Pv();for(const M of P)M&&Id(M,4);kv()}const Ow=$v("__proto__,__v_isRef,__isVue"),Rd=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter($o)),eg=Tw();function Tw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=mr(this);for(let y=0,C=this.length;y<C;y++)Ma(n,"get",y+"");const v=n[r](...e);return v===-1||v===!1?n[r](...e.map(mr)):v}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){xo(),Pv();const n=mr(this)[r].apply(this,e);return kv(),bo(),n}}),t}function Iw(t){$o(t)||(t=String(t));const r=mr(this);return Ma(r,"has",t),r.hasOwnProperty(t)}class Dd{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const v=this._isReadonly,y=this._isShallow;if(e==="__v_isReactive")return!v;if(e==="__v_isReadonly")return v;if(e==="__v_isShallow")return y;if(e==="__v_raw")return n===(v?y?Gw:Bd:y?Ud:Hd).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const C=wt(r);if(!v){if(C&&cr(eg,e))return Reflect.get(eg,e,n);if(e==="hasOwnProperty")return Iw}const P=Reflect.get(r,e,n);return($o(e)?Rd.has(e):Ow(e))||(v||Ma(r,"get",e),y)?P:Ea(P)?C&&Av(e)?P:P.value:ts(P)?v?qd(P):Sv(P):P}}class Ld extends Dd{constructor(r=!1){super(!1,r)}set(r,e,n,v){let y=r[e];if(!this._isShallow){const M=hc(y);if(!ih(n)&&!hc(n)&&(y=mr(y),n=mr(n)),!wt(r)&&Ea(y)&&!Ea(n))return M?!1:(y.value=n,!0)}const C=wt(r)&&Av(e)?Number(e)<r.length:cr(r,e),P=Reflect.set(r,e,n,v);return r===mr(v)&&(C?wo(n,y)&&zu(r,"set",e,n):zu(r,"add",e,n)),P}deleteProperty(r,e){const n=cr(r,e);r[e];const v=Reflect.deleteProperty(r,e);return v&&n&&zu(r,"delete",e,void 0),v}has(r,e){const n=Reflect.has(r,e);return(!$o(e)||!Rd.has(e))&&Ma(r,"has",e),n}ownKeys(r){return Ma(r,"iterate",wt(r)?"length":Bo),Reflect.ownKeys(r)}}class jw extends Dd{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Rw=new Ld,Dw=new jw,Lw=new Ld(!0);const Mv=t=>t,Ah=t=>Reflect.getPrototypeOf(t);function _c(t,r,e=!1,n=!1){t=t.__v_raw;const v=mr(t),y=mr(r);e||(wo(r,y)&&Ma(v,"get",r),Ma(v,"get",y));const{has:C}=Ah(v),P=n?Mv:e?Fv:pc;if(C.call(v,r))return P(t.get(r));if(C.call(v,y))return P(t.get(y));t!==v&&t.get(r)}function Cc(t,r=!1){const e=this.__v_raw,n=mr(e),v=mr(t);return r||(wo(t,v)&&Ma(n,"has",t),Ma(n,"has",v)),t===v?e.has(t):e.has(t)||e.has(v)}function Pc(t,r=!1){return t=t.__v_raw,!r&&Ma(mr(t),"iterate",Bo),Reflect.get(t,"size",t)}function tg(t){t=mr(t);const r=mr(this);return Ah(r).has.call(r,t)||(r.add(t),zu(r,"add",t,t)),this}function rg(t,r){r=mr(r);const e=mr(this),{has:n,get:v}=Ah(e);let y=n.call(e,t);y||(t=mr(t),y=n.call(e,t));const C=v.call(e,t);return e.set(t,r),y?wo(r,C)&&zu(e,"set",t,r):zu(e,"add",t,r),this}function sg(t){const r=mr(this),{has:e,get:n}=Ah(r);let v=e.call(r,t);v||(t=mr(t),v=e.call(r,t)),n&&n.call(r,t);const y=r.delete(t);return v&&zu(r,"delete",t,void 0),y}function ng(){const t=mr(this),r=t.size!==0,e=t.clear();return r&&zu(t,"clear",void 0,void 0),e}function kc(t,r){return function(n,v){const y=this,C=y.__v_raw,P=mr(C),M=r?Mv:t?Fv:pc;return!t&&Ma(P,"iterate",Bo),C.forEach((N,O)=>n.call(v,M(N),M(O),y))}}function Mc(t,r,e){return function(...n){const v=this.__v_raw,y=mr(v),C=bf(y),P=t==="entries"||t===Symbol.iterator&&C,M=t==="keys"&&C,N=v[t](...n),O=e?Mv:r?Fv:pc;return!r&&Ma(y,"iterate",M?_p:Bo),{next(){const{value:H,done:q}=N.next();return q?{value:H,done:q}:{value:P?[O(H[0]),O(H[1])]:O(H),done:q}},[Symbol.iterator](){return this}}}}function Xu(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function Hw(){const t={get(y){return _c(this,y)},get size(){return Pc(this)},has:Cc,add:tg,set:rg,delete:sg,clear:ng,forEach:kc(!1,!1)},r={get(y){return _c(this,y,!1,!0)},get size(){return Pc(this)},has:Cc,add:tg,set:rg,delete:sg,clear:ng,forEach:kc(!1,!0)},e={get(y){return _c(this,y,!0)},get size(){return Pc(this,!0)},has(y){return Cc.call(this,y,!0)},add:Xu("add"),set:Xu("set"),delete:Xu("delete"),clear:Xu("clear"),forEach:kc(!0,!1)},n={get(y){return _c(this,y,!0,!0)},get size(){return Pc(this,!0)},has(y){return Cc.call(this,y,!0)},add:Xu("add"),set:Xu("set"),delete:Xu("delete"),clear:Xu("clear"),forEach:kc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(y=>{t[y]=Mc(y,!1,!1),e[y]=Mc(y,!0,!1),r[y]=Mc(y,!1,!0),n[y]=Mc(y,!0,!0)}),[t,e,r,n]}const[Uw,Bw,qw,Kw]=Hw();function Ev(t,r){const e=r?t?Kw:qw:t?Bw:Uw;return(n,v,y)=>v==="__v_isReactive"?!t:v==="__v_isReadonly"?t:v==="__v_raw"?n:Reflect.get(cr(e,v)&&v in n?e:n,v,y)}const zw={get:Ev(!1,!1)},Vw={get:Ev(!1,!0)},Ww={get:Ev(!0,!1)};const Hd=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,Gw=new WeakMap;function Jw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Zw(t){return t.__v_skip||!Object.isExtensible(t)?0:Jw(ww(t))}function Sv(t){return hc(t)?t:Nv(t,!1,Rw,zw,Hd)}function Qw(t){return Nv(t,!1,Lw,Vw,Ud)}function qd(t){return Nv(t,!0,Dw,Ww,Bd)}function Nv(t,r,e,n,v){if(!ts(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const y=v.get(t);if(y)return y;const C=Zw(t);if(C===0)return t;const P=new Proxy(t,C===2?n:e);return v.set(t,P),P}function nc(t){return hc(t)?nc(t.__v_raw):!!(t&&t.__v_isReactive)}function hc(t){return!!(t&&t.__v_isReadonly)}function ih(t){return!!(t&&t.__v_isShallow)}function Kd(t){return t?!!t.__v_raw:!1}function mr(t){const r=t&&t.__v_raw;return r?mr(r):t}function Xw(t){return Object.isExtensible(t)&&kd(t,"__v_skip",!0),t}const pc=t=>ts(t)?Sv(t):t,Fv=t=>ts(t)?qd(t):t;class zd{constructor(r,e,n,v){this.getter=r,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Cv(()=>r(this._value),()=>Ic(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=n}get value(){const r=mr(this);return(!r._cacheable||r.effect.dirty)&&wo(r._value,r._value=r.effect.run())&&Ic(r,4),Vd(r),r.effect._dirtyLevel>=2&&Ic(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function Yw(t,r,e=!1){let n,v;const y=jt(t);return y?(n=t,v=qi):(n=t.get,v=t.set),new zd(n,v,y||!v,e)}function Vd(t){var r;po&&Uo&&(t=mr(t),Td(Uo,(r=t.dep)!=null?r:t.dep=jd(()=>t.dep=void 0,t instanceof zd?t:void 0)))}function Ic(t,r=4,e,n){t=mr(t);const v=t.dep;v&&Id(v,r)}function Ea(t){return!!(t&&t.__v_isRef===!0)}function To(t){return e0(t,!1)}function e0(t,r){return Ea(t)?t:new t0(t,r)}class t0{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:mr(r),this._value=e?r:pc(r)}get value(){return Vd(this),this._value}set value(r){const e=this.__v_isShallow||ih(r)||hc(r);r=e?r:mr(r),wo(r,this._rawValue)&&(this._rawValue,this._rawValue=r,this._value=e?r:pc(r),Ic(this,4))}}function vc(t){return Ea(t)?t.value:t}const r0={get:(t,r,e)=>vc(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const v=t[r];return Ea(v)&&!Ea(e)?(v.value=e,!0):Reflect.set(t,r,e,n)}};function Wd(t){return nc(t)?t:new Proxy(t,r0)}/**
* @vue/runtime-core v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function vo(t,r,e,n){try{return n?t(...n):t()}catch(v){_h(v,r,e)}}function zi(t,r,e,n){if(jt(t)){const v=vo(t,r,e,n);return v&&Ad(v)&&v.catch(y=>{_h(y,r,e)}),v}if(wt(t)){const v=[];for(let y=0;y<t.length;y++)v.push(zi(t[y],r,e,n));return v}}function _h(t,r,e,n=!0){const v=r?r.vnode:null;if(r){let y=r.parent;const C=r.proxy,P=`https://vuejs.org/error-reference/#runtime-${e}`;for(;y;){const N=y.ec;if(N){for(let O=0;O<N.length;O++)if(N[O](t,C,P)===!1)return}y=y.parent}const M=r.appContext.config.errorHandler;if(M){xo(),vo(M,null,10,[t,C,P]),bo();return}}s0(t,e,v,n)}function s0(t,r,e,n=!0){console.error(t)}let gc=!1,Cp=!1;const kn=[];let Fu=0;const Af=[];let ao=null,So=0;const Gd=Promise.resolve();let Ov=null;function n0(t){const r=Ov||Gd;return t?r.then(this?t.bind(this):t):r}function a0(t){let r=Fu+1,e=kn.length;for(;r<e;){const n=r+e>>>1,v=kn[n],y=dc(v);y<t||y===t&&v.pre?r=n+1:e=n}return r}function Tv(t){(!kn.length||!kn.includes(t,gc&&t.allowRecurse?Fu+1:Fu))&&(t.id==null?kn.push(t):kn.splice(a0(t.id),0,t),Jd())}function Jd(){!gc&&!Cp&&(Cp=!0,Ov=Gd.then(Qd))}function i0(t){const r=kn.indexOf(t);r>Fu&&kn.splice(r,1)}function l0(t){wt(t)?Af.push(...t):(!ao||!ao.includes(t,t.allowRecurse?So+1:So))&&Af.push(t),Jd()}function ag(t,r,e=gc?Fu+1:0){for(;e<kn.length;e++){const n=kn[e];if(n&&n.pre){if(t&&n.id!==t.uid)continue;kn.splice(e,1),e--,n()}}}function Zd(t){if(Af.length){const r=[...new Set(Af)].sort((e,n)=>dc(e)-dc(n));if(Af.length=0,ao){ao.push(...r);return}for(ao=r,So=0;So<ao.length;So++){const e=ao[So];e.active!==!1&&e()}ao=null,So=0}}const dc=t=>t.id==null?1/0:t.id,u0=(t,r)=>{const e=dc(t)-dc(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Qd(t){Cp=!1,gc=!0,kn.sort(u0);try{for(Fu=0;Fu<kn.length;Fu++){const r=kn[Fu];r&&r.active!==!1&&vo(r,null,14)}}finally{Fu=0,kn.length=0,Zd(),gc=!1,Ov=null,(kn.length||Af.length)&&Qd()}}function o0(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||as;let v=e;const y=r.startsWith("update:"),C=y&&r.slice(7);if(C&&C in n){const O=`${C==="modelValue"?"model":C}Modifiers`,{number:H,trim:q}=n[O]||as;q&&(v=e.map(J=>Ss(J)?J.trim():J)),H&&(v=e.map(xw))}let P,M=n[P=Lh(r)]||n[P=Lh(qf(r))];!M&&y&&(M=n[P=Lh(Vf(r))]),M&&zi(M,t,6,v);const N=n[P+"Once"];if(N){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,zi(N,t,6,v)}}function Xd(t,r,e=!1){const n=r.emitsCache,v=n.get(t);if(v!==void 0)return v;const y=t.emits;let C={},P=!1;if(!jt(t)){const M=N=>{const O=Xd(N,r,!0);O&&(P=!0,Es(C,O))};!e&&r.mixins.length&&r.mixins.forEach(M),t.extends&&M(t.extends),t.mixins&&t.mixins.forEach(M)}return!y&&!P?(ts(t)&&n.set(t,null),null):(wt(y)?y.forEach(M=>C[M]=null):Es(C,y),ts(t)&&n.set(t,C),C)}function Ch(t,r){return!t||!$h(r)?!1:(r=r.slice(2).replace(/Once$/,""),cr(t,r[0].toLowerCase()+r.slice(1))||cr(t,Vf(r))||cr(t,r))}let ya=null,Ph=null;function lh(t){const r=ya;return ya=t,Ph=t&&t.type.__scopeId||null,r}function f0(t){Ph=t}function c0(){Ph=null}function Pa(t,r=ya,e){if(!r||t._n)return t;const n=(...v)=>{n._d&&yg(-1);const y=lh(r);let C;try{C=t(...v)}finally{lh(y),n._d&&yg(1)}return C};return n._n=!0,n._c=!0,n._d=!0,n}function Bh(t){const{type:r,vnode:e,proxy:n,withProxy:v,propsOptions:[y],slots:C,attrs:P,emit:M,render:N,renderCache:O,props:H,data:q,setupState:J,ctx:we,inheritAttrs:ue}=t,he=lh(t);let Ee,G;try{if(e.shapeFlag&4){const Q=v||n,X=Q;Ee=Nu(N.call(X,Q,O,H,J,q,we)),G=P}else{const Q=r;Ee=Nu(Q.length>1?Q(H,{attrs:P,slots:C,emit:M}):Q(H,null)),G=r.props?P:h0(P)}}catch(Q){oc.length=0,_h(Q,t,1),Ee=vs(ka)}let V=Ee;if(G&&ue!==!1){const Q=Object.keys(G),{shapeFlag:X}=V;Q.length&&X&7&&(y&&Q.some(xv)&&(G=p0(G,y)),V=mo(V,G,!1,!0))}return e.dirs&&(V=mo(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(e.dirs):e.dirs),e.transition&&(V.transition=e.transition),Ee=V,lh(he),Ee}const h0=t=>{let r;for(const e in t)(e==="class"||e==="style"||$h(e))&&((r||(r={}))[e]=t[e]);return r},p0=(t,r)=>{const e={};for(const n in t)(!xv(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function v0(t,r,e){const{props:n,children:v,component:y}=t,{props:C,children:P,patchFlag:M}=r,N=y.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&M>=0){if(M&1024)return!0;if(M&16)return n?ig(n,C,N):!!C;if(M&8){const O=r.dynamicProps;for(let H=0;H<O.length;H++){const q=O[H];if(C[q]!==n[q]&&!Ch(N,q))return!0}}}else return(v||P)&&(!P||!P.$stable)?!0:n===C?!1:n?C?ig(n,C,N):!0:!!C;return!1}function ig(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let v=0;v<n.length;v++){const y=n[v];if(r[y]!==t[y]&&!Ch(e,y))return!0}return!1}function g0({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const d0=Symbol.for("v-ndc"),y0=t=>t.__isSuspense;function w0(t,r){r&&r.pendingBranch?wt(t)?r.effects.push(...t):r.effects.push(t):l0(t)}function kh(t,r,e=Mn,n=!1){if(e){const v=e[t]||(e[t]=[]),y=r.__weh||(r.__weh=(...C)=>{xo();const P=$c(e),M=zi(r,e,t,C);return P(),bo(),M});return n?v.unshift(y):v.push(y),y}}const Vu=t=>(r,e=Mn)=>{(!Nh||t==="sp")&&kh(t,(...n)=>r(...n),e)},m0=Vu("bm"),Yd=Vu("m"),$0=Vu("bu"),x0=Vu("u"),ey=Vu("bum"),ty=Vu("um"),b0=Vu("sp"),A0=Vu("rtg"),_0=Vu("rtc");function C0(t,r=Mn){kh("ec",t,r)}function Po(t,r,e,n){const v=t.dirs,y=r&&r.dirs;for(let C=0;C<v.length;C++){const P=v[C];y&&(P.oldValue=y[C].value);let M=P.dir[n];M&&(xo(),zi(M,e,8,[t.el,P,t,r]),bo())}}function uh(t,r,e,n){let v;const y=e;if(wt(t)||Ss(t)){v=new Array(t.length);for(let C=0,P=t.length;C<P;C++)v[C]=r(t[C],C,void 0,y)}else if(typeof t=="number"){v=new Array(t);for(let C=0;C<t;C++)v[C]=r(C+1,C,void 0,y)}else if(ts(t))if(t[Symbol.iterator])v=Array.from(t,(C,P)=>r(C,P,void 0,y));else{const C=Object.keys(t);v=new Array(C.length);for(let P=0,M=C.length;P<M;P++){const N=C[P];v[P]=r(t[N],N,P,y)}}else v=[];return v}/*! #__NO_SIDE_EFFECTS__ */function mc(t,r){return jt(t)?Es({name:t.name},r,{setup:t}):t}const ac=t=>!!t.type.__asyncLoader;function jc(t,r,e={},n,v){if(ya.isCE||ya.parent&&ac(ya.parent)&&ya.parent.isCE)return r!=="default"&&(e.name=r),vs("slot",e,n);let y=t[r];y&&y._c&&(y._d=!1),ps();const C=y&&ry(y(e)),P=Sh(Pn,{key:e.key||C&&C.key||`_${r}`},C||[],C&&t._===1?64:-2);return P.scopeId&&(P.slotScopeIds=[P.scopeId+"-s"]),y&&y._c&&(y._d=!0),P}function ry(t){return t.some(r=>ch(r)?!(r.type===ka||r.type===Pn&&!ry(r.children)):!0)?t:null}const Pp=t=>t?_y(t)?Dv(t):Pp(t.parent):null,ic=Es(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Pp(t.parent),$root:t=>Pp(t.root),$emit:t=>t.emit,$options:t=>Iv(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Tv(t.update)}),$nextTick:t=>t.n||(t.n=n0.bind(t.proxy)),$watch:t=>V0.bind(t)}),qh=(t,r)=>t!==as&&!t.__isScriptSetup&&cr(t,r),P0={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:n,data:v,props:y,accessCache:C,type:P,appContext:M}=t;let N;if(r[0]!=="$"){const J=C[r];if(J!==void 0)switch(J){case 1:return n[r];case 2:return v[r];case 4:return e[r];case 3:return y[r]}else{if(qh(n,r))return C[r]=1,n[r];if(v!==as&&cr(v,r))return C[r]=2,v[r];if((N=t.propsOptions[0])&&cr(N,r))return C[r]=3,y[r];if(e!==as&&cr(e,r))return C[r]=4,e[r];kp&&(C[r]=0)}}const O=ic[r];let H,q;if(O)return r==="$attrs"&&Ma(t.attrs,"get",""),O(t);if((H=P.__cssModules)&&(H=H[r]))return H;if(e!==as&&cr(e,r))return C[r]=4,e[r];if(q=M.config.globalProperties,cr(q,r))return q[r]},set({_:t},r,e){const{data:n,setupState:v,ctx:y}=t;return qh(v,r)?(v[r]=e,!0):n!==as&&cr(n,r)?(n[r]=e,!0):cr(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(y[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:v,propsOptions:y}},C){let P;return!!e[C]||t!==as&&cr(t,C)||qh(r,C)||(P=y[0])&&cr(P,C)||cr(n,C)||cr(ic,C)||cr(v.config.globalProperties,C)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:cr(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function lg(t){return wt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let kp=!0;function k0(t){const r=Iv(t),e=t.proxy,n=t.ctx;kp=!1,r.beforeCreate&&ug(r.beforeCreate,t,"bc");const{data:v,computed:y,methods:C,watch:P,provide:M,inject:N,created:O,beforeMount:H,mounted:q,beforeUpdate:J,updated:we,activated:ue,deactivated:he,beforeDestroy:Ee,beforeUnmount:G,destroyed:V,unmounted:Q,render:X,renderTracked:Z,renderTriggered:ee,errorCaptured:ie,serverPrefetch:ae,expose:Se,inheritAttrs:Te,components:Pe,directives:at,filters:vt}=r;if(N&&M0(N,n,null),C)for(const mt in C){const Ze=C[mt];jt(Ze)&&(n[mt]=Ze.bind(e))}if(v){const mt=v.call(e,e);ts(mt)&&(t.data=Sv(mt))}if(kp=!0,y)for(const mt in y){const Ze=y[mt],$t=jt(Ze)?Ze.bind(e,e):jt(Ze.get)?Ze.get.bind(e,e):qi,Qt=!jt(Ze)&&jt(Ze.set)?Ze.set.bind(e):qi,Xt=pm({get:$t,set:Qt});Object.defineProperty(n,mt,{enumerable:!0,configurable:!0,get:()=>Xt.value,set:pt=>Xt.value=pt})}if(P)for(const mt in P)sy(P[mt],n,e,mt);if(M){const mt=jt(M)?M.call(e):M;Reflect.ownKeys(mt).forEach(Ze=>{T0(Ze,mt[Ze])})}O&&ug(O,t,"c");function xt(mt,Ze){wt(Ze)?Ze.forEach($t=>mt($t.bind(e))):Ze&&mt(Ze.bind(e))}if(xt(m0,H),xt(Yd,q),xt($0,J),xt(x0,we),xt(W0,ue),xt(G0,he),xt(C0,ie),xt(_0,Z),xt(A0,ee),xt(ey,G),xt(ty,Q),xt(b0,ae),wt(Se))if(Se.length){const mt=t.exposed||(t.exposed={});Se.forEach(Ze=>{Object.defineProperty(mt,Ze,{get:()=>e[Ze],set:$t=>e[Ze]=$t})})}else t.exposed||(t.exposed={});X&&t.render===qi&&(t.render=X),Te!=null&&(t.inheritAttrs=Te),Pe&&(t.components=Pe),at&&(t.directives=at)}function M0(t,r,e=qi){wt(t)&&(t=Mp(t));for(const n in t){const v=t[n];let y;ts(v)?"default"in v?y=Rc(v.from||n,v.default,!0):y=Rc(v.from||n):y=Rc(v),Ea(y)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>y.value,set:C=>y.value=C}):r[n]=y}}function ug(t,r,e){zi(wt(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function sy(t,r,e,n){const v=n.includes(".")?dy(e,n):()=>e[n];if(Ss(t)){const y=r[t];jt(y)&&uc(v,y)}else if(jt(t))uc(v,t.bind(e));else if(ts(t))if(wt(t))t.forEach(y=>sy(y,r,e,n));else{const y=jt(t.handler)?t.handler.bind(e):r[t.handler];jt(y)&&uc(v,y,t)}}function Iv(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:v,optionsCache:y,config:{optionMergeStrategies:C}}=t.appContext,P=y.get(r);let M;return P?M=P:!v.length&&!e&&!n?M=r:(M={},v.length&&v.forEach(N=>oh(M,N,C,!0)),oh(M,r,C)),ts(r)&&y.set(r,M),M}function oh(t,r,e,n=!1){const{mixins:v,extends:y}=r;y&&oh(t,y,e,!0),v&&v.forEach(C=>oh(t,C,e,!0));for(const C in r)if(!(n&&C==="expose")){const P=E0[C]||e&&e[C];t[C]=P?P(t[C],r[C]):r[C]}return t}const E0={data:og,props:fg,emits:fg,methods:tc,computed:tc,beforeCreate:ca,created:ca,beforeMount:ca,mounted:ca,beforeUpdate:ca,updated:ca,beforeDestroy:ca,beforeUnmount:ca,destroyed:ca,unmounted:ca,activated:ca,deactivated:ca,errorCaptured:ca,serverPrefetch:ca,components:tc,directives:tc,watch:N0,provide:og,inject:S0};function og(t,r){return r?t?function(){return Es(jt(t)?t.call(this,this):t,jt(r)?r.call(this,this):r)}:r:t}function S0(t,r){return tc(Mp(t),Mp(r))}function Mp(t){if(wt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function ca(t,r){return t?[...new Set([].concat(t,r))]:r}function tc(t,r){return t?Es(Object.create(null),t,r):r}function fg(t,r){return t?wt(t)&&wt(r)?[...new Set([...t,...r])]:Es(Object.create(null),lg(t),lg(r??{})):r}function N0(t,r){if(!t)return r;if(!r)return t;const e=Es(Object.create(null),t);for(const n in r)e[n]=ca(t[n],r[n]);return e}function ny(){return{app:null,config:{isNativeTag:dw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let F0=0;function O0(t,r){return function(n,v=null){jt(n)||(n=Es({},n)),v!=null&&!ts(v)&&(v=null);const y=ny(),C=new WeakSet;let P=!1;const M=y.app={_uid:F0++,_component:n,_props:v,_container:null,_context:y,_instance:null,version:vm,get config(){return y.config},set config(N){},use(N,...O){return C.has(N)||(N&&jt(N.install)?(C.add(N),N.install(M,...O)):jt(N)&&(C.add(N),N(M,...O))),M},mixin(N){return y.mixins.includes(N)||y.mixins.push(N),M},component(N,O){return O?(y.components[N]=O,M):y.components[N]},directive(N,O){return O?(y.directives[N]=O,M):y.directives[N]},mount(N,O,H){if(!P){const q=vs(n,v);return q.appContext=y,H===!0?H="svg":H===!1&&(H=void 0),O&&r?r(q,N):t(q,N,H),P=!0,M._container=N,N.__vue_app__=M,Dv(q.component)}},unmount(){P&&(t(null,M._container),delete M._container.__vue_app__)},provide(N,O){return y.provides[N]=O,M},runWithContext(N){const O=lc;lc=M;try{return N()}finally{lc=O}}};return M}}let lc=null;function T0(t,r){if(Mn){let e=Mn.provides;const n=Mn.parent&&Mn.parent.provides;n===e&&(e=Mn.provides=Object.create(n)),e[t]=r}}function Rc(t,r,e=!1){const n=Mn||ya;if(n||lc){const v=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:lc._context.provides;if(v&&t in v)return v[t];if(arguments.length>1)return e&&jt(r)?r.call(n&&n.proxy):r}}const ay={},iy=()=>Object.create(ay),ly=t=>Object.getPrototypeOf(t)===ay;function I0(t,r,e,n=!1){const v={},y=iy();t.propsDefaults=Object.create(null),uy(t,r,v,y);for(const C in t.propsOptions[0])C in v||(v[C]=void 0);e?t.props=n?v:Qw(v):t.type.props?t.props=v:t.props=y,t.attrs=y}function j0(t,r,e,n){const{props:v,attrs:y,vnode:{patchFlag:C}}=t,P=mr(v),[M]=t.propsOptions;let N=!1;if((n||C>0)&&!(C&16)){if(C&8){const O=t.vnode.dynamicProps;for(let H=0;H<O.length;H++){let q=O[H];if(Ch(t.emitsOptions,q))continue;const J=r[q];if(M)if(cr(y,q))J!==y[q]&&(y[q]=J,N=!0);else{const we=qf(q);v[we]=Ep(M,P,we,J,t,!1)}else J!==y[q]&&(y[q]=J,N=!0)}}}else{uy(t,r,v,y)&&(N=!0);let O;for(const H in P)(!r||!cr(r,H)&&((O=Vf(H))===H||!cr(r,O)))&&(M?e&&(e[H]!==void 0||e[O]!==void 0)&&(v[H]=Ep(M,P,H,void 0,t,!0)):delete v[H]);if(y!==P)for(const H in y)(!r||!cr(r,H))&&(delete y[H],N=!0)}N&&zu(t.attrs,"set","")}function uy(t,r,e,n){const[v,y]=t.propsOptions;let C=!1,P;if(r)for(let M in r){if(sc(M))continue;const N=r[M];let O;v&&cr(v,O=qf(M))?!y||!y.includes(O)?e[O]=N:(P||(P={}))[O]=N:Ch(t.emitsOptions,M)||(!(M in n)||N!==n[M])&&(n[M]=N,C=!0)}if(y){const M=mr(e),N=P||as;for(let O=0;O<y.length;O++){const H=y[O];e[H]=Ep(v,M,H,N[H],t,!cr(N,H))}}return C}function Ep(t,r,e,n,v,y){const C=t[e];if(C!=null){const P=cr(C,"default");if(P&&n===void 0){const M=C.default;if(C.type!==Function&&!C.skipFactory&&jt(M)){const{propsDefaults:N}=v;if(e in N)n=N[e];else{const O=$c(v);n=N[e]=M.call(null,r),O()}}else n=M}C[0]&&(y&&!P?n=!1:C[1]&&(n===""||n===Vf(e))&&(n=!0))}return n}function oy(t,r,e=!1){const n=r.propsCache,v=n.get(t);if(v)return v;const y=t.props,C={},P=[];let M=!1;if(!jt(t)){const O=H=>{M=!0;const[q,J]=oy(H,r,!0);Es(C,q),J&&P.push(...J)};!e&&r.mixins.length&&r.mixins.forEach(O),t.extends&&O(t.extends),t.mixins&&t.mixins.forEach(O)}if(!y&&!M)return ts(t)&&n.set(t,xf),xf;if(wt(y))for(let O=0;O<y.length;O++){const H=qf(y[O]);cg(H)&&(C[H]=as)}else if(y)for(const O in y){const H=qf(O);if(cg(H)){const q=y[O],J=C[H]=wt(q)||jt(q)?{type:q}:Es({},q);if(J){const we=vg(Boolean,J.type),ue=vg(String,J.type);J[0]=we>-1,J[1]=ue<0||we<ue,(we>-1||cr(J,"default"))&&P.push(H)}}}const N=[C,P];return ts(t)&&n.set(t,N),N}function cg(t){return t[0]!=="$"&&!sc(t)}function hg(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function pg(t,r){return hg(t)===hg(r)}function vg(t,r){return wt(r)?r.findIndex(e=>pg(e,t)):jt(r)&&pg(r,t)?0:-1}const fy=t=>t[0]==="_"||t==="$stable",jv=t=>wt(t)?t.map(Nu):[Nu(t)],R0=(t,r,e)=>{if(r._n)return r;const n=Pa((...v)=>jv(r(...v)),e);return n._c=!1,n},cy=(t,r,e)=>{const n=t._ctx;for(const v in t){if(fy(v))continue;const y=t[v];if(jt(y))r[v]=R0(v,y,n);else if(y!=null){const C=jv(y);r[v]=()=>C}}},hy=(t,r)=>{const e=jv(r);t.slots.default=()=>e},D0=(t,r)=>{const e=t.slots=iy();if(t.vnode.shapeFlag&32){const n=r._;n?(Es(e,r),kd(e,"_",n,!0)):cy(r,e)}else r&&hy(t,r)},L0=(t,r,e)=>{const{vnode:n,slots:v}=t;let y=!0,C=as;if(n.shapeFlag&32){const P=r._;P?e&&P===1?y=!1:(Es(v,r),!e&&P===1&&delete v._):(y=!r.$stable,cy(r,v)),C=r}else r&&(hy(t,r),C={default:1});if(y)for(const P in v)!fy(P)&&C[P]==null&&delete v[P]};function Sp(t,r,e,n,v=!1){if(wt(t)){t.forEach((q,J)=>Sp(q,r&&(wt(r)?r[J]:r),e,n,v));return}if(ac(n)&&!v)return;const y=n.shapeFlag&4?Dv(n.component):n.el,C=v?null:y,{i:P,r:M}=t,N=r&&r.r,O=P.refs===as?P.refs={}:P.refs,H=P.setupState;if(N!=null&&N!==M&&(Ss(N)?(O[N]=null,cr(H,N)&&(H[N]=null)):Ea(N)&&(N.value=null)),jt(M))vo(M,P,12,[C,O]);else{const q=Ss(M),J=Ea(M);if(q||J){const we=()=>{if(t.f){const ue=q?cr(H,M)?H[M]:O[M]:M.value;v?wt(ue)&&bv(ue,y):wt(ue)?ue.includes(y)||ue.push(y):q?(O[M]=[y],cr(H,M)&&(H[M]=O[M])):(M.value=[y],t.k&&(O[t.k]=M.value))}else q?(O[M]=C,cr(H,M)&&(H[M]=C)):J&&(M.value=C,t.k&&(O[t.k]=C))};C?(we.id=-1,ba(we,e)):we()}}}const ba=w0;function H0(t){return U0(t)}function U0(t,r){const e=Md();e.__VUE__=!0;const{insert:n,remove:v,patchProp:y,createElement:C,createText:P,createComment:M,setText:N,setElementText:O,parentNode:H,nextSibling:q,setScopeId:J=qi,insertStaticContent:we}=t,ue=(W,re,ce,xe=null,pe=null,Ne=null,Ie=void 0,Ae=null,Me=!!re.dynamicChildren)=>{if(W===re)return;W&&!Fo(W,re)&&(xe=_r(W),pt(W,pe,Ne,!0),W=null),re.patchFlag===-2&&(Me=!1,re.dynamicChildren=null);const{type:$e,ref:Je,shapeFlag:st}=re;switch($e){case Eh:he(W,re,ce,xe);break;case ka:Ee(W,re,ce,xe);break;case Vh:W==null&&G(re,ce,xe,Ie);break;case Pn:Pe(W,re,ce,xe,pe,Ne,Ie,Ae,Me);break;default:st&1?X(W,re,ce,xe,pe,Ne,Ie,Ae,Me):st&6?at(W,re,ce,xe,pe,Ne,Ie,Ae,Me):(st&64||st&128)&&$e.process(W,re,ce,xe,pe,Ne,Ie,Ae,Me,Vr)}Je!=null&&pe&&Sp(Je,W&&W.ref,Ne,re||W,!re)},he=(W,re,ce,xe)=>{if(W==null)n(re.el=P(re.children),ce,xe);else{const pe=re.el=W.el;re.children!==W.children&&N(pe,re.children)}},Ee=(W,re,ce,xe)=>{W==null?n(re.el=M(re.children||""),ce,xe):re.el=W.el},G=(W,re,ce,xe)=>{[W.el,W.anchor]=we(W.children,re,ce,xe,W.el,W.anchor)},V=({el:W,anchor:re},ce,xe)=>{let pe;for(;W&&W!==re;)pe=q(W),n(W,ce,xe),W=pe;n(re,ce,xe)},Q=({el:W,anchor:re})=>{let ce;for(;W&&W!==re;)ce=q(W),v(W),W=ce;v(re)},X=(W,re,ce,xe,pe,Ne,Ie,Ae,Me)=>{re.type==="svg"?Ie="svg":re.type==="math"&&(Ie="mathml"),W==null?Z(re,ce,xe,pe,Ne,Ie,Ae,Me):ae(W,re,pe,Ne,Ie,Ae,Me)},Z=(W,re,ce,xe,pe,Ne,Ie,Ae)=>{let Me,$e;const{props:Je,shapeFlag:st,transition:Ye,dirs:Qe}=W;if(Me=W.el=C(W.type,Ne,Je&&Je.is,Je),st&8?O(Me,W.children):st&16&&ie(W.children,Me,null,xe,pe,Kh(W,Ne),Ie,Ae),Qe&&Po(W,null,xe,"created"),ee(Me,W,W.scopeId,Ie,xe),Je){for(const Ct in Je)Ct!=="value"&&!sc(Ct)&&y(Me,Ct,null,Je[Ct],Ne,W.children,xe,pe,Wt);"value"in Je&&y(Me,"value",null,Je.value,Ne),($e=Je.onVnodeBeforeMount)&&Mu($e,xe,W)}Qe&&Po(W,null,xe,"beforeMount");const it=B0(pe,Ye);it&&Ye.beforeEnter(Me),n(Me,re,ce),(($e=Je&&Je.onVnodeMounted)||it||Qe)&&ba(()=>{$e&&Mu($e,xe,W),it&&Ye.enter(Me),Qe&&Po(W,null,xe,"mounted")},pe)},ee=(W,re,ce,xe,pe)=>{if(ce&&J(W,ce),xe)for(let Ne=0;Ne<xe.length;Ne++)J(W,xe[Ne]);if(pe){let Ne=pe.subTree;if(re===Ne){const Ie=pe.vnode;ee(W,Ie,Ie.scopeId,Ie.slotScopeIds,pe.parent)}}},ie=(W,re,ce,xe,pe,Ne,Ie,Ae,Me=0)=>{for(let $e=Me;$e<W.length;$e++){const Je=W[$e]=Ae?lo(W[$e]):Nu(W[$e]);ue(null,Je,re,ce,xe,pe,Ne,Ie,Ae)}},ae=(W,re,ce,xe,pe,Ne,Ie)=>{const Ae=re.el=W.el;let{patchFlag:Me,dynamicChildren:$e,dirs:Je}=re;Me|=W.patchFlag&16;const st=W.props||as,Ye=re.props||as;let Qe;if(ce&&ko(ce,!1),(Qe=Ye.onVnodeBeforeUpdate)&&Mu(Qe,ce,re,W),Je&&Po(re,W,ce,"beforeUpdate"),ce&&ko(ce,!0),$e?Se(W.dynamicChildren,$e,Ae,ce,xe,Kh(re,pe),Ne):Ie||Ze(W,re,Ae,null,ce,xe,Kh(re,pe),Ne,!1),Me>0){if(Me&16)Te(Ae,re,st,Ye,ce,xe,pe);else if(Me&2&&st.class!==Ye.class&&y(Ae,"class",null,Ye.class,pe),Me&4&&y(Ae,"style",st.style,Ye.style,pe),Me&8){const it=re.dynamicProps;for(let Ct=0;Ct<it.length;Ct++){const yt=it[Ct],_t=st[yt],Pt=Ye[yt];(Pt!==_t||yt==="value")&&y(Ae,yt,_t,Pt,pe,W.children,ce,xe,Wt)}}Me&1&&W.children!==re.children&&O(Ae,re.children)}else!Ie&&$e==null&&Te(Ae,re,st,Ye,ce,xe,pe);((Qe=Ye.onVnodeUpdated)||Je)&&ba(()=>{Qe&&Mu(Qe,ce,re,W),Je&&Po(re,W,ce,"updated")},xe)},Se=(W,re,ce,xe,pe,Ne,Ie)=>{for(let Ae=0;Ae<re.length;Ae++){const Me=W[Ae],$e=re[Ae],Je=Me.el&&(Me.type===Pn||!Fo(Me,$e)||Me.shapeFlag&70)?H(Me.el):ce;ue(Me,$e,Je,null,xe,pe,Ne,Ie,!0)}},Te=(W,re,ce,xe,pe,Ne,Ie)=>{if(ce!==xe){if(ce!==as)for(const Ae in ce)!sc(Ae)&&!(Ae in xe)&&y(W,Ae,ce[Ae],null,Ie,re.children,pe,Ne,Wt);for(const Ae in xe){if(sc(Ae))continue;const Me=xe[Ae],$e=ce[Ae];Me!==$e&&Ae!=="value"&&y(W,Ae,$e,Me,Ie,re.children,pe,Ne,Wt)}"value"in xe&&y(W,"value",ce.value,xe.value,Ie)}},Pe=(W,re,ce,xe,pe,Ne,Ie,Ae,Me)=>{const $e=re.el=W?W.el:P(""),Je=re.anchor=W?W.anchor:P("");let{patchFlag:st,dynamicChildren:Ye,slotScopeIds:Qe}=re;Qe&&(Ae=Ae?Ae.concat(Qe):Qe),W==null?(n($e,ce,xe),n(Je,ce,xe),ie(re.children||[],ce,Je,pe,Ne,Ie,Ae,Me)):st>0&&st&64&&Ye&&W.dynamicChildren?(Se(W.dynamicChildren,Ye,ce,pe,Ne,Ie,Ae),(re.key!=null||pe&&re===pe.subTree)&&py(W,re,!0)):Ze(W,re,ce,Je,pe,Ne,Ie,Ae,Me)},at=(W,re,ce,xe,pe,Ne,Ie,Ae,Me)=>{re.slotScopeIds=Ae,W==null?re.shapeFlag&512?pe.ctx.activate(re,ce,xe,Ie,Me):vt(re,ce,xe,pe,Ne,Ie,Me):nr(W,re,Me)},vt=(W,re,ce,xe,pe,Ne,Ie)=>{const Ae=W.component=im(W,xe,pe);if(Mh(W)&&(Ae.ctx.renderer=Vr),um(Ae),Ae.asyncDep){if(pe&&pe.registerDep(Ae,xt,Ie),!W.el){const Me=Ae.subTree=vs(ka);Ee(null,Me,re,ce)}}else xt(Ae,W,re,ce,pe,Ne,Ie)},nr=(W,re,ce)=>{const xe=re.component=W.component;if(v0(W,re,ce))if(xe.asyncDep&&!xe.asyncResolved){mt(xe,re,ce);return}else xe.next=re,i0(xe.update),xe.effect.dirty=!0,xe.update();else re.el=W.el,xe.vnode=re},xt=(W,re,ce,xe,pe,Ne,Ie)=>{const Ae=()=>{if(W.isMounted){let{next:Je,bu:st,u:Ye,parent:Qe,vnode:it}=W;{const ct=vy(W);if(ct){Je&&(Je.el=it.el,mt(W,Je,Ie)),ct.asyncDep.then(()=>{W.isUnmounted||Ae()});return}}let Ct=Je,yt;ko(W,!1),Je?(Je.el=it.el,mt(W,Je,Ie)):Je=it,st&&Hh(st),(yt=Je.props&&Je.props.onVnodeBeforeUpdate)&&Mu(yt,Qe,Je,it),ko(W,!0);const _t=Bh(W),Pt=W.subTree;W.subTree=_t,ue(Pt,_t,H(Pt.el),_r(Pt),W,pe,Ne),Je.el=_t.el,Ct===null&&g0(W,_t.el),Ye&&ba(Ye,pe),(yt=Je.props&&Je.props.onVnodeUpdated)&&ba(()=>Mu(yt,Qe,Je,it),pe)}else{let Je;const{el:st,props:Ye}=re,{bm:Qe,m:it,parent:Ct}=W,yt=ac(re);if(ko(W,!1),Qe&&Hh(Qe),!yt&&(Je=Ye&&Ye.onVnodeBeforeMount)&&Mu(Je,Ct,re),ko(W,!0),st&&Cr){const _t=()=>{W.subTree=Bh(W),Cr(st,W.subTree,W,pe,null)};yt?re.type.__asyncLoader().then(()=>!W.isUnmounted&&_t()):_t()}else{const _t=W.subTree=Bh(W);ue(null,_t,ce,xe,W,pe,Ne),re.el=_t.el}if(it&&ba(it,pe),!yt&&(Je=Ye&&Ye.onVnodeMounted)){const _t=re;ba(()=>Mu(Je,Ct,_t),pe)}(re.shapeFlag&256||Ct&&ac(Ct.vnode)&&Ct.vnode.shapeFlag&256)&&W.a&&ba(W.a,pe),W.isMounted=!0,re=ce=xe=null}},Me=W.effect=new Cv(Ae,qi,()=>Tv($e),W.scope),$e=W.update=()=>{Me.dirty&&Me.run()};$e.id=W.uid,ko(W,!0),$e()},mt=(W,re,ce)=>{re.component=W;const xe=W.vnode.props;W.vnode=re,W.next=null,j0(W,re.props,xe,ce),L0(W,re.children,ce),xo(),ag(W),bo()},Ze=(W,re,ce,xe,pe,Ne,Ie,Ae,Me=!1)=>{const $e=W&&W.children,Je=W?W.shapeFlag:0,st=re.children,{patchFlag:Ye,shapeFlag:Qe}=re;if(Ye>0){if(Ye&128){Qt($e,st,ce,xe,pe,Ne,Ie,Ae,Me);return}else if(Ye&256){$t($e,st,ce,xe,pe,Ne,Ie,Ae,Me);return}}Qe&8?(Je&16&&Wt($e,pe,Ne),st!==$e&&O(ce,st)):Je&16?Qe&16?Qt($e,st,ce,xe,pe,Ne,Ie,Ae,Me):Wt($e,pe,Ne,!0):(Je&8&&O(ce,""),Qe&16&&ie(st,ce,xe,pe,Ne,Ie,Ae,Me))},$t=(W,re,ce,xe,pe,Ne,Ie,Ae,Me)=>{W=W||xf,re=re||xf;const $e=W.length,Je=re.length,st=Math.min($e,Je);let Ye;for(Ye=0;Ye<st;Ye++){const Qe=re[Ye]=Me?lo(re[Ye]):Nu(re[Ye]);ue(W[Ye],Qe,ce,null,pe,Ne,Ie,Ae,Me)}$e>Je?Wt(W,pe,Ne,!0,!1,st):ie(re,ce,xe,pe,Ne,Ie,Ae,Me,st)},Qt=(W,re,ce,xe,pe,Ne,Ie,Ae,Me)=>{let $e=0;const Je=re.length;let st=W.length-1,Ye=Je-1;for(;$e<=st&&$e<=Ye;){const Qe=W[$e],it=re[$e]=Me?lo(re[$e]):Nu(re[$e]);if(Fo(Qe,it))ue(Qe,it,ce,null,pe,Ne,Ie,Ae,Me);else break;$e++}for(;$e<=st&&$e<=Ye;){const Qe=W[st],it=re[Ye]=Me?lo(re[Ye]):Nu(re[Ye]);if(Fo(Qe,it))ue(Qe,it,ce,null,pe,Ne,Ie,Ae,Me);else break;st--,Ye--}if($e>st){if($e<=Ye){const Qe=Ye+1,it=Qe<Je?re[Qe].el:xe;for(;$e<=Ye;)ue(null,re[$e]=Me?lo(re[$e]):Nu(re[$e]),ce,it,pe,Ne,Ie,Ae,Me),$e++}}else if($e>Ye)for(;$e<=st;)pt(W[$e],pe,Ne,!0),$e++;else{const Qe=$e,it=$e,Ct=new Map;for($e=it;$e<=Ye;$e++){const bt=re[$e]=Me?lo(re[$e]):Nu(re[$e]);bt.key!=null&&Ct.set(bt.key,$e)}let yt,_t=0;const Pt=Ye-it+1;let ct=!1,ks=0;const us=new Array(Pt);for($e=0;$e<Pt;$e++)us[$e]=0;for($e=Qe;$e<=st;$e++){const bt=W[$e];if(_t>=Pt){pt(bt,pe,Ne,!0);continue}let Rt;if(bt.key!=null)Rt=Ct.get(bt.key);else for(yt=it;yt<=Ye;yt++)if(us[yt-it]===0&&Fo(bt,re[yt])){Rt=yt;break}Rt===void 0?pt(bt,pe,Ne,!0):(us[Rt-it]=$e+1,Rt>=ks?ks=Rt:ct=!0,ue(bt,re[Rt],ce,null,pe,Ne,Ie,Ae,Me),_t++)}const ss=ct?q0(us):xf;for(yt=ss.length-1,$e=Pt-1;$e>=0;$e--){const bt=it+$e,Rt=re[bt],xn=bt+1<Je?re[bt+1].el:xe;us[$e]===0?ue(null,Rt,ce,xn,pe,Ne,Ie,Ae,Me):ct&&(yt<0||$e!==ss[yt]?Xt(Rt,ce,xn,2):yt--)}}},Xt=(W,re,ce,xe,pe=null)=>{const{el:Ne,type:Ie,transition:Ae,children:Me,shapeFlag:$e}=W;if($e&6){Xt(W.component.subTree,re,ce,xe);return}if($e&128){W.suspense.move(re,ce,xe);return}if($e&64){Ie.move(W,re,ce,Vr);return}if(Ie===Pn){n(Ne,re,ce);for(let st=0;st<Me.length;st++)Xt(Me[st],re,ce,xe);n(W.anchor,re,ce);return}if(Ie===Vh){V(W,re,ce);return}if(xe!==2&&$e&1&&Ae)if(xe===0)Ae.beforeEnter(Ne),n(Ne,re,ce),ba(()=>Ae.enter(Ne),pe);else{const{leave:st,delayLeave:Ye,afterLeave:Qe}=Ae,it=()=>n(Ne,re,ce),Ct=()=>{st(Ne,()=>{it(),Qe&&Qe()})};Ye?Ye(Ne,it,Ct):Ct()}else n(Ne,re,ce)},pt=(W,re,ce,xe=!1,pe=!1)=>{const{type:Ne,props:Ie,ref:Ae,children:Me,dynamicChildren:$e,shapeFlag:Je,patchFlag:st,dirs:Ye,memoIndex:Qe}=W;if(st===-2&&(pe=!1),Ae!=null&&Sp(Ae,null,ce,W,!0),Qe!=null&&(re.renderCache[Qe]=void 0),Je&256){re.ctx.deactivate(W);return}const it=Je&1&&Ye,Ct=!ac(W);let yt;if(Ct&&(yt=Ie&&Ie.onVnodeBeforeUnmount)&&Mu(yt,re,W),Je&6)Mr(W.component,ce,xe);else{if(Je&128){W.suspense.unmount(ce,xe);return}it&&Po(W,null,re,"beforeUnmount"),Je&64?W.type.remove(W,re,ce,Vr,xe):$e&&(Ne!==Pn||st>0&&st&64)?Wt($e,re,ce,!1,!0):(Ne===Pn&&st&384||!pe&&Je&16)&&Wt(Me,re,ce),xe&&Lr(W)}(Ct&&(yt=Ie&&Ie.onVnodeUnmounted)||it)&&ba(()=>{yt&&Mu(yt,re,W),it&&Po(W,null,re,"unmounted")},ce)},Lr=W=>{const{type:re,el:ce,anchor:xe,transition:pe}=W;if(re===Pn){Yt(ce,xe);return}if(re===Vh){Q(W);return}const Ne=()=>{v(ce),pe&&!pe.persisted&&pe.afterLeave&&pe.afterLeave()};if(W.shapeFlag&1&&pe&&!pe.persisted){const{leave:Ie,delayLeave:Ae}=pe,Me=()=>Ie(ce,Ne);Ae?Ae(W.el,Ne,Me):Me()}else Ne()},Yt=(W,re)=>{let ce;for(;W!==re;)ce=q(W),v(W),W=ce;v(re)},Mr=(W,re,ce)=>{const{bum:xe,scope:pe,update:Ne,subTree:Ie,um:Ae,m:Me,a:$e}=W;gg(Me),gg($e),xe&&Hh(xe),pe.stop(),Ne&&(Ne.active=!1,pt(Ie,W,re,ce)),Ae&&ba(Ae,re),ba(()=>{W.isUnmounted=!0},re),re&&re.pendingBranch&&!re.isUnmounted&&W.asyncDep&&!W.asyncResolved&&W.suspenseId===re.pendingId&&(re.deps--,re.deps===0&&re.resolve())},Wt=(W,re,ce,xe=!1,pe=!1,Ne=0)=>{for(let Ie=Ne;Ie<W.length;Ie++)pt(W[Ie],re,ce,xe,pe)},_r=W=>W.shapeFlag&6?_r(W.component.subTree):W.shapeFlag&128?W.suspense.next():q(W.anchor||W.el);let zr=!1;const ar=(W,re,ce)=>{W==null?re._vnode&&pt(re._vnode,null,null,!0):ue(re._vnode||null,W,re,null,null,null,ce),zr||(zr=!0,ag(),Zd(),zr=!1),re._vnode=W},Vr={p:ue,um:pt,m:Xt,r:Lr,mt:vt,mc:ie,pc:Ze,pbc:Se,n:_r,o:t};let ir,Cr;return{render:ar,hydrate:ir,createApp:O0(ar,ir)}}function Kh({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function ko({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function B0(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function py(t,r,e=!1){const n=t.children,v=r.children;if(wt(n)&&wt(v))for(let y=0;y<n.length;y++){const C=n[y];let P=v[y];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=v[y]=lo(v[y]),P.el=C.el),!e&&P.patchFlag!==-2&&py(C,P)),P.type===Eh&&(P.el=C.el)}}function q0(t){const r=t.slice(),e=[0];let n,v,y,C,P;const M=t.length;for(n=0;n<M;n++){const N=t[n];if(N!==0){if(v=e[e.length-1],t[v]<N){r[n]=v,e.push(n);continue}for(y=0,C=e.length-1;y<C;)P=y+C>>1,t[e[P]]<N?y=P+1:C=P;N<t[e[y]]&&(y>0&&(r[n]=e[y-1]),e[y]=n)}}for(y=e.length,C=e[y-1];y-- >0;)e[y]=C,C=r[C];return e}function vy(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:vy(r)}function gg(t){if(t)for(let r=0;r<t.length;r++)t[r].active=!1}const K0=Symbol.for("v-scx"),z0=()=>Rc(K0),Ec={};function uc(t,r,e){return gy(t,r,e)}function gy(t,r,{immediate:e,deep:n,flush:v,once:y,onTrack:C,onTrigger:P}=as){if(r&&y){const Z=r;r=(...ee)=>{Z(...ee),X()}}const M=Mn,N=Z=>n===!0?Z:No(Z,n===!1?1:void 0);let O,H=!1,q=!1;if(Ea(t)?(O=()=>t.value,H=ih(t)):nc(t)?(O=()=>N(t),H=!0):wt(t)?(q=!0,H=t.some(Z=>nc(Z)||ih(Z)),O=()=>t.map(Z=>{if(Ea(Z))return Z.value;if(nc(Z))return N(Z);if(jt(Z))return vo(Z,M,2)})):jt(t)?r?O=()=>vo(t,M,2):O=()=>(J&&J(),zi(t,M,3,[we])):O=qi,r&&n){const Z=O;O=()=>No(Z())}let J,we=Z=>{J=V.onStop=()=>{vo(Z,M,4),J=V.onStop=void 0}},ue;if(Nh)if(we=qi,r?e&&zi(r,M,3,[O(),q?[]:void 0,we]):O(),v==="sync"){const Z=z0();ue=Z.__watcherHandles||(Z.__watcherHandles=[])}else return qi;let he=q?new Array(t.length).fill(Ec):Ec;const Ee=()=>{if(!(!V.active||!V.dirty))if(r){const Z=V.run();(n||H||(q?Z.some((ee,ie)=>wo(ee,he[ie])):wo(Z,he)))&&(J&&J(),zi(r,M,3,[Z,he===Ec?void 0:q&&he[0]===Ec?[]:he,we]),he=Z)}else V.run()};Ee.allowRecurse=!!r;let G;v==="sync"?G=Ee:v==="post"?G=()=>ba(Ee,M&&M.suspense):(Ee.pre=!0,M&&(Ee.id=M.uid),G=()=>Tv(Ee));const V=new Cv(O,qi,G),Q=Nw(),X=()=>{V.stop(),Q&&bv(Q.effects,V)};return r?e?Ee():he=V.run():v==="post"?ba(V.run.bind(V),M&&M.suspense):V.run(),ue&&ue.push(X),X}function V0(t,r,e){const n=this.proxy,v=Ss(t)?t.includes(".")?dy(n,t):()=>n[t]:t.bind(n,n);let y;jt(r)?y=r:(y=r.handler,e=r);const C=$c(this),P=gy(v,y.bind(n),e);return C(),P}function dy(t,r){const e=r.split(".");return()=>{let n=t;for(let v=0;v<e.length&&n;v++)n=n[e[v]];return n}}function No(t,r=1/0,e){if(r<=0||!ts(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,Ea(t))No(t.value,r,e);else if(wt(t))for(let n=0;n<t.length;n++)No(t[n],r,e);else if(bd(t)||bf(t))t.forEach(n=>{No(n,r,e)});else if(Cd(t)){for(const n in t)No(t[n],r,e);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&No(t[n],r,e)}return t}const Mh=t=>t.type.__isKeepAlive;function W0(t,r){yy(t,"a",r)}function G0(t,r){yy(t,"da",r)}function yy(t,r,e=Mn){const n=t.__wdc||(t.__wdc=()=>{let v=e;for(;v;){if(v.isDeactivated)return;v=v.parent}return t()});if(kh(r,n,e),e){let v=e.parent;for(;v&&v.parent;)Mh(v.parent.vnode)&&J0(n,r,e,v),v=v.parent}}function J0(t,r,e,n){const v=kh(r,t,n,!0);ty(()=>{bv(n[r],v)},e)}const io=Symbol("_leaveCb"),Sc=Symbol("_enterCb");function Z0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yd(()=>{t.isMounted=!0}),ey(()=>{t.isUnmounting=!0}),t}const Di=[Function,Array],wy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Di,onEnter:Di,onAfterEnter:Di,onEnterCancelled:Di,onBeforeLeave:Di,onLeave:Di,onAfterLeave:Di,onLeaveCancelled:Di,onBeforeAppear:Di,onAppear:Di,onAfterAppear:Di,onAppearCancelled:Di},my=t=>{const r=t.subTree;return r.component?my(r.component):r},Q0={name:"BaseTransition",props:wy,setup(t,{slots:r}){const e=lm(),n=Z0();return()=>{const v=r.default&&xy(r.default(),!0);if(!v||!v.length)return;let y=v[0];if(v.length>1){for(const q of v)if(q.type!==ka){y=q;break}}const C=mr(t),{mode:P}=C;if(n.isLeaving)return zh(y);const M=dg(y);if(!M)return zh(y);let N=Np(M,C,n,e,q=>N=q);fh(M,N);const O=e.subTree,H=O&&dg(O);if(H&&H.type!==ka&&!Fo(M,H)&&my(e).type!==ka){const q=Np(H,C,n,e);if(fh(H,q),P==="out-in"&&M.type!==ka)return n.isLeaving=!0,q.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},zh(y);P==="in-out"&&M.type!==ka&&(q.delayLeave=(J,we,ue)=>{const he=$y(n,H);he[String(H.key)]=H,J[io]=()=>{we(),J[io]=void 0,delete N.delayedLeave},N.delayedLeave=ue})}return y}}},X0=Q0;function $y(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Np(t,r,e,n,v){const{appear:y,mode:C,persisted:P=!1,onBeforeEnter:M,onEnter:N,onAfterEnter:O,onEnterCancelled:H,onBeforeLeave:q,onLeave:J,onAfterLeave:we,onLeaveCancelled:ue,onBeforeAppear:he,onAppear:Ee,onAfterAppear:G,onAppearCancelled:V}=r,Q=String(t.key),X=$y(e,t),Z=(ae,Se)=>{ae&&zi(ae,n,9,Se)},ee=(ae,Se)=>{const Te=Se[1];Z(ae,Se),wt(ae)?ae.every(Pe=>Pe.length<=1)&&Te():ae.length<=1&&Te()},ie={mode:C,persisted:P,beforeEnter(ae){let Se=M;if(!e.isMounted)if(y)Se=he||M;else return;ae[io]&&ae[io](!0);const Te=X[Q];Te&&Fo(t,Te)&&Te.el[io]&&Te.el[io](),Z(Se,[ae])},enter(ae){let Se=N,Te=O,Pe=H;if(!e.isMounted)if(y)Se=Ee||N,Te=G||O,Pe=V||H;else return;let at=!1;const vt=ae[Sc]=nr=>{at||(at=!0,nr?Z(Pe,[ae]):Z(Te,[ae]),ie.delayedLeave&&ie.delayedLeave(),ae[Sc]=void 0)};Se?ee(Se,[ae,vt]):vt()},leave(ae,Se){const Te=String(t.key);if(ae[Sc]&&ae[Sc](!0),e.isUnmounting)return Se();Z(q,[ae]);let Pe=!1;const at=ae[io]=vt=>{Pe||(Pe=!0,Se(),vt?Z(ue,[ae]):Z(we,[ae]),ae[io]=void 0,X[Te]===t&&delete X[Te])};X[Te]=t,J?ee(J,[ae,at]):at()},clone(ae){const Se=Np(ae,r,e,n,v);return v&&v(Se),Se}};return ie}function zh(t){if(Mh(t))return t=mo(t),t.children=null,t}function dg(t){if(!Mh(t))return t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&jt(e.default))return e.default()}}function fh(t,r){t.shapeFlag&6&&t.component?fh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function xy(t,r=!1,e){let n=[],v=0;for(let y=0;y<t.length;y++){let C=t[y];const P=e==null?C.key:String(e)+String(C.key!=null?C.key:y);C.type===Pn?(C.patchFlag&128&&v++,n=n.concat(xy(C.children,r,P))):(r||C.type!==ka)&&n.push(P!=null?mo(C,{key:P}):C)}if(v>1)for(let y=0;y<n.length;y++)n[y].patchFlag=-2;return n}const Y0=t=>t.__isTeleport,Pn=Symbol.for("v-fgt"),Eh=Symbol.for("v-txt"),ka=Symbol.for("v-cmt"),Vh=Symbol.for("v-stc"),oc=[];let ku=null;function ps(t=!1){oc.push(ku=t?null:[])}function em(){oc.pop(),ku=oc[oc.length-1]||null}let yc=1;function yg(t){yc+=t}function by(t){return t.dynamicChildren=yc>0?ku||xf:null,em(),yc>0&&ku&&ku.push(t),t}function Us(t,r,e,n,v,y){return by(Ki(t,r,e,n,v,y,!0))}function Sh(t,r,e,n,v){return by(vs(t,r,e,n,v,!0))}function ch(t){return t?t.__v_isVNode===!0:!1}function Fo(t,r){return t.type===r.type&&t.key===r.key}const Ay=({key:t})=>t??null,Dc=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ss(t)||Ea(t)||jt(t)?{i:ya,r:t,k:r,f:!!e}:t:null);function Ki(t,r=null,e=null,n=0,v=null,y=t===Pn?0:1,C=!1,P=!1){const M={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&Ay(r),ref:r&&Dc(r),scopeId:Ph,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:y,patchFlag:n,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:ya};return P?(Rv(M,e),y&128&&t.normalize(M)):e&&(M.shapeFlag|=Ss(e)?8:16),yc>0&&!C&&ku&&(M.patchFlag>0||y&6)&&M.patchFlag!==32&&ku.push(M),M}const vs=tm;function tm(t,r=null,e=null,n=0,v=null,y=!1){if((!t||t===d0)&&(t=ka),ch(t)){const P=mo(t,r,!0);return e&&Rv(P,e),yc>0&&!y&&ku&&(P.shapeFlag&6?ku[ku.indexOf(t)]=P:ku.push(P)),P.patchFlag=-2,P}if(hm(t)&&(t=t.__vccOpts),r){r=rm(r);let{class:P,style:M}=r;P&&!Ss(P)&&(r.class=En(P)),ts(M)&&(Kd(M)&&!wt(M)&&(M=Es({},M)),r.style=_v(M))}const C=Ss(t)?1:y0(t)?128:Y0(t)?64:ts(t)?4:jt(t)?2:0;return Ki(t,r,e,n,v,C,y,!0)}function rm(t){return t?Kd(t)||ly(t)?Es({},t):t:null}function mo(t,r,e=!1,n=!1){const{props:v,ref:y,patchFlag:C,children:P,transition:M}=t,N=r?sm(v||{},r):v,O={__v_isVNode:!0,__v_skip:!0,type:t.type,props:N,key:N&&Ay(N),ref:r&&r.ref?e&&y?wt(y)?y.concat(Dc(r)):[y,Dc(r)]:Dc(r):y,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:P,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Pn?C===-1?16:C|16:C,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:M,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&mo(t.ssContent),ssFallback:t.ssFallback&&mo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return M&&n&&fh(O,M.clone(O)),O}function Pu(t=" ",r=0){return vs(Eh,null,t,r)}function Kf(t="",r=!1){return r?(ps(),Sh(ka,null,t)):vs(ka,null,t)}function Nu(t){return t==null||typeof t=="boolean"?vs(ka):wt(t)?vs(Pn,null,t.slice()):typeof t=="object"?lo(t):vs(Eh,null,String(t))}function lo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:mo(t)}function Rv(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(wt(r))e=16;else if(typeof r=="object")if(n&65){const v=r.default;v&&(v._c&&(v._d=!1),Rv(t,v()),v._c&&(v._d=!0));return}else{e=32;const v=r._;!v&&!ly(r)?r._ctx=ya:v===3&&ya&&(ya.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else jt(r)?(r={default:r,_ctx:ya},e=32):(r=String(r),n&64?(e=16,r=[Pu(r)]):e=8);t.children=r,t.shapeFlag|=e}function sm(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const v in n)if(v==="class")r.class!==n.class&&(r.class=En([r.class,n.class]));else if(v==="style")r.style=_v([r.style,n.style]);else if($h(v)){const y=r[v],C=n[v];C&&y!==C&&!(wt(y)&&y.includes(C))&&(r[v]=y?[].concat(y,C):C)}else v!==""&&(r[v]=n[v])}return r}function Mu(t,r,e,n=null){zi(t,r,7,[e,n])}const nm=ny();let am=0;function im(t,r,e){const n=t.type,v=(r?r.appContext:t.appContext)||nm,y={uid:am++,vnode:t,type:n,parent:r,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ew(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:oy(n,v),emitsOptions:Xd(n,v),emit:null,emitted:null,propsDefaults:as,inheritAttrs:n.inheritAttrs,ctx:as,data:as,props:as,attrs:as,slots:as,refs:as,setupState:as,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return y.ctx={_:y},y.root=r?r.root:y,y.emit=o0.bind(null,y),t.ce&&t.ce(y),y}let Mn=null;const lm=()=>Mn||ya;let hh,Fp;{const t=Md(),r=(e,n)=>{let v;return(v=t[e])||(v=t[e]=[]),v.push(n),y=>{v.length>1?v.forEach(C=>C(y)):v[0](y)}};hh=r("__VUE_INSTANCE_SETTERS__",e=>Mn=e),Fp=r("__VUE_SSR_SETTERS__",e=>Nh=e)}const $c=t=>{const r=Mn;return hh(t),t.scope.on(),()=>{t.scope.off(),hh(r)}},wg=()=>{Mn&&Mn.scope.off(),hh(null)};function _y(t){return t.vnode.shapeFlag&4}let Nh=!1;function um(t,r=!1){r&&Fp(r);const{props:e,children:n}=t.vnode,v=_y(t);I0(t,e,v,r),D0(t,n);const y=v?om(t,r):void 0;return r&&Fp(!1),y}function om(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,P0);const{setup:n}=e;if(n){const v=t.setupContext=n.length>1?cm(t):null,y=$c(t);xo();const C=vo(n,t,0,[t.props,v]);if(bo(),y(),Ad(C)){if(C.then(wg,wg),r)return C.then(P=>{mg(t,P,r)}).catch(P=>{_h(P,t,0)});t.asyncDep=C}else mg(t,C,r)}else Cy(t,r)}function mg(t,r,e){jt(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:ts(r)&&(t.setupState=Wd(r)),Cy(t,e)}let $g;function Cy(t,r,e){const n=t.type;if(!t.render){if(!r&&$g&&!n.render){const v=n.template||Iv(t).template;if(v){const{isCustomElement:y,compilerOptions:C}=t.appContext.config,{delimiters:P,compilerOptions:M}=n,N=Es(Es({isCustomElement:y,delimiters:P},C),M);n.render=$g(v,N)}}t.render=n.render||qi}{const v=$c(t);xo();try{k0(t)}finally{bo(),v()}}}const fm={get(t,r){return Ma(t,"get",""),t[r]}};function cm(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,fm),slots:t.slots,emit:t.emit,expose:r}}function Dv(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Wd(Xw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in ic)return ic[e](t)},has(r,e){return e in r||e in ic}})):t.proxy}function hm(t){return jt(t)&&"__vccOpts"in t}const pm=(t,r)=>Yw(t,r,Nh);function to(t,r,e){const n=arguments.length;return n===2?ts(r)&&!wt(r)?ch(r)?vs(t,null,[r]):vs(t,r):vs(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&ch(e)&&(e=[e]),vs(t,r,e))}const vm="3.4.31";/**
* @vue/runtime-dom v3.4.31
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gm="http://www.w3.org/2000/svg",dm="http://www.w3.org/1998/Math/MathML",Ku=typeof document<"u"?document:null,xg=Ku&&Ku.createElement("template"),ym={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const v=r==="svg"?Ku.createElementNS(gm,t):r==="mathml"?Ku.createElementNS(dm,t):e?Ku.createElement(t,{is:e}):Ku.createElement(t);return t==="select"&&n&&n.multiple!=null&&v.setAttribute("multiple",n.multiple),v},createText:t=>Ku.createTextNode(t),createComment:t=>Ku.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ku.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,v,y){const C=e?e.previousSibling:r.lastChild;if(v&&(v===y||v.nextSibling))for(;r.insertBefore(v.cloneNode(!0),e),!(v===y||!(v=v.nextSibling)););else{xg.innerHTML=n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t;const P=xg.content;if(n==="svg"||n==="mathml"){const M=P.firstChild;for(;M.firstChild;)P.appendChild(M.firstChild);P.removeChild(M)}r.insertBefore(P,e)}return[C?C.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},Yu="transition",Wf="animation",wc=Symbol("_vtc"),Lv=(t,{slots:r})=>to(X0,wm(t),r);Lv.displayName="Transition";const Py={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Lv.props=Es({},wy,Py);const Mo=(t,r=[])=>{wt(t)?t.forEach(e=>e(...r)):t&&t(...r)},bg=t=>t?wt(t)?t.some(r=>r.length>1):t.length>1:!1;function wm(t){const r={};for(const Pe in t)Pe in Py||(r[Pe]=t[Pe]);if(t.css===!1)return r;const{name:e="v",type:n,duration:v,enterFromClass:y=`${e}-enter-from`,enterActiveClass:C=`${e}-enter-active`,enterToClass:P=`${e}-enter-to`,appearFromClass:M=y,appearActiveClass:N=C,appearToClass:O=P,leaveFromClass:H=`${e}-leave-from`,leaveActiveClass:q=`${e}-leave-active`,leaveToClass:J=`${e}-leave-to`}=t,we=mm(v),ue=we&&we[0],he=we&&we[1],{onBeforeEnter:Ee,onEnter:G,onEnterCancelled:V,onLeave:Q,onLeaveCancelled:X,onBeforeAppear:Z=Ee,onAppear:ee=G,onAppearCancelled:ie=V}=r,ae=(Pe,at,vt)=>{Eo(Pe,at?O:P),Eo(Pe,at?N:C),vt&&vt()},Se=(Pe,at)=>{Pe._isLeaving=!1,Eo(Pe,H),Eo(Pe,J),Eo(Pe,q),at&&at()},Te=Pe=>(at,vt)=>{const nr=Pe?ee:G,xt=()=>ae(at,Pe,vt);Mo(nr,[at,xt]),Ag(()=>{Eo(at,Pe?M:y),eo(at,Pe?O:P),bg(nr)||_g(at,n,ue,xt)})};return Es(r,{onBeforeEnter(Pe){Mo(Ee,[Pe]),eo(Pe,y),eo(Pe,C)},onBeforeAppear(Pe){Mo(Z,[Pe]),eo(Pe,M),eo(Pe,N)},onEnter:Te(!1),onAppear:Te(!0),onLeave(Pe,at){Pe._isLeaving=!0;const vt=()=>Se(Pe,at);eo(Pe,H),eo(Pe,q),bm(),Ag(()=>{Pe._isLeaving&&(Eo(Pe,H),eo(Pe,J),bg(Q)||_g(Pe,n,he,vt))}),Mo(Q,[Pe,vt])},onEnterCancelled(Pe){ae(Pe,!1),Mo(V,[Pe])},onAppearCancelled(Pe){ae(Pe,!0),Mo(ie,[Pe])},onLeaveCancelled(Pe){Se(Pe),Mo(X,[Pe])}})}function mm(t){if(t==null)return null;if(ts(t))return[Wh(t.enter),Wh(t.leave)];{const r=Wh(t);return[r,r]}}function Wh(t){return bw(t)}function eo(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[wc]||(t[wc]=new Set)).add(r)}function Eo(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[wc];e&&(e.delete(r),e.size||(t[wc]=void 0))}function Ag(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let $m=0;function _g(t,r,e,n){const v=t._endId=++$m,y=()=>{v===t._endId&&n()};if(e)return setTimeout(y,e);const{type:C,timeout:P,propCount:M}=xm(t,r);if(!C)return n();const N=C+"end";let O=0;const H=()=>{t.removeEventListener(N,q),y()},q=J=>{J.target===t&&++O>=M&&H()};setTimeout(()=>{O<M&&H()},P+1),t.addEventListener(N,q)}function xm(t,r){const e=window.getComputedStyle(t),n=we=>(e[we]||"").split(", "),v=n(`${Yu}Delay`),y=n(`${Yu}Duration`),C=Cg(v,y),P=n(`${Wf}Delay`),M=n(`${Wf}Duration`),N=Cg(P,M);let O=null,H=0,q=0;r===Yu?C>0&&(O=Yu,H=C,q=y.length):r===Wf?N>0&&(O=Wf,H=N,q=M.length):(H=Math.max(C,N),O=H>0?C>N?Yu:Wf:null,q=O?O===Yu?y.length:M.length:0);const J=O===Yu&&/\b(transform|all)(,|$)/.test(n(`${Yu}Property`).toString());return{type:O,timeout:H,propCount:q,hasTransform:J}}function Cg(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Pg(e)+Pg(t[n])))}function Pg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function bm(){return document.body.offsetHeight}function Am(t,r,e){const n=t[wc];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const kg=Symbol("_vod"),_m=Symbol("_vsh"),Cm=Symbol(""),Pm=/(^|;)\s*display\s*:/;function km(t,r,e){const n=t.style,v=Ss(e);let y=!1;if(e&&!v){if(r)if(Ss(r))for(const C of r.split(";")){const P=C.slice(0,C.indexOf(":")).trim();e[P]==null&&Lc(n,P,"")}else for(const C in r)e[C]==null&&Lc(n,C,"");for(const C in e)C==="display"&&(y=!0),Lc(n,C,e[C])}else if(v){if(r!==e){const C=n[Cm];C&&(e+=";"+C),n.cssText=e,y=Pm.test(e)}}else r&&t.removeAttribute("style");kg in t&&(t[kg]=y?n.display:"",t[_m]&&(n.display="none"))}const Mg=/\s*!important$/;function Lc(t,r,e){if(wt(e))e.forEach(n=>Lc(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=Mm(t,r);Mg.test(e)?t.setProperty(Vf(n),e.replace(Mg,""),"important"):t[n]=e}}const Eg=["Webkit","Moz","ms"],Gh={};function Mm(t,r){const e=Gh[r];if(e)return e;let n=qf(r);if(n!=="filter"&&n in t)return Gh[r]=n;n=Pd(n);for(let v=0;v<Eg.length;v++){const y=Eg[v]+n;if(y in t)return Gh[r]=y}return r}const Sg="http://www.w3.org/1999/xlink";function Ng(t,r,e,n,v,y=Mw(r)){n&&r.startsWith("xlink:")?e==null?t.removeAttributeNS(Sg,r.slice(6,r.length)):t.setAttributeNS(Sg,r,e):e==null||y&&!Ed(e)?t.removeAttribute(r):t.setAttribute(r,y?"":$o(e)?String(e):e)}function Em(t,r,e,n,v,y,C){if(r==="innerHTML"||r==="textContent"){n&&C(n,v,y),t[r]=e??"";return}const P=t.tagName;if(r==="value"&&P!=="PROGRESS"&&!P.includes("-")){const N=P==="OPTION"?t.getAttribute("value")||"":t.value,O=e==null?"":String(e);(N!==O||!("_value"in t))&&(t.value=O),e==null&&t.removeAttribute(r),t._value=e;return}let M=!1;if(e===""||e==null){const N=typeof t[r];N==="boolean"?e=Ed(e):e==null&&N==="string"?(e="",M=!0):N==="number"&&(e=0,M=!0)}try{t[r]=e}catch{}M&&t.removeAttribute(r)}function Sm(t,r,e,n){t.addEventListener(r,e,n)}function Nm(t,r,e,n){t.removeEventListener(r,e,n)}const Fg=Symbol("_vei");function Fm(t,r,e,n,v=null){const y=t[Fg]||(t[Fg]={}),C=y[r];if(n&&C)C.value=n;else{const[P,M]=Om(r);if(n){const N=y[r]=jm(n,v);Sm(t,P,N,M)}else C&&(Nm(t,P,C,M),y[r]=void 0)}}const Og=/(?:Once|Passive|Capture)$/;function Om(t){let r;if(Og.test(t)){r={};let n;for(;n=t.match(Og);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Vf(t.slice(2)),r]}let Jh=0;const Tm=Promise.resolve(),Im=()=>Jh||(Tm.then(()=>Jh=0),Jh=Date.now());function jm(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;zi(Rm(n,e.value),r,5,[n])};return e.value=t,e.attached=Im(),e}function Rm(t,r){if(wt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>v=>!v._stopped&&n&&n(v))}else return r}const Tg=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Dm=(t,r,e,n,v,y,C,P,M)=>{const N=v==="svg";r==="class"?Am(t,n,N):r==="style"?km(t,e,n):$h(r)?xv(r)||Fm(t,r,e,n,C):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Lm(t,r,n,N))?(Em(t,r,n,y,C,P,M),!t.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&Ng(t,r,n,N,C,r!=="value")):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),Ng(t,r,n,N))};function Lm(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&Tg(r)&&jt(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const v=t.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return Tg(r)&&Ss(e)?!1:r in t}const Hm=Es({patchProp:Dm},ym);let Ig;function Um(){return Ig||(Ig=H0(Hm))}const Bm=(...t)=>{const r=Um().createApp(...t),{mount:e}=r;return r.mount=n=>{const v=Km(n);if(!v)return;const y=r._component;!jt(y)&&!y.render&&!y.template&&(y.template=v.innerHTML),v.innerHTML="";const C=e(v,!1,qm(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),C},r};function qm(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Km(t){return Ss(t)?document.querySelector(t):t}function fc(){return fc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},fc.apply(this,arguments)}var zm=13,Vm=9,Wm=8,Gm=89,Nc=90,Jm=77,jg=57,Rg=219,Dg=222,Lg=192,Zm=27,Hg=100,Qm=3e3,Xm=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),Zh=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Ym=mc({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var v="border-top-left-radius",y="border-bottom-left-radius";if(e){e.style[v]=n[v],e.style[y]=n[y],r.style[v]="0",r.style[y]="0";var C=["background-color","margin-top","padding-top","font-family","font-size","line-height"];C.forEach(function(P){e.style[P]=n[P]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,v=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:v})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=fc({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,v=n.stack,y=n.offset;if(v.length&&y>-1){this.history.stack=v.slice(0,y+1);var C=this.history.stack.length;if(C>Hg){var P=C-Hg;this.history.stack=v.slice(P,C),this.history.offset=Math.max(this.history.offset-P,0)}}var M=Date.now();if(e){var N=this.history.stack[this.history.offset];if(N&&M-N.timestamp<Qm){var O,H,q=/[^a-z0-9]([a-z0-9]+)$/i,J=(O=this._getLines(N.value,N.selectionStart).pop())===null||O===void 0?void 0:O.match(q),we=(H=this._getLines(r.value,r.selectionStart).pop())===null||H===void 0?void 0:H.match(q);if(J&&we&&we[1].startsWith(J[1])){this.history.stack[this.history.offset]=fc({},r,{timestamp:M});return}}}this.history.stack.push(fc({},r,{timestamp:M})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,v=e.selectionStart,y=e.selectionEnd;this._recordChange({value:n,selectionStart:v,selectionEnd:y},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n-1];v&&(this._updateInput(v),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,v=e[n+1];v&&(this._updateInput(v),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,v=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Zm&&(r.target.blur(),this.$emit("blur",r));var y=r.target,C=y.value,P=y.selectionStart,M=y.selectionEnd,N=(n?" ":"	").repeat(e);if(r.keyCode===Vm&&!v&&this.capture)if(r.preventDefault(),r.shiftKey){var O=this._getLines(C,P),H=O.length-1,q=this._getLines(C,M).length-1,J=C.split(`
`).map(function(Pe,at){return at>=H&&at<=q&&Pe.startsWith(N)?Pe.substring(N.length):Pe}).join(`
`);if(C!==J){var we=O[H];this._applyEdits({value:J,selectionStart:we.startsWith(N)?P-N.length:P,selectionEnd:M-(C.length-J.length)})}}else if(P!==M){var ue=this._getLines(C,P),he=ue.length-1,Ee=this._getLines(C,M).length-1,G=ue[he];this._applyEdits({value:C.split(`
`).map(function(Pe,at){return at>=he&&at<=Ee?N+Pe:Pe}).join(`
`),selectionStart:/\S/.test(G)?P+N.length:P,selectionEnd:M+N.length*(Ee-he+1)})}else{var V=P+N.length;this._applyEdits({value:C.substring(0,P)+N+C.substring(M),selectionStart:V,selectionEnd:V})}else if(r.keyCode===Wm){var Q=P!==M,X=C.substring(0,P);if(X.endsWith(N)&&!Q){r.preventDefault();var Z=P-N.length;this._applyEdits({value:C.substring(0,P-N.length)+C.substring(M),selectionStart:Z,selectionEnd:Z})}}else if(r.keyCode===zm){if(P===M){var ee=this._getLines(C,P).pop(),ie=ee==null?void 0:ee.match(/^\s+/);if(ie&&ie[0]){r.preventDefault();var ae=`
`+ie[0],Se=P+ae.length;this._applyEdits({value:C.substring(0,P)+ae+C.substring(M),selectionStart:Se,selectionEnd:Se})}}}else if(r.keyCode===jg||r.keyCode===Rg||r.keyCode===Dg||r.keyCode===Lg){var Te;r.keyCode===jg&&r.shiftKey?Te=["(",")"]:r.keyCode===Rg?r.shiftKey?Te=["{","}"]:Te=["[","]"]:r.keyCode===Dg?r.shiftKey?Te=['"','"']:Te=["'","'"]:r.keyCode===Lg&&!r.shiftKey&&(Te=["`","`"]),P!==M&&Te&&(r.preventDefault(),this._applyEdits({value:C.substring(0,P)+Te[0]+C.substring(P,M)+Te[1]+C.substring(M),selectionStart:P,selectionEnd:M+2}))}else(Zh?r.metaKey&&r.keyCode===Nc:r.ctrlKey&&r.keyCode===Nc)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(Zh?r.metaKey&&r.keyCode===Nc&&r.shiftKey:Xm?r.ctrlKey&&r.keyCode===Gm:r.ctrlKey&&r.keyCode===Nc&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===Jm&&r.ctrlKey&&(!Zh||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=to("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=to("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(P,M){return to("div",{class:"prism-editor__line-number token comment"},""+ ++M)})]),v=to("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(M){r.$emit("click",M)},onKeyup:function(M){r.$emit("keyup",M)},onFocus:function(M){r.$emit("focus",M)},onBlur:function(M){r.$emit("blur",M)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),y=to("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),C=to("div",{class:"prism-editor__container"},[v,y]);return to("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,C])}}),Ii=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function t$(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var v=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,v.get?v:{enumerable:!0,get:function(){return t[n]}})}),e}var r$={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,y=0,C={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof M?new M(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++y}),G.__id},clone:function G(V,Q){Q=Q||{};var X,Z;switch(P.util.type(V)){case"Object":if(Z=P.util.objId(V),Q[Z])return Q[Z];X={},Q[Z]=X;for(var ee in V)V.hasOwnProperty(ee)&&(X[ee]=G(V[ee],Q));return X;case"Array":return Z=P.util.objId(V),Q[Z]?Q[Z]:(X=[],Q[Z]=X,V.forEach(function(ie,ae){X[ae]=G(ie,Q)}),X);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Q in V)if(V[Q].src==G)return V[Q]}return null}},isActive:function(G,V,Q){for(var X="no-"+V;G;){var Z=G.classList;if(Z.contains(V))return!0;if(Z.contains(X))return!1;G=G.parentElement}return!!Q}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(G,V){var Q=P.util.clone(P.languages[G]);for(var X in V)Q[X]=V[X];return Q},insertBefore:function(G,V,Q,X){X=X||P.languages;var Z=X[G],ee={};for(var ie in Z)if(Z.hasOwnProperty(ie)){if(ie==V)for(var ae in Q)Q.hasOwnProperty(ae)&&(ee[ae]=Q[ae]);Q.hasOwnProperty(ie)||(ee[ie]=Z[ie])}var Se=X[G];return X[G]=ee,P.languages.DFS(P.languages,function(Te,Pe){Pe===Se&&Te!=G&&(this[Te]=ee)}),ee},DFS:function G(V,Q,X,Z){Z=Z||{};var ee=P.util.objId;for(var ie in V)if(V.hasOwnProperty(ie)){Q.call(V,ie,V[ie],X||ie);var ae=V[ie],Se=P.util.type(ae);Se==="Object"&&!Z[ee(ae)]?(Z[ee(ae)]=!0,G(ae,Q,null,Z)):Se==="Array"&&!Z[ee(ae)]&&(Z[ee(ae)]=!0,G(ae,Q,ie,Z))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Q){var X={callback:Q,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),P.hooks.run("before-all-elements-highlight",X);for(var Z=0,ee;ee=X.elements[Z++];)P.highlightElement(ee,V===!0,X.callback)},highlightElement:function(G,V,Q){var X=P.util.getLanguage(G),Z=P.languages[X];P.util.setLanguage(G,X);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,X);var ie=G.textContent,ae={element:G,language:X,grammar:Z,code:ie};function Se(Pe){ae.highlightedCode=Pe,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),Q&&Q.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),ee=ae.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),Q&&Q.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Se(P.util.encode(ae.code));return}if(V&&n.Worker){var Te=new Worker(P.filename);Te.onmessage=function(Pe){Se(Pe.data)},Te.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Se(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(G,V,Q){var X={code:G,grammar:V,language:Q};if(P.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=P.tokenize(X.code,X.grammar),P.hooks.run("after-tokenize",X),M.stringify(P.util.encode(X.tokens),X.language)},tokenize:function(G,V){var Q=V.rest;if(Q){for(var X in Q)V[X]=Q[X];delete V.rest}var Z=new H;return q(Z,Z.head,G),O(G,Z,V,Z.head,0),we(Z)},hooks:{all:{},add:function(G,V){var Q=P.hooks.all;Q[G]=Q[G]||[],Q[G].push(V)},run:function(G,V){var Q=P.hooks.all[G];if(!(!Q||!Q.length))for(var X=0,Z;Z=Q[X++];)Z(V)}},Token:M};n.Prism=P;function M(G,V,Q,X){this.type=G,this.content=V,this.alias=Q,this.length=(X||"").length|0}M.stringify=function G(V,Q){if(typeof V=="string")return V;if(Array.isArray(V)){var X="";return V.forEach(function(Se){X+=G(Se,Q)}),X}var Z={type:V.type,content:G(V.content,Q),tag:"span",classes:["token",V.type],attributes:{},language:Q},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(Z.classes,ee):Z.classes.push(ee)),P.hooks.run("wrap",Z);var ie="";for(var ae in Z.attributes)ie+=" "+ae+'="'+(Z.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+Z.tag+' class="'+Z.classes.join(" ")+'"'+ie+">"+Z.content+"</"+Z.tag+">"};function N(G,V,Q,X){G.lastIndex=V;var Z=G.exec(Q);if(Z&&X&&Z[1]){var ee=Z[1].length;Z.index+=ee,Z[0]=Z[0].slice(ee)}return Z}function O(G,V,Q,X,Z,ee){for(var ie in Q)if(!(!Q.hasOwnProperty(ie)||!Q[ie])){var ae=Q[ie];ae=Array.isArray(ae)?ae:[ae];for(var Se=0;Se<ae.length;++Se){if(ee&&ee.cause==ie+","+Se)return;var Te=ae[Se],Pe=Te.inside,at=!!Te.lookbehind,vt=!!Te.greedy,nr=Te.alias;if(vt&&!Te.pattern.global){var xt=Te.pattern.toString().match(/[imsuy]*$/)[0];Te.pattern=RegExp(Te.pattern.source,xt+"g")}for(var mt=Te.pattern||Te,Ze=X.next,$t=Z;Ze!==V.tail&&!(ee&&$t>=ee.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(V.length>G.length)return;if(!(Qt instanceof M)){var Xt=1,pt;if(vt){if(pt=N(mt,$t,G,at),!pt||pt.index>=G.length)break;var Wt=pt.index,Lr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;Wt>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof M)continue;for(var Mr=Ze;Mr!==V.tail&&(Yt<Lr||typeof Mr.value=="string");Mr=Mr.next)Xt++,Yt+=Mr.value.length;Xt--,Qt=G.slice($t,Yt),pt.index-=$t}else if(pt=N(mt,0,Qt,at),!pt)continue;var Wt=pt.index,_r=pt[0],zr=Qt.slice(0,Wt),ar=Qt.slice(Wt+_r.length),Vr=$t+Qt.length;ee&&Vr>ee.reach&&(ee.reach=Vr);var ir=Ze.prev;zr&&(ir=q(V,ir,zr),$t+=zr.length),J(V,ir,Xt);var Cr=new M(ie,Pe?P.tokenize(_r,Pe):_r,nr,_r);if(Ze=q(V,ir,Cr),ar&&q(V,Ze,ar),Xt>1){var W={cause:ie+","+Se,reach:Vr};O(G,V,Q,Ze.prev,$t,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function q(G,V,Q){var X=V.next,Z={value:Q,prev:V,next:X};return V.next=Z,X.prev=Z,G.length++,Z}function J(G,V,Q){for(var X=V.next,Z=0;Z<Q&&X!==G.tail;Z++)X=X.next;V.next=X,X.prev=V,G.length-=Z}function we(G){for(var V=[],Q=G.head.next;Q!==G.tail;)V.push(Q.value),Q=Q.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Q=V.language,X=V.code,Z=V.immediateClose;n.postMessage(P.highlight(X,P.languages[Q],Q)),Z&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function he(){P.manual||P.highlightAll()}if(!P.manual){var Ee=document.readyState;Ee==="loading"||Ee==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",he):window.requestAnimationFrame?window.requestAnimationFrame(he):window.setTimeout(he,16)}return P}(r);t.exports&&(t.exports=e),typeof Ii<"u"&&(Ii.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(v,y){var C={};C["language-"+y]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[y]},C.cdata=/^<!\[CDATA\[|\]\]>$/i;var P={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:C}};P["language-"+y]={pattern:/[\s\S]+/,inside:e.languages[y]};var M={};M[v]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return v}),"i"),lookbehind:!0,greedy:!0,inside:P},e.languages.insertBefore("markup","cdata",M)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,v){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[v,"language-"+v],inside:e.languages[v]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var v=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+v.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+v.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+v.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+v.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:v,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var y=n.languages.markup;y&&(y.tag.addInlined("style","css"),y.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",v=function(ue,he){return" Error "+ue+" while fetching file: "+he},y=" Error: File does not exist or is empty",C={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},P="data-src-status",M="loading",N="loaded",O="failed",H="pre[data-src]:not(["+P+'="'+N+'"]):not(['+P+'="'+M+'"])';function q(ue,he,Ee){var G=new XMLHttpRequest;G.open("GET",ue,!0),G.onreadystatechange=function(){G.readyState==4&&(G.status<400&&G.responseText?he(G.responseText):G.status>=400?Ee(v(G.status,G.statusText)):Ee(y))},G.send(null)}function J(ue){var he=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ue||"");if(he){var Ee=Number(he[1]),G=he[2],V=he[3];return G?V?[Ee,Number(V)]:[Ee,void 0]:[Ee,Ee]}}e.hooks.add("before-highlightall",function(ue){ue.selector+=", "+H}),e.hooks.add("before-sanity-check",function(ue){var he=ue.element;if(he.matches(H)){ue.code="",he.setAttribute(P,M);var Ee=he.appendChild(document.createElement("CODE"));Ee.textContent=n;var G=he.getAttribute("data-src"),V=ue.language;if(V==="none"){var Q=(/\.(\w+)$/.exec(G)||[,"none"])[1];V=C[Q]||Q}e.util.setLanguage(Ee,V),e.util.setLanguage(he,V);var X=e.plugins.autoloader;X&&X.loadLanguages(V),q(G,function(Z){he.setAttribute(P,N);var ee=J(he.getAttribute("data-range"));if(ee){var ie=Z.split(/\r\n?|\n/g),ae=ee[0],Se=ee[1]==null?ie.length:ee[1];ae<0&&(ae+=ie.length),ae=Math.max(0,Math.min(ae-1,ie.length)),Se<0&&(Se+=ie.length),Se=Math.max(0,Math.min(Se,ie.length)),Z=ie.slice(ae,Se).join(`
`),he.hasAttribute("data-start")||he.setAttribute("data-start",String(ae+1))}Ee.textContent=Z,e.highlightElement(Ee)},function(Z){he.setAttribute(P,O),Ee.textContent=Z})}}),e.plugins.fileHighlight={highlight:function(he){for(var Ee=(he||document).querySelectorAll(H),G=0,V;V=Ee[G++];)e.highlightElement(V)}};var we=!1;e.fileHighlight=function(){we||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),we=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(r$);var ky={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,y=0,C={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function G(V){return V instanceof M?new M(V.type,G(V.content),V.alias):Array.isArray(V)?V.map(G):V.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(G){return Object.prototype.toString.call(G).slice(8,-1)},objId:function(G){return G.__id||Object.defineProperty(G,"__id",{value:++y}),G.__id},clone:function G(V,Q){Q=Q||{};var X,Z;switch(P.util.type(V)){case"Object":if(Z=P.util.objId(V),Q[Z])return Q[Z];X={},Q[Z]=X;for(var ee in V)V.hasOwnProperty(ee)&&(X[ee]=G(V[ee],Q));return X;case"Array":return Z=P.util.objId(V),Q[Z]?Q[Z]:(X=[],Q[Z]=X,V.forEach(function(ie,ae){X[ae]=G(ie,Q)}),X);default:return V}},getLanguage:function(G){for(;G;){var V=v.exec(G.className);if(V)return V[1].toLowerCase();G=G.parentElement}return"none"},setLanguage:function(G,V){G.className=G.className.replace(RegExp(v,"gi"),""),G.classList.add("language-"+V)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var G=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(G){var V=document.getElementsByTagName("script");for(var Q in V)if(V[Q].src==G)return V[Q]}return null}},isActive:function(G,V,Q){for(var X="no-"+V;G;){var Z=G.classList;if(Z.contains(V))return!0;if(Z.contains(X))return!1;G=G.parentElement}return!!Q}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(G,V){var Q=P.util.clone(P.languages[G]);for(var X in V)Q[X]=V[X];return Q},insertBefore:function(G,V,Q,X){X=X||P.languages;var Z=X[G],ee={};for(var ie in Z)if(Z.hasOwnProperty(ie)){if(ie==V)for(var ae in Q)Q.hasOwnProperty(ae)&&(ee[ae]=Q[ae]);Q.hasOwnProperty(ie)||(ee[ie]=Z[ie])}var Se=X[G];return X[G]=ee,P.languages.DFS(P.languages,function(Te,Pe){Pe===Se&&Te!=G&&(this[Te]=ee)}),ee},DFS:function G(V,Q,X,Z){Z=Z||{};var ee=P.util.objId;for(var ie in V)if(V.hasOwnProperty(ie)){Q.call(V,ie,V[ie],X||ie);var ae=V[ie],Se=P.util.type(ae);Se==="Object"&&!Z[ee(ae)]?(Z[ee(ae)]=!0,G(ae,Q,null,Z)):Se==="Array"&&!Z[ee(ae)]&&(Z[ee(ae)]=!0,G(ae,Q,ie,Z))}}},plugins:{},highlightAll:function(G,V){P.highlightAllUnder(document,G,V)},highlightAllUnder:function(G,V,Q){var X={callback:Q,container:G,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),P.hooks.run("before-all-elements-highlight",X);for(var Z=0,ee;ee=X.elements[Z++];)P.highlightElement(ee,V===!0,X.callback)},highlightElement:function(G,V,Q){var X=P.util.getLanguage(G),Z=P.languages[X];P.util.setLanguage(G,X);var ee=G.parentElement;ee&&ee.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(ee,X);var ie=G.textContent,ae={element:G,language:X,grammar:Z,code:ie};function Se(Pe){ae.highlightedCode=Pe,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),Q&&Q.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),ee=ae.element.parentElement,ee&&ee.nodeName.toLowerCase()==="pre"&&!ee.hasAttribute("tabindex")&&ee.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),Q&&Q.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Se(P.util.encode(ae.code));return}if(V&&n.Worker){var Te=new Worker(P.filename);Te.onmessage=function(Pe){Se(Pe.data)},Te.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Se(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(G,V,Q){var X={code:G,grammar:V,language:Q};if(P.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=P.tokenize(X.code,X.grammar),P.hooks.run("after-tokenize",X),M.stringify(P.util.encode(X.tokens),X.language)},tokenize:function(G,V){var Q=V.rest;if(Q){for(var X in Q)V[X]=Q[X];delete V.rest}var Z=new H;return q(Z,Z.head,G),O(G,Z,V,Z.head,0),we(Z)},hooks:{all:{},add:function(G,V){var Q=P.hooks.all;Q[G]=Q[G]||[],Q[G].push(V)},run:function(G,V){var Q=P.hooks.all[G];if(!(!Q||!Q.length))for(var X=0,Z;Z=Q[X++];)Z(V)}},Token:M};n.Prism=P;function M(G,V,Q,X){this.type=G,this.content=V,this.alias=Q,this.length=(X||"").length|0}M.stringify=function G(V,Q){if(typeof V=="string")return V;if(Array.isArray(V)){var X="";return V.forEach(function(Se){X+=G(Se,Q)}),X}var Z={type:V.type,content:G(V.content,Q),tag:"span",classes:["token",V.type],attributes:{},language:Q},ee=V.alias;ee&&(Array.isArray(ee)?Array.prototype.push.apply(Z.classes,ee):Z.classes.push(ee)),P.hooks.run("wrap",Z);var ie="";for(var ae in Z.attributes)ie+=" "+ae+'="'+(Z.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+Z.tag+' class="'+Z.classes.join(" ")+'"'+ie+">"+Z.content+"</"+Z.tag+">"};function N(G,V,Q,X){G.lastIndex=V;var Z=G.exec(Q);if(Z&&X&&Z[1]){var ee=Z[1].length;Z.index+=ee,Z[0]=Z[0].slice(ee)}return Z}function O(G,V,Q,X,Z,ee){for(var ie in Q)if(!(!Q.hasOwnProperty(ie)||!Q[ie])){var ae=Q[ie];ae=Array.isArray(ae)?ae:[ae];for(var Se=0;Se<ae.length;++Se){if(ee&&ee.cause==ie+","+Se)return;var Te=ae[Se],Pe=Te.inside,at=!!Te.lookbehind,vt=!!Te.greedy,nr=Te.alias;if(vt&&!Te.pattern.global){var xt=Te.pattern.toString().match(/[imsuy]*$/)[0];Te.pattern=RegExp(Te.pattern.source,xt+"g")}for(var mt=Te.pattern||Te,Ze=X.next,$t=Z;Ze!==V.tail&&!(ee&&$t>=ee.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(V.length>G.length)return;if(!(Qt instanceof M)){var Xt=1,pt;if(vt){if(pt=N(mt,$t,G,at),!pt||pt.index>=G.length)break;var Wt=pt.index,Lr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;Wt>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof M)continue;for(var Mr=Ze;Mr!==V.tail&&(Yt<Lr||typeof Mr.value=="string");Mr=Mr.next)Xt++,Yt+=Mr.value.length;Xt--,Qt=G.slice($t,Yt),pt.index-=$t}else if(pt=N(mt,0,Qt,at),!pt)continue;var Wt=pt.index,_r=pt[0],zr=Qt.slice(0,Wt),ar=Qt.slice(Wt+_r.length),Vr=$t+Qt.length;ee&&Vr>ee.reach&&(ee.reach=Vr);var ir=Ze.prev;zr&&(ir=q(V,ir,zr),$t+=zr.length),J(V,ir,Xt);var Cr=new M(ie,Pe?P.tokenize(_r,Pe):_r,nr,_r);if(Ze=q(V,ir,Cr),ar&&q(V,Ze,ar),Xt>1){var W={cause:ie+","+Se,reach:Vr};O(G,V,Q,Ze.prev,$t,W),ee&&W.reach>ee.reach&&(ee.reach=W.reach)}}}}}}function H(){var G={value:null,prev:null,next:null},V={value:null,prev:G,next:null};G.next=V,this.head=G,this.tail=V,this.length=0}function q(G,V,Q){var X=V.next,Z={value:Q,prev:V,next:X};return V.next=Z,X.prev=Z,G.length++,Z}function J(G,V,Q){for(var X=V.next,Z=0;Z<Q&&X!==G.tail;Z++)X=X.next;V.next=X,X.prev=V,G.length-=Z}function we(G){for(var V=[],Q=G.head.next;Q!==G.tail;)V.push(Q.value),Q=Q.next;return V}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(G){var V=JSON.parse(G.data),Q=V.language,X=V.code,Z=V.immediateClose;n.postMessage(P.highlight(X,P.languages[Q],Q)),Z&&n.close()},!1)),P;var ue=P.util.currentScript();ue&&(P.filename=ue.src,ue.hasAttribute("data-manual")&&(P.manual=!0));function he(){P.manual||P.highlightAll()}if(!P.manual){var Ee=document.readyState;Ee==="loading"||Ee==="interactive"&&ue&&ue.defer?document.addEventListener("DOMContentLoaded",he):window.requestAnimationFrame?window.requestAnimationFrame(he):window.setTimeout(he,16)}return P}(r);t.exports&&(t.exports=e),typeof Ii<"u"&&(Ii.Prism=e)})(ky);var Ug=ky.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const s$={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},n$="_container_zhbxc_2",a$="_header_zhbxc_9",i$="_main_zhbxc_14",l$="_footer_zhbxc_19",u$={container:n$,header:a$,main:i$,footer:l$},xc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,v]of r)e[n]=v;return e};function o$(t,r,e,n,v,y){return ps(),Us("div",{class:En(t.$style.container)},[y.hasHeader?(ps(),Us("header",{key:0,class:En(t.$style.header)},[jc(t.$slots,"header")],2)):Kf("",!0),Ki("main",{class:En(t.$style.main)},[jc(t.$slots,"default")],2),y.hasFooter?(ps(),Us("footer",{key:1,class:En(t.$style.footer)},[jc(t.$slots,"footer")],2)):Kf("",!0)],2)}const f$={$style:u$},rc=xc(s$,[["render",o$],["__cssModules",f$]]),c$={key:0},h$=["onClick"],p$={key:1},v$=["onClick"],g$=mc({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=To(!1),n=r;return(v,y)=>(ps(),Us("div",{class:En(v.$style.wrapper)},[Ki("button",{onClick:y[0]||(y[0]=C=>e.value=!e.value)},[jc(v.$slots,"default")]),vs(Lv,null,{default:Pa(()=>[e.value?(ps(),Us("div",{key:0,class:En(v.$style.menu)},[v.options instanceof Array?(ps(),Us("div",c$,[(ps(!0),Us(Pn,null,uh(v.options,C=>(ps(),Us("div",{class:En(v.$style.opt),onClick:P=>{e.value=!1,n("select",C)}},ho(C),11,h$))),256))])):(ps(),Us("div",p$,[(ps(!0),Us(Pn,null,uh(Object.keys(v.options),C=>(ps(),Us("div",{class:En(v.$style.opt),onClick:P=>{e.value=!1,n("select",C)}},ho(v.options[C]),11,v$))),256))]))],2)):Kf("",!0)]),_:1})],2))}}),d$="_wrapper_1dk0z_2",y$="_menu_1dk0z_5",w$="_opt_1dk0z_12",m$={wrapper:d$,menu:y$,opt:w$},$$={$style:m$},My=xc(g$,[["__cssModules",$$]]),x$=mc({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,v=To(e.modelValue);uc(v,()=>{n("update:modelValue",v.value)},{immediate:!0});function y(P){v.value=e.samples[P]}const C=P=>Ug.highlight(P,Ug.languages.js,"javascript");return(P,M)=>(ps(),Sh(rc,null,{header:Pa(()=>[Pu(" Input "),e.samples?(ps(),Us("div",{key:0,class:En(P.$style.actions)},[vs(My,{options:Object.keys(e.samples),onSelect:y},{default:Pa(()=>[Pu("Samples")]),_:1},8,["options"])],2)):Kf("",!0)]),footer:Pa(()=>[e.parseError?(ps(),Us("span",{key:0,class:En(P.$style.parseError)},ho(e.parseError),3)):Kf("",!0),Ki("div",{class:En(P.$style.actions)},[Ki("button",{onClick:M[1]||(M[1]=N=>n("run"))},"RUN")],2)]),default:Pa(()=>[vs(vc(Ym),{class:En(P.$style.code),modelValue:v.value,"onUpdate:modelValue":M[0]||(M[0]=N=>v.value=N),highlight:C,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),b$="_code_af8rl_2",A$="_parseError_af8rl_6",_$="_actions_af8rl_9",C$={code:b$,parseError:A$,actions:_$},P$={$style:C$},k$=xc(x$,[["__cssModules",P$]]);function rs(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let zf=class Ey extends Error{constructor(e,n){super(e);ve(this,"name","AiScript");ve(this,"info");ve(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ey)}},Bg=class extends zf{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},Zt=class extends zf{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);ve(this,"loc");ve(this,"name","Syntax");this.loc=n}};class qg extends zf{constructor(e,n,v){super(`${e} (Line ${n.line}, Column ${n.column})`,v);ve(this,"loc");ve(this,"name","Namespace");this.loc=n}}let rr=class extends zf{constructor(e,n){super(e,n);ve(this,"name","Runtime")}},Kg=class extends rr{constructor(r,e){super(r,e)}},M$=class extends rr{constructor(e,n){super(e,n);ve(this,"name","")}};var Wu=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Hu=class Op{constructor(r=[],e,n,v){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Op(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Op(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new rr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const y=v.get(r);if(!y.isMutable)throw new rr(`Cannot assign to an immutable variable ${r}.`);y.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Wu([rs],Hu.prototype,"log",null);Wu([rs],Hu.prototype,"onUpdated",null);Wu([rs],Hu.prototype,"createChildScope",null);Wu([rs],Hu.prototype,"createChildNamespaceScope",null);Wu([rs],Hu.prototype,"get",null);Wu([rs],Hu.prototype,"exists",null);Wu([rs],Hu.prototype,"getAll",null);Wu([rs],Hu.prototype,"add",null);Wu([rs],Hu.prototype,"assign",null);let Fc;const E$=new Uint8Array(16);function S$(){if(!Fc&&(Fc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fc(E$)}const vn=[];for(let t=0;t<256;++t)vn.push((t+256).toString(16).slice(1));function N$(t,r=0){return vn[t[r+0]]+vn[t[r+1]]+vn[t[r+2]]+vn[t[r+3]]+"-"+vn[t[r+4]]+vn[t[r+5]]+"-"+vn[t[r+6]]+vn[t[r+7]]+"-"+vn[t[r+8]]+vn[t[r+9]]+"-"+vn[t[r+10]]+vn[t[r+11]]+vn[t[r+12]]+vn[t[r+13]]+vn[t[r+14]]+vn[t[r+15]]}const F$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zg={randomUUID:F$};function bc(t,r,e){if(zg.randomUUID&&!r&&!t)return zg.randomUUID();t=t||{};const n=t.random||(t.rng||S$)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,N$(n)}var Hv={exports:{}};Hv.exports;(function(t){(function(r,e,n){function v(M){var N=this,O=P();N.next=function(){var H=2091639*N.s0+N.c*23283064365386963e-26;return N.s0=N.s1,N.s1=N.s2,N.s2=H-(N.c=H|0)},N.c=1,N.s0=O(" "),N.s1=O(" "),N.s2=O(" "),N.s0-=O(M),N.s0<0&&(N.s0+=1),N.s1-=O(M),N.s1<0&&(N.s1+=1),N.s2-=O(M),N.s2<0&&(N.s2+=1),O=null}function y(M,N){return N.c=M.c,N.s0=M.s0,N.s1=M.s1,N.s2=M.s2,N}function C(M,N){var O=new v(M),H=N&&N.state,q=O.next;return q.int32=function(){return O.next()*4294967296|0},q.double=function(){return q()+(q()*2097152|0)*11102230246251565e-32},q.quick=q,H&&(typeof H=="object"&&y(H,O),q.state=function(){return y(O,{})}),q}function P(){var M=4022871197,N=function(O){O=String(O);for(var H=0;H<O.length;H++){M+=O.charCodeAt(H);var q=.02519603282416938*M;M=q>>>0,q-=M,q*=M,M=q>>>0,q-=M,M+=q*4294967296}return(M>>>0)*23283064365386963e-26};return N}e&&e.exports?e.exports=C:this.alea=C})(Ii,t)})(Hv);var O$=Hv.exports,Uv={exports:{}};Uv.exports;(function(t){(function(r,e,n){function v(P){var M=this,N="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var H=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^H^H>>>8},P===(P|0)?M.x=P:N+=P;for(var O=0;O<N.length+64;O++)M.x^=N.charCodeAt(O)|0,M.next()}function y(P,M){return M.x=P.x,M.y=P.y,M.z=P.z,M.w=P.w,M}function C(P,M){var N=new v(P),O=M&&M.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var q=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(q+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&y(O,N),H.state=function(){return y(N,{})}),H}e&&e.exports?e.exports=C:this.xor128=C})(Ii,t)})(Uv);var T$=Uv.exports,Bv={exports:{}};Bv.exports;(function(t){(function(r,e,n){function v(P){var M=this,N="";M.next=function(){var H=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^(H^H<<1))|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,P===(P|0)?M.x=P:N+=P;for(var O=0;O<N.length+64;O++)M.x^=N.charCodeAt(O)|0,O==N.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function y(P,M){return M.x=P.x,M.y=P.y,M.z=P.z,M.w=P.w,M.v=P.v,M.d=P.d,M}function C(P,M){var N=new v(P),O=M&&M.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var q=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(q+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&y(O,N),H.state=function(){return y(N,{})}),H}e&&e.exports?e.exports=C:this.xorwow=C})(Ii,t)})(Bv);var I$=Bv.exports,qv={exports:{}};qv.exports;(function(t){(function(r,e,n){function v(P){var M=this;M.next=function(){var O=M.x,H=M.i,q,J;return q=O[H],q^=q>>>7,J=q^q<<24,q=O[H+1&7],J^=q^q>>>10,q=O[H+3&7],J^=q^q>>>3,q=O[H+4&7],J^=q^q<<7,q=O[H+7&7],q=q^q<<13,J^=q^q<<9,O[H]=J,M.i=H+1&7,J};function N(O,H){var q,J=[];if(H===(H|0))J[0]=H;else for(H=""+H,q=0;q<H.length;++q)J[q&7]=J[q&7]<<15^H.charCodeAt(q)+J[q+1&7]<<13;for(;J.length<8;)J.push(0);for(q=0;q<8&&J[q]===0;++q);for(q==8?J[7]=-1:J[q],O.x=J,O.i=0,q=256;q>0;--q)O.next()}N(M,P)}function y(P,M){return M.x=P.x.slice(),M.i=P.i,M}function C(P,M){P==null&&(P=+new Date);var N=new v(P),O=M&&M.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var q=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(q+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(O.x&&y(O,N),H.state=function(){return y(N,{})}),H}e&&e.exports?e.exports=C:this.xorshift7=C})(Ii,t)})(qv);var j$=qv.exports,Kv={exports:{}};Kv.exports;(function(t){(function(r,e,n){function v(P){var M=this;M.next=function(){var O=M.w,H=M.X,q=M.i,J,we;return M.w=O=O+1640531527|0,we=H[q+34&127],J=H[q=q+1&127],we^=we<<13,J^=J<<17,we^=we>>>15,J^=J>>>12,we=H[q]=we^J,M.i=q,we+(O^O>>>16)|0};function N(O,H){var q,J,we,ue,he,Ee=[],G=128;for(H===(H|0)?(J=H,H=null):(H=H+"\0",J=0,G=Math.max(G,H.length)),we=0,ue=-32;ue<G;++ue)H&&(J^=H.charCodeAt((ue+32)%H.length)),ue===0&&(he=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,ue>=0&&(he=he+1640531527|0,q=Ee[ue&127]^=J+he,we=q==0?we+1:0);for(we>=128&&(Ee[(H&&H.length||0)&127]=-1),we=127,ue=4*128;ue>0;--ue)J=Ee[we+34&127],q=Ee[we=we+1&127],J^=J<<13,q^=q<<17,J^=J>>>15,q^=q>>>12,Ee[we]=J^q;O.w=he,O.X=Ee,O.i=we}N(M,P)}function y(P,M){return M.i=P.i,M.w=P.w,M.X=P.X.slice(),M}function C(P,M){P==null&&(P=+new Date);var N=new v(P),O=M&&M.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var q=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(q+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(O.X&&y(O,N),H.state=function(){return y(N,{})}),H}e&&e.exports?e.exports=C:this.xor4096=C})(Ii,t)})(Kv);var R$=Kv.exports,zv={exports:{}};zv.exports;(function(t){(function(r,e,n){function v(P){var M=this,N="";M.next=function(){var H=M.b,q=M.c,J=M.d,we=M.a;return H=H<<25^H>>>7^q,q=q-J|0,J=J<<24^J>>>8^we,we=we-H|0,M.b=H=H<<20^H>>>12^q,M.c=q=q-J|0,M.d=J<<16^q>>>16^we,M.a=we-H|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,P===Math.floor(P)?(M.a=P/4294967296|0,M.b=P|0):N+=P;for(var O=0;O<N.length+20;O++)M.b^=N.charCodeAt(O)|0,M.next()}function y(P,M){return M.a=P.a,M.b=P.b,M.c=P.c,M.d=P.d,M}function C(P,M){var N=new v(P),O=M&&M.state,H=function(){return(N.next()>>>0)/4294967296};return H.double=function(){do var q=N.next()>>>11,J=(N.next()>>>0)/4294967296,we=(q+J)/(1<<21);while(we===0);return we},H.int32=N.next,H.quick=H,O&&(typeof O=="object"&&y(O,N),H.state=function(){return y(N,{})}),H}e&&e.exports?e.exports=C:this.tychei=C})(Ii,t)})(zv);var D$=zv.exports,Sy={exports:{}};const L$={},H$=Object.freeze(Object.defineProperty({__proto__:null,default:L$},Symbol.toStringTag,{value:"Module"})),U$=t$(H$);(function(t){(function(r,e,n){var v=256,y=6,C=52,P="random",M=n.pow(v,y),N=n.pow(2,C),O=N*2,H=v-1,q;function J(Q,X,Z){var ee=[];X=X==!0?{entropy:!0}:X||{};var ie=Ee(he(X.entropy?[Q,V(e)]:Q??G(),3),ee),ae=new we(ee),Se=function(){for(var Te=ae.g(y),Pe=M,at=0;Te<N;)Te=(Te+at)*v,Pe*=v,at=ae.g(1);for(;Te>=O;)Te/=2,Pe/=2,at>>>=1;return(Te+at)/Pe};return Se.int32=function(){return ae.g(4)|0},Se.quick=function(){return ae.g(4)/4294967296},Se.double=Se,Ee(V(ae.S),e),(X.pass||Z||function(Te,Pe,at,vt){return vt&&(vt.S&&ue(vt,ae),Te.state=function(){return ue(ae,{})}),at?(n[P]=Te,Pe):Te})(Se,ie,"global"in X?X.global:this==n,X.state)}function we(Q){var X,Z=Q.length,ee=this,ie=0,ae=ee.i=ee.j=0,Se=ee.S=[];for(Z||(Q=[Z++]);ie<v;)Se[ie]=ie++;for(ie=0;ie<v;ie++)Se[ie]=Se[ae=H&ae+Q[ie%Z]+(X=Se[ie])],Se[ae]=X;(ee.g=function(Te){for(var Pe,at=0,vt=ee.i,nr=ee.j,xt=ee.S;Te--;)Pe=xt[vt=H&vt+1],at=at*v+xt[H&(xt[vt]=xt[nr=H&nr+Pe])+(xt[nr]=Pe)];return ee.i=vt,ee.j=nr,at})(v)}function ue(Q,X){return X.i=Q.i,X.j=Q.j,X.S=Q.S.slice(),X}function he(Q,X){var Z=[],ee=typeof Q,ie;if(X&&ee=="object")for(ie in Q)try{Z.push(he(Q[ie],X-1))}catch{}return Z.length?Z:ee=="string"?Q:Q+"\0"}function Ee(Q,X){for(var Z=Q+"",ee,ie=0;ie<Z.length;)X[H&ie]=H&(ee^=X[H&ie]*19)+Z.charCodeAt(ie++);return V(X)}function G(){try{var Q;return q&&(Q=q.randomBytes)?Q=Q(v):(Q=new Uint8Array(v),(r.crypto||r.msCrypto).getRandomValues(Q)),V(Q)}catch{var X=r.navigator,Z=X&&X.plugins;return[+new Date,r,Z,r.screen,V(e)]}}function V(Q){return String.fromCharCode.apply(0,Q)}if(Ee(n.random(),e),t.exports){t.exports=J;try{q=U$}catch{}}else n["seed"+P]=J})(typeof self<"u"?self:Ii,[],Math)})(Sy);var B$=Sy.exports,q$=O$,K$=T$,z$=I$,V$=j$,W$=R$,G$=D$,of=B$;of.alea=q$;of.xor128=K$;of.xorwow=z$;of.xorshift7=V$;of.xor4096=W$;of.tychei=G$;var J$=of;const ff=e$(J$),Tt={type:"null"},Ks={type:"bool",value:!0},zs={type:"bool",value:!1},je=t=>({type:"num",value:t}),zt=t=>({type:"str",value:t}),qo=t=>({type:"bool",value:t}),ph=t=>({type:"obj",value:t}),Tr=t=>({type:"arr",value:t}),Z$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),fe=t=>({type:"fn",native:t}),Q$=t=>({type:"return",value:t}),X$=()=>({type:"break",value:null}),Y$=()=>({type:"continue",value:null}),ex=t=>t.type==="return"?t.value:t,Tp=(t,r)=>({type:"error",value:t,info:r});function bn(t){if(t==null)throw new rr("Expect anything, but got nothing.")}function yn(t){if(t==null)throw new rr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new rr(`Expect boolean, but got ${t.type}.`)}function _u(t){if(t==null)throw new rr("Expect function, but got nothing.");if(t.type!=="fn")throw new rr(`Expect function, but got ${t.type}.`)}function $r(t){if(t==null)throw new rr("Expect string, but got nothing.");if(t.type!=="str")throw new rr(`Expect string, but got ${t.type}.`)}function ke(t){if(t==null)throw new rr("Expect number, but got nothing.");if(t.type!=="num")throw new rr(`Expect number, but got ${t.type}.`)}function xu(t){if(t==null)throw new rr("Expect object, but got nothing.");if(t.type!=="obj")throw new rr(`Expect object, but got ${t.type}.`)}function go(t){if(t==null)throw new rr("Expect array, but got nothing.");if(t.type!=="arr")throw new rr(`Expect array, but got ${t.type}.`)}function Qh(t){return t.type==="obj"}function vh(t){return t.type==="arr"}function _f(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Ip(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Ip(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function jp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>jp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=jp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Rp(t){if(t===null)return Tt;if(typeof t=="boolean")return qo(t);if(typeof t=="string")return zt(t);if(typeof t=="number")return je(t);if(Array.isArray(t))return Tr(t.map(r=>Rp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Rp(n));return ph(r)}return Tt}function Cf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Cf(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,y]of t.value)n.push(`${v}: ${Cf(y,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?t.native?"@( ?? ) { native code }":`@( ${t.args.map(n=>n.name).join(", ")} ) { ... }`:"?"}const tx={version:"0.19.0-next.20240710"},rx=tx.version,sx=new TextEncoder,nx=new TextDecoder,ax={help:zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zt(rx),"Core:ai":zt("kawaii"),"Core:not":fe(([t])=>(yn(t),t.value?zs:Ks)),"Core:eq":fe(([t,r])=>(bn(t),bn(r),_f(t,r)?Ks:zs)),"Core:neq":fe(([t,r])=>(bn(t),bn(r),_f(t,r)?zs:Ks)),"Core:and":fe(([t,r])=>(yn(t),t.value?(yn(r),r.value?Ks:zs):zs)),"Core:or":fe(([t,r])=>(yn(t),t.value?Ks:(yn(r),r.value?Ks:zs))),"Core:add":fe(([t,r])=>(ke(t),ke(r),je(t.value+r.value))),"Core:sub":fe(([t,r])=>(ke(t),ke(r),je(t.value-r.value))),"Core:mul":fe(([t,r])=>(ke(t),ke(r),je(t.value*r.value))),"Core:pow":fe(([t,r])=>{ke(t),ke(r);const e=t.value**r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:div":fe(([t,r])=>{ke(t),ke(r);const e=t.value/r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:mod":fe(([t,r])=>(ke(t),ke(r),je(t.value%r.value))),"Core:gt":fe(([t,r])=>(ke(t),ke(r),t.value>r.value?Ks:zs)),"Core:lt":fe(([t,r])=>(ke(t),ke(r),t.value<r.value?Ks:zs)),"Core:gteq":fe(([t,r])=>(ke(t),ke(r),t.value>=r.value?Ks:zs)),"Core:lteq":fe(([t,r])=>(ke(t),ke(r),t.value<=r.value?Ks:zs)),"Core:type":fe(([t])=>(bn(t),zt(t.type))),"Core:to_str":fe(([t])=>(bn(t),zt(Cf(t)))),"Core:range":fe(([t,r])=>(ke(t),ke(r),t.value<r.value?Tr(Array.from({length:r.value-t.value+1},(e,n)=>je(n+t.value))):t.value>r.value?Tr(Array.from({length:t.value-r.value+1},(e,n)=>je(t.value-n))):Tr([t]))),"Core:sleep":fe(async([t])=>(ke(t),await new Promise(r=>setTimeout(r,t.value)),Tt)),"Core:abort":fe(async([t])=>{throw $r(t),new M$(t.value)}),"Util:uuid":fe(()=>zt(bc())),"Json:stringify":fe(([t])=>(bn(t),zt(JSON.stringify(jp(t))))),"Json:parse":fe(([t])=>{$r(t);try{return Rp(JSON.parse(t.value))}catch{return Tp("not_json")}}),"Json:parsable":fe(([t])=>{$r(t);try{JSON.parse(t.value)}catch{return qo(!1)}return qo(!0)}),"Date:now":fe(()=>je(Date.now())),"Date:year":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":fe(([t])=>(t&&ke(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":fe(([t])=>($r(t),je(new Date(t.value).getTime()))),"Date:to_iso_str":fe(([t,r])=>{t&&ke(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&ke(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const q=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+q*J),e.setUTCMinutes(e.getUTCMinutes()+q*we);const ue=n>0?"+":"-",he=J.toString().padStart(2,"0"),Ee=we.toString().padStart(2,"0");v=`${ue}${he}:${Ee}`}const y=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return zt(`${y}-${C}-${P}T${M}:${N}:${O}.${H}${v}`)}),"Math:Infinity":je(1/0),"Math:E":je(Math.E),"Math:LN2":je(Math.LN2),"Math:LN10":je(Math.LN10),"Math:LOG2E":je(Math.LOG2E),"Math:LOG10E":je(Math.LOG10E),"Math:PI":je(Math.PI),"Math:SQRT1_2":je(Math.SQRT1_2),"Math:SQRT2":je(Math.SQRT2),"Math:abs":fe(([t])=>(ke(t),je(Math.abs(t.value)))),"Math:acos":fe(([t])=>(ke(t),je(Math.acos(t.value)))),"Math:acosh":fe(([t])=>(ke(t),je(Math.acosh(t.value)))),"Math:asin":fe(([t])=>(ke(t),je(Math.asin(t.value)))),"Math:asinh":fe(([t])=>(ke(t),je(Math.asinh(t.value)))),"Math:atan":fe(([t])=>(ke(t),je(Math.atan(t.value)))),"Math:atanh":fe(([t])=>(ke(t),je(Math.atanh(t.value)))),"Math:atan2":fe(([t,r])=>(ke(t),ke(r),je(Math.atan2(t.value,r.value)))),"Math:cbrt":fe(([t])=>(ke(t),je(Math.cbrt(t.value)))),"Math:ceil":fe(([t])=>(ke(t),je(Math.ceil(t.value)))),"Math:clz32":fe(([t])=>(ke(t),je(Math.clz32(t.value)))),"Math:cos":fe(([t])=>(ke(t),je(Math.cos(t.value)))),"Math:cosh":fe(([t])=>(ke(t),je(Math.cosh(t.value)))),"Math:exp":fe(([t])=>(ke(t),je(Math.exp(t.value)))),"Math:expm1":fe(([t])=>(ke(t),je(Math.expm1(t.value)))),"Math:floor":fe(([t])=>(ke(t),je(Math.floor(t.value)))),"Math:fround":fe(([t])=>(ke(t),je(Math.fround(t.value)))),"Math:hypot":fe(([t])=>{go(t);const r=[];for(const e of t.value)ke(e),r.push(e.value);return je(Math.hypot(...r))}),"Math:imul":fe(([t,r])=>(ke(t),ke(r),je(Math.imul(t.value,r.value)))),"Math:log":fe(([t])=>(ke(t),je(Math.log(t.value)))),"Math:log1p":fe(([t])=>(ke(t),je(Math.log1p(t.value)))),"Math:log10":fe(([t])=>(ke(t),je(Math.log10(t.value)))),"Math:log2":fe(([t])=>(ke(t),je(Math.log2(t.value)))),"Math:max":fe(([t,r])=>(ke(t),ke(r),je(Math.max(t.value,r.value)))),"Math:min":fe(([t,r])=>(ke(t),ke(r),je(Math.min(t.value,r.value)))),"Math:pow":fe(([t,r])=>(ke(t),ke(r),je(Math.pow(t.value,r.value)))),"Math:round":fe(([t])=>(ke(t),je(Math.round(t.value)))),"Math:sign":fe(([t])=>(ke(t),je(Math.sign(t.value)))),"Math:sin":fe(([t])=>(ke(t),je(Math.sin(t.value)))),"Math:sinh":fe(([t])=>(ke(t),je(Math.sinh(t.value)))),"Math:sqrt":fe(([t])=>{ke(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new rr("Invalid operation.");return je(r)}),"Math:tan":fe(([t])=>(ke(t),je(Math.tan(t.value)))),"Math:tanh":fe(([t])=>(ke(t),je(Math.tanh(t.value)))),"Math:trunc":fe(([t])=>(ke(t),je(Math.trunc(t.value)))),"Math:rnd":fe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):je(Math.random())),"Math:gen_rng":fe(([t])=>{if(bn(t),t.type!=="num"&&t.type!=="str")return Tt;const r=ff(t.value.toString());return fe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?je(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):je(r()))}),"Num:from_hex":fe(([t])=>($r(t),je(parseInt(t.value,16)))),"Str:lf":zt(`
`),"Str:lt":fe(([t,r])=>($r(t),$r(r),t.value<r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:gt":fe(([t,r])=>($r(t),$r(r),t.value>r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:from_codepoint":fe(([t])=>(ke(t),zt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":fe(([t])=>(go(t),zt(Array.from(t.value.map(r=>(ke(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":fe(([t])=>(go(t),zt(nx.decode(Uint8Array.from(t.value.map(r=>(ke(r),r.value))))))),"Uri:encode_full":fe(([t])=>($r(t),zt(encodeURI(t.value)))),"Uri:encode_component":fe(([t])=>($r(t),zt(encodeURIComponent(t.value)))),"Uri:decode_full":fe(([t])=>($r(t),zt(decodeURI(t.value)))),"Uri:decode_component":fe(([t])=>($r(t),zt(decodeURIComponent(t.value)))),"Arr:create":fe(([t,r])=>{ke(t);try{return Tr(Array(t.value).fill(r??Tt))}catch(e){throw t.value<0?new rr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new rr("Arr:create expected integer, got non-integer")}}),"Obj:keys":fe(([t])=>(xu(t),Tr(Array.from(t.value.keys()).map(r=>zt(r))))),"Obj:vals":fe(([t])=>(xu(t),Tr(Array.from(t.value.values())))),"Obj:kvs":fe(([t])=>(xu(t),Tr(Array.from(t.value.entries()).map(([r,e])=>Tr([zt(r),e]))))),"Obj:get":fe(([t,r])=>(xu(t),$r(r),t.value.get(r.value)??Tt)),"Obj:set":fe(([t,r,e])=>(xu(t),$r(r),bn(e),t.value.set(r.value,e),Tt)),"Obj:has":fe(([t,r])=>(xu(t),$r(r),qo(t.value.has(r.value)))),"Obj:copy":fe(([t])=>(xu(t),ph(new Map(t.value)))),"Obj:merge":fe(([t,r])=>(xu(t),xu(r),ph(new Map([...t.value,...r.value])))),"Error:create":fe(([t,r])=>($r(t),Tp(t.value,r))),"Async:interval":fe(async([t,r,e],n)=>{ke(t),_u(r),e&&(yn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),fe(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":fe(async([t,r],e)=>{ke(t),_u(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),fe(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})};var cf={},ix=()=>{const t="\\ud800-\\udfff",C="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",P="\\ufe0e\\ufe0f",M="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",N=`[${t}]`,O=`[${C}]`,H="\\ud83c[\\udffb-\\udfff]",q=`(?:${O}|${H})`,J=`[^${t}]`,we="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",he="\\u200d",Ee="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",G=`[${M}]`,V=`${q}?`,Q=`[${P}]?`,X=`(?:${he}(?:${[J,we,ue].join("|")})${Q+V})*`,Z=Q+V+X,ie=`(?:${[`${J}${O}?`,O,we,ue,N,G].join("|")})`;return new RegExp(`${Ee}|${H}(?=${H})|${ie+Z}`,"g")},lx=Ii&&Ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cf,"__esModule",{value:!0});var Fh=lx(ix);function Dp(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Fh.default())||[]}var Gs=cf.toArray=Dp;function Vv(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Fh.default());return r===null?0:r.length}var hf=cf.length=Vv;function Ny(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(Fh.default());return n?n.slice(r,e).join(""):""}var pf=cf.substring=Ny;function ux(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=Vv(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var v;typeof e>"u"?v=n:(typeof e!="number"&&(e=parseInt(e,10)),v=e>=0?e+r:r);var y=t.match(Fh.default());return y?y.slice(r,v).join(""):""}cf.substr=ux;function ox(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var v=Vv(t);if(v>r)return Ny(t,0,r);if(v<r){var y=e.repeat(r-v);return n==="left"?y+t:t+y}return t}cf.limit=ox;function fx(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=Dp(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var v=Dp(r),y=!1,C;for(C=e;C<n.length;C+=1){for(var P=0;P<v.length&&v[P]===n[C+P];)P+=1;if(P===v.length&&v[P-1]===n[C+P-1]){y=!0;break}}return y?C:-1}var vf=cf.indexOf=fx;const Vg={num:{to_str:t=>fe(async(r,e)=>zt(t.value.toString())),to_hex:t=>fe(async(r,e)=>zt(t.value.toString(16)))},str:{to_num:t=>fe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Tt:je(n)}),to_arr:t=>fe(async(r,e)=>Tr(Gs(t.value).map(n=>zt(n)))),to_unicode_arr:t=>fe(async(r,e)=>Tr([...t.value].map(n=>zt(n)))),to_unicode_codepoint_arr:t=>fe(async(r,e)=>Tr([...t.value].map(n=>{const v=n.codePointAt(0);return je(v??n.charCodeAt(0))}))),to_char_arr:t=>fe(async(r,e)=>Tr(t.value.split("").map(n=>zt(n)))),to_charcode_arr:t=>fe(async(r,e)=>Tr(t.value.split("").map(n=>je(n.charCodeAt(0))))),to_utf8_byte_arr:t=>fe(async(r,e)=>Tr(Array.from(sx.encode(t.value)).map(n=>je(n)))),len:t=>je(hf(t.value)),replace:t=>fe(async([r,e],n)=>($r(r),$r(e),zt(t.value.split(r.value).join(e.value)))),index_of:t=>fe(async([r,e],n)=>{$r(r),e&&ke(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return je(vf(t.value,r.value,v))}),incl:t=>fe(async([r],e)=>($r(r),t.value.includes(r.value)?Ks:zs)),trim:t=>fe(async(r,e)=>zt(t.value.trim())),upper:t=>fe(async(r,e)=>zt(t.value.toUpperCase())),lower:t=>fe(async(r,e)=>zt(t.value.toLowerCase())),split:t=>fe(async([r],e)=>(r&&$r(r),Tr(r?t.value.split(r?r.value:"").map(n=>zt(n)):Gs(t.value).map(n=>zt(n))))),slice:t=>fe(async([r,e],n)=>(ke(r),ke(e),zt(pf(t.value,r.value,e.value)))),pick:t=>fe(async([r],e)=>{ke(r);const v=Gs(t.value)[r.value];return v?zt(v):Tt}),charcode_at:t=>fe(([r],e)=>{ke(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Tt:je(n)}),codepoint_at:t=>fe(([r],e)=>{ke(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Tt:je(n)}),starts_with:t=>fe(async([r,e],n)=>{if($r(r),!r.value)return Ks;e&&ke(e);const v=(e==null?void 0:e.value)??0;if(v<-t.value.length||v>t.value.length)return zs;const y=v>=0?v:t.value.length+v;return t.value.startsWith(r.value,y)?Ks:zs}),ends_with:t=>fe(async([r,e],n)=>{if($r(r),!r.value)return Ks;e&&ke(e);const v=(e==null?void 0:e.value)??t.value.length;if(v<-t.value.length||v>t.value.length)return zs;const y=v>=0?v:t.value.length+v;return t.value.endsWith(r.value,y)?Ks:zs}),pad_start:t=>fe(([r,e],n)=>{ke(r);const v=e?($r(e),e.value):" ";return zt(t.value.padStart(r.value,v))}),pad_end:t=>fe(([r,e],n)=>{ke(r);const v=e?($r(e),e.value):" ";return zt(t.value.padEnd(r.value,v))})},arr:{len:t=>je(t.value.length),push:t=>fe(async([r],e)=>(bn(r),t.value.push(r),t)),unshift:t=>fe(async([r],e)=>(bn(r),t.value.unshift(r),t)),pop:t=>fe(async(r,e)=>t.value.pop()??Tt),shift:t=>fe(async(r,e)=>t.value.shift()??Tt),concat:t=>fe(async([r],e)=>(go(r),Tr(t.value.concat(r.value)))),slice:t=>fe(async([r,e],n)=>(ke(r),ke(e),Tr(t.value.slice(r.value,e.value)))),join:t=>fe(async([r],e)=>(r&&$r(r),zt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>fe(async([r],e)=>{_u(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,je(y)]));return Tr(await Promise.all(n))}),filter:t=>fe(async([r],e)=>{_u(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,je(v)]);yn(C),C.value&&n.push(y)}return Tr(n)}),reduce:t=>fe(async([r,e],n)=>{_u(r);const v=e!=null;if(!v&&t.value.length===0)throw new rr("Reduce of empty array without initial value");let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,je(C)])}return y}),find:t=>fe(async([r],e)=>{_u(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,je(n)]);if(yn(y),y.value)return v}return Tt}),incl:t=>fe(async([r],e)=>(bn(r),t.value.some(n=>_f(r,n))?Ks:zs)),index_of:t=>fe(async([r,e],n)=>{if(bn(r),e){ke(e);const v=t.value.slice(0,e.value).length,y=t.value.slice(e.value).findIndex(C=>_f(C,r));return je(y<0?y:y+v)}else return je(t.value.findIndex(v=>_f(v,r)))}),reverse:t=>fe(async(r,e)=>(t.value.reverse(),Tt)),copy:t=>fe(async(r,e)=>Tr([...t.value])),sort:t=>fe(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=n(y.slice(0,P),C),N=n(y.slice(P),C),[O,H]=await Promise.all([M,N]);return v(O,H,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);ke(J),J.value<=0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return _u(r),go(t),t.value=await n(t.value,r),t}),fill:t=>fe(async([r,e,n],v)=>{const y=r??Tt,C=e&&(ke(e),e.value),P=n&&(ke(n),n.value);return t.value.fill(y,C,P),t}),repeat:t=>fe(async([r],e)=>{ke(r);try{return Tr(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new rr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new rr("arr.repeat expected integer, got non-integer")}}),splice:t=>fe(async([r,e,n],v)=>{ke(r);const y=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(ke(e),e.value):t.value.length-y,P=n!=null?(go(n),n.value):[],M=t.value.splice(y,C,...P);return Tr(M)}),flat:t=>fe(async([r],e)=>{if(r=r??je(1),ke(r),!Number.isInteger(r.value))throw new rr("arr.flat expected integer, got non-integer");if(r.value<0)throw new rr("arr.flat expected non-negative number, got negative");const n=(y,C,P)=>{if(C===0){P.push(...y);return}for(const M of y)vh(M)?n(M.value,C-1,P):P.push(M)},v=[];return n(t.value,r.value,v),Tr(v)}),flat_map:t=>fe(async([r],e)=>{_u(r);const n=t.value.map(async(y,C)=>{const P=await e.call(r,[y,je(C)]);return vh(P)?P.value:P}),v=await Promise.all(n);return Tr(v.flat())}),every:t=>fe(async([r],e)=>{_u(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,je(n)]);if(yn(y),!y.value)return zs}return Ks}),some:t=>fe(async([r],e)=>{_u(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,je(n)]);if(yn(y),y.value)return Ks}return zs}),insert:t=>fe(async([r,e],n)=>(ke(r),bn(e),t.value.splice(r.value,0,e),Tt)),remove:t=>fe(async([r],e)=>(ke(r),t.value.splice(r.value,1)[0]??Tt)),at:t=>fe(async([r,e],n)=>(ke(r),t.value.at(r.value)??e??Tt))},error:{name:t=>zt(t.value),info:t=>t.info??Tt}};function cx(t,r){if(Object.hasOwn(Vg,t.type)){const e=Vg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new rr(`No such prop (${r}) in ${t.type}.`)}else throw new rr(`Cannot read prop of ${t.type}. (reading ${r})`)}const hx={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Sn=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const Fy=300,px=Fy-1;let $n=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const n={print:fe(([v])=>{bn(v),this.opts.out&&this.opts.out(v)}),readline:fe(async v=>{const y=v[0];if($r(y),this.opts.in==null)return Tt;const C=await this.opts.in(y.value);return zt(C)})};this.vars=Object.fromEntries(Object.entries({...r,...ax,...n}).map(([v,y])=>[v,hx.const(y)])),this.scope=new Hu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Tp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof zf?this.opts.err(r):this.opts.err(new Bg(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new qg('No "var" in namespace declaration: '+v.name,v.loc);const y={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,y);break}case"ns":break;default:{const C=v;throw new qg("invalid ns member type: "+C.type,C.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Tt;{const n=new Map;for(const y of r.args.keys()){const C=r.args[y];C.default||bn(e[y]),n.set(C.name,{isMutable:!0,value:e[y]??C.default})}const v=r.scope.createChildScope(n);return ex(await this._run(r.statements,v))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const v=n instanceof zf?n:new Bg(n);throw v.loc=r.loc,v.message=`${v.message} (Line ${r.loc.line}, Column ${r.loc.column})`,v}})}async __eval(r,e){if(this.stop)return Tt;if(this.stepCount%Fy===px&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new rr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);_u(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(yn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(yn(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Tt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(_f(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Tt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Tt}case"for":{if(r.times){const n=await this._eval(r.times,e);ke(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);ke(n),ke(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:je(y)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return Tt}case"each":{const n=await this._eval(r.items,e);go(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(y.type==="break")break;if(y.type==="return")return y}return Tt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Tt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Tt}case"addAssign":{const n=await this._eval(r.dest,e);ke(n);const v=await this._eval(r.expr,e);return ke(v),await this.assign(e,r.dest,je(n.value+v.value)),Tt}case"subAssign":{const n=await this._eval(r.dest,e);ke(n);const v=await this._eval(r.expr,e);return ke(v),await this.assign(e,r.dest,je(n.value-v.value)),Tt}case"null":return Tt;case"bool":return qo(r.value);case"num":return je(r.value);case"str":return zt(r.value);case"arr":return Tr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return ph(n)}case"prop":{const n=await this._eval(r.target,e);return Qh(n)?n.value.has(r.name)?n.value.get(r.name):Tt:cx(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(vh(n)){ke(v);const y=n.value[v.value];if(y===void 0)throw new Kg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}else{if(Qh(n))return $r(v),n.value.has(v.value)?n.value.get(v.value):Tt;throw new rr(`Cannot read prop (${Cf(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return yn(n),qo(!n.value)}case"fn":return Z$(await Promise.all(r.args.map(async n=>({name:n.name,default:n.default?await this._eval(n.default,e):n.optional?Tt:void 0}))),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return qo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);n+=Cf(y)}return zt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Q$(n)}case"break":return this.log("block:break",{scope:e.name}),X$();case"continue":return this.log("block:continue",{scope:e.name}),Y$();case"ns":return Tt;case"meta":return Tt;case"and":{const n=await this._eval(r.left,e);if(yn(n),n.value){const v=await this._eval(r.right,e);return yn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(yn(n),n.value)return n;{const v=await this._eval(r.right,e);return yn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Tt;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),y=await this._eval(e.index,r);if(vh(v)){if(ke(y),v.value[y.value]===void 0)throw new Kg(`Index out of range. index: ${y.value} max: ${v.value.length-1}`);v.value[y.value]=n}else if(Qh(v))$r(y),v.value.set(y.value,n);else throw new rr(`Cannot read prop (${Cf(y)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);xu(v),v.value.set(e.name,n)}else if(e.type==="arr")go(n),await Promise.all(e.value.map((v,y)=>this.assign(r,v,n.value[y]??Tt)));else if(e.type==="obj")xu(n),await Promise.all([...e.value].map(([v,y])=>this.assign(r,y,n.value.get(v)??Tt)));else throw new rr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Sn([rs],$n.prototype,"exec",null);Sn([rs],$n.prototype,"execFn",null);Sn([rs],$n.prototype,"execFnSimple",null);Sn([rs],$n.prototype,"handleError",null);Sn([rs],$n.prototype,"log",null);Sn([rs],$n.prototype,"collectNs",null);Sn([rs],$n.prototype,"collectNsMember",null);Sn([rs],$n.prototype,"_fn",null);Sn([rs],$n.prototype,"_eval",null);Sn([rs],$n.prototype,"__eval",null);Sn([rs],$n.prototype,"_run",null);Sn([rs],$n.prototype,"registerAbortHandler",null);Sn([rs],$n.prototype,"unregisterAbortHandler",null);Sn([rs],$n.prototype,"abort",null);Sn([rs],$n.prototype,"assign",null);Sn([rs],$n,"collectMetadata",null);class vx{constructor(r,e){ve(this,"pages");ve(this,"firstPageIndex");ve(this,"lastPageIndex");ve(this,"pageIndex");ve(this,"address");ve(this,"_char");ve(this,"line");ve(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var B;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.DoKeyword=14]="DoKeyword",t[t.WhileKeyword=15]="WhileKeyword",t[t.BreakKeyword=16]="BreakKeyword",t[t.ContinueKeyword=17]="ContinueKeyword",t[t.MatchKeyword=18]="MatchKeyword",t[t.CaseKeyword=19]="CaseKeyword",t[t.DefaultKeyword=20]="DefaultKeyword",t[t.IfKeyword=21]="IfKeyword",t[t.ElifKeyword=22]="ElifKeyword",t[t.ElseKeyword=23]="ElseKeyword",t[t.ReturnKeyword=24]="ReturnKeyword",t[t.EvalKeyword=25]="EvalKeyword",t[t.VarKeyword=26]="VarKeyword",t[t.LetKeyword=27]="LetKeyword",t[t.ExistsKeyword=28]="ExistsKeyword",t[t.Not=29]="Not",t[t.NotEq=30]="NotEq",t[t.OpenSharpBracket=31]="OpenSharpBracket",t[t.Sharp3=32]="Sharp3",t[t.Percent=33]="Percent",t[t.And2=34]="And2",t[t.OpenParen=35]="OpenParen",t[t.CloseParen=36]="CloseParen",t[t.Asterisk=37]="Asterisk",t[t.Plus=38]="Plus",t[t.PlusEq=39]="PlusEq",t[t.Comma=40]="Comma",t[t.Minus=41]="Minus",t[t.MinusEq=42]="MinusEq",t[t.Dot=43]="Dot",t[t.Slash=44]="Slash",t[t.Colon=45]="Colon",t[t.Colon2=46]="Colon2",t[t.SemiColon=47]="SemiColon",t[t.Lt=48]="Lt",t[t.LtEq=49]="LtEq",t[t.Out=50]="Out",t[t.Eq=51]="Eq",t[t.Eq2=52]="Eq2",t[t.Arrow=53]="Arrow",t[t.Gt=54]="Gt",t[t.GtEq=55]="GtEq",t[t.Question=56]="Question",t[t.At=57]="At",t[t.OpenBracket=58]="OpenBracket",t[t.BackSlash=59]="BackSlash",t[t.CloseBracket=60]="CloseBracket",t[t.Hat=61]="Hat",t[t.OpenBrace=62]="OpenBrace",t[t.Or2=63]="Or2",t[t.CloseBrace=64]="CloseBrace"})(B||(B={}));class gx{constructor(r,e,n=!1,v,y){ve(this,"kind");ve(this,"loc");ve(this,"hasLeftSpacing");ve(this,"value");ve(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=v,this.children=y}}function rt(t,r,e){return new gx(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const Wg=[" ","	"],dx=["\r",`
`],Gg=/^[0-9]$/,yx=/^[A-Za-z0-9_]$/;class wx{constructor(r){ve(this,"stream");ve(this,"_tokens",[]);typeof r=="string"?this.stream=new vx(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}getKind(){return this.token.kind}next(){this._tokens[0].kind!==B.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.getKind()!==r)throw new Zt(`unexpected token: ${B[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=rt(B.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(Wg.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(dx.includes(this.stream.char))return this.stream.next(),r=rt(B.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.NotEq,n,{hasLeftSpacing:e})):r=rt(B.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=rt(B.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=rt(B.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new Zt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=rt(B.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=rt(B.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=rt(B.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=rt(B.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=rt(B.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.PlusEq,n,{hasLeftSpacing:e})):r=rt(B.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=rt(B.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.MinusEq,n,{hasLeftSpacing:e})):r=rt(B.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=rt(B.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=rt(B.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=rt(B.Colon2,n,{hasLeftSpacing:e})):r=rt(B.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=rt(B.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=rt(B.Out,n,{hasLeftSpacing:e})):r=rt(B.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=rt(B.Arrow,n,{hasLeftSpacing:e})):r=rt(B.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=rt(B.GtEq,n,{hasLeftSpacing:e})):r=rt(B.Gt,n,{hasLeftSpacing:e});break}case"?":{this.stream.next(),r=rt(B.Question,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=rt(B.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=rt(B.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=rt(B.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=rt(B.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=rt(B.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=rt(B.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=rt(B.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=rt(B.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const v=this.tryReadDigits(e);if(v){r=v;break}const y=this.tryReadWord(e);if(y){r=y;break}throw new Zt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&yx.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return rt(B.NullKeyword,n,{hasLeftSpacing:r});case"true":return rt(B.TrueKeyword,n,{hasLeftSpacing:r});case"false":return rt(B.FalseKeyword,n,{hasLeftSpacing:r});case"each":return rt(B.EachKeyword,n,{hasLeftSpacing:r});case"for":return rt(B.ForKeyword,n,{hasLeftSpacing:r});case"loop":return rt(B.LoopKeyword,n,{hasLeftSpacing:r});case"do":return rt(B.DoKeyword,n,{hasLeftSpacing:r});case"while":return rt(B.WhileKeyword,n,{hasLeftSpacing:r});case"break":return rt(B.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return rt(B.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return rt(B.MatchKeyword,n,{hasLeftSpacing:r});case"case":return rt(B.CaseKeyword,n,{hasLeftSpacing:r});case"default":return rt(B.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return rt(B.IfKeyword,n,{hasLeftSpacing:r});case"elif":return rt(B.ElifKeyword,n,{hasLeftSpacing:r});case"else":return rt(B.ElseKeyword,n,{hasLeftSpacing:r});case"return":return rt(B.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return rt(B.EvalKeyword,n,{hasLeftSpacing:r});case"var":return rt(B.VarKeyword,n,{hasLeftSpacing:r});case"let":return rt(B.LetKeyword,n,{hasLeftSpacing:r});case"exists":return rt(B.ExistsKeyword,n,{hasLeftSpacing:r});default:return rt(B.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const v=this.stream.getPos();for(;!this.stream.eof&&Gg.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Gg.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new Zt("digit expected",v)}let y;return n.length>0?y=e+"."+n:y=e,rt(B.NumberLiteral,v,{hasLeftSpacing:r,value:y})}readStringLiteral(r){let e="";const n=this.stream.char;let v="string";const y=this.stream.getPos();for(this.stream.next();v!=="finish";)switch(v){case"string":{if(this.stream.eof)throw new Zt("unexpected EOF",y);if(this.stream.char==="\\"){this.stream.next(),v="escape";break}if(this.stream.char===n){this.stream.next(),v="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Zt("unexpected EOF",y);e+=this.stream.char,this.stream.next(),v="string";break}}return rt(B.StringLiteral,y,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",v=[],y="string";const C=this.stream.getPos();let P=C;for(this.stream.next();y!=="finish";)switch(y){case"string":{if(this.stream.eof)throw new Zt("unexpected EOF",C);if(this.stream.char==="\\"){this.stream.next(),y="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(rt(B.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),y="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(rt(B.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),n=""),P=this.stream.getPos(),y="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Zt("unexpected EOF",C);n+=this.stream.char,this.stream.next(),y="string";break}case"expr":{if(this.stream.eof)throw new Zt("unexpected EOF",C);if(Wg.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(rt(B.TemplateExprElement,P,{hasLeftSpacing:r,children:v})),v=[],P=this.stream.getPos(),y="string";break}const M=this.readToken();v.push(M);break}}return rt(B.Template,C,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function ft(t,r,e){const n={type:t};for(const v of Object.keys(r))r[v]!==void 0&&(n[v]=r[v]);return n.loc=e,n}function Pi(t,r,e){return ft("call",{target:ft("identifier",{name:t},e),args:r},e)}class mx{constructor(r){ve(this,"source");ve(this,"index");ve(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?rt(B.EOF,{line:-1,column:-1}):this._token}getKind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:rt(B.EOF,{line:-1,column:-1})}expect(r){if(this.getKind()!==r)throw new Zt(`unexpected token: ${B[this.getKind()]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=rt(B.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function Kr(t,r){return r?Oy(t,!0):Wv(t,0)}const Xh=[{opKind:"postfix",kind:B.OpenParen,bp:20},{opKind:"postfix",kind:B.OpenBracket,bp:20},{opKind:"infix",kind:B.Dot,lbp:18,rbp:19},{opKind:"infix",kind:B.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:B.Plus,bp:14},{opKind:"prefix",kind:B.Minus,bp:14},{opKind:"prefix",kind:B.Not,bp:14},{opKind:"infix",kind:B.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:B.Slash,lbp:12,rbp:13},{opKind:"infix",kind:B.Percent,lbp:12,rbp:13},{opKind:"infix",kind:B.Plus,lbp:10,rbp:11},{opKind:"infix",kind:B.Minus,lbp:10,rbp:11},{opKind:"infix",kind:B.Lt,lbp:8,rbp:9},{opKind:"infix",kind:B.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:B.Gt,lbp:8,rbp:9},{opKind:"infix",kind:B.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:B.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:B.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:B.And2,lbp:4,rbp:5},{opKind:"infix",kind:B.Or2,lbp:2,rbp:3}];function $x(t,r){const e=t.token.loc,n=t.getKind();t.next(),t.getKind()===B.BackSlash&&(t.next(),t.nextWith(B.NewLine));const v=Wv(t,r);switch(n){case B.Plus:{if(v.type==="num")return ft("num",{value:v.value},e);throw new Zt("currently, sign is only supported for number literal.",e)}case B.Minus:{if(v.type==="num")return ft("num",{value:-1*v.value},e);throw new Zt("currently, sign is only supported for number literal.",e)}case B.Not:return ft("not",{expr:v},e);default:throw new Zt(`unexpected token: ${B[n]}`,e)}}function xx(t,r,e){const n=t.token.loc,v=t.getKind();if(t.next(),t.getKind()===B.BackSlash&&(t.next(),t.nextWith(B.NewLine)),v===B.Dot){t.expect(B.Identifier);const y=t.token.value;return t.next(),ft("prop",{target:r,name:y},n)}else{const y=Wv(t,e);switch(v){case B.Hat:return Pi("Core:pow",[r,y],n);case B.Asterisk:return Pi("Core:mul",[r,y],n);case B.Slash:return Pi("Core:div",[r,y],n);case B.Percent:return Pi("Core:mod",[r,y],n);case B.Plus:return Pi("Core:add",[r,y],n);case B.Minus:return Pi("Core:sub",[r,y],n);case B.Lt:return Pi("Core:lt",[r,y],n);case B.LtEq:return Pi("Core:lteq",[r,y],n);case B.Gt:return Pi("Core:gt",[r,y],n);case B.GtEq:return Pi("Core:gteq",[r,y],n);case B.Eq2:return Pi("Core:eq",[r,y],n);case B.NotEq:return Pi("Core:neq",[r,y],n);case B.And2:return ft("and",{left:r,right:y},n);case B.Or2:return ft("or",{left:r,right:y},n);default:throw new Zt(`unexpected token: ${B[v]}`,n)}}}function bx(t,r){const e=t.token.loc,n=t.getKind();switch(n){case B.OpenParen:return Ax(t,r);case B.OpenBracket:{t.next();const v=Kr(t,!1);return t.nextWith(B.CloseBracket),ft("index",{target:r,index:v},e)}default:throw new Zt(`unexpected token: ${B[n]}`,e)}}function Oy(t,r){const e=t.token.loc;switch(t.getKind()){case B.IfKeyword:{if(r)break;return _x(t)}case B.At:{if(r)break;return Cx(t)}case B.MatchKeyword:{if(r)break;return Px(t)}case B.EvalKeyword:{if(r)break;return kx(t)}case B.ExistsKeyword:{if(r)break;return Mx(t)}case B.Template:{const n=[];if(r)break;for(const v of t.token.children)switch(v.kind){case B.TemplateStringElement:{n.push(ft("str",{value:v.value},v.loc));break}case B.TemplateExprElement:{const y=new mx(v.children),C=Kr(y,!1);if(y.getKind()!==B.EOF)throw new Zt(`unexpected token: ${B[y.token.kind]}`,y.token.loc);n.push(C);break}default:throw new Zt(`unexpected token: ${B[v.kind]}`,v.loc)}return t.next(),ft("tmpl",{tmpl:n},e)}case B.StringLiteral:{const n=t.token.value;return t.next(),ft("str",{value:n},e)}case B.NumberLiteral:{const n=Number(t.token.value);return t.next(),ft("num",{value:n},e)}case B.TrueKeyword:case B.FalseKeyword:{const n=t.getKind()===B.TrueKeyword;return t.next(),ft("bool",{value:n},e)}case B.NullKeyword:return t.next(),ft("null",{},e);case B.OpenBrace:return Ex(t,r);case B.OpenBracket:return Sx(t,r);case B.Identifier:{if(r)break;return Ty(t)}case B.OpenParen:{t.next();const n=Kr(t,r);return t.nextWith(B.CloseParen),n}}throw new Zt(`unexpected token: ${B[t.getKind()]}`,e)}function Ax(t,r){const e=t.token.loc,n=[];for(t.nextWith(B.OpenParen),t.getKind()===B.NewLine&&t.next();t.getKind()!==B.CloseParen;)switch(n.push(Kr(t,!1)),t.getKind()){case B.NewLine:{t.next();break}case B.Comma:{t.next(),t.getKind()===B.NewLine&&t.next();break}case B.CloseParen:break;default:throw new Zt("separator expected",t.token.loc)}return t.nextWith(B.CloseParen),ft("call",{target:r,args:n},e)}function _x(t){const r=t.token.loc;t.nextWith(B.IfKeyword);const e=Kr(t,!1),n=Lu(t);t.getKind()===B.NewLine&&[B.ElifKeyword,B.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const v=[];for(;t.getKind()===B.ElifKeyword;){t.next();const C=Kr(t,!1),P=Lu(t);t.getKind()===B.NewLine&&[B.ElifKeyword,B.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),v.push({cond:C,then:P})}let y;return t.getKind()===B.ElseKeyword&&(t.next(),y=Lu(t)),ft("if",{cond:e,then:n,elseif:v,else:y},r)}function Cx(t){const r=t.token.loc;t.nextWith(B.At);const e=Iy(t);let n;t.getKind()===B.Colon&&(t.next(),n=tf(t));const v=Ac(t);return ft("fn",{args:e,retType:n,children:v},r)}function Px(t){const r=t.token.loc;t.nextWith(B.MatchKeyword);const e=Kr(t,!1);t.nextWith(B.OpenBrace),t.getKind()===B.NewLine&&t.next();const n=[];for(;t.getKind()!==B.DefaultKeyword&&t.getKind()!==B.CloseBrace;){t.nextWith(B.CaseKeyword);const y=Kr(t,!1);t.nextWith(B.Arrow);const C=Lu(t);switch(n.push({q:y,a:C}),t.getKind()){case B.NewLine:{t.next();break}case B.Comma:{t.next(),t.getKind()===B.NewLine&&t.next();break}case B.DefaultKeyword:case B.CloseBrace:break;default:throw new Zt("separator expected",t.token.loc)}}let v;if(t.getKind()===B.DefaultKeyword)switch(t.next(),t.nextWith(B.Arrow),v=Lu(t),t.getKind()){case B.NewLine:{t.next();break}case B.Comma:{t.next(),t.getKind()===B.NewLine&&t.next();break}case B.CloseBrace:break;default:throw new Zt("separator expected",t.token.loc)}return t.nextWith(B.CloseBrace),ft("match",{about:e,qs:n,default:v},r)}function kx(t){const r=t.token.loc;t.nextWith(B.EvalKeyword);const e=Ac(t);return ft("block",{statements:e},r)}function Mx(t){const r=t.token.loc;t.nextWith(B.ExistsKeyword);const e=Ty(t);return ft("exists",{identifier:e},r)}function Ty(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.getKind()===B.Colon){if(t.token.hasLeftSpacing)throw new Zt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new Zt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(B.Identifier),e.push(t.token.value),t.next()}return ft("identifier",{name:e.join(":")},r)}function Ex(t,r){const e=t.token.loc;for(t.nextWith(B.OpenBrace);t.getKind()===B.NewLine;)t.next();const n=new Map;for(;t.getKind()!==B.CloseBrace;){t.expect(B.Identifier);const v=t.token.value;t.next(),t.nextWith(B.Colon);const y=Kr(t,r);switch(n.set(v,y),t.getKind()){case B.NewLine:case B.Comma:{for(t.next();t.getKind()===B.NewLine;)t.next();break}case B.CloseBrace:break;default:throw new Zt("separator expected",t.token.loc)}}return t.nextWith(B.CloseBrace),ft("obj",{value:n},e)}function Sx(t,r){const e=t.token.loc;for(t.nextWith(B.OpenBracket);t.getKind()===B.NewLine;)t.next();const n=[];for(;t.getKind()!==B.CloseBracket;)switch(n.push(Kr(t,r)),t.getKind()){case B.NewLine:case B.Comma:{for(t.next();t.getKind()===B.NewLine;)t.next();break}case B.CloseBracket:break;default:throw new Zt("separator expected",t.token.loc)}return t.nextWith(B.CloseBracket),ft("arr",{value:n},e)}function Wv(t,r){let e;const n=t.getKind(),v=Xh.find(y=>y.opKind==="prefix"&&y.kind===n);for(v!=null?e=$x(t,v.bp):e=Oy(t,!1);;){t.getKind()===B.BackSlash&&(t.next(),t.nextWith(B.NewLine));const y=t.getKind(),C=Xh.find(M=>M.opKind==="postfix"&&M.kind===y);if(C!=null){if(C.bp<r)break;if(!([B.OpenBracket,B.OpenParen].includes(y)&&t.token.hasLeftSpacing)){e=bx(t,e);continue}}const P=Xh.find(M=>M.opKind==="infix"&&M.kind===y);if(P!=null){if(P.lbp<r)break;e=xx(t,e,P.rbp);continue}break}return e}function Iy(t){const r=[];for(t.nextWith(B.OpenParen),t.getKind()===B.NewLine&&t.next();t.getKind()!==B.CloseParen;){t.expect(B.Identifier);const e=t.token.value;t.next();let n=!1,v;t.getKind()===B.Question?(t.next(),n=!0):t.getKind()===B.Eq&&(t.next(),v=Kr(t,!1));let y;switch(t.getKind()===B.Colon&&(t.next(),y=tf(t)),r.push({name:e,optional:n,default:v,argType:y}),t.getKind()){case B.NewLine:{t.next();break}case B.Comma:{t.next(),t.getKind()===B.NewLine&&t.next();break}case B.CloseParen:break;default:throw new Zt("separator expected",t.token.loc)}}return t.nextWith(B.CloseParen),r}function Ac(t){for(t.nextWith(B.OpenBrace);t.getKind()===B.NewLine;)t.next();const r=[];for(;t.getKind()!==B.CloseBrace;)switch(r.push(Oh(t)),t.getKind()){case B.NewLine:case B.SemiColon:{for(;[B.NewLine,B.SemiColon].includes(t.getKind());)t.next();break}case B.CloseBrace:break;default:throw new Zt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(B.CloseBrace),r}function tf(t){return t.getKind()===B.At?Nx(t):Fx(t)}function Nx(t){const r=t.token.loc;t.nextWith(B.At),t.nextWith(B.OpenParen);const e=[];for(;t.getKind()!==B.CloseParen;){if(e.length>0)switch(t.getKind()){case B.Comma:{t.next();break}default:throw new Zt("separator expected",t.token.loc)}const v=tf(t);e.push(v)}t.nextWith(B.CloseParen),t.nextWith(B.Arrow);const n=tf(t);return ft("fnTypeSource",{args:e,result:n},r)}function Fx(t){const r=t.token.loc;t.expect(B.Identifier);const e=t.token.value;t.next();let n=null;return t.getKind()===B.Lt&&(t.next(),n=tf(t),t.nextWith(B.Gt)),ft("namedTypeSource",{name:e,inner:n},r)}function Oh(t){const r=t.token.loc;switch(t.getKind()){case B.VarKeyword:case B.LetKeyword:return jy(t);case B.At:{if(t.lookahead(1).kind===B.Identifier)return Ry(t);break}case B.Out:return Tx(t);case B.ReturnKeyword:return Rx(t);case B.OpenSharpBracket:return Dx(t);case B.EachKeyword:return Ix(t);case B.ForKeyword:return jx(t);case B.LoopKeyword:return Hx(t);case B.DoKeyword:return Ux(t);case B.WhileKeyword:return Bx(t);case B.BreakKeyword:return t.next(),ft("break",{},r);case B.ContinueKeyword:return t.next(),ft("continue",{},r)}const e=Kr(t,!1),n=qx(t,e);return n||e}function Ox(t){switch(t.getKind()){case B.VarKeyword:case B.LetKeyword:return jy(t);case B.At:return Ry(t);default:throw new Zt(`unexpected token: ${B[t.getKind()]}`,t.token.loc)}}function Lu(t){const r=t.token.loc;if(t.getKind()===B.OpenBrace){const e=Ac(t);return ft("block",{statements:e},r)}else return Oh(t)}function jy(t){const r=t.token.loc;let e;switch(t.getKind()){case B.LetKeyword:{e=!1;break}case B.VarKeyword:{e=!0;break}default:throw new Zt(`unexpected token: ${B[t.getKind()]}`,t.token.loc)}t.next(),t.expect(B.Identifier);const n=t.token.value;t.next();let v;t.getKind()===B.Colon&&(t.next(),v=tf(t)),t.nextWith(B.Eq),t.getKind()===B.NewLine&&t.next();const y=Kr(t,!1);return ft("def",{name:n,varType:v,expr:y,mut:e,attr:[]},r)}function Ry(t){const r=t.token.loc;t.nextWith(B.At),t.expect(B.Identifier);const e=t.token.value;t.next();const n=Iy(t);let v;t.getKind()===B.Colon&&(t.next(),v=tf(t));const y=Ac(t);return ft("def",{name:e,expr:ft("fn",{args:n,retType:v,children:y},r),mut:!1,attr:[]},r)}function Tx(t){const r=t.token.loc;t.nextWith(B.Out);const e=Kr(t,!1);return Pi("print",[e],r)}function Ix(t){const r=t.token.loc;let e=!1;t.nextWith(B.EachKeyword),t.getKind()===B.OpenParen&&(e=!0,t.next()),t.nextWith(B.LetKeyword),t.expect(B.Identifier);const n=t.token.value;if(t.next(),t.getKind()===B.Comma)t.next();else throw new Zt("separator expected",t.token.loc);const v=Kr(t,!1);e&&t.nextWith(B.CloseParen);const y=Lu(t);return ft("each",{var:n,items:v,for:y},r)}function jx(t){const r=t.token.loc;let e=!1;if(t.nextWith(B.ForKeyword),t.getKind()===B.OpenParen&&(e=!0,t.next()),t.getKind()===B.LetKeyword){t.next();const n=t.token.loc;t.expect(B.Identifier);const v=t.token.value;t.next();let y;if(t.getKind()===B.Eq?(t.next(),y=Kr(t,!1)):y=ft("num",{value:0},n),t.getKind()===B.Comma)t.next();else throw new Zt("separator expected",t.token.loc);const C=Kr(t,!1);e&&t.nextWith(B.CloseParen);const P=Lu(t);return ft("for",{var:v,from:y,to:C,for:P},r)}else{const n=Kr(t,!1);e&&t.nextWith(B.CloseParen);const v=Lu(t);return ft("for",{times:n,for:v},r)}}function Rx(t){const r=t.token.loc;t.nextWith(B.ReturnKeyword);const e=Kr(t,!1);return ft("return",{expr:e},r)}function Dx(t){const r=[];for(;t.getKind()===B.OpenSharpBracket;)r.push(Lx(t)),t.nextWith(B.NewLine);const e=Oh(t);if(e.type!=="def")throw new Zt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function Lx(t){const r=t.token.loc;t.nextWith(B.OpenSharpBracket),t.expect(B.Identifier);const e=t.token.value;t.next();let n;return t.getKind()!==B.CloseBracket?n=Kr(t,!0):n=ft("bool",{value:!0},r),t.nextWith(B.CloseBracket),ft("attr",{name:e,value:n},r)}function Hx(t){const r=t.token.loc;t.nextWith(B.LoopKeyword);const e=Ac(t);return ft("loop",{statements:e},r)}function Ux(t){const r=t.token.loc;t.nextWith(B.DoKeyword);const e=Lu(t),n=t.token.loc;t.nextWith(B.WhileKeyword);const v=Kr(t,!1);return ft("loop",{statements:[e,ft("if",{cond:ft("not",{expr:v},n),then:ft("break",{},n),elseif:[]},n)]},r)}function Bx(t){const r=t.token.loc;t.nextWith(B.WhileKeyword);const e=Kr(t,!1),n=Lu(t);return ft("loop",{statements:[ft("if",{cond:ft("not",{expr:e},r),then:ft("break",{},r),elseif:[]},r),n]},r)}function qx(t,r){const e=t.token.loc;switch(t.getKind()){case B.Eq:{t.next();const n=Kr(t,!1);return ft("assign",{dest:r,expr:n},e)}case B.PlusEq:{t.next();const n=Kr(t,!1);return ft("addAssign",{dest:r,expr:n},e)}case B.MinusEq:{t.next();const n=Kr(t,!1);return ft("subAssign",{dest:r,expr:n},e)}default:return}}function Kx(t){const r=[];for(;t.getKind()===B.NewLine;)t.next();for(;t.getKind()!==B.EOF;){switch(t.getKind()){case B.Colon2:{r.push(Dy(t));break}case B.Sharp3:{r.push(zx(t));break}default:{r.push(Oh(t));break}}switch(t.getKind()){case B.NewLine:case B.SemiColon:{for(;[B.NewLine,B.SemiColon].includes(t.getKind());)t.next();break}case B.EOF:break;default:throw new Zt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Dy(t){const r=t.token.loc;t.nextWith(B.Colon2),t.expect(B.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(B.OpenBrace);t.getKind()===B.NewLine;)t.next();for(;t.getKind()!==B.CloseBrace;){switch(t.getKind()){case B.VarKeyword:case B.LetKeyword:case B.At:{n.push(Ox(t));break}case B.Colon2:{n.push(Dy(t));break}}switch(t.getKind()){case B.NewLine:case B.SemiColon:{for(;[B.NewLine,B.SemiColon].includes(t.getKind());)t.next();break}case B.CloseBrace:break;default:throw new Zt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(B.CloseBrace),ft("ns",{name:e,members:n},r)}function zx(t){const r=t.token.loc;t.nextWith(B.Sharp3);let e=null;t.getKind()===B.Identifier&&(e=t.token.value,t.next());const n=Kr(t,!0);return ft("meta",{name:e,value:n},r)}function Vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Vt(e.expr,r);break}case"return":{e.expr=Vt(e.expr,r);break}case"each":{e.items=Vt(e.items,r),e.for=Vt(e.for,r);break}case"for":{e.from!=null&&(e.from=Vt(e.from,r)),e.to!=null&&(e.to=Vt(e.to,r)),e.times!=null&&(e.times=Vt(e.times,r)),e.for=Vt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Vt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Vt(e.expr,r),e.dest=Vt(e.dest,r);break}case"not":{e.expr=Vt(e.expr,r);break}case"if":{e.cond=Vt(e.cond,r),e.then=Vt(e.then,r);for(const n of e.elseif)n.cond=Vt(n.cond,r),n.then=Vt(n.then,r);e.else!=null&&(e.else=Vt(e.else,r));break}case"fn":{for(const n of e.args.keys())e.args[n].default&&(e.args[n].default=Vt(e.args[n].default,r));for(let n=0;n<e.children.length;n++)e.children[n]=Vt(e.children[n],r);break}case"match":{e.about=Vt(e.about,r);for(const n of e.qs)n.q=Vt(n.q,r),n.a=Vt(n.a,r);e.default!=null&&(e.default=Vt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Vt(e.statements[n],r);break}case"exists":{e.identifier=Vt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Vt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Vt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Vt(e.value[n],r);break}case"call":{e.target=Vt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Vt(e.args[n],r);break}case"index":{e.target=Vt(e.target,r),e.index=Vt(e.index,r);break}case"prop":{e.target=Vt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Vt(e.members[n],r);break}case"or":case"and":{e.left=Vt(e.left,r),e.right=Vt(e.right,r);break}}return e}const yf=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","yield","import","is","meta","module","namespace","new"];function wf(t,r){throw new Zt(`Reserved word "${t}" cannot be used as variable name.`,r)}function Vx(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{yf.includes(t.name)&&wf(t.name,t.loc);break}case"meta":{t.name!=null&&yf.includes(t.name)&&wf(t.name,t.loc);break}case"each":{yf.includes(t.var)&&wf(t.var,t.loc);break}case"for":{t.var!=null&&yf.includes(t.var)&&wf(t.var,t.loc);break}case"fn":{for(const r of t.args)yf.includes(r.name)&&wf(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())yf.includes(r)&&wf(r,t.loc);break}}return t}function Wx(t){for(const r of t)Vt(r,Vx);return t}function Jg(t){return{type:"simple",name:t}}function Gx(t,r){return{type:"generic",name:t,inners:r}}function Jx(t,r){return{type:"fn",args:t,result:r}}function Hc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Hc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Hc(n)).join(", "),e=Hc(t.result);return`@(${r}) { ${e} }`}}}function Pf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Jg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Pf(t.inner):r=Jg("any"),Gx(t.name,[r])}}throw new Zt(`Unknown type: '${Hc(t)}'`,t.loc)}else{const r=t.args.map(e=>Pf(e));return Jx(r,Pf(t.result))}}function Zx(t){switch(t.type){case"def":{t.varType!=null&&Pf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Pf(r.argType);t.retType!=null&&Pf(t.retType);break}}return t}function Qx(t){for(const r of t)Vt(r,Zx);return t}var Ou;let Xx=(Ou=class{constructor(){ve(this,"plugins");this.plugins={validate:[Wx,Qx],transform:[]}}static parse(r){return Ou.instance==null&&(Ou.instance=new Ou),Ou.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new wx(r);e=Kx(n);for(const v of this.plugins.validate)e=v(e);for(const v of this.plugins.transform)e=v(e);return e}},ve(Ou,"instance"),Ou);const Yx="next",eb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Lp=[],Gf=null;function tb(t){return Lp=Xx.parse(t),JSON.stringify(Lp,null,"	")}async function rb(t){Gf==null||Gf.abort(),Gf=new $n({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Ip(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Ip(e.val,!0),print:!1});break}}});try{await Gf.exec(Lp)}catch(r){t.err(r)}}const sb=Object.freeze(Object.defineProperty({__proto__:null,exec:rb,parse:tb,samples:eb,version:Yx},Symbol.toStringTag,{value:"Module"}));function is(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Th=class Ly extends Error{constructor(e,n){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Ly)}},nb=class extends Th{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},rf=class extends Th{constructor(e,n){super(e,n);ve(this,"name","Syntax")}},sr=class extends Th{constructor(e,n){super(e,n);ve(this,"name","Runtime")}},Zg=class extends sr{constructor(r,e){super(r,e)}},ab=class extends sr{constructor(e,n){super(e,n);ve(this,"name","")}};var Gu=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Uu=class Hp{constructor(r=[],e,n,v){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Hp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Hp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new sr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new sr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const y=v.get(r);if(!y.isMutable)throw new sr(`Cannot assign to an immutable variable ${r}.`);y.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new sr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Gu([is],Uu.prototype,"log",null);Gu([is],Uu.prototype,"onUpdated",null);Gu([is],Uu.prototype,"createChildScope",null);Gu([is],Uu.prototype,"createChildNamespaceScope",null);Gu([is],Uu.prototype,"get",null);Gu([is],Uu.prototype,"exists",null);Gu([is],Uu.prototype,"getAll",null);Gu([is],Uu.prototype,"add",null);Gu([is],Uu.prototype,"assign",null);const It={type:"null"},Vs={type:"bool",value:!0},Ws={type:"bool",value:!1},Re=t=>({type:"num",value:t}),Kt=t=>({type:"str",value:t}),Ko=t=>({type:"bool",value:t}),gh=t=>({type:"obj",value:t}),Ir=t=>({type:"arr",value:t}),ib=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),oe=t=>({type:"fn",native:t}),lb=t=>({type:"return",value:t}),ub=()=>({type:"break",value:null}),ob=()=>({type:"continue",value:null}),fb=t=>t.type==="return"?t.value:t,Up=(t,r)=>({type:"error",value:t,info:r});function ha(t){if(t==null)throw new sr("Expect anything, but got nothing.")}function wn(t){if(t==null)throw new sr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new sr(`Expect boolean, but got ${t.type}.`)}function Cu(t){if(t==null)throw new sr("Expect function, but got nothing.");if(t.type!=="fn")throw new sr(`Expect function, but got ${t.type}.`)}function xr(t){if(t==null)throw new sr("Expect string, but got nothing.");if(t.type!=="str")throw new sr(`Expect string, but got ${t.type}.`)}function Ce(t){if(t==null)throw new sr("Expect number, but got nothing.");if(t.type!=="num")throw new sr(`Expect number, but got ${t.type}.`)}function bu(t){if(t==null)throw new sr("Expect object, but got nothing.");if(t.type!=="obj")throw new sr(`Expect object, but got ${t.type}.`)}function yo(t){if(t==null)throw new sr("Expect array, but got nothing.");if(t.type!=="arr")throw new sr(`Expect array, but got ${t.type}.`)}function Yh(t){return t.type==="obj"}function dh(t){return t.type==="arr"}function kf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Bp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Bp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function qp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>qp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=qp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Kp(t){if(t===null)return It;if(typeof t=="boolean")return Ko(t);if(typeof t=="string")return Kt(t);if(typeof t=="number")return Re(t);if(Array.isArray(t))return Ir(t.map(r=>Kp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Kp(n));return gh(r)}return It}function Mf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Mf(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,y]of t.value)n.push(`${v}: ${Mf(y,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const cb={version:"0.19.0-dev.20240710"},hb=cb.version,pb=new TextEncoder,vb=new TextDecoder,gb={help:Kt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Kt(hb),"Core:ai":Kt("kawaii"),"Core:not":oe(([t])=>(wn(t),t.value?Ws:Vs)),"Core:eq":oe(([t,r])=>(ha(t),ha(r),kf(t,r)?Vs:Ws)),"Core:neq":oe(([t,r])=>(ha(t),ha(r),kf(t,r)?Ws:Vs)),"Core:and":oe(([t,r])=>(wn(t),t.value?(wn(r),r.value?Vs:Ws):Ws)),"Core:or":oe(([t,r])=>(wn(t),t.value?Vs:(wn(r),r.value?Vs:Ws))),"Core:add":oe(([t,r])=>(Ce(t),Ce(r),Re(t.value+r.value))),"Core:sub":oe(([t,r])=>(Ce(t),Ce(r),Re(t.value-r.value))),"Core:mul":oe(([t,r])=>(Ce(t),Ce(r),Re(t.value*r.value))),"Core:pow":oe(([t,r])=>{Ce(t),Ce(r);const e=t.value**r.value;if(isNaN(e))throw new sr("Invalid operation.");return Re(e)}),"Core:div":oe(([t,r])=>{Ce(t),Ce(r);const e=t.value/r.value;if(isNaN(e))throw new sr("Invalid operation.");return Re(e)}),"Core:mod":oe(([t,r])=>(Ce(t),Ce(r),Re(t.value%r.value))),"Core:gt":oe(([t,r])=>(Ce(t),Ce(r),t.value>r.value?Vs:Ws)),"Core:lt":oe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?Vs:Ws)),"Core:gteq":oe(([t,r])=>(Ce(t),Ce(r),t.value>=r.value?Vs:Ws)),"Core:lteq":oe(([t,r])=>(Ce(t),Ce(r),t.value<=r.value?Vs:Ws)),"Core:type":oe(([t])=>(ha(t),Kt(t.type))),"Core:to_str":oe(([t])=>(ha(t),Kt(Mf(t)))),"Core:range":oe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?Ir(Array.from({length:r.value-t.value+1},(e,n)=>Re(n+t.value))):t.value>r.value?Ir(Array.from({length:t.value-r.value+1},(e,n)=>Re(t.value-n))):Ir([t]))),"Core:sleep":oe(async([t])=>(Ce(t),await new Promise(r=>setTimeout(r,t.value)),It)),"Core:abort":oe(async([t])=>{throw xr(t),new ab(t.value)}),"Util:uuid":oe(()=>Kt(bc())),"Json:stringify":oe(([t])=>(ha(t),Kt(JSON.stringify(qp(t))))),"Json:parse":oe(([t])=>{xr(t);try{return Kp(JSON.parse(t.value))}catch{return Up("not_json")}}),"Json:parsable":oe(([t])=>{xr(t);try{JSON.parse(t.value)}catch{return Ko(!1)}return Ko(!0)}),"Date:now":oe(()=>Re(Date.now())),"Date:year":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":oe(([t])=>(t&&Ce(t),Re(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":oe(([t])=>(xr(t),Re(new Date(t.value).getTime()))),"Date:to_iso_str":oe(([t,r])=>{t&&Ce(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ce(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const q=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+q*J),e.setUTCMinutes(e.getUTCMinutes()+q*we);const ue=n>0?"+":"-",he=J.toString().padStart(2,"0"),Ee=we.toString().padStart(2,"0");v=`${ue}${he}:${Ee}`}const y=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return Kt(`${y}-${C}-${P}T${M}:${N}:${O}.${H}${v}`)}),"Math:Infinity":Re(1/0),"Math:E":Re(Math.E),"Math:LN2":Re(Math.LN2),"Math:LN10":Re(Math.LN10),"Math:LOG2E":Re(Math.LOG2E),"Math:LOG10E":Re(Math.LOG10E),"Math:PI":Re(Math.PI),"Math:SQRT1_2":Re(Math.SQRT1_2),"Math:SQRT2":Re(Math.SQRT2),"Math:abs":oe(([t])=>(Ce(t),Re(Math.abs(t.value)))),"Math:acos":oe(([t])=>(Ce(t),Re(Math.acos(t.value)))),"Math:acosh":oe(([t])=>(Ce(t),Re(Math.acosh(t.value)))),"Math:asin":oe(([t])=>(Ce(t),Re(Math.asin(t.value)))),"Math:asinh":oe(([t])=>(Ce(t),Re(Math.asinh(t.value)))),"Math:atan":oe(([t])=>(Ce(t),Re(Math.atan(t.value)))),"Math:atanh":oe(([t])=>(Ce(t),Re(Math.atanh(t.value)))),"Math:atan2":oe(([t,r])=>(Ce(t),Ce(r),Re(Math.atan2(t.value,r.value)))),"Math:cbrt":oe(([t])=>(Ce(t),Re(Math.cbrt(t.value)))),"Math:ceil":oe(([t])=>(Ce(t),Re(Math.ceil(t.value)))),"Math:clz32":oe(([t])=>(Ce(t),Re(Math.clz32(t.value)))),"Math:cos":oe(([t])=>(Ce(t),Re(Math.cos(t.value)))),"Math:cosh":oe(([t])=>(Ce(t),Re(Math.cosh(t.value)))),"Math:exp":oe(([t])=>(Ce(t),Re(Math.exp(t.value)))),"Math:expm1":oe(([t])=>(Ce(t),Re(Math.expm1(t.value)))),"Math:floor":oe(([t])=>(Ce(t),Re(Math.floor(t.value)))),"Math:fround":oe(([t])=>(Ce(t),Re(Math.fround(t.value)))),"Math:hypot":oe(([t])=>{yo(t);const r=[];for(const e of t.value)Ce(e),r.push(e.value);return Re(Math.hypot(...r))}),"Math:imul":oe(([t,r])=>(Ce(t),Ce(r),Re(Math.imul(t.value,r.value)))),"Math:log":oe(([t])=>(Ce(t),Re(Math.log(t.value)))),"Math:log1p":oe(([t])=>(Ce(t),Re(Math.log1p(t.value)))),"Math:log10":oe(([t])=>(Ce(t),Re(Math.log10(t.value)))),"Math:log2":oe(([t])=>(Ce(t),Re(Math.log2(t.value)))),"Math:max":oe(([t,r])=>(Ce(t),Ce(r),Re(Math.max(t.value,r.value)))),"Math:min":oe(([t,r])=>(Ce(t),Ce(r),Re(Math.min(t.value,r.value)))),"Math:pow":oe(([t,r])=>(Ce(t),Ce(r),Re(Math.pow(t.value,r.value)))),"Math:round":oe(([t])=>(Ce(t),Re(Math.round(t.value)))),"Math:sign":oe(([t])=>(Ce(t),Re(Math.sign(t.value)))),"Math:sin":oe(([t])=>(Ce(t),Re(Math.sin(t.value)))),"Math:sinh":oe(([t])=>(Ce(t),Re(Math.sinh(t.value)))),"Math:sqrt":oe(([t])=>{Ce(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new sr("Invalid operation.");return Re(r)}),"Math:tan":oe(([t])=>(Ce(t),Re(Math.tan(t.value)))),"Math:tanh":oe(([t])=>(Ce(t),Re(Math.tanh(t.value)))),"Math:trunc":oe(([t])=>(Ce(t),Re(Math.trunc(t.value)))),"Math:rnd":oe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Re(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Re(Math.random())),"Math:gen_rng":oe(([t])=>{if(ha(t),t.type!=="num"&&t.type!=="str")return It;const r=ff(t.value.toString());return oe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Re(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Re(r()))}),"Num:to_hex":oe(([t])=>(Ce(t),Kt(t.value.toString(16)))),"Num:from_hex":oe(([t])=>(xr(t),Re(parseInt(t.value,16)))),"Str:lf":Kt(`
`),"Str:lt":oe(([t,r])=>(xr(t),xr(r),t.value<r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:gt":oe(([t,r])=>(xr(t),xr(r),t.value>r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:from_codepoint":oe(([t])=>(Ce(t),Kt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":oe(([t])=>(yo(t),Kt(Array.from(t.value.map(r=>(Ce(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":oe(([t])=>(yo(t),Kt(vb.decode(Uint8Array.from(t.value.map(r=>(Ce(r),r.value))))))),"Uri:encode_full":oe(([t])=>(xr(t),Kt(encodeURI(t.value)))),"Uri:encode_component":oe(([t])=>(xr(t),Kt(encodeURIComponent(t.value)))),"Uri:decode_full":oe(([t])=>(xr(t),Kt(decodeURI(t.value)))),"Uri:decode_component":oe(([t])=>(xr(t),Kt(decodeURIComponent(t.value)))),"Arr:create":oe(([t,r])=>{Ce(t);try{return Ir(Array(t.value).fill(r??It))}catch(e){throw t.value<0?new sr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new sr("Arr:create expected integer, got non-integer")}}),"Obj:keys":oe(([t])=>(bu(t),Ir(Array.from(t.value.keys()).map(r=>Kt(r))))),"Obj:vals":oe(([t])=>(bu(t),Ir(Array.from(t.value.values())))),"Obj:kvs":oe(([t])=>(bu(t),Ir(Array.from(t.value.entries()).map(([r,e])=>Ir([Kt(r),e]))))),"Obj:get":oe(([t,r])=>(bu(t),xr(r),t.value.get(r.value)??It)),"Obj:set":oe(([t,r,e])=>(bu(t),xr(r),ha(e),t.value.set(r.value,e),It)),"Obj:has":oe(([t,r])=>(bu(t),xr(r),Ko(t.value.has(r.value)))),"Obj:copy":oe(([t])=>(bu(t),gh(new Map(t.value)))),"Obj:merge":oe(([t,r])=>(bu(t),bu(r),gh(new Map([...t.value,...r.value])))),"Error:create":oe(([t,r])=>(xr(t),Up(t.value,r))),"Async:interval":oe(async([t,r,e],n)=>{Ce(t),Cu(r),e&&(wn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),oe(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":oe(async([t,r],e)=>{Ce(t),Cu(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),oe(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},Qg={num:{to_str:t=>oe(async(r,e)=>Kt(t.value.toString()))},str:{to_num:t=>oe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?It:Re(n)}),to_arr:t=>oe(async(r,e)=>Ir(Gs(t.value).map(n=>Kt(n)))),to_unicode_arr:t=>oe(async(r,e)=>Ir([...t.value].map(n=>Kt(n)))),to_unicode_codepoint_arr:t=>oe(async(r,e)=>Ir([...t.value].map(n=>{const v=n.codePointAt(0);return Re(v??n.charCodeAt(0))}))),to_char_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(n=>Kt(n)))),to_charcode_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(n=>Re(n.charCodeAt(0))))),to_utf8_byte_arr:t=>oe(async(r,e)=>Ir(Array.from(pb.encode(t.value)).map(n=>Re(n)))),len:t=>Re(hf(t.value)),replace:t=>oe(async([r,e],n)=>(xr(r),xr(e),Kt(t.value.split(r.value).join(e.value)))),index_of:t=>oe(async([r,e],n)=>{xr(r),e&&Ce(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Re(vf(t.value,r.value,v))}),incl:t=>oe(async([r],e)=>(xr(r),t.value.includes(r.value)?Vs:Ws)),trim:t=>oe(async(r,e)=>Kt(t.value.trim())),upper:t=>oe(async(r,e)=>Kt(t.value.toUpperCase())),lower:t=>oe(async(r,e)=>Kt(t.value.toLowerCase())),split:t=>oe(async([r],e)=>(r&&xr(r),Ir(r?t.value.split(r?r.value:"").map(n=>Kt(n)):Gs(t.value).map(n=>Kt(n))))),slice:t=>oe(async([r,e],n)=>(Ce(r),Ce(e),Kt(pf(t.value,r.value,e.value)))),pick:t=>oe(async([r],e)=>{Ce(r);const v=Gs(t.value)[r.value];return v?Kt(v):It}),charcode_at:t=>oe(([r],e)=>{Ce(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?It:Re(n)}),codepoint_at:t=>oe(([r],e)=>{Ce(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?It:Re(n)}),starts_with:t=>oe(async([r,e],n)=>{if(xr(r),!r.value)return Vs;e&&Ce(e);const v=(e==null?void 0:e.value)??0;if(v<-t.value.length||v>t.value.length)return Ws;const y=v>=0?v:t.value.length+v;return t.value.startsWith(r.value,y)?Vs:Ws}),ends_with:t=>oe(async([r,e],n)=>{if(xr(r),!r.value)return Vs;e&&Ce(e);const v=(e==null?void 0:e.value)??t.value.length;if(v<-t.value.length||v>t.value.length)return Ws;const y=v>=0?v:t.value.length+v;return t.value.endsWith(r.value,y)?Vs:Ws}),pad_start:t=>oe(([r,e],n)=>{Ce(r);const v=e?(xr(e),e.value):" ";return Kt(t.value.padStart(r.value,v))}),pad_end:t=>oe(([r,e],n)=>{Ce(r);const v=e?(xr(e),e.value):" ";return Kt(t.value.padEnd(r.value,v))})},arr:{len:t=>Re(t.value.length),push:t=>oe(async([r],e)=>(ha(r),t.value.push(r),t)),unshift:t=>oe(async([r],e)=>(ha(r),t.value.unshift(r),t)),pop:t=>oe(async(r,e)=>t.value.pop()??It),shift:t=>oe(async(r,e)=>t.value.shift()??It),concat:t=>oe(async([r],e)=>(yo(r),Ir(t.value.concat(r.value)))),slice:t=>oe(async([r,e],n)=>(Ce(r),Ce(e),Ir(t.value.slice(r.value,e.value)))),join:t=>oe(async([r],e)=>(r&&xr(r),Kt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>oe(async([r],e)=>{Cu(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,Re(y)]));return Ir(await Promise.all(n))}),filter:t=>oe(async([r],e)=>{Cu(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,Re(v)]);wn(C),C.value&&n.push(y)}return Ir(n)}),reduce:t=>oe(async([r,e],n)=>{Cu(r);const v=e!=null;if(!v&&t.value.length===0)throw new sr("Reduce of empty array without initial value");let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,Re(C)])}return y}),find:t=>oe(async([r],e)=>{Cu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Re(n)]);if(wn(y),y.value)return v}return It}),incl:t=>oe(async([r],e)=>(ha(r),t.value.some(n=>kf(r,n))?Vs:Ws)),index_of:t=>oe(async([r,e],n)=>{if(ha(r),e){Ce(e);const v=t.value.slice(0,e.value).length,y=t.value.slice(e.value).findIndex(C=>kf(C,r));return Re(y<0?y:y+v)}else return Re(t.value.findIndex(v=>kf(v,r)))}),reverse:t=>oe(async(r,e)=>(t.value.reverse(),It)),copy:t=>oe(async(r,e)=>Ir([...t.value])),sort:t=>oe(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=n(y.slice(0,P),C),N=n(y.slice(P),C),[O,H]=await Promise.all([M,N]);return v(O,H,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);Ce(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return Cu(r),yo(t),t.value=await n(t.value,r),t}),fill:t=>oe(async([r,e,n],v)=>{const y=r??It,C=e&&(Ce(e),e.value),P=n&&(Ce(n),n.value);return t.value.fill(y,C,P),t}),repeat:t=>oe(async([r],e)=>{Ce(r);try{return Ir(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new sr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new sr("arr.repeat expected integer, got non-integer")}}),splice:t=>oe(async([r,e,n],v)=>{Ce(r);const y=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(Ce(e),e.value):t.value.length-y,P=n!=null?(yo(n),n.value):[],M=t.value.splice(y,C,...P);return Ir(M)}),flat:t=>oe(async([r],e)=>{if(r=r??Re(1),Ce(r),!Number.isInteger(r.value))throw new sr("arr.flat expected integer, got non-integer");if(r.value<0)throw new sr("arr.flat expected non-negative number, got negative");const n=(y,C,P)=>{if(C===0){P.push(...y);return}for(const M of y)dh(M)?n(M.value,C-1,P):P.push(M)},v=[];return n(t.value,r.value,v),Ir(v)}),flat_map:t=>oe(async([r],e)=>{Cu(r);const n=t.value.map(async(y,C)=>{const P=await e.call(r,[y,Re(C)]);return dh(P)?P.value:P}),v=await Promise.all(n);return Ir(v.flat())}),every:t=>oe(async([r],e)=>{Cu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Re(n)]);if(wn(y),!y.value)return Ws}return Vs}),some:t=>oe(async([r],e)=>{Cu(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Re(n)]);if(wn(y),y.value)return Vs}return Ws}),insert:t=>oe(async([r,e],n)=>(Ce(r),ha(e),t.value.splice(r.value,0,e),It)),remove:t=>oe(async([r],e)=>(Ce(r),t.value.splice(r.value,1)[0]??It)),at:t=>oe(async([r,e],n)=>(Ce(r),t.value.at(r.value)??e??It))},error:{name:t=>Kt(t.value),info:t=>t.info??It}};function db(t,r){if(Object.hasOwn(Qg,t.type)){const e=Qg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new sr(`No such prop (${r}) in ${t.type}.`)}else throw new sr(`Cannot read prop of ${t.type}. (reading ${r})`)}const yb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var wa=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const Hy=300,wb=Hy-1;let Nn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const n={print:oe(([v])=>{ha(v),this.opts.out&&this.opts.out(v)}),readline:oe(async v=>{const y=v[0];if(xr(y),this.opts.in==null)return It;const C=await this.opts.in(y.value);return Kt(C)})};this.vars=Object.fromEntries(Object.entries({...r,...gb,...n}).map(([v,y])=>[v,yb.const(y)])),this.scope=new Uu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Up("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof Th?this.opts.err(r):this.opts.err(new nb(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const y={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,y);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??It;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],{isMutable:!0,value:e[y]??It});const v=r.scope.createChildScope(n);return fb(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return It;if(this.stepCount%Hy===wb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new sr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Cu(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(wn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(wn(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return It}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(kf(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):It}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return It}case"for":{if(r.times){const n=await this._eval(r.times,e);Ce(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ce(n),Ce(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Re(y)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return It}case"each":{const n=await this._eval(r.items,e);yo(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(y.type==="break")break;if(y.type==="return")return y}return It}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),It}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),It}case"addAssign":{const n=await this._eval(r.dest,e);Ce(n);const v=await this._eval(r.expr,e);return Ce(v),await this.assign(e,r.dest,Re(n.value+v.value)),It}case"subAssign":{const n=await this._eval(r.dest,e);Ce(n);const v=await this._eval(r.expr,e);return Ce(v),await this.assign(e,r.dest,Re(n.value-v.value)),It}case"null":return It;case"bool":return Ko(r.value);case"num":return Re(r.value);case"str":return Kt(r.value);case"arr":return Ir(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return gh(n)}case"prop":{const n=await this._eval(r.target,e);return Yh(n)?n.value.has(r.name)?n.value.get(r.name):It:db(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(dh(n)){Ce(v);const y=n.value[v.value];if(y===void 0)throw new Zg(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}else{if(Yh(n))return xr(v),n.value.has(v.value)?n.value.get(v.value):It;throw new sr(`Cannot read prop (${Mf(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return wn(n),Ko(!n.value)}case"fn":return ib(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Ko(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);n+=Mf(y)}return Kt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),lb(n)}case"break":return this.log("block:break",{scope:e.name}),ub();case"continue":return this.log("block:continue",{scope:e.name}),ob();case"ns":return It;case"meta":return It;case"and":{const n=await this._eval(r.left,e);if(wn(n),n.value){const v=await this._eval(r.right,e);return wn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(wn(n),n.value)return n;{const v=await this._eval(r.right,e);return wn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=It;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),y=await this._eval(e.index,r);if(dh(v)){if(Ce(y),v.value[y.value]===void 0)throw new Zg(`Index out of range. index: ${y.value} max: ${v.value.length-1}`);v.value[y.value]=n}else if(Yh(v))xr(y),v.value.set(y.value,n);else throw new sr(`Cannot read prop (${Mf(y)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);bu(v),v.value.set(e.name,n)}else if(e.type==="arr")yo(n),await Promise.all(e.value.map((v,y)=>this.assign(r,v,n.value[y]??It)));else if(e.type==="obj")bu(n),await Promise.all([...e.value].map(([v,y])=>this.assign(r,y,n.value.get(v)??It)));else throw new sr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};wa([is],Nn.prototype,"exec",null);wa([is],Nn.prototype,"execFn",null);wa([is],Nn.prototype,"execFnSimple",null);wa([is],Nn.prototype,"handleError",null);wa([is],Nn.prototype,"log",null);wa([is],Nn.prototype,"collectNs",null);wa([is],Nn.prototype,"collectNsMember",null);wa([is],Nn.prototype,"_fn",null);wa([is],Nn.prototype,"_eval",null);wa([is],Nn.prototype,"_run",null);wa([is],Nn.prototype,"registerAbortHandler",null);wa([is],Nn.prototype,"unregisterAbortHandler",null);wa([is],Nn.prototype,"abort",null);wa([is],Nn.prototype,"assign",null);wa([is],Nn,"collectMetadata",null);function mb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function zo(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,zo.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}mb(zo,Error);function ep(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}zo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=ep("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+ep("",v.column-1," ")+ep("",H,"^")}else r+=`
 at `+C}return r};zo.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Xg(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:tr,Main:ci},y=tr,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Lr="[",Yt=".",Mr="if",Wt="elif",_r="else",zr="match",ar="=>",Vr="*",ir="eval",Cr="exists",W="`",re='"',ce="'",xe='\\"',pe="\\'",Ne="true",Ie="false",Ae="null",Me="@",$e="@(",Je="<",st=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,it=/^[%*-+\-\/<>\^]/,Ct=/^[^`{]/,yt=/^[{}`]/,_t=/^[+\-]/,Pt=/^[1-9]/,ct=/^[0-9]/,ks=/^[,;]/,us=/^[A-Z_]/i,ss=/^[A-Z0-9_]/i,bt=/^[\r\n]/,Rt=/^[ \t\r\n]/,xn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),lr=j("*/",!1),Ht=j("(",!1),Wr=j(")",!1),In=j("::",!1),kt=j("{",!1),ut=j("}",!1),Er=j("###",!1),Gt=j("let",!1),nt=j(":",!1),Ut=j("=",!1),ms=j("var",!1),Bt=j("<:",!1),qt=j("#[",!1),Gr=j("]",!1),Fa=j("each",!1),Sr=j(",",!1),os=j("for",!1),Ns=j("return",!1),ot=At([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=j("loop",!1),Js=j("break",!1),Nr=j("continue",!1),Fr=j("+=",!1),Gi=j("-=",!1),Oa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Ia=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=At(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),jn=j("[",!1),Zs=j(".",!1),Rn=j("if",!1),ja=j("elif",!1),tl=j("else",!1),Ra=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Os=At(["`","{"],!0,!1),Dn=At(["{","}","`"],!1,!1),Qs=j('"',!1),Xs=j("'",!1),al=j('\\"',!1),Ys=j("\\'",!1),fs=At(["+","-"],!1,!1),Ts=At([["1","9"]],!1,!1),br=At([["0","9"]],!1,!1),en=j("true",!1),tn=j("false",!1),rn=j("null",!1),cs=At([",",";"],!1,!1),sn=j("@",!1),Is=j("@(",!1),Da=j("<",!1),er=j(">",!1),La=At([["A","Z"],"_"],!1,!0),dr=At([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),nn=At(["\r",`
`],!1,!1),ll=At([" ","	","\r",`
`],!1,!1),js=At([" ","	"],!1,!1),ul=function(f){return f.join("")},Ln=function(){return o()},ol=function(){return o()},Ha=function(){return" ".repeat(o().length)},fl=function(){return o().replace(/[^\n]/g," ")},cl=function(f){return f??[]},Ua=function(f,g){return g},hl=function(f,g){return[f,...g]},Ba=function(f,g){return g},pl=function(f,g){return[f,...g]},qa=function(f,g){return g},vl=function(f,g){return[f,...g]},Ka=function(f){return f},gl=function(f,g){return ne("ns",{name:f,members:g})},Hn=function(f,g){return ne("meta",{name:f,value:g})},dl=function(f){return ne("meta",{name:null,value:f})},Un=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},yl=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},za=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},wl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},ml=function(f,g,b){return ne("each",{var:f,items:g,for:b})},$l=function(f,g,b){return ne("each",{var:f,items:g,for:b})},xl=function(f,g){return g},bl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Al=function(f,g){return g},_l=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Cl=function(f,g){return ne("for",{times:f,for:g})},Pl=function(f,g){return ne("for",{times:f,for:g})},kl=function(f){return ne("return",{expr:f})},Ml=function(f){return ne("loop",{statements:f})},El=function(){return ne("break",{})},Sl=function(){return ne("continue",{})},Nl=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Va=function(f,g,b){return{op:g,term:b}},Fl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op.value),operatorLocs:g.map(b=>b.op.loc)})},Ol=function(){const f=Y();return{value:o(),loc:{start:f.start.offset,end:f.end.offset-1}}},Tl=function(f){return ne("not",{expr:f})},Il=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},jl=function(f){return ne("callChain",{args:f??[]})},Bn=function(f,g){return g},Rl=function(f,g){return[f,...g]},Wa=function(f){return ne("indexChain",{index:f})},Dl=function(f){return ne("propChain",{name:f})},Ll=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Hl=function(f,g){return[f,...g]},Ga=function(f,g){return{cond:f,then:g}},Ul=function(f){return f},qn=function(f,g,b){return{q:g,a:b}},Bl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},ql=function(f){return ne("block",{statements:f})},Kl=function(f){return ne("exists",{identifier:f})},zl=function(f){return ne("identifier",{name:f})},Vl=function(f){return ne("tmpl",{tmpl:f})},Ja=function(f){return f.join("")},Za=function(f){return f},Qa=function(f){return ne("str",{value:f.join("")})},Xa=function(f){return f},Wl=function(f){return ne("str",{value:f.join("")})},Gl=function(){return'"'},Ya=function(){return"'"},Jl=function(){return ne("num",{value:parseFloat(o())})},ei=function(){return ne("num",{value:parseFloat(o())})},ti=function(){return ne("num",{value:parseInt(o(),10)})},Zl=function(){return ne("num",{value:parseInt(o(),10)})},ri=function(){return ne("bool",{value:!0})},Ql=function(){return ne("bool",{value:!1})},Xl=function(){return ne("null",{})},si=function(f,g){return{k:f,v:g}},Yl=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},ni=function(f){return f},eu=function(f){return ne("arr",{value:f})},tu=function(f,g){return{name:f,argType:g}},ai=function(f,g){return[f,...g]},ru=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&T("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},ii=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Kn=function(f){return f},su=function(f){return ne("arr",{value:f})},zn=function(f,g){return{k:f,v:g}},nu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},au=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},li=function(f,g){return[f,...g]},iu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},ui=function(f){return ne("namedTypeSource",{name:f,inner:null})},oi=function(){return o()},lu=function(){return o()},fi=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,an=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},Jr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function o(){return t.substring(te,c)}function Y(){return le(te,c)}function T(f,g){throw g=g!==void 0?g:le(te,c),uu(f,g)}function j(f,g){return{type:"literal",text:f,ignoreCase:g}}function At(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function K(){return{type:"end"}}function Rs(f){var g=xs[f],b;if(g)return g;if(f>=xs.length)b=xs.length-1;else for(b=f;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[f]=g,g}function le(f,g,b){var w=Rs(f),a=Rs(g),l={source:n,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,an=[]),an.push(f))}function uu(f,g){return new zo(f,null,null,g)}function ge(f,g,b){return new zo(zo.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=S[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=f,g=ul(g),f=g,S[w]={nextPos:c,result:f},f}function Ds(){var f,g,b=c*77+1,w=S[b];return w?(c=w.nextPos,w.result):(f=c,g=$i(),g!==e&&(te=f,g=Ln()),f=g,f===e&&(f=c,g=cn(),g!==e&&(te=f,g=ol()),f=g,f===e&&(f=L(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),S[b]={nextPos:c,result:f},f)}function L(){var f,g,b,w,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],w=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ha()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===M?(w=M,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=fl()):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function ci(){var f,g,b,w,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=ln(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=cl(b),S[l]={nextPos:c,result:f},f}function ln(){var f,g,b,w,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Vn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Vn(),p!==e?(te=w,w=Ua(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Vn(),p!==e?(te=w,w=Ua(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=hl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function R(){var f,g,b,w,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=un(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=un(),p!==e?(te=w,w=Ba(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=un(),p!==e?(te=w,w=Ba(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=pl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function bs(){var f,g,b,w,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=As(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=w,w=qa(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=w,w=qa(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=vl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function Vn(){var f,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(f=Ar(),f===e&&(f=Xe(),f===e&&(f=As())),S[g]={nextPos:c,result:f},f)}function un(){var f,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(f=hs(),f===e&&(f=ia(),f===e&&(f=Ar())),S[g]={nextPos:c,result:f},f)}function As(){var f,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(f=hs(),f===e&&(f=ia(),f===e&&(f=_s(),f===e&&(f=Qr(),f===e&&(f=Ve(),f===e&&(f=Ls(),f===e&&(f=hi(),f===e&&(f=pi(),f===e&&(f=ou(),f===e&&(f=vi(),f===e&&(f=fu(),f===e&&(f=et()))))))))))),S[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(f=cu(),f===e&&(f=Zr()),S[g]={nextPos:c,result:f},f)}function Zr(){var f,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(f=es(),f===e&&(f=du(),f===e&&(f=pu(),f===e&&(f=on()))),S[g]={nextPos:c,result:f},f)}function on(){var f,g,b,w,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(f=Zn(),f===e&&(f=vu(),f===e&&(f=mi(),f===e&&(f=$i(),f===e&&(f=cn(),f===e&&(f=Yn(),f===e&&(f=pn(),f===e&&(f=ra(),f===e&&(f=sa(),f===e&&(f=Ai(),f===e&&(f=hu(),f===e&&(f=Hs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e?(te=f,f=Ka(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Or(){var f,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(f=Yn(),f===e&&(f=cn(),f===e&&(f=pn(),f===e&&(f=la(),f===e&&(f=ua(),f===e&&(f=ra()))))),S[g]={nextPos:c,result:f},f)}function Ar(){var f,g,b,w,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(In)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=q,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=f,f=gl(w,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(Er)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Or(),l!==e?(te=f,f=Hn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(Er)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Or(),w!==e?(te=f,f=dl(w)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function hs(){var f,g,b,w,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(f=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=he,c++):($=e,i===0&&D(nt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Ee,c++):($=e,i===0&&D(Ut)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=f,f=Un(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=he,c++):($=e,i===0&&D(nt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Ee,c++):($=e,i===0&&D(Ut)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=f,f=yl(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[u]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=za(w)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function Ve(){var f,g,b,w,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,2)===Q?(g=Q,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Or(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&D(Gr)),$!==e?(te=f,f=wl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[p]={nextPos:c,result:f},f}function Ls(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+19,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Sr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=O,c++):(h=e,i===0&&D(Wr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=ml($,d,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(w=ue,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=ur(),h!==e?(te=f,f=$l(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function hi(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A=c*77+20,E=S[A];if(E)return c=E.nextPos,E.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=Ee,c++):(u=e,i===0&&D(Ut)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Sr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=O,c++):(x=e,i===0&&D(Wr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=bl($,s,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(w=ue,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=Ee,c++):(s=e,i===0&&D(Ut)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Sr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=_l(l,p,d,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ur(),p!==e?(te=f,f=Cl(a,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Pl(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return S[A]={nextPos:c,result:f},f}function Qr(){var f,g,b,w,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=kl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[l]={nextPos:c,result:f},f}function pi(){var f,g,b,w,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Se?(g=Se,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=q,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=f,f=Ml(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function ou(){var f,g,b,w,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Te?(g=Te,c+=5):(g=e,i===0&&D(Js)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=El()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function vi(){var f,g,b,w,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===Pe?(g=Pe,c+=8):(g=e,i===0&&D(Nr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Sl()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function fu(){var f,g,b,w,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Fr)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(Gi)),w===e&&(t.charCodeAt(c)===61?(w=Ee,c++):(w=e,i===0&&D(Ut)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Nl(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function cu(){var f,g,b,w,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Zr(),g!==e){for(b=[],w=c,a=[],l=Xr();l!==e;)a.push(l),l=Xr();if(l=gi(),l!==e){for($=[],p=Xr();p!==e;)$.push(p),p=Xr();p=Zr(),p!==e?(te=w,w=Va(g,l,p)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=Xr();l!==e;)a.push(l),l=Xr();if(l=gi(),l!==e){for($=[],p=Xr();p!==e;)$.push(p),p=Xr();p=Zr(),p!==e?(te=w,w=Va(g,l,p)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Fl(g,b)):(c=f,f=e)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function Xr(){var f,g,b,w=c*77+27,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=nr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=We(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),S[w]={nextPos:c,result:f},f)}function gi(){var f,g,b=c*77+28,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xt?(g=xt,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(Ia)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),it.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=f,g=Ol()),f=g,S[b]={nextPos:c,result:f},f)}function hu(){var f,g,b,w=c*77+29,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=f,f=Tl(b)):(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function pu(){var f,g,b,w,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,g=on(),g!==e){if(b=[],w=di(),w===e&&(w=Wn(),w===e&&(w=yi())),w!==e)for(;w!==e;)b.push(w),w=di(),w===e&&(w=Wn(),w===e&&(w=yi()));else b=e;b!==e?(te=f,f=Il(g,b)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function di(){var f,g,b,w,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=Yr(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e?(te=f,f=jl(w)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Yr(){var f,g,b,w,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=et(),l!==e?(te=w,w=Bn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=et(),l!==e?(te=w,w=Bn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=Rl(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Wn(){var f,g,b,w,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=Wa(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w=c*77+34,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(Zs)),g!==e?(b=tt(),b!==e?(te=f,f=Dl(b)):(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function es(){var f,g,b,w,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Mr?(g=Mr,c+=2):(g=e,i===0&&D(Rn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=Gn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=wi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=f,f=Ll(w,l,$,p)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function Gn(){var f,g,b,w,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=Jn(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=Jn(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=Jn(),l!==e?w=l:(c=w,w=e)}te=f,f=Hl(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Jn(){var f,g,b,w,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,4)===Wt?(g=Wt,c+=4):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=Ga(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return S[p]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Ul(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[l]={nextPos:c,result:f},f}function Zn(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A,E,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(f=c,t.substr(c,5)===zr?(g=zr,c+=5):(g=e,i===0&&D(Ra)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=q,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();te=u,u=qn(a,d,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();te=u,u=qn(a,d,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=Vr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=f,f=Bl(a,s,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return S[I]={nextPos:c,result:f},f}function vu(){var f,g,b,w,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=q,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=f,f=ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Cr?(g=Cr,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Hs(),w!==e?(te=f,f=Kl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function Hs(){var f,g,b=c*77+42,w=S[b];return w?(c=w.nextPos,w.result):(f=c,g=wu(),g!==e&&(te=f,g=zl(g)),f=g,S[b]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=W,c++):(w=e,i===0&&D($s)),w!==e?(te=f,f=Vl(b)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function xi(){var f,g,b,w,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=fn(),b!==e)for(;b!==e;)g.push(b),b=fn();else g=e;g!==e&&(te=f,g=Ja(g)),f=g}return S[$]={nextPos:c,result:f},f}function fn(){var f,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(f=gu(),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(Os))),S[g]={nextPos:c,result:f},f)}function gu(){var f,g,b,w=c*77+46,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=nr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Dn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function cn(){var f,g,b,w,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Qs)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Qs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Qn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Za(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Qs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Qn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Za(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=re,c++):(w=e,i===0&&D(Qs)),w!==e?(te=f,f=Qa(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=ce,c++):(g=e,i===0&&D(Xs)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(Xs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Xn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Xa(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(Xs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Xn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Xa(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=ce,c++):(w=e,i===0&&D(Xs)),w!==e?(te=f,f=Wl(b)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Qn(){var f,g,b=c*77+48,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=f,g=Gl()),f=g,S[b]={nextPos:c,result:f},f)}function Xn(){var f,g,b=c*77+49,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===pe?(g=pe,c+=2):(g=e,i===0&&D(Ys)),g!==e&&(te=f,g=Ya()),f=g,S[b]={nextPos:c,result:f},f)}function Yn(){var f,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(f=hn(),f===e&&(f=ea()),S[g]={nextPos:c,result:f},f)}function hn(){var f,g,b,w,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(w=[],a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(Zs)),a!==e){if(l=[],$=t.charAt(c),ct.test($)?c++:($=e,i===0&&D(br)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ct.test($)?c++:($=e,i===0&&D(br));else l=e;l!==e?(te=f,f=Jl()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),ct.test(b)?c++:(b=e,i===0&&D(br)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(Zs)),w!==e){if(a=[],l=t.charAt(c),ct.test(l)?c++:(l=e,i===0&&D(br)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ct.test(l)?c++:(l=e,i===0&&D(br));else a=e;a!==e?(te=f,f=ei()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[p]={nextPos:c,result:f},f}function ea(){var f,g,b,w,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(w=[],a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br));else w=e;w!==e?(te=f,f=ti()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),ct.test(b)?c++:(b=e,i===0&&D(br)),b!==e?(te=f,f=Zl()):(c=f,f=e)),S[l]={nextPos:c,result:f},f}function pn(){var f,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(f=bi(),f===e&&(f=ta()),S[g]={nextPos:c,result:f},f)}function bi(){var f,g,b,w,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ne?(g=Ne,c+=4):(g=e,i===0&&D(en)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ri()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function ta(){var f,g,b,w,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(tn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Ql()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function ra(){var f,g,b,w,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(rn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Xl()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function sa(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+57,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=f,f=Yl(w)):(c=f,f=e)}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function Ai(){var f,g,b,w,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=eu(w)):(c=f,f=e)}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=tu(g,b)}else c=f,f=e;return S[p]={nextPos:c,result:f},f}function aa(){var f,g,b,w,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=na(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=na(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=na(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ai(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function ia(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A,E,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(f=c,t.charCodeAt(c)===64?(g=Me,c++):(g=e,i===0&&D(sn)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Ht)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=aa(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=O,c++):(u=e,i===0&&D(Wr)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=he,c++):(x=e,i===0&&D(nt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?d=_:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=q,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=bs(),_===e&&(_=null),A=[],E=k();E!==e;)A.push(E),E=k();t.charCodeAt(c)===125?(E=J,c++):(E=e,i===0&&D(ut)),E!==e?(te=f,f=ru(b,w,a,p,d,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[I]={nextPos:c,result:f},f}function du(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m=c*77+62,_=S[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=aa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=he,c++):(s=e,i===0&&D(nt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=q,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=f,f=ii(w,$,d)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[m]={nextPos:c,result:f},f}function la(){var f,g,b,w,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Kn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Kn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=su(w)):(c=f,f=e)}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+64,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Or(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=zn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Or(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=zn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=f,f=nu(w)):(c=f,f=e)}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(f=yu(),f===e&&(f=_i()),S[g]={nextPos:c,result:f},f)}function yu(){var f,g,b,w,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=oa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===ar?(p=ar,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=f,f=au(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function oa(){var f,g,b,w,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=li(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=Je,c++):(w=e,i===0&&D(Da)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],p=De();p!==e;)$.push(p),p=De();t.charCodeAt(c)===62?(p=st,c++):(p=e,i===0&&D(er)),p!==e?(te=f,f=iu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=ui(g)),f=g),S[s]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),us.test(g)?c++:(g=e,i===0&&D(La)),g!==e){for(b=[],w=t.charAt(c),ss.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),ss.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=oi()}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function wu(){var f,g,b,w,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=lu()}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Cs(){var f,g,b,w,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Sr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return S[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=bs(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=f,f=fi(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=As()),S[$]={nextPos:c,result:f},f}function We(){var f,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(il)),f===e&&(f=t.charAt(c),bt.test(f)?c++:(f=e,i===0&&D(nn))),S[g]={nextPos:c,result:f},f)}function Ci(){var f,g,b=c*77+74,w=S[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=We()),S[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(ll)),S[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),xn.test(f)?c++:(f=e,i===0&&D(js)),S[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=Y();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Jr=y(),r.peg$library)return{peg$result:Jr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:an,peg$maxFailPos:yr};if(Jr!==e&&c===t.length)return Jr;throw Jr!==e&&c<t.length&&D(K()),ge(an,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const $b=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function xb(t){return $b.includes(t.type)}function Uy(t){return"chain"in t&&t.chain!==null}function bb(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Ab(t,r,e){return{type:"index",target:t,index:r,loc:e}}function _b(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Mt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Mt(e.expr,r);break}case"return":{e.expr=Mt(e.expr,r);break}case"each":{e.items=Mt(e.items,r),e.for=Mt(e.for,r);break}case"for":{e.from!=null&&(e.from=Mt(e.from,r)),e.to!=null&&(e.to=Mt(e.to,r)),e.times!=null&&(e.times=Mt(e.times,r)),e.for=Mt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Mt(e.expr,r),e.dest=Mt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Mt(e.operands[n],r);break}case"not":{e.expr=Mt(e.expr,r);break}case"if":{e.cond=Mt(e.cond,r),e.then=Mt(e.then,r);for(const n of e.elseif)n.cond=Mt(n.cond,r),n.then=Mt(n.then,r);e.else!=null&&(e.else=Mt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Mt(e.children[n],r);break}case"match":{e.about=Mt(e.about,r);for(const n of e.qs)n.q=Mt(n.q,r),n.a=Mt(n.a,r);e.default!=null&&(e.default=Mt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"exists":{e.identifier=Mt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Mt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Mt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Mt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"indexChain":{e.index=Mt(e.index,r);break}case"call":{e.target=Mt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"index":{e.target=Mt(e.target,r),e.index=Mt(e.index,r);break}case"prop":{e.target=Mt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Mt(e.members[n],r);break}case"or":case"and":{e.left=Mt(e.left,r),e.right=Mt(e.right,r);break}}if(Uy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Mt(e.chain[n],r);return e}const tp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function rp(t){throw new rf(`Reserved word "${t}" cannot be used as variable name.`)}function Cb(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{tp.includes(t.name)&&rp(t.name);break}case"meta":{t.name!=null&&tp.includes(t.name)&&rp(t.name);break}case"fn":{for(const r of t.args)tp.includes(r.name)&&rp(r.name);break}}return t}function Pb(t){for(const r of t)Mt(r,Cb);return t}function Yg(t){return{type:"simple",name:t}}function kb(t,r){return{type:"generic",name:t,inners:r}}function Mb(t,r){return{type:"fn",args:t,result:r}}function Uc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Uc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Uc(n)).join(", "),e=Uc(t.result);return`@(${r}) { ${e} }`}}}function Ef(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Yg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ef(t.inner):r=Yg("any"),kb(t.name,[r])}}throw new rf(`Unknown type: '${Uc(t)}'`)}else{const r=t.args.map(e=>Ef(e));return Mb(r,Ef(t.result))}}function Eb(t){switch(t.type){case"def":{t.varType!=null&&Ef(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ef(r.argType);t.retType!=null&&Ef(t.retType);break}}return t}function Sb(t){for(const r of t)Mt(r,Eb);return t}function Bc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Bc(n.expr.children)),r.push(n);else{if(e.length>0)throw new rf("invalid attribute.");switch(n.type){case"fn":{n.children=Bc(n.children);break}case"block":{n.statements=Bc(n.statements);break}}r.push(n)}if(e.length>0)throw new rf("invalid attribute.");return r}function Nb(t){if(xb(t)&&Uy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=bb(n,v.args,v.loc);break}case"indexChain":{n=Ab(n,v.index,v.loc);break}case"propChain":{n=_b(n,v.name,v.loc);break}}return n}return t}function Fb(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],Nb);return t}function qc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function By(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return qc(t,r,e);{const{left:n,right:v,info:y}=t;return qc(n,By(v,r,e),y)}}function Io(t){if(t.type!=="infixTree")return t;if(t.info.mapFn)return t.info.mapFn(t);{const r=Io(t.left),e=Io(t.right);return{type:"call",target:{type:"identifier",name:t.info.func,loc:t.info.opLoc},args:[r,e],loc:{start:r.loc.start,end:e.loc.end}}}}const Ob={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>{const r=Io(t.left),e=Io(t.right);return{type:"and",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3},"||":{mapFn:t=>{const r=Io(t.left),e=Io(t.right);return{type:"or",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3}};function Tb(t){const r=t.operators.map((n,v)=>{const y=Ob[n];if(y==null)throw new rf(`No such operator: ${n}.`);return{...y,opLoc:t.operatorLocs[v]}});let e=qc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=By(e,t.operands[2+n],r[1+n]);return Io(e)}function Ib(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],e=>e.type==="infix"?Tb(e):e);return t}var Tu;let jb=(Tu=class{constructor(){ve(this,"plugins");this.plugins={validate:[Pb,Sb],transform:[Bc,Fb,Ib]}}static parse(r){return Tu.instance==null&&(Tu.instance=new Tu),Tu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Xg(r,{startRule:"Preprocess"});e=Xg(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new rf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new rf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},ve(Tu,"instance"),Tu);const Rb="develop",Db={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let zp=[],Jf=null;function Lb(t){return zp=jb.parse(t),JSON.stringify(zp,null,"	")}async function Hb(t){Jf==null||Jf.abort(),Jf=new Nn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Bp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Bp(e.val,!0),print:!1});break}}});try{await Jf.exec(zp)}catch(r){t.err(r)}}const Ub=Object.freeze(Object.defineProperty({__proto__:null,exec:Hb,parse:Lb,samples:Db,version:Rb},Symbol.toStringTag,{value:"Module"}));function ls(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Ih=class qy extends Error{constructor(e,n){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,qy)}},Bb=class extends Ih{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},sf=class extends Ih{constructor(e,n){super(e,n);ve(this,"name","Syntax")}},vr=class extends Ih{constructor(e,n){super(e,n);ve(this,"name","Runtime")}},ed=class extends vr{constructor(r,e){super(r,e)}};class qb extends vr{constructor(e,n){super(e,n);ve(this,"name","")}}var Ju=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Bu=class Vp{constructor(r=[],e,n,v){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Vp(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const v=[e,...this.layerdStates];return new Vp(v,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new vr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const y=v.get(r);if(!y.isMutable)throw new vr(`Cannot assign to an immutable variable ${r}.`);y.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ju([ls],Bu.prototype,"log",null);Ju([ls],Bu.prototype,"onUpdated",null);Ju([ls],Bu.prototype,"createChildScope",null);Ju([ls],Bu.prototype,"createChildNamespaceScope",null);Ju([ls],Bu.prototype,"get",null);Ju([ls],Bu.prototype,"exists",null);Ju([ls],Bu.prototype,"getAll",null);Ju([ls],Bu.prototype,"add",null);Ju([ls],Bu.prototype,"assign",null);const Jt={type:"null"},Aa={type:"bool",value:!0},_a={type:"bool",value:!1},Le=t=>({type:"num",value:t}),fr=t=>({type:"str",value:t}),Vo=t=>({type:"bool",value:t}),yh=t=>({type:"obj",value:t}),ns=t=>({type:"arr",value:t}),Kb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ye=t=>({type:"fn",native:t}),zb=t=>({type:"return",value:t}),Vb=()=>({type:"break",value:null}),Wb=()=>({type:"continue",value:null}),Gb=t=>t.type==="return"?t.value:t,Wp=(t,r)=>({type:"error",value:t,info:r});function Ca(t){if(t==null)throw new vr("Expect anything, but got nothing.")}function mn(t){if(t==null)throw new vr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new vr(`Expect boolean, but got ${t.type}.`)}function Su(t){if(t==null)throw new vr("Expect function, but got nothing.");if(t.type!=="fn")throw new vr(`Expect function, but got ${t.type}.`)}function ys(t){if(t==null)throw new vr("Expect string, but got nothing.");if(t.type!=="str")throw new vr(`Expect string, but got ${t.type}.`)}function Fe(t){if(t==null)throw new vr("Expect number, but got nothing.");if(t.type!=="num")throw new vr(`Expect number, but got ${t.type}.`)}function Au(t){if(t==null)throw new vr("Expect object, but got nothing.");if(t.type!=="obj")throw new vr(`Expect object, but got ${t.type}.`)}function Wo(t){if(t==null)throw new vr("Expect array, but got nothing.");if(t.type!=="arr")throw new vr(`Expect array, but got ${t.type}.`)}function sp(t){return t.type==="obj"}function td(t){return t.type==="arr"}function Sf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Gp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Gp(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Jp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Jp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Jp(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Zp(t){if(t===null)return Jt;if(typeof t=="boolean")return Vo(t);if(typeof t=="string")return fr(t);if(typeof t=="number")return Le(t);if(Array.isArray(t))return ns(t.map(r=>Zp(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Zp(n));return yh(r)}return Jt}function Nf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Nf(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,y]of t.value)n.push(`${v}: ${Nf(y,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Jb={version:"0.18.0"},Zb=Jb.version,Qb=new TextEncoder,Xb=new TextDecoder,Yb={help:fr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":fr(Zb),"Core:ai":fr("kawaii"),"Core:not":ye(([t])=>(mn(t),t.value?_a:Aa)),"Core:eq":ye(([t,r])=>(Ca(t),Ca(r),Sf(t,r)?Aa:_a)),"Core:neq":ye(([t,r])=>(Ca(t),Ca(r),Sf(t,r)?_a:Aa)),"Core:and":ye(([t,r])=>(mn(t),t.value?(mn(r),r.value?Aa:_a):_a)),"Core:or":ye(([t,r])=>(mn(t),t.value?Aa:(mn(r),r.value?Aa:_a))),"Core:add":ye(([t,r])=>(Fe(t),Fe(r),Le(t.value+r.value))),"Core:sub":ye(([t,r])=>(Fe(t),Fe(r),Le(t.value-r.value))),"Core:mul":ye(([t,r])=>(Fe(t),Fe(r),Le(t.value*r.value))),"Core:pow":ye(([t,r])=>{Fe(t),Fe(r);const e=t.value**r.value;if(isNaN(e))throw new vr("Invalid operation.");return Le(e)}),"Core:div":ye(([t,r])=>{Fe(t),Fe(r);const e=t.value/r.value;if(isNaN(e))throw new vr("Invalid operation.");return Le(e)}),"Core:mod":ye(([t,r])=>(Fe(t),Fe(r),Le(t.value%r.value))),"Core:gt":ye(([t,r])=>(Fe(t),Fe(r),t.value>r.value?Aa:_a)),"Core:lt":ye(([t,r])=>(Fe(t),Fe(r),t.value<r.value?Aa:_a)),"Core:gteq":ye(([t,r])=>(Fe(t),Fe(r),t.value>=r.value?Aa:_a)),"Core:lteq":ye(([t,r])=>(Fe(t),Fe(r),t.value<=r.value?Aa:_a)),"Core:type":ye(([t])=>(Ca(t),fr(t.type))),"Core:to_str":ye(([t])=>(Ca(t),fr(Nf(t)))),"Core:range":ye(([t,r])=>(Fe(t),Fe(r),t.value<r.value?ns(Array.from({length:r.value-t.value+1},(e,n)=>Le(n+t.value))):t.value>r.value?ns(Array.from({length:t.value-r.value+1},(e,n)=>Le(t.value-n))):ns([t]))),"Core:sleep":ye(async([t])=>(Fe(t),await new Promise(r=>setTimeout(r,t.value)),Jt)),"Core:abort":ye(async([t])=>{throw ys(t),new qb(t.value)}),"Util:uuid":ye(()=>fr(bc())),"Json:stringify":ye(([t])=>(Ca(t),fr(JSON.stringify(Jp(t))))),"Json:parse":ye(([t])=>{ys(t);try{return Zp(JSON.parse(t.value))}catch{return Wp("not_json")}}),"Json:parsable":ye(([t])=>{ys(t);try{JSON.parse(t.value)}catch{return Vo(!1)}return Vo(!0)}),"Date:now":ye(()=>Le(Date.now())),"Date:year":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":ye(([t])=>(t&&Fe(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":ye(([t])=>(ys(t),Le(new Date(t.value).getTime()))),"Date:to_iso_str":ye(([t,r])=>{t&&Fe(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Fe(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(n===0)v="Z";else{const q=Math.sign(n),J=Math.floor(Math.abs(n)/60),we=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+q*J),e.setUTCMinutes(e.getUTCMinutes()+q*we);const ue=n>0?"+":"-",he=J.toString().padStart(2,"0"),Ee=we.toString().padStart(2,"0");v=`${ue}${he}:${Ee}`}const y=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),O=e.getUTCSeconds().toString().padStart(2,"0"),H=e.getUTCMilliseconds().toString().padStart(3,"0");return fr(`${y}-${C}-${P}T${M}:${N}:${O}.${H}${v}`)}),"Math:Infinity":Le(1/0),"Math:E":Le(Math.E),"Math:LN2":Le(Math.LN2),"Math:LN10":Le(Math.LN10),"Math:LOG2E":Le(Math.LOG2E),"Math:LOG10E":Le(Math.LOG10E),"Math:PI":Le(Math.PI),"Math:SQRT1_2":Le(Math.SQRT1_2),"Math:SQRT2":Le(Math.SQRT2),"Math:abs":ye(([t])=>(Fe(t),Le(Math.abs(t.value)))),"Math:acos":ye(([t])=>(Fe(t),Le(Math.acos(t.value)))),"Math:acosh":ye(([t])=>(Fe(t),Le(Math.acosh(t.value)))),"Math:asin":ye(([t])=>(Fe(t),Le(Math.asin(t.value)))),"Math:asinh":ye(([t])=>(Fe(t),Le(Math.asinh(t.value)))),"Math:atan":ye(([t])=>(Fe(t),Le(Math.atan(t.value)))),"Math:atanh":ye(([t])=>(Fe(t),Le(Math.atanh(t.value)))),"Math:atan2":ye(([t,r])=>(Fe(t),Fe(r),Le(Math.atan2(t.value,r.value)))),"Math:cbrt":ye(([t])=>(Fe(t),Le(Math.cbrt(t.value)))),"Math:ceil":ye(([t])=>(Fe(t),Le(Math.ceil(t.value)))),"Math:clz32":ye(([t])=>(Fe(t),Le(Math.clz32(t.value)))),"Math:cos":ye(([t])=>(Fe(t),Le(Math.cos(t.value)))),"Math:cosh":ye(([t])=>(Fe(t),Le(Math.cosh(t.value)))),"Math:exp":ye(([t])=>(Fe(t),Le(Math.exp(t.value)))),"Math:expm1":ye(([t])=>(Fe(t),Le(Math.expm1(t.value)))),"Math:floor":ye(([t])=>(Fe(t),Le(Math.floor(t.value)))),"Math:fround":ye(([t])=>(Fe(t),Le(Math.fround(t.value)))),"Math:hypot":ye(([t])=>{Wo(t);const r=[];for(const e of t.value)Fe(e),r.push(e.value);return Le(Math.hypot(...r))}),"Math:imul":ye(([t,r])=>(Fe(t),Fe(r),Le(Math.imul(t.value,r.value)))),"Math:log":ye(([t])=>(Fe(t),Le(Math.log(t.value)))),"Math:log1p":ye(([t])=>(Fe(t),Le(Math.log1p(t.value)))),"Math:log10":ye(([t])=>(Fe(t),Le(Math.log10(t.value)))),"Math:log2":ye(([t])=>(Fe(t),Le(Math.log2(t.value)))),"Math:max":ye(([t,r])=>(Fe(t),Fe(r),Le(Math.max(t.value,r.value)))),"Math:min":ye(([t,r])=>(Fe(t),Fe(r),Le(Math.min(t.value,r.value)))),"Math:pow":ye(([t,r])=>(Fe(t),Fe(r),Le(Math.pow(t.value,r.value)))),"Math:round":ye(([t])=>(Fe(t),Le(Math.round(t.value)))),"Math:sign":ye(([t])=>(Fe(t),Le(Math.sign(t.value)))),"Math:sin":ye(([t])=>(Fe(t),Le(Math.sin(t.value)))),"Math:sinh":ye(([t])=>(Fe(t),Le(Math.sinh(t.value)))),"Math:sqrt":ye(([t])=>{Fe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new vr("Invalid operation.");return Le(r)}),"Math:tan":ye(([t])=>(Fe(t),Le(Math.tan(t.value)))),"Math:tanh":ye(([t])=>(Fe(t),Le(Math.tanh(t.value)))),"Math:trunc":ye(([t])=>(Fe(t),Le(Math.trunc(t.value)))),"Math:rnd":ye(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Le(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Le(Math.random())),"Math:gen_rng":ye(([t])=>{if(Ca(t),t.type!=="num"&&t.type!=="str")return Jt;const r=ff(t.value.toString());return ye(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Le(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Le(r()))}),"Num:to_hex":ye(([t])=>(Fe(t),fr(t.value.toString(16)))),"Num:from_hex":ye(([t])=>(ys(t),Le(parseInt(t.value,16)))),"Str:lf":fr(`
`),"Str:lt":ye(([t,r])=>(ys(t),ys(r),t.value<r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:gt":ye(([t,r])=>(ys(t),ys(r),t.value>r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:from_codepoint":ye(([t])=>(Fe(t),fr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ye(([t])=>(Wo(t),fr(Array.from(t.value.map(r=>(Fe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ye(([t])=>(Wo(t),fr(Xb.decode(Uint8Array.from(t.value.map(r=>(Fe(r),r.value))))))),"Arr:create":ye(([t,r])=>{Fe(t);try{return ns(Array(t.value).fill(r??Jt))}catch(e){throw t.value<0?new vr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new vr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ye(([t])=>(Au(t),ns(Array.from(t.value.keys()).map(r=>fr(r))))),"Obj:vals":ye(([t])=>(Au(t),ns(Array.from(t.value.values())))),"Obj:kvs":ye(([t])=>(Au(t),ns(Array.from(t.value.entries()).map(([r,e])=>ns([fr(r),e]))))),"Obj:get":ye(([t,r])=>(Au(t),ys(r),t.value.get(r.value)??Jt)),"Obj:set":ye(([t,r,e])=>(Au(t),ys(r),Ca(e),t.value.set(r.value,e),Jt)),"Obj:has":ye(([t,r])=>(Au(t),ys(r),Vo(t.value.has(r.value)))),"Obj:copy":ye(([t])=>(Au(t),yh(new Map(t.value)))),"Obj:merge":ye(([t,r])=>(Au(t),Au(r),yh(new Map([...t.value,...r.value])))),"Error:create":ye(([t,r])=>(ys(t),Wp(t.value,r))),"Async:interval":ye(async([t,r,e],n)=>{Fe(t),Su(r),e&&(mn(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),ye(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":ye(async([t,r],e)=>{Fe(t),Su(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),ye(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},rd={num:{to_str:t=>ye(async(r,e)=>fr(t.value.toString()))},str:{to_num:t=>ye(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Jt:Le(n)}),to_arr:t=>ye(async(r,e)=>ns(Gs(t.value).map(n=>fr(n)))),to_unicode_arr:t=>ye(async(r,e)=>ns([...t.value].map(n=>fr(n)))),to_unicode_codepoint_arr:t=>ye(async(r,e)=>ns([...t.value].map(n=>{const v=n.codePointAt(0);return Le(v??n.charCodeAt(0))}))),to_char_arr:t=>ye(async(r,e)=>ns(t.value.split("").map(n=>fr(n)))),to_charcode_arr:t=>ye(async(r,e)=>ns(t.value.split("").map(n=>Le(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ye(async(r,e)=>ns(Array.from(Qb.encode(t.value)).map(n=>Le(n)))),len:t=>Le(hf(t.value)),replace:t=>ye(async([r,e],n)=>(ys(r),ys(e),fr(t.value.split(r.value).join(e.value)))),index_of:t=>ye(async([r,e],n)=>{ys(r),e&&Fe(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Le(vf(t.value,r.value,v))}),incl:t=>ye(async([r],e)=>(ys(r),t.value.includes(r.value)?Aa:_a)),trim:t=>ye(async(r,e)=>fr(t.value.trim())),upper:t=>ye(async(r,e)=>fr(t.value.toUpperCase())),lower:t=>ye(async(r,e)=>fr(t.value.toLowerCase())),split:t=>ye(async([r],e)=>(r&&ys(r),ns(r?t.value.split(r?r.value:"").map(n=>fr(n)):Gs(t.value).map(n=>fr(n))))),slice:t=>ye(async([r,e],n)=>(Fe(r),Fe(e),fr(pf(t.value,r.value,e.value)))),pick:t=>ye(async([r],e)=>{Fe(r);const v=Gs(t.value)[r.value];return v?fr(v):Jt}),charcode_at:t=>ye(([r],e)=>{Fe(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Jt:Le(n)}),codepoint_at:t=>ye(([r],e)=>{Fe(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Jt:Le(n)})},arr:{len:t=>Le(t.value.length),push:t=>ye(async([r],e)=>(Ca(r),t.value.push(r),t)),unshift:t=>ye(async([r],e)=>(Ca(r),t.value.unshift(r),t)),pop:t=>ye(async(r,e)=>t.value.pop()??Jt),shift:t=>ye(async(r,e)=>t.value.shift()??Jt),concat:t=>ye(async([r],e)=>(Wo(r),ns(t.value.concat(r.value)))),slice:t=>ye(async([r,e],n)=>(Fe(r),Fe(e),ns(t.value.slice(r.value,e.value)))),join:t=>ye(async([r],e)=>(r&&ys(r),fr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ye(async([r],e)=>{Su(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,Le(y)]));return ns(await Promise.all(n))}),filter:t=>ye(async([r],e)=>{Su(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,Le(v)]);mn(C),C.value&&n.push(y)}return ns(n)}),reduce:t=>ye(async([r,e],n)=>{Su(r);const v=e!=null;let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,Le(C)])}return y}),find:t=>ye(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Le(n)]);if(mn(y),y.value)return v}return Jt}),incl:t=>ye(async([r],e)=>(Ca(r),t.value.some(n=>Sf(r,n))?Aa:_a)),index_of:t=>ye(async([r,e],n)=>{if(Ca(r),e){Fe(e);const v=t.value.slice(0,e.value).length,y=t.value.slice(e.value).findIndex(C=>Sf(C,r));return Le(y<0?y:y+v)}else return Le(t.value.findIndex(v=>Sf(v,r)))}),reverse:t=>ye(async(r,e)=>(t.value.reverse(),Jt)),copy:t=>ye(async(r,e)=>ns([...t.value])),sort:t=>ye(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=await n(y.slice(0,P),C),N=await n(y.slice(P),C);return v(M,N,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);Fe(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return Su(r),Wo(t),t.value=await n(t.value,r),t}),fill:t=>ye(async([r,e,n],v)=>{const y=r??Jt,C=e&&(Fe(e),e.value),P=n&&(Fe(n),n.value);return t.value.fill(y,C,P),t}),repeat:t=>ye(async([r],e)=>{Fe(r);try{return ns(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new vr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new vr("arr.repeat expected integer, got non-integer")}}),every:t=>ye(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Le(n)]);if(mn(y),!y.value)return _a}return Aa}),some:t=>ye(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Le(n)]);if(mn(y),y.value)return Aa}return _a})},error:{name:t=>fr(t.value),info:t=>t.info??Jt}};function e1(t,r){if(Object.hasOwn(rd,t.type)){const e=rd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new vr(`No such prop (${r}) in ${t.type}.`)}else throw new vr(`Cannot read prop of ${t.type}. (reading ${r})`)}const t1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ma=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const Ky=300,r1=Ky-1;let Fn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const n={print:ye(([v])=>{Ca(v),this.opts.out&&this.opts.out(v)}),readline:ye(async v=>{const y=v[0];if(ys(y),this.opts.in==null)return Jt;const C=await this.opts.in(y.value);return fr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...Yb,...n}).map(([v,y])=>[v,t1.const(y)])),this.scope=new Bu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Wp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ih?this.opts.err(r):this.opts.err(new Bb(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const y={isMutable:v.mut,value:await this._eval(v.expr,n)};n.add(v.name,y);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Jt;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],{isMutable:!0,value:e[y]});const v=r.scope.createChildScope(n);return Gb(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Jt;if(this.stepCount%Ky===r1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new vr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Su(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(mn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(mn(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Jt}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(Sf(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Jt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Jt}case"for":{if(r.times){const n=await this._eval(r.times,e);Fe(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Fe(n),Fe(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Le(y)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return Jt}case"each":{const n=await this._eval(r.items,e);Wo(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(y.type==="break")break;if(y.type==="return")return y}return Jt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),Jt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Jt}case"addAssign":{const n=await this._eval(r.dest,e);Fe(n);const v=await this._eval(r.expr,e);return Fe(v),await this.assign(e,r.dest,Le(n.value+v.value)),Jt}case"subAssign":{const n=await this._eval(r.dest,e);Fe(n);const v=await this._eval(r.expr,e);return Fe(v),await this.assign(e,r.dest,Le(n.value-v.value)),Jt}case"null":return Jt;case"bool":return Vo(r.value);case"num":return Le(r.value);case"str":return fr(r.value);case"arr":return ns(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return yh(n)}case"prop":{const n=await this._eval(r.target,e);return sp(n)?n.value.has(r.name)?n.value.get(r.name):Jt:e1(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(td(n)){Fe(v);const y=n.value[v.value];if(y===void 0)throw new ed(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}else{if(sp(n))return ys(v),n.value.has(v.value)?n.value.get(v.value):Jt;throw new vr(`Cannot read prop (${Nf(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return mn(n),Vo(!n.value)}case"fn":return Kb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Vo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);n+=Nf(y)}return fr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),zb(n)}case"break":return this.log("block:break",{scope:e.name}),Vb();case"continue":return this.log("block:continue",{scope:e.name}),Wb();case"ns":return Jt;case"meta":return Jt;case"and":{const n=await this._eval(r.left,e);if(mn(n),n.value){const v=await this._eval(r.right,e);return mn(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(mn(n),n.value)return n;{const v=await this._eval(r.right,e);return mn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Jt;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),y=await this._eval(e.index,r);if(td(v)){if(Fe(y),v.value[y.value]===void 0)throw new ed(`Index out of range. index: ${y.value} max: ${v.value.length-1}`);v.value[y.value]=n}else if(sp(v))ys(y),v.value.set(y.value,n);else throw new vr(`Cannot read prop (${Nf(y)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Au(v),v.value.set(e.name,n)}else if(e.type==="arr")Wo(n),await Promise.all(e.value.map((v,y)=>this.assign(r,v,n.value[y]??Jt)));else if(e.type==="obj")Au(n),await Promise.all([...e.value].map(([v,y])=>this.assign(r,y,n.value.get(v)??Jt)));else throw new vr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ma([ls],Fn.prototype,"exec",null);ma([ls],Fn.prototype,"execFn",null);ma([ls],Fn.prototype,"execFnSimple",null);ma([ls],Fn.prototype,"handleError",null);ma([ls],Fn.prototype,"log",null);ma([ls],Fn.prototype,"collectNs",null);ma([ls],Fn.prototype,"collectNsMember",null);ma([ls],Fn.prototype,"_fn",null);ma([ls],Fn.prototype,"_eval",null);ma([ls],Fn.prototype,"_run",null);ma([ls],Fn.prototype,"registerAbortHandler",null);ma([ls],Fn.prototype,"unregisterAbortHandler",null);ma([ls],Fn.prototype,"abort",null);ma([ls],Fn.prototype,"assign",null);ma([ls],Fn,"collectMetadata",null);function s1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Go(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Go.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}s1(Go,Error);function np(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Go.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=np("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+np("",v.column-1," ")+np("",H,"^")}else r+=`
 at `+C}return r};Go.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function sd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:tr,Main:ci},y=tr,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Lr="[",Yt=".",Mr="if",Wt="elif",_r="else",zr="match",ar="=>",Vr="*",ir="eval",Cr="exists",W="`",re='"',ce="'",xe='\\"',pe="\\'",Ne="true",Ie="false",Ae="null",Me="@",$e="@(",Je="<",st=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,it=/^[%*-+\-\/<>\^]/,Ct=/^[^`{]/,yt=/^[{}`]/,_t=/^[+\-]/,Pt=/^[1-9]/,ct=/^[0-9]/,ks=/^[,;]/,us=/^[A-Z_]/i,ss=/^[A-Z0-9_]/i,bt=/^[\r\n]/,Rt=/^[ \t\r\n]/,xn=/^[ \t]/,gr=F(),Vi=j("//",!1),Wi=j("/*",!1),lr=j("*/",!1),Ht=j("(",!1),Wr=j(")",!1),In=j("::",!1),kt=j("{",!1),ut=j("}",!1),Er=j("###",!1),Gt=j("let",!1),nt=j(":",!1),Ut=j("=",!1),ms=j("var",!1),Bt=j("<:",!1),qt=j("#[",!1),Gr=j("]",!1),Fa=j("each",!1),Sr=j(",",!1),os=j("for",!1),Ns=j("return",!1),ot=At([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=j("loop",!1),Js=j("break",!1),Nr=j("continue",!1),Fr=j("+=",!1),Gi=j("-=",!1),Oa=j("\\",!1),Ji=j("||",!1),Zi=j("&&",!1),Ta=j("==",!1),Ia=j("!=",!1),Qi=j("<=",!1),Xi=j(">=",!1),Yi=At(["%",["*","+"],"-","/","<",">","^"],!1,!1),el=j("!",!1),jn=j("[",!1),Zs=j(".",!1),Rn=j("if",!1),ja=j("elif",!1),tl=j("else",!1),Ra=j("match",!1),Fs=j("=>",!1),rl=j("*",!1),sl=j("eval",!1),nl=j("exists",!1),$s=j("`",!1),Os=At(["`","{"],!0,!1),Dn=At(["{","}","`"],!1,!1),Qs=j('"',!1),Xs=j("'",!1),al=j('\\"',!1),Ys=j("\\'",!1),fs=At(["+","-"],!1,!1),Ts=At([["1","9"]],!1,!1),br=At([["0","9"]],!1,!1),en=j("true",!1),tn=j("false",!1),rn=j("null",!1),cs=At([",",";"],!1,!1),sn=j("@",!1),Is=j("@(",!1),Da=j("<",!1),er=j(">",!1),La=At([["A","Z"],"_"],!1,!0),dr=At([["A","Z"],["0","9"],"_"],!1,!0),il=j(`\r
`,!1),nn=At(["\r",`
`],!1,!1),ll=At([" ","	","\r",`
`],!1,!1),js=At([" ","	"],!1,!1),ul=function(f){return f.join("")},Ln=function(){return o()},ol=function(){return o()},Ha=function(){return""},fl=function(){return""},cl=function(f){return f??[]},Ua=function(f,g){return g},hl=function(f,g){return[f,...g]},Ba=function(f,g){return g},pl=function(f,g){return[f,...g]},qa=function(f,g){return g},vl=function(f,g){return[f,...g]},Ka=function(f){return f},gl=function(f,g){return ne("ns",{name:f,members:g})},Hn=function(f,g){return ne("meta",{name:f,value:g})},dl=function(f){return ne("meta",{name:null,value:f})},Un=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},yl=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},za=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},wl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},ml=function(f,g,b){return ne("each",{var:f,items:g,for:b})},$l=function(f,g,b){return ne("each",{var:f,items:g,for:b})},xl=function(f,g){return g},bl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Al=function(f,g){return g},_l=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Cl=function(f,g){return ne("for",{times:f,for:g})},Pl=function(f,g){return ne("for",{times:f,for:g})},kl=function(f){return ne("return",{expr:f})},Ml=function(f){return ne("loop",{statements:f})},El=function(){return ne("break",{})},Sl=function(){return ne("continue",{})},Nl=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Va=function(f,g,b){return{op:g,term:b}},Fl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Ol=function(){return o()},Tl=function(f){return ne("not",{expr:f})},Il=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},jl=function(f){return ne("callChain",{args:f??[]})},Bn=function(f,g){return g},Rl=function(f,g){return[f,...g]},Wa=function(f){return ne("indexChain",{index:f})},Dl=function(f){return ne("propChain",{name:f})},Ll=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Hl=function(f,g){return[f,...g]},Ga=function(f,g){return{cond:f,then:g}},Ul=function(f){return f},qn=function(f,g,b){return{q:g,a:b}},Bl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},ql=function(f){return ne("block",{statements:f})},Kl=function(f){return ne("exists",{identifier:f})},zl=function(f){return ne("identifier",{name:f})},Vl=function(f){return ne("tmpl",{tmpl:f})},Ja=function(f){return f.join("")},Za=function(f){return f},Qa=function(f){return ne("str",{value:f.join("")})},Xa=function(f){return f},Wl=function(f){return ne("str",{value:f.join("")})},Gl=function(){return'"'},Ya=function(){return"'"},Jl=function(){return ne("num",{value:parseFloat(o())})},ei=function(){return ne("num",{value:parseFloat(o())})},ti=function(){return ne("num",{value:parseInt(o(),10)})},Zl=function(){return ne("num",{value:parseInt(o(),10)})},ri=function(){return ne("bool",{value:!0})},Ql=function(){return ne("bool",{value:!1})},Xl=function(){return ne("null",{})},si=function(f,g){return{k:f,v:g}},Yl=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},ni=function(f){return f},eu=function(f){return ne("arr",{value:f})},tu=function(f,g){return{name:f,argType:g}},ai=function(f,g){return[f,...g]},ru=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&T("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},ii=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Kn=function(f){return f},su=function(f){return ne("arr",{value:f})},zn=function(f,g){return{k:f,v:g}},nu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},au=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},li=function(f,g){return[f,...g]},iu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},ui=function(f){return ne("namedTypeSource",{name:f,inner:null})},oi=function(){return o()},lu=function(){return o()},fi=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,xs=[{line:1,column:1}],yr=c,an=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,S={},Jr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function o(){return t.substring(te,c)}function Y(){return le(te,c)}function T(f,g){throw g=g!==void 0?g:le(te,c),uu(f,g)}function j(f,g){return{type:"literal",text:f,ignoreCase:g}}function At(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function K(){return{type:"end"}}function Rs(f){var g=xs[f],b;if(g)return g;if(f>=xs.length)b=xs.length-1;else for(b=f;!xs[--b];);for(g=xs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return xs[f]=g,g}function le(f,g,b){var w=Rs(f),a=Rs(g),l={source:n,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,an=[]),an.push(f))}function uu(f,g){return new Go(f,null,null,g)}function ge(f,g,b){return new Go(Go.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=S[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Ds();b!==e;)g.push(b),b=Ds();return te=f,g=ul(g),f=g,S[w]={nextPos:c,result:f},f}function Ds(){var f,g,b=c*77+1,w=S[b];return w?(c=w.nextPos,w.result):(f=c,g=$i(),g!==e&&(te=f,g=Ln()),f=g,f===e&&(f=c,g=cn(),g!==e&&(te=f,g=ol()),f=g,f===e&&(f=L(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),S[b]={nextPos:c,result:f},f)}function L(){var f,g,b,w,a,l,$=c*77+2,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(Vi)),g!==e){for(b=[],w=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ci(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ha()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(Wi)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===M?(w=M,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=fl()):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function ci(){var f,g,b,w,a,l=c*77+3,$=S[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=ln(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=cl(b),S[l]={nextPos:c,result:f},f}function ln(){var f,g,b,w,a,l,$,p,s=c*77+4,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Vn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Vn(),p!==e?(te=w,w=Ua(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Vn(),p!==e?(te=w,w=Ua(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=hl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function R(){var f,g,b,w,a,l,$,p,s=c*77+5,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=un(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=un(),p!==e?(te=w,w=Ba(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=un(),p!==e?(te=w,w=Ba(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=pl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function bs(){var f,g,b,w,a,l,$,p,s=c*77+6,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=As(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=w,w=qa(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=We(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=As(),p!==e?(te=w,w=qa(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=vl(g,b)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function Vn(){var f,g=c*77+7,b=S[g];return b?(c=b.nextPos,b.result):(f=Ar(),f===e&&(f=Xe(),f===e&&(f=As())),S[g]={nextPos:c,result:f},f)}function un(){var f,g=c*77+8,b=S[g];return b?(c=b.nextPos,b.result):(f=hs(),f===e&&(f=ia(),f===e&&(f=Ar())),S[g]={nextPos:c,result:f},f)}function As(){var f,g=c*77+9,b=S[g];return b?(c=b.nextPos,b.result):(f=hs(),f===e&&(f=ia(),f===e&&(f=_s(),f===e&&(f=Qr(),f===e&&(f=Ve(),f===e&&(f=Ls(),f===e&&(f=hi(),f===e&&(f=pi(),f===e&&(f=ou(),f===e&&(f=vi(),f===e&&(f=fu(),f===e&&(f=et()))))))))))),S[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=S[g];return b?(c=b.nextPos,b.result):(f=cu(),f===e&&(f=Zr()),S[g]={nextPos:c,result:f},f)}function Zr(){var f,g=c*77+11,b=S[g];return b?(c=b.nextPos,b.result):(f=es(),f===e&&(f=du(),f===e&&(f=pu(),f===e&&(f=on()))),S[g]={nextPos:c,result:f},f)}function on(){var f,g,b,w,a,l,$=c*77+12,p=S[$];if(p)return c=p.nextPos,p.result;if(f=Zn(),f===e&&(f=vu(),f===e&&(f=mi(),f===e&&(f=$i(),f===e&&(f=cn(),f===e&&(f=Yn(),f===e&&(f=pn(),f===e&&(f=ra(),f===e&&(f=sa(),f===e&&(f=Ai(),f===e&&(f=hu(),f===e&&(f=Hs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e?(te=f,f=Ka(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Or(){var f,g=c*77+13,b=S[g];return b?(c=b.nextPos,b.result):(f=Yn(),f===e&&(f=cn(),f===e&&(f=pn(),f===e&&(f=la(),f===e&&(f=ua(),f===e&&(f=ra()))))),S[g]={nextPos:c,result:f},f)}function Ar(){var f,g,b,w,a,l,$,p,s,u,d=c*77+14,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===H?(g=H,c+=2):(g=e,i===0&&D(In)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=q,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=R(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=J,c++):(u=e,i===0&&D(ut)),u!==e?(te=f,f=gl(w,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(Er)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Or(),l!==e?(te=f,f=Hn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===we?(g=we,c+=3):(g=e,i===0&&D(Er)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Or(),w!==e?(te=f,f=dl(w)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function hs(){var f,g,b,w,a,l,$,p,s,u=c*77+16,d=S[u];if(d)return c=d.nextPos,d.result;if(f=c,t.substr(c,3)===ue?(g=ue,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=he,c++):($=e,i===0&&D(nt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Ee,c++):($=e,i===0&&D(Ut)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=f,f=Un(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===G?(g=G,c+=3):(g=e,i===0&&D(ms)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=he,c++):($=e,i===0&&D(nt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=Ee,c++):($=e,i===0&&D(Ut)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();s=et(),s!==e?(te=f,f=yl(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[u]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a=c*77+17,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===V?(g=V,c+=2):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=za(w)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function Ve(){var f,g,b,w,a,l,$,p=c*77+18,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,2)===Q?(g=Q,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Or(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&D(Gr)),$!==e?(te=f,f=wl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[p]={nextPos:c,result:f},f}function Ls(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+19,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();for(t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Sr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e)if(t.charCodeAt(c)===41?(h=O,c++):(h=e,i===0&&D(Wr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=ml($,d,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===Z?(g=Z,c+=4):(g=e,i===0&&D(Fa)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(w=ue,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(d=[],h=k(),h!==e)for(;h!==e;)d.push(h),h=k();else d=e;d!==e?(h=ur(),h!==e?(te=f,f=$l(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function hi(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A=c*77+20,E=S[A];if(E)return c=E.nextPos,E.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(t.substr(c,3)===ue?(a=ue,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=Ee,c++):(u=e,i===0&&D(Ut)),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();h=et(),h!==e?(te=s,s=xl($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=ee,c++):(u=e,i===0&&D(Sr)),u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=O,c++):(x=e,i===0&&D(Wr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=bl($,s,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ue?(w=ue,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(s=Ee,c++):(s=e,i===0&&D(Ut)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=et(),d!==e?(te=p,p=Al(l,d)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(s=ee,c++):(s=e,i===0&&D(Sr)),s===e&&(s=null),u=[],d=k();d!==e;)u.push(d),d=k();if(d=et(),d!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=_l(l,p,d,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Ht)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ur(),p!==e?(te=f,f=Cl(a,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(os)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Pl(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return S[A]={nextPos:c,result:f},f}function Qr(){var f,g,b,w,a,l=c*77+21,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=kl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[l]={nextPos:c,result:f},f}function pi(){var f,g,b,w,a,l,$,p,s=c*77+22,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Se?(g=Se,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=q,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=f,f=Ml(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function ou(){var f,g,b,w,a=c*77+23,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Te?(g=Te,c+=5):(g=e,i===0&&D(Js)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=El()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function vi(){var f,g,b,w,a=c*77+24,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===Pe?(g=Pe,c+=8):(g=e,i===0&&D(Nr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Sl()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function fu(){var f,g,b,w,a,l,$=c*77+25,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Fr)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(Gi)),w===e&&(t.charCodeAt(c)===61?(w=Ee,c++):(w=e,i===0&&D(Ut)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Nl(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function cu(){var f,g,b,w,a,l,$,p,s=c*77+26,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Zr(),g!==e){for(b=[],w=c,a=[],l=Xr();l!==e;)a.push(l),l=Xr();if(l=gi(),l!==e){for($=[],p=Xr();p!==e;)$.push(p),p=Xr();p=Zr(),p!==e?(te=w,w=Va(g,l,p)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=Xr();l!==e;)a.push(l),l=Xr();if(l=gi(),l!==e){for($=[],p=Xr();p!==e;)$.push(p),p=Xr();p=Zr(),p!==e?(te=w,w=Va(g,l,p)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Fl(g,b)):(c=f,f=e)}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function Xr(){var f,g,b,w=c*77+27,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=nr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=We(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),S[w]={nextPos:c,result:f},f)}function gi(){var f,g,b=c*77+28,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xt?(g=xt,c+=2):(g=e,i===0&&D(Ji)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(Zi)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ta)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(Ia)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(Qi)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(Xi)),g===e&&(g=t.charAt(c),it.test(g)?c++:(g=e,i===0&&D(Yi)))))))),g!==e&&(te=f,g=Ol()),f=g,S[b]={nextPos:c,result:f},f)}function hu(){var f,g,b,w=c*77+29,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(el)),g!==e?(b=et(),b!==e?(te=f,f=Tl(b)):(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function pu(){var f,g,b,w,a=c*77+30,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,g=on(),g!==e){if(b=[],w=di(),w===e&&(w=Wn(),w===e&&(w=yi())),w!==e)for(;w!==e;)b.push(w),w=di(),w===e&&(w=Wn(),w===e&&(w=yi()));else b=e;b!==e?(te=f,f=Il(g,b)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function di(){var f,g,b,w,a,l,$=c*77+31,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=Yr(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e?(te=f,f=jl(w)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Yr(){var f,g,b,w,a,l,$=c*77+32,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=et(),l!==e?(te=w,w=Bn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=et(),l!==e?(te=w,w=Bn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=Rl(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Wn(){var f,g,b,w,a,l,$=c*77+33,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=Wa(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w=c*77+34,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(Zs)),g!==e?(b=tt(),b!==e?(te=f,f=Dl(b)):(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function es(){var f,g,b,w,a,l,$,p,s,u,d=c*77+35,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Mr?(g=Mr,c+=2):(g=e,i===0&&D(Rn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,p=[],s=k(),s!==e)for(;s!==e;)p.push(s),s=k();else p=e;if(p!==e?(s=Gn(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=wi(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=f,f=Ll(w,l,$,p)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function Gn(){var f,g,b,w,a,l,$=c*77+36,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=Jn(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=Jn(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=Jn(),l!==e?w=l:(c=w,w=e)}te=f,f=Hl(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Jn(){var f,g,b,w,a,l,$,p=c*77+37,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,4)===Wt?(g=Wt,c+=4):(g=e,i===0&&D(ja)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=Ga(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return S[p]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l=c*77+38,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(tl)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Ul(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[l]={nextPos:c,result:f},f}function Zn(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A,E,I=c*77+39,U=S[I];if(U)return c=U.nextPos,U.result;if(f=c,t.substr(c,5)===zr?(g=zr,c+=5):(g=e,i===0&&D(Ra)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=q,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],s=k();s!==e;)p.push(s),s=k();if(s=[],u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();te=u,u=qn(a,d,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,d=et(),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();te=u,u=qn(a,d,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(d=Vr,c++):(d=e,i===0&&D(rl)),d!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===ar?(x=ar,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],E=k();E!==e;)A.push(E),E=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),d=[],h=k();h!==e;)d.push(h),h=k();t.charCodeAt(c)===125?(h=J,c++):(h=e,i===0&&D(ut)),h!==e?(te=f,f=Bl(a,s,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return S[I]={nextPos:c,result:f},f}function vu(){var f,g,b,w,a,l,$,p,s=c*77+40,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(sl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=q,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=bs(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=J,c++):(p=e,i===0&&D(ut)),p!==e?(te=f,f=ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[s]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a=c*77+41,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Cr?(g=Cr,c+=6):(g=e,i===0&&D(nl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Hs(),w!==e?(te=f,f=Kl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function Hs(){var f,g,b=c*77+42,w=S[b];return w?(c=w.nextPos,w.result):(f=c,g=wu(),g!==e&&(te=f,g=zl(g)),f=g,S[b]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a,l,$=c*77+43,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===96?(g=W,c++):(g=e,i===0&&D($s)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=W,c++):(l=e,i===0&&D($s)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=xi(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=W,c++):(w=e,i===0&&D($s)),w!==e?(te=f,f=Vl(b)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function xi(){var f,g,b,w,a,l,$=c*77+44,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=fn(),b!==e)for(;b!==e;)g.push(b),b=fn();else g=e;g!==e&&(te=f,g=Ja(g)),f=g}return S[$]={nextPos:c,result:f},f}function fn(){var f,g=c*77+45,b=S[g];return b?(c=b.nextPos,b.result):(f=gu(),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(Os))),S[g]={nextPos:c,result:f},f)}function gu(){var f,g,b,w=c*77+46,a=S[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=nr,c++):(g=e,i===0&&D(Oa)),g!==e?(b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Dn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),S[w]={nextPos:c,result:f},f)}function cn(){var f,g,b,w,a,l,$=c*77+47,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===34?(g=re,c++):(g=e,i===0&&D(Qs)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Qs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Qn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Za(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=re,c++):(l=e,i===0&&D(Qs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Qn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Za(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=re,c++):(w=e,i===0&&D(Qs)),w!==e?(te=f,f=Qa(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=ce,c++):(g=e,i===0&&D(Xs)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(Xs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Xn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Xa(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(Xs)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Xn(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=Xa(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=ce,c++):(w=e,i===0&&D(Xs)),w!==e?(te=f,f=Wl(b)):(c=f,f=e)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Qn(){var f,g,b=c*77+48,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xe?(g=xe,c+=2):(g=e,i===0&&D(al)),g!==e&&(te=f,g=Gl()),f=g,S[b]={nextPos:c,result:f},f)}function Xn(){var f,g,b=c*77+49,w=S[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===pe?(g=pe,c+=2):(g=e,i===0&&D(Ys)),g!==e&&(te=f,g=Ya()),f=g,S[b]={nextPos:c,result:f},f)}function Yn(){var f,g=c*77+50,b=S[g];return b?(c=b.nextPos,b.result):(f=hn(),f===e&&(f=ea()),S[g]={nextPos:c,result:f},f)}function hn(){var f,g,b,w,a,l,$,p=c*77+51,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(w=[],a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(Zs)),a!==e){if(l=[],$=t.charAt(c),ct.test($)?c++:($=e,i===0&&D(br)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ct.test($)?c++:($=e,i===0&&D(br));else l=e;l!==e?(te=f,f=Jl()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),ct.test(b)?c++:(b=e,i===0&&D(br)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(Zs)),w!==e){if(a=[],l=t.charAt(c),ct.test(l)?c++:(l=e,i===0&&D(br)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ct.test(l)?c++:(l=e,i===0&&D(br));else a=e;a!==e?(te=f,f=ei()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return S[p]={nextPos:c,result:f},f}function ea(){var f,g,b,w,a,l=c*77+52,$=S[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),Pt.test(b)?c++:(b=e,i===0&&D(Ts)),b!==e){if(w=[],a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ct.test(a)?c++:(a=e,i===0&&D(br));else w=e;w!==e?(te=f,f=ti()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),_t.test(g)?c++:(g=e,i===0&&D(fs)),g===e&&(g=null),b=t.charAt(c),ct.test(b)?c++:(b=e,i===0&&D(br)),b!==e?(te=f,f=Zl()):(c=f,f=e)),S[l]={nextPos:c,result:f},f}function pn(){var f,g=c*77+53,b=S[g];return b?(c=b.nextPos,b.result):(f=bi(),f===e&&(f=ta()),S[g]={nextPos:c,result:f},f)}function bi(){var f,g,b,w,a=c*77+54,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ne?(g=Ne,c+=4):(g=e,i===0&&D(en)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ri()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function ta(){var f,g,b,w,a=c*77+55,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(tn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Ql()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function ra(){var f,g,b,w,a=c*77+56,l=S[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(rn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ot)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Xl()):(c=f,f=e)):(c=f,f=e),S[a]={nextPos:c,result:f},f)}function sa(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+57,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=si(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=f,f=Yl(w)):(c=f,f=e)}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function Ai(){var f,g,b,w,a,l,$,p,s,u,d=c*77+58,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=ni(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=eu(w)):(c=f,f=e)}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,p=c*77+59,s=S[p];if(s)return c=s.nextPos,s.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=tu(g,b)}else c=f,f=e;return S[p]={nextPos:c,result:f},f}function aa(){var f,g,b,w,a,l,$=c*77+60,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=na(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=na(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=na(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ai(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function ia(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_,A,E,I=c*77+61,U=S[I];if(U)return c=U.nextPos,U.result;if(f=c,t.charCodeAt(c)===64?(g=Me,c++):(g=e,i===0&&D(sn)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Ht)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=aa(),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=O,c++):(u=e,i===0&&D(Wr)),u!==e){for(d=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=he,c++):(x=e,i===0&&D(nt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?d=_:(c=d,d=e)}else c=d,d=e;for(d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=q,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=bs(),_===e&&(_=null),A=[],E=k();E!==e;)A.push(E),E=k();t.charCodeAt(c)===125?(E=J,c++):(E=e,i===0&&D(ut)),E!==e?(te=f,f=ru(b,w,a,p,d,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[I]={nextPos:c,result:f},f}function du(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m=c*77+62,_=S[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=aa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=c,p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===58?(s=he,c++):(s=e,i===0&&D(nt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();d=wr(),d!==e?$=d:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],s=k();s!==e;)p.push(s),s=k();if(t.charCodeAt(c)===123?(s=q,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],d=k();d!==e;)u.push(d),d=k();for(d=bs(),d===e&&(d=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=J,c++):(x=e,i===0&&D(ut)),x!==e?(te=f,f=ii(w,$,d)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[m]={nextPos:c,result:f},f}function la(){var f,g,b,w,a,l,$,p,s,u,d=c*77+63,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(jn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Kn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=ee,c++):(p=e,i===0&&D(Sr)),p===e&&(p=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Kn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&D(Gr)),l!==e?(te=f,f=su(w)):(c=f,f=e)}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l,$,p,s,u,d,h,x,m,_=c*77+64,A=S[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Or(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=zn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=he,c++):(p=e,i===0&&D(nt)),p!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Or(),u!==e){for(d=[],h=k();h!==e;)d.push(h),h=k();for(h=t.charAt(c),ks.test(h)?c++:(h=e,i===0&&D(cs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=zn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=J,c++):(a=e,i===0&&D(ut)),a!==e?(te=f,f=nu(w)):(c=f,f=e)}else c=f,f=e;return S[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=S[g];return b?(c=b.nextPos,b.result):(f=yu(),f===e&&(f=_i()),S[g]={nextPos:c,result:f},f)}function yu(){var f,g,b,w,a,l,$,p,s,u,d=c*77+66,h=S[d];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Is)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=oa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=O,c++):(l=e,i===0&&D(Wr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===ar?(p=ar,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=f,f=au(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return S[d]={nextPos:c,result:f},f}function oa(){var f,g,b,w,a,l,$=c*77+67,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Cs(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Cs(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=li(g,b)}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a,l,$,p,s=c*77+68,u=S[s];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=Je,c++):(w=e,i===0&&D(Da)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],p=De();p!==e;)$.push(p),p=De();t.charCodeAt(c)===62?(p=st,c++):(p=e,i===0&&D(er)),p!==e?(te=f,f=iu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=ui(g)),f=g),S[s]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=S[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),us.test(g)?c++:(g=e,i===0&&D(La)),g!==e){for(b=[],w=t.charAt(c),ss.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),ss.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=oi()}else c=f,f=e;return S[a]={nextPos:c,result:f},f}function wu(){var f,g,b,w,a,l,$=c*77+70,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=he,c++):(a=e,i===0&&D(nt)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=lu()}else c=f,f=e;return S[$]={nextPos:c,result:f},f}function Cs(){var f,g,b,w,a,l=c*77+71,$=S[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=ee,c++):(b=e,i===0&&D(Sr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return S[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,p=S[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=q,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=bs(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=J,c++):(l=e,i===0&&D(ut)),l!==e?(te=f,f=fi(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=As()),S[$]={nextPos:c,result:f},f}function We(){var f,g=c*77+73,b=S[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(il)),f===e&&(f=t.charAt(c),bt.test(f)?c++:(f=e,i===0&&D(nn))),S[g]={nextPos:c,result:f},f)}function Ci(){var f,g,b=c*77+74,w=S[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=We()),S[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=S[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(ll)),S[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=S[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),xn.test(f)?c++:(f=e,i===0&&D(js)),S[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=Y();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Jr=y(),r.peg$library)return{peg$result:Jr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:an,peg$maxFailPos:yr};if(Jr!==e&&c===t.length)return Jr;throw Jr!==e&&c<t.length&&D(K()),ge(an,yr<t.length?t.charAt(yr):null,yr<t.length?le(yr,yr+1):le(yr,yr))}const n1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function a1(t){return n1.includes(t.type)}function zy(t){return"chain"in t&&t.chain!==null}function i1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function l1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function u1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Et(e.expr,r);break}case"return":{e.expr=Et(e.expr,r);break}case"each":{e.items=Et(e.items,r),e.for=Et(e.for,r);break}case"for":{e.from!=null&&(e.from=Et(e.from,r)),e.to!=null&&(e.to=Et(e.to,r)),e.times!=null&&(e.times=Et(e.times,r)),e.for=Et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Et(e.expr,r),e.dest=Et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Et(e.operands[n],r);break}case"not":{e.expr=Et(e.expr,r);break}case"if":{e.cond=Et(e.cond,r),e.then=Et(e.then,r);for(const n of e.elseif)n.cond=Et(n.cond,r),n.then=Et(n.then,r);e.else!=null&&(e.else=Et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Et(e.children[n],r);break}case"match":{e.about=Et(e.about,r);for(const n of e.qs)n.q=Et(n.q,r),n.a=Et(n.a,r);e.default!=null&&(e.default=Et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"exists":{e.identifier=Et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Et(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"indexChain":{e.index=Et(e.index,r);break}case"call":{e.target=Et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"index":{e.target=Et(e.target,r),e.index=Et(e.index,r);break}case"prop":{e.target=Et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Et(e.members[n],r);break}case"or":case"and":{e.left=Et(e.left,r),e.right=Et(e.right,r);break}}if(zy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Et(e.chain[n],r);return e}const ap=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function ip(t){throw new sf(`Reserved word "${t}" cannot be used as variable name.`)}function o1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{ap.includes(t.name)&&ip(t.name);break}case"meta":{t.name!=null&&ap.includes(t.name)&&ip(t.name);break}case"fn":{for(const r of t.args)ap.includes(r.name)&&ip(r.name);break}}return t}function f1(t){for(const r of t)Et(r,o1);return t}function nd(t){return{type:"simple",name:t}}function c1(t,r){return{type:"generic",name:t,inners:r}}function h1(t,r){return{type:"fn",args:t,result:r}}function Kc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Kc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Kc(n)).join(", "),e=Kc(t.result);return`@(${r}) { ${e} }`}}}function Ff(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return nd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ff(t.inner):r=nd("any"),c1(t.name,[r])}}throw new sf(`Unknown type: '${Kc(t)}'`)}else{const r=t.args.map(e=>Ff(e));return h1(r,Ff(t.result))}}function p1(t){switch(t.type){case"def":{t.varType!=null&&Ff(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ff(r.argType);t.retType!=null&&Ff(t.retType);break}}return t}function v1(t){for(const r of t)Et(r,p1);return t}function zc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=zc(n.expr.children)),r.push(n);else{if(e.length>0)throw new sf("invalid attribute.");switch(n.type){case"fn":{n.children=zc(n.children);break}case"block":{n.statements=zc(n.statements);break}}r.push(n)}if(e.length>0)throw new sf("invalid attribute.");return r}function g1(t){if(a1(t)&&zy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=i1(n,v.args,v.loc);break}case"indexChain":{n=l1(n,v.index,v.loc);break}case"propChain":{n=u1(n,v.name,v.loc);break}}return n}return t}function d1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],g1);return t}function Vc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Vc(t,r,e);{const{left:n,right:v,info:y}=t;return Vc(n,Vy(v,r,e),y)}}function jo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[jo(t.left),jo(t.right)]}}const y1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:jo(t.left),right:jo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:jo(t.left),right:jo(t.right)}),priority:3}};function w1(t){const r=t.operators.map(n=>{const v=y1[n];if(v==null)throw new sf(`No such operator: ${n}.`);return v});let e=Vc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Vy(e,t.operands[2+n],r[1+n]);return jo(e)}function m1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],e=>e.type==="infix"?w1(e):e);return t}var Iu;let $1=(Iu=class{constructor(){ve(this,"plugins");this.plugins={validate:[f1,v1],transform:[zc,d1,m1]}}static parse(r){return Iu.instance==null&&(Iu.instance=new Iu),Iu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=sd(r,{startRule:"Preprocess"});e=sd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new sf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new sf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},ve(Iu,"instance"),Iu);const x1="0.18.0",b1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Qp=[],Zf=null;function A1(t){return Qp=$1.parse(t),JSON.stringify(Qp,null,"	")}async function _1(t){Zf==null||Zf.abort(),Zf=new Fn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Gp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Gp(e.val,!0),print:!1});break}}});try{await Zf.exec(Qp)}catch(r){t.err(r)}}const C1=Object.freeze(Object.defineProperty({__proto__:null,exec:_1,parse:A1,samples:b1,version:x1},Symbol.toStringTag,{value:"Module"}));function gs(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let jh=class Wy extends Error{constructor(e,n){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Wy)}},P1=class extends jh{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},nf=class extends jh{constructor(e,n){super(e,n);ve(this,"name","Syntax")}},Rr=class extends jh{constructor(e,n){super(e,n);ve(this,"name","Runtime")}},ad=class extends Rr{constructor(r,e){super(r,e)}};var Ao=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Zu=class Gy{constructor(r=[],e,n){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Gy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Rr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const y=v.get(r);if(!y.isMutable)throw new Rr(`Cannot assign to an immutable variable ${r}.`);y.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ao([gs],Zu.prototype,"log",null);Ao([gs],Zu.prototype,"onUpdated",null);Ao([gs],Zu.prototype,"createChildScope",null);Ao([gs],Zu.prototype,"get",null);Ao([gs],Zu.prototype,"exists",null);Ao([gs],Zu.prototype,"getAll",null);Ao([gs],Zu.prototype,"add",null);Ao([gs],Zu.prototype,"assign",null);const or={type:"null"},Li={type:"bool",value:!0},ki={type:"bool",value:!1},Be=t=>({type:"num",value:t}),pr=t=>({type:"str",value:t}),Jo=t=>({type:"bool",value:t}),wh=t=>({type:"obj",value:t}),ws=t=>({type:"arr",value:t}),k1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),me=t=>({type:"fn",native:t}),M1=t=>({type:"return",value:t}),E1=()=>({type:"break",value:null}),S1=()=>({type:"continue",value:null}),N1=t=>t.type==="return"?t.value:t,Xp=(t,r)=>({type:"error",value:t,info:r});function Ni(t){if(t==null)throw new Rr("Expect anything, but got nothing.")}function pa(t){if(t==null)throw new Rr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Rr(`Expect boolean, but got ${t.type}.`)}function uo(t){if(t==null)throw new Rr("Expect function, but got nothing.");if(t.type!=="fn")throw new Rr(`Expect function, but got ${t.type}.`)}function Ps(t){if(t==null)throw new Rr("Expect string, but got nothing.");if(t.type!=="str")throw new Rr(`Expect string, but got ${t.type}.`)}function He(t){if(t==null)throw new Rr("Expect number, but got nothing.");if(t.type!=="num")throw new Rr(`Expect number, but got ${t.type}.`)}function Eu(t){if(t==null)throw new Rr("Expect object, but got nothing.");if(t.type!=="obj")throw new Rr(`Expect object, but got ${t.type}.`)}function Of(t){if(t==null)throw new Rr("Expect array, but got nothing.");if(t.type!=="arr")throw new Rr(`Expect array, but got ${t.type}.`)}function lp(t){return t.type==="obj"}function id(t){return t.type==="arr"}function Yp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function ev(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>ev(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function tv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>tv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=tv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function rv(t){if(t===null)return or;if(typeof t=="boolean")return Jo(t);if(typeof t=="string")return pr(t);if(typeof t=="number")return Be(t);if(Array.isArray(t))return ws(t.map(r=>rv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,rv(n));return wh(r)}return or}function Tf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(Tf(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,y]of t.value)n.push(`${v}: ${Tf(y,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const F1={version:"0.17.0"},O1=F1.version,T1=new TextEncoder,I1=new TextDecoder,j1={help:pr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":pr(O1),"Core:ai":pr("kawaii"),"Core:not":me(([t])=>(pa(t),t.value?ki:Li)),"Core:eq":me(([t,r])=>(Ni(t),Ni(r),Yp(t,r)?Li:ki)),"Core:neq":me(([t,r])=>(Ni(t),Ni(r),Yp(t,r)?ki:Li)),"Core:and":me(([t,r])=>(pa(t),t.value?(pa(r),r.value?Li:ki):ki)),"Core:or":me(([t,r])=>(pa(t),t.value?Li:(pa(r),r.value?Li:ki))),"Core:add":me(([t,r])=>(He(t),He(r),Be(t.value+r.value))),"Core:sub":me(([t,r])=>(He(t),He(r),Be(t.value-r.value))),"Core:mul":me(([t,r])=>(He(t),He(r),Be(t.value*r.value))),"Core:pow":me(([t,r])=>{He(t),He(r);const e=t.value**r.value;if(isNaN(e))throw new Rr("Invalid operation.");return Be(e)}),"Core:div":me(([t,r])=>{He(t),He(r);const e=t.value/r.value;if(isNaN(e))throw new Rr("Invalid operation.");return Be(e)}),"Core:mod":me(([t,r])=>(He(t),He(r),Be(t.value%r.value))),"Core:gt":me(([t,r])=>(He(t),He(r),t.value>r.value?Li:ki)),"Core:lt":me(([t,r])=>(He(t),He(r),t.value<r.value?Li:ki)),"Core:gteq":me(([t,r])=>(He(t),He(r),t.value>=r.value?Li:ki)),"Core:lteq":me(([t,r])=>(He(t),He(r),t.value<=r.value?Li:ki)),"Core:type":me(([t])=>(Ni(t),pr(t.type))),"Core:to_str":me(([t])=>(Ni(t),pr(Tf(t)))),"Core:range":me(([t,r])=>(He(t),He(r),t.value<r.value?ws(Array.from({length:r.value-t.value+1},(e,n)=>Be(n+t.value))):t.value>r.value?ws(Array.from({length:t.value-r.value+1},(e,n)=>Be(t.value-n))):ws([t]))),"Core:sleep":me(async([t])=>(He(t),await new Promise(r=>setTimeout(r,t.value)),or)),"Util:uuid":me(()=>pr(bc())),"Json:stringify":me(([t])=>(Ni(t),pr(JSON.stringify(tv(t))))),"Json:parse":me(([t])=>{Ps(t);try{return rv(JSON.parse(t.value))}catch{return Xp("not_json")}}),"Json:parsable":me(([t])=>{Ps(t);try{JSON.parse(t.value)}catch{return Jo(!1)}return Jo(!0)}),"Date:now":me(()=>Be(Date.now())),"Date:year":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":me(([t])=>(t&&He(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":me(([t])=>(Ps(t),Be(new Date(t.value).getTime()))),"Math:Infinity":Be(1/0),"Math:E":Be(Math.E),"Math:LN2":Be(Math.LN2),"Math:LN10":Be(Math.LN10),"Math:LOG2E":Be(Math.LOG2E),"Math:LOG10E":Be(Math.LOG10E),"Math:PI":Be(Math.PI),"Math:SQRT1_2":Be(Math.SQRT1_2),"Math:SQRT2":Be(Math.SQRT2),"Math:abs":me(([t])=>(He(t),Be(Math.abs(t.value)))),"Math:acos":me(([t])=>(He(t),Be(Math.acos(t.value)))),"Math:acosh":me(([t])=>(He(t),Be(Math.acosh(t.value)))),"Math:asin":me(([t])=>(He(t),Be(Math.asin(t.value)))),"Math:asinh":me(([t])=>(He(t),Be(Math.asinh(t.value)))),"Math:atan":me(([t])=>(He(t),Be(Math.atan(t.value)))),"Math:atanh":me(([t])=>(He(t),Be(Math.atanh(t.value)))),"Math:atan2":me(([t,r])=>(He(t),He(r),Be(Math.atan2(t.value,r.value)))),"Math:cbrt":me(([t])=>(He(t),Be(Math.cbrt(t.value)))),"Math:ceil":me(([t])=>(He(t),Be(Math.ceil(t.value)))),"Math:clz32":me(([t])=>(He(t),Be(Math.clz32(t.value)))),"Math:cos":me(([t])=>(He(t),Be(Math.cos(t.value)))),"Math:cosh":me(([t])=>(He(t),Be(Math.cosh(t.value)))),"Math:exp":me(([t])=>(He(t),Be(Math.exp(t.value)))),"Math:expm1":me(([t])=>(He(t),Be(Math.expm1(t.value)))),"Math:floor":me(([t])=>(He(t),Be(Math.floor(t.value)))),"Math:fround":me(([t])=>(He(t),Be(Math.fround(t.value)))),"Math:hypot":me(([t])=>{Of(t);const r=[];for(const e of t.value)He(e),r.push(e.value);return Be(Math.hypot(...r))}),"Math:imul":me(([t,r])=>(He(t),He(r),Be(Math.imul(t.value,r.value)))),"Math:log":me(([t])=>(He(t),Be(Math.log(t.value)))),"Math:log1p":me(([t])=>(He(t),Be(Math.log1p(t.value)))),"Math:log10":me(([t])=>(He(t),Be(Math.log10(t.value)))),"Math:log2":me(([t])=>(He(t),Be(Math.log2(t.value)))),"Math:max":me(([t,r])=>(He(t),He(r),Be(Math.max(t.value,r.value)))),"Math:min":me(([t,r])=>(He(t),He(r),Be(Math.min(t.value,r.value)))),"Math:pow":me(([t,r])=>(He(t),He(r),Be(Math.pow(t.value,r.value)))),"Math:round":me(([t])=>(He(t),Be(Math.round(t.value)))),"Math:sign":me(([t])=>(He(t),Be(Math.sign(t.value)))),"Math:sin":me(([t])=>(He(t),Be(Math.sin(t.value)))),"Math:sinh":me(([t])=>(He(t),Be(Math.sinh(t.value)))),"Math:sqrt":me(([t])=>{He(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Rr("Invalid operation.");return Be(r)}),"Math:tan":me(([t])=>(He(t),Be(Math.tan(t.value)))),"Math:tanh":me(([t])=>(He(t),Be(Math.tanh(t.value)))),"Math:trunc":me(([t])=>(He(t),Be(Math.trunc(t.value)))),"Math:rnd":me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Be(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Be(Math.random())),"Math:gen_rng":me(([t])=>{if(Ni(t),t.type!=="num"&&t.type!=="str")return or;const r=ff(t.value.toString());return me(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Be(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Be(r()))}),"Num:to_hex":me(([t])=>(He(t),pr(t.value.toString(16)))),"Num:from_hex":me(([t])=>(Ps(t),Be(parseInt(t.value,16)))),"Str:lf":pr(`
`),"Str:lt":me(([t,r])=>(Ps(t),Ps(r),t.value<r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:gt":me(([t,r])=>(Ps(t),Ps(r),t.value>r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:from_codepoint":me(([t])=>(He(t),pr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":me(([t])=>(Of(t),pr(Array.from(t.value.map(r=>(He(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":me(([t])=>(Of(t),pr(I1.decode(Uint8Array.from(t.value.map(r=>(He(r),r.value))))))),"Obj:keys":me(([t])=>(Eu(t),ws(Array.from(t.value.keys()).map(r=>pr(r))))),"Obj:vals":me(([t])=>(Eu(t),ws(Array.from(t.value.values())))),"Obj:kvs":me(([t])=>(Eu(t),ws(Array.from(t.value.entries()).map(([r,e])=>ws([pr(r),e]))))),"Obj:get":me(([t,r])=>(Eu(t),Ps(r),t.value.get(r.value)??or)),"Obj:set":me(([t,r,e])=>(Eu(t),Ps(r),Ni(e),t.value.set(r.value,e),or)),"Obj:has":me(([t,r])=>(Eu(t),Ps(r),Jo(t.value.has(r.value)))),"Obj:copy":me(([t])=>(Eu(t),wh(new Map(t.value)))),"Obj:merge":me(([t,r])=>(Eu(t),Eu(r),wh(new Map([...t.value,...r.value])))),"Error:create":me(([t,r])=>(Ps(t),Xp(t.value,r))),"Async:interval":me(async([t,r,e],n)=>{He(t),uo(r),e&&(pa(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),me(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":me(async([t,r],e)=>{He(t),uo(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),me(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},ld={num:{to_str:t=>me(async(r,e)=>pr(t.value.toString()))},str:{to_num:t=>me(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?or:Be(n)}),to_arr:t=>me(async(r,e)=>ws(Gs(t.value).map(n=>pr(n)))),to_unicode_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>pr(n)))),to_unicode_codepoint_arr:t=>me(async(r,e)=>ws([...t.value].map(n=>{const v=n.codePointAt(0);return Be(v??n.charCodeAt(0))}))),to_char_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>pr(n)))),to_charcode_arr:t=>me(async(r,e)=>ws(t.value.split("").map(n=>Be(n.charCodeAt(0))))),to_utf8_byte_arr:t=>me(async(r,e)=>ws(Array.from(T1.encode(t.value)).map(n=>Be(n)))),len:t=>Be(hf(t.value)),replace:t=>me(async([r,e],n)=>(Ps(r),Ps(e),pr(t.value.split(r.value).join(e.value)))),index_of:t=>me(async([r],e)=>(Ps(r),Be(vf(t.value,r.value)))),incl:t=>me(async([r],e)=>(Ps(r),t.value.includes(r.value)?Li:ki)),trim:t=>me(async(r,e)=>pr(t.value.trim())),upper:t=>me(async(r,e)=>pr(t.value.toUpperCase())),lower:t=>me(async(r,e)=>pr(t.value.toLowerCase())),split:t=>me(async([r],e)=>(r&&Ps(r),ws(r?t.value.split(r?r.value:"").map(n=>pr(n)):Gs(t.value).map(n=>pr(n))))),slice:t=>me(async([r,e],n)=>(He(r),He(e),pr(pf(t.value,r.value,e.value)))),pick:t=>me(async([r],e)=>{He(r);const v=Gs(t.value)[r.value];return v?pr(v):or}),charcode_at:t=>me(([r],e)=>{He(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?or:Be(n)}),codepoint_at:t=>me(([r],e)=>{He(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?or:Be(n)})},arr:{len:t=>Be(t.value.length),push:t=>me(async([r],e)=>(Ni(r),t.value.push(r),t)),unshift:t=>me(async([r],e)=>(Ni(r),t.value.unshift(r),t)),pop:t=>me(async(r,e)=>t.value.pop()??or),shift:t=>me(async(r,e)=>t.value.shift()??or),concat:t=>me(async([r],e)=>(Of(r),ws(t.value.concat(r.value)))),slice:t=>me(async([r,e],n)=>(He(r),He(e),ws(t.value.slice(r.value,e.value)))),join:t=>me(async([r],e)=>(r&&Ps(r),pr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>me(async([r],e)=>{uo(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,Be(y)]));return ws(await Promise.all(n))}),filter:t=>me(async([r],e)=>{uo(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,Be(v)]);pa(C),C.value&&n.push(y)}return ws(n)}),reduce:t=>me(async([r,e],n)=>{uo(r);const v=e!=null;let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,Be(C)])}return y}),find:t=>me(async([r],e)=>{uo(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Be(n)]);if(pa(y),y.value)return v}return or}),incl:t=>me(async([r],e)=>(Ni(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?ki:(v=>v.value.map(y=>y.type==="str"||y.type==="num"||y.type==="bool"?y.value:y.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Li:ki)),reverse:t=>me(async(r,e)=>(t.value.reverse(),or)),copy:t=>me(async(r,e)=>ws([...t.value])),sort:t=>me(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=await n(y.slice(0,P),C),N=await n(y.slice(P),C);return v(M,N,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);He(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return uo(r),Of(t),t.value=await n(t.value,r),t})},error:{name:t=>pr(t.value),info:t=>t.info??or}};function R1(t,r){if(Object.hasOwn(ld,t.type)){const e=ld[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Rr(`No such prop (${r}) in ${t.type}.`)}else throw new Rr(`Cannot read prop of ${t.type}. (reading ${r})`)}const D1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var $a=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const Jy=300,L1=Jy-1;let On=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const n={print:me(([v])=>{Ni(v),this.opts.out&&this.opts.out(v)}),readline:me(async v=>{const y=v[0];if(Ps(y),this.opts.in==null)return or;const C=await this.opts.in(y.value);return pr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...j1,...n}).map(([v,y])=>[v,D1.const(y)])),this.scope=new Zu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),Xp("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof jh?this.opts.err(r):this.opts.err(new P1(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??or;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],{isMutable:!0,value:e[y]});const v=r.scope.createChildScope(n);return N1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return or;if(this.stepCount%Jy===L1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Rr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);uo(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(pa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(pa(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return or}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(Yp(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):or}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return or}case"for":{if(r.times){const n=await this._eval(r.times,e);He(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);He(n),He(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Be(y)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return or}case"each":{const n=await this._eval(r.items,e);Of(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(y.type==="break")break;if(y.type==="return")return y}return or}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),or}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),or}case"addAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value+v.value)),or}case"subAssign":{const n=await this._eval(r.dest,e);He(n);const v=await this._eval(r.expr,e);return He(v),await this.assign(e,r.dest,Be(n.value-v.value)),or}case"null":return or;case"bool":return Jo(r.value);case"num":return Be(r.value);case"str":return pr(r.value);case"arr":return ws(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return wh(n)}case"prop":{const n=await this._eval(r.target,e);return lp(n)?n.value.has(r.name)?n.value.get(r.name):or:R1(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(id(n)){He(v);const y=n.value[v.value];if(y===void 0)throw new ad(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}else{if(lp(n))return Ps(v),n.value.has(v.value)?n.value.get(v.value):or;throw new Rr(`Cannot read prop (${Tf(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return pa(n),Jo(!n.value)}case"fn":return k1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Jo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);n+=Tf(y)}return pr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),M1(n)}case"break":return this.log("block:break",{scope:e.name}),E1();case"continue":return this.log("block:continue",{scope:e.name}),S1();case"ns":return or;case"meta":return or;case"and":{const n=await this._eval(r.left,e);if(pa(n),n.value){const v=await this._eval(r.right,e);return pa(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(pa(n),n.value)return n;{const v=await this._eval(r.right,e);return pa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=or;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),y=await this._eval(e.index,r);if(id(v)){if(He(y),v.value[y.value]===void 0)throw new ad(`Index out of range. index: ${y.value} max: ${v.value.length-1}`);v.value[y.value]=n}else if(lp(v))Ps(y),v.value.set(y.value,n);else throw new Rr(`Cannot read prop (${Tf(y)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Eu(v),v.value.set(e.name,n)}else throw new Rr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};$a([gs],On.prototype,"exec",null);$a([gs],On.prototype,"execFn",null);$a([gs],On.prototype,"execFnSimple",null);$a([gs],On.prototype,"handleError",null);$a([gs],On.prototype,"log",null);$a([gs],On.prototype,"collectNs",null);$a([gs],On.prototype,"collectNsMember",null);$a([gs],On.prototype,"_fn",null);$a([gs],On.prototype,"_eval",null);$a([gs],On.prototype,"_run",null);$a([gs],On.prototype,"registerAbortHandler",null);$a([gs],On.prototype,"unregisterAbortHandler",null);$a([gs],On.prototype,"abort",null);$a([gs],On.prototype,"assign",null);$a([gs],On,"collectMetadata",null);function H1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Zo(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Zo.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}H1(Zo,Error);function up(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Zo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=up("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+up("",v.column-1," ")+up("",H,"^")}else r+=`
 at `+C}return r};Zo.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function ud(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:un,Main:Zr},y=un,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",Wt="*",_r="^",zr="/",ar="%",Vr="!",ir="[",Cr=".",W="if",re="elif",ce="else",xe="match",pe="=>",Ne="eval",Ie="exists",Ae="`",Me='"',$e="'",Je='\\"',st="\\'",Ye="true",Qe="false",it="null",Ct=";",yt="@",_t="@(",Pt=`\r
`,ct=/^[A-Z0-9_:]/i,ks=/^[^`{]/,us=/^[{}`]/,ss=/^[+\-]/,bt=/^[1-9]/,Rt=/^[0-9]/,xn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,lr=/^[ \t]/,Ht=Ds(),Wr=ge("//",!1),In=ge("/*",!1),kt=ge("*/",!1),ut=ge("(",!1),Er=ge(")",!1),Gt=ge("::",!1),nt=ge("{",!1),Ut=ge("}",!1),ms=ge("###",!1),Bt=ge("let",!1),qt=ge(":",!1),Gr=ge("=",!1),Fa=ge("var",!1),Sr=ge("<:",!1),os=ge("#[",!1),Ns=ge("]",!1),ot=ge("each",!1),Ot=ge(",",!1),Js=ge("for",!1),Nr=ge("return",!1),Fr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=ge("loop",!1),Oa=ge("break",!1),Ji=ge("continue",!1),Zi=ge("+=",!1),Ta=ge("-=",!1),Ia=ge("\\",!1),Qi=ge("||",!1),Xi=ge("&&",!1),Yi=ge("==",!1),el=ge("!=",!1),jn=ge("<=",!1),Zs=ge(">=",!1),Rn=ge("<",!1),ja=ge(">",!1),tl=ge("+",!1),Ra=ge("-",!1),Fs=ge("*",!1),rl=ge("^",!1),sl=ge("/",!1),nl=ge("%",!1),$s=ge("!",!1),Os=ge("[",!1),Dn=ge(".",!1),Qs=ge("if",!1),Xs=ge("elif",!1),al=ge("else",!1),Ys=ge("match",!1),fs=ge("=>",!1),Ts=ge("eval",!1),br=ge("exists",!1),en=ge("`",!1),tn=tr(["`","{"],!0,!1),rn=tr(["{","}","`"],!1,!1),cs=ge('"',!1),sn=ge("'",!1),Is=ge('\\"',!1),Da=ge("\\'",!1),er=tr(["+","-"],!1,!1),La=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),il=ge("true",!1),nn=ge("false",!1),ll=ge("null",!1),js=ge(";",!1),ul=ge("@",!1),Ln=ge("@(",!1),ol=tr([["A","Z"],"_"],!1,!0),Ha=tr([["A","Z"],["0","9"],"_"],!1,!0),fl=ge(`\r
`,!1),cl=tr(["\r",`
`],!1,!1),Ua=tr([" ","	","\r",`
`],!1,!1),hl=tr([" ","	"],!1,!1),Ba=function(s){return s.join("")},pl=function(){return le()},qa=function(){return le()},vl=function(){return""},Ka=function(){return""},gl=function(s){return s??[]},Hn=function(s,u){return u},dl=function(s,u){return[s,...u]},Un=function(s,u){return u},yl=function(s,u){return[s,...u]},za=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},_l=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},Cl=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Va=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s,u){return p("for",{times:s,for:u})},Tl=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Bn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Wa=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Ga=function(s,u){return s.chain?{...s,chain:[...s.chain,...u]}:{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},qn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},Kl=function(s){return p("propChain",{name:s})},zl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ja=function(s,u){return{cond:s,then:u}},Za=function(s){return s},Qa=function(s,u,d){return{q:u,a:d}},Xa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Ya=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},ei=function(s){return s.join("")},ti=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ri=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},si=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},ni=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ai=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ii=function(){return p("null",{})},Kn=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},zn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},li=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},ui=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},oi=function(s){return s},lu=function(s){return p("arr",{value:s})},fi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},an=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},Jr=function(s){return p("block",{statements:s??[]})},o=0,Y=0,T=[{line:1,column:1}],j=0,At=[],F=0,K={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function le(){return t.substring(Y,o)}function D(){return ln(Y,o)}function uu(s,u){throw u=u!==void 0?u:ln(Y,o),bs(s,u)}function ge(s,u){return{type:"literal",text:s,ignoreCase:u}}function tr(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function ci(s){var u=T[s],d;if(u)return u;for(d=s-1;!T[d];)d--;for(u=T[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return T[s]=u,u}function ln(s,u,d){var h=ci(s),x=ci(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function R(s){o<j||(o>j&&(j=o,At=[]),At.push(s))}function bs(s,u){return new Zo(s,null,null,u)}function Vn(s,u,d){return new Zo(Zo.buildMessage(s,u),s,u,d)}function un(){var s,u,d,h=o*77+0,x=K[h];if(x)return o=x.nextPos,x.result;for(s=o,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ba(u),s=u,K[h]={nextPos:o,result:s},s}function As(){var s,u,d=o*77+1,h=K[d];return h?(o=h.nextPos,h.result):(s=o,u=hn(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=o,u=ta(),u!==e&&(Y=s,u=qa()),s=u,s===e&&(s=et(),s===e&&(t.length>o?(s=t.charAt(o),o++):(s=e,F===0&&R(Ht))))),K[d]={nextPos:o,result:s},s)}function et(){var s,u,d,h,x,m,_=o*77+2,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&R(Wr)),u!==e){for(d=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);Y=s,s=vl()}else o=s,s=e;if(s===e)if(s=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&R(In)),u!==e){for(d=[],h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===M?(h=M,o+=2):(h=e,F===0&&R(kt)),h!==e?(Y=s,s=Ka()):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Zr(){var s,u,d,h,x,m=o*77+3,_=K[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],d=l();d!==e;)u.push(d),d=l();for(d=on(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),K[m]={nextPos:o,result:s},s}function on(){var s,u,d,h,x,m,_,A,E=o*77+4,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=Xe(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(Y=h,h=Hn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(Y=h,h=Hn(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=dl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Or(){var s,u,d,h,x,m,_,A,E=o*77+5,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=hs(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=hs(),A!==e?(Y=h,h=Un(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=hs(),A!==e?(Y=h,h=Un(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=yl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Ar(){var s,u,d,h,x,m,_,A,E=o*77+6,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=_s(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=_s(),A!==e?(Y=h,h=za(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=_s(),A!==e?(Y=h,h=za(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=wl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Xe(){var s,u=o*77+7,d=K[u];return d?(o=d.nextPos,d.result):(s=pi(),s===e&&(s=ou(),s===e&&(s=_s())),K[u]={nextPos:o,result:s},s)}function hs(){var s,u=o*77+8,d=K[u];return d?(o=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=pi())),K[u]={nextPos:o,result:s},s)}function _s(){var s,u=o*77+9,d=K[u];return d?(o=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=fu(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Xr(),s===e&&(s=gi(),s===e&&(s=pu(),s===e&&(s=di(),s===e&&(s=Yr(),s===e&&(s=Wn(),s===e&&(s=Ve()))))))))))),K[u]={nextPos:o,result:s},s)}function Ve(){var s,u=o*77+10,d=K[u];return d?(o=d.nextPos,d.result):(s=yi(),s===e&&(s=Ls()),K[u]={nextPos:o,result:s},s)}function Ls(){var s,u=o*77+11,d=K[u];return d?(o=d.nextPos,d.result):(s=$i(),s===e&&(s=wu(),s===e&&(s=wi(),s===e&&(s=hi()))),K[u]={nextPos:o,result:s},s)}function hi(){var s,u,d,h,x,m,_=o*77+12,A=K[_];if(A)return o=A.nextPos,A.result;if(s=cn(),s===e&&(s=Qn(),s===e&&(s=Xn(),s===e&&(s=hn(),s===e&&(s=ta(),s===e&&(s=Ai(),s===e&&(s=ia(),s===e&&(s=ua(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=Jn(),s===e&&(s=Yn(),s===e))))))))))))if(s=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e?(Y=s,s=ml(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Qr(){var s,u=o*77+13,d=K[u];return d?(o=d.nextPos,d.result):(s=Ai(),s===e&&(s=ta(),s===e&&(s=ia(),s===e&&(s=Cs(),s===e&&(s=ur(),s===e&&(s=ua()))))),K[u]={nextPos:o,result:s},s)}function pi(){var s,u,d,h,x,m,_,A,E,I,U=o*77+14,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===H?(u=H,o+=2):(u=e,F===0&&R(Gt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=q,o++):(m=e,F===0&&R(nt)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Or(),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();t.charCodeAt(o)===125?(I=J,o++):(I=e,F===0&&R(Ut)),I!==e?(Y=s,s=$l(h,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function ou(){var s,u,d,h,x,m,_=o*77+15,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,3)===we?(u=we,o+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Qr(),m!==e?(Y=s,s=xl(h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===we?(u=we,o+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Qr(),h!==e?(Y=s,s=bl(h)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function vi(){var s,u,d,h,x,m,_,A,E,I=o*77+16,U=K[I];if(U)return o=U.nextPos,U.result;if(s=o,t.substr(o,3)===ue?(u=ue,o+=3):(u=e,F===0&&R(Bt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=he,o++):(_=e,F===0&&R(qt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=We(),E!==e?x=E:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=Ee,o++):(_=e,F===0&&R(Gr)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=Ve(),E!==e?(Y=s,s=Al(h,x,E)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===G?(u=G,o+=3):(u=e,F===0&&R(Fa)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=he,o++):(_=e,F===0&&R(qt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=We(),E!==e?x=E:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=Ee,o++):(_=e,F===0&&R(Gr)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=Ve(),E!==e?(Y=s,s=_l(h,x,E)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[I]={nextPos:o,result:s},s}function fu(){var s,u,d,h,x=o*77+17,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,2)===V?(u=V,o+=2):(u=e,F===0&&R(Sr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=Cl(h)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function cu(){var s,u,d,h,x,m,_,A=o*77+18,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,t.substr(o,2)===Q?(u=Q,o+=2):(u=e,F===0&&R(os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=Qr(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=X,o++):(_=e,F===0&&R(Ns)),_!==e?(Y=s,s=Pl(h,x)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[A]={nextPos:o,result:s},s}function Xr(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+19,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&R(ot)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(o,3)===ue?(x=ue,o+=3):(x=e,F===0&&R(Bt)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();for(t.charCodeAt(o)===44?(E=ee,o++):(E=e,F===0&&R(Ot)),E===e&&(E=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(o)===41?(z=O,o++):(z=e,F===0&&R(Er)),z!==e){for(se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Oe=b(),Oe!==e?(Y=s,s=kl(_,U,Oe)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&R(ot)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(o,3)===ue?(h=ue,o+=3):(h=e,F===0&&R(Bt)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();if(I=Ve(),I!==e){if(U=[],z=l(),z!==e)for(;z!==e;)U.push(z),z=l();else U=e;U!==e?(z=b(),z!==e?(Y=s,s=Ml(m,I,z)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function gi(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt=o*77+20,dt=K[gt];if(dt)return o=dt.nextPos,dt.result;if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(o,3)===ue?(x=ue,o+=3):(x=e,F===0&&R(Bt)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();if(E=o,t.charCodeAt(o)===61?(I=Ee,o++):(I=e,F===0&&R(Gr)),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();z=Ve(),z!==e?(Y=E,E=El(_,z)):(o=E,E=e)}else o=E,E=e;for(E===e&&(E=null),t.charCodeAt(o)===44?(I=ee,o++):(I=e,F===0&&R(Ot)),I===e&&(I=null),U=[],z=l();z!==e;)U.push(z),z=l();if(z=Ve(),z!==e)if(t.charCodeAt(o)===41?(se=O,o++):(se=e,F===0&&R(Er)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();de=b(),de!==e?(Y=s,s=Sl(_,E,z,de)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(o,3)===ue?(h=ue,o+=3):(h=e,F===0&&R(Bt)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(E=Ee,o++):(E=e,F===0&&R(Gr)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(E=ee,o++):(E=e,F===0&&R(Ot)),E===e&&(E=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(Y=s,s=Va(m,A,U,se)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Ol(h,m)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e}}return K[gt]={nextPos:o,result:s},s}function hu(){var s,u,d,h,x,m=o*77+21,_=K[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&R(Nr)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Tl(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[m]={nextPos:o,result:s},s}function pu(){var s,u,d,h,x,m,_,A,E=o*77+22,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Se?(u=Se,o+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===123?(h=q,o++):(h=e,F===0&&R(nt)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Ar(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=J,o++):(A=e,F===0&&R(Ut)),A!==e?(Y=s,s=Il(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function di(){var s,u,d,h,x=o*77+23,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Te?(u=Te,o+=5):(u=e,F===0&&R(Oa)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=jl()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function Yr(){var s,u,d,h,x=o*77+24,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,8)===Pe?(u=Pe,o+=8):(u=e,F===0&&R(Ji)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=Bn()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function Wn(){var s,u,d,h,x,m,_=o*77+25,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(o)===61?(h=Ee,o++):(h=e,F===0&&R(Gr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function yi(){var s,u,d,h,x,m,_,A,E=o*77+26,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=Ls(),u!==e){for(d=[],h=o,x=[],m=es();m!==e;)x.push(m),m=es();if(m=Gn(),m!==e){for(_=[],A=es();A!==e;)_.push(A),A=es();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=o,x=[],m=es();m!==e;)x.push(m),m=es();if(m=Gn(),m!==e){for(_=[],A=es();A!==e;)_.push(A),A=es();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(o=h,h=e)}else o=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(o=s,s=e)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function es(){var s,u,d,h=o*77+27,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=nr,o++):(u=e,F===0&&R(Ia)),u!==e?(d=w(),d!==e?(u=[u,d],s=u):(o=s,s=e)):(o=s,s=e),s===e&&(s=$()),K[h]={nextPos:o,result:s},s)}function Gn(){var s,u,d=o*77+28,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===xt?(u=xt,o+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&R(jn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&R(Zs)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&R(Rn)),u===e&&(t.charCodeAt(o)===62?(u=Lr,o++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(o)===45?(u=Mr,o++):(u=e,F===0&&R(Ra)),u===e&&(t.charCodeAt(o)===42?(u=Wt,o++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(o)===47?(u=zr,o++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(o)===37?(u=ar,o++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,K[d]={nextPos:o,result:s},s)}function Jn(){var s,u,d,h=o*77+29,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===33?(u=Vr,o++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function wi(){var s,u,d,h,x=o*77+30,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,u=hi(),u!==e){if(d=[],h=Zn(),h===e&&(h=mi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Zn(),h===e&&(h=mi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Ga(u,d)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function Zn(){var s,u,d,h,x,m,_=o*77+31,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e?(Y=s,s=Ul(h)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function vu(){var s,u,d,h,x,m,_=o*77+32,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ve(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=qn(u,m)):(o=h,h=e)):(o=h,h=e);Y=s,s=Bl(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function mi(){var s,u,d,h,x,m,_=o*77+33,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Hs(){var s,u,d,h=o*77+34,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===46?(u=Cr,o++):(u=e,F===0&&R(Dn)),u!==e?(d=ne(),d!==e?(Y=s,s=Kl(d)):(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function $i(){var s,u,d,h,x,m,_,A,E,I,U=o*77+35,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===W?(u=W,o+=2):(u=e,F===0&&R(Qs)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],E=l(),E!==e)for(;E!==e;)A.push(E),E=l();else A=e;if(A!==e?(E=xi(),E!==e?_=E:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;E!==e?(I=gu(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),Y=s,s=zl(h,m,_,A)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function xi(){var s,u,d,h,x,m,_=o*77+36,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=fn(),u!==e){for(d=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=fn(),m!==e?h=m:(o=h,h=e);h!==e;){for(d.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=fn(),m!==e?h=m:(o=h,h=e)}Y=s,s=Vl(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function fn(){var s,u,d,h,x,m,_,A=o*77+37,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&R(Xs)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(Y=s,s=Ja(x,_)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e;return K[A]={nextPos:o,result:s},s}function gu(){var s,u,d,h,x,m=o*77+38,_=K[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,4)===ce?(u=ce,o+=4):(u=e,F===0&&R(al)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Za(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[m]={nextPos:o,result:s},s}function cn(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt,dt,mu=o*77+39,fa=K[mu];if(fa)return o=fa.nextPos,fa.result;if(s=o,t.substr(o,5)===xe?(u=xe,o+=5):(u=e,F===0&&R(Ys)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=q,o++):(_=e,F===0&&R(nt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();if(E=[],I=o,U=Ve(),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();Y=I,I=Qa(x,U,de)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(E.push(I),I=o,U=Ve(),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();Y=I,I=Qa(x,U,de)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else E=e;if(E!==e){if(I=o,t.charCodeAt(o)===42?(U=Wt,o++):(U=e,F===0&&R(Fs)),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=de}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),U=[],z=l();z!==e;)U.push(z),z=l();t.charCodeAt(o)===125?(z=J,o++):(z=e,F===0&&R(Ut)),z!==e?(Y=s,s=Xa(x,E,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;else o=s,s=e;return K[mu]={nextPos:o,result:s},s}function Qn(){var s,u,d,h,x,m,_,A,E=o*77+40,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Ne?(u=Ne,o+=4):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===123?(h=q,o++):(h=e,F===0&&R(nt)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Ar(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=J,o++):(A=e,F===0&&R(Ut)),A!==e?(Y=s,s=Wl(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Xn(){var s,u,d,h,x=o*77+41,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,6)===Ie?(u=Ie,o+=6):(u=e,F===0&&R(br)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Yn(),h!==e?(Y=s,s=Gl(h)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function Yn(){var s,u,d=o*77+42,h=K[d];return h?(o=h.nextPos,h.result):(s=o,u=f(),u!==e&&(Y=s,u=Ya(u)),s=u,K[d]={nextPos:o,result:s},s)}function hn(){var s,u,d,h,x,m,_=o*77+43,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===96?(u=Ae,o++):(u=e,F===0&&R(en)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ae,o++):(m=e,F===0&&R(en)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ea(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ae,o++):(m=e,F===0&&R(en)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ea(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Ae,o++):(h=e,F===0&&R(en)),h!==e?(Y=s,s=Jl(d)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function ea(){var s,u,d,h,x,m,_=o*77+44,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=J,o++):(m=e,F===0&&R(Ut)),m!==e?s=h:(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,u=[],d=pn(),d!==e)for(;d!==e;)u.push(d),d=pn();else u=e;u!==e&&(Y=s,u=ei(u)),s=u}return K[_]={nextPos:o,result:s},s}function pn(){var s,u=o*77+45,d=K[u];return d?(o=d.nextPos,d.result):(s=bi(),s===e&&(ks.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(tn))),K[u]={nextPos:o,result:s},s)}function bi(){var s,u,d,h=o*77+46,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=nr,o++):(u=e,F===0&&R(Ia)),u!==e?(us.test(t.charAt(o))?(d=t.charAt(o),o++):(d=e,F===0&&R(rn)),d!==e?s=d:(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function ta(){var s,u,d,h,x,m,_=o*77+47,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===34?(u=Me,o++):(u=e,F===0&&R(cs)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Me,o++):(m=e,F===0&&R(cs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ra(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ti(m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Me,o++):(m=e,F===0&&R(cs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ra(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ti(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Me,o++):(h=e,F===0&&R(cs)),h!==e?(Y=s,s=Zl(d)):(o=s,s=e)}else o=s,s=e;if(s===e)if(s=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&R(sn)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&R(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=sa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ri(m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&R(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=sa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ri(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&R(sn)),h!==e?(Y=s,s=Ql(d)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function ra(){var s,u,d=o*77+48,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===Je?(u=Je,o+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,K[d]={nextPos:o,result:s},s)}function sa(){var s,u,d=o*77+49,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===st?(u=st,o+=2):(u=e,F===0&&R(Da)),u!==e&&(Y=s,u=si()),s=u,K[d]={nextPos:o,result:s},s)}function Ai(){var s,u=o*77+50,d=K[u];return d?(o=d.nextPos,d.result):(s=na(),s===e&&(s=aa()),K[u]={nextPos:o,result:s},s)}function na(){var s,u,d,h,x,m,_=o*77+51,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),bt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(La)),u!==e){if(d=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(o)===46?(h=Cr,o++):(h=e,F===0&&R(Dn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(o)===46?(d=Cr,o++):(d=e,F===0&&R(Dn)),d!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=ni()):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[_]={nextPos:o,result:s},s}function aa(){var s,u,d,h,x=o*77+52,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),bt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(La)),u!==e){if(d=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(o=s,s=e)}else o=s,s=e;return s===e&&(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(o=s,s=e)),K[x]={nextPos:o,result:s},s}function ia(){var s,u=o*77+53,d=K[u];return d?(o=d.nextPos,d.result):(s=du(),s===e&&(s=la()),K[u]={nextPos:o,result:s},s)}function du(){var s,u,d,h,x=o*77+54,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&R(il)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ai()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function la(){var s,u,d,h,x=o*77+55,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&R(nn)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ru()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function ua(){var s,u,d,h,x=o*77+56,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===it?(u=it,o+=4):(u=e,F===0&&R(ll)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ii()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function wr(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+57,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Ve(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=Kn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Ve(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=Kn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=J,o++):(x=e,F===0&&R(Ut)),x!==e?(Y=s,s=su(h)):(o=s,s=e)}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function yu(){var s,u,d,h,x,m,_,A,E,I,U=o*77+58,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=Ve(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=zn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=Ve(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=zn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(o=s,s=e)}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function oa(){var s,u,d,h,x,m,_,A=o*77+59,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,u=ne(),u!==e){for(d=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=We(),_!==e?d=_:(o=d,d=e)}else o=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else o=s,s=e;return K[A]={nextPos:o,result:s},s}function _i(){var s,u,d,h,x,m,_=o*77+60,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=oa(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=oa(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=oa(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);Y=s,s=li(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function tt(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt,dt,mu=o*77+61,fa=K[mu];if(fa)return o=fa.nextPos,fa.result;if(s=o,t.charCodeAt(o)===64?(u=yt,o++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=N,o++):(m=e,F===0&&R(ut)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=_i(),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();if(t.charCodeAt(o)===41?(I=O,o++):(I=e,F===0&&R(Er)),I!==e){for(U=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=he,o++):(se=e,F===0&&R(qt)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();de=We(),de!==e?U=de:(o=U,U=e)}else o=U,U=e;for(U===e&&(U=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=q,o++):(se=e,F===0&&R(nt)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();for(de=Ar(),de===e&&(de=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=J,o++):(dt=e,F===0&&R(Ut)),dt!==e?(Y=s,s=iu(d,h,x,A,U,de)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[mu]={nextPos:o,result:s},s}function wu(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=o*77+62,de=K[Oe];if(de)return o=de.nextPos,de.result;if(s=o,t.substr(o,2)===_t?(u=_t,o+=2):(u=e,F===0&&R(Ln)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=_i(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=o,A=[],E=l();E!==e;)A.push(E),E=l();if(t.charCodeAt(o)===58?(E=he,o++):(E=e,F===0&&R(qt)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?_=U:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],E=l();E!==e;)A.push(E),E=l();if(t.charCodeAt(o)===123?(E=q,o++):(E=e,F===0&&R(nt)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=Ar(),U===e&&(U=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=J,o++):(se=e,F===0&&R(Ut)),se!==e?(Y=s,s=ui(h,_,U)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[Oe]={nextPos:o,result:s},s}function Cs(){var s,u,d,h,x,m,_,A,E,I,U=o*77+63,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=Qr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=oi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=Qr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=oi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(o=s,s=e)}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function ur(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+64,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Qr(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=fi(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Qr(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=fi(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=J,o++):(x=e,F===0&&R(Ut)),x!==e?(Y=s,s=c(h)):(o=s,s=e)}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function We(){var s,u=o*77+65,d=K[u];return d?(o=d.nextPos,d.result):(s=Ci(),s===e&&(s=De()),K[u]={nextPos:o,result:s},s)}function Ci(){var s,u,d,h,x,m,_,A,E,I,U=o*77+66,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===_t?(u=_t,o+=2):(u=e,F===0&&R(Ln)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===pe?(A=pe,o+=2):(A=e,F===0&&R(fs)),A!==e){for(E=[],I=l();I!==e;)E.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function k(){var s,u,d,h,x,m,_=o*77+67,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=We(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);Y=s,s=xs(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function De(){var s,u,d,h,x,m,_,A,E=o*77+68,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=ne(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&R(Rn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Lr,o++):(A=e,F===0&&R(ja)),A!==e?(Y=s,s=yr(u,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return s===e&&(s=o,u=ne(),u!==e&&(Y=s,u=an(u)),s=u),K[E]={nextPos:o,result:s},s}function ne(){var s,u,d,h,x=o*77+69,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,xn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(ol)),u!==e){for(d=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Ha));h!==e;)d.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Ha));Y=s,s=i()}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function f(){var s,u,d,h,x,m,_=o*77+70,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ne(),u!==e){for(d=[],h=o,t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);Y=s,s=S()}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function g(){var s,u,d,h,x,m=o*77+71,_=K[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(o)===44?(d=ee,o++):(d=e,F===0&&R(Ot)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else o=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return K[m]={nextPos:o,result:s},s}function b(){var s,u,d,h,x,m,_=o*77+72,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ar(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=J,o++):(m=e,F===0&&R(Ut)),m!==e?(Y=s,s=Jr(h)):(o=s,s=e)}else o=s,s=e;return s===e&&(s=_s()),K[_]={nextPos:o,result:s},s}function w(){var s,u=o*77+73,d=K[u];return d?(o=d.nextPos,d.result):(t.substr(o,2)===Pt?(s=Pt,o+=2):(s=e,F===0&&R(fl)),s===e&&(Vi.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(cl))),K[u]={nextPos:o,result:s},s)}function a(){var s,u,d=o*77+74,h=K[d];return h?(o=h.nextPos,h.result):(s=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&R(Ht)),F--,u===e?s=void 0:(o=s,s=e),s===e&&(s=w()),K[d]={nextPos:o,result:s},s)}function l(){var s,u=o*77+75,d=K[u];return d?(o=d.nextPos,d.result):(Wi.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(Ua)),K[u]={nextPos:o,result:s},s)}function $(){var s,u=o*77+76,d=K[u];return d?(o=d.nextPos,d.result):(lr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(hl)),K[u]={nextPos:o,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=y(),Rs!==e&&o===t.length)return Rs;throw Rs!==e&&o<t.length&&R(L()),Vn(At,j<t.length?t.charAt(j):null,j<t.length?ln(j,j+1):ln(j,j))}const U1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function B1(t){return U1.includes(t.type)}function Zy(t){return"chain"in t&&t.chain!==null}function q1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function K1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function z1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function St(t,r){const e=r(t);switch(e.type){case"def":{e.expr=St(e.expr,r);break}case"return":{e.expr=St(e.expr,r);break}case"each":{e.items=St(e.items,r),e.for=St(e.for,r);break}case"for":{e.from!=null&&(e.from=St(e.from,r)),e.to!=null&&(e.to=St(e.to,r)),e.times!=null&&(e.times=St(e.times,r)),e.for=St(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=St(e.expr,r),e.dest=St(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=St(e.operands[n],r);break}case"not":{e.expr=St(e.expr,r);break}case"if":{e.cond=St(e.cond,r),e.then=St(e.then,r);for(const n of e.elseif)n.cond=St(n.cond,r),n.then=St(n.then,r);e.else!=null&&(e.else=St(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=St(e.children[n],r);break}case"match":{e.about=St(e.about,r);for(const n of e.qs)n.q=St(n.q,r),n.a=St(n.a,r);e.default!=null&&(e.default=St(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"exists":{e.identifier=St(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=St(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],St(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=St(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"indexChain":{e.index=St(e.index,r);break}case"call":{e.target=St(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"index":{e.target=St(e.target,r),e.index=St(e.index,r);break}case"prop":{e.target=St(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=St(e.members[n],r);break}case"or":case"and":{e.left=St(e.left,r),e.right=St(e.right,r);break}}if(Zy(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=St(e.chain[n],r);return e}const op=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function fp(t){throw new nf(`Reserved word "${t}" cannot be used as variable name.`)}function V1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{op.includes(t.name)&&fp(t.name);break}case"meta":{t.name!=null&&op.includes(t.name)&&fp(t.name);break}case"fn":{for(const r of t.args)op.includes(r.name)&&fp(r.name);break}}return t}function W1(t){for(const r of t)St(r,V1);return t}function od(t){return{type:"simple",name:t}}function G1(t,r){return{type:"generic",name:t,inners:r}}function J1(t,r){return{type:"fn",args:t,result:r}}function Wc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Wc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Wc(n)).join(", "),e=Wc(t.result);return`@(${r}) { ${e} }`}}}function If(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return od(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=If(t.inner):r=od("any"),G1(t.name,[r])}}throw new nf(`Unknown type: '${Wc(t)}'`)}else{const r=t.args.map(e=>If(e));return J1(r,If(t.result))}}function Z1(t){switch(t.type){case"def":{t.varType!=null&&If(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&If(r.argType);t.retType!=null&&If(t.retType);break}}return t}function Q1(t){for(const r of t)St(r,Z1);return t}function Gc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Gc(n.expr.children)),r.push(n);else{if(e.length>0)throw new nf("invalid attribute.");switch(n.type){case"fn":{n.children=Gc(n.children);break}case"block":{n.statements=Gc(n.statements);break}}r.push(n)}if(e.length>0)throw new nf("invalid attribute.");return r}function X1(t){if(B1(t)&&Zy(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=q1(n,v.args,v.loc);break}case"indexChain":{n=K1(n,v.index,v.loc);break}case"propChain":{n=z1(n,v.name,v.loc);break}}return n}return t}function Y1(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],X1);return t}function Jc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Qy(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Jc(t,r,e);{const{left:n,right:v,info:y}=t;return Jc(n,Qy(v,r,e),y)}}function Ro(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Ro(t.left),Ro(t.right)]}}const eA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Ro(t.left),right:Ro(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Ro(t.left),right:Ro(t.right)}),priority:3}};function tA(t){const r=t.operators.map(n=>{const v=eA[n];if(v==null)throw new nf(`No such operator: ${n}.`);return v});let e=Jc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Qy(e,t.operands[2+n],r[1+n]);return Ro(e)}function rA(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],e=>e.type==="infix"?tA(e):e);return t}var ju;let sA=(ju=class{constructor(){ve(this,"plugins");this.plugins={validate:[W1,Q1],transform:[Gc,Y1,rA]}}static parse(r){return ju.instance==null&&(ju.instance=new ju),ju.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=ud(r,{startRule:"Preprocess"});e=ud(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new nf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new nf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},ve(ju,"instance"),ju);const nA="0.17.0",aA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let sv=[],Qf=null;function iA(t){return sv=sA.parse(t),JSON.stringify(sv,null,"	")}async function lA(t){Qf==null||Qf.abort(),Qf=new On({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:ev(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:ev(e.val,!0),print:!1});break}}});try{await Qf.exec(sv)}catch(r){t.err(r)}}const uA=Object.freeze(Object.defineProperty({__proto__:null,exec:lA,parse:iA,samples:aA,version:nA},Symbol.toStringTag,{value:"Module"}));function ds(t,r,e){let n=e.value;return{configurable:!0,get(){const v=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){n=v}}}let Rh=class Xy extends Error{constructor(e,n){super(e);ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Xy)}};class oA extends Rh{constructor(r){super(`Internal Error. ${r}`,r)}}class af extends Rh{constructor(r,e){super(r,e)}}class Dr extends Rh{constructor(r,e){super(r,e)}}class fA extends Dr{constructor(r,e){super(r,e)}}var _o=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Qu=class Yy{constructor(r=[],e,n){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Yy(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Dr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){const y=v.get(r);if(!y.isMutable)throw new Dr(`Cannot assign to an immutable variable ${r}.`);y.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};_o([ds],Qu.prototype,"log",null);_o([ds],Qu.prototype,"onUpdated",null);_o([ds],Qu.prototype,"createChildScope",null);_o([ds],Qu.prototype,"get",null);_o([ds],Qu.prototype,"exists",null);_o([ds],Qu.prototype,"getAll",null);_o([ds],Qu.prototype,"add",null);_o([ds],Qu.prototype,"assign",null);const hr={type:"null"},Hi={type:"bool",value:!0},Mi={type:"bool",value:!1},ze=t=>({type:"num",value:t}),jr=t=>({type:"str",value:t}),Qo=t=>({type:"bool",value:t}),Gv=t=>({type:"obj",value:t}),An=t=>({type:"arr",value:t}),cA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),be=t=>({type:"fn",native:t}),hA=t=>({type:"return",value:t}),pA=()=>({type:"break",value:null}),vA=()=>({type:"continue",value:null}),gA=t=>t.type==="return"?t.value:t,ew=(t,r)=>({type:"error",value:t,info:r});function Fi(t){if(t==null)throw new Dr("Expect anything, but got nothing.")}function va(t){if(t==null)throw new Dr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Dr(`Expect boolean, but got ${t.type}.`)}function oo(t){if(t==null)throw new Dr("Expect function, but got nothing.");if(t.type!=="fn")throw new Dr(`Expect function, but got ${t.type}.`)}function Ms(t){if(t==null)throw new Dr("Expect string, but got nothing.");if(t.type!=="str")throw new Dr(`Expect string, but got ${t.type}.`)}function Ue(t){if(t==null)throw new Dr("Expect number, but got nothing.");if(t.type!=="num")throw new Dr(`Expect number, but got ${t.type}.`)}function ro(t){if(t==null)throw new Dr("Expect object, but got nothing.");if(t.type!=="obj")throw new Dr(`Expect object, but got ${t.type}.`)}function mh(t){if(t==null)throw new Dr("Expect array, but got nothing.");if(t.type!=="arr")throw new Dr(`Expect array, but got ${t.type}.`)}function cp(t){return t.type==="obj"}function fd(t){return t.type==="arr"}function nv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function av(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>av(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function iv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>iv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=iv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function lv(t){if(t===null)return hr;if(typeof t=="boolean")return Qo(t);if(typeof t=="string")return jr(t);if(typeof t=="number")return ze(t);if(Array.isArray(t))return An(t.map(r=>lv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,lv(n));return Gv(r)}return hr}function jf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const v of t.value)n.push(jf(v,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[v,y]of t.value)n.push(`${v}: ${jf(y,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const dA={help:jr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":jr("0.16.0"),"Core:ai":jr("kawaii"),"Core:not":be(([t])=>(va(t),t.value?Mi:Hi)),"Core:eq":be(([t,r])=>(Fi(t),Fi(r),nv(t,r)?Hi:Mi)),"Core:neq":be(([t,r])=>(Fi(t),Fi(r),nv(t,r)?Mi:Hi)),"Core:and":be(([t,r])=>(va(t),t.value?(va(r),r.value?Hi:Mi):Mi)),"Core:or":be(([t,r])=>(va(t),t.value?Hi:(va(r),r.value?Hi:Mi))),"Core:add":be(([t,r])=>(Ue(t),Ue(r),ze(t.value+r.value))),"Core:sub":be(([t,r])=>(Ue(t),Ue(r),ze(t.value-r.value))),"Core:mul":be(([t,r])=>(Ue(t),Ue(r),ze(t.value*r.value))),"Core:pow":be(([t,r])=>{Ue(t),Ue(r);const e=t.value**r.value;if(isNaN(e))throw new Dr("Invalid operation.");return ze(e)}),"Core:div":be(([t,r])=>{Ue(t),Ue(r);const e=t.value/r.value;if(isNaN(e))throw new Dr("Invalid operation.");return ze(e)}),"Core:mod":be(([t,r])=>(Ue(t),Ue(r),ze(t.value%r.value))),"Core:gt":be(([t,r])=>(Ue(t),Ue(r),t.value>r.value?Hi:Mi)),"Core:lt":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?Hi:Mi)),"Core:gteq":be(([t,r])=>(Ue(t),Ue(r),t.value>=r.value?Hi:Mi)),"Core:lteq":be(([t,r])=>(Ue(t),Ue(r),t.value<=r.value?Hi:Mi)),"Core:type":be(([t])=>(Fi(t),jr(t.type))),"Core:to_str":be(([t])=>(Fi(t),jr(jf(t)))),"Core:range":be(([t,r])=>(Ue(t),Ue(r),t.value<r.value?An(Array.from({length:r.value-t.value+1},(e,n)=>ze(n+t.value))):t.value>r.value?An(Array.from({length:t.value-r.value+1},(e,n)=>ze(t.value-n))):An([t]))),"Core:sleep":be(async([t])=>(Ue(t),await new Promise(r=>setTimeout(r,t.value)),hr)),"Util:uuid":be(()=>jr(bc())),"Json:stringify":be(([t])=>(Fi(t),jr(JSON.stringify(iv(t))))),"Json:parse":be(([t])=>{Ms(t);try{return lv(JSON.parse(t.value))}catch{return ew("not_json")}}),"Json:parsable":be(([t])=>{Ms(t);try{JSON.parse(t.value)}catch{return Qo(!1)}return Qo(!0)}),"Date:now":be(()=>ze(Date.now())),"Date:year":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":be(([t])=>(t&&Ue(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":be(([t])=>(Ms(t),ze(new Date(t.value).getTime()))),"Math:Infinity":ze(1/0),"Math:E":ze(Math.E),"Math:LN2":ze(Math.LN2),"Math:LN10":ze(Math.LN10),"Math:LOG2E":ze(Math.LOG2E),"Math:LOG10E":ze(Math.LOG10E),"Math:PI":ze(Math.PI),"Math:SQRT1_2":ze(Math.SQRT1_2),"Math:SQRT2":ze(Math.SQRT2),"Math:abs":be(([t])=>(Ue(t),ze(Math.abs(t.value)))),"Math:acos":be(([t])=>(Ue(t),ze(Math.acos(t.value)))),"Math:acosh":be(([t])=>(Ue(t),ze(Math.acosh(t.value)))),"Math:asin":be(([t])=>(Ue(t),ze(Math.asin(t.value)))),"Math:asinh":be(([t])=>(Ue(t),ze(Math.asinh(t.value)))),"Math:atan":be(([t])=>(Ue(t),ze(Math.atan(t.value)))),"Math:atanh":be(([t])=>(Ue(t),ze(Math.atanh(t.value)))),"Math:atan2":be(([t,r])=>(Ue(t),Ue(r),ze(Math.atan2(t.value,r.value)))),"Math:cbrt":be(([t])=>(Ue(t),ze(Math.cbrt(t.value)))),"Math:ceil":be(([t])=>(Ue(t),ze(Math.ceil(t.value)))),"Math:clz32":be(([t])=>(Ue(t),ze(Math.clz32(t.value)))),"Math:cos":be(([t])=>(Ue(t),ze(Math.cos(t.value)))),"Math:cosh":be(([t])=>(Ue(t),ze(Math.cosh(t.value)))),"Math:exp":be(([t])=>(Ue(t),ze(Math.exp(t.value)))),"Math:expm1":be(([t])=>(Ue(t),ze(Math.expm1(t.value)))),"Math:floor":be(([t])=>(Ue(t),ze(Math.floor(t.value)))),"Math:fround":be(([t])=>(Ue(t),ze(Math.fround(t.value)))),"Math:hypot":be(([t])=>{mh(t);const r=[];for(const e of t.value)Ue(e),r.push(e.value);return ze(Math.hypot(...r))}),"Math:imul":be(([t,r])=>(Ue(t),Ue(r),ze(Math.imul(t.value,r.value)))),"Math:log":be(([t])=>(Ue(t),ze(Math.log(t.value)))),"Math:log1p":be(([t])=>(Ue(t),ze(Math.log1p(t.value)))),"Math:log10":be(([t])=>(Ue(t),ze(Math.log10(t.value)))),"Math:log2":be(([t])=>(Ue(t),ze(Math.log2(t.value)))),"Math:max":be(([t,r])=>(Ue(t),Ue(r),ze(Math.max(t.value,r.value)))),"Math:min":be(([t,r])=>(Ue(t),Ue(r),ze(Math.min(t.value,r.value)))),"Math:pow":be(([t,r])=>(Ue(t),Ue(r),ze(Math.pow(t.value,r.value)))),"Math:round":be(([t])=>(Ue(t),ze(Math.round(t.value)))),"Math:sign":be(([t])=>(Ue(t),ze(Math.sign(t.value)))),"Math:sin":be(([t])=>(Ue(t),ze(Math.sin(t.value)))),"Math:sinh":be(([t])=>(Ue(t),ze(Math.sinh(t.value)))),"Math:sqrt":be(([t])=>{Ue(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Dr("Invalid operation.");return ze(r)}),"Math:tan":be(([t])=>(Ue(t),ze(Math.tan(t.value)))),"Math:tanh":be(([t])=>(Ue(t),ze(Math.tanh(t.value)))),"Math:trunc":be(([t])=>(Ue(t),ze(Math.trunc(t.value)))),"Math:rnd":be(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ze(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ze(Math.random())),"Math:gen_rng":be(([t])=>{if(Fi(t),t.type!=="num"&&t.type!=="str")return hr;const r=ff(t.value.toString());return be(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?ze(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ze(r()))}),"Num:to_hex":be(([t])=>(Ue(t),jr(t.value.toString(16)))),"Num:from_hex":be(([t])=>(Ms(t),ze(parseInt(t.value,16)))),"Str:lf":jr(`
`),"Str:lt":be(([t,r])=>(Ms(t),Ms(r),t.value<r.value?ze(-1):t.value===r.value?ze(0):ze(1))),"Str:gt":be(([t,r])=>(Ms(t),Ms(r),t.value>r.value?ze(-1):t.value===r.value?ze(0):ze(1))),"Str:from_codepoint":be(([t])=>(Ue(t),jr(String.fromCodePoint(t.value)))),"Obj:keys":be(([t])=>(ro(t),An(Array.from(t.value.keys()).map(r=>jr(r))))),"Obj:vals":be(([t])=>(ro(t),An(Array.from(t.value.values())))),"Obj:kvs":be(([t])=>(ro(t),An(Array.from(t.value.entries()).map(([r,e])=>An([jr(r),e]))))),"Obj:get":be(([t,r])=>(ro(t),Ms(r),t.value.get(r.value)??hr)),"Obj:set":be(([t,r,e])=>(ro(t),Ms(r),Fi(e),t.value.set(r.value,e),hr)),"Obj:has":be(([t,r])=>(ro(t),Ms(r),Qo(t.value.has(r.value)))),"Obj:copy":be(([t])=>(ro(t),Gv(new Map(t.value)))),"Async:interval":be(async([t,r,e],n)=>{Ue(t),oo(r),e&&(va(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.topCall(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),be(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":be(async([t,r],e)=>{Ue(t),oo(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),be(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},cd={num:{to_str:t=>be(async(r,e)=>jr(t.value.toString()))},str:{to_num:t=>be(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?hr:ze(n)}),len:t=>ze(hf(t.value)),replace:t=>be(async([r,e],n)=>(Ms(r),Ms(e),jr(t.value.split(r.value).join(e.value)))),index_of:t=>be(async([r],e)=>(Ms(r),ze(vf(t.value,r.value)))),incl:t=>be(async([r],e)=>(Ms(r),t.value.includes(r.value)?Hi:Mi)),trim:t=>be(async(r,e)=>jr(t.value.trim())),upper:t=>be(async(r,e)=>jr(t.value.toUpperCase())),lower:t=>be(async(r,e)=>jr(t.value.toLowerCase())),split:t=>be(async([r],e)=>(r&&Ms(r),An(r?t.value.split(r?r.value:"").map(n=>jr(n)):Gs(t.value).map(n=>jr(n))))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),jr(pf(t.value,r.value,e.value)))),pick:t=>be(async([r],e)=>{Ue(r);const v=Gs(t.value)[r.value];return v?jr(v):hr}),codepoint_at:t=>be(([r],e)=>{Ue(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?hr:ze(n)})},arr:{len:t=>ze(t.value.length),push:t=>be(async([r],e)=>(Fi(r),t.value.push(r),t)),unshift:t=>be(async([r],e)=>(Fi(r),t.value.unshift(r),t)),pop:t=>be(async(r,e)=>t.value.pop()??hr),shift:t=>be(async(r,e)=>t.value.shift()??hr),concat:t=>be(async([r],e)=>(mh(r),An(t.value.concat(r.value)))),slice:t=>be(async([r,e],n)=>(Ue(r),Ue(e),An(t.value.slice(r.value,e.value)))),join:t=>be(async([r],e)=>(r&&Ms(r),jr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>be(async([r],e)=>{oo(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,ze(y)]));return An(await Promise.all(n))}),filter:t=>be(async([r],e)=>{oo(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,ze(v)]);va(C),C.value&&n.push(y)}return An(n)}),reduce:t=>be(async([r,e],n)=>{oo(r);const v=e!=null;let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,ze(C)])}return y}),find:t=>be(async([r],e)=>{oo(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,ze(n)]);if(va(y),y.value)return v}return hr}),incl:t=>be(async([r],e)=>(Fi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Mi:(v=>v.value.map(y=>y.type==="str"||y.type==="num"||y.type==="bool"?y.value:y.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Hi:Mi)),reverse:t=>be(async(r,e)=>(t.value.reverse(),hr)),copy:t=>be(async(r,e)=>An([...t.value])),sort:t=>be(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=await n(y.slice(0,P),C),N=await n(y.slice(P),C);return v(M,N,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);Ue(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return oo(r),mh(t),t.value=await n(t.value,r),t})},error:{name:t=>jr(t.value),info:t=>t.info??hr}};function yA(t,r){if(Object.hasOwn(cd,t.type)){const e=cd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Dr(`No such prop (${r}) in ${t.type}.`)}else throw new Dr(`Cannot read prop of ${t.type}. (reading ${r})`)}const wA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var xa=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const tw=300,mA=tw-1;let Tn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const n={print:be(([v])=>{Fi(v),this.opts.out&&this.opts.out(v)}),readline:be(async v=>{const y=v[0];if(Ms(y),this.opts.in==null)return hr;const C=await this.opts.in(y.value);return jr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...dA,...n}).map(([v,y])=>[v,wA.const(y)])),this.scope=new Qu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),ew("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Rh?this.opts.err(r):this.opts.err(new oA(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const v={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??hr;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],{isMutable:!0,value:e[y]});const v=r.scope.createChildScope(n);return gA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return hr;if(this.stepCount%tw===mA&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Dr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);oo(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(va(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(va(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return hr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(nv(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):hr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return hr}case"for":{if(r.times){const n=await this._eval(r.times,e);Ue(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);Ue(n),Ue(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:ze(y)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return hr}case"each":{const n=await this._eval(r.items,e);mh(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(y.type==="break")break;if(y.type==="return")return y}return hr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,{isMutable:r.mut,value:n}),hr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),hr}case"addAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,ze(n.value+v.value)),hr}case"subAssign":{const n=await this._eval(r.dest,e);Ue(n);const v=await this._eval(r.expr,e);return Ue(v),await this.assign(e,r.dest,ze(n.value-v.value)),hr}case"null":return hr;case"bool":return Qo(r.value);case"num":return ze(r.value);case"str":return jr(r.value);case"arr":return An(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Gv(n)}case"prop":{const n=await this._eval(r.target,e);return cp(n)?n.value.has(r.name)?n.value.get(r.name):hr:yA(n,r.name)}case"index":{const n=await this._eval(r.target,e),v=await this._eval(r.index,e);if(fd(n)){Ue(v);const y=n.value[v.value];if(y===void 0)throw new fA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}else{if(cp(n))return Ms(v),n.value.has(v.value)?n.value.get(v.value):hr;throw new Dr(`Cannot read prop (${jf(v)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return va(n),Qo(!n.value)}case"fn":return cA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Qo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);n+=jf(y)}return jr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),hA(n)}case"break":return this.log("block:break",{scope:e.name}),pA();case"continue":return this.log("block:continue",{scope:e.name}),vA();case"ns":return hr;case"meta":return hr;case"and":{const n=await this._eval(r.left,e);if(va(n),n.value){const v=await this._eval(r.right,e);return va(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(va(n),n.value)return n;{const v=await this._eval(r.right,e);return va(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=hr;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r),y=await this._eval(e.index,r);if(fd(v))Ue(y),v.value[y.value]=n;else if(cp(v))Ms(y),v.value.set(y.value,n);else throw new Dr(`Cannot read prop (${jf(y)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ro(v),v.value.set(e.name,n)}else throw new Dr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};xa([ds],Tn.prototype,"exec",null);xa([ds],Tn.prototype,"execFn",null);xa([ds],Tn.prototype,"execFnSimple",null);xa([ds],Tn.prototype,"handleError",null);xa([ds],Tn.prototype,"log",null);xa([ds],Tn.prototype,"collectNs",null);xa([ds],Tn.prototype,"collectNsMember",null);xa([ds],Tn.prototype,"_fn",null);xa([ds],Tn.prototype,"_eval",null);xa([ds],Tn.prototype,"_run",null);xa([ds],Tn.prototype,"registerAbortHandler",null);xa([ds],Tn.prototype,"unregisterAbortHandler",null);xa([ds],Tn.prototype,"abort",null);xa([ds],Tn.prototype,"assign",null);xa([ds],Tn,"collectMetadata",null);function $A(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Xo(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Xo.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}$A(Xo,Error);function hp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Xo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=hp("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+hp("",v.column-1," ")+hp("",H,"^")}else r+=`
 at `+C}return r};Xo.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function hd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:un,Main:Zr},y=un,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",Wt="*",_r="^",zr="/",ar="%",Vr="!",ir="[",Cr=".",W="if",re="elif",ce="else",xe="match",pe="=>",Ne="eval",Ie="exists",Ae="`",Me='"',$e="'",Je='\\"',st="\\'",Ye="true",Qe="false",it="null",Ct=";",yt="@",_t="@(",Pt=`\r
`,ct=/^[A-Z0-9_:]/i,ks=/^[^`{]/,us=/^[{}`]/,ss=/^[+\-]/,bt=/^[1-9]/,Rt=/^[0-9]/,xn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,Vi=/^[\r\n]/,Wi=/^[ \t\r\n]/,lr=/^[ \t]/,Ht=Ds(),Wr=ge("//",!1),In=ge("/*",!1),kt=ge("*/",!1),ut=ge("(",!1),Er=ge(")",!1),Gt=ge("::",!1),nt=ge("{",!1),Ut=ge("}",!1),ms=ge("###",!1),Bt=ge("let",!1),qt=ge(":",!1),Gr=ge("=",!1),Fa=ge("var",!1),Sr=ge("<:",!1),os=ge("#[",!1),Ns=ge("]",!1),ot=ge("each",!1),Ot=ge(",",!1),Js=ge("for",!1),Nr=ge("return",!1),Fr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),Gi=ge("loop",!1),Oa=ge("break",!1),Ji=ge("continue",!1),Zi=ge("+=",!1),Ta=ge("-=",!1),Ia=ge("\\",!1),Qi=ge("||",!1),Xi=ge("&&",!1),Yi=ge("==",!1),el=ge("!=",!1),jn=ge("<=",!1),Zs=ge(">=",!1),Rn=ge("<",!1),ja=ge(">",!1),tl=ge("+",!1),Ra=ge("-",!1),Fs=ge("*",!1),rl=ge("^",!1),sl=ge("/",!1),nl=ge("%",!1),$s=ge("!",!1),Os=ge("[",!1),Dn=ge(".",!1),Qs=ge("if",!1),Xs=ge("elif",!1),al=ge("else",!1),Ys=ge("match",!1),fs=ge("=>",!1),Ts=ge("eval",!1),br=ge("exists",!1),en=ge("`",!1),tn=tr(["`","{"],!0,!1),rn=tr(["{","}","`"],!1,!1),cs=ge('"',!1),sn=ge("'",!1),Is=ge('\\"',!1),Da=ge("\\'",!1),er=tr(["+","-"],!1,!1),La=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),il=ge("true",!1),nn=ge("false",!1),ll=ge("null",!1),js=ge(";",!1),ul=ge("@",!1),Ln=ge("@(",!1),ol=tr([["A","Z"],"_"],!1,!0),Ha=tr([["A","Z"],["0","9"],"_"],!1,!0),fl=ge(`\r
`,!1),cl=tr(["\r",`
`],!1,!1),Ua=tr([" ","	","\r",`
`],!1,!1),hl=tr([" ","	"],!1,!1),Ba=function(s){return s.join("")},pl=function(){return le()},qa=function(){return le()},vl=function(){return""},Ka=function(){return""},gl=function(s){return s??[]},Hn=function(s,u){return u},dl=function(s,u){return[s,...u]},Un=function(s,u){return u},yl=function(s,u){return[s,...u]},za=function(s,u){return u},wl=function(s,u){return[s,...u]},ml=function(s){return s},$l=function(s,u){return p("ns",{name:s,members:u})},xl=function(s,u){return p("meta",{name:s,value:u})},bl=function(s){return p("meta",{name:null,value:s})},Al=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!1,attr:[]})},_l=function(s,u,d){return p("def",{name:s,varType:u,expr:d,mut:!0,attr:[]})},Cl=function(s){return p("identifier",{name:"print",chain:[p("callChain",{args:[s]})]})},Pl=function(s,u){return p("attr",{name:s,value:u??p("bool",{value:!0})})},kl=function(s,u,d){return p("each",{var:s,items:u,for:d})},Ml=function(s,u,d){return p("each",{var:s,items:u,for:d})},El=function(s,u){return u},Sl=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Nl=function(s,u){return u},Va=function(s,u,d,h){return p("for",{var:s,from:u??p("num",{value:0}),to:d,for:h})},Fl=function(s,u){return p("for",{times:s,for:u})},Ol=function(s,u){return p("for",{times:s,for:u})},Tl=function(s){return p("return",{expr:s})},Il=function(s){return p("loop",{statements:s})},jl=function(){return p("break",{})},Bn=function(){return p("continue",{})},Rl=function(s,u,d){return u==="+="?p("addAssign",{dest:s,expr:d}):u==="-="?p("subAssign",{dest:s,expr:d}):p("assign",{dest:s,expr:d})},Wa=function(s,u,d){return{op:u,term:d}},Dl=function(s,u){return p("infix",{operands:[s,...u.map(d=>d.term)],operators:u.map(d=>d.op)})},Ll=function(){return le()},Hl=function(s){return p("not",{expr:s})},Ga=function(s,u){return{...s,chain:u}},Ul=function(s){return p("callChain",{args:s??[]})},qn=function(s,u){return u},Bl=function(s,u){return[s,...u]},ql=function(s){return p("indexChain",{index:s})},Kl=function(s){return p("propChain",{name:s})},zl=function(s,u,d,h){return p("if",{cond:s,then:u,elseif:d??[],else:h})},Vl=function(s,u){return[s,...u]},Ja=function(s,u){return{cond:s,then:u}},Za=function(s){return s},Qa=function(s,u,d){return{q:u,a:d}},Xa=function(s,u,d){return p("match",{about:s,qs:u??[],default:d})},Wl=function(s){return p("block",{statements:s})},Gl=function(s){return p("exists",{identifier:s})},Ya=function(s){return p("identifier",{name:s})},Jl=function(s){return p("tmpl",{tmpl:s})},ei=function(s){return s.join("")},ti=function(s){return s},Zl=function(s){return p("str",{value:s.join("")})},ri=function(s){return s},Ql=function(s){return p("str",{value:s.join("")})},Xl=function(){return'"'},si=function(){return"'"},Yl=function(){return p("num",{value:parseFloat(le())})},ni=function(){return p("num",{value:parseFloat(le())})},eu=function(){return p("num",{value:parseInt(le(),10)})},tu=function(){return p("num",{value:parseInt(le(),10)})},ai=function(){return p("bool",{value:!0})},ru=function(){return p("bool",{value:!1})},ii=function(){return p("null",{})},Kn=function(s,u){return{k:s,v:u}},su=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},zn=function(s){return s},nu=function(s){return p("arr",{value:s})},au=function(s,u){return{name:s,argType:u}},li=function(s,u){return[s,...u]},iu=function(s,u,d,h,x,m){return(s.length>0||d.length>0)&&uu("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},ui=function(s,u,d){return p("fn",{args:s??[],retType:u},d??[])},oi=function(s){return s},lu=function(s){return p("arr",{value:s})},fi=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const d of s)u.set(d.k,d.v);return p("obj",{value:u})},te=function(s,u){return p("fnTypeSource",{args:s??[],result:u})},xs=function(s,u){return[s,...u]},yr=function(s,u){return p("namedTypeSource",{name:s,inner:u})},an=function(s){return p("namedTypeSource",{name:s,inner:null})},i=function(){return le()},S=function(){return le()},Jr=function(s){return p("block",{statements:s??[]})},o=0,Y=0,T=[{line:1,column:1}],j=0,At=[],F=0,K={},Rs;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function le(){return t.substring(Y,o)}function D(){return ln(Y,o)}function uu(s,u){throw u=u!==void 0?u:ln(Y,o),bs(s,u)}function ge(s,u){return{type:"literal",text:s,ignoreCase:u}}function tr(s,u,d){return{type:"class",parts:s,inverted:u,ignoreCase:d}}function Ds(){return{type:"any"}}function L(){return{type:"end"}}function ci(s){var u=T[s],d;if(u)return u;for(d=s-1;!T[d];)d--;for(u=T[d],u={line:u.line,column:u.column};d<s;)t.charCodeAt(d)===10?(u.line++,u.column=1):u.column++,d++;return T[s]=u,u}function ln(s,u,d){var h=ci(s),x=ci(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function R(s){o<j||(o>j&&(j=o,At=[]),At.push(s))}function bs(s,u){return new Xo(s,null,null,u)}function Vn(s,u,d){return new Xo(Xo.buildMessage(s,u),s,u,d)}function un(){var s,u,d,h=o*77+0,x=K[h];if(x)return o=x.nextPos,x.result;for(s=o,u=[],d=As();d!==e;)u.push(d),d=As();return Y=s,u=Ba(u),s=u,K[h]={nextPos:o,result:s},s}function As(){var s,u,d=o*77+1,h=K[d];return h?(o=h.nextPos,h.result):(s=o,u=hn(),u!==e&&(Y=s,u=pl()),s=u,s===e&&(s=o,u=ta(),u!==e&&(Y=s,u=qa()),s=u,s===e&&(s=et(),s===e&&(t.length>o?(s=t.charAt(o),o++):(s=e,F===0&&R(Ht))))),K[d]={nextPos:o,result:s},s)}function et(){var s,u,d,h,x,m,_=o*77+2,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&R(Wr)),u!==e){for(d=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);Y=s,s=vl()}else o=s,s=e;if(s===e)if(s=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&R(In)),u!==e){for(d=[],h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&R(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===M?(h=M,o+=2):(h=e,F===0&&R(kt)),h!==e?(Y=s,s=Ka()):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Zr(){var s,u,d,h,x,m=o*77+3,_=K[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],d=l();d!==e;)u.push(d),d=l();for(d=on(),d===e&&(d=null),h=[],x=l();x!==e;)h.push(x),x=l();return Y=s,s=gl(d),K[m]={nextPos:o,result:s},s}function on(){var s,u,d,h,x,m,_,A,E=o*77+4,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=Xe(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(Y=h,h=Hn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(Y=h,h=Hn(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=dl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Or(){var s,u,d,h,x,m,_,A,E=o*77+5,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=hs(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=hs(),A!==e?(Y=h,h=Un(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=hs(),A!==e?(Y=h,h=Un(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=yl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Ar(){var s,u,d,h,x,m,_,A,E=o*77+6,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=_s(),u!==e){for(d=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=_s(),A!==e?(Y=h,h=za(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(d.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=_s(),A!==e?(Y=h,h=za(u,A)):(o=h,h=e)}else o=h,h=e}Y=s,s=wl(u,d)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Xe(){var s,u=o*77+7,d=K[u];return d?(o=d.nextPos,d.result):(s=pi(),s===e&&(s=ou(),s===e&&(s=_s())),K[u]={nextPos:o,result:s},s)}function hs(){var s,u=o*77+8,d=K[u];return d?(o=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=pi())),K[u]={nextPos:o,result:s},s)}function _s(){var s,u=o*77+9,d=K[u];return d?(o=d.nextPos,d.result):(s=vi(),s===e&&(s=tt(),s===e&&(s=fu(),s===e&&(s=hu(),s===e&&(s=cu(),s===e&&(s=Xr(),s===e&&(s=gi(),s===e&&(s=pu(),s===e&&(s=di(),s===e&&(s=Yr(),s===e&&(s=Wn(),s===e&&(s=Ve()))))))))))),K[u]={nextPos:o,result:s},s)}function Ve(){var s,u=o*77+10,d=K[u];return d?(o=d.nextPos,d.result):(s=yi(),s===e&&(s=Ls()),K[u]={nextPos:o,result:s},s)}function Ls(){var s,u=o*77+11,d=K[u];return d?(o=d.nextPos,d.result):(s=$i(),s===e&&(s=wu(),s===e&&(s=wi(),s===e&&(s=hi()))),K[u]={nextPos:o,result:s},s)}function hi(){var s,u,d,h,x,m,_=o*77+12,A=K[_];if(A)return o=A.nextPos,A.result;if(s=cn(),s===e&&(s=Qn(),s===e&&(s=Xn(),s===e&&(s=hn(),s===e&&(s=ta(),s===e&&(s=Ai(),s===e&&(s=ia(),s===e&&(s=ua(),s===e&&(s=wr(),s===e&&(s=yu(),s===e&&(s=Jn(),s===e&&(s=Yn(),s===e))))))))))))if(s=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e?(Y=s,s=ml(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Qr(){var s,u=o*77+13,d=K[u];return d?(o=d.nextPos,d.result):(s=Ai(),s===e&&(s=ta(),s===e&&(s=ia(),s===e&&(s=Cs(),s===e&&(s=ur(),s===e&&(s=ua()))))),K[u]={nextPos:o,result:s},s)}function pi(){var s,u,d,h,x,m,_,A,E,I,U=o*77+14,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===H?(u=H,o+=2):(u=e,F===0&&R(Gt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=q,o++):(m=e,F===0&&R(nt)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Or(),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();t.charCodeAt(o)===125?(I=J,o++):(I=e,F===0&&R(Ut)),I!==e?(Y=s,s=$l(h,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function ou(){var s,u,d,h,x,m,_=o*77+15,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,3)===we?(u=we,o+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Qr(),m!==e?(Y=s,s=xl(h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===we?(u=we,o+=3):(u=e,F===0&&R(ms)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();h=Qr(),h!==e?(Y=s,s=bl(h)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function vi(){var s,u,d,h,x,m,_,A,E,I=o*77+16,U=K[I];if(U)return o=U.nextPos,U.result;if(s=o,t.substr(o,3)===ue?(u=ue,o+=3):(u=e,F===0&&R(Bt)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=he,o++):(_=e,F===0&&R(qt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=We(),E!==e?x=E:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=Ee,o++):(_=e,F===0&&R(Gr)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=Ve(),E!==e?(Y=s,s=Al(h,x,E)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===G?(u=G,o+=3):(u=e,F===0&&R(Fa)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=he,o++):(_=e,F===0&&R(qt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=We(),E!==e?x=E:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=Ee,o++):(_=e,F===0&&R(Gr)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();E=Ve(),E!==e?(Y=s,s=_l(h,x,E)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[I]={nextPos:o,result:s},s}function fu(){var s,u,d,h,x=o*77+17,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,2)===V?(u=V,o+=2):(u=e,F===0&&R(Sr)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();h=Ve(),h!==e?(Y=s,s=Cl(h)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function cu(){var s,u,d,h,x,m,_,A=o*77+18,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,t.substr(o,2)===Q?(u=Q,o+=2):(u=e,F===0&&R(os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=Qr(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=X,o++):(_=e,F===0&&R(Ns)),_!==e?(Y=s,s=Pl(h,x)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[A]={nextPos:o,result:s},s}function Xr(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+19,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&R(ot)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(o,3)===ue?(x=ue,o+=3):(x=e,F===0&&R(Bt)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();for(t.charCodeAt(o)===44?(E=ee,o++):(E=e,F===0&&R(Ot)),E===e&&(E=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e)if(t.charCodeAt(o)===41?(z=O,o++):(z=e,F===0&&R(Er)),z!==e){for(se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Oe=b(),Oe!==e?(Y=s,s=kl(_,U,Oe)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&R(ot)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(o,3)===ue?(h=ue,o+=3):(h=e,F===0&&R(Bt)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();if(I=Ve(),I!==e){if(U=[],z=l(),z!==e)for(;z!==e;)U.push(z),z=l();else U=e;U!==e?(z=b(),z!==e?(Y=s,s=Ml(m,I,z)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function gi(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt=o*77+20,dt=K[gt];if(dt)return o=dt.nextPos,dt.result;if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(t.substr(o,3)===ue?(x=ue,o+=3):(x=e,F===0&&R(Bt)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();if(E=o,t.charCodeAt(o)===61?(I=Ee,o++):(I=e,F===0&&R(Gr)),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();z=Ve(),z!==e?(Y=E,E=El(_,z)):(o=E,E=e)}else o=E,E=e;for(E===e&&(E=null),t.charCodeAt(o)===44?(I=ee,o++):(I=e,F===0&&R(Ot)),I===e&&(I=null),U=[],z=l();z!==e;)U.push(z),z=l();if(z=Ve(),z!==e)if(t.charCodeAt(o)===41?(se=O,o++):(se=e,F===0&&R(Er)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();de=b(),de!==e?(Y=s,s=Sl(_,E,z,de)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(t.substr(o,3)===ue?(h=ue,o+=3):(h=e,F===0&&R(Bt)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(E=Ee,o++):(E=e,F===0&&R(Gr)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=Ve(),U!==e?(Y=A,A=Nl(m,U)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(E=ee,o++):(E=e,F===0&&R(Ot)),E===e&&(E=null),I=[],U=l();U!==e;)I.push(U),U=l();if(U=Ve(),U!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(Y=s,s=Va(m,A,U,se)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&R(ut)),h!==e)if(x=Ve(),x!==e)if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(Y=s,s=Fl(x,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&R(Js)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(Y=s,s=Ol(h,m)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e}}return K[gt]={nextPos:o,result:s},s}function hu(){var s,u,d,h,x,m=o*77+21,_=K[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&R(Nr)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=Ve(),x!==e?(Y=s,s=Tl(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[m]={nextPos:o,result:s},s}function pu(){var s,u,d,h,x,m,_,A,E=o*77+22,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Se?(u=Se,o+=4):(u=e,F===0&&R(Gi)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===123?(h=q,o++):(h=e,F===0&&R(nt)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Ar(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=J,o++):(A=e,F===0&&R(Ut)),A!==e?(Y=s,s=Il(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function di(){var s,u,d,h,x=o*77+23,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Te?(u=Te,o+=5):(u=e,F===0&&R(Oa)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=jl()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function Yr(){var s,u,d,h,x=o*77+24,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,8)===Pe?(u=Pe,o+=8):(u=e,F===0&&R(Ji)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=Bn()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function Wn(){var s,u,d,h,x,m,_=o*77+25,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ve(),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&R(Zi)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&R(Ta)),h===e&&(t.charCodeAt(o)===61?(h=Ee,o++):(h=e,F===0&&R(Gr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Ve(),m!==e?(Y=s,s=Rl(u,h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function yi(){var s,u,d,h,x,m,_,A,E=o*77+26,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=Ls(),u!==e){for(d=[],h=o,x=[],m=es();m!==e;)x.push(m),m=es();if(m=Gn(),m!==e){for(_=[],A=es();A!==e;)_.push(A),A=es();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(d.push(h),h=o,x=[],m=es();m!==e;)x.push(m),m=es();if(m=Gn(),m!==e){for(_=[],A=es();A!==e;)_.push(A),A=es();A=Ls(),A!==e?(Y=h,h=Wa(u,m,A)):(o=h,h=e)}else o=h,h=e}else d=e;d!==e?(Y=s,s=Dl(u,d)):(o=s,s=e)}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function es(){var s,u,d,h=o*77+27,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=nr,o++):(u=e,F===0&&R(Ia)),u!==e?(d=w(),d!==e?(u=[u,d],s=u):(o=s,s=e)):(o=s,s=e),s===e&&(s=$()),K[h]={nextPos:o,result:s},s)}function Gn(){var s,u,d=o*77+28,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===xt?(u=xt,o+=2):(u=e,F===0&&R(Qi)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&R(Xi)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&R(Yi)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&R(el)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&R(jn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&R(Zs)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&R(Rn)),u===e&&(t.charCodeAt(o)===62?(u=Lr,o++):(u=e,F===0&&R(ja)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&R(tl)),u===e&&(t.charCodeAt(o)===45?(u=Mr,o++):(u=e,F===0&&R(Ra)),u===e&&(t.charCodeAt(o)===42?(u=Wt,o++):(u=e,F===0&&R(Fs)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&R(rl)),u===e&&(t.charCodeAt(o)===47?(u=zr,o++):(u=e,F===0&&R(sl)),u===e&&(t.charCodeAt(o)===37?(u=ar,o++):(u=e,F===0&&R(nl))))))))))))))),u!==e&&(Y=s,u=Ll()),s=u,K[d]={nextPos:o,result:s},s)}function Jn(){var s,u,d,h=o*77+29,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===33?(u=Vr,o++):(u=e,F===0&&R($s)),u!==e?(d=Ve(),d!==e?(Y=s,s=Hl(d)):(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function wi(){var s,u,d,h,x=o*77+30,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,u=hi(),u!==e){if(d=[],h=Zn(),h===e&&(h=mi(),h===e&&(h=Hs())),h!==e)for(;h!==e;)d.push(h),h=Zn(),h===e&&(h=mi(),h===e&&(h=Hs()));else d=e;d!==e?(Y=s,s=Ga(u,d)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function Zn(){var s,u,d,h,x,m,_=o*77+31,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&R(ut)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=vu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e?(Y=s,s=Ul(h)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function vu(){var s,u,d,h,x,m,_=o*77+32,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ve(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=Ve(),m!==e?(Y=h,h=qn(u,m)):(o=h,h=e)):(o=h,h=e);Y=s,s=Bl(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function mi(){var s,u,d,h,x,m,_=o*77+33,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=Ve(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=ql(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function Hs(){var s,u,d,h=o*77+34,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===46?(u=Cr,o++):(u=e,F===0&&R(Dn)),u!==e?(d=ne(),d!==e?(Y=s,s=Kl(d)):(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function $i(){var s,u,d,h,x,m,_,A,E,I,U=o*77+35,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===W?(u=W,o+=2):(u=e,F===0&&R(Qs)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;if(d!==e)if(h=Ve(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],E=l(),E!==e)for(;E!==e;)A.push(E),E=l();else A=e;if(A!==e?(E=xi(),E!==e?_=E:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;E!==e?(I=gu(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),Y=s,s=zl(h,m,_,A)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function xi(){var s,u,d,h,x,m,_=o*77+36,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=fn(),u!==e){for(d=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=fn(),m!==e?h=m:(o=h,h=e);h!==e;){for(d.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=fn(),m!==e?h=m:(o=h,h=e)}Y=s,s=Vl(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function fn(){var s,u,d,h,x,m,_,A=o*77+37,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&R(Xs)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(Y=s,s=Ja(x,_)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e;return K[A]={nextPos:o,result:s},s}function gu(){var s,u,d,h,x,m=o*77+38,_=K[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,4)===ce?(u=ce,o+=4):(u=e,F===0&&R(al)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(Y=s,s=Za(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[m]={nextPos:o,result:s},s}function cn(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt,dt,mu=o*77+39,fa=K[mu];if(fa)return o=fa.nextPos,fa.result;if(s=o,t.substr(o,5)===xe?(u=xe,o+=5):(u=e,F===0&&R(Ys)),u!==e)if(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=Ve(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=q,o++):(_=e,F===0&&R(nt)),_!==e){for(A=[],E=l();E!==e;)A.push(E),E=l();if(E=[],I=o,U=Ve(),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();Y=I,I=Qa(x,U,de)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(E.push(I),I=o,U=Ve(),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();Y=I,I=Qa(x,U,de)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else E=e;if(E!==e){if(I=o,t.charCodeAt(o)===42?(U=Wt,o++):(U=e,F===0&&R(Fs)),U!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===pe?(se=pe,o+=2):(se=e,F===0&&R(fs)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();if(de=b(),de!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=de}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),U=[],z=l();z!==e;)U.push(z),z=l();t.charCodeAt(o)===125?(z=J,o++):(z=e,F===0&&R(Ut)),z!==e?(Y=s,s=Xa(x,E,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;else o=s,s=e;return K[mu]={nextPos:o,result:s},s}function Qn(){var s,u,d,h,x,m,_,A,E=o*77+40,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Ne?(u=Ne,o+=4):(u=e,F===0&&R(Ts)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(t.charCodeAt(o)===123?(h=q,o++):(h=e,F===0&&R(nt)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Ar(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=J,o++):(A=e,F===0&&R(Ut)),A!==e?(Y=s,s=Wl(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[E]={nextPos:o,result:s},s}function Xn(){var s,u,d,h,x=o*77+41,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,6)===Ie?(u=Ie,o+=6):(u=e,F===0&&R(br)),u!==e){if(d=[],h=l(),h!==e)for(;h!==e;)d.push(h),h=l();else d=e;d!==e?(h=Yn(),h!==e?(Y=s,s=Gl(h)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function Yn(){var s,u,d=o*77+42,h=K[d];return h?(o=h.nextPos,h.result):(s=o,u=f(),u!==e&&(Y=s,u=Ya(u)),s=u,K[d]={nextPos:o,result:s},s)}function hn(){var s,u,d,h,x,m,_=o*77+43,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===96?(u=Ae,o++):(u=e,F===0&&R(en)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ae,o++):(m=e,F===0&&R(en)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ea(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ae,o++):(m=e,F===0&&R(en)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ea(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Ae,o++):(h=e,F===0&&R(en)),h!==e?(Y=s,s=Jl(d)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function ea(){var s,u,d,h,x,m,_=o*77+44,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=Ve(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=J,o++):(m=e,F===0&&R(Ut)),m!==e?s=h:(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,u=[],d=pn(),d!==e)for(;d!==e;)u.push(d),d=pn();else u=e;u!==e&&(Y=s,u=ei(u)),s=u}return K[_]={nextPos:o,result:s},s}function pn(){var s,u=o*77+45,d=K[u];return d?(o=d.nextPos,d.result):(s=bi(),s===e&&(ks.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(tn))),K[u]={nextPos:o,result:s},s)}function bi(){var s,u,d,h=o*77+46,x=K[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=nr,o++):(u=e,F===0&&R(Ia)),u!==e?(us.test(t.charAt(o))?(d=t.charAt(o),o++):(d=e,F===0&&R(rn)),d!==e?s=d:(o=s,s=e)):(o=s,s=e),K[h]={nextPos:o,result:s},s)}function ta(){var s,u,d,h,x,m,_=o*77+47,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===34?(u=Me,o++):(u=e,F===0&&R(cs)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Me,o++):(m=e,F===0&&R(cs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ra(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ti(m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Me,o++):(m=e,F===0&&R(cs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ra(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ti(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Me,o++):(h=e,F===0&&R(cs)),h!==e?(Y=s,s=Zl(d)):(o=s,s=e)}else o=s,s=e;if(s===e)if(s=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&R(sn)),u!==e){for(d=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&R(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=sa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ri(m)):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&R(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=sa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&R(Ht))),m!==e?(Y=h,h=ri(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&R(sn)),h!==e?(Y=s,s=Ql(d)):(o=s,s=e)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function ra(){var s,u,d=o*77+48,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===Je?(u=Je,o+=2):(u=e,F===0&&R(Is)),u!==e&&(Y=s,u=Xl()),s=u,K[d]={nextPos:o,result:s},s)}function sa(){var s,u,d=o*77+49,h=K[d];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===st?(u=st,o+=2):(u=e,F===0&&R(Da)),u!==e&&(Y=s,u=si()),s=u,K[d]={nextPos:o,result:s},s)}function Ai(){var s,u=o*77+50,d=K[u];return d?(o=d.nextPos,d.result):(s=na(),s===e&&(s=aa()),K[u]={nextPos:o,result:s},s)}function na(){var s,u,d,h,x,m,_=o*77+51,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),bt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(La)),u!==e){if(d=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr));else d=e;if(d!==e)if(t.charCodeAt(o)===46?(h=Cr,o++):(h=e,F===0&&R(Dn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&R(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&R(dr));else x=e;x!==e?(Y=s,s=Yl()):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(dr)),u!==e)if(t.charCodeAt(o)===46?(d=Cr,o++):(d=e,F===0&&R(Dn)),d!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&R(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&R(dr));else h=e;h!==e?(Y=s,s=ni()):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return K[_]={nextPos:o,result:s},s}function aa(){var s,u,d,h,x=o*77+52,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),bt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(La)),u!==e){if(d=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr)),h!==e)for(;h!==e;)d.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(dr));else d=e;d!==e?(Y=s,s=eu()):(o=s,s=e)}else o=s,s=e;return s===e&&(s=o,ss.test(t.charAt(o))?(t.charAt(o),o++):F===0&&R(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(dr)),u!==e?(Y=s,s=tu()):(o=s,s=e)),K[x]={nextPos:o,result:s},s}function ia(){var s,u=o*77+53,d=K[u];return d?(o=d.nextPos,d.result):(s=du(),s===e&&(s=la()),K[u]={nextPos:o,result:s},s)}function du(){var s,u,d,h,x=o*77+54,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&R(il)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ai()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function la(){var s,u,d,h,x=o*77+55,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&R(nn)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ru()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function ua(){var s,u,d,h,x=o*77+56,m=K[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===it?(u=it,o+=4):(u=e,F===0&&R(ll)),u!==e?(d=o,F++,ct.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Fr)),F--,h===e?d=void 0:(o=d,d=e),d!==e?(Y=s,s=ii()):(o=s,s=e)):(o=s,s=e),K[x]={nextPos:o,result:s},s)}function wr(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+57,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Ve(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=Kn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Ve(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=Kn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=J,o++):(x=e,F===0&&R(Ut)),x!==e?(Y=s,s=su(h)):(o=s,s=e)}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function yu(){var s,u,d,h,x,m,_,A,E,I,U=o*77+58,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=Ve(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=zn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=Ve(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=zn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=nu(h)):(o=s,s=e)}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function oa(){var s,u,d,h,x,m,_,A=o*77+59,E=K[A];if(E)return o=E.nextPos,E.result;if(s=o,u=ne(),u!==e){for(d=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=We(),_!==e?d=_:(o=d,d=e)}else o=d,d=e;d===e&&(d=null),Y=s,s=au(u,d)}else o=s,s=e;return K[A]={nextPos:o,result:s},s}function _i(){var s,u,d,h,x,m,_=o*77+60,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=oa(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=oa(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=oa(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);Y=s,s=li(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function tt(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de,gt,dt,mu=o*77+61,fa=K[mu];if(fa)return o=fa.nextPos,fa.result;if(s=o,t.charCodeAt(o)===64?(u=yt,o++):(u=e,F===0&&R(ul)),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=N,o++):(m=e,F===0&&R(ut)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=_i(),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();if(t.charCodeAt(o)===41?(I=O,o++):(I=e,F===0&&R(Er)),I!==e){for(U=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=he,o++):(se=e,F===0&&R(qt)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();de=We(),de!==e?U=de:(o=U,U=e)}else o=U,U=e;for(U===e&&(U=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=q,o++):(se=e,F===0&&R(nt)),se!==e){for(Oe=[],de=l();de!==e;)Oe.push(de),de=l();for(de=Ar(),de===e&&(de=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=J,o++):(dt=e,F===0&&R(Ut)),dt!==e?(Y=s,s=iu(d,h,x,A,U,de)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[mu]={nextPos:o,result:s},s}function wu(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=o*77+62,de=K[Oe];if(de)return o=de.nextPos,de.result;if(s=o,t.substr(o,2)===_t?(u=_t,o+=2):(u=e,F===0&&R(Ln)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=_i(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=o,A=[],E=l();E!==e;)A.push(E),E=l();if(t.charCodeAt(o)===58?(E=he,o++):(E=e,F===0&&R(qt)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();U=We(),U!==e?_=U:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],E=l();E!==e;)A.push(E),E=l();if(t.charCodeAt(o)===123?(E=q,o++):(E=e,F===0&&R(nt)),E!==e){for(I=[],U=l();U!==e;)I.push(U),U=l();for(U=Ar(),U===e&&(U=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=J,o++):(se=e,F===0&&R(Ut)),se!==e?(Y=s,s=ui(h,_,U)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[Oe]={nextPos:o,result:s},s}function Cs(){var s,u,d,h,x,m,_,A,E,I,U=o*77+63,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ir,o++):(u=e,F===0&&R(Os)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=Qr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=oi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=Qr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=ee,o++):(A=e,F===0&&R(Ot)),A===e&&(A=null),E=[],I=l();I!==e;)E.push(I),I=l();Y=x,x=oi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&R(Ns)),m!==e?(Y=s,s=lu(h)):(o=s,s=e)}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function ur(){var s,u,d,h,x,m,_,A,E,I,U,z,se,Oe,de=o*77+64,gt=K[de];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Qr(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=fi(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=he,o++):(A=e,F===0&&R(qt)),A!==e){if(E=[],I=l(),I!==e)for(;I!==e;)E.push(I),I=l();else E=e;if(E!==e)if(I=Qr(),I!==e){for(U=[],z=l();z!==e;)U.push(z),z=l();for(t.charCodeAt(o)===44?(z=ee,o++):(z=e,F===0&&R(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Ct,o++):(z=e,F===0&&R(js))),z===e&&(z=null),se=[],Oe=l();Oe!==e;)se.push(Oe),Oe=l();Y=x,x=fi(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=J,o++):(x=e,F===0&&R(Ut)),x!==e?(Y=s,s=c(h)):(o=s,s=e)}else o=s,s=e;return K[de]={nextPos:o,result:s},s}function We(){var s,u=o*77+65,d=K[u];return d?(o=d.nextPos,d.result):(s=Ci(),s===e&&(s=De()),K[u]={nextPos:o,result:s},s)}function Ci(){var s,u,d,h,x,m,_,A,E,I,U=o*77+66,z=K[U];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===_t?(u=_t,o+=2):(u=e,F===0&&R(Ln)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=O,o++):(m=e,F===0&&R(Er)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===pe?(A=pe,o+=2):(A=e,F===0&&R(fs)),A!==e){for(E=[],I=l();I!==e;)E.push(I),I=l();I=We(),I!==e?(Y=s,s=te(h,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return K[U]={nextPos:o,result:s},s}function k(){var s,u,d,h,x,m,_=o*77+67,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(d=[],h=o,x=g(),x!==e?(m=We(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);Y=s,s=xs(u,d)}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function De(){var s,u,d,h,x,m,_,A,E=o*77+68,I=K[E];if(I)return o=I.nextPos,I.result;if(s=o,u=ne(),u!==e){for(d=[],h=$();h!==e;)d.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&R(Rn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=We(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Lr,o++):(A=e,F===0&&R(ja)),A!==e?(Y=s,s=yr(u,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return s===e&&(s=o,u=ne(),u!==e&&(Y=s,u=an(u)),s=u),K[E]={nextPos:o,result:s},s}function ne(){var s,u,d,h,x=o*77+69,m=K[x];if(m)return o=m.nextPos,m.result;if(s=o,xn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&R(ol)),u!==e){for(d=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Ha));h!==e;)d.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&R(Ha));Y=s,s=i()}else o=s,s=e;return K[x]={nextPos:o,result:s},s}function f(){var s,u,d,h,x,m,_=o*77+70,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ne(),u!==e){for(d=[],h=o,t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)d.push(h),h=o,t.charCodeAt(o)===58?(x=he,o++):(x=e,F===0&&R(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);Y=s,s=S()}else o=s,s=e;return K[_]={nextPos:o,result:s},s}function g(){var s,u,d,h,x,m=o*77+71,_=K[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],d=l();d!==e;)u.push(d),d=l();if(t.charCodeAt(o)===44?(d=ee,o++):(d=e,F===0&&R(Ot)),d!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,d,h],s=u}else o=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return K[m]={nextPos:o,result:s},s}function b(){var s,u,d,h,x,m,_=o*77+72,A=K[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=q,o++):(u=e,F===0&&R(nt)),u!==e){for(d=[],h=l();h!==e;)d.push(h),h=l();for(h=Ar(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=J,o++):(m=e,F===0&&R(Ut)),m!==e?(Y=s,s=Jr(h)):(o=s,s=e)}else o=s,s=e;return s===e&&(s=_s()),K[_]={nextPos:o,result:s},s}function w(){var s,u=o*77+73,d=K[u];return d?(o=d.nextPos,d.result):(t.substr(o,2)===Pt?(s=Pt,o+=2):(s=e,F===0&&R(fl)),s===e&&(Vi.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(cl))),K[u]={nextPos:o,result:s},s)}function a(){var s,u,d=o*77+74,h=K[d];return h?(o=h.nextPos,h.result):(s=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&R(Ht)),F--,u===e?s=void 0:(o=s,s=e),s===e&&(s=w()),K[d]={nextPos:o,result:s},s)}function l(){var s,u=o*77+75,d=K[u];return d?(o=d.nextPos,d.result):(Wi.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(Ua)),K[u]={nextPos:o,result:s},s)}function $(){var s,u=o*77+76,d=K[u];return d?(o=d.nextPos,d.result):(lr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&R(hl)),K[u]={nextPos:o,result:s},s)}function p(s,u,d){const h={type:s};u.children=d;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Rs=y(),Rs!==e&&o===t.length)return Rs;throw Rs!==e&&o<t.length&&R(L()),Vn(At,j<t.length?t.charAt(j):null,j<t.length?ln(j,j+1):ln(j,j))}const xA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function bA(t){return xA.includes(t.type)}function rw(t){return"chain"in t&&t.chain!==null}function AA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function _A(t,r,e){return{type:"index",target:t,index:r,loc:e}}function CA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Nt(e.expr,r);break}case"return":{e.expr=Nt(e.expr,r);break}case"each":{e.items=Nt(e.items,r),e.for=Nt(e.for,r);break}case"for":{e.from!=null&&(e.from=Nt(e.from,r)),e.to!=null&&(e.to=Nt(e.to,r)),e.times!=null&&(e.times=Nt(e.times,r)),e.for=Nt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Nt(e.expr,r),e.dest=Nt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Nt(e.operands[n],r);break}case"not":{e.expr=Nt(e.expr,r);break}case"if":{e.cond=Nt(e.cond,r),e.then=Nt(e.then,r);for(const n of e.elseif)n.cond=Nt(n.cond,r),n.then=Nt(n.then,r);e.else!=null&&(e.else=Nt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Nt(e.children[n],r);break}case"match":{e.about=Nt(e.about,r);for(const n of e.qs)n.q=Nt(n.q,r),n.a=Nt(n.a,r);e.default!=null&&(e.default=Nt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"exists":{e.identifier=Nt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Nt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Nt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Nt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"indexChain":{e.index=Nt(e.index,r);break}case"call":{e.target=Nt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"index":{e.target=Nt(e.target,r),e.index=Nt(e.index,r);break}case"prop":{e.target=Nt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Nt(e.members[n],r);break}case"or":case"and":{e.left=Nt(e.left,r),e.right=Nt(e.right,r);break}}if(rw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Nt(e.chain[n],r);return e}const pp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function vp(t){throw new af(`Reserved word "${t}" cannot be used as variable name.`)}function PA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{pp.includes(t.name)&&vp(t.name);break}case"meta":{t.name!=null&&pp.includes(t.name)&&vp(t.name);break}case"fn":{for(const r of t.args)pp.includes(r.name)&&vp(r.name);break}}return t}function kA(t){for(const r of t)Nt(r,PA);return t}function pd(t){return{type:"simple",name:t}}function MA(t,r){return{type:"generic",name:t,inners:r}}function EA(t,r){return{type:"fn",args:t,result:r}}function Zc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Zc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Zc(n)).join(", "),e=Zc(t.result);return`@(${r}) { ${e} }`}}}function Rf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return pd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Rf(t.inner):r=pd("any"),MA(t.name,[r])}}throw new af(`Unknown type: '${Zc(t)}'`)}else{const r=t.args.map(e=>Rf(e));return EA(r,Rf(t.result))}}function SA(t){switch(t.type){case"def":{t.varType!=null&&Rf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Rf(r.argType);t.retType!=null&&Rf(t.retType);break}}return t}function NA(t){for(const r of t)Nt(r,SA);return t}function Qc(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Qc(n.expr.children)),r.push(n);else{if(e.length>0)throw new af("invalid attribute.");switch(n.type){case"fn":{n.children=Qc(n.children);break}case"block":{n.statements=Qc(n.statements);break}}r.push(n)}if(e.length>0)throw new af("invalid attribute.");return r}function FA(t){if(bA(t)&&rw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=AA(n,v.args,v.loc);break}case"indexChain":{n=_A(n,v.index,v.loc);break}case"propChain":{n=CA(n,v.name,v.loc);break}}return n}return t}function OA(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],FA);return t}function Xc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function sw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Xc(t,r,e);{const{left:n,right:v,info:y}=t;return Xc(n,sw(v,r,e),y)}}function Do(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Do(t.left),Do(t.right)]}}const TA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Do(t.left),right:Do(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Do(t.left),right:Do(t.right)}),priority:3}};function IA(t){const r=t.operators.map(n=>{const v=TA[n];if(v==null)throw new af(`No such operator: ${n}.`);return v});let e=Xc(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=sw(e,t.operands[2+n],r[1+n]);return Do(e)}function jA(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],e=>e.type==="infix"?IA(e):e);return t}var Ru;let RA=(Ru=class{constructor(){ve(this,"plugins");this.plugins={validate:[kA,NA],transform:[Qc,OA,jA]}}static parse(r){return Ru.instance==null&&(Ru.instance=new Ru),Ru.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=hd(r,{startRule:"Preprocess"});e=hd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new af(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new af(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},ve(Ru,"instance"),Ru);const DA="0.16.0",LA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let uv=[],Xf=null;function HA(t){return uv=RA.parse(t),JSON.stringify(uv,null,"	")}async function UA(t){Xf==null||Xf.abort(),Xf=new Tn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:av(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:av(e.val,!0),print:!1});break}}});try{await Xf.exec(uv)}catch(r){t.err(r)}}const BA=Object.freeze(Object.defineProperty({__proto__:null,exec:UA,parse:HA,samples:LA,version:DA},Symbol.toStringTag,{value:"Module"}));function Yc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yc=function(e){return typeof e}:Yc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(t)}function nw(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Yc(n)));var v=!1;return{configurable:!0,get:function(){if(v||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var C=n.bind(this);return v=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return C},set:function(M){n=M,delete this[r]}}),v=!1,C},set:function(C){n=C}}}function qA(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,nw(t,e,n))}}),t}function Lt(){return arguments.length===1?qA.apply(void 0,arguments):nw.apply(void 0,arguments)}let aw=class iw extends Error{constructor(e,n){super(e);ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,iw)}},lf=class extends aw{constructor(r,e){super(r,e)}},Br=class extends aw{constructor(r,e){super(r,e)}},KA=class extends Br{constructor(r,e){super(r,e)}};var gf=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};let Co=class lw{constructor(r=[],e,n){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new lw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Br(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Br(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Br(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};gf([Lt],Co.prototype,"log",null);gf([Lt],Co.prototype,"onUpdated",null);gf([Lt],Co.prototype,"createChildScope",null);gf([Lt],Co.prototype,"get",null);gf([Lt],Co.prototype,"getAll",null);gf([Lt],Co.prototype,"add",null);gf([Lt],Co.prototype,"assign",null);let Oc;const zA=new Uint8Array(16);function VA(){if(!Oc&&(Oc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Oc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Oc(zA)}const gn=[];for(let t=0;t<256;++t)gn.push((t+256).toString(16).slice(1));function WA(t,r=0){return(gn[t[r+0]]+gn[t[r+1]]+gn[t[r+2]]+gn[t[r+3]]+"-"+gn[t[r+4]]+gn[t[r+5]]+"-"+gn[t[r+6]]+gn[t[r+7]]+"-"+gn[t[r+8]]+gn[t[r+9]]+"-"+gn[t[r+10]]+gn[t[r+11]]+gn[t[r+12]]+gn[t[r+13]]+gn[t[r+14]]+gn[t[r+15]]).toLowerCase()}const GA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vd={randomUUID:GA};function JA(t,r,e){if(vd.randomUUID&&!r&&!t)return vd.randomUUID();t=t||{};const n=t.random||(t.rng||VA)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,WA(n)}const Pr={type:"null"},Ui={type:"bool",value:!0},Ei={type:"bool",value:!1},Ge=t=>({type:"num",value:t}),Hr=t=>({type:"str",value:t}),Df=t=>({type:"bool",value:t}),Jv=t=>({type:"obj",value:t}),_n=t=>({type:"arr",value:t}),ZA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),_e=t=>({type:"fn",native:t}),QA=t=>({type:"return",value:t}),XA=()=>({type:"break",value:null}),YA=()=>({type:"continue",value:null}),e2=t=>t.type==="return"?t.value:t;function Oi(t){if(t==null)throw new Br("Expect anything, but got nothing.")}function ga(t){if(t==null)throw new Br("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Br(`Expect boolean, but got ${t.type}.`)}function fo(t){if(t==null)throw new Br("Expect function, but got nothing.");if(t.type!=="fn")throw new Br(`Expect function, but got ${t.type}.`)}function Bs(t){if(t==null)throw new Br("Expect string, but got nothing.");if(t.type!=="str")throw new Br(`Expect string, but got ${t.type}.`)}function qe(t){if(t==null)throw new Br("Expect number, but got nothing.");if(t.type!=="num")throw new Br(`Expect number, but got ${t.type}.`)}function so(t){if(t==null)throw new Br("Expect object, but got nothing.");if(t.type!=="obj")throw new Br(`Expect object, but got ${t.type}.`)}function Lf(t){if(t==null)throw new Br("Expect array, but got nothing.");if(t.type!=="arr")throw new Br(`Expect array, but got ${t.type}.`)}function t2(t){return t.type==="str"}function r2(t){return t.type==="num"}function s2(t){return t.type==="obj"}function n2(t){return t.type==="arr"}function ov(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function fv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>fv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function cv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>cv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=cv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function hv(t){if(t===null)return Pr;if(typeof t=="boolean")return Df(t);if(typeof t=="string")return Hr(t);if(typeof t=="number")return Ge(t);if(Array.isArray(t))return _n(t.map(r=>hv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,hv(n));return Jv(r)}return Pr}const a2={help:Hr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Hr("0.14.1"),"Core:ai":Hr("kawaii"),"Core:not":_e(([t])=>(ga(t),t.value?Ei:Ui)),"Core:eq":_e(([t,r])=>(Oi(t),Oi(r),ov(t,r)?Ui:Ei)),"Core:neq":_e(([t,r])=>(Oi(t),Oi(r),ov(t,r)?Ei:Ui)),"Core:and":_e(([t,r])=>(ga(t),t.value?(ga(r),r.value?Ui:Ei):Ei)),"Core:or":_e(([t,r])=>(ga(t),t.value?Ui:(ga(r),r.value?Ui:Ei))),"Core:add":_e(([t,r])=>(qe(t),qe(r),Ge(t.value+r.value))),"Core:sub":_e(([t,r])=>(qe(t),qe(r),Ge(t.value-r.value))),"Core:mul":_e(([t,r])=>(qe(t),qe(r),Ge(t.value*r.value))),"Core:pow":_e(([t,r])=>{qe(t),qe(r);const e=t.value**r.value;if(isNaN(e))throw new Br("Invalid operation.");return Ge(e)}),"Core:div":_e(([t,r])=>{qe(t),qe(r);const e=t.value/r.value;if(isNaN(e))throw new Br("Invalid operation.");return Ge(e)}),"Core:mod":_e(([t,r])=>(qe(t),qe(r),Ge(t.value%r.value))),"Core:gt":_e(([t,r])=>(qe(t),qe(r),t.value>r.value?Ui:Ei)),"Core:lt":_e(([t,r])=>(qe(t),qe(r),t.value<r.value?Ui:Ei)),"Core:gteq":_e(([t,r])=>(qe(t),qe(r),t.value>=r.value?Ui:Ei)),"Core:lteq":_e(([t,r])=>(qe(t),qe(r),t.value<=r.value?Ui:Ei)),"Core:type":_e(([t])=>(Oi(t),Hr(t.type))),"Core:to_str":_e(([t])=>(Oi(t),t.type==="str"?t:t.type==="num"?Hr(t.value.toString()):Hr("?"))),"Core:range":_e(([t,r])=>(qe(t),qe(r),t.value<r.value?_n(Array.from({length:r.value-t.value+1},(e,n)=>Ge(n+t.value))):t.value>r.value?_n(Array.from({length:t.value-r.value+1},(e,n)=>Ge(t.value-n))):_n([t]))),"Util:uuid":_e(()=>Hr(JA())),"Json:stringify":_e(([t])=>(Oi(t),Hr(JSON.stringify(cv(t))))),"Json:parse":_e(([t])=>(Bs(t),hv(JSON.parse(t.value)))),"Json:parsable":_e(([t])=>{Bs(t);try{JSON.parse(t.value)}catch{return Df(!1)}return Df(!0)}),"Date:now":_e(()=>Ge(Date.now())),"Date:year":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":_e(([t])=>(t&&qe(t),Ge(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":_e(([t])=>(Bs(t),Ge(new Date(t.value).getTime()))),"Math:Infinity":Ge(1/0),"Math:E":Ge(Math.E),"Math:LN2":Ge(Math.LN2),"Math:LN10":Ge(Math.LN10),"Math:LOG2E":Ge(Math.LOG2E),"Math:LOG10E":Ge(Math.LOG10E),"Math:PI":Ge(Math.PI),"Math:SQRT1_2":Ge(Math.SQRT1_2),"Math:SQRT2":Ge(Math.SQRT2),"Math:abs":_e(([t])=>(qe(t),Ge(Math.abs(t.value)))),"Math:acos":_e(([t])=>(qe(t),Ge(Math.acos(t.value)))),"Math:acosh":_e(([t])=>(qe(t),Ge(Math.acosh(t.value)))),"Math:asin":_e(([t])=>(qe(t),Ge(Math.asin(t.value)))),"Math:asinh":_e(([t])=>(qe(t),Ge(Math.asinh(t.value)))),"Math:atan":_e(([t])=>(qe(t),Ge(Math.atan(t.value)))),"Math:atanh":_e(([t])=>(qe(t),Ge(Math.atanh(t.value)))),"Math:atan2":_e(([t,r])=>(qe(t),qe(r),Ge(Math.atan2(t.value,r.value)))),"Math:cbrt":_e(([t])=>(qe(t),Ge(Math.cbrt(t.value)))),"Math:ceil":_e(([t])=>(qe(t),Ge(Math.ceil(t.value)))),"Math:clz32":_e(([t])=>(qe(t),Ge(Math.clz32(t.value)))),"Math:cos":_e(([t])=>(qe(t),Ge(Math.cos(t.value)))),"Math:cosh":_e(([t])=>(qe(t),Ge(Math.cosh(t.value)))),"Math:exp":_e(([t])=>(qe(t),Ge(Math.exp(t.value)))),"Math:expm1":_e(([t])=>(qe(t),Ge(Math.expm1(t.value)))),"Math:floor":_e(([t])=>(qe(t),Ge(Math.floor(t.value)))),"Math:fround":_e(([t])=>(qe(t),Ge(Math.fround(t.value)))),"Math:hypot":_e(([t])=>{Lf(t);const r=[];for(const e of t.value)qe(e),r.push(e.value);return Ge(Math.hypot(...r))}),"Math:imul":_e(([t,r])=>(qe(t),qe(r),Ge(Math.imul(t.value,r.value)))),"Math:log":_e(([t])=>(qe(t),Ge(Math.log(t.value)))),"Math:log1p":_e(([t])=>(qe(t),Ge(Math.log1p(t.value)))),"Math:log10":_e(([t])=>(qe(t),Ge(Math.log10(t.value)))),"Math:log2":_e(([t])=>(qe(t),Ge(Math.log2(t.value)))),"Math:max":_e(([t,r])=>(qe(t),qe(r),Ge(Math.max(t.value,r.value)))),"Math:min":_e(([t,r])=>(qe(t),qe(r),Ge(Math.min(t.value,r.value)))),"Math:pow":_e(([t,r])=>(qe(t),qe(r),Ge(Math.pow(t.value,r.value)))),"Math:round":_e(([t])=>(qe(t),Ge(Math.round(t.value)))),"Math:sign":_e(([t])=>(qe(t),Ge(Math.sign(t.value)))),"Math:sin":_e(([t])=>(qe(t),Ge(Math.sin(t.value)))),"Math:sinh":_e(([t])=>(qe(t),Ge(Math.sinh(t.value)))),"Math:sqrt":_e(([t])=>{qe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Br("Invalid operation.");return Ge(r)}),"Math:tan":_e(([t])=>(qe(t),Ge(Math.tan(t.value)))),"Math:tanh":_e(([t])=>(qe(t),Ge(Math.tanh(t.value)))),"Math:trunc":_e(([t])=>(qe(t),Ge(Math.trunc(t.value)))),"Math:rnd":_e(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ge(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ge(Math.random())),"Math:gen_rng":_e(([t])=>{if(Oi(t),t.type!=="num"&&t.type!=="str")return Pr;const r=ff(t.value.toString());return _e(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ge(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ge(r()))}),"Num:to_hex":_e(([t])=>(qe(t),Hr(t.value.toString(16)))),"Num:from_hex":_e(([t])=>(Bs(t),Ge(parseInt(t.value,16)))),"Str:lf":Hr(`
`),"Str:lt":_e(([t,r])=>(Bs(t),Bs(r),t.value<r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Str:gt":_e(([t,r])=>(Bs(t),Bs(r),t.value>r.value?Ge(-1):t.value===r.value?Ge(0):Ge(1))),"Obj:keys":_e(([t])=>(so(t),_n(Array.from(t.value.keys()).map(r=>Hr(r))))),"Obj:vals":_e(([t])=>(so(t),_n(Array.from(t.value.values())))),"Obj:kvs":_e(([t])=>(so(t),_n(Array.from(t.value.entries()).map(([r,e])=>_n([Hr(r),e]))))),"Obj:get":_e(([t,r])=>(so(t),Bs(r),t.value.get(r.value)??Pr)),"Obj:set":_e(([t,r,e])=>(so(t),Bs(r),Oi(e),t.value.set(r.value,e),Pr)),"Obj:has":_e(([t,r])=>(so(t),Bs(r),Df(t.value.has(r.value)))),"Obj:copy":_e(([t])=>(so(t),Jv(new Map(t.value)))),"Async:interval":_e(async([t,r,e],n)=>{qe(t),fo(r),e&&(ga(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),_e(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":_e(async([t,r],e)=>{qe(t),fo(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),_e(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},mf={num:{to_str:t=>_e(async(r,e)=>Hr(t.value.toString()))},str:{to_num:t=>_e(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Pr:Ge(n)}),len:t=>Ge(hf(t.value)),replace:t=>_e(async([r,e],n)=>(Bs(r),Bs(e),Hr(t.value.split(r.value).join(e.value)))),index_of:t=>_e(async([r],e)=>(Bs(r),Ge(vf(t.value,r.value)))),incl:t=>_e(async([r],e)=>(Bs(r),t.value.includes(r.value)?Ui:Ei)),trim:t=>_e(async(r,e)=>Hr(t.value.trim())),upper:t=>_e(async(r,e)=>Hr(t.value.toUpperCase())),lower:t=>_e(async(r,e)=>Hr(t.value.toLowerCase())),split:t=>_e(async([r],e)=>(r&&Bs(r),_n(r?t.value.split(r?r.value:"").map(n=>Hr(n)):Gs(t.value).map(n=>Hr(n))))),slice:t=>_e(async([r,e],n)=>(qe(r),qe(e),Hr(pf(t.value,r.value,e.value)))),pick:t=>_e(async([r],e)=>{qe(r);const v=Gs(t.value)[r.value];return v?Hr(v):Pr})},arr:{len:t=>Ge(t.value.length),push:t=>_e(async([r],e)=>(Oi(r),t.value.push(r),t)),unshift:t=>_e(async([r],e)=>(Oi(r),t.value.unshift(r),t)),pop:t=>_e(async(r,e)=>t.value.pop()??Pr),shift:t=>_e(async(r,e)=>t.value.shift()??Pr),concat:t=>_e(async([r],e)=>(Lf(r),_n(t.value.concat(r.value)))),slice:t=>_e(async([r,e],n)=>(qe(r),qe(e),_n(t.value.slice(r.value,e.value)))),join:t=>_e(async([r],e)=>(r&&Bs(r),Hr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>_e(async([r],e)=>{fo(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,Ge(y)]));return _n(await Promise.all(n))}),filter:t=>_e(async([r],e)=>{fo(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,Ge(v)]);ga(C),C.value&&n.push(y)}return _n(n)}),reduce:t=>_e(async([r,e],n)=>{fo(r);const v=e!=null;let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,Ge(C)])}return y}),find:t=>_e(async([r],e)=>{fo(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,Ge(n)]);if(ga(y),y.value)return v}return Pr}),incl:t=>_e(async([r],e)=>(Oi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ei:(v=>v.value.map(y=>y.type==="str"||y.type==="num"||y.type==="bool"?y.value:y.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Ui:Ei)),reverse:t=>_e(async(r,e)=>(t.value.reverse(),Pr)),copy:t=>_e(async(r,e)=>_n([...t.value])),sort:t=>_e(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=await n(y.slice(0,P),C),N=await n(y.slice(P),C);return v(M,N,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);qe(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return fo(r),Lf(t),t.value=await n(t.value,r),t})}};var ji=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const uw=300,i2=uw-1;let Sa=class{constructor(r,e){ve(this,"vars");ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);this.opts=e??{};const n={print:_e(([v])=>{Oi(v),this.opts.out&&this.opts.out(v)}),readline:_e(async v=>{const y=v[0];if(Bs(y),this.opts.in==null)return Pr;const C=await this.opts.in(y.value);return Hr(C)})};this.vars={...r,...a2,...n},this.scope=new Co([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Pr;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],e[y]);const v=r.scope.createChildScope(n);return e2(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Pr;if(this.stepCount%uw===i2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Br("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);fo(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(ga(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(ga(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Pr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(ov(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Pr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Pr}case"for":{if(r.times){const n=await this._eval(r.times,e);qe(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);qe(n),qe(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ge(y)]])));if(C.type==="break")break;if(C.type==="return")return C}}return Pr}case"each":{const n=await this._eval(r.items,e);Lf(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(y.type==="break")break;if(y.type==="return")return y}return Pr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,n),Pr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Pr}case"addAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value+v.value)),Pr}case"subAssign":{const n=await this._eval(r.dest,e);qe(n);const v=await this._eval(r.expr,e);return qe(v),await this.assign(e,r.dest,Ge(n.value-v.value)),Pr}case"null":return Pr;case"bool":return Df(r.value);case"num":return Ge(r.value);case"str":return Hr(r.value);case"arr":return _n(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Jv(n)}case"prop":{const n=await this._eval(r.target,e);if(s2(n))return n.value.has(r.name)?n.value.get(r.name):Pr;if(r2(n)){if(Object.hasOwn(mf.num,r.name))return mf.num[r.name](n);throw new Br(`No such prop (${r.name}) in ${n.type}.`)}else if(t2(n)){if(Object.hasOwn(mf.str,r.name))return mf.str[r.name](n);throw new Br(`No such prop (${r.name}) in ${n.type}.`)}else if(n2(n)){if(Object.hasOwn(mf.arr,r.name))return mf.arr[r.name](n);throw new Br(`No such prop (${r.name}) in ${n.type}.`)}else throw new Br(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Lf(n);const v=await this._eval(r.index,e);qe(v);const y=n.value[v.value];if(y===void 0)throw new KA(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}case"not":{const n=await this._eval(r.expr,e);return ga(n),Df(!n.value)}case"fn":return ZA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);let C="";y.type==="str"?C=y.value:y.type==="num"&&(C=y.value.toString()),n+=C}return Hr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),QA(n)}case"break":return this.log("block:break",{scope:e.name}),XA();case"continue":return this.log("block:continue",{scope:e.name}),YA();case"ns":return Pr;case"meta":return Pr;case"and":{const n=await this._eval(r.left,e);if(ga(n),n.value){const v=await this._eval(r.right,e);return ga(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(ga(n),n.value)return n;{const v=await this._eval(r.right,e);return ga(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Pr;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);Lf(v);const y=await this._eval(e.index,r);qe(y),v.value[y.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);so(v),v.value.set(e.name,n)}else throw new Br("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ji([Lt],Sa.prototype,"exec",null);ji([Lt],Sa.prototype,"execFn",null);ji([Lt],Sa.prototype,"log",null);ji([Lt],Sa.prototype,"collectNs",null);ji([Lt],Sa.prototype,"collectNsMember",null);ji([Lt],Sa.prototype,"_fn",null);ji([Lt],Sa.prototype,"_eval",null);ji([Lt],Sa.prototype,"_run",null);ji([Lt],Sa.prototype,"registerAbortHandler",null);ji([Lt],Sa.prototype,"unregisterAbortHandler",null);ji([Lt],Sa.prototype,"abort",null);ji([Lt],Sa.prototype,"assign",null);ji([Lt],Sa,"collectMetadata",null);function l2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Yo(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Yo.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}l2(Yo,Error);function gp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Yo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=gp("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+gp("",v.column-1," ")+gp("",H,"^")}else r+=`
 at `+C}return r};Yo.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function gd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:un},y=R,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",Wt="*",_r="^",zr="/",ar="%",Vr="!",ir="[",Cr=".",W="if",re="elif",ce="else",xe="match",pe="=>",Ne="eval",Ie="`",Ae='"',Me="'",$e='\\"',Je="\\'",st="true",Ye="false",Qe="null",it=";",Ct="@",yt="@(",_t=`\r
`,Pt=/^[A-Z0-9_:]/i,ct=/^[^`{]/,ks=/^[{}`]/,us=/^[+\-]/,ss=/^[1-9]/,bt=/^[0-9]/,Rt=/^[A-Z_]/i,xn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,lr=uu(),Ht=le("//",!1),Wr=le("/*",!1),In=le("*/",!1),kt=le("(",!1),ut=le(")",!1),Er=le("::",!1),Gt=le("{",!1),nt=le("}",!1),Ut=le("###",!1),ms=le("let",!1),Bt=le(":",!1),qt=le("=",!1),Gr=le("var",!1),Fa=le("<:",!1),Sr=le("#[",!1),os=le("]",!1),Ns=le("each",!1),ot=le(",",!1),Ot=le("for",!1),Js=le("return",!1),Nr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Fr=le("loop",!1),Gi=le("break",!1),Oa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Ia=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),jn=le(">=",!1),Zs=le("<",!1),Rn=le(">",!1),ja=le("+",!1),tl=le("-",!1),Ra=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Os=le(".",!1),Dn=le("if",!1),Qs=le("elif",!1),Xs=le("else",!1),al=le("match",!1),Ys=le("=>",!1),fs=le("eval",!1),Ts=le("`",!1),br=D(["`","{"],!0,!1),en=D(["{","}","`"],!1,!1),tn=le('"',!1),rn=le("'",!1),cs=le('\\"',!1),sn=le("\\'",!1),Is=D(["+","-"],!1,!1),Da=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),La=le("true",!1),dr=le("false",!1),il=le("null",!1),nn=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),Ln=D([["A","Z"],["0","9"],"_"],!1,!0),ol=le(`\r
`,!1),Ha=D(["\r",`
`],!1,!1),fl=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ua=function(a){return a.join("")},hl=function(){return F()},Ba=function(){return F()},pl=function(){return""},qa=function(){return""},vl=function(a){return a??[]},Ka=function(a,l){return l},gl=function(a,l){return[a,...l]},Hn=function(a,l){return l},dl=function(a,l){return[a,...l]},Un=function(a,l){return l},yl=function(a,l){return[a,...l]},za=function(a){return a},wl=function(a,l){return w("ns",{name:a,members:l})},ml=function(a,l){return w("meta",{name:a,value:l})},$l=function(a){return w("meta",{name:null,value:a})},xl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},_l=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Cl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return w("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},Nl=function(a,l){return w("for",{times:a,for:l})},Va=function(a,l){return w("for",{times:a,for:l})},Fl=function(a){return w("return",{expr:a})},Ol=function(a){return w("loop",{statements:a})},Tl=function(){return w("break",{})},Il=function(){return w("continue",{})},jl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Bn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Wa=function(){return F()},Dl=function(a){return w("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return w("callChain",{args:a??[]})},Ga=function(a,l){return l},Ul=function(a,l){return[a,...l]},qn=function(a){return w("indexChain",{index:a})},Bl=function(a){return w("propChain",{name:a})},ql=function(a,l,$,p){return w("if",{cond:a,then:l,elseif:$??[],else:p})},Kl=function(a,l){return[a,...l]},zl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ja=function(a,l,$){return{q:l,a:$}},Za=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},Qa=function(a){return w("block",{statements:a})},Xa=function(a){return w("identifier",{name:a})},Wl=function(a){return w("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Ya=function(a){return a},Jl=function(a){return w("str",{value:a.join("")})},ei=function(a){return a},ti=function(a){return w("str",{value:a.join("")})},Zl=function(){return'"'},ri=function(){return"'"},Ql=function(){return w("num",{value:parseFloat(F())})},Xl=function(){return w("num",{value:parseFloat(F())})},si=function(){return w("num",{value:parseInt(F(),10)})},Yl=function(){return w("num",{value:parseInt(F(),10)})},ni=function(){return w("bool",{value:!0})},eu=function(){return w("bool",{value:!1})},tu=function(){return w("null",{})},ai=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},ii=function(a){return a},Kn=function(a){return w("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},zn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},li=function(a){return a},iu=function(a){return w("arr",{value:a})},ui=function(a,l){return{k:a,v:l}},oi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},lu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},fi=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},an=function(a){return w("block",{statements:a??[]})},i=0,S=0,Jr=[{line:1,column:1}],o=0,Y=[],T=0,j={},At;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function F(){return t.substring(S,i)}function K(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),ci(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function ge(){return{type:"end"}}function tr(a){var l=Jr[a],$;if(l)return l;for($=a-1;!Jr[$];)$--;for(l=Jr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Jr[a]=l,l}function Ds(a,l,$){var p=tr(a),s=tr(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return u}function L(a){i<o||(i>o&&(o=i,Y=[]),Y.push(a))}function ci(a,l){return new Yo(a,null,null,l)}function ln(a,l,$){return new Yo(Yo.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ua(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=cn(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=hn(),l!==e&&(S=a,l=Ba()),a=l,a===e&&(a=Vn(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,T===0&&L(lr))))),j[$]={nextPos:i,result:a},a)}function Vn(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,T===0&&L(Ht)),l!==e){for($=[],p=i,s=i,T++,u=f(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,u=f(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,T===0&&L(Wr)),l!==e){for($=[],p=i,s=i,T++,t.substr(i,2)===M?(u=M,i+=2):(u=e,T===0&&L(In)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.substr(i,2)===M?(u=M,i+=2):(u=e,T===0&&L(In)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===M?(p=M,i+=2):(p=e,T===0&&L(In)),p!==e?(S=a,a=qa()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function un(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=on(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=on(),h!==e?(S=p,p=Ka(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=on(),h!==e?(S=p,p=Ka(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Or(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Or(),h!==e?(S=p,p=Hn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Or(),h!==e?(S=p,p=Hn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Zr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ar(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ar(),h!==e?(S=p,p=Un(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ar(),h!==e?(S=p,p=Un(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function on(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=hi(),a===e&&(a=Ar())),j[l]={nextPos:i,result:a},a)}function Or(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Qr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function Ar(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Qr(),a===e&&(a=wr(),a===e&&(a=pi(),a===e&&(a=cu(),a===e&&(a=ou(),a===e&&(a=vi(),a===e&&(a=fu(),a===e&&(a=Xr(),a===e&&(a=gi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=di(),a===e&&(a=hs()),j[l]={nextPos:i,result:a},a)}function hs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=es(),a===e&&(a=_s()))),j[l]={nextPos:i,result:a},a)}function _s(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=xi(),a===e&&(a=fn(),a===e&&(a=cn(),a===e&&(a=hn(),a===e&&(a=bi(),a===e&&(a=sa(),a===e&&(a=aa(),a===e&&(a=ia(),a===e&&(a=du(),a===e&&(a=yi(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=za(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=hn(),a===e&&(a=sa(),a===e&&(a=oa(),a===e&&(a=_i(),a===e&&(a=aa()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,_=i*76+14,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,T===0&&L(Er)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=q,i++):(u=e,T===0&&L(Gt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,T===0&&L(nt)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Ut)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Ut)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,_=j[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,T===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=he,i++):(d=e,T===0&&L(Bt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Ee,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,T===0&&L(Gr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=he,i++):(d=e,T===0&&L(Bt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Ee,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,T===0&&L(Fa)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,T===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=X,i++):(d=e,T===0&&L(os)),d!==e?(S=a,a=_l(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+19,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,T===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ot)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=O,i++):(A=e,T===0&&L(ut)),A!==e){for(E=[],I=g();I!==e;)E.push(I),I=g();I=De(),I!==e?(S=a,a=Cl(d,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,T===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z=i*76+20,se=j[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=Ee,i++):(m=e,T===0&&L(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,T===0&&L(ot)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(E=O,i++):(E=e,T===0&&L(ut)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=De(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=Ee,i++):(x=e,T===0&&L(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(S=h,h=El(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ot)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],E=g(),E!==e)for(;E!==e;)A.push(E),E=g();else A=e;A!==e?(E=De(),E!==e?(S=a,a=Sl(u,h,_,E)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=De(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=De(),u!==e?(S=a,a=Va(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[z]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,T===0&&L(Js)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Xr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Se?(l=Se,i+=4):(l=e,T===0&&L(Fr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=q,i++):(p=e,T===0&&L(Gt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Zr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(nt)),h!==e?(S=a,a=Ol(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Te?(l=Te,i+=5):(l=e,T===0&&L(Gi)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Tl()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===Pe?(l=Pe,i+=8):(l=e,T===0&&L(Oa)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,T===0&&L(Ji)),p===e&&(t.substr(i,2)===vt?(p=vt,i+=2):(p=e,T===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=Ee,i++):(p=e,T===0&&L(qt)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function di(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=hs(),l!==e){for($=[],p=i,s=[],u=Yr();u!==e;)s.push(u),u=Yr();if(u=Wn(),u!==e){for(d=[],h=Yr();h!==e;)d.push(h),h=Yr();h=hs(),h!==e?(S=p,p=Bn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Yr();u!==e;)s.push(u),u=Yr();if(u=Wn(),u!==e){for(d=[],h=Yr();h!==e;)d.push(h),h=Yr();h=hs(),h!==e?(S=p,p=Bn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Yr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=nr,i++):(l=e,T===0&&L(Ta)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Wn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,T===0&&L(Ia)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,T===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,T===0&&L(Xi)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,T===0&&L(Yi)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,T===0&&L(el)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,T===0&&L(jn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,T===0&&L(Zs)),l===e&&(t.charCodeAt(i)===62?(l=Lr,i++):(l=e,T===0&&L(Rn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,T===0&&L(ja)),l===e&&(t.charCodeAt(i)===45?(l=Mr,i++):(l=e,T===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Wt,i++):(l=e,T===0&&L(Ra)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,T===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=zr,i++):(l=e,T===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=ar,i++):(l=e,T===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Wa()),a=l,j[$]={nextPos:i,result:a},a)}function yi(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=Vr,i++):(l=e,T===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function es(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=_s(),l!==e){if($=[],p=Gn(),p===e&&(p=wi(),p===e&&(p=Zn())),p!==e)for(;p!==e;)$.push(p),p=Gn(),p===e&&(p=wi(),p===e&&(p=Zn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Gn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Jn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=qn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Zn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=Cr,i++):(l=e,T===0&&L(Os)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,_=i*76+35,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,T===0&&L(Dn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=De(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=mi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=$i(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=Kl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,T===0&&L(Qs)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=De(),d!==e?(S=a,a=zl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===ce?(l=ce,i+=4):(l=e,T===0&&L(Xs)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=De(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function xi(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=i*76+39,de=j[Oe];if(de)return i=de.nextPos,de.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,T===0&&L(al)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=q,i++):(d=e,T===0&&L(Gt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();S=m,m=Ja(s,_,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();S=m,m=Ja(s,_,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=Wt,i++):(_=e,T===0&&L(Ra)),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,T===0&&L(nt)),A!==e?(S=a,a=Za(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Oe]={nextPos:i,result:a},a}function fn(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ne?(l=Ne,i+=4):(l=e,T===0&&L(fs)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=q,i++):(p=e,T===0&&L(Gt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Zr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(nt)),h!==e?(S=a,a=Qa(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=Ci(),l!==e&&(S=a,l=Xa(l)),a=l,j[$]={nextPos:i,result:a},a)}function cn(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Ie,i++):(l=e,T===0&&L(Ts)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,T===0&&L(Ts)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Qn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,T===0&&L(Ts)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Qn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Ie,i++):(p=e,T===0&&L(Ts)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(nt)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Xn(),$!==e)for(;$!==e;)l.push($),$=Xn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Yn(),a===e&&(ct.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(br))),j[l]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=nr,i++):(l=e,T===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,T===0&&L(en)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function hn(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,T===0&&L(tn)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(tn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ea(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(tn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ea(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,T===0&&L(tn)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Me,i++):(l=e,T===0&&L(rn)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===39?(u=Me,i++):(u=e,T===0&&L(rn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===39?(u=Me,i++):(u=e,T===0&&L(rn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Me,i++):(p=e,T===0&&L(rn)),p!==e?(S=a,a=ti($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ea(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,T===0&&L(cs)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function pn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,T===0&&L(sn)),l!==e&&(S=a,l=ri()),a=l,j[$]={nextPos:i,result:a},a)}function bi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=ta(),a===e&&(a=ra()),j[l]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),ss.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Da)),l!==e){if($=[],bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er)),p!==e)for(;p!==e;)$.push(p),bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=Cr,i++):(p=e,T===0&&L(Os)),p!==e){if(s=[],bt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(er)),u!==e)for(;u!==e;)s.push(u),bt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(er));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),bt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(er)),l!==e)if(t.charCodeAt(i)===46?($=Cr,i++):($=e,T===0&&L(Os)),$!==e){if(p=[],bt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(er)),s!==e)for(;s!==e;)p.push(s),bt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(er));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),ss.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Da)),l!==e){if($=[],bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er)),p!==e)for(;p!==e;)$.push(p),bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er));else $=e;$!==e?(S=a,a=si()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),bt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(er)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function sa(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Ai(),a===e&&(a=na()),j[l]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===st?(l=st,i+=4):(l=e,T===0&&L(La)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=ni()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function na(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,T===0&&L(dr)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function aa(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,T===0&&L(il)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ia(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+56,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(nt)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,_=i*76+57,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=Kn(p)):(i=a,a=e)}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function la(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function ua(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=la(),l!==e){for($=[],p=i,s=k(),s!==e?(u=la(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=la(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=zn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=i*76+60,de=j[Oe];if(de)return i=de.nextPos,de.result;if(a=i,t.charCodeAt(i)===64?(l=Ct,i++):(l=e,T===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,T===0&&L(kt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=ua(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=O,i++):(m=e,T===0&&L(ut)),m!==e){for(_=i,A=[],E=g();E!==e;)A.push(E),E=g();if(t.charCodeAt(i)===58?(E=he,i++):(E=e,T===0&&L(Bt)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?_=U:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],E=g();E!==e;)A.push(E),E=g();if(t.charCodeAt(i)===123?(E=q,i++):(E=e,T===0&&L(Gt)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Zr(),U===e&&(U=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,T===0&&L(nt)),se!==e?(S=a,a=nu($,p,s,h,_,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Oe]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=ua(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=he,i++):(x=e,T===0&&L(Bt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?d=_:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=q,i++):(x=e,T===0&&L(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=Zr(),_===e&&(_=null),A=[],E=g();E!==e;)A.push(E),E=g();t.charCodeAt(i)===125?(E=J,i++):(E=e,T===0&&L(nt)),E!==e?(S=a,a=au(p,d,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function oa(){var a,l,$,p,s,u,d,h,x,m,_=i*76+62,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function _i(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+63,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(nt)),s!==e?(S=a,a=oi(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=ur()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,_=i*76+65,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Cs(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===pe?(h=pe,i+=2):(h=e,T===0&&L(Ys)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function Cs(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=fi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ur(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=pt,i++):(p=e,T===0&&L(Zs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Lr,i++):(h=e,T===0&&L(Rn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(ul)),l!==e){for($=[],xn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Ln));p!==e;)$.push(p),xn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Ln));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,T===0&&L(ot)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function De(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Zr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(nt)),u!==e?(S=a,a=an(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Ar()),j[d]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===_t?(a=_t,i+=2):(a=e,T===0&&L(ol)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(Ha))),j[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,T++,t.length>i?(l=t.charAt(i),i++):(l=e,T===0&&L(lr)),T--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(fl)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function w(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=K();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(At=y(),At!==e&&i===t.length)return At;throw At!==e&&i<t.length&&L(ge()),ln(Y,o<t.length?t.charAt(o):null,o<t.length?Ds(o,o+1):Ds(o,o))}const u2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function o2(t){return u2.includes(t.type)}function ow(t){return"chain"in t&&t.chain!==null}function f2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function c2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function h2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Ft(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Ft(e.expr,r);break}case"return":{e.expr=Ft(e.expr,r);break}case"each":{e.items=Ft(e.items,r),e.for=Ft(e.for,r);break}case"for":{e.from!=null&&(e.from=Ft(e.from,r)),e.to!=null&&(e.to=Ft(e.to,r)),e.times!=null&&(e.times=Ft(e.times,r)),e.for=Ft(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Ft(e.expr,r),e.dest=Ft(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Ft(e.operands[n],r);break}case"not":{e.expr=Ft(e.expr,r);break}case"if":{e.cond=Ft(e.cond,r),e.then=Ft(e.then,r);for(const n of e.elseif)n.cond=Ft(n.cond,r),n.then=Ft(n.then,r);e.else!=null&&(e.else=Ft(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Ft(e.children[n],r);break}case"match":{e.about=Ft(e.about,r);for(const n of e.qs)n.q=Ft(n.q,r),n.a=Ft(n.a,r);e.default!=null&&(e.default=Ft(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Ft(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Ft(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Ft(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Ft(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"indexChain":{e.index=Ft(e.index,r);break}case"call":{e.target=Ft(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Ft(e.args[n],r);break}case"index":{e.target=Ft(e.target,r),e.index=Ft(e.index,r);break}case"prop":{e.target=Ft(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Ft(e.members[n],r);break}case"or":case"and":{e.left=Ft(e.left,r),e.right=Ft(e.right,r);break}}if(ow(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Ft(e.chain[n],r);return e}const dp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function yp(t){throw new lf(`Reserved word "${t}" cannot be used as variable name.`)}function p2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{dp.includes(t.name)&&yp(t.name);break}case"meta":{t.name!=null&&dp.includes(t.name)&&yp(t.name);break}case"fn":{for(const r of t.args)dp.includes(r.name)&&yp(r.name);break}}return t}function v2(t){for(const r of t)Ft(r,p2);return t}function dd(t){return{type:"simple",name:t}}function g2(t,r){return{type:"generic",name:t,inners:r}}function d2(t,r){return{type:"fn",args:t,result:r}}function eh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=eh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>eh(n)).join(", "),e=eh(t.result);return`@(${r}) { ${e} }`}}}function Hf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return dd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Hf(t.inner):r=dd("any"),g2(t.name,[r])}}throw new lf(`Unknown type: '${eh(t)}'`)}else{const r=t.args.map(e=>Hf(e));return d2(r,Hf(t.result))}}function y2(t){switch(t.type){case"def":{t.varType!=null&&Hf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Hf(r.argType);t.retType!=null&&Hf(t.retType);break}}return t}function w2(t){for(const r of t)Ft(r,y2);return t}function th(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=th(n.expr.children)),r.push(n);else{if(e.length>0)throw new lf("invalid attribute.");switch(n.type){case"fn":{n.children=th(n.children);break}case"block":{n.statements=th(n.statements);break}}r.push(n)}if(e.length>0)throw new lf("invalid attribute.");return r}function m2(t){if(o2(t)&&ow(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=f2(n,v.args,v.loc);break}case"indexChain":{n=c2(n,v.index,v.loc);break}case"propChain":{n=h2(n,v.name,v.loc);break}}return n}return t}function $2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],m2);return t}function rh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function fw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return rh(t,r,e);{const{left:n,right:v,info:y}=t;return rh(n,fw(v,r,e),y)}}function Lo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Lo(t.left),Lo(t.right)]}}const x2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Lo(t.left),right:Lo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Lo(t.left),right:Lo(t.right)}),priority:3}};function b2(t){const r=t.operators.map(n=>{const v=x2[n];if(v==null)throw new lf(`No such operator: ${n}.`);return v});let e=rh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=fw(e,t.operands[2+n],r[1+n]);return Lo(e)}function A2(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],e=>e.type==="infix"?b2(e):e);return t}var Du;let _2=(Du=class{constructor(){ve(this,"plugins");this.plugins={validate:[v2,w2],transform:[th,$2,A2]}}static parse(r){return Du.instance==null&&(Du.instance=new Du),Du.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=gd(r,{startRule:"Preprocess"});e=gd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new lf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new lf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},ve(Du,"instance"),Du);const C2="0.15.0",P2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let pv=[],Yf=null;function k2(t){return pv=_2.parse(t),JSON.stringify(pv,null,"	")}async function M2(t){Yf==null||Yf.abort(),Yf=new Sa({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:fv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:fv(e.val,!0),print:!1});break}}});try{await Yf.exec(pv)}catch(r){t.err(r)}}const E2=Object.freeze(Object.defineProperty({__proto__:null,exec:M2,parse:k2,samples:P2,version:C2},Symbol.toStringTag,{value:"Module"}));class Dh extends Error{constructor(e,n){super(e);ve(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Dh)}}class uf extends Dh{constructor(r,e){super(r,e)}}class qr extends Dh{constructor(r,e){super(r,e)}}class S2 extends qr{constructor(r,e){super(r,e)}}var df=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};class qu{constructor(r=[],e,n){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new qu(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new qr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new qr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new qr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}df([Lt],qu.prototype,"log",null);df([Lt],qu.prototype,"onUpdated",null);df([Lt],qu.prototype,"createChildScope",null);df([Lt],qu.prototype,"get",null);df([Lt],qu.prototype,"getAll",null);df([Lt],qu.prototype,"add",null);df([Lt],qu.prototype,"assign",null);let Tc;const N2=new Uint8Array(16);function F2(){if(!Tc&&(Tc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tc(N2)}const dn=[];for(let t=0;t<256;++t)dn.push((t+256).toString(16).slice(1));function O2(t,r=0){return(dn[t[r+0]]+dn[t[r+1]]+dn[t[r+2]]+dn[t[r+3]]+"-"+dn[t[r+4]]+dn[t[r+5]]+"-"+dn[t[r+6]]+dn[t[r+7]]+"-"+dn[t[r+8]]+dn[t[r+9]]+"-"+dn[t[r+10]]+dn[t[r+11]]+dn[t[r+12]]+dn[t[r+13]]+dn[t[r+14]]+dn[t[r+15]]).toLowerCase()}const T2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),yd={randomUUID:T2};function I2(t,r,e){if(yd.randomUUID&&!r&&!t)return yd.randomUUID();t=t||{};const n=t.random||(t.rng||F2)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,O2(n)}const kr={type:"null"},Bi={type:"bool",value:!0},Si={type:"bool",value:!1},ht=t=>({type:"num",value:t}),Ur=t=>({type:"str",value:t}),Uf=t=>({type:"bool",value:t}),Zv=t=>({type:"obj",value:t}),Cn=t=>({type:"arr",value:t}),j2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ke=t=>({type:"fn",native:t}),R2=t=>({type:"return",value:t}),D2=()=>({type:"break",value:null}),L2=()=>({type:"continue",value:null}),H2=t=>t.type==="return"?t.value:t;function Ti(t){if(t==null)throw new qr("Expect anything, but got nothing.")}function da(t){if(t==null)throw new qr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new qr(`Expect boolean, but got ${t.type}.`)}function co(t){if(t==null)throw new qr("Expect function, but got nothing.");if(t.type!=="fn")throw new qr(`Expect function, but got ${t.type}.`)}function qs(t){if(t==null)throw new qr("Expect string, but got nothing.");if(t.type!=="str")throw new qr(`Expect string, but got ${t.type}.`)}function lt(t){if(t==null)throw new qr("Expect number, but got nothing.");if(t.type!=="num")throw new qr(`Expect number, but got ${t.type}.`)}function no(t){if(t==null)throw new qr("Expect object, but got nothing.");if(t.type!=="obj")throw new qr(`Expect object, but got ${t.type}.`)}function cc(t){if(t==null)throw new qr("Expect array, but got nothing.");if(t.type!=="arr")throw new qr(`Expect array, but got ${t.type}.`)}function U2(t){return t.type==="str"}function B2(t){return t.type==="num"}function q2(t){return t.type==="obj"}function K2(t){return t.type==="arr"}function vv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function gv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>gv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function dv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>dv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=dv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function yv(t){if(t===null)return kr;if(typeof t=="boolean")return Uf(t);if(typeof t=="string")return Ur(t);if(typeof t=="number")return ht(t);if(Array.isArray(t))return Cn(t.map(r=>yv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,yv(n));return Zv(r)}return kr}const z2={help:Ur("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Ur("0.14.1"),"Core:ai":Ur("kawaii"),"Core:not":Ke(([t])=>(da(t),t.value?Si:Bi)),"Core:eq":Ke(([t,r])=>(Ti(t),Ti(r),vv(t,r)?Bi:Si)),"Core:neq":Ke(([t,r])=>(Ti(t),Ti(r),vv(t,r)?Si:Bi)),"Core:and":Ke(([t,r])=>(da(t),t.value?(da(r),r.value?Bi:Si):Si)),"Core:or":Ke(([t,r])=>(da(t),t.value?Bi:(da(r),r.value?Bi:Si))),"Core:add":Ke(([t,r])=>(lt(t),lt(r),ht(t.value+r.value))),"Core:sub":Ke(([t,r])=>(lt(t),lt(r),ht(t.value-r.value))),"Core:mul":Ke(([t,r])=>(lt(t),lt(r),ht(t.value*r.value))),"Core:pow":Ke(([t,r])=>{lt(t),lt(r);const e=t.value**r.value;if(isNaN(e))throw new qr("Invalid operation.");return ht(e)}),"Core:div":Ke(([t,r])=>{lt(t),lt(r);const e=t.value/r.value;if(isNaN(e))throw new qr("Invalid operation.");return ht(e)}),"Core:mod":Ke(([t,r])=>(lt(t),lt(r),ht(t.value%r.value))),"Core:gt":Ke(([t,r])=>(lt(t),lt(r),t.value>r.value?Bi:Si)),"Core:lt":Ke(([t,r])=>(lt(t),lt(r),t.value<r.value?Bi:Si)),"Core:gteq":Ke(([t,r])=>(lt(t),lt(r),t.value>=r.value?Bi:Si)),"Core:lteq":Ke(([t,r])=>(lt(t),lt(r),t.value<=r.value?Bi:Si)),"Core:type":Ke(([t])=>(Ti(t),Ur(t.type))),"Core:to_str":Ke(([t])=>(Ti(t),t.type==="str"?t:t.type==="num"?Ur(t.value.toString()):Ur("?"))),"Core:range":Ke(([t,r])=>(lt(t),lt(r),t.value<r.value?Cn(Array.from({length:r.value-t.value+1},(e,n)=>ht(n+t.value))):t.value>r.value?Cn(Array.from({length:t.value-r.value+1},(e,n)=>ht(t.value-n))):Cn([t]))),"Util:uuid":Ke(()=>Ur(I2())),"Json:stringify":Ke(([t])=>(Ti(t),Ur(JSON.stringify(dv(t))))),"Json:parse":Ke(([t])=>(qs(t),yv(JSON.parse(t.value)))),"Json:parsable":Ke(([t])=>{qs(t);try{JSON.parse(t.value)}catch{return Uf(!1)}return Uf(!0)}),"Date:now":Ke(()=>ht(Date.now())),"Date:year":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ke(([t])=>(t&&lt(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ke(([t])=>(qs(t),ht(new Date(t.value).getTime()))),"Math:Infinity":ht(1/0),"Math:PI":ht(Math.PI),"Math:sin":Ke(([t])=>(lt(t),ht(Math.sin(t.value)))),"Math:cos":Ke(([t])=>(lt(t),ht(Math.cos(t.value)))),"Math:abs":Ke(([t])=>(lt(t),ht(Math.abs(t.value)))),"Math:sqrt":Ke(([t])=>{lt(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new qr("Invalid operation.");return ht(r)}),"Math:round":Ke(([t])=>(lt(t),ht(Math.round(t.value)))),"Math:ceil":Ke(([t])=>(lt(t),ht(Math.ceil(t.value)))),"Math:floor":Ke(([t])=>(lt(t),ht(Math.floor(t.value)))),"Math:min":Ke(([t,r])=>(lt(t),lt(r),ht(Math.min(t.value,r.value)))),"Math:max":Ke(([t,r])=>(lt(t),lt(r),ht(Math.max(t.value,r.value)))),"Math:rnd":Ke(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ht(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ht(Math.random())),"Math:gen_rng":Ke(([t])=>{if(Ti(t),t.type!=="num"&&t.type!=="str")return kr;const r=ff(t.value.toString());return Ke(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?ht(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ht(r()))}),"Num:to_hex":Ke(([t])=>(lt(t),Ur(t.value.toString(16)))),"Num:from_hex":Ke(([t])=>(qs(t),ht(parseInt(t.value,16)))),"Str:lf":Ur(`
`),"Str:lt":Ke(([t,r])=>(qs(t),qs(r),t.value<r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Str:gt":Ke(([t,r])=>(qs(t),qs(r),t.value>r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Obj:keys":Ke(([t])=>(no(t),Cn(Array.from(t.value.keys()).map(r=>Ur(r))))),"Obj:vals":Ke(([t])=>(no(t),Cn(Array.from(t.value.values())))),"Obj:kvs":Ke(([t])=>(no(t),Cn(Array.from(t.value.entries()).map(([r,e])=>Cn([Ur(r),e]))))),"Obj:get":Ke(([t,r])=>(no(t),qs(r),t.value.get(r.value)??kr)),"Obj:set":Ke(([t,r,e])=>(no(t),qs(r),Ti(e),t.value.set(r.value,e),kr)),"Obj:has":Ke(([t,r])=>(no(t),qs(r),Uf(t.value.has(r.value)))),"Obj:copy":Ke(([t])=>(no(t),Zv(new Map(t.value)))),"Async:interval":Ke(async([t,r,e],n)=>{lt(t),co(r),e&&(da(e),e.value&&n.call(r,[]));const v=setInterval(()=>{n.call(r,[])},t.value),y=()=>{clearInterval(v)};return n.registerAbortHandler(y),Ke(([],C)=>{clearInterval(v),C.unregisterAbortHandler(y)})}),"Async:timeout":Ke(async([t,r],e)=>{lt(t),co(r);const n=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(n)};return e.registerAbortHandler(v),Ke(([],y)=>{clearTimeout(n),y.unregisterAbortHandler(v)})})},$f={num:{to_str:t=>Ke(async(r,e)=>Ur(t.value.toString()))},str:{to_num:t=>Ke(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?kr:ht(n)}),len:t=>ht(hf(t.value)),replace:t=>Ke(async([r,e],n)=>(qs(r),qs(e),Ur(t.value.split(r.value).join(e.value)))),index_of:t=>Ke(async([r],e)=>(qs(r),ht(vf(t.value,r.value)))),incl:t=>Ke(async([r],e)=>(qs(r),t.value.includes(r.value)?Bi:Si)),trim:t=>Ke(async(r,e)=>Ur(t.value.trim())),upper:t=>Ke(async(r,e)=>Ur(t.value.toUpperCase())),lower:t=>Ke(async(r,e)=>Ur(t.value.toLowerCase())),split:t=>Ke(async([r],e)=>(r&&qs(r),Cn(r?t.value.split(r?r.value:"").map(n=>Ur(n)):Gs(t.value).map(n=>Ur(n))))),slice:t=>Ke(async([r,e],n)=>(lt(r),lt(e),Ur(pf(t.value,r.value,e.value)))),pick:t=>Ke(async([r],e)=>{lt(r);const v=Gs(t.value)[r.value];return v?Ur(v):kr})},arr:{len:t=>ht(t.value.length),push:t=>Ke(async([r],e)=>(Ti(r),t.value.push(r),t)),unshift:t=>Ke(async([r],e)=>(Ti(r),t.value.unshift(r),t)),pop:t=>Ke(async(r,e)=>t.value.pop()??kr),shift:t=>Ke(async(r,e)=>t.value.shift()??kr),concat:t=>Ke(async([r],e)=>(cc(r),Cn(t.value.concat(r.value)))),slice:t=>Ke(async([r,e],n)=>(lt(r),lt(e),Cn(t.value.slice(r.value,e.value)))),join:t=>Ke(async([r],e)=>(r&&qs(r),Ur(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Ke(async([r],e)=>{co(r);const n=t.value.map(async(v,y)=>await e.call(r,[v,ht(y)]));return Cn(await Promise.all(n))}),filter:t=>Ke(async([r],e)=>{co(r);const n=[];for(let v=0;v<t.value.length;v++){const y=t.value[v],C=await e.call(r,[y,ht(v)]);da(C),C.value&&n.push(y)}return Cn(n)}),reduce:t=>Ke(async([r,e],n)=>{co(r);const v=e!=null;let y=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];y=await n.call(r,[y,P,ht(C)])}return y}),find:t=>Ke(async([r],e)=>{co(r);for(let n=0;n<t.value.length;n++){const v=t.value[n],y=await e.call(r,[v,ht(n)]);if(da(y),y.value)return v}return kr}),incl:t=>Ke(async([r],e)=>(Ti(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Si:(v=>v.value.map(y=>y.type==="str"||y.type==="num"||y.type==="bool"?y.value:y.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Bi:Si)),reverse:t=>Ke(async(r,e)=>(t.value.reverse(),kr)),copy:t=>Ke(async(r,e)=>Cn([...t.value])),sort:t=>Ke(async([r],e)=>{const n=async(y,C)=>{if(y.length<=1)return y;const P=Math.floor(y.length/2),M=await n(y.slice(0,P),C),N=await n(y.slice(P),C);return v(M,N,C)},v=async(y,C,P)=>{const M=[];let N=0,O=0;for(;N<y.length&&O<C.length;){const H=y[N],q=C[O],J=await e.call(P,[H,q]);lt(J),J.value<0?(M.push(y[N]),N++):(M.push(C[O]),O++)}return M.concat(y.slice(N)).concat(C.slice(O))};return co(r),cc(t),t.value=await n(t.value,r),t})}};var Ri=function(t,r,e,n){var v=arguments.length,y=v<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(y=(v<3?C(y):v>3?C(r,e,y):C(r,e))||y);return v>3&&y&&Object.defineProperty(r,e,y),y};const cw=300,V2=cw-1;class Na{constructor(r,e){ve(this,"vars");ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);this.opts=e??{};const n={print:Ke(([v])=>{Ti(v),this.opts.out&&this.opts.out(v)}),readline:Ke(async v=>{const y=v[0];if(qs(y),this.opts.in==null)return kr;const C=await this.opts.in(y.value);return Ur(C)})};this.vars={...r,...z2,...n},this.scope=new qu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,y)=>{switch(v){case"add":this.log("var:add",y);break;case"read":this.log("var:read",y);break;case"write":this.log("var:write",y);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(y=>e(y));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const y={};for(const[C,P]of v.value.entries())y[C]=e(P);return y}case"str":return v.value;default:return}}const n=new Map;for(const v of r)switch(v.type){case"meta":{n.set(v.name,e(v.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const v=await this._eval(n.expr,e);e.add(n.name,v),this.scope.add(r.name+":"+n.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??kr;{const n=new Map;for(let y=0;y<(r.args??[]).length;y++)n.set(r.args[y],e[y]);const v=r.scope.createChildScope(n);return H2(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return kr;if(this.stepCount%cw===V2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new qr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);co(n);const v=await Promise.all(r.args.map(y=>this._eval(y,e)));return this._fn(n,v)}case"if":{const n=await this._eval(r.cond,e);if(da(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const y=await this._eval(v.cond,e);if(da(y),y.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return kr}case"match":{const n=await this._eval(r.about,e);for(const v of r.qs){const y=await this._eval(v.q,e);if(vv(n,y))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):kr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return kr}case"for":{if(r.times){const n=await this._eval(r.times,e);lt(n);for(let v=0;v<n.value;v++){const y=await this._eval(r.for,e);if(y.type==="break")break;if(y.type==="return")return y}}else{const n=await this._eval(r.from,e),v=await this._eval(r.to,e);lt(n),lt(v);for(let y=n.value;y<n.value+v.value;y++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,ht(y)]])));if(C.type==="break")break;if(C.type==="return")return C}}return kr}case"each":{const n=await this._eval(r.items,e);cc(n);for(const v of n.value){const y=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(y.type==="break")break;if(y.type==="return")return y}return kr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const y of r.attr)v.push({name:y.name,value:await this._eval(y.value,e)});n.attr=v}return e.add(r.name,n),kr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),kr}case"addAssign":{const n=await this._eval(r.dest,e);lt(n);const v=await this._eval(r.expr,e);return lt(v),await this.assign(e,r.dest,ht(n.value+v.value)),kr}case"subAssign":{const n=await this._eval(r.dest,e);lt(n);const v=await this._eval(r.expr,e);return lt(v),await this.assign(e,r.dest,ht(n.value-v.value)),kr}case"null":return kr;case"bool":return Uf(r.value);case"num":return ht(r.value);case"str":return Ur(r.value);case"arr":return Cn(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const v of r.value.keys())n.set(v,await this._eval(r.value.get(v),e));return Zv(n)}case"prop":{const n=await this._eval(r.target,e);if(q2(n))return n.value.has(r.name)?n.value.get(r.name):kr;if(B2(n)){if(Object.hasOwn($f.num,r.name))return $f.num[r.name](n);throw new qr(`No such prop (${r.name}) in ${n.type}.`)}else if(U2(n)){if(Object.hasOwn($f.str,r.name))return $f.str[r.name](n);throw new qr(`No such prop (${r.name}) in ${n.type}.`)}else if(K2(n)){if(Object.hasOwn($f.arr,r.name))return $f.arr[r.name](n);throw new qr(`No such prop (${r.name}) in ${n.type}.`)}else throw new qr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);cc(n);const v=await this._eval(r.index,e);lt(v);const y=n.value[v.value];if(y===void 0)throw new S2(`Index out of range. index: ${v.value} max: ${n.value.length-1}`);return y}case"not":{const n=await this._eval(r.expr,e);return da(n),Uf(!n.value)}case"fn":return j2(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const v of r.tmpl)if(typeof v=="string")n+=v;else{const y=await this._eval(v,e);let C="";y.type==="str"?C=y.value:y.type==="num"&&(C=y.value.toString()),n+=C}return Ur(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),R2(n)}case"break":return this.log("block:break",{scope:e.name}),D2();case"continue":return this.log("block:continue",{scope:e.name}),L2();case"ns":return kr;case"meta":return kr;case"and":{const n=await this._eval(r.left,e);if(da(n),n.value){const v=await this._eval(r.right,e);return da(v),v}else return n}case"or":{const n=await this._eval(r.left,e);if(da(n),n.value)return n;{const v=await this._eval(r.right,e);return da(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=kr;for(let v=0;v<r.length;v++){const y=r[v];if(n=await this._eval(y,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const v=await this._eval(e.target,r);cc(v);const y=await this._eval(e.index,r);lt(y),v.value[y.value]=n}else if(e.type==="prop"){const v=await this._eval(e.target,r);no(v),v.value.set(e.name,n)}else throw new qr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}Ri([Lt],Na.prototype,"exec",null);Ri([Lt],Na.prototype,"execFn",null);Ri([Lt],Na.prototype,"log",null);Ri([Lt],Na.prototype,"collectNs",null);Ri([Lt],Na.prototype,"collectNsMember",null);Ri([Lt],Na.prototype,"_fn",null);Ri([Lt],Na.prototype,"_eval",null);Ri([Lt],Na.prototype,"_run",null);Ri([Lt],Na.prototype,"registerAbortHandler",null);Ri([Lt],Na.prototype,"unregisterAbortHandler",null);Ri([Lt],Na.prototype,"abort",null);Ri([Lt],Na.prototype,"assign",null);Ri([Lt],Na,"collectMetadata",null);function W2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function ef(t,r,e,n){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,ef.prototype),v.expected=r,v.found=e,v.location=n,v.name="SyntaxError",v}W2(ef,Error);function wp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}ef.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,y=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+y.line+":"+y.column;if(e){var P=this.location.end,M=wp("",y.line.toString().length," "),N=e[v.line-1],O=v.line===P.line?P.column:N.length+1,H=O-v.column||1;r+=`
 --> `+C+`
`+M+` |
`+y.line+" | "+N+`
`+M+" | "+wp("",v.column-1," ")+wp("",H,"^")}else r+=`
 at `+C}return r};ef.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var O=N.parts.map(function(H){return Array.isArray(H)?y(H[0])+"-"+y(H[1]):y(H)});return"["+(N.inverted?"^":"")+O.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function n(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function y(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(O){return"\\x0"+n(O)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(O){return"\\x"+n(O)})}function C(N){return e[N.type](N)}function P(N){var O=N.map(C),H,q;if(O.sort(),O.length>0){for(H=1,q=1;H<O.length;H++)O[H-1]!==O[H]&&(O[q]=O[H],q++);O.length=q}switch(O.length){case 1:return O[0];case 2:return O[0]+" or "+O[1];default:return O.slice(0,-1).join(", ")+", or "+O[O.length-1]}}function M(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function wd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,v={Preprocess:R,Main:un},y=R,C="//",P="/*",M="*/",N="(",O=")",H="::",q="{",J="}",we="###",ue="let",he=":",Ee="=",G="var",V="<:",Q="#[",X="]",Z="each",ee=",",ie="for",ae="return",Se="loop",Te="break",Pe="continue",at="+=",vt="-=",nr="\\",xt="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",Wt="*",_r="^",zr="/",ar="%",Vr="!",ir="[",Cr=".",W="if",re="elif",ce="else",xe="match",pe="=>",Ne="eval",Ie="`",Ae='"',Me="'",$e='\\"',Je="\\'",st="true",Ye="false",Qe="null",it=";",Ct="@",yt="@(",_t=`\r
`,Pt=/^[A-Z0-9_:]/i,ct=/^[^`{]/,ks=/^[{}`]/,us=/^[+\-]/,ss=/^[1-9]/,bt=/^[0-9]/,Rt=/^[A-Z_]/i,xn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,Vi=/^[ \t\r\n]/,Wi=/^[ \t]/,lr=uu(),Ht=le("//",!1),Wr=le("/*",!1),In=le("*/",!1),kt=le("(",!1),ut=le(")",!1),Er=le("::",!1),Gt=le("{",!1),nt=le("}",!1),Ut=le("###",!1),ms=le("let",!1),Bt=le(":",!1),qt=le("=",!1),Gr=le("var",!1),Fa=le("<:",!1),Sr=le("#[",!1),os=le("]",!1),Ns=le("each",!1),ot=le(",",!1),Ot=le("for",!1),Js=le("return",!1),Nr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Fr=le("loop",!1),Gi=le("break",!1),Oa=le("continue",!1),Ji=le("+=",!1),Zi=le("-=",!1),Ta=le("\\",!1),Ia=le("||",!1),Qi=le("&&",!1),Xi=le("==",!1),Yi=le("!=",!1),el=le("<=",!1),jn=le(">=",!1),Zs=le("<",!1),Rn=le(">",!1),ja=le("+",!1),tl=le("-",!1),Ra=le("*",!1),Fs=le("^",!1),rl=le("/",!1),sl=le("%",!1),nl=le("!",!1),$s=le("[",!1),Os=le(".",!1),Dn=le("if",!1),Qs=le("elif",!1),Xs=le("else",!1),al=le("match",!1),Ys=le("=>",!1),fs=le("eval",!1),Ts=le("`",!1),br=D(["`","{"],!0,!1),en=D(["{","}","`"],!1,!1),tn=le('"',!1),rn=le("'",!1),cs=le('\\"',!1),sn=le("\\'",!1),Is=D(["+","-"],!1,!1),Da=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),La=le("true",!1),dr=le("false",!1),il=le("null",!1),nn=le(";",!1),ll=le("@",!1),js=le("@(",!1),ul=D([["A","Z"],"_"],!1,!0),Ln=D([["A","Z"],["0","9"],"_"],!1,!0),ol=le(`\r
`,!1),Ha=D(["\r",`
`],!1,!1),fl=D([" ","	","\r",`
`],!1,!1),cl=D([" ","	"],!1,!1),Ua=function(a){return a.join("")},hl=function(){return F()},Ba=function(){return F()},pl=function(){return""},qa=function(){return""},vl=function(a){return a??[]},Ka=function(a,l){return l},gl=function(a,l){return[a,...l]},Hn=function(a,l){return l},dl=function(a,l){return[a,...l]},Un=function(a,l){return l},yl=function(a,l){return[a,...l]},za=function(a){return a},wl=function(a,l){return w("ns",{name:a,members:l})},ml=function(a,l){return w("meta",{name:a,value:l})},$l=function(a){return w("meta",{name:null,value:a})},xl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},bl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Al=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},_l=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Cl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Pl=function(a,l,$){return w("each",{var:a,items:l,for:$})},kl=function(a,l){return l},Ml=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},El=function(a,l){return l},Sl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},Nl=function(a,l){return w("for",{times:a,for:l})},Va=function(a,l){return w("for",{times:a,for:l})},Fl=function(a){return w("return",{expr:a})},Ol=function(a){return w("loop",{statements:a})},Tl=function(){return w("break",{})},Il=function(){return w("continue",{})},jl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Bn=function(a,l,$){return{op:l,term:$}},Rl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Wa=function(){return F()},Dl=function(a){return w("not",{expr:a})},Ll=function(a,l){return{...a,chain:l}},Hl=function(a){return w("callChain",{args:a??[]})},Ga=function(a,l){return l},Ul=function(a,l){return[a,...l]},qn=function(a){return w("indexChain",{index:a})},Bl=function(a){return w("propChain",{name:a})},ql=function(a,l,$,p){return w("if",{cond:a,then:l,elseif:$??[],else:p})},Kl=function(a,l){return[a,...l]},zl=function(a,l){return{cond:a,then:l}},Vl=function(a){return a},Ja=function(a,l,$){return{q:l,a:$}},Za=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},Qa=function(a){return w("block",{statements:a})},Xa=function(a){return w("identifier",{name:a})},Wl=function(a){return w("tmpl",{tmpl:a})},Gl=function(a){return a.join("")},Ya=function(a){return a},Jl=function(a){return w("str",{value:a.join("")})},ei=function(a){return a},ti=function(a){return w("str",{value:a.join("")})},Zl=function(){return'"'},ri=function(){return"'"},Ql=function(){return w("num",{value:parseFloat(F())})},Xl=function(){return w("num",{value:parseFloat(F())})},si=function(){return w("num",{value:parseInt(F(),10)})},Yl=function(){return w("num",{value:parseInt(F(),10)})},ni=function(){return w("bool",{value:!0})},eu=function(){return w("bool",{value:!1})},tu=function(){return w("null",{})},ai=function(a,l){return{k:a,v:l}},ru=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},ii=function(a){return a},Kn=function(a){return w("arr",{value:a})},su=function(a,l){return{name:a,argType:l}},zn=function(a,l){return[a,...l]},nu=function(a,l,$,p,s,u){return(a.length>0||$.length>0)&&Rs("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:p??[],retType:s},u??[]),mut:!1,attr:[]})},au=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},li=function(a){return a},iu=function(a){return w("arr",{value:a})},ui=function(a,l){return{k:a,v:l}},oi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},lu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},fi=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},xs=function(){return F()},yr=function(){return F()},an=function(a){return w("block",{statements:a??[]})},i=0,S=0,Jr=[{line:1,column:1}],o=0,Y=[],T=0,j={},At;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');y=v[r.startRule]}function F(){return t.substring(S,i)}function K(){return Ds(S,i)}function Rs(a,l){throw l=l!==void 0?l:Ds(S,i),ci(a,l)}function le(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function uu(){return{type:"any"}}function ge(){return{type:"end"}}function tr(a){var l=Jr[a],$;if(l)return l;for($=a-1;!Jr[$];)$--;for(l=Jr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Jr[a]=l,l}function Ds(a,l,$){var p=tr(a),s=tr(l),u={source:n,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:s.line,column:s.column}};return u}function L(a){i<o||(i>o&&(o=i,Y=[]),Y.push(a))}function ci(a,l){return new ef(a,null,null,l)}function ln(a,l,$){return new ef(ef.buildMessage(a,l),a,l,$)}function R(){var a,l,$,p=i*76+0,s=j[p];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=bs();$!==e;)l.push($),$=bs();return S=a,l=Ua(l),a=l,j[p]={nextPos:i,result:a},a}function bs(){var a,l,$=i*76+1,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=cn(),l!==e&&(S=a,l=hl()),a=l,a===e&&(a=i,l=hn(),l!==e&&(S=a,l=Ba()),a=l,a===e&&(a=Vn(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,T===0&&L(lr))))),j[$]={nextPos:i,result:a},a)}function Vn(){var a,l,$,p,s,u,d=i*76+2,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,T===0&&L(Ht)),l!==e){for($=[],p=i,s=i,T++,u=f(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,u=f(),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=pl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,T===0&&L(Wr)),l!==e){for($=[],p=i,s=i,T++,t.substr(i,2)===M?(u=M,i+=2):(u=e,T===0&&L(In)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.substr(i,2)===M?(u=M,i+=2):(u=e,T===0&&L(In)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr)),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===M?(p=M,i+=2):(p=e,T===0&&L(In)),p!==e?(S=a,a=qa()):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function un(){var a,l,$,p,s,u=i*76+3,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=As(),$===e&&($=null),p=[],s=g();s!==e;)p.push(s),s=g();return S=a,a=vl($),j[u]={nextPos:i,result:a},a}function As(){var a,l,$,p,s,u,d,h,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=on(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=on(),h!==e?(S=p,p=Ka(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=on(),h!==e?(S=p,p=Ka(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=gl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,s,u,d,h,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Or(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Or(),h!==e?(S=p,p=Hn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Or(),h!==e?(S=p,p=Hn(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=dl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Zr(){var a,l,$,p,s,u,d,h,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ar(),l!==e){for($=[],p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ar(),h!==e?(S=p,p=Un(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=Ar(),h!==e?(S=p,p=Un(l,h)):(i=p,p=e)}else i=p,p=e}S=a,a=yl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function on(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=hi(),a===e&&(a=Ar())),j[l]={nextPos:i,result:a},a)}function Or(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=Qr(),a===e&&(a=wr(),a===e&&(a=Ls())),j[l]={nextPos:i,result:a},a)}function Ar(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=Qr(),a===e&&(a=wr(),a===e&&(a=pi(),a===e&&(a=cu(),a===e&&(a=ou(),a===e&&(a=vi(),a===e&&(a=fu(),a===e&&(a=Xr(),a===e&&(a=gi(),a===e&&(a=hu(),a===e&&(a=pu(),a===e&&(a=Xe()))))))))))),j[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=di(),a===e&&(a=hs()),j[l]={nextPos:i,result:a},a)}function hs(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=vu(),a===e&&(a=yu(),a===e&&(a=es(),a===e&&(a=_s()))),j[l]={nextPos:i,result:a},a)}function _s(){var a,l,$,p,s,u,d=i*76+12,h=j[d];if(h)return i=h.nextPos,h.result;if(a=xi(),a===e&&(a=fn(),a===e&&(a=cn(),a===e&&(a=hn(),a===e&&(a=bi(),a===e&&(a=sa(),a===e&&(a=aa(),a===e&&(a=ia(),a===e&&(a=du(),a===e&&(a=yi(),a===e&&(a=gu(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=za(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Ve(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=hn(),a===e&&(a=sa(),a===e&&(a=oa(),a===e&&(a=_i(),a===e&&(a=aa()))))),j[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,p,s,u,d,h,x,m,_=i*76+14,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===H?(l=H,i+=2):(l=e,T===0&&L(Er)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=q,i++):(u=e,T===0&&L(Gt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=J,i++):(m=e,T===0&&L(nt)),m!==e?(S=a,a=wl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function hi(){var a,l,$,p,s,u,d=i*76+15,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Ut)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Ve(),u!==e?(S=a,a=ml(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===we?(l=we,i+=3):(l=e,T===0&&L(Ut)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=Ve(),p!==e?(S=a,a=$l(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qr(){var a,l,$,p,s,u,d,h,x,m=i*76+16,_=j[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===ue?(l=ue,i+=3):(l=e,T===0&&L(ms)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=he,i++):(d=e,T===0&&L(Bt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Ee,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=xl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===G?(l=G,i+=3):(l=e,T===0&&L(Gr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===58?(d=he,i++):(d=e,T===0&&L(Bt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===61?(d=Ee,i++):(d=e,T===0&&L(qt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(S=a,a=bl(p,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function pi(){var a,l,$,p,s=i*76+17,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===V?(l=V,i+=2):(l=e,T===0&&L(Fa)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(S=a,a=Al(p)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function ou(){var a,l,$,p,s,u,d,h=i*76+18,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,T===0&&L(Sr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=We(),p!==e){for(s=i,u=[],d=g();d!==e;)u.push(d),d=g();for(d=Ve(),d!==e?s=d:(i=s,s=e),s===e&&(s=null),u=[],d=g();d!==e;)u.push(d),d=g();t.charCodeAt(i)===93?(d=X,i++):(d=e,T===0&&L(os)),d!==e?(S=a,a=_l(p,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function vi(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+19,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,T===0&&L(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ot)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=O,i++):(A=e,T===0&&L(ut)),A!==e){for(E=[],I=g();I!==e;)E.push(I),I=g();I=De(),I!==e?(S=a,a=Cl(d,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,T===0&&L(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(S=a,a=Pl(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function fu(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z=i*76+20,se=j[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(t.substr(i,3)===ue?(s=ue,i+=3):(s=e,T===0&&L(ms)),s!==e){if(u=[],d=g(),d!==e)for(;d!==e;)u.push(d),d=g();else u=e;if(u!==e)if(d=We(),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=Ee,i++):(m=e,T===0&&L(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(S=x,x=kl(d,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=ee,i++):(m=e,T===0&&L(ot)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(E=O,i++):(E=e,T===0&&L(ut)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=De(),U!==e?(S=a,a=Ml(d,x,A,U)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===ue?(p=ue,i+=3):(p=e,T===0&&L(ms)),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=Ee,i++):(x=e,T===0&&L(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(S=h,h=El(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=ee,i++):(x=e,T===0&&L(ot)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],E=g(),E!==e)for(;E!==e;)A.push(E),E=g();else A=e;A!==e?(E=De(),E!==e?(S=a,a=Sl(u,h,_,E)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,T===0&&L(kt)),p!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();h=De(),h!==e?(S=a,a=Nl(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,T===0&&L(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=De(),u!==e?(S=a,a=Va(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[z]={nextPos:i,result:a},a}function cu(){var a,l,$,p,s,u=i*76+21,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,T===0&&L(Js)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=Xe(),s!==e?(S=a,a=Fl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Xr(){var a,l,$,p,s,u,d,h,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Se?(l=Se,i+=4):(l=e,T===0&&L(Fr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=q,i++):(p=e,T===0&&L(Gt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Zr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(nt)),h!==e?(S=a,a=Ol(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gi(){var a,l,$,p,s=i*76+23,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Te?(l=Te,i+=5):(l=e,T===0&&L(Gi)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Tl()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function hu(){var a,l,$,p,s=i*76+24,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===Pe?(l=Pe,i+=8):(l=e,T===0&&L(Oa)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=Il()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function pu(){var a,l,$,p,s,u,d=i*76+25,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,T===0&&L(Ji)),p===e&&(t.substr(i,2)===vt?(p=vt,i+=2):(p=e,T===0&&L(Zi)),p===e&&(t.charCodeAt(i)===61?(p=Ee,i++):(p=e,T===0&&L(qt)))),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(S=a,a=jl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function di(){var a,l,$,p,s,u,d,h,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=hs(),l!==e){for($=[],p=i,s=[],u=Yr();u!==e;)s.push(u),u=Yr();if(u=Wn(),u!==e){for(d=[],h=Yr();h!==e;)d.push(h),h=Yr();h=hs(),h!==e?(S=p,p=Bn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,s=[],u=Yr();u!==e;)s.push(u),u=Yr();if(u=Wn(),u!==e){for(d=[],h=Yr();h!==e;)d.push(h),h=Yr();h=hs(),h!==e?(S=p,p=Bn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(S=a,a=Rl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function Yr(){var a,l,$,p=i*76+27,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=nr,i++):(l=e,T===0&&L(Ta)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),j[p]={nextPos:i,result:a},a)}function Wn(){var a,l,$=i*76+28,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,T===0&&L(Ia)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,T===0&&L(Qi)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,T===0&&L(Xi)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,T===0&&L(Yi)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,T===0&&L(el)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,T===0&&L(jn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,T===0&&L(Zs)),l===e&&(t.charCodeAt(i)===62?(l=Lr,i++):(l=e,T===0&&L(Rn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,T===0&&L(ja)),l===e&&(t.charCodeAt(i)===45?(l=Mr,i++):(l=e,T===0&&L(tl)),l===e&&(t.charCodeAt(i)===42?(l=Wt,i++):(l=e,T===0&&L(Ra)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,T===0&&L(Fs)),l===e&&(t.charCodeAt(i)===47?(l=zr,i++):(l=e,T===0&&L(rl)),l===e&&(t.charCodeAt(i)===37?(l=ar,i++):(l=e,T===0&&L(sl))))))))))))))),l!==e&&(S=a,l=Wa()),a=l,j[$]={nextPos:i,result:a},a)}function yi(){var a,l,$,p=i*76+29,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=Vr,i++):(l=e,T===0&&L(nl)),l!==e?($=Xe(),$!==e?(S=a,a=Dl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function es(){var a,l,$,p,s=i*76+30,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,l=_s(),l!==e){if($=[],p=Gn(),p===e&&(p=wi(),p===e&&(p=Zn())),p!==e)for(;p!==e;)$.push(p),p=Gn(),p===e&&(p=wi(),p===e&&(p=Zn()));else $=e;$!==e?(S=a,a=Ll(l,$)):(i=a,a=e)}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Gn(){var a,l,$,p,s,u,d=i*76+31,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,T===0&&L(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Jn(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e?(S=a,a=Hl(p)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Jn(){var a,l,$,p,s,u,d=i*76+32,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=Xe(),u!==e?(S=p,p=Ga(l,u)):(i=p,p=e)):(i=p,p=e);S=a,a=Ul(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wi(){var a,l,$,p,s,u,d=i*76+33,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=qn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Zn(){var a,l,$,p=i*76+34,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=Cr,i++):(l=e,T===0&&L(Os)),l!==e?($=We(),$!==e?(S=a,a=Bl($)):(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function vu(){var a,l,$,p,s,u,d,h,x,m,_=i*76+35,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,T===0&&L(Dn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=De(),u!==e){if(d=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=mi(),x!==e?d=x:(i=d,d=e)):(i=d,d=e),d===e&&(d=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=$i(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),S=a,a=ql(p,u,d,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function mi(){var a,l,$,p,s,u,d=i*76+36,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],p=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?p=u:(i=p,p=e)}S=a,a=Kl(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Hs(){var a,l,$,p,s,u,d,h=i*76+37,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,T===0&&L(Qs)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=De(),d!==e?(S=a,a=zl(s,d)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,s,u=i*76+38,d=j[u];if(d)return i=d.nextPos,d.result;if(a=i,t.substr(i,4)===ce?(l=ce,i+=4):(l=e,T===0&&L(Xs)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();s=De(),s!==e?(S=a,a=Vl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function xi(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=i*76+39,de=j[Oe];if(de)return i=de.nextPos,de.result;if(a=i,t.substr(i,5)===xe?(l=xe,i+=5):(l=e,T===0&&L(al)),l!==e)if($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();if(s=Xe(),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();if(t.charCodeAt(i)===123?(d=q,i++):(d=e,T===0&&L(Gt)),d!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();S=m,m=Ja(s,_,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();S=m,m=Ja(s,_,U)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=Wt,i++):(_=e,T===0&&L(Ra)),_!==e){for(A=[],E=g();E!==e;)A.push(E),E=g();if(t.substr(i,2)===pe?(E=pe,i+=2):(E=e,T===0&&L(Ys)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();if(U=De(),U!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=U}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=J,i++):(A=e,T===0&&L(nt)),A!==e?(S=a,a=Za(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Oe]={nextPos:i,result:a},a}function fn(){var a,l,$,p,s,u,d,h,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ne?(l=Ne,i+=4):(l=e,T===0&&L(fs)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=q,i++):(p=e,T===0&&L(Gt)),p!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=Zr(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();t.charCodeAt(i)===125?(h=J,i++):(h=e,T===0&&L(nt)),h!==e?(S=a,a=Qa(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function gu(){var a,l,$=i*76+41,p=j[$];return p?(i=p.nextPos,p.result):(a=i,l=Ci(),l!==e&&(S=a,l=Xa(l)),a=l,j[$]={nextPos:i,result:a},a)}function cn(){var a,l,$,p,s,u,d=i*76+42,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Ie,i++):(l=e,T===0&&L(Ts)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,T===0&&L(Ts)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Qn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===96?(u=Ie,i++):(u=e,T===0&&L(Ts)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Qn(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Ie,i++):(p=e,T===0&&L(Ts)),p!==e?(S=a,a=Wl($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function Qn(){var a,l,$,p,s,u,d=i*76+43,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(nt)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=Xn(),$!==e)for(;$!==e;)l.push($),$=Xn();else l=e;l!==e&&(S=a,l=Gl(l)),a=l}return j[d]={nextPos:i,result:a},a}function Xn(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=Yn(),a===e&&(ct.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(br))),j[l]={nextPos:i,result:a},a)}function Yn(){var a,l,$,p=i*76+45,s=j[p];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=nr,i++):(l=e,T===0&&L(Ta)),l!==e?(ks.test(t.charAt(i))?($=t.charAt(i),i++):($=e,T===0&&L(en)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[p]={nextPos:i,result:a},a)}function hn(){var a,l,$,p,s,u,d=i*76+46,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ae,i++):(l=e,T===0&&L(tn)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(tn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ea(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===34?(u=Ae,i++):(u=e,T===0&&L(tn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ea(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=Ya(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Ae,i++):(p=e,T===0&&L(tn)),p!==e?(S=a,a=Jl($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Me,i++):(l=e,T===0&&L(rn)),l!==e){for($=[],p=i,s=i,T++,t.charCodeAt(i)===39?(u=Me,i++):(u=e,T===0&&L(rn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=i,T++,t.charCodeAt(i)===39?(u=Me,i++):(u=e,T===0&&L(rn)),T--,u===e?s=void 0:(i=s,s=e),s!==e?(u=pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,T===0&&L(lr))),u!==e?(S=p,p=ei(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Me,i++):(p=e,T===0&&L(rn)),p!==e?(S=a,a=ti($)):(i=a,a=e)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ea(){var a,l,$=i*76+47,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,T===0&&L(cs)),l!==e&&(S=a,l=Zl()),a=l,j[$]={nextPos:i,result:a},a)}function pn(){var a,l,$=i*76+48,p=j[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===Je?(l=Je,i+=2):(l=e,T===0&&L(sn)),l!==e&&(S=a,l=ri()),a=l,j[$]={nextPos:i,result:a},a)}function bi(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=ta(),a===e&&(a=ra()),j[l]={nextPos:i,result:a},a)}function ta(){var a,l,$,p,s,u,d=i*76+50,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),ss.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Da)),l!==e){if($=[],bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er)),p!==e)for(;p!==e;)$.push(p),bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=Cr,i++):(p=e,T===0&&L(Os)),p!==e){if(s=[],bt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(er)),u!==e)for(;u!==e;)s.push(u),bt.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,T===0&&L(er));else s=e;s!==e?(S=a,a=Ql()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),bt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(er)),l!==e)if(t.charCodeAt(i)===46?($=Cr,i++):($=e,T===0&&L(Os)),$!==e){if(p=[],bt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(er)),s!==e)for(;s!==e;)p.push(s),bt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,T===0&&L(er));else p=e;p!==e?(S=a,a=Xl()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ra(){var a,l,$,p,s=i*76+51,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),ss.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(Da)),l!==e){if($=[],bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er)),p!==e)for(;p!==e;)$.push(p),bt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(er));else $=e;$!==e?(S=a,a=si()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,us.test(t.charAt(i))?(t.charAt(i),i++):T===0&&L(Is),bt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(er)),l!==e?(S=a,a=Yl()):(i=a,a=e)),j[s]={nextPos:i,result:a},a}function sa(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Ai(),a===e&&(a=na()),j[l]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p,s=i*76+53,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===st?(l=st,i+=4):(l=e,T===0&&L(La)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=ni()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function na(){var a,l,$,p,s=i*76+54,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,T===0&&L(dr)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=eu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function aa(){var a,l,$,p,s=i*76+55,u=j[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,T===0&&L(il)),l!==e?($=i,T++,Pt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Nr)),T--,p===e?$=void 0:(i=$,$=e),$!==e?(S=a,a=tu()):(i=a,a=e)):(i=a,a=e),j[s]={nextPos:i,result:a},a)}function ia(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+56,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ai(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(nt)),s!==e?(S=a,a=ru(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function du(){var a,l,$,p,s,u,d,h,x,m,_=i*76+57,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Xe(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=ii(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=Kn(p)):(i=a,a=e)}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function la(){var a,l,$,p,s,u,d,h=i*76+58,x=j[h];if(x)return i=x.nextPos,x.result;if(a=i,l=We(),l!==e){for($=i,p=[],s=g();s!==e;)p.push(s),s=g();if(t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e){for(u=[],d=g();d!==e;)u.push(d),d=g();d=tt(),d!==e?$=d:(i=$,$=e)}else i=$,$=e;$===e&&($=null),S=a,a=su(l,$)}else i=a,a=e;return j[h]={nextPos:i,result:a},a}function ua(){var a,l,$,p,s,u,d=i*76+59,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=la(),l!==e){for($=[],p=i,s=k(),s!==e?(u=la(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=la(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=zn(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function wr(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U,z,se,Oe=i*76+60,de=j[Oe];if(de)return i=de.nextPos,de.result;if(a=i,t.charCodeAt(i)===64?(l=Ct,i++):(l=e,T===0&&L(ll)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=We(),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,T===0&&L(kt)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(h=ua(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=O,i++):(m=e,T===0&&L(ut)),m!==e){for(_=i,A=[],E=g();E!==e;)A.push(E),E=g();if(t.charCodeAt(i)===58?(E=he,i++):(E=e,T===0&&L(Bt)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();U=tt(),U!==e?_=U:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],E=g();E!==e;)A.push(E),E=g();if(t.charCodeAt(i)===123?(E=q,i++):(E=e,T===0&&L(Gt)),E!==e){for(I=[],U=g();U!==e;)I.push(U),U=g();for(U=Zr(),U===e&&(U=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=J,i++):(se=e,T===0&&L(nt)),se!==e?(S=a,a=nu($,p,s,h,_,U)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Oe]={nextPos:i,result:a},a}function yu(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I=i*76+61,U=j[I];if(U)return i=U.nextPos,U.result;if(a=i,t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=ua(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=he,i++):(x=e,T===0&&L(Bt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?d=_:(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=q,i++):(x=e,T===0&&L(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=Zr(),_===e&&(_=null),A=[],E=g();E!==e;)A.push(E),E=g();t.charCodeAt(i)===125?(E=J,i++):(E=e,T===0&&L(nt)),E!==e?(S=a,a=au(p,d,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function oa(){var a,l,$,p,s,u,d,h,x,m,_=i*76+62,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ir,i++):(l=e,T===0&&L($s)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=Ve(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();for(t.charCodeAt(i)===44?(h=ee,i++):(h=e,T===0&&L(ot)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();S=s,s=li(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=X,i++):(u=e,T===0&&L(os)),u!==e?(S=a,a=iu(p)):(i=a,a=e)}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function _i(){var a,l,$,p,s,u,d,h,x,m,_,A,E,I,U=i*76+63,z=j[U];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(p.push(s),s=i,u=We(),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.charCodeAt(i)===58?(h=he,i++):(h=e,T===0&&L(Bt)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Ve(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=ee,i++):(A=e,T===0&&L(ot)),A===e&&(t.charCodeAt(i)===59?(A=it,i++):(A=e,T===0&&L(nn))),A===e&&(A=null),E=[],I=g();I!==e;)E.push(I),I=g();S=s,s=ui(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=J,i++):(s=e,T===0&&L(nt)),s!==e?(S=a,a=oi(p)):(i=a,a=e)}else i=a,a=e;return j[U]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=wu(),a===e&&(a=ur()),j[l]={nextPos:i,result:a},a)}function wu(){var a,l,$,p,s,u,d,h,x,m,_=i*76+65,A=j[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===yt?(l=yt,i+=2):(l=e,T===0&&L(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Cs(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=O,i++):(u=e,T===0&&L(ut)),u!==e){for(d=[],h=g();h!==e;)d.push(h),h=g();if(t.substr(i,2)===pe?(h=pe,i+=2):(h=e,T===0&&L(Ys)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(S=a,a=lu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[_]={nextPos:i,result:a},a}function Cs(){var a,l,$,p,s,u,d=i*76+66,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,s=k(),s!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);S=a,a=fi(l,$)}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function ur(){var a,l,$,p,s,u,d,h,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=We(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=pt,i++):(p=e,T===0&&L(Zs)),p!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(d=[],h=b();h!==e;)d.push(h),h=b();t.charCodeAt(i)===62?(h=Lr,i++):(h=e,T===0&&L(Rn)),h!==e?(S=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=We(),l!==e&&(S=a,l=te(l)),a=l),j[x]={nextPos:i,result:a},a}function We(){var a,l,$,p,s=i*76+68,u=j[s];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,T===0&&L(ul)),l!==e){for($=[],xn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Ln));p!==e;)$.push(p),xn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,T===0&&L(Ln));S=a,a=xs()}else i=a,a=e;return j[s]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,s,u,d=i*76+69,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,l=We(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(s=he,i++):(s=e,T===0&&L(Bt)),s!==e?(u=We(),u!==e?(s=[s,u],p=s):(i=p,p=e)):(i=p,p=e);S=a,a=yr()}else i=a,a=e;return j[d]={nextPos:i,result:a},a}function k(){var a,l,$,p,s,u=i*76+70,d=j[u];if(d)return i=d.nextPos,d.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=ee,i++):($=e,T===0&&L(ot)),$!==e){for(p=[],s=g();s!==e;)p.push(s),s=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return j[u]={nextPos:i,result:a},a}function De(){var a,l,$,p,s,u,d=i*76+71,h=j[d];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=q,i++):(l=e,T===0&&L(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Zr(),p===e&&(p=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=J,i++):(u=e,T===0&&L(nt)),u!==e?(S=a,a=an(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Ar()),j[d]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===_t?(a=_t,i+=2):(a=e,T===0&&L(ol)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(Ha))),j[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,p=j[$];return p?(i=p.nextPos,p.result):(a=i,T++,t.length>i?(l=t.charAt(i),i++):(l=e,T===0&&L(lr)),T--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),j[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(Vi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(fl)),j[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(Wi.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,T===0&&L(cl)),j[l]={nextPos:i,result:a},a)}function w(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const s=K();return p.loc={start:s.start.offset,end:s.end.offset-1},p}if(At=y(),At!==e&&i===t.length)return At;throw At!==e&&i<t.length&&L(ge()),ln(Y,o<t.length?t.charAt(o):null,o<t.length?Ds(o,o+1):Ds(o,o))}const G2=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function J2(t){return G2.includes(t.type)}function hw(t){return"chain"in t&&t.chain!==null}function Z2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Q2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function X2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Dt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Dt(e.expr,r);break}case"return":{e.expr=Dt(e.expr,r);break}case"each":{e.items=Dt(e.items,r),e.for=Dt(e.for,r);break}case"for":{e.from!=null&&(e.from=Dt(e.from,r)),e.to!=null&&(e.to=Dt(e.to,r)),e.times!=null&&(e.times=Dt(e.times,r)),e.for=Dt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Dt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Dt(e.expr,r),e.dest=Dt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Dt(e.operands[n],r);break}case"not":{e.expr=Dt(e.expr,r);break}case"if":{e.cond=Dt(e.cond,r),e.then=Dt(e.then,r);for(const n of e.elseif)n.cond=Dt(n.cond,r),n.then=Dt(n.then,r);e.else!=null&&(e.else=Dt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Dt(e.children[n],r);break}case"match":{e.about=Dt(e.about,r);for(const n of e.qs)n.q=Dt(n.q,r),n.a=Dt(n.a,r);e.default!=null&&(e.default=Dt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Dt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const v=e.tmpl[n];typeof v!="string"&&(e.tmpl[n]=Dt(v,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Dt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Dt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Dt(e.args[n],r);break}case"indexChain":{e.index=Dt(e.index,r);break}case"call":{e.target=Dt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Dt(e.args[n],r);break}case"index":{e.target=Dt(e.target,r),e.index=Dt(e.index,r);break}case"prop":{e.target=Dt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Dt(e.members[n],r);break}}if(hw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Dt(e.chain[n],r);return e}const mp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function $p(t){throw new uf(`Reserved word "${t}" cannot be used as variable name.`)}function Y2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{mp.includes(t.name)&&$p(t.name);break}case"meta":{t.name!=null&&mp.includes(t.name)&&$p(t.name);break}case"fn":{for(const r of t.args)mp.includes(r.name)&&$p(r.name);break}}return t}function e_(t){for(const r of t)Dt(r,Y2);return t}function md(t){return{type:"simple",name:t}}function t_(t,r){return{type:"generic",name:t,inners:r}}function r_(t,r){return{type:"fn",args:t,result:r}}function sh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=sh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>sh(n)).join(", "),e=sh(t.result);return`@(${r}) { ${e} }`}}}function Bf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return md(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Bf(t.inner):r=md("any"),t_(t.name,[r])}}throw new uf(`Unknown type: '${sh(t)}'`)}else{const r=t.args.map(e=>Bf(e));return r_(r,Bf(t.result))}}function s_(t){switch(t.type){case"def":{t.varType!=null&&Bf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Bf(r.argType);t.retType!=null&&Bf(t.retType);break}}return t}function n_(t){for(const r of t)Dt(r,s_);return t}function nh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=nh(n.expr.children)),r.push(n);else{if(e.length>0)throw new uf("invalid attribute.");switch(n.type){case"fn":{n.children=nh(n.children);break}case"block":{n.statements=nh(n.statements);break}}r.push(n)}if(e.length>0)throw new uf("invalid attribute.");return r}function a_(t){if(J2(t)&&hw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const v of r)switch(v.type){case"callChain":{n=Z2(n,v.args,v.loc);break}case"indexChain":{n=Q2(n,v.index,v.loc);break}case"propChain":{n=X2(n,v.name,v.loc);break}}return n}return t}function i_(t){for(let r=0;r<t.length;r++)t[r]=Dt(t[r],a_);return t}function ah(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function pw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return ah(t,r,e);{const{left:n,right:v,info:y}=t;return ah(n,pw(v,r,e),y)}}function Ho(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Ho(t.left),Ho(t.right)]}}const l_={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Ho(t.left),right:Ho(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Ho(t.left),right:Ho(t.right)}),priority:3}};function u_(t){const r=t.operators.map(n=>{const v=l_[n];if(v==null)throw new uf(`No such operator: ${n}.`);return v});let e=ah(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=pw(e,t.operands[2+n],r[1+n]);return Ho(e)}function o_(t){for(let r=0;r<t.length;r++)t[r]=Dt(t[r],e=>e.type==="infix"?u_(e):e);return t}const Oo=class Oo{constructor(){ve(this,"plugins");this.plugins={validate:[e_,n_],transform:[nh,i_,o_]}}static parse(r){return Oo.instance==null&&(Oo.instance=new Oo),Oo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=wd(r,{startRule:"Preprocess"});e=wd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new uf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new uf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};ve(Oo,"instance");let wv=Oo;const f_="0.14.1",c_={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let mv=[],ec=null;function h_(t){return mv=wv.parse(t),JSON.stringify(mv,null,"	")}async function p_(t){ec==null||ec.abort(),ec=new Na({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:gv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:gv(e.val,!0),print:!1});break}}});try{await ec.exec(mv)}catch(r){t.err(r)}}const v_=Object.freeze(Object.defineProperty({__proto__:null,exec:p_,parse:h_,samples:c_,version:f_},Symbol.toStringTag,{value:"Module"})),g_=t=>(f0("data-v-c56fd67b"),t=t(),c0(),t),d_={id:"root"},y_={id:"grid1"},w_={class:"type"},m_={id:"grid2"},$_=g_(()=>Ki("header",null,null,-1)),$d=["next","develop","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],xd="0.18.0",x_=mc({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:v,samples:y}={next:sb,develop:Ub,"0.18.0":C1,"0.17.0":uA,"0.16.0":BA,"0.15.0":E2,"0.14.1":v_}[r.ver],C=To(window.localStorage.getItem(v)??'<: "Hello, AiScript!"'),P=To([]),M=To(""),N=To(null);uc(C,()=>{window.localStorage.setItem(v,C.value);try{M.value=e(C.value),N.value=null}catch(H){const q=H;N.value=q.message,console.error("info"in q?q.info:q);return}},{immediate:!0});function O(){P.value=[],n({in:H=>new Promise(q=>{const J=window.prompt(H);q(J??"")}),out:H=>P.value.push(H),end:H=>P.value.push(H),err:H=>{console.error(H),window.alert(`${H}`)}})}return(H,q)=>(ps(),Us("div",d_,[Ki("div",y_,[vs(k$,{modelValue:C.value,"onUpdate:modelValue":q[0]||(q[0]=J=>C.value=J),samples:vc(y),parseError:N.value,onRun:O},null,8,["modelValue","samples","parseError"]),vs(rc,{id:"logs"},{header:Pa(()=>[Pu("Output")]),default:Pa(()=>[(ps(!0),Us(Pn,null,uh(P.value,J=>(ps(),Us("div",{class:En(["log",[{print:J.print},J.type]]),key:J.id},[Ki("span",w_,ho(J.type),1),Pu(" "+ho(J.text),1)],2))),128))]),_:1})]),Ki("div",m_,[vs(rc,{id:"ast"},{header:Pa(()=>[Pu("AST")]),default:Pa(()=>[Ki("pre",null,ho(M.value),1)]),_:1}),vs(rc,{id:"bin"},{header:Pa(()=>[Pu("Bytecode")]),default:Pa(()=>[$_]),_:1}),vs(rc,{id:"debugger"},{header:Pa(()=>[Pu("Debugger")]),_:1})])]))}}),b_=xc(x_,[["__scopeId","data-v-c56fd67b"]]),A_={id:"wrapper"},__=mc({__name:"App",setup(t){const r=To(window.localStorage.getItem("version")??xd),e=Object.fromEntries($d.map(v=>[v,v+(v==xd?"(latest)":"")]));function n(v){r.value=v,window.localStorage.setItem("version",r.value)}return(v,y)=>(ps(),Us("div",A_,[Ki("h1",null,[Pu(" AiScript ( "),vs(My,{id:"version",options:vc(e),onSelect:n},{default:Pa(()=>[Pu(ho(r.value),1)]),_:1},8,["options"]),Pu(" ) Playground ")]),(ps(!0),Us(Pn,null,uh(vc($d),C=>(ps(),Us("div",null,[C==r.value?(ps(),Sh(b_,{key:0,ver:C},null,8,["ver"])):Kf("",!0)]))),256))]))}}),C_=xc(__,[["__scopeId","data-v-caf8f745"]]);Bm(C_).mount("#app");
