var uy=Object.defineProperty;var oy=(t,r,e)=>r in t?uy(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var ge=(t,r,e)=>(oy(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))a(v);new MutationObserver(v=>{for(const d of v)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&a(x)}).observe(document,{childList:!0,subtree:!0});function e(v){const d={};return v.integrity&&(d.integrity=v.integrity),v.referrerPolicy&&(d.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?d.credentials="include":v.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(v){if(v.ep)return;v.ep=!0;const d=e(v);fetch(v.href,d)}})();function Pp(t,r){const e=new Set(t.split(","));return r?a=>e.has(a.toLowerCase()):a=>e.has(a)}const xr={},Uo=[],ba=()=>{},fy=()=>!1,Oc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ep=t=>t.startsWith("onUpdate:"),ts=Object.assign,Mp=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},cy=Object.prototype.hasOwnProperty,Bt=(t,r)=>cy.call(t,r),nt=Array.isArray,qo=t=>Tc(t)==="[object Map]",Ag=t=>Tc(t)==="[object Set]",mt=t=>typeof t=="function",Qr=t=>typeof t=="string",vf=t=>typeof t=="symbol",mr=t=>t!==null&&typeof t=="object",Cg=t=>(mr(t)||mt(t))&&mt(t.then)&&mt(t.catch),_g=Object.prototype.toString,Tc=t=>_g.call(t),hy=t=>Tc(t).slice(8,-1),kg=t=>Tc(t)==="[object Object]",Sp=t=>Qr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,tc=Pp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ic=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},py=/-(\w)/g,of=Ic(t=>t.replace(py,(r,e)=>e?e.toUpperCase():"")),vy=/\B([A-Z])/g,gf=Ic(t=>t.replace(vy,"-$1").toLowerCase()),Pg=Ic(t=>t.charAt(0).toUpperCase()+t.slice(1)),Yc=Ic(t=>t?`on${Pg(t)}`:""),Vu=(t,r)=>!Object.is(t,r),eh=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},bc=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},gy=t=>{const r=parseFloat(t);return isNaN(r)?t:r},dy=t=>{const r=Qr(t)?Number(t):NaN;return isNaN(r)?t:r};let av;const Eg=()=>av||(av=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fp(t){if(nt(t)){const r={};for(let e=0;e<t.length;e++){const a=t[e],v=Qr(a)?$y(a):Fp(a);if(v)for(const d in v)r[d]=v[d]}return r}else if(Qr(t)||mr(t))return t}const yy=/;(?![^(]*\))/g,wy=/:([^]+)/,my=/\/\*[^]*?\*\//g;function $y(t){const r={};return t.replace(my,"").split(yy).forEach(e=>{if(e){const a=e.split(wy);a.length>1&&(r[a[0].trim()]=a[1].trim())}}),r}function ks(t){let r="";if(Qr(t))r=t;else if(nt(t))for(let e=0;e<t.length;e++){const a=ks(t[e]);a&&(r+=a+" ")}else if(mr(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const xy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",by=Pp(xy);function Mg(t){return!!t||t===""}const co=t=>Qr(t)?t:t==null?"":nt(t)||mr(t)&&(t.toString===_g||!mt(t.toString))?JSON.stringify(t,Sg,2):String(t),Sg=(t,r)=>r&&r.__v_isRef?Sg(t,r.value):qo(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[a,v],d)=>(e[th(a,d)+" =>"]=v,e),{})}:Ag(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>th(e))}:vf(r)?th(r):mr(r)&&!nt(r)&&!kg(r)?String(r):r,th=(t,r="")=>{var e;return vf(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};let Qa;class Ay{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Qa,!r&&Qa&&(this.index=(Qa.scopes||(Qa.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=Qa;try{return Qa=this,r()}finally{Qa=e}}}on(){Qa=this}off(){Qa=this.parent}stop(r){if(this._active){let e,a;for(e=0,a=this.effects.length;e<a;e++)this.effects[e].stop();for(e=0,a=this.cleanups.length;e<a;e++)this.cleanups[e]();if(this.scopes)for(e=0,a=this.scopes.length;e<a;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function Cy(t,r=Qa){r&&r.active&&r.effects.push(t)}function _y(){return Qa}let ho;class Np{constructor(r,e,a,v){this.fn=r,this.trigger=e,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,Cy(this,v)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,Fo();for(const r of this.deps)if(r.computed&&(ky(r.computed),this._dirtyLevel>=2))break;No(),this._queryings--}return this._dirtyLevel>=2}set dirty(r){this._dirtyLevel=r?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let r=Uu,e=ho;try{return Uu=!0,ho=this,this._runnings++,iv(this),this.fn()}finally{lv(this),this._runnings--,ho=e,Uu=r}}stop(){var r;this.active&&(iv(this),lv(this),(r=this.onStop)==null||r.call(this),this.active=!1)}}function ky(t){return t.value}function iv(t){t._trackId++,t._depsLength=0}function lv(t){if(t.deps&&t.deps.length>t._depsLength){for(let r=t._depsLength;r<t.deps.length;r++)Fg(t.deps[r],t);t.deps.length=t._depsLength}}function Fg(t,r){const e=t.get(r);e!==void 0&&r._trackId!==e&&(t.delete(r),t.size===0&&t.cleanup())}let Uu=!0,Fh=0;const Ng=[];function Fo(){Ng.push(Uu),Uu=!1}function No(){const t=Ng.pop();Uu=t===void 0?!0:t}function Op(){Fh++}function Tp(){for(Fh--;!Fh&&Nh.length;)Nh.shift()()}function Og(t,r,e){if(r.get(t)!==t._trackId){r.set(t,t._trackId);const a=t.deps[t._depsLength];a!==r?(a&&Fg(a,t),t.deps[t._depsLength++]=r):t._depsLength++}}const Nh=[];function Tg(t,r,e){Op();for(const a of t.keys())if(!(!a.allowRecurse&&a._runnings)&&a._dirtyLevel<r&&(!a._runnings||r!==2)){const v=a._dirtyLevel;a._dirtyLevel=r,v===0&&(!a._queryings||r!==2)&&(a.trigger(),a.scheduler&&Nh.push(a.scheduler))}Tp()}const Ig=(t,r)=>{const e=new Map;return e.cleanup=t,e.computed=r,e},Oh=new WeakMap,po=Symbol(""),Th=Symbol("");function dn(t,r,e){if(Uu&&ho){let a=Oh.get(t);a||Oh.set(t,a=new Map);let v=a.get(e);v||a.set(e,v=Ig(()=>a.delete(e))),Og(ho,v)}}function $u(t,r,e,a,v,d){const x=Oh.get(t);if(!x)return;let k=[];if(r==="clear")k=[...x.values()];else if(e==="length"&&nt(t)){const E=Number(a);x.forEach((S,F)=>{(F==="length"||!vf(F)&&F>=E)&&k.push(S)})}else switch(e!==void 0&&k.push(x.get(e)),r){case"add":nt(t)?Sp(e)&&k.push(x.get("length")):(k.push(x.get(po)),qo(t)&&k.push(x.get(Th)));break;case"delete":nt(t)||(k.push(x.get(po)),qo(t)&&k.push(x.get(Th)));break;case"set":qo(t)&&k.push(x.get(po));break}Op();for(const E of k)E&&Tg(E,3);Tp()}const Py=Pp("__proto__,__v_isRef,__isVue"),jg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(vf)),uv=Ey();function Ey(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const a=Gt(this);for(let d=0,x=this.length;d<x;d++)dn(a,"get",d+"");const v=a[r](...e);return v===-1||v===!1?a[r](...e.map(Gt)):v}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){Fo(),Op();const a=Gt(this)[r].apply(this,e);return Tp(),No(),a}}),t}function My(t){const r=Gt(this);return dn(r,"has",t),r.hasOwnProperty(t)}class Rg{constructor(r=!1,e=!1){this._isReadonly=r,this._shallow=e}get(r,e,a){const v=this._isReadonly,d=this._shallow;if(e==="__v_isReactive")return!v;if(e==="__v_isReadonly")return v;if(e==="__v_isShallow")return d;if(e==="__v_raw")return a===(v?d?Uy:Bg:d?Hg:Lg).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(a)?r:void 0;const x=nt(r);if(!v){if(x&&Bt(uv,e))return Reflect.get(uv,e,a);if(e==="hasOwnProperty")return My}const k=Reflect.get(r,e,a);return(vf(e)?jg.has(e):Py(e))||(v||dn(r,"get",e),d)?k:yn(k)?x&&Sp(e)?k:k.value:mr(k)?v?Ug(k):Rp(k):k}}class Dg extends Rg{constructor(r=!1){super(!1,r)}set(r,e,a,v){let d=r[e];if(!this._shallow){const E=ff(d);if(!Ac(a)&&!ff(a)&&(d=Gt(d),a=Gt(a)),!nt(r)&&yn(d)&&!yn(a))return E?!1:(d.value=a,!0)}const x=nt(r)&&Sp(e)?Number(e)<r.length:Bt(r,e),k=Reflect.set(r,e,a,v);return r===Gt(v)&&(x?Vu(a,d)&&$u(r,"set",e,a):$u(r,"add",e,a)),k}deleteProperty(r,e){const a=Bt(r,e);r[e];const v=Reflect.deleteProperty(r,e);return v&&a&&$u(r,"delete",e,void 0),v}has(r,e){const a=Reflect.has(r,e);return(!vf(e)||!jg.has(e))&&dn(r,"has",e),a}ownKeys(r){return dn(r,"iterate",nt(r)?"length":po),Reflect.ownKeys(r)}}class Sy extends Rg{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Fy=new Dg,Ny=new Sy,Oy=new Dg(!0),Ip=t=>t,jc=t=>Reflect.getPrototypeOf(t);function zf(t,r,e=!1,a=!1){t=t.__v_raw;const v=Gt(t),d=Gt(r);e||(Vu(r,d)&&dn(v,"get",r),dn(v,"get",d));const{has:x}=jc(v),k=a?Ip:e?Lp:If;if(x.call(v,r))return k(t.get(r));if(x.call(v,d))return k(t.get(d));t!==v&&t.get(r)}function Vf(t,r=!1){const e=this.__v_raw,a=Gt(e),v=Gt(t);return r||(Vu(t,v)&&dn(a,"has",t),dn(a,"has",v)),t===v?e.has(t):e.has(t)||e.has(v)}function Wf(t,r=!1){return t=t.__v_raw,!r&&dn(Gt(t),"iterate",po),Reflect.get(t,"size",t)}function ov(t){t=Gt(t);const r=Gt(this);return jc(r).has.call(r,t)||(r.add(t),$u(r,"add",t,t)),this}function fv(t,r){r=Gt(r);const e=Gt(this),{has:a,get:v}=jc(e);let d=a.call(e,t);d||(t=Gt(t),d=a.call(e,t));const x=v.call(e,t);return e.set(t,r),d?Vu(r,x)&&$u(e,"set",t,r):$u(e,"add",t,r),this}function cv(t){const r=Gt(this),{has:e,get:a}=jc(r);let v=e.call(r,t);v||(t=Gt(t),v=e.call(r,t)),a&&a.call(r,t);const d=r.delete(t);return v&&$u(r,"delete",t,void 0),d}function hv(){const t=Gt(this),r=t.size!==0,e=t.clear();return r&&$u(t,"clear",void 0,void 0),e}function Kf(t,r){return function(a,v){const d=this,x=d.__v_raw,k=Gt(x),E=r?Ip:t?Lp:If;return!t&&dn(k,"iterate",po),x.forEach((S,F)=>a.call(v,E(S),E(F),d))}}function Gf(t,r,e){return function(...a){const v=this.__v_raw,d=Gt(v),x=qo(d),k=t==="entries"||t===Symbol.iterator&&x,E=t==="keys"&&x,S=v[t](...a),F=e?Ip:r?Lp:If;return!r&&dn(d,"iterate",E?Th:po),{next(){const{value:j,done:L}=S.next();return L?{value:j,done:L}:{value:k?[F(j[0]),F(j[1])]:F(j),done:L}},[Symbol.iterator](){return this}}}}function ku(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function Ty(){const t={get(d){return zf(this,d)},get size(){return Wf(this)},has:Vf,add:ov,set:fv,delete:cv,clear:hv,forEach:Kf(!1,!1)},r={get(d){return zf(this,d,!1,!0)},get size(){return Wf(this)},has:Vf,add:ov,set:fv,delete:cv,clear:hv,forEach:Kf(!1,!0)},e={get(d){return zf(this,d,!0)},get size(){return Wf(this,!0)},has(d){return Vf.call(this,d,!0)},add:ku("add"),set:ku("set"),delete:ku("delete"),clear:ku("clear"),forEach:Kf(!0,!1)},a={get(d){return zf(this,d,!0,!0)},get size(){return Wf(this,!0)},has(d){return Vf.call(this,d,!0)},add:ku("add"),set:ku("set"),delete:ku("delete"),clear:ku("clear"),forEach:Kf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=Gf(d,!1,!1),e[d]=Gf(d,!0,!1),r[d]=Gf(d,!1,!0),a[d]=Gf(d,!0,!0)}),[t,e,r,a]}const[Iy,jy,Ry,Dy]=Ty();function jp(t,r){const e=r?t?Dy:Ry:t?jy:Iy;return(a,v,d)=>v==="__v_isReactive"?!t:v==="__v_isReadonly"?t:v==="__v_raw"?a:Reflect.get(Bt(e,v)&&v in a?e:a,v,d)}const Ly={get:jp(!1,!1)},Hy={get:jp(!1,!0)},By={get:jp(!0,!1)},Lg=new WeakMap,Hg=new WeakMap,Bg=new WeakMap,Uy=new WeakMap;function qy(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zy(t){return t.__v_skip||!Object.isExtensible(t)?0:qy(hy(t))}function Rp(t){return ff(t)?t:Dp(t,!1,Fy,Ly,Lg)}function Vy(t){return Dp(t,!1,Oy,Hy,Hg)}function Ug(t){return Dp(t,!0,Ny,By,Bg)}function Dp(t,r,e,a,v){if(!mr(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const d=v.get(t);if(d)return d;const x=zy(t);if(x===0)return t;const k=new Proxy(t,x===2?a:e);return v.set(t,k),k}function zo(t){return ff(t)?zo(t.__v_raw):!!(t&&t.__v_isReactive)}function ff(t){return!!(t&&t.__v_isReadonly)}function Ac(t){return!!(t&&t.__v_isShallow)}function qg(t){return zo(t)||ff(t)}function Gt(t){const r=t&&t.__v_raw;return r?Gt(r):t}function zg(t){return bc(t,"__v_skip",!0),t}const If=t=>mr(t)?Rp(t):t,Lp=t=>mr(t)?Ug(t):t;class Vg{constructor(r,e,a,v){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Np(()=>r(this._value),()=>Ih(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!v,this.__v_isReadonly=a}get value(){const r=Gt(this);return Wg(r),(!r._cacheable||r.effect.dirty)&&Vu(r._value,r._value=r.effect.run())&&Ih(r,2),r._value}set value(r){this._setter(r)}get _dirty(){return this.effect.dirty}set _dirty(r){this.effect.dirty=r}}function Wy(t,r,e=!1){let a,v;const d=mt(t);return d?(a=t,v=ba):(a=t.get,v=t.set),new Vg(a,v,d||!v,e)}function Wg(t){Uu&&ho&&(t=Gt(t),Og(ho,t.dep||(t.dep=Ig(()=>t.dep=void 0,t instanceof Vg?t:void 0))))}function Ih(t,r=3,e){t=Gt(t);const a=t.dep;a&&Tg(a,r)}function yn(t){return!!(t&&t.__v_isRef===!0)}function ao(t){return Ky(t,!1)}function Ky(t,r){return yn(t)?t:new Gy(t,r)}class Gy{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:Gt(r),this._value=e?r:If(r)}get value(){return Wg(this),this._value}set value(r){const e=this.__v_isShallow||Ac(r)||ff(r);r=e?r:Gt(r),Vu(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:If(r),Ih(this,3))}}function jf(t){return yn(t)?t.value:t}const Jy={get:(t,r,e)=>jf(Reflect.get(t,r,e)),set:(t,r,e,a)=>{const v=t[r];return yn(v)&&!yn(e)?(v.value=e,!0):Reflect.set(t,r,e,a)}};function Kg(t){return zo(t)?t:new Proxy(t,Jy)}function qu(t,r,e,a){let v;try{v=a?t(...a):t()}catch(d){Rc(d,r,e)}return v}function Ca(t,r,e,a){if(mt(t)){const d=qu(t,r,e,a);return d&&Cg(d)&&d.catch(x=>{Rc(x,r,e)}),d}const v=[];for(let d=0;d<t.length;d++)v.push(Ca(t[d],r,e,a));return v}function Rc(t,r,e,a=!0){const v=r?r.vnode:null;if(r){let d=r.parent;const x=r.proxy,k=`https://vuejs.org/errors/#runtime-${e}`;for(;d;){const S=d.ec;if(S){for(let F=0;F<S.length;F++)if(S[F](t,x,k)===!1)return}d=d.parent}const E=r.appContext.config.errorHandler;if(E){qu(E,null,10,[t,x,k]);return}}Zy(t,e,v,a)}function Zy(t,r,e,a=!0){console.error(t)}let Rf=!1,jh=!1;const Cs=[];let ai=0;const Vo=[];let vu=null,ro=0;const Gg=Promise.resolve();let Hp=null;function Qy(t){const r=Hp||Gg;return t?r.then(this?t.bind(this):t):r}function Xy(t){let r=ai+1,e=Cs.length;for(;r<e;){const a=r+e>>>1,v=Cs[a],d=Df(v);d<t||d===t&&v.pre?r=a+1:e=a}return r}function Bp(t){(!Cs.length||!Cs.includes(t,Rf&&t.allowRecurse?ai+1:ai))&&(t.id==null?Cs.push(t):Cs.splice(Xy(t.id),0,t),Jg())}function Jg(){!Rf&&!jh&&(jh=!0,Hp=Gg.then(Qg))}function Yy(t){const r=Cs.indexOf(t);r>ai&&Cs.splice(r,1)}function ew(t){nt(t)?Vo.push(...t):(!vu||!vu.includes(t,t.allowRecurse?ro+1:ro))&&Vo.push(t),Jg()}function pv(t,r,e=Rf?ai+1:0){for(;e<Cs.length;e++){const a=Cs[e];if(a&&a.pre){if(t&&a.id!==t.uid)continue;Cs.splice(e,1),e--,a()}}}function Zg(t){if(Vo.length){const r=[...new Set(Vo)];if(Vo.length=0,vu){vu.push(...r);return}for(vu=r,vu.sort((e,a)=>Df(e)-Df(a)),ro=0;ro<vu.length;ro++)vu[ro]();vu=null,ro=0}}const Df=t=>t.id==null?1/0:t.id,tw=(t,r)=>{const e=Df(t)-Df(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Qg(t){jh=!1,Rf=!0,Cs.sort(tw);try{for(ai=0;ai<Cs.length;ai++){const r=Cs[ai];r&&r.active!==!1&&qu(r,null,14)}}finally{ai=0,Cs.length=0,Zg(),Rf=!1,Hp=null,(Cs.length||Vo.length)&&Qg()}}function rw(t,r,...e){if(t.isUnmounted)return;const a=t.vnode.props||xr;let v=e;const d=r.startsWith("update:"),x=d&&r.slice(7);if(x&&x in a){const F=`${x==="modelValue"?"model":x}Modifiers`,{number:j,trim:L}=a[F]||xr;L&&(v=e.map(K=>Qr(K)?K.trim():K)),j&&(v=e.map(gy))}let k,E=a[k=Yc(r)]||a[k=Yc(of(r))];!E&&d&&(E=a[k=Yc(gf(r))]),E&&Ca(E,t,6,v);const S=a[k+"Once"];if(S){if(!t.emitted)t.emitted={};else if(t.emitted[k])return;t.emitted[k]=!0,Ca(S,t,6,v)}}function Xg(t,r,e=!1){const a=r.emitsCache,v=a.get(t);if(v!==void 0)return v;const d=t.emits;let x={},k=!1;if(!mt(t)){const E=S=>{const F=Xg(S,r,!0);F&&(k=!0,ts(x,F))};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!d&&!k?(mr(t)&&a.set(t,null),null):(nt(d)?d.forEach(E=>x[E]=null):ts(x,d),mr(t)&&a.set(t,x),x)}function Dc(t,r){return!t||!Oc(r)?!1:(r=r.slice(2).replace(/Once$/,""),Bt(t,r[0].toLowerCase()+r.slice(1))||Bt(t,gf(r))||Bt(t,r))}let Xs=null,Lc=null;function Cc(t){const r=Xs;return Xs=t,Lc=t&&t.type.__scopeId||null,r}function sw(t){Lc=t}function nw(){Lc=null}function gn(t,r=Xs,e){if(!r||t._n)return t;const a=(...v)=>{a._d&&Cv(-1);const d=Cc(r);let x;try{x=t(...v)}finally{Cc(d),a._d&&Cv(1)}return x};return a._n=!0,a._c=!0,a._d=!0,a}function rh(t){const{type:r,vnode:e,proxy:a,withProxy:v,props:d,propsOptions:[x],slots:k,attrs:E,emit:S,render:F,renderCache:j,data:L,setupState:K,ctx:he,inheritAttrs:re}=t;let ie,Ce;const q=Cc(t);try{if(e.shapeFlag&4){const z=v||a,V=z;ie=ni(F.call(V,z,j,d,K,L,he)),Ce=E}else{const z=r;ie=ni(z.length>1?z(d,{attrs:E,slots:k,emit:S}):z(d,null)),Ce=r.props?E:aw(E)}}catch(z){Nf.length=0,Rc(z,t,1),ie=Er(_a)}let H=ie;if(Ce&&re!==!1){const z=Object.keys(Ce),{shapeFlag:V}=H;z.length&&V&7&&(x&&z.some(Ep)&&(Ce=iw(Ce,x)),H=Wu(H,Ce))}return e.dirs&&(H=Wu(H),H.dirs=H.dirs?H.dirs.concat(e.dirs):e.dirs),e.transition&&(H.transition=e.transition),ie=H,Cc(q),ie}const aw=t=>{let r;for(const e in t)(e==="class"||e==="style"||Oc(e))&&((r||(r={}))[e]=t[e]);return r},iw=(t,r)=>{const e={};for(const a in t)(!Ep(a)||!(a.slice(9)in r))&&(e[a]=t[a]);return e};function lw(t,r,e){const{props:a,children:v,component:d}=t,{props:x,children:k,patchFlag:E}=r,S=d.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&E>=0){if(E&1024)return!0;if(E&16)return a?vv(a,x,S):!!x;if(E&8){const F=r.dynamicProps;for(let j=0;j<F.length;j++){const L=F[j];if(x[L]!==a[L]&&!Dc(S,L))return!0}}}else return(v||k)&&(!k||!k.$stable)?!0:a===x?!1:a?x?vv(a,x,S):!0:!!x;return!1}function vv(t,r,e){const a=Object.keys(r);if(a.length!==Object.keys(t).length)return!0;for(let v=0;v<a.length;v++){const d=a[v];if(r[d]!==t[d]&&!Dc(e,d))return!0}return!1}function uw({vnode:t,parent:r},e){if(e)for(;r;){const a=r.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=r.vnode).el=e,r=r.parent;else break}}const ow=Symbol.for("v-ndc"),fw=t=>t.__isSuspense;function cw(t,r){r&&r.pendingBranch?nt(t)?r.effects.push(...t):r.effects.push(t):ew(t)}const hw=Symbol.for("v-scx"),pw=()=>sc(hw),Jf={};function Mf(t,r,e){return Yg(t,r,e)}function Yg(t,r,{immediate:e,deep:a,flush:v,once:d,onTrack:x,onTrigger:k}=xr){if(r&&d){const W=r;r=(...J)=>{W(...J),V()}}const E=_s,S=W=>a===!0?W:Bo(W,a===!1?1:void 0);let F,j=!1,L=!1;if(yn(t)?(F=()=>t.value,j=Ac(t)):zo(t)?(F=()=>S(t),j=!0):nt(t)?(L=!0,j=t.some(W=>zo(W)||Ac(W)),F=()=>t.map(W=>{if(yn(W))return W.value;if(zo(W))return S(W);if(mt(W))return qu(W,E,2)})):mt(t)?r?F=()=>qu(t,E,2):F=()=>(K&&K(),Ca(t,E,3,[he])):F=ba,r&&a){const W=F;F=()=>Bo(W())}let K,he=W=>{K=H.onStop=()=>{qu(W,E,4),K=H.onStop=void 0}},re;if(Vc)if(he=ba,r?e&&Ca(r,E,3,[F(),L?[]:void 0,he]):F(),v==="sync"){const W=pw();re=W.__watcherHandles||(W.__watcherHandles=[])}else return ba;let ie=L?new Array(t.length).fill(Jf):Jf;const Ce=()=>{if(!(!H.active||!H.dirty))if(r){const W=H.run();(a||j||(L?W.some((J,Y)=>Vu(J,ie[Y])):Vu(W,ie)))&&(K&&K(),Ca(r,E,3,[W,ie===Jf?void 0:L&&ie[0]===Jf?[]:ie,he]),ie=W)}else H.run()};Ce.allowRecurse=!!r;let q;v==="sync"?q=Ce:v==="post"?q=()=>vn(Ce,E&&E.suspense):(Ce.pre=!0,E&&(Ce.id=E.uid),q=()=>Bp(Ce));const H=new Np(F,ba,q),z=_y(),V=()=>{H.stop(),z&&Mp(z.effects,H)};return r?e?Ce():ie=H.run():v==="post"?vn(H.run.bind(H),E&&E.suspense):H.run(),re&&re.push(V),V}function vw(t,r,e){const a=this.proxy,v=Qr(t)?t.includes(".")?ed(a,t):()=>a[t]:t.bind(a,a);let d;mt(r)?d=r:(d=r.handler,e=r);const x=_s;hf(this);const k=Yg(v,d.bind(a),e);return x?hf(x):vo(),k}function ed(t,r){const e=r.split(".");return()=>{let a=t;for(let v=0;v<e.length&&a;v++)a=a[e[v]];return a}}function Bo(t,r,e=0,a){if(!mr(t)||t.__v_skip)return t;if(r&&r>0){if(e>=r)return t;e++}if(a=a||new Set,a.has(t))return t;if(a.add(t),yn(t))Bo(t.value,r,e,a);else if(nt(t))for(let v=0;v<t.length;v++)Bo(t[v],r,e,a);else if(Ag(t)||qo(t))t.forEach(v=>{Bo(v,r,e,a)});else if(kg(t))for(const v in t)Bo(t[v],r,e,a);return t}function Xu(t,r,e,a){const v=t.dirs,d=r&&r.dirs;for(let x=0;x<v.length;x++){const k=v[x];d&&(k.oldValue=d[x].value);let E=k.dir[a];E&&(Fo(),Ca(E,e,8,[t.el,k,t,r]),No())}}const Ou=Symbol("_leaveCb"),Zf=Symbol("_enterCb");function gw(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ad(()=>{t.isMounted=!0}),id(()=>{t.isUnmounting=!0}),t}const ga=[Function,Array],td={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ga,onEnter:ga,onAfterEnter:ga,onEnterCancelled:ga,onBeforeLeave:ga,onLeave:ga,onAfterLeave:ga,onLeaveCancelled:ga,onBeforeAppear:ga,onAppear:ga,onAfterAppear:ga,onAppearCancelled:ga},dw={name:"BaseTransition",props:td,setup(t,{slots:r}){const e=e0(),a=gw();let v;return()=>{const d=r.default&&sd(r.default(),!0);if(!d||!d.length)return;let x=d[0];if(d.length>1){for(const re of d)if(re.type!==_a){x=re;break}}const k=Gt(t),{mode:E}=k;if(a.isLeaving)return sh(x);const S=gv(x);if(!S)return sh(x);const F=Rh(S,k,a,e);Dh(S,F);const j=e.subTree,L=j&&gv(j);let K=!1;const{getTransitionKey:he}=S.type;if(he){const re=he();v===void 0?v=re:re!==v&&(v=re,K=!0)}if(L&&L.type!==_a&&(!so(S,L)||K)){const re=Rh(L,k,a,e);if(Dh(L,re),E==="out-in")return a.isLeaving=!0,re.afterLeave=()=>{a.isLeaving=!1,e.update.active!==!1&&(e.effect.dirty=!0,e.update())},sh(x);E==="in-out"&&S.type!==_a&&(re.delayLeave=(ie,Ce,q)=>{const H=rd(a,L);H[String(L.key)]=L,ie[Ou]=()=>{Ce(),ie[Ou]=void 0,delete F.delayedLeave},F.delayedLeave=q})}return x}}},yw=dw;function rd(t,r){const{leavingVNodes:e}=t;let a=e.get(r.type);return a||(a=Object.create(null),e.set(r.type,a)),a}function Rh(t,r,e,a){const{appear:v,mode:d,persisted:x=!1,onBeforeEnter:k,onEnter:E,onAfterEnter:S,onEnterCancelled:F,onBeforeLeave:j,onLeave:L,onAfterLeave:K,onLeaveCancelled:he,onBeforeAppear:re,onAppear:ie,onAfterAppear:Ce,onAppearCancelled:q}=r,H=String(t.key),z=rd(e,t),V=(Y,te)=>{Y&&Ca(Y,a,9,te)},W=(Y,te)=>{const Ae=te[1];V(Y,te),nt(Y)?Y.every(Ee=>Ee.length<=1)&&Ae():Y.length<=1&&Ae()},J={mode:d,persisted:x,beforeEnter(Y){let te=k;if(!e.isMounted)if(v)te=re||k;else return;Y[Ou]&&Y[Ou](!0);const Ae=z[H];Ae&&so(t,Ae)&&Ae.el[Ou]&&Ae.el[Ou](),V(te,[Y])},enter(Y){let te=E,Ae=S,Ee=F;if(!e.isMounted)if(v)te=ie||E,Ae=Ce||S,Ee=q||F;else return;let me=!1;const Ge=Y[Zf]=ut=>{me||(me=!0,ut?V(Ee,[Y]):V(Ae,[Y]),J.delayedLeave&&J.delayedLeave(),Y[Zf]=void 0)};te?W(te,[Y,Ge]):Ge()},leave(Y,te){const Ae=String(t.key);if(Y[Zf]&&Y[Zf](!0),e.isUnmounting)return te();V(j,[Y]);let Ee=!1;const me=Y[Ou]=Ge=>{Ee||(Ee=!0,te(),Ge?V(he,[Y]):V(K,[Y]),Y[Ou]=void 0,z[Ae]===t&&delete z[Ae])};z[Ae]=t,L?W(L,[Y,me]):me()},clone(Y){return Rh(Y,r,e,a)}};return J}function sh(t){if(Hc(t))return t=Wu(t),t.children=null,t}function gv(t){return Hc(t)?t.children?t.children[0]:void 0:t}function Dh(t,r){t.shapeFlag&6&&t.component?Dh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function sd(t,r=!1,e){let a=[],v=0;for(let d=0;d<t.length;d++){let x=t[d];const k=e==null?x.key:String(e)+String(x.key!=null?x.key:d);x.type===As?(x.patchFlag&128&&v++,a=a.concat(sd(x.children,r,k))):(r||x.type!==_a)&&a.push(k!=null?Wu(x,{key:k}):x)}if(v>1)for(let d=0;d<a.length;d++)a[d].patchFlag=-2;return a}/*! #__NO_SIDE_EFFECTS__ */function Bf(t,r){return mt(t)?ts({name:t.name},r,{setup:t}):t}const Sf=t=>!!t.type.__asyncLoader,Hc=t=>t.type.__isKeepAlive;function ww(t,r){nd(t,"a",r)}function mw(t,r){nd(t,"da",r)}function nd(t,r,e=_s){const a=t.__wdc||(t.__wdc=()=>{let v=e;for(;v;){if(v.isDeactivated)return;v=v.parent}return t()});if(Bc(r,a,e),e){let v=e.parent;for(;v&&v.parent;)Hc(v.parent.vnode)&&$w(a,r,e,v),v=v.parent}}function $w(t,r,e,a){const v=Bc(r,t,a,!0);ld(()=>{Mp(a[r],v)},e)}function Bc(t,r,e=_s,a=!1){if(e){const v=e[t]||(e[t]=[]),d=r.__weh||(r.__weh=(...x)=>{if(e.isUnmounted)return;Fo(),hf(e);const k=Ca(r,e,t,x);return vo(),No(),k});return a?v.unshift(d):v.push(d),d}}const xu=t=>(r,e=_s)=>(!Vc||t==="sp")&&Bc(t,(...a)=>r(...a),e),xw=xu("bm"),ad=xu("m"),bw=xu("bu"),Aw=xu("u"),id=xu("bum"),ld=xu("um"),Cw=xu("sp"),_w=xu("rtg"),kw=xu("rtc");function Pw(t,r=_s){Bc("ec",t,r)}function _c(t,r,e,a){let v;const d=e&&e[a];if(nt(t)||Qr(t)){v=new Array(t.length);for(let x=0,k=t.length;x<k;x++)v[x]=r(t[x],x,void 0,d&&d[x])}else if(typeof t=="number"){v=new Array(t);for(let x=0;x<t;x++)v[x]=r(x+1,x,void 0,d&&d[x])}else if(mr(t))if(t[Symbol.iterator])v=Array.from(t,(x,k)=>r(x,k,void 0,d&&d[k]));else{const x=Object.keys(t);v=new Array(x.length);for(let k=0,E=x.length;k<E;k++){const S=x[k];v[k]=r(t[S],S,k,d&&d[k])}}else v=[];return e&&(e[a]=v),v}function rc(t,r,e={},a,v){if(Xs.isCE||Xs.parent&&Sf(Xs.parent)&&Xs.parent.isCE)return r!=="default"&&(e.name=r),Er("slot",e,a&&a());let d=t[r];d&&d._c&&(d._d=!1),Pr();const x=d&&ud(d(e)),k=qc(As,{key:e.key||x&&x.key||`_${r}`},x||(a?a():[]),x&&t._===1?64:-2);return!v&&k.scopeId&&(k.slotScopeIds=[k.scopeId+"-s"]),d&&d._c&&(d._d=!0),k}function ud(t){return t.some(r=>Ec(r)?!(r.type===_a||r.type===As&&!ud(r.children)):!0)?t:null}const Lh=t=>t?$d(t)?Wp(t)||t.proxy:Lh(t.parent):null,Ff=ts(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Lh(t.parent),$root:t=>Lh(t.root),$emit:t=>t.emit,$options:t=>Up(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Bp(t.update)}),$nextTick:t=>t.n||(t.n=Qy.bind(t.proxy)),$watch:t=>vw.bind(t)}),nh=(t,r)=>t!==xr&&!t.__isScriptSetup&&Bt(t,r),Ew={get({_:t},r){const{ctx:e,setupState:a,data:v,props:d,accessCache:x,type:k,appContext:E}=t;let S;if(r[0]!=="$"){const K=x[r];if(K!==void 0)switch(K){case 1:return a[r];case 2:return v[r];case 4:return e[r];case 3:return d[r]}else{if(nh(a,r))return x[r]=1,a[r];if(v!==xr&&Bt(v,r))return x[r]=2,v[r];if((S=t.propsOptions[0])&&Bt(S,r))return x[r]=3,d[r];if(e!==xr&&Bt(e,r))return x[r]=4,e[r];Hh&&(x[r]=0)}}const F=Ff[r];let j,L;if(F)return r==="$attrs"&&dn(t,"get",r),F(t);if((j=k.__cssModules)&&(j=j[r]))return j;if(e!==xr&&Bt(e,r))return x[r]=4,e[r];if(L=E.config.globalProperties,Bt(L,r))return L[r]},set({_:t},r,e){const{data:a,setupState:v,ctx:d}=t;return nh(v,r)?(v[r]=e,!0):a!==xr&&Bt(a,r)?(a[r]=e,!0):Bt(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(d[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:a,appContext:v,propsOptions:d}},x){let k;return!!e[x]||t!==xr&&Bt(t,x)||nh(r,x)||(k=d[0])&&Bt(k,x)||Bt(a,x)||Bt(Ff,x)||Bt(v.config.globalProperties,x)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:Bt(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function dv(t){return nt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let Hh=!0;function Mw(t){const r=Up(t),e=t.proxy,a=t.ctx;Hh=!1,r.beforeCreate&&yv(r.beforeCreate,t,"bc");const{data:v,computed:d,methods:x,watch:k,provide:E,inject:S,created:F,beforeMount:j,mounted:L,beforeUpdate:K,updated:he,activated:re,deactivated:ie,beforeDestroy:Ce,beforeUnmount:q,destroyed:H,unmounted:z,render:V,renderTracked:W,renderTriggered:J,errorCaptured:Y,serverPrefetch:te,expose:Ae,inheritAttrs:Ee,components:me,directives:Ge,filters:ut}=r;if(S&&Sw(S,a,null),x)for(const it in x){const Be=x[it];mt(Be)&&(a[it]=Be.bind(e))}if(v){const it=v.call(e,e);mr(it)&&(t.data=Rp(it))}if(Hh=!0,d)for(const it in d){const Be=d[it],lt=mt(Be)?Be.bind(e,e):mt(Be.get)?Be.get.bind(e,e):ba,It=!mt(Be)&&mt(Be.set)?Be.set.bind(e):ba,Ut=i0({get:lt,set:It});Object.defineProperty(a,it,{enumerable:!0,configurable:!0,get:()=>Ut.value,set:tt=>Ut.value=tt})}if(k)for(const it in k)od(k[it],a,e,it);if(E){const it=mt(E)?E.call(e):E;Reflect.ownKeys(it).forEach(Be=>{jw(Be,it[Be])})}F&&yv(F,t,"c");function ot(it,Be){nt(Be)?Be.forEach(lt=>it(lt.bind(e))):Be&&it(Be.bind(e))}if(ot(xw,j),ot(ad,L),ot(bw,K),ot(Aw,he),ot(ww,re),ot(mw,ie),ot(Pw,Y),ot(kw,W),ot(_w,J),ot(id,q),ot(ld,z),ot(Cw,te),nt(Ae))if(Ae.length){const it=t.exposed||(t.exposed={});Ae.forEach(Be=>{Object.defineProperty(it,Be,{get:()=>e[Be],set:lt=>e[Be]=lt})})}else t.exposed||(t.exposed={});V&&t.render===ba&&(t.render=V),Ee!=null&&(t.inheritAttrs=Ee),me&&(t.components=me),Ge&&(t.directives=Ge)}function Sw(t,r,e=ba){nt(t)&&(t=Bh(t));for(const a in t){const v=t[a];let d;mr(v)?"default"in v?d=sc(v.from||a,v.default,!0):d=sc(v.from||a):d=sc(v),yn(d)?Object.defineProperty(r,a,{enumerable:!0,configurable:!0,get:()=>d.value,set:x=>d.value=x}):r[a]=d}}function yv(t,r,e){Ca(nt(t)?t.map(a=>a.bind(r.proxy)):t.bind(r.proxy),r,e)}function od(t,r,e,a){const v=a.includes(".")?ed(e,a):()=>e[a];if(Qr(t)){const d=r[t];mt(d)&&Mf(v,d)}else if(mt(t))Mf(v,t.bind(e));else if(mr(t))if(nt(t))t.forEach(d=>od(d,r,e,a));else{const d=mt(t.handler)?t.handler.bind(e):r[t.handler];mt(d)&&Mf(v,d,t)}}function Up(t){const r=t.type,{mixins:e,extends:a}=r,{mixins:v,optionsCache:d,config:{optionMergeStrategies:x}}=t.appContext,k=d.get(r);let E;return k?E=k:!v.length&&!e&&!a?E=r:(E={},v.length&&v.forEach(S=>kc(E,S,x,!0)),kc(E,r,x)),mr(r)&&d.set(r,E),E}function kc(t,r,e,a=!1){const{mixins:v,extends:d}=r;d&&kc(t,d,e,!0),v&&v.forEach(x=>kc(t,x,e,!0));for(const x in r)if(!(a&&x==="expose")){const k=Fw[x]||e&&e[x];t[x]=k?k(t[x],r[x]):r[x]}return t}const Fw={data:wv,props:mv,emits:mv,methods:Pf,computed:Pf,beforeCreate:Vs,created:Vs,beforeMount:Vs,mounted:Vs,beforeUpdate:Vs,updated:Vs,beforeDestroy:Vs,beforeUnmount:Vs,destroyed:Vs,unmounted:Vs,activated:Vs,deactivated:Vs,errorCaptured:Vs,serverPrefetch:Vs,components:Pf,directives:Pf,watch:Ow,provide:wv,inject:Nw};function wv(t,r){return r?t?function(){return ts(mt(t)?t.call(this,this):t,mt(r)?r.call(this,this):r)}:r:t}function Nw(t,r){return Pf(Bh(t),Bh(r))}function Bh(t){if(nt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function Vs(t,r){return t?[...new Set([].concat(t,r))]:r}function Pf(t,r){return t?ts(Object.create(null),t,r):r}function mv(t,r){return t?nt(t)&&nt(r)?[...new Set([...t,...r])]:ts(Object.create(null),dv(t),dv(r??{})):r}function Ow(t,r){if(!t)return r;if(!r)return t;const e=ts(Object.create(null),t);for(const a in r)e[a]=Vs(t[a],r[a]);return e}function fd(){return{app:null,config:{isNativeTag:fy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tw=0;function Iw(t,r){return function(a,v=null){mt(a)||(a=ts({},a)),v!=null&&!mr(v)&&(v=null);const d=fd(),x=new WeakSet;let k=!1;const E=d.app={_uid:Tw++,_component:a,_props:v,_container:null,_context:d,_instance:null,version:l0,get config(){return d.config},set config(S){},use(S,...F){return x.has(S)||(S&&mt(S.install)?(x.add(S),S.install(E,...F)):mt(S)&&(x.add(S),S(E,...F))),E},mixin(S){return d.mixins.includes(S)||d.mixins.push(S),E},component(S,F){return F?(d.components[S]=F,E):d.components[S]},directive(S,F){return F?(d.directives[S]=F,E):d.directives[S]},mount(S,F,j){if(!k){const L=Er(a,v);return L.appContext=d,j===!0?j="svg":j===!1&&(j=void 0),F&&r?r(L,S):t(L,S,j),k=!0,E._container=S,S.__vue_app__=E,Wp(L.component)||L.component.proxy}},unmount(){k&&(t(null,E._container),delete E._container.__vue_app__)},provide(S,F){return d.provides[S]=F,E},runWithContext(S){Pc=E;try{return S()}finally{Pc=null}}};return E}}let Pc=null;function jw(t,r){if(_s){let e=_s.provides;const a=_s.parent&&_s.parent.provides;a===e&&(e=_s.provides=Object.create(a)),e[t]=r}}function sc(t,r,e=!1){const a=_s||Xs;if(a||Pc){const v=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:Pc._context.provides;if(v&&t in v)return v[t];if(arguments.length>1)return e&&mt(r)?r.call(a&&a.proxy):r}}function Rw(t,r,e,a=!1){const v={},d={};bc(d,zc,1),t.propsDefaults=Object.create(null),cd(t,r,v,d);for(const x in t.propsOptions[0])x in v||(v[x]=void 0);e?t.props=a?v:Vy(v):t.type.props?t.props=v:t.props=d,t.attrs=d}function Dw(t,r,e,a){const{props:v,attrs:d,vnode:{patchFlag:x}}=t,k=Gt(v),[E]=t.propsOptions;let S=!1;if((a||x>0)&&!(x&16)){if(x&8){const F=t.vnode.dynamicProps;for(let j=0;j<F.length;j++){let L=F[j];if(Dc(t.emitsOptions,L))continue;const K=r[L];if(E)if(Bt(d,L))K!==d[L]&&(d[L]=K,S=!0);else{const he=of(L);v[he]=Uh(E,k,he,K,t,!1)}else K!==d[L]&&(d[L]=K,S=!0)}}}else{cd(t,r,v,d)&&(S=!0);let F;for(const j in k)(!r||!Bt(r,j)&&((F=gf(j))===j||!Bt(r,F)))&&(E?e&&(e[j]!==void 0||e[F]!==void 0)&&(v[j]=Uh(E,k,j,void 0,t,!0)):delete v[j]);if(d!==k)for(const j in d)(!r||!Bt(r,j))&&(delete d[j],S=!0)}S&&$u(t,"set","$attrs")}function cd(t,r,e,a){const[v,d]=t.propsOptions;let x=!1,k;if(r)for(let E in r){if(tc(E))continue;const S=r[E];let F;v&&Bt(v,F=of(E))?!d||!d.includes(F)?e[F]=S:(k||(k={}))[F]=S:Dc(t.emitsOptions,E)||(!(E in a)||S!==a[E])&&(a[E]=S,x=!0)}if(d){const E=Gt(e),S=k||xr;for(let F=0;F<d.length;F++){const j=d[F];e[j]=Uh(v,E,j,S[j],t,!Bt(S,j))}}return x}function Uh(t,r,e,a,v,d){const x=t[e];if(x!=null){const k=Bt(x,"default");if(k&&a===void 0){const E=x.default;if(x.type!==Function&&!x.skipFactory&&mt(E)){const{propsDefaults:S}=v;e in S?a=S[e]:(hf(v),a=S[e]=E.call(null,r),vo())}else a=E}x[0]&&(d&&!k?a=!1:x[1]&&(a===""||a===gf(e))&&(a=!0))}return a}function hd(t,r,e=!1){const a=r.propsCache,v=a.get(t);if(v)return v;const d=t.props,x={},k=[];let E=!1;if(!mt(t)){const F=j=>{E=!0;const[L,K]=hd(j,r,!0);ts(x,L),K&&k.push(...K)};!e&&r.mixins.length&&r.mixins.forEach(F),t.extends&&F(t.extends),t.mixins&&t.mixins.forEach(F)}if(!d&&!E)return mr(t)&&a.set(t,Uo),Uo;if(nt(d))for(let F=0;F<d.length;F++){const j=of(d[F]);$v(j)&&(x[j]=xr)}else if(d)for(const F in d){const j=of(F);if($v(j)){const L=d[F],K=x[j]=nt(L)||mt(L)?{type:L}:ts({},L);if(K){const he=Av(Boolean,K.type),re=Av(String,K.type);K[0]=he>-1,K[1]=re<0||he<re,(he>-1||Bt(K,"default"))&&k.push(j)}}}const S=[x,k];return mr(t)&&a.set(t,S),S}function $v(t){return t[0]!=="$"}function xv(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function bv(t,r){return xv(t)===xv(r)}function Av(t,r){return nt(r)?r.findIndex(e=>bv(e,t)):mt(r)&&bv(r,t)?0:-1}const pd=t=>t[0]==="_"||t==="$stable",qp=t=>nt(t)?t.map(ni):[ni(t)],Lw=(t,r,e)=>{if(r._n)return r;const a=gn((...v)=>qp(r(...v)),e);return a._c=!1,a},vd=(t,r,e)=>{const a=t._ctx;for(const v in t){if(pd(v))continue;const d=t[v];if(mt(d))r[v]=Lw(v,d,a);else if(d!=null){const x=qp(d);r[v]=()=>x}}},gd=(t,r)=>{const e=qp(r);t.slots.default=()=>e},Hw=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=Gt(r),bc(r,"_",e)):vd(r,t.slots={})}else t.slots={},r&&gd(t,r);bc(t.slots,zc,1)},Bw=(t,r,e)=>{const{vnode:a,slots:v}=t;let d=!0,x=xr;if(a.shapeFlag&32){const k=r._;k?e&&k===1?d=!1:(ts(v,r),!e&&k===1&&delete v._):(d=!r.$stable,vd(r,v)),x=r}else r&&(gd(t,r),x={default:1});if(d)for(const k in v)!pd(k)&&x[k]==null&&delete v[k]};function qh(t,r,e,a,v=!1){if(nt(t)){t.forEach((L,K)=>qh(L,r&&(nt(r)?r[K]:r),e,a,v));return}if(Sf(a)&&!v)return;const d=a.shapeFlag&4?Wp(a.component)||a.component.proxy:a.el,x=v?null:d,{i:k,r:E}=t,S=r&&r.r,F=k.refs===xr?k.refs={}:k.refs,j=k.setupState;if(S!=null&&S!==E&&(Qr(S)?(F[S]=null,Bt(j,S)&&(j[S]=null)):yn(S)&&(S.value=null)),mt(E))qu(E,k,12,[x,F]);else{const L=Qr(E),K=yn(E);if(L||K){const he=()=>{if(t.f){const re=L?Bt(j,E)?j[E]:F[E]:E.value;v?nt(re)&&Mp(re,d):nt(re)?re.includes(d)||re.push(d):L?(F[E]=[d],Bt(j,E)&&(j[E]=F[E])):(E.value=[d],t.k&&(F[t.k]=E.value))}else L?(F[E]=x,Bt(j,E)&&(j[E]=x)):K&&(E.value=x,t.k&&(F[t.k]=x))};x?(he.id=-1,vn(he,e)):he()}}}const vn=cw;function Uw(t){return qw(t)}function qw(t,r){const e=Eg();e.__VUE__=!0;const{insert:a,remove:v,patchProp:d,createElement:x,createText:k,createComment:E,setText:S,setElementText:F,parentNode:j,nextSibling:L,setScopeId:K=ba,insertStaticContent:he}=t,re=(U,Z,ne,pe=null,ve=null,le=null,Oe=void 0,$e=null,xe=!!Z.dynamicChildren)=>{if(U===Z)return;U&&!so(U,Z)&&(pe=$r(U),tt(U,ve,le,!0),U=null),Z.patchFlag===-2&&(xe=!1,Z.dynamicChildren=null);const{type:ce,ref:Te,shapeFlag:We}=Z;switch(ce){case Uc:ie(U,Z,ne,pe);break;case _a:Ce(U,Z,ne,pe);break;case ih:U==null&&q(Z,ne,pe,Oe);break;case As:me(U,Z,ne,pe,ve,le,Oe,$e,xe);break;default:We&1?V(U,Z,ne,pe,ve,le,Oe,$e,xe):We&6?Ge(U,Z,ne,pe,ve,le,Oe,$e,xe):(We&64||We&128)&&ce.process(U,Z,ne,pe,ve,le,Oe,$e,xe,Or)}Te!=null&&ve&&qh(Te,U&&U.ref,le,Z||U,!Z)},ie=(U,Z,ne,pe)=>{if(U==null)a(Z.el=k(Z.children),ne,pe);else{const ve=Z.el=U.el;Z.children!==U.children&&S(ve,Z.children)}},Ce=(U,Z,ne,pe)=>{U==null?a(Z.el=E(Z.children||""),ne,pe):Z.el=U.el},q=(U,Z,ne,pe)=>{[U.el,U.anchor]=he(U.children,Z,ne,pe,U.el,U.anchor)},H=({el:U,anchor:Z},ne,pe)=>{let ve;for(;U&&U!==Z;)ve=L(U),a(U,ne,pe),U=ve;a(Z,ne,pe)},z=({el:U,anchor:Z})=>{let ne;for(;U&&U!==Z;)ne=L(U),v(U),U=ne;v(Z)},V=(U,Z,ne,pe,ve,le,Oe,$e,xe)=>{Z.type==="svg"?Oe="svg":Z.type==="math"&&(Oe="mathml"),U==null?W(Z,ne,pe,ve,le,Oe,$e,xe):te(U,Z,ve,le,Oe,$e,xe)},W=(U,Z,ne,pe,ve,le,Oe,$e)=>{let xe,ce;const{props:Te,shapeFlag:We,transition:Ve,dirs:Je}=U;if(xe=U.el=x(U.type,le,Te&&Te.is,Te),We&8?F(xe,U.children):We&16&&Y(U.children,xe,null,pe,ve,ah(U,le),Oe,$e),Je&&Xu(U,null,pe,"created"),J(xe,U,U.scopeId,Oe,pe),Te){for(const rt in Te)rt!=="value"&&!tc(rt)&&d(xe,rt,null,Te[rt],le,U.children,pe,ve,Nt);"value"in Te&&d(xe,"value",null,Te.value,le),(ce=Te.onVnodeBeforeMount)&&ei(ce,pe,U)}Je&&Xu(U,null,pe,"beforeMount");const Xe=zw(ve,Ve);Xe&&Ve.beforeEnter(xe),a(xe,Z,ne),((ce=Te&&Te.onVnodeMounted)||Xe||Je)&&vn(()=>{ce&&ei(ce,pe,U),Xe&&Ve.enter(xe),Je&&Xu(U,null,pe,"mounted")},ve)},J=(U,Z,ne,pe,ve)=>{if(ne&&K(U,ne),pe)for(let le=0;le<pe.length;le++)K(U,pe[le]);if(ve){let le=ve.subTree;if(Z===le){const Oe=ve.vnode;J(U,Oe,Oe.scopeId,Oe.slotScopeIds,ve.parent)}}},Y=(U,Z,ne,pe,ve,le,Oe,$e,xe=0)=>{for(let ce=xe;ce<U.length;ce++){const Te=U[ce]=$e?Tu(U[ce]):ni(U[ce]);re(null,Te,Z,ne,pe,ve,le,Oe,$e)}},te=(U,Z,ne,pe,ve,le,Oe)=>{const $e=Z.el=U.el;let{patchFlag:xe,dynamicChildren:ce,dirs:Te}=Z;xe|=U.patchFlag&16;const We=U.props||xr,Ve=Z.props||xr;let Je;if(ne&&Yu(ne,!1),(Je=Ve.onVnodeBeforeUpdate)&&ei(Je,ne,Z,U),Te&&Xu(Z,U,ne,"beforeUpdate"),ne&&Yu(ne,!0),ce?Ae(U.dynamicChildren,ce,$e,ne,pe,ah(Z,ve),le):Oe||Be(U,Z,$e,null,ne,pe,ah(Z,ve),le,!1),xe>0){if(xe&16)Ee($e,Z,We,Ve,ne,pe,ve);else if(xe&2&&We.class!==Ve.class&&d($e,"class",null,Ve.class,ve),xe&4&&d($e,"style",We.style,Ve.style,ve),xe&8){const Xe=Z.dynamicProps;for(let rt=0;rt<Xe.length;rt++){const ft=Xe[rt],Ot=We[ft],qt=Ve[ft];(qt!==Ot||ft==="value")&&d($e,ft,Ot,qt,ve,U.children,ne,pe,Nt)}}xe&1&&U.children!==Z.children&&F($e,Z.children)}else!Oe&&ce==null&&Ee($e,Z,We,Ve,ne,pe,ve);((Je=Ve.onVnodeUpdated)||Te)&&vn(()=>{Je&&ei(Je,ne,Z,U),Te&&Xu(Z,U,ne,"updated")},pe)},Ae=(U,Z,ne,pe,ve,le,Oe)=>{for(let $e=0;$e<Z.length;$e++){const xe=U[$e],ce=Z[$e],Te=xe.el&&(xe.type===As||!so(xe,ce)||xe.shapeFlag&70)?j(xe.el):ne;re(xe,ce,Te,null,pe,ve,le,Oe,!0)}},Ee=(U,Z,ne,pe,ve,le,Oe)=>{if(ne!==pe){if(ne!==xr)for(const $e in ne)!tc($e)&&!($e in pe)&&d(U,$e,ne[$e],null,Oe,Z.children,ve,le,Nt);for(const $e in pe){if(tc($e))continue;const xe=pe[$e],ce=ne[$e];xe!==ce&&$e!=="value"&&d(U,$e,ce,xe,Oe,Z.children,ve,le,Nt)}"value"in pe&&d(U,"value",ne.value,pe.value,Oe)}},me=(U,Z,ne,pe,ve,le,Oe,$e,xe)=>{const ce=Z.el=U?U.el:k(""),Te=Z.anchor=U?U.anchor:k("");let{patchFlag:We,dynamicChildren:Ve,slotScopeIds:Je}=Z;Je&&($e=$e?$e.concat(Je):Je),U==null?(a(ce,ne,pe),a(Te,ne,pe),Y(Z.children,ne,Te,ve,le,Oe,$e,xe)):We>0&&We&64&&Ve&&U.dynamicChildren?(Ae(U.dynamicChildren,Ve,ne,ve,le,Oe,$e),(Z.key!=null||ve&&Z===ve.subTree)&&dd(U,Z,!0)):Be(U,Z,ne,Te,ve,le,Oe,$e,xe)},Ge=(U,Z,ne,pe,ve,le,Oe,$e,xe)=>{Z.slotScopeIds=$e,U==null?Z.shapeFlag&512?ve.ctx.activate(Z,ne,pe,Oe,xe):ut(Z,ne,pe,ve,le,Oe,xe):Yt(U,Z,xe)},ut=(U,Z,ne,pe,ve,le,Oe)=>{const $e=U.component=Yw(U,pe,ve);if(Hc(U)&&($e.ctx.renderer=Or),t0($e),$e.asyncDep){if(ve&&ve.registerDep($e,ot),!U.el){const xe=$e.subTree=Er(_a);Ce(null,xe,Z,ne)}}else ot($e,U,Z,ne,ve,le,Oe)},Yt=(U,Z,ne)=>{const pe=Z.component=U.component;if(lw(U,Z,ne))if(pe.asyncDep&&!pe.asyncResolved){it(pe,Z,ne);return}else pe.next=Z,Yy(pe.update),pe.effect.dirty=!0,pe.update();else Z.el=U.el,pe.vnode=Z},ot=(U,Z,ne,pe,ve,le,Oe)=>{const $e=()=>{if(U.isMounted){let{next:Te,bu:We,u:Ve,parent:Je,vnode:Xe}=U;{const Ft=yd(U);if(Ft){Te&&(Te.el=Xe.el,it(U,Te,Oe)),Ft.asyncDep.then(()=>{U.isUnmounted||$e()});return}}let rt=Te,ft;Yu(U,!1),Te?(Te.el=Xe.el,it(U,Te,Oe)):Te=Xe,We&&eh(We),(ft=Te.props&&Te.props.onVnodeBeforeUpdate)&&ei(ft,Je,Te,Xe),Yu(U,!0);const Ot=rh(U),qt=U.subTree;U.subTree=Ot,re(qt,Ot,j(qt.el),$r(qt),U,ve,le),Te.el=Ot.el,rt===null&&uw(U,Ot.el),Ve&&vn(Ve,ve),(ft=Te.props&&Te.props.onVnodeUpdated)&&vn(()=>ei(ft,Je,Te,Xe),ve)}else{let Te;const{el:We,props:Ve}=Z,{bm:Je,m:Xe,parent:rt}=U,ft=Sf(Z);if(Yu(U,!1),Je&&eh(Je),!ft&&(Te=Ve&&Ve.onVnodeBeforeMount)&&ei(Te,rt,Z),Yu(U,!0),We&&jt){const Ot=()=>{U.subTree=rh(U),jt(We,U.subTree,U,ve,null)};ft?Z.type.__asyncLoader().then(()=>!U.isUnmounted&&Ot()):Ot()}else{const Ot=U.subTree=rh(U);re(null,Ot,ne,pe,U,ve,le),Z.el=Ot.el}if(Xe&&vn(Xe,ve),!ft&&(Te=Ve&&Ve.onVnodeMounted)){const Ot=Z;vn(()=>ei(Te,rt,Ot),ve)}(Z.shapeFlag&256||rt&&Sf(rt.vnode)&&rt.vnode.shapeFlag&256)&&U.a&&vn(U.a,ve),U.isMounted=!0,Z=ne=pe=null}},xe=U.effect=new Np($e,ba,()=>Bp(ce),U.scope),ce=U.update=()=>{xe.dirty&&xe.run()};ce.id=U.uid,Yu(U,!0),ce()},it=(U,Z,ne)=>{Z.component=U;const pe=U.vnode.props;U.vnode=Z,U.next=null,Dw(U,Z.props,pe,ne),Bw(U,Z.children,ne),Fo(),pv(U),No()},Be=(U,Z,ne,pe,ve,le,Oe,$e,xe=!1)=>{const ce=U&&U.children,Te=U?U.shapeFlag:0,We=Z.children,{patchFlag:Ve,shapeFlag:Je}=Z;if(Ve>0){if(Ve&128){It(ce,We,ne,pe,ve,le,Oe,$e,xe);return}else if(Ve&256){lt(ce,We,ne,pe,ve,le,Oe,$e,xe);return}}Je&8?(Te&16&&Nt(ce,ve,le),We!==ce&&F(ne,We)):Te&16?Je&16?It(ce,We,ne,pe,ve,le,Oe,$e,xe):Nt(ce,ve,le,!0):(Te&8&&F(ne,""),Je&16&&Y(We,ne,pe,ve,le,Oe,$e,xe))},lt=(U,Z,ne,pe,ve,le,Oe,$e,xe)=>{U=U||Uo,Z=Z||Uo;const ce=U.length,Te=Z.length,We=Math.min(ce,Te);let Ve;for(Ve=0;Ve<We;Ve++){const Je=Z[Ve]=xe?Tu(Z[Ve]):ni(Z[Ve]);re(U[Ve],Je,ne,null,ve,le,Oe,$e,xe)}ce>Te?Nt(U,ve,le,!0,!1,We):Y(Z,ne,pe,ve,le,Oe,$e,xe,We)},It=(U,Z,ne,pe,ve,le,Oe,$e,xe)=>{let ce=0;const Te=Z.length;let We=U.length-1,Ve=Te-1;for(;ce<=We&&ce<=Ve;){const Je=U[ce],Xe=Z[ce]=xe?Tu(Z[ce]):ni(Z[ce]);if(so(Je,Xe))re(Je,Xe,ne,null,ve,le,Oe,$e,xe);else break;ce++}for(;ce<=We&&ce<=Ve;){const Je=U[We],Xe=Z[Ve]=xe?Tu(Z[Ve]):ni(Z[Ve]);if(so(Je,Xe))re(Je,Xe,ne,null,ve,le,Oe,$e,xe);else break;We--,Ve--}if(ce>We){if(ce<=Ve){const Je=Ve+1,Xe=Je<Te?Z[Je].el:pe;for(;ce<=Ve;)re(null,Z[ce]=xe?Tu(Z[ce]):ni(Z[ce]),ne,Xe,ve,le,Oe,$e,xe),ce++}}else if(ce>Ve)for(;ce<=We;)tt(U[ce],ve,le,!0),ce++;else{const Je=ce,Xe=ce,rt=new Map;for(ce=Xe;ce<=Ve;ce++){const Tt=Z[ce]=xe?Tu(Z[ce]):ni(Z[ce]);Tt.key!=null&&rt.set(Tt.key,ce)}let ft,Ot=0;const qt=Ve-Xe+1;let Ft=!1,kt=0;const Fs=new Array(qt);for(ce=0;ce<qt;ce++)Fs[ce]=0;for(ce=Je;ce<=We;ce++){const Tt=U[ce];if(Ot>=qt){tt(Tt,ve,le,!0);continue}let gt;if(Tt.key!=null)gt=rt.get(Tt.key);else for(ft=Xe;ft<=Ve;ft++)if(Fs[ft-Xe]===0&&so(Tt,Z[ft])){gt=ft;break}gt===void 0?tt(Tt,ve,le,!0):(Fs[gt-Xe]=ce+1,gt>=kt?kt=gt:Ft=!0,re(Tt,Z[gt],ne,null,ve,le,Oe,$e,xe),Ot++)}const rs=Ft?Vw(Fs):Uo;for(ft=rs.length-1,ce=qt-1;ce>=0;ce--){const Tt=Xe+ce,gt=Z[Tt],xt=Tt+1<Te?Z[Tt+1].el:pe;Fs[ce]===0?re(null,gt,ne,xt,ve,le,Oe,$e,xe):Ft&&(ft<0||ce!==rs[ft]?Ut(gt,ne,xt,2):ft--)}}},Ut=(U,Z,ne,pe,ve=null)=>{const{el:le,type:Oe,transition:$e,children:xe,shapeFlag:ce}=U;if(ce&6){Ut(U.component.subTree,Z,ne,pe);return}if(ce&128){U.suspense.move(Z,ne,pe);return}if(ce&64){Oe.move(U,Z,ne,Or);return}if(Oe===As){a(le,Z,ne);for(let We=0;We<xe.length;We++)Ut(xe[We],Z,ne,pe);a(U.anchor,Z,ne);return}if(Oe===ih){H(U,Z,ne);return}if(pe!==2&&ce&1&&$e)if(pe===0)$e.beforeEnter(le),a(le,Z,ne),vn(()=>$e.enter(le),ve);else{const{leave:We,delayLeave:Ve,afterLeave:Je}=$e,Xe=()=>a(le,Z,ne),rt=()=>{We(le,()=>{Xe(),Je&&Je()})};Ve?Ve(le,Xe,rt):rt()}else a(le,Z,ne)},tt=(U,Z,ne,pe=!1,ve=!1)=>{const{type:le,props:Oe,ref:$e,children:xe,dynamicChildren:ce,shapeFlag:Te,patchFlag:We,dirs:Ve}=U;if($e!=null&&qh($e,null,ne,U,!0),Te&256){Z.ctx.deactivate(U);return}const Je=Te&1&&Ve,Xe=!Sf(U);let rt;if(Xe&&(rt=Oe&&Oe.onVnodeBeforeUnmount)&&ei(rt,Z,U),Te&6)Ar(U.component,ne,pe);else{if(Te&128){U.suspense.unmount(ne,pe);return}Je&&Xu(U,null,Z,"beforeUnmount"),Te&64?U.type.remove(U,Z,ne,ve,Or,pe):ce&&(le!==As||We>0&&We&64)?Nt(ce,Z,ne,!1,!0):(le===As&&We&384||!ve&&Te&16)&&Nt(xe,Z,ne),pe&&Rr(U)}(Xe&&(rt=Oe&&Oe.onVnodeUnmounted)||Je)&&vn(()=>{rt&&ei(rt,Z,U),Je&&Xu(U,null,Z,"unmounted")},ne)},Rr=U=>{const{type:Z,el:ne,anchor:pe,transition:ve}=U;if(Z===As){er(ne,pe);return}if(Z===ih){z(U);return}const le=()=>{v(ne),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(U.shapeFlag&1&&ve&&!ve.persisted){const{leave:Oe,delayLeave:$e}=ve,xe=()=>Oe(ne,le);$e?$e(U.el,le,xe):xe()}else le()},er=(U,Z)=>{let ne;for(;U!==Z;)ne=L(U),v(U),U=ne;v(Z)},Ar=(U,Z,ne)=>{const{bum:pe,scope:ve,update:le,subTree:Oe,um:$e}=U;pe&&eh(pe),ve.stop(),le&&(le.active=!1,tt(Oe,U,Z,ne)),$e&&vn($e,Z),vn(()=>{U.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Nt=(U,Z,ne,pe=!1,ve=!1,le=0)=>{for(let Oe=le;Oe<U.length;Oe++)tt(U[Oe],Z,ne,pe,ve)},$r=U=>U.shapeFlag&6?$r(U.component.subTree):U.shapeFlag&128?U.suspense.next():L(U.anchor||U.el),Vr=(U,Z,ne)=>{U==null?Z._vnode&&tt(Z._vnode,null,null,!0):re(Z._vnode||null,U,Z,null,null,null,ne),pv(),Zg(),Z._vnode=U},Or={p:re,um:tt,m:Ut,r:Rr,mt:ut,mc:Y,pc:Be,pbc:Ae,n:$r,o:t};let Dr,jt;return r&&([Dr,jt]=r(Or)),{render:Vr,hydrate:Dr,createApp:Iw(Vr,Dr)}}function ah({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function Yu({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function zw(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function dd(t,r,e=!1){const a=t.children,v=r.children;if(nt(a)&&nt(v))for(let d=0;d<a.length;d++){const x=a[d];let k=v[d];k.shapeFlag&1&&!k.dynamicChildren&&((k.patchFlag<=0||k.patchFlag===32)&&(k=v[d]=Tu(v[d]),k.el=x.el),e||dd(x,k)),k.type===Uc&&(k.el=x.el)}}function Vw(t){const r=t.slice(),e=[0];let a,v,d,x,k;const E=t.length;for(a=0;a<E;a++){const S=t[a];if(S!==0){if(v=e[e.length-1],t[v]<S){r[a]=v,e.push(a);continue}for(d=0,x=e.length-1;d<x;)k=d+x>>1,t[e[k]]<S?d=k+1:x=k;S<t[e[d]]&&(d>0&&(r[a]=e[d-1]),e[d]=a)}}for(d=e.length,x=e[d-1];d-- >0;)e[d]=x,x=r[x];return e}function yd(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:yd(r)}const Ww=t=>t.__isTeleport,As=Symbol.for("v-fgt"),Uc=Symbol.for("v-txt"),_a=Symbol.for("v-cmt"),ih=Symbol.for("v-stc"),Nf=[];let Ya=null;function Pr(t=!1){Nf.push(Ya=t?null:[])}function Kw(){Nf.pop(),Ya=Nf[Nf.length-1]||null}let Lf=1;function Cv(t){Lf+=t}function wd(t){return t.dynamicChildren=Lf>0?Ya||Uo:null,Kw(),Lf>0&&Ya&&Ya.push(t),t}function es(t,r,e,a,v,d){return wd(Aa(t,r,e,a,v,d,!0))}function qc(t,r,e,a,v){return wd(Er(t,r,e,a,v,!0))}function Ec(t){return t?t.__v_isVNode===!0:!1}function so(t,r){return t.type===r.type&&t.key===r.key}const zc="__vInternal",md=({key:t})=>t??null,nc=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Qr(t)||yn(t)||mt(t)?{i:Xs,r:t,k:r,f:!!e}:t:null);function Aa(t,r=null,e=null,a=0,v=null,d=t===As?0:1,x=!1,k=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&md(r),ref:r&&nc(r),scopeId:Lc,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:a,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:Xs};return k?(zp(E,e),d&128&&t.normalize(E)):e&&(E.shapeFlag|=Qr(e)?8:16),Lf>0&&!x&&Ya&&(E.patchFlag>0||d&6)&&E.patchFlag!==32&&Ya.push(E),E}const Er=Gw;function Gw(t,r=null,e=null,a=0,v=null,d=!1){if((!t||t===ow)&&(t=_a),Ec(t)){const k=Wu(t,r,!0);return e&&zp(k,e),Lf>0&&!d&&Ya&&(k.shapeFlag&6?Ya[Ya.indexOf(t)]=k:Ya.push(k)),k.patchFlag|=-2,k}if(a0(t)&&(t=t.__vccOpts),r){r=Jw(r);let{class:k,style:E}=r;k&&!Qr(k)&&(r.class=ks(k)),mr(E)&&(qg(E)&&!nt(E)&&(E=ts({},E)),r.style=Fp(E))}const x=Qr(t)?1:fw(t)?128:Ww(t)?64:mr(t)?4:mt(t)?2:0;return Aa(t,r,e,a,v,x,d,!0)}function Jw(t){return t?qg(t)||zc in t?ts({},t):t:null}function Wu(t,r,e=!1){const{props:a,ref:v,patchFlag:d,children:x}=t,k=r?Zw(a||{},r):a;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:k,key:k&&md(k),ref:r&&r.ref?e&&v?nt(v)?v.concat(nc(r)):[v,nc(r)]:nc(r):v,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:x,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==As?d===-1?16:d|16:d,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Wu(t.ssContent),ssFallback:t.ssFallback&&Wu(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Xa(t=" ",r=0){return Er(Uc,null,t,r)}function cf(t="",r=!1){return r?(Pr(),qc(_a,null,t)):Er(_a,null,t)}function ni(t){return t==null||typeof t=="boolean"?Er(_a):nt(t)?Er(As,null,t.slice()):typeof t=="object"?Tu(t):Er(Uc,null,String(t))}function Tu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Wu(t)}function zp(t,r){let e=0;const{shapeFlag:a}=t;if(r==null)r=null;else if(nt(r))e=16;else if(typeof r=="object")if(a&65){const v=r.default;v&&(v._c&&(v._d=!1),zp(t,v()),v._c&&(v._d=!0));return}else{e=32;const v=r._;!v&&!(zc in r)?r._ctx=Xs:v===3&&Xs&&(Xs.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else mt(r)?(r={default:r,_ctx:Xs},e=32):(r=String(r),a&64?(e=16,r=[Xa(r)]):e=8);t.children=r,t.shapeFlag|=e}function Zw(...t){const r={};for(let e=0;e<t.length;e++){const a=t[e];for(const v in a)if(v==="class")r.class!==a.class&&(r.class=ks([r.class,a.class]));else if(v==="style")r.style=Fp([r.style,a.style]);else if(Oc(v)){const d=r[v],x=a[v];x&&d!==x&&!(nt(d)&&d.includes(x))&&(r[v]=d?[].concat(d,x):x)}else v!==""&&(r[v]=a[v])}return r}function ei(t,r,e,a=null){Ca(t,r,7,[e,a])}const Qw=fd();let Xw=0;function Yw(t,r,e){const a=t.type,v=(r?r.appContext:t.appContext)||Qw,d={uid:Xw++,vnode:t,type:a,parent:r,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ay(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(v.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:hd(a,v),emitsOptions:Xg(a,v),emit:null,emitted:null,propsDefaults:xr,inheritAttrs:a.inheritAttrs,ctx:xr,data:xr,props:xr,attrs:xr,slots:xr,refs:xr,setupState:xr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=r?r.root:d,d.emit=rw.bind(null,d),t.ce&&t.ce(d),d}let _s=null;const e0=()=>_s||Xs;let Vp,zh;{const t=Eg(),r=(e,a)=>{let v;return(v=t[e])||(v=t[e]=[]),v.push(a),d=>{v.length>1?v.forEach(x=>x(d)):v[0](d)}};Vp=r("__VUE_INSTANCE_SETTERS__",e=>_s=e),zh=r("__VUE_SSR_SETTERS__",e=>Vc=e)}const hf=t=>{Vp(t),t.scope.on()},vo=()=>{_s&&_s.scope.off(),Vp(null)};function $d(t){return t.vnode.shapeFlag&4}let Vc=!1;function t0(t,r=!1){r&&zh(r);const{props:e,children:a}=t.vnode,v=$d(t);Rw(t,e,v,r),Hw(t,a);const d=v?r0(t,r):void 0;return r&&zh(!1),d}function r0(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=zg(new Proxy(t.ctx,Ew));const{setup:a}=e;if(a){const v=t.setupContext=a.length>1?n0(t):null;hf(t),Fo();const d=qu(a,t,0,[t.props,v]);if(No(),vo(),Cg(d)){if(d.then(vo,vo),r)return d.then(x=>{_v(t,x,r)}).catch(x=>{Rc(x,t,0)});t.asyncDep=d}else _v(t,d,r)}else xd(t,r)}function _v(t,r,e){mt(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:mr(r)&&(t.setupState=Kg(r)),xd(t,e)}let kv;function xd(t,r,e){const a=t.type;if(!t.render){if(!r&&kv&&!a.render){const v=a.template||Up(t).template;if(v){const{isCustomElement:d,compilerOptions:x}=t.appContext.config,{delimiters:k,compilerOptions:E}=a,S=ts(ts({isCustomElement:d,delimiters:k},x),E);a.render=kv(v,S)}}t.render=a.render||ba}{hf(t),Fo();try{Mw(t)}finally{No(),vo()}}}function s0(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return dn(t,"get","$attrs"),r[e]}}))}function n0(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return s0(t)},slots:t.slots,emit:t.emit,expose:r}}function Wp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Kg(zg(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in Ff)return Ff[e](t)},has(r,e){return e in r||e in Ff}}))}function a0(t){return mt(t)&&"__vccOpts"in t}const i0=(t,r)=>Wy(t,r,Vc);function Mu(t,r,e){const a=arguments.length;return a===2?mr(r)&&!nt(r)?Ec(r)?Er(t,null,[r]):Er(t,r):Er(t,null,r):(a>3?e=Array.prototype.slice.call(arguments,2):a===3&&Ec(e)&&(e=[e]),Er(t,r,e))}const l0="3.4.5",u0="http://www.w3.org/2000/svg",o0="http://www.w3.org/1998/Math/MathML",Iu=typeof document<"u"?document:null,Pv=Iu&&Iu.createElement("template"),f0={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,a)=>{const v=r==="svg"?Iu.createElementNS(u0,t):r==="mathml"?Iu.createElementNS(o0,t):Iu.createElement(t,e?{is:e}:void 0);return t==="select"&&a&&a.multiple!=null&&v.setAttribute("multiple",a.multiple),v},createText:t=>Iu.createTextNode(t),createComment:t=>Iu.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Iu.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,a,v,d){const x=e?e.previousSibling:r.lastChild;if(v&&(v===d||v.nextSibling))for(;r.insertBefore(v.cloneNode(!0),e),!(v===d||!(v=v.nextSibling)););else{Pv.innerHTML=a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t;const k=Pv.content;if(a==="svg"||a==="mathml"){const E=k.firstChild;for(;E.firstChild;)k.appendChild(E.firstChild);k.removeChild(E)}r.insertBefore(k,e)}return[x?x.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},Pu="transition",$f="animation",Hf=Symbol("_vtc"),Kp=(t,{slots:r})=>Mu(yw,c0(t),r);Kp.displayName="Transition";const bd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Kp.props=ts({},td,bd);const eo=(t,r=[])=>{nt(t)?t.forEach(e=>e(...r)):t&&t(...r)},Ev=t=>t?nt(t)?t.some(r=>r.length>1):t.length>1:!1;function c0(t){const r={};for(const me in t)me in bd||(r[me]=t[me]);if(t.css===!1)return r;const{name:e="v",type:a,duration:v,enterFromClass:d=`${e}-enter-from`,enterActiveClass:x=`${e}-enter-active`,enterToClass:k=`${e}-enter-to`,appearFromClass:E=d,appearActiveClass:S=x,appearToClass:F=k,leaveFromClass:j=`${e}-leave-from`,leaveActiveClass:L=`${e}-leave-active`,leaveToClass:K=`${e}-leave-to`}=t,he=h0(v),re=he&&he[0],ie=he&&he[1],{onBeforeEnter:Ce,onEnter:q,onEnterCancelled:H,onLeave:z,onLeaveCancelled:V,onBeforeAppear:W=Ce,onAppear:J=q,onAppearCancelled:Y=H}=r,te=(me,Ge,ut)=>{to(me,Ge?F:k),to(me,Ge?S:x),ut&&ut()},Ae=(me,Ge)=>{me._isLeaving=!1,to(me,j),to(me,K),to(me,L),Ge&&Ge()},Ee=me=>(Ge,ut)=>{const Yt=me?J:q,ot=()=>te(Ge,me,ut);eo(Yt,[Ge,ot]),Mv(()=>{to(Ge,me?E:d),Eu(Ge,me?F:k),Ev(Yt)||Sv(Ge,a,re,ot)})};return ts(r,{onBeforeEnter(me){eo(Ce,[me]),Eu(me,d),Eu(me,x)},onBeforeAppear(me){eo(W,[me]),Eu(me,E),Eu(me,S)},onEnter:Ee(!1),onAppear:Ee(!0),onLeave(me,Ge){me._isLeaving=!0;const ut=()=>Ae(me,Ge);Eu(me,j),g0(),Eu(me,L),Mv(()=>{me._isLeaving&&(to(me,j),Eu(me,K),Ev(z)||Sv(me,a,ie,ut))}),eo(z,[me,ut])},onEnterCancelled(me){te(me,!1),eo(H,[me])},onAppearCancelled(me){te(me,!0),eo(Y,[me])},onLeaveCancelled(me){Ae(me),eo(V,[me])}})}function h0(t){if(t==null)return null;if(mr(t))return[lh(t.enter),lh(t.leave)];{const r=lh(t);return[r,r]}}function lh(t){return dy(t)}function Eu(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[Hf]||(t[Hf]=new Set)).add(r)}function to(t,r){r.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const e=t[Hf];e&&(e.delete(r),e.size||(t[Hf]=void 0))}function Mv(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let p0=0;function Sv(t,r,e,a){const v=t._endId=++p0,d=()=>{v===t._endId&&a()};if(e)return setTimeout(d,e);const{type:x,timeout:k,propCount:E}=v0(t,r);if(!x)return a();const S=x+"end";let F=0;const j=()=>{t.removeEventListener(S,L),d()},L=K=>{K.target===t&&++F>=E&&j()};setTimeout(()=>{F<E&&j()},k+1),t.addEventListener(S,L)}function v0(t,r){const e=window.getComputedStyle(t),a=he=>(e[he]||"").split(", "),v=a(`${Pu}Delay`),d=a(`${Pu}Duration`),x=Fv(v,d),k=a(`${$f}Delay`),E=a(`${$f}Duration`),S=Fv(k,E);let F=null,j=0,L=0;r===Pu?x>0&&(F=Pu,j=x,L=d.length):r===$f?S>0&&(F=$f,j=S,L=E.length):(j=Math.max(x,S),F=j>0?x>S?Pu:$f:null,L=F?F===Pu?d.length:E.length:0);const K=F===Pu&&/\b(transform|all)(,|$)/.test(a(`${Pu}Property`).toString());return{type:F,timeout:j,propCount:L,hasTransform:K}}function Fv(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,a)=>Nv(e)+Nv(t[a])))}function Nv(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function g0(){return document.body.offsetHeight}function d0(t,r,e){const a=t[Hf];a&&(r=(r?[r,...a]:[...a]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const y0=Symbol("_vod"),w0=Symbol("");function m0(t,r,e){const a=t.style,v=Qr(e);if(e&&!v){if(r&&!Qr(r))for(const d in r)e[d]==null&&Vh(a,d,"");for(const d in e)Vh(a,d,e[d])}else{const d=a.display;if(v){if(r!==e){const x=a[w0];x&&(e+=";"+x),a.cssText=e}}else r&&t.removeAttribute("style");y0 in t&&(a.display=d)}}const Ov=/\s*!important$/;function Vh(t,r,e){if(nt(e))e.forEach(a=>Vh(t,r,a));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const a=$0(t,r);Ov.test(e)?t.setProperty(gf(a),e.replace(Ov,""),"important"):t[a]=e}}const Tv=["Webkit","Moz","ms"],uh={};function $0(t,r){const e=uh[r];if(e)return e;let a=of(r);if(a!=="filter"&&a in t)return uh[r]=a;a=Pg(a);for(let v=0;v<Tv.length;v++){const d=Tv[v]+a;if(d in t)return uh[r]=d}return r}const Iv="http://www.w3.org/1999/xlink";function x0(t,r,e,a,v){if(a&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(Iv,r.slice(6,r.length)):t.setAttributeNS(Iv,r,e);else{const d=by(r);e==null||d&&!Mg(e)?t.removeAttribute(r):t.setAttribute(r,d?"":e)}}function b0(t,r,e,a,v,d,x){if(r==="innerHTML"||r==="textContent"){a&&x(a,v,d),t[r]=e??"";return}const k=t.tagName;if(r==="value"&&k!=="PROGRESS"&&!k.includes("-")){t._value=e;const S=k==="OPTION"?t.getAttribute("value"):t.value,F=e??"";S!==F&&(t.value=F),e==null&&t.removeAttribute(r);return}let E=!1;if(e===""||e==null){const S=typeof t[r];S==="boolean"?e=Mg(e):e==null&&S==="string"?(e="",E=!0):S==="number"&&(e=0,E=!0)}try{t[r]=e}catch{}E&&t.removeAttribute(r)}function A0(t,r,e,a){t.addEventListener(r,e,a)}function C0(t,r,e,a){t.removeEventListener(r,e,a)}const jv=Symbol("_vei");function _0(t,r,e,a,v=null){const d=t[jv]||(t[jv]={}),x=d[r];if(a&&x)x.value=a;else{const[k,E]=k0(r);if(a){const S=d[r]=M0(a,v);A0(t,k,S,E)}else x&&(C0(t,k,x,E),d[r]=void 0)}}const Rv=/(?:Once|Passive|Capture)$/;function k0(t){let r;if(Rv.test(t)){r={};let a;for(;a=t.match(Rv);)t=t.slice(0,t.length-a[0].length),r[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):gf(t.slice(2)),r]}let oh=0;const P0=Promise.resolve(),E0=()=>oh||(P0.then(()=>oh=0),oh=Date.now());function M0(t,r){const e=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=e.attached)return;Ca(S0(a,e.value),r,5,[a])};return e.value=t,e.attached=E0(),e}function S0(t,r){if(nt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(a=>v=>!v._stopped&&a&&a(v))}else return r}const Dv=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,F0=(t,r,e,a,v,d,x,k,E)=>{const S=v==="svg";r==="class"?d0(t,a,S):r==="style"?m0(t,e,a):Oc(r)?Ep(r)||_0(t,r,e,a,x):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):N0(t,r,a,S))?b0(t,r,a,d,x,k,E):(r==="true-value"?t._trueValue=a:r==="false-value"&&(t._falseValue=a),x0(t,r,a,S))};function N0(t,r,e,a){if(a)return!!(r==="innerHTML"||r==="textContent"||r in t&&Dv(r)&&mt(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const v=t.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return Dv(r)&&Qr(e)?!1:r in t}const O0=ts({patchProp:F0},f0);let Lv;function T0(){return Lv||(Lv=Uw(O0))}const I0=(...t)=>{const r=T0().createApp(...t),{mount:e}=r;return r.mount=a=>{const v=R0(a);if(!v)return;const d=r._component;!mt(d)&&!d.render&&!d.template&&(d.template=v.innerHTML),v.innerHTML="";const x=e(v,!1,j0(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),x},r};function j0(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function R0(t){return Qr(t)?document.querySelector(t):t}function Of(){return Of=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},Of.apply(this,arguments)}var D0=13,L0=9,H0=8,B0=89,Qf=90,U0=77,Hv=57,Bv=219,Uv=222,qv=192,q0=27,zv=100,z0=3e3,V0=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),fh=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),W0=Bf({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),a=window.getComputedStyle(r);this.$nextTick(function(){var v="border-top-left-radius",d="border-bottom-left-radius";if(e){e.style[v]=a[v],e.style[d]=a[d],r.style[v]="0",r.style[d]="0";var x=["background-color","margin-top","padding-top","font-family","font-size","line-height"];x.forEach(function(k){e.style[k]=a[k]}),e.style["margin-bottom"]="-"+a["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,a=r.selectionStart,v=r.selectionEnd;this._recordChange({value:e,selectionStart:a,selectionEnd:v})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,a=this.history.stack[this.history.offset];a&&e&&(this.history.stack[this.history.offset]=Of({},a,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var a=this.history,v=a.stack,d=a.offset;if(v.length&&d>-1){this.history.stack=v.slice(0,d+1);var x=this.history.stack.length;if(x>zv){var k=x-zv;this.history.stack=v.slice(k,x),this.history.offset=Math.max(this.history.offset-k,0)}}var E=Date.now();if(e){var S=this.history.stack[this.history.offset];if(S&&E-S.timestamp<z0){var F,j,L=/[^a-z0-9]([a-z0-9]+)$/i,K=(F=this._getLines(S.value,S.selectionStart).pop())===null||F===void 0?void 0:F.match(L),he=(j=this._getLines(r.value,r.selectionStart).pop())===null||j===void 0?void 0:j.match(L);if(K&&he&&he[1].startsWith(K[1])){this.history.stack[this.history.offset]=Of({},r,{timestamp:E});return}}}this.history.stack.push(Of({},r,{timestamp:E})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,a=e.value,v=e.selectionStart,d=e.selectionEnd;this._recordChange({value:a,selectionStart:v,selectionEnd:d},!0),this.$emit("update:modelValue",a)},_undoEdit:function(){var r=this.history,e=r.stack,a=r.offset,v=e[a-1];v&&(this._updateInput(v),this.history.offset=Math.max(a-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,a=r.offset,v=e[a+1];v&&(this._updateInput(v),this.history.offset=Math.min(a+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,a=this.insertSpaces,v=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===q0&&(r.target.blur(),this.$emit("blur",r));var d=r.target,x=d.value,k=d.selectionStart,E=d.selectionEnd,S=(a?" ":"	").repeat(e);if(r.keyCode===L0&&!v&&this.capture)if(r.preventDefault(),r.shiftKey){var F=this._getLines(x,k),j=F.length-1,L=this._getLines(x,E).length-1,K=x.split(`
`).map(function(me,Ge){return Ge>=j&&Ge<=L&&me.startsWith(S)?me.substring(S.length):me}).join(`
`);if(x!==K){var he=F[j];this._applyEdits({value:K,selectionStart:he.startsWith(S)?k-S.length:k,selectionEnd:E-(x.length-K.length)})}}else if(k!==E){var re=this._getLines(x,k),ie=re.length-1,Ce=this._getLines(x,E).length-1,q=re[ie];this._applyEdits({value:x.split(`
`).map(function(me,Ge){return Ge>=ie&&Ge<=Ce?S+me:me}).join(`
`),selectionStart:/\S/.test(q)?k+S.length:k,selectionEnd:E+S.length*(Ce-ie+1)})}else{var H=k+S.length;this._applyEdits({value:x.substring(0,k)+S+x.substring(E),selectionStart:H,selectionEnd:H})}else if(r.keyCode===H0){var z=k!==E,V=x.substring(0,k);if(V.endsWith(S)&&!z){r.preventDefault();var W=k-S.length;this._applyEdits({value:x.substring(0,k-S.length)+x.substring(E),selectionStart:W,selectionEnd:W})}}else if(r.keyCode===D0){if(k===E){var J=this._getLines(x,k).pop(),Y=J==null?void 0:J.match(/^\s+/);if(Y&&Y[0]){r.preventDefault();var te=`
`+Y[0],Ae=k+te.length;this._applyEdits({value:x.substring(0,k)+te+x.substring(E),selectionStart:Ae,selectionEnd:Ae})}}}else if(r.keyCode===Hv||r.keyCode===Bv||r.keyCode===Uv||r.keyCode===qv){var Ee;r.keyCode===Hv&&r.shiftKey?Ee=["(",")"]:r.keyCode===Bv?r.shiftKey?Ee=["{","}"]:Ee=["[","]"]:r.keyCode===Uv?r.shiftKey?Ee=['"','"']:Ee=["'","'"]:r.keyCode===qv&&!r.shiftKey&&(Ee=["`","`"]),k!==E&&Ee&&(r.preventDefault(),this._applyEdits({value:x.substring(0,k)+Ee[0]+x.substring(k,E)+Ee[1]+x.substring(E),selectionStart:k,selectionEnd:E+2}))}else(fh?r.metaKey&&r.keyCode===Qf:r.ctrlKey&&r.keyCode===Qf)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(fh?r.metaKey&&r.keyCode===Qf&&r.shiftKey:V0?r.ctrlKey&&r.keyCode===B0:r.ctrlKey&&r.keyCode===Qf&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===U0&&r.ctrlKey&&(!fh||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=Mu("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),a=Mu("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(k,E){return Mu("div",{class:"prism-editor__line-number token comment"},""+ ++E)})]),v=Mu("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(E){r.$emit("click",E)},onKeyup:function(E){r.$emit("keyup",E)},onFocus:function(E){r.$emit("focus",E)},onBlur:function(E){r.$emit("blur",E)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),d=Mu("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),x=Mu("div",{class:"prism-editor__container"},[v,d]);return Mu("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&a,x])}}),Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function G0(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function a(){return this instanceof a?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var v=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,v.get?v:{enumerable:!0,get:function(){return t[a]}})}),e}var J0={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(a){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,x={},k={manual:a.Prism&&a.Prism.manual,disableWorkerMessageHandler:a.Prism&&a.Prism.disableWorkerMessageHandler,util:{encode:function q(H){return H instanceof E?new E(H.type,q(H.content),H.alias):Array.isArray(H)?H.map(q):H.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(q){return Object.prototype.toString.call(q).slice(8,-1)},objId:function(q){return q.__id||Object.defineProperty(q,"__id",{value:++d}),q.__id},clone:function q(H,z){z=z||{};var V,W;switch(k.util.type(H)){case"Object":if(W=k.util.objId(H),z[W])return z[W];V={},z[W]=V;for(var J in H)H.hasOwnProperty(J)&&(V[J]=q(H[J],z));return V;case"Array":return W=k.util.objId(H),z[W]?z[W]:(V=[],z[W]=V,H.forEach(function(Y,te){V[te]=q(Y,z)}),V);default:return H}},getLanguage:function(q){for(;q;){var H=v.exec(q.className);if(H)return H[1].toLowerCase();q=q.parentElement}return"none"},setLanguage:function(q,H){q.className=q.className.replace(RegExp(v,"gi"),""),q.classList.add("language-"+H)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(V){var q=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(V.stack)||[])[1];if(q){var H=document.getElementsByTagName("script");for(var z in H)if(H[z].src==q)return H[z]}return null}},isActive:function(q,H,z){for(var V="no-"+H;q;){var W=q.classList;if(W.contains(H))return!0;if(W.contains(V))return!1;q=q.parentElement}return!!z}},languages:{plain:x,plaintext:x,text:x,txt:x,extend:function(q,H){var z=k.util.clone(k.languages[q]);for(var V in H)z[V]=H[V];return z},insertBefore:function(q,H,z,V){V=V||k.languages;var W=V[q],J={};for(var Y in W)if(W.hasOwnProperty(Y)){if(Y==H)for(var te in z)z.hasOwnProperty(te)&&(J[te]=z[te]);z.hasOwnProperty(Y)||(J[Y]=W[Y])}var Ae=V[q];return V[q]=J,k.languages.DFS(k.languages,function(Ee,me){me===Ae&&Ee!=q&&(this[Ee]=J)}),J},DFS:function q(H,z,V,W){W=W||{};var J=k.util.objId;for(var Y in H)if(H.hasOwnProperty(Y)){z.call(H,Y,H[Y],V||Y);var te=H[Y],Ae=k.util.type(te);Ae==="Object"&&!W[J(te)]?(W[J(te)]=!0,q(te,z,null,W)):Ae==="Array"&&!W[J(te)]&&(W[J(te)]=!0,q(te,z,Y,W))}}},plugins:{},highlightAll:function(q,H){k.highlightAllUnder(document,q,H)},highlightAllUnder:function(q,H,z){var V={callback:z,container:q,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};k.hooks.run("before-highlightall",V),V.elements=Array.prototype.slice.apply(V.container.querySelectorAll(V.selector)),k.hooks.run("before-all-elements-highlight",V);for(var W=0,J;J=V.elements[W++];)k.highlightElement(J,H===!0,V.callback)},highlightElement:function(q,H,z){var V=k.util.getLanguage(q),W=k.languages[V];k.util.setLanguage(q,V);var J=q.parentElement;J&&J.nodeName.toLowerCase()==="pre"&&k.util.setLanguage(J,V);var Y=q.textContent,te={element:q,language:V,grammar:W,code:Y};function Ae(me){te.highlightedCode=me,k.hooks.run("before-insert",te),te.element.innerHTML=te.highlightedCode,k.hooks.run("after-highlight",te),k.hooks.run("complete",te),z&&z.call(te.element)}if(k.hooks.run("before-sanity-check",te),J=te.element.parentElement,J&&J.nodeName.toLowerCase()==="pre"&&!J.hasAttribute("tabindex")&&J.setAttribute("tabindex","0"),!te.code){k.hooks.run("complete",te),z&&z.call(te.element);return}if(k.hooks.run("before-highlight",te),!te.grammar){Ae(k.util.encode(te.code));return}if(H&&a.Worker){var Ee=new Worker(k.filename);Ee.onmessage=function(me){Ae(me.data)},Ee.postMessage(JSON.stringify({language:te.language,code:te.code,immediateClose:!0}))}else Ae(k.highlight(te.code,te.grammar,te.language))},highlight:function(q,H,z){var V={code:q,grammar:H,language:z};if(k.hooks.run("before-tokenize",V),!V.grammar)throw new Error('The language "'+V.language+'" has no grammar.');return V.tokens=k.tokenize(V.code,V.grammar),k.hooks.run("after-tokenize",V),E.stringify(k.util.encode(V.tokens),V.language)},tokenize:function(q,H){var z=H.rest;if(z){for(var V in z)H[V]=z[V];delete H.rest}var W=new j;return L(W,W.head,q),F(q,W,H,W.head,0),he(W)},hooks:{all:{},add:function(q,H){var z=k.hooks.all;z[q]=z[q]||[],z[q].push(H)},run:function(q,H){var z=k.hooks.all[q];if(!(!z||!z.length))for(var V=0,W;W=z[V++];)W(H)}},Token:E};a.Prism=k;function E(q,H,z,V){this.type=q,this.content=H,this.alias=z,this.length=(V||"").length|0}E.stringify=function q(H,z){if(typeof H=="string")return H;if(Array.isArray(H)){var V="";return H.forEach(function(Ae){V+=q(Ae,z)}),V}var W={type:H.type,content:q(H.content,z),tag:"span",classes:["token",H.type],attributes:{},language:z},J=H.alias;J&&(Array.isArray(J)?Array.prototype.push.apply(W.classes,J):W.classes.push(J)),k.hooks.run("wrap",W);var Y="";for(var te in W.attributes)Y+=" "+te+'="'+(W.attributes[te]||"").replace(/"/g,"&quot;")+'"';return"<"+W.tag+' class="'+W.classes.join(" ")+'"'+Y+">"+W.content+"</"+W.tag+">"};function S(q,H,z,V){q.lastIndex=H;var W=q.exec(z);if(W&&V&&W[1]){var J=W[1].length;W.index+=J,W[0]=W[0].slice(J)}return W}function F(q,H,z,V,W,J){for(var Y in z)if(!(!z.hasOwnProperty(Y)||!z[Y])){var te=z[Y];te=Array.isArray(te)?te:[te];for(var Ae=0;Ae<te.length;++Ae){if(J&&J.cause==Y+","+Ae)return;var Ee=te[Ae],me=Ee.inside,Ge=!!Ee.lookbehind,ut=!!Ee.greedy,Yt=Ee.alias;if(ut&&!Ee.pattern.global){var ot=Ee.pattern.toString().match(/[imsuy]*$/)[0];Ee.pattern=RegExp(Ee.pattern.source,ot+"g")}for(var it=Ee.pattern||Ee,Be=V.next,lt=W;Be!==H.tail&&!(J&&lt>=J.reach);lt+=Be.value.length,Be=Be.next){var It=Be.value;if(H.length>q.length)return;if(!(It instanceof E)){var Ut=1,tt;if(ut){if(tt=S(it,lt,q,Ge),!tt||tt.index>=q.length)break;var Nt=tt.index,Rr=tt.index+tt[0].length,er=lt;for(er+=Be.value.length;Nt>=er;)Be=Be.next,er+=Be.value.length;if(er-=Be.value.length,lt=er,Be.value instanceof E)continue;for(var Ar=Be;Ar!==H.tail&&(er<Rr||typeof Ar.value=="string");Ar=Ar.next)Ut++,er+=Ar.value.length;Ut--,It=q.slice(lt,er),tt.index-=lt}else if(tt=S(it,0,It,Ge),!tt)continue;var Nt=tt.index,$r=tt[0],Vr=It.slice(0,Nt),Or=It.slice(Nt+$r.length),Dr=lt+It.length;J&&Dr>J.reach&&(J.reach=Dr);var jt=Be.prev;Vr&&(jt=L(H,jt,Vr),lt+=Vr.length),K(H,jt,Ut);var U=new E(Y,me?k.tokenize($r,me):$r,Yt,$r);if(Be=L(H,jt,U),Or&&L(H,Be,Or),Ut>1){var Z={cause:Y+","+Ae,reach:Dr};F(q,H,z,Be.prev,lt,Z),J&&Z.reach>J.reach&&(J.reach=Z.reach)}}}}}}function j(){var q={value:null,prev:null,next:null},H={value:null,prev:q,next:null};q.next=H,this.head=q,this.tail=H,this.length=0}function L(q,H,z){var V=H.next,W={value:z,prev:H,next:V};return H.next=W,V.prev=W,q.length++,W}function K(q,H,z){for(var V=H.next,W=0;W<z&&V!==q.tail;W++)V=V.next;H.next=V,V.prev=H,q.length-=W}function he(q){for(var H=[],z=q.head.next;z!==q.tail;)H.push(z.value),z=z.next;return H}if(!a.document)return a.addEventListener&&(k.disableWorkerMessageHandler||a.addEventListener("message",function(q){var H=JSON.parse(q.data),z=H.language,V=H.code,W=H.immediateClose;a.postMessage(k.highlight(V,k.languages[z],z)),W&&a.close()},!1)),k;var re=k.util.currentScript();re&&(k.filename=re.src,re.hasAttribute("data-manual")&&(k.manual=!0));function ie(){k.manual||k.highlightAll()}if(!k.manual){var Ce=document.readyState;Ce==="loading"||Ce==="interactive"&&re&&re.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return k}(r);t.exports&&(t.exports=e),typeof Dn<"u"&&(Dn.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(a){a.type==="entity"&&(a.attributes.title=a.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(v,d){var x={};x["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[d]},x.cdata=/^<!\[CDATA\[|\]\]>$/i;var k={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:x}};k["language-"+d]={pattern:/[\s\S]+/,inside:e.languages[d]};var E={};E[v]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return v}),"i"),lookbehind:!0,greedy:!0,inside:k},e.languages.insertBefore("markup","cdata",E)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(a,v){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+a+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[v,"language-"+v],inside:e.languages[v]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(a){var v=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;a.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+v.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+v.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+v.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+v.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:v,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},a.languages.css.atrule.inside.rest=a.languages.css;var d=a.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var a="Loading…",v=function(re,ie){return"✖ Error "+re+" while fetching file: "+ie},d="✖ Error: File does not exist or is empty",x={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},k="data-src-status",E="loading",S="loaded",F="failed",j="pre[data-src]:not(["+k+'="'+S+'"]):not(['+k+'="'+E+'"])';function L(re,ie,Ce){var q=new XMLHttpRequest;q.open("GET",re,!0),q.onreadystatechange=function(){q.readyState==4&&(q.status<400&&q.responseText?ie(q.responseText):q.status>=400?Ce(v(q.status,q.statusText)):Ce(d))},q.send(null)}function K(re){var ie=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(re||"");if(ie){var Ce=Number(ie[1]),q=ie[2],H=ie[3];return q?H?[Ce,Number(H)]:[Ce,void 0]:[Ce,Ce]}}e.hooks.add("before-highlightall",function(re){re.selector+=", "+j}),e.hooks.add("before-sanity-check",function(re){var ie=re.element;if(ie.matches(j)){re.code="",ie.setAttribute(k,E);var Ce=ie.appendChild(document.createElement("CODE"));Ce.textContent=a;var q=ie.getAttribute("data-src"),H=re.language;if(H==="none"){var z=(/\.(\w+)$/.exec(q)||[,"none"])[1];H=x[z]||z}e.util.setLanguage(Ce,H),e.util.setLanguage(ie,H);var V=e.plugins.autoloader;V&&V.loadLanguages(H),L(q,function(W){ie.setAttribute(k,S);var J=K(ie.getAttribute("data-range"));if(J){var Y=W.split(/\r\n?|\n/g),te=J[0],Ae=J[1]==null?Y.length:J[1];te<0&&(te+=Y.length),te=Math.max(0,Math.min(te-1,Y.length)),Ae<0&&(Ae+=Y.length),Ae=Math.max(0,Math.min(Ae,Y.length)),W=Y.slice(te,Ae).join(`
`),ie.hasAttribute("data-start")||ie.setAttribute("data-start",String(te+1))}Ce.textContent=W,e.highlightElement(Ce)},function(W){ie.setAttribute(k,F),Ce.textContent=W})}}),e.plugins.fileHighlight={highlight:function(ie){for(var Ce=(ie||document).querySelectorAll(j),q=0,H;H=Ce[q++];)e.highlightElement(H)}};var he=!1;e.fileHighlight=function(){he||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),he=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(J0);var Ad={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(a){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,x={},k={manual:a.Prism&&a.Prism.manual,disableWorkerMessageHandler:a.Prism&&a.Prism.disableWorkerMessageHandler,util:{encode:function q(H){return H instanceof E?new E(H.type,q(H.content),H.alias):Array.isArray(H)?H.map(q):H.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(q){return Object.prototype.toString.call(q).slice(8,-1)},objId:function(q){return q.__id||Object.defineProperty(q,"__id",{value:++d}),q.__id},clone:function q(H,z){z=z||{};var V,W;switch(k.util.type(H)){case"Object":if(W=k.util.objId(H),z[W])return z[W];V={},z[W]=V;for(var J in H)H.hasOwnProperty(J)&&(V[J]=q(H[J],z));return V;case"Array":return W=k.util.objId(H),z[W]?z[W]:(V=[],z[W]=V,H.forEach(function(Y,te){V[te]=q(Y,z)}),V);default:return H}},getLanguage:function(q){for(;q;){var H=v.exec(q.className);if(H)return H[1].toLowerCase();q=q.parentElement}return"none"},setLanguage:function(q,H){q.className=q.className.replace(RegExp(v,"gi"),""),q.classList.add("language-"+H)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(V){var q=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(V.stack)||[])[1];if(q){var H=document.getElementsByTagName("script");for(var z in H)if(H[z].src==q)return H[z]}return null}},isActive:function(q,H,z){for(var V="no-"+H;q;){var W=q.classList;if(W.contains(H))return!0;if(W.contains(V))return!1;q=q.parentElement}return!!z}},languages:{plain:x,plaintext:x,text:x,txt:x,extend:function(q,H){var z=k.util.clone(k.languages[q]);for(var V in H)z[V]=H[V];return z},insertBefore:function(q,H,z,V){V=V||k.languages;var W=V[q],J={};for(var Y in W)if(W.hasOwnProperty(Y)){if(Y==H)for(var te in z)z.hasOwnProperty(te)&&(J[te]=z[te]);z.hasOwnProperty(Y)||(J[Y]=W[Y])}var Ae=V[q];return V[q]=J,k.languages.DFS(k.languages,function(Ee,me){me===Ae&&Ee!=q&&(this[Ee]=J)}),J},DFS:function q(H,z,V,W){W=W||{};var J=k.util.objId;for(var Y in H)if(H.hasOwnProperty(Y)){z.call(H,Y,H[Y],V||Y);var te=H[Y],Ae=k.util.type(te);Ae==="Object"&&!W[J(te)]?(W[J(te)]=!0,q(te,z,null,W)):Ae==="Array"&&!W[J(te)]&&(W[J(te)]=!0,q(te,z,Y,W))}}},plugins:{},highlightAll:function(q,H){k.highlightAllUnder(document,q,H)},highlightAllUnder:function(q,H,z){var V={callback:z,container:q,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};k.hooks.run("before-highlightall",V),V.elements=Array.prototype.slice.apply(V.container.querySelectorAll(V.selector)),k.hooks.run("before-all-elements-highlight",V);for(var W=0,J;J=V.elements[W++];)k.highlightElement(J,H===!0,V.callback)},highlightElement:function(q,H,z){var V=k.util.getLanguage(q),W=k.languages[V];k.util.setLanguage(q,V);var J=q.parentElement;J&&J.nodeName.toLowerCase()==="pre"&&k.util.setLanguage(J,V);var Y=q.textContent,te={element:q,language:V,grammar:W,code:Y};function Ae(me){te.highlightedCode=me,k.hooks.run("before-insert",te),te.element.innerHTML=te.highlightedCode,k.hooks.run("after-highlight",te),k.hooks.run("complete",te),z&&z.call(te.element)}if(k.hooks.run("before-sanity-check",te),J=te.element.parentElement,J&&J.nodeName.toLowerCase()==="pre"&&!J.hasAttribute("tabindex")&&J.setAttribute("tabindex","0"),!te.code){k.hooks.run("complete",te),z&&z.call(te.element);return}if(k.hooks.run("before-highlight",te),!te.grammar){Ae(k.util.encode(te.code));return}if(H&&a.Worker){var Ee=new Worker(k.filename);Ee.onmessage=function(me){Ae(me.data)},Ee.postMessage(JSON.stringify({language:te.language,code:te.code,immediateClose:!0}))}else Ae(k.highlight(te.code,te.grammar,te.language))},highlight:function(q,H,z){var V={code:q,grammar:H,language:z};if(k.hooks.run("before-tokenize",V),!V.grammar)throw new Error('The language "'+V.language+'" has no grammar.');return V.tokens=k.tokenize(V.code,V.grammar),k.hooks.run("after-tokenize",V),E.stringify(k.util.encode(V.tokens),V.language)},tokenize:function(q,H){var z=H.rest;if(z){for(var V in z)H[V]=z[V];delete H.rest}var W=new j;return L(W,W.head,q),F(q,W,H,W.head,0),he(W)},hooks:{all:{},add:function(q,H){var z=k.hooks.all;z[q]=z[q]||[],z[q].push(H)},run:function(q,H){var z=k.hooks.all[q];if(!(!z||!z.length))for(var V=0,W;W=z[V++];)W(H)}},Token:E};a.Prism=k;function E(q,H,z,V){this.type=q,this.content=H,this.alias=z,this.length=(V||"").length|0}E.stringify=function q(H,z){if(typeof H=="string")return H;if(Array.isArray(H)){var V="";return H.forEach(function(Ae){V+=q(Ae,z)}),V}var W={type:H.type,content:q(H.content,z),tag:"span",classes:["token",H.type],attributes:{},language:z},J=H.alias;J&&(Array.isArray(J)?Array.prototype.push.apply(W.classes,J):W.classes.push(J)),k.hooks.run("wrap",W);var Y="";for(var te in W.attributes)Y+=" "+te+'="'+(W.attributes[te]||"").replace(/"/g,"&quot;")+'"';return"<"+W.tag+' class="'+W.classes.join(" ")+'"'+Y+">"+W.content+"</"+W.tag+">"};function S(q,H,z,V){q.lastIndex=H;var W=q.exec(z);if(W&&V&&W[1]){var J=W[1].length;W.index+=J,W[0]=W[0].slice(J)}return W}function F(q,H,z,V,W,J){for(var Y in z)if(!(!z.hasOwnProperty(Y)||!z[Y])){var te=z[Y];te=Array.isArray(te)?te:[te];for(var Ae=0;Ae<te.length;++Ae){if(J&&J.cause==Y+","+Ae)return;var Ee=te[Ae],me=Ee.inside,Ge=!!Ee.lookbehind,ut=!!Ee.greedy,Yt=Ee.alias;if(ut&&!Ee.pattern.global){var ot=Ee.pattern.toString().match(/[imsuy]*$/)[0];Ee.pattern=RegExp(Ee.pattern.source,ot+"g")}for(var it=Ee.pattern||Ee,Be=V.next,lt=W;Be!==H.tail&&!(J&&lt>=J.reach);lt+=Be.value.length,Be=Be.next){var It=Be.value;if(H.length>q.length)return;if(!(It instanceof E)){var Ut=1,tt;if(ut){if(tt=S(it,lt,q,Ge),!tt||tt.index>=q.length)break;var Nt=tt.index,Rr=tt.index+tt[0].length,er=lt;for(er+=Be.value.length;Nt>=er;)Be=Be.next,er+=Be.value.length;if(er-=Be.value.length,lt=er,Be.value instanceof E)continue;for(var Ar=Be;Ar!==H.tail&&(er<Rr||typeof Ar.value=="string");Ar=Ar.next)Ut++,er+=Ar.value.length;Ut--,It=q.slice(lt,er),tt.index-=lt}else if(tt=S(it,0,It,Ge),!tt)continue;var Nt=tt.index,$r=tt[0],Vr=It.slice(0,Nt),Or=It.slice(Nt+$r.length),Dr=lt+It.length;J&&Dr>J.reach&&(J.reach=Dr);var jt=Be.prev;Vr&&(jt=L(H,jt,Vr),lt+=Vr.length),K(H,jt,Ut);var U=new E(Y,me?k.tokenize($r,me):$r,Yt,$r);if(Be=L(H,jt,U),Or&&L(H,Be,Or),Ut>1){var Z={cause:Y+","+Ae,reach:Dr};F(q,H,z,Be.prev,lt,Z),J&&Z.reach>J.reach&&(J.reach=Z.reach)}}}}}}function j(){var q={value:null,prev:null,next:null},H={value:null,prev:q,next:null};q.next=H,this.head=q,this.tail=H,this.length=0}function L(q,H,z){var V=H.next,W={value:z,prev:H,next:V};return H.next=W,V.prev=W,q.length++,W}function K(q,H,z){for(var V=H.next,W=0;W<z&&V!==q.tail;W++)V=V.next;H.next=V,V.prev=H,q.length-=W}function he(q){for(var H=[],z=q.head.next;z!==q.tail;)H.push(z.value),z=z.next;return H}if(!a.document)return a.addEventListener&&(k.disableWorkerMessageHandler||a.addEventListener("message",function(q){var H=JSON.parse(q.data),z=H.language,V=H.code,W=H.immediateClose;a.postMessage(k.highlight(V,k.languages[z],z)),W&&a.close()},!1)),k;var re=k.util.currentScript();re&&(k.filename=re.src,re.hasAttribute("data-manual")&&(k.manual=!0));function ie(){k.manual||k.highlightAll()}if(!k.manual){var Ce=document.readyState;Ce==="loading"||Ce==="interactive"&&re&&re.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return k}(r);t.exports&&(t.exports=e),typeof Dn<"u"&&(Dn.Prism=e)})(Ad);var Vv=Ad.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const Z0={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},Q0="_container_zhbxc_2",X0="_header_zhbxc_9",Y0="_main_zhbxc_14",em="_footer_zhbxc_19",tm={container:Q0,header:X0,main:Y0,footer:em},Uf=(t,r)=>{const e=t.__vccOpts||t;for(const[a,v]of r)e[a]=v;return e};function rm(t,r,e,a,v,d){return Pr(),es("div",{class:ks(t.$style.container)},[d.hasHeader?(Pr(),es("header",{key:0,class:ks(t.$style.header)},[rc(t.$slots,"header")],2)):cf("",!0),Aa("main",{class:ks(t.$style.main)},[rc(t.$slots,"default")],2),d.hasFooter?(Pr(),es("footer",{key:1,class:ks(t.$style.footer)},[rc(t.$slots,"footer")],2)):cf("",!0)],2)}const sm={$style:tm},Ef=Uf(Z0,[["render",rm],["__cssModules",sm]]),nm={key:0},am=["onClick"],im={key:1},lm=["onClick"],um=Bf({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=ao(!1),a=r;return(v,d)=>(Pr(),es("div",{class:ks(v.$style.wrapper)},[Aa("button",{onClick:d[0]||(d[0]=x=>e.value=!e.value)},[rc(v.$slots,"default")]),Er(Kp,null,{default:gn(()=>[e.value?(Pr(),es("div",{key:0,class:ks(v.$style.menu)},[v.options instanceof Array?(Pr(),es("div",nm,[(Pr(!0),es(As,null,_c(v.options,x=>(Pr(),es("div",{class:ks(v.$style.opt),onClick:k=>{e.value=!1,a("select",x)}},co(x),11,am))),256))])):(Pr(),es("div",im,[(Pr(!0),es(As,null,_c(Object.keys(v.options),x=>(Pr(),es("div",{class:ks(v.$style.opt),onClick:k=>{e.value=!1,a("select",x)}},co(v.options[x]),11,lm))),256))]))],2)):cf("",!0)]),_:1})],2))}}),om="_wrapper_1dk0z_2",fm="_menu_1dk0z_5",cm="_opt_1dk0z_12",hm={wrapper:om,menu:fm,opt:cm},pm={$style:hm},Cd=Uf(um,[["__cssModules",pm]]),vm=Bf({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,a=r,v=ao(e.modelValue);Mf(v,()=>{a("update:modelValue",v.value)},{immediate:!0});function d(k){v.value=e.samples[k]}const x=k=>Vv.highlight(k,Vv.languages.js,"javascript");return(k,E)=>(Pr(),qc(Ef,null,{header:gn(()=>[Xa(" Input "),e.samples?(Pr(),es("div",{key:0,class:ks(k.$style.actions)},[Er(Cd,{options:Object.keys(e.samples),onSelect:d},{default:gn(()=>[Xa("Samples")]),_:1},8,["options"])],2)):cf("",!0)]),footer:gn(()=>[e.parseError?(Pr(),es("span",{key:0,class:ks(k.$style.parseError)},co(e.parseError),3)):cf("",!0),Aa("div",{class:ks(k.$style.actions)},[Aa("button",{onClick:E[1]||(E[1]=S=>a("run"))},"RUN")],2)]),default:gn(()=>[Er(jf(W0),{class:ks(k.$style.code),modelValue:v.value,"onUpdate:modelValue":E[0]||(E[0]=S=>v.value=S),highlight:x,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),gm="_code_af8rl_2",dm="_parseError_af8rl_6",ym="_actions_af8rl_9",wm={code:gm,parseError:dm,actions:ym},mm={$style:wm},$m=Uf(vm,[["__cssModules",mm]]);function br(t,r,e){let a=e.value;return{configurable:!0,get(){const v=a.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){a=v}}}let pf=class _d extends Error{constructor(e,a){super(e);ge(this,"name","AiScript");ge(this,"info");ge(this,"loc");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,_d)}},Wv=class extends pf{constructor(e){super(e.message??`${e}`,e);ge(this,"name","Internal")}},_t=class extends pf{constructor(e,a,v){super(`${e} (Line ${a.line}, Column ${a.column})`,v);ge(this,"loc");ge(this,"name","Syntax");this.loc=a}};class Kv extends pf{constructor(e,a,v){super(`${e} (Line ${a.line}, Column ${a.column})`,v);ge(this,"loc");ge(this,"name","Namespace");this.loc=a}}let or=class extends pf{constructor(e,a){super(e,a);ge(this,"name","Runtime")}},Gv=class extends or{constructor(r,e){super(r,e)}};var Ku=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let bu=class kd{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new kd(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r).value;return this.log("read",{var:r,val:a}),a}throw new or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new or(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new or(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new or(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ku([br],bu.prototype,"log",null);Ku([br],bu.prototype,"onUpdated",null);Ku([br],bu.prototype,"createChildScope",null);Ku([br],bu.prototype,"get",null);Ku([br],bu.prototype,"exists",null);Ku([br],bu.prototype,"getAll",null);Ku([br],bu.prototype,"add",null);Ku([br],bu.prototype,"assign",null);let Xf;const xm=new Uint8Array(16);function bm(){if(!Xf&&(Xf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xf(xm)}const vs=[];for(let t=0;t<256;++t)vs.push((t+256).toString(16).slice(1));function Am(t,r=0){return vs[t[r+0]]+vs[t[r+1]]+vs[t[r+2]]+vs[t[r+3]]+"-"+vs[t[r+4]]+vs[t[r+5]]+"-"+vs[t[r+6]]+vs[t[r+7]]+"-"+vs[t[r+8]]+vs[t[r+9]]+"-"+vs[t[r+10]]+vs[t[r+11]]+vs[t[r+12]]+vs[t[r+13]]+vs[t[r+14]]+vs[t[r+15]]}const Cm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jv={randomUUID:Cm};function Wc(t,r,e){if(Jv.randomUUID&&!r&&!t)return Jv.randomUUID();t=t||{};const a=t.random||(t.rng||bm)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=a[v];return r}return Am(a)}var Gp={exports:{}};Gp.exports;(function(t){(function(r,e,a){function v(E){var S=this,F=k();S.next=function(){var j=2091639*S.s0+S.c*23283064365386963e-26;return S.s0=S.s1,S.s1=S.s2,S.s2=j-(S.c=j|0)},S.c=1,S.s0=F(" "),S.s1=F(" "),S.s2=F(" "),S.s0-=F(E),S.s0<0&&(S.s0+=1),S.s1-=F(E),S.s1<0&&(S.s1+=1),S.s2-=F(E),S.s2<0&&(S.s2+=1),F=null}function d(E,S){return S.c=E.c,S.s0=E.s0,S.s1=E.s1,S.s2=E.s2,S}function x(E,S){var F=new v(E),j=S&&S.state,L=F.next;return L.int32=function(){return F.next()*4294967296|0},L.double=function(){return L()+(L()*2097152|0)*11102230246251565e-32},L.quick=L,j&&(typeof j=="object"&&d(j,F),L.state=function(){return d(F,{})}),L}function k(){var E=4022871197,S=function(F){F=String(F);for(var j=0;j<F.length;j++){E+=F.charCodeAt(j);var L=.02519603282416938*E;E=L>>>0,L-=E,L*=E,E=L>>>0,L-=E,E+=L*4294967296}return(E>>>0)*23283064365386963e-26};return S}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.alea=x})(Dn,t,!1)})(Gp);var _m=Gp.exports,Jp={exports:{}};Jp.exports;(function(t){(function(r,e,a){function v(k){var E=this,S="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var j=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^j^j>>>8},k===(k|0)?E.x=k:S+=k;for(var F=0;F<S.length+64;F++)E.x^=S.charCodeAt(F)|0,E.next()}function d(k,E){return E.x=k.x,E.y=k.y,E.z=k.z,E.w=k.w,E}function x(k,E){var S=new v(k),F=E&&E.state,j=function(){return(S.next()>>>0)/4294967296};return j.double=function(){do var L=S.next()>>>11,K=(S.next()>>>0)/4294967296,he=(L+K)/(1<<21);while(he===0);return he},j.int32=S.next,j.quick=j,F&&(typeof F=="object"&&d(F,S),j.state=function(){return d(S,{})}),j}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.xor128=x})(Dn,t,!1)})(Jp);var km=Jp.exports,Zp={exports:{}};Zp.exports;(function(t){(function(r,e,a){function v(k){var E=this,S="";E.next=function(){var j=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(j^j<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,k===(k|0)?E.x=k:S+=k;for(var F=0;F<S.length+64;F++)E.x^=S.charCodeAt(F)|0,F==S.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function d(k,E){return E.x=k.x,E.y=k.y,E.z=k.z,E.w=k.w,E.v=k.v,E.d=k.d,E}function x(k,E){var S=new v(k),F=E&&E.state,j=function(){return(S.next()>>>0)/4294967296};return j.double=function(){do var L=S.next()>>>11,K=(S.next()>>>0)/4294967296,he=(L+K)/(1<<21);while(he===0);return he},j.int32=S.next,j.quick=j,F&&(typeof F=="object"&&d(F,S),j.state=function(){return d(S,{})}),j}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.xorwow=x})(Dn,t,!1)})(Zp);var Pm=Zp.exports,Qp={exports:{}};Qp.exports;(function(t){(function(r,e,a){function v(k){var E=this;E.next=function(){var F=E.x,j=E.i,L,K;return L=F[j],L^=L>>>7,K=L^L<<24,L=F[j+1&7],K^=L^L>>>10,L=F[j+3&7],K^=L^L>>>3,L=F[j+4&7],K^=L^L<<7,L=F[j+7&7],L=L^L<<13,K^=L^L<<9,F[j]=K,E.i=j+1&7,K};function S(F,j){var L,K=[];if(j===(j|0))K[0]=j;else for(j=""+j,L=0;L<j.length;++L)K[L&7]=K[L&7]<<15^j.charCodeAt(L)+K[L+1&7]<<13;for(;K.length<8;)K.push(0);for(L=0;L<8&&K[L]===0;++L);for(L==8?K[7]=-1:K[L],F.x=K,F.i=0,L=256;L>0;--L)F.next()}S(E,k)}function d(k,E){return E.x=k.x.slice(),E.i=k.i,E}function x(k,E){k==null&&(k=+new Date);var S=new v(k),F=E&&E.state,j=function(){return(S.next()>>>0)/4294967296};return j.double=function(){do var L=S.next()>>>11,K=(S.next()>>>0)/4294967296,he=(L+K)/(1<<21);while(he===0);return he},j.int32=S.next,j.quick=j,F&&(F.x&&d(F,S),j.state=function(){return d(S,{})}),j}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.xorshift7=x})(Dn,t,!1)})(Qp);var Em=Qp.exports,Xp={exports:{}};Xp.exports;(function(t){(function(r,e,a){function v(k){var E=this;E.next=function(){var F=E.w,j=E.X,L=E.i,K,he;return E.w=F=F+1640531527|0,he=j[L+34&127],K=j[L=L+1&127],he^=he<<13,K^=K<<17,he^=he>>>15,K^=K>>>12,he=j[L]=he^K,E.i=L,he+(F^F>>>16)|0};function S(F,j){var L,K,he,re,ie,Ce=[],q=128;for(j===(j|0)?(K=j,j=null):(j=j+"\0",K=0,q=Math.max(q,j.length)),he=0,re=-32;re<q;++re)j&&(K^=j.charCodeAt((re+32)%j.length)),re===0&&(ie=K),K^=K<<10,K^=K>>>15,K^=K<<4,K^=K>>>13,re>=0&&(ie=ie+1640531527|0,L=Ce[re&127]^=K+ie,he=L==0?he+1:0);for(he>=128&&(Ce[(j&&j.length||0)&127]=-1),he=127,re=4*128;re>0;--re)K=Ce[he+34&127],L=Ce[he=he+1&127],K^=K<<13,L^=L<<17,K^=K>>>15,L^=L>>>12,Ce[he]=K^L;F.w=ie,F.X=Ce,F.i=he}S(E,k)}function d(k,E){return E.i=k.i,E.w=k.w,E.X=k.X.slice(),E}function x(k,E){k==null&&(k=+new Date);var S=new v(k),F=E&&E.state,j=function(){return(S.next()>>>0)/4294967296};return j.double=function(){do var L=S.next()>>>11,K=(S.next()>>>0)/4294967296,he=(L+K)/(1<<21);while(he===0);return he},j.int32=S.next,j.quick=j,F&&(F.X&&d(F,S),j.state=function(){return d(S,{})}),j}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.xor4096=x})(Dn,t,!1)})(Xp);var Mm=Xp.exports,Yp={exports:{}};Yp.exports;(function(t){(function(r,e,a){function v(k){var E=this,S="";E.next=function(){var j=E.b,L=E.c,K=E.d,he=E.a;return j=j<<25^j>>>7^L,L=L-K|0,K=K<<24^K>>>8^he,he=he-j|0,E.b=j=j<<20^j>>>12^L,E.c=L=L-K|0,E.d=K<<16^L>>>16^he,E.a=he-j|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,k===Math.floor(k)?(E.a=k/4294967296|0,E.b=k|0):S+=k;for(var F=0;F<S.length+20;F++)E.b^=S.charCodeAt(F)|0,E.next()}function d(k,E){return E.a=k.a,E.b=k.b,E.c=k.c,E.d=k.d,E}function x(k,E){var S=new v(k),F=E&&E.state,j=function(){return(S.next()>>>0)/4294967296};return j.double=function(){do var L=S.next()>>>11,K=(S.next()>>>0)/4294967296,he=(L+K)/(1<<21);while(he===0);return he},j.int32=S.next,j.quick=j,F&&(typeof F=="object"&&d(F,S),j.state=function(){return d(S,{})}),j}e&&e.exports?e.exports=x:a&&a.amd?a(function(){return x}):this.tychei=x})(Dn,t,!1)})(Yp);var Sm=Yp.exports,Pd={exports:{}};const Fm={},Nm=Object.freeze(Object.defineProperty({__proto__:null,default:Fm},Symbol.toStringTag,{value:"Module"})),Om=G0(Nm);(function(t){(function(r,e,a){var v=256,d=6,x=52,k="random",E=a.pow(v,d),S=a.pow(2,x),F=S*2,j=v-1,L;function K(z,V,W){var J=[];V=V==!0?{entropy:!0}:V||{};var Y=Ce(ie(V.entropy?[z,H(e)]:z??q(),3),J),te=new he(J),Ae=function(){for(var Ee=te.g(d),me=E,Ge=0;Ee<S;)Ee=(Ee+Ge)*v,me*=v,Ge=te.g(1);for(;Ee>=F;)Ee/=2,me/=2,Ge>>>=1;return(Ee+Ge)/me};return Ae.int32=function(){return te.g(4)|0},Ae.quick=function(){return te.g(4)/4294967296},Ae.double=Ae,Ce(H(te.S),e),(V.pass||W||function(Ee,me,Ge,ut){return ut&&(ut.S&&re(ut,te),Ee.state=function(){return re(te,{})}),Ge?(a[k]=Ee,me):Ee})(Ae,Y,"global"in V?V.global:this==a,V.state)}function he(z){var V,W=z.length,J=this,Y=0,te=J.i=J.j=0,Ae=J.S=[];for(W||(z=[W++]);Y<v;)Ae[Y]=Y++;for(Y=0;Y<v;Y++)Ae[Y]=Ae[te=j&te+z[Y%W]+(V=Ae[Y])],Ae[te]=V;(J.g=function(Ee){for(var me,Ge=0,ut=J.i,Yt=J.j,ot=J.S;Ee--;)me=ot[ut=j&ut+1],Ge=Ge*v+ot[j&(ot[ut]=ot[Yt=j&Yt+me])+(ot[Yt]=me)];return J.i=ut,J.j=Yt,Ge})(v)}function re(z,V){return V.i=z.i,V.j=z.j,V.S=z.S.slice(),V}function ie(z,V){var W=[],J=typeof z,Y;if(V&&J=="object")for(Y in z)try{W.push(ie(z[Y],V-1))}catch{}return W.length?W:J=="string"?z:z+"\0"}function Ce(z,V){for(var W=z+"",J,Y=0;Y<W.length;)V[j&Y]=j&(J^=V[j&Y]*19)+W.charCodeAt(Y++);return H(V)}function q(){try{var z;return L&&(z=L.randomBytes)?z=z(v):(z=new Uint8Array(v),(r.crypto||r.msCrypto).getRandomValues(z)),H(z)}catch{var V=r.navigator,W=V&&V.plugins;return[+new Date,r,W,r.screen,H(e)]}}function H(z){return String.fromCharCode.apply(0,z)}if(Ce(a.random(),e),t.exports){t.exports=K;try{L=Om}catch{}}else a["seed"+k]=K})(typeof self<"u"?self:Dn,[],Math)})(Pd);var Tm=Pd.exports,Im=_m,jm=km,Rm=Pm,Dm=Em,Lm=Mm,Hm=Sm,Oo=Tm;Oo.alea=Im;Oo.xor128=jm;Oo.xorwow=Rm;Oo.xorshift7=Dm;Oo.xor4096=Lm;Oo.tychei=Hm;var Bm=Oo;const df=K0(Bm),Dt={type:"null"},da={type:"bool",value:!0},kn={type:"bool",value:!1},Se=t=>({type:"num",value:t}),Vt=t=>({type:"str",value:t}),go=t=>({type:"bool",value:t}),Mc=t=>({type:"obj",value:t}),Tr=t=>({type:"arr",value:t}),Um=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ue=t=>({type:"fn",native:t}),qm=t=>({type:"return",value:t}),zm=()=>({type:"break",value:null}),Vm=()=>({type:"continue",value:null}),Wm=t=>t.type==="return"?t.value:t,Wh=(t,r)=>({type:"error",value:t,info:r});function Nn(t){if(t==null)throw new or("Expect anything, but got nothing.")}function Ws(t){if(t==null)throw new or("Expect boolean, but got nothing.");if(t.type!=="bool")throw new or(`Expect boolean, but got ${t.type}.`)}function ju(t){if(t==null)throw new or("Expect function, but got nothing.");if(t.type!=="fn")throw new or(`Expect function, but got ${t.type}.`)}function Ur(t){if(t==null)throw new or("Expect string, but got nothing.");if(t.type!=="str")throw new or(`Expect string, but got ${t.type}.`)}function _e(t){if(t==null)throw new or("Expect number, but got nothing.");if(t.type!=="num")throw new or(`Expect number, but got ${t.type}.`)}function ti(t){if(t==null)throw new or("Expect object, but got nothing.");if(t.type!=="obj")throw new or(`Expect object, but got ${t.type}.`)}function Wo(t){if(t==null)throw new or("Expect array, but got nothing.");if(t.type!=="arr")throw new or(`Expect array, but got ${t.type}.`)}function ch(t){return t.type==="obj"}function Zv(t){return t.type==="arr"}function Kh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Gh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>Gh(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Jh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Jh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=Jh(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Zh(t){if(t===null)return Dt;if(typeof t=="boolean")return go(t);if(typeof t=="string")return Vt(t);if(typeof t=="number")return Se(t);if(Array.isArray(t))return Tr(t.map(r=>Zh(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,Zh(a));return Mc(r)}return Dt}function Ko(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,a=>`\\${a}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const a=[];for(const v of t.value)a.push(Ko(v,!0,e));return"[ "+a.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const a=[];for(const[v,d]of t.value)a.push(`${v}: ${Ko(d,!0,e)}`);return"{ "+a.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Km=new TextEncoder,Gm=new TextDecoder,Jm={help:Vt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Vt("0.16.0"),"Core:ai":Vt("kawaii"),"Core:not":ue(([t])=>(Ws(t),t.value?kn:da)),"Core:eq":ue(([t,r])=>(Nn(t),Nn(r),Kh(t,r)?da:kn)),"Core:neq":ue(([t,r])=>(Nn(t),Nn(r),Kh(t,r)?kn:da)),"Core:and":ue(([t,r])=>(Ws(t),t.value?(Ws(r),r.value?da:kn):kn)),"Core:or":ue(([t,r])=>(Ws(t),t.value?da:(Ws(r),r.value?da:kn))),"Core:add":ue(([t,r])=>(_e(t),_e(r),Se(t.value+r.value))),"Core:sub":ue(([t,r])=>(_e(t),_e(r),Se(t.value-r.value))),"Core:mul":ue(([t,r])=>(_e(t),_e(r),Se(t.value*r.value))),"Core:pow":ue(([t,r])=>{_e(t),_e(r);const e=t.value**r.value;if(isNaN(e))throw new or("Invalid operation.");return Se(e)}),"Core:div":ue(([t,r])=>{_e(t),_e(r);const e=t.value/r.value;if(isNaN(e))throw new or("Invalid operation.");return Se(e)}),"Core:mod":ue(([t,r])=>(_e(t),_e(r),Se(t.value%r.value))),"Core:gt":ue(([t,r])=>(_e(t),_e(r),t.value>r.value?da:kn)),"Core:lt":ue(([t,r])=>(_e(t),_e(r),t.value<r.value?da:kn)),"Core:gteq":ue(([t,r])=>(_e(t),_e(r),t.value>=r.value?da:kn)),"Core:lteq":ue(([t,r])=>(_e(t),_e(r),t.value<=r.value?da:kn)),"Core:type":ue(([t])=>(Nn(t),Vt(t.type))),"Core:to_str":ue(([t])=>(Nn(t),Vt(Ko(t)))),"Core:range":ue(([t,r])=>(_e(t),_e(r),t.value<r.value?Tr(Array.from({length:r.value-t.value+1},(e,a)=>Se(a+t.value))):t.value>r.value?Tr(Array.from({length:t.value-r.value+1},(e,a)=>Se(t.value-a))):Tr([t]))),"Core:sleep":ue(async([t])=>(_e(t),await new Promise(r=>setTimeout(r,t.value)),Dt)),"Util:uuid":ue(()=>Vt(Wc())),"Json:stringify":ue(([t])=>(Nn(t),Vt(JSON.stringify(Jh(t))))),"Json:parse":ue(([t])=>{Ur(t);try{return Zh(JSON.parse(t.value))}catch{return Wh("not_json")}}),"Json:parsable":ue(([t])=>{Ur(t);try{JSON.parse(t.value)}catch{return go(!1)}return go(!0)}),"Date:now":ue(()=>Se(Date.now())),"Date:year":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ue(([t])=>(t&&_e(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ue(([t])=>(Ur(t),Se(new Date(t.value).getTime()))),"Math:Infinity":Se(1/0),"Math:E":Se(Math.E),"Math:LN2":Se(Math.LN2),"Math:LN10":Se(Math.LN10),"Math:LOG2E":Se(Math.LOG2E),"Math:LOG10E":Se(Math.LOG10E),"Math:PI":Se(Math.PI),"Math:SQRT1_2":Se(Math.SQRT1_2),"Math:SQRT2":Se(Math.SQRT2),"Math:abs":ue(([t])=>(_e(t),Se(Math.abs(t.value)))),"Math:acos":ue(([t])=>(_e(t),Se(Math.acos(t.value)))),"Math:acosh":ue(([t])=>(_e(t),Se(Math.acosh(t.value)))),"Math:asin":ue(([t])=>(_e(t),Se(Math.asin(t.value)))),"Math:asinh":ue(([t])=>(_e(t),Se(Math.asinh(t.value)))),"Math:atan":ue(([t])=>(_e(t),Se(Math.atan(t.value)))),"Math:atanh":ue(([t])=>(_e(t),Se(Math.atanh(t.value)))),"Math:atan2":ue(([t,r])=>(_e(t),_e(r),Se(Math.atan2(t.value,r.value)))),"Math:cbrt":ue(([t])=>(_e(t),Se(Math.cbrt(t.value)))),"Math:ceil":ue(([t])=>(_e(t),Se(Math.ceil(t.value)))),"Math:clz32":ue(([t])=>(_e(t),Se(Math.clz32(t.value)))),"Math:cos":ue(([t])=>(_e(t),Se(Math.cos(t.value)))),"Math:cosh":ue(([t])=>(_e(t),Se(Math.cosh(t.value)))),"Math:exp":ue(([t])=>(_e(t),Se(Math.exp(t.value)))),"Math:expm1":ue(([t])=>(_e(t),Se(Math.expm1(t.value)))),"Math:floor":ue(([t])=>(_e(t),Se(Math.floor(t.value)))),"Math:fround":ue(([t])=>(_e(t),Se(Math.fround(t.value)))),"Math:hypot":ue(([t])=>{Wo(t);const r=[];for(const e of t.value)_e(e),r.push(e.value);return Se(Math.hypot(...r))}),"Math:imul":ue(([t,r])=>(_e(t),_e(r),Se(Math.imul(t.value,r.value)))),"Math:log":ue(([t])=>(_e(t),Se(Math.log(t.value)))),"Math:log1p":ue(([t])=>(_e(t),Se(Math.log1p(t.value)))),"Math:log10":ue(([t])=>(_e(t),Se(Math.log10(t.value)))),"Math:log2":ue(([t])=>(_e(t),Se(Math.log2(t.value)))),"Math:max":ue(([t,r])=>(_e(t),_e(r),Se(Math.max(t.value,r.value)))),"Math:min":ue(([t,r])=>(_e(t),_e(r),Se(Math.min(t.value,r.value)))),"Math:pow":ue(([t,r])=>(_e(t),_e(r),Se(Math.pow(t.value,r.value)))),"Math:round":ue(([t])=>(_e(t),Se(Math.round(t.value)))),"Math:sign":ue(([t])=>(_e(t),Se(Math.sign(t.value)))),"Math:sin":ue(([t])=>(_e(t),Se(Math.sin(t.value)))),"Math:sinh":ue(([t])=>(_e(t),Se(Math.sinh(t.value)))),"Math:sqrt":ue(([t])=>{_e(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new or("Invalid operation.");return Se(r)}),"Math:tan":ue(([t])=>(_e(t),Se(Math.tan(t.value)))),"Math:tanh":ue(([t])=>(_e(t),Se(Math.tanh(t.value)))),"Math:trunc":ue(([t])=>(_e(t),Se(Math.trunc(t.value)))),"Math:rnd":ue(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Se(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Se(Math.random())),"Math:gen_rng":ue(([t])=>{if(Nn(t),t.type!=="num"&&t.type!=="str")return Dt;const r=df(t.value.toString());return ue(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?Se(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Se(r()))}),"Num:to_hex":ue(([t])=>(_e(t),Vt(t.value.toString(16)))),"Num:from_hex":ue(([t])=>(Ur(t),Se(parseInt(t.value,16)))),"Str:lf":Vt(`
`),"Str:lt":ue(([t,r])=>(Ur(t),Ur(r),t.value<r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:gt":ue(([t,r])=>(Ur(t),Ur(r),t.value>r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:from_codepoint":ue(([t])=>(_e(t),Vt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ue(([t])=>(Wo(t),Vt(Array.from(t.value.map(r=>(_e(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ue(([t])=>(Wo(t),Vt(Gm.decode(Uint8Array.from(t.value.map(r=>(_e(r),r.value))))))),"Obj:keys":ue(([t])=>(ti(t),Tr(Array.from(t.value.keys()).map(r=>Vt(r))))),"Obj:vals":ue(([t])=>(ti(t),Tr(Array.from(t.value.values())))),"Obj:kvs":ue(([t])=>(ti(t),Tr(Array.from(t.value.entries()).map(([r,e])=>Tr([Vt(r),e]))))),"Obj:get":ue(([t,r])=>(ti(t),Ur(r),t.value.get(r.value)??Dt)),"Obj:set":ue(([t,r,e])=>(ti(t),Ur(r),Nn(e),t.value.set(r.value,e),Dt)),"Obj:has":ue(([t,r])=>(ti(t),Ur(r),go(t.value.has(r.value)))),"Obj:copy":ue(([t])=>(ti(t),Mc(new Map(t.value)))),"Obj:merge":ue(([t,r])=>(ti(t),ti(r),Mc(new Map([...t.value,...r.value])))),"Error:create":ue(([t,r])=>(Ur(t),Wh(t.value,r))),"Async:interval":ue(async([t,r,e],a)=>{_e(t),ju(r),e&&(Ws(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),ue(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":ue(async([t,r],e)=>{_e(t),ju(r);const a=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),ue(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})};var To={},Zm=()=>{const t="\\ud800-\\udfff",x="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",k="\\ufe0e\\ufe0f",E="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",S=`[${t}]`,F=`[${x}]`,j="\\ud83c[\\udffb-\\udfff]",L=`(?:${F}|${j})`,K=`[^${t}]`,he="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",re="[\\ud800-\\udbff][\\udc00-\\udfff]",ie="\\u200d",Ce="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",q=`[${E}]`,H=`${L}?`,z=`[${k}]?`,V=`(?:${ie}(?:${[K,he,re].join("|")})${z+H})*`,W=z+H+V,Y=`(?:${[`${K}${F}?`,F,he,re,S,q].join("|")})`;return new RegExp(`${Ce}|${j}(?=${j})|${Y+W}`,"g")},Qm=Dn&&Dn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(To,"__esModule",{value:!0});var Kc=Qm(Zm);function Qh(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Kc.default())||[]}var Ys=To.toArray=Qh;function ev(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Kc.default());return r===null?0:r.length}var yf=To.length=ev;function Ed(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var a=t.match(Kc.default());return a?a.slice(r,e).join(""):""}var wf=To.substring=Ed;function Xm(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var a=ev(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=a)return"";r<0&&(r+=a);var v;typeof e>"u"?v=a:(typeof e!="number"&&(e=parseInt(e,10)),v=e>=0?e+r:r);var d=t.match(Kc.default());return d?d.slice(r,v).join(""):""}To.substr=Xm;function Ym(t,r,e,a){if(r===void 0&&(r=16),e===void 0&&(e="#"),a===void 0&&(a="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(a)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var v=ev(t);if(v>r)return Ed(t,0,r);if(v<r){var d=e.repeat(r-v);return a==="left"?d+t:t+d}return t}To.limit=Ym;function e$(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var a=Qh(t);if(e>=a.length)return r===""?a.length:-1;if(r==="")return e;var v=Qh(r),d=!1,x;for(x=e;x<a.length;x+=1){for(var k=0;k<v.length&&v[k]===a[x+k];)k+=1;if(k===v.length&&v[k-1]===a[x+k-1]){d=!0;break}}return d?x:-1}var mf=To.indexOf=e$;const Qv={num:{to_str:t=>ue(async(r,e)=>Vt(t.value.toString()))},str:{to_num:t=>ue(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?Dt:Se(a)}),to_arr:t=>ue(async(r,e)=>Tr(Ys(t.value).map(a=>Vt(a)))),to_unicode_arr:t=>ue(async(r,e)=>Tr([...t.value].map(a=>Vt(a)))),to_unicode_codepoint_arr:t=>ue(async(r,e)=>Tr([...t.value].map(a=>{const v=a.codePointAt(0);return Se(v??a.charCodeAt(0))}))),to_char_arr:t=>ue(async(r,e)=>Tr(t.value.split("").map(a=>Vt(a)))),to_charcode_arr:t=>ue(async(r,e)=>Tr(t.value.split("").map(a=>Se(a.charCodeAt(0))))),to_utf8_byte_arr:t=>ue(async(r,e)=>Tr(Array.from(Km.encode(t.value)).map(a=>Se(a)))),len:t=>Se(yf(t.value)),replace:t=>ue(async([r,e],a)=>(Ur(r),Ur(e),Vt(t.value.split(r.value).join(e.value)))),index_of:t=>ue(async([r],e)=>(Ur(r),Se(mf(t.value,r.value)))),incl:t=>ue(async([r],e)=>(Ur(r),t.value.includes(r.value)?da:kn)),trim:t=>ue(async(r,e)=>Vt(t.value.trim())),upper:t=>ue(async(r,e)=>Vt(t.value.toUpperCase())),lower:t=>ue(async(r,e)=>Vt(t.value.toLowerCase())),split:t=>ue(async([r],e)=>(r&&Ur(r),Tr(r?t.value.split(r?r.value:"").map(a=>Vt(a)):Ys(t.value).map(a=>Vt(a))))),slice:t=>ue(async([r,e],a)=>(_e(r),_e(e),Vt(wf(t.value,r.value,e.value)))),pick:t=>ue(async([r],e)=>{_e(r);const v=Ys(t.value)[r.value];return v?Vt(v):Dt}),charcode_at:t=>ue(([r],e)=>{_e(r);const a=t.value.charCodeAt(r.value);return Number.isNaN(a)?Dt:Se(a)}),codepoint_at:t=>ue(([r],e)=>{_e(r);const a=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(a)?Dt:Se(a)})},arr:{len:t=>Se(t.value.length),push:t=>ue(async([r],e)=>(Nn(r),t.value.push(r),t)),unshift:t=>ue(async([r],e)=>(Nn(r),t.value.unshift(r),t)),pop:t=>ue(async(r,e)=>t.value.pop()??Dt),shift:t=>ue(async(r,e)=>t.value.shift()??Dt),concat:t=>ue(async([r],e)=>(Wo(r),Tr(t.value.concat(r.value)))),slice:t=>ue(async([r,e],a)=>(_e(r),_e(e),Tr(t.value.slice(r.value,e.value)))),join:t=>ue(async([r],e)=>(r&&Ur(r),Vt(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>ue(async([r],e)=>{ju(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,Se(d)]));return Tr(await Promise.all(a))}),filter:t=>ue(async([r],e)=>{ju(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,Se(v)]);Ws(x),x.value&&a.push(d)}return Tr(a)}),reduce:t=>ue(async([r,e],a)=>{ju(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,Se(x)])}return d}),find:t=>ue(async([r],e)=>{ju(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,Se(a)]);if(Ws(d),d.value)return v}return Dt}),incl:t=>ue(async([r],e)=>(Nn(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?kn:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?da:kn)),reverse:t=>ue(async(r,e)=>(t.value.reverse(),Dt)),copy:t=>ue(async(r,e)=>Tr([...t.value])),sort:t=>ue(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);_e(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return ju(r),Wo(t),t.value=await a(t.value,r),t})},error:{name:t=>Vt(t.value),info:t=>t.info??Dt}};function t$(t,r){if(Object.hasOwn(Qv,t.type)){const e=Qv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new or(`No such prop (${r}) in ${t.type}.`)}else throw new or(`Cannot read prop of ${t.type}. (reading ${r})`)}const r$={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ps=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Md=300,s$=Md-1;let ys=class{constructor(r,e={}){ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);ge(this,"vars",{});this.opts=e;const a={print:ue(([v])=>{Nn(v),this.opts.out&&this.opts.out(v)}),readline:ue(async v=>{const d=v[0];if(Ur(d),this.opts.in==null)return Dt;const x=await this.opts.in(d.value);return Vt(x)})};this.vars=Object.fromEntries(Object.entries({...r,...Jm,...a}).map(([v,d])=>[v,r$.const(d)])),this.scope=new bu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(a=>(this.handleError(a),Wh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof pf?this.opts.err(r):this.opts.err(new Wv(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{if(a.mut)throw new Kv('No "var" in namespace declaration: '+a.name,a.loc);const v={isMutable:a.mut,value:await this._eval(a.expr,e)};e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:{const d=a;throw new Kv("invalid ns member type: "+d.type,d.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Dt;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(a);return Wm(await this._run(r.statements,v))}}_eval(r,e){return this.__eval(r,e).catch(a=>{if(a.loc)throw a;{const v=a instanceof pf?a:new Wv(a);throw v.loc=r.loc,v.message=`${v.message} (Line ${r.loc.line}, Column ${r.loc.column})`,v}})}async __eval(r,e){if(this.stop)return Dt;if(this.stepCount%Md===s$&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new or("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);ju(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Ws(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Ws(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Dt}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Kh(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Dt}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return Dt}case"for":{if(r.times){const a=await this._eval(r.times,e);_e(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);_e(a),_e(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Se(d)}]])));if(x.type==="break")break;if(x.type==="return")return x}}return Dt}case"each":{const a=await this._eval(r.items,e);Wo(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return Dt}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,{isMutable:r.mut,value:a}),Dt}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),Dt}case"addAssign":{const a=await this._eval(r.dest,e);_e(a);const v=await this._eval(r.expr,e);return _e(v),await this.assign(e,r.dest,Se(a.value+v.value)),Dt}case"subAssign":{const a=await this._eval(r.dest,e);_e(a);const v=await this._eval(r.expr,e);return _e(v),await this.assign(e,r.dest,Se(a.value-v.value)),Dt}case"null":return Dt;case"bool":return go(r.value);case"num":return Se(r.value);case"str":return Vt(r.value);case"arr":return Tr(await Promise.all(r.value.map(a=>this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return Mc(a)}case"prop":{const a=await this._eval(r.target,e);return ch(a)?a.value.has(r.name)?a.value.get(r.name):Dt:t$(a,r.name)}case"index":{const a=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Zv(a)){_e(v);const d=a.value[v.value];if(d===void 0)throw new Gv(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}else{if(ch(a))return Ur(v),a.value.has(v.value)?a.value.get(v.value):Dt;throw new or(`Cannot read prop (${Ko(v)}) of ${a.type}.`)}}case"not":{const a=await this._eval(r.expr,e);return Ws(a),go(!a.value)}case"fn":return Um(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return go(e.exists(r.identifier.name));case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);a+=Ko(d)}return Vt(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),qm(a)}case"break":return this.log("block:break",{scope:e.name}),zm();case"continue":return this.log("block:continue",{scope:e.name}),Vm();case"ns":return Dt;case"meta":return Dt;case"and":{const a=await this._eval(r.left,e);if(Ws(a),a.value){const v=await this._eval(r.right,e);return Ws(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Ws(a),a.value)return a;{const v=await this._eval(r.right,e);return Ws(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=Dt;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Zv(v)){if(_e(d),v.value[d.value]===void 0)throw new Gv(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=a}else if(ch(v))Ur(d),v.value.set(d.value,a);else throw new or(`Cannot read prop (${Ko(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ti(v),v.value.set(e.name,a)}else throw new or("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ps([br],ys.prototype,"exec",null);Ps([br],ys.prototype,"execFn",null);Ps([br],ys.prototype,"execFnSimple",null);Ps([br],ys.prototype,"handleError",null);Ps([br],ys.prototype,"log",null);Ps([br],ys.prototype,"collectNs",null);Ps([br],ys.prototype,"collectNsMember",null);Ps([br],ys.prototype,"_fn",null);Ps([br],ys.prototype,"_eval",null);Ps([br],ys.prototype,"__eval",null);Ps([br],ys.prototype,"_run",null);Ps([br],ys.prototype,"registerAbortHandler",null);Ps([br],ys.prototype,"unregisterAbortHandler",null);Ps([br],ys.prototype,"abort",null);Ps([br],ys.prototype,"assign",null);Ps([br],ys,"collectMetadata",null);class n${constructor(r,e){ge(this,"pages");ge(this,"firstPageIndex");ge(this,"lastPageIndex");ge(this,"pageIndex");ge(this,"address");ge(this,"_char");ge(this,"line");ge(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var R;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(R||(R={}));class a${constructor(r,e,a=!1,v,d){ge(this,"kind");ge(this,"loc");ge(this,"hasLeftSpacing");ge(this,"value");ge(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=a,this.value=v,this.children=d}}function Ke(t,r,e){return new a$(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const Xv=[" ","	"],i$=["\r",`
`],Yv=/^[0-9]$/,l$=/^[A-Za-z0-9_]$/;class u${constructor(r){ge(this,"stream");ge(this,"_tokens",[]);typeof r=="string"?this.stream=new n$(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}get kind(){return this.token.kind}next(){this._tokens[0].kind!==R.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.kind!==r)throw new _t(`unexpected token: ${R[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=Ke(R.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(Xv.includes(this.stream.char)){this.stream.next(),e=!0;continue}const a=this.stream.getPos();if(i$.includes(this.stream.char))return this.stream.next(),r=Ke(R.NewLine,a,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.NotEq,a,{hasLeftSpacing:e})):r=Ke(R.Not,a,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=Ke(R.Sharp3,a,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=Ke(R.OpenSharpBracket,a,{hasLeftSpacing:e});else throw new _t('invalid character: "#"',a);break}case"%":{this.stream.next(),r=Ke(R.Percent,a,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=Ke(R.And2,a,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=Ke(R.OpenParen,a,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=Ke(R.CloseParen,a,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=Ke(R.Asterisk,a,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.PlusEq,a,{hasLeftSpacing:e})):r=Ke(R.Plus,a,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=Ke(R.Comma,a,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.MinusEq,a,{hasLeftSpacing:e})):r=Ke(R.Minus,a,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=Ke(R.Dot,a,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=Ke(R.Slash,a,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Ke(R.Colon2,a,{hasLeftSpacing:e})):r=Ke(R.Colon,a,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=Ke(R.SemiColon,a,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.LtEq,a,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Ke(R.Out,a,{hasLeftSpacing:e})):r=Ke(R.Lt,a,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.Eq2,a,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=Ke(R.Arrow,a,{hasLeftSpacing:e})):r=Ke(R.Eq,a,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Ke(R.GtEq,a,{hasLeftSpacing:e})):r=Ke(R.Gt,a,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=Ke(R.At,a,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=Ke(R.OpenBracket,a,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=Ke(R.BackSlash,a,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=Ke(R.CloseBracket,a,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=Ke(R.Hat,a,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=Ke(R.OpenBrace,a,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=Ke(R.Or2,a,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=Ke(R.CloseBrace,a,{hasLeftSpacing:e});break}}if(r==null){const v=this.tryReadDigits(e);if(v){r=v;break}const d=this.tryReadWord(e);if(d){r=d;break}throw new _t(`invalid character: "${this.stream.char}"`,a)}break}return r}tryReadWord(r){let e="";const a=this.stream.getPos();for(;!this.stream.eof&&l$.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return Ke(R.NullKeyword,a,{hasLeftSpacing:r});case"true":return Ke(R.TrueKeyword,a,{hasLeftSpacing:r});case"false":return Ke(R.FalseKeyword,a,{hasLeftSpacing:r});case"each":return Ke(R.EachKeyword,a,{hasLeftSpacing:r});case"for":return Ke(R.ForKeyword,a,{hasLeftSpacing:r});case"loop":return Ke(R.LoopKeyword,a,{hasLeftSpacing:r});case"break":return Ke(R.BreakKeyword,a,{hasLeftSpacing:r});case"continue":return Ke(R.ContinueKeyword,a,{hasLeftSpacing:r});case"match":return Ke(R.MatchKeyword,a,{hasLeftSpacing:r});case"case":return Ke(R.CaseKeyword,a,{hasLeftSpacing:r});case"default":return Ke(R.DefaultKeyword,a,{hasLeftSpacing:r});case"if":return Ke(R.IfKeyword,a,{hasLeftSpacing:r});case"elif":return Ke(R.ElifKeyword,a,{hasLeftSpacing:r});case"else":return Ke(R.ElseKeyword,a,{hasLeftSpacing:r});case"return":return Ke(R.ReturnKeyword,a,{hasLeftSpacing:r});case"eval":return Ke(R.EvalKeyword,a,{hasLeftSpacing:r});case"var":return Ke(R.VarKeyword,a,{hasLeftSpacing:r});case"let":return Ke(R.LetKeyword,a,{hasLeftSpacing:r});case"exists":return Ke(R.ExistsKeyword,a,{hasLeftSpacing:r});default:return Ke(R.Identifier,a,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",a="";const v=this.stream.getPos();for(;!this.stream.eof&&Yv.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Yv.test(this.stream.char);)a+=this.stream.char,this.stream.next();if(a.length===0)throw new _t("digit expected",v)}let d;return a.length>0?d=e+"."+a:d=e,Ke(R.NumberLiteral,v,{hasLeftSpacing:r,value:d})}readStringLiteral(r){let e="";const a=this.stream.char;let v="string";const d=this.stream.getPos();for(this.stream.next();v!=="finish";)switch(v){case"string":{if(this.stream.eof)throw new _t("unexpected EOF",d);if(this.stream.char==="\\"){this.stream.next(),v="escape";break}if(this.stream.char===a){this.stream.next(),v="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new _t("unexpected EOF",d);e+=this.stream.char,this.stream.next(),v="string";break}}return Ke(R.StringLiteral,d,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let a="",v=[],d="string";const x=this.stream.getPos();let k=x;for(this.stream.next();d!=="finish";)switch(d){case"string":{if(this.stream.eof)throw new _t("unexpected EOF",x);if(this.stream.char==="\\"){this.stream.next(),d="escape";break}if(this.stream.char==="`"){this.stream.next(),a.length>0&&e.push(Ke(R.TemplateStringElement,k,{hasLeftSpacing:r,value:a})),d="finish";break}if(this.stream.char==="{"){this.stream.next(),a.length>0&&(e.push(Ke(R.TemplateStringElement,k,{hasLeftSpacing:r,value:a})),a=""),k=this.stream.getPos(),d="expr";break}a+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new _t("unexpected EOF",x);a+=this.stream.char,this.stream.next(),d="string";break}case"expr":{if(this.stream.eof)throw new _t("unexpected EOF",x);if(Xv.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(Ke(R.TemplateExprElement,k,{hasLeftSpacing:r,children:v})),v=[],k=this.stream.getPos(),d="string";break}const E=this.readToken();v.push(E);break}}return Ke(R.Template,x,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function at(t,r,e){const a={type:t};for(const v of Object.keys(r))r[v]!==void 0&&(a[v]=r[v]);return a.loc=e,a}function _n(t,r,e){return at("call",{target:at("identifier",{name:t},e),args:r},e)}function Sd(t){const r=[];for(t.nextWith(R.OpenParen),t.kind===R.NewLine&&t.next();t.kind!==R.CloseParen;){t.expect(R.Identifier);const e=t.token.value;t.next();let a;switch(t.kind===R.Colon&&(t.next(),a=_o(t)),r.push({name:e,argType:a}),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.CloseParen:break;default:throw new _t("separator expected",t.token.loc)}}return t.nextWith(R.CloseParen),r}function qf(t){for(t.nextWith(R.OpenBrace);t.kind===R.NewLine;)t.next();const r=[];for(;t.kind!==R.CloseBrace;)switch(r.push(Gc(t)),t.kind){case R.NewLine:case R.SemiColon:{for(;[R.NewLine,R.SemiColon].includes(t.kind);)t.next();break}case R.CloseBrace:break;default:throw new _t("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(R.CloseBrace),r}function _o(t){return t.kind===R.At?o$(t):f$(t)}function o$(t){const r=t.token.loc;t.nextWith(R.At),t.nextWith(R.OpenParen);const e=[];for(;t.kind!==R.CloseParen;){if(e.length>0)switch(t.kind){case R.Comma:{t.next();break}default:throw new _t("separator expected",t.token.loc)}const v=_o(t);e.push(v)}t.nextWith(R.CloseParen),t.nextWith(R.Arrow);const a=_o(t);return at("fnTypeSource",{args:e,result:a},r)}function f$(t){const r=t.token.loc;t.expect(R.Identifier);const e=t.token.value;t.next();let a=null;return t.kind===R.Lt&&(t.next(),a=_o(t),t.nextWith(R.Gt)),at("namedTypeSource",{name:e,inner:a},r)}class c${constructor(r){ge(this,"source");ge(this,"index");ge(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?Ke(R.EOF,{line:-1,column:-1}):this._token}get kind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:Ke(R.EOF,{line:-1,column:-1})}expect(r){if(this.kind!==r)throw new _t(`unexpected token: ${R[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=Ke(R.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function Mr(t,r){return r?Fd(t,!0):tv(t,0)}const hh=[{opKind:"postfix",kind:R.OpenParen,bp:20},{opKind:"postfix",kind:R.OpenBracket,bp:20},{opKind:"infix",kind:R.Dot,lbp:18,rbp:19},{opKind:"infix",kind:R.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:R.Plus,bp:14},{opKind:"prefix",kind:R.Minus,bp:14},{opKind:"prefix",kind:R.Not,bp:14},{opKind:"infix",kind:R.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:R.Slash,lbp:12,rbp:13},{opKind:"infix",kind:R.Percent,lbp:12,rbp:13},{opKind:"infix",kind:R.Plus,lbp:10,rbp:11},{opKind:"infix",kind:R.Minus,lbp:10,rbp:11},{opKind:"infix",kind:R.Lt,lbp:8,rbp:9},{opKind:"infix",kind:R.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:R.Gt,lbp:8,rbp:9},{opKind:"infix",kind:R.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:R.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:R.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:R.And2,lbp:4,rbp:5},{opKind:"infix",kind:R.Or2,lbp:2,rbp:3}];function h$(t,r){const e=t.token.loc,a=t.kind;t.next(),t.kind===R.BackSlash&&(t.next(),t.nextWith(R.NewLine));const v=tv(t,r);switch(a){case R.Plus:{if(v.type==="num")return at("num",{value:v.value},e);throw new _t("currently, sign is only supported for number literal.",e)}case R.Minus:{if(v.type==="num")return at("num",{value:-1*v.value},e);throw new _t("currently, sign is only supported for number literal.",e)}case R.Not:return at("not",{expr:v},e);default:throw new _t(`unexpected token: ${R[a]}`,e)}}function p$(t,r,e){const a=t.token.loc,v=t.kind;if(t.next(),t.kind===R.BackSlash&&(t.next(),t.nextWith(R.NewLine)),v===R.Dot){t.expect(R.Identifier);const d=t.token.value;return t.next(),at("prop",{target:r,name:d},a)}else{const d=tv(t,e);switch(v){case R.Hat:return _n("Core:pow",[r,d],a);case R.Asterisk:return _n("Core:mul",[r,d],a);case R.Slash:return _n("Core:div",[r,d],a);case R.Percent:return _n("Core:mod",[r,d],a);case R.Plus:return _n("Core:add",[r,d],a);case R.Minus:return _n("Core:sub",[r,d],a);case R.Lt:return _n("Core:lt",[r,d],a);case R.LtEq:return _n("Core:lteq",[r,d],a);case R.Gt:return _n("Core:gt",[r,d],a);case R.GtEq:return _n("Core:gteq",[r,d],a);case R.Eq2:return _n("Core:eq",[r,d],a);case R.NotEq:return _n("Core:neq",[r,d],a);case R.And2:return at("and",{left:r,right:d},a);case R.Or2:return at("or",{left:r,right:d},a);default:throw new _t(`unexpected token: ${R[v]}`,a)}}}function v$(t,r){const e=t.token.loc,a=t.kind;switch(a){case R.OpenParen:return g$(t,r);case R.OpenBracket:{t.next();const v=Mr(t,!1);return t.nextWith(R.CloseBracket),at("index",{target:r,index:v},e)}default:throw new _t(`unexpected token: ${R[a]}`,e)}}function Fd(t,r){const e=t.token.loc;switch(t.kind){case R.IfKeyword:{if(r)break;return d$(t)}case R.At:{if(r)break;return y$(t)}case R.MatchKeyword:{if(r)break;return w$(t)}case R.EvalKeyword:{if(r)break;return m$(t)}case R.ExistsKeyword:{if(r)break;return $$(t)}case R.Template:{const a=[];if(r)break;for(const v of t.token.children)switch(v.kind){case R.TemplateStringElement:{a.push(at("str",{value:v.value},v.loc));break}case R.TemplateExprElement:{const d=new c$(v.children),x=Mr(d,!1);if(d.kind!==R.EOF)throw new _t(`unexpected token: ${R[d.token.kind]}`,d.token.loc);a.push(x);break}default:throw new _t(`unexpected token: ${R[v.kind]}`,v.loc)}return t.next(),at("tmpl",{tmpl:a},e)}case R.StringLiteral:{const a=t.token.value;return t.next(),at("str",{value:a},e)}case R.NumberLiteral:{const a=Number(t.token.value);return t.next(),at("num",{value:a},e)}case R.TrueKeyword:case R.FalseKeyword:{const a=t.kind===R.TrueKeyword;return t.next(),at("bool",{value:a},e)}case R.NullKeyword:return t.next(),at("null",{},e);case R.OpenBrace:return x$(t,r);case R.OpenBracket:return b$(t,r);case R.Identifier:{if(r)break;return Nd(t)}case R.OpenParen:{t.next();const a=Mr(t,r);return t.nextWith(R.CloseParen),a}}throw new _t(`unexpected token: ${R[t.kind]}`,e)}function g$(t,r){const e=t.token.loc,a=[];for(t.nextWith(R.OpenParen),t.kind===R.NewLine&&t.next();t.kind!==R.CloseParen;)switch(a.push(Mr(t,!1)),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.CloseParen:break;default:throw new _t("separator expected",t.token.loc)}return t.nextWith(R.CloseParen),at("call",{target:r,args:a},e)}function d$(t){const r=t.token.loc;t.nextWith(R.IfKeyword);const e=Mr(t,!1),a=zu(t);t.kind===R.NewLine&&[R.ElifKeyword,R.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const v=[];for(;t.kind===R.ElifKeyword;){t.next();const x=Mr(t,!1),k=zu(t);t.kind===R.NewLine&&[R.ElifKeyword,R.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),v.push({cond:x,then:k})}let d;return t.kind===R.ElseKeyword&&(t.next(),d=zu(t)),at("if",{cond:e,then:a,elseif:v,else:d},r)}function y$(t){const r=t.token.loc;t.nextWith(R.At);const e=Sd(t);let a;t.kind===R.Colon&&(t.next(),a=_o(t));const v=qf(t);return at("fn",{args:e,retType:a,children:v},r)}function w$(t){const r=t.token.loc;t.nextWith(R.MatchKeyword);const e=Mr(t,!1);t.nextWith(R.OpenBrace),t.kind===R.NewLine&&t.next();const a=[];for(;t.kind!==R.DefaultKeyword&&t.kind!==R.CloseBrace;){t.nextWith(R.CaseKeyword);const d=Mr(t,!1);t.nextWith(R.Arrow);const x=zu(t);switch(a.push({q:d,a:x}),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.DefaultKeyword:case R.CloseBrace:break;default:throw new _t("separator expected",t.token.loc)}}let v;if(t.kind===R.DefaultKeyword)switch(t.next(),t.nextWith(R.Arrow),v=zu(t),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.CloseBrace:break;default:throw new _t("separator expected",t.token.loc)}return t.nextWith(R.CloseBrace),at("match",{about:e,qs:a,default:v},r)}function m$(t){const r=t.token.loc;t.nextWith(R.EvalKeyword);const e=qf(t);return at("block",{statements:e},r)}function $$(t){const r=t.token.loc;t.nextWith(R.ExistsKeyword);const e=Nd(t);return at("exists",{identifier:e},r)}function Nd(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.kind===R.Colon){if(t.token.hasLeftSpacing)throw new _t("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new _t("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(R.Identifier),e.push(t.token.value),t.next()}return at("identifier",{name:e.join(":")},r)}function x$(t,r){const e=t.token.loc;t.nextWith(R.OpenBrace),t.kind===R.NewLine&&t.next();const a=new Map;for(;t.kind!==R.CloseBrace;){t.expect(R.Identifier);const v=t.token.value;t.next(),t.nextWith(R.Colon);const d=Mr(t,r);switch(a.set(v,d),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.CloseBrace:break;default:throw new _t("separator expected",t.token.loc)}}return t.nextWith(R.CloseBrace),at("obj",{value:a},e)}function b$(t,r){const e=t.token.loc;t.nextWith(R.OpenBracket),t.kind===R.NewLine&&t.next();const a=[];for(;t.kind!==R.CloseBracket;)switch(a.push(Mr(t,r)),t.kind){case R.NewLine:{t.next();break}case R.Comma:{t.next(),t.kind===R.NewLine&&t.next();break}case R.CloseBracket:break;default:throw new _t("separator expected",t.token.loc)}return t.nextWith(R.CloseBracket),at("arr",{value:a},e)}function tv(t,r){let e;const a=t.kind,v=hh.find(d=>d.opKind==="prefix"&&d.kind===a);for(v!=null?e=h$(t,v.bp):e=Fd(t,!1);;){t.kind===R.BackSlash&&(t.next(),t.nextWith(R.NewLine));const d=t.kind,x=hh.find(E=>E.opKind==="postfix"&&E.kind===d);if(x!=null){if(x.bp<r)break;if(!([R.OpenBracket,R.OpenParen].includes(d)&&t.token.hasLeftSpacing)){e=v$(t,e);continue}}const k=hh.find(E=>E.opKind==="infix"&&E.kind===d);if(k!=null){if(k.lbp<r)break;e=p$(t,e,k.rbp);continue}break}return e}function Gc(t){const r=t.token.loc;switch(t.kind){case R.VarKeyword:case R.LetKeyword:return Od(t);case R.At:{if(t.lookahead(1).kind===R.Identifier)return Td(t);break}case R.Out:return C$(t);case R.ReturnKeyword:return P$(t);case R.OpenSharpBracket:return E$(t);case R.EachKeyword:return _$(t);case R.ForKeyword:return k$(t);case R.LoopKeyword:return S$(t);case R.BreakKeyword:return t.next(),at("break",{},r);case R.ContinueKeyword:return t.next(),at("continue",{},r)}const e=Mr(t,!1),a=F$(t,e);return a||e}function A$(t){switch(t.kind){case R.VarKeyword:case R.LetKeyword:return Od(t);case R.At:return Td(t);default:throw new _t(`unexpected token: ${R[t.kind]}`,t.token.loc)}}function zu(t){const r=t.token.loc;if(t.kind===R.OpenBrace){const e=qf(t);return at("block",{statements:e},r)}else return Gc(t)}function Od(t){const r=t.token.loc;let e;switch(t.kind){case R.LetKeyword:{e=!1;break}case R.VarKeyword:{e=!0;break}default:throw new _t(`unexpected token: ${R[t.kind]}`,t.token.loc)}t.next(),t.expect(R.Identifier);const a=t.token.value;t.next();let v;t.kind===R.Colon&&(t.next(),v=_o(t)),t.nextWith(R.Eq),t.kind===R.NewLine&&t.next();const d=Mr(t,!1);return at("def",{name:a,varType:v,expr:d,mut:e,attr:[]},r)}function Td(t){const r=t.token.loc;t.nextWith(R.At),t.expect(R.Identifier);const e=t.token.value;t.next();const a=Sd(t);let v;t.kind===R.Colon&&(t.next(),v=_o(t));const d=qf(t);return at("def",{name:e,expr:at("fn",{args:a,retType:v,children:d},r),mut:!1,attr:[]},r)}function C$(t){const r=t.token.loc;t.nextWith(R.Out);const e=Mr(t,!1);return _n("print",[e],r)}function _$(t){const r=t.token.loc;let e=!1;t.nextWith(R.EachKeyword),t.kind===R.OpenParen&&(e=!0,t.next()),t.nextWith(R.LetKeyword),t.expect(R.Identifier);const a=t.token.value;if(t.next(),t.kind===R.Comma)t.next();else throw new _t("separator expected",t.token.loc);const v=Mr(t,!1);e&&t.nextWith(R.CloseParen);const d=zu(t);return at("each",{var:a,items:v,for:d},r)}function k$(t){const r=t.token.loc;let e=!1;if(t.nextWith(R.ForKeyword),t.kind===R.OpenParen&&(e=!0,t.next()),t.kind===R.LetKeyword){t.next();const a=t.token.loc;t.expect(R.Identifier);const v=t.token.value;t.next();let d;if(t.kind===R.Eq?(t.next(),d=Mr(t,!1)):d=at("num",{value:0},a),t.kind===R.Comma)t.next();else throw new _t("separator expected",t.token.loc);const x=Mr(t,!1);e&&t.nextWith(R.CloseParen);const k=zu(t);return at("for",{var:v,from:d,to:x,for:k},r)}else{const a=Mr(t,!1);e&&t.nextWith(R.CloseParen);const v=zu(t);return at("for",{times:a,for:v},r)}}function P$(t){const r=t.token.loc;t.nextWith(R.ReturnKeyword);const e=Mr(t,!1);return at("return",{expr:e},r)}function E$(t){const r=[];for(;t.kind===R.OpenSharpBracket;)r.push(M$(t)),t.nextWith(R.NewLine);const e=Gc(t);if(e.type!=="def")throw new _t("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function M$(t){const r=t.token.loc;t.nextWith(R.OpenSharpBracket),t.expect(R.Identifier);const e=t.token.value;t.next();let a;return t.kind!==R.CloseBracket?a=Mr(t,!0):a=at("bool",{value:!0},r),t.nextWith(R.CloseBracket),at("attr",{name:e,value:a},r)}function S$(t){const r=t.token.loc;t.nextWith(R.LoopKeyword);const e=qf(t);return at("loop",{statements:e},r)}function F$(t,r){const e=t.token.loc;switch(t.kind){case R.Eq:{t.next();const a=Mr(t,!1);return at("assign",{dest:r,expr:a},e)}case R.PlusEq:{t.next();const a=Mr(t,!1);return at("addAssign",{dest:r,expr:a},e)}case R.MinusEq:{t.next();const a=Mr(t,!1);return at("subAssign",{dest:r,expr:a},e)}default:return}}function N$(t){const r=[];for(;t.kind===R.NewLine;)t.next();for(;t.kind!==R.EOF;){switch(t.kind){case R.Colon2:{r.push(Id(t));break}case R.Sharp3:{r.push(O$(t));break}default:{r.push(Gc(t));break}}switch(t.kind){case R.NewLine:case R.SemiColon:{for(;[R.NewLine,R.SemiColon].includes(t.kind);)t.next();break}case R.EOF:break;default:throw new _t("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Id(t){const r=t.token.loc;t.nextWith(R.Colon2),t.expect(R.Identifier);const e=t.token.value;t.next();const a=[];for(t.nextWith(R.OpenBrace);t.kind===R.NewLine;)t.next();for(;t.kind!==R.CloseBrace;){switch(t.kind){case R.VarKeyword:case R.LetKeyword:case R.At:{a.push(A$(t));break}case R.Colon2:{a.push(Id(t));break}}switch(t.kind){case R.NewLine:case R.SemiColon:{for(;[R.NewLine,R.SemiColon].includes(t.kind);)t.next();break}case R.CloseBrace:break;default:throw new _t("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(R.CloseBrace),at("ns",{name:e,members:a},r)}function O$(t){const r=t.token.loc;t.nextWith(R.Sharp3);let e=null;t.kind===R.Identifier&&(e=t.token.value,t.next());const a=Mr(t,!0);return at("meta",{name:e,value:a},r)}function Ct(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Ct(e.expr,r);break}case"return":{e.expr=Ct(e.expr,r);break}case"each":{e.items=Ct(e.items,r),e.for=Ct(e.for,r);break}case"for":{e.from!=null&&(e.from=Ct(e.from,r)),e.to!=null&&(e.to=Ct(e.to,r)),e.times!=null&&(e.times=Ct(e.times,r)),e.for=Ct(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=Ct(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Ct(e.expr,r),e.dest=Ct(e.dest,r);break}case"not":{e.expr=Ct(e.expr,r);break}case"if":{e.cond=Ct(e.cond,r),e.then=Ct(e.then,r);for(const a of e.elseif)a.cond=Ct(a.cond,r),a.then=Ct(a.then,r);e.else!=null&&(e.else=Ct(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=Ct(e.children[a],r);break}case"match":{e.about=Ct(e.about,r);for(const a of e.qs)a.q=Ct(a.q,r),a.a=Ct(a.a,r);e.default!=null&&(e.default=Ct(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=Ct(e.statements[a],r);break}case"exists":{e.identifier=Ct(e.identifier,r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=Ct(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],Ct(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=Ct(e.value[a],r);break}case"call":{e.target=Ct(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=Ct(e.args[a],r);break}case"index":{e.target=Ct(e.target,r),e.index=Ct(e.index,r);break}case"prop":{e.target=Ct(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=Ct(e.members[a],r);break}case"or":case"and":{e.left=Ct(e.left,r),e.right=Ct(e.right,r);break}}return e}const Ro=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function Do(t,r){throw new _t(`Reserved word "${t}" cannot be used as variable name.`,r)}function T$(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{Ro.includes(t.name)&&Do(t.name,t.loc);break}case"meta":{t.name!=null&&Ro.includes(t.name)&&Do(t.name,t.loc);break}case"each":{Ro.includes(t.var)&&Do(t.var,t.loc);break}case"for":{t.var!=null&&Ro.includes(t.var)&&Do(t.var,t.loc);break}case"fn":{for(const r of t.args)Ro.includes(r.name)&&Do(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())Ro.includes(r)&&Do(r,t.loc);break}}return t}function I$(t){for(const r of t)Ct(r,T$);return t}function eg(t){return{type:"simple",name:t}}function j$(t,r){return{type:"generic",name:t,inners:r}}function R$(t,r){return{type:"fn",args:t,result:r}}function ac(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=ac(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>ac(a)).join(", "),e=ac(t.result);return`@(${r}) { ${e} }`}}}function Go(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return eg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Go(t.inner):r=eg("any"),j$(t.name,[r])}}throw new _t(`Unknown type: '${ac(t)}'`,t.loc)}else{const r=t.args.map(e=>Go(e));return R$(r,Go(t.result))}}function D$(t){switch(t.type){case"def":{t.varType!=null&&Go(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Go(r.argType);t.retType!=null&&Go(t.retType);break}}return t}function L$(t){for(const r of t)Ct(r,D$);return t}var gu;let H$=(gu=class{constructor(){ge(this,"plugins");this.plugins={validate:[I$,L$],transform:[]}}static parse(r){return gu.instance==null&&(gu.instance=new gu),gu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const a=new u$(r);e=N$(a);for(const v of this.plugins.validate)e=v(e);for(const v of this.plugins.transform)e=v(e);return e}},ge(gu,"instance"),gu);const B$="next",U$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Xh=[],xf=null;function q$(t){return Xh=H$.parse(t),JSON.stringify(Xh,null,"	")}async function z$(t){xf==null||xf.abort(),xf=new ys({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Gh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Gh(e.val,!0),print:!1});break}}});try{await xf.exec(Xh)}catch(r){t.err(r)}}const V$=Object.freeze(Object.defineProperty({__proto__:null,exec:z$,parse:q$,samples:U$,version:B$},Symbol.toStringTag,{value:"Module"}));function Sr(t,r,e){let a=e.value;return{configurable:!0,get(){const v=a.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){a=v}}}let Jc=class jd extends Error{constructor(e,a){super(e);ge(this,"name","AiScript");ge(this,"info");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,jd)}},W$=class extends Jc{constructor(e){super(e.message??`${e}`,e);ge(this,"name","Internal")}},ko=class extends Jc{constructor(e,a){super(e,a);ge(this,"name","Syntax")}},fr=class extends Jc{constructor(e,a){super(e,a);ge(this,"name","Runtime")}},tg=class extends fr{constructor(r,e){super(r,e)}};var Gu=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Au=class Rd{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new Rd(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r).value;return this.log("read",{var:r,val:a}),a}throw new fr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new fr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new fr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new fr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Gu([Sr],Au.prototype,"log",null);Gu([Sr],Au.prototype,"onUpdated",null);Gu([Sr],Au.prototype,"createChildScope",null);Gu([Sr],Au.prototype,"get",null);Gu([Sr],Au.prototype,"exists",null);Gu([Sr],Au.prototype,"getAll",null);Gu([Sr],Au.prototype,"add",null);Gu([Sr],Au.prototype,"assign",null);const Lt={type:"null"},ya={type:"bool",value:!0},Pn={type:"bool",value:!1},Fe=t=>({type:"num",value:t}),Wt=t=>({type:"str",value:t}),yo=t=>({type:"bool",value:t}),Sc=t=>({type:"obj",value:t}),Ir=t=>({type:"arr",value:t}),K$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),oe=t=>({type:"fn",native:t}),G$=t=>({type:"return",value:t}),J$=()=>({type:"break",value:null}),Z$=()=>({type:"continue",value:null}),Q$=t=>t.type==="return"?t.value:t,Yh=(t,r)=>({type:"error",value:t,info:r});function On(t){if(t==null)throw new fr("Expect anything, but got nothing.")}function Ks(t){if(t==null)throw new fr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new fr(`Expect boolean, but got ${t.type}.`)}function Ru(t){if(t==null)throw new fr("Expect function, but got nothing.");if(t.type!=="fn")throw new fr(`Expect function, but got ${t.type}.`)}function qr(t){if(t==null)throw new fr("Expect string, but got nothing.");if(t.type!=="str")throw new fr(`Expect string, but got ${t.type}.`)}function ke(t){if(t==null)throw new fr("Expect number, but got nothing.");if(t.type!=="num")throw new fr(`Expect number, but got ${t.type}.`)}function ri(t){if(t==null)throw new fr("Expect object, but got nothing.");if(t.type!=="obj")throw new fr(`Expect object, but got ${t.type}.`)}function Jo(t){if(t==null)throw new fr("Expect array, but got nothing.");if(t.type!=="arr")throw new fr(`Expect array, but got ${t.type}.`)}function ph(t){return t.type==="obj"}function rg(t){return t.type==="arr"}function ep(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function tp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>tp(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function rp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>rp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=rp(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function sp(t){if(t===null)return Lt;if(typeof t=="boolean")return yo(t);if(typeof t=="string")return Wt(t);if(typeof t=="number")return Fe(t);if(Array.isArray(t))return Ir(t.map(r=>sp(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,sp(a));return Sc(r)}return Lt}function Zo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,a=>`\\${a}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const a=[];for(const v of t.value)a.push(Zo(v,!0,e));return"[ "+a.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const a=[];for(const[v,d]of t.value)a.push(`${v}: ${Zo(d,!0,e)}`);return"{ "+a.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const X$={version:"0.17.0"},Y$=X$.version,ex=new TextEncoder,tx=new TextDecoder,rx={help:Wt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Wt(Y$),"Core:ai":Wt("kawaii"),"Core:not":oe(([t])=>(Ks(t),t.value?Pn:ya)),"Core:eq":oe(([t,r])=>(On(t),On(r),ep(t,r)?ya:Pn)),"Core:neq":oe(([t,r])=>(On(t),On(r),ep(t,r)?Pn:ya)),"Core:and":oe(([t,r])=>(Ks(t),t.value?(Ks(r),r.value?ya:Pn):Pn)),"Core:or":oe(([t,r])=>(Ks(t),t.value?ya:(Ks(r),r.value?ya:Pn))),"Core:add":oe(([t,r])=>(ke(t),ke(r),Fe(t.value+r.value))),"Core:sub":oe(([t,r])=>(ke(t),ke(r),Fe(t.value-r.value))),"Core:mul":oe(([t,r])=>(ke(t),ke(r),Fe(t.value*r.value))),"Core:pow":oe(([t,r])=>{ke(t),ke(r);const e=t.value**r.value;if(isNaN(e))throw new fr("Invalid operation.");return Fe(e)}),"Core:div":oe(([t,r])=>{ke(t),ke(r);const e=t.value/r.value;if(isNaN(e))throw new fr("Invalid operation.");return Fe(e)}),"Core:mod":oe(([t,r])=>(ke(t),ke(r),Fe(t.value%r.value))),"Core:gt":oe(([t,r])=>(ke(t),ke(r),t.value>r.value?ya:Pn)),"Core:lt":oe(([t,r])=>(ke(t),ke(r),t.value<r.value?ya:Pn)),"Core:gteq":oe(([t,r])=>(ke(t),ke(r),t.value>=r.value?ya:Pn)),"Core:lteq":oe(([t,r])=>(ke(t),ke(r),t.value<=r.value?ya:Pn)),"Core:type":oe(([t])=>(On(t),Wt(t.type))),"Core:to_str":oe(([t])=>(On(t),Wt(Zo(t)))),"Core:range":oe(([t,r])=>(ke(t),ke(r),t.value<r.value?Ir(Array.from({length:r.value-t.value+1},(e,a)=>Fe(a+t.value))):t.value>r.value?Ir(Array.from({length:t.value-r.value+1},(e,a)=>Fe(t.value-a))):Ir([t]))),"Core:sleep":oe(async([t])=>(ke(t),await new Promise(r=>setTimeout(r,t.value)),Lt)),"Util:uuid":oe(()=>Wt(Wc())),"Json:stringify":oe(([t])=>(On(t),Wt(JSON.stringify(rp(t))))),"Json:parse":oe(([t])=>{qr(t);try{return sp(JSON.parse(t.value))}catch{return Yh("not_json")}}),"Json:parsable":oe(([t])=>{qr(t);try{JSON.parse(t.value)}catch{return yo(!1)}return yo(!0)}),"Date:now":oe(()=>Fe(Date.now())),"Date:year":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":oe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":oe(([t])=>(qr(t),Fe(new Date(t.value).getTime()))),"Math:Infinity":Fe(1/0),"Math:E":Fe(Math.E),"Math:LN2":Fe(Math.LN2),"Math:LN10":Fe(Math.LN10),"Math:LOG2E":Fe(Math.LOG2E),"Math:LOG10E":Fe(Math.LOG10E),"Math:PI":Fe(Math.PI),"Math:SQRT1_2":Fe(Math.SQRT1_2),"Math:SQRT2":Fe(Math.SQRT2),"Math:abs":oe(([t])=>(ke(t),Fe(Math.abs(t.value)))),"Math:acos":oe(([t])=>(ke(t),Fe(Math.acos(t.value)))),"Math:acosh":oe(([t])=>(ke(t),Fe(Math.acosh(t.value)))),"Math:asin":oe(([t])=>(ke(t),Fe(Math.asin(t.value)))),"Math:asinh":oe(([t])=>(ke(t),Fe(Math.asinh(t.value)))),"Math:atan":oe(([t])=>(ke(t),Fe(Math.atan(t.value)))),"Math:atanh":oe(([t])=>(ke(t),Fe(Math.atanh(t.value)))),"Math:atan2":oe(([t,r])=>(ke(t),ke(r),Fe(Math.atan2(t.value,r.value)))),"Math:cbrt":oe(([t])=>(ke(t),Fe(Math.cbrt(t.value)))),"Math:ceil":oe(([t])=>(ke(t),Fe(Math.ceil(t.value)))),"Math:clz32":oe(([t])=>(ke(t),Fe(Math.clz32(t.value)))),"Math:cos":oe(([t])=>(ke(t),Fe(Math.cos(t.value)))),"Math:cosh":oe(([t])=>(ke(t),Fe(Math.cosh(t.value)))),"Math:exp":oe(([t])=>(ke(t),Fe(Math.exp(t.value)))),"Math:expm1":oe(([t])=>(ke(t),Fe(Math.expm1(t.value)))),"Math:floor":oe(([t])=>(ke(t),Fe(Math.floor(t.value)))),"Math:fround":oe(([t])=>(ke(t),Fe(Math.fround(t.value)))),"Math:hypot":oe(([t])=>{Jo(t);const r=[];for(const e of t.value)ke(e),r.push(e.value);return Fe(Math.hypot(...r))}),"Math:imul":oe(([t,r])=>(ke(t),ke(r),Fe(Math.imul(t.value,r.value)))),"Math:log":oe(([t])=>(ke(t),Fe(Math.log(t.value)))),"Math:log1p":oe(([t])=>(ke(t),Fe(Math.log1p(t.value)))),"Math:log10":oe(([t])=>(ke(t),Fe(Math.log10(t.value)))),"Math:log2":oe(([t])=>(ke(t),Fe(Math.log2(t.value)))),"Math:max":oe(([t,r])=>(ke(t),ke(r),Fe(Math.max(t.value,r.value)))),"Math:min":oe(([t,r])=>(ke(t),ke(r),Fe(Math.min(t.value,r.value)))),"Math:pow":oe(([t,r])=>(ke(t),ke(r),Fe(Math.pow(t.value,r.value)))),"Math:round":oe(([t])=>(ke(t),Fe(Math.round(t.value)))),"Math:sign":oe(([t])=>(ke(t),Fe(Math.sign(t.value)))),"Math:sin":oe(([t])=>(ke(t),Fe(Math.sin(t.value)))),"Math:sinh":oe(([t])=>(ke(t),Fe(Math.sinh(t.value)))),"Math:sqrt":oe(([t])=>{ke(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new fr("Invalid operation.");return Fe(r)}),"Math:tan":oe(([t])=>(ke(t),Fe(Math.tan(t.value)))),"Math:tanh":oe(([t])=>(ke(t),Fe(Math.tanh(t.value)))),"Math:trunc":oe(([t])=>(ke(t),Fe(Math.trunc(t.value)))),"Math:rnd":oe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Fe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Fe(Math.random())),"Math:gen_rng":oe(([t])=>{if(On(t),t.type!=="num"&&t.type!=="str")return Lt;const r=df(t.value.toString());return oe(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?Fe(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Fe(r()))}),"Num:to_hex":oe(([t])=>(ke(t),Wt(t.value.toString(16)))),"Num:from_hex":oe(([t])=>(qr(t),Fe(parseInt(t.value,16)))),"Str:lf":Wt(`
`),"Str:lt":oe(([t,r])=>(qr(t),qr(r),t.value<r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:gt":oe(([t,r])=>(qr(t),qr(r),t.value>r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:from_codepoint":oe(([t])=>(ke(t),Wt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":oe(([t])=>(Jo(t),Wt(Array.from(t.value.map(r=>(ke(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":oe(([t])=>(Jo(t),Wt(tx.decode(Uint8Array.from(t.value.map(r=>(ke(r),r.value))))))),"Obj:keys":oe(([t])=>(ri(t),Ir(Array.from(t.value.keys()).map(r=>Wt(r))))),"Obj:vals":oe(([t])=>(ri(t),Ir(Array.from(t.value.values())))),"Obj:kvs":oe(([t])=>(ri(t),Ir(Array.from(t.value.entries()).map(([r,e])=>Ir([Wt(r),e]))))),"Obj:get":oe(([t,r])=>(ri(t),qr(r),t.value.get(r.value)??Lt)),"Obj:set":oe(([t,r,e])=>(ri(t),qr(r),On(e),t.value.set(r.value,e),Lt)),"Obj:has":oe(([t,r])=>(ri(t),qr(r),yo(t.value.has(r.value)))),"Obj:copy":oe(([t])=>(ri(t),Sc(new Map(t.value)))),"Obj:merge":oe(([t,r])=>(ri(t),ri(r),Sc(new Map([...t.value,...r.value])))),"Error:create":oe(([t,r])=>(qr(t),Yh(t.value,r))),"Async:interval":oe(async([t,r,e],a)=>{ke(t),Ru(r),e&&(Ks(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),oe(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":oe(async([t,r],e)=>{ke(t),Ru(r);const a=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),oe(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})},sg={num:{to_str:t=>oe(async(r,e)=>Wt(t.value.toString()))},str:{to_num:t=>oe(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?Lt:Fe(a)}),to_arr:t=>oe(async(r,e)=>Ir(Ys(t.value).map(a=>Wt(a)))),to_unicode_arr:t=>oe(async(r,e)=>Ir([...t.value].map(a=>Wt(a)))),to_unicode_codepoint_arr:t=>oe(async(r,e)=>Ir([...t.value].map(a=>{const v=a.codePointAt(0);return Fe(v??a.charCodeAt(0))}))),to_char_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(a=>Wt(a)))),to_charcode_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(a=>Fe(a.charCodeAt(0))))),to_utf8_byte_arr:t=>oe(async(r,e)=>Ir(Array.from(ex.encode(t.value)).map(a=>Fe(a)))),len:t=>Fe(yf(t.value)),replace:t=>oe(async([r,e],a)=>(qr(r),qr(e),Wt(t.value.split(r.value).join(e.value)))),index_of:t=>oe(async([r],e)=>(qr(r),Fe(mf(t.value,r.value)))),incl:t=>oe(async([r],e)=>(qr(r),t.value.includes(r.value)?ya:Pn)),trim:t=>oe(async(r,e)=>Wt(t.value.trim())),upper:t=>oe(async(r,e)=>Wt(t.value.toUpperCase())),lower:t=>oe(async(r,e)=>Wt(t.value.toLowerCase())),split:t=>oe(async([r],e)=>(r&&qr(r),Ir(r?t.value.split(r?r.value:"").map(a=>Wt(a)):Ys(t.value).map(a=>Wt(a))))),slice:t=>oe(async([r,e],a)=>(ke(r),ke(e),Wt(wf(t.value,r.value,e.value)))),pick:t=>oe(async([r],e)=>{ke(r);const v=Ys(t.value)[r.value];return v?Wt(v):Lt}),charcode_at:t=>oe(([r],e)=>{ke(r);const a=t.value.charCodeAt(r.value);return Number.isNaN(a)?Lt:Fe(a)}),codepoint_at:t=>oe(([r],e)=>{ke(r);const a=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(a)?Lt:Fe(a)})},arr:{len:t=>Fe(t.value.length),push:t=>oe(async([r],e)=>(On(r),t.value.push(r),t)),unshift:t=>oe(async([r],e)=>(On(r),t.value.unshift(r),t)),pop:t=>oe(async(r,e)=>t.value.pop()??Lt),shift:t=>oe(async(r,e)=>t.value.shift()??Lt),concat:t=>oe(async([r],e)=>(Jo(r),Ir(t.value.concat(r.value)))),slice:t=>oe(async([r,e],a)=>(ke(r),ke(e),Ir(t.value.slice(r.value,e.value)))),join:t=>oe(async([r],e)=>(r&&qr(r),Wt(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>oe(async([r],e)=>{Ru(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,Fe(d)]));return Ir(await Promise.all(a))}),filter:t=>oe(async([r],e)=>{Ru(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,Fe(v)]);Ks(x),x.value&&a.push(d)}return Ir(a)}),reduce:t=>oe(async([r,e],a)=>{Ru(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,Fe(x)])}return d}),find:t=>oe(async([r],e)=>{Ru(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,Fe(a)]);if(Ks(d),d.value)return v}return Lt}),incl:t=>oe(async([r],e)=>(On(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Pn:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?ya:Pn)),reverse:t=>oe(async(r,e)=>(t.value.reverse(),Lt)),copy:t=>oe(async(r,e)=>Ir([...t.value])),sort:t=>oe(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);ke(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return Ru(r),Jo(t),t.value=await a(t.value,r),t})},error:{name:t=>Wt(t.value),info:t=>t.info??Lt}};function sx(t,r){if(Object.hasOwn(sg,t.type)){const e=sg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new fr(`No such prop (${r}) in ${t.type}.`)}else throw new fr(`Cannot read prop of ${t.type}. (reading ${r})`)}const nx={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var en=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Dd=300,ax=Dd-1;let Es=class{constructor(r,e={}){ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);ge(this,"vars",{});this.opts=e;const a={print:oe(([v])=>{On(v),this.opts.out&&this.opts.out(v)}),readline:oe(async v=>{const d=v[0];if(qr(d),this.opts.in==null)return Lt;const x=await this.opts.in(d.value);return Wt(x)})};this.vars=Object.fromEntries(Object.entries({...r,...rx,...a}).map(([v,d])=>[v,nx.const(d)])),this.scope=new Au([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(a=>(this.handleError(a),Yh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Jc?this.opts.err(r):this.opts.err(new W$(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{if(a.mut)throw new Error("Namespaces cannot include mutable variable: "+a.name);const v={isMutable:a.mut,value:await this._eval(a.expr,e)};e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+a.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Lt;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(a);return Q$(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Lt;if(this.stepCount%Dd===ax&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new fr("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);Ru(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Ks(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Ks(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Lt}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(ep(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Lt}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return Lt}case"for":{if(r.times){const a=await this._eval(r.times,e);ke(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);ke(a),ke(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Fe(d)}]])));if(x.type==="break")break;if(x.type==="return")return x}}return Lt}case"each":{const a=await this._eval(r.items,e);Jo(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return Lt}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,{isMutable:r.mut,value:a}),Lt}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),Lt}case"addAssign":{const a=await this._eval(r.dest,e);ke(a);const v=await this._eval(r.expr,e);return ke(v),await this.assign(e,r.dest,Fe(a.value+v.value)),Lt}case"subAssign":{const a=await this._eval(r.dest,e);ke(a);const v=await this._eval(r.expr,e);return ke(v),await this.assign(e,r.dest,Fe(a.value-v.value)),Lt}case"null":return Lt;case"bool":return yo(r.value);case"num":return Fe(r.value);case"str":return Wt(r.value);case"arr":return Ir(await Promise.all(r.value.map(a=>this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return Sc(a)}case"prop":{const a=await this._eval(r.target,e);return ph(a)?a.value.has(r.name)?a.value.get(r.name):Lt:sx(a,r.name)}case"index":{const a=await this._eval(r.target,e),v=await this._eval(r.index,e);if(rg(a)){ke(v);const d=a.value[v.value];if(d===void 0)throw new tg(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}else{if(ph(a))return qr(v),a.value.has(v.value)?a.value.get(v.value):Lt;throw new fr(`Cannot read prop (${Zo(v)}) of ${a.type}.`)}}case"not":{const a=await this._eval(r.expr,e);return Ks(a),yo(!a.value)}case"fn":return K$(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return yo(e.exists(r.identifier.name));case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);a+=Zo(d)}return Wt(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),G$(a)}case"break":return this.log("block:break",{scope:e.name}),J$();case"continue":return this.log("block:continue",{scope:e.name}),Z$();case"ns":return Lt;case"meta":return Lt;case"and":{const a=await this._eval(r.left,e);if(Ks(a),a.value){const v=await this._eval(r.right,e);return Ks(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Ks(a),a.value)return a;{const v=await this._eval(r.right,e);return Ks(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=Lt;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(rg(v)){if(ke(d),v.value[d.value]===void 0)throw new tg(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=a}else if(ph(v))qr(d),v.value.set(d.value,a);else throw new fr(`Cannot read prop (${Zo(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ri(v),v.value.set(e.name,a)}else throw new fr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};en([Sr],Es.prototype,"exec",null);en([Sr],Es.prototype,"execFn",null);en([Sr],Es.prototype,"execFnSimple",null);en([Sr],Es.prototype,"handleError",null);en([Sr],Es.prototype,"log",null);en([Sr],Es.prototype,"collectNs",null);en([Sr],Es.prototype,"collectNsMember",null);en([Sr],Es.prototype,"_fn",null);en([Sr],Es.prototype,"_eval",null);en([Sr],Es.prototype,"_run",null);en([Sr],Es.prototype,"registerAbortHandler",null);en([Sr],Es.prototype,"unregisterAbortHandler",null);en([Sr],Es.prototype,"abort",null);en([Sr],Es.prototype,"assign",null);en([Sr],Es,"collectMetadata",null);function ix(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function wo(t,r,e,a){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,wo.prototype),v.expected=r,v.found=e,v.location=a,v.name="SyntaxError",v}ix(wo,Error);function vh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}wo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,a;for(a=0;a<t.length;a++)if(t[a].source===this.location.source){e=t[a].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,x=this.location.source+":"+d.line+":"+d.column;if(e){var k=this.location.end,E=vh("",d.line.toString().length," "),S=e[v.line-1],F=v.line===k.line?k.column:S.length+1,j=F-v.column||1;r+=`
 --> `+x+`
`+E+` |
`+d.line+" | "+S+`
`+E+" | "+vh("",v.column-1," ")+vh("",j,"^")}else r+=`
 at `+x}return r};wo.buildMessage=function(t,r){var e={literal:function(S){return'"'+v(S.text)+'"'},class:function(S){var F=S.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(S.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function a(S){return S.charCodeAt(0).toString(16).toUpperCase()}function v(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function d(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function x(S){return e[S.type](S)}function k(S){var F=S.map(x),j,L;if(F.sort(),F.length>0){for(j=1,L=1;j<F.length;j++)F[j-1]!==F[j]&&(F[L]=F[j],L++);F.length=L}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function E(S){return S?'"'+v(S)+'"':"end of input"}return"Expected "+k(t)+" but "+E(r)+" found."};function ng(t,r){r=r!==void 0?r:{};var e={},a=r.grammarSource,v={Preprocess:na,Main:hs},d=na,x="//",k="/*",E="*/",S="(",F=")",j="::",L="{",K="}",he="###",re="let",ie=":",Ce="=",q="var",H="<:",z="#[",V="]",W="each",J=",",Y="for",te="return",Ae="loop",Ee="break",me="continue",Ge="+=",ut="-=",Yt="\\",ot="||",it="&&",Be="==",lt="!=",It="<=",Ut=">=",tt="<",Rr=">",er="+",Ar="-",Nt="*",$r="^",Vr="/",Or="%",Dr="!",jt="[",U=".",Z="if",ne="elif",pe="else",ve="match",le="=>",Oe="eval",$e="exists",xe="`",ce='"',Te="'",We='\\"',Ve="\\'",Je="true",Xe="false",rt="null",ft=";",Ot="@",qt="@(",Ft=`\r
`,kt=/^[A-Z0-9_:]/i,Fs=/^[^`{]/,rs=/^[{}`]/,Tt=/^[+\-]/,gt=/^[1-9]/,xt=/^[0-9]/,ka=/^[A-Z_]/i,Bn=/^[A-Z0-9_]/i,li=/^[\r\n]/,ui=/^[ \t\r\n]/,ir=/^[ \t]/,Pt=Bs(),oi=Q("//",!1),$n=Q("/*",!1),yr=Q("*/",!1),bt=Q("(",!1),Zt=Q(")",!1),lr=Q("::",!1),Qe=Q("{",!1),At=Q("}",!1),Wr=Q("###",!1),dt=Q("let",!1),st=Q(":",!1),Lr=Q("=",!1),fi=Q("var",!1),ci=Q("<:",!1),Ns=Q("#[",!1),Kr=Q("]",!1),Et=Q("each",!1),Ye=Q(",",!1),ss=Q("for",!1),wr=Q("return",!1),Rt=yt([["A","Z"],["0","9"],"_",":"],!1,!0),hi=Q("loop",!1),pi=Q("break",!1),vi=Q("continue",!1),gi=Q("+=",!1),Pa=Q("-=",!1),Un=Q("\\",!1),di=Q("||",!1),yi=Q("&&",!1),wi=Q("==",!1),mi=Q("!=",!1),$i=Q("<=",!1),Ea=Q(">=",!1),sn=Q("<",!1),qn=Q(">",!1),xi=Q("+",!1),Ma=Q("-",!1),zn=Q("*",!1),bi=Q("^",!1),Ai=Q("/",!1),Ci=Q("%",!1),xn=Q("!",!1),Xr=Q("[",!1),Os=Q(".",!1),_i=Q("if",!1),ki=Q("elif",!1),Pi=Q("else",!1),Ts=Q("match",!1),ns=Q("=>",!1),Is=Q("eval",!1),Ei=Q("exists",!1),as=Q("`",!1),js=yt(["`","{"],!0,!1),Rs=yt(["{","}","`"],!1,!1),is=Q('"',!1),ls=Q("'",!1),Ds=Q('\\"',!1),Sa=Q("\\'",!1),Mt=yt(["+","-"],!1,!1),Vn=yt([["1","9"]],!1,!1),St=yt([["0","9"]],!1,!1),Mi=Q("true",!1),Ls=Q("false",!1),Si=Q("null",!1),Gr=Q(";",!1),Fi=Q("@",!1),nn=Q("@(",!1),Ni=yt([["A","Z"],"_"],!1,!0),Wn=yt([["A","Z"],["0","9"],"_"],!1,!0),Oi=Q(`\r
`,!1),Ti=yt(["\r",`
`],!1,!1),Ii=yt([" ","	","\r",`
`],!1,!1),ji=yt([" ","	"],!1,!1),Ri=function(s){return s.join("")},Di=function(){return ee()},Li=function(){return ee()},Hi=function(){return""},Fa=function(){return""},Bi=function(s){return s??[]},an=function(s,l){return l},Ui=function(s,l){return[s,...l]},ln=function(s,l){return l},qi=function(s,l){return[s,...l]},Kn=function(s,l){return l},zi=function(s,l){return[s,...l]},Vi=function(s){return s},Wi=function(s,l){return g("ns",{name:s,members:l})},Ki=function(s,l){return g("meta",{name:s,value:l})},Gi=function(s){return g("meta",{name:null,value:s})},Ji=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!1,attr:[]})},Zi=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!0,attr:[]})},Qi=function(s){return g("identifier",{name:"print",chain:[g("callChain",{args:[s]})]})},Xi=function(s,l){return g("attr",{name:s,value:l??g("bool",{value:!0})})},Yi=function(s,l,h){return g("each",{var:s,items:l,for:h})},el=function(s,l,h){return g("each",{var:s,items:l,for:h})},tl=function(s,l){return l},rl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},sl=function(s,l){return l},nl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},al=function(s,l){return g("for",{times:s,for:l})},il=function(s,l){return g("for",{times:s,for:l})},ll=function(s){return g("return",{expr:s})},ul=function(s){return g("loop",{statements:s})},ol=function(){return g("break",{})},Na=function(){return g("continue",{})},fl=function(s,l,h){return l==="+="?g("addAssign",{dest:s,expr:h}):l==="-="?g("subAssign",{dest:s,expr:h}):g("assign",{dest:s,expr:h})},Gn=function(s,l,h){return{op:l,term:h}},cl=function(s,l){return g("infix",{operands:[s,...l.map(h=>h.term)],operators:l.map(h=>h.op)})},hl=function(){return ee()},pl=function(s){return g("not",{expr:s})},Oa=function(s,l){return s.chain?{...s,chain:[...s.chain,...l]}:{...s,chain:l}},vl=function(s){return g("callChain",{args:s??[]})},Jn=function(s,l){return l},gl=function(s,l){return[s,...l]},dl=function(s){return g("indexChain",{index:s})},yl=function(s){return g("propChain",{name:s})},wl=function(s,l,h,i){return g("if",{cond:s,then:l,elseif:h??[],else:i})},ml=function(s,l){return[s,...l]},Ta=function(s,l){return{cond:s,then:l}},$l=function(s){return s},Zn=function(s,l,h){return{q:l,a:h}},xl=function(s,l,h){return g("match",{about:s,qs:l??[],default:h})},bl=function(s){return g("block",{statements:s})},Al=function(s){return g("exists",{identifier:s})},Ia=function(s){return g("identifier",{name:s})},Cl=function(s){return g("tmpl",{tmpl:s})},ja=function(s){return s.join("")},Qn=function(s){return s},_l=function(s){return g("str",{value:s.join("")})},Xn=function(s){return s},kl=function(s){return g("str",{value:s.join("")})},Pl=function(){return'"'},El=function(){return"'"},Ml=function(){return g("num",{value:parseFloat(ee())})},Sl=function(){return g("num",{value:parseFloat(ee())})},Fl=function(){return g("num",{value:parseInt(ee(),10)})},Nl=function(){return g("num",{value:parseInt(ee(),10)})},Ra=function(){return g("bool",{value:!0})},Ol=function(){return g("bool",{value:!1})},Da=function(){return g("null",{})},Yn=function(s,l){return{k:s,v:l}},Tl=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},ea=function(s){return s},Il=function(s){return g("arr",{value:s})},jl=function(s,l){return{name:s,argType:l}},La=function(s,l){return[s,...l]},Rl=function(s,l,h,i,p,c){return(s.length>0||h.length>0)&&zl("Cannot use spaces before or after the function name."),g("def",{name:l,expr:g("fn",{args:i??[],retType:p},c??[]),mut:!1,attr:[]})},Ha=function(s,l,h){return g("fn",{args:s??[],retType:l},h??[])},ta=function(s){return s},Dl=function(s){return g("arr",{value:s})},ra=function(s,l){return{k:s,v:l}},Ll=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},Hl=function(s,l){return g("fnTypeSource",{args:s??[],result:l})},Bl=function(s,l){return[s,...l]},Ul=function(s,l){return g("namedTypeSource",{name:s,inner:l})},ql=function(s){return g("namedTypeSource",{name:s,inner:null})},u=function(){return ee()},G=function(){return ee()},Hs=function(s){return g("block",{statements:s??[]})},n=0,D=0,P=[{line:1,column:1}],I=0,Hr=[],$=0,M={},us;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function ee(){return t.substring(D,n)}function tr(){return os(D,n)}function zl(s,l){throw l=l!==void 0?l:os(D,n),Ba(s,l)}function Q(s,l){return{type:"literal",text:s,ignoreCase:l}}function yt(s,l,h){return{type:"class",parts:s,inverted:l,ignoreCase:h}}function Bs(){return{type:"any"}}function T(){return{type:"end"}}function sa(s){var l=P[s],h;if(l)return l;for(h=s-1;!P[h];)h--;for(l=P[h],l={line:l.line,column:l.column};h<s;)t.charCodeAt(h)===10?(l.line++,l.column=1):l.column++,h++;return P[s]=l,l}function os(s,l,h){var i=sa(s),p=sa(l),c={source:a,start:{offset:s,line:i.line,column:i.column},end:{offset:l,line:p.line,column:p.column}};return h&&a&&typeof a.offset=="function"&&(c.start=a.offset(c.start),c.end=a.offset(c.end)),c}function C(s){n<I||(n>I&&(I=n,Hr=[]),Hr.push(s))}function Ba(s,l){return new wo(s,null,null,l)}function Vl(s,l,h){return new wo(wo.buildMessage(s,l),s,l,h)}function na(){var s,l,h,i=n*77+0,p=M[i];if(p)return n=p.nextPos,p.result;for(s=n,l=[],h=aa();h!==e;)l.push(h),h=aa();return D=s,l=Ri(l),s=l,M[i]={nextPos:n,result:s},s}function aa(){var s,l,h=n*77+1,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=ms(),l!==e&&(D=s,l=Di()),s=l,s===e&&(s=n,l=qs(),l!==e&&(D=s,l=Li()),s=l,s===e&&(s=Wl(),s===e&&(t.length>n?(s=t.charAt(n),n++):(s=e,$===0&&C(Pt))))),M[h]={nextPos:n,result:s},s)}function Wl(){var s,l,h,i,p,c,m=n*77+2,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,2)===x?(l=x,n+=2):(l=e,$===0&&C(oi)),l!==e){for(h=[],i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=Hi()}else n=s,s=e;if(s===e)if(s=n,t.substr(n,2)===k?(l=k,n+=2):(l=e,$===0&&C($n)),l!==e){for(h=[],i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);t.substr(n,2)===E?(i=E,n+=2):(i=e,$===0&&C(yr)),i!==e?(D=s,s=Fa()):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function hs(){var s,l,h,i,p,c=n*77+3,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();for(h=bn(),h===e&&(h=null),i=[],p=f();p!==e;)i.push(p),p=f();return D=s,s=Bi(h),M[c]={nextPos:n,result:s},s}function bn(){var s,l,h,i,p,c,m,y,b=n*77+4,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Ue(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=Ui(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function An(){var s,l,h,i,p,c,m,y,b=n*77+5,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Br(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=qi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function rr(){var s,l,h,i,p,c,m,y,b=n*77+6,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Cr(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=zi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Ue(){var s,l=n*77+7,h=M[l];return h?(n=h.nextPos,h.result):(s=la(),s===e&&(s=Kl(),s===e&&(s=Cr())),M[l]={nextPos:n,result:s},s)}function Br(){var s,l=n*77+8,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=la())),M[l]={nextPos:n,result:s},s)}function Cr(){var s,l=n*77+9,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=Gl(),s===e&&(s=Xl(),s===e&&(s=Jl(),s===e&&(s=Zl(),s===e&&(s=Ql(),s===e&&(s=Yl(),s===e&&(s=eu(),s===e&&(s=_r(),s===e&&(s=Ua(),s===e&&(s=ye()))))))))))),M[l]={nextPos:n,result:s},s)}function ye(){var s,l=n*77+10,h=M[l];return h?(n=h.nextPos,h.result):(s=tu(),s===e&&(s=Jr()),M[l]={nextPos:n,result:s},s)}function Jr(){var s,l=n*77+11,h=M[l];return h?(n=h.nextPos,h.result):(s=nu(),s===e&&(s=fu(),s===e&&(s=qa(),s===e&&(s=ia()))),M[l]={nextPos:n,result:s},s)}function ia(){var s,l,h,i,p,c,m=n*77+12,y=M[m];if(y)return n=y.nextPos,y.result;if(s=za(),s===e&&(s=Va(),s===e&&(s=Wa(),s===e&&(s=ms(),s===e&&(s=qs(),s===e&&(s=ha(),s===e&&(s=pa(),s===e&&(s=pn(),s===e&&(s=Ja(),s===e&&(s=ou(),s===e&&(s=ru(),s===e&&(s=fa(),s===e))))))))))))if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=Vi(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function sr(){var s,l=n*77+13,h=M[l];return h?(n=h.nextPos,h.result):(s=ha(),s===e&&(s=qs(),s===e&&(s=pa(),s===e&&(s=cu(),s===e&&(s=hu(),s===e&&(s=pn()))))),M[l]={nextPos:n,result:s},s)}function la(){var s,l,h,i,p,c,m,y,b,A,N=n*77+14,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===j?(l=j,n+=2):(l=e,$===0&&C(lr)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(t.charCodeAt(n)===123?(c=L,n++):(c=e,$===0&&C(Qe)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=An(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();t.charCodeAt(n)===125?(A=K,n++):(A=e,$===0&&C(At)),A!==e?(D=s,s=Wi(i,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Kl(){var s,l,h,i,p,c,m=n*77+15,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=sr(),c!==e?(D=s,s=Ki(i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();i=sr(),i!==e?(D=s,s=Gi(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ua(){var s,l,h,i,p,c,m,y,b,A=n*77+16,N=M[A];if(N)return n=N.nextPos,N.result;if(s=n,t.substr(n,3)===re?(l=re,n+=3):(l=e,$===0&&C(dt)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Ji(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===q?(l=q,n+=3):(l=e,$===0&&C(fi)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Zi(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[A]={nextPos:n,result:s},s}function Gl(){var s,l,h,i,p=n*77+17,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,2)===H?(l=H,n+=2):(l=e,$===0&&C(ci)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();i=ye(),i!==e?(D=s,s=Qi(i)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Jl(){var s,l,h,i,p,c,m,y=n*77+18,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,2)===z?(l=z,n+=2):(l=e,$===0&&C(Ns)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();for(m=sr(),m!==e?p=m:(n=p,p=e),p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();t.charCodeAt(n)===93?(m=V,n++):(m=e,$===0&&C(Kr)),m!==e?(D=s,s=Xi(i,p)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function Zl(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+19,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();for(t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e)if(t.charCodeAt(n)===41?(O=F,n++):(O=e,$===0&&C(Zt)),O!==e){for(B=[],se=f();se!==e;)B.push(se),se=f();se=be(),se!==e?(D=s,s=Yi(m,N,se)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(A=ye(),A!==e){if(N=[],O=f(),O!==e)for(;O!==e;)N.push(O),O=f();else N=e;N!==e?(O=be(),O!==e?(D=s,s=el(c,A,O)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function Ql(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe=n*77+20,ze=M[qe];if(ze)return n=ze.nextPos,ze.result;if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=n,t.charCodeAt(n)===61?(A=Ce,n++):(A=e,$===0&&C(Lr)),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();O=ye(),O!==e?(D=b,b=tl(m,O)):(n=b,b=e)}else n=b,b=e;for(b===e&&(b=null),t.charCodeAt(n)===44?(A=J,n++):(A=e,$===0&&C(Ye)),A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();if(O=ye(),O!==e)if(t.charCodeAt(n)===41?(B=F,n++):(B=e,$===0&&C(Zt)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=be(),X!==e?(D=s,s=rl(m,b,O,X)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(y=n,t.charCodeAt(n)===61?(b=Ce,n++):(b=e,$===0&&C(Lr)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=ye(),N!==e?(D=y,y=sl(c,N)):(n=y,y=e)}else n=y,y=e;for(y===e&&(y=null),t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e){if(O=[],B=f(),B!==e)for(;B!==e;)O.push(B),B=f();else O=e;O!==e?(B=be(),B!==e?(D=s,s=nl(c,y,N,B)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(p=ye(),p!==e)if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=be(),y!==e?(D=s,s=al(p,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;p!==e?(c=be(),c!==e?(D=s,s=il(i,c)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e}}return M[qe]={nextPos:n,result:s},s}function Xl(){var s,l,h,i,p,c=n*77+21,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,6)===te?(l=te,n+=6):(l=e,$===0&&C(wr)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=ye(),p!==e?(D=s,s=ll(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function Yl(){var s,l,h,i,p,c,m,y,b=n*77+22,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Ae?(l=Ae,n+=4):(l=e,$===0&&C(hi)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=ul(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function eu(){var s,l,h,i,p=n*77+23,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Ee?(l=Ee,n+=5):(l=e,$===0&&C(pi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function _r(){var s,l,h,i,p=n*77+24,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,8)===me?(l=me,n+=8):(l=e,$===0&&C(vi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Na()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ua(){var s,l,h,i,p,c,m=n*77+25,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.substr(n,2)===Ge?(i=Ge,n+=2):(i=e,$===0&&C(gi)),i===e&&(t.substr(n,2)===ut?(i=ut,n+=2):(i=e,$===0&&C(Pa)),i===e&&(t.charCodeAt(n)===61?(i=Ce,n++):(i=e,$===0&&C(Lr)))),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=ye(),c!==e?(D=s,s=fl(l,i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function tu(){var s,l,h,i,p,c,m,y,b=n*77+26,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Jr(),l!==e){for(h=[],i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e;if(i!==e)for(;i!==e;){for(h.push(i),i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e}else h=e;h!==e?(D=s,s=cl(l,h)):(n=s,s=e)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Qt(){var s,l,h,i=n*77+27,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(h=ae(),h!==e?(l=[l,h],s=l):(n=s,s=e)):(n=s,s=e),s===e&&(s=w()),M[i]={nextPos:n,result:s},s)}function un(){var s,l,h=n*77+28,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===ot?(l=ot,n+=2):(l=e,$===0&&C(di)),l===e&&(t.substr(n,2)===it?(l=it,n+=2):(l=e,$===0&&C(yi)),l===e&&(t.substr(n,2)===Be?(l=Be,n+=2):(l=e,$===0&&C(wi)),l===e&&(t.substr(n,2)===lt?(l=lt,n+=2):(l=e,$===0&&C(mi)),l===e&&(t.substr(n,2)===It?(l=It,n+=2):(l=e,$===0&&C($i)),l===e&&(t.substr(n,2)===Ut?(l=Ut,n+=2):(l=e,$===0&&C(Ea)),l===e&&(t.charCodeAt(n)===60?(l=tt,n++):(l=e,$===0&&C(sn)),l===e&&(t.charCodeAt(n)===62?(l=Rr,n++):(l=e,$===0&&C(qn)),l===e&&(t.charCodeAt(n)===43?(l=er,n++):(l=e,$===0&&C(xi)),l===e&&(t.charCodeAt(n)===45?(l=Ar,n++):(l=e,$===0&&C(Ma)),l===e&&(t.charCodeAt(n)===42?(l=Nt,n++):(l=e,$===0&&C(zn)),l===e&&(t.charCodeAt(n)===94?(l=$r,n++):(l=e,$===0&&C(bi)),l===e&&(t.charCodeAt(n)===47?(l=Vr,n++):(l=e,$===0&&C(Ai)),l===e&&(t.charCodeAt(n)===37?(l=Or,n++):(l=e,$===0&&C(Ci))))))))))))))),l!==e&&(D=s,l=hl()),s=l,M[h]={nextPos:n,result:s},s)}function ru(){var s,l,h,i=n*77+29,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===33?(l=Dr,n++):(l=e,$===0&&C(xn)),l!==e?(h=ye(),h!==e?(D=s,s=pl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qa(){var s,l,h,i,p=n*77+30,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,l=ia(),l!==e){if(h=[],i=on(),i===e&&(i=oa(),i===e&&(i=ws())),i!==e)for(;i!==e;)h.push(i),i=on(),i===e&&(i=oa(),i===e&&(i=ws()));else h=e;h!==e?(D=s,s=Oa(l,h)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function on(){var s,l,h,i,p,c,m=n*77+31,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=su(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=vl(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function su(){var s,l,h,i,p,c,m=n*77+32,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);D=s,s=gl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function oa(){var s,l,h,i,p,c,m=n*77+33,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=dl(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ws(){var s,l,h,i=n*77+34,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===46?(l=U,n++):(l=e,$===0&&C(Os)),l!==e?(h=De(),h!==e?(D=s,s=yl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function nu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+35,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===Z?(l=Z,n+=2):(l=e,$===0&&C(_i)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=be(),c!==e){if(m=n,y=[],b=f(),b!==e)for(;b!==e;)y.push(b),b=f();else y=e;if(y!==e?(b=au(),b!==e?m=b:(n=m,m=e)):(n=m,m=e),m===e&&(m=null),y=n,b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;b!==e?(A=iu(),A!==e?y=A:(n=y,y=e)):(n=y,y=e),y===e&&(y=null),D=s,s=wl(i,c,m,y)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function au(){var s,l,h,i,p,c,m=n*77+36,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=Us(),l!==e){for(h=[],i=n,p=[],c=f();c!==e;)p.push(c),c=f();for(c=Us(),c!==e?i=c:(n=i,i=e);i!==e;){for(h.push(i),i=n,p=[],c=f();c!==e;)p.push(c),c=f();c=Us(),c!==e?i=c:(n=i,i=e)}D=s,s=ml(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Us(){var s,l,h,i,p,c,m,y=n*77+37,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,4)===ne?(l=ne,n+=4):(l=e,$===0&&C(ki)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=be(),m!==e?(D=s,s=Ta(p,m)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[y]={nextPos:n,result:s},s}function iu(){var s,l,h,i,p,c=n*77+38,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,4)===pe?(l=pe,n+=4):(l=e,$===0&&C(Pi)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=be(),p!==e?(D=s,s=$l(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function za(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+39,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.substr(n,5)===ve?(l=ve,n+=5):(l=e,$===0&&C(Ts)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===123?(m=L,n++):(m=e,$===0&&C(Qe)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=[],A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;if(A!==e)for(;A!==e;)if(b.push(A),A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;else b=e;if(b!==e){if(A=n,t.charCodeAt(n)===42?(N=Nt,n++):(N=e,$===0&&C(zn)),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();A=X}else n=A,A=e}else n=A,A=e}else n=A,A=e;for(A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();t.charCodeAt(n)===125?(O=K,n++):(O=e,$===0&&C(At)),O!==e?(D=s,s=xl(p,b,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function Va(){var s,l,h,i,p,c,m,y,b=n*77+40,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Oe?(l=Oe,n+=4):(l=e,$===0&&C(Is)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=bl(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Wa(){var s,l,h,i,p=n*77+41,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,6)===$e?(l=$e,n+=6):(l=e,$===0&&C(Ei)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;h!==e?(i=fa(),i!==e?(D=s,s=Al(i)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function fa(){var s,l,h=n*77+42,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=Za(),l!==e&&(D=s,l=Ia(l)),s=l,M[h]={nextPos:n,result:s},s)}function ms(){var s,l,h,i,p,c,m=n*77+43,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===96?(l=xe,n++):(l=e,$===0&&C(as)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===96?(i=xe,n++):(i=e,$===0&&C(as)),i!==e?(D=s,s=Cl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function fn(){var s,l,h,i,p,c,m=n*77+44,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=ye(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?s=i:(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,l=[],h=cn(),h!==e)for(;h!==e;)l.push(h),h=cn();else l=e;l!==e&&(D=s,l=ja(l)),s=l}return M[m]={nextPos:n,result:s},s}function cn(){var s,l=n*77+45,h=M[l];return h?(n=h.nextPos,h.result):(s=Ka(),s===e&&(Fs.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(js))),M[l]={nextPos:n,result:s},s)}function Ka(){var s,l,h,i=n*77+46,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(rs.test(t.charAt(n))?(h=t.charAt(n),n++):(h=e,$===0&&C(Rs)),h!==e?s=h:(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qs(){var s,l,h,i,p,c,m=n*77+47,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===34?(l=ce,n++):(l=e,$===0&&C(is)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===34?(i=ce,n++):(i=e,$===0&&C(is)),i!==e?(D=s,s=_l(h)):(n=s,s=e)}else n=s,s=e;if(s===e)if(s=n,t.charCodeAt(n)===39?(l=Te,n++):(l=e,$===0&&C(ls)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===39?(i=Te,n++):(i=e,$===0&&C(ls)),i!==e?(D=s,s=kl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ca(){var s,l,h=n*77+48,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===We?(l=We,n+=2):(l=e,$===0&&C(Ds)),l!==e&&(D=s,l=Pl()),s=l,M[h]={nextPos:n,result:s},s)}function hn(){var s,l,h=n*77+49,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===Ve?(l=Ve,n+=2):(l=e,$===0&&C(Sa)),l!==e&&(D=s,l=El()),s=l,M[h]={nextPos:n,result:s},s)}function ha(){var s,l=n*77+50,h=M[l];return h?(n=h.nextPos,h.result):(s=lu(),s===e&&(s=Ga()),M[l]={nextPos:n,result:s},s)}function lu(){var s,l,h,i,p,c,m=n*77+51,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;if(h!==e)if(t.charCodeAt(n)===46?(i=U,n++):(i=e,$===0&&C(Os)),i!==e){if(p=[],xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St)),c!==e)for(;c!==e;)p.push(c),xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St));else p=e;p!==e?(D=s,s=Ml()):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e)if(t.charCodeAt(n)===46?(h=U,n++):(h=e,$===0&&C(Os)),h!==e){if(i=[],xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St)),p!==e)for(;p!==e;)i.push(p),xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St));else i=e;i!==e?(D=s,s=Sl()):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Ga(){var s,l,h,i,p=n*77+52,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;h!==e?(D=s,s=Fl()):(n=s,s=e)}else n=s,s=e;return s===e&&(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e?(D=s,s=Nl()):(n=s,s=e)),M[p]={nextPos:n,result:s},s}function pa(){var s,l=n*77+53,h=M[l];return h?(n=h.nextPos,h.result):(s=uu(),s===e&&(s=Cn()),M[l]={nextPos:n,result:s},s)}function uu(){var s,l,h,i,p=n*77+54,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===Je?(l=Je,n+=4):(l=e,$===0&&C(Mi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ra()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Cn(){var s,l,h,i,p=n*77+55,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Xe?(l=Xe,n+=5):(l=e,$===0&&C(Ls)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function pn(){var s,l,h,i,p=n*77+56,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===rt?(l=rt,n+=4):(l=e,$===0&&C(Si)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Da()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ja(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+57,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Tl(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function ou(){var s,l,h,i,p,c,m,y,b,A,N=n*77+58,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Il(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function zs(){var s,l,h,i,p,c,m,y=n*77+59,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,l=De(),l!==e){for(h=n,i=[],p=f();p!==e;)i.push(p),p=f();if(t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=He(),m!==e?h=m:(n=h,h=e)}else n=h,h=e;h===e&&(h=null),D=s,s=jl(l,h)}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function va(){var s,l,h,i,p,c,m=n*77+60,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=zs(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=La(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Xt(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+61,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.charCodeAt(n)===64?(l=Ot,n++):(l=e,$===0&&C(Fi)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(t.charCodeAt(n)===40?(c=S,n++):(c=e,$===0&&C(bt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=va(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(t.charCodeAt(n)===41?(A=F,n++):(A=e,$===0&&C(Zt)),A!==e){for(N=n,O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===58?(B=ie,n++):(B=e,$===0&&C(st)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=He(),X!==e?N=X:(n=N,N=e)}else n=N,N=e;for(N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===123?(B=L,n++):(B=e,$===0&&C(Qe)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();for(X=rr(),X===e&&(X=null),qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();t.charCodeAt(n)===125?(ze=K,n++):(ze=e,$===0&&C(At)),ze!==e?(D=s,s=Rl(h,i,p,y,N,X)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function fu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se=n*77+62,X=M[se];if(X)return n=X.nextPos,X.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=va(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=n,y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===58?(b=ie,n++):(b=e,$===0&&C(st)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=He(),N!==e?m=N:(n=m,m=e)}else n=m,m=e;for(m===e&&(m=null),y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===123?(b=L,n++):(b=e,$===0&&C(Qe)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();for(N=rr(),N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();t.charCodeAt(n)===125?(B=K,n++):(B=e,$===0&&C(At)),B!==e?(D=s,s=Ha(i,m,N)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[se]={nextPos:n,result:s},s}function cu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+63,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Dl(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function hu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+64,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Ll(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function He(){var s,l=n*77+65,h=M[l];return h?(n=h.nextPos,h.result):(s=pu(),s===e&&(s=Jt()),M[l]={nextPos:n,result:s},s)}function pu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+66,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=Yr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.substr(n,2)===le?(y=le,n+=2):(y=e,$===0&&C(ns)),y!==e){for(b=[],A=f();A!==e;)b.push(A),A=f();A=He(),A!==e?(D=s,s=Hl(i,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Yr(){var s,l,h,i,p,c,m=n*77+67,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=He(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=Bl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Jt(){var s,l,h,i,p,c,m,y,b=n*77+68,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=De(),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(t.charCodeAt(n)===60?(i=tt,n++):(i=e,$===0&&C(sn)),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(c=He(),c!==e){for(m=[],y=w();y!==e;)m.push(y),y=w();t.charCodeAt(n)===62?(y=Rr,n++):(y=e,$===0&&C(qn)),y!==e?(D=s,s=Ul(l,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return s===e&&(s=n,l=De(),l!==e&&(D=s,l=ql(l)),s=l),M[b]={nextPos:n,result:s},s}function De(){var s,l,h,i,p=n*77+69,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,ka.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Ni)),l!==e){for(h=[],Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));i!==e;)h.push(i),Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));D=s,s=u()}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Za(){var s,l,h,i,p,c,m=n*77+70,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=De(),l!==e){for(h=[],i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=G()}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function _(){var s,l,h,i,p,c=n*77+71,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();if(t.charCodeAt(n)===44?(h=J,n++):(h=e,$===0&&C(Ye)),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();l=[l,h,i],s=l}else n=s,s=e;if(s===e)if(s=[],l=f(),l!==e)for(;l!==e;)s.push(l),l=f();else s=e;return M[c]={nextPos:n,result:s},s}function be(){var s,l,h,i,p,c,m=n*77+72,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=rr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?(D=s,s=Hs(i)):(n=s,s=e)}else n=s,s=e;return s===e&&(s=Cr()),M[m]={nextPos:n,result:s},s}function ae(){var s,l=n*77+73,h=M[l];return h?(n=h.nextPos,h.result):(t.substr(n,2)===Ft?(s=Ft,n+=2):(s=e,$===0&&C(Oi)),s===e&&(li.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ti))),M[l]={nextPos:n,result:s},s)}function o(){var s,l,h=n*77+74,i=M[h];return i?(n=i.nextPos,i.result):(s=n,$++,t.length>n?(l=t.charAt(n),n++):(l=e,$===0&&C(Pt)),$--,l===e?s=void 0:(n=s,s=e),s===e&&(s=ae()),M[h]={nextPos:n,result:s},s)}function f(){var s,l=n*77+75,h=M[l];return h?(n=h.nextPos,h.result):(ui.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ii)),M[l]={nextPos:n,result:s},s)}function w(){var s,l=n*77+76,h=M[l];return h?(n=h.nextPos,h.result):(ir.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(ji)),M[l]={nextPos:n,result:s},s)}function g(s,l,h){const i={type:s};l.children=h;for(const c of Object.keys(l))l[c]!==void 0&&(i[c]=l[c]);const p=tr();return i.loc={start:p.start.offset,end:p.end.offset-1},i}if(us=d(),us!==e&&n===t.length)return us;throw us!==e&&n<t.length&&C(T()),Vl(Hr,I<t.length?t.charAt(I):null,I<t.length?os(I,I+1):os(I,I))}const lx=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function ux(t){return lx.includes(t.type)}function Ld(t){return"chain"in t&&t.chain!==null}function ox(t,r,e){return{type:"call",target:t,args:r,loc:e}}function fx(t,r,e){return{type:"index",target:t,index:r,loc:e}}function cx(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function ct(t,r){const e=r(t);switch(e.type){case"def":{e.expr=ct(e.expr,r);break}case"return":{e.expr=ct(e.expr,r);break}case"each":{e.items=ct(e.items,r),e.for=ct(e.for,r);break}case"for":{e.from!=null&&(e.from=ct(e.from,r)),e.to!=null&&(e.to=ct(e.to,r)),e.times!=null&&(e.times=ct(e.times,r)),e.for=ct(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=ct(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=ct(e.expr,r),e.dest=ct(e.dest,r);break}case"infix":{for(let a=0;a<e.operands.length;a++)e.operands[a]=ct(e.operands[a],r);break}case"not":{e.expr=ct(e.expr,r);break}case"if":{e.cond=ct(e.cond,r),e.then=ct(e.then,r);for(const a of e.elseif)a.cond=ct(a.cond,r),a.then=ct(a.then,r);e.else!=null&&(e.else=ct(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=ct(e.children[a],r);break}case"match":{e.about=ct(e.about,r);for(const a of e.qs)a.q=ct(a.q,r),a.a=ct(a.a,r);e.default!=null&&(e.default=ct(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=ct(e.statements[a],r);break}case"exists":{e.identifier=ct(e.identifier,r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=ct(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],ct(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=ct(e.value[a],r);break}case"callChain":{for(let a=0;a<e.args.length;a++)e.args[a]=ct(e.args[a],r);break}case"indexChain":{e.index=ct(e.index,r);break}case"call":{e.target=ct(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=ct(e.args[a],r);break}case"index":{e.target=ct(e.target,r),e.index=ct(e.index,r);break}case"prop":{e.target=ct(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=ct(e.members[a],r);break}case"or":case"and":{e.left=ct(e.left,r),e.right=ct(e.right,r);break}}if(Ld(e)&&e.chain!=null)for(let a=0;a<e.chain.length;a++)e.chain[a]=ct(e.chain[a],r);return e}const gh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function dh(t){throw new ko(`Reserved word "${t}" cannot be used as variable name.`)}function hx(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{gh.includes(t.name)&&dh(t.name);break}case"meta":{t.name!=null&&gh.includes(t.name)&&dh(t.name);break}case"fn":{for(const r of t.args)gh.includes(r.name)&&dh(r.name);break}}return t}function px(t){for(const r of t)ct(r,hx);return t}function ag(t){return{type:"simple",name:t}}function vx(t,r){return{type:"generic",name:t,inners:r}}function gx(t,r){return{type:"fn",args:t,result:r}}function ic(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=ic(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>ic(a)).join(", "),e=ic(t.result);return`@(${r}) { ${e} }`}}}function Qo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return ag(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Qo(t.inner):r=ag("any"),vx(t.name,[r])}}throw new ko(`Unknown type: '${ic(t)}'`)}else{const r=t.args.map(e=>Qo(e));return gx(r,Qo(t.result))}}function dx(t){switch(t.type){case"def":{t.varType!=null&&Qo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Qo(r.argType);t.retType!=null&&Qo(t.retType);break}}return t}function yx(t){for(const r of t)ct(r,dx);return t}function lc(t){const r=[],e=[];for(const a of t)if(a.type==="attr")e.push(a);else if(a.type==="def")a.attr==null&&(a.attr=[]),a.attr.push(...e),e.splice(0,e.length),a.expr.type==="fn"&&(a.expr.children=lc(a.expr.children)),r.push(a);else{if(e.length>0)throw new ko("invalid attribute.");switch(a.type){case"fn":{a.children=lc(a.children);break}case"block":{a.statements=lc(a.statements);break}}r.push(a)}if(e.length>0)throw new ko("invalid attribute.");return r}function wx(t){if(ux(t)&&Ld(t)&&t.chain!=null){const{chain:r,...e}=t;let a=e;for(const v of r)switch(v.type){case"callChain":{a=ox(a,v.args,v.loc);break}case"indexChain":{a=fx(a,v.index,v.loc);break}case"propChain":{a=cx(a,v.name,v.loc);break}}return a}return t}function mx(t){for(let r=0;r<t.length;r++)t[r]=ct(t[r],wx);return t}function uc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Hd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return uc(t,r,e);{const{left:a,right:v,info:d}=t;return uc(a,Hd(v,r,e),d)}}function io(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[io(t.left),io(t.right)]}}const $x={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:io(t.left),right:io(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:io(t.left),right:io(t.right)}),priority:3}};function xx(t){const r=t.operators.map(a=>{const v=$x[a];if(v==null)throw new ko(`No such operator: ${a}.`);return v});let e=uc(t.operands[0],t.operands[1],r[0]);for(let a=0;a<r.length-1;a++)e=Hd(e,t.operands[2+a],r[1+a]);return io(e)}function bx(t){for(let r=0;r<t.length;r++)t[r]=ct(t[r],e=>e.type==="infix"?xx(e):e);return t}var du;let Ax=(du=class{constructor(){ge(this,"plugins");this.plugins={validate:[px,yx],transform:[lc,mx,bx]}}static parse(r){return du.instance==null&&(du.instance=new du),du.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const a=ng(r,{startRule:"Preprocess"});e=ng(a,{startRule:"Main"})}catch(a){throw a.location?a.expected?new ko(`Parsing error. (Line ${a.location.start.line}:${a.location.start.column})`,a):new ko(`${a.message} (Line ${a.location.start.line}:${a.location.start.column})`,a):a}for(const a of this.plugins.validate)e=a(e);for(const a of this.plugins.transform)e=a(e);return e}},ge(du,"instance"),du);const Cx="develop",_x={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let np=[],bf=null;function kx(t){return np=Ax.parse(t),JSON.stringify(np,null,"	")}async function Px(t){bf==null||bf.abort(),bf=new Es({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:tp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:tp(e.val,!0),print:!1});break}}});try{await bf.exec(np)}catch(r){t.err(r)}}const Ex=Object.freeze(Object.defineProperty({__proto__:null,exec:Px,parse:kx,samples:_x,version:Cx},Symbol.toStringTag,{value:"Module"}));function Fr(t,r,e){let a=e.value;return{configurable:!0,get(){const v=a.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){a=v}}}let Zc=class Bd extends Error{constructor(e,a){super(e);ge(this,"name","AiScript");ge(this,"info");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,Bd)}},Mx=class extends Zc{constructor(e){super(e.message??`${e}`,e);ge(this,"name","Internal")}},Po=class extends Zc{constructor(e,a){super(e,a);ge(this,"name","Syntax")}},cr=class extends Zc{constructor(e,a){super(e,a);ge(this,"name","Runtime")}},ig=class extends cr{constructor(r,e){super(r,e)}};var Ju=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Cu=class Ud{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new Ud(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r).value;return this.log("read",{var:r,val:a}),a}throw new cr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new cr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new cr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new cr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ju([Fr],Cu.prototype,"log",null);Ju([Fr],Cu.prototype,"onUpdated",null);Ju([Fr],Cu.prototype,"createChildScope",null);Ju([Fr],Cu.prototype,"get",null);Ju([Fr],Cu.prototype,"exists",null);Ju([Fr],Cu.prototype,"getAll",null);Ju([Fr],Cu.prototype,"add",null);Ju([Fr],Cu.prototype,"assign",null);const Ht={type:"null"},wa={type:"bool",value:!0},En={type:"bool",value:!1},Ne=t=>({type:"num",value:t}),Kt=t=>({type:"str",value:t}),mo=t=>({type:"bool",value:t}),Fc=t=>({type:"obj",value:t}),jr=t=>({type:"arr",value:t}),Sx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),fe=t=>({type:"fn",native:t}),Fx=t=>({type:"return",value:t}),Nx=()=>({type:"break",value:null}),Ox=()=>({type:"continue",value:null}),Tx=t=>t.type==="return"?t.value:t,ap=(t,r)=>({type:"error",value:t,info:r});function Tn(t){if(t==null)throw new cr("Expect anything, but got nothing.")}function Gs(t){if(t==null)throw new cr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new cr(`Expect boolean, but got ${t.type}.`)}function Du(t){if(t==null)throw new cr("Expect function, but got nothing.");if(t.type!=="fn")throw new cr(`Expect function, but got ${t.type}.`)}function zr(t){if(t==null)throw new cr("Expect string, but got nothing.");if(t.type!=="str")throw new cr(`Expect string, but got ${t.type}.`)}function Pe(t){if(t==null)throw new cr("Expect number, but got nothing.");if(t.type!=="num")throw new cr(`Expect number, but got ${t.type}.`)}function si(t){if(t==null)throw new cr("Expect object, but got nothing.");if(t.type!=="obj")throw new cr(`Expect object, but got ${t.type}.`)}function Xo(t){if(t==null)throw new cr("Expect array, but got nothing.");if(t.type!=="arr")throw new cr(`Expect array, but got ${t.type}.`)}function yh(t){return t.type==="obj"}function lg(t){return t.type==="arr"}function ip(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function lp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>lp(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function up(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>up(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=up(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function op(t){if(t===null)return Ht;if(typeof t=="boolean")return mo(t);if(typeof t=="string")return Kt(t);if(typeof t=="number")return Ne(t);if(Array.isArray(t))return jr(t.map(r=>op(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,op(a));return Fc(r)}return Ht}function Yo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,a=>`\\${a}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const a=[];for(const v of t.value)a.push(Yo(v,!0,e));return"[ "+a.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const a=[];for(const[v,d]of t.value)a.push(`${v}: ${Yo(d,!0,e)}`);return"{ "+a.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Ix={version:"0.17.0"},jx=Ix.version,Rx=new TextEncoder,Dx=new TextDecoder,Lx={help:Kt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Kt(jx),"Core:ai":Kt("kawaii"),"Core:not":fe(([t])=>(Gs(t),t.value?En:wa)),"Core:eq":fe(([t,r])=>(Tn(t),Tn(r),ip(t,r)?wa:En)),"Core:neq":fe(([t,r])=>(Tn(t),Tn(r),ip(t,r)?En:wa)),"Core:and":fe(([t,r])=>(Gs(t),t.value?(Gs(r),r.value?wa:En):En)),"Core:or":fe(([t,r])=>(Gs(t),t.value?wa:(Gs(r),r.value?wa:En))),"Core:add":fe(([t,r])=>(Pe(t),Pe(r),Ne(t.value+r.value))),"Core:sub":fe(([t,r])=>(Pe(t),Pe(r),Ne(t.value-r.value))),"Core:mul":fe(([t,r])=>(Pe(t),Pe(r),Ne(t.value*r.value))),"Core:pow":fe(([t,r])=>{Pe(t),Pe(r);const e=t.value**r.value;if(isNaN(e))throw new cr("Invalid operation.");return Ne(e)}),"Core:div":fe(([t,r])=>{Pe(t),Pe(r);const e=t.value/r.value;if(isNaN(e))throw new cr("Invalid operation.");return Ne(e)}),"Core:mod":fe(([t,r])=>(Pe(t),Pe(r),Ne(t.value%r.value))),"Core:gt":fe(([t,r])=>(Pe(t),Pe(r),t.value>r.value?wa:En)),"Core:lt":fe(([t,r])=>(Pe(t),Pe(r),t.value<r.value?wa:En)),"Core:gteq":fe(([t,r])=>(Pe(t),Pe(r),t.value>=r.value?wa:En)),"Core:lteq":fe(([t,r])=>(Pe(t),Pe(r),t.value<=r.value?wa:En)),"Core:type":fe(([t])=>(Tn(t),Kt(t.type))),"Core:to_str":fe(([t])=>(Tn(t),Kt(Yo(t)))),"Core:range":fe(([t,r])=>(Pe(t),Pe(r),t.value<r.value?jr(Array.from({length:r.value-t.value+1},(e,a)=>Ne(a+t.value))):t.value>r.value?jr(Array.from({length:t.value-r.value+1},(e,a)=>Ne(t.value-a))):jr([t]))),"Core:sleep":fe(async([t])=>(Pe(t),await new Promise(r=>setTimeout(r,t.value)),Ht)),"Util:uuid":fe(()=>Kt(Wc())),"Json:stringify":fe(([t])=>(Tn(t),Kt(JSON.stringify(up(t))))),"Json:parse":fe(([t])=>{zr(t);try{return op(JSON.parse(t.value))}catch{return ap("not_json")}}),"Json:parsable":fe(([t])=>{zr(t);try{JSON.parse(t.value)}catch{return mo(!1)}return mo(!0)}),"Date:now":fe(()=>Ne(Date.now())),"Date:year":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":fe(([t])=>(t&&Pe(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":fe(([t])=>(zr(t),Ne(new Date(t.value).getTime()))),"Math:Infinity":Ne(1/0),"Math:E":Ne(Math.E),"Math:LN2":Ne(Math.LN2),"Math:LN10":Ne(Math.LN10),"Math:LOG2E":Ne(Math.LOG2E),"Math:LOG10E":Ne(Math.LOG10E),"Math:PI":Ne(Math.PI),"Math:SQRT1_2":Ne(Math.SQRT1_2),"Math:SQRT2":Ne(Math.SQRT2),"Math:abs":fe(([t])=>(Pe(t),Ne(Math.abs(t.value)))),"Math:acos":fe(([t])=>(Pe(t),Ne(Math.acos(t.value)))),"Math:acosh":fe(([t])=>(Pe(t),Ne(Math.acosh(t.value)))),"Math:asin":fe(([t])=>(Pe(t),Ne(Math.asin(t.value)))),"Math:asinh":fe(([t])=>(Pe(t),Ne(Math.asinh(t.value)))),"Math:atan":fe(([t])=>(Pe(t),Ne(Math.atan(t.value)))),"Math:atanh":fe(([t])=>(Pe(t),Ne(Math.atanh(t.value)))),"Math:atan2":fe(([t,r])=>(Pe(t),Pe(r),Ne(Math.atan2(t.value,r.value)))),"Math:cbrt":fe(([t])=>(Pe(t),Ne(Math.cbrt(t.value)))),"Math:ceil":fe(([t])=>(Pe(t),Ne(Math.ceil(t.value)))),"Math:clz32":fe(([t])=>(Pe(t),Ne(Math.clz32(t.value)))),"Math:cos":fe(([t])=>(Pe(t),Ne(Math.cos(t.value)))),"Math:cosh":fe(([t])=>(Pe(t),Ne(Math.cosh(t.value)))),"Math:exp":fe(([t])=>(Pe(t),Ne(Math.exp(t.value)))),"Math:expm1":fe(([t])=>(Pe(t),Ne(Math.expm1(t.value)))),"Math:floor":fe(([t])=>(Pe(t),Ne(Math.floor(t.value)))),"Math:fround":fe(([t])=>(Pe(t),Ne(Math.fround(t.value)))),"Math:hypot":fe(([t])=>{Xo(t);const r=[];for(const e of t.value)Pe(e),r.push(e.value);return Ne(Math.hypot(...r))}),"Math:imul":fe(([t,r])=>(Pe(t),Pe(r),Ne(Math.imul(t.value,r.value)))),"Math:log":fe(([t])=>(Pe(t),Ne(Math.log(t.value)))),"Math:log1p":fe(([t])=>(Pe(t),Ne(Math.log1p(t.value)))),"Math:log10":fe(([t])=>(Pe(t),Ne(Math.log10(t.value)))),"Math:log2":fe(([t])=>(Pe(t),Ne(Math.log2(t.value)))),"Math:max":fe(([t,r])=>(Pe(t),Pe(r),Ne(Math.max(t.value,r.value)))),"Math:min":fe(([t,r])=>(Pe(t),Pe(r),Ne(Math.min(t.value,r.value)))),"Math:pow":fe(([t,r])=>(Pe(t),Pe(r),Ne(Math.pow(t.value,r.value)))),"Math:round":fe(([t])=>(Pe(t),Ne(Math.round(t.value)))),"Math:sign":fe(([t])=>(Pe(t),Ne(Math.sign(t.value)))),"Math:sin":fe(([t])=>(Pe(t),Ne(Math.sin(t.value)))),"Math:sinh":fe(([t])=>(Pe(t),Ne(Math.sinh(t.value)))),"Math:sqrt":fe(([t])=>{Pe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new cr("Invalid operation.");return Ne(r)}),"Math:tan":fe(([t])=>(Pe(t),Ne(Math.tan(t.value)))),"Math:tanh":fe(([t])=>(Pe(t),Ne(Math.tanh(t.value)))),"Math:trunc":fe(([t])=>(Pe(t),Ne(Math.trunc(t.value)))),"Math:rnd":fe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ne(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ne(Math.random())),"Math:gen_rng":fe(([t])=>{if(Tn(t),t.type!=="num"&&t.type!=="str")return Ht;const r=df(t.value.toString());return fe(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?Ne(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ne(r()))}),"Num:to_hex":fe(([t])=>(Pe(t),Kt(t.value.toString(16)))),"Num:from_hex":fe(([t])=>(zr(t),Ne(parseInt(t.value,16)))),"Str:lf":Kt(`
`),"Str:lt":fe(([t,r])=>(zr(t),zr(r),t.value<r.value?Ne(-1):t.value===r.value?Ne(0):Ne(1))),"Str:gt":fe(([t,r])=>(zr(t),zr(r),t.value>r.value?Ne(-1):t.value===r.value?Ne(0):Ne(1))),"Str:from_codepoint":fe(([t])=>(Pe(t),Kt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":fe(([t])=>(Xo(t),Kt(Array.from(t.value.map(r=>(Pe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":fe(([t])=>(Xo(t),Kt(Dx.decode(Uint8Array.from(t.value.map(r=>(Pe(r),r.value))))))),"Obj:keys":fe(([t])=>(si(t),jr(Array.from(t.value.keys()).map(r=>Kt(r))))),"Obj:vals":fe(([t])=>(si(t),jr(Array.from(t.value.values())))),"Obj:kvs":fe(([t])=>(si(t),jr(Array.from(t.value.entries()).map(([r,e])=>jr([Kt(r),e]))))),"Obj:get":fe(([t,r])=>(si(t),zr(r),t.value.get(r.value)??Ht)),"Obj:set":fe(([t,r,e])=>(si(t),zr(r),Tn(e),t.value.set(r.value,e),Ht)),"Obj:has":fe(([t,r])=>(si(t),zr(r),mo(t.value.has(r.value)))),"Obj:copy":fe(([t])=>(si(t),Fc(new Map(t.value)))),"Obj:merge":fe(([t,r])=>(si(t),si(r),Fc(new Map([...t.value,...r.value])))),"Error:create":fe(([t,r])=>(zr(t),ap(t.value,r))),"Async:interval":fe(async([t,r,e],a)=>{Pe(t),Du(r),e&&(Gs(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),fe(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":fe(async([t,r],e)=>{Pe(t),Du(r);const a=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),fe(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})},ug={num:{to_str:t=>fe(async(r,e)=>Kt(t.value.toString()))},str:{to_num:t=>fe(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?Ht:Ne(a)}),to_arr:t=>fe(async(r,e)=>jr(Ys(t.value).map(a=>Kt(a)))),to_unicode_arr:t=>fe(async(r,e)=>jr([...t.value].map(a=>Kt(a)))),to_unicode_codepoint_arr:t=>fe(async(r,e)=>jr([...t.value].map(a=>{const v=a.codePointAt(0);return Ne(v??a.charCodeAt(0))}))),to_char_arr:t=>fe(async(r,e)=>jr(t.value.split("").map(a=>Kt(a)))),to_charcode_arr:t=>fe(async(r,e)=>jr(t.value.split("").map(a=>Ne(a.charCodeAt(0))))),to_utf8_byte_arr:t=>fe(async(r,e)=>jr(Array.from(Rx.encode(t.value)).map(a=>Ne(a)))),len:t=>Ne(yf(t.value)),replace:t=>fe(async([r,e],a)=>(zr(r),zr(e),Kt(t.value.split(r.value).join(e.value)))),index_of:t=>fe(async([r],e)=>(zr(r),Ne(mf(t.value,r.value)))),incl:t=>fe(async([r],e)=>(zr(r),t.value.includes(r.value)?wa:En)),trim:t=>fe(async(r,e)=>Kt(t.value.trim())),upper:t=>fe(async(r,e)=>Kt(t.value.toUpperCase())),lower:t=>fe(async(r,e)=>Kt(t.value.toLowerCase())),split:t=>fe(async([r],e)=>(r&&zr(r),jr(r?t.value.split(r?r.value:"").map(a=>Kt(a)):Ys(t.value).map(a=>Kt(a))))),slice:t=>fe(async([r,e],a)=>(Pe(r),Pe(e),Kt(wf(t.value,r.value,e.value)))),pick:t=>fe(async([r],e)=>{Pe(r);const v=Ys(t.value)[r.value];return v?Kt(v):Ht}),charcode_at:t=>fe(([r],e)=>{Pe(r);const a=t.value.charCodeAt(r.value);return Number.isNaN(a)?Ht:Ne(a)}),codepoint_at:t=>fe(([r],e)=>{Pe(r);const a=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(a)?Ht:Ne(a)})},arr:{len:t=>Ne(t.value.length),push:t=>fe(async([r],e)=>(Tn(r),t.value.push(r),t)),unshift:t=>fe(async([r],e)=>(Tn(r),t.value.unshift(r),t)),pop:t=>fe(async(r,e)=>t.value.pop()??Ht),shift:t=>fe(async(r,e)=>t.value.shift()??Ht),concat:t=>fe(async([r],e)=>(Xo(r),jr(t.value.concat(r.value)))),slice:t=>fe(async([r,e],a)=>(Pe(r),Pe(e),jr(t.value.slice(r.value,e.value)))),join:t=>fe(async([r],e)=>(r&&zr(r),Kt(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>fe(async([r],e)=>{Du(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,Ne(d)]));return jr(await Promise.all(a))}),filter:t=>fe(async([r],e)=>{Du(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,Ne(v)]);Gs(x),x.value&&a.push(d)}return jr(a)}),reduce:t=>fe(async([r,e],a)=>{Du(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,Ne(x)])}return d}),find:t=>fe(async([r],e)=>{Du(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,Ne(a)]);if(Gs(d),d.value)return v}return Ht}),incl:t=>fe(async([r],e)=>(Tn(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?En:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?wa:En)),reverse:t=>fe(async(r,e)=>(t.value.reverse(),Ht)),copy:t=>fe(async(r,e)=>jr([...t.value])),sort:t=>fe(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);Pe(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return Du(r),Xo(t),t.value=await a(t.value,r),t})},error:{name:t=>Kt(t.value),info:t=>t.info??Ht}};function Hx(t,r){if(Object.hasOwn(ug,t.type)){const e=ug[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new cr(`No such prop (${r}) in ${t.type}.`)}else throw new cr(`Cannot read prop of ${t.type}. (reading ${r})`)}const Bx={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var tn=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const qd=300,Ux=qd-1;let Ms=class{constructor(r,e={}){ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);ge(this,"vars",{});this.opts=e;const a={print:fe(([v])=>{Tn(v),this.opts.out&&this.opts.out(v)}),readline:fe(async v=>{const d=v[0];if(zr(d),this.opts.in==null)return Ht;const x=await this.opts.in(d.value);return Kt(x)})};this.vars=Object.fromEntries(Object.entries({...r,...Lx,...a}).map(([v,d])=>[v,Bx.const(d)])),this.scope=new Cu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(a=>(this.handleError(a),ap("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Zc?this.opts.err(r):this.opts.err(new Mx(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{if(a.mut)throw new Error("Namespaces cannot include mutable variable: "+a.name);const v={isMutable:a.mut,value:await this._eval(a.expr,e)};e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+a.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Ht;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(a);return Tx(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Ht;if(this.stepCount%qd===Ux&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new cr("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);Du(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Gs(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Gs(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Ht}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(ip(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Ht}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return Ht}case"for":{if(r.times){const a=await this._eval(r.times,e);Pe(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);Pe(a),Pe(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ne(d)}]])));if(x.type==="break")break;if(x.type==="return")return x}}return Ht}case"each":{const a=await this._eval(r.items,e);Xo(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return Ht}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,{isMutable:r.mut,value:a}),Ht}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),Ht}case"addAssign":{const a=await this._eval(r.dest,e);Pe(a);const v=await this._eval(r.expr,e);return Pe(v),await this.assign(e,r.dest,Ne(a.value+v.value)),Ht}case"subAssign":{const a=await this._eval(r.dest,e);Pe(a);const v=await this._eval(r.expr,e);return Pe(v),await this.assign(e,r.dest,Ne(a.value-v.value)),Ht}case"null":return Ht;case"bool":return mo(r.value);case"num":return Ne(r.value);case"str":return Kt(r.value);case"arr":return jr(await Promise.all(r.value.map(a=>this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return Fc(a)}case"prop":{const a=await this._eval(r.target,e);return yh(a)?a.value.has(r.name)?a.value.get(r.name):Ht:Hx(a,r.name)}case"index":{const a=await this._eval(r.target,e),v=await this._eval(r.index,e);if(lg(a)){Pe(v);const d=a.value[v.value];if(d===void 0)throw new ig(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}else{if(yh(a))return zr(v),a.value.has(v.value)?a.value.get(v.value):Ht;throw new cr(`Cannot read prop (${Yo(v)}) of ${a.type}.`)}}case"not":{const a=await this._eval(r.expr,e);return Gs(a),mo(!a.value)}case"fn":return Sx(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return mo(e.exists(r.identifier.name));case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);a+=Yo(d)}return Kt(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),Fx(a)}case"break":return this.log("block:break",{scope:e.name}),Nx();case"continue":return this.log("block:continue",{scope:e.name}),Ox();case"ns":return Ht;case"meta":return Ht;case"and":{const a=await this._eval(r.left,e);if(Gs(a),a.value){const v=await this._eval(r.right,e);return Gs(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Gs(a),a.value)return a;{const v=await this._eval(r.right,e);return Gs(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=Ht;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(lg(v)){if(Pe(d),v.value[d.value]===void 0)throw new ig(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=a}else if(yh(v))zr(d),v.value.set(d.value,a);else throw new cr(`Cannot read prop (${Yo(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);si(v),v.value.set(e.name,a)}else throw new cr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};tn([Fr],Ms.prototype,"exec",null);tn([Fr],Ms.prototype,"execFn",null);tn([Fr],Ms.prototype,"execFnSimple",null);tn([Fr],Ms.prototype,"handleError",null);tn([Fr],Ms.prototype,"log",null);tn([Fr],Ms.prototype,"collectNs",null);tn([Fr],Ms.prototype,"collectNsMember",null);tn([Fr],Ms.prototype,"_fn",null);tn([Fr],Ms.prototype,"_eval",null);tn([Fr],Ms.prototype,"_run",null);tn([Fr],Ms.prototype,"registerAbortHandler",null);tn([Fr],Ms.prototype,"unregisterAbortHandler",null);tn([Fr],Ms.prototype,"abort",null);tn([Fr],Ms.prototype,"assign",null);tn([Fr],Ms,"collectMetadata",null);function qx(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function $o(t,r,e,a){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,$o.prototype),v.expected=r,v.found=e,v.location=a,v.name="SyntaxError",v}qx($o,Error);function wh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}$o.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,a;for(a=0;a<t.length;a++)if(t[a].source===this.location.source){e=t[a].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,x=this.location.source+":"+d.line+":"+d.column;if(e){var k=this.location.end,E=wh("",d.line.toString().length," "),S=e[v.line-1],F=v.line===k.line?k.column:S.length+1,j=F-v.column||1;r+=`
 --> `+x+`
`+E+` |
`+d.line+" | "+S+`
`+E+" | "+wh("",v.column-1," ")+wh("",j,"^")}else r+=`
 at `+x}return r};$o.buildMessage=function(t,r){var e={literal:function(S){return'"'+v(S.text)+'"'},class:function(S){var F=S.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(S.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function a(S){return S.charCodeAt(0).toString(16).toUpperCase()}function v(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function d(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function x(S){return e[S.type](S)}function k(S){var F=S.map(x),j,L;if(F.sort(),F.length>0){for(j=1,L=1;j<F.length;j++)F[j-1]!==F[j]&&(F[L]=F[j],L++);F.length=L}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function E(S){return S?'"'+v(S)+'"':"end of input"}return"Expected "+k(t)+" but "+E(r)+" found."};function og(t,r){r=r!==void 0?r:{};var e={},a=r.grammarSource,v={Preprocess:na,Main:hs},d=na,x="//",k="/*",E="*/",S="(",F=")",j="::",L="{",K="}",he="###",re="let",ie=":",Ce="=",q="var",H="<:",z="#[",V="]",W="each",J=",",Y="for",te="return",Ae="loop",Ee="break",me="continue",Ge="+=",ut="-=",Yt="\\",ot="||",it="&&",Be="==",lt="!=",It="<=",Ut=">=",tt="<",Rr=">",er="+",Ar="-",Nt="*",$r="^",Vr="/",Or="%",Dr="!",jt="[",U=".",Z="if",ne="elif",pe="else",ve="match",le="=>",Oe="eval",$e="exists",xe="`",ce='"',Te="'",We='\\"',Ve="\\'",Je="true",Xe="false",rt="null",ft=";",Ot="@",qt="@(",Ft=`\r
`,kt=/^[A-Z0-9_:]/i,Fs=/^[^`{]/,rs=/^[{}`]/,Tt=/^[+\-]/,gt=/^[1-9]/,xt=/^[0-9]/,ka=/^[A-Z_]/i,Bn=/^[A-Z0-9_]/i,li=/^[\r\n]/,ui=/^[ \t\r\n]/,ir=/^[ \t]/,Pt=Bs(),oi=Q("//",!1),$n=Q("/*",!1),yr=Q("*/",!1),bt=Q("(",!1),Zt=Q(")",!1),lr=Q("::",!1),Qe=Q("{",!1),At=Q("}",!1),Wr=Q("###",!1),dt=Q("let",!1),st=Q(":",!1),Lr=Q("=",!1),fi=Q("var",!1),ci=Q("<:",!1),Ns=Q("#[",!1),Kr=Q("]",!1),Et=Q("each",!1),Ye=Q(",",!1),ss=Q("for",!1),wr=Q("return",!1),Rt=yt([["A","Z"],["0","9"],"_",":"],!1,!0),hi=Q("loop",!1),pi=Q("break",!1),vi=Q("continue",!1),gi=Q("+=",!1),Pa=Q("-=",!1),Un=Q("\\",!1),di=Q("||",!1),yi=Q("&&",!1),wi=Q("==",!1),mi=Q("!=",!1),$i=Q("<=",!1),Ea=Q(">=",!1),sn=Q("<",!1),qn=Q(">",!1),xi=Q("+",!1),Ma=Q("-",!1),zn=Q("*",!1),bi=Q("^",!1),Ai=Q("/",!1),Ci=Q("%",!1),xn=Q("!",!1),Xr=Q("[",!1),Os=Q(".",!1),_i=Q("if",!1),ki=Q("elif",!1),Pi=Q("else",!1),Ts=Q("match",!1),ns=Q("=>",!1),Is=Q("eval",!1),Ei=Q("exists",!1),as=Q("`",!1),js=yt(["`","{"],!0,!1),Rs=yt(["{","}","`"],!1,!1),is=Q('"',!1),ls=Q("'",!1),Ds=Q('\\"',!1),Sa=Q("\\'",!1),Mt=yt(["+","-"],!1,!1),Vn=yt([["1","9"]],!1,!1),St=yt([["0","9"]],!1,!1),Mi=Q("true",!1),Ls=Q("false",!1),Si=Q("null",!1),Gr=Q(";",!1),Fi=Q("@",!1),nn=Q("@(",!1),Ni=yt([["A","Z"],"_"],!1,!0),Wn=yt([["A","Z"],["0","9"],"_"],!1,!0),Oi=Q(`\r
`,!1),Ti=yt(["\r",`
`],!1,!1),Ii=yt([" ","	","\r",`
`],!1,!1),ji=yt([" ","	"],!1,!1),Ri=function(s){return s.join("")},Di=function(){return ee()},Li=function(){return ee()},Hi=function(){return""},Fa=function(){return""},Bi=function(s){return s??[]},an=function(s,l){return l},Ui=function(s,l){return[s,...l]},ln=function(s,l){return l},qi=function(s,l){return[s,...l]},Kn=function(s,l){return l},zi=function(s,l){return[s,...l]},Vi=function(s){return s},Wi=function(s,l){return g("ns",{name:s,members:l})},Ki=function(s,l){return g("meta",{name:s,value:l})},Gi=function(s){return g("meta",{name:null,value:s})},Ji=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!1,attr:[]})},Zi=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!0,attr:[]})},Qi=function(s){return g("identifier",{name:"print",chain:[g("callChain",{args:[s]})]})},Xi=function(s,l){return g("attr",{name:s,value:l??g("bool",{value:!0})})},Yi=function(s,l,h){return g("each",{var:s,items:l,for:h})},el=function(s,l,h){return g("each",{var:s,items:l,for:h})},tl=function(s,l){return l},rl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},sl=function(s,l){return l},nl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},al=function(s,l){return g("for",{times:s,for:l})},il=function(s,l){return g("for",{times:s,for:l})},ll=function(s){return g("return",{expr:s})},ul=function(s){return g("loop",{statements:s})},ol=function(){return g("break",{})},Na=function(){return g("continue",{})},fl=function(s,l,h){return l==="+="?g("addAssign",{dest:s,expr:h}):l==="-="?g("subAssign",{dest:s,expr:h}):g("assign",{dest:s,expr:h})},Gn=function(s,l,h){return{op:l,term:h}},cl=function(s,l){return g("infix",{operands:[s,...l.map(h=>h.term)],operators:l.map(h=>h.op)})},hl=function(){return ee()},pl=function(s){return g("not",{expr:s})},Oa=function(s,l){return s.chain?{...s,chain:[...s.chain,...l]}:{...s,chain:l}},vl=function(s){return g("callChain",{args:s??[]})},Jn=function(s,l){return l},gl=function(s,l){return[s,...l]},dl=function(s){return g("indexChain",{index:s})},yl=function(s){return g("propChain",{name:s})},wl=function(s,l,h,i){return g("if",{cond:s,then:l,elseif:h??[],else:i})},ml=function(s,l){return[s,...l]},Ta=function(s,l){return{cond:s,then:l}},$l=function(s){return s},Zn=function(s,l,h){return{q:l,a:h}},xl=function(s,l,h){return g("match",{about:s,qs:l??[],default:h})},bl=function(s){return g("block",{statements:s})},Al=function(s){return g("exists",{identifier:s})},Ia=function(s){return g("identifier",{name:s})},Cl=function(s){return g("tmpl",{tmpl:s})},ja=function(s){return s.join("")},Qn=function(s){return s},_l=function(s){return g("str",{value:s.join("")})},Xn=function(s){return s},kl=function(s){return g("str",{value:s.join("")})},Pl=function(){return'"'},El=function(){return"'"},Ml=function(){return g("num",{value:parseFloat(ee())})},Sl=function(){return g("num",{value:parseFloat(ee())})},Fl=function(){return g("num",{value:parseInt(ee(),10)})},Nl=function(){return g("num",{value:parseInt(ee(),10)})},Ra=function(){return g("bool",{value:!0})},Ol=function(){return g("bool",{value:!1})},Da=function(){return g("null",{})},Yn=function(s,l){return{k:s,v:l}},Tl=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},ea=function(s){return s},Il=function(s){return g("arr",{value:s})},jl=function(s,l){return{name:s,argType:l}},La=function(s,l){return[s,...l]},Rl=function(s,l,h,i,p,c){return(s.length>0||h.length>0)&&zl("Cannot use spaces before or after the function name."),g("def",{name:l,expr:g("fn",{args:i??[],retType:p},c??[]),mut:!1,attr:[]})},Ha=function(s,l,h){return g("fn",{args:s??[],retType:l},h??[])},ta=function(s){return s},Dl=function(s){return g("arr",{value:s})},ra=function(s,l){return{k:s,v:l}},Ll=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},Hl=function(s,l){return g("fnTypeSource",{args:s??[],result:l})},Bl=function(s,l){return[s,...l]},Ul=function(s,l){return g("namedTypeSource",{name:s,inner:l})},ql=function(s){return g("namedTypeSource",{name:s,inner:null})},u=function(){return ee()},G=function(){return ee()},Hs=function(s){return g("block",{statements:s??[]})},n=0,D=0,P=[{line:1,column:1}],I=0,Hr=[],$=0,M={},us;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function ee(){return t.substring(D,n)}function tr(){return os(D,n)}function zl(s,l){throw l=l!==void 0?l:os(D,n),Ba(s,l)}function Q(s,l){return{type:"literal",text:s,ignoreCase:l}}function yt(s,l,h){return{type:"class",parts:s,inverted:l,ignoreCase:h}}function Bs(){return{type:"any"}}function T(){return{type:"end"}}function sa(s){var l=P[s],h;if(l)return l;for(h=s-1;!P[h];)h--;for(l=P[h],l={line:l.line,column:l.column};h<s;)t.charCodeAt(h)===10?(l.line++,l.column=1):l.column++,h++;return P[s]=l,l}function os(s,l,h){var i=sa(s),p=sa(l),c={source:a,start:{offset:s,line:i.line,column:i.column},end:{offset:l,line:p.line,column:p.column}};return h&&a&&typeof a.offset=="function"&&(c.start=a.offset(c.start),c.end=a.offset(c.end)),c}function C(s){n<I||(n>I&&(I=n,Hr=[]),Hr.push(s))}function Ba(s,l){return new $o(s,null,null,l)}function Vl(s,l,h){return new $o($o.buildMessage(s,l),s,l,h)}function na(){var s,l,h,i=n*77+0,p=M[i];if(p)return n=p.nextPos,p.result;for(s=n,l=[],h=aa();h!==e;)l.push(h),h=aa();return D=s,l=Ri(l),s=l,M[i]={nextPos:n,result:s},s}function aa(){var s,l,h=n*77+1,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=ms(),l!==e&&(D=s,l=Di()),s=l,s===e&&(s=n,l=qs(),l!==e&&(D=s,l=Li()),s=l,s===e&&(s=Wl(),s===e&&(t.length>n?(s=t.charAt(n),n++):(s=e,$===0&&C(Pt))))),M[h]={nextPos:n,result:s},s)}function Wl(){var s,l,h,i,p,c,m=n*77+2,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,2)===x?(l=x,n+=2):(l=e,$===0&&C(oi)),l!==e){for(h=[],i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=Hi()}else n=s,s=e;if(s===e)if(s=n,t.substr(n,2)===k?(l=k,n+=2):(l=e,$===0&&C($n)),l!==e){for(h=[],i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);t.substr(n,2)===E?(i=E,n+=2):(i=e,$===0&&C(yr)),i!==e?(D=s,s=Fa()):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function hs(){var s,l,h,i,p,c=n*77+3,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();for(h=bn(),h===e&&(h=null),i=[],p=f();p!==e;)i.push(p),p=f();return D=s,s=Bi(h),M[c]={nextPos:n,result:s},s}function bn(){var s,l,h,i,p,c,m,y,b=n*77+4,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Ue(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=Ui(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function An(){var s,l,h,i,p,c,m,y,b=n*77+5,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Br(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=qi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function rr(){var s,l,h,i,p,c,m,y,b=n*77+6,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Cr(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=zi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Ue(){var s,l=n*77+7,h=M[l];return h?(n=h.nextPos,h.result):(s=la(),s===e&&(s=Kl(),s===e&&(s=Cr())),M[l]={nextPos:n,result:s},s)}function Br(){var s,l=n*77+8,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=la())),M[l]={nextPos:n,result:s},s)}function Cr(){var s,l=n*77+9,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=Gl(),s===e&&(s=Xl(),s===e&&(s=Jl(),s===e&&(s=Zl(),s===e&&(s=Ql(),s===e&&(s=Yl(),s===e&&(s=eu(),s===e&&(s=_r(),s===e&&(s=Ua(),s===e&&(s=ye()))))))))))),M[l]={nextPos:n,result:s},s)}function ye(){var s,l=n*77+10,h=M[l];return h?(n=h.nextPos,h.result):(s=tu(),s===e&&(s=Jr()),M[l]={nextPos:n,result:s},s)}function Jr(){var s,l=n*77+11,h=M[l];return h?(n=h.nextPos,h.result):(s=nu(),s===e&&(s=fu(),s===e&&(s=qa(),s===e&&(s=ia()))),M[l]={nextPos:n,result:s},s)}function ia(){var s,l,h,i,p,c,m=n*77+12,y=M[m];if(y)return n=y.nextPos,y.result;if(s=za(),s===e&&(s=Va(),s===e&&(s=Wa(),s===e&&(s=ms(),s===e&&(s=qs(),s===e&&(s=ha(),s===e&&(s=pa(),s===e&&(s=pn(),s===e&&(s=Ja(),s===e&&(s=ou(),s===e&&(s=ru(),s===e&&(s=fa(),s===e))))))))))))if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=Vi(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function sr(){var s,l=n*77+13,h=M[l];return h?(n=h.nextPos,h.result):(s=ha(),s===e&&(s=qs(),s===e&&(s=pa(),s===e&&(s=cu(),s===e&&(s=hu(),s===e&&(s=pn()))))),M[l]={nextPos:n,result:s},s)}function la(){var s,l,h,i,p,c,m,y,b,A,N=n*77+14,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===j?(l=j,n+=2):(l=e,$===0&&C(lr)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(t.charCodeAt(n)===123?(c=L,n++):(c=e,$===0&&C(Qe)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=An(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();t.charCodeAt(n)===125?(A=K,n++):(A=e,$===0&&C(At)),A!==e?(D=s,s=Wi(i,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Kl(){var s,l,h,i,p,c,m=n*77+15,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=sr(),c!==e?(D=s,s=Ki(i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();i=sr(),i!==e?(D=s,s=Gi(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ua(){var s,l,h,i,p,c,m,y,b,A=n*77+16,N=M[A];if(N)return n=N.nextPos,N.result;if(s=n,t.substr(n,3)===re?(l=re,n+=3):(l=e,$===0&&C(dt)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Ji(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===q?(l=q,n+=3):(l=e,$===0&&C(fi)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Zi(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[A]={nextPos:n,result:s},s}function Gl(){var s,l,h,i,p=n*77+17,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,2)===H?(l=H,n+=2):(l=e,$===0&&C(ci)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();i=ye(),i!==e?(D=s,s=Qi(i)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Jl(){var s,l,h,i,p,c,m,y=n*77+18,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,2)===z?(l=z,n+=2):(l=e,$===0&&C(Ns)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();for(m=sr(),m!==e?p=m:(n=p,p=e),p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();t.charCodeAt(n)===93?(m=V,n++):(m=e,$===0&&C(Kr)),m!==e?(D=s,s=Xi(i,p)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function Zl(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+19,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();for(t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e)if(t.charCodeAt(n)===41?(O=F,n++):(O=e,$===0&&C(Zt)),O!==e){for(B=[],se=f();se!==e;)B.push(se),se=f();se=be(),se!==e?(D=s,s=Yi(m,N,se)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(A=ye(),A!==e){if(N=[],O=f(),O!==e)for(;O!==e;)N.push(O),O=f();else N=e;N!==e?(O=be(),O!==e?(D=s,s=el(c,A,O)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function Ql(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe=n*77+20,ze=M[qe];if(ze)return n=ze.nextPos,ze.result;if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=n,t.charCodeAt(n)===61?(A=Ce,n++):(A=e,$===0&&C(Lr)),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();O=ye(),O!==e?(D=b,b=tl(m,O)):(n=b,b=e)}else n=b,b=e;for(b===e&&(b=null),t.charCodeAt(n)===44?(A=J,n++):(A=e,$===0&&C(Ye)),A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();if(O=ye(),O!==e)if(t.charCodeAt(n)===41?(B=F,n++):(B=e,$===0&&C(Zt)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=be(),X!==e?(D=s,s=rl(m,b,O,X)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(y=n,t.charCodeAt(n)===61?(b=Ce,n++):(b=e,$===0&&C(Lr)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=ye(),N!==e?(D=y,y=sl(c,N)):(n=y,y=e)}else n=y,y=e;for(y===e&&(y=null),t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e){if(O=[],B=f(),B!==e)for(;B!==e;)O.push(B),B=f();else O=e;O!==e?(B=be(),B!==e?(D=s,s=nl(c,y,N,B)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(p=ye(),p!==e)if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=be(),y!==e?(D=s,s=al(p,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;p!==e?(c=be(),c!==e?(D=s,s=il(i,c)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e}}return M[qe]={nextPos:n,result:s},s}function Xl(){var s,l,h,i,p,c=n*77+21,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,6)===te?(l=te,n+=6):(l=e,$===0&&C(wr)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=ye(),p!==e?(D=s,s=ll(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function Yl(){var s,l,h,i,p,c,m,y,b=n*77+22,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Ae?(l=Ae,n+=4):(l=e,$===0&&C(hi)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=ul(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function eu(){var s,l,h,i,p=n*77+23,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Ee?(l=Ee,n+=5):(l=e,$===0&&C(pi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function _r(){var s,l,h,i,p=n*77+24,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,8)===me?(l=me,n+=8):(l=e,$===0&&C(vi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Na()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ua(){var s,l,h,i,p,c,m=n*77+25,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.substr(n,2)===Ge?(i=Ge,n+=2):(i=e,$===0&&C(gi)),i===e&&(t.substr(n,2)===ut?(i=ut,n+=2):(i=e,$===0&&C(Pa)),i===e&&(t.charCodeAt(n)===61?(i=Ce,n++):(i=e,$===0&&C(Lr)))),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=ye(),c!==e?(D=s,s=fl(l,i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function tu(){var s,l,h,i,p,c,m,y,b=n*77+26,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Jr(),l!==e){for(h=[],i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e;if(i!==e)for(;i!==e;){for(h.push(i),i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e}else h=e;h!==e?(D=s,s=cl(l,h)):(n=s,s=e)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Qt(){var s,l,h,i=n*77+27,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(h=ae(),h!==e?(l=[l,h],s=l):(n=s,s=e)):(n=s,s=e),s===e&&(s=w()),M[i]={nextPos:n,result:s},s)}function un(){var s,l,h=n*77+28,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===ot?(l=ot,n+=2):(l=e,$===0&&C(di)),l===e&&(t.substr(n,2)===it?(l=it,n+=2):(l=e,$===0&&C(yi)),l===e&&(t.substr(n,2)===Be?(l=Be,n+=2):(l=e,$===0&&C(wi)),l===e&&(t.substr(n,2)===lt?(l=lt,n+=2):(l=e,$===0&&C(mi)),l===e&&(t.substr(n,2)===It?(l=It,n+=2):(l=e,$===0&&C($i)),l===e&&(t.substr(n,2)===Ut?(l=Ut,n+=2):(l=e,$===0&&C(Ea)),l===e&&(t.charCodeAt(n)===60?(l=tt,n++):(l=e,$===0&&C(sn)),l===e&&(t.charCodeAt(n)===62?(l=Rr,n++):(l=e,$===0&&C(qn)),l===e&&(t.charCodeAt(n)===43?(l=er,n++):(l=e,$===0&&C(xi)),l===e&&(t.charCodeAt(n)===45?(l=Ar,n++):(l=e,$===0&&C(Ma)),l===e&&(t.charCodeAt(n)===42?(l=Nt,n++):(l=e,$===0&&C(zn)),l===e&&(t.charCodeAt(n)===94?(l=$r,n++):(l=e,$===0&&C(bi)),l===e&&(t.charCodeAt(n)===47?(l=Vr,n++):(l=e,$===0&&C(Ai)),l===e&&(t.charCodeAt(n)===37?(l=Or,n++):(l=e,$===0&&C(Ci))))))))))))))),l!==e&&(D=s,l=hl()),s=l,M[h]={nextPos:n,result:s},s)}function ru(){var s,l,h,i=n*77+29,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===33?(l=Dr,n++):(l=e,$===0&&C(xn)),l!==e?(h=ye(),h!==e?(D=s,s=pl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qa(){var s,l,h,i,p=n*77+30,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,l=ia(),l!==e){if(h=[],i=on(),i===e&&(i=oa(),i===e&&(i=ws())),i!==e)for(;i!==e;)h.push(i),i=on(),i===e&&(i=oa(),i===e&&(i=ws()));else h=e;h!==e?(D=s,s=Oa(l,h)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function on(){var s,l,h,i,p,c,m=n*77+31,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=su(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=vl(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function su(){var s,l,h,i,p,c,m=n*77+32,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);D=s,s=gl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function oa(){var s,l,h,i,p,c,m=n*77+33,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=dl(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ws(){var s,l,h,i=n*77+34,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===46?(l=U,n++):(l=e,$===0&&C(Os)),l!==e?(h=De(),h!==e?(D=s,s=yl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function nu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+35,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===Z?(l=Z,n+=2):(l=e,$===0&&C(_i)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=be(),c!==e){if(m=n,y=[],b=f(),b!==e)for(;b!==e;)y.push(b),b=f();else y=e;if(y!==e?(b=au(),b!==e?m=b:(n=m,m=e)):(n=m,m=e),m===e&&(m=null),y=n,b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;b!==e?(A=iu(),A!==e?y=A:(n=y,y=e)):(n=y,y=e),y===e&&(y=null),D=s,s=wl(i,c,m,y)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function au(){var s,l,h,i,p,c,m=n*77+36,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=Us(),l!==e){for(h=[],i=n,p=[],c=f();c!==e;)p.push(c),c=f();for(c=Us(),c!==e?i=c:(n=i,i=e);i!==e;){for(h.push(i),i=n,p=[],c=f();c!==e;)p.push(c),c=f();c=Us(),c!==e?i=c:(n=i,i=e)}D=s,s=ml(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Us(){var s,l,h,i,p,c,m,y=n*77+37,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,4)===ne?(l=ne,n+=4):(l=e,$===0&&C(ki)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=be(),m!==e?(D=s,s=Ta(p,m)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[y]={nextPos:n,result:s},s}function iu(){var s,l,h,i,p,c=n*77+38,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,4)===pe?(l=pe,n+=4):(l=e,$===0&&C(Pi)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=be(),p!==e?(D=s,s=$l(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function za(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+39,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.substr(n,5)===ve?(l=ve,n+=5):(l=e,$===0&&C(Ts)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===123?(m=L,n++):(m=e,$===0&&C(Qe)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=[],A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;if(A!==e)for(;A!==e;)if(b.push(A),A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;else b=e;if(b!==e){if(A=n,t.charCodeAt(n)===42?(N=Nt,n++):(N=e,$===0&&C(zn)),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();A=X}else n=A,A=e}else n=A,A=e}else n=A,A=e;for(A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();t.charCodeAt(n)===125?(O=K,n++):(O=e,$===0&&C(At)),O!==e?(D=s,s=xl(p,b,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function Va(){var s,l,h,i,p,c,m,y,b=n*77+40,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Oe?(l=Oe,n+=4):(l=e,$===0&&C(Is)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=bl(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Wa(){var s,l,h,i,p=n*77+41,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,6)===$e?(l=$e,n+=6):(l=e,$===0&&C(Ei)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;h!==e?(i=fa(),i!==e?(D=s,s=Al(i)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function fa(){var s,l,h=n*77+42,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=Za(),l!==e&&(D=s,l=Ia(l)),s=l,M[h]={nextPos:n,result:s},s)}function ms(){var s,l,h,i,p,c,m=n*77+43,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===96?(l=xe,n++):(l=e,$===0&&C(as)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===96?(i=xe,n++):(i=e,$===0&&C(as)),i!==e?(D=s,s=Cl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function fn(){var s,l,h,i,p,c,m=n*77+44,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=ye(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?s=i:(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,l=[],h=cn(),h!==e)for(;h!==e;)l.push(h),h=cn();else l=e;l!==e&&(D=s,l=ja(l)),s=l}return M[m]={nextPos:n,result:s},s}function cn(){var s,l=n*77+45,h=M[l];return h?(n=h.nextPos,h.result):(s=Ka(),s===e&&(Fs.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(js))),M[l]={nextPos:n,result:s},s)}function Ka(){var s,l,h,i=n*77+46,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(rs.test(t.charAt(n))?(h=t.charAt(n),n++):(h=e,$===0&&C(Rs)),h!==e?s=h:(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qs(){var s,l,h,i,p,c,m=n*77+47,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===34?(l=ce,n++):(l=e,$===0&&C(is)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===34?(i=ce,n++):(i=e,$===0&&C(is)),i!==e?(D=s,s=_l(h)):(n=s,s=e)}else n=s,s=e;if(s===e)if(s=n,t.charCodeAt(n)===39?(l=Te,n++):(l=e,$===0&&C(ls)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===39?(i=Te,n++):(i=e,$===0&&C(ls)),i!==e?(D=s,s=kl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ca(){var s,l,h=n*77+48,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===We?(l=We,n+=2):(l=e,$===0&&C(Ds)),l!==e&&(D=s,l=Pl()),s=l,M[h]={nextPos:n,result:s},s)}function hn(){var s,l,h=n*77+49,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===Ve?(l=Ve,n+=2):(l=e,$===0&&C(Sa)),l!==e&&(D=s,l=El()),s=l,M[h]={nextPos:n,result:s},s)}function ha(){var s,l=n*77+50,h=M[l];return h?(n=h.nextPos,h.result):(s=lu(),s===e&&(s=Ga()),M[l]={nextPos:n,result:s},s)}function lu(){var s,l,h,i,p,c,m=n*77+51,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;if(h!==e)if(t.charCodeAt(n)===46?(i=U,n++):(i=e,$===0&&C(Os)),i!==e){if(p=[],xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St)),c!==e)for(;c!==e;)p.push(c),xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St));else p=e;p!==e?(D=s,s=Ml()):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e)if(t.charCodeAt(n)===46?(h=U,n++):(h=e,$===0&&C(Os)),h!==e){if(i=[],xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St)),p!==e)for(;p!==e;)i.push(p),xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St));else i=e;i!==e?(D=s,s=Sl()):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Ga(){var s,l,h,i,p=n*77+52,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;h!==e?(D=s,s=Fl()):(n=s,s=e)}else n=s,s=e;return s===e&&(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e?(D=s,s=Nl()):(n=s,s=e)),M[p]={nextPos:n,result:s},s}function pa(){var s,l=n*77+53,h=M[l];return h?(n=h.nextPos,h.result):(s=uu(),s===e&&(s=Cn()),M[l]={nextPos:n,result:s},s)}function uu(){var s,l,h,i,p=n*77+54,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===Je?(l=Je,n+=4):(l=e,$===0&&C(Mi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ra()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Cn(){var s,l,h,i,p=n*77+55,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Xe?(l=Xe,n+=5):(l=e,$===0&&C(Ls)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function pn(){var s,l,h,i,p=n*77+56,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===rt?(l=rt,n+=4):(l=e,$===0&&C(Si)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Da()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ja(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+57,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Tl(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function ou(){var s,l,h,i,p,c,m,y,b,A,N=n*77+58,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Il(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function zs(){var s,l,h,i,p,c,m,y=n*77+59,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,l=De(),l!==e){for(h=n,i=[],p=f();p!==e;)i.push(p),p=f();if(t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=He(),m!==e?h=m:(n=h,h=e)}else n=h,h=e;h===e&&(h=null),D=s,s=jl(l,h)}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function va(){var s,l,h,i,p,c,m=n*77+60,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=zs(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=La(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Xt(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+61,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.charCodeAt(n)===64?(l=Ot,n++):(l=e,$===0&&C(Fi)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(t.charCodeAt(n)===40?(c=S,n++):(c=e,$===0&&C(bt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=va(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(t.charCodeAt(n)===41?(A=F,n++):(A=e,$===0&&C(Zt)),A!==e){for(N=n,O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===58?(B=ie,n++):(B=e,$===0&&C(st)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=He(),X!==e?N=X:(n=N,N=e)}else n=N,N=e;for(N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===123?(B=L,n++):(B=e,$===0&&C(Qe)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();for(X=rr(),X===e&&(X=null),qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();t.charCodeAt(n)===125?(ze=K,n++):(ze=e,$===0&&C(At)),ze!==e?(D=s,s=Rl(h,i,p,y,N,X)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function fu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se=n*77+62,X=M[se];if(X)return n=X.nextPos,X.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=va(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=n,y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===58?(b=ie,n++):(b=e,$===0&&C(st)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=He(),N!==e?m=N:(n=m,m=e)}else n=m,m=e;for(m===e&&(m=null),y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===123?(b=L,n++):(b=e,$===0&&C(Qe)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();for(N=rr(),N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();t.charCodeAt(n)===125?(B=K,n++):(B=e,$===0&&C(At)),B!==e?(D=s,s=Ha(i,m,N)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[se]={nextPos:n,result:s},s}function cu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+63,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Dl(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function hu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+64,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Ll(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function He(){var s,l=n*77+65,h=M[l];return h?(n=h.nextPos,h.result):(s=pu(),s===e&&(s=Jt()),M[l]={nextPos:n,result:s},s)}function pu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+66,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=Yr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.substr(n,2)===le?(y=le,n+=2):(y=e,$===0&&C(ns)),y!==e){for(b=[],A=f();A!==e;)b.push(A),A=f();A=He(),A!==e?(D=s,s=Hl(i,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Yr(){var s,l,h,i,p,c,m=n*77+67,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=He(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=Bl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Jt(){var s,l,h,i,p,c,m,y,b=n*77+68,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=De(),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(t.charCodeAt(n)===60?(i=tt,n++):(i=e,$===0&&C(sn)),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(c=He(),c!==e){for(m=[],y=w();y!==e;)m.push(y),y=w();t.charCodeAt(n)===62?(y=Rr,n++):(y=e,$===0&&C(qn)),y!==e?(D=s,s=Ul(l,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return s===e&&(s=n,l=De(),l!==e&&(D=s,l=ql(l)),s=l),M[b]={nextPos:n,result:s},s}function De(){var s,l,h,i,p=n*77+69,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,ka.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Ni)),l!==e){for(h=[],Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));i!==e;)h.push(i),Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));D=s,s=u()}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Za(){var s,l,h,i,p,c,m=n*77+70,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=De(),l!==e){for(h=[],i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=G()}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function _(){var s,l,h,i,p,c=n*77+71,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();if(t.charCodeAt(n)===44?(h=J,n++):(h=e,$===0&&C(Ye)),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();l=[l,h,i],s=l}else n=s,s=e;if(s===e)if(s=[],l=f(),l!==e)for(;l!==e;)s.push(l),l=f();else s=e;return M[c]={nextPos:n,result:s},s}function be(){var s,l,h,i,p,c,m=n*77+72,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=rr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?(D=s,s=Hs(i)):(n=s,s=e)}else n=s,s=e;return s===e&&(s=Cr()),M[m]={nextPos:n,result:s},s}function ae(){var s,l=n*77+73,h=M[l];return h?(n=h.nextPos,h.result):(t.substr(n,2)===Ft?(s=Ft,n+=2):(s=e,$===0&&C(Oi)),s===e&&(li.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ti))),M[l]={nextPos:n,result:s},s)}function o(){var s,l,h=n*77+74,i=M[h];return i?(n=i.nextPos,i.result):(s=n,$++,t.length>n?(l=t.charAt(n),n++):(l=e,$===0&&C(Pt)),$--,l===e?s=void 0:(n=s,s=e),s===e&&(s=ae()),M[h]={nextPos:n,result:s},s)}function f(){var s,l=n*77+75,h=M[l];return h?(n=h.nextPos,h.result):(ui.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ii)),M[l]={nextPos:n,result:s},s)}function w(){var s,l=n*77+76,h=M[l];return h?(n=h.nextPos,h.result):(ir.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(ji)),M[l]={nextPos:n,result:s},s)}function g(s,l,h){const i={type:s};l.children=h;for(const c of Object.keys(l))l[c]!==void 0&&(i[c]=l[c]);const p=tr();return i.loc={start:p.start.offset,end:p.end.offset-1},i}if(us=d(),us!==e&&n===t.length)return us;throw us!==e&&n<t.length&&C(T()),Vl(Hr,I<t.length?t.charAt(I):null,I<t.length?os(I,I+1):os(I,I))}const zx=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function Vx(t){return zx.includes(t.type)}function zd(t){return"chain"in t&&t.chain!==null}function Wx(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Kx(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Gx(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function ht(t,r){const e=r(t);switch(e.type){case"def":{e.expr=ht(e.expr,r);break}case"return":{e.expr=ht(e.expr,r);break}case"each":{e.items=ht(e.items,r),e.for=ht(e.for,r);break}case"for":{e.from!=null&&(e.from=ht(e.from,r)),e.to!=null&&(e.to=ht(e.to,r)),e.times!=null&&(e.times=ht(e.times,r)),e.for=ht(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=ht(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=ht(e.expr,r),e.dest=ht(e.dest,r);break}case"infix":{for(let a=0;a<e.operands.length;a++)e.operands[a]=ht(e.operands[a],r);break}case"not":{e.expr=ht(e.expr,r);break}case"if":{e.cond=ht(e.cond,r),e.then=ht(e.then,r);for(const a of e.elseif)a.cond=ht(a.cond,r),a.then=ht(a.then,r);e.else!=null&&(e.else=ht(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=ht(e.children[a],r);break}case"match":{e.about=ht(e.about,r);for(const a of e.qs)a.q=ht(a.q,r),a.a=ht(a.a,r);e.default!=null&&(e.default=ht(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=ht(e.statements[a],r);break}case"exists":{e.identifier=ht(e.identifier,r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=ht(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],ht(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=ht(e.value[a],r);break}case"callChain":{for(let a=0;a<e.args.length;a++)e.args[a]=ht(e.args[a],r);break}case"indexChain":{e.index=ht(e.index,r);break}case"call":{e.target=ht(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=ht(e.args[a],r);break}case"index":{e.target=ht(e.target,r),e.index=ht(e.index,r);break}case"prop":{e.target=ht(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=ht(e.members[a],r);break}case"or":case"and":{e.left=ht(e.left,r),e.right=ht(e.right,r);break}}if(zd(e)&&e.chain!=null)for(let a=0;a<e.chain.length;a++)e.chain[a]=ht(e.chain[a],r);return e}const mh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function $h(t){throw new Po(`Reserved word "${t}" cannot be used as variable name.`)}function Jx(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{mh.includes(t.name)&&$h(t.name);break}case"meta":{t.name!=null&&mh.includes(t.name)&&$h(t.name);break}case"fn":{for(const r of t.args)mh.includes(r.name)&&$h(r.name);break}}return t}function Zx(t){for(const r of t)ht(r,Jx);return t}function fg(t){return{type:"simple",name:t}}function Qx(t,r){return{type:"generic",name:t,inners:r}}function Xx(t,r){return{type:"fn",args:t,result:r}}function oc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=oc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>oc(a)).join(", "),e=oc(t.result);return`@(${r}) { ${e} }`}}}function ef(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return fg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=ef(t.inner):r=fg("any"),Qx(t.name,[r])}}throw new Po(`Unknown type: '${oc(t)}'`)}else{const r=t.args.map(e=>ef(e));return Xx(r,ef(t.result))}}function Yx(t){switch(t.type){case"def":{t.varType!=null&&ef(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&ef(r.argType);t.retType!=null&&ef(t.retType);break}}return t}function eb(t){for(const r of t)ht(r,Yx);return t}function fc(t){const r=[],e=[];for(const a of t)if(a.type==="attr")e.push(a);else if(a.type==="def")a.attr==null&&(a.attr=[]),a.attr.push(...e),e.splice(0,e.length),a.expr.type==="fn"&&(a.expr.children=fc(a.expr.children)),r.push(a);else{if(e.length>0)throw new Po("invalid attribute.");switch(a.type){case"fn":{a.children=fc(a.children);break}case"block":{a.statements=fc(a.statements);break}}r.push(a)}if(e.length>0)throw new Po("invalid attribute.");return r}function tb(t){if(Vx(t)&&zd(t)&&t.chain!=null){const{chain:r,...e}=t;let a=e;for(const v of r)switch(v.type){case"callChain":{a=Wx(a,v.args,v.loc);break}case"indexChain":{a=Kx(a,v.index,v.loc);break}case"propChain":{a=Gx(a,v.name,v.loc);break}}return a}return t}function rb(t){for(let r=0;r<t.length;r++)t[r]=ht(t[r],tb);return t}function cc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return cc(t,r,e);{const{left:a,right:v,info:d}=t;return cc(a,Vd(v,r,e),d)}}function lo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[lo(t.left),lo(t.right)]}}const sb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:lo(t.left),right:lo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:lo(t.left),right:lo(t.right)}),priority:3}};function nb(t){const r=t.operators.map(a=>{const v=sb[a];if(v==null)throw new Po(`No such operator: ${a}.`);return v});let e=cc(t.operands[0],t.operands[1],r[0]);for(let a=0;a<r.length-1;a++)e=Vd(e,t.operands[2+a],r[1+a]);return lo(e)}function ab(t){for(let r=0;r<t.length;r++)t[r]=ht(t[r],e=>e.type==="infix"?nb(e):e);return t}var yu;let ib=(yu=class{constructor(){ge(this,"plugins");this.plugins={validate:[Zx,eb],transform:[fc,rb,ab]}}static parse(r){return yu.instance==null&&(yu.instance=new yu),yu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const a=og(r,{startRule:"Preprocess"});e=og(a,{startRule:"Main"})}catch(a){throw a.location?a.expected?new Po(`Parsing error. (Line ${a.location.start.line}:${a.location.start.column})`,a):new Po(`${a.message} (Line ${a.location.start.line}:${a.location.start.column})`,a):a}for(const a of this.plugins.validate)e=a(e);for(const a of this.plugins.transform)e=a(e);return e}},ge(yu,"instance"),yu);const lb="0.17.0",ub={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let fp=[],Af=null;function ob(t){return fp=ib.parse(t),JSON.stringify(fp,null,"	")}async function fb(t){Af==null||Af.abort(),Af=new Ms({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:lp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:lp(e.val,!0),print:!1});break}}});try{await Af.exec(fp)}catch(r){t.err(r)}}const cb=Object.freeze(Object.defineProperty({__proto__:null,exec:fb,parse:ob,samples:ub,version:lb},Symbol.toStringTag,{value:"Module"}));function Nr(t,r,e){let a=e.value;return{configurable:!0,get(){const v=a.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){a=v}}}let Qc=class Wd extends Error{constructor(e,a){super(e);ge(this,"info");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,Wd)}};class hb extends Qc{constructor(r){super(`Internal Error. ${r}`,r)}}class Eo extends Qc{constructor(r,e){super(r,e)}}class hr extends Qc{constructor(r,e){super(r,e)}}class pb extends hr{constructor(r,e){super(r,e)}}var Zu=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let _u=class Kd{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new Kd(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r).value;return this.log("read",{var:r,val:a}),a}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new hr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new hr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new hr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Zu([Nr],_u.prototype,"log",null);Zu([Nr],_u.prototype,"onUpdated",null);Zu([Nr],_u.prototype,"createChildScope",null);Zu([Nr],_u.prototype,"get",null);Zu([Nr],_u.prototype,"exists",null);Zu([Nr],_u.prototype,"getAll",null);Zu([Nr],_u.prototype,"add",null);Zu([Nr],_u.prototype,"assign",null);const zt={type:"null"},ma={type:"bool",value:!0},Mn={type:"bool",value:!1},Re=t=>({type:"num",value:t}),ur=t=>({type:"str",value:t}),xo=t=>({type:"bool",value:t}),rv=t=>({type:"obj",value:t}),$s=t=>({type:"arr",value:t}),vb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),de=t=>({type:"fn",native:t}),gb=t=>({type:"return",value:t}),db=()=>({type:"break",value:null}),yb=()=>({type:"continue",value:null}),wb=t=>t.type==="return"?t.value:t,Gd=(t,r)=>({type:"error",value:t,info:r});function In(t){if(t==null)throw new hr("Expect anything, but got nothing.")}function Js(t){if(t==null)throw new hr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new hr(`Expect boolean, but got ${t.type}.`)}function Lu(t){if(t==null)throw new hr("Expect function, but got nothing.");if(t.type!=="fn")throw new hr(`Expect function, but got ${t.type}.`)}function Zr(t){if(t==null)throw new hr("Expect string, but got nothing.");if(t.type!=="str")throw new hr(`Expect string, but got ${t.type}.`)}function Me(t){if(t==null)throw new hr("Expect number, but got nothing.");if(t.type!=="num")throw new hr(`Expect number, but got ${t.type}.`)}function Su(t){if(t==null)throw new hr("Expect object, but got nothing.");if(t.type!=="obj")throw new hr(`Expect object, but got ${t.type}.`)}function Nc(t){if(t==null)throw new hr("Expect array, but got nothing.");if(t.type!=="arr")throw new hr(`Expect array, but got ${t.type}.`)}function xh(t){return t.type==="obj"}function cg(t){return t.type==="arr"}function cp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function hp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>hp(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function pp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>pp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=pp(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function vp(t){if(t===null)return zt;if(typeof t=="boolean")return xo(t);if(typeof t=="string")return ur(t);if(typeof t=="number")return Re(t);if(Array.isArray(t))return $s(t.map(r=>vp(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,vp(a));return rv(r)}return zt}function tf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,a=>`\\${a}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const a=[];for(const v of t.value)a.push(tf(v,!0,e));return"[ "+a.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const a=[];for(const[v,d]of t.value)a.push(`${v}: ${tf(d,!0,e)}`);return"{ "+a.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const mb={help:ur("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ur("0.16.0"),"Core:ai":ur("kawaii"),"Core:not":de(([t])=>(Js(t),t.value?Mn:ma)),"Core:eq":de(([t,r])=>(In(t),In(r),cp(t,r)?ma:Mn)),"Core:neq":de(([t,r])=>(In(t),In(r),cp(t,r)?Mn:ma)),"Core:and":de(([t,r])=>(Js(t),t.value?(Js(r),r.value?ma:Mn):Mn)),"Core:or":de(([t,r])=>(Js(t),t.value?ma:(Js(r),r.value?ma:Mn))),"Core:add":de(([t,r])=>(Me(t),Me(r),Re(t.value+r.value))),"Core:sub":de(([t,r])=>(Me(t),Me(r),Re(t.value-r.value))),"Core:mul":de(([t,r])=>(Me(t),Me(r),Re(t.value*r.value))),"Core:pow":de(([t,r])=>{Me(t),Me(r);const e=t.value**r.value;if(isNaN(e))throw new hr("Invalid operation.");return Re(e)}),"Core:div":de(([t,r])=>{Me(t),Me(r);const e=t.value/r.value;if(isNaN(e))throw new hr("Invalid operation.");return Re(e)}),"Core:mod":de(([t,r])=>(Me(t),Me(r),Re(t.value%r.value))),"Core:gt":de(([t,r])=>(Me(t),Me(r),t.value>r.value?ma:Mn)),"Core:lt":de(([t,r])=>(Me(t),Me(r),t.value<r.value?ma:Mn)),"Core:gteq":de(([t,r])=>(Me(t),Me(r),t.value>=r.value?ma:Mn)),"Core:lteq":de(([t,r])=>(Me(t),Me(r),t.value<=r.value?ma:Mn)),"Core:type":de(([t])=>(In(t),ur(t.type))),"Core:to_str":de(([t])=>(In(t),ur(tf(t)))),"Core:range":de(([t,r])=>(Me(t),Me(r),t.value<r.value?$s(Array.from({length:r.value-t.value+1},(e,a)=>Re(a+t.value))):t.value>r.value?$s(Array.from({length:t.value-r.value+1},(e,a)=>Re(t.value-a))):$s([t]))),"Core:sleep":de(async([t])=>(Me(t),await new Promise(r=>setTimeout(r,t.value)),zt)),"Util:uuid":de(()=>ur(Wc())),"Json:stringify":de(([t])=>(In(t),ur(JSON.stringify(pp(t))))),"Json:parse":de(([t])=>{Zr(t);try{return vp(JSON.parse(t.value))}catch{return Gd("not_json")}}),"Json:parsable":de(([t])=>{Zr(t);try{JSON.parse(t.value)}catch{return xo(!1)}return xo(!0)}),"Date:now":de(()=>Re(Date.now())),"Date:year":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":de(([t])=>(t&&Me(t),Re(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":de(([t])=>(Zr(t),Re(new Date(t.value).getTime()))),"Math:Infinity":Re(1/0),"Math:E":Re(Math.E),"Math:LN2":Re(Math.LN2),"Math:LN10":Re(Math.LN10),"Math:LOG2E":Re(Math.LOG2E),"Math:LOG10E":Re(Math.LOG10E),"Math:PI":Re(Math.PI),"Math:SQRT1_2":Re(Math.SQRT1_2),"Math:SQRT2":Re(Math.SQRT2),"Math:abs":de(([t])=>(Me(t),Re(Math.abs(t.value)))),"Math:acos":de(([t])=>(Me(t),Re(Math.acos(t.value)))),"Math:acosh":de(([t])=>(Me(t),Re(Math.acosh(t.value)))),"Math:asin":de(([t])=>(Me(t),Re(Math.asin(t.value)))),"Math:asinh":de(([t])=>(Me(t),Re(Math.asinh(t.value)))),"Math:atan":de(([t])=>(Me(t),Re(Math.atan(t.value)))),"Math:atanh":de(([t])=>(Me(t),Re(Math.atanh(t.value)))),"Math:atan2":de(([t,r])=>(Me(t),Me(r),Re(Math.atan2(t.value,r.value)))),"Math:cbrt":de(([t])=>(Me(t),Re(Math.cbrt(t.value)))),"Math:ceil":de(([t])=>(Me(t),Re(Math.ceil(t.value)))),"Math:clz32":de(([t])=>(Me(t),Re(Math.clz32(t.value)))),"Math:cos":de(([t])=>(Me(t),Re(Math.cos(t.value)))),"Math:cosh":de(([t])=>(Me(t),Re(Math.cosh(t.value)))),"Math:exp":de(([t])=>(Me(t),Re(Math.exp(t.value)))),"Math:expm1":de(([t])=>(Me(t),Re(Math.expm1(t.value)))),"Math:floor":de(([t])=>(Me(t),Re(Math.floor(t.value)))),"Math:fround":de(([t])=>(Me(t),Re(Math.fround(t.value)))),"Math:hypot":de(([t])=>{Nc(t);const r=[];for(const e of t.value)Me(e),r.push(e.value);return Re(Math.hypot(...r))}),"Math:imul":de(([t,r])=>(Me(t),Me(r),Re(Math.imul(t.value,r.value)))),"Math:log":de(([t])=>(Me(t),Re(Math.log(t.value)))),"Math:log1p":de(([t])=>(Me(t),Re(Math.log1p(t.value)))),"Math:log10":de(([t])=>(Me(t),Re(Math.log10(t.value)))),"Math:log2":de(([t])=>(Me(t),Re(Math.log2(t.value)))),"Math:max":de(([t,r])=>(Me(t),Me(r),Re(Math.max(t.value,r.value)))),"Math:min":de(([t,r])=>(Me(t),Me(r),Re(Math.min(t.value,r.value)))),"Math:pow":de(([t,r])=>(Me(t),Me(r),Re(Math.pow(t.value,r.value)))),"Math:round":de(([t])=>(Me(t),Re(Math.round(t.value)))),"Math:sign":de(([t])=>(Me(t),Re(Math.sign(t.value)))),"Math:sin":de(([t])=>(Me(t),Re(Math.sin(t.value)))),"Math:sinh":de(([t])=>(Me(t),Re(Math.sinh(t.value)))),"Math:sqrt":de(([t])=>{Me(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new hr("Invalid operation.");return Re(r)}),"Math:tan":de(([t])=>(Me(t),Re(Math.tan(t.value)))),"Math:tanh":de(([t])=>(Me(t),Re(Math.tanh(t.value)))),"Math:trunc":de(([t])=>(Me(t),Re(Math.trunc(t.value)))),"Math:rnd":de(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Re(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Re(Math.random())),"Math:gen_rng":de(([t])=>{if(In(t),t.type!=="num"&&t.type!=="str")return zt;const r=df(t.value.toString());return de(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?Re(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Re(r()))}),"Num:to_hex":de(([t])=>(Me(t),ur(t.value.toString(16)))),"Num:from_hex":de(([t])=>(Zr(t),Re(parseInt(t.value,16)))),"Str:lf":ur(`
`),"Str:lt":de(([t,r])=>(Zr(t),Zr(r),t.value<r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:gt":de(([t,r])=>(Zr(t),Zr(r),t.value>r.value?Re(-1):t.value===r.value?Re(0):Re(1))),"Str:from_codepoint":de(([t])=>(Me(t),ur(String.fromCodePoint(t.value)))),"Obj:keys":de(([t])=>(Su(t),$s(Array.from(t.value.keys()).map(r=>ur(r))))),"Obj:vals":de(([t])=>(Su(t),$s(Array.from(t.value.values())))),"Obj:kvs":de(([t])=>(Su(t),$s(Array.from(t.value.entries()).map(([r,e])=>$s([ur(r),e]))))),"Obj:get":de(([t,r])=>(Su(t),Zr(r),t.value.get(r.value)??zt)),"Obj:set":de(([t,r,e])=>(Su(t),Zr(r),In(e),t.value.set(r.value,e),zt)),"Obj:has":de(([t,r])=>(Su(t),Zr(r),xo(t.value.has(r.value)))),"Obj:copy":de(([t])=>(Su(t),rv(new Map(t.value)))),"Async:interval":de(async([t,r,e],a)=>{Me(t),Lu(r),e&&(Js(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),de(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":de(async([t,r],e)=>{Me(t),Lu(r);const a=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),de(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})},hg={num:{to_str:t=>de(async(r,e)=>ur(t.value.toString()))},str:{to_num:t=>de(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?zt:Re(a)}),len:t=>Re(yf(t.value)),replace:t=>de(async([r,e],a)=>(Zr(r),Zr(e),ur(t.value.split(r.value).join(e.value)))),index_of:t=>de(async([r],e)=>(Zr(r),Re(mf(t.value,r.value)))),incl:t=>de(async([r],e)=>(Zr(r),t.value.includes(r.value)?ma:Mn)),trim:t=>de(async(r,e)=>ur(t.value.trim())),upper:t=>de(async(r,e)=>ur(t.value.toUpperCase())),lower:t=>de(async(r,e)=>ur(t.value.toLowerCase())),split:t=>de(async([r],e)=>(r&&Zr(r),$s(r?t.value.split(r?r.value:"").map(a=>ur(a)):Ys(t.value).map(a=>ur(a))))),slice:t=>de(async([r,e],a)=>(Me(r),Me(e),ur(wf(t.value,r.value,e.value)))),pick:t=>de(async([r],e)=>{Me(r);const v=Ys(t.value)[r.value];return v?ur(v):zt}),codepoint_at:t=>de(([r],e)=>{Me(r);const a=t.value.charCodeAt(r.value);return Number.isNaN(a)?zt:Re(a)})},arr:{len:t=>Re(t.value.length),push:t=>de(async([r],e)=>(In(r),t.value.push(r),t)),unshift:t=>de(async([r],e)=>(In(r),t.value.unshift(r),t)),pop:t=>de(async(r,e)=>t.value.pop()??zt),shift:t=>de(async(r,e)=>t.value.shift()??zt),concat:t=>de(async([r],e)=>(Nc(r),$s(t.value.concat(r.value)))),slice:t=>de(async([r,e],a)=>(Me(r),Me(e),$s(t.value.slice(r.value,e.value)))),join:t=>de(async([r],e)=>(r&&Zr(r),ur(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>de(async([r],e)=>{Lu(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,Re(d)]));return $s(await Promise.all(a))}),filter:t=>de(async([r],e)=>{Lu(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,Re(v)]);Js(x),x.value&&a.push(d)}return $s(a)}),reduce:t=>de(async([r,e],a)=>{Lu(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,Re(x)])}return d}),find:t=>de(async([r],e)=>{Lu(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,Re(a)]);if(Js(d),d.value)return v}return zt}),incl:t=>de(async([r],e)=>(In(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Mn:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?ma:Mn)),reverse:t=>de(async(r,e)=>(t.value.reverse(),zt)),copy:t=>de(async(r,e)=>$s([...t.value])),sort:t=>de(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);Me(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return Lu(r),Nc(t),t.value=await a(t.value,r),t})},error:{name:t=>ur(t.value),info:t=>t.info??zt}};function $b(t,r){if(Object.hasOwn(hg,t.type)){const e=hg[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new hr(`No such prop (${r}) in ${t.type}.`)}else throw new hr(`Cannot read prop of ${t.type}. (reading ${r})`)}const xb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var rn=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Jd=300,bb=Jd-1;let Ss=class{constructor(r,e={}){ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);ge(this,"vars",{});this.opts=e;const a={print:de(([v])=>{In(v),this.opts.out&&this.opts.out(v)}),readline:de(async v=>{const d=v[0];if(Zr(d),this.opts.in==null)return zt;const x=await this.opts.in(d.value);return ur(x)})};this.vars=Object.fromEntries(Object.entries({...r,...mb,...a}).map(([v,d])=>[v,xb.const(d)])),this.scope=new _u([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(a=>(this.handleError(a),Gd("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Qc?this.opts.err(r):this.opts.err(new hb(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{if(a.mut)throw new Error("Namespaces cannot include mutable variable: "+a.name);const v={isMutable:a.mut,value:await this._eval(a.expr,e)};e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+a.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??zt;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(a);return wb(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return zt;if(this.stepCount%Jd===bb&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new hr("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);Lu(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Js(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Js(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return zt}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(cp(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):zt}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return zt}case"for":{if(r.times){const a=await this._eval(r.times,e);Me(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);Me(a),Me(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Re(d)}]])));if(x.type==="break")break;if(x.type==="return")return x}}return zt}case"each":{const a=await this._eval(r.items,e);Nc(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return zt}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,{isMutable:r.mut,value:a}),zt}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),zt}case"addAssign":{const a=await this._eval(r.dest,e);Me(a);const v=await this._eval(r.expr,e);return Me(v),await this.assign(e,r.dest,Re(a.value+v.value)),zt}case"subAssign":{const a=await this._eval(r.dest,e);Me(a);const v=await this._eval(r.expr,e);return Me(v),await this.assign(e,r.dest,Re(a.value-v.value)),zt}case"null":return zt;case"bool":return xo(r.value);case"num":return Re(r.value);case"str":return ur(r.value);case"arr":return $s(await Promise.all(r.value.map(a=>this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return rv(a)}case"prop":{const a=await this._eval(r.target,e);return xh(a)?a.value.has(r.name)?a.value.get(r.name):zt:$b(a,r.name)}case"index":{const a=await this._eval(r.target,e),v=await this._eval(r.index,e);if(cg(a)){Me(v);const d=a.value[v.value];if(d===void 0)throw new pb(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}else{if(xh(a))return Zr(v),a.value.has(v.value)?a.value.get(v.value):zt;throw new hr(`Cannot read prop (${tf(v)}) of ${a.type}.`)}}case"not":{const a=await this._eval(r.expr,e);return Js(a),xo(!a.value)}case"fn":return vb(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return xo(e.exists(r.identifier.name));case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);a+=tf(d)}return ur(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),gb(a)}case"break":return this.log("block:break",{scope:e.name}),db();case"continue":return this.log("block:continue",{scope:e.name}),yb();case"ns":return zt;case"meta":return zt;case"and":{const a=await this._eval(r.left,e);if(Js(a),a.value){const v=await this._eval(r.right,e);return Js(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Js(a),a.value)return a;{const v=await this._eval(r.right,e);return Js(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=zt;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(cg(v))Me(d),v.value[d.value]=a;else if(xh(v))Zr(d),v.value.set(d.value,a);else throw new hr(`Cannot read prop (${tf(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Su(v),v.value.set(e.name,a)}else throw new hr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};rn([Nr],Ss.prototype,"exec",null);rn([Nr],Ss.prototype,"execFn",null);rn([Nr],Ss.prototype,"execFnSimple",null);rn([Nr],Ss.prototype,"handleError",null);rn([Nr],Ss.prototype,"log",null);rn([Nr],Ss.prototype,"collectNs",null);rn([Nr],Ss.prototype,"collectNsMember",null);rn([Nr],Ss.prototype,"_fn",null);rn([Nr],Ss.prototype,"_eval",null);rn([Nr],Ss.prototype,"_run",null);rn([Nr],Ss.prototype,"registerAbortHandler",null);rn([Nr],Ss.prototype,"unregisterAbortHandler",null);rn([Nr],Ss.prototype,"abort",null);rn([Nr],Ss.prototype,"assign",null);rn([Nr],Ss,"collectMetadata",null);function Ab(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function bo(t,r,e,a){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,bo.prototype),v.expected=r,v.found=e,v.location=a,v.name="SyntaxError",v}Ab(bo,Error);function bh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}bo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,a;for(a=0;a<t.length;a++)if(t[a].source===this.location.source){e=t[a].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,x=this.location.source+":"+d.line+":"+d.column;if(e){var k=this.location.end,E=bh("",d.line.toString().length," "),S=e[v.line-1],F=v.line===k.line?k.column:S.length+1,j=F-v.column||1;r+=`
 --> `+x+`
`+E+` |
`+d.line+" | "+S+`
`+E+" | "+bh("",v.column-1," ")+bh("",j,"^")}else r+=`
 at `+x}return r};bo.buildMessage=function(t,r){var e={literal:function(S){return'"'+v(S.text)+'"'},class:function(S){var F=S.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(S.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function a(S){return S.charCodeAt(0).toString(16).toUpperCase()}function v(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function d(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function x(S){return e[S.type](S)}function k(S){var F=S.map(x),j,L;if(F.sort(),F.length>0){for(j=1,L=1;j<F.length;j++)F[j-1]!==F[j]&&(F[L]=F[j],L++);F.length=L}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function E(S){return S?'"'+v(S)+'"':"end of input"}return"Expected "+k(t)+" but "+E(r)+" found."};function pg(t,r){r=r!==void 0?r:{};var e={},a=r.grammarSource,v={Preprocess:na,Main:hs},d=na,x="//",k="/*",E="*/",S="(",F=")",j="::",L="{",K="}",he="###",re="let",ie=":",Ce="=",q="var",H="<:",z="#[",V="]",W="each",J=",",Y="for",te="return",Ae="loop",Ee="break",me="continue",Ge="+=",ut="-=",Yt="\\",ot="||",it="&&",Be="==",lt="!=",It="<=",Ut=">=",tt="<",Rr=">",er="+",Ar="-",Nt="*",$r="^",Vr="/",Or="%",Dr="!",jt="[",U=".",Z="if",ne="elif",pe="else",ve="match",le="=>",Oe="eval",$e="exists",xe="`",ce='"',Te="'",We='\\"',Ve="\\'",Je="true",Xe="false",rt="null",ft=";",Ot="@",qt="@(",Ft=`\r
`,kt=/^[A-Z0-9_:]/i,Fs=/^[^`{]/,rs=/^[{}`]/,Tt=/^[+\-]/,gt=/^[1-9]/,xt=/^[0-9]/,ka=/^[A-Z_]/i,Bn=/^[A-Z0-9_]/i,li=/^[\r\n]/,ui=/^[ \t\r\n]/,ir=/^[ \t]/,Pt=Bs(),oi=Q("//",!1),$n=Q("/*",!1),yr=Q("*/",!1),bt=Q("(",!1),Zt=Q(")",!1),lr=Q("::",!1),Qe=Q("{",!1),At=Q("}",!1),Wr=Q("###",!1),dt=Q("let",!1),st=Q(":",!1),Lr=Q("=",!1),fi=Q("var",!1),ci=Q("<:",!1),Ns=Q("#[",!1),Kr=Q("]",!1),Et=Q("each",!1),Ye=Q(",",!1),ss=Q("for",!1),wr=Q("return",!1),Rt=yt([["A","Z"],["0","9"],"_",":"],!1,!0),hi=Q("loop",!1),pi=Q("break",!1),vi=Q("continue",!1),gi=Q("+=",!1),Pa=Q("-=",!1),Un=Q("\\",!1),di=Q("||",!1),yi=Q("&&",!1),wi=Q("==",!1),mi=Q("!=",!1),$i=Q("<=",!1),Ea=Q(">=",!1),sn=Q("<",!1),qn=Q(">",!1),xi=Q("+",!1),Ma=Q("-",!1),zn=Q("*",!1),bi=Q("^",!1),Ai=Q("/",!1),Ci=Q("%",!1),xn=Q("!",!1),Xr=Q("[",!1),Os=Q(".",!1),_i=Q("if",!1),ki=Q("elif",!1),Pi=Q("else",!1),Ts=Q("match",!1),ns=Q("=>",!1),Is=Q("eval",!1),Ei=Q("exists",!1),as=Q("`",!1),js=yt(["`","{"],!0,!1),Rs=yt(["{","}","`"],!1,!1),is=Q('"',!1),ls=Q("'",!1),Ds=Q('\\"',!1),Sa=Q("\\'",!1),Mt=yt(["+","-"],!1,!1),Vn=yt([["1","9"]],!1,!1),St=yt([["0","9"]],!1,!1),Mi=Q("true",!1),Ls=Q("false",!1),Si=Q("null",!1),Gr=Q(";",!1),Fi=Q("@",!1),nn=Q("@(",!1),Ni=yt([["A","Z"],"_"],!1,!0),Wn=yt([["A","Z"],["0","9"],"_"],!1,!0),Oi=Q(`\r
`,!1),Ti=yt(["\r",`
`],!1,!1),Ii=yt([" ","	","\r",`
`],!1,!1),ji=yt([" ","	"],!1,!1),Ri=function(s){return s.join("")},Di=function(){return ee()},Li=function(){return ee()},Hi=function(){return""},Fa=function(){return""},Bi=function(s){return s??[]},an=function(s,l){return l},Ui=function(s,l){return[s,...l]},ln=function(s,l){return l},qi=function(s,l){return[s,...l]},Kn=function(s,l){return l},zi=function(s,l){return[s,...l]},Vi=function(s){return s},Wi=function(s,l){return g("ns",{name:s,members:l})},Ki=function(s,l){return g("meta",{name:s,value:l})},Gi=function(s){return g("meta",{name:null,value:s})},Ji=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!1,attr:[]})},Zi=function(s,l,h){return g("def",{name:s,varType:l,expr:h,mut:!0,attr:[]})},Qi=function(s){return g("identifier",{name:"print",chain:[g("callChain",{args:[s]})]})},Xi=function(s,l){return g("attr",{name:s,value:l??g("bool",{value:!0})})},Yi=function(s,l,h){return g("each",{var:s,items:l,for:h})},el=function(s,l,h){return g("each",{var:s,items:l,for:h})},tl=function(s,l){return l},rl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},sl=function(s,l){return l},nl=function(s,l,h,i){return g("for",{var:s,from:l??g("num",{value:0}),to:h,for:i})},al=function(s,l){return g("for",{times:s,for:l})},il=function(s,l){return g("for",{times:s,for:l})},ll=function(s){return g("return",{expr:s})},ul=function(s){return g("loop",{statements:s})},ol=function(){return g("break",{})},Na=function(){return g("continue",{})},fl=function(s,l,h){return l==="+="?g("addAssign",{dest:s,expr:h}):l==="-="?g("subAssign",{dest:s,expr:h}):g("assign",{dest:s,expr:h})},Gn=function(s,l,h){return{op:l,term:h}},cl=function(s,l){return g("infix",{operands:[s,...l.map(h=>h.term)],operators:l.map(h=>h.op)})},hl=function(){return ee()},pl=function(s){return g("not",{expr:s})},Oa=function(s,l){return{...s,chain:l}},vl=function(s){return g("callChain",{args:s??[]})},Jn=function(s,l){return l},gl=function(s,l){return[s,...l]},dl=function(s){return g("indexChain",{index:s})},yl=function(s){return g("propChain",{name:s})},wl=function(s,l,h,i){return g("if",{cond:s,then:l,elseif:h??[],else:i})},ml=function(s,l){return[s,...l]},Ta=function(s,l){return{cond:s,then:l}},$l=function(s){return s},Zn=function(s,l,h){return{q:l,a:h}},xl=function(s,l,h){return g("match",{about:s,qs:l??[],default:h})},bl=function(s){return g("block",{statements:s})},Al=function(s){return g("exists",{identifier:s})},Ia=function(s){return g("identifier",{name:s})},Cl=function(s){return g("tmpl",{tmpl:s})},ja=function(s){return s.join("")},Qn=function(s){return s},_l=function(s){return g("str",{value:s.join("")})},Xn=function(s){return s},kl=function(s){return g("str",{value:s.join("")})},Pl=function(){return'"'},El=function(){return"'"},Ml=function(){return g("num",{value:parseFloat(ee())})},Sl=function(){return g("num",{value:parseFloat(ee())})},Fl=function(){return g("num",{value:parseInt(ee(),10)})},Nl=function(){return g("num",{value:parseInt(ee(),10)})},Ra=function(){return g("bool",{value:!0})},Ol=function(){return g("bool",{value:!1})},Da=function(){return g("null",{})},Yn=function(s,l){return{k:s,v:l}},Tl=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},ea=function(s){return s},Il=function(s){return g("arr",{value:s})},jl=function(s,l){return{name:s,argType:l}},La=function(s,l){return[s,...l]},Rl=function(s,l,h,i,p,c){return(s.length>0||h.length>0)&&zl("Cannot use spaces before or after the function name."),g("def",{name:l,expr:g("fn",{args:i??[],retType:p},c??[]),mut:!1,attr:[]})},Ha=function(s,l,h){return g("fn",{args:s??[],retType:l},h??[])},ta=function(s){return s},Dl=function(s){return g("arr",{value:s})},ra=function(s,l){return{k:s,v:l}},Ll=function(s){const l=new Map;for(const h of s)l.set(h.k,h.v);return g("obj",{value:l})},Hl=function(s,l){return g("fnTypeSource",{args:s??[],result:l})},Bl=function(s,l){return[s,...l]},Ul=function(s,l){return g("namedTypeSource",{name:s,inner:l})},ql=function(s){return g("namedTypeSource",{name:s,inner:null})},u=function(){return ee()},G=function(){return ee()},Hs=function(s){return g("block",{statements:s??[]})},n=0,D=0,P=[{line:1,column:1}],I=0,Hr=[],$=0,M={},us;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function ee(){return t.substring(D,n)}function tr(){return os(D,n)}function zl(s,l){throw l=l!==void 0?l:os(D,n),Ba(s,l)}function Q(s,l){return{type:"literal",text:s,ignoreCase:l}}function yt(s,l,h){return{type:"class",parts:s,inverted:l,ignoreCase:h}}function Bs(){return{type:"any"}}function T(){return{type:"end"}}function sa(s){var l=P[s],h;if(l)return l;for(h=s-1;!P[h];)h--;for(l=P[h],l={line:l.line,column:l.column};h<s;)t.charCodeAt(h)===10?(l.line++,l.column=1):l.column++,h++;return P[s]=l,l}function os(s,l,h){var i=sa(s),p=sa(l),c={source:a,start:{offset:s,line:i.line,column:i.column},end:{offset:l,line:p.line,column:p.column}};return h&&a&&typeof a.offset=="function"&&(c.start=a.offset(c.start),c.end=a.offset(c.end)),c}function C(s){n<I||(n>I&&(I=n,Hr=[]),Hr.push(s))}function Ba(s,l){return new bo(s,null,null,l)}function Vl(s,l,h){return new bo(bo.buildMessage(s,l),s,l,h)}function na(){var s,l,h,i=n*77+0,p=M[i];if(p)return n=p.nextPos,p.result;for(s=n,l=[],h=aa();h!==e;)l.push(h),h=aa();return D=s,l=Ri(l),s=l,M[i]={nextPos:n,result:s},s}function aa(){var s,l,h=n*77+1,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=ms(),l!==e&&(D=s,l=Di()),s=l,s===e&&(s=n,l=qs(),l!==e&&(D=s,l=Li()),s=l,s===e&&(s=Wl(),s===e&&(t.length>n?(s=t.charAt(n),n++):(s=e,$===0&&C(Pt))))),M[h]={nextPos:n,result:s},s)}function Wl(){var s,l,h,i,p,c,m=n*77+2,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,2)===x?(l=x,n+=2):(l=e,$===0&&C(oi)),l!==e){for(h=[],i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,c=o(),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=Hi()}else n=s,s=e;if(s===e)if(s=n,t.substr(n,2)===k?(l=k,n+=2):(l=e,$===0&&C($n)),l!==e){for(h=[],i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.substr(n,2)===E?(c=E,n+=2):(c=e,$===0&&C(yr)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt)),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);t.substr(n,2)===E?(i=E,n+=2):(i=e,$===0&&C(yr)),i!==e?(D=s,s=Fa()):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function hs(){var s,l,h,i,p,c=n*77+3,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();for(h=bn(),h===e&&(h=null),i=[],p=f();p!==e;)i.push(p),p=f();return D=s,s=Bi(h),M[c]={nextPos:n,result:s},s}function bn(){var s,l,h,i,p,c,m,y,b=n*77+4,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Ue(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Ue(),y!==e?(D=i,i=an(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=Ui(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function An(){var s,l,h,i,p,c,m,y,b=n*77+5,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Br(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Br(),y!==e?(D=i,i=ln(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=qi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function rr(){var s,l,h,i,p,c,m,y,b=n*77+6,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Cr(),l!==e){for(h=[],i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e;for(;i!==e;){for(h.push(i),i=n,p=[],c=w();c!==e;)p.push(c),c=w();if(c=ae(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=Cr(),y!==e?(D=i,i=Kn(l,y)):(n=i,i=e)}else n=i,i=e}D=s,s=zi(l,h)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Ue(){var s,l=n*77+7,h=M[l];return h?(n=h.nextPos,h.result):(s=la(),s===e&&(s=Kl(),s===e&&(s=Cr())),M[l]={nextPos:n,result:s},s)}function Br(){var s,l=n*77+8,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=la())),M[l]={nextPos:n,result:s},s)}function Cr(){var s,l=n*77+9,h=M[l];return h?(n=h.nextPos,h.result):(s=ua(),s===e&&(s=Xt(),s===e&&(s=Gl(),s===e&&(s=Xl(),s===e&&(s=Jl(),s===e&&(s=Zl(),s===e&&(s=Ql(),s===e&&(s=Yl(),s===e&&(s=eu(),s===e&&(s=_r(),s===e&&(s=Ua(),s===e&&(s=ye()))))))))))),M[l]={nextPos:n,result:s},s)}function ye(){var s,l=n*77+10,h=M[l];return h?(n=h.nextPos,h.result):(s=tu(),s===e&&(s=Jr()),M[l]={nextPos:n,result:s},s)}function Jr(){var s,l=n*77+11,h=M[l];return h?(n=h.nextPos,h.result):(s=nu(),s===e&&(s=fu(),s===e&&(s=qa(),s===e&&(s=ia()))),M[l]={nextPos:n,result:s},s)}function ia(){var s,l,h,i,p,c,m=n*77+12,y=M[m];if(y)return n=y.nextPos,y.result;if(s=za(),s===e&&(s=Va(),s===e&&(s=Wa(),s===e&&(s=ms(),s===e&&(s=qs(),s===e&&(s=ha(),s===e&&(s=pa(),s===e&&(s=pn(),s===e&&(s=Ja(),s===e&&(s=ou(),s===e&&(s=ru(),s===e&&(s=fa(),s===e))))))))))))if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=Vi(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function sr(){var s,l=n*77+13,h=M[l];return h?(n=h.nextPos,h.result):(s=ha(),s===e&&(s=qs(),s===e&&(s=pa(),s===e&&(s=cu(),s===e&&(s=hu(),s===e&&(s=pn()))))),M[l]={nextPos:n,result:s},s)}function la(){var s,l,h,i,p,c,m,y,b,A,N=n*77+14,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===j?(l=j,n+=2):(l=e,$===0&&C(lr)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(t.charCodeAt(n)===123?(c=L,n++):(c=e,$===0&&C(Qe)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=An(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();t.charCodeAt(n)===125?(A=K,n++):(A=e,$===0&&C(At)),A!==e?(D=s,s=Wi(i,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Kl(){var s,l,h,i,p,c,m=n*77+15,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=sr(),c!==e?(D=s,s=Ki(i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===he?(l=he,n+=3):(l=e,$===0&&C(Wr)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();i=sr(),i!==e?(D=s,s=Gi(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ua(){var s,l,h,i,p,c,m,y,b,A=n*77+16,N=M[A];if(N)return n=N.nextPos,N.result;if(s=n,t.substr(n,3)===re?(l=re,n+=3):(l=e,$===0&&C(dt)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Ji(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===q?(l=q,n+=3):(l=e,$===0&&C(fi)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===58?(m=ie,n++):(m=e,$===0&&C(st)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=He(),b!==e?p=b:(n=p,p=e)}else n=p,p=e;for(p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===61?(m=Ce,n++):(m=e,$===0&&C(Lr)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();b=ye(),b!==e?(D=s,s=Zi(i,p,b)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[A]={nextPos:n,result:s},s}function Gl(){var s,l,h,i,p=n*77+17,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,2)===H?(l=H,n+=2):(l=e,$===0&&C(ci)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();i=ye(),i!==e?(D=s,s=Qi(i)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Jl(){var s,l,h,i,p,c,m,y=n*77+18,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,2)===z?(l=z,n+=2):(l=e,$===0&&C(Ns)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=De(),i!==e){for(p=n,c=[],m=f();m!==e;)c.push(m),m=f();for(m=sr(),m!==e?p=m:(n=p,p=e),p===e&&(p=null),c=[],m=f();m!==e;)c.push(m),m=f();t.charCodeAt(n)===93?(m=V,n++):(m=e,$===0&&C(Kr)),m!==e?(D=s,s=Xi(i,p)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function Zl(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+19,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();for(t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e)if(t.charCodeAt(n)===41?(O=F,n++):(O=e,$===0&&C(Zt)),O!==e){for(B=[],se=f();se!==e;)B.push(se),se=f();se=be(),se!==e?(D=s,s=Yi(m,N,se)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,4)===W?(l=W,n+=4):(l=e,$===0&&C(Et)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(A=ye(),A!==e){if(N=[],O=f(),O!==e)for(;O!==e;)N.push(O),O=f();else N=e;N!==e?(O=be(),O!==e?(D=s,s=el(c,A,O)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function Ql(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe=n*77+20,ze=M[qe];if(ze)return n=ze.nextPos,ze.result;if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(t.substr(n,3)===re?(p=re,n+=3):(p=e,$===0&&C(dt)),p!==e){if(c=[],m=f(),m!==e)for(;m!==e;)c.push(m),m=f();else c=e;if(c!==e)if(m=De(),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=n,t.charCodeAt(n)===61?(A=Ce,n++):(A=e,$===0&&C(Lr)),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();O=ye(),O!==e?(D=b,b=tl(m,O)):(n=b,b=e)}else n=b,b=e;for(b===e&&(b=null),t.charCodeAt(n)===44?(A=J,n++):(A=e,$===0&&C(Ye)),A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();if(O=ye(),O!==e)if(t.charCodeAt(n)===41?(B=F,n++):(B=e,$===0&&C(Zt)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=be(),X!==e?(D=s,s=rl(m,b,O,X)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(t.substr(n,3)===re?(i=re,n+=3):(i=e,$===0&&C(dt)),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(y=n,t.charCodeAt(n)===61?(b=Ce,n++):(b=e,$===0&&C(Lr)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=ye(),N!==e?(D=y,y=sl(c,N)):(n=y,y=e)}else n=y,y=e;for(y===e&&(y=null),t.charCodeAt(n)===44?(b=J,n++):(b=e,$===0&&C(Ye)),b===e&&(b=null),A=[],N=f();N!==e;)A.push(N),N=f();if(N=ye(),N!==e){if(O=[],B=f(),B!==e)for(;B!==e;)O.push(B),B=f();else O=e;O!==e?(B=be(),B!==e?(D=s,s=nl(c,y,N,B)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===40?(i=S,n++):(i=e,$===0&&C(bt)),i!==e)if(p=ye(),p!==e)if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();y=be(),y!==e?(D=s,s=al(p,y)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,t.substr(n,3)===Y?(l=Y,n+=3):(l=e,$===0&&C(ss)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;p!==e?(c=be(),c!==e?(D=s,s=il(i,c)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e}}return M[qe]={nextPos:n,result:s},s}function Xl(){var s,l,h,i,p,c=n*77+21,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,6)===te?(l=te,n+=6):(l=e,$===0&&C(wr)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=ye(),p!==e?(D=s,s=ll(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function Yl(){var s,l,h,i,p,c,m,y,b=n*77+22,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Ae?(l=Ae,n+=4):(l=e,$===0&&C(hi)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=ul(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function eu(){var s,l,h,i,p=n*77+23,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Ee?(l=Ee,n+=5):(l=e,$===0&&C(pi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function _r(){var s,l,h,i,p=n*77+24,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,8)===me?(l=me,n+=8):(l=e,$===0&&C(vi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Na()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ua(){var s,l,h,i,p,c,m=n*77+25,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.substr(n,2)===Ge?(i=Ge,n+=2):(i=e,$===0&&C(gi)),i===e&&(t.substr(n,2)===ut?(i=ut,n+=2):(i=e,$===0&&C(Pa)),i===e&&(t.charCodeAt(n)===61?(i=Ce,n++):(i=e,$===0&&C(Lr)))),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();c=ye(),c!==e?(D=s,s=fl(l,i,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function tu(){var s,l,h,i,p,c,m,y,b=n*77+26,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=Jr(),l!==e){for(h=[],i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e;if(i!==e)for(;i!==e;){for(h.push(i),i=n,p=[],c=Qt();c!==e;)p.push(c),c=Qt();if(c=un(),c!==e){for(m=[],y=Qt();y!==e;)m.push(y),y=Qt();y=Jr(),y!==e?(D=i,i=Gn(l,c,y)):(n=i,i=e)}else n=i,i=e}else h=e;h!==e?(D=s,s=cl(l,h)):(n=s,s=e)}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Qt(){var s,l,h,i=n*77+27,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(h=ae(),h!==e?(l=[l,h],s=l):(n=s,s=e)):(n=s,s=e),s===e&&(s=w()),M[i]={nextPos:n,result:s},s)}function un(){var s,l,h=n*77+28,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===ot?(l=ot,n+=2):(l=e,$===0&&C(di)),l===e&&(t.substr(n,2)===it?(l=it,n+=2):(l=e,$===0&&C(yi)),l===e&&(t.substr(n,2)===Be?(l=Be,n+=2):(l=e,$===0&&C(wi)),l===e&&(t.substr(n,2)===lt?(l=lt,n+=2):(l=e,$===0&&C(mi)),l===e&&(t.substr(n,2)===It?(l=It,n+=2):(l=e,$===0&&C($i)),l===e&&(t.substr(n,2)===Ut?(l=Ut,n+=2):(l=e,$===0&&C(Ea)),l===e&&(t.charCodeAt(n)===60?(l=tt,n++):(l=e,$===0&&C(sn)),l===e&&(t.charCodeAt(n)===62?(l=Rr,n++):(l=e,$===0&&C(qn)),l===e&&(t.charCodeAt(n)===43?(l=er,n++):(l=e,$===0&&C(xi)),l===e&&(t.charCodeAt(n)===45?(l=Ar,n++):(l=e,$===0&&C(Ma)),l===e&&(t.charCodeAt(n)===42?(l=Nt,n++):(l=e,$===0&&C(zn)),l===e&&(t.charCodeAt(n)===94?(l=$r,n++):(l=e,$===0&&C(bi)),l===e&&(t.charCodeAt(n)===47?(l=Vr,n++):(l=e,$===0&&C(Ai)),l===e&&(t.charCodeAt(n)===37?(l=Or,n++):(l=e,$===0&&C(Ci))))))))))))))),l!==e&&(D=s,l=hl()),s=l,M[h]={nextPos:n,result:s},s)}function ru(){var s,l,h,i=n*77+29,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===33?(l=Dr,n++):(l=e,$===0&&C(xn)),l!==e?(h=ye(),h!==e?(D=s,s=pl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qa(){var s,l,h,i,p=n*77+30,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,l=ia(),l!==e){if(h=[],i=on(),i===e&&(i=oa(),i===e&&(i=ws())),i!==e)for(;i!==e;)h.push(i),i=on(),i===e&&(i=oa(),i===e&&(i=ws()));else h=e;h!==e?(D=s,s=Oa(l,h)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function on(){var s,l,h,i,p,c,m=n*77+31,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===40?(l=S,n++):(l=e,$===0&&C(bt)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=su(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e?(D=s,s=vl(i)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function su(){var s,l,h,i,p,c,m=n*77+32,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=ye(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=ye(),c!==e?(D=i,i=Jn(l,c)):(n=i,i=e)):(n=i,i=e);D=s,s=gl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function oa(){var s,l,h,i,p,c,m=n*77+33,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=ye(),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=dl(i)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ws(){var s,l,h,i=n*77+34,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===46?(l=U,n++):(l=e,$===0&&C(Os)),l!==e?(h=De(),h!==e?(D=s,s=yl(h)):(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function nu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+35,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===Z?(l=Z,n+=2):(l=e,$===0&&C(_i)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;if(h!==e)if(i=ye(),i!==e){if(p=[],c=f(),c!==e)for(;c!==e;)p.push(c),c=f();else p=e;if(p!==e)if(c=be(),c!==e){if(m=n,y=[],b=f(),b!==e)for(;b!==e;)y.push(b),b=f();else y=e;if(y!==e?(b=au(),b!==e?m=b:(n=m,m=e)):(n=m,m=e),m===e&&(m=null),y=n,b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;b!==e?(A=iu(),A!==e?y=A:(n=y,y=e)):(n=y,y=e),y===e&&(y=null),D=s,s=wl(i,c,m,y)}else n=s,s=e;else n=s,s=e}else n=s,s=e;else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function au(){var s,l,h,i,p,c,m=n*77+36,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=Us(),l!==e){for(h=[],i=n,p=[],c=f();c!==e;)p.push(c),c=f();for(c=Us(),c!==e?i=c:(n=i,i=e);i!==e;){for(h.push(i),i=n,p=[],c=f();c!==e;)p.push(c),c=f();c=Us(),c!==e?i=c:(n=i,i=e)}D=s,s=ml(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Us(){var s,l,h,i,p,c,m,y=n*77+37,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,t.substr(n,4)===ne?(l=ne,n+=4):(l=e,$===0&&C(ki)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=be(),m!==e?(D=s,s=Ta(p,m)):(n=s,s=e)}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[y]={nextPos:n,result:s},s}function iu(){var s,l,h,i,p,c=n*77+38,m=M[c];if(m)return n=m.nextPos,m.result;if(s=n,t.substr(n,4)===pe?(l=pe,n+=4):(l=e,$===0&&C(Pi)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();p=be(),p!==e?(D=s,s=$l(p)):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[c]={nextPos:n,result:s},s}function za(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+39,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.substr(n,5)===ve?(l=ve,n+=5):(l=e,$===0&&C(Ts)),l!==e)if(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();if(p=ye(),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();if(t.charCodeAt(n)===123?(m=L,n++):(m=e,$===0&&C(Qe)),m!==e){for(y=[],b=f();b!==e;)y.push(b),b=f();if(b=[],A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;if(A!==e)for(;A!==e;)if(b.push(A),A=n,N=ye(),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();D=A,A=Zn(p,N,X)}else n=A,A=e}else n=A,A=e}else n=A,A=e;else b=e;if(b!==e){if(A=n,t.charCodeAt(n)===42?(N=Nt,n++):(N=e,$===0&&C(zn)),N!==e){for(O=[],B=f();B!==e;)O.push(B),B=f();if(t.substr(n,2)===le?(B=le,n+=2):(B=e,$===0&&C(ns)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();if(X=be(),X!==e){for(qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();A=X}else n=A,A=e}else n=A,A=e}else n=A,A=e;for(A===e&&(A=null),N=[],O=f();O!==e;)N.push(O),O=f();t.charCodeAt(n)===125?(O=K,n++):(O=e,$===0&&C(At)),O!==e?(D=s,s=xl(p,b,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function Va(){var s,l,h,i,p,c,m,y,b=n*77+40,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,t.substr(n,4)===Oe?(l=Oe,n+=4):(l=e,$===0&&C(Is)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(t.charCodeAt(n)===123?(i=L,n++):(i=e,$===0&&C(Qe)),i!==e){for(p=[],c=f();c!==e;)p.push(c),c=f();if(c=rr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();t.charCodeAt(n)===125?(y=K,n++):(y=e,$===0&&C(At)),y!==e?(D=s,s=bl(c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[b]={nextPos:n,result:s},s}function Wa(){var s,l,h,i,p=n*77+41,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,t.substr(n,6)===$e?(l=$e,n+=6):(l=e,$===0&&C(Ei)),l!==e){if(h=[],i=f(),i!==e)for(;i!==e;)h.push(i),i=f();else h=e;h!==e?(i=fa(),i!==e?(D=s,s=Al(i)):(n=s,s=e)):(n=s,s=e)}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function fa(){var s,l,h=n*77+42,i=M[h];return i?(n=i.nextPos,i.result):(s=n,l=Za(),l!==e&&(D=s,l=Ia(l)),s=l,M[h]={nextPos:n,result:s},s)}function ms(){var s,l,h,i,p,c,m=n*77+43,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===96?(l=xe,n++):(l=e,$===0&&C(as)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===96?(c=xe,n++):(c=e,$===0&&C(as)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=fn(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===96?(i=xe,n++):(i=e,$===0&&C(as)),i!==e?(D=s,s=Cl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function fn(){var s,l,h,i,p,c,m=n*77+44,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=ye(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?s=i:(n=s,s=e)}else n=s,s=e}else n=s,s=e;if(s===e){if(s=n,l=[],h=cn(),h!==e)for(;h!==e;)l.push(h),h=cn();else l=e;l!==e&&(D=s,l=ja(l)),s=l}return M[m]={nextPos:n,result:s},s}function cn(){var s,l=n*77+45,h=M[l];return h?(n=h.nextPos,h.result):(s=Ka(),s===e&&(Fs.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(js))),M[l]={nextPos:n,result:s},s)}function Ka(){var s,l,h,i=n*77+46,p=M[i];return p?(n=p.nextPos,p.result):(s=n,t.charCodeAt(n)===92?(l=Yt,n++):(l=e,$===0&&C(Un)),l!==e?(rs.test(t.charAt(n))?(h=t.charAt(n),n++):(h=e,$===0&&C(Rs)),h!==e?s=h:(n=s,s=e)):(n=s,s=e),M[i]={nextPos:n,result:s},s)}function qs(){var s,l,h,i,p,c,m=n*77+47,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===34?(l=ce,n++):(l=e,$===0&&C(is)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===34?(c=ce,n++):(c=e,$===0&&C(is)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=ca(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Qn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===34?(i=ce,n++):(i=e,$===0&&C(is)),i!==e?(D=s,s=_l(h)):(n=s,s=e)}else n=s,s=e;if(s===e)if(s=n,t.charCodeAt(n)===39?(l=Te,n++):(l=e,$===0&&C(ls)),l!==e){for(h=[],i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=n,$++,t.charCodeAt(n)===39?(c=Te,n++):(c=e,$===0&&C(ls)),$--,c===e?p=void 0:(n=p,p=e),p!==e?(c=hn(),c===e&&(t.length>n?(c=t.charAt(n),n++):(c=e,$===0&&C(Pt))),c!==e?(D=i,i=Xn(c)):(n=i,i=e)):(n=i,i=e);t.charCodeAt(n)===39?(i=Te,n++):(i=e,$===0&&C(ls)),i!==e?(D=s,s=kl(h)):(n=s,s=e)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function ca(){var s,l,h=n*77+48,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===We?(l=We,n+=2):(l=e,$===0&&C(Ds)),l!==e&&(D=s,l=Pl()),s=l,M[h]={nextPos:n,result:s},s)}function hn(){var s,l,h=n*77+49,i=M[h];return i?(n=i.nextPos,i.result):(s=n,t.substr(n,2)===Ve?(l=Ve,n+=2):(l=e,$===0&&C(Sa)),l!==e&&(D=s,l=El()),s=l,M[h]={nextPos:n,result:s},s)}function ha(){var s,l=n*77+50,h=M[l];return h?(n=h.nextPos,h.result):(s=lu(),s===e&&(s=Ga()),M[l]={nextPos:n,result:s},s)}function lu(){var s,l,h,i,p,c,m=n*77+51,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;if(h!==e)if(t.charCodeAt(n)===46?(i=U,n++):(i=e,$===0&&C(Os)),i!==e){if(p=[],xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St)),c!==e)for(;c!==e;)p.push(c),xt.test(t.charAt(n))?(c=t.charAt(n),n++):(c=e,$===0&&C(St));else p=e;p!==e?(D=s,s=Ml()):(n=s,s=e)}else n=s,s=e;else n=s,s=e}else n=s,s=e;if(s===e)if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e)if(t.charCodeAt(n)===46?(h=U,n++):(h=e,$===0&&C(Os)),h!==e){if(i=[],xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St)),p!==e)for(;p!==e;)i.push(p),xt.test(t.charAt(n))?(p=t.charAt(n),n++):(p=e,$===0&&C(St));else i=e;i!==e?(D=s,s=Sl()):(n=s,s=e)}else n=s,s=e;else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Ga(){var s,l,h,i,p=n*77+52,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),gt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Vn)),l!==e){if(h=[],xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St)),i!==e)for(;i!==e;)h.push(i),xt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(St));else h=e;h!==e?(D=s,s=Fl()):(n=s,s=e)}else n=s,s=e;return s===e&&(s=n,Tt.test(t.charAt(n))?(t.charAt(n),n++):$===0&&C(Mt),xt.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(St)),l!==e?(D=s,s=Nl()):(n=s,s=e)),M[p]={nextPos:n,result:s},s}function pa(){var s,l=n*77+53,h=M[l];return h?(n=h.nextPos,h.result):(s=uu(),s===e&&(s=Cn()),M[l]={nextPos:n,result:s},s)}function uu(){var s,l,h,i,p=n*77+54,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===Je?(l=Je,n+=4):(l=e,$===0&&C(Mi)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ra()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Cn(){var s,l,h,i,p=n*77+55,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,5)===Xe?(l=Xe,n+=5):(l=e,$===0&&C(Ls)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Ol()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function pn(){var s,l,h,i,p=n*77+56,c=M[p];return c?(n=c.nextPos,c.result):(s=n,t.substr(n,4)===rt?(l=rt,n+=4):(l=e,$===0&&C(Si)),l!==e?(h=n,$++,kt.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Rt)),$--,i===e?h=void 0:(n=h,h=e),h!==e?(D=s,s=Da()):(n=s,s=e)):(n=s,s=e),M[p]={nextPos:n,result:s},s)}function Ja(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+57,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=ye(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=Yn(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Tl(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function ou(){var s,l,h,i,p,c,m,y,b,A,N=n*77+58,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=ye(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ea(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Il(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function zs(){var s,l,h,i,p,c,m,y=n*77+59,b=M[y];if(b)return n=b.nextPos,b.result;if(s=n,l=De(),l!==e){for(h=n,i=[],p=f();p!==e;)i.push(p),p=f();if(t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e){for(c=[],m=f();m!==e;)c.push(m),m=f();m=He(),m!==e?h=m:(n=h,h=e)}else n=h,h=e;h===e&&(h=null),D=s,s=jl(l,h)}else n=s,s=e;return M[y]={nextPos:n,result:s},s}function va(){var s,l,h,i,p,c,m=n*77+60,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=zs(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=zs(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=La(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Xt(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X,qe,ze,ps=n*77+61,kr=M[ps];if(kr)return n=kr.nextPos,kr.result;if(s=n,t.charCodeAt(n)===64?(l=Ot,n++):(l=e,$===0&&C(Fi)),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(i=De(),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(t.charCodeAt(n)===40?(c=S,n++):(c=e,$===0&&C(bt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(y=va(),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();if(t.charCodeAt(n)===41?(A=F,n++):(A=e,$===0&&C(Zt)),A!==e){for(N=n,O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===58?(B=ie,n++):(B=e,$===0&&C(st)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();X=He(),X!==e?N=X:(n=N,N=e)}else n=N,N=e;for(N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();if(t.charCodeAt(n)===123?(B=L,n++):(B=e,$===0&&C(Qe)),B!==e){for(se=[],X=f();X!==e;)se.push(X),X=f();for(X=rr(),X===e&&(X=null),qe=[],ze=f();ze!==e;)qe.push(ze),ze=f();t.charCodeAt(n)===125?(ze=K,n++):(ze=e,$===0&&C(At)),ze!==e?(D=s,s=Rl(h,i,p,y,N,X)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[ps]={nextPos:n,result:s},s}function fu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se=n*77+62,X=M[se];if(X)return n=X.nextPos,X.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=va(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=n,y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===58?(b=ie,n++):(b=e,$===0&&C(st)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();N=He(),N!==e?m=N:(n=m,m=e)}else n=m,m=e;for(m===e&&(m=null),y=[],b=f();b!==e;)y.push(b),b=f();if(t.charCodeAt(n)===123?(b=L,n++):(b=e,$===0&&C(Qe)),b!==e){for(A=[],N=f();N!==e;)A.push(N),N=f();for(N=rr(),N===e&&(N=null),O=[],B=f();B!==e;)O.push(B),B=f();t.charCodeAt(n)===125?(B=K,n++):(B=e,$===0&&C(At)),B!==e?(D=s,s=Ha(i,m,N)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[se]={nextPos:n,result:s},s}function cu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+63,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.charCodeAt(n)===91?(l=jt,n++):(l=e,$===0&&C(Xr)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=sr(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();for(t.charCodeAt(n)===44?(y=J,n++):(y=e,$===0&&C(Ye)),y===e&&(y=null),b=[],A=f();A!==e;)b.push(A),A=f();D=p,p=ta(c)}else n=p,p=e;for(p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===93?(c=V,n++):(c=e,$===0&&C(Kr)),c!==e?(D=s,s=Dl(i)):(n=s,s=e)}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function hu(){var s,l,h,i,p,c,m,y,b,A,N,O,B,se,X=n*77+64,qe=M[X];if(qe)return n=qe.nextPos,qe.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();if(i=[],p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;for(;p!==e;)if(i.push(p),p=n,c=De(),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.charCodeAt(n)===58?(y=ie,n++):(y=e,$===0&&C(st)),y!==e){if(b=[],A=f(),A!==e)for(;A!==e;)b.push(A),A=f();else b=e;if(b!==e)if(A=sr(),A!==e){for(N=[],O=f();O!==e;)N.push(O),O=f();for(t.charCodeAt(n)===44?(O=J,n++):(O=e,$===0&&C(Ye)),O===e&&(t.charCodeAt(n)===59?(O=ft,n++):(O=e,$===0&&C(Gr))),O===e&&(O=null),B=[],se=f();se!==e;)B.push(se),se=f();D=p,p=ra(c,A)}else n=p,p=e;else n=p,p=e}else n=p,p=e}else n=p,p=e;t.charCodeAt(n)===125?(p=K,n++):(p=e,$===0&&C(At)),p!==e?(D=s,s=Ll(i)):(n=s,s=e)}else n=s,s=e;return M[X]={nextPos:n,result:s},s}function He(){var s,l=n*77+65,h=M[l];return h?(n=h.nextPos,h.result):(s=pu(),s===e&&(s=Jt()),M[l]={nextPos:n,result:s},s)}function pu(){var s,l,h,i,p,c,m,y,b,A,N=n*77+66,O=M[N];if(O)return n=O.nextPos,O.result;if(s=n,t.substr(n,2)===qt?(l=qt,n+=2):(l=e,$===0&&C(nn)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=Yr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();if(t.charCodeAt(n)===41?(c=F,n++):(c=e,$===0&&C(Zt)),c!==e){for(m=[],y=f();y!==e;)m.push(y),y=f();if(t.substr(n,2)===le?(y=le,n+=2):(y=e,$===0&&C(ns)),y!==e){for(b=[],A=f();A!==e;)b.push(A),A=f();A=He(),A!==e?(D=s,s=Hl(i,A)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return M[N]={nextPos:n,result:s},s}function Yr(){var s,l,h,i,p,c,m=n*77+67,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=He(),l!==e){for(h=[],i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,p=_(),p!==e?(c=He(),c!==e?i=c:(n=i,i=e)):(n=i,i=e);D=s,s=Bl(l,h)}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function Jt(){var s,l,h,i,p,c,m,y,b=n*77+68,A=M[b];if(A)return n=A.nextPos,A.result;if(s=n,l=De(),l!==e){for(h=[],i=w();i!==e;)h.push(i),i=w();if(t.charCodeAt(n)===60?(i=tt,n++):(i=e,$===0&&C(sn)),i!==e){for(p=[],c=w();c!==e;)p.push(c),c=w();if(c=He(),c!==e){for(m=[],y=w();y!==e;)m.push(y),y=w();t.charCodeAt(n)===62?(y=Rr,n++):(y=e,$===0&&C(qn)),y!==e?(D=s,s=Ul(l,c)):(n=s,s=e)}else n=s,s=e}else n=s,s=e}else n=s,s=e;return s===e&&(s=n,l=De(),l!==e&&(D=s,l=ql(l)),s=l),M[b]={nextPos:n,result:s},s}function De(){var s,l,h,i,p=n*77+69,c=M[p];if(c)return n=c.nextPos,c.result;if(s=n,ka.test(t.charAt(n))?(l=t.charAt(n),n++):(l=e,$===0&&C(Ni)),l!==e){for(h=[],Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));i!==e;)h.push(i),Bn.test(t.charAt(n))?(i=t.charAt(n),n++):(i=e,$===0&&C(Wn));D=s,s=u()}else n=s,s=e;return M[p]={nextPos:n,result:s},s}function Za(){var s,l,h,i,p,c,m=n*77+70,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,l=De(),l!==e){for(h=[],i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);i!==e;)h.push(i),i=n,t.charCodeAt(n)===58?(p=ie,n++):(p=e,$===0&&C(st)),p!==e?(c=De(),c!==e?(p=[p,c],i=p):(n=i,i=e)):(n=i,i=e);D=s,s=G()}else n=s,s=e;return M[m]={nextPos:n,result:s},s}function _(){var s,l,h,i,p,c=n*77+71,m=M[c];if(m)return n=m.nextPos,m.result;for(s=n,l=[],h=f();h!==e;)l.push(h),h=f();if(t.charCodeAt(n)===44?(h=J,n++):(h=e,$===0&&C(Ye)),h!==e){for(i=[],p=f();p!==e;)i.push(p),p=f();l=[l,h,i],s=l}else n=s,s=e;if(s===e)if(s=[],l=f(),l!==e)for(;l!==e;)s.push(l),l=f();else s=e;return M[c]={nextPos:n,result:s},s}function be(){var s,l,h,i,p,c,m=n*77+72,y=M[m];if(y)return n=y.nextPos,y.result;if(s=n,t.charCodeAt(n)===123?(l=L,n++):(l=e,$===0&&C(Qe)),l!==e){for(h=[],i=f();i!==e;)h.push(i),i=f();for(i=rr(),i===e&&(i=null),p=[],c=f();c!==e;)p.push(c),c=f();t.charCodeAt(n)===125?(c=K,n++):(c=e,$===0&&C(At)),c!==e?(D=s,s=Hs(i)):(n=s,s=e)}else n=s,s=e;return s===e&&(s=Cr()),M[m]={nextPos:n,result:s},s}function ae(){var s,l=n*77+73,h=M[l];return h?(n=h.nextPos,h.result):(t.substr(n,2)===Ft?(s=Ft,n+=2):(s=e,$===0&&C(Oi)),s===e&&(li.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ti))),M[l]={nextPos:n,result:s},s)}function o(){var s,l,h=n*77+74,i=M[h];return i?(n=i.nextPos,i.result):(s=n,$++,t.length>n?(l=t.charAt(n),n++):(l=e,$===0&&C(Pt)),$--,l===e?s=void 0:(n=s,s=e),s===e&&(s=ae()),M[h]={nextPos:n,result:s},s)}function f(){var s,l=n*77+75,h=M[l];return h?(n=h.nextPos,h.result):(ui.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(Ii)),M[l]={nextPos:n,result:s},s)}function w(){var s,l=n*77+76,h=M[l];return h?(n=h.nextPos,h.result):(ir.test(t.charAt(n))?(s=t.charAt(n),n++):(s=e,$===0&&C(ji)),M[l]={nextPos:n,result:s},s)}function g(s,l,h){const i={type:s};l.children=h;for(const c of Object.keys(l))l[c]!==void 0&&(i[c]=l[c]);const p=tr();return i.loc={start:p.start.offset,end:p.end.offset-1},i}if(us=d(),us!==e&&n===t.length)return us;throw us!==e&&n<t.length&&C(T()),Vl(Hr,I<t.length?t.charAt(I):null,I<t.length?os(I,I+1):os(I,I))}const Cb=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function _b(t){return Cb.includes(t.type)}function Zd(t){return"chain"in t&&t.chain!==null}function kb(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Pb(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Eb(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function pt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=pt(e.expr,r);break}case"return":{e.expr=pt(e.expr,r);break}case"each":{e.items=pt(e.items,r),e.for=pt(e.for,r);break}case"for":{e.from!=null&&(e.from=pt(e.from,r)),e.to!=null&&(e.to=pt(e.to,r)),e.times!=null&&(e.times=pt(e.times,r)),e.for=pt(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=pt(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=pt(e.expr,r),e.dest=pt(e.dest,r);break}case"infix":{for(let a=0;a<e.operands.length;a++)e.operands[a]=pt(e.operands[a],r);break}case"not":{e.expr=pt(e.expr,r);break}case"if":{e.cond=pt(e.cond,r),e.then=pt(e.then,r);for(const a of e.elseif)a.cond=pt(a.cond,r),a.then=pt(a.then,r);e.else!=null&&(e.else=pt(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=pt(e.children[a],r);break}case"match":{e.about=pt(e.about,r);for(const a of e.qs)a.q=pt(a.q,r),a.a=pt(a.a,r);e.default!=null&&(e.default=pt(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=pt(e.statements[a],r);break}case"exists":{e.identifier=pt(e.identifier,r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=pt(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],pt(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=pt(e.value[a],r);break}case"callChain":{for(let a=0;a<e.args.length;a++)e.args[a]=pt(e.args[a],r);break}case"indexChain":{e.index=pt(e.index,r);break}case"call":{e.target=pt(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=pt(e.args[a],r);break}case"index":{e.target=pt(e.target,r),e.index=pt(e.index,r);break}case"prop":{e.target=pt(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=pt(e.members[a],r);break}case"or":case"and":{e.left=pt(e.left,r),e.right=pt(e.right,r);break}}if(Zd(e)&&e.chain!=null)for(let a=0;a<e.chain.length;a++)e.chain[a]=pt(e.chain[a],r);return e}const Ah=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Ch(t){throw new Eo(`Reserved word "${t}" cannot be used as variable name.`)}function Mb(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Ah.includes(t.name)&&Ch(t.name);break}case"meta":{t.name!=null&&Ah.includes(t.name)&&Ch(t.name);break}case"fn":{for(const r of t.args)Ah.includes(r.name)&&Ch(r.name);break}}return t}function Sb(t){for(const r of t)pt(r,Mb);return t}function vg(t){return{type:"simple",name:t}}function Fb(t,r){return{type:"generic",name:t,inners:r}}function Nb(t,r){return{type:"fn",args:t,result:r}}function hc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=hc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>hc(a)).join(", "),e=hc(t.result);return`@(${r}) { ${e} }`}}}function rf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return vg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=rf(t.inner):r=vg("any"),Fb(t.name,[r])}}throw new Eo(`Unknown type: '${hc(t)}'`)}else{const r=t.args.map(e=>rf(e));return Nb(r,rf(t.result))}}function Ob(t){switch(t.type){case"def":{t.varType!=null&&rf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&rf(r.argType);t.retType!=null&&rf(t.retType);break}}return t}function Tb(t){for(const r of t)pt(r,Ob);return t}function pc(t){const r=[],e=[];for(const a of t)if(a.type==="attr")e.push(a);else if(a.type==="def")a.attr==null&&(a.attr=[]),a.attr.push(...e),e.splice(0,e.length),a.expr.type==="fn"&&(a.expr.children=pc(a.expr.children)),r.push(a);else{if(e.length>0)throw new Eo("invalid attribute.");switch(a.type){case"fn":{a.children=pc(a.children);break}case"block":{a.statements=pc(a.statements);break}}r.push(a)}if(e.length>0)throw new Eo("invalid attribute.");return r}function Ib(t){if(_b(t)&&Zd(t)&&t.chain!=null){const{chain:r,...e}=t;let a=e;for(const v of r)switch(v.type){case"callChain":{a=kb(a,v.args,v.loc);break}case"indexChain":{a=Pb(a,v.index,v.loc);break}case"propChain":{a=Eb(a,v.name,v.loc);break}}return a}return t}function jb(t){for(let r=0;r<t.length;r++)t[r]=pt(t[r],Ib);return t}function vc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Qd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return vc(t,r,e);{const{left:a,right:v,info:d}=t;return vc(a,Qd(v,r,e),d)}}function uo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[uo(t.left),uo(t.right)]}}const Rb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:uo(t.left),right:uo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:uo(t.left),right:uo(t.right)}),priority:3}};function Db(t){const r=t.operators.map(a=>{const v=Rb[a];if(v==null)throw new Eo(`No such operator: ${a}.`);return v});let e=vc(t.operands[0],t.operands[1],r[0]);for(let a=0;a<r.length-1;a++)e=Qd(e,t.operands[2+a],r[1+a]);return uo(e)}function Lb(t){for(let r=0;r<t.length;r++)t[r]=pt(t[r],e=>e.type==="infix"?Db(e):e);return t}var wu;let Hb=(wu=class{constructor(){ge(this,"plugins");this.plugins={validate:[Sb,Tb],transform:[pc,jb,Lb]}}static parse(r){return wu.instance==null&&(wu.instance=new wu),wu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const a=pg(r,{startRule:"Preprocess"});e=pg(a,{startRule:"Main"})}catch(a){throw a.location?a.expected?new Eo(`Parsing error. (Line ${a.location.start.line}:${a.location.start.column})`,a):new Eo(`${a.message} (Line ${a.location.start.line}:${a.location.start.column})`,a):a}for(const a of this.plugins.validate)e=a(e);for(const a of this.plugins.transform)e=a(e);return e}},ge(wu,"instance"),wu);const Bb="0.16.0",Ub={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let gp=[],Cf=null;function qb(t){return gp=Hb.parse(t),JSON.stringify(gp,null,"	")}async function zb(t){Cf==null||Cf.abort(),Cf=new Ss({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:hp(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:hp(e.val,!0),print:!1});break}}});try{await Cf.exec(gp)}catch(r){t.err(r)}}const Vb=Object.freeze(Object.defineProperty({__proto__:null,exec:zb,parse:qb,samples:Ub,version:Bb},Symbol.toStringTag,{value:"Module"}));function gc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gc=function(e){return typeof e}:gc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function Xd(t,r,e){var a=e.value;if(typeof a!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(gc(a)));var v=!1;return{configurable:!0,get:function(){if(v||this===t.prototype||this.hasOwnProperty(r)||typeof a!="function")return a;var x=a.bind(this);return v=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return x},set:function(E){a=E,delete this[r]}}),v=!1,x},set:function(x){a=x}}}function Wb(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var a=Object.getOwnPropertyDescriptor(t.prototype,e);typeof a.value=="function"&&Object.defineProperty(t.prototype,e,Xd(t,e,a))}}),t}function $t(){return arguments.length===1?Wb.apply(void 0,arguments):Xd.apply(void 0,arguments)}let Yd=class ey extends Error{constructor(e,a){super(e);ge(this,"info");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,ey)}},Mo=class extends Yd{constructor(r,e){super(r,e)}},gr=class extends Yd{constructor(r,e){super(r,e)}},Kb=class extends gr{constructor(r,e){super(r,e)}};var Io=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Qu=class ty{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new ty(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r);return this.log("read",{var:r,val:a}),a}throw new gr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new gr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new gr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Io([$t],Qu.prototype,"log",null);Io([$t],Qu.prototype,"onUpdated",null);Io([$t],Qu.prototype,"createChildScope",null);Io([$t],Qu.prototype,"get",null);Io([$t],Qu.prototype,"getAll",null);Io([$t],Qu.prototype,"add",null);Io([$t],Qu.prototype,"assign",null);let Yf;const Gb=new Uint8Array(16);function Jb(){if(!Yf&&(Yf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yf(Gb)}const gs=[];for(let t=0;t<256;++t)gs.push((t+256).toString(16).slice(1));function Zb(t,r=0){return(gs[t[r+0]]+gs[t[r+1]]+gs[t[r+2]]+gs[t[r+3]]+"-"+gs[t[r+4]]+gs[t[r+5]]+"-"+gs[t[r+6]]+gs[t[r+7]]+"-"+gs[t[r+8]]+gs[t[r+9]]+"-"+gs[t[r+10]]+gs[t[r+11]]+gs[t[r+12]]+gs[t[r+13]]+gs[t[r+14]]+gs[t[r+15]]).toLowerCase()}const Qb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),gg={randomUUID:Qb};function Xb(t,r,e){if(gg.randomUUID&&!r&&!t)return gg.randomUUID();t=t||{};const a=t.random||(t.rng||Jb)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=a[v];return r}return Zb(a)}const nr={type:"null"},$a={type:"bool",value:!0},Sn={type:"bool",value:!1},Le=t=>({type:"num",value:t}),pr=t=>({type:"str",value:t}),sf=t=>({type:"bool",value:t}),sv=t=>({type:"obj",value:t}),xs=t=>({type:"arr",value:t}),Yb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),we=t=>({type:"fn",native:t}),e1=t=>({type:"return",value:t}),t1=()=>({type:"break",value:null}),r1=()=>({type:"continue",value:null}),s1=t=>t.type==="return"?t.value:t;function jn(t){if(t==null)throw new gr("Expect anything, but got nothing.")}function Zs(t){if(t==null)throw new gr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new gr(`Expect boolean, but got ${t.type}.`)}function Hu(t){if(t==null)throw new gr("Expect function, but got nothing.");if(t.type!=="fn")throw new gr(`Expect function, but got ${t.type}.`)}function fs(t){if(t==null)throw new gr("Expect string, but got nothing.");if(t.type!=="str")throw new gr(`Expect string, but got ${t.type}.`)}function Ie(t){if(t==null)throw new gr("Expect number, but got nothing.");if(t.type!=="num")throw new gr(`Expect number, but got ${t.type}.`)}function Fu(t){if(t==null)throw new gr("Expect object, but got nothing.");if(t.type!=="obj")throw new gr(`Expect object, but got ${t.type}.`)}function nf(t){if(t==null)throw new gr("Expect array, but got nothing.");if(t.type!=="arr")throw new gr(`Expect array, but got ${t.type}.`)}function n1(t){return t.type==="str"}function a1(t){return t.type==="num"}function i1(t){return t.type==="obj"}function l1(t){return t.type==="arr"}function dp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function yp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>yp(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function wp(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>wp(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=wp(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function mp(t){if(t===null)return nr;if(typeof t=="boolean")return sf(t);if(typeof t=="string")return pr(t);if(typeof t=="number")return Le(t);if(Array.isArray(t))return xs(t.map(r=>mp(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,mp(a));return sv(r)}return nr}const u1={help:pr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":pr("0.14.1"),"Core:ai":pr("kawaii"),"Core:not":we(([t])=>(Zs(t),t.value?Sn:$a)),"Core:eq":we(([t,r])=>(jn(t),jn(r),dp(t,r)?$a:Sn)),"Core:neq":we(([t,r])=>(jn(t),jn(r),dp(t,r)?Sn:$a)),"Core:and":we(([t,r])=>(Zs(t),t.value?(Zs(r),r.value?$a:Sn):Sn)),"Core:or":we(([t,r])=>(Zs(t),t.value?$a:(Zs(r),r.value?$a:Sn))),"Core:add":we(([t,r])=>(Ie(t),Ie(r),Le(t.value+r.value))),"Core:sub":we(([t,r])=>(Ie(t),Ie(r),Le(t.value-r.value))),"Core:mul":we(([t,r])=>(Ie(t),Ie(r),Le(t.value*r.value))),"Core:pow":we(([t,r])=>{Ie(t),Ie(r);const e=t.value**r.value;if(isNaN(e))throw new gr("Invalid operation.");return Le(e)}),"Core:div":we(([t,r])=>{Ie(t),Ie(r);const e=t.value/r.value;if(isNaN(e))throw new gr("Invalid operation.");return Le(e)}),"Core:mod":we(([t,r])=>(Ie(t),Ie(r),Le(t.value%r.value))),"Core:gt":we(([t,r])=>(Ie(t),Ie(r),t.value>r.value?$a:Sn)),"Core:lt":we(([t,r])=>(Ie(t),Ie(r),t.value<r.value?$a:Sn)),"Core:gteq":we(([t,r])=>(Ie(t),Ie(r),t.value>=r.value?$a:Sn)),"Core:lteq":we(([t,r])=>(Ie(t),Ie(r),t.value<=r.value?$a:Sn)),"Core:type":we(([t])=>(jn(t),pr(t.type))),"Core:to_str":we(([t])=>(jn(t),t.type==="str"?t:t.type==="num"?pr(t.value.toString()):pr("?"))),"Core:range":we(([t,r])=>(Ie(t),Ie(r),t.value<r.value?xs(Array.from({length:r.value-t.value+1},(e,a)=>Le(a+t.value))):t.value>r.value?xs(Array.from({length:t.value-r.value+1},(e,a)=>Le(t.value-a))):xs([t]))),"Util:uuid":we(()=>pr(Xb())),"Json:stringify":we(([t])=>(jn(t),pr(JSON.stringify(wp(t))))),"Json:parse":we(([t])=>(fs(t),mp(JSON.parse(t.value)))),"Json:parsable":we(([t])=>{fs(t);try{JSON.parse(t.value)}catch{return sf(!1)}return sf(!0)}),"Date:now":we(()=>Le(Date.now())),"Date:year":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":we(([t])=>(t&&Ie(t),Le(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":we(([t])=>(fs(t),Le(new Date(t.value).getTime()))),"Math:Infinity":Le(1/0),"Math:E":Le(Math.E),"Math:LN2":Le(Math.LN2),"Math:LN10":Le(Math.LN10),"Math:LOG2E":Le(Math.LOG2E),"Math:LOG10E":Le(Math.LOG10E),"Math:PI":Le(Math.PI),"Math:SQRT1_2":Le(Math.SQRT1_2),"Math:SQRT2":Le(Math.SQRT2),"Math:abs":we(([t])=>(Ie(t),Le(Math.abs(t.value)))),"Math:acos":we(([t])=>(Ie(t),Le(Math.acos(t.value)))),"Math:acosh":we(([t])=>(Ie(t),Le(Math.acosh(t.value)))),"Math:asin":we(([t])=>(Ie(t),Le(Math.asin(t.value)))),"Math:asinh":we(([t])=>(Ie(t),Le(Math.asinh(t.value)))),"Math:atan":we(([t])=>(Ie(t),Le(Math.atan(t.value)))),"Math:atanh":we(([t])=>(Ie(t),Le(Math.atanh(t.value)))),"Math:atan2":we(([t,r])=>(Ie(t),Ie(r),Le(Math.atan2(t.value,r.value)))),"Math:cbrt":we(([t])=>(Ie(t),Le(Math.cbrt(t.value)))),"Math:ceil":we(([t])=>(Ie(t),Le(Math.ceil(t.value)))),"Math:clz32":we(([t])=>(Ie(t),Le(Math.clz32(t.value)))),"Math:cos":we(([t])=>(Ie(t),Le(Math.cos(t.value)))),"Math:cosh":we(([t])=>(Ie(t),Le(Math.cosh(t.value)))),"Math:exp":we(([t])=>(Ie(t),Le(Math.exp(t.value)))),"Math:expm1":we(([t])=>(Ie(t),Le(Math.expm1(t.value)))),"Math:floor":we(([t])=>(Ie(t),Le(Math.floor(t.value)))),"Math:fround":we(([t])=>(Ie(t),Le(Math.fround(t.value)))),"Math:hypot":we(([t])=>{nf(t);const r=[];for(const e of t.value)Ie(e),r.push(e.value);return Le(Math.hypot(...r))}),"Math:imul":we(([t,r])=>(Ie(t),Ie(r),Le(Math.imul(t.value,r.value)))),"Math:log":we(([t])=>(Ie(t),Le(Math.log(t.value)))),"Math:log1p":we(([t])=>(Ie(t),Le(Math.log1p(t.value)))),"Math:log10":we(([t])=>(Ie(t),Le(Math.log10(t.value)))),"Math:log2":we(([t])=>(Ie(t),Le(Math.log2(t.value)))),"Math:max":we(([t,r])=>(Ie(t),Ie(r),Le(Math.max(t.value,r.value)))),"Math:min":we(([t,r])=>(Ie(t),Ie(r),Le(Math.min(t.value,r.value)))),"Math:pow":we(([t,r])=>(Ie(t),Ie(r),Le(Math.pow(t.value,r.value)))),"Math:round":we(([t])=>(Ie(t),Le(Math.round(t.value)))),"Math:sign":we(([t])=>(Ie(t),Le(Math.sign(t.value)))),"Math:sin":we(([t])=>(Ie(t),Le(Math.sin(t.value)))),"Math:sinh":we(([t])=>(Ie(t),Le(Math.sinh(t.value)))),"Math:sqrt":we(([t])=>{Ie(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new gr("Invalid operation.");return Le(r)}),"Math:tan":we(([t])=>(Ie(t),Le(Math.tan(t.value)))),"Math:tanh":we(([t])=>(Ie(t),Le(Math.tanh(t.value)))),"Math:trunc":we(([t])=>(Ie(t),Le(Math.trunc(t.value)))),"Math:rnd":we(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Le(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Le(Math.random())),"Math:gen_rng":we(([t])=>{if(jn(t),t.type!=="num"&&t.type!=="str")return nr;const r=df(t.value.toString());return we(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?Le(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Le(r()))}),"Num:to_hex":we(([t])=>(Ie(t),pr(t.value.toString(16)))),"Num:from_hex":we(([t])=>(fs(t),Le(parseInt(t.value,16)))),"Str:lf":pr(`
`),"Str:lt":we(([t,r])=>(fs(t),fs(r),t.value<r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:gt":we(([t,r])=>(fs(t),fs(r),t.value>r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Obj:keys":we(([t])=>(Fu(t),xs(Array.from(t.value.keys()).map(r=>pr(r))))),"Obj:vals":we(([t])=>(Fu(t),xs(Array.from(t.value.values())))),"Obj:kvs":we(([t])=>(Fu(t),xs(Array.from(t.value.entries()).map(([r,e])=>xs([pr(r),e]))))),"Obj:get":we(([t,r])=>(Fu(t),fs(r),t.value.get(r.value)??nr)),"Obj:set":we(([t,r,e])=>(Fu(t),fs(r),jn(e),t.value.set(r.value,e),nr)),"Obj:has":we(([t,r])=>(Fu(t),fs(r),sf(t.value.has(r.value)))),"Obj:copy":we(([t])=>(Fu(t),sv(new Map(t.value)))),"Async:interval":we(async([t,r,e],a)=>{Ie(t),Hu(r),e&&(Zs(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.call(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),we(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":we(async([t,r],e)=>{Ie(t),Hu(r);const a=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),we(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})},Lo={num:{to_str:t=>we(async(r,e)=>pr(t.value.toString()))},str:{to_num:t=>we(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?nr:Le(a)}),len:t=>Le(yf(t.value)),replace:t=>we(async([r,e],a)=>(fs(r),fs(e),pr(t.value.split(r.value).join(e.value)))),index_of:t=>we(async([r],e)=>(fs(r),Le(mf(t.value,r.value)))),incl:t=>we(async([r],e)=>(fs(r),t.value.includes(r.value)?$a:Sn)),trim:t=>we(async(r,e)=>pr(t.value.trim())),upper:t=>we(async(r,e)=>pr(t.value.toUpperCase())),lower:t=>we(async(r,e)=>pr(t.value.toLowerCase())),split:t=>we(async([r],e)=>(r&&fs(r),xs(r?t.value.split(r?r.value:"").map(a=>pr(a)):Ys(t.value).map(a=>pr(a))))),slice:t=>we(async([r,e],a)=>(Ie(r),Ie(e),pr(wf(t.value,r.value,e.value)))),pick:t=>we(async([r],e)=>{Ie(r);const v=Ys(t.value)[r.value];return v?pr(v):nr})},arr:{len:t=>Le(t.value.length),push:t=>we(async([r],e)=>(jn(r),t.value.push(r),t)),unshift:t=>we(async([r],e)=>(jn(r),t.value.unshift(r),t)),pop:t=>we(async(r,e)=>t.value.pop()??nr),shift:t=>we(async(r,e)=>t.value.shift()??nr),concat:t=>we(async([r],e)=>(nf(r),xs(t.value.concat(r.value)))),slice:t=>we(async([r,e],a)=>(Ie(r),Ie(e),xs(t.value.slice(r.value,e.value)))),join:t=>we(async([r],e)=>(r&&fs(r),pr(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>we(async([r],e)=>{Hu(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,Le(d)]));return xs(await Promise.all(a))}),filter:t=>we(async([r],e)=>{Hu(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,Le(v)]);Zs(x),x.value&&a.push(d)}return xs(a)}),reduce:t=>we(async([r,e],a)=>{Hu(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,Le(x)])}return d}),find:t=>we(async([r],e)=>{Hu(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,Le(a)]);if(Zs(d),d.value)return v}return nr}),incl:t=>we(async([r],e)=>(jn(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Sn:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?$a:Sn)),reverse:t=>we(async(r,e)=>(t.value.reverse(),nr)),copy:t=>we(async(r,e)=>xs([...t.value])),sort:t=>we(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);Ie(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return Hu(r),nf(t),t.value=await a(t.value,r),t})}};var Ln=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const ry=300,o1=ry-1;let wn=class{constructor(r,e){ge(this,"vars");ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);this.opts=e??{};const a={print:we(([v])=>{jn(v),this.opts.out&&this.opts.out(v)}),readline:we(async v=>{const d=v[0];if(fs(d),this.opts.in==null)return nr;const x=await this.opts.in(d.value);return pr(x)})};this.vars={...r,...u1,...a},this.scope=new Qu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{const v=await this._eval(a.expr,e);e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+a.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??nr;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],e[d]);const v=r.scope.createChildScope(a);return s1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return nr;if(this.stepCount%ry===o1&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new gr("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);Hu(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Zs(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Zs(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return nr}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(dp(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):nr}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return nr}case"for":{if(r.times){const a=await this._eval(r.times,e);Ie(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);Ie(a),Ie(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,Le(d)]])));if(x.type==="break")break;if(x.type==="return")return x}}return nr}case"each":{const a=await this._eval(r.items,e);nf(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(d.type==="break")break;if(d.type==="return")return d}return nr}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,a),nr}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),nr}case"addAssign":{const a=await this._eval(r.dest,e);Ie(a);const v=await this._eval(r.expr,e);return Ie(v),await this.assign(e,r.dest,Le(a.value+v.value)),nr}case"subAssign":{const a=await this._eval(r.dest,e);Ie(a);const v=await this._eval(r.expr,e);return Ie(v),await this.assign(e,r.dest,Le(a.value-v.value)),nr}case"null":return nr;case"bool":return sf(r.value);case"num":return Le(r.value);case"str":return pr(r.value);case"arr":return xs(await Promise.all(r.value.map(async a=>await this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return sv(a)}case"prop":{const a=await this._eval(r.target,e);if(i1(a))return a.value.has(r.name)?a.value.get(r.name):nr;if(a1(a)){if(Object.hasOwn(Lo.num,r.name))return Lo.num[r.name](a);throw new gr(`No such prop (${r.name}) in ${a.type}.`)}else if(n1(a)){if(Object.hasOwn(Lo.str,r.name))return Lo.str[r.name](a);throw new gr(`No such prop (${r.name}) in ${a.type}.`)}else if(l1(a)){if(Object.hasOwn(Lo.arr,r.name))return Lo.arr[r.name](a);throw new gr(`No such prop (${r.name}) in ${a.type}.`)}else throw new gr(`Cannot read prop (${r.name}) of ${a.type}.`)}case"index":{const a=await this._eval(r.target,e);nf(a);const v=await this._eval(r.index,e);Ie(v);const d=a.value[v.value];if(d===void 0)throw new Kb(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}case"not":{const a=await this._eval(r.expr,e);return Zs(a),sf(!a.value)}case"fn":return Yb(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);let x="";d.type==="str"?x=d.value:d.type==="num"&&(x=d.value.toString()),a+=x}return pr(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),e1(a)}case"break":return this.log("block:break",{scope:e.name}),t1();case"continue":return this.log("block:continue",{scope:e.name}),r1();case"ns":return nr;case"meta":return nr;case"and":{const a=await this._eval(r.left,e);if(Zs(a),a.value){const v=await this._eval(r.right,e);return Zs(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Zs(a),a.value)return a;{const v=await this._eval(r.right,e);return Zs(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=nr;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r);nf(v);const d=await this._eval(e.index,r);Ie(d),v.value[d.value]=a}else if(e.type==="prop"){const v=await this._eval(e.target,r);Fu(v),v.value.set(e.name,a)}else throw new gr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ln([$t],wn.prototype,"exec",null);Ln([$t],wn.prototype,"execFn",null);Ln([$t],wn.prototype,"log",null);Ln([$t],wn.prototype,"collectNs",null);Ln([$t],wn.prototype,"collectNsMember",null);Ln([$t],wn.prototype,"_fn",null);Ln([$t],wn.prototype,"_eval",null);Ln([$t],wn.prototype,"_run",null);Ln([$t],wn.prototype,"registerAbortHandler",null);Ln([$t],wn.prototype,"unregisterAbortHandler",null);Ln([$t],wn.prototype,"abort",null);Ln([$t],wn.prototype,"assign",null);Ln([$t],wn,"collectMetadata",null);function f1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Ao(t,r,e,a){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Ao.prototype),v.expected=r,v.found=e,v.location=a,v.name="SyntaxError",v}f1(Ao,Error);function _h(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Ao.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,a;for(a=0;a<t.length;a++)if(t[a].source===this.location.source){e=t[a].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,x=this.location.source+":"+d.line+":"+d.column;if(e){var k=this.location.end,E=_h("",d.line.toString().length," "),S=e[v.line-1],F=v.line===k.line?k.column:S.length+1,j=F-v.column||1;r+=`
 --> `+x+`
`+E+` |
`+d.line+" | "+S+`
`+E+" | "+_h("",v.column-1," ")+_h("",j,"^")}else r+=`
 at `+x}return r};Ao.buildMessage=function(t,r){var e={literal:function(S){return'"'+v(S.text)+'"'},class:function(S){var F=S.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(S.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function a(S){return S.charCodeAt(0).toString(16).toUpperCase()}function v(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function d(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function x(S){return e[S.type](S)}function k(S){var F=S.map(x),j,L;if(F.sort(),F.length>0){for(j=1,L=1;j<F.length;j++)F[j-1]!==F[j]&&(F[L]=F[j],L++);F.length=L}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function E(S){return S?'"'+v(S)+'"':"end of input"}return"Expected "+k(t)+" but "+E(r)+" found."};function dg(t,r){r=r!==void 0?r:{};var e={},a=r.grammarSource,v={Preprocess:C,Main:na},d=C,x="//",k="/*",E="*/",S="(",F=")",j="::",L="{",K="}",he="###",re="let",ie=":",Ce="=",q="var",H="<:",z="#[",V="]",W="each",J=",",Y="for",te="return",Ae="loop",Ee="break",me="continue",Ge="+=",ut="-=",Yt="\\",ot="||",it="&&",Be="==",lt="!=",It="<=",Ut=">=",tt="<",Rr=">",er="+",Ar="-",Nt="*",$r="^",Vr="/",Or="%",Dr="!",jt="[",U=".",Z="if",ne="elif",pe="else",ve="match",le="=>",Oe="eval",$e="`",xe='"',ce="'",Te='\\"',We="\\'",Ve="true",Je="false",Xe="null",rt=";",ft="@",Ot="@(",qt=`\r
`,Ft=/^[A-Z0-9_:]/i,kt=/^[^`{]/,Fs=/^[{}`]/,rs=/^[+\-]/,Tt=/^[1-9]/,gt=/^[0-9]/,xt=/^[A-Z_]/i,ka=/^[A-Z0-9_]/i,Bn=/^[\r\n]/,li=/^[ \t\r\n]/,ui=/^[ \t]/,ir=zl(),Pt=ee("//",!1),oi=ee("/*",!1),$n=ee("*/",!1),yr=ee("(",!1),bt=ee(")",!1),Zt=ee("::",!1),lr=ee("{",!1),Qe=ee("}",!1),At=ee("###",!1),Wr=ee("let",!1),dt=ee(":",!1),st=ee("=",!1),Lr=ee("var",!1),fi=ee("<:",!1),ci=ee("#[",!1),Ns=ee("]",!1),Kr=ee("each",!1),Et=ee(",",!1),Ye=ee("for",!1),ss=ee("return",!1),wr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),Rt=ee("loop",!1),hi=ee("break",!1),pi=ee("continue",!1),vi=ee("+=",!1),gi=ee("-=",!1),Pa=ee("\\",!1),Un=ee("||",!1),di=ee("&&",!1),yi=ee("==",!1),wi=ee("!=",!1),mi=ee("<=",!1),$i=ee(">=",!1),Ea=ee("<",!1),sn=ee(">",!1),qn=ee("+",!1),xi=ee("-",!1),Ma=ee("*",!1),zn=ee("^",!1),bi=ee("/",!1),Ai=ee("%",!1),Ci=ee("!",!1),xn=ee("[",!1),Xr=ee(".",!1),Os=ee("if",!1),_i=ee("elif",!1),ki=ee("else",!1),Pi=ee("match",!1),Ts=ee("=>",!1),ns=ee("eval",!1),Is=ee("`",!1),Ei=tr(["`","{"],!0,!1),as=tr(["{","}","`"],!1,!1),js=ee('"',!1),Rs=ee("'",!1),is=ee('\\"',!1),ls=ee("\\'",!1),Ds=tr(["+","-"],!1,!1),Sa=tr([["1","9"]],!1,!1),Mt=tr([["0","9"]],!1,!1),Vn=ee("true",!1),St=ee("false",!1),Mi=ee("null",!1),Ls=ee(";",!1),Si=ee("@",!1),Gr=ee("@(",!1),Fi=tr([["A","Z"],"_"],!1,!0),nn=tr([["A","Z"],["0","9"],"_"],!1,!0),Ni=ee(`\r
`,!1),Wn=tr(["\r",`
`],!1,!1),Oi=tr([" ","	","\r",`
`],!1,!1),Ti=tr([" ","	"],!1,!1),Ii=function(o){return o.join("")},ji=function(){return $()},Ri=function(){return $()},Di=function(){return""},Li=function(){return""},Hi=function(o){return o??[]},Fa=function(o,f){return f},Bi=function(o,f){return[o,...f]},an=function(o,f){return f},Ui=function(o,f){return[o,...f]},ln=function(o,f){return f},qi=function(o,f){return[o,...f]},Kn=function(o){return o},zi=function(o,f){return ae("ns",{name:o,members:f})},Vi=function(o,f){return ae("meta",{name:o,value:f})},Wi=function(o){return ae("meta",{name:null,value:o})},Ki=function(o,f,w){return ae("def",{name:o,varType:f,expr:w,mut:!1,attr:[]})},Gi=function(o,f,w){return ae("def",{name:o,varType:f,expr:w,mut:!0,attr:[]})},Ji=function(o){return ae("identifier",{name:"print",chain:[ae("callChain",{args:[o]})]})},Zi=function(o,f){return ae("attr",{name:o,value:f??ae("bool",{value:!0})})},Qi=function(o,f,w){return ae("each",{var:o,items:f,for:w})},Xi=function(o,f,w){return ae("each",{var:o,items:f,for:w})},Yi=function(o,f){return f},el=function(o,f,w,g){return ae("for",{var:o,from:f??ae("num",{value:0}),to:w,for:g})},tl=function(o,f){return f},rl=function(o,f,w,g){return ae("for",{var:o,from:f??ae("num",{value:0}),to:w,for:g})},sl=function(o,f){return ae("for",{times:o,for:f})},nl=function(o,f){return ae("for",{times:o,for:f})},al=function(o){return ae("return",{expr:o})},il=function(o){return ae("loop",{statements:o})},ll=function(){return ae("break",{})},ul=function(){return ae("continue",{})},ol=function(o,f,w){return f==="+="?ae("addAssign",{dest:o,expr:w}):f==="-="?ae("subAssign",{dest:o,expr:w}):ae("assign",{dest:o,expr:w})},Na=function(o,f,w){return{op:f,term:w}},fl=function(o,f){return ae("infix",{operands:[o,...f.map(w=>w.term)],operators:f.map(w=>w.op)})},Gn=function(){return $()},cl=function(o){return ae("not",{expr:o})},hl=function(o,f){return{...o,chain:f}},pl=function(o){return ae("callChain",{args:o??[]})},Oa=function(o,f){return f},vl=function(o,f){return[o,...f]},Jn=function(o){return ae("indexChain",{index:o})},gl=function(o){return ae("propChain",{name:o})},dl=function(o,f,w,g){return ae("if",{cond:o,then:f,elseif:w??[],else:g})},yl=function(o,f){return[o,...f]},wl=function(o,f){return{cond:o,then:f}},ml=function(o){return o},Ta=function(o,f,w){return{q:f,a:w}},$l=function(o,f,w){return ae("match",{about:o,qs:f??[],default:w})},Zn=function(o){return ae("block",{statements:o})},xl=function(o){return ae("identifier",{name:o})},bl=function(o){return ae("tmpl",{tmpl:o})},Al=function(o){return o.join("")},Ia=function(o){return o},Cl=function(o){return ae("str",{value:o.join("")})},ja=function(o){return o},Qn=function(o){return ae("str",{value:o.join("")})},_l=function(){return'"'},Xn=function(){return"'"},kl=function(){return ae("num",{value:parseFloat($())})},Pl=function(){return ae("num",{value:parseFloat($())})},El=function(){return ae("num",{value:parseInt($(),10)})},Ml=function(){return ae("num",{value:parseInt($(),10)})},Sl=function(){return ae("bool",{value:!0})},Fl=function(){return ae("bool",{value:!1})},Nl=function(){return ae("null",{})},Ra=function(o,f){return{k:o,v:f}},Ol=function(o){const f=new Map;for(const w of o)f.set(w.k,w.v);return ae("obj",{value:f})},Da=function(o){return o},Yn=function(o){return ae("arr",{value:o})},Tl=function(o,f){return{name:o,argType:f}},ea=function(o,f){return[o,...f]},Il=function(o,f,w,g,s,l){return(o.length>0||w.length>0)&&us("Cannot use spaces before or after the function name."),ae("def",{name:f,expr:ae("fn",{args:g??[],retType:s},l??[]),mut:!1,attr:[]})},jl=function(o,f,w){return ae("fn",{args:o??[],retType:f},w??[])},La=function(o){return o},Rl=function(o){return ae("arr",{value:o})},Ha=function(o,f){return{k:o,v:f}},ta=function(o){const f=new Map;for(const w of o)f.set(w.k,w.v);return ae("obj",{value:f})},Dl=function(o,f){return ae("fnTypeSource",{args:o??[],result:f})},ra=function(o,f){return[o,...f]},Ll=function(o,f){return ae("namedTypeSource",{name:o,inner:f})},Hl=function(o){return ae("namedTypeSource",{name:o,inner:null})},Bl=function(){return $()},Ul=function(){return $()},ql=function(o){return ae("block",{statements:o??[]})},u=0,G=0,Hs=[{line:1,column:1}],n=0,D=[],P=0,I={},Hr;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function $(){return t.substring(G,u)}function M(){return Bs(G,u)}function us(o,f){throw f=f!==void 0?f:Bs(G,u),sa(o,f)}function ee(o,f){return{type:"literal",text:o,ignoreCase:f}}function tr(o,f,w){return{type:"class",parts:o,inverted:f,ignoreCase:w}}function zl(){return{type:"any"}}function Q(){return{type:"end"}}function yt(o){var f=Hs[o],w;if(f)return f;for(w=o-1;!Hs[w];)w--;for(f=Hs[w],f={line:f.line,column:f.column};w<o;)t.charCodeAt(w)===10?(f.line++,f.column=1):f.column++,w++;return Hs[o]=f,f}function Bs(o,f,w){var g=yt(o),s=yt(f),l={source:a,start:{offset:o,line:g.line,column:g.column},end:{offset:f,line:s.line,column:s.column}};return w&&a&&typeof a.offset=="function"&&(l.start=a.offset(l.start),l.end=a.offset(l.end)),l}function T(o){u<n||(u>n&&(n=u,D=[]),D.push(o))}function sa(o,f){return new Ao(o,null,null,f)}function os(o,f,w){return new Ao(Ao.buildMessage(o,f),o,f,w)}function C(){var o,f,w,g=u*76+0,s=I[g];if(s)return u=s.nextPos,s.result;for(o=u,f=[],w=Ba();w!==e;)f.push(w),w=Ba();return G=o,f=Ii(f),o=f,I[g]={nextPos:u,result:o},o}function Ba(){var o,f,w=u*76+1,g=I[w];return g?(u=g.nextPos,g.result):(o=u,f=za(),f!==e&&(G=o,f=ji()),o=f,o===e&&(o=u,f=ms(),f!==e&&(G=o,f=Ri()),o=f,o===e&&(o=Vl(),o===e&&(t.length>u?(o=t.charAt(u),u++):(o=e,P===0&&T(ir))))),I[w]={nextPos:u,result:o},o)}function Vl(){var o,f,w,g,s,l,h=u*76+2,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.substr(u,2)===x?(f=x,u+=2):(f=e,P===0&&T(Pt)),f!==e){for(w=[],g=u,s=u,P++,l=Za(),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,l=Za(),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);G=o,o=Di()}else u=o,o=e;if(o===e)if(o=u,t.substr(u,2)===k?(f=k,u+=2):(f=e,P===0&&T(oi)),f!==e){for(w=[],g=u,s=u,P++,t.substr(u,2)===E?(l=E,u+=2):(l=e,P===0&&T($n)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.substr(u,2)===E?(l=E,u+=2):(l=e,P===0&&T($n)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);t.substr(u,2)===E?(g=E,u+=2):(g=e,P===0&&T($n)),g!==e?(G=o,o=Li()):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function na(){var o,f,w,g,s,l=u*76+3,h=I[l];if(h)return u=h.nextPos,h.result;for(o=u,f=[],w=_();w!==e;)f.push(w),w=_();for(w=aa(),w===e&&(w=null),g=[],s=_();s!==e;)g.push(s),s=_();return G=o,o=Hi(w),I[l]={nextPos:u,result:o},o}function aa(){var o,f,w,g,s,l,h,i,p=u*76+4,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=bn(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=bn(),i!==e?(G=g,g=Fa(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=bn(),i!==e?(G=g,g=Fa(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=Bi(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function Wl(){var o,f,w,g,s,l,h,i,p=u*76+5,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=An(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=An(),i!==e?(G=g,g=an(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=An(),i!==e?(G=g,g=an(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=Ui(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function hs(){var o,f,w,g,s,l,h,i,p=u*76+6,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=rr(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=rr(),i!==e?(G=g,g=ln(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=rr(),i!==e?(G=g,g=ln(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=qi(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function bn(){var o,f=u*76+7,w=I[f];return w?(u=w.nextPos,w.result):(o=Jr(),o===e&&(o=ia(),o===e&&(o=rr())),I[f]={nextPos:u,result:o},o)}function An(){var o,f=u*76+8,w=I[f];return w?(u=w.nextPos,w.result):(o=sr(),o===e&&(o=Ja(),o===e&&(o=Jr())),I[f]={nextPos:u,result:o},o)}function rr(){var o,f=u*76+9,w=I[f];return w?(u=w.nextPos,w.result):(o=sr(),o===e&&(o=Ja(),o===e&&(o=la(),o===e&&(o=Jl(),o===e&&(o=Kl(),o===e&&(o=ua(),o===e&&(o=Gl(),o===e&&(o=Zl(),o===e&&(o=Ql(),o===e&&(o=Xl(),o===e&&(o=Yl(),o===e&&(o=Ue()))))))))))),I[f]={nextPos:u,result:o},o)}function Ue(){var o,f=u*76+10,w=I[f];return w?(u=w.nextPos,w.result):(o=eu(),o===e&&(o=Br()),I[f]={nextPos:u,result:o},o)}function Br(){var o,f=u*76+11,w=I[f];return w?(u=w.nextPos,w.result):(o=su(),o===e&&(o=ou(),o===e&&(o=Qt(),o===e&&(o=Cr()))),I[f]={nextPos:u,result:o},o)}function Cr(){var o,f,w,g,s,l,h=u*76+12,i=I[h];if(i)return u=i.nextPos,i.result;if(o=au(),o===e&&(o=Us(),o===e&&(o=za(),o===e&&(o=ms(),o===e&&(o=Ka(),o===e&&(o=hn(),o===e&&(o=Ga(),o===e&&(o=pa(),o===e&&(o=uu(),o===e&&(o=tu(),o===e&&(o=iu(),o===e)))))))))))if(o=u,t.charCodeAt(u)===40?(f=S,u++):(f=e,P===0&&T(yr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=Ue(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e?(G=o,o=Kn(g)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ye(){var o,f=u*76+13,w=I[f];return w?(u=w.nextPos,w.result):(o=Ka(),o===e&&(o=ms(),o===e&&(o=hn(),o===e&&(o=zs(),o===e&&(o=va(),o===e&&(o=Ga()))))),I[f]={nextPos:u,result:o},o)}function Jr(){var o,f,w,g,s,l,h,i,p,c,m=u*76+14,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===j?(f=j,u+=2):(f=e,P===0&&T(Zt)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(t.charCodeAt(u)===123?(l=L,u++):(l=e,P===0&&T(lr)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(i=Wl(),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();t.charCodeAt(u)===125?(c=K,u++):(c=e,P===0&&T(Qe)),c!==e?(G=o,o=zi(g,i)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function ia(){var o,f,w,g,s,l,h=u*76+15,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.substr(u,3)===he?(f=he,u+=3):(f=e,P===0&&T(At)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=He(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();l=ye(),l!==e?(G=o,o=Vi(g,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===he?(f=he,u+=3):(f=e,P===0&&T(At)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();g=ye(),g!==e?(G=o,o=Wi(g)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function sr(){var o,f,w,g,s,l,h,i,p,c=u*76+16,m=I[c];if(m)return u=m.nextPos,m.result;if(o=u,t.substr(u,3)===re?(f=re,u+=3):(f=e,P===0&&T(Wr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===58?(h=ie,u++):(h=e,P===0&&T(dt)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Xt(),p!==e?s=p:(u=s,s=e)}else u=s,s=e;for(s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===61?(h=Ce,u++):(h=e,P===0&&T(st)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Ue(),p!==e?(G=o,o=Ki(g,s,p)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===q?(f=q,u+=3):(f=e,P===0&&T(Lr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===58?(h=ie,u++):(h=e,P===0&&T(dt)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Xt(),p!==e?s=p:(u=s,s=e)}else u=s,s=e;for(s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===61?(h=Ce,u++):(h=e,P===0&&T(st)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Ue(),p!==e?(G=o,o=Gi(g,s,p)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[c]={nextPos:u,result:o},o}function la(){var o,f,w,g,s=u*76+17,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,t.substr(u,2)===H?(f=H,u+=2):(f=e,P===0&&T(fi)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();g=Ue(),g!==e?(G=o,o=Ji(g)):(u=o,o=e)}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function Kl(){var o,f,w,g,s,l,h,i=u*76+18,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,t.substr(u,2)===z?(f=z,u+=2):(f=e,P===0&&T(ci)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();for(h=ye(),h!==e?s=h:(u=s,s=e),s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();t.charCodeAt(u)===93?(h=V,u++):(h=e,P===0&&T(Ns)),h!==e?(G=o,o=Zi(g,s)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[i]={nextPos:u,result:o},o}function ua(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+19,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.substr(u,4)===W?(f=W,u+=4):(f=e,P===0&&T(Kr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(t.substr(u,3)===re?(s=re,u+=3):(s=e,P===0&&T(Wr)),s!==e){if(l=[],h=_(),h!==e)for(;h!==e;)l.push(h),h=_();else l=e;if(l!==e)if(h=He(),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();for(t.charCodeAt(u)===44?(p=J,u++):(p=e,P===0&&T(Et)),p===e&&(p=null),c=[],m=_();m!==e;)c.push(m),m=_();if(m=Ue(),m!==e)if(t.charCodeAt(u)===41?(y=F,u++):(y=e,P===0&&T(bt)),y!==e){for(b=[],A=_();A!==e;)b.push(A),A=_();A=Jt(),A!==e?(G=o,o=Qi(h,m,A)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,4)===W?(f=W,u+=4):(f=e,P===0&&T(Kr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(t.substr(u,3)===re?(g=re,u+=3):(g=e,P===0&&T(Wr)),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();if(c=Ue(),c!==e){if(m=[],y=_(),y!==e)for(;y!==e;)m.push(y),y=_();else m=e;m!==e?(y=Jt(),y!==e?(G=o,o=Xi(l,c,y)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function Gl(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O=u*76+20,B=I[O];if(B)return u=B.nextPos,B.result;if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(t.substr(u,3)===re?(s=re,u+=3):(s=e,P===0&&T(Wr)),s!==e){if(l=[],h=_(),h!==e)for(;h!==e;)l.push(h),h=_();else l=e;if(l!==e)if(h=He(),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();if(p=u,t.charCodeAt(u)===61?(c=Ce,u++):(c=e,P===0&&T(st)),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();y=Ue(),y!==e?(G=p,p=Yi(h,y)):(u=p,p=e)}else u=p,p=e;for(p===e&&(p=null),t.charCodeAt(u)===44?(c=J,u++):(c=e,P===0&&T(Et)),c===e&&(c=null),m=[],y=_();y!==e;)m.push(y),y=_();if(y=Ue(),y!==e)if(t.charCodeAt(u)===41?(b=F,u++):(b=e,P===0&&T(bt)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();N=Jt(),N!==e?(G=o,o=el(h,p,y,N)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(t.substr(u,3)===re?(g=re,u+=3):(g=e,P===0&&T(Wr)),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(i=u,t.charCodeAt(u)===61?(p=Ce,u++):(p=e,P===0&&T(st)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();m=Ue(),m!==e?(G=i,i=tl(l,m)):(u=i,i=e)}else u=i,i=e;for(i===e&&(i=null),t.charCodeAt(u)===44?(p=J,u++):(p=e,P===0&&T(Et)),p===e&&(p=null),c=[],m=_();m!==e;)c.push(m),m=_();if(m=Ue(),m!==e){if(y=[],b=_(),b!==e)for(;b!==e;)y.push(b),b=_();else y=e;y!==e?(b=Jt(),b!==e?(G=o,o=rl(l,i,m,b)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(s=Ue(),s!==e)if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=Jt(),i!==e?(G=o,o=sl(s,i)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=Ue(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;s!==e?(l=Jt(),l!==e?(G=o,o=nl(g,l)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e}}return I[O]={nextPos:u,result:o},o}function Jl(){var o,f,w,g,s,l=u*76+21,h=I[l];if(h)return u=h.nextPos,h.result;if(o=u,t.substr(u,6)===te?(f=te,u+=6):(f=e,P===0&&T(ss)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();s=Ue(),s!==e?(G=o,o=al(s)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[l]={nextPos:u,result:o},o}function Zl(){var o,f,w,g,s,l,h,i,p=u*76+22,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,t.substr(u,4)===Ae?(f=Ae,u+=4):(f=e,P===0&&T(Rt)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===123?(g=L,u++):(g=e,P===0&&T(lr)),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();if(l=hs(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();t.charCodeAt(u)===125?(i=K,u++):(i=e,P===0&&T(Qe)),i!==e?(G=o,o=il(l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function Ql(){var o,f,w,g,s=u*76+23,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,5)===Ee?(f=Ee,u+=5):(f=e,P===0&&T(hi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=ll()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Xl(){var o,f,w,g,s=u*76+24,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,8)===me?(f=me,u+=8):(f=e,P===0&&T(pi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=ul()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Yl(){var o,f,w,g,s,l,h=u*76+25,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Ue(),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.substr(u,2)===Ge?(g=Ge,u+=2):(g=e,P===0&&T(vi)),g===e&&(t.substr(u,2)===ut?(g=ut,u+=2):(g=e,P===0&&T(gi)),g===e&&(t.charCodeAt(u)===61?(g=Ce,u++):(g=e,P===0&&T(st)))),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();l=Ue(),l!==e?(G=o,o=ol(f,g,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function eu(){var o,f,w,g,s,l,h,i,p=u*76+26,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=Br(),f!==e){for(w=[],g=u,s=[],l=_r();l!==e;)s.push(l),l=_r();if(l=Ua(),l!==e){for(h=[],i=_r();i!==e;)h.push(i),i=_r();i=Br(),i!==e?(G=g,g=Na(f,l,i)):(u=g,g=e)}else u=g,g=e;if(g!==e)for(;g!==e;){for(w.push(g),g=u,s=[],l=_r();l!==e;)s.push(l),l=_r();if(l=Ua(),l!==e){for(h=[],i=_r();i!==e;)h.push(i),i=_r();i=Br(),i!==e?(G=g,g=Na(f,l,i)):(u=g,g=e)}else u=g,g=e}else w=e;w!==e?(G=o,o=fl(f,w)):(u=o,o=e)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function _r(){var o,f,w,g=u*76+27,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===92?(f=Yt,u++):(f=e,P===0&&T(Pa)),f!==e?(w=De(),w!==e?(f=[f,w],o=f):(u=o,o=e)):(u=o,o=e),o===e&&(o=be()),I[g]={nextPos:u,result:o},o)}function Ua(){var o,f,w=u*76+28,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===ot?(f=ot,u+=2):(f=e,P===0&&T(Un)),f===e&&(t.substr(u,2)===it?(f=it,u+=2):(f=e,P===0&&T(di)),f===e&&(t.substr(u,2)===Be?(f=Be,u+=2):(f=e,P===0&&T(yi)),f===e&&(t.substr(u,2)===lt?(f=lt,u+=2):(f=e,P===0&&T(wi)),f===e&&(t.substr(u,2)===It?(f=It,u+=2):(f=e,P===0&&T(mi)),f===e&&(t.substr(u,2)===Ut?(f=Ut,u+=2):(f=e,P===0&&T($i)),f===e&&(t.charCodeAt(u)===60?(f=tt,u++):(f=e,P===0&&T(Ea)),f===e&&(t.charCodeAt(u)===62?(f=Rr,u++):(f=e,P===0&&T(sn)),f===e&&(t.charCodeAt(u)===43?(f=er,u++):(f=e,P===0&&T(qn)),f===e&&(t.charCodeAt(u)===45?(f=Ar,u++):(f=e,P===0&&T(xi)),f===e&&(t.charCodeAt(u)===42?(f=Nt,u++):(f=e,P===0&&T(Ma)),f===e&&(t.charCodeAt(u)===94?(f=$r,u++):(f=e,P===0&&T(zn)),f===e&&(t.charCodeAt(u)===47?(f=Vr,u++):(f=e,P===0&&T(bi)),f===e&&(t.charCodeAt(u)===37?(f=Or,u++):(f=e,P===0&&T(Ai))))))))))))))),f!==e&&(G=o,f=Gn()),o=f,I[w]={nextPos:u,result:o},o)}function tu(){var o,f,w,g=u*76+29,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===33?(f=Dr,u++):(f=e,P===0&&T(Ci)),f!==e?(w=Ue(),w!==e?(G=o,o=cl(w)):(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function Qt(){var o,f,w,g,s=u*76+30,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,f=Cr(),f!==e){if(w=[],g=un(),g===e&&(g=qa(),g===e&&(g=on())),g!==e)for(;g!==e;)w.push(g),g=un(),g===e&&(g=qa(),g===e&&(g=on()));else w=e;w!==e?(G=o,o=hl(f,w)):(u=o,o=e)}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function un(){var o,f,w,g,s,l,h=u*76+31,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===40?(f=S,u++):(f=e,P===0&&T(yr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=ru(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e?(G=o,o=pl(g)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ru(){var o,f,w,g,s,l,h=u*76+32,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Ue(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Ue(),l!==e?(G=g,g=Oa(f,l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Ue(),l!==e?(G=g,g=Oa(f,l)):(u=g,g=e)):(u=g,g=e);G=o,o=vl(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function qa(){var o,f,w,g,s,l,h=u*76+33,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=Ue(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Jn(g)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function on(){var o,f,w,g=u*76+34,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===46?(f=U,u++):(f=e,P===0&&T(Xr)),f!==e?(w=He(),w!==e?(G=o,o=gl(w)):(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function su(){var o,f,w,g,s,l,h,i,p,c,m=u*76+35,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===Z?(f=Z,u+=2):(f=e,P===0&&T(Os)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=Ue(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=Jt(),l!==e){if(h=u,i=[],p=_(),p!==e)for(;p!==e;)i.push(p),p=_();else i=e;if(i!==e?(p=oa(),p!==e?h=p:(u=h,h=e)):(u=h,h=e),h===e&&(h=null),i=u,p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;p!==e?(c=nu(),c!==e?i=c:(u=i,i=e)):(u=i,i=e),i===e&&(i=null),G=o,o=dl(g,l,h,i)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function oa(){var o,f,w,g,s,l,h=u*76+36,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=ws(),f!==e){for(w=[],g=u,s=[],l=_();l!==e;)s.push(l),l=_();for(l=ws(),l!==e?g=l:(u=g,g=e);g!==e;){for(w.push(g),g=u,s=[],l=_();l!==e;)s.push(l),l=_();l=ws(),l!==e?g=l:(u=g,g=e)}G=o,o=yl(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ws(){var o,f,w,g,s,l,h,i=u*76+37,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,t.substr(u,4)===ne?(f=ne,u+=4):(f=e,P===0&&T(_i)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();if(s=Ue(),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();h=Jt(),h!==e?(G=o,o=wl(s,h)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e;return I[i]={nextPos:u,result:o},o}function nu(){var o,f,w,g,s,l=u*76+38,h=I[l];if(h)return u=h.nextPos,h.result;if(o=u,t.substr(u,4)===pe?(f=pe,u+=4):(f=e,P===0&&T(ki)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();s=Jt(),s!==e?(G=o,o=ml(s)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[l]={nextPos:u,result:o},o}function au(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O,B,se=u*76+39,X=I[se];if(X)return u=X.nextPos,X.result;if(o=u,t.substr(u,5)===ve?(f=ve,u+=5):(f=e,P===0&&T(Pi)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();if(s=Ue(),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===123?(h=L,u++):(h=e,P===0&&T(lr)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();if(p=[],c=u,m=Ue(),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();G=c,c=Ta(s,m,N)}else u=c,c=e}else u=c,c=e}else u=c,c=e;if(c!==e)for(;c!==e;)if(p.push(c),c=u,m=Ue(),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();G=c,c=Ta(s,m,N)}else u=c,c=e}else u=c,c=e}else u=c,c=e;else p=e;if(p!==e){if(c=u,t.charCodeAt(u)===42?(m=Nt,u++):(m=e,P===0&&T(Ma)),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();c=N}else u=c,c=e}else u=c,c=e}else u=c,c=e;for(c===e&&(c=null),m=[],y=_();y!==e;)m.push(y),y=_();t.charCodeAt(u)===125?(y=K,u++):(y=e,P===0&&T(Qe)),y!==e?(G=o,o=$l(s,p,c)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e;else u=o,o=e;return I[se]={nextPos:u,result:o},o}function Us(){var o,f,w,g,s,l,h,i,p=u*76+40,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,t.substr(u,4)===Oe?(f=Oe,u+=4):(f=e,P===0&&T(ns)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===123?(g=L,u++):(g=e,P===0&&T(lr)),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();if(l=hs(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();t.charCodeAt(u)===125?(i=K,u++):(i=e,P===0&&T(Qe)),i!==e?(G=o,o=Zn(l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function iu(){var o,f,w=u*76+41,g=I[w];return g?(u=g.nextPos,g.result):(o=u,f=pu(),f!==e&&(G=o,f=xl(f)),o=f,I[w]={nextPos:u,result:o},o)}function za(){var o,f,w,g,s,l,h=u*76+42,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===96?(f=$e,u++):(f=e,P===0&&T(Is)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===96?(l=$e,u++):(l=e,P===0&&T(Is)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=Va(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===96?(l=$e,u++):(l=e,P===0&&T(Is)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=Va(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===96?(g=$e,u++):(g=e,P===0&&T(Is)),g!==e?(G=o,o=bl(w)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Va(){var o,f,w,g,s,l,h=u*76+43,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=Ue(),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();t.charCodeAt(u)===125?(l=K,u++):(l=e,P===0&&T(Qe)),l!==e?o=g:(u=o,o=e)}else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,f=[],w=Wa(),w!==e)for(;w!==e;)f.push(w),w=Wa();else f=e;f!==e&&(G=o,f=Al(f)),o=f}return I[h]={nextPos:u,result:o},o}function Wa(){var o,f=u*76+44,w=I[f];return w?(u=w.nextPos,w.result):(o=fa(),o===e&&(kt.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Ei))),I[f]={nextPos:u,result:o},o)}function fa(){var o,f,w,g=u*76+45,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===92?(f=Yt,u++):(f=e,P===0&&T(Pa)),f!==e?(Fs.test(t.charAt(u))?(w=t.charAt(u),u++):(w=e,P===0&&T(as)),w!==e?o=w:(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function ms(){var o,f,w,g,s,l,h=u*76+46,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===34?(f=xe,u++):(f=e,P===0&&T(js)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===34?(l=xe,u++):(l=e,P===0&&T(js)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=fn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=Ia(l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===34?(l=xe,u++):(l=e,P===0&&T(js)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=fn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=Ia(l)):(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===34?(g=xe,u++):(g=e,P===0&&T(js)),g!==e?(G=o,o=Cl(w)):(u=o,o=e)}else u=o,o=e;if(o===e)if(o=u,t.charCodeAt(u)===39?(f=ce,u++):(f=e,P===0&&T(Rs)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===39?(l=ce,u++):(l=e,P===0&&T(Rs)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=cn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=ja(l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===39?(l=ce,u++):(l=e,P===0&&T(Rs)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=cn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=ja(l)):(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===39?(g=ce,u++):(g=e,P===0&&T(Rs)),g!==e?(G=o,o=Qn(w)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function fn(){var o,f,w=u*76+47,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===Te?(f=Te,u+=2):(f=e,P===0&&T(is)),f!==e&&(G=o,f=_l()),o=f,I[w]={nextPos:u,result:o},o)}function cn(){var o,f,w=u*76+48,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===We?(f=We,u+=2):(f=e,P===0&&T(ls)),f!==e&&(G=o,f=Xn()),o=f,I[w]={nextPos:u,result:o},o)}function Ka(){var o,f=u*76+49,w=I[f];return w?(u=w.nextPos,w.result):(o=qs(),o===e&&(o=ca()),I[f]={nextPos:u,result:o},o)}function qs(){var o,f,w,g,s,l,h=u*76+50,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),Tt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Sa)),f!==e){if(w=[],gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt)),g!==e)for(;g!==e;)w.push(g),gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt));else w=e;if(w!==e)if(t.charCodeAt(u)===46?(g=U,u++):(g=e,P===0&&T(Xr)),g!==e){if(s=[],gt.test(t.charAt(u))?(l=t.charAt(u),u++):(l=e,P===0&&T(Mt)),l!==e)for(;l!==e;)s.push(l),gt.test(t.charAt(u))?(l=t.charAt(u),u++):(l=e,P===0&&T(Mt));else s=e;s!==e?(G=o,o=kl()):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),gt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Mt)),f!==e)if(t.charCodeAt(u)===46?(w=U,u++):(w=e,P===0&&T(Xr)),w!==e){if(g=[],gt.test(t.charAt(u))?(s=t.charAt(u),u++):(s=e,P===0&&T(Mt)),s!==e)for(;s!==e;)g.push(s),gt.test(t.charAt(u))?(s=t.charAt(u),u++):(s=e,P===0&&T(Mt));else g=e;g!==e?(G=o,o=Pl()):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ca(){var o,f,w,g,s=u*76+51,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),Tt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Sa)),f!==e){if(w=[],gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt)),g!==e)for(;g!==e;)w.push(g),gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt));else w=e;w!==e?(G=o,o=El()):(u=o,o=e)}else u=o,o=e;return o===e&&(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),gt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Mt)),f!==e?(G=o,o=Ml()):(u=o,o=e)),I[s]={nextPos:u,result:o},o}function hn(){var o,f=u*76+52,w=I[f];return w?(u=w.nextPos,w.result):(o=ha(),o===e&&(o=lu()),I[f]={nextPos:u,result:o},o)}function ha(){var o,f,w,g,s=u*76+53,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,4)===Ve?(f=Ve,u+=4):(f=e,P===0&&T(Vn)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Sl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function lu(){var o,f,w,g,s=u*76+54,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,5)===Je?(f=Je,u+=5):(f=e,P===0&&T(St)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Fl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Ga(){var o,f,w,g,s=u*76+55,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,4)===Xe?(f=Xe,u+=4):(f=e,P===0&&T(Mi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Nl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function pa(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+56,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=Ue(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ra(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=Ue(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ra(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;t.charCodeAt(u)===125?(s=K,u++):(s=e,P===0&&T(Qe)),s!==e?(G=o,o=Ol(g)):(u=o,o=e)}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function uu(){var o,f,w,g,s,l,h,i,p,c,m=u*76+57,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=Ue(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=Da(l)}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=Ue(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=Da(l)}else u=s,s=e;for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Yn(g)):(u=o,o=e)}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function Cn(){var o,f,w,g,s,l,h,i=u*76+58,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,f=He(),f!==e){for(w=u,g=[],s=_();s!==e;)g.push(s),s=_();if(t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();h=Xt(),h!==e?w=h:(u=w,w=e)}else u=w,w=e;w===e&&(w=null),G=o,o=Tl(f,w)}else u=o,o=e;return I[i]={nextPos:u,result:o},o}function pn(){var o,f,w,g,s,l,h=u*76+59,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Cn(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Cn(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Cn(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);G=o,o=ea(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Ja(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O,B,se=u*76+60,X=I[se];if(X)return u=X.nextPos,X.result;if(o=u,t.charCodeAt(u)===64?(f=ft,u++):(f=e,P===0&&T(Si)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=He(),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();if(t.charCodeAt(u)===40?(l=S,u++):(l=e,P===0&&T(yr)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(i=pn(),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();if(t.charCodeAt(u)===41?(c=F,u++):(c=e,P===0&&T(bt)),c!==e){for(m=u,y=[],b=_();b!==e;)y.push(b),b=_();if(t.charCodeAt(u)===58?(b=ie,u++):(b=e,P===0&&T(dt)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();N=Xt(),N!==e?m=N:(u=m,m=e)}else u=m,m=e;for(m===e&&(m=null),y=[],b=_();b!==e;)y.push(b),b=_();if(t.charCodeAt(u)===123?(b=L,u++):(b=e,P===0&&T(lr)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();for(N=hs(),N===e&&(N=null),O=[],B=_();B!==e;)O.push(B),B=_();t.charCodeAt(u)===125?(B=K,u++):(B=e,P===0&&T(Qe)),B!==e?(G=o,o=Il(w,g,s,i,m,N)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[se]={nextPos:u,result:o},o}function ou(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A=u*76+61,N=I[A];if(N)return u=N.nextPos,N.result;if(o=u,t.substr(u,2)===Ot?(f=Ot,u+=2):(f=e,P===0&&T(Gr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=pn(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=u,i=[],p=_();p!==e;)i.push(p),p=_();if(t.charCodeAt(u)===58?(p=ie,u++):(p=e,P===0&&T(dt)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();m=Xt(),m!==e?h=m:(u=h,h=e)}else u=h,h=e;for(h===e&&(h=null),i=[],p=_();p!==e;)i.push(p),p=_();if(t.charCodeAt(u)===123?(p=L,u++):(p=e,P===0&&T(lr)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();for(m=hs(),m===e&&(m=null),y=[],b=_();b!==e;)y.push(b),b=_();t.charCodeAt(u)===125?(b=K,u++):(b=e,P===0&&T(Qe)),b!==e?(G=o,o=jl(g,h,m)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[A]={nextPos:u,result:o},o}function zs(){var o,f,w,g,s,l,h,i,p,c,m=u*76+62,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=ye(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=La(l)}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=ye(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=La(l)}else u=s,s=e;for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Rl(g)):(u=o,o=e)}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function va(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+63,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=ye(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ha(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=ye(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ha(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;t.charCodeAt(u)===125?(s=K,u++):(s=e,P===0&&T(Qe)),s!==e?(G=o,o=ta(g)):(u=o,o=e)}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function Xt(){var o,f=u*76+64,w=I[f];return w?(u=w.nextPos,w.result):(o=fu(),o===e&&(o=hu()),I[f]={nextPos:u,result:o},o)}function fu(){var o,f,w,g,s,l,h,i,p,c,m=u*76+65,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===Ot?(f=Ot,u+=2):(f=e,P===0&&T(Gr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=cu(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.substr(u,2)===le?(i=le,u+=2):(i=e,P===0&&T(Ts)),i!==e){for(p=[],c=_();c!==e;)p.push(c),c=_();c=Xt(),c!==e?(G=o,o=Dl(g,c)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function cu(){var o,f,w,g,s,l,h=u*76+66,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Xt(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Xt(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Xt(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);G=o,o=ra(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function hu(){var o,f,w,g,s,l,h,i,p=u*76+67,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=He(),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(t.charCodeAt(u)===60?(g=tt,u++):(g=e,P===0&&T(Ea)),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();if(l=Xt(),l!==e){for(h=[],i=be();i!==e;)h.push(i),i=be();t.charCodeAt(u)===62?(i=Rr,u++):(i=e,P===0&&T(sn)),i!==e?(G=o,o=Ll(f,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return o===e&&(o=u,f=He(),f!==e&&(G=o,f=Hl(f)),o=f),I[p]={nextPos:u,result:o},o}function He(){var o,f,w,g,s=u*76+68,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,xt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Fi)),f!==e){for(w=[],ka.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(nn));g!==e;)w.push(g),ka.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(nn));G=o,o=Bl()}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function pu(){var o,f,w,g,s,l,h=u*76+69,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=He(),f!==e){for(w=[],g=u,t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e?(l=He(),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e?(l=He(),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);G=o,o=Ul()}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Yr(){var o,f,w,g,s,l=u*76+70,h=I[l];if(h)return u=h.nextPos,h.result;for(o=u,f=[],w=_();w!==e;)f.push(w),w=_();if(t.charCodeAt(u)===44?(w=J,u++):(w=e,P===0&&T(Et)),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();f=[f,w,g],o=f}else u=o,o=e;if(o===e)if(o=[],f=_(),f!==e)for(;f!==e;)o.push(f),f=_();else o=e;return I[l]={nextPos:u,result:o},o}function Jt(){var o,f,w,g,s,l,h=u*76+71,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=hs(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===125?(l=K,u++):(l=e,P===0&&T(Qe)),l!==e?(G=o,o=ql(g)):(u=o,o=e)}else u=o,o=e;return o===e&&(o=rr()),I[h]={nextPos:u,result:o},o}function De(){var o,f=u*76+72,w=I[f];return w?(u=w.nextPos,w.result):(t.substr(u,2)===qt?(o=qt,u+=2):(o=e,P===0&&T(Ni)),o===e&&(Bn.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Wn))),I[f]={nextPos:u,result:o},o)}function Za(){var o,f,w=u*76+73,g=I[w];return g?(u=g.nextPos,g.result):(o=u,P++,t.length>u?(f=t.charAt(u),u++):(f=e,P===0&&T(ir)),P--,f===e?o=void 0:(u=o,o=e),o===e&&(o=De()),I[w]={nextPos:u,result:o},o)}function _(){var o,f=u*76+74,w=I[f];return w?(u=w.nextPos,w.result):(li.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Oi)),I[f]={nextPos:u,result:o},o)}function be(){var o,f=u*76+75,w=I[f];return w?(u=w.nextPos,w.result):(ui.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Ti)),I[f]={nextPos:u,result:o},o)}function ae(o,f,w){const g={type:o};f.children=w;for(const l of Object.keys(f))f[l]!==void 0&&(g[l]=f[l]);const s=M();return g.loc={start:s.start.offset,end:s.end.offset-1},g}if(Hr=d(),Hr!==e&&u===t.length)return Hr;throw Hr!==e&&u<t.length&&T(Q()),os(D,n<t.length?t.charAt(n):null,n<t.length?Bs(n,n+1):Bs(n,n))}const c1=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function h1(t){return c1.includes(t.type)}function sy(t){return"chain"in t&&t.chain!==null}function p1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function v1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function g1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=vt(e.expr,r);break}case"return":{e.expr=vt(e.expr,r);break}case"each":{e.items=vt(e.items,r),e.for=vt(e.for,r);break}case"for":{e.from!=null&&(e.from=vt(e.from,r)),e.to!=null&&(e.to=vt(e.to,r)),e.times!=null&&(e.times=vt(e.times,r)),e.for=vt(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=vt(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=vt(e.expr,r),e.dest=vt(e.dest,r);break}case"infix":{for(let a=0;a<e.operands.length;a++)e.operands[a]=vt(e.operands[a],r);break}case"not":{e.expr=vt(e.expr,r);break}case"if":{e.cond=vt(e.cond,r),e.then=vt(e.then,r);for(const a of e.elseif)a.cond=vt(a.cond,r),a.then=vt(a.then,r);e.else!=null&&(e.else=vt(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=vt(e.children[a],r);break}case"match":{e.about=vt(e.about,r);for(const a of e.qs)a.q=vt(a.q,r),a.a=vt(a.a,r);e.default!=null&&(e.default=vt(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=vt(e.statements[a],r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=vt(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],vt(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=vt(e.value[a],r);break}case"callChain":{for(let a=0;a<e.args.length;a++)e.args[a]=vt(e.args[a],r);break}case"indexChain":{e.index=vt(e.index,r);break}case"call":{e.target=vt(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=vt(e.args[a],r);break}case"index":{e.target=vt(e.target,r),e.index=vt(e.index,r);break}case"prop":{e.target=vt(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=vt(e.members[a],r);break}case"or":case"and":{e.left=vt(e.left,r),e.right=vt(e.right,r);break}}if(sy(e)&&e.chain!=null)for(let a=0;a<e.chain.length;a++)e.chain[a]=vt(e.chain[a],r);return e}const kh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Ph(t){throw new Mo(`Reserved word "${t}" cannot be used as variable name.`)}function d1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{kh.includes(t.name)&&Ph(t.name);break}case"meta":{t.name!=null&&kh.includes(t.name)&&Ph(t.name);break}case"fn":{for(const r of t.args)kh.includes(r.name)&&Ph(r.name);break}}return t}function y1(t){for(const r of t)vt(r,d1);return t}function yg(t){return{type:"simple",name:t}}function w1(t,r){return{type:"generic",name:t,inners:r}}function m1(t,r){return{type:"fn",args:t,result:r}}function dc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=dc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>dc(a)).join(", "),e=dc(t.result);return`@(${r}) { ${e} }`}}}function af(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return yg(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=af(t.inner):r=yg("any"),w1(t.name,[r])}}throw new Mo(`Unknown type: '${dc(t)}'`)}else{const r=t.args.map(e=>af(e));return m1(r,af(t.result))}}function $1(t){switch(t.type){case"def":{t.varType!=null&&af(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&af(r.argType);t.retType!=null&&af(t.retType);break}}return t}function x1(t){for(const r of t)vt(r,$1);return t}function yc(t){const r=[],e=[];for(const a of t)if(a.type==="attr")e.push(a);else if(a.type==="def")a.attr==null&&(a.attr=[]),a.attr.push(...e),e.splice(0,e.length),a.expr.type==="fn"&&(a.expr.children=yc(a.expr.children)),r.push(a);else{if(e.length>0)throw new Mo("invalid attribute.");switch(a.type){case"fn":{a.children=yc(a.children);break}case"block":{a.statements=yc(a.statements);break}}r.push(a)}if(e.length>0)throw new Mo("invalid attribute.");return r}function b1(t){if(h1(t)&&sy(t)&&t.chain!=null){const{chain:r,...e}=t;let a=e;for(const v of r)switch(v.type){case"callChain":{a=p1(a,v.args,v.loc);break}case"indexChain":{a=v1(a,v.index,v.loc);break}case"propChain":{a=g1(a,v.name,v.loc);break}}return a}return t}function A1(t){for(let r=0;r<t.length;r++)t[r]=vt(t[r],b1);return t}function wc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function ny(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return wc(t,r,e);{const{left:a,right:v,info:d}=t;return wc(a,ny(v,r,e),d)}}function oo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[oo(t.left),oo(t.right)]}}const C1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:oo(t.left),right:oo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:oo(t.left),right:oo(t.right)}),priority:3}};function _1(t){const r=t.operators.map(a=>{const v=C1[a];if(v==null)throw new Mo(`No such operator: ${a}.`);return v});let e=wc(t.operands[0],t.operands[1],r[0]);for(let a=0;a<r.length-1;a++)e=ny(e,t.operands[2+a],r[1+a]);return oo(e)}function k1(t){for(let r=0;r<t.length;r++)t[r]=vt(t[r],e=>e.type==="infix"?_1(e):e);return t}var mu;let P1=(mu=class{constructor(){ge(this,"plugins");this.plugins={validate:[y1,x1],transform:[yc,A1,k1]}}static parse(r){return mu.instance==null&&(mu.instance=new mu),mu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const a=dg(r,{startRule:"Preprocess"});e=dg(a,{startRule:"Main"})}catch(a){throw a.location?a.expected?new Mo(`Parsing error. (Line ${a.location.start.line}:${a.location.start.column})`):new Mo(`${a.message} (Line ${a.location.start.line}:${a.location.start.column})`):a}for(const a of this.plugins.validate)e=a(e);for(const a of this.plugins.transform)e=a(e);return e}},ge(mu,"instance"),mu);const E1="0.15.0",M1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let $p=[],_f=null;function S1(t){return $p=P1.parse(t),JSON.stringify($p,null,"	")}async function F1(t){_f==null||_f.abort(),_f=new wn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:yp(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:yp(e.val,!0),print:!1});break}}});try{await _f.exec($p)}catch(r){t.err(r)}}const N1=Object.freeze(Object.defineProperty({__proto__:null,exec:F1,parse:S1,samples:M1,version:E1},Symbol.toStringTag,{value:"Module"}));class Xc extends Error{constructor(e,a){super(e);ge(this,"info");this.info=a,Error.captureStackTrace&&Error.captureStackTrace(this,Xc)}}class So extends Xc{constructor(r,e){super(r,e)}}class dr extends Xc{constructor(r,e){super(r,e)}}class O1 extends dr{constructor(r,e){super(r,e)}}var jo=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};class ii{constructor(r=[],e,a){ge(this,"parent");ge(this,"layerdStates");ge(this,"name");ge(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=a||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const a=[r,...this.layerdStates];return new ii(a,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const a=e.get(r);return this.log("read",{var:r,val:a}),a}throw new dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,a)=>[...e,...a],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const a=this.layerdStates[0];if(a.has(r))throw new dr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});a.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let a=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),a===this.layerdStates.length&&this.onUpdated(r,e);return}a++}throw new dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}jo([$t],ii.prototype,"log",null);jo([$t],ii.prototype,"onUpdated",null);jo([$t],ii.prototype,"createChildScope",null);jo([$t],ii.prototype,"get",null);jo([$t],ii.prototype,"getAll",null);jo([$t],ii.prototype,"add",null);jo([$t],ii.prototype,"assign",null);let ec;const T1=new Uint8Array(16);function I1(){if(!ec&&(ec=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ec))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ec(T1)}const ds=[];for(let t=0;t<256;++t)ds.push((t+256).toString(16).slice(1));function j1(t,r=0){return(ds[t[r+0]]+ds[t[r+1]]+ds[t[r+2]]+ds[t[r+3]]+"-"+ds[t[r+4]]+ds[t[r+5]]+"-"+ds[t[r+6]]+ds[t[r+7]]+"-"+ds[t[r+8]]+ds[t[r+9]]+"-"+ds[t[r+10]]+ds[t[r+11]]+ds[t[r+12]]+ds[t[r+13]]+ds[t[r+14]]+ds[t[r+15]]).toLowerCase()}const R1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wg={randomUUID:R1};function D1(t,r,e){if(wg.randomUUID&&!r&&!t)return wg.randomUUID();t=t||{};const a=t.random||(t.rng||I1)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){e=e||0;for(let v=0;v<16;++v)r[e+v]=a[v];return r}return j1(a)}const ar={type:"null"},xa={type:"bool",value:!0},Fn={type:"bool",value:!1},et=t=>({type:"num",value:t}),vr=t=>({type:"str",value:t}),lf=t=>({type:"bool",value:t}),nv=t=>({type:"obj",value:t}),bs=t=>({type:"arr",value:t}),L1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),je=t=>({type:"fn",native:t}),H1=t=>({type:"return",value:t}),B1=()=>({type:"break",value:null}),U1=()=>({type:"continue",value:null}),q1=t=>t.type==="return"?t.value:t;function Rn(t){if(t==null)throw new dr("Expect anything, but got nothing.")}function Qs(t){if(t==null)throw new dr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new dr(`Expect boolean, but got ${t.type}.`)}function Bu(t){if(t==null)throw new dr("Expect function, but got nothing.");if(t.type!=="fn")throw new dr(`Expect function, but got ${t.type}.`)}function cs(t){if(t==null)throw new dr("Expect string, but got nothing.");if(t.type!=="str")throw new dr(`Expect string, but got ${t.type}.`)}function Ze(t){if(t==null)throw new dr("Expect number, but got nothing.");if(t.type!=="num")throw new dr(`Expect number, but got ${t.type}.`)}function Nu(t){if(t==null)throw new dr("Expect object, but got nothing.");if(t.type!=="obj")throw new dr(`Expect object, but got ${t.type}.`)}function Tf(t){if(t==null)throw new dr("Expect array, but got nothing.");if(t.type!=="arr")throw new dr(`Expect array, but got ${t.type}.`)}function z1(t){return t.type==="str"}function V1(t){return t.type==="num"}function W1(t){return t.type==="obj"}function K1(t){return t.type==="arr"}function xp(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function bp(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(a=>bp(a,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ap(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ap(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,a]of t.value.entries())r[e]=Ap(a);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Cp(t){if(t===null)return ar;if(typeof t=="boolean")return lf(t);if(typeof t=="string")return vr(t);if(typeof t=="number")return et(t);if(Array.isArray(t))return bs(t.map(r=>Cp(r)));if(typeof t=="object"){const r=new Map;for(const[e,a]of Object.entries(t))r.set(e,Cp(a));return nv(r)}return ar}const G1={help:vr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":vr("0.14.1"),"Core:ai":vr("kawaii"),"Core:not":je(([t])=>(Qs(t),t.value?Fn:xa)),"Core:eq":je(([t,r])=>(Rn(t),Rn(r),xp(t,r)?xa:Fn)),"Core:neq":je(([t,r])=>(Rn(t),Rn(r),xp(t,r)?Fn:xa)),"Core:and":je(([t,r])=>(Qs(t),t.value?(Qs(r),r.value?xa:Fn):Fn)),"Core:or":je(([t,r])=>(Qs(t),t.value?xa:(Qs(r),r.value?xa:Fn))),"Core:add":je(([t,r])=>(Ze(t),Ze(r),et(t.value+r.value))),"Core:sub":je(([t,r])=>(Ze(t),Ze(r),et(t.value-r.value))),"Core:mul":je(([t,r])=>(Ze(t),Ze(r),et(t.value*r.value))),"Core:pow":je(([t,r])=>{Ze(t),Ze(r);const e=t.value**r.value;if(isNaN(e))throw new dr("Invalid operation.");return et(e)}),"Core:div":je(([t,r])=>{Ze(t),Ze(r);const e=t.value/r.value;if(isNaN(e))throw new dr("Invalid operation.");return et(e)}),"Core:mod":je(([t,r])=>(Ze(t),Ze(r),et(t.value%r.value))),"Core:gt":je(([t,r])=>(Ze(t),Ze(r),t.value>r.value?xa:Fn)),"Core:lt":je(([t,r])=>(Ze(t),Ze(r),t.value<r.value?xa:Fn)),"Core:gteq":je(([t,r])=>(Ze(t),Ze(r),t.value>=r.value?xa:Fn)),"Core:lteq":je(([t,r])=>(Ze(t),Ze(r),t.value<=r.value?xa:Fn)),"Core:type":je(([t])=>(Rn(t),vr(t.type))),"Core:to_str":je(([t])=>(Rn(t),t.type==="str"?t:t.type==="num"?vr(t.value.toString()):vr("?"))),"Core:range":je(([t,r])=>(Ze(t),Ze(r),t.value<r.value?bs(Array.from({length:r.value-t.value+1},(e,a)=>et(a+t.value))):t.value>r.value?bs(Array.from({length:t.value-r.value+1},(e,a)=>et(t.value-a))):bs([t]))),"Util:uuid":je(()=>vr(D1())),"Json:stringify":je(([t])=>(Rn(t),vr(JSON.stringify(Ap(t))))),"Json:parse":je(([t])=>(cs(t),Cp(JSON.parse(t.value)))),"Json:parsable":je(([t])=>{cs(t);try{JSON.parse(t.value)}catch{return lf(!1)}return lf(!0)}),"Date:now":je(()=>et(Date.now())),"Date:year":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":je(([t])=>(t&&Ze(t),et(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":je(([t])=>(cs(t),et(new Date(t.value).getTime()))),"Math:Infinity":et(1/0),"Math:PI":et(Math.PI),"Math:sin":je(([t])=>(Ze(t),et(Math.sin(t.value)))),"Math:cos":je(([t])=>(Ze(t),et(Math.cos(t.value)))),"Math:abs":je(([t])=>(Ze(t),et(Math.abs(t.value)))),"Math:sqrt":je(([t])=>{Ze(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new dr("Invalid operation.");return et(r)}),"Math:round":je(([t])=>(Ze(t),et(Math.round(t.value)))),"Math:ceil":je(([t])=>(Ze(t),et(Math.ceil(t.value)))),"Math:floor":je(([t])=>(Ze(t),et(Math.floor(t.value)))),"Math:min":je(([t,r])=>(Ze(t),Ze(r),et(Math.min(t.value,r.value)))),"Math:max":je(([t,r])=>(Ze(t),Ze(r),et(Math.max(t.value,r.value)))),"Math:rnd":je(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?et(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):et(Math.random())),"Math:gen_rng":je(([t])=>{if(Rn(t),t.type!=="num"&&t.type!=="str")return ar;const r=df(t.value.toString());return je(([e,a])=>e&&e.type==="num"&&a&&a.type==="num"?et(Math.floor(r()*(Math.floor(a.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):et(r()))}),"Num:to_hex":je(([t])=>(Ze(t),vr(t.value.toString(16)))),"Num:from_hex":je(([t])=>(cs(t),et(parseInt(t.value,16)))),"Str:lf":vr(`
`),"Str:lt":je(([t,r])=>(cs(t),cs(r),t.value<r.value?et(-1):t.value===r.value?et(0):et(1))),"Str:gt":je(([t,r])=>(cs(t),cs(r),t.value>r.value?et(-1):t.value===r.value?et(0):et(1))),"Obj:keys":je(([t])=>(Nu(t),bs(Array.from(t.value.keys()).map(r=>vr(r))))),"Obj:vals":je(([t])=>(Nu(t),bs(Array.from(t.value.values())))),"Obj:kvs":je(([t])=>(Nu(t),bs(Array.from(t.value.entries()).map(([r,e])=>bs([vr(r),e]))))),"Obj:get":je(([t,r])=>(Nu(t),cs(r),t.value.get(r.value)??ar)),"Obj:set":je(([t,r,e])=>(Nu(t),cs(r),Rn(e),t.value.set(r.value,e),ar)),"Obj:has":je(([t,r])=>(Nu(t),cs(r),lf(t.value.has(r.value)))),"Obj:copy":je(([t])=>(Nu(t),nv(new Map(t.value)))),"Async:interval":je(async([t,r,e],a)=>{Ze(t),Bu(r),e&&(Qs(e),e.value&&a.call(r,[]));const v=setInterval(()=>{a.call(r,[])},t.value),d=()=>{clearInterval(v)};return a.registerAbortHandler(d),je(([],x)=>{clearInterval(v),x.unregisterAbortHandler(d)})}),"Async:timeout":je(async([t,r],e)=>{Ze(t),Bu(r);const a=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(a)};return e.registerAbortHandler(v),je(([],d)=>{clearTimeout(a),d.unregisterAbortHandler(v)})})},Ho={num:{to_str:t=>je(async(r,e)=>vr(t.value.toString()))},str:{to_num:t=>je(async(r,e)=>{const a=parseInt(t.value,10);return isNaN(a)?ar:et(a)}),len:t=>et(yf(t.value)),replace:t=>je(async([r,e],a)=>(cs(r),cs(e),vr(t.value.split(r.value).join(e.value)))),index_of:t=>je(async([r],e)=>(cs(r),et(mf(t.value,r.value)))),incl:t=>je(async([r],e)=>(cs(r),t.value.includes(r.value)?xa:Fn)),trim:t=>je(async(r,e)=>vr(t.value.trim())),upper:t=>je(async(r,e)=>vr(t.value.toUpperCase())),lower:t=>je(async(r,e)=>vr(t.value.toLowerCase())),split:t=>je(async([r],e)=>(r&&cs(r),bs(r?t.value.split(r?r.value:"").map(a=>vr(a)):Ys(t.value).map(a=>vr(a))))),slice:t=>je(async([r,e],a)=>(Ze(r),Ze(e),vr(wf(t.value,r.value,e.value)))),pick:t=>je(async([r],e)=>{Ze(r);const v=Ys(t.value)[r.value];return v?vr(v):ar})},arr:{len:t=>et(t.value.length),push:t=>je(async([r],e)=>(Rn(r),t.value.push(r),t)),unshift:t=>je(async([r],e)=>(Rn(r),t.value.unshift(r),t)),pop:t=>je(async(r,e)=>t.value.pop()??ar),shift:t=>je(async(r,e)=>t.value.shift()??ar),concat:t=>je(async([r],e)=>(Tf(r),bs(t.value.concat(r.value)))),slice:t=>je(async([r,e],a)=>(Ze(r),Ze(e),bs(t.value.slice(r.value,e.value)))),join:t=>je(async([r],e)=>(r&&cs(r),vr(t.value.map(a=>a.type==="str"?a.value:"").join(r?r.value:"")))),map:t=>je(async([r],e)=>{Bu(r);const a=t.value.map(async(v,d)=>await e.call(r,[v,et(d)]));return bs(await Promise.all(a))}),filter:t=>je(async([r],e)=>{Bu(r);const a=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],x=await e.call(r,[d,et(v)]);Qs(x),x.value&&a.push(d)}return bs(a)}),reduce:t=>je(async([r,e],a)=>{Bu(r);const v=e!=null;let d=v?e:t.value[0];for(let x=v?0:1;x<t.value.length;x++){const k=t.value[x];d=await a.call(r,[d,k,et(x)])}return d}),find:t=>je(async([r],e)=>{Bu(r);for(let a=0;a<t.value.length;a++){const v=t.value[a],d=await e.call(r,[v,et(a)]);if(Qs(d),d.value)return v}return ar}),incl:t=>je(async([r],e)=>(Rn(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Fn:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?xa:Fn)),reverse:t=>je(async(r,e)=>(t.value.reverse(),ar)),copy:t=>je(async(r,e)=>bs([...t.value])),sort:t=>je(async([r],e)=>{const a=async(d,x)=>{if(d.length<=1)return d;const k=Math.floor(d.length/2),E=await a(d.slice(0,k),x),S=await a(d.slice(k),x);return v(E,S,x)},v=async(d,x,k)=>{const E=[];let S=0,F=0;for(;S<d.length&&F<x.length;){const j=d[S],L=x[F],K=await e.call(k,[j,L]);Ze(K),K.value<0?(E.push(d[S]),S++):(E.push(x[F]),F++)}return E.concat(d.slice(S)).concat(x.slice(F))};return Bu(r),Tf(t),t.value=await a(t.value,r),t})}};var Hn=function(t,r,e,a){var v=arguments.length,d=v<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,e):a,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,a);else for(var k=t.length-1;k>=0;k--)(x=t[k])&&(d=(v<3?x(d):v>3?x(r,e,d):x(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const ay=300,J1=ay-1;class mn{constructor(r,e){ge(this,"vars");ge(this,"opts");ge(this,"stepCount",0);ge(this,"stop",!1);ge(this,"scope");ge(this,"abortHandlers",[]);this.opts=e??{};const a={print:je(([v])=>{Rn(v),this.opts.out&&this.opts.out(v)}),readline:je(async v=>{const d=v[0];if(cs(d),this.opts.in==null)return ar;const x=await this.opts.in(d.value);return vr(x)})};this.vars={...r,...G1,...a},this.scope=new ii([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[x,k]of v.value.entries())d[x]=e(k);return d}case"str":return v.value;default:return}}const a=new Map;for(const v of r)switch(v.type){case"meta":{a.set(v.name,e(v.value));break}}return a}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const a of r.members)switch(a.type){case"def":{const v=await this._eval(a.expr,e);e.add(a.name,v),this.scope.add(r.name+":"+a.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+a.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??ar;{const a=new Map;for(let d=0;d<(r.args??[]).length;d++)a.set(r.args[d],e[d]);const v=r.scope.createChildScope(a);return q1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return ar;if(this.stepCount%ay===J1&&await new Promise(a=>setTimeout(a,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new dr("max step exceeded");switch(r.type){case"call":{const a=await this._eval(r.target,e);Bu(a);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(a,v)}case"if":{const a=await this._eval(r.cond,e);if(Qs(a),a.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Qs(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return ar}case"match":{const a=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(xp(a,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):ar}case"loop":{for(;;){const a=await this._run(r.statements,e.createChildScope());if(a.type==="break")break;if(a.type==="return")return a}return ar}case"for":{if(r.times){const a=await this._eval(r.times,e);Ze(a);for(let v=0;v<a.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const a=await this._eval(r.from,e),v=await this._eval(r.to,e);Ze(a),Ze(v);for(let d=a.value;d<a.value+v.value;d++){const x=await this._eval(r.for,e.createChildScope(new Map([[r.var,et(d)]])));if(x.type==="break")break;if(x.type==="return")return x}}return ar}case"each":{const a=await this._eval(r.items,e);Tf(a);for(const v of a.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(d.type==="break")break;if(d.type==="return")return d}return ar}case"def":{const a=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});a.attr=v}return e.add(r.name,a),ar}case"identifier":return e.get(r.name);case"assign":{const a=await this._eval(r.expr,e);return await this.assign(e,r.dest,a),ar}case"addAssign":{const a=await this._eval(r.dest,e);Ze(a);const v=await this._eval(r.expr,e);return Ze(v),await this.assign(e,r.dest,et(a.value+v.value)),ar}case"subAssign":{const a=await this._eval(r.dest,e);Ze(a);const v=await this._eval(r.expr,e);return Ze(v),await this.assign(e,r.dest,et(a.value-v.value)),ar}case"null":return ar;case"bool":return lf(r.value);case"num":return et(r.value);case"str":return vr(r.value);case"arr":return bs(await Promise.all(r.value.map(async a=>await this._eval(a,e))));case"obj":{const a=new Map;for(const v of r.value.keys())a.set(v,await this._eval(r.value.get(v),e));return nv(a)}case"prop":{const a=await this._eval(r.target,e);if(W1(a))return a.value.has(r.name)?a.value.get(r.name):ar;if(V1(a)){if(Object.hasOwn(Ho.num,r.name))return Ho.num[r.name](a);throw new dr(`No such prop (${r.name}) in ${a.type}.`)}else if(z1(a)){if(Object.hasOwn(Ho.str,r.name))return Ho.str[r.name](a);throw new dr(`No such prop (${r.name}) in ${a.type}.`)}else if(K1(a)){if(Object.hasOwn(Ho.arr,r.name))return Ho.arr[r.name](a);throw new dr(`No such prop (${r.name}) in ${a.type}.`)}else throw new dr(`Cannot read prop (${r.name}) of ${a.type}.`)}case"index":{const a=await this._eval(r.target,e);Tf(a);const v=await this._eval(r.index,e);Ze(v);const d=a.value[v.value];if(d===void 0)throw new O1(`Index out of range. index: ${v.value} max: ${a.value.length-1}`);return d}case"not":{const a=await this._eval(r.expr,e);return Qs(a),lf(!a.value)}case"fn":return L1(r.args.map(a=>a.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let a="";for(const v of r.tmpl)if(typeof v=="string")a+=v;else{const d=await this._eval(v,e);let x="";d.type==="str"?x=d.value:d.type==="num"&&(x=d.value.toString()),a+=x}return vr(a)}case"return":{const a=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:a}),H1(a)}case"break":return this.log("block:break",{scope:e.name}),B1();case"continue":return this.log("block:continue",{scope:e.name}),U1();case"ns":return ar;case"meta":return ar;case"and":{const a=await this._eval(r.left,e);if(Qs(a),a.value){const v=await this._eval(r.right,e);return Qs(v),v}else return a}case"or":{const a=await this._eval(r.left,e);if(Qs(a),a.value)return a;{const v=await this._eval(r.right,e);return Qs(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let a=ar;for(let v=0;v<r.length;v++){const d=r[v];if(a=await this._eval(d,e),a.type==="return")return this.log("block:return",{scope:e.name,val:a.value}),a;if(a.type==="break")return this.log("block:break",{scope:e.name}),a;if(a.type==="continue")return this.log("block:continue",{scope:e.name}),a}return this.log("block:leave",{scope:e.name,val:a}),a}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,a){if(e.type==="identifier")r.assign(e.name,a);else if(e.type==="index"){const v=await this._eval(e.target,r);Tf(v);const d=await this._eval(e.index,r);Ze(d),v.value[d.value]=a}else if(e.type==="prop"){const v=await this._eval(e.target,r);Nu(v),v.value.set(e.name,a)}else throw new dr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}Hn([$t],mn.prototype,"exec",null);Hn([$t],mn.prototype,"execFn",null);Hn([$t],mn.prototype,"log",null);Hn([$t],mn.prototype,"collectNs",null);Hn([$t],mn.prototype,"collectNsMember",null);Hn([$t],mn.prototype,"_fn",null);Hn([$t],mn.prototype,"_eval",null);Hn([$t],mn.prototype,"_run",null);Hn([$t],mn.prototype,"registerAbortHandler",null);Hn([$t],mn.prototype,"unregisterAbortHandler",null);Hn([$t],mn.prototype,"abort",null);Hn([$t],mn.prototype,"assign",null);Hn([$t],mn,"collectMetadata",null);function Z1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Co(t,r,e,a){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,Co.prototype),v.expected=r,v.found=e,v.location=a,v.name="SyntaxError",v}Z1(Co,Error);function Eh(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Co.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,a;for(a=0;a<t.length;a++)if(t[a].source===this.location.source){e=t[a].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,x=this.location.source+":"+d.line+":"+d.column;if(e){var k=this.location.end,E=Eh("",d.line.toString().length," "),S=e[v.line-1],F=v.line===k.line?k.column:S.length+1,j=F-v.column||1;r+=`
 --> `+x+`
`+E+` |
`+d.line+" | "+S+`
`+E+" | "+Eh("",v.column-1," ")+Eh("",j,"^")}else r+=`
 at `+x}return r};Co.buildMessage=function(t,r){var e={literal:function(S){return'"'+v(S.text)+'"'},class:function(S){var F=S.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(S.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function a(S){return S.charCodeAt(0).toString(16).toUpperCase()}function v(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function d(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+a(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+a(F)})}function x(S){return e[S.type](S)}function k(S){var F=S.map(x),j,L;if(F.sort(),F.length>0){for(j=1,L=1;j<F.length;j++)F[j-1]!==F[j]&&(F[L]=F[j],L++);F.length=L}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function E(S){return S?'"'+v(S)+'"':"end of input"}return"Expected "+k(t)+" but "+E(r)+" found."};function mg(t,r){r=r!==void 0?r:{};var e={},a=r.grammarSource,v={Preprocess:C,Main:na},d=C,x="//",k="/*",E="*/",S="(",F=")",j="::",L="{",K="}",he="###",re="let",ie=":",Ce="=",q="var",H="<:",z="#[",V="]",W="each",J=",",Y="for",te="return",Ae="loop",Ee="break",me="continue",Ge="+=",ut="-=",Yt="\\",ot="||",it="&&",Be="==",lt="!=",It="<=",Ut=">=",tt="<",Rr=">",er="+",Ar="-",Nt="*",$r="^",Vr="/",Or="%",Dr="!",jt="[",U=".",Z="if",ne="elif",pe="else",ve="match",le="=>",Oe="eval",$e="`",xe='"',ce="'",Te='\\"',We="\\'",Ve="true",Je="false",Xe="null",rt=";",ft="@",Ot="@(",qt=`\r
`,Ft=/^[A-Z0-9_:]/i,kt=/^[^`{]/,Fs=/^[{}`]/,rs=/^[+\-]/,Tt=/^[1-9]/,gt=/^[0-9]/,xt=/^[A-Z_]/i,ka=/^[A-Z0-9_]/i,Bn=/^[\r\n]/,li=/^[ \t\r\n]/,ui=/^[ \t]/,ir=zl(),Pt=ee("//",!1),oi=ee("/*",!1),$n=ee("*/",!1),yr=ee("(",!1),bt=ee(")",!1),Zt=ee("::",!1),lr=ee("{",!1),Qe=ee("}",!1),At=ee("###",!1),Wr=ee("let",!1),dt=ee(":",!1),st=ee("=",!1),Lr=ee("var",!1),fi=ee("<:",!1),ci=ee("#[",!1),Ns=ee("]",!1),Kr=ee("each",!1),Et=ee(",",!1),Ye=ee("for",!1),ss=ee("return",!1),wr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),Rt=ee("loop",!1),hi=ee("break",!1),pi=ee("continue",!1),vi=ee("+=",!1),gi=ee("-=",!1),Pa=ee("\\",!1),Un=ee("||",!1),di=ee("&&",!1),yi=ee("==",!1),wi=ee("!=",!1),mi=ee("<=",!1),$i=ee(">=",!1),Ea=ee("<",!1),sn=ee(">",!1),qn=ee("+",!1),xi=ee("-",!1),Ma=ee("*",!1),zn=ee("^",!1),bi=ee("/",!1),Ai=ee("%",!1),Ci=ee("!",!1),xn=ee("[",!1),Xr=ee(".",!1),Os=ee("if",!1),_i=ee("elif",!1),ki=ee("else",!1),Pi=ee("match",!1),Ts=ee("=>",!1),ns=ee("eval",!1),Is=ee("`",!1),Ei=tr(["`","{"],!0,!1),as=tr(["{","}","`"],!1,!1),js=ee('"',!1),Rs=ee("'",!1),is=ee('\\"',!1),ls=ee("\\'",!1),Ds=tr(["+","-"],!1,!1),Sa=tr([["1","9"]],!1,!1),Mt=tr([["0","9"]],!1,!1),Vn=ee("true",!1),St=ee("false",!1),Mi=ee("null",!1),Ls=ee(";",!1),Si=ee("@",!1),Gr=ee("@(",!1),Fi=tr([["A","Z"],"_"],!1,!0),nn=tr([["A","Z"],["0","9"],"_"],!1,!0),Ni=ee(`\r
`,!1),Wn=tr(["\r",`
`],!1,!1),Oi=tr([" ","	","\r",`
`],!1,!1),Ti=tr([" ","	"],!1,!1),Ii=function(o){return o.join("")},ji=function(){return $()},Ri=function(){return $()},Di=function(){return""},Li=function(){return""},Hi=function(o){return o??[]},Fa=function(o,f){return f},Bi=function(o,f){return[o,...f]},an=function(o,f){return f},Ui=function(o,f){return[o,...f]},ln=function(o,f){return f},qi=function(o,f){return[o,...f]},Kn=function(o){return o},zi=function(o,f){return ae("ns",{name:o,members:f})},Vi=function(o,f){return ae("meta",{name:o,value:f})},Wi=function(o){return ae("meta",{name:null,value:o})},Ki=function(o,f,w){return ae("def",{name:o,varType:f,expr:w,mut:!1,attr:[]})},Gi=function(o,f,w){return ae("def",{name:o,varType:f,expr:w,mut:!0,attr:[]})},Ji=function(o){return ae("identifier",{name:"print",chain:[ae("callChain",{args:[o]})]})},Zi=function(o,f){return ae("attr",{name:o,value:f??ae("bool",{value:!0})})},Qi=function(o,f,w){return ae("each",{var:o,items:f,for:w})},Xi=function(o,f,w){return ae("each",{var:o,items:f,for:w})},Yi=function(o,f){return f},el=function(o,f,w,g){return ae("for",{var:o,from:f??ae("num",{value:0}),to:w,for:g})},tl=function(o,f){return f},rl=function(o,f,w,g){return ae("for",{var:o,from:f??ae("num",{value:0}),to:w,for:g})},sl=function(o,f){return ae("for",{times:o,for:f})},nl=function(o,f){return ae("for",{times:o,for:f})},al=function(o){return ae("return",{expr:o})},il=function(o){return ae("loop",{statements:o})},ll=function(){return ae("break",{})},ul=function(){return ae("continue",{})},ol=function(o,f,w){return f==="+="?ae("addAssign",{dest:o,expr:w}):f==="-="?ae("subAssign",{dest:o,expr:w}):ae("assign",{dest:o,expr:w})},Na=function(o,f,w){return{op:f,term:w}},fl=function(o,f){return ae("infix",{operands:[o,...f.map(w=>w.term)],operators:f.map(w=>w.op)})},Gn=function(){return $()},cl=function(o){return ae("not",{expr:o})},hl=function(o,f){return{...o,chain:f}},pl=function(o){return ae("callChain",{args:o??[]})},Oa=function(o,f){return f},vl=function(o,f){return[o,...f]},Jn=function(o){return ae("indexChain",{index:o})},gl=function(o){return ae("propChain",{name:o})},dl=function(o,f,w,g){return ae("if",{cond:o,then:f,elseif:w??[],else:g})},yl=function(o,f){return[o,...f]},wl=function(o,f){return{cond:o,then:f}},ml=function(o){return o},Ta=function(o,f,w){return{q:f,a:w}},$l=function(o,f,w){return ae("match",{about:o,qs:f??[],default:w})},Zn=function(o){return ae("block",{statements:o})},xl=function(o){return ae("identifier",{name:o})},bl=function(o){return ae("tmpl",{tmpl:o})},Al=function(o){return o.join("")},Ia=function(o){return o},Cl=function(o){return ae("str",{value:o.join("")})},ja=function(o){return o},Qn=function(o){return ae("str",{value:o.join("")})},_l=function(){return'"'},Xn=function(){return"'"},kl=function(){return ae("num",{value:parseFloat($())})},Pl=function(){return ae("num",{value:parseFloat($())})},El=function(){return ae("num",{value:parseInt($(),10)})},Ml=function(){return ae("num",{value:parseInt($(),10)})},Sl=function(){return ae("bool",{value:!0})},Fl=function(){return ae("bool",{value:!1})},Nl=function(){return ae("null",{})},Ra=function(o,f){return{k:o,v:f}},Ol=function(o){const f=new Map;for(const w of o)f.set(w.k,w.v);return ae("obj",{value:f})},Da=function(o){return o},Yn=function(o){return ae("arr",{value:o})},Tl=function(o,f){return{name:o,argType:f}},ea=function(o,f){return[o,...f]},Il=function(o,f,w,g,s,l){return(o.length>0||w.length>0)&&us("Cannot use spaces before or after the function name."),ae("def",{name:f,expr:ae("fn",{args:g??[],retType:s},l??[]),mut:!1,attr:[]})},jl=function(o,f,w){return ae("fn",{args:o??[],retType:f},w??[])},La=function(o){return o},Rl=function(o){return ae("arr",{value:o})},Ha=function(o,f){return{k:o,v:f}},ta=function(o){const f=new Map;for(const w of o)f.set(w.k,w.v);return ae("obj",{value:f})},Dl=function(o,f){return ae("fnTypeSource",{args:o??[],result:f})},ra=function(o,f){return[o,...f]},Ll=function(o,f){return ae("namedTypeSource",{name:o,inner:f})},Hl=function(o){return ae("namedTypeSource",{name:o,inner:null})},Bl=function(){return $()},Ul=function(){return $()},ql=function(o){return ae("block",{statements:o??[]})},u=0,G=0,Hs=[{line:1,column:1}],n=0,D=[],P=0,I={},Hr;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function $(){return t.substring(G,u)}function M(){return Bs(G,u)}function us(o,f){throw f=f!==void 0?f:Bs(G,u),sa(o,f)}function ee(o,f){return{type:"literal",text:o,ignoreCase:f}}function tr(o,f,w){return{type:"class",parts:o,inverted:f,ignoreCase:w}}function zl(){return{type:"any"}}function Q(){return{type:"end"}}function yt(o){var f=Hs[o],w;if(f)return f;for(w=o-1;!Hs[w];)w--;for(f=Hs[w],f={line:f.line,column:f.column};w<o;)t.charCodeAt(w)===10?(f.line++,f.column=1):f.column++,w++;return Hs[o]=f,f}function Bs(o,f,w){var g=yt(o),s=yt(f),l={source:a,start:{offset:o,line:g.line,column:g.column},end:{offset:f,line:s.line,column:s.column}};return w&&a&&typeof a.offset=="function"&&(l.start=a.offset(l.start),l.end=a.offset(l.end)),l}function T(o){u<n||(u>n&&(n=u,D=[]),D.push(o))}function sa(o,f){return new Co(o,null,null,f)}function os(o,f,w){return new Co(Co.buildMessage(o,f),o,f,w)}function C(){var o,f,w,g=u*76+0,s=I[g];if(s)return u=s.nextPos,s.result;for(o=u,f=[],w=Ba();w!==e;)f.push(w),w=Ba();return G=o,f=Ii(f),o=f,I[g]={nextPos:u,result:o},o}function Ba(){var o,f,w=u*76+1,g=I[w];return g?(u=g.nextPos,g.result):(o=u,f=za(),f!==e&&(G=o,f=ji()),o=f,o===e&&(o=u,f=ms(),f!==e&&(G=o,f=Ri()),o=f,o===e&&(o=Vl(),o===e&&(t.length>u?(o=t.charAt(u),u++):(o=e,P===0&&T(ir))))),I[w]={nextPos:u,result:o},o)}function Vl(){var o,f,w,g,s,l,h=u*76+2,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.substr(u,2)===x?(f=x,u+=2):(f=e,P===0&&T(Pt)),f!==e){for(w=[],g=u,s=u,P++,l=Za(),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,l=Za(),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);G=o,o=Di()}else u=o,o=e;if(o===e)if(o=u,t.substr(u,2)===k?(f=k,u+=2):(f=e,P===0&&T(oi)),f!==e){for(w=[],g=u,s=u,P++,t.substr(u,2)===E?(l=E,u+=2):(l=e,P===0&&T($n)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.substr(u,2)===E?(l=E,u+=2):(l=e,P===0&&T($n)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir)),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);t.substr(u,2)===E?(g=E,u+=2):(g=e,P===0&&T($n)),g!==e?(G=o,o=Li()):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function na(){var o,f,w,g,s,l=u*76+3,h=I[l];if(h)return u=h.nextPos,h.result;for(o=u,f=[],w=_();w!==e;)f.push(w),w=_();for(w=aa(),w===e&&(w=null),g=[],s=_();s!==e;)g.push(s),s=_();return G=o,o=Hi(w),I[l]={nextPos:u,result:o},o}function aa(){var o,f,w,g,s,l,h,i,p=u*76+4,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=bn(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=bn(),i!==e?(G=g,g=Fa(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=bn(),i!==e?(G=g,g=Fa(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=Bi(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function Wl(){var o,f,w,g,s,l,h,i,p=u*76+5,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=An(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=An(),i!==e?(G=g,g=an(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=An(),i!==e?(G=g,g=an(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=Ui(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function hs(){var o,f,w,g,s,l,h,i,p=u*76+6,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=rr(),f!==e){for(w=[],g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=rr(),i!==e?(G=g,g=ln(f,i)):(u=g,g=e)}else u=g,g=e;for(;g!==e;){for(w.push(g),g=u,s=[],l=be();l!==e;)s.push(l),l=be();if(l=De(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=rr(),i!==e?(G=g,g=ln(f,i)):(u=g,g=e)}else u=g,g=e}G=o,o=qi(f,w)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function bn(){var o,f=u*76+7,w=I[f];return w?(u=w.nextPos,w.result):(o=Jr(),o===e&&(o=ia(),o===e&&(o=rr())),I[f]={nextPos:u,result:o},o)}function An(){var o,f=u*76+8,w=I[f];return w?(u=w.nextPos,w.result):(o=sr(),o===e&&(o=Ja(),o===e&&(o=Jr())),I[f]={nextPos:u,result:o},o)}function rr(){var o,f=u*76+9,w=I[f];return w?(u=w.nextPos,w.result):(o=sr(),o===e&&(o=Ja(),o===e&&(o=la(),o===e&&(o=Jl(),o===e&&(o=Kl(),o===e&&(o=ua(),o===e&&(o=Gl(),o===e&&(o=Zl(),o===e&&(o=Ql(),o===e&&(o=Xl(),o===e&&(o=Yl(),o===e&&(o=Ue()))))))))))),I[f]={nextPos:u,result:o},o)}function Ue(){var o,f=u*76+10,w=I[f];return w?(u=w.nextPos,w.result):(o=eu(),o===e&&(o=Br()),I[f]={nextPos:u,result:o},o)}function Br(){var o,f=u*76+11,w=I[f];return w?(u=w.nextPos,w.result):(o=su(),o===e&&(o=ou(),o===e&&(o=Qt(),o===e&&(o=Cr()))),I[f]={nextPos:u,result:o},o)}function Cr(){var o,f,w,g,s,l,h=u*76+12,i=I[h];if(i)return u=i.nextPos,i.result;if(o=au(),o===e&&(o=Us(),o===e&&(o=za(),o===e&&(o=ms(),o===e&&(o=Ka(),o===e&&(o=hn(),o===e&&(o=Ga(),o===e&&(o=pa(),o===e&&(o=uu(),o===e&&(o=tu(),o===e&&(o=iu(),o===e)))))))))))if(o=u,t.charCodeAt(u)===40?(f=S,u++):(f=e,P===0&&T(yr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=Ue(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e?(G=o,o=Kn(g)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ye(){var o,f=u*76+13,w=I[f];return w?(u=w.nextPos,w.result):(o=Ka(),o===e&&(o=ms(),o===e&&(o=hn(),o===e&&(o=zs(),o===e&&(o=va(),o===e&&(o=Ga()))))),I[f]={nextPos:u,result:o},o)}function Jr(){var o,f,w,g,s,l,h,i,p,c,m=u*76+14,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===j?(f=j,u+=2):(f=e,P===0&&T(Zt)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(t.charCodeAt(u)===123?(l=L,u++):(l=e,P===0&&T(lr)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(i=Wl(),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();t.charCodeAt(u)===125?(c=K,u++):(c=e,P===0&&T(Qe)),c!==e?(G=o,o=zi(g,i)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function ia(){var o,f,w,g,s,l,h=u*76+15,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.substr(u,3)===he?(f=he,u+=3):(f=e,P===0&&T(At)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=He(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();l=ye(),l!==e?(G=o,o=Vi(g,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===he?(f=he,u+=3):(f=e,P===0&&T(At)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();g=ye(),g!==e?(G=o,o=Wi(g)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function sr(){var o,f,w,g,s,l,h,i,p,c=u*76+16,m=I[c];if(m)return u=m.nextPos,m.result;if(o=u,t.substr(u,3)===re?(f=re,u+=3):(f=e,P===0&&T(Wr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===58?(h=ie,u++):(h=e,P===0&&T(dt)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Xt(),p!==e?s=p:(u=s,s=e)}else u=s,s=e;for(s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===61?(h=Ce,u++):(h=e,P===0&&T(st)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Ue(),p!==e?(G=o,o=Ki(g,s,p)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===q?(f=q,u+=3):(f=e,P===0&&T(Lr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===58?(h=ie,u++):(h=e,P===0&&T(dt)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Xt(),p!==e?s=p:(u=s,s=e)}else u=s,s=e;for(s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===61?(h=Ce,u++):(h=e,P===0&&T(st)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();p=Ue(),p!==e?(G=o,o=Gi(g,s,p)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[c]={nextPos:u,result:o},o}function la(){var o,f,w,g,s=u*76+17,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,t.substr(u,2)===H?(f=H,u+=2):(f=e,P===0&&T(fi)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();g=Ue(),g!==e?(G=o,o=Ji(g)):(u=o,o=e)}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function Kl(){var o,f,w,g,s,l,h,i=u*76+18,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,t.substr(u,2)===z?(f=z,u+=2):(f=e,P===0&&T(ci)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=He(),g!==e){for(s=u,l=[],h=_();h!==e;)l.push(h),h=_();for(h=ye(),h!==e?s=h:(u=s,s=e),s===e&&(s=null),l=[],h=_();h!==e;)l.push(h),h=_();t.charCodeAt(u)===93?(h=V,u++):(h=e,P===0&&T(Ns)),h!==e?(G=o,o=Zi(g,s)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[i]={nextPos:u,result:o},o}function ua(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+19,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.substr(u,4)===W?(f=W,u+=4):(f=e,P===0&&T(Kr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(t.substr(u,3)===re?(s=re,u+=3):(s=e,P===0&&T(Wr)),s!==e){if(l=[],h=_(),h!==e)for(;h!==e;)l.push(h),h=_();else l=e;if(l!==e)if(h=He(),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();for(t.charCodeAt(u)===44?(p=J,u++):(p=e,P===0&&T(Et)),p===e&&(p=null),c=[],m=_();m!==e;)c.push(m),m=_();if(m=Ue(),m!==e)if(t.charCodeAt(u)===41?(y=F,u++):(y=e,P===0&&T(bt)),y!==e){for(b=[],A=_();A!==e;)b.push(A),A=_();A=Jt(),A!==e?(G=o,o=Qi(h,m,A)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,4)===W?(f=W,u+=4):(f=e,P===0&&T(Kr)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(t.substr(u,3)===re?(g=re,u+=3):(g=e,P===0&&T(Wr)),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();if(c=Ue(),c!==e){if(m=[],y=_(),y!==e)for(;y!==e;)m.push(y),y=_();else m=e;m!==e?(y=Jt(),y!==e?(G=o,o=Xi(l,c,y)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function Gl(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O=u*76+20,B=I[O];if(B)return u=B.nextPos,B.result;if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(t.substr(u,3)===re?(s=re,u+=3):(s=e,P===0&&T(Wr)),s!==e){if(l=[],h=_(),h!==e)for(;h!==e;)l.push(h),h=_();else l=e;if(l!==e)if(h=He(),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();if(p=u,t.charCodeAt(u)===61?(c=Ce,u++):(c=e,P===0&&T(st)),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();y=Ue(),y!==e?(G=p,p=Yi(h,y)):(u=p,p=e)}else u=p,p=e;for(p===e&&(p=null),t.charCodeAt(u)===44?(c=J,u++):(c=e,P===0&&T(Et)),c===e&&(c=null),m=[],y=_();y!==e;)m.push(y),y=_();if(y=Ue(),y!==e)if(t.charCodeAt(u)===41?(b=F,u++):(b=e,P===0&&T(bt)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();N=Jt(),N!==e?(G=o,o=el(h,p,y,N)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(t.substr(u,3)===re?(g=re,u+=3):(g=e,P===0&&T(Wr)),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(i=u,t.charCodeAt(u)===61?(p=Ce,u++):(p=e,P===0&&T(st)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();m=Ue(),m!==e?(G=i,i=tl(l,m)):(u=i,i=e)}else u=i,i=e;for(i===e&&(i=null),t.charCodeAt(u)===44?(p=J,u++):(p=e,P===0&&T(Et)),p===e&&(p=null),c=[],m=_();m!==e;)c.push(m),m=_();if(m=Ue(),m!==e){if(y=[],b=_(),b!==e)for(;b!==e;)y.push(b),b=_();else y=e;y!==e?(b=Jt(),b!==e?(G=o,o=rl(l,i,m,b)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===40?(g=S,u++):(g=e,P===0&&T(yr)),g!==e)if(s=Ue(),s!==e)if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();i=Jt(),i!==e?(G=o,o=sl(s,i)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,t.substr(u,3)===Y?(f=Y,u+=3):(f=e,P===0&&T(Ye)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=Ue(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;s!==e?(l=Jt(),l!==e?(G=o,o=nl(g,l)):(u=o,o=e)):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e}}return I[O]={nextPos:u,result:o},o}function Jl(){var o,f,w,g,s,l=u*76+21,h=I[l];if(h)return u=h.nextPos,h.result;if(o=u,t.substr(u,6)===te?(f=te,u+=6):(f=e,P===0&&T(ss)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();s=Ue(),s!==e?(G=o,o=al(s)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[l]={nextPos:u,result:o},o}function Zl(){var o,f,w,g,s,l,h,i,p=u*76+22,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,t.substr(u,4)===Ae?(f=Ae,u+=4):(f=e,P===0&&T(Rt)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===123?(g=L,u++):(g=e,P===0&&T(lr)),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();if(l=hs(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();t.charCodeAt(u)===125?(i=K,u++):(i=e,P===0&&T(Qe)),i!==e?(G=o,o=il(l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function Ql(){var o,f,w,g,s=u*76+23,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,5)===Ee?(f=Ee,u+=5):(f=e,P===0&&T(hi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=ll()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Xl(){var o,f,w,g,s=u*76+24,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,8)===me?(f=me,u+=8):(f=e,P===0&&T(pi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=ul()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Yl(){var o,f,w,g,s,l,h=u*76+25,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Ue(),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.substr(u,2)===Ge?(g=Ge,u+=2):(g=e,P===0&&T(vi)),g===e&&(t.substr(u,2)===ut?(g=ut,u+=2):(g=e,P===0&&T(gi)),g===e&&(t.charCodeAt(u)===61?(g=Ce,u++):(g=e,P===0&&T(st)))),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();l=Ue(),l!==e?(G=o,o=ol(f,g,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function eu(){var o,f,w,g,s,l,h,i,p=u*76+26,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=Br(),f!==e){for(w=[],g=u,s=[],l=_r();l!==e;)s.push(l),l=_r();if(l=Ua(),l!==e){for(h=[],i=_r();i!==e;)h.push(i),i=_r();i=Br(),i!==e?(G=g,g=Na(f,l,i)):(u=g,g=e)}else u=g,g=e;if(g!==e)for(;g!==e;){for(w.push(g),g=u,s=[],l=_r();l!==e;)s.push(l),l=_r();if(l=Ua(),l!==e){for(h=[],i=_r();i!==e;)h.push(i),i=_r();i=Br(),i!==e?(G=g,g=Na(f,l,i)):(u=g,g=e)}else u=g,g=e}else w=e;w!==e?(G=o,o=fl(f,w)):(u=o,o=e)}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function _r(){var o,f,w,g=u*76+27,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===92?(f=Yt,u++):(f=e,P===0&&T(Pa)),f!==e?(w=De(),w!==e?(f=[f,w],o=f):(u=o,o=e)):(u=o,o=e),o===e&&(o=be()),I[g]={nextPos:u,result:o},o)}function Ua(){var o,f,w=u*76+28,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===ot?(f=ot,u+=2):(f=e,P===0&&T(Un)),f===e&&(t.substr(u,2)===it?(f=it,u+=2):(f=e,P===0&&T(di)),f===e&&(t.substr(u,2)===Be?(f=Be,u+=2):(f=e,P===0&&T(yi)),f===e&&(t.substr(u,2)===lt?(f=lt,u+=2):(f=e,P===0&&T(wi)),f===e&&(t.substr(u,2)===It?(f=It,u+=2):(f=e,P===0&&T(mi)),f===e&&(t.substr(u,2)===Ut?(f=Ut,u+=2):(f=e,P===0&&T($i)),f===e&&(t.charCodeAt(u)===60?(f=tt,u++):(f=e,P===0&&T(Ea)),f===e&&(t.charCodeAt(u)===62?(f=Rr,u++):(f=e,P===0&&T(sn)),f===e&&(t.charCodeAt(u)===43?(f=er,u++):(f=e,P===0&&T(qn)),f===e&&(t.charCodeAt(u)===45?(f=Ar,u++):(f=e,P===0&&T(xi)),f===e&&(t.charCodeAt(u)===42?(f=Nt,u++):(f=e,P===0&&T(Ma)),f===e&&(t.charCodeAt(u)===94?(f=$r,u++):(f=e,P===0&&T(zn)),f===e&&(t.charCodeAt(u)===47?(f=Vr,u++):(f=e,P===0&&T(bi)),f===e&&(t.charCodeAt(u)===37?(f=Or,u++):(f=e,P===0&&T(Ai))))))))))))))),f!==e&&(G=o,f=Gn()),o=f,I[w]={nextPos:u,result:o},o)}function tu(){var o,f,w,g=u*76+29,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===33?(f=Dr,u++):(f=e,P===0&&T(Ci)),f!==e?(w=Ue(),w!==e?(G=o,o=cl(w)):(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function Qt(){var o,f,w,g,s=u*76+30,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,f=Cr(),f!==e){if(w=[],g=un(),g===e&&(g=qa(),g===e&&(g=on())),g!==e)for(;g!==e;)w.push(g),g=un(),g===e&&(g=qa(),g===e&&(g=on()));else w=e;w!==e?(G=o,o=hl(f,w)):(u=o,o=e)}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function un(){var o,f,w,g,s,l,h=u*76+31,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===40?(f=S,u++):(f=e,P===0&&T(yr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=ru(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e?(G=o,o=pl(g)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ru(){var o,f,w,g,s,l,h=u*76+32,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Ue(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Ue(),l!==e?(G=g,g=Oa(f,l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Ue(),l!==e?(G=g,g=Oa(f,l)):(u=g,g=e)):(u=g,g=e);G=o,o=vl(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function qa(){var o,f,w,g,s,l,h=u*76+33,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=Ue(),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Jn(g)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function on(){var o,f,w,g=u*76+34,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===46?(f=U,u++):(f=e,P===0&&T(Xr)),f!==e?(w=He(),w!==e?(G=o,o=gl(w)):(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function su(){var o,f,w,g,s,l,h,i,p,c,m=u*76+35,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===Z?(f=Z,u+=2):(f=e,P===0&&T(Os)),f!==e){if(w=[],g=_(),g!==e)for(;g!==e;)w.push(g),g=_();else w=e;if(w!==e)if(g=Ue(),g!==e){if(s=[],l=_(),l!==e)for(;l!==e;)s.push(l),l=_();else s=e;if(s!==e)if(l=Jt(),l!==e){if(h=u,i=[],p=_(),p!==e)for(;p!==e;)i.push(p),p=_();else i=e;if(i!==e?(p=oa(),p!==e?h=p:(u=h,h=e)):(u=h,h=e),h===e&&(h=null),i=u,p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;p!==e?(c=nu(),c!==e?i=c:(u=i,i=e)):(u=i,i=e),i===e&&(i=null),G=o,o=dl(g,l,h,i)}else u=o,o=e;else u=o,o=e}else u=o,o=e;else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function oa(){var o,f,w,g,s,l,h=u*76+36,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=ws(),f!==e){for(w=[],g=u,s=[],l=_();l!==e;)s.push(l),l=_();for(l=ws(),l!==e?g=l:(u=g,g=e);g!==e;){for(w.push(g),g=u,s=[],l=_();l!==e;)s.push(l),l=_();l=ws(),l!==e?g=l:(u=g,g=e)}G=o,o=yl(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ws(){var o,f,w,g,s,l,h,i=u*76+37,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,t.substr(u,4)===ne?(f=ne,u+=4):(f=e,P===0&&T(_i)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();if(s=Ue(),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();h=Jt(),h!==e?(G=o,o=wl(s,h)):(u=o,o=e)}else u=o,o=e}else u=o,o=e;else u=o,o=e;return I[i]={nextPos:u,result:o},o}function nu(){var o,f,w,g,s,l=u*76+38,h=I[l];if(h)return u=h.nextPos,h.result;if(o=u,t.substr(u,4)===pe?(f=pe,u+=4):(f=e,P===0&&T(ki)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();s=Jt(),s!==e?(G=o,o=ml(s)):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[l]={nextPos:u,result:o},o}function au(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O,B,se=u*76+39,X=I[se];if(X)return u=X.nextPos,X.result;if(o=u,t.substr(u,5)===ve?(f=ve,u+=5):(f=e,P===0&&T(Pi)),f!==e)if(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();if(s=Ue(),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();if(t.charCodeAt(u)===123?(h=L,u++):(h=e,P===0&&T(lr)),h!==e){for(i=[],p=_();p!==e;)i.push(p),p=_();if(p=[],c=u,m=Ue(),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();G=c,c=Ta(s,m,N)}else u=c,c=e}else u=c,c=e}else u=c,c=e;if(c!==e)for(;c!==e;)if(p.push(c),c=u,m=Ue(),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();G=c,c=Ta(s,m,N)}else u=c,c=e}else u=c,c=e}else u=c,c=e;else p=e;if(p!==e){if(c=u,t.charCodeAt(u)===42?(m=Nt,u++):(m=e,P===0&&T(Ma)),m!==e){for(y=[],b=_();b!==e;)y.push(b),b=_();if(t.substr(u,2)===le?(b=le,u+=2):(b=e,P===0&&T(Ts)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();if(N=Jt(),N!==e){for(O=[],B=_();B!==e;)O.push(B),B=_();c=N}else u=c,c=e}else u=c,c=e}else u=c,c=e;for(c===e&&(c=null),m=[],y=_();y!==e;)m.push(y),y=_();t.charCodeAt(u)===125?(y=K,u++):(y=e,P===0&&T(Qe)),y!==e?(G=o,o=$l(s,p,c)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e;else u=o,o=e;return I[se]={nextPos:u,result:o},o}function Us(){var o,f,w,g,s,l,h,i,p=u*76+40,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,t.substr(u,4)===Oe?(f=Oe,u+=4):(f=e,P===0&&T(ns)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(t.charCodeAt(u)===123?(g=L,u++):(g=e,P===0&&T(lr)),g!==e){for(s=[],l=_();l!==e;)s.push(l),l=_();if(l=hs(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();t.charCodeAt(u)===125?(i=K,u++):(i=e,P===0&&T(Qe)),i!==e?(G=o,o=Zn(l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[p]={nextPos:u,result:o},o}function iu(){var o,f,w=u*76+41,g=I[w];return g?(u=g.nextPos,g.result):(o=u,f=pu(),f!==e&&(G=o,f=xl(f)),o=f,I[w]={nextPos:u,result:o},o)}function za(){var o,f,w,g,s,l,h=u*76+42,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===96?(f=$e,u++):(f=e,P===0&&T(Is)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===96?(l=$e,u++):(l=e,P===0&&T(Is)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=Va(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===96?(l=$e,u++):(l=e,P===0&&T(Is)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=Va(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===96?(g=$e,u++):(g=e,P===0&&T(Is)),g!==e?(G=o,o=bl(w)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Va(){var o,f,w,g,s,l,h=u*76+43,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=Ue(),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();t.charCodeAt(u)===125?(l=K,u++):(l=e,P===0&&T(Qe)),l!==e?o=g:(u=o,o=e)}else u=o,o=e}else u=o,o=e;if(o===e){if(o=u,f=[],w=Wa(),w!==e)for(;w!==e;)f.push(w),w=Wa();else f=e;f!==e&&(G=o,f=Al(f)),o=f}return I[h]={nextPos:u,result:o},o}function Wa(){var o,f=u*76+44,w=I[f];return w?(u=w.nextPos,w.result):(o=fa(),o===e&&(kt.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Ei))),I[f]={nextPos:u,result:o},o)}function fa(){var o,f,w,g=u*76+45,s=I[g];return s?(u=s.nextPos,s.result):(o=u,t.charCodeAt(u)===92?(f=Yt,u++):(f=e,P===0&&T(Pa)),f!==e?(Fs.test(t.charAt(u))?(w=t.charAt(u),u++):(w=e,P===0&&T(as)),w!==e?o=w:(u=o,o=e)):(u=o,o=e),I[g]={nextPos:u,result:o},o)}function ms(){var o,f,w,g,s,l,h=u*76+46,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===34?(f=xe,u++):(f=e,P===0&&T(js)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===34?(l=xe,u++):(l=e,P===0&&T(js)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=fn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=Ia(l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===34?(l=xe,u++):(l=e,P===0&&T(js)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=fn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=Ia(l)):(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===34?(g=xe,u++):(g=e,P===0&&T(js)),g!==e?(G=o,o=Cl(w)):(u=o,o=e)}else u=o,o=e;if(o===e)if(o=u,t.charCodeAt(u)===39?(f=ce,u++):(f=e,P===0&&T(Rs)),f!==e){for(w=[],g=u,s=u,P++,t.charCodeAt(u)===39?(l=ce,u++):(l=e,P===0&&T(Rs)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=cn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=ja(l)):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=u,P++,t.charCodeAt(u)===39?(l=ce,u++):(l=e,P===0&&T(Rs)),P--,l===e?s=void 0:(u=s,s=e),s!==e?(l=cn(),l===e&&(t.length>u?(l=t.charAt(u),u++):(l=e,P===0&&T(ir))),l!==e?(G=g,g=ja(l)):(u=g,g=e)):(u=g,g=e);t.charCodeAt(u)===39?(g=ce,u++):(g=e,P===0&&T(Rs)),g!==e?(G=o,o=Qn(w)):(u=o,o=e)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function fn(){var o,f,w=u*76+47,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===Te?(f=Te,u+=2):(f=e,P===0&&T(is)),f!==e&&(G=o,f=_l()),o=f,I[w]={nextPos:u,result:o},o)}function cn(){var o,f,w=u*76+48,g=I[w];return g?(u=g.nextPos,g.result):(o=u,t.substr(u,2)===We?(f=We,u+=2):(f=e,P===0&&T(ls)),f!==e&&(G=o,f=Xn()),o=f,I[w]={nextPos:u,result:o},o)}function Ka(){var o,f=u*76+49,w=I[f];return w?(u=w.nextPos,w.result):(o=qs(),o===e&&(o=ca()),I[f]={nextPos:u,result:o},o)}function qs(){var o,f,w,g,s,l,h=u*76+50,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),Tt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Sa)),f!==e){if(w=[],gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt)),g!==e)for(;g!==e;)w.push(g),gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt));else w=e;if(w!==e)if(t.charCodeAt(u)===46?(g=U,u++):(g=e,P===0&&T(Xr)),g!==e){if(s=[],gt.test(t.charAt(u))?(l=t.charAt(u),u++):(l=e,P===0&&T(Mt)),l!==e)for(;l!==e;)s.push(l),gt.test(t.charAt(u))?(l=t.charAt(u),u++):(l=e,P===0&&T(Mt));else s=e;s!==e?(G=o,o=kl()):(u=o,o=e)}else u=o,o=e;else u=o,o=e}else u=o,o=e;if(o===e)if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),gt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Mt)),f!==e)if(t.charCodeAt(u)===46?(w=U,u++):(w=e,P===0&&T(Xr)),w!==e){if(g=[],gt.test(t.charAt(u))?(s=t.charAt(u),u++):(s=e,P===0&&T(Mt)),s!==e)for(;s!==e;)g.push(s),gt.test(t.charAt(u))?(s=t.charAt(u),u++):(s=e,P===0&&T(Mt));else g=e;g!==e?(G=o,o=Pl()):(u=o,o=e)}else u=o,o=e;else u=o,o=e;return I[h]={nextPos:u,result:o},o}function ca(){var o,f,w,g,s=u*76+51,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),Tt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Sa)),f!==e){if(w=[],gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt)),g!==e)for(;g!==e;)w.push(g),gt.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(Mt));else w=e;w!==e?(G=o,o=El()):(u=o,o=e)}else u=o,o=e;return o===e&&(o=u,rs.test(t.charAt(u))?(t.charAt(u),u++):P===0&&T(Ds),gt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Mt)),f!==e?(G=o,o=Ml()):(u=o,o=e)),I[s]={nextPos:u,result:o},o}function hn(){var o,f=u*76+52,w=I[f];return w?(u=w.nextPos,w.result):(o=ha(),o===e&&(o=lu()),I[f]={nextPos:u,result:o},o)}function ha(){var o,f,w,g,s=u*76+53,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,4)===Ve?(f=Ve,u+=4):(f=e,P===0&&T(Vn)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Sl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function lu(){var o,f,w,g,s=u*76+54,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,5)===Je?(f=Je,u+=5):(f=e,P===0&&T(St)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Fl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function Ga(){var o,f,w,g,s=u*76+55,l=I[s];return l?(u=l.nextPos,l.result):(o=u,t.substr(u,4)===Xe?(f=Xe,u+=4):(f=e,P===0&&T(Mi)),f!==e?(w=u,P++,Ft.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(wr)),P--,g===e?w=void 0:(u=w,w=e),w!==e?(G=o,o=Nl()):(u=o,o=e)):(u=o,o=e),I[s]={nextPos:u,result:o},o)}function pa(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+56,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=Ue(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ra(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=Ue(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ra(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;t.charCodeAt(u)===125?(s=K,u++):(s=e,P===0&&T(Qe)),s!==e?(G=o,o=Ol(g)):(u=o,o=e)}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function uu(){var o,f,w,g,s,l,h,i,p,c,m=u*76+57,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=Ue(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=Da(l)}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=Ue(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=Da(l)}else u=s,s=e;for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Yn(g)):(u=o,o=e)}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function Cn(){var o,f,w,g,s,l,h,i=u*76+58,p=I[i];if(p)return u=p.nextPos,p.result;if(o=u,f=He(),f!==e){for(w=u,g=[],s=_();s!==e;)g.push(s),s=_();if(t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e){for(l=[],h=_();h!==e;)l.push(h),h=_();h=Xt(),h!==e?w=h:(u=w,w=e)}else u=w,w=e;w===e&&(w=null),G=o,o=Tl(f,w)}else u=o,o=e;return I[i]={nextPos:u,result:o},o}function pn(){var o,f,w,g,s,l,h=u*76+59,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Cn(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Cn(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Cn(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);G=o,o=ea(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Ja(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N,O,B,se=u*76+60,X=I[se];if(X)return u=X.nextPos,X.result;if(o=u,t.charCodeAt(u)===64?(f=ft,u++):(f=e,P===0&&T(Si)),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(g=He(),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();if(t.charCodeAt(u)===40?(l=S,u++):(l=e,P===0&&T(yr)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(i=pn(),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();if(t.charCodeAt(u)===41?(c=F,u++):(c=e,P===0&&T(bt)),c!==e){for(m=u,y=[],b=_();b!==e;)y.push(b),b=_();if(t.charCodeAt(u)===58?(b=ie,u++):(b=e,P===0&&T(dt)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();N=Xt(),N!==e?m=N:(u=m,m=e)}else u=m,m=e;for(m===e&&(m=null),y=[],b=_();b!==e;)y.push(b),b=_();if(t.charCodeAt(u)===123?(b=L,u++):(b=e,P===0&&T(lr)),b!==e){for(A=[],N=_();N!==e;)A.push(N),N=_();for(N=hs(),N===e&&(N=null),O=[],B=_();B!==e;)O.push(B),B=_();t.charCodeAt(u)===125?(B=K,u++):(B=e,P===0&&T(Qe)),B!==e?(G=o,o=Il(w,g,s,i,m,N)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[se]={nextPos:u,result:o},o}function ou(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A=u*76+61,N=I[A];if(N)return u=N.nextPos,N.result;if(o=u,t.substr(u,2)===Ot?(f=Ot,u+=2):(f=e,P===0&&T(Gr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=pn(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=u,i=[],p=_();p!==e;)i.push(p),p=_();if(t.charCodeAt(u)===58?(p=ie,u++):(p=e,P===0&&T(dt)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();m=Xt(),m!==e?h=m:(u=h,h=e)}else u=h,h=e;for(h===e&&(h=null),i=[],p=_();p!==e;)i.push(p),p=_();if(t.charCodeAt(u)===123?(p=L,u++):(p=e,P===0&&T(lr)),p!==e){for(c=[],m=_();m!==e;)c.push(m),m=_();for(m=hs(),m===e&&(m=null),y=[],b=_();b!==e;)y.push(b),b=_();t.charCodeAt(u)===125?(b=K,u++):(b=e,P===0&&T(Qe)),b!==e?(G=o,o=jl(g,h,m)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[A]={nextPos:u,result:o},o}function zs(){var o,f,w,g,s,l,h,i,p,c,m=u*76+62,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.charCodeAt(u)===91?(f=jt,u++):(f=e,P===0&&T(xn)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=ye(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=La(l)}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=ye(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();for(t.charCodeAt(u)===44?(i=J,u++):(i=e,P===0&&T(Et)),i===e&&(i=null),p=[],c=_();c!==e;)p.push(c),c=_();G=s,s=La(l)}else u=s,s=e;for(s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===93?(l=V,u++):(l=e,P===0&&T(Ns)),l!==e?(G=o,o=Rl(g)):(u=o,o=e)}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function va(){var o,f,w,g,s,l,h,i,p,c,m,y,b,A,N=u*76+63,O=I[N];if(O)return u=O.nextPos,O.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();if(g=[],s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=ye(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ha(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;for(;s!==e;)if(g.push(s),s=u,l=He(),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.charCodeAt(u)===58?(i=ie,u++):(i=e,P===0&&T(dt)),i!==e){if(p=[],c=_(),c!==e)for(;c!==e;)p.push(c),c=_();else p=e;if(p!==e)if(c=ye(),c!==e){for(m=[],y=_();y!==e;)m.push(y),y=_();for(t.charCodeAt(u)===44?(y=J,u++):(y=e,P===0&&T(Et)),y===e&&(t.charCodeAt(u)===59?(y=rt,u++):(y=e,P===0&&T(Ls))),y===e&&(y=null),b=[],A=_();A!==e;)b.push(A),A=_();G=s,s=Ha(l,c)}else u=s,s=e;else u=s,s=e}else u=s,s=e}else u=s,s=e;t.charCodeAt(u)===125?(s=K,u++):(s=e,P===0&&T(Qe)),s!==e?(G=o,o=ta(g)):(u=o,o=e)}else u=o,o=e;return I[N]={nextPos:u,result:o},o}function Xt(){var o,f=u*76+64,w=I[f];return w?(u=w.nextPos,w.result):(o=fu(),o===e&&(o=hu()),I[f]={nextPos:u,result:o},o)}function fu(){var o,f,w,g,s,l,h,i,p,c,m=u*76+65,y=I[m];if(y)return u=y.nextPos,y.result;if(o=u,t.substr(u,2)===Ot?(f=Ot,u+=2):(f=e,P===0&&T(Gr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=cu(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();if(t.charCodeAt(u)===41?(l=F,u++):(l=e,P===0&&T(bt)),l!==e){for(h=[],i=_();i!==e;)h.push(i),i=_();if(t.substr(u,2)===le?(i=le,u+=2):(i=e,P===0&&T(Ts)),i!==e){for(p=[],c=_();c!==e;)p.push(c),c=_();c=Xt(),c!==e?(G=o,o=Dl(g,c)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return I[m]={nextPos:u,result:o},o}function cu(){var o,f,w,g,s,l,h=u*76+66,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=Xt(),f!==e){for(w=[],g=u,s=Yr(),s!==e?(l=Xt(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,s=Yr(),s!==e?(l=Xt(),l!==e?g=l:(u=g,g=e)):(u=g,g=e);G=o,o=ra(f,w)}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function hu(){var o,f,w,g,s,l,h,i,p=u*76+67,c=I[p];if(c)return u=c.nextPos,c.result;if(o=u,f=He(),f!==e){for(w=[],g=be();g!==e;)w.push(g),g=be();if(t.charCodeAt(u)===60?(g=tt,u++):(g=e,P===0&&T(Ea)),g!==e){for(s=[],l=be();l!==e;)s.push(l),l=be();if(l=Xt(),l!==e){for(h=[],i=be();i!==e;)h.push(i),i=be();t.charCodeAt(u)===62?(i=Rr,u++):(i=e,P===0&&T(sn)),i!==e?(G=o,o=Ll(f,l)):(u=o,o=e)}else u=o,o=e}else u=o,o=e}else u=o,o=e;return o===e&&(o=u,f=He(),f!==e&&(G=o,f=Hl(f)),o=f),I[p]={nextPos:u,result:o},o}function He(){var o,f,w,g,s=u*76+68,l=I[s];if(l)return u=l.nextPos,l.result;if(o=u,xt.test(t.charAt(u))?(f=t.charAt(u),u++):(f=e,P===0&&T(Fi)),f!==e){for(w=[],ka.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(nn));g!==e;)w.push(g),ka.test(t.charAt(u))?(g=t.charAt(u),u++):(g=e,P===0&&T(nn));G=o,o=Bl()}else u=o,o=e;return I[s]={nextPos:u,result:o},o}function pu(){var o,f,w,g,s,l,h=u*76+69,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,f=He(),f!==e){for(w=[],g=u,t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e?(l=He(),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);g!==e;)w.push(g),g=u,t.charCodeAt(u)===58?(s=ie,u++):(s=e,P===0&&T(dt)),s!==e?(l=He(),l!==e?(s=[s,l],g=s):(u=g,g=e)):(u=g,g=e);G=o,o=Ul()}else u=o,o=e;return I[h]={nextPos:u,result:o},o}function Yr(){var o,f,w,g,s,l=u*76+70,h=I[l];if(h)return u=h.nextPos,h.result;for(o=u,f=[],w=_();w!==e;)f.push(w),w=_();if(t.charCodeAt(u)===44?(w=J,u++):(w=e,P===0&&T(Et)),w!==e){for(g=[],s=_();s!==e;)g.push(s),s=_();f=[f,w,g],o=f}else u=o,o=e;if(o===e)if(o=[],f=_(),f!==e)for(;f!==e;)o.push(f),f=_();else o=e;return I[l]={nextPos:u,result:o},o}function Jt(){var o,f,w,g,s,l,h=u*76+71,i=I[h];if(i)return u=i.nextPos,i.result;if(o=u,t.charCodeAt(u)===123?(f=L,u++):(f=e,P===0&&T(lr)),f!==e){for(w=[],g=_();g!==e;)w.push(g),g=_();for(g=hs(),g===e&&(g=null),s=[],l=_();l!==e;)s.push(l),l=_();t.charCodeAt(u)===125?(l=K,u++):(l=e,P===0&&T(Qe)),l!==e?(G=o,o=ql(g)):(u=o,o=e)}else u=o,o=e;return o===e&&(o=rr()),I[h]={nextPos:u,result:o},o}function De(){var o,f=u*76+72,w=I[f];return w?(u=w.nextPos,w.result):(t.substr(u,2)===qt?(o=qt,u+=2):(o=e,P===0&&T(Ni)),o===e&&(Bn.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Wn))),I[f]={nextPos:u,result:o},o)}function Za(){var o,f,w=u*76+73,g=I[w];return g?(u=g.nextPos,g.result):(o=u,P++,t.length>u?(f=t.charAt(u),u++):(f=e,P===0&&T(ir)),P--,f===e?o=void 0:(u=o,o=e),o===e&&(o=De()),I[w]={nextPos:u,result:o},o)}function _(){var o,f=u*76+74,w=I[f];return w?(u=w.nextPos,w.result):(li.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Oi)),I[f]={nextPos:u,result:o},o)}function be(){var o,f=u*76+75,w=I[f];return w?(u=w.nextPos,w.result):(ui.test(t.charAt(u))?(o=t.charAt(u),u++):(o=e,P===0&&T(Ti)),I[f]={nextPos:u,result:o},o)}function ae(o,f,w){const g={type:o};f.children=w;for(const l of Object.keys(f))f[l]!==void 0&&(g[l]=f[l]);const s=M();return g.loc={start:s.start.offset,end:s.end.offset-1},g}if(Hr=d(),Hr!==e&&u===t.length)return Hr;throw Hr!==e&&u<t.length&&T(Q()),os(D,n<t.length?t.charAt(n):null,n<t.length?Bs(n,n+1):Bs(n,n))}const Q1=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function X1(t){return Q1.includes(t.type)}function iy(t){return"chain"in t&&t.chain!==null}function Y1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function eA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function tA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function wt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=wt(e.expr,r);break}case"return":{e.expr=wt(e.expr,r);break}case"each":{e.items=wt(e.items,r),e.for=wt(e.for,r);break}case"for":{e.from!=null&&(e.from=wt(e.from,r)),e.to!=null&&(e.to=wt(e.to,r)),e.times!=null&&(e.times=wt(e.times,r)),e.for=wt(e.for,r);break}case"loop":{for(let a=0;a<e.statements.length;a++)e.statements[a]=wt(e.statements[a],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=wt(e.expr,r),e.dest=wt(e.dest,r);break}case"infix":{for(let a=0;a<e.operands.length;a++)e.operands[a]=wt(e.operands[a],r);break}case"not":{e.expr=wt(e.expr,r);break}case"if":{e.cond=wt(e.cond,r),e.then=wt(e.then,r);for(const a of e.elseif)a.cond=wt(a.cond,r),a.then=wt(a.then,r);e.else!=null&&(e.else=wt(e.else,r));break}case"fn":{for(let a=0;a<e.children.length;a++)e.children[a]=wt(e.children[a],r);break}case"match":{e.about=wt(e.about,r);for(const a of e.qs)a.q=wt(a.q,r),a.a=wt(a.a,r);e.default!=null&&(e.default=wt(e.default,r));break}case"block":{for(let a=0;a<e.statements.length;a++)e.statements[a]=wt(e.statements[a],r);break}case"tmpl":{for(let a=0;a<e.tmpl.length;a++){const v=e.tmpl[a];typeof v!="string"&&(e.tmpl[a]=wt(v,r))}break}case"obj":{for(const a of e.value)e.value.set(a[0],wt(a[1],r));break}case"arr":{for(let a=0;a<e.value.length;a++)e.value[a]=wt(e.value[a],r);break}case"callChain":{for(let a=0;a<e.args.length;a++)e.args[a]=wt(e.args[a],r);break}case"indexChain":{e.index=wt(e.index,r);break}case"call":{e.target=wt(e.target,r);for(let a=0;a<e.args.length;a++)e.args[a]=wt(e.args[a],r);break}case"index":{e.target=wt(e.target,r),e.index=wt(e.index,r);break}case"prop":{e.target=wt(e.target,r);break}case"ns":{for(let a=0;a<e.members.length;a++)e.members[a]=wt(e.members[a],r);break}}if(iy(e)&&e.chain!=null)for(let a=0;a<e.chain.length;a++)e.chain[a]=wt(e.chain[a],r);return e}const Mh=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Sh(t){throw new So(`Reserved word "${t}" cannot be used as variable name.`)}function rA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Mh.includes(t.name)&&Sh(t.name);break}case"meta":{t.name!=null&&Mh.includes(t.name)&&Sh(t.name);break}case"fn":{for(const r of t.args)Mh.includes(r.name)&&Sh(r.name);break}}return t}function sA(t){for(const r of t)wt(r,rA);return t}function $g(t){return{type:"simple",name:t}}function nA(t,r){return{type:"generic",name:t,inners:r}}function aA(t,r){return{type:"fn",args:t,result:r}}function mc(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=mc(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(a=>mc(a)).join(", "),e=mc(t.result);return`@(${r}) { ${e} }`}}}function uf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return $g(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=uf(t.inner):r=$g("any"),nA(t.name,[r])}}throw new So(`Unknown type: '${mc(t)}'`)}else{const r=t.args.map(e=>uf(e));return aA(r,uf(t.result))}}function iA(t){switch(t.type){case"def":{t.varType!=null&&uf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&uf(r.argType);t.retType!=null&&uf(t.retType);break}}return t}function lA(t){for(const r of t)wt(r,iA);return t}function $c(t){const r=[],e=[];for(const a of t)if(a.type==="attr")e.push(a);else if(a.type==="def")a.attr==null&&(a.attr=[]),a.attr.push(...e),e.splice(0,e.length),a.expr.type==="fn"&&(a.expr.children=$c(a.expr.children)),r.push(a);else{if(e.length>0)throw new So("invalid attribute.");switch(a.type){case"fn":{a.children=$c(a.children);break}case"block":{a.statements=$c(a.statements);break}}r.push(a)}if(e.length>0)throw new So("invalid attribute.");return r}function uA(t){if(X1(t)&&iy(t)&&t.chain!=null){const{chain:r,...e}=t;let a=e;for(const v of r)switch(v.type){case"callChain":{a=Y1(a,v.args,v.loc);break}case"indexChain":{a=eA(a,v.index,v.loc);break}case"propChain":{a=tA(a,v.name,v.loc);break}}return a}return t}function oA(t){for(let r=0;r<t.length;r++)t[r]=wt(t[r],uA);return t}function xc(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function ly(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return xc(t,r,e);{const{left:a,right:v,info:d}=t;return xc(a,ly(v,r,e),d)}}function fo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[fo(t.left),fo(t.right)]}}const fA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:fo(t.left),right:fo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:fo(t.left),right:fo(t.right)}),priority:3}};function cA(t){const r=t.operators.map(a=>{const v=fA[a];if(v==null)throw new So(`No such operator: ${a}.`);return v});let e=xc(t.operands[0],t.operands[1],r[0]);for(let a=0;a<r.length-1;a++)e=ly(e,t.operands[2+a],r[1+a]);return fo(e)}function hA(t){for(let r=0;r<t.length;r++)t[r]=wt(t[r],e=>e.type==="infix"?cA(e):e);return t}const no=class no{constructor(){ge(this,"plugins");this.plugins={validate:[sA,lA],transform:[$c,oA,hA]}}static parse(r){return no.instance==null&&(no.instance=new no),no.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const a=mg(r,{startRule:"Preprocess"});e=mg(a,{startRule:"Main"})}catch(a){throw a.location?a.expected?new So(`Parsing error. (Line ${a.location.start.line}:${a.location.start.column})`):new So(`${a.message} (Line ${a.location.start.line}:${a.location.start.column})`):a}for(const a of this.plugins.validate)e=a(e);for(const a of this.plugins.transform)e=a(e);return e}};ge(no,"instance");let _p=no;const pA="0.14.1",vA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let kp=[],kf=null;function gA(t){return kp=_p.parse(t),JSON.stringify(kp,null,"	")}async function dA(t){kf==null||kf.abort(),kf=new mn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:bp(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:bp(e.val,!0),print:!1});break}}});try{await kf.exec(kp)}catch(r){t.err(r)}}const yA=Object.freeze(Object.defineProperty({__proto__:null,exec:dA,parse:gA,samples:vA,version:pA},Symbol.toStringTag,{value:"Module"})),wA=t=>(sw("data-v-33ffbf0b"),t=t(),nw(),t),mA={id:"root"},$A={id:"grid1"},xA={class:"type"},bA={id:"grid2"},AA=wA(()=>Aa("header",null,null,-1)),xg=["next","develop","0.17.0","0.16.0","0.15.0","0.14.1"],bg="0.17.0",CA=Bf({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:a,version:v,samples:d}={next:V$,develop:Ex,"0.17.0":cb,"0.16.0":Vb,"0.15.0":N1,"0.14.1":yA}[r.ver],x=ao(window.localStorage.getItem(v)??'<: "Hello, AiScript!"'),k=ao([]),E=ao(""),S=ao(null);Mf(x,()=>{window.localStorage.setItem(v,x.value);try{E.value=e(x.value),S.value=null}catch(j){const L=j;S.value=L.message,console.error("info"in L?L.info:L);return}},{immediate:!0});function F(){k.value=[],a({in:j=>new Promise(L=>{const K=window.prompt(j);L(K??"")}),out:j=>k.value.push(j),end:j=>k.value.push(j),err:j=>{console.error(j),window.alert(`${j}`)}})}return(j,L)=>(Pr(),es("div",mA,[Aa("div",$A,[Er($m,{modelValue:x.value,"onUpdate:modelValue":L[0]||(L[0]=K=>x.value=K),samples:jf(d),parseError:S.value,onRun:F},null,8,["modelValue","samples","parseError"]),Er(Ef,{id:"logs"},{header:gn(()=>[Xa("Output")]),default:gn(()=>[(Pr(!0),es(As,null,_c(k.value,K=>(Pr(),es("div",{class:ks(["log",[{print:K.print},K.type]]),key:K.id},[Aa("span",xA,co(K.type),1),Xa(" "+co(K.text),1)],2))),128))]),_:1})]),Aa("div",bA,[Er(Ef,{id:"ast"},{header:gn(()=>[Xa("AST")]),default:gn(()=>[Aa("pre",null,co(E.value),1)]),_:1}),Er(Ef,{id:"bin"},{header:gn(()=>[Xa("Bytecode")]),default:gn(()=>[AA]),_:1}),Er(Ef,{id:"debugger"},{header:gn(()=>[Xa("Debugger")]),_:1})])]))}}),_A=Uf(CA,[["__scopeId","data-v-33ffbf0b"]]),kA={id:"wrapper"},PA=Bf({__name:"App",setup(t){const r=ao(window.localStorage.getItem("version")??bg),e=Object.fromEntries(xg.map(v=>[v,v+(v==bg?"(latest)":"")]));function a(v){r.value=v,window.localStorage.setItem("version",r.value)}return(v,d)=>(Pr(),es("div",kA,[Aa("h1",null,[Xa(" AiScript ( "),Er(Cd,{id:"version",options:jf(e),onSelect:a},{default:gn(()=>[Xa(co(r.value),1)]),_:1},8,["options"]),Xa(" ) Playground ")]),(Pr(!0),es(As,null,_c(jf(xg),x=>(Pr(),es("div",null,[x==r.value?(Pr(),qc(_A,{key:0,ver:x},null,8,["ver"])):cf("",!0)]))),256))]))}}),EA=Uf(PA,[["__scopeId","data-v-caf8f745"]]);I0(EA).mount("#app");
