var vm=Object.defineProperty;var gm=(t,r,e)=>r in t?vm(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var ve=(t,r,e)=>gm(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))s(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&s(b)}).observe(document,{childList:!0,subtree:!0});function e(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(h){if(h.ep)return;h.ep=!0;const g=e(h);fetch(h.href,g)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Cg(t){const r=Object.create(null);for(const e of t.split(","))r[e]=1;return e=>e in r}const Mr={},Hf=[],Xu=()=>{},dm=()=>!1,ap=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),_g=t=>t.startsWith("onUpdate:"),Ns=Object.assign,Pg=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},ym=Object.prototype.hasOwnProperty,Er=(t,r)=>ym.call(t,r),Pt=Array.isArray,qf=t=>ip(t)==="[object Map]",Xy=t=>ip(t)==="[object Set]",Dt=t=>typeof t=="function",Ts=t=>typeof t=="string",co=t=>typeof t=="symbol",is=t=>t!==null&&typeof t=="object",Yy=t=>(is(t)||Dt(t))&&Dt(t.then)&&Dt(t.catch),ew=Object.prototype.toString,ip=t=>ew.call(t),wm=t=>ip(t).slice(8,-1),tw=t=>ip(t)==="[object Object]",kg=t=>Ts(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Sc=Cg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lp=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},mm=/-(\w)/g,Ki=lp(t=>t.replace(mm,(r,e)=>e?e.toUpperCase():"")),$m=/\B([A-Z])/g,jo=lp(t=>t.replace($m,"-$1").toLowerCase()),up=lp(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ep=lp(t=>t?`on${up(t)}`:""),Da=(t,r)=>!Object.is(t,r),Mp=(t,...r)=>{for(let e=0;e<t.length;e++)t[e](...r)},rw=(t,r,e,s=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:s,value:e})},xm=t=>{const r=parseFloat(t);return isNaN(r)?t:r},bm=t=>{const r=Ts(t)?Number(t):NaN;return isNaN(r)?t:r};let id;const op=()=>id||(id=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Eg(t){if(Pt(t)){const r={};for(let e=0;e<t.length;e++){const s=t[e],h=Ts(s)?Pm(s):Eg(s);if(h)for(const g in h)r[g]=h[g]}return r}else if(Ts(t)||is(t))return t}const Am=/;(?![^(]*\))/g,Cm=/:([^]+)/,_m=/\/\*[^]*?\*\//g;function Pm(t){const r={};return t.replace(_m,"").split(Am).forEach(e=>{if(e){const s=e.split(Cm);s.length>1&&(r[s[0].trim()]=s[1].trim())}}),r}function Dn(t){let r="";if(Ts(t))r=t;else if(Pt(t))for(let e=0;e<t.length;e++){const s=Dn(t[e]);s&&(r+=s+" ")}else if(is(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const km="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Em=Cg(km);function sw(t){return!!t||t===""}const nw=t=>!!(t&&t.__v_isRef===!0),Fo=t=>Ts(t)?t:t==null?"":Pt(t)||is(t)&&(t.toString===ew||!Dt(t.toString))?nw(t)?Fo(t.value):JSON.stringify(t,aw,2):String(t),aw=(t,r)=>nw(r)?aw(t,r.value):qf(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[s,h],g)=>(e[Sp(s,g)+" =>"]=h,e),{})}:Xy(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>Sp(e))}:co(r)?Sp(r):is(r)&&!Pt(r)&&!tw(r)?String(r):r,Sp=(t,r="")=>{var e;return co(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ba;class Mm{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ba,!r&&ba&&(this.index=(ba.scopes||(ba.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].pause();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].resume();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].resume()}}run(r){if(this._active){const e=ba;try{return ba=this,r()}finally{ba=e}}}on(){ba=this}off(){ba=this.parent}stop(r){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0,this._active=!1}}}function iw(){return ba}function Sm(t,r=!1){ba&&ba.cleanups.push(t)}let Wr;const Np=new WeakSet;class lw{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ba&&ba.active&&ba.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Np.has(this)&&(Np.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ow(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ld(this),fw(this);const r=Wr,e=Iu;Wr=this,Iu=!0;try{return this.fn()}finally{cw(this),Wr=r,Iu=e,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)Ng(r);this.deps=this.depsTail=void 0,ld(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Np.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$v(this)&&this.run()}get dirty(){return $v(this)}}let uw=0,Nc,Tc;function ow(t,r=!1){if(t.flags|=8,r){t.next=Tc,Tc=t;return}t.next=Nc,Nc=t}function Mg(){uw++}function Sg(){if(--uw>0)return;if(Tc){let r=Tc;for(Tc=void 0;r;){const e=r.next;r.next=void 0,r.flags&=-9,r=e}}let t;for(;Nc;){let r=Nc;for(Nc=void 0;r;){const e=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(s){t||(t=s)}r=e}}if(t)throw t}function fw(t){for(let r=t.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function cw(t){let r,e=t.depsTail,s=e;for(;s;){const h=s.prevDep;s.version===-1?(s===e&&(e=h),Ng(s),Nm(s)):r=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=h}t.deps=r,t.depsTail=e}function $v(t){for(let r=t.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(hw(r.dep.computed)||r.dep.version!==r.version))return!0;return!!t._dirty}function hw(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Uc))return;t.globalVersion=Uc;const r=t.dep;if(t.flags|=2,r.version>0&&!t.isSSR&&t.deps&&!$v(t)){t.flags&=-3;return}const e=Wr,s=Iu;Wr=t,Iu=!0;try{fw(t);const h=t.fn(t._value);(r.version===0||Da(h,t._value))&&(t._value=h,r.version++)}catch(h){throw r.version++,h}finally{Wr=e,Iu=s,cw(t),t.flags&=-3}}function Ng(t,r=!1){const{dep:e,prevSub:s,nextSub:h}=t;if(s&&(s.nextSub=h,t.prevSub=void 0),h&&(h.prevSub=s,t.nextSub=void 0),e.subs===t&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let g=e.computed.deps;g;g=g.nextDep)Ng(g,!0)}!r&&!--e.sc&&e.map&&e.map.delete(e.key)}function Nm(t){const{prevDep:r,nextDep:e}=t;r&&(r.nextDep=e,t.prevDep=void 0),e&&(e.prevDep=r,t.nextDep=void 0)}let Iu=!0;const pw=[];function Do(){pw.push(Iu),Iu=!1}function Lo(){const t=pw.pop();Iu=t===void 0?!0:t}function ld(t){const{cleanup:r}=t;if(t.cleanup=void 0,r){const e=Wr;Wr=void 0;try{r()}finally{Wr=e}}}let Uc=0;class Tm{constructor(r,e){this.sub=r,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class fp{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!Wr||!Iu||Wr===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Wr)e=this.activeLink=new Tm(Wr,this),Wr.deps?(e.prevDep=Wr.depsTail,Wr.depsTail.nextDep=e,Wr.depsTail=e):Wr.deps=Wr.depsTail=e,vw(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Wr.depsTail,e.nextDep=void 0,Wr.depsTail.nextDep=e,Wr.depsTail=e,Wr.deps===e&&(Wr.deps=s)}return e}trigger(r){this.version++,Uc++,this.notify(r)}notify(r){Mg();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Sg()}}}function vw(t){if(t.dep.sc++,t.sub.flags&4){const r=t.dep.computed;if(r&&!t.dep.subs){r.flags|=20;for(let s=r.deps;s;s=s.nextDep)vw(s)}const e=t.dep.subs;e!==t&&(t.prevSub=e,e&&(e.nextSub=t)),t.dep.subs=t}}const xv=new WeakMap,lf=Symbol(""),bv=Symbol(""),Bc=Symbol("");function Rn(t,r,e){if(Iu&&Wr){let s=xv.get(t);s||xv.set(t,s=new Map);let h=s.get(e);h||(s.set(e,h=new fp),h.map=s,h.key=e),h.track()}}function oo(t,r,e,s,h,g){const b=xv.get(t);if(!b){Uc++;return}const _=k=>{k&&k.trigger()};if(Mg(),r==="clear")b.forEach(_);else{const k=Pt(t),S=k&&kg(e);if(k&&e==="length"){const E=Number(s);b.forEach((O,D)=>{(D==="length"||D===Bc||!co(D)&&D>=E)&&_(O)})}else switch((e!==void 0||b.has(void 0))&&_(b.get(e)),S&&_(b.get(Bc)),r){case"add":k?S&&_(b.get("length")):(_(b.get(lf)),qf(t)&&_(b.get(bv)));break;case"delete":k||(_(b.get(lf)),qf(t)&&_(b.get(bv)));break;case"set":qf(t)&&_(b.get(lf));break}}Sg()}function jf(t){const r=Ar(t);return r===t?r:(Rn(r,"iterate",Bc),sl(t)?r:r.map(In))}function cp(t){return Rn(t=Ar(t),"iterate",Bc),t}const Om={__proto__:null,[Symbol.iterator](){return Tp(this,Symbol.iterator,In)},concat(...t){return jf(this).concat(...t.map(r=>Pt(r)?jf(r):r))},entries(){return Tp(this,"entries",t=>(t[1]=In(t[1]),t))},every(t,r){return io(this,"every",t,r,void 0,arguments)},filter(t,r){return io(this,"filter",t,r,e=>e.map(In),arguments)},find(t,r){return io(this,"find",t,r,In,arguments)},findIndex(t,r){return io(this,"findIndex",t,r,void 0,arguments)},findLast(t,r){return io(this,"findLast",t,r,In,arguments)},findLastIndex(t,r){return io(this,"findLastIndex",t,r,void 0,arguments)},forEach(t,r){return io(this,"forEach",t,r,void 0,arguments)},includes(...t){return Op(this,"includes",t)},indexOf(...t){return Op(this,"indexOf",t)},join(t){return jf(this).join(t)},lastIndexOf(...t){return Op(this,"lastIndexOf",t)},map(t,r){return io(this,"map",t,r,void 0,arguments)},pop(){return yc(this,"pop")},push(...t){return yc(this,"push",t)},reduce(t,...r){return ud(this,"reduce",t,r)},reduceRight(t,...r){return ud(this,"reduceRight",t,r)},shift(){return yc(this,"shift")},some(t,r){return io(this,"some",t,r,void 0,arguments)},splice(...t){return yc(this,"splice",t)},toReversed(){return jf(this).toReversed()},toSorted(t){return jf(this).toSorted(t)},toSpliced(...t){return jf(this).toSpliced(...t)},unshift(...t){return yc(this,"unshift",t)},values(){return Tp(this,"values",In)}};function Tp(t,r,e){const s=cp(t),h=s[r]();return s!==t&&!sl(t)&&(h._next=h.next,h.next=()=>{const g=h._next();return g.value&&(g.value=e(g.value)),g}),h}const Fm=Array.prototype;function io(t,r,e,s,h,g){const b=cp(t),_=b!==t&&!sl(t),k=b[r];if(k!==Fm[r]){const O=k.apply(t,g);return _?In(O):O}let S=e;b!==t&&(_?S=function(O,D){return e.call(this,In(O),D,t)}:e.length>2&&(S=function(O,D){return e.call(this,O,D,t)}));const E=k.call(b,S,s);return _&&h?h(E):E}function ud(t,r,e,s){const h=cp(t);let g=e;return h!==t&&(sl(t)?e.length>3&&(g=function(b,_,k){return e.call(this,b,_,k,t)}):g=function(b,_,k){return e.call(this,b,In(_),k,t)}),h[r](g,...s)}function Op(t,r,e){const s=Ar(t);Rn(s,"iterate",Bc);const h=s[r](...e);return(h===-1||h===!1)&&Rg(e[0])?(e[0]=Ar(e[0]),s[r](...e)):h}function yc(t,r,e=[]){Do(),Mg();const s=Ar(t)[r].apply(t,e);return Sg(),Lo(),s}const Rm=Cg("__proto__,__v_isRef,__isVue"),gw=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(co));function Im(t){co(t)||(t=String(t));const r=Ar(this);return Rn(r,"has",t),r.hasOwnProperty(t)}class dw{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,s){const h=this._isReadonly,g=this._isShallow;if(e==="__v_isReactive")return!h;if(e==="__v_isReadonly")return h;if(e==="__v_isShallow")return g;if(e==="__v_raw")return s===(h?g?Km:$w:g?mw:ww).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(s)?r:void 0;const b=Pt(r);if(!h){let k;if(b&&(k=Om[e]))return k;if(e==="hasOwnProperty")return Im}const _=Reflect.get(r,e,Un(r)?r:s);return(co(e)?gw.has(e):Rm(e))||(h||Rn(r,"get",e),g)?_:Un(_)?b&&kg(e)?_:_.value:is(_)?h?Og(_):hp(_):_}}class yw extends dw{constructor(r=!1){super(!1,r)}set(r,e,s,h){let g=r[e];if(!this._isShallow){const k=$f(g);if(!sl(s)&&!$f(s)&&(g=Ar(g),s=Ar(s)),!Pt(r)&&Un(g)&&!Un(s))return k?!1:(g.value=s,!0)}const b=Pt(r)&&kg(e)?Number(e)<r.length:Er(r,e),_=Reflect.set(r,e,s,Un(r)?r:h);return r===Ar(h)&&(b?Da(s,g)&&oo(r,"set",e,s):oo(r,"add",e,s)),_}deleteProperty(r,e){const s=Er(r,e);r[e];const h=Reflect.deleteProperty(r,e);return h&&s&&oo(r,"delete",e,void 0),h}has(r,e){const s=Reflect.has(r,e);return(!co(e)||!gw.has(e))&&Rn(r,"has",e),s}ownKeys(r){return Rn(r,"iterate",Pt(r)?"length":lf),Reflect.ownKeys(r)}}class jm extends dw{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Dm=new yw,Lm=new jm,Um=new yw(!0);const Av=t=>t,th=t=>Reflect.getPrototypeOf(t);function Bm(t,r,e){return function(...s){const h=this.__v_raw,g=Ar(h),b=qf(g),_=t==="entries"||t===Symbol.iterator&&b,k=t==="keys"&&b,S=h[t](...s),E=e?Av:r?Cv:In;return!r&&Rn(g,"iterate",k?bv:lf),{next(){const{value:O,done:D}=S.next();return D?{value:O,done:D}:{value:_?[E(O[0]),E(O[1])]:E(O),done:D}},[Symbol.iterator](){return this}}}}function rh(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function Hm(t,r){const e={get(h){const g=this.__v_raw,b=Ar(g),_=Ar(h);t||(Da(h,_)&&Rn(b,"get",h),Rn(b,"get",_));const{has:k}=th(b),S=r?Av:t?Cv:In;if(k.call(b,h))return S(g.get(h));if(k.call(b,_))return S(g.get(_));g!==b&&g.get(h)},get size(){const h=this.__v_raw;return!t&&Rn(Ar(h),"iterate",lf),Reflect.get(h,"size",h)},has(h){const g=this.__v_raw,b=Ar(g),_=Ar(h);return t||(Da(h,_)&&Rn(b,"has",h),Rn(b,"has",_)),h===_?g.has(h):g.has(h)||g.has(_)},forEach(h,g){const b=this,_=b.__v_raw,k=Ar(_),S=r?Av:t?Cv:In;return!t&&Rn(k,"iterate",lf),_.forEach((E,O)=>h.call(g,S(E),S(O),b))}};return Ns(e,t?{add:rh("add"),set:rh("set"),delete:rh("delete"),clear:rh("clear")}:{add(h){!r&&!sl(h)&&!$f(h)&&(h=Ar(h));const g=Ar(this);return th(g).has.call(g,h)||(g.add(h),oo(g,"add",h,h)),this},set(h,g){!r&&!sl(g)&&!$f(g)&&(g=Ar(g));const b=Ar(this),{has:_,get:k}=th(b);let S=_.call(b,h);S||(h=Ar(h),S=_.call(b,h));const E=k.call(b,h);return b.set(h,g),S?Da(g,E)&&oo(b,"set",h,g):oo(b,"add",h,g),this},delete(h){const g=Ar(this),{has:b,get:_}=th(g);let k=b.call(g,h);k||(h=Ar(h),k=b.call(g,h)),_&&_.call(g,h);const S=g.delete(h);return k&&oo(g,"delete",h,void 0),S},clear(){const h=Ar(this),g=h.size!==0,b=h.clear();return g&&oo(h,"clear",void 0,void 0),b}}),["keys","values","entries",Symbol.iterator].forEach(h=>{e[h]=Bm(h,t,r)}),e}function Tg(t,r){const e=Hm(t,r);return(s,h,g)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?s:Reflect.get(Er(e,h)&&h in s?e:s,h,g)}const qm={get:Tg(!1,!1)},Vm={get:Tg(!1,!0)},zm={get:Tg(!0,!1)};const ww=new WeakMap,mw=new WeakMap,$w=new WeakMap,Km=new WeakMap;function Wm(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gm(t){return t.__v_skip||!Object.isExtensible(t)?0:Wm(wm(t))}function hp(t){return $f(t)?t:Fg(t,!1,Dm,qm,ww)}function xw(t){return Fg(t,!1,Um,Vm,mw)}function Og(t){return Fg(t,!0,Lm,zm,$w)}function Fg(t,r,e,s,h){if(!is(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const g=h.get(t);if(g)return g;const b=Gm(t);if(b===0)return t;const _=new Proxy(t,b===2?s:e);return h.set(t,_),_}function Vf(t){return $f(t)?Vf(t.__v_raw):!!(t&&t.__v_isReactive)}function $f(t){return!!(t&&t.__v_isReadonly)}function sl(t){return!!(t&&t.__v_isShallow)}function Rg(t){return t?!!t.__v_raw:!1}function Ar(t){const r=t&&t.__v_raw;return r?Ar(r):t}function Jm(t){return!Er(t,"__v_skip")&&Object.isExtensible(t)&&rw(t,"__v_skip",!0),t}const In=t=>is(t)?hp(t):t,Cv=t=>is(t)?Og(t):t;function Un(t){return t?t.__v_isRef===!0:!1}function vc(t){return Aw(t,!1)}function bw(t){return Aw(t,!0)}function Aw(t,r){return Un(t)?t:new Qm(t,r)}class Qm{constructor(r,e){this.dep=new fp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?r:Ar(r),this._value=e?r:In(r),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(r){const e=this._rawValue,s=this.__v_isShallow||sl(r)||$f(r);r=s?r:Ar(r),Da(r,e)&&(this._rawValue=r,this._value=s?r:In(r),this.dep.trigger())}}function Yu(t){return Un(t)?t.value:t}const Zm={get:(t,r,e)=>r==="__v_raw"?t:Yu(Reflect.get(t,r,e)),set:(t,r,e,s)=>{const h=t[r];return Un(h)&&!Un(e)?(h.value=e,!0):Reflect.set(t,r,e,s)}};function Cw(t){return Vf(t)?t:new Proxy(t,Zm)}class Xm{constructor(r){this.__v_isRef=!0,this._value=void 0;const e=this.dep=new fp,{get:s,set:h}=r(e.track.bind(e),e.trigger.bind(e));this._get=s,this._set=h}get value(){return this._value=this._get()}set value(r){this._set(r)}}function Ym(t){return new Xm(t)}class e${constructor(r,e,s){this.fn=r,this.setter=e,this._value=void 0,this.dep=new fp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Uc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Wr!==this)return ow(this,!0),!0}get value(){const r=this.dep.track();return hw(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function t$(t,r,e=!1){let s,h;return Dt(t)?s=t:(s=t.get,h=t.set),new e$(s,h,e)}const sh={},Vh=new WeakMap;let Jo;function r$(t,r=!1,e=Jo){if(e){let s=Vh.get(e);s||Vh.set(e,s=[]),s.push(t)}}function s$(t,r,e=Mr){const{immediate:s,deep:h,once:g,scheduler:b,augmentJob:_,call:k}=e,S=Q=>h?Q:sl(Q)||h===!1||h===0?Mo(Q,1):Mo(Q);let E,O,D,H,ae=!1,se=!1;if(Un(t)?(O=()=>t.value,ae=sl(t)):Vf(t)?(O=()=>S(t),ae=!0):Pt(t)?(se=!0,ae=t.some(Q=>Vf(Q)||sl(Q)),O=()=>t.map(Q=>{if(Un(Q))return Q.value;if(Vf(Q))return S(Q);if(Dt(Q))return k?k(Q,2):Q()})):Dt(t)?r?O=k?()=>k(t,2):t:O=()=>{if(D){Do();try{D()}finally{Lo()}}const Q=Jo;Jo=E;try{return k?k(t,3,[H]):t(H)}finally{Jo=Q}}:O=Xu,r&&h){const Q=O,X=h===!0?1/0:h;O=()=>Mo(Q(),X)}const ie=iw(),de=()=>{E.stop(),ie&&Pg(ie.effects,E)};if(g&&r){const Q=r;r=(...X)=>{Q(...X),de()}}let W=se?new Array(t.length).fill(sh):sh;const K=Q=>{if(!(!(E.flags&1)||!E.dirty&&!Q))if(r){const X=E.run();if(h||ae||(se?X.some((ee,Y)=>Da(ee,W[Y])):Da(X,W))){D&&D();const ee=Jo;Jo=E;try{const Y=[X,W===sh?void 0:se&&W[0]===sh?[]:W,H];k?k(r,3,Y):r(...Y),W=X}finally{Jo=ee}}}else E.run()};return _&&_(K),E=new lw(O),E.scheduler=b?()=>b(K,!1):K,H=Q=>r$(Q,!1,E),D=E.onStop=()=>{const Q=Vh.get(E);if(Q){if(k)k(Q,4);else for(const X of Q)X();Vh.delete(E)}},r?s?K(!0):W=E.run():b?b(K.bind(null,!0),!0):E.run(),de.pause=E.pause.bind(E),de.resume=E.resume.bind(E),de.stop=de,de}function Mo(t,r=1/0,e){if(r<=0||!is(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,Un(t))Mo(t.value,r,e);else if(Pt(t))for(let s=0;s<t.length;s++)Mo(t[s],r,e);else if(Xy(t)||qf(t))t.forEach(s=>{Mo(s,r,e)});else if(tw(t)){for(const s in t)Mo(t[s],r,e);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Mo(t[s],r,e)}return t}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zc(t,r,e,s){try{return s?t(...s):t()}catch(h){pp(h,r,e)}}function ju(t,r,e,s){if(Dt(t)){const h=Zc(t,r,e,s);return h&&Yy(h)&&h.catch(g=>{pp(g,r,e)}),h}if(Pt(t)){const h=[];for(let g=0;g<t.length;g++)h.push(ju(t[g],r,e,s));return h}}function pp(t,r,e,s=!0){const h=r?r.vnode:null,{errorHandler:g,throwUnhandledErrorInProduction:b}=r&&r.appContext.config||Mr;if(r){let _=r.parent;const k=r.proxy,S=`https://vuejs.org/error-reference/#runtime-${e}`;for(;_;){const E=_.ec;if(E){for(let O=0;O<E.length;O++)if(E[O](t,k,S)===!1)return}_=_.parent}if(g){Do(),Zc(g,null,10,[t,k,S]),Lo();return}}n$(t,e,h,s,b)}function n$(t,r,e,s=!0,h=!1){if(h)throw t;console.error(t)}const Ea=[];let Hu=-1;const zf=[];let _o=null,Uf=0;const _w=Promise.resolve();let zh=null;function vp(t){const r=zh||_w;return t?r.then(this?t.bind(this):t):r}function a$(t){let r=Hu+1,e=Ea.length;for(;r<e;){const s=r+e>>>1,h=Ea[s],g=Hc(h);g<t||g===t&&h.flags&2?r=s+1:e=s}return r}function Ig(t){if(!(t.flags&1)){const r=Hc(t),e=Ea[Ea.length-1];!e||!(t.flags&2)&&r>=Hc(e)?Ea.push(t):Ea.splice(a$(r),0,t),t.flags|=1,Pw()}}function Pw(){zh||(zh=_w.then(Ew))}function i$(t){Pt(t)?zf.push(...t):_o&&t.id===-1?_o.splice(Uf+1,0,t):t.flags&1||(zf.push(t),t.flags|=1),Pw()}function od(t,r,e=Hu+1){for(;e<Ea.length;e++){const s=Ea[e];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;Ea.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function kw(t){if(zf.length){const r=[...new Set(zf)].sort((e,s)=>Hc(e)-Hc(s));if(zf.length=0,_o){_o.push(...r);return}for(_o=r,Uf=0;Uf<_o.length;Uf++){const e=_o[Uf];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}_o=null,Uf=0}}const Hc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Ew(t){try{for(Hu=0;Hu<Ea.length;Hu++){const r=Ea[Hu];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),Zc(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;Hu<Ea.length;Hu++){const r=Ea[Hu];r&&(r.flags&=-2)}Hu=-1,Ea.length=0,kw(),zh=null,(Ea.length||zf.length)&&Ew()}}let Ln=null,Mw=null;function Kh(t){const r=Ln;return Ln=t,Mw=t&&t.type.__scopeId||null,r}function ja(t,r=Ln,e){if(!r||t._n)return t;const s=(...h)=>{s._d&&md(-1);const g=Kh(r);let b;try{b=t(...h)}finally{Kh(g),s._d&&md(1)}return b};return s._n=!0,s._c=!0,s._d=!0,s}function Vo(t,r,e,s){const h=t.dirs,g=r&&r.dirs;for(let b=0;b<h.length;b++){const _=h[b];g&&(_.oldValue=g[b].value);let k=_.dir[s];k&&(Do(),ju(k,e,8,[t.el,_,t,r]),Lo())}}const l$=Symbol("_vte"),Sw=t=>t.__isTeleport,Po=Symbol("_leaveCb"),nh=Symbol("_enterCb");function u$(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jg(()=>{t.isMounted=!0}),Dw(()=>{t.isUnmounting=!0}),t}const Qi=[Function,Array],Nw={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Qi,onEnter:Qi,onAfterEnter:Qi,onEnterCancelled:Qi,onBeforeLeave:Qi,onLeave:Qi,onAfterLeave:Qi,onLeaveCancelled:Qi,onBeforeAppear:Qi,onAppear:Qi,onAfterAppear:Qi,onAppearCancelled:Qi},Tw=t=>{const r=t.subTree;return r.component?Tw(r.component):r},o$={name:"BaseTransition",props:Nw,setup(t,{slots:r}){const e=Hg(),s=u$();return()=>{const h=r.default&&Rw(r.default(),!0);if(!h||!h.length)return;const g=Ow(h),b=Ar(t),{mode:_}=b;if(s.isLeaving)return Fp(g);const k=fd(g);if(!k)return Fp(g);let S=_v(k,b,s,e,D=>S=D);k.type!==Ma&&qc(k,S);const E=e.subTree,O=E&&fd(E);if(O&&O.type!==Ma&&!Qo(k,O)&&Tw(e).type!==Ma){const D=_v(O,b,s,e);if(qc(O,D),_==="out-in"&&k.type!==Ma)return s.isLeaving=!0,D.afterLeave=()=>{s.isLeaving=!1,e.job.flags&8||e.update(),delete D.afterLeave},Fp(g);_==="in-out"&&k.type!==Ma&&(D.delayLeave=(H,ae,se)=>{const ie=Fw(s,O);ie[String(O.key)]=O,H[Po]=()=>{ae(),H[Po]=void 0,delete S.delayedLeave},S.delayedLeave=se})}return g}}};function Ow(t){let r=t[0];if(t.length>1){for(const e of t)if(e.type!==Ma){r=e;break}}return r}const f$=o$;function Fw(t,r){const{leavingVNodes:e}=t;let s=e.get(r.type);return s||(s=Object.create(null),e.set(r.type,s)),s}function _v(t,r,e,s,h){const{appear:g,mode:b,persisted:_=!1,onBeforeEnter:k,onEnter:S,onAfterEnter:E,onEnterCancelled:O,onBeforeLeave:D,onLeave:H,onAfterLeave:ae,onLeaveCancelled:se,onBeforeAppear:ie,onAppear:de,onAfterAppear:W,onAppearCancelled:K}=r,Q=String(t.key),X=Fw(e,t),ee=(le,we)=>{le&&ju(le,s,9,we)},Y=(le,we)=>{const _e=we[1];ee(le,we),Pt(le)?le.every(be=>be.length<=1)&&_e():le.length<=1&&_e()},fe={mode:b,persisted:_,beforeEnter(le){let we=k;if(!e.isMounted)if(g)we=ie||k;else return;le[Po]&&le[Po](!0);const _e=X[Q];_e&&Qo(t,_e)&&_e.el[Po]&&_e.el[Po](),ee(we,[le])},enter(le){let we=S,_e=E,be=O;if(!e.isMounted)if(g)we=de||S,_e=W||E,be=K||O;else return;let nt=!1;const mt=le[nh]=sr=>{nt||(nt=!0,sr?ee(be,[le]):ee(_e,[le]),fe.delayedLeave&&fe.delayedLeave(),le[nh]=void 0)};we?Y(we,[le,mt]):mt()},leave(le,we){const _e=String(t.key);if(le[nh]&&le[nh](!0),e.isUnmounting)return we();ee(D,[le]);let be=!1;const nt=le[Po]=mt=>{be||(be=!0,we(),mt?ee(se,[le]):ee(ae,[le]),le[Po]=void 0,X[_e]===t&&delete X[_e])};X[_e]=t,H?Y(H,[le,nt]):nt()},clone(le){const we=_v(le,r,e,s,h);return h&&h(we),we}};return fe}function Fp(t){if(gp(t))return t=Io(t),t.children=null,t}function fd(t){if(!gp(t))return Sw(t.type)&&t.children?Ow(t.children):t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&Dt(e.default))return e.default()}}function qc(t,r){t.shapeFlag&6&&t.component?(t.transition=r,qc(t.component.subTree,r)):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function Rw(t,r=!1,e){let s=[],h=0;for(let g=0;g<t.length;g++){let b=t[g];const _=e==null?b.key:String(e)+String(b.key!=null?b.key:g);b.type===jn?(b.patchFlag&128&&h++,s=s.concat(Rw(b.children,r,_))):(r||b.type!==Ma)&&s.push(_!=null?Io(b,{key:_}):b)}if(h>1)for(let g=0;g<s.length;g++)s[g].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Mf(t,r){return Dt(t)?Ns({name:t.name},r,{setup:t}):t}function Iw(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Pv(t,r,e,s,h=!1){if(Pt(t)){t.forEach((ae,se)=>Pv(ae,r&&(Pt(r)?r[se]:r),e,s,h));return}if(Kf(s)&&!h)return;const g=s.shapeFlag&4?qg(s.component):s.el,b=h?null:g,{i:_,r:k}=t,S=r&&r.r,E=_.refs===Mr?_.refs={}:_.refs,O=_.setupState,D=Ar(O),H=O===Mr?()=>!1:ae=>Er(D,ae);if(S!=null&&S!==k&&(Ts(S)?(E[S]=null,H(S)&&(O[S]=null)):Un(S)&&(S.value=null)),Dt(k))Zc(k,_,12,[b,E]);else{const ae=Ts(k),se=Un(k);if(ae||se){const ie=()=>{if(t.f){const de=ae?H(k)?O[k]:E[k]:k.value;h?Pt(de)&&Pg(de,g):Pt(de)?de.includes(g)||de.push(g):ae?(E[k]=[g],H(k)&&(O[k]=E[k])):(k.value=[g],t.k&&(E[t.k]=k.value))}else ae?(E[k]=b,H(k)&&(O[k]=b)):se&&(k.value=b,t.k&&(E[t.k]=b))};b?(ie.id=-1,Ii(ie,e)):ie()}}}op().requestIdleCallback;op().cancelIdleCallback;const Kf=t=>!!t.type.__asyncLoader,gp=t=>t.type.__isKeepAlive;function c$(t,r){jw(t,"a",r)}function h$(t,r){jw(t,"da",r)}function jw(t,r,e=Mn){const s=t.__wdc||(t.__wdc=()=>{let h=e;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(dp(r,s,e),e){let h=e.parent;for(;h&&h.parent;)gp(h.parent.vnode)&&p$(s,r,e,h),h=h.parent}}function p$(t,r,e,s){const h=dp(r,t,s,!0);Lw(()=>{Pg(s[r],h)},e)}function dp(t,r,e=Mn,s=!1){if(e){const h=e[t]||(e[t]=[]),g=r.__weh||(r.__weh=(...b)=>{Do();const _=Xc(e),k=ju(r,e,t,b);return _(),Lo(),k});return s?h.unshift(g):h.push(g),g}}const ho=t=>(r,e=Mn)=>{(!Wc||t==="sp")&&dp(t,(...s)=>r(...s),e)},v$=ho("bm"),jg=ho("m"),g$=ho("bu"),d$=ho("u"),Dw=ho("bum"),Lw=ho("um"),y$=ho("sp"),w$=ho("rtg"),m$=ho("rtc");function $$(t,r=Mn){dp("ec",t,r)}const x$="components";function b$(t,r){return C$(x$,t,!0,r)||t}const A$=Symbol.for("v-ndc");function C$(t,r,e=!0,s=!1){const h=Ln||Mn;if(h){const g=h.type;{const _=cx(g,!1);if(_&&(_===r||_===Ki(r)||_===up(Ki(r))))return g}const b=cd(h[t]||g[t],r)||cd(h.appContext[t],r);return!b&&s?g:b}}function cd(t,r){return t&&(t[r]||t[Ki(r)]||t[up(Ki(r))])}function kv(t,r,e,s){let h;const g=e,b=Pt(t);if(b||Ts(t)){const _=b&&Vf(t);let k=!1;_&&(k=!sl(t),t=cp(t)),h=new Array(t.length);for(let S=0,E=t.length;S<E;S++)h[S]=r(k?In(t[S]):t[S],S,void 0,g)}else if(typeof t=="number"){h=new Array(t);for(let _=0;_<t;_++)h[_]=r(_+1,_,void 0,g)}else if(is(t))if(t[Symbol.iterator])h=Array.from(t,(_,k)=>r(_,k,void 0,g));else{const _=Object.keys(t);h=new Array(_.length);for(let k=0,S=_.length;k<S;k++){const E=_[k];h[k]=r(t[E],E,k,g)}}else h=[];return h}function mh(t,r,e={},s,h){if(Ln.ce||Ln.parent&&Kf(Ln.parent)&&Ln.parent.ce)return r!=="default"&&(e.name=r),Ss(),Jh(jn,null,[os("slot",e,s)],64);let g=t[r];g&&g._c&&(g._d=!1),Ss();const b=g&&Uw(g(e)),_=e.key||b&&b.key,k=Jh(jn,{key:(_&&!co(_)?_:`_${r}`)+(!b&&s?"_fb":"")},b||[],b&&t._===1?64:-2);return k.scopeId&&(k.slotScopeIds=[k.scopeId+"-s"]),g&&g._c&&(g._d=!0),k}function Uw(t){return t.some(r=>zc(r)?!(r.type===Ma||r.type===jn&&!Uw(r.children)):!0)?t:null}const Ev=t=>t?i0(t)?qg(t):Ev(t.parent):null,Oc=Ns(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ev(t.parent),$root:t=>Ev(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dg(t),$forceUpdate:t=>t.f||(t.f=()=>{Ig(t.update)}),$nextTick:t=>t.n||(t.n=vp.bind(t.proxy)),$watch:t=>K$.bind(t)}),Rp=(t,r)=>t!==Mr&&!t.__isScriptSetup&&Er(t,r),_$={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:s,data:h,props:g,accessCache:b,type:_,appContext:k}=t;let S;if(r[0]!=="$"){const H=b[r];if(H!==void 0)switch(H){case 1:return s[r];case 2:return h[r];case 4:return e[r];case 3:return g[r]}else{if(Rp(s,r))return b[r]=1,s[r];if(h!==Mr&&Er(h,r))return b[r]=2,h[r];if((S=t.propsOptions[0])&&Er(S,r))return b[r]=3,g[r];if(e!==Mr&&Er(e,r))return b[r]=4,e[r];Mv&&(b[r]=0)}}const E=Oc[r];let O,D;if(E)return r==="$attrs"&&Rn(t.attrs,"get",""),E(t);if((O=_.__cssModules)&&(O=O[r]))return O;if(e!==Mr&&Er(e,r))return b[r]=4,e[r];if(D=k.config.globalProperties,Er(D,r))return D[r]},set({_:t},r,e){const{data:s,setupState:h,ctx:g}=t;return Rp(h,r)?(h[r]=e,!0):s!==Mr&&Er(s,r)?(s[r]=e,!0):Er(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(g[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:s,appContext:h,propsOptions:g}},b){let _;return!!e[b]||t!==Mr&&Er(t,b)||Rp(r,b)||(_=g[0])&&Er(_,b)||Er(s,b)||Er(Oc,b)||Er(h.config.globalProperties,b)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:Er(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function Wh(t){return Pt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}function hd(t,r){return!t||!r?t||r:Pt(t)&&Pt(r)?t.concat(r):Ns({},Wh(t),Wh(r))}let Mv=!0;function P$(t){const r=Dg(t),e=t.proxy,s=t.ctx;Mv=!1,r.beforeCreate&&pd(r.beforeCreate,t,"bc");const{data:h,computed:g,methods:b,watch:_,provide:k,inject:S,created:E,beforeMount:O,mounted:D,beforeUpdate:H,updated:ae,activated:se,deactivated:ie,beforeDestroy:de,beforeUnmount:W,destroyed:K,unmounted:Q,render:X,renderTracked:ee,renderTriggered:Y,errorCaptured:fe,serverPrefetch:le,expose:we,inheritAttrs:_e,components:be,directives:nt,filters:mt}=r;if(S&&k$(S,s,null),b)for(const wt in b){const Ye=b[wt];Dt(Ye)&&(s[wt]=Ye.bind(e))}if(h){const wt=h.call(e,e);is(wt)&&(t.data=hp(wt))}if(Mv=!0,g)for(const wt in g){const Ye=g[wt],bt=Dt(Ye)?Ye.bind(e,e):Dt(Ye.get)?Ye.get.bind(e,e):Xu,Ht=!Dt(Ye)&&Dt(Ye.set)?Ye.set.bind(e):Xu,nr=La({get:bt,set:Ht});Object.defineProperty(s,wt,{enumerable:!0,configurable:!0,get:()=>nr.value,set:vt=>nr.value=vt})}if(_)for(const wt in _)Bw(_[wt],s,e,wt);if(k){const wt=Dt(k)?k.call(e):k;Reflect.ownKeys(wt).forEach(Ye=>{$h(Ye,wt[Ye])})}E&&pd(E,t,"c");function xt(wt,Ye){Pt(Ye)?Ye.forEach(bt=>wt(bt.bind(e))):Ye&&wt(Ye.bind(e))}if(xt(v$,O),xt(jg,D),xt(g$,H),xt(d$,ae),xt(c$,se),xt(h$,ie),xt($$,fe),xt(m$,ee),xt(w$,Y),xt(Dw,W),xt(Lw,Q),xt(y$,le),Pt(we))if(we.length){const wt=t.exposed||(t.exposed={});we.forEach(Ye=>{Object.defineProperty(wt,Ye,{get:()=>e[Ye],set:bt=>e[Ye]=bt})})}else t.exposed||(t.exposed={});X&&t.render===Xu&&(t.render=X),_e!=null&&(t.inheritAttrs=_e),be&&(t.components=be),nt&&(t.directives=nt),le&&Iw(t)}function k$(t,r,e=Xu){Pt(t)&&(t=Sv(t));for(const s in t){const h=t[s];let g;is(h)?"default"in h?g=eo(h.from||s,h.default,!0):g=eo(h.from||s):g=eo(h),Un(g)?Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>g.value,set:b=>g.value=b}):r[s]=g}}function pd(t,r,e){ju(Pt(t)?t.map(s=>s.bind(r.proxy)):t.bind(r.proxy),r,e)}function Bw(t,r,e,s){let h=s.includes(".")?e0(e,s):()=>e[s];if(Ts(t)){const g=r[t];Dt(g)&&Gf(h,g)}else if(Dt(t))Gf(h,t.bind(e));else if(is(t))if(Pt(t))t.forEach(g=>Bw(g,r,e,s));else{const g=Dt(t.handler)?t.handler.bind(e):r[t.handler];Dt(g)&&Gf(h,g,t)}}function Dg(t){const r=t.type,{mixins:e,extends:s}=r,{mixins:h,optionsCache:g,config:{optionMergeStrategies:b}}=t.appContext,_=g.get(r);let k;return _?k=_:!h.length&&!e&&!s?k=r:(k={},h.length&&h.forEach(S=>Gh(k,S,b,!0)),Gh(k,r,b)),is(r)&&g.set(r,k),k}function Gh(t,r,e,s=!1){const{mixins:h,extends:g}=r;g&&Gh(t,g,e,!0),h&&h.forEach(b=>Gh(t,b,e,!0));for(const b in r)if(!(s&&b==="expose")){const _=E$[b]||e&&e[b];t[b]=_?_(t[b],r[b]):r[b]}return t}const E$={data:vd,props:gd,emits:gd,methods:kc,computed:kc,beforeCreate:xa,created:xa,beforeMount:xa,mounted:xa,beforeUpdate:xa,updated:xa,beforeDestroy:xa,beforeUnmount:xa,destroyed:xa,unmounted:xa,activated:xa,deactivated:xa,errorCaptured:xa,serverPrefetch:xa,components:kc,directives:kc,watch:S$,provide:vd,inject:M$};function vd(t,r){return r?t?function(){return Ns(Dt(t)?t.call(this,this):t,Dt(r)?r.call(this,this):r)}:r:t}function M$(t,r){return kc(Sv(t),Sv(r))}function Sv(t){if(Pt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function xa(t,r){return t?[...new Set([].concat(t,r))]:r}function kc(t,r){return t?Ns(Object.create(null),t,r):r}function gd(t,r){return t?Pt(t)&&Pt(r)?[...new Set([...t,...r])]:Ns(Object.create(null),Wh(t),Wh(r??{})):r}function S$(t,r){if(!t)return r;if(!r)return t;const e=Ns(Object.create(null),t);for(const s in r)e[s]=xa(t[s],r[s]);return e}function Hw(){return{app:null,config:{isNativeTag:dm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let N$=0;function T$(t,r){return function(s,h=null){Dt(s)||(s=Ns({},s)),h!=null&&!is(h)&&(h=null);const g=Hw(),b=new WeakSet,_=[];let k=!1;const S=g.app={_uid:N$++,_component:s,_props:h,_container:null,_context:g,_instance:null,version:px,get config(){return g.config},set config(E){},use(E,...O){return b.has(E)||(E&&Dt(E.install)?(b.add(E),E.install(S,...O)):Dt(E)&&(b.add(E),E(S,...O))),S},mixin(E){return g.mixins.includes(E)||g.mixins.push(E),S},component(E,O){return O?(g.components[E]=O,S):g.components[E]},directive(E,O){return O?(g.directives[E]=O,S):g.directives[E]},mount(E,O,D){if(!k){const H=S._ceVNode||os(s,h);return H.appContext=g,D===!0?D="svg":D===!1&&(D=void 0),O&&r?r(H,E):t(H,E,D),k=!0,S._container=E,E.__vue_app__=S,qg(H.component)}},onUnmount(E){_.push(E)},unmount(){k&&(ju(_,S._instance,16),t(null,S._container),delete S._container.__vue_app__)},provide(E,O){return g.provides[E]=O,S},runWithContext(E){const O=Wf;Wf=S;try{return E()}finally{Wf=O}}};return S}}let Wf=null;function $h(t,r){if(Mn){let e=Mn.provides;const s=Mn.parent&&Mn.parent.provides;s===e&&(e=Mn.provides=Object.create(s)),e[t]=r}}function eo(t,r,e=!1){const s=Mn||Ln;if(s||Wf){const h=Wf?Wf._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(h&&t in h)return h[t];if(arguments.length>1)return e&&Dt(r)?r.call(s&&s.proxy):r}}const qw={},Vw=()=>Object.create(qw),zw=t=>Object.getPrototypeOf(t)===qw;function O$(t,r,e,s=!1){const h={},g=Vw();t.propsDefaults=Object.create(null),Kw(t,r,h,g);for(const b in t.propsOptions[0])b in h||(h[b]=void 0);e?t.props=s?h:xw(h):t.type.props?t.props=h:t.props=g,t.attrs=g}function F$(t,r,e,s){const{props:h,attrs:g,vnode:{patchFlag:b}}=t,_=Ar(h),[k]=t.propsOptions;let S=!1;if((s||b>0)&&!(b&16)){if(b&8){const E=t.vnode.dynamicProps;for(let O=0;O<E.length;O++){let D=E[O];if(yp(t.emitsOptions,D))continue;const H=r[D];if(k)if(Er(g,D))H!==g[D]&&(g[D]=H,S=!0);else{const ae=Ki(D);h[ae]=Nv(k,_,ae,H,t,!1)}else H!==g[D]&&(g[D]=H,S=!0)}}}else{Kw(t,r,h,g)&&(S=!0);let E;for(const O in _)(!r||!Er(r,O)&&((E=jo(O))===O||!Er(r,E)))&&(k?e&&(e[O]!==void 0||e[E]!==void 0)&&(h[O]=Nv(k,_,O,void 0,t,!0)):delete h[O]);if(g!==_)for(const O in g)(!r||!Er(r,O))&&(delete g[O],S=!0)}S&&oo(t.attrs,"set","")}function Kw(t,r,e,s){const[h,g]=t.propsOptions;let b=!1,_;if(r)for(let k in r){if(Sc(k))continue;const S=r[k];let E;h&&Er(h,E=Ki(k))?!g||!g.includes(E)?e[E]=S:(_||(_={}))[E]=S:yp(t.emitsOptions,k)||(!(k in s)||S!==s[k])&&(s[k]=S,b=!0)}if(g){const k=Ar(e),S=_||Mr;for(let E=0;E<g.length;E++){const O=g[E];e[O]=Nv(h,k,O,S[O],t,!Er(S,O))}}return b}function Nv(t,r,e,s,h,g){const b=t[e];if(b!=null){const _=Er(b,"default");if(_&&s===void 0){const k=b.default;if(b.type!==Function&&!b.skipFactory&&Dt(k)){const{propsDefaults:S}=h;if(e in S)s=S[e];else{const E=Xc(h);s=S[e]=k.call(null,r),E()}}else s=k;h.ce&&h.ce._setProp(e,s)}b[0]&&(g&&!_?s=!1:b[1]&&(s===""||s===jo(e))&&(s=!0))}return s}const R$=new WeakMap;function Ww(t,r,e=!1){const s=e?R$:r.propsCache,h=s.get(t);if(h)return h;const g=t.props,b={},_=[];let k=!1;if(!Dt(t)){const E=O=>{k=!0;const[D,H]=Ww(O,r,!0);Ns(b,D),H&&_.push(...H)};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}if(!g&&!k)return is(t)&&s.set(t,Hf),Hf;if(Pt(g))for(let E=0;E<g.length;E++){const O=Ki(g[E]);dd(O)&&(b[O]=Mr)}else if(g)for(const E in g){const O=Ki(E);if(dd(O)){const D=g[E],H=b[O]=Pt(D)||Dt(D)?{type:D}:Ns({},D),ae=H.type;let se=!1,ie=!0;if(Pt(ae))for(let de=0;de<ae.length;++de){const W=ae[de],K=Dt(W)&&W.name;if(K==="Boolean"){se=!0;break}else K==="String"&&(ie=!1)}else se=Dt(ae)&&ae.name==="Boolean";H[0]=se,H[1]=ie,(se||Er(H,"default"))&&_.push(O)}}const S=[b,_];return is(t)&&s.set(t,S),S}function dd(t){return t[0]!=="$"&&!Sc(t)}const Gw=t=>t[0]==="_"||t==="$stable",Lg=t=>Pt(t)?t.map(zu):[zu(t)],I$=(t,r,e)=>{if(r._n)return r;const s=ja((...h)=>Lg(r(...h)),e);return s._c=!1,s},Jw=(t,r,e)=>{const s=t._ctx;for(const h in t){if(Gw(h))continue;const g=t[h];if(Dt(g))r[h]=I$(h,g,s);else if(g!=null){const b=Lg(g);r[h]=()=>b}}},Qw=(t,r)=>{const e=Lg(r);t.slots.default=()=>e},Zw=(t,r,e)=>{for(const s in r)(e||s!=="_")&&(t[s]=r[s])},j$=(t,r,e)=>{const s=t.slots=Vw();if(t.vnode.shapeFlag&32){const h=r._;h?(Zw(s,r,e),e&&rw(s,"_",h,!0)):Jw(r,s)}else r&&Qw(t,r)},D$=(t,r,e)=>{const{vnode:s,slots:h}=t;let g=!0,b=Mr;if(s.shapeFlag&32){const _=r._;_?e&&_===1?g=!1:Zw(h,r,e):(g=!r.$stable,Jw(r,h)),b=r}else r&&(Qw(t,r),b={default:1});if(g)for(const _ in h)!Gw(_)&&b[_]==null&&delete h[_]},Ii=Y$;function L$(t){return U$(t)}function U$(t,r){const e=op();e.__VUE__=!0;const{insert:s,remove:h,patchProp:g,createElement:b,createText:_,createComment:k,setText:S,setElementText:E,parentNode:O,nextSibling:D,setScopeId:H=Xu,insertStaticContent:ae}=t,se=(J,Z,oe,Pe=null,ce=null,Ee=null,De=void 0,Oe=null,Fe=!!Z.dynamicChildren)=>{if(J===Z)return;J&&!Qo(J,Z)&&(Pe=ye(J),vt(J,ce,Ee,!0),J=null),Z.patchFlag===-2&&(Fe=!1,Z.dynamicChildren=null);const{type:Ce,ref:ft,shapeFlag:Ke}=Z;switch(Ce){case wp:ie(J,Z,oe,Pe);break;case Ma:de(J,Z,oe,Pe);break;case Dp:J==null&&W(Z,oe,Pe,De);break;case jn:be(J,Z,oe,Pe,ce,Ee,De,Oe,Fe);break;default:Ke&1?X(J,Z,oe,Pe,ce,Ee,De,Oe,Fe):Ke&6?nt(J,Z,oe,Pe,ce,Ee,De,Oe,Fe):(Ke&64||Ke&128)&&Ce.process(J,Z,oe,Pe,ce,Ee,De,Oe,Fe,et)}ft!=null&&ce&&Pv(ft,J&&J.ref,Ee,Z||J,!Z)},ie=(J,Z,oe,Pe)=>{if(J==null)s(Z.el=_(Z.children),oe,Pe);else{const ce=Z.el=J.el;Z.children!==J.children&&S(ce,Z.children)}},de=(J,Z,oe,Pe)=>{J==null?s(Z.el=k(Z.children||""),oe,Pe):Z.el=J.el},W=(J,Z,oe,Pe)=>{[J.el,J.anchor]=ae(J.children,Z,oe,Pe,J.el,J.anchor)},K=({el:J,anchor:Z},oe,Pe)=>{let ce;for(;J&&J!==Z;)ce=D(J),s(J,oe,Pe),J=ce;s(Z,oe,Pe)},Q=({el:J,anchor:Z})=>{let oe;for(;J&&J!==Z;)oe=D(J),h(J),J=oe;h(Z)},X=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe)=>{Z.type==="svg"?De="svg":Z.type==="math"&&(De="mathml"),J==null?ee(Z,oe,Pe,ce,Ee,De,Oe,Fe):le(J,Z,ce,Ee,De,Oe,Fe)},ee=(J,Z,oe,Pe,ce,Ee,De,Oe)=>{let Fe,Ce;const{props:ft,shapeFlag:Ke,transition:st,dirs:tt}=J;if(Fe=J.el=b(J.type,Ee,ft&&ft.is,ft),Ke&8?E(Fe,J.children):Ke&16&&fe(J.children,Fe,null,Pe,ce,Ip(J,Ee),De,Oe),tt&&Vo(J,null,Pe,"created"),Y(Fe,J,J.scopeId,De,Pe),ft){for(const Tt in ft)Tt!=="value"&&!Sc(Tt)&&g(Fe,Tt,null,ft[Tt],Ee,Pe);"value"in ft&&g(Fe,"value",null,ft.value,Ee),(Ce=ft.onVnodeBeforeMount)&&Uu(Ce,Pe,J)}tt&&Vo(J,null,Pe,"beforeMount");const gt=B$(ce,st);gt&&st.beforeEnter(Fe),s(Fe,Z,oe),((Ce=ft&&ft.onVnodeMounted)||gt||tt)&&Ii(()=>{Ce&&Uu(Ce,Pe,J),gt&&st.enter(Fe),tt&&Vo(J,null,Pe,"mounted")},ce)},Y=(J,Z,oe,Pe,ce)=>{if(oe&&H(J,oe),Pe)for(let Ee=0;Ee<Pe.length;Ee++)H(J,Pe[Ee]);if(ce){let Ee=ce.subTree;if(Z===Ee||s0(Ee.type)&&(Ee.ssContent===Z||Ee.ssFallback===Z)){const De=ce.vnode;Y(J,De,De.scopeId,De.slotScopeIds,ce.parent)}}},fe=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe=0)=>{for(let Ce=Fe;Ce<J.length;Ce++){const ft=J[Ce]=Oe?ko(J[Ce]):zu(J[Ce]);se(null,ft,Z,oe,Pe,ce,Ee,De,Oe)}},le=(J,Z,oe,Pe,ce,Ee,De)=>{const Oe=Z.el=J.el;let{patchFlag:Fe,dynamicChildren:Ce,dirs:ft}=Z;Fe|=J.patchFlag&16;const Ke=J.props||Mr,st=Z.props||Mr;let tt;if(oe&&zo(oe,!1),(tt=st.onVnodeBeforeUpdate)&&Uu(tt,oe,Z,J),ft&&Vo(Z,J,oe,"beforeUpdate"),oe&&zo(oe,!0),(Ke.innerHTML&&st.innerHTML==null||Ke.textContent&&st.textContent==null)&&E(Oe,""),Ce?we(J.dynamicChildren,Ce,Oe,oe,Pe,Ip(Z,ce),Ee):De||Ye(J,Z,Oe,null,oe,Pe,Ip(Z,ce),Ee,!1),Fe>0){if(Fe&16)_e(Oe,Ke,st,oe,ce);else if(Fe&2&&Ke.class!==st.class&&g(Oe,"class",null,st.class,ce),Fe&4&&g(Oe,"style",Ke.style,st.style,ce),Fe&8){const gt=Z.dynamicProps;for(let Tt=0;Tt<gt.length;Tt++){const Mt=gt[Tt],Gt=Ke[Mt],kt=st[Mt];(kt!==Gt||Mt==="value")&&g(Oe,Mt,Gt,kt,ce,oe)}}Fe&1&&J.children!==Z.children&&E(Oe,Z.children)}else!De&&Ce==null&&_e(Oe,Ke,st,oe,ce);((tt=st.onVnodeUpdated)||ft)&&Ii(()=>{tt&&Uu(tt,oe,Z,J),ft&&Vo(Z,J,oe,"updated")},Pe)},we=(J,Z,oe,Pe,ce,Ee,De)=>{for(let Oe=0;Oe<Z.length;Oe++){const Fe=J[Oe],Ce=Z[Oe],ft=Fe.el&&(Fe.type===jn||!Qo(Fe,Ce)||Fe.shapeFlag&70)?O(Fe.el):oe;se(Fe,Ce,ft,null,Pe,ce,Ee,De,!0)}},_e=(J,Z,oe,Pe,ce)=>{if(Z!==oe){if(Z!==Mr)for(const Ee in Z)!Sc(Ee)&&!(Ee in oe)&&g(J,Ee,Z[Ee],null,ce,Pe);for(const Ee in oe){if(Sc(Ee))continue;const De=oe[Ee],Oe=Z[Ee];De!==Oe&&Ee!=="value"&&g(J,Ee,Oe,De,ce,Pe)}"value"in oe&&g(J,"value",Z.value,oe.value,ce)}},be=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe)=>{const Ce=Z.el=J?J.el:_(""),ft=Z.anchor=J?J.anchor:_("");let{patchFlag:Ke,dynamicChildren:st,slotScopeIds:tt}=Z;tt&&(Oe=Oe?Oe.concat(tt):tt),J==null?(s(Ce,oe,Pe),s(ft,oe,Pe),fe(Z.children||[],oe,ft,ce,Ee,De,Oe,Fe)):Ke>0&&Ke&64&&st&&J.dynamicChildren?(we(J.dynamicChildren,st,oe,ce,Ee,De,Oe),(Z.key!=null||ce&&Z===ce.subTree)&&Xw(J,Z,!0)):Ye(J,Z,oe,ft,ce,Ee,De,Oe,Fe)},nt=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe)=>{Z.slotScopeIds=Oe,J==null?Z.shapeFlag&512?ce.ctx.activate(Z,oe,Pe,De,Fe):mt(Z,oe,Pe,ce,Ee,De,Fe):sr(J,Z,Fe)},mt=(J,Z,oe,Pe,ce,Ee,De)=>{const Oe=J.component=ix(J,Pe,ce);if(gp(J)&&(Oe.ctx.renderer=et),lx(Oe,!1,De),Oe.asyncDep){if(ce&&ce.registerDep(Oe,xt,De),!J.el){const Fe=Oe.subTree=os(Ma);de(null,Fe,Z,oe)}}else xt(Oe,J,Z,oe,ce,Ee,De)},sr=(J,Z,oe)=>{const Pe=Z.component=J.component;if(Z$(J,Z,oe))if(Pe.asyncDep&&!Pe.asyncResolved){wt(Pe,Z,oe);return}else Pe.next=Z,Pe.update();else Z.el=J.el,Pe.vnode=Z},xt=(J,Z,oe,Pe,ce,Ee,De)=>{const Oe=()=>{if(J.isMounted){let{next:Ke,bu:st,u:tt,parent:gt,vnode:Tt}=J;{const wr=Yw(J);if(wr){Ke&&(Ke.el=Tt.el,wt(J,Ke,De)),wr.asyncDep.then(()=>{J.isUnmounted||Oe()});return}}let Mt=Ke,Gt;zo(J,!1),Ke?(Ke.el=Tt.el,wt(J,Ke,De)):Ke=Tt,st&&Mp(st),(Gt=Ke.props&&Ke.props.onVnodeBeforeUpdate)&&Uu(Gt,gt,Ke,Tt),zo(J,!0);const kt=jp(J),ht=J.subTree;J.subTree=kt,se(ht,kt,O(ht.el),ye(ht),J,ce,Ee),Ke.el=kt.el,Mt===null&&X$(J,kt.el),tt&&Ii(tt,ce),(Gt=Ke.props&&Ke.props.onVnodeUpdated)&&Ii(()=>Uu(Gt,gt,Ke,Tt),ce)}else{let Ke;const{el:st,props:tt}=Z,{bm:gt,m:Tt,parent:Mt,root:Gt,type:kt}=J,ht=Kf(Z);if(zo(J,!1),gt&&Mp(gt),!ht&&(Ke=tt&&tt.onVnodeBeforeMount)&&Uu(Ke,Mt,Z),zo(J,!0),st&&At){const wr=()=>{J.subTree=jp(J),At(st,J.subTree,J,ce,null)};ht&&kt.__asyncHydrate?kt.__asyncHydrate(st,J,wr):wr()}else{Gt.ce&&Gt.ce._injectChildStyle(kt);const wr=J.subTree=jp(J);se(null,wr,oe,Pe,J,ce,Ee),Z.el=wr.el}if(Tt&&Ii(Tt,ce),!ht&&(Ke=tt&&tt.onVnodeMounted)){const wr=Z;Ii(()=>Uu(Ke,Mt,wr),ce)}(Z.shapeFlag&256||Mt&&Kf(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&J.a&&Ii(J.a,ce),J.isMounted=!0,Z=oe=Pe=null}};J.scope.on();const Fe=J.effect=new lw(Oe);J.scope.off();const Ce=J.update=Fe.run.bind(Fe),ft=J.job=Fe.runIfDirty.bind(Fe);ft.i=J,ft.id=J.uid,Fe.scheduler=()=>Ig(ft),zo(J,!0),Ce()},wt=(J,Z,oe)=>{Z.component=J;const Pe=J.vnode.props;J.vnode=Z,J.next=null,F$(J,Z.props,Pe,oe),D$(J,Z.children,oe),Do(),od(J),Lo()},Ye=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe=!1)=>{const Ce=J&&J.children,ft=J?J.shapeFlag:0,Ke=Z.children,{patchFlag:st,shapeFlag:tt}=Z;if(st>0){if(st&128){Ht(Ce,Ke,oe,Pe,ce,Ee,De,Oe,Fe);return}else if(st&256){bt(Ce,Ke,oe,Pe,ce,Ee,De,Oe,Fe);return}}tt&8?(ft&16&&Vt(Ce,ce,Ee),Ke!==Ce&&E(oe,Ke)):ft&16?tt&16?Ht(Ce,Ke,oe,Pe,ce,Ee,De,Oe,Fe):Vt(Ce,ce,Ee,!0):(ft&8&&E(oe,""),tt&16&&fe(Ke,oe,Pe,ce,Ee,De,Oe,Fe))},bt=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe)=>{J=J||Hf,Z=Z||Hf;const Ce=J.length,ft=Z.length,Ke=Math.min(Ce,ft);let st;for(st=0;st<Ke;st++){const tt=Z[st]=Fe?ko(Z[st]):zu(Z[st]);se(J[st],tt,oe,null,ce,Ee,De,Oe,Fe)}Ce>ft?Vt(J,ce,Ee,!0,!1,Ke):fe(Z,oe,Pe,ce,Ee,De,Oe,Fe,Ke)},Ht=(J,Z,oe,Pe,ce,Ee,De,Oe,Fe)=>{let Ce=0;const ft=Z.length;let Ke=J.length-1,st=ft-1;for(;Ce<=Ke&&Ce<=st;){const tt=J[Ce],gt=Z[Ce]=Fe?ko(Z[Ce]):zu(Z[Ce]);if(Qo(tt,gt))se(tt,gt,oe,null,ce,Ee,De,Oe,Fe);else break;Ce++}for(;Ce<=Ke&&Ce<=st;){const tt=J[Ke],gt=Z[st]=Fe?ko(Z[st]):zu(Z[st]);if(Qo(tt,gt))se(tt,gt,oe,null,ce,Ee,De,Oe,Fe);else break;Ke--,st--}if(Ce>Ke){if(Ce<=st){const tt=st+1,gt=tt<ft?Z[tt].el:Pe;for(;Ce<=st;)se(null,Z[Ce]=Fe?ko(Z[Ce]):zu(Z[Ce]),oe,gt,ce,Ee,De,Oe,Fe),Ce++}}else if(Ce>st)for(;Ce<=Ke;)vt(J[Ce],ce,Ee,!0),Ce++;else{const tt=Ce,gt=Ce,Tt=new Map;for(Ce=gt;Ce<=st;Ce++){const St=Z[Ce]=Fe?ko(Z[Ce]):zu(Z[Ce]);St.key!=null&&Tt.set(St.key,Ce)}let Mt,Gt=0;const kt=st-gt+1;let ht=!1,wr=0;const hs=new Array(kt);for(Ce=0;Ce<kt;Ce++)hs[Ce]=0;for(Ce=tt;Ce<=Ke;Ce++){const St=J[Ce];if(Gt>=kt){vt(St,ce,Ee,!0);continue}let zt;if(St.key!=null)zt=Tt.get(St.key);else for(Mt=gt;Mt<=st;Mt++)if(hs[Mt-gt]===0&&Qo(St,Z[Mt])){zt=Mt;break}zt===void 0?vt(St,ce,Ee,!0):(hs[zt-gt]=Ce+1,zt>=wr?wr=zt:ht=!0,se(St,Z[zt],oe,null,ce,Ee,De,Oe,Fe),Gt++)}const ls=ht?H$(hs):Hf;for(Mt=ls.length-1,Ce=kt-1;Ce>=0;Ce--){const St=gt+Ce,zt=Z[St],Sn=St+1<ft?Z[St+1].el:Pe;hs[Ce]===0?se(null,zt,oe,Sn,ce,Ee,De,Oe,Fe):ht&&(Mt<0||Ce!==ls[Mt]?nr(zt,oe,Sn,2):Mt--)}}},nr=(J,Z,oe,Pe,ce=null)=>{const{el:Ee,type:De,transition:Oe,children:Fe,shapeFlag:Ce}=J;if(Ce&6){nr(J.component.subTree,Z,oe,Pe);return}if(Ce&128){J.suspense.move(Z,oe,Pe);return}if(Ce&64){De.move(J,Z,oe,et);return}if(De===jn){s(Ee,Z,oe);for(let Ke=0;Ke<Fe.length;Ke++)nr(Fe[Ke],Z,oe,Pe);s(J.anchor,Z,oe);return}if(De===Dp){K(J,Z,oe);return}if(Pe!==2&&Ce&1&&Oe)if(Pe===0)Oe.beforeEnter(Ee),s(Ee,Z,oe),Ii(()=>Oe.enter(Ee),ce);else{const{leave:Ke,delayLeave:st,afterLeave:tt}=Oe,gt=()=>s(Ee,Z,oe),Tt=()=>{Ke(Ee,()=>{gt(),tt&&tt()})};st?st(Ee,gt,Tt):Tt()}else s(Ee,Z,oe)},vt=(J,Z,oe,Pe=!1,ce=!1)=>{const{type:Ee,props:De,ref:Oe,children:Fe,dynamicChildren:Ce,shapeFlag:ft,patchFlag:Ke,dirs:st,cacheIndex:tt}=J;if(Ke===-2&&(ce=!1),Oe!=null&&Pv(Oe,null,oe,J,!0),tt!=null&&(Z.renderCache[tt]=void 0),ft&256){Z.ctx.deactivate(J);return}const gt=ft&1&&st,Tt=!Kf(J);let Mt;if(Tt&&(Mt=De&&De.onVnodeBeforeUnmount)&&Uu(Mt,Z,J),ft&6)_r(J.component,oe,Pe);else{if(ft&128){J.suspense.unmount(oe,Pe);return}gt&&Vo(J,null,Z,"beforeUnmount"),ft&64?J.type.remove(J,Z,oe,et,Pe):Ce&&!Ce.hasOnce&&(Ee!==jn||Ke>0&&Ke&64)?Vt(Ce,Z,oe,!1,!0):(Ee===jn&&Ke&384||!ce&&ft&16)&&Vt(Fe,Z,oe),Pe&&Cr(J)}(Tt&&(Mt=De&&De.onVnodeUnmounted)||gt)&&Ii(()=>{Mt&&Uu(Mt,Z,J),gt&&Vo(J,null,Z,"unmounted")},oe)},Cr=J=>{const{type:Z,el:oe,anchor:Pe,transition:ce}=J;if(Z===jn){qt(oe,Pe);return}if(Z===Dp){Q(J);return}const Ee=()=>{h(oe),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(J.shapeFlag&1&&ce&&!ce.persisted){const{leave:De,delayLeave:Oe}=ce,Fe=()=>De(oe,Ee);Oe?Oe(J.el,Ee,Fe):Fe()}else Ee()},qt=(J,Z)=>{let oe;for(;J!==Z;)oe=D(J),h(J),J=oe;h(Z)},_r=(J,Z,oe)=>{const{bum:Pe,scope:ce,job:Ee,subTree:De,um:Oe,m:Fe,a:Ce}=J;yd(Fe),yd(Ce),Pe&&Mp(Pe),ce.stop(),Ee&&(Ee.flags|=8,vt(De,J,Z,oe)),Oe&&Ii(Oe,Z),Ii(()=>{J.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Vt=(J,Z,oe,Pe=!1,ce=!1,Ee=0)=>{for(let De=Ee;De<J.length;De++)vt(J[De],Z,oe,Pe,ce)},ye=J=>{if(J.shapeFlag&6)return ye(J.component.subTree);if(J.shapeFlag&128)return J.suspense.next();const Z=D(J.anchor||J.el),oe=Z&&Z[l$];return oe?D(oe):Z};let qe=!1;const Te=(J,Z,oe)=>{J==null?Z._vnode&&vt(Z._vnode,null,null,!0):se(Z._vnode||null,J,Z,null,null,null,oe),Z._vnode=J,qe||(qe=!0,od(),kw(),qe=!1)},et={p:se,um:vt,m:nr,r:Cr,mt,mc:fe,pc:Ye,pbc:we,n:ye,o:t};let ct,At;return{render:Te,hydrate:ct,createApp:T$(Te,ct)}}function Ip({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function zo({effect:t,job:r},e){e?(t.flags|=32,r.flags|=4):(t.flags&=-33,r.flags&=-5)}function B$(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function Xw(t,r,e=!1){const s=t.children,h=r.children;if(Pt(s)&&Pt(h))for(let g=0;g<s.length;g++){const b=s[g];let _=h[g];_.shapeFlag&1&&!_.dynamicChildren&&((_.patchFlag<=0||_.patchFlag===32)&&(_=h[g]=ko(h[g]),_.el=b.el),!e&&_.patchFlag!==-2&&Xw(b,_)),_.type===wp&&(_.el=b.el)}}function H$(t){const r=t.slice(),e=[0];let s,h,g,b,_;const k=t.length;for(s=0;s<k;s++){const S=t[s];if(S!==0){if(h=e[e.length-1],t[h]<S){r[s]=h,e.push(s);continue}for(g=0,b=e.length-1;g<b;)_=g+b>>1,t[e[_]]<S?g=_+1:b=_;S<t[e[g]]&&(g>0&&(r[s]=e[g-1]),e[g]=s)}}for(g=e.length,b=e[g-1];g-- >0;)e[g]=b,b=r[b];return e}function Yw(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:Yw(r)}function yd(t){if(t)for(let r=0;r<t.length;r++)t[r].flags|=8}const q$=Symbol.for("v-scx"),V$=()=>eo(q$);function z$(t,r){return Ug(t,null,{flush:"sync"})}function Gf(t,r,e){return Ug(t,r,e)}function Ug(t,r,e=Mr){const{immediate:s,deep:h,flush:g,once:b}=e,_=Ns({},e),k=r&&s||!r&&g!=="post";let S;if(Wc){if(g==="sync"){const H=V$();S=H.__watcherHandles||(H.__watcherHandles=[])}else if(!k){const H=()=>{};return H.stop=Xu,H.resume=Xu,H.pause=Xu,H}}const E=Mn;_.call=(H,ae,se)=>ju(H,E,ae,se);let O=!1;g==="post"?_.scheduler=H=>{Ii(H,E&&E.suspense)}:g!=="sync"&&(O=!0,_.scheduler=(H,ae)=>{ae?H():Ig(H)}),_.augmentJob=H=>{r&&(H.flags|=4),O&&(H.flags|=2,E&&(H.id=E.uid,H.i=E))};const D=s$(t,r,_);return Wc&&(S?S.push(D):k&&D()),D}function K$(t,r,e){const s=this.proxy,h=Ts(t)?t.includes(".")?e0(s,t):()=>s[t]:t.bind(s,s);let g;Dt(r)?g=r:(g=r.handler,e=r);const b=Xc(this),_=Ug(h,g.bind(s),e);return b(),_}function e0(t,r){const e=r.split(".");return()=>{let s=t;for(let h=0;h<e.length&&s;h++)s=s[e[h]];return s}}function W$(t,r,e=Mr){const s=Hg(),h=Ki(r),g=jo(r),b=t0(t,h),_=Ym((k,S)=>{let E,O=Mr,D;return z$(()=>{const H=t[h];Da(E,H)&&(E=H,S())}),{get(){return k(),e.get?e.get(E):E},set(H){const ae=e.set?e.set(H):H;if(!Da(ae,E)&&!(O!==Mr&&Da(H,O)))return;const se=s.vnode.props;se&&(r in se||h in se||g in se)&&(`onUpdate:${r}`in se||`onUpdate:${h}`in se||`onUpdate:${g}`in se)||(E=H,S()),s.emit(`update:${r}`,ae),Da(H,ae)&&Da(H,O)&&!Da(ae,D)&&S(),O=H,D=ae}}});return _[Symbol.iterator]=()=>{let k=0;return{next(){return k<2?{value:k++?b||Mr:_,done:!1}:{done:!0}}}},_}const t0=(t,r)=>r==="modelValue"||r==="model-value"?t.modelModifiers:t[`${r}Modifiers`]||t[`${Ki(r)}Modifiers`]||t[`${jo(r)}Modifiers`];function G$(t,r,...e){if(t.isUnmounted)return;const s=t.vnode.props||Mr;let h=e;const g=r.startsWith("update:"),b=g&&t0(s,r.slice(7));b&&(b.trim&&(h=e.map(E=>Ts(E)?E.trim():E)),b.number&&(h=e.map(xm)));let _,k=s[_=Ep(r)]||s[_=Ep(Ki(r))];!k&&g&&(k=s[_=Ep(jo(r))]),k&&ju(k,t,6,h);const S=s[_+"Once"];if(S){if(!t.emitted)t.emitted={};else if(t.emitted[_])return;t.emitted[_]=!0,ju(S,t,6,h)}}function r0(t,r,e=!1){const s=r.emitsCache,h=s.get(t);if(h!==void 0)return h;const g=t.emits;let b={},_=!1;if(!Dt(t)){const k=S=>{const E=r0(S,r,!0);E&&(_=!0,Ns(b,E))};!e&&r.mixins.length&&r.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}return!g&&!_?(is(t)&&s.set(t,null),null):(Pt(g)?g.forEach(k=>b[k]=null):Ns(b,g),is(t)&&s.set(t,b),b)}function yp(t,r){return!t||!ap(r)?!1:(r=r.slice(2).replace(/Once$/,""),Er(t,r[0].toLowerCase()+r.slice(1))||Er(t,jo(r))||Er(t,r))}function jp(t){const{type:r,vnode:e,proxy:s,withProxy:h,propsOptions:[g],slots:b,attrs:_,emit:k,render:S,renderCache:E,props:O,data:D,setupState:H,ctx:ae,inheritAttrs:se}=t,ie=Kh(t);let de,W;try{if(e.shapeFlag&4){const Q=h||s,X=Q;de=zu(S.call(X,Q,E,O,H,D,ae)),W=_}else{const Q=r;de=zu(Q.length>1?Q(O,{attrs:_,slots:b,emit:k}):Q(O,null)),W=r.props?_:J$(_)}}catch(Q){Fc.length=0,pp(Q,t,1),de=os(Ma)}let K=de;if(W&&se!==!1){const Q=Object.keys(W),{shapeFlag:X}=K;Q.length&&X&7&&(g&&Q.some(_g)&&(W=Q$(W,g)),K=Io(K,W,!1,!0))}return e.dirs&&(K=Io(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(e.dirs):e.dirs),e.transition&&qc(K,e.transition),de=K,Kh(ie),de}const J$=t=>{let r;for(const e in t)(e==="class"||e==="style"||ap(e))&&((r||(r={}))[e]=t[e]);return r},Q$=(t,r)=>{const e={};for(const s in t)(!_g(s)||!(s.slice(9)in r))&&(e[s]=t[s]);return e};function Z$(t,r,e){const{props:s,children:h,component:g}=t,{props:b,children:_,patchFlag:k}=r,S=g.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&k>=0){if(k&1024)return!0;if(k&16)return s?wd(s,b,S):!!b;if(k&8){const E=r.dynamicProps;for(let O=0;O<E.length;O++){const D=E[O];if(b[D]!==s[D]&&!yp(S,D))return!0}}}else return(h||_)&&(!_||!_.$stable)?!0:s===b?!1:s?b?wd(s,b,S):!0:!!b;return!1}function wd(t,r,e){const s=Object.keys(r);if(s.length!==Object.keys(t).length)return!0;for(let h=0;h<s.length;h++){const g=s[h];if(r[g]!==t[g]&&!yp(e,g))return!0}return!1}function X$({vnode:t,parent:r},e){for(;r;){const s=r.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=r.vnode).el=e,r=r.parent;else break}}const s0=t=>t.__isSuspense;function Y$(t,r){r&&r.pendingBranch?Pt(t)?r.effects.push(...t):r.effects.push(t):i$(t)}const jn=Symbol.for("v-fgt"),wp=Symbol.for("v-txt"),Ma=Symbol.for("v-cmt"),Dp=Symbol.for("v-stc"),Fc=[];let zi=null;function Ss(t=!1){Fc.push(zi=t?null:[])}function ex(){Fc.pop(),zi=Fc[Fc.length-1]||null}let Vc=1;function md(t){Vc+=t,t<0&&zi&&(zi.hasOnce=!0)}function n0(t){return t.dynamicChildren=Vc>0?zi||Hf:null,ex(),Vc>0&&zi&&zi.push(t),t}function _n(t,r,e,s,h,g){return n0(rl(t,r,e,s,h,g,!0))}function Jh(t,r,e,s,h){return n0(os(t,r,e,s,h,!0))}function zc(t){return t?t.__v_isVNode===!0:!1}function Qo(t,r){return t.type===r.type&&t.key===r.key}const a0=({key:t})=>t??null,xh=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ts(t)||Un(t)||Dt(t)?{i:Ln,r:t,k:r,f:!!e}:t:null);function rl(t,r=null,e=null,s=0,h=null,g=t===jn?0:1,b=!1,_=!1){const k={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&a0(r),ref:r&&xh(r),scopeId:Mw,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:s,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Ln};return _?(Bg(k,e),g&128&&t.normalize(k)):e&&(k.shapeFlag|=Ts(e)?8:16),Vc>0&&!b&&zi&&(k.patchFlag>0||g&6)&&k.patchFlag!==32&&zi.push(k),k}const os=tx;function tx(t,r=null,e=null,s=0,h=null,g=!1){if((!t||t===A$)&&(t=Ma),zc(t)){const _=Io(t,r,!0);return e&&Bg(_,e),Vc>0&&!g&&zi&&(_.shapeFlag&6?zi[zi.indexOf(t)]=_:zi.push(_)),_.patchFlag=-2,_}if(hx(t)&&(t=t.__vccOpts),r){r=rx(r);let{class:_,style:k}=r;_&&!Ts(_)&&(r.class=Dn(_)),is(k)&&(Rg(k)&&!Pt(k)&&(k=Ns({},k)),r.style=Eg(k))}const b=Ts(t)?1:s0(t)?128:Sw(t)?64:is(t)?4:Dt(t)?2:0;return rl(t,r,e,s,h,b,g,!0)}function rx(t){return t?Rg(t)||zw(t)?Ns({},t):t:null}function Io(t,r,e=!1,s=!1){const{props:h,ref:g,patchFlag:b,children:_,transition:k}=t,S=r?sx(h||{},r):h,E={__v_isVNode:!0,__v_skip:!0,type:t.type,props:S,key:S&&a0(S),ref:r&&r.ref?e&&g?Pt(g)?g.concat(xh(r)):[g,xh(r)]:xh(r):g,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:_,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==jn?b===-1?16:b|16:b,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:k,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Io(t.ssContent),ssFallback:t.ssFallback&&Io(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return k&&s&&qc(E,k.clone(E)),E}function Ru(t=" ",r=0){return os(wp,null,t,r)}function Kc(t="",r=!1){return r?(Ss(),Jh(Ma,null,t)):os(Ma,null,t)}function zu(t){return t==null||typeof t=="boolean"?os(Ma):Pt(t)?os(jn,null,t.slice()):zc(t)?ko(t):os(wp,null,String(t))}function ko(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Io(t)}function Bg(t,r){let e=0;const{shapeFlag:s}=t;if(r==null)r=null;else if(Pt(r))e=16;else if(typeof r=="object")if(s&65){const h=r.default;h&&(h._c&&(h._d=!1),Bg(t,h()),h._c&&(h._d=!0));return}else{e=32;const h=r._;!h&&!zw(r)?r._ctx=Ln:h===3&&Ln&&(Ln.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else Dt(r)?(r={default:r,_ctx:Ln},e=32):(r=String(r),s&64?(e=16,r=[Ru(r)]):e=8);t.children=r,t.shapeFlag|=e}function sx(...t){const r={};for(let e=0;e<t.length;e++){const s=t[e];for(const h in s)if(h==="class")r.class!==s.class&&(r.class=Dn([r.class,s.class]));else if(h==="style")r.style=Eg([r.style,s.style]);else if(ap(h)){const g=r[h],b=s[h];b&&g!==b&&!(Pt(g)&&g.includes(b))&&(r[h]=g?[].concat(g,b):b)}else h!==""&&(r[h]=s[h])}return r}function Uu(t,r,e,s=null){ju(t,r,7,[e,s])}const nx=Hw();let ax=0;function ix(t,r,e){const s=t.type,h=(r?r.appContext:t.appContext)||nx,g={uid:ax++,vnode:t,type:s,parent:r,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(h.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ww(s,h),emitsOptions:r0(s,h),emit:null,emitted:null,propsDefaults:Mr,inheritAttrs:s.inheritAttrs,ctx:Mr,data:Mr,props:Mr,attrs:Mr,slots:Mr,refs:Mr,setupState:Mr,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=r?r.root:g,g.emit=G$.bind(null,g),t.ce&&t.ce(g),g}let Mn=null;const Hg=()=>Mn||Ln;let Qh,Tv;{const t=op(),r=(e,s)=>{let h;return(h=t[e])||(h=t[e]=[]),h.push(s),g=>{h.length>1?h.forEach(b=>b(g)):h[0](g)}};Qh=r("__VUE_INSTANCE_SETTERS__",e=>Mn=e),Tv=r("__VUE_SSR_SETTERS__",e=>Wc=e)}const Xc=t=>{const r=Mn;return Qh(t),t.scope.on(),()=>{t.scope.off(),Qh(r)}},$d=()=>{Mn&&Mn.scope.off(),Qh(null)};function i0(t){return t.vnode.shapeFlag&4}let Wc=!1;function lx(t,r=!1,e=!1){r&&Tv(r);const{props:s,children:h}=t.vnode,g=i0(t);O$(t,s,g,r),j$(t,h,e);const b=g?ux(t,r):void 0;return r&&Tv(!1),b}function ux(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,_$);const{setup:s}=e;if(s){Do();const h=t.setupContext=s.length>1?fx(t):null,g=Xc(t),b=Zc(s,t,0,[t.props,h]),_=Yy(b);if(Lo(),g(),(_||t.sp)&&!Kf(t)&&Iw(t),_){if(b.then($d,$d),r)return b.then(k=>{xd(t,k,r)}).catch(k=>{pp(k,t,0)});t.asyncDep=b}else xd(t,b,r)}else l0(t,r)}function xd(t,r,e){Dt(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:is(r)&&(t.setupState=Cw(r)),l0(t,e)}let bd;function l0(t,r,e){const s=t.type;if(!t.render){if(!r&&bd&&!s.render){const h=s.template||Dg(t).template;if(h){const{isCustomElement:g,compilerOptions:b}=t.appContext.config,{delimiters:_,compilerOptions:k}=s,S=Ns(Ns({isCustomElement:g,delimiters:_},b),k);s.render=bd(h,S)}}t.render=s.render||Xu}{const h=Xc(t);Do();try{P$(t)}finally{Lo(),h()}}}const ox={get(t,r){return Rn(t,"get",""),t[r]}};function fx(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,ox),slots:t.slots,emit:t.emit,expose:r}}function qg(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Cw(Jm(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in Oc)return Oc[e](t)},has(r,e){return e in r||e in Oc}})):t.proxy}function cx(t,r=!0){return Dt(t)?t.displayName||t.name:t.name||r&&t.__name}function hx(t){return Dt(t)&&"__vccOpts"in t}const La=(t,r)=>t$(t,r,Wc);function qu(t,r,e){const s=arguments.length;return s===2?is(r)&&!Pt(r)?zc(r)?os(t,null,[r]):os(t,r):os(t,null,r):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&zc(e)&&(e=[e]),os(t,r,e))}const px="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ov;const Ad=typeof window<"u"&&window.trustedTypes;if(Ad)try{Ov=Ad.createPolicy("vue",{createHTML:t=>t})}catch{}const u0=Ov?t=>Ov.createHTML(t):t=>t,vx="http://www.w3.org/2000/svg",gx="http://www.w3.org/1998/Math/MathML",uo=typeof document<"u"?document:null,Cd=uo&&uo.createElement("template"),dx={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,s)=>{const h=r==="svg"?uo.createElementNS(vx,t):r==="mathml"?uo.createElementNS(gx,t):e?uo.createElement(t,{is:e}):uo.createElement(t);return t==="select"&&s&&s.multiple!=null&&h.setAttribute("multiple",s.multiple),h},createText:t=>uo.createTextNode(t),createComment:t=>uo.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>uo.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,s,h,g){const b=e?e.previousSibling:r.lastChild;if(h&&(h===g||h.nextSibling))for(;r.insertBefore(h.cloneNode(!0),e),!(h===g||!(h=h.nextSibling)););else{Cd.innerHTML=u0(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const _=Cd.content;if(s==="svg"||s==="mathml"){const k=_.firstChild;for(;k.firstChild;)_.appendChild(k.firstChild);_.removeChild(k)}r.insertBefore(_,e)}return[b?b.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},wo="transition",wc="animation",Gc=Symbol("_vtc"),o0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yx=Ns({},Nw,o0),wx=t=>(t.displayName="Transition",t.props=yx,t),mx=wx((t,{slots:r})=>qu(f$,$x(t),r)),Ko=(t,r=[])=>{Pt(t)?t.forEach(e=>e(...r)):t&&t(...r)},_d=t=>t?Pt(t)?t.some(r=>r.length>1):t.length>1:!1;function $x(t){const r={};for(const be in t)be in o0||(r[be]=t[be]);if(t.css===!1)return r;const{name:e="v",type:s,duration:h,enterFromClass:g=`${e}-enter-from`,enterActiveClass:b=`${e}-enter-active`,enterToClass:_=`${e}-enter-to`,appearFromClass:k=g,appearActiveClass:S=b,appearToClass:E=_,leaveFromClass:O=`${e}-leave-from`,leaveActiveClass:D=`${e}-leave-active`,leaveToClass:H=`${e}-leave-to`}=t,ae=xx(h),se=ae&&ae[0],ie=ae&&ae[1],{onBeforeEnter:de,onEnter:W,onEnterCancelled:K,onLeave:Q,onLeaveCancelled:X,onBeforeAppear:ee=de,onAppear:Y=W,onAppearCancelled:fe=K}=r,le=(be,nt,mt)=>{Wo(be,nt?E:_),Wo(be,nt?S:b),mt&&mt()},we=(be,nt)=>{be._isLeaving=!1,Wo(be,O),Wo(be,H),Wo(be,D),nt&&nt()},_e=be=>(nt,mt)=>{const sr=be?Y:W,xt=()=>le(nt,be,mt);Ko(sr,[nt,xt]),Pd(()=>{Wo(nt,be?k:g),mo(nt,be?E:_),_d(sr)||kd(nt,s,se,xt)})};return Ns(r,{onBeforeEnter(be){Ko(de,[be]),mo(be,g),mo(be,b)},onBeforeAppear(be){Ko(ee,[be]),mo(be,k),mo(be,S)},onEnter:_e(!1),onAppear:_e(!0),onLeave(be,nt){be._isLeaving=!0;const mt=()=>we(be,nt);mo(be,O),mo(be,D),Cx(),Pd(()=>{be._isLeaving&&(Wo(be,O),mo(be,H),_d(Q)||kd(be,s,ie,mt))}),Ko(Q,[be,mt])},onEnterCancelled(be){le(be,!1),Ko(K,[be])},onAppearCancelled(be){le(be,!0),Ko(fe,[be])},onLeaveCancelled(be){we(be),Ko(X,[be])}})}function xx(t){if(t==null)return null;if(is(t))return[Lp(t.enter),Lp(t.leave)];{const r=Lp(t);return[r,r]}}function Lp(t){return bm(t)}function mo(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[Gc]||(t[Gc]=new Set)).add(r)}function Wo(t,r){r.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const e=t[Gc];e&&(e.delete(r),e.size||(t[Gc]=void 0))}function Pd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let bx=0;function kd(t,r,e,s){const h=t._endId=++bx,g=()=>{h===t._endId&&s()};if(e!=null)return setTimeout(g,e);const{type:b,timeout:_,propCount:k}=Ax(t,r);if(!b)return s();const S=b+"end";let E=0;const O=()=>{t.removeEventListener(S,D),g()},D=H=>{H.target===t&&++E>=k&&O()};setTimeout(()=>{E<k&&O()},_+1),t.addEventListener(S,D)}function Ax(t,r){const e=window.getComputedStyle(t),s=ae=>(e[ae]||"").split(", "),h=s(`${wo}Delay`),g=s(`${wo}Duration`),b=Ed(h,g),_=s(`${wc}Delay`),k=s(`${wc}Duration`),S=Ed(_,k);let E=null,O=0,D=0;r===wo?b>0&&(E=wo,O=b,D=g.length):r===wc?S>0&&(E=wc,O=S,D=k.length):(O=Math.max(b,S),E=O>0?b>S?wo:wc:null,D=E?E===wo?g.length:k.length:0);const H=E===wo&&/\b(transform|all)(,|$)/.test(s(`${wo}Property`).toString());return{type:E,timeout:O,propCount:D,hasTransform:H}}function Ed(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,s)=>Md(e)+Md(t[s])))}function Md(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Cx(){return document.body.offsetHeight}function _x(t,r,e){const s=t[Gc];s&&(r=(r?[r,...s]:[...s]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const Sd=Symbol("_vod"),Px=Symbol("_vsh"),kx=Symbol(""),Ex=/(^|;)\s*display\s*:/;function Mx(t,r,e){const s=t.style,h=Ts(e);let g=!1;if(e&&!h){if(r)if(Ts(r))for(const b of r.split(";")){const _=b.slice(0,b.indexOf(":")).trim();e[_]==null&&bh(s,_,"")}else for(const b in r)e[b]==null&&bh(s,b,"");for(const b in e)b==="display"&&(g=!0),bh(s,b,e[b])}else if(h){if(r!==e){const b=s[kx];b&&(e+=";"+b),s.cssText=e,g=Ex.test(e)}}else r&&t.removeAttribute("style");Sd in t&&(t[Sd]=g?s.display:"",t[Px]&&(s.display="none"))}const Nd=/\s*!important$/;function bh(t,r,e){if(Pt(e))e.forEach(s=>bh(t,r,s));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const s=Sx(t,r);Nd.test(e)?t.setProperty(jo(s),e.replace(Nd,""),"important"):t[s]=e}}const Td=["Webkit","Moz","ms"],Up={};function Sx(t,r){const e=Up[r];if(e)return e;let s=Ki(r);if(s!=="filter"&&s in t)return Up[r]=s;s=up(s);for(let h=0;h<Td.length;h++){const g=Td[h]+s;if(g in t)return Up[r]=g}return r}const Od="http://www.w3.org/1999/xlink";function Fd(t,r,e,s,h,g=Em(r)){s&&r.startsWith("xlink:")?e==null?t.removeAttributeNS(Od,r.slice(6,r.length)):t.setAttributeNS(Od,r,e):e==null||g&&!sw(e)?t.removeAttribute(r):t.setAttribute(r,g?"":co(e)?String(e):e)}function Rd(t,r,e,s,h){if(r==="innerHTML"||r==="textContent"){e!=null&&(t[r]=r==="innerHTML"?u0(e):e);return}const g=t.tagName;if(r==="value"&&g!=="PROGRESS"&&!g.includes("-")){const _=g==="OPTION"?t.getAttribute("value")||"":t.value,k=e==null?t.type==="checkbox"?"on":"":String(e);(_!==k||!("_value"in t))&&(t.value=k),e==null&&t.removeAttribute(r),t._value=e;return}let b=!1;if(e===""||e==null){const _=typeof t[r];_==="boolean"?e=sw(e):e==null&&_==="string"?(e="",b=!0):_==="number"&&(e=0,b=!0)}try{t[r]=e}catch{}b&&t.removeAttribute(h||r)}function Nx(t,r,e,s){t.addEventListener(r,e,s)}function Tx(t,r,e,s){t.removeEventListener(r,e,s)}const Id=Symbol("_vei");function Ox(t,r,e,s,h=null){const g=t[Id]||(t[Id]={}),b=g[r];if(s&&b)b.value=s;else{const[_,k]=Fx(r);if(s){const S=g[r]=jx(s,h);Nx(t,_,S,k)}else b&&(Tx(t,_,b,k),g[r]=void 0)}}const jd=/(?:Once|Passive|Capture)$/;function Fx(t){let r;if(jd.test(t)){r={};let s;for(;s=t.match(jd);)t=t.slice(0,t.length-s[0].length),r[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):jo(t.slice(2)),r]}let Bp=0;const Rx=Promise.resolve(),Ix=()=>Bp||(Rx.then(()=>Bp=0),Bp=Date.now());function jx(t,r){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;ju(Dx(s,e.value),r,5,[s])};return e.value=t,e.attached=Ix(),e}function Dx(t,r){if(Pt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(s=>h=>!h._stopped&&s&&s(h))}else return r}const Dd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Lx=(t,r,e,s,h,g)=>{const b=h==="svg";r==="class"?_x(t,s,b):r==="style"?Mx(t,e,s):ap(r)?_g(r)||Ox(t,r,e,s,g):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Ux(t,r,s,b))?(Rd(t,r,s),!t.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&Fd(t,r,s,b,g,r!=="value")):t._isVueCE&&(/[A-Z]/.test(r)||!Ts(s))?Rd(t,Ki(r),s,g,r):(r==="true-value"?t._trueValue=s:r==="false-value"&&(t._falseValue=s),Fd(t,r,s,b))};function Ux(t,r,e,s){if(s)return!!(r==="innerHTML"||r==="textContent"||r in t&&Dd(r)&&Dt(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const h=t.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return Dd(r)&&Ts(e)?!1:r in t}const Bx=Ns({patchProp:Lx},dx);let Ld;function Hx(){return Ld||(Ld=L$(Bx))}const qx=(...t)=>{const r=Hx().createApp(...t),{mount:e}=r;return r.mount=s=>{const h=zx(s);if(!h)return;const g=r._component;!Dt(g)&&!g.render&&!g.template&&(g.template=h.innerHTML),h.nodeType===1&&(h.textContent="");const b=e(h,!1,Vx(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),b},r};function Vx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zx(t){return Ts(t)?document.querySelector(t):t}/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Bf=typeof document<"u";function f0(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&f0(t.default)}const Tr=Object.assign;function Hp(t,r){const e={};for(const s in r){const h=r[s];e[s]=Du(h)?h.map(t):t(h)}return e}const Rc=()=>{},Du=Array.isArray,c0=/#/g,Wx=/&/g,Gx=/\//g,Jx=/=/g,Qx=/\?/g,h0=/\+/g,Zx=/%5B/g,Xx=/%5D/g,p0=/%5E/g,Yx=/%60/g,v0=/%7B/g,eb=/%7C/g,g0=/%7D/g,tb=/%20/g;function Vg(t){return encodeURI(""+t).replace(eb,"|").replace(Zx,"[").replace(Xx,"]")}function rb(t){return Vg(t).replace(v0,"{").replace(g0,"}").replace(p0,"^")}function Fv(t){return Vg(t).replace(h0,"%2B").replace(tb,"+").replace(c0,"%23").replace(Wx,"%26").replace(Yx,"`").replace(v0,"{").replace(g0,"}").replace(p0,"^")}function sb(t){return Fv(t).replace(Jx,"%3D")}function nb(t){return Vg(t).replace(c0,"%23").replace(Qx,"%3F")}function ab(t){return t==null?"":nb(t).replace(Gx,"%2F")}function Jc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const ib=/\/$/,lb=t=>t.replace(ib,"");function qp(t,r,e="/"){let s,h={},g="",b="";const _=r.indexOf("#");let k=r.indexOf("?");return _<k&&_>=0&&(k=-1),k>-1&&(s=r.slice(0,k),g=r.slice(k+1,_>-1?_:r.length),h=t(g)),_>-1&&(s=s||r.slice(0,_),b=r.slice(_,r.length)),s=cb(s??r,e),{fullPath:s+(g&&"?")+g+b,path:s,query:h,hash:Jc(b)}}function ub(t,r){const e=r.query?t(r.query):"";return r.path+(e&&"?")+e+(r.hash||"")}function Ud(t,r){return!r||!t.toLowerCase().startsWith(r.toLowerCase())?t:t.slice(r.length)||"/"}function ob(t,r,e){const s=r.matched.length-1,h=e.matched.length-1;return s>-1&&s===h&&gc(r.matched[s],e.matched[h])&&d0(r.params,e.params)&&t(r.query)===t(e.query)&&r.hash===e.hash}function gc(t,r){return(t.aliasOf||t)===(r.aliasOf||r)}function d0(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const e in t)if(!fb(t[e],r[e]))return!1;return!0}function fb(t,r){return Du(t)?Bd(t,r):Du(r)?Bd(r,t):t===r}function Bd(t,r){return Du(r)?t.length===r.length&&t.every((e,s)=>e===r[s]):t.length===1&&t[0]===r}function cb(t,r){if(t.startsWith("/"))return t;if(!t)return r;const e=r.split("/"),s=t.split("/"),h=s[s.length-1];(h===".."||h===".")&&s.push("");let g=e.length-1,b,_;for(b=0;b<s.length;b++)if(_=s[b],_!==".")if(_==="..")g>1&&g--;else break;return e.slice(0,g).join("/")+"/"+s.slice(b).join("/")}const $o={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Qc;(function(t){t.pop="pop",t.push="push"})(Qc||(Qc={}));var Ic;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ic||(Ic={}));function hb(t){if(!t)if(Bf){const r=document.querySelector("base");t=r&&r.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lb(t)}const pb=/^[^#]+#/;function vb(t,r){return t.replace(pb,"#")+r}function gb(t,r){const e=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:r.behavior,left:s.left-e.left-(r.left||0),top:s.top-e.top-(r.top||0)}}const mp=()=>({left:window.scrollX,top:window.scrollY});function db(t){let r;if("el"in t){const e=t.el,s=typeof e=="string"&&e.startsWith("#"),h=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!h)return;r=gb(h,t)}else r=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function Hd(t,r){return(history.state?history.state.position-r:-1)+t}const Rv=new Map;function yb(t,r){Rv.set(t,r)}function wb(t){const r=Rv.get(t);return Rv.delete(t),r}let mb=()=>location.protocol+"//"+location.host;function y0(t,r){const{pathname:e,search:s,hash:h}=r,g=t.indexOf("#");if(g>-1){let _=h.includes(t.slice(g))?t.slice(g).length:1,k=h.slice(_);return k[0]!=="/"&&(k="/"+k),Ud(k,"")}return Ud(e,t)+s+h}function $b(t,r,e,s){let h=[],g=[],b=null;const _=({state:D})=>{const H=y0(t,location),ae=e.value,se=r.value;let ie=0;if(D){if(e.value=H,r.value=D,b&&b===ae){b=null;return}ie=se?D.position-se.position:0}else s(H);h.forEach(de=>{de(e.value,ae,{delta:ie,type:Qc.pop,direction:ie?ie>0?Ic.forward:Ic.back:Ic.unknown})})};function k(){b=e.value}function S(D){h.push(D);const H=()=>{const ae=h.indexOf(D);ae>-1&&h.splice(ae,1)};return g.push(H),H}function E(){const{history:D}=window;D.state&&D.replaceState(Tr({},D.state,{scroll:mp()}),"")}function O(){for(const D of g)D();g=[],window.removeEventListener("popstate",_),window.removeEventListener("beforeunload",E)}return window.addEventListener("popstate",_),window.addEventListener("beforeunload",E,{passive:!0}),{pauseListeners:k,listen:S,destroy:O}}function qd(t,r,e,s=!1,h=!1){return{back:t,current:r,forward:e,replaced:s,position:window.history.length,scroll:h?mp():null}}function xb(t){const{history:r,location:e}=window,s={value:y0(t,e)},h={value:r.state};h.value||g(s.value,{back:null,current:s.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function g(k,S,E){const O=t.indexOf("#"),D=O>-1?(e.host&&document.querySelector("base")?t:t.slice(O))+k:mb()+t+k;try{r[E?"replaceState":"pushState"](S,"",D),h.value=S}catch(H){console.error(H),e[E?"replace":"assign"](D)}}function b(k,S){const E=Tr({},r.state,qd(h.value.back,k,h.value.forward,!0),S,{position:h.value.position});g(k,E,!0),s.value=k}function _(k,S){const E=Tr({},h.value,r.state,{forward:k,scroll:mp()});g(E.current,E,!0);const O=Tr({},qd(s.value,k,null),{position:E.position+1},S);g(k,O,!1),s.value=k}return{location:s,state:h,push:_,replace:b}}function bb(t){t=hb(t);const r=xb(t),e=$b(t,r.state,r.location,r.replace);function s(g,b=!0){b||e.pauseListeners(),history.go(g)}const h=Tr({location:"",base:t,go:s,createHref:vb.bind(null,t)},r,e);return Object.defineProperty(h,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(h,"state",{enumerable:!0,get:()=>r.state.value}),h}function Ab(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),bb(t)}function Cb(t){return typeof t=="string"||t&&typeof t=="object"}function w0(t){return typeof t=="string"||typeof t=="symbol"}const m0=Symbol("");var Vd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Vd||(Vd={}));function dc(t,r){return Tr(new Error,{type:t,[m0]:!0},r)}function lo(t,r){return t instanceof Error&&m0 in t&&(r==null||!!(t.type&r))}const zd="[^/]+?",_b={sensitive:!1,strict:!1,start:!0,end:!0},Pb=/[.+*?^${}()[\]/\\]/g;function kb(t,r){const e=Tr({},_b,r),s=[];let h=e.start?"^":"";const g=[];for(const S of t){const E=S.length?[]:[90];e.strict&&!S.length&&(h+="/");for(let O=0;O<S.length;O++){const D=S[O];let H=40+(e.sensitive?.25:0);if(D.type===0)O||(h+="/"),h+=D.value.replace(Pb,"\\$&"),H+=40;else if(D.type===1){const{value:ae,repeatable:se,optional:ie,regexp:de}=D;g.push({name:ae,repeatable:se,optional:ie});const W=de||zd;if(W!==zd){H+=10;try{new RegExp(`(${W})`)}catch(Q){throw new Error(`Invalid custom RegExp for param "${ae}" (${W}): `+Q.message)}}let K=se?`((?:${W})(?:/(?:${W}))*)`:`(${W})`;O||(K=ie&&S.length<2?`(?:/${K})`:"/"+K),ie&&(K+="?"),h+=K,H+=20,ie&&(H+=-8),se&&(H+=-20),W===".*"&&(H+=-50)}E.push(H)}s.push(E)}if(e.strict&&e.end){const S=s.length-1;s[S][s[S].length-1]+=.7000000000000001}e.strict||(h+="/?"),e.end?h+="$":e.strict&&(h+="(?:/|$)");const b=new RegExp(h,e.sensitive?"":"i");function _(S){const E=S.match(b),O={};if(!E)return null;for(let D=1;D<E.length;D++){const H=E[D]||"",ae=g[D-1];O[ae.name]=H&&ae.repeatable?H.split("/"):H}return O}function k(S){let E="",O=!1;for(const D of t){(!O||!E.endsWith("/"))&&(E+="/"),O=!1;for(const H of D)if(H.type===0)E+=H.value;else if(H.type===1){const{value:ae,repeatable:se,optional:ie}=H,de=ae in S?S[ae]:"";if(Du(de)&&!se)throw new Error(`Provided param "${ae}" is an array but it is not repeatable (* or + modifiers)`);const W=Du(de)?de.join("/"):de;if(!W)if(ie)D.length<2&&(E.endsWith("/")?E=E.slice(0,-1):O=!0);else throw new Error(`Missing required param "${ae}"`);E+=W}}return E||"/"}return{re:b,score:s,keys:g,parse:_,stringify:k}}function Eb(t,r){let e=0;for(;e<t.length&&e<r.length;){const s=r[e]-t[e];if(s)return s;e++}return t.length<r.length?t.length===1&&t[0]===80?-1:1:t.length>r.length?r.length===1&&r[0]===80?1:-1:0}function $0(t,r){let e=0;const s=t.score,h=r.score;for(;e<s.length&&e<h.length;){const g=Eb(s[e],h[e]);if(g)return g;e++}if(Math.abs(h.length-s.length)===1){if(Kd(s))return 1;if(Kd(h))return-1}return h.length-s.length}function Kd(t){const r=t[t.length-1];return t.length>0&&r[r.length-1]<0}const Mb={type:0,value:""},Sb=/[a-zA-Z0-9_]/;function Nb(t){if(!t)return[[]];if(t==="/")return[[Mb]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function r(H){throw new Error(`ERR (${e})/"${S}": ${H}`)}let e=0,s=e;const h=[];let g;function b(){g&&h.push(g),g=[]}let _=0,k,S="",E="";function O(){S&&(e===0?g.push({type:0,value:S}):e===1||e===2||e===3?(g.length>1&&(k==="*"||k==="+")&&r(`A repeatable param (${S}) must be alone in its segment. eg: '/:ids+.`),g.push({type:1,value:S,regexp:E,repeatable:k==="*"||k==="+",optional:k==="*"||k==="?"})):r("Invalid state to consume buffer"),S="")}function D(){S+=k}for(;_<t.length;){if(k=t[_++],k==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:k==="/"?(S&&O(),b()):k===":"?(O(),e=1):D();break;case 4:D(),e=s;break;case 1:k==="("?e=2:Sb.test(k)?D():(O(),e=0,k!=="*"&&k!=="?"&&k!=="+"&&_--);break;case 2:k===")"?E[E.length-1]=="\\"?E=E.slice(0,-1)+k:e=3:E+=k;break;case 3:O(),e=0,k!=="*"&&k!=="?"&&k!=="+"&&_--,E="";break;default:r("Unknown state");break}}return e===2&&r(`Unfinished custom RegExp for param "${S}"`),O(),b(),h}function Tb(t,r,e){const s=kb(Nb(t.path),e),h=Tr(s,{record:t,parent:r,children:[],alias:[]});return r&&!h.record.aliasOf==!r.record.aliasOf&&r.children.push(h),h}function Ob(t,r){const e=[],s=new Map;r=Qd({strict:!1,end:!0,sensitive:!1},r);function h(O){return s.get(O)}function g(O,D,H){const ae=!H,se=Gd(O);se.aliasOf=H&&H.record;const ie=Qd(r,O),de=[se];if("alias"in O){const Q=typeof O.alias=="string"?[O.alias]:O.alias;for(const X of Q)de.push(Gd(Tr({},se,{components:H?H.record.components:se.components,path:X,aliasOf:H?H.record:se})))}let W,K;for(const Q of de){const{path:X}=Q;if(D&&X[0]!=="/"){const ee=D.record.path,Y=ee[ee.length-1]==="/"?"":"/";Q.path=D.record.path+(X&&Y+X)}if(W=Tb(Q,D,ie),H?H.alias.push(W):(K=K||W,K!==W&&K.alias.push(W),ae&&O.name&&!Jd(W)&&b(O.name)),x0(W)&&k(W),se.children){const ee=se.children;for(let Y=0;Y<ee.length;Y++)g(ee[Y],W,H&&H.children[Y])}H=H||W}return K?()=>{b(K)}:Rc}function b(O){if(w0(O)){const D=s.get(O);D&&(s.delete(O),e.splice(e.indexOf(D),1),D.children.forEach(b),D.alias.forEach(b))}else{const D=e.indexOf(O);D>-1&&(e.splice(D,1),O.record.name&&s.delete(O.record.name),O.children.forEach(b),O.alias.forEach(b))}}function _(){return e}function k(O){const D=Ib(O,e);e.splice(D,0,O),O.record.name&&!Jd(O)&&s.set(O.record.name,O)}function S(O,D){let H,ae={},se,ie;if("name"in O&&O.name){if(H=s.get(O.name),!H)throw dc(1,{location:O});ie=H.record.name,ae=Tr(Wd(D.params,H.keys.filter(K=>!K.optional).concat(H.parent?H.parent.keys.filter(K=>K.optional):[]).map(K=>K.name)),O.params&&Wd(O.params,H.keys.map(K=>K.name))),se=H.stringify(ae)}else if(O.path!=null)se=O.path,H=e.find(K=>K.re.test(se)),H&&(ae=H.parse(se),ie=H.record.name);else{if(H=D.name?s.get(D.name):e.find(K=>K.re.test(D.path)),!H)throw dc(1,{location:O,currentLocation:D});ie=H.record.name,ae=Tr({},D.params,O.params),se=H.stringify(ae)}const de=[];let W=H;for(;W;)de.unshift(W.record),W=W.parent;return{name:ie,path:se,params:ae,matched:de,meta:Rb(de)}}t.forEach(O=>g(O));function E(){e.length=0,s.clear()}return{addRoute:g,resolve:S,removeRoute:b,clearRoutes:E,getRoutes:_,getRecordMatcher:h}}function Wd(t,r){const e={};for(const s of r)s in t&&(e[s]=t[s]);return e}function Gd(t){const r={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Fb(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function Fb(t){const r={},e=t.props||!1;if("component"in t)r.default=e;else for(const s in t.components)r[s]=typeof e=="object"?e[s]:e;return r}function Jd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Rb(t){return t.reduce((r,e)=>Tr(r,e.meta),{})}function Qd(t,r){const e={};for(const s in t)e[s]=s in r?r[s]:t[s];return e}function Ib(t,r){let e=0,s=r.length;for(;e!==s;){const g=e+s>>1;$0(t,r[g])<0?s=g:e=g+1}const h=jb(t);return h&&(s=r.lastIndexOf(h,s-1)),s}function jb(t){let r=t;for(;r=r.parent;)if(x0(r)&&$0(t,r)===0)return r}function x0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Db(t){const r={};if(t===""||t==="?")return r;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let h=0;h<s.length;++h){const g=s[h].replace(h0," "),b=g.indexOf("="),_=Jc(b<0?g:g.slice(0,b)),k=b<0?null:Jc(g.slice(b+1));if(_ in r){let S=r[_];Du(S)||(S=r[_]=[S]),S.push(k)}else r[_]=k}return r}function Zd(t){let r="";for(let e in t){const s=t[e];if(e=sb(e),s==null){s!==void 0&&(r+=(r.length?"&":"")+e);continue}(Du(s)?s.map(g=>g&&Fv(g)):[s&&Fv(s)]).forEach(g=>{g!==void 0&&(r+=(r.length?"&":"")+e,g!=null&&(r+="="+g))})}return r}function Lb(t){const r={};for(const e in t){const s=t[e];s!==void 0&&(r[e]=Du(s)?s.map(h=>h==null?null:""+h):s==null?s:""+s)}return r}const Ub=Symbol(""),Xd=Symbol(""),$p=Symbol(""),b0=Symbol(""),Iv=Symbol("");function mc(){let t=[];function r(s){return t.push(s),()=>{const h=t.indexOf(s);h>-1&&t.splice(h,1)}}function e(){t=[]}return{add:r,list:()=>t.slice(),reset:e}}function Eo(t,r,e,s,h,g=b=>b()){const b=s&&(s.enterCallbacks[h]=s.enterCallbacks[h]||[]);return()=>new Promise((_,k)=>{const S=D=>{D===!1?k(dc(4,{from:e,to:r})):D instanceof Error?k(D):Cb(D)?k(dc(2,{from:r,to:D})):(b&&s.enterCallbacks[h]===b&&typeof D=="function"&&b.push(D),_())},E=g(()=>t.call(s&&s.instances[h],r,e,S));let O=Promise.resolve(E);t.length<3&&(O=O.then(S)),O.catch(D=>k(D))})}function Vp(t,r,e,s,h=g=>g()){const g=[];for(const b of t)for(const _ in b.components){let k=b.components[_];if(!(r!=="beforeRouteEnter"&&!b.instances[_]))if(f0(k)){const E=(k.__vccOpts||k)[r];E&&g.push(Eo(E,e,s,b,_,h))}else{let S=k();g.push(()=>S.then(E=>{if(!E)throw new Error(`Couldn't resolve component "${_}" at "${b.path}"`);const O=Kx(E)?E.default:E;b.mods[_]=E,b.components[_]=O;const H=(O.__vccOpts||O)[r];return H&&Eo(H,e,s,b,_,h)()}))}}return g}function Yd(t){const r=eo($p),e=eo(b0),s=La(()=>{const k=Yu(t.to);return r.resolve(k)}),h=La(()=>{const{matched:k}=s.value,{length:S}=k,E=k[S-1],O=e.matched;if(!E||!O.length)return-1;const D=O.findIndex(gc.bind(null,E));if(D>-1)return D;const H=ey(k[S-2]);return S>1&&ey(E)===H&&O[O.length-1].path!==H?O.findIndex(gc.bind(null,k[S-2])):D}),g=La(()=>h.value>-1&&Vb(e.params,s.value.params)),b=La(()=>h.value>-1&&h.value===e.matched.length-1&&d0(e.params,s.value.params));function _(k={}){return qb(k)?r[Yu(t.replace)?"replace":"push"](Yu(t.to)).catch(Rc):Promise.resolve()}return{route:s,href:La(()=>s.value.href),isActive:g,isExactActive:b,navigate:_}}const Bb=Mf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Yd,setup(t,{slots:r}){const e=hp(Yd(t)),{options:s}=eo($p),h=La(()=>({[ty(t.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[ty(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const g=r.default&&r.default(e);return t.custom?g:qu("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:h.value},g)}}}),Hb=Bb;function qb(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const r=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return t.preventDefault&&t.preventDefault(),!0}}function Vb(t,r){for(const e in r){const s=r[e],h=t[e];if(typeof s=="string"){if(s!==h)return!1}else if(!Du(h)||h.length!==s.length||s.some((g,b)=>g!==h[b]))return!1}return!0}function ey(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ty=(t,r,e)=>t??r??e,zb=Mf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:r,slots:e}){const s=eo(Iv),h=La(()=>t.route||s.value),g=eo(Xd,0),b=La(()=>{let S=Yu(g);const{matched:E}=h.value;let O;for(;(O=E[S])&&!O.components;)S++;return S}),_=La(()=>h.value.matched[b.value]);$h(Xd,La(()=>b.value+1)),$h(Ub,_),$h(Iv,h);const k=vc();return Gf(()=>[k.value,_.value,t.name],([S,E,O],[D,H,ae])=>{E&&(E.instances[O]=S,H&&H!==E&&S&&S===D&&(E.leaveGuards.size||(E.leaveGuards=H.leaveGuards),E.updateGuards.size||(E.updateGuards=H.updateGuards))),S&&E&&(!H||!gc(E,H)||!D)&&(E.enterCallbacks[O]||[]).forEach(se=>se(S))},{flush:"post"}),()=>{const S=h.value,E=t.name,O=_.value,D=O&&O.components[E];if(!D)return ry(e.default,{Component:D,route:S});const H=O.props[E],ae=H?H===!0?S.params:typeof H=="function"?H(S):H:null,ie=qu(D,Tr({},ae,r,{onVnodeUnmounted:de=>{de.component.isUnmounted&&(O.instances[E]=null)},ref:k}));return ry(e.default,{Component:ie,route:S})||ie}}});function ry(t,r){if(!t)return null;const e=t(r);return e.length===1?e[0]:e}const Kb=zb;function Wb(t){const r=Ob(t.routes,t),e=t.parseQuery||Db,s=t.stringifyQuery||Zd,h=t.history,g=mc(),b=mc(),_=mc(),k=bw($o);let S=$o;Bf&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const E=Hp.bind(null,ye=>""+ye),O=Hp.bind(null,ab),D=Hp.bind(null,Jc);function H(ye,qe){let Te,et;return w0(ye)?(Te=r.getRecordMatcher(ye),et=qe):et=ye,r.addRoute(et,Te)}function ae(ye){const qe=r.getRecordMatcher(ye);qe&&r.removeRoute(qe)}function se(){return r.getRoutes().map(ye=>ye.record)}function ie(ye){return!!r.getRecordMatcher(ye)}function de(ye,qe){if(qe=Tr({},qe||k.value),typeof ye=="string"){const Z=qp(e,ye,qe.path),oe=r.resolve({path:Z.path},qe),Pe=h.createHref(Z.fullPath);return Tr(Z,oe,{params:D(oe.params),hash:Jc(Z.hash),redirectedFrom:void 0,href:Pe})}let Te;if(ye.path!=null)Te=Tr({},ye,{path:qp(e,ye.path,qe.path).path});else{const Z=Tr({},ye.params);for(const oe in Z)Z[oe]==null&&delete Z[oe];Te=Tr({},ye,{params:O(Z)}),qe.params=O(qe.params)}const et=r.resolve(Te,qe),ct=ye.hash||"";et.params=E(D(et.params));const At=ub(s,Tr({},ye,{hash:rb(ct),path:et.path})),J=h.createHref(At);return Tr({fullPath:At,hash:ct,query:s===Zd?Lb(ye.query):ye.query||{}},et,{redirectedFrom:void 0,href:J})}function W(ye){return typeof ye=="string"?qp(e,ye,k.value.path):Tr({},ye)}function K(ye,qe){if(S!==ye)return dc(8,{from:qe,to:ye})}function Q(ye){return Y(ye)}function X(ye){return Q(Tr(W(ye),{replace:!0}))}function ee(ye){const qe=ye.matched[ye.matched.length-1];if(qe&&qe.redirect){const{redirect:Te}=qe;let et=typeof Te=="function"?Te(ye):Te;return typeof et=="string"&&(et=et.includes("?")||et.includes("#")?et=W(et):{path:et},et.params={}),Tr({query:ye.query,hash:ye.hash,params:et.path!=null?{}:ye.params},et)}}function Y(ye,qe){const Te=S=de(ye),et=k.value,ct=ye.state,At=ye.force,J=ye.replace===!0,Z=ee(Te);if(Z)return Y(Tr(W(Z),{state:typeof Z=="object"?Tr({},ct,Z.state):ct,force:At,replace:J}),qe||Te);const oe=Te;oe.redirectedFrom=qe;let Pe;return!At&&ob(s,et,Te)&&(Pe=dc(16,{to:oe,from:et}),nr(et,et,!0,!1)),(Pe?Promise.resolve(Pe):we(oe,et)).catch(ce=>lo(ce)?lo(ce,2)?ce:Ht(ce):Ye(ce,oe,et)).then(ce=>{if(ce){if(lo(ce,2))return Y(Tr({replace:J},W(ce.to),{state:typeof ce.to=="object"?Tr({},ct,ce.to.state):ct,force:At}),qe||oe)}else ce=be(oe,et,!0,J,ct);return _e(oe,et,ce),ce})}function fe(ye,qe){const Te=K(ye,qe);return Te?Promise.reject(Te):Promise.resolve()}function le(ye){const qe=qt.values().next().value;return qe&&typeof qe.runWithContext=="function"?qe.runWithContext(ye):ye()}function we(ye,qe){let Te;const[et,ct,At]=Gb(ye,qe);Te=Vp(et.reverse(),"beforeRouteLeave",ye,qe);for(const Z of et)Z.leaveGuards.forEach(oe=>{Te.push(Eo(oe,ye,qe))});const J=fe.bind(null,ye,qe);return Te.push(J),Vt(Te).then(()=>{Te=[];for(const Z of g.list())Te.push(Eo(Z,ye,qe));return Te.push(J),Vt(Te)}).then(()=>{Te=Vp(ct,"beforeRouteUpdate",ye,qe);for(const Z of ct)Z.updateGuards.forEach(oe=>{Te.push(Eo(oe,ye,qe))});return Te.push(J),Vt(Te)}).then(()=>{Te=[];for(const Z of At)if(Z.beforeEnter)if(Du(Z.beforeEnter))for(const oe of Z.beforeEnter)Te.push(Eo(oe,ye,qe));else Te.push(Eo(Z.beforeEnter,ye,qe));return Te.push(J),Vt(Te)}).then(()=>(ye.matched.forEach(Z=>Z.enterCallbacks={}),Te=Vp(At,"beforeRouteEnter",ye,qe,le),Te.push(J),Vt(Te))).then(()=>{Te=[];for(const Z of b.list())Te.push(Eo(Z,ye,qe));return Te.push(J),Vt(Te)}).catch(Z=>lo(Z,8)?Z:Promise.reject(Z))}function _e(ye,qe,Te){_.list().forEach(et=>le(()=>et(ye,qe,Te)))}function be(ye,qe,Te,et,ct){const At=K(ye,qe);if(At)return At;const J=qe===$o,Z=Bf?history.state:{};Te&&(et||J?h.replace(ye.fullPath,Tr({scroll:J&&Z&&Z.scroll},ct)):h.push(ye.fullPath,ct)),k.value=ye,nr(ye,qe,Te,J),Ht()}let nt;function mt(){nt||(nt=h.listen((ye,qe,Te)=>{if(!_r.listening)return;const et=de(ye),ct=ee(et);if(ct){Y(Tr(ct,{replace:!0}),et).catch(Rc);return}S=et;const At=k.value;Bf&&yb(Hd(At.fullPath,Te.delta),mp()),we(et,At).catch(J=>lo(J,12)?J:lo(J,2)?(Y(J.to,et).then(Z=>{lo(Z,20)&&!Te.delta&&Te.type===Qc.pop&&h.go(-1,!1)}).catch(Rc),Promise.reject()):(Te.delta&&h.go(-Te.delta,!1),Ye(J,et,At))).then(J=>{J=J||be(et,At,!1),J&&(Te.delta&&!lo(J,8)?h.go(-Te.delta,!1):Te.type===Qc.pop&&lo(J,20)&&h.go(-1,!1)),_e(et,At,J)}).catch(Rc)}))}let sr=mc(),xt=mc(),wt;function Ye(ye,qe,Te){Ht(ye);const et=xt.list();return et.length?et.forEach(ct=>ct(ye,qe,Te)):console.error(ye),Promise.reject(ye)}function bt(){return wt&&k.value!==$o?Promise.resolve():new Promise((ye,qe)=>{sr.add([ye,qe])})}function Ht(ye){return wt||(wt=!ye,mt(),sr.list().forEach(([qe,Te])=>ye?Te(ye):qe()),sr.reset()),ye}function nr(ye,qe,Te,et){const{scrollBehavior:ct}=t;if(!Bf||!ct)return Promise.resolve();const At=!Te&&wb(Hd(ye.fullPath,0))||(et||!Te)&&history.state&&history.state.scroll||null;return vp().then(()=>ct(ye,qe,At)).then(J=>J&&db(J)).catch(J=>Ye(J,ye,qe))}const vt=ye=>h.go(ye);let Cr;const qt=new Set,_r={currentRoute:k,listening:!0,addRoute:H,removeRoute:ae,clearRoutes:r.clearRoutes,hasRoute:ie,getRoutes:se,resolve:de,options:t,push:Q,replace:X,go:vt,back:()=>vt(-1),forward:()=>vt(1),beforeEach:g.add,beforeResolve:b.add,afterEach:_.add,onError:xt.add,isReady:bt,install(ye){const qe=this;ye.component("RouterLink",Hb),ye.component("RouterView",Kb),ye.config.globalProperties.$router=qe,Object.defineProperty(ye.config.globalProperties,"$route",{enumerable:!0,get:()=>Yu(k)}),Bf&&!Cr&&k.value===$o&&(Cr=!0,Q(h.location).catch(ct=>{}));const Te={};for(const ct in $o)Object.defineProperty(Te,ct,{get:()=>k.value[ct],enumerable:!0});ye.provide($p,qe),ye.provide(b0,xw(Te)),ye.provide(Iv,k);const et=ye.unmount;qt.add(ye),ye.unmount=function(){qt.delete(ye),qt.size<1&&(S=$o,nt&&nt(),nt=null,k.value=$o,Cr=!1,wt=!1),et()}}};function Vt(ye){return ye.reduce((qe,Te)=>qe.then(()=>le(Te)),Promise.resolve())}return _r}function Gb(t,r){const e=[],s=[],h=[],g=Math.max(r.matched.length,t.matched.length);for(let b=0;b<g;b++){const _=r.matched[b];_&&(t.matched.find(S=>gc(S,_))?s.push(_):e.push(_));const k=t.matched[b];k&&(r.matched.find(S=>gc(S,k))||h.push(k))}return[e,s,h]}function Jb(){return eo($p)}function Qb(t){return iw()?(Sm(t),!0):!1}function zg(t){return typeof t=="function"?t():Yu(t)}const Zb=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Xb=Object.prototype.toString,Yb=t=>Xb.call(t)==="[object Object]",e1=()=>{};function t1(t,r){function e(...s){return new Promise((h,g)=>{Promise.resolve(t(()=>r.apply(this,s),{fn:r,thisArg:this,args:s})).then(h).catch(g)})}return e}const A0=t=>t();function r1(t=A0){const r=vc(!0);function e(){r.value=!1}function s(){r.value=!0}const h=(...g)=>{r.value&&t(...g)};return{isActive:Og(r),pause:e,resume:s,eventFilter:h}}function s1(t){return Hg()}function n1(t,r,e={}){const{eventFilter:s=A0,...h}=e;return Gf(t,t1(s,r),h)}function a1(t,r,e={}){const{eventFilter:s,...h}=e,{eventFilter:g,pause:b,resume:_,isActive:k}=r1(s);return{stop:n1(t,r,{...h,eventFilter:g}),pause:b,resume:_,isActive:k}}function i1(t,r=!0,e){s1()?jg(t,e):r?t():vp(t)}const jv=Zb?window:void 0;function l1(t){var r;const e=zg(t);return(r=e==null?void 0:e.$el)!=null?r:e}function sy(...t){let r,e,s,h;if(typeof t[0]=="string"||Array.isArray(t[0])?([e,s,h]=t,r=jv):[r,e,s,h]=t,!r)return e1;Array.isArray(e)||(e=[e]),Array.isArray(s)||(s=[s]);const g=[],b=()=>{g.forEach(E=>E()),g.length=0},_=(E,O,D,H)=>(E.addEventListener(O,D,H),()=>E.removeEventListener(O,D,H)),k=Gf(()=>[l1(r),zg(h)],([E,O])=>{if(b(),!E)return;const D=Yb(O)?{...O}:O;g.push(...e.flatMap(H=>s.map(ae=>_(E,H,ae,D))))},{immediate:!0,flush:"post"}),S=()=>{k(),b()};return Qb(S),S}const ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ih="__vueuse_ssr_handlers__",u1=o1();function o1(){return ih in ah||(ah[ih]=ah[ih]||{}),ah[ih]}function f1(t,r){return u1[t]||r}function c1(t){return t==null?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":typeof t=="boolean"?"boolean":typeof t=="string"?"string":typeof t=="object"?"object":Number.isNaN(t)?"any":"number"}const h1={boolean:{read:t=>t==="true",write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}},ny="vueuse-storage";function p1(t,r,e,s={}){var h;const{flush:g="pre",deep:b=!0,listenToStorageChanges:_=!0,writeDefaults:k=!0,mergeDefaults:S=!1,shallow:E,window:O=jv,eventFilter:D,onError:H=we=>{console.error(we)},initOnMounted:ae}=s,se=(E?bw:vc)(r);if(!e)try{e=f1("getDefaultStorage",()=>{var we;return(we=jv)==null?void 0:we.localStorage})()}catch(we){H(we)}if(!e)return se;const ie=zg(r),de=c1(ie),W=(h=s.serializer)!=null?h:h1[de],{pause:K,resume:Q}=a1(se,()=>ee(se.value),{flush:g,deep:b,eventFilter:D});O&&_&&i1(()=>{e instanceof Storage?sy(O,"storage",fe):sy(O,ny,le),ae&&fe()}),ae||fe();function X(we,_e){if(O){const be={key:t,oldValue:we,newValue:_e,storageArea:e};O.dispatchEvent(e instanceof Storage?new StorageEvent("storage",be):new CustomEvent(ny,{detail:be}))}}function ee(we){try{const _e=e.getItem(t);if(we==null)X(_e,null),e.removeItem(t);else{const be=W.write(we);_e!==be&&(e.setItem(t,be),X(_e,be))}}catch(_e){H(_e)}}function Y(we){const _e=we?we.newValue:e.getItem(t);if(_e==null)return k&&ie!=null&&e.setItem(t,W.write(ie)),ie;if(!we&&S){const be=W.read(_e);return typeof S=="function"?S(be,ie):de==="object"&&!Array.isArray(be)?{...ie,...be}:be}else return typeof _e!="string"?_e:W.read(_e)}function fe(we){if(!(we&&we.storageArea!==e)){if(we&&we.key==null){se.value=ie;return}if(!(we&&we.key!==t)){K();try{(we==null?void 0:we.newValue)!==W.write(se.value)&&(se.value=Y(we))}catch(_e){H(_e)}finally{we?vp(Q):Q()}}}}function le(we){fe(we.detail)}return se}function jc(){return jc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},jc.apply(this,arguments)}var v1=13,g1=9,d1=8,y1=89,lh=90,w1=77,ay=57,iy=219,ly=222,uy=192,m1=27,oy=100,$1=3e3,x1=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),zp=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),b1=Mf({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),s=window.getComputedStyle(r);this.$nextTick(function(){var h="border-top-left-radius",g="border-bottom-left-radius";if(e){e.style[h]=s[h],e.style[g]=s[g],r.style[h]="0",r.style[g]="0";var b=["background-color","margin-top","padding-top","font-family","font-size","line-height"];b.forEach(function(_){e.style[_]=s[_]}),e.style["margin-bottom"]="-"+s["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,s=r.selectionStart,h=r.selectionEnd;this._recordChange({value:e,selectionStart:s,selectionEnd:h})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,s=this.history.stack[this.history.offset];s&&e&&(this.history.stack[this.history.offset]=jc({},s,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var s=this.history,h=s.stack,g=s.offset;if(h.length&&g>-1){this.history.stack=h.slice(0,g+1);var b=this.history.stack.length;if(b>oy){var _=b-oy;this.history.stack=h.slice(_,b),this.history.offset=Math.max(this.history.offset-_,0)}}var k=Date.now();if(e){var S=this.history.stack[this.history.offset];if(S&&k-S.timestamp<$1){var E,O,D=/[^a-z0-9]([a-z0-9]+)$/i,H=(E=this._getLines(S.value,S.selectionStart).pop())===null||E===void 0?void 0:E.match(D),ae=(O=this._getLines(r.value,r.selectionStart).pop())===null||O===void 0?void 0:O.match(D);if(H&&ae&&ae[1].startsWith(H[1])){this.history.stack[this.history.offset]=jc({},r,{timestamp:k});return}}}this.history.stack.push(jc({},r,{timestamp:k})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,s=e.value,h=e.selectionStart,g=e.selectionEnd;this._recordChange({value:s,selectionStart:h,selectionEnd:g},!0),this.$emit("update:modelValue",s)},_undoEdit:function(){var r=this.history,e=r.stack,s=r.offset,h=e[s-1];h&&(this._updateInput(h),this.history.offset=Math.max(s-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,s=r.offset,h=e[s+1];h&&(this._updateInput(h),this.history.offset=Math.min(s+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,s=this.insertSpaces,h=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===m1&&(r.target.blur(),this.$emit("blur",r));var g=r.target,b=g.value,_=g.selectionStart,k=g.selectionEnd,S=(s?" ":"	").repeat(e);if(r.keyCode===g1&&!h&&this.capture)if(r.preventDefault(),r.shiftKey){var E=this._getLines(b,_),O=E.length-1,D=this._getLines(b,k).length-1,H=b.split(`
`).map(function(be,nt){return nt>=O&&nt<=D&&be.startsWith(S)?be.substring(S.length):be}).join(`
`);if(b!==H){var ae=E[O];this._applyEdits({value:H,selectionStart:ae.startsWith(S)?_-S.length:_,selectionEnd:k-(b.length-H.length)})}}else if(_!==k){var se=this._getLines(b,_),ie=se.length-1,de=this._getLines(b,k).length-1,W=se[ie];this._applyEdits({value:b.split(`
`).map(function(be,nt){return nt>=ie&&nt<=de?S+be:be}).join(`
`),selectionStart:/\S/.test(W)?_+S.length:_,selectionEnd:k+S.length*(de-ie+1)})}else{var K=_+S.length;this._applyEdits({value:b.substring(0,_)+S+b.substring(k),selectionStart:K,selectionEnd:K})}else if(r.keyCode===d1){var Q=_!==k,X=b.substring(0,_);if(X.endsWith(S)&&!Q){r.preventDefault();var ee=_-S.length;this._applyEdits({value:b.substring(0,_-S.length)+b.substring(k),selectionStart:ee,selectionEnd:ee})}}else if(r.keyCode===v1){if(_===k){var Y=this._getLines(b,_).pop(),fe=Y==null?void 0:Y.match(/^\s+/);if(fe&&fe[0]){r.preventDefault();var le=`
`+fe[0],we=_+le.length;this._applyEdits({value:b.substring(0,_)+le+b.substring(k),selectionStart:we,selectionEnd:we})}}}else if(r.keyCode===ay||r.keyCode===iy||r.keyCode===ly||r.keyCode===uy){var _e;r.keyCode===ay&&r.shiftKey?_e=["(",")"]:r.keyCode===iy?r.shiftKey?_e=["{","}"]:_e=["[","]"]:r.keyCode===ly?r.shiftKey?_e=['"','"']:_e=["'","'"]:r.keyCode===uy&&!r.shiftKey&&(_e=["`","`"]),_!==k&&_e&&(r.preventDefault(),this._applyEdits({value:b.substring(0,_)+_e[0]+b.substring(_,k)+_e[1]+b.substring(k),selectionStart:_,selectionEnd:k+2}))}else(zp?r.metaKey&&r.keyCode===lh:r.ctrlKey&&r.keyCode===lh)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(zp?r.metaKey&&r.keyCode===lh&&r.shiftKey:x1?r.ctrlKey&&r.keyCode===y1:r.ctrlKey&&r.keyCode===lh&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===w1&&r.ctrlKey&&(!zp||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=qu("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),s=qu("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(_,k){return qu("div",{class:"prism-editor__line-number token comment"},""+ ++k)})]),h=qu("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(k){r.$emit("click",k)},onKeyup:function(k){r.$emit("keyup",k)},onFocus:function(k){r.$emit("focus",k)},onBlur:function(k){r.$emit("blur",k)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),g=qu("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),b=qu("div",{class:"prism-editor__container"},[h,g]);return qu("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&s,b])}}),Wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function C1(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var h=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,h.get?h:{enumerable:!0,get:function(){return t[s]}})}),e}var _1={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(s){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,g=0,b={},_={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function W(K){return K instanceof k?new k(K.type,W(K.content),K.alias):Array.isArray(K)?K.map(W):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(W){return Object.prototype.toString.call(W).slice(8,-1)},objId:function(W){return W.__id||Object.defineProperty(W,"__id",{value:++g}),W.__id},clone:function W(K,Q){Q=Q||{};var X,ee;switch(_.util.type(K)){case"Object":if(ee=_.util.objId(K),Q[ee])return Q[ee];X={},Q[ee]=X;for(var Y in K)K.hasOwnProperty(Y)&&(X[Y]=W(K[Y],Q));return X;case"Array":return ee=_.util.objId(K),Q[ee]?Q[ee]:(X=[],Q[ee]=X,K.forEach(function(fe,le){X[le]=W(fe,Q)}),X);default:return K}},getLanguage:function(W){for(;W;){var K=h.exec(W.className);if(K)return K[1].toLowerCase();W=W.parentElement}return"none"},setLanguage:function(W,K){W.className=W.className.replace(RegExp(h,"gi"),""),W.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var W=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(W){var K=document.getElementsByTagName("script");for(var Q in K)if(K[Q].src==W)return K[Q]}return null}},isActive:function(W,K,Q){for(var X="no-"+K;W;){var ee=W.classList;if(ee.contains(K))return!0;if(ee.contains(X))return!1;W=W.parentElement}return!!Q}},languages:{plain:b,plaintext:b,text:b,txt:b,extend:function(W,K){var Q=_.util.clone(_.languages[W]);for(var X in K)Q[X]=K[X];return Q},insertBefore:function(W,K,Q,X){X=X||_.languages;var ee=X[W],Y={};for(var fe in ee)if(ee.hasOwnProperty(fe)){if(fe==K)for(var le in Q)Q.hasOwnProperty(le)&&(Y[le]=Q[le]);Q.hasOwnProperty(fe)||(Y[fe]=ee[fe])}var we=X[W];return X[W]=Y,_.languages.DFS(_.languages,function(_e,be){be===we&&_e!=W&&(this[_e]=Y)}),Y},DFS:function W(K,Q,X,ee){ee=ee||{};var Y=_.util.objId;for(var fe in K)if(K.hasOwnProperty(fe)){Q.call(K,fe,K[fe],X||fe);var le=K[fe],we=_.util.type(le);we==="Object"&&!ee[Y(le)]?(ee[Y(le)]=!0,W(le,Q,null,ee)):we==="Array"&&!ee[Y(le)]&&(ee[Y(le)]=!0,W(le,Q,fe,ee))}}},plugins:{},highlightAll:function(W,K){_.highlightAllUnder(document,W,K)},highlightAllUnder:function(W,K,Q){var X={callback:Q,container:W,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};_.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),_.hooks.run("before-all-elements-highlight",X);for(var ee=0,Y;Y=X.elements[ee++];)_.highlightElement(Y,K===!0,X.callback)},highlightElement:function(W,K,Q){var X=_.util.getLanguage(W),ee=_.languages[X];_.util.setLanguage(W,X);var Y=W.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&_.util.setLanguage(Y,X);var fe=W.textContent,le={element:W,language:X,grammar:ee,code:fe};function we(be){le.highlightedCode=be,_.hooks.run("before-insert",le),le.element.innerHTML=le.highlightedCode,_.hooks.run("after-highlight",le),_.hooks.run("complete",le),Q&&Q.call(le.element)}if(_.hooks.run("before-sanity-check",le),Y=le.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!le.code){_.hooks.run("complete",le),Q&&Q.call(le.element);return}if(_.hooks.run("before-highlight",le),!le.grammar){we(_.util.encode(le.code));return}if(K&&s.Worker){var _e=new Worker(_.filename);_e.onmessage=function(be){we(be.data)},_e.postMessage(JSON.stringify({language:le.language,code:le.code,immediateClose:!0}))}else we(_.highlight(le.code,le.grammar,le.language))},highlight:function(W,K,Q){var X={code:W,grammar:K,language:Q};if(_.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=_.tokenize(X.code,X.grammar),_.hooks.run("after-tokenize",X),k.stringify(_.util.encode(X.tokens),X.language)},tokenize:function(W,K){var Q=K.rest;if(Q){for(var X in Q)K[X]=Q[X];delete K.rest}var ee=new O;return D(ee,ee.head,W),E(W,ee,K,ee.head,0),ae(ee)},hooks:{all:{},add:function(W,K){var Q=_.hooks.all;Q[W]=Q[W]||[],Q[W].push(K)},run:function(W,K){var Q=_.hooks.all[W];if(!(!Q||!Q.length))for(var X=0,ee;ee=Q[X++];)ee(K)}},Token:k};s.Prism=_;function k(W,K,Q,X){this.type=W,this.content=K,this.alias=Q,this.length=(X||"").length|0}k.stringify=function W(K,Q){if(typeof K=="string")return K;if(Array.isArray(K)){var X="";return K.forEach(function(we){X+=W(we,Q)}),X}var ee={type:K.type,content:W(K.content,Q),tag:"span",classes:["token",K.type],attributes:{},language:Q},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(ee.classes,Y):ee.classes.push(Y)),_.hooks.run("wrap",ee);var fe="";for(var le in ee.attributes)fe+=" "+le+'="'+(ee.attributes[le]||"").replace(/"/g,"&quot;")+'"';return"<"+ee.tag+' class="'+ee.classes.join(" ")+'"'+fe+">"+ee.content+"</"+ee.tag+">"};function S(W,K,Q,X){W.lastIndex=K;var ee=W.exec(Q);if(ee&&X&&ee[1]){var Y=ee[1].length;ee.index+=Y,ee[0]=ee[0].slice(Y)}return ee}function E(W,K,Q,X,ee,Y){for(var fe in Q)if(!(!Q.hasOwnProperty(fe)||!Q[fe])){var le=Q[fe];le=Array.isArray(le)?le:[le];for(var we=0;we<le.length;++we){if(Y&&Y.cause==fe+","+we)return;var _e=le[we],be=_e.inside,nt=!!_e.lookbehind,mt=!!_e.greedy,sr=_e.alias;if(mt&&!_e.pattern.global){var xt=_e.pattern.toString().match(/[imsuy]*$/)[0];_e.pattern=RegExp(_e.pattern.source,xt+"g")}for(var wt=_e.pattern||_e,Ye=X.next,bt=ee;Ye!==K.tail&&!(Y&&bt>=Y.reach);bt+=Ye.value.length,Ye=Ye.next){var Ht=Ye.value;if(K.length>W.length)return;if(!(Ht instanceof k)){var nr=1,vt;if(mt){if(vt=S(wt,bt,W,nt),!vt||vt.index>=W.length)break;var Vt=vt.index,Cr=vt.index+vt[0].length,qt=bt;for(qt+=Ye.value.length;Vt>=qt;)Ye=Ye.next,qt+=Ye.value.length;if(qt-=Ye.value.length,bt=qt,Ye.value instanceof k)continue;for(var _r=Ye;_r!==K.tail&&(qt<Cr||typeof _r.value=="string");_r=_r.next)nr++,qt+=_r.value.length;nr--,Ht=W.slice(bt,qt),vt.index-=bt}else if(vt=S(wt,0,Ht,nt),!vt)continue;var Vt=vt.index,ye=vt[0],qe=Ht.slice(0,Vt),Te=Ht.slice(Vt+ye.length),et=bt+Ht.length;Y&&et>Y.reach&&(Y.reach=et);var ct=Ye.prev;qe&&(ct=D(K,ct,qe),bt+=qe.length),H(K,ct,nr);var At=new k(fe,be?_.tokenize(ye,be):ye,sr,ye);if(Ye=D(K,ct,At),Te&&D(K,Ye,Te),nr>1){var J={cause:fe+","+we,reach:et};E(W,K,Q,Ye.prev,bt,J),Y&&J.reach>Y.reach&&(Y.reach=J.reach)}}}}}}function O(){var W={value:null,prev:null,next:null},K={value:null,prev:W,next:null};W.next=K,this.head=W,this.tail=K,this.length=0}function D(W,K,Q){var X=K.next,ee={value:Q,prev:K,next:X};return K.next=ee,X.prev=ee,W.length++,ee}function H(W,K,Q){for(var X=K.next,ee=0;ee<Q&&X!==W.tail;ee++)X=X.next;K.next=X,X.prev=K,W.length-=ee}function ae(W){for(var K=[],Q=W.head.next;Q!==W.tail;)K.push(Q.value),Q=Q.next;return K}if(!s.document)return s.addEventListener&&(_.disableWorkerMessageHandler||s.addEventListener("message",function(W){var K=JSON.parse(W.data),Q=K.language,X=K.code,ee=K.immediateClose;s.postMessage(_.highlight(X,_.languages[Q],Q)),ee&&s.close()},!1)),_;var se=_.util.currentScript();se&&(_.filename=se.src,se.hasAttribute("data-manual")&&(_.manual=!0));function ie(){_.manual||_.highlightAll()}if(!_.manual){var de=document.readyState;de==="loading"||de==="interactive"&&se&&se.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return _}(r);t.exports&&(t.exports=e),typeof Wi<"u"&&(Wi.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(h,g){var b={};b["language-"+g]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[g]},b.cdata=/^<!\[CDATA\[|\]\]>$/i;var _={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:b}};_["language-"+g]={pattern:/[\s\S]+/,inside:e.languages[g]};var k={};k[h]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return h}),"i"),lookbehind:!0,greedy:!0,inside:_},e.languages.insertBefore("markup","cdata",k)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(s,h){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[h,"language-"+h],inside:e.languages[h]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(s){var h=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+h.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+h.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+h.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+h.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:h,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var g=s.languages.markup;g&&(g.tag.addInlined("style","css"),g.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loading…",h=function(se,ie){return"✖ Error "+se+" while fetching file: "+ie},g="✖ Error: File does not exist or is empty",b={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},_="data-src-status",k="loading",S="loaded",E="failed",O="pre[data-src]:not(["+_+'="'+S+'"]):not(['+_+'="'+k+'"])';function D(se,ie,de){var W=new XMLHttpRequest;W.open("GET",se,!0),W.onreadystatechange=function(){W.readyState==4&&(W.status<400&&W.responseText?ie(W.responseText):W.status>=400?de(h(W.status,W.statusText)):de(g))},W.send(null)}function H(se){var ie=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(se||"");if(ie){var de=Number(ie[1]),W=ie[2],K=ie[3];return W?K?[de,Number(K)]:[de,void 0]:[de,de]}}e.hooks.add("before-highlightall",function(se){se.selector+=", "+O}),e.hooks.add("before-sanity-check",function(se){var ie=se.element;if(ie.matches(O)){se.code="",ie.setAttribute(_,k);var de=ie.appendChild(document.createElement("CODE"));de.textContent=s;var W=ie.getAttribute("data-src"),K=se.language;if(K==="none"){var Q=(/\.(\w+)$/.exec(W)||[,"none"])[1];K=b[Q]||Q}e.util.setLanguage(de,K),e.util.setLanguage(ie,K);var X=e.plugins.autoloader;X&&X.loadLanguages(K),D(W,function(ee){ie.setAttribute(_,S);var Y=H(ie.getAttribute("data-range"));if(Y){var fe=ee.split(/\r\n?|\n/g),le=Y[0],we=Y[1]==null?fe.length:Y[1];le<0&&(le+=fe.length),le=Math.max(0,Math.min(le-1,fe.length)),we<0&&(we+=fe.length),we=Math.max(0,Math.min(we,fe.length)),ee=fe.slice(le,we).join(`
`),ie.hasAttribute("data-start")||ie.setAttribute("data-start",String(le+1))}de.textContent=ee,e.highlightElement(de)},function(ee){ie.setAttribute(_,E),de.textContent=ee})}}),e.plugins.fileHighlight={highlight:function(ie){for(var de=(ie||document).querySelectorAll(O),W=0,K;K=de[W++];)e.highlightElement(K)}};var ae=!1;e.fileHighlight=function(){ae||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),ae=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(_1);var C0={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(s){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,g=0,b={},_={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function W(K){return K instanceof k?new k(K.type,W(K.content),K.alias):Array.isArray(K)?K.map(W):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(W){return Object.prototype.toString.call(W).slice(8,-1)},objId:function(W){return W.__id||Object.defineProperty(W,"__id",{value:++g}),W.__id},clone:function W(K,Q){Q=Q||{};var X,ee;switch(_.util.type(K)){case"Object":if(ee=_.util.objId(K),Q[ee])return Q[ee];X={},Q[ee]=X;for(var Y in K)K.hasOwnProperty(Y)&&(X[Y]=W(K[Y],Q));return X;case"Array":return ee=_.util.objId(K),Q[ee]?Q[ee]:(X=[],Q[ee]=X,K.forEach(function(fe,le){X[le]=W(fe,Q)}),X);default:return K}},getLanguage:function(W){for(;W;){var K=h.exec(W.className);if(K)return K[1].toLowerCase();W=W.parentElement}return"none"},setLanguage:function(W,K){W.className=W.className.replace(RegExp(h,"gi"),""),W.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(X){var W=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(X.stack)||[])[1];if(W){var K=document.getElementsByTagName("script");for(var Q in K)if(K[Q].src==W)return K[Q]}return null}},isActive:function(W,K,Q){for(var X="no-"+K;W;){var ee=W.classList;if(ee.contains(K))return!0;if(ee.contains(X))return!1;W=W.parentElement}return!!Q}},languages:{plain:b,plaintext:b,text:b,txt:b,extend:function(W,K){var Q=_.util.clone(_.languages[W]);for(var X in K)Q[X]=K[X];return Q},insertBefore:function(W,K,Q,X){X=X||_.languages;var ee=X[W],Y={};for(var fe in ee)if(ee.hasOwnProperty(fe)){if(fe==K)for(var le in Q)Q.hasOwnProperty(le)&&(Y[le]=Q[le]);Q.hasOwnProperty(fe)||(Y[fe]=ee[fe])}var we=X[W];return X[W]=Y,_.languages.DFS(_.languages,function(_e,be){be===we&&_e!=W&&(this[_e]=Y)}),Y},DFS:function W(K,Q,X,ee){ee=ee||{};var Y=_.util.objId;for(var fe in K)if(K.hasOwnProperty(fe)){Q.call(K,fe,K[fe],X||fe);var le=K[fe],we=_.util.type(le);we==="Object"&&!ee[Y(le)]?(ee[Y(le)]=!0,W(le,Q,null,ee)):we==="Array"&&!ee[Y(le)]&&(ee[Y(le)]=!0,W(le,Q,fe,ee))}}},plugins:{},highlightAll:function(W,K){_.highlightAllUnder(document,W,K)},highlightAllUnder:function(W,K,Q){var X={callback:Q,container:W,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};_.hooks.run("before-highlightall",X),X.elements=Array.prototype.slice.apply(X.container.querySelectorAll(X.selector)),_.hooks.run("before-all-elements-highlight",X);for(var ee=0,Y;Y=X.elements[ee++];)_.highlightElement(Y,K===!0,X.callback)},highlightElement:function(W,K,Q){var X=_.util.getLanguage(W),ee=_.languages[X];_.util.setLanguage(W,X);var Y=W.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&_.util.setLanguage(Y,X);var fe=W.textContent,le={element:W,language:X,grammar:ee,code:fe};function we(be){le.highlightedCode=be,_.hooks.run("before-insert",le),le.element.innerHTML=le.highlightedCode,_.hooks.run("after-highlight",le),_.hooks.run("complete",le),Q&&Q.call(le.element)}if(_.hooks.run("before-sanity-check",le),Y=le.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!le.code){_.hooks.run("complete",le),Q&&Q.call(le.element);return}if(_.hooks.run("before-highlight",le),!le.grammar){we(_.util.encode(le.code));return}if(K&&s.Worker){var _e=new Worker(_.filename);_e.onmessage=function(be){we(be.data)},_e.postMessage(JSON.stringify({language:le.language,code:le.code,immediateClose:!0}))}else we(_.highlight(le.code,le.grammar,le.language))},highlight:function(W,K,Q){var X={code:W,grammar:K,language:Q};if(_.hooks.run("before-tokenize",X),!X.grammar)throw new Error('The language "'+X.language+'" has no grammar.');return X.tokens=_.tokenize(X.code,X.grammar),_.hooks.run("after-tokenize",X),k.stringify(_.util.encode(X.tokens),X.language)},tokenize:function(W,K){var Q=K.rest;if(Q){for(var X in Q)K[X]=Q[X];delete K.rest}var ee=new O;return D(ee,ee.head,W),E(W,ee,K,ee.head,0),ae(ee)},hooks:{all:{},add:function(W,K){var Q=_.hooks.all;Q[W]=Q[W]||[],Q[W].push(K)},run:function(W,K){var Q=_.hooks.all[W];if(!(!Q||!Q.length))for(var X=0,ee;ee=Q[X++];)ee(K)}},Token:k};s.Prism=_;function k(W,K,Q,X){this.type=W,this.content=K,this.alias=Q,this.length=(X||"").length|0}k.stringify=function W(K,Q){if(typeof K=="string")return K;if(Array.isArray(K)){var X="";return K.forEach(function(we){X+=W(we,Q)}),X}var ee={type:K.type,content:W(K.content,Q),tag:"span",classes:["token",K.type],attributes:{},language:Q},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(ee.classes,Y):ee.classes.push(Y)),_.hooks.run("wrap",ee);var fe="";for(var le in ee.attributes)fe+=" "+le+'="'+(ee.attributes[le]||"").replace(/"/g,"&quot;")+'"';return"<"+ee.tag+' class="'+ee.classes.join(" ")+'"'+fe+">"+ee.content+"</"+ee.tag+">"};function S(W,K,Q,X){W.lastIndex=K;var ee=W.exec(Q);if(ee&&X&&ee[1]){var Y=ee[1].length;ee.index+=Y,ee[0]=ee[0].slice(Y)}return ee}function E(W,K,Q,X,ee,Y){for(var fe in Q)if(!(!Q.hasOwnProperty(fe)||!Q[fe])){var le=Q[fe];le=Array.isArray(le)?le:[le];for(var we=0;we<le.length;++we){if(Y&&Y.cause==fe+","+we)return;var _e=le[we],be=_e.inside,nt=!!_e.lookbehind,mt=!!_e.greedy,sr=_e.alias;if(mt&&!_e.pattern.global){var xt=_e.pattern.toString().match(/[imsuy]*$/)[0];_e.pattern=RegExp(_e.pattern.source,xt+"g")}for(var wt=_e.pattern||_e,Ye=X.next,bt=ee;Ye!==K.tail&&!(Y&&bt>=Y.reach);bt+=Ye.value.length,Ye=Ye.next){var Ht=Ye.value;if(K.length>W.length)return;if(!(Ht instanceof k)){var nr=1,vt;if(mt){if(vt=S(wt,bt,W,nt),!vt||vt.index>=W.length)break;var Vt=vt.index,Cr=vt.index+vt[0].length,qt=bt;for(qt+=Ye.value.length;Vt>=qt;)Ye=Ye.next,qt+=Ye.value.length;if(qt-=Ye.value.length,bt=qt,Ye.value instanceof k)continue;for(var _r=Ye;_r!==K.tail&&(qt<Cr||typeof _r.value=="string");_r=_r.next)nr++,qt+=_r.value.length;nr--,Ht=W.slice(bt,qt),vt.index-=bt}else if(vt=S(wt,0,Ht,nt),!vt)continue;var Vt=vt.index,ye=vt[0],qe=Ht.slice(0,Vt),Te=Ht.slice(Vt+ye.length),et=bt+Ht.length;Y&&et>Y.reach&&(Y.reach=et);var ct=Ye.prev;qe&&(ct=D(K,ct,qe),bt+=qe.length),H(K,ct,nr);var At=new k(fe,be?_.tokenize(ye,be):ye,sr,ye);if(Ye=D(K,ct,At),Te&&D(K,Ye,Te),nr>1){var J={cause:fe+","+we,reach:et};E(W,K,Q,Ye.prev,bt,J),Y&&J.reach>Y.reach&&(Y.reach=J.reach)}}}}}}function O(){var W={value:null,prev:null,next:null},K={value:null,prev:W,next:null};W.next=K,this.head=W,this.tail=K,this.length=0}function D(W,K,Q){var X=K.next,ee={value:Q,prev:K,next:X};return K.next=ee,X.prev=ee,W.length++,ee}function H(W,K,Q){for(var X=K.next,ee=0;ee<Q&&X!==W.tail;ee++)X=X.next;K.next=X,X.prev=K,W.length-=ee}function ae(W){for(var K=[],Q=W.head.next;Q!==W.tail;)K.push(Q.value),Q=Q.next;return K}if(!s.document)return s.addEventListener&&(_.disableWorkerMessageHandler||s.addEventListener("message",function(W){var K=JSON.parse(W.data),Q=K.language,X=K.code,ee=K.immediateClose;s.postMessage(_.highlight(X,_.languages[Q],Q)),ee&&s.close()},!1)),_;var se=_.util.currentScript();se&&(_.filename=se.src,se.hasAttribute("data-manual")&&(_.manual=!0));function ie(){_.manual||_.highlightAll()}if(!_.manual){var de=document.readyState;de==="loading"||de==="interactive"&&se&&se.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return _}(r);t.exports&&(t.exports=e),typeof Wi<"u"&&(Wi.Prism=e)})(C0);var fy=C0.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const P1={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},k1="_container_zhbxc_2",E1="_header_zhbxc_9",M1="_main_zhbxc_14",S1="_footer_zhbxc_19",N1={container:k1,header:E1,main:M1,footer:S1},Yc=(t,r)=>{const e=t.__vccOpts||t;for(const[s,h]of r)e[s]=h;return e};function T1(t,r,e,s,h,g){return Ss(),_n("div",{class:Dn(t.$style.container)},[g.hasHeader?(Ss(),_n("header",{key:0,class:Dn(t.$style.header)},[mh(t.$slots,"header")],2)):Kc("",!0),rl("main",{class:Dn(t.$style.main)},[mh(t.$slots,"default")],2),g.hasFooter?(Ss(),_n("footer",{key:1,class:Dn(t.$style.footer)},[mh(t.$slots,"footer")],2)):Kc("",!0)],2)}const O1={$style:N1},Ec=Yc(P1,[["render",T1],["__cssModules",O1]]),F1={key:0},R1=["onClick"],I1={key:1},j1=["onClick"],D1=Mf({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=vc(!1),s=r;return(h,g)=>(Ss(),_n("div",{class:Dn(h.$style.wrapper)},[rl("button",{onClick:g[0]||(g[0]=b=>e.value=!e.value)},[mh(h.$slots,"default")]),os(mx,null,{default:ja(()=>[e.value?(Ss(),_n("div",{key:0,class:Dn(h.$style.menu)},[h.options instanceof Array?(Ss(),_n("div",F1,[(Ss(!0),_n(jn,null,kv(h.options,b=>(Ss(),_n("div",{class:Dn(h.$style.opt),onClick:_=>{e.value=!1,s("select",b)}},Fo(b),11,R1))),256))])):(Ss(),_n("div",I1,[(Ss(!0),_n(jn,null,kv(Object.keys(h.options),b=>(Ss(),_n("div",{class:Dn(h.$style.opt),onClick:_=>{e.value=!1,s("select",b)}},Fo(h.options[b]),11,j1))),256))]))],2)):Kc("",!0)]),_:1})],2))}}),L1="_wrapper_1dk0z_2",U1="_menu_1dk0z_5",B1="_opt_1dk0z_12",H1={wrapper:L1,menu:U1,opt:B1},q1={$style:H1},_0=Yc(D1,[["__cssModules",q1]]),V1=Mf({__name:"Editor",props:hd({samples:{},parseError:{}},{modelValue:{},modelModifiers:{}}),emits:hd(["run"],["update:modelValue"]),setup(t,{emit:r}){const e=t,s=r,h=W$(t,"modelValue");function g(_){h.value=e.samples[_]}const b=_=>fy.highlight(_,fy.languages.js,"javascript");return(_,k)=>(Ss(),Jh(Ec,null,{header:ja(()=>[k[3]||(k[3]=Ru(" Input ")),e.samples?(Ss(),_n("div",{key:0,class:Dn(_.$style.actions)},[os(_0,{options:Object.keys(e.samples),onSelect:g},{default:ja(()=>k[2]||(k[2]=[Ru("Samples")])),_:1},8,["options"])],2)):Kc("",!0)]),footer:ja(()=>[e.parseError?(Ss(),_n("span",{key:0,class:Dn(_.$style.parseError)},Fo(e.parseError),3)):Kc("",!0),rl("div",{class:Dn(_.$style.actions)},[rl("button",{onClick:k[1]||(k[1]=S=>s("run"))},"RUN")],2)]),default:ja(()=>[os(Yu(b1),{class:Dn(_.$style.code),modelValue:h.value,"onUpdate:modelValue":k[0]||(k[0]=S=>h.value=S),highlight:b,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),z1="_code_af8rl_2",K1="_parseError_af8rl_6",W1="_actions_af8rl_9",G1={code:z1,parseError:K1,actions:W1},J1={$style:G1},Q1=Yc(V1,[["__cssModules",J1]]);function Rr(t,r,e){let s=e.value;return{configurable:!0,get(){const h=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){s=h}}}let xf=class P0 extends Error{constructor(e,s){super(e);ve(this,"name","AiScript");ve(this,"info");ve(this,"pos");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,P0)}},cy=class extends xf{constructor(e){const s=String((e==null?void 0:e.message)??e);super(s,e);ve(this,"name","Internal")}},rr=class extends xf{constructor(e,s,h){super(`${e} (Line ${s.line}, Column ${s.column})`,h);ve(this,"pos");ve(this,"name","Syntax");this.pos=s}};class Kp extends xf{constructor(e,s,h){super(`${e} (Line ${s.line}, Column ${s.column})`,h);ve(this,"pos");ve(this,"name","Namespace");this.pos=s}}let lr=class extends xf{constructor(e,s){super(e,s);ve(this,"name","Runtime")}},hy=class extends lr{constructor(r,e){super(r,e)}},Z1=class extends lr{constructor(e,s){super(e,s);ve(this,"name","")}};class py extends xf{constructor(e,s){super(e,s);ve(this,"name","Host")}}const X1=["def","return","each","for","loop","break","continue","assign","addAssign","subAssign"];function Y1(t){return X1.includes(t.type)}var ro=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let Lu=class Dv{constructor(r=[],e,s,h){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=h}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Dv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const h=[e,...this.layerdStates];return new Dv(h,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getNsPrefix(){return this.parent==null||this.nsName==null?"":this.parent.getNsPrefix()+this.nsName+":"}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new lr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){const g=h.get(r);if(!g.isMutable)throw new lr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};ro([Rr],Lu.prototype,"log",null);ro([Rr],Lu.prototype,"onUpdated",null);ro([Rr],Lu.prototype,"createChildScope",null);ro([Rr],Lu.prototype,"createChildNamespaceScope",null);ro([Rr],Lu.prototype,"get",null);ro([Rr],Lu.prototype,"getNsPrefix",null);ro([Rr],Lu.prototype,"exists",null);ro([Rr],Lu.prototype,"getAll",null);ro([Rr],Lu.prototype,"add",null);ro([Rr],Lu.prototype,"assign",null);var wn=[];for(var Wp=0;Wp<256;++Wp)wn.push((Wp+256).toString(16).slice(1));function eA(t,r=0){return(wn[t[r+0]]+wn[t[r+1]]+wn[t[r+2]]+wn[t[r+3]]+"-"+wn[t[r+4]]+wn[t[r+5]]+"-"+wn[t[r+6]]+wn[t[r+7]]+"-"+wn[t[r+8]]+wn[t[r+9]]+"-"+wn[t[r+10]]+wn[t[r+11]]+wn[t[r+12]]+wn[t[r+13]]+wn[t[r+14]]+wn[t[r+15]]).toLowerCase()}var uh,tA=new Uint8Array(16);function rA(){if(!uh&&(uh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!uh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return uh(tA)}var sA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const vy={randomUUID:sA};function nA(t,r,e){if(vy.randomUUID&&!r&&!t)return vy.randomUUID();t=t||{};var s=t.random||(t.rng||rA)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,eA(s)}const Et={type:"null"},Ws={type:"bool",value:!0},Gs={type:"bool",value:!1},je=t=>({type:"num",value:t}),tr=t=>({type:"str",value:t}),uf=t=>({type:"bool",value:t}),Zh=t=>({type:"obj",value:t}),Br=t=>({type:"arr",value:t}),aA=(t,r,e)=>({type:"fn",params:t,statements:r,scope:e}),pe=t=>({type:"fn",native:t}),iA=t=>({type:"return",value:t}),lA=()=>({type:"break",value:null}),uA=()=>({type:"continue",value:null}),oA=t=>t.type==="return"?t.value:t,Ah=(t,r)=>({type:"error",value:t,info:r});function Nn(t){if(t==null)throw new lr("Expect anything, but got nothing.")}function Pn(t){if(t==null)throw new lr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new lr(`Expect boolean, but got ${t.type}.`)}function ys(t){if(t==null)throw new lr("Expect function, but got nothing.");if(t.type!=="fn")throw new lr(`Expect function, but got ${t.type}.`)}function Pr(t){if(t==null)throw new lr("Expect string, but got nothing.");if(t.type!=="str")throw new lr(`Expect string, but got ${t.type}.`)}function Ne(t){if(t==null)throw new lr("Expect number, but got nothing.");if(t.type!=="num")throw new lr(`Expect number, but got ${t.type}.`)}function tl(t){if(t==null)throw new lr("Expect object, but got nothing.");if(t.type!=="obj")throw new lr(`Expect object, but got ${t.type}.`)}function fo(t){if(t==null)throw new lr("Expect array, but got nothing.");if(t.type!=="arr")throw new lr(`Expect array, but got ${t.type}.`)}function gy(t){return t.type==="fn"}function Gp(t){return t.type==="obj"}function Xh(t){return t.type==="arr"}function Jf(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Lv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>Lv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Uv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Uv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Uv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Bv(t){if(t===null)return Et;if(typeof t=="boolean")return uf(t);if(typeof t=="string")return tr(t);if(typeof t=="number")return je(t);if(Array.isArray(t))return Br(t.map(r=>Bv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Bv(s));return Zh(r)}return Et}function Qf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const h of t.value)s.push(Qf(h,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[h,g]of t.value)s.push(`${h}: ${Qf(g,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?t.native?"@( ?? ) { native code }":`@( ${t.params.map(s=>s.dest.type==="identifier"?s.dest.name:"?").join(", ")} ) { ... }`:"?"}const fA={version:"1.0.0-dev.20241030"},cA=fA.version,k0=new TextEncoder,hA=new TextDecoder,Zo=Math.ceil(Math.log2(Number.MAX_SAFE_INTEGER));BigInt(Zo);const pA=Zo-1;BigInt(pA);class Kg{generateNumber0To1(){let r=this.generateBigUintByBits(Zo),e=1022,s=Zo-dy(r);for(;s>0&&e>=Zo;)e-=s,r<<=BigInt(s),r|=this.generateBigUintByBits(s),s=Zo-dy(r);if(s>0){const h=Math.min(e-1,s);r<<=BigInt(h),r|=this.generateBigUintByBits(h),e=Math.max(e-h,0)}return Number(r)*.5**Zo*.5**(1022-e)}generateUniform(r){if(r<1)return 0n;const e=r.toString(2).length,s=Math.ceil(e/8),h=BigInt(s*8-e);let g;do g=this.generateBigUintByBytes(s)>>h;while(g>r);return g}generateRandomIntegerInRange(r,e){const s=Math.ceil(r),h=Math.floor(e),g=h-s;if(g===0)return s;const b=Math.abs(g),_=Math.sign(g);if(!Number.isSafeInteger(b)||!Number.isSafeInteger(s)||!Number.isSafeInteger(h))return null;const k=BigInt(b);return Number(this.generateUniform(k))*_+s}}function dy(t){return t===0n?0:t.toString(2).length}function vA(t){if(t.byteLength===0)return null;if(t.byteLength<8){const r=new Uint8Array(8);return r.set(new Uint8Array(t)),new DataView(r.buffer).getBigUint64(0,!0)}return new DataView(t).getBigUint64(0,!0)}function Wg(t){if(t.byteLength===0)return null;if(t.byteLength<=8)return vA(t);const r=new DataView(t);let e=0n,s=0n,h=0;for(;h<r.byteLength-7;h+=8,e+=64n){const g=r.getBigUint64(h,!0);s|=g<<e}if(h<r.byteLength){const g=new Uint8Array(8);g.set(new Uint8Array(t,h)),s|=new DataView(g.buffer).getBigUint64(0,!0)<<e}return s}const Lc=class Lc extends Kg{static get instance(){return Lc._instance}constructor(){super()}generateBigUintByBytes(r){let e=new Uint8Array(Math.ceil(r/8)*8);return e.length<1||!Number.isSafeInteger(r)?0n:(e=this.generateBytes(e.subarray(0,r)),Wg(e.buffer)??0n)}generateBigUintByBits(r){if(r<1||!Number.isSafeInteger(r))return 0n;const e=Math.ceil(r/8),s=BigInt(e*8-r);return this.generateBigUintByBytes(e)>>s}generateBytes(r){return crypto.getRandomValues(r)}};ve(Lc,"_instance",new Lc);let Yh=Lc;var Gg={exports:{}};Gg.exports;(function(t){(function(r,e,s){function h(k){var S=this,E=_();S.next=function(){var O=2091639*S.s0+S.c*23283064365386963e-26;return S.s0=S.s1,S.s1=S.s2,S.s2=O-(S.c=O|0)},S.c=1,S.s0=E(" "),S.s1=E(" "),S.s2=E(" "),S.s0-=E(k),S.s0<0&&(S.s0+=1),S.s1-=E(k),S.s1<0&&(S.s1+=1),S.s2-=E(k),S.s2<0&&(S.s2+=1),E=null}function g(k,S){return S.c=k.c,S.s0=k.s0,S.s1=k.s1,S.s2=k.s2,S}function b(k,S){var E=new h(k),O=S&&S.state,D=E.next;return D.int32=function(){return E.next()*4294967296|0},D.double=function(){return D()+(D()*2097152|0)*11102230246251565e-32},D.quick=D,O&&(typeof O=="object"&&g(O,E),D.state=function(){return g(E,{})}),D}function _(){var k=4022871197,S=function(E){E=String(E);for(var O=0;O<E.length;O++){k+=E.charCodeAt(O);var D=.02519603282416938*k;k=D>>>0,D-=k,D*=k,k=D>>>0,D-=k,k+=D*4294967296}return(k>>>0)*23283064365386963e-26};return S}e&&e.exports?e.exports=b:this.alea=b})(Wi,t)})(Gg);var gA=Gg.exports,Jg={exports:{}};Jg.exports;(function(t){(function(r,e,s){function h(_){var k=this,S="";k.x=0,k.y=0,k.z=0,k.w=0,k.next=function(){var O=k.x^k.x<<11;return k.x=k.y,k.y=k.z,k.z=k.w,k.w^=k.w>>>19^O^O>>>8},_===(_|0)?k.x=_:S+=_;for(var E=0;E<S.length+64;E++)k.x^=S.charCodeAt(E)|0,k.next()}function g(_,k){return k.x=_.x,k.y=_.y,k.z=_.z,k.w=_.w,k}function b(_,k){var S=new h(_),E=k&&k.state,O=function(){return(S.next()>>>0)/4294967296};return O.double=function(){do var D=S.next()>>>11,H=(S.next()>>>0)/4294967296,ae=(D+H)/(1<<21);while(ae===0);return ae},O.int32=S.next,O.quick=O,E&&(typeof E=="object"&&g(E,S),O.state=function(){return g(S,{})}),O}e&&e.exports?e.exports=b:this.xor128=b})(Wi,t)})(Jg);var dA=Jg.exports,Qg={exports:{}};Qg.exports;(function(t){(function(r,e,s){function h(_){var k=this,S="";k.next=function(){var O=k.x^k.x>>>2;return k.x=k.y,k.y=k.z,k.z=k.w,k.w=k.v,(k.d=k.d+362437|0)+(k.v=k.v^k.v<<4^(O^O<<1))|0},k.x=0,k.y=0,k.z=0,k.w=0,k.v=0,_===(_|0)?k.x=_:S+=_;for(var E=0;E<S.length+64;E++)k.x^=S.charCodeAt(E)|0,E==S.length&&(k.d=k.x<<10^k.x>>>4),k.next()}function g(_,k){return k.x=_.x,k.y=_.y,k.z=_.z,k.w=_.w,k.v=_.v,k.d=_.d,k}function b(_,k){var S=new h(_),E=k&&k.state,O=function(){return(S.next()>>>0)/4294967296};return O.double=function(){do var D=S.next()>>>11,H=(S.next()>>>0)/4294967296,ae=(D+H)/(1<<21);while(ae===0);return ae},O.int32=S.next,O.quick=O,E&&(typeof E=="object"&&g(E,S),O.state=function(){return g(S,{})}),O}e&&e.exports?e.exports=b:this.xorwow=b})(Wi,t)})(Qg);var yA=Qg.exports,Zg={exports:{}};Zg.exports;(function(t){(function(r,e,s){function h(_){var k=this;k.next=function(){var E=k.x,O=k.i,D,H;return D=E[O],D^=D>>>7,H=D^D<<24,D=E[O+1&7],H^=D^D>>>10,D=E[O+3&7],H^=D^D>>>3,D=E[O+4&7],H^=D^D<<7,D=E[O+7&7],D=D^D<<13,H^=D^D<<9,E[O]=H,k.i=O+1&7,H};function S(E,O){var D,H=[];if(O===(O|0))H[0]=O;else for(O=""+O,D=0;D<O.length;++D)H[D&7]=H[D&7]<<15^O.charCodeAt(D)+H[D+1&7]<<13;for(;H.length<8;)H.push(0);for(D=0;D<8&&H[D]===0;++D);for(D==8?H[7]=-1:H[D],E.x=H,E.i=0,D=256;D>0;--D)E.next()}S(k,_)}function g(_,k){return k.x=_.x.slice(),k.i=_.i,k}function b(_,k){_==null&&(_=+new Date);var S=new h(_),E=k&&k.state,O=function(){return(S.next()>>>0)/4294967296};return O.double=function(){do var D=S.next()>>>11,H=(S.next()>>>0)/4294967296,ae=(D+H)/(1<<21);while(ae===0);return ae},O.int32=S.next,O.quick=O,E&&(E.x&&g(E,S),O.state=function(){return g(S,{})}),O}e&&e.exports?e.exports=b:this.xorshift7=b})(Wi,t)})(Zg);var wA=Zg.exports,Xg={exports:{}};Xg.exports;(function(t){(function(r,e,s){function h(_){var k=this;k.next=function(){var E=k.w,O=k.X,D=k.i,H,ae;return k.w=E=E+1640531527|0,ae=O[D+34&127],H=O[D=D+1&127],ae^=ae<<13,H^=H<<17,ae^=ae>>>15,H^=H>>>12,ae=O[D]=ae^H,k.i=D,ae+(E^E>>>16)|0};function S(E,O){var D,H,ae,se,ie,de=[],W=128;for(O===(O|0)?(H=O,O=null):(O=O+"\0",H=0,W=Math.max(W,O.length)),ae=0,se=-32;se<W;++se)O&&(H^=O.charCodeAt((se+32)%O.length)),se===0&&(ie=H),H^=H<<10,H^=H>>>15,H^=H<<4,H^=H>>>13,se>=0&&(ie=ie+1640531527|0,D=de[se&127]^=H+ie,ae=D==0?ae+1:0);for(ae>=128&&(de[(O&&O.length||0)&127]=-1),ae=127,se=4*128;se>0;--se)H=de[ae+34&127],D=de[ae=ae+1&127],H^=H<<13,D^=D<<17,H^=H>>>15,D^=D>>>12,de[ae]=H^D;E.w=ie,E.X=de,E.i=ae}S(k,_)}function g(_,k){return k.i=_.i,k.w=_.w,k.X=_.X.slice(),k}function b(_,k){_==null&&(_=+new Date);var S=new h(_),E=k&&k.state,O=function(){return(S.next()>>>0)/4294967296};return O.double=function(){do var D=S.next()>>>11,H=(S.next()>>>0)/4294967296,ae=(D+H)/(1<<21);while(ae===0);return ae},O.int32=S.next,O.quick=O,E&&(E.X&&g(E,S),O.state=function(){return g(S,{})}),O}e&&e.exports?e.exports=b:this.xor4096=b})(Wi,t)})(Xg);var mA=Xg.exports,Yg={exports:{}};Yg.exports;(function(t){(function(r,e,s){function h(_){var k=this,S="";k.next=function(){var O=k.b,D=k.c,H=k.d,ae=k.a;return O=O<<25^O>>>7^D,D=D-H|0,H=H<<24^H>>>8^ae,ae=ae-O|0,k.b=O=O<<20^O>>>12^D,k.c=D=D-H|0,k.d=H<<16^D>>>16^ae,k.a=ae-O|0},k.a=0,k.b=0,k.c=-1640531527,k.d=1367130551,_===Math.floor(_)?(k.a=_/4294967296|0,k.b=_|0):S+=_;for(var E=0;E<S.length+20;E++)k.b^=S.charCodeAt(E)|0,k.next()}function g(_,k){return k.a=_.a,k.b=_.b,k.c=_.c,k.d=_.d,k}function b(_,k){var S=new h(_),E=k&&k.state,O=function(){return(S.next()>>>0)/4294967296};return O.double=function(){do var D=S.next()>>>11,H=(S.next()>>>0)/4294967296,ae=(D+H)/(1<<21);while(ae===0);return ae},O.int32=S.next,O.quick=O,E&&(typeof E=="object"&&g(E,S),O.state=function(){return g(S,{})}),O}e&&e.exports?e.exports=b:this.tychei=b})(Wi,t)})(Yg);var $A=Yg.exports,E0={exports:{}};const xA={},bA=Object.freeze(Object.defineProperty({__proto__:null,default:xA},Symbol.toStringTag,{value:"Module"})),AA=C1(bA);(function(t){(function(r,e,s){var h=256,g=6,b=52,_="random",k=s.pow(h,g),S=s.pow(2,b),E=S*2,O=h-1,D;function H(Q,X,ee){var Y=[];X=X==!0?{entropy:!0}:X||{};var fe=de(ie(X.entropy?[Q,K(e)]:Q??W(),3),Y),le=new ae(Y),we=function(){for(var _e=le.g(g),be=k,nt=0;_e<S;)_e=(_e+nt)*h,be*=h,nt=le.g(1);for(;_e>=E;)_e/=2,be/=2,nt>>>=1;return(_e+nt)/be};return we.int32=function(){return le.g(4)|0},we.quick=function(){return le.g(4)/4294967296},we.double=we,de(K(le.S),e),(X.pass||ee||function(_e,be,nt,mt){return mt&&(mt.S&&se(mt,le),_e.state=function(){return se(le,{})}),nt?(s[_]=_e,be):_e})(we,fe,"global"in X?X.global:this==s,X.state)}function ae(Q){var X,ee=Q.length,Y=this,fe=0,le=Y.i=Y.j=0,we=Y.S=[];for(ee||(Q=[ee++]);fe<h;)we[fe]=fe++;for(fe=0;fe<h;fe++)we[fe]=we[le=O&le+Q[fe%ee]+(X=we[fe])],we[le]=X;(Y.g=function(_e){for(var be,nt=0,mt=Y.i,sr=Y.j,xt=Y.S;_e--;)be=xt[mt=O&mt+1],nt=nt*h+xt[O&(xt[mt]=xt[sr=O&sr+be])+(xt[sr]=be)];return Y.i=mt,Y.j=sr,nt})(h)}function se(Q,X){return X.i=Q.i,X.j=Q.j,X.S=Q.S.slice(),X}function ie(Q,X){var ee=[],Y=typeof Q,fe;if(X&&Y=="object")for(fe in Q)try{ee.push(ie(Q[fe],X-1))}catch{}return ee.length?ee:Y=="string"?Q:Q+"\0"}function de(Q,X){for(var ee=Q+"",Y,fe=0;fe<ee.length;)X[O&fe]=O&(Y^=X[O&fe]*19)+ee.charCodeAt(fe++);return K(X)}function W(){try{var Q;return D&&(Q=D.randomBytes)?Q=Q(h):(Q=new Uint8Array(h),(r.crypto||r.msCrypto).getRandomValues(Q)),K(Q)}catch{var X=r.navigator,ee=X&&X.plugins;return[+new Date,r,ee,r.screen,K(e)]}}function K(Q){return String.fromCharCode.apply(0,Q)}if(de(s.random(),e),t.exports){t.exports=H;try{D=AA}catch{}}else s["seed"+_]=H})(typeof self<"u"?self:Wi,[],Math)})(E0);var CA=E0.exports,_A=gA,PA=dA,kA=yA,EA=wA,MA=mA,SA=$A,Sf=CA;Sf.alea=_A;Sf.xor128=PA;Sf.xorwow=kA;Sf.xorshift7=EA;Sf.xor4096=MA;Sf.tychei=SA;var NA=Sf;const Uo=A1(NA),Go=Int32Array.BYTES_PER_ELEMENT;class TA extends Kg{constructor(e){super();ve(this,"rng");ve(this,"buffer");ve(this,"filledBuffer");this.rng=Uo(e.toString()),this.buffer=new Uint8Array(Go),this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%Go!==0)throw new Error(`SeedRandomWrapper.fillBufferDirect should always be called with the buffer with the length a multiple-of-${Go}!`);const s=e.length/Go,h=new DataView(e.buffer);let g=0;for(let b=0;b<s;b++,g+=Go)h.setInt32(g,this.rng.int32(),!1);return e}generateBigUintByBytes(e){let s=new Uint8Array(Math.ceil(e/8)*8);return s.length<1||!Number.isSafeInteger(e)?0n:(s=this.generateBytes(s.subarray(0,e)),Wg(s.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const s=Math.ceil(e/8),h=BigInt(s*8-e);return this.generateBigUintByBytes(s)>>h}generateBytes(e){if(e.length<1)return e;e.fill(0);let s=e;if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;for(;s.length>0;){if(this.filledBuffer.length===0){if(s.length>=Go){const h=s.subarray(0,s.length-s.length%Go);this.fillBufferDirect(h),s=s.subarray(h.length);continue}this.fillBuffer()}if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;s.set(this.filledBuffer),s=s.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}const oh=64,OA=20,fh=32,yy=8;function ch(t,r){return t<<r|t>>>32-r}function xo(t,r,e,s,h){if(t.length<16)return;let g=t[r],b=t[e],_=t[s],k=t[h];g===void 0||b===void 0||_===void 0||k===void 0||(g=g+b|0,k=ch(k^g,16),_=_+k|0,b=ch(b^_,12),g=g+b|0,k=ch(k^g,8),_=_+k|0,b=ch(b^_,7),t[r]=g,t[e]=b,t[s]=_,t[h]=k)}function FA(t,r){if(!(t.length<16||r.length<16)){t.set(r);for(let e=0;e<OA;e+=2)xo(t,0,4,8,12),xo(t,1,5,9,13),xo(t,2,6,10,14),xo(t,3,7,11,15),xo(t,0,5,10,15),xo(t,1,6,11,12),xo(t,2,7,8,13),xo(t,3,4,9,14);for(let e=0;e<16;e++){let s=t[e];const h=r[e];if(s===void 0||h===void 0)throw new Error("generateChaCha20: Something went wrong!");s=s+h|0,t[e]=s}}}class RA extends Kg{constructor(e){const s=yy+fh;super();ve(this,"keynonce");ve(this,"state");ve(this,"buffer");ve(this,"filledBuffer");ve(this,"counter");let h;if(typeof e>"u")h=crypto.getRandomValues(new Uint8Array(s));else if(h=e,h.byteLength>s&&(h=e.subarray(0,s)),h.byteLength<s){const k=new Uint8Array(s);k.set(h),h=k}const g=h.subarray(0,fh),b=h.subarray(fh,fh+yy),_=new Uint8Array(16*4);_.set([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),_.set(g,4*4),_.set(b,14*4),this.keynonce=new Uint32Array(_.buffer),this.state=new Uint32Array(16),this.buffer=new Uint8Array(oh),this.counter=0n,this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%oh!==0)throw new Error("ChaCha20.fillBufferDirect should always be called with the buffer with the length a multiple-of-64!");e.fill(0);let s=this.counter;const h=this.state,g=new BigUint64Array(h.buffer);let b=e;for(;b.length>0;){const _=b.subarray(0,h.byteLength),k=new Uint32Array(_.buffer);h.set(this.keynonce),g[6]=BigInt.asUintN(64,s),FA(k,h),b=b.subarray(_.length),s=BigInt.asUintN(64,s+1n)}return this.counter=s,e}generateBigUintByBytes(e){let s=new Uint8Array(Math.ceil(e/8)*8);return s.length<1||!Number.isSafeInteger(e)?0n:(s=this.generateBytes(s.subarray(0,e)),Wg(s.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const s=Math.ceil(e/8),h=BigInt(s*8-e);return this.generateBigUintByBytes(s)>>h}generateBytes(e){if(e.length<1)return e;e.fill(0);let s=e;if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;for(;s.length>0;){if(this.filledBuffer.length===0){if(s.length>=oh){const h=s.subarray(0,s.length-s.length%oh);this.fillBufferDirect(h),s=s.subarray(h.length);continue}this.fillBuffer()}if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;s.set(this.filledBuffer),s=s.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}function IA(t){if(!t||t.type!=="num"&&t.type!=="str")return Et;const r=Uo(t.value.toString());return pe(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?je(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):je(r()))}function jA(t){if(!t||t.type!=="num"&&t.type!=="str")return Et;const r=new TA(t.value);return pe(([e,s])=>{if(e&&e.type==="num"&&s&&s.type==="num"){const h=r.generateRandomIntegerInRange(e.value,s.value);return typeof h=="number"?je(h):Et}return je(r.generateNumber0To1())})}async function DA(t){if(!t||t.type!=="num"&&t.type!=="str"&&t.type!=="null")return Et;let r;t.type==="num"?r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(new Float64Array([t.value])))):t.type==="str"&&(r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(k0.encode(t.value)))));const e=new RA(r);return pe(([s,h])=>{if(s&&s.type==="num"&&h&&h.type==="num"){const g=e.generateRandomIntegerInRange(s.value,h.value);return typeof g=="number"?je(g):Et}return je(e.generateNumber0To1())})}const LA={help:tr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":tr(cA),"Core:ai":tr("kawaii"),"Core:not":pe(([t])=>(Pn(t),t.value?Gs:Ws)),"Core:eq":pe(([t,r])=>(Nn(t),Nn(r),Jf(t,r)?Ws:Gs)),"Core:neq":pe(([t,r])=>(Nn(t),Nn(r),Jf(t,r)?Gs:Ws)),"Core:and":pe(([t,r])=>(Pn(t),t.value?(Pn(r),r.value?Ws:Gs):Gs)),"Core:or":pe(([t,r])=>(Pn(t),t.value?Ws:(Pn(r),r.value?Ws:Gs))),"Core:add":pe(([t,r])=>(Ne(t),Ne(r),je(t.value+r.value))),"Core:sub":pe(([t,r])=>(Ne(t),Ne(r),je(t.value-r.value))),"Core:mul":pe(([t,r])=>(Ne(t),Ne(r),je(t.value*r.value))),"Core:pow":pe(([t,r])=>{Ne(t),Ne(r);const e=t.value**r.value;return je(e)}),"Core:div":pe(([t,r])=>{Ne(t),Ne(r);const e=t.value/r.value;return je(e)}),"Core:mod":pe(([t,r])=>(Ne(t),Ne(r),je(t.value%r.value))),"Core:gt":pe(([t,r])=>(Ne(t),Ne(r),t.value>r.value?Ws:Gs)),"Core:lt":pe(([t,r])=>(Ne(t),Ne(r),t.value<r.value?Ws:Gs)),"Core:gteq":pe(([t,r])=>(Ne(t),Ne(r),t.value>=r.value?Ws:Gs)),"Core:lteq":pe(([t,r])=>(Ne(t),Ne(r),t.value<=r.value?Ws:Gs)),"Core:type":pe(([t])=>(Nn(t),tr(t.type))),"Core:to_str":pe(([t])=>(Nn(t),tr(Qf(t)))),"Core:range":pe(([t,r])=>(Ne(t),Ne(r),t.value<r.value?Br(Array.from({length:r.value-t.value+1},(e,s)=>je(s+t.value))):t.value>r.value?Br(Array.from({length:t.value-r.value+1},(e,s)=>je(t.value-s))):Br([t]))),"Core:sleep":pe(async([t])=>(Ne(t),await new Promise(r=>setTimeout(r,t.value)),Et)),"Core:abort":pe(async([t])=>{throw Pr(t),new Z1(t.value)}),"Util:uuid":pe(()=>tr(nA())),"Json:stringify":pe(([t])=>(Nn(t),tr(JSON.stringify(Uv(t))))),"Json:parse":pe(([t])=>{Pr(t);try{return Bv(JSON.parse(t.value))}catch{return Ah("not_json")}}),"Json:parsable":pe(([t])=>{Pr(t);try{JSON.parse(t.value)}catch{return uf(!1)}return uf(!0)}),"Date:now":pe(()=>je(Date.now())),"Date:year":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":pe(([t])=>(t&&Ne(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":pe(([t])=>{Pr(t);const r=new Date(t.value).getTime();return r===r?je(r):Ah("not_date")}),"Date:to_iso_str":pe(([t,r])=>{t&&Ne(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ne(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let h;if(s===0)h="Z";else{const D=Math.sign(s),H=Math.floor(Math.abs(s)/60),ae=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+D*H),e.setUTCMinutes(e.getUTCMinutes()+D*ae);const se=s>0?"+":"-",ie=H.toString().padStart(2,"0"),de=ae.toString().padStart(2,"0");h=`${se}${ie}:${de}`}const g=e.getUTCFullYear().toString().padStart(4,"0"),b=(e.getUTCMonth()+1).toString().padStart(2,"0"),_=e.getUTCDate().toString().padStart(2,"0"),k=e.getUTCHours().toString().padStart(2,"0"),S=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),O=e.getUTCMilliseconds().toString().padStart(3,"0");return tr(`${g}-${b}-${_}T${k}:${S}:${E}.${O}${h}`)}),"Math:Infinity":je(1/0),"Math:E":je(Math.E),"Math:LN2":je(Math.LN2),"Math:LN10":je(Math.LN10),"Math:LOG2E":je(Math.LOG2E),"Math:LOG10E":je(Math.LOG10E),"Math:PI":je(Math.PI),"Math:SQRT1_2":je(Math.SQRT1_2),"Math:SQRT2":je(Math.SQRT2),"Math:abs":pe(([t])=>(Ne(t),je(Math.abs(t.value)))),"Math:acos":pe(([t])=>(Ne(t),je(Math.acos(t.value)))),"Math:acosh":pe(([t])=>(Ne(t),je(Math.acosh(t.value)))),"Math:asin":pe(([t])=>(Ne(t),je(Math.asin(t.value)))),"Math:asinh":pe(([t])=>(Ne(t),je(Math.asinh(t.value)))),"Math:atan":pe(([t])=>(Ne(t),je(Math.atan(t.value)))),"Math:atanh":pe(([t])=>(Ne(t),je(Math.atanh(t.value)))),"Math:atan2":pe(([t,r])=>(Ne(t),Ne(r),je(Math.atan2(t.value,r.value)))),"Math:cbrt":pe(([t])=>(Ne(t),je(Math.cbrt(t.value)))),"Math:ceil":pe(([t])=>(Ne(t),je(Math.ceil(t.value)))),"Math:clz32":pe(([t])=>(Ne(t),je(Math.clz32(t.value)))),"Math:cos":pe(([t])=>(Ne(t),je(Math.cos(t.value)))),"Math:cosh":pe(([t])=>(Ne(t),je(Math.cosh(t.value)))),"Math:exp":pe(([t])=>(Ne(t),je(Math.exp(t.value)))),"Math:expm1":pe(([t])=>(Ne(t),je(Math.expm1(t.value)))),"Math:floor":pe(([t])=>(Ne(t),je(Math.floor(t.value)))),"Math:fround":pe(([t])=>(Ne(t),je(Math.fround(t.value)))),"Math:hypot":pe(([t])=>{fo(t);const r=[];for(const e of t.value)Ne(e),r.push(e.value);return je(Math.hypot(...r))}),"Math:imul":pe(([t,r])=>(Ne(t),Ne(r),je(Math.imul(t.value,r.value)))),"Math:log":pe(([t])=>(Ne(t),je(Math.log(t.value)))),"Math:log1p":pe(([t])=>(Ne(t),je(Math.log1p(t.value)))),"Math:log10":pe(([t])=>(Ne(t),je(Math.log10(t.value)))),"Math:log2":pe(([t])=>(Ne(t),je(Math.log2(t.value)))),"Math:max":pe(([t,r])=>(Ne(t),Ne(r),je(Math.max(t.value,r.value)))),"Math:min":pe(([t,r])=>(Ne(t),Ne(r),je(Math.min(t.value,r.value)))),"Math:pow":pe(([t,r])=>(Ne(t),Ne(r),je(Math.pow(t.value,r.value)))),"Math:round":pe(([t])=>(Ne(t),je(Math.round(t.value)))),"Math:sign":pe(([t])=>(Ne(t),je(Math.sign(t.value)))),"Math:sin":pe(([t])=>(Ne(t),je(Math.sin(t.value)))),"Math:sinh":pe(([t])=>(Ne(t),je(Math.sinh(t.value)))),"Math:sqrt":pe(([t])=>{Ne(t);const r=Math.sqrt(t.value);return je(r)}),"Math:tan":pe(([t])=>(Ne(t),je(Math.tan(t.value)))),"Math:tanh":pe(([t])=>(Ne(t),je(Math.tanh(t.value)))),"Math:trunc":pe(([t])=>(Ne(t),je(Math.trunc(t.value)))),"Math:rnd":pe(([t,r])=>{if(t&&t.type==="num"&&r&&r.type==="num"){const e=Yh.instance.generateRandomIntegerInRange(t.value,r.value);return e===null?Et:je(e)}return je(Yh.instance.generateNumber0To1())}),"Math:gen_rng":pe(async([t,r])=>{Nn(t);let e="chacha20";if((r==null?void 0:r.type)==="obj"){const s=r.value.get("algorithm");if((s==null?void 0:s.type)!=="str")throw new lr("`options.algorithm` must be string.");e=s.value}else if((r==null?void 0:r.type)!==void 0)throw new lr("`options` must be an object if specified.");if(t.type!=="num"&&t.type!=="str"&&t.type!=="null")throw new lr("`seed` must be either number or string if specified.");switch(e){case"rc4_legacy":return IA(t);case"rc4":return jA(t);case"chacha20":return await DA(t);default:throw new lr("`options.algorithm` must be one of these: `chacha20`, `rc4`, or `rc4_legacy`.")}}),"Num:from_hex":pe(([t])=>(Pr(t),je(parseInt(t.value,16)))),"Str:lf":tr(`
`),"Str:lt":pe(([t,r])=>(Pr(t),Pr(r),t.value<r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:gt":pe(([t,r])=>(Pr(t),Pr(r),t.value>r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:from_codepoint":pe(([t])=>(Ne(t),tr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":pe(([t])=>(fo(t),tr(Array.from(t.value.map(r=>(Ne(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":pe(([t])=>(fo(t),tr(hA.decode(Uint8Array.from(t.value.map(r=>(Ne(r),r.value))))))),"Uri:encode_full":pe(([t])=>(Pr(t),tr(encodeURI(t.value)))),"Uri:encode_component":pe(([t])=>(Pr(t),tr(encodeURIComponent(t.value)))),"Uri:decode_full":pe(([t])=>(Pr(t),tr(decodeURI(t.value)))),"Uri:decode_component":pe(([t])=>(Pr(t),tr(decodeURIComponent(t.value)))),"Arr:create":pe(([t,r])=>{Ne(t);try{return Br(Array(t.value).fill(r??Et))}catch(e){throw t.value<0?new lr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new lr("Arr:create expected integer, got non-integer")}}),"Obj:keys":pe(([t])=>(tl(t),Br(Array.from(t.value.keys()).map(r=>tr(r))))),"Obj:vals":pe(([t])=>(tl(t),Br(Array.from(t.value.values())))),"Obj:kvs":pe(([t])=>(tl(t),Br(Array.from(t.value.entries()).map(([r,e])=>Br([tr(r),e]))))),"Obj:get":pe(([t,r])=>(tl(t),Pr(r),t.value.get(r.value)??Et)),"Obj:set":pe(([t,r,e])=>(tl(t),Pr(r),Nn(e),t.value.set(r.value,e),Et)),"Obj:has":pe(([t,r])=>(tl(t),Pr(r),uf(t.value.has(r.value)))),"Obj:copy":pe(([t])=>(tl(t),Zh(new Map(t.value)))),"Obj:merge":pe(([t,r])=>(tl(t),tl(r),Zh(new Map([...t.value,...r.value])))),"Error:create":pe(([t,r])=>(Pr(t),Ah(t.value,r))),"Async:interval":pe(async([t,r,e],s)=>{Ne(t),ys(r),e&&(Pn(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.topCall(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),pe(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":pe(async([t,r],e)=>{Ne(t),ys(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),pe(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})};var Nf={},UA=()=>{const t="\\ud800-\\udfff",b="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",_="\\ufe0e\\ufe0f",k="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",S=`[${t}]`,E=`[${b}]`,O="\\ud83c[\\udffb-\\udfff]",D=`(?:${E}|${O})`,H=`[^${t}]`,ae="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",se="[\\ud800-\\udbff][\\udc00-\\udfff]",ie="\\u200d",de="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",W=`[${k}]`,K=`${D}?`,Q=`[${_}]?`,X=`(?:${ie}(?:${[H,ae,se].join("|")})${Q+K})*`,ee=Q+K+X,fe=`(?:${[`${H}${E}?`,E,ae,se,S,W].join("|")})`;return new RegExp(`${de}|${O}(?=${O})|${fe+ee}`,"g")},BA=Wi&&Wi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nf,"__esModule",{value:!0});var xp=BA(UA);function Hv(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(xp.default())||[]}var Zs=Nf.toArray=Hv;function ed(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(xp.default());return r===null?0:r.length}var Tf=Nf.length=ed;function M0(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var s=t.match(xp.default());return s?s.slice(r,e).join(""):""}var Of=Nf.substring=M0;function HA(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var s=ed(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=s)return"";r<0&&(r+=s);var h;typeof e>"u"?h=s:(typeof e!="number"&&(e=parseInt(e,10)),h=e>=0?e+r:r);var g=t.match(xp.default());return g?g.slice(r,h).join(""):""}Nf.substr=HA;function qA(t,r,e,s){if(r===void 0&&(r=16),e===void 0&&(e="#"),s===void 0&&(s="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(s)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var h=ed(t);if(h>r)return M0(t,0,r);if(h<r){var g=e.repeat(r-h);return s==="left"?g+t:t+g}return t}Nf.limit=qA;function VA(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var s=Hv(t);if(e>=s.length)return r===""?s.length:-1;if(r==="")return e;var h=Hv(r),g=!1,b;for(b=e;b<s.length;b+=1){for(var _=0;_<h.length&&h[_]===s[b+_];)_+=1;if(_===h.length&&h[_-1]===s[b+_-1]){g=!0;break}}return g?b:-1}var Ff=Nf.indexOf=VA;const wy={num:{to_str:t=>pe(async(r,e)=>tr(t.value.toString())),to_hex:t=>pe(async(r,e)=>tr(t.value.toString(16)))},str:{to_num:t=>pe(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Et:je(s)}),to_arr:t=>pe(async(r,e)=>Br(Zs(t.value).map(s=>tr(s)))),to_unicode_arr:t=>pe(async(r,e)=>Br([...t.value].map(s=>tr(s)))),to_unicode_codepoint_arr:t=>pe(async(r,e)=>Br([...t.value].map(s=>{const h=s.codePointAt(0);return je(h??s.charCodeAt(0))}))),to_char_arr:t=>pe(async(r,e)=>Br(t.value.split("").map(s=>tr(s)))),to_charcode_arr:t=>pe(async(r,e)=>Br(t.value.split("").map(s=>je(s.charCodeAt(0))))),to_utf8_byte_arr:t=>pe(async(r,e)=>Br(Array.from(k0.encode(t.value)).map(s=>je(s)))),len:t=>je(Tf(t.value)),replace:t=>pe(async([r,e],s)=>(Pr(r),Pr(e),tr(t.value.split(r.value).join(e.value)))),index_of:t=>pe(async([r,e],s)=>{Pr(r),e&&Ne(e);const h=e?e.value<0?t.value.length+e.value:e.value:void 0;return je(Ff(t.value,r.value,h))}),incl:t=>pe(async([r],e)=>(Pr(r),t.value.includes(r.value)?Ws:Gs)),trim:t=>pe(async(r,e)=>tr(t.value.trim())),upper:t=>pe(async(r,e)=>tr(t.value.toUpperCase())),lower:t=>pe(async(r,e)=>tr(t.value.toLowerCase())),split:t=>pe(async([r],e)=>(r&&Pr(r),Br(r?t.value.split(r?r.value:"").map(s=>tr(s)):Zs(t.value).map(s=>tr(s))))),slice:t=>pe(async([r,e],s)=>(Ne(r),Ne(e),tr(Of(t.value,r.value,e.value)))),pick:t=>pe(async([r],e)=>{Ne(r);const h=Zs(t.value)[r.value];return h?tr(h):Et}),charcode_at:t=>pe(([r],e)=>{Ne(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?Et:je(s)}),codepoint_at:t=>pe(([r],e)=>{Ne(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?Et:je(s)}),starts_with:t=>pe(async([r,e],s)=>{if(Pr(r),!r.value)return Ws;e&&Ne(e);const h=(e==null?void 0:e.value)??0;if(h<-t.value.length||h>t.value.length)return Gs;const g=h>=0?h:t.value.length+h;return t.value.startsWith(r.value,g)?Ws:Gs}),ends_with:t=>pe(async([r,e],s)=>{if(Pr(r),!r.value)return Ws;e&&Ne(e);const h=(e==null?void 0:e.value)??t.value.length;if(h<-t.value.length||h>t.value.length)return Gs;const g=h>=0?h:t.value.length+h;return t.value.endsWith(r.value,g)?Ws:Gs}),pad_start:t=>pe(([r,e],s)=>{Ne(r);const h=e?(Pr(e),e.value):" ";return tr(t.value.padStart(r.value,h))}),pad_end:t=>pe(([r,e],s)=>{Ne(r);const h=e?(Pr(e),e.value):" ";return tr(t.value.padEnd(r.value,h))})},arr:{len:t=>je(t.value.length),push:t=>pe(async([r],e)=>(Nn(r),t.value.push(r),t)),unshift:t=>pe(async([r],e)=>(Nn(r),t.value.unshift(r),t)),pop:t=>pe(async(r,e)=>t.value.pop()??Et),shift:t=>pe(async(r,e)=>t.value.shift()??Et),concat:t=>pe(async([r],e)=>(fo(r),Br(t.value.concat(r.value)))),slice:t=>pe(async([r,e],s)=>(Ne(r),Ne(e),Br(t.value.slice(r.value,e.value)))),join:t=>pe(async([r],e)=>(r&&Pr(r),tr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>pe(async([r],e)=>{ys(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,je(g)]));return Br(await Promise.all(s))}),filter:t=>pe(async([r],e)=>{ys(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,je(h)]);Pn(b),b.value&&s.push(g)}return Br(s)}),reduce:t=>pe(async([r,e],s)=>{ys(r);const h=e!=null;if(!h&&t.value.length===0)throw new lr("Reduce of empty array without initial value");let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,je(b)])}return g}),find:t=>pe(async([r],e)=>{ys(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,je(s)]);if(Pn(g),g.value)return h}return Et}),incl:t=>pe(async([r],e)=>(Nn(r),t.value.some(s=>Jf(r,s))?Ws:Gs)),index_of:t=>pe(async([r,e],s)=>{if(Nn(r),e){Ne(e);const h=t.value.slice(0,e.value).length,g=t.value.slice(e.value).findIndex(b=>Jf(b,r));return je(g<0?g:g+h)}else return je(t.value.findIndex(h=>Jf(h,r)))}),reverse:t=>pe(async(r,e)=>(t.value.reverse(),Et)),copy:t=>pe(async(r,e)=>Br([...t.value])),sort:t=>pe(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=s(g.slice(0,_),b),S=s(g.slice(_),b),[E,O]=await Promise.all([k,S]);return h(E,O,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);Ne(H),H.value<=0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return ys(r),fo(t),t.value=await s(t.value,r),t}),fill:t=>pe(async([r,e,s],h)=>{const g=r??Et,b=e&&(Ne(e),e.value),_=s&&(Ne(s),s.value);return t.value.fill(g,b,_),t}),repeat:t=>pe(async([r],e)=>{Ne(r);try{return Br(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new lr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new lr("arr.repeat expected integer, got non-integer")}}),splice:t=>pe(async([r,e,s],h)=>{Ne(r);const g=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,b=e!=null?(Ne(e),e.value):t.value.length-g,_=s!=null?(fo(s),s.value):[],k=t.value.splice(g,b,..._);return Br(k)}),flat:t=>pe(async([r],e)=>{if(r=r??je(1),Ne(r),!Number.isInteger(r.value))throw new lr("arr.flat expected integer, got non-integer");if(r.value<0)throw new lr("arr.flat expected non-negative number, got negative");const s=(g,b,_)=>{if(b===0){_.push(...g);return}for(const k of g)Xh(k)?s(k.value,b-1,_):_.push(k)},h=[];return s(t.value,r.value,h),Br(h)}),flat_map:t=>pe(async([r],e)=>{ys(r);const s=t.value.map(async(g,b)=>{const _=await e.call(r,[g,je(b)]);return Xh(_)?_.value:_}),h=await Promise.all(s);return Br(h.flat())}),every:t=>pe(async([r],e)=>{ys(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,je(s)]);if(Pn(g),!g.value)return Gs}return Ws}),some:t=>pe(async([r],e)=>{ys(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,je(s)]);if(Pn(g),g.value)return Ws}return Gs}),insert:t=>pe(async([r,e],s)=>(Ne(r),Nn(e),t.value.splice(r.value,0,e),Et)),remove:t=>pe(async([r],e)=>(Ne(r),t.value.splice(r.value,1)[0]??Et)),at:t=>pe(async([r,e],s)=>(Ne(r),t.value.at(r.value)??e??Et))},error:{name:t=>tr(t.value),info:t=>t.info??Et}};function zA(t,r){if(Object.hasOwn(wy,t.type)){const e=wy[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new lr(`No such prop (${r}) in ${t.type}.`)}else throw new lr(`Cannot read prop of ${t.type}. (reading ${r})`)}const KA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Xs=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let Vs=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});ve(this,"irqRate");ve(this,"irqSleep");this.opts=e;const s={print:pe(([g])=>{Nn(g),this.opts.out&&this.opts.out(g)}),readline:pe(async g=>{const b=g[0];if(Pr(b),this.opts.in==null)return Et;const _=await this.opts.in(b.value);return tr(_)})};if(this.vars=Object.fromEntries(Object.entries({...r,...LA,...s}).map(([g,b])=>[g,KA.const(b)])),this.scope=new Lu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(g,b)=>{switch(g){case"add":this.log("var:add",b);break;case"read":this.log("var:read",b);break;case"write":this.log("var:write",b);break}},!((this.opts.irqRate??300)>=0))throw new py(`Invalid IRQ rate (${this.opts.irqRate}): must be non-negative number`);this.irqRate=this.opts.irqRate??300;const h=g=>()=>new Promise(b=>setTimeout(b,g));if(typeof this.opts.irqSleep=="function")this.irqSleep=this.opts.irqSleep;else if(this.opts.irqSleep===void 0)this.irqSleep=h(5);else if(this.opts.irqSleep>=0)this.irqSleep=h(this.opts.irqSleep);else throw new py("irqSleep must be a function or a positive number.")}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope,[]);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e,[]).catch(s=>(this.handleError(s),Ah("func_failed")))}execFnSimple(r,e){return this._fn(r,e,[])}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof xf?this.opts.err(r):this.opts.err(new cy(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const h of r.members)switch(h.type){case"def":{if(h.dest.type!=="identifier")throw new Kp("Destructuring assignment is invalid in namespace declarations.",h.loc.start);if(h.mut)throw new Kp('No "var" in namespace declaration: '+h.dest.name,h.loc.start);const g=await this._eval(h.expr,s,[]);h.expr.type==="fn"&&gy(g)&&!g.native&&(g.name=s.getNsPrefix()+h.dest.name),await this.define(s,h.dest,g,h.mut);break}case"ns":break;default:{const b=h;throw new Kp("invalid ns member type: "+b.type,b.loc.start)}}}async _fn(r,e,s,h){if(r.native){const g={name:"<native>",pos:h};return r.native(e,{call:(_,k)=>this._fn(_,k,[...s,g]),topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Et}else{const g=r.scope.createChildScope();for(const[_,k]of r.params.entries()){const S=e[_];k.default||Nn(S),this.define(g,k.dest,S??k.default,!0)}const b={name:r.name??"<anonymous>",pos:h};return oA(await this._run(r.statements,g,[...s,b]))}}_evalClause(r,e,s){return this._eval(r,Y1(r)?e.createChildScope():e,s)}_eval(r,e,s){return this.__eval(r,e,s).catch(h=>{if(h.pos)throw h;{const g=h instanceof xf?h:new cy(h);throw g.pos=r.loc.start,g.message=[g.message,...[...s,{pos:g.pos}].map(({pos:b},_)=>{var S;const k=((S=s[_-1])==null?void 0:S.name)??"<root>";return b?`  at ${k} (Line ${b.line}, Column ${b.column})`:`  at ${k}`}).reverse()].join(`
`),g}})}async __eval(r,e,s){if(this.stop)return Et;if(this.irqRate!==0&&this.stepCount%this.irqRate>=this.irqRate-1&&await this.irqSleep(),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new lr("max step exceeded");switch(r.type){case"call":{const h=await this._eval(r.target,e,s);ys(h);const g=await Promise.all(r.args.map(b=>this._eval(b,e,s)));return this._fn(h,g,s,r.loc.start)}case"if":{const h=await this._eval(r.cond,e,s);if(Pn(h),h.value)return this._evalClause(r.then,e,s);for(const g of r.elseif){const b=await this._eval(g.cond,e,s);if(Pn(b),b.value)return this._evalClause(g.then,e,s)}return r.else?this._evalClause(r.else,e,s):Et}case"match":{const h=await this._eval(r.about,e,s);for(const g of r.qs){const b=await this._eval(g.q,e,s);if(Jf(h,b))return await this._evalClause(g.a,e,s)}return r.default?await this._evalClause(r.default,e,s):Et}case"loop":{for(;;){const h=await this._run(r.statements,e.createChildScope(),s);if(h.type==="break")break;if(h.type==="return")return h}return Et}case"for":{if(r.times){const h=await this._eval(r.times,e,s);Ne(h);for(let g=0;g<h.value;g++){const b=await this._evalClause(r.for,e,s);if(b.type==="break")break;if(b.type==="return")return b}}else{const h=await this._eval(r.from,e,s),g=await this._eval(r.to,e,s);Ne(h),Ne(g);for(let b=h.value;b<h.value+g.value;b++){const _=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:je(b)}]])),s);if(_.type==="break")break;if(_.type==="return")return _}}return Et}case"each":{const h=await this._eval(r.items,e,s);fo(h);for(const g of h.value){const b=e.createChildScope();this.define(b,r.var,g,!1);const _=await this._eval(r.for,b,s);if(_.type==="break")break;if(_.type==="return")return _}return Et}case"def":{const h=await this._eval(r.expr,e,s);if(r.attr.length>0){const g=[];for(const b of r.attr)g.push({name:b.name,value:await this._eval(b.value,e,s)});h.attr=g}return r.expr.type==="fn"&&r.dest.type==="identifier"&&gy(h)&&!h.native&&(h.name=r.dest.name),await this.define(e,r.dest,h,r.mut),Et}case"identifier":return e.get(r.name);case"assign":{const h=await this._eval(r.expr,e,s);return await this.assign(e,r.dest,h,s),Et}case"addAssign":{const h=await this._eval(r.dest,e,s);Ne(h);const g=await this._eval(r.expr,e,s);return Ne(g),await this.assign(e,r.dest,je(h.value+g.value),s),Et}case"subAssign":{const h=await this._eval(r.dest,e,s);Ne(h);const g=await this._eval(r.expr,e,s);return Ne(g),await this.assign(e,r.dest,je(h.value-g.value),s),Et}case"null":return Et;case"bool":return uf(r.value);case"num":return je(r.value);case"str":return tr(r.value);case"arr":return Br(await Promise.all(r.value.map(h=>this._eval(h,e,s))));case"obj":{const h=new Map;for(const[g,b]of r.value)h.set(g,await this._eval(b,e,s));return Zh(h)}case"prop":{const h=await this._eval(r.target,e,s);return Gp(h)?h.value.has(r.name)?h.value.get(r.name):Et:zA(h,r.name)}case"index":{const h=await this._eval(r.target,e,s),g=await this._eval(r.index,e,s);if(Xh(h)){Ne(g);const b=h.value[g.value];if(b===void 0)throw new hy(`Index out of range. index: ${g.value} max: ${h.value.length-1}`);return b}else{if(Gp(h))return Pr(g),h.value.has(g.value)?h.value.get(g.value):Et;throw new lr(`Cannot read prop (${Qf(g)}) of ${h.type}.`)}}case"not":{const h=await this._eval(r.expr,e,s);return Pn(h),uf(!h.value)}case"fn":return aA(await Promise.all(r.params.map(async h=>({dest:h.dest,default:h.default?await this._eval(h.default,e,s):h.optional?Et:void 0}))),r.children,e);case"block":return this._run(r.statements,e.createChildScope(),s);case"exists":return uf(e.exists(r.identifier.name));case"tmpl":{let h="";for(const g of r.tmpl)if(typeof g=="string")h+=g;else{const b=await this._eval(g,e,s);h+=Qf(b)}return tr(h)}case"return":{const h=await this._eval(r.expr,e,s);return this.log("block:return",{scope:e.name,val:h}),iA(h)}case"break":return this.log("block:break",{scope:e.name}),lA();case"continue":return this.log("block:continue",{scope:e.name}),uA();case"ns":return Et;case"meta":return Et;case"pow":{const h=e.get("Core:pow");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"mul":{const h=e.get("Core:mul");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"div":{const h=e.get("Core:div");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"rem":{const h=e.get("Core:mod");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"add":{const h=e.get("Core:add");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"sub":{const h=e.get("Core:sub");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"lt":{const h=e.get("Core:lt");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"lteq":{const h=e.get("Core:lteq");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"gt":{const h=e.get("Core:gt");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"gteq":{const h=e.get("Core:gteq");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"eq":{const h=e.get("Core:eq");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"neq":{const h=e.get("Core:neq");ys(h);const g=await this._eval(r.left,e,s),b=await this._eval(r.right,e,s);return this._fn(h,[g,b],s)}case"and":{const h=await this._eval(r.left,e,s);if(Pn(h),h.value){const g=await this._eval(r.right,e,s);return Pn(g),g}else return h}case"or":{const h=await this._eval(r.left,e,s);if(Pn(h),h.value)return h;{const g=await this._eval(r.right,e,s);return Pn(g),g}}default:throw new Error("invalid node type")}}async _run(r,e,s){this.log("block:enter",{scope:e.name});let h=Et;for(let g=0;g<r.length;g++){const b=r[g];if(h=await this._eval(b,e,s),h.type==="return")return this.log("block:return",{scope:e.name,val:h.value}),h;if(h.type==="break")return this.log("block:break",{scope:e.name}),h;if(h.type==="continue")return this.log("block:continue",{scope:e.name}),h}return this.log("block:leave",{scope:e.name,val:h}),h}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async define(r,e,s,h){switch(e.type){case"identifier":{r.add(e.name,{isMutable:h,value:s});break}case"arr":{fo(s),await Promise.all(e.value.map((g,b)=>this.define(r,g,s.value[b]??Et,h)));break}case"obj":{tl(s),await Promise.all([...e.value].map(([g,b])=>this.define(r,b,s.value.get(g)??Et,h)));break}default:throw new lr("The left-hand side of an definition expression must be a variable.")}}async assign(r,e,s,h){switch(e.type){case"identifier":{r.assign(e.name,s);break}case"index":{const g=await this._eval(e.target,r,h),b=await this._eval(e.index,r,h);if(Xh(g)){if(Ne(b),g.value[b.value]===void 0)throw new hy(`Index out of range. index: ${b.value} max: ${g.value.length-1}`);g.value[b.value]=s}else if(Gp(g))Pr(b),g.value.set(b.value,s);else throw new lr(`Cannot read prop (${Qf(b)}) of ${g.type}.`);break}case"prop":{const g=await this._eval(e.target,r,h);tl(g),g.value.set(e.name,s);break}case"arr":{fo(s),await Promise.all(e.value.map((g,b)=>this.assign(r,g,s.value[b]??Et,h)));break}case"obj":{tl(s),await Promise.all([...e.value].map(([g,b])=>this.assign(r,b,s.value.get(g)??Et,h)));break}default:throw new lr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}};Xs([Rr],Vs.prototype,"exec",null);Xs([Rr],Vs.prototype,"execFn",null);Xs([Rr],Vs.prototype,"execFnSimple",null);Xs([Rr],Vs.prototype,"handleError",null);Xs([Rr],Vs.prototype,"log",null);Xs([Rr],Vs.prototype,"collectNs",null);Xs([Rr],Vs.prototype,"collectNsMember",null);Xs([Rr],Vs.prototype,"_fn",null);Xs([Rr],Vs.prototype,"_evalClause",null);Xs([Rr],Vs.prototype,"_eval",null);Xs([Rr],Vs.prototype,"__eval",null);Xs([Rr],Vs.prototype,"_run",null);Xs([Rr],Vs.prototype,"registerAbortHandler",null);Xs([Rr],Vs.prototype,"unregisterAbortHandler",null);Xs([Rr],Vs.prototype,"abort",null);Xs([Rr],Vs.prototype,"define",null);Xs([Rr],Vs.prototype,"assign",null);Xs([Rr],Vs,"collectMetadata",null);class WA{constructor(r,e){ve(this,"pages");ve(this,"firstPageIndex");ve(this,"lastPageIndex");ve(this,"pageIndex");ve(this,"address");ve(this,"_char");ve(this,"line");ve(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var V;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.DoKeyword=14]="DoKeyword",t[t.WhileKeyword=15]="WhileKeyword",t[t.BreakKeyword=16]="BreakKeyword",t[t.ContinueKeyword=17]="ContinueKeyword",t[t.MatchKeyword=18]="MatchKeyword",t[t.CaseKeyword=19]="CaseKeyword",t[t.DefaultKeyword=20]="DefaultKeyword",t[t.IfKeyword=21]="IfKeyword",t[t.ElifKeyword=22]="ElifKeyword",t[t.ElseKeyword=23]="ElseKeyword",t[t.ReturnKeyword=24]="ReturnKeyword",t[t.EvalKeyword=25]="EvalKeyword",t[t.VarKeyword=26]="VarKeyword",t[t.LetKeyword=27]="LetKeyword",t[t.ExistsKeyword=28]="ExistsKeyword",t[t.Not=29]="Not",t[t.NotEq=30]="NotEq",t[t.OpenSharpBracket=31]="OpenSharpBracket",t[t.Sharp3=32]="Sharp3",t[t.Percent=33]="Percent",t[t.And2=34]="And2",t[t.OpenParen=35]="OpenParen",t[t.CloseParen=36]="CloseParen",t[t.Asterisk=37]="Asterisk",t[t.Plus=38]="Plus",t[t.PlusEq=39]="PlusEq",t[t.Comma=40]="Comma",t[t.Minus=41]="Minus",t[t.MinusEq=42]="MinusEq",t[t.Dot=43]="Dot",t[t.Slash=44]="Slash",t[t.Colon=45]="Colon",t[t.Colon2=46]="Colon2",t[t.SemiColon=47]="SemiColon",t[t.Lt=48]="Lt",t[t.LtEq=49]="LtEq",t[t.Out=50]="Out",t[t.Eq=51]="Eq",t[t.Eq2=52]="Eq2",t[t.Arrow=53]="Arrow",t[t.Gt=54]="Gt",t[t.GtEq=55]="GtEq",t[t.Question=56]="Question",t[t.At=57]="At",t[t.OpenBracket=58]="OpenBracket",t[t.BackSlash=59]="BackSlash",t[t.CloseBracket=60]="CloseBracket",t[t.Hat=61]="Hat",t[t.OpenBrace=62]="OpenBrace",t[t.Or2=63]="Or2",t[t.CloseBrace=64]="CloseBrace"})(V||(V={}));class GA{constructor(r,e,s=!1,h,g){ve(this,"kind");ve(this,"pos");ve(this,"hasLeftSpacing");ve(this,"value");ve(this,"children");this.kind=r,this.pos=e,this.hasLeftSpacing=s,this.value=h,this.children=g}}function lt(t,r,e){return new GA(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const Jp=[" ","	"],my=["\r",`
`],$y=/^[0-9]$/,JA=/^[A-Za-z0-9_]$/;class QA{constructor(r){ve(this,"stream");ve(this,"_tokens",[]);typeof r=="string"?this.stream=new WA(r):this.stream=r,this._tokens.push(this.readToken())}getToken(){return this._tokens[0]}is(r){return this.getTokenKind()===r}getTokenKind(){return this.getToken().kind}getTokenValue(){return this.getToken().value}getPos(){return this.getToken().pos}next(){this._tokens[0].kind!==V.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(!this.is(r))throw new rr(`unexpected token: ${V[this.getTokenKind()]}`,this.getPos())}readToken(){let r=!1;for(;;){if(this.stream.eof)return lt(V.EOF,this.stream.getPos(),{hasLeftSpacing:r});if(Jp.includes(this.stream.char)){this.stream.next(),r=!0;continue}const e=this.stream.getPos();if(my.includes(this.stream.char))return this.skipEmptyLines(),lt(V.NewLine,e,{hasLeftSpacing:r});switch(this.stream.char){case"!":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.NotEq,e,{hasLeftSpacing:r})):lt(V.Not,e,{hasLeftSpacing:r});case'"':case"'":return this.readStringLiteral(r);case"#":if(this.stream.next(),!this.stream.eof&&this.stream.char==="#"){if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")return this.stream.next(),lt(V.Sharp3,e,{hasLeftSpacing:r});throw new rr('invalid sequence of characters: "##"',e)}else{if(!this.stream.eof&&this.stream.char==="[")return this.stream.next(),lt(V.OpenSharpBracket,e,{hasLeftSpacing:r});throw new rr('invalid character: "#"',e)}case"%":return this.stream.next(),lt(V.Percent,e,{hasLeftSpacing:r});case"&":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="&")return this.stream.next(),lt(V.And2,e,{hasLeftSpacing:r});throw new rr('invalid character: "&"',e)}case"(":return this.stream.next(),lt(V.OpenParen,e,{hasLeftSpacing:r});case")":return this.stream.next(),lt(V.CloseParen,e,{hasLeftSpacing:r});case"*":return this.stream.next(),lt(V.Asterisk,e,{hasLeftSpacing:r});case"+":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.PlusEq,e,{hasLeftSpacing:r})):lt(V.Plus,e,{hasLeftSpacing:r});case",":return this.stream.next(),lt(V.Comma,e,{hasLeftSpacing:r});case"-":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.MinusEq,e,{hasLeftSpacing:r})):lt(V.Minus,e,{hasLeftSpacing:r});case".":return this.stream.next(),lt(V.Dot,e,{hasLeftSpacing:r});case"/":if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else return lt(V.Slash,e,{hasLeftSpacing:r});case":":return this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),lt(V.Colon2,e,{hasLeftSpacing:r})):lt(V.Colon,e,{hasLeftSpacing:r});case";":return this.stream.next(),lt(V.SemiColon,e,{hasLeftSpacing:r});case"<":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.LtEq,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),lt(V.Out,e,{hasLeftSpacing:r})):lt(V.Lt,e,{hasLeftSpacing:r});case"=":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.Eq2,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),lt(V.Arrow,e,{hasLeftSpacing:r})):lt(V.Eq,e,{hasLeftSpacing:r});case">":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),lt(V.GtEq,e,{hasLeftSpacing:r})):lt(V.Gt,e,{hasLeftSpacing:r});case"?":return this.stream.next(),lt(V.Question,e,{hasLeftSpacing:r});case"@":return this.stream.next(),lt(V.At,e,{hasLeftSpacing:r});case"[":return this.stream.next(),lt(V.OpenBracket,e,{hasLeftSpacing:r});case"\\":return this.stream.next(),lt(V.BackSlash,e,{hasLeftSpacing:r});case"]":return this.stream.next(),lt(V.CloseBracket,e,{hasLeftSpacing:r});case"^":return this.stream.next(),lt(V.Hat,e,{hasLeftSpacing:r});case"`":return this.readTemplate(r);case"{":return this.stream.next(),lt(V.OpenBrace,e,{hasLeftSpacing:r});case"|":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="|")return this.stream.next(),lt(V.Or2,e,{hasLeftSpacing:r});throw new rr('invalid character: "|"',e)}case"}":return this.stream.next(),lt(V.CloseBrace,e,{hasLeftSpacing:r});default:{const s=this.tryReadDigits(r);if(s)return s;const h=this.tryReadWord(r);if(h)return h;throw new rr(`invalid character: "${this.stream.char}"`,e)}}break}}tryReadWord(r){let e="";const s=this.stream.getPos();for(;!this.stream.eof&&JA.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return lt(V.NullKeyword,s,{hasLeftSpacing:r});case"true":return lt(V.TrueKeyword,s,{hasLeftSpacing:r});case"false":return lt(V.FalseKeyword,s,{hasLeftSpacing:r});case"each":return lt(V.EachKeyword,s,{hasLeftSpacing:r});case"for":return lt(V.ForKeyword,s,{hasLeftSpacing:r});case"loop":return lt(V.LoopKeyword,s,{hasLeftSpacing:r});case"do":return lt(V.DoKeyword,s,{hasLeftSpacing:r});case"while":return lt(V.WhileKeyword,s,{hasLeftSpacing:r});case"break":return lt(V.BreakKeyword,s,{hasLeftSpacing:r});case"continue":return lt(V.ContinueKeyword,s,{hasLeftSpacing:r});case"match":return lt(V.MatchKeyword,s,{hasLeftSpacing:r});case"case":return lt(V.CaseKeyword,s,{hasLeftSpacing:r});case"default":return lt(V.DefaultKeyword,s,{hasLeftSpacing:r});case"if":return lt(V.IfKeyword,s,{hasLeftSpacing:r});case"elif":return lt(V.ElifKeyword,s,{hasLeftSpacing:r});case"else":return lt(V.ElseKeyword,s,{hasLeftSpacing:r});case"return":return lt(V.ReturnKeyword,s,{hasLeftSpacing:r});case"eval":return lt(V.EvalKeyword,s,{hasLeftSpacing:r});case"var":return lt(V.VarKeyword,s,{hasLeftSpacing:r});case"let":return lt(V.LetKeyword,s,{hasLeftSpacing:r});case"exists":return lt(V.ExistsKeyword,s,{hasLeftSpacing:r});default:return lt(V.Identifier,s,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",s="";const h=this.stream.getPos();for(;!this.stream.eof&&$y.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&$y.test(this.stream.char);)s+=this.stream.char,this.stream.next();if(s.length===0)throw new rr("digit expected",h)}let g;return s.length>0?g=e+"."+s:g=e,lt(V.NumberLiteral,h,{hasLeftSpacing:r,value:g})}readStringLiteral(r){let e="";const s=this.stream.char;let h="string";const g=this.stream.getPos();for(this.stream.next();h!=="finish";)switch(h){case"string":{if(this.stream.eof)throw new rr("unexpected EOF",g);if(this.stream.char==="\\"){this.stream.next(),h="escape";break}if(this.stream.char===s){this.stream.next(),h="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new rr("unexpected EOF",g);e+=this.stream.char,this.stream.next(),h="string";break}}return lt(V.StringLiteral,g,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let s="",h=[],g="string";const b=this.stream.getPos();let _=b;for(this.stream.next();g!=="finish";)switch(g){case"string":{if(this.stream.eof)throw new rr("unexpected EOF",b);if(this.stream.char==="\\"){this.stream.next(),g="escape";break}if(this.stream.char==="`"){this.stream.next(),s.length>0&&e.push(lt(V.TemplateStringElement,_,{hasLeftSpacing:r,value:s})),g="finish";break}if(this.stream.char==="{"){this.stream.next(),s.length>0&&(e.push(lt(V.TemplateStringElement,_,{hasLeftSpacing:r,value:s})),s=""),_=this.stream.getPos(),g="expr";break}s+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new rr("unexpected EOF",b);s+=this.stream.char,this.stream.next(),g="string";break}case"expr":{if(this.stream.eof)throw new rr("unexpected EOF",b);if(Jp.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){e.push(lt(V.TemplateExprElement,_,{hasLeftSpacing:r,children:h})),_=this.stream.getPos(),h.push(lt(V.EOF,_)),h=[],g="string",this.stream.next();break}const k=this.readToken();h.push(k);break}}return lt(V.Template,b,{hasLeftSpacing:r,children:e})}skipEmptyLines(){for(;!this.stream.eof;){if(Jp.includes(this.stream.char)||my.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="/")if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else{this.stream.prev();break}break}}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function ot(t,r,e,s){const h={type:t};for(const g of Object.keys(r))r[g]!==void 0&&(h[g]=r[g]);return h.loc={start:e,end:s},h}function ZA(t,r,e,s){return ot("call",{target:ot("identifier",{name:t},e,e),args:r},e,s)}class XA{constructor(r){ve(this,"source");ve(this,"index");ve(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}getToken(){return this.eof?lt(V.EOF,{line:-1,column:-1}):this._token}is(r){return this.getTokenKind()===r}getTokenValue(){return this.getToken().value}getTokenKind(){return this.getToken().kind}getPos(){return this.getToken().pos}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:lt(V.EOF,{line:-1,column:-1})}expect(r){if(!this.is(r))throw new rr(`unexpected token: ${V[this.getTokenKind()]}`,this.getPos())}load(){this.eof?this._token=lt(V.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function Kr(t,r){return r?S0(t,!0):td(t,0)}const Qp=[{opKind:"postfix",kind:V.OpenParen,bp:20},{opKind:"postfix",kind:V.OpenBracket,bp:20},{opKind:"infix",kind:V.Dot,lbp:18,rbp:19},{opKind:"infix",kind:V.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:V.Plus,bp:14},{opKind:"prefix",kind:V.Minus,bp:14},{opKind:"prefix",kind:V.Not,bp:14},{opKind:"infix",kind:V.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:V.Slash,lbp:12,rbp:13},{opKind:"infix",kind:V.Percent,lbp:12,rbp:13},{opKind:"infix",kind:V.Plus,lbp:10,rbp:11},{opKind:"infix",kind:V.Minus,lbp:10,rbp:11},{opKind:"infix",kind:V.Lt,lbp:8,rbp:9},{opKind:"infix",kind:V.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:V.Gt,lbp:8,rbp:9},{opKind:"infix",kind:V.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:V.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:V.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:V.And2,lbp:4,rbp:5},{opKind:"infix",kind:V.Or2,lbp:2,rbp:3}];function YA(t,r){const e=t.getPos(),s=t.getTokenKind();t.next(),t.is(V.BackSlash)&&(t.next(),t.expect(V.NewLine),t.next());const h=td(t,r),g=h.loc.end;switch(s){case V.Plus:{if(h.type==="num")return ot("num",{value:h.value},e,g);throw new rr("currently, sign is only supported for number literal.",e)}case V.Minus:{if(h.type==="num")return ot("num",{value:-1*h.value},e,g);throw new rr("currently, sign is only supported for number literal.",e)}case V.Not:return ot("not",{expr:h},e,g);default:throw new rr(`unexpected token: ${V[s]}`,e)}}function eC(t,r,e){const s=t.getPos(),h=t.getTokenKind();if(t.next(),t.is(V.BackSlash)&&(t.next(),t.expect(V.NewLine),t.next()),h===V.Dot){t.expect(V.Identifier);const g=t.getTokenValue();return t.next(),ot("prop",{target:r,name:g},s,t.getPos())}else{const g=td(t,e),b=t.getPos();switch(h){case V.Hat:return ot("pow",{left:r,right:g},s,b);case V.Asterisk:return ot("mul",{left:r,right:g},s,b);case V.Slash:return ot("div",{left:r,right:g},s,b);case V.Percent:return ot("rem",{left:r,right:g},s,b);case V.Plus:return ot("add",{left:r,right:g},s,b);case V.Minus:return ot("sub",{left:r,right:g},s,b);case V.Lt:return ot("lt",{left:r,right:g},s,b);case V.LtEq:return ot("lteq",{left:r,right:g},s,b);case V.Gt:return ot("gt",{left:r,right:g},s,b);case V.GtEq:return ot("gteq",{left:r,right:g},s,b);case V.Eq2:return ot("eq",{left:r,right:g},s,b);case V.NotEq:return ot("neq",{left:r,right:g},s,b);case V.And2:return ot("and",{left:r,right:g},s,b);case V.Or2:return ot("or",{left:r,right:g},s,b);default:throw new rr(`unexpected token: ${V[h]}`,s)}}}function tC(t,r){const e=t.getPos(),s=t.getTokenKind();switch(s){case V.OpenParen:return rC(t,r);case V.OpenBracket:{t.next();const h=Kr(t,!1);return t.expect(V.CloseBracket),t.next(),ot("index",{target:r,index:h},e,t.getPos())}default:throw new rr(`unexpected token: ${V[s]}`,e)}}function S0(t,r){const e=t.getPos();switch(t.getTokenKind()){case V.IfKeyword:{if(r)break;return sC(t)}case V.At:{if(r)break;return nC(t)}case V.MatchKeyword:{if(r)break;return aC(t)}case V.EvalKeyword:{if(r)break;return iC(t)}case V.ExistsKeyword:{if(r)break;return lC(t)}case V.Template:{const s=[];if(r)break;for(const[h,g]of t.getToken().children.entries())switch(g.kind){case V.TemplateStringElement:{const b=t.getToken().children[h+1]??t.lookahead(1);s.push(ot("str",{value:g.value},g.pos,b.pos));break}case V.TemplateExprElement:{const b=new XA(g.children),_=Kr(b,!1);b.expect(V.EOF),s.push(_);break}default:throw new rr(`unexpected token: ${V[g.kind]}`,g.pos)}return t.next(),ot("tmpl",{tmpl:s},e,t.getPos())}case V.StringLiteral:{const s=t.getTokenValue();return t.next(),ot("str",{value:s},e,t.getPos())}case V.NumberLiteral:{const s=Number(t.getTokenValue());return t.next(),ot("num",{value:s},e,t.getPos())}case V.TrueKeyword:case V.FalseKeyword:{const s=t.is(V.TrueKeyword);return t.next(),ot("bool",{value:s},e,t.getPos())}case V.NullKeyword:return t.next(),ot("null",{},e,t.getPos());case V.OpenBrace:return uC(t,r);case V.OpenBracket:return oC(t,r);case V.Identifier:{if(r)break;return N0(t)}case V.OpenParen:{t.next();const s=Kr(t,r);return t.expect(V.CloseParen),t.next(),s}}throw new rr(`unexpected token: ${V[t.getTokenKind()]}`,e)}function rC(t,r){const e=t.getPos(),s=[];for(t.expect(V.OpenParen),t.next(),t.is(V.NewLine)&&t.next();!t.is(V.CloseParen);)switch(s.push(Kr(t,!1)),t.getTokenKind()){case V.NewLine:{t.next();break}case V.Comma:{t.next(),t.is(V.NewLine)&&t.next();break}case V.CloseParen:break;default:throw new rr("separator expected",t.getPos())}return t.expect(V.CloseParen),t.next(),ot("call",{target:r,args:s},e,t.getPos())}function sC(t){const r=t.getPos();t.expect(V.IfKeyword),t.next();const e=Kr(t,!1),s=to(t);t.is(V.NewLine)&&[V.ElifKeyword,V.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const h=[];for(;t.is(V.ElifKeyword);){t.next();const b=Kr(t,!1),_=to(t);t.is(V.NewLine)&&[V.ElifKeyword,V.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),h.push({cond:b,then:_})}let g;return t.is(V.ElseKeyword)&&(t.next(),g=to(t)),ot("if",{cond:e,then:s,elseif:h,else:g},r,t.getPos())}function nC(t){const r=t.getPos();t.expect(V.At),t.next();const e=T0(t);let s;t.is(V.Colon)&&(t.next(),s=bf(t));const h=eh(t);return ot("fn",{params:e,retType:s,children:h},r,t.getPos())}function aC(t){const r=t.getPos();t.expect(V.MatchKeyword),t.next();const e=Kr(t,!1);t.expect(V.OpenBrace),t.next(),t.is(V.NewLine)&&t.next();const s=[];let h;if(t.is(V.CaseKeyword)){s.push(xy(t));let g=hh(t);for(;t.is(V.CaseKeyword);){if(!g)throw new rr("separator expected",t.getPos());s.push(xy(t)),g=hh(t)}if(t.is(V.DefaultKeyword)){if(!g)throw new rr("separator expected",t.getPos());h=by(t),hh(t)}}else t.is(V.DefaultKeyword)&&(h=by(t),hh(t));return t.expect(V.CloseBrace),t.next(),ot("match",{about:e,qs:s,default:h},r,t.getPos())}function xy(t){t.expect(V.CaseKeyword),t.next();const r=Kr(t,!1);t.expect(V.Arrow),t.next();const e=to(t);return{q:r,a:e}}function by(t){return t.expect(V.DefaultKeyword),t.next(),t.expect(V.Arrow),t.next(),to(t)}function iC(t){const r=t.getPos();t.expect(V.EvalKeyword),t.next();const e=eh(t);return ot("block",{statements:e},r,t.getPos())}function lC(t){const r=t.getPos();t.expect(V.ExistsKeyword),t.next();const e=N0(t);return ot("exists",{identifier:e},r,t.getPos())}function N0(t){const r=t.getPos(),e=[];for(;;){if(e.length>0)if(t.is(V.Colon)){if(t.getToken().hasLeftSpacing)throw new rr("Cannot use spaces in a reference.",t.getPos());if(t.next(),t.getToken().hasLeftSpacing)throw new rr("Cannot use spaces in a reference.",t.getPos())}else break;t.expect(V.Identifier),e.push(t.getTokenValue()),t.next()}return ot("identifier",{name:e.join(":")},r,t.getPos())}function uC(t,r){const e=t.getPos();for(t.expect(V.OpenBrace),t.next();t.is(V.NewLine);)t.next();const s=new Map;for(;!t.is(V.CloseBrace);){t.expect(V.Identifier);const h=t.getTokenValue();t.next(),t.expect(V.Colon),t.next();const g=Kr(t,r);switch(s.set(h,g),t.getTokenKind()){case V.NewLine:case V.Comma:{for(t.next();t.is(V.NewLine);)t.next();break}case V.CloseBrace:break;default:throw new rr("separator expected",t.getPos())}}return t.expect(V.CloseBrace),t.next(),ot("obj",{value:s},e,t.getPos())}function oC(t,r){const e=t.getPos();for(t.expect(V.OpenBracket),t.next();t.is(V.NewLine);)t.next();const s=[];for(;!t.is(V.CloseBracket);)switch(s.push(Kr(t,r)),t.getTokenKind()){case V.NewLine:case V.Comma:{for(t.next();t.is(V.NewLine);)t.next();break}case V.CloseBracket:break;default:throw new rr("separator expected",t.getPos())}return t.expect(V.CloseBracket),t.next(),ot("arr",{value:s},e,t.getPos())}function td(t,r){let e;const s=t.getTokenKind(),h=Qp.find(g=>g.opKind==="prefix"&&g.kind===s);for(h!=null?e=YA(t,h.bp):e=S0(t,!1);;){t.is(V.BackSlash)&&(t.next(),t.expect(V.NewLine),t.next());const g=t.getTokenKind(),b=Qp.find(k=>k.opKind==="postfix"&&k.kind===g);if(b!=null){if(b.bp<r)break;if(!([V.OpenBracket,V.OpenParen].includes(g)&&t.getToken().hasLeftSpacing)){e=tC(t,e);continue}}const _=Qp.find(k=>k.opKind==="infix"&&k.kind===g);if(_!=null){if(_.lbp<r)break;e=eC(t,e,_.rbp);continue}break}return e}function rd(t){if(t.is(V.Identifier)){const r=t.getPos(),e=t.getTokenValue();return t.next(),ot("identifier",{name:e},r,t.getPos())}else return Kr(t,!1)}function T0(t){const r=[];for(t.expect(V.OpenParen),t.next(),t.is(V.NewLine)&&t.next();!t.is(V.CloseParen);){const e=rd(t);let s=!1,h;t.is(V.Question)?(t.next(),s=!0):t.is(V.Eq)&&(t.next(),h=Kr(t,!1));let g;switch(t.is(V.Colon)&&(t.next(),g=bf(t)),r.push({dest:e,optional:s,default:h,argType:g}),t.getTokenKind()){case V.NewLine:{t.next();break}case V.Comma:{t.next(),t.is(V.NewLine)&&t.next();break}case V.CloseParen:break;default:throw new rr("separator expected",t.getPos())}}return t.expect(V.CloseParen),t.next(),r}function eh(t){for(t.expect(V.OpenBrace),t.next();t.is(V.NewLine);)t.next();const r=[];for(;!t.is(V.CloseBrace);)switch(r.push(bp(t)),t.getTokenKind()){case V.NewLine:case V.SemiColon:{for(;t.is(V.NewLine)||t.is(V.SemiColon);)t.next();break}case V.CloseBrace:break;default:throw new rr("Multiple statements cannot be placed on a single line.",t.getPos())}return t.expect(V.CloseBrace),t.next(),r}function bf(t){return t.is(V.At)?fC(t):cC(t)}function hh(t){switch(t.getTokenKind()){case V.NewLine:return t.next(),!0;case V.Comma:return t.next(),t.is(V.NewLine)&&t.next(),!0;default:return!1}}function fC(t){const r=t.getPos();t.expect(V.At),t.next(),t.expect(V.OpenParen),t.next();const e=[];for(;!t.is(V.CloseParen);){if(e.length>0)switch(t.getTokenKind()){case V.Comma:{t.next();break}default:throw new rr("separator expected",t.getPos())}const h=bf(t);e.push(h)}t.expect(V.CloseParen),t.next(),t.expect(V.Arrow),t.next();const s=bf(t);return ot("fnTypeSource",{params:e,result:s},r,t.getPos())}function cC(t){const r=t.getPos();let e;t.is(V.Identifier)?(e=t.getTokenValue(),t.next()):(t.expect(V.NullKeyword),t.next(),e="null");let s;return t.is(V.Lt)&&(t.next(),s=bf(t),t.expect(V.Gt),t.next()),ot("namedTypeSource",{name:e,inner:s},r,t.getPos())}function bp(t){const r=t.getPos();switch(t.getTokenKind()){case V.VarKeyword:case V.LetKeyword:return O0(t);case V.At:{if(t.lookahead(1).kind===V.Identifier)return F0(t);break}case V.Out:return pC(t);case V.ReturnKeyword:return dC(t);case V.OpenSharpBracket:return yC(t);case V.EachKeyword:return vC(t);case V.ForKeyword:return gC(t);case V.LoopKeyword:return mC(t);case V.DoKeyword:return $C(t);case V.WhileKeyword:return xC(t);case V.BreakKeyword:return t.next(),ot("break",{},r,t.getPos());case V.ContinueKeyword:return t.next(),ot("continue",{},r,t.getPos())}const e=Kr(t,!1),s=bC(t,e);return s||e}function hC(t){switch(t.getTokenKind()){case V.VarKeyword:case V.LetKeyword:return O0(t);case V.At:return F0(t);default:throw new rr(`unexpected token: ${V[t.getTokenKind()]}`,t.getPos())}}function to(t){if(t.is(V.OpenBrace)){const r=t.getPos(),e=eh(t);return ot("block",{statements:e},r,t.getPos())}else return bp(t)}function O0(t){const r=t.getPos();let e;switch(t.getTokenKind()){case V.LetKeyword:{e=!1;break}case V.VarKeyword:{e=!0;break}default:throw new rr(`unexpected token: ${V[t.getTokenKind()]}`,t.getPos())}t.next();const s=rd(t);let h;t.is(V.Colon)&&(t.next(),h=bf(t)),t.expect(V.Eq),t.next(),t.is(V.NewLine)&&t.next();const g=Kr(t,!1);return ot("def",{dest:s,varType:h,expr:g,mut:e,attr:[]},r,t.getPos())}function F0(t){const r=t.getPos();t.expect(V.At),t.next(),t.expect(V.Identifier);const e=t.getPos(),s=t.getTokenValue();t.next();const h=ot("identifier",{name:s},e,t.getPos()),g=T0(t);let b;t.is(V.Colon)&&(t.next(),b=bf(t));const _=eh(t),k=t.getPos();return ot("def",{dest:h,expr:ot("fn",{params:g,retType:b,children:_},r,k),mut:!1,attr:[]},r,k)}function pC(t){const r=t.getPos();t.expect(V.Out),t.next();const e=Kr(t,!1);return ZA("print",[e],r,t.getPos())}function vC(t){const r=t.getPos();let e=!1;t.expect(V.EachKeyword),t.next(),t.is(V.OpenParen)&&(e=!0,t.next()),t.expect(V.LetKeyword),t.next();const s=rd(t);if(t.is(V.Comma))t.next();else throw new rr("separator expected",t.getPos());const h=Kr(t,!1);e&&(t.expect(V.CloseParen),t.next());const g=to(t);return ot("each",{var:s,items:h,for:g},r,t.getPos())}function gC(t){const r=t.getPos();let e=!1;if(t.expect(V.ForKeyword),t.next(),t.is(V.OpenParen)&&(e=!0,t.next()),t.is(V.LetKeyword)){t.next();const s=t.getPos();t.expect(V.Identifier);const h=t.getTokenValue();t.next();let g;if(t.is(V.Eq)?(t.next(),g=Kr(t,!1)):g=ot("num",{value:0},s,s),t.is(V.Comma))t.next();else throw new rr("separator expected",t.getPos());const b=Kr(t,!1);e&&(t.expect(V.CloseParen),t.next());const _=to(t);return ot("for",{var:h,from:g,to:b,for:_},r,t.getPos())}else{const s=Kr(t,!1);e&&(t.expect(V.CloseParen),t.next());const h=to(t);return ot("for",{times:s,for:h},r,t.getPos())}}function dC(t){const r=t.getPos();t.expect(V.ReturnKeyword),t.next();const e=Kr(t,!1);return ot("return",{expr:e},r,t.getPos())}function yC(t){const r=[];for(;t.is(V.OpenSharpBracket);)r.push(wC(t)),t.expect(V.NewLine),t.next();const e=bp(t);if(e.type!=="def")throw new rr("invalid attribute.",e.loc.start);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function wC(t){const r=t.getPos();t.expect(V.OpenSharpBracket),t.next(),t.expect(V.Identifier);const e=t.getTokenValue();t.next();let s;if(!t.is(V.CloseBracket))s=Kr(t,!0);else{const h=t.getPos();s=ot("bool",{value:!0},h,h)}return t.expect(V.CloseBracket),t.next(),ot("attr",{name:e,value:s},r,t.getPos())}function mC(t){const r=t.getPos();t.expect(V.LoopKeyword),t.next();const e=eh(t);return ot("loop",{statements:e},r,t.getPos())}function $C(t){const r=t.getPos();t.expect(V.DoKeyword),t.next();const e=to(t),s=t.getPos();t.expect(V.WhileKeyword),t.next();const h=Kr(t,!1),g=t.getPos();return ot("loop",{statements:[e,ot("if",{cond:ot("not",{expr:h},s,g),then:ot("break",{},g,g),elseif:[]},s,g)]},r,g)}function xC(t){const r=t.getPos();t.expect(V.WhileKeyword),t.next();const e=Kr(t,!1),s=t.getPos(),h=to(t);return ot("loop",{statements:[ot("if",{cond:ot("not",{expr:e},r,s),then:ot("break",{},s,s),elseif:[]},r,s),h]},r,t.getPos())}function bC(t,r){const e=t.getPos();switch(t.getTokenKind()){case V.Eq:{t.next();const s=Kr(t,!1);return ot("assign",{dest:r,expr:s},e,t.getPos())}case V.PlusEq:{t.next();const s=Kr(t,!1);return ot("addAssign",{dest:r,expr:s},e,t.getPos())}case V.MinusEq:{t.next();const s=Kr(t,!1);return ot("subAssign",{dest:r,expr:s},e,t.getPos())}default:return}}function AC(t){const r=[];for(;t.is(V.NewLine);)t.next();for(;!t.is(V.EOF);){switch(t.getTokenKind()){case V.Colon2:{r.push(R0(t));break}case V.Sharp3:{r.push(CC(t));break}default:{r.push(bp(t));break}}switch(t.getTokenKind()){case V.NewLine:case V.SemiColon:{for(;t.is(V.NewLine)||t.is(V.SemiColon);)t.next();break}case V.EOF:break;default:throw new rr("Multiple statements cannot be placed on a single line.",t.getPos())}}return r}function R0(t){const r=t.getPos();t.expect(V.Colon2),t.next(),t.expect(V.Identifier);const e=t.getTokenValue();t.next();const s=[];for(t.expect(V.OpenBrace),t.next();t.is(V.NewLine);)t.next();for(;!t.is(V.CloseBrace);){switch(t.getTokenKind()){case V.VarKeyword:case V.LetKeyword:case V.At:{s.push(hC(t));break}case V.Colon2:{s.push(R0(t));break}}switch(t.getTokenKind()){case V.NewLine:case V.SemiColon:{for(;t.is(V.NewLine)||t.is(V.SemiColon);)t.next();break}case V.CloseBrace:break;default:throw new rr("Multiple statements cannot be placed on a single line.",t.getPos())}}return t.expect(V.CloseBrace),t.next(),ot("ns",{name:e,members:s},r,t.getPos())}function CC(t){const r=t.getPos();t.expect(V.Sharp3),t.next();let e=null;t.is(V.Identifier)&&(e=t.getTokenValue(),t.next());const s=Kr(t,!0);return ot("meta",{name:e,value:s},r,s.loc.end)}function Yt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Yt(e.expr,r);break}case"return":{e.expr=Yt(e.expr,r);break}case"each":{e.items=Yt(e.items,r),e.for=Yt(e.for,r);break}case"for":{e.from!=null&&(e.from=Yt(e.from,r)),e.to!=null&&(e.to=Yt(e.to,r)),e.times!=null&&(e.times=Yt(e.times,r)),e.for=Yt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Yt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Yt(e.expr,r),e.dest=Yt(e.dest,r);break}case"not":{e.expr=Yt(e.expr,r);break}case"if":{e.cond=Yt(e.cond,r),e.then=Yt(e.then,r);for(const s of e.elseif)s.cond=Yt(s.cond,r),s.then=Yt(s.then,r);e.else!=null&&(e.else=Yt(e.else,r));break}case"fn":{for(const s of e.params)s.default&&(s.default=Yt(s.default,r));for(let s=0;s<e.children.length;s++)e.children[s]=Yt(e.children[s],r);break}case"match":{e.about=Yt(e.about,r);for(const s of e.qs)s.q=Yt(s.q,r),s.a=Yt(s.a,r);e.default!=null&&(e.default=Yt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Yt(e.statements[s],r);break}case"exists":{e.identifier=Yt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=Yt(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Yt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Yt(e.value[s],r);break}case"call":{e.target=Yt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Yt(e.args[s],r);break}case"index":{e.target=Yt(e.target,r),e.index=Yt(e.index,r);break}case"prop":{e.target=Yt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Yt(e.members[s],r);break}case"pow":case"mul":case"div":case"rem":case"add":case"sub":case"lt":case"lteq":case"gt":case"gteq":case"eq":case"neq":case"and":case"or":{e.left=Yt(e.left,r),e.right=Yt(e.right,r);break}}return e}const Mc=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","yield","import","is","meta","module","namespace","new"];function Yo(t,r){throw new rr(`Reserved word "${t}" cannot be used as variable name.`,r.start)}function Zp(t){return Yt(t,r=>{switch(r.type){case"null":{Yo(r.type,r.loc);break}case"bool":{Yo(`${r.value}`,r.loc);break}case"identifier":{Mc.includes(r.name)&&Yo(r.name,r.loc);break}}return r})}function _C(t){switch(t.type){case"def":{Zp(t.dest);break}case"ns":case"attr":case"identifier":case"prop":{Mc.includes(t.name)&&Yo(t.name,t.loc);break}case"meta":{t.name!=null&&Mc.includes(t.name)&&Yo(t.name,t.loc);break}case"each":{Zp(t.var);break}case"for":{t.var!=null&&Mc.includes(t.var)&&Yo(t.var,t.loc);break}case"fn":{for(const r of t.params)Zp(r.dest);break}case"obj":{for(const r of t.value.keys())Mc.includes(r)&&Yo(r,t.loc);break}}return t}function PC(t){for(const r of t)Yt(r,_C);return t}function Ay(t){return{type:"simple",name:t}}function kC(t,r){return{type:"generic",name:t,inners:r}}function EC(t,r){return{type:"fn",params:t,result:r}}function Ch(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Ch(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.params.map(s=>Ch(s)).join(", "),e=Ch(t.result);return`@(${r}) { ${e} }`}}}function Zf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Ay(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Zf(t.inner):r=Ay("any"),kC(t.name,[r])}}throw new rr(`Unknown type: '${Ch(t)}'`,t.loc.start)}else{const r=t.params.map(e=>Zf(e));return EC(r,Zf(t.result))}}function MC(t){switch(t.type){case"def":{t.varType!=null&&Zf(t.varType);break}case"fn":{for(const r of t.params)r.argType!=null&&Zf(r.argType);t.retType!=null&&Zf(t.retType);break}}return t}function SC(t){for(const r of t)Yt(r,MC);return t}var Ku;let NC=(Ku=class{constructor(){ve(this,"plugins");this.plugins={validate:[PC,SC],transform:[]}}static parse(r){return Ku.instance==null&&(Ku.instance=new Ku),Ku.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const s=new QA(r);e=AC(s);for(const h of this.plugins.validate)e=h(e);for(const h of this.plugins.transform)e=h(e);return e}},ve(Ku,"instance"),Ku);const TC="develop",OC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let qv=[],$c=null;function FC(t){return qv=NC.parse(t),JSON.stringify(qv,null,"	")}async function RC(t){$c==null||$c.abort(),$c=new Vs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Lv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Lv(e.val,!0),print:!1});break}}});try{await $c.exec(qv)}catch(r){t.err(r)}}const IC=Object.freeze(Object.defineProperty({__proto__:null,exec:RC,parse:FC,samples:OC,version:TC},Symbol.toStringTag,{value:"Module"}));function fs(t,r,e){let s=e.value;return{configurable:!0,get(){const h=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){s=h}}}let Ap=class I0 extends Error{constructor(e,s){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,I0)}},jC=class extends Ap{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},Af=class extends Ap{constructor(e,s){super(e,s);ve(this,"name","Syntax")}},fr=class extends Ap{constructor(e,s){super(e,s);ve(this,"name","Runtime")}},Cy=class extends fr{constructor(r,e){super(r,e)}},DC=class extends fr{constructor(e,s){super(e,s);ve(this,"name","")}};var po=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let so=class Vv{constructor(r=[],e,s,h){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=h}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Vv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const h=[e,...this.layerdStates];return new Vv(h,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new fr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new fr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){const g=h.get(r);if(!g.isMutable)throw new fr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new fr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};po([fs],so.prototype,"log",null);po([fs],so.prototype,"onUpdated",null);po([fs],so.prototype,"createChildScope",null);po([fs],so.prototype,"createChildNamespaceScope",null);po([fs],so.prototype,"get",null);po([fs],so.prototype,"exists",null);po([fs],so.prototype,"getAll",null);po([fs],so.prototype,"add",null);po([fs],so.prototype,"assign",null);let ph;const LC=new Uint8Array(16);function UC(){if(!ph&&(ph=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ph))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ph(LC)}const mn=[];for(let t=0;t<256;++t)mn.push((t+256).toString(16).slice(1));function BC(t,r=0){return mn[t[r+0]]+mn[t[r+1]]+mn[t[r+2]]+mn[t[r+3]]+"-"+mn[t[r+4]]+mn[t[r+5]]+"-"+mn[t[r+6]]+mn[t[r+7]]+"-"+mn[t[r+8]]+mn[t[r+9]]+"-"+mn[t[r+10]]+mn[t[r+11]]+mn[t[r+12]]+mn[t[r+13]]+mn[t[r+14]]+mn[t[r+15]]}const HC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_y={randomUUID:HC};function qC(t,r,e){if(_y.randomUUID&&!r&&!t)return _y.randomUUID();t=t||{};const s=t.random||(t.rng||UC)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,BC(s)}const Bt={type:"null"},Js={type:"bool",value:!0},Qs={type:"bool",value:!1},Le=t=>({type:"num",value:t}),er=t=>({type:"str",value:t}),of=t=>({type:"bool",value:t}),ep=t=>({type:"obj",value:t}),Hr=t=>({type:"arr",value:t}),VC=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ge=t=>({type:"fn",native:t}),zC=t=>({type:"return",value:t}),KC=()=>({type:"break",value:null}),WC=()=>({type:"continue",value:null}),GC=t=>t.type==="return"?t.value:t,zv=(t,r)=>({type:"error",value:t,info:r});function Aa(t){if(t==null)throw new fr("Expect anything, but got nothing.")}function kn(t){if(t==null)throw new fr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new fr(`Expect boolean, but got ${t.type}.`)}function Fu(t){if(t==null)throw new fr("Expect function, but got nothing.");if(t.type!=="fn")throw new fr(`Expect function, but got ${t.type}.`)}function kr(t){if(t==null)throw new fr("Expect string, but got nothing.");if(t.type!=="str")throw new fr(`Expect string, but got ${t.type}.`)}function Se(t){if(t==null)throw new fr("Expect number, but got nothing.");if(t.type!=="num")throw new fr(`Expect number, but got ${t.type}.`)}function Tu(t){if(t==null)throw new fr("Expect object, but got nothing.");if(t.type!=="obj")throw new fr(`Expect object, but got ${t.type}.`)}function Ro(t){if(t==null)throw new fr("Expect array, but got nothing.");if(t.type!=="arr")throw new fr(`Expect array, but got ${t.type}.`)}function Xp(t){return t.type==="obj"}function tp(t){return t.type==="arr"}function Xf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Kv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>Kv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Wv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Wv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Wv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Gv(t){if(t===null)return Bt;if(typeof t=="boolean")return of(t);if(typeof t=="string")return er(t);if(typeof t=="number")return Le(t);if(Array.isArray(t))return Hr(t.map(r=>Gv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Gv(s));return ep(r)}return Bt}function Yf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const h of t.value)s.push(Yf(h,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[h,g]of t.value)s.push(`${h}: ${Yf(g,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const JC={version:"0.19.0"},QC=JC.version,ZC=new TextEncoder,XC=new TextDecoder,YC={help:er("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":er(QC),"Core:ai":er("kawaii"),"Core:not":ge(([t])=>(kn(t),t.value?Qs:Js)),"Core:eq":ge(([t,r])=>(Aa(t),Aa(r),Xf(t,r)?Js:Qs)),"Core:neq":ge(([t,r])=>(Aa(t),Aa(r),Xf(t,r)?Qs:Js)),"Core:and":ge(([t,r])=>(kn(t),t.value?(kn(r),r.value?Js:Qs):Qs)),"Core:or":ge(([t,r])=>(kn(t),t.value?Js:(kn(r),r.value?Js:Qs))),"Core:add":ge(([t,r])=>(Se(t),Se(r),Le(t.value+r.value))),"Core:sub":ge(([t,r])=>(Se(t),Se(r),Le(t.value-r.value))),"Core:mul":ge(([t,r])=>(Se(t),Se(r),Le(t.value*r.value))),"Core:pow":ge(([t,r])=>{Se(t),Se(r);const e=t.value**r.value;if(isNaN(e))throw new fr("Invalid operation.");return Le(e)}),"Core:div":ge(([t,r])=>{Se(t),Se(r);const e=t.value/r.value;if(isNaN(e))throw new fr("Invalid operation.");return Le(e)}),"Core:mod":ge(([t,r])=>(Se(t),Se(r),Le(t.value%r.value))),"Core:gt":ge(([t,r])=>(Se(t),Se(r),t.value>r.value?Js:Qs)),"Core:lt":ge(([t,r])=>(Se(t),Se(r),t.value<r.value?Js:Qs)),"Core:gteq":ge(([t,r])=>(Se(t),Se(r),t.value>=r.value?Js:Qs)),"Core:lteq":ge(([t,r])=>(Se(t),Se(r),t.value<=r.value?Js:Qs)),"Core:type":ge(([t])=>(Aa(t),er(t.type))),"Core:to_str":ge(([t])=>(Aa(t),er(Yf(t)))),"Core:range":ge(([t,r])=>(Se(t),Se(r),t.value<r.value?Hr(Array.from({length:r.value-t.value+1},(e,s)=>Le(s+t.value))):t.value>r.value?Hr(Array.from({length:t.value-r.value+1},(e,s)=>Le(t.value-s))):Hr([t]))),"Core:sleep":ge(async([t])=>(Se(t),await new Promise(r=>setTimeout(r,t.value)),Bt)),"Core:abort":ge(async([t])=>{throw kr(t),new DC(t.value)}),"Util:uuid":ge(()=>er(qC())),"Json:stringify":ge(([t])=>(Aa(t),er(JSON.stringify(Wv(t))))),"Json:parse":ge(([t])=>{kr(t);try{return Gv(JSON.parse(t.value))}catch{return zv("not_json")}}),"Json:parsable":ge(([t])=>{kr(t);try{JSON.parse(t.value)}catch{return of(!1)}return of(!0)}),"Date:now":ge(()=>Le(Date.now())),"Date:year":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":ge(([t])=>(t&&Se(t),Le(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":ge(([t])=>(kr(t),Le(new Date(t.value).getTime()))),"Date:to_iso_str":ge(([t,r])=>{t&&Se(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Se(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let h;if(s===0)h="Z";else{const D=Math.sign(s),H=Math.floor(Math.abs(s)/60),ae=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+D*H),e.setUTCMinutes(e.getUTCMinutes()+D*ae);const se=s>0?"+":"-",ie=H.toString().padStart(2,"0"),de=ae.toString().padStart(2,"0");h=`${se}${ie}:${de}`}const g=e.getUTCFullYear().toString().padStart(4,"0"),b=(e.getUTCMonth()+1).toString().padStart(2,"0"),_=e.getUTCDate().toString().padStart(2,"0"),k=e.getUTCHours().toString().padStart(2,"0"),S=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),O=e.getUTCMilliseconds().toString().padStart(3,"0");return er(`${g}-${b}-${_}T${k}:${S}:${E}.${O}${h}`)}),"Math:Infinity":Le(1/0),"Math:E":Le(Math.E),"Math:LN2":Le(Math.LN2),"Math:LN10":Le(Math.LN10),"Math:LOG2E":Le(Math.LOG2E),"Math:LOG10E":Le(Math.LOG10E),"Math:PI":Le(Math.PI),"Math:SQRT1_2":Le(Math.SQRT1_2),"Math:SQRT2":Le(Math.SQRT2),"Math:abs":ge(([t])=>(Se(t),Le(Math.abs(t.value)))),"Math:acos":ge(([t])=>(Se(t),Le(Math.acos(t.value)))),"Math:acosh":ge(([t])=>(Se(t),Le(Math.acosh(t.value)))),"Math:asin":ge(([t])=>(Se(t),Le(Math.asin(t.value)))),"Math:asinh":ge(([t])=>(Se(t),Le(Math.asinh(t.value)))),"Math:atan":ge(([t])=>(Se(t),Le(Math.atan(t.value)))),"Math:atanh":ge(([t])=>(Se(t),Le(Math.atanh(t.value)))),"Math:atan2":ge(([t,r])=>(Se(t),Se(r),Le(Math.atan2(t.value,r.value)))),"Math:cbrt":ge(([t])=>(Se(t),Le(Math.cbrt(t.value)))),"Math:ceil":ge(([t])=>(Se(t),Le(Math.ceil(t.value)))),"Math:clz32":ge(([t])=>(Se(t),Le(Math.clz32(t.value)))),"Math:cos":ge(([t])=>(Se(t),Le(Math.cos(t.value)))),"Math:cosh":ge(([t])=>(Se(t),Le(Math.cosh(t.value)))),"Math:exp":ge(([t])=>(Se(t),Le(Math.exp(t.value)))),"Math:expm1":ge(([t])=>(Se(t),Le(Math.expm1(t.value)))),"Math:floor":ge(([t])=>(Se(t),Le(Math.floor(t.value)))),"Math:fround":ge(([t])=>(Se(t),Le(Math.fround(t.value)))),"Math:hypot":ge(([t])=>{Ro(t);const r=[];for(const e of t.value)Se(e),r.push(e.value);return Le(Math.hypot(...r))}),"Math:imul":ge(([t,r])=>(Se(t),Se(r),Le(Math.imul(t.value,r.value)))),"Math:log":ge(([t])=>(Se(t),Le(Math.log(t.value)))),"Math:log1p":ge(([t])=>(Se(t),Le(Math.log1p(t.value)))),"Math:log10":ge(([t])=>(Se(t),Le(Math.log10(t.value)))),"Math:log2":ge(([t])=>(Se(t),Le(Math.log2(t.value)))),"Math:max":ge(([t,r])=>(Se(t),Se(r),Le(Math.max(t.value,r.value)))),"Math:min":ge(([t,r])=>(Se(t),Se(r),Le(Math.min(t.value,r.value)))),"Math:pow":ge(([t,r])=>(Se(t),Se(r),Le(Math.pow(t.value,r.value)))),"Math:round":ge(([t])=>(Se(t),Le(Math.round(t.value)))),"Math:sign":ge(([t])=>(Se(t),Le(Math.sign(t.value)))),"Math:sin":ge(([t])=>(Se(t),Le(Math.sin(t.value)))),"Math:sinh":ge(([t])=>(Se(t),Le(Math.sinh(t.value)))),"Math:sqrt":ge(([t])=>{Se(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new fr("Invalid operation.");return Le(r)}),"Math:tan":ge(([t])=>(Se(t),Le(Math.tan(t.value)))),"Math:tanh":ge(([t])=>(Se(t),Le(Math.tanh(t.value)))),"Math:trunc":ge(([t])=>(Se(t),Le(Math.trunc(t.value)))),"Math:rnd":ge(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Le(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Le(Math.random())),"Math:gen_rng":ge(([t])=>{if(Aa(t),t.type!=="num"&&t.type!=="str")return Bt;const r=Uo(t.value.toString());return ge(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Le(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Le(r()))}),"Num:to_hex":ge(([t])=>(Se(t),er(t.value.toString(16)))),"Num:from_hex":ge(([t])=>(kr(t),Le(parseInt(t.value,16)))),"Str:lf":er(`
`),"Str:lt":ge(([t,r])=>(kr(t),kr(r),t.value<r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:gt":ge(([t,r])=>(kr(t),kr(r),t.value>r.value?Le(-1):t.value===r.value?Le(0):Le(1))),"Str:from_codepoint":ge(([t])=>(Se(t),er(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ge(([t])=>(Ro(t),er(Array.from(t.value.map(r=>(Se(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ge(([t])=>(Ro(t),er(XC.decode(Uint8Array.from(t.value.map(r=>(Se(r),r.value))))))),"Uri:encode_full":ge(([t])=>(kr(t),er(encodeURI(t.value)))),"Uri:encode_component":ge(([t])=>(kr(t),er(encodeURIComponent(t.value)))),"Uri:decode_full":ge(([t])=>(kr(t),er(decodeURI(t.value)))),"Uri:decode_component":ge(([t])=>(kr(t),er(decodeURIComponent(t.value)))),"Arr:create":ge(([t,r])=>{Se(t);try{return Hr(Array(t.value).fill(r??Bt))}catch(e){throw t.value<0?new fr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new fr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ge(([t])=>(Tu(t),Hr(Array.from(t.value.keys()).map(r=>er(r))))),"Obj:vals":ge(([t])=>(Tu(t),Hr(Array.from(t.value.values())))),"Obj:kvs":ge(([t])=>(Tu(t),Hr(Array.from(t.value.entries()).map(([r,e])=>Hr([er(r),e]))))),"Obj:get":ge(([t,r])=>(Tu(t),kr(r),t.value.get(r.value)??Bt)),"Obj:set":ge(([t,r,e])=>(Tu(t),kr(r),Aa(e),t.value.set(r.value,e),Bt)),"Obj:has":ge(([t,r])=>(Tu(t),kr(r),of(t.value.has(r.value)))),"Obj:copy":ge(([t])=>(Tu(t),ep(new Map(t.value)))),"Obj:merge":ge(([t,r])=>(Tu(t),Tu(r),ep(new Map([...t.value,...r.value])))),"Error:create":ge(([t,r])=>(kr(t),zv(t.value,r))),"Async:interval":ge(async([t,r,e],s)=>{Se(t),Fu(r),e&&(kn(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.topCall(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),ge(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":ge(async([t,r],e)=>{Se(t),Fu(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),ge(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},Py={num:{to_str:t=>ge(async(r,e)=>er(t.value.toString()))},str:{to_num:t=>ge(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Bt:Le(s)}),to_arr:t=>ge(async(r,e)=>Hr(Zs(t.value).map(s=>er(s)))),to_unicode_arr:t=>ge(async(r,e)=>Hr([...t.value].map(s=>er(s)))),to_unicode_codepoint_arr:t=>ge(async(r,e)=>Hr([...t.value].map(s=>{const h=s.codePointAt(0);return Le(h??s.charCodeAt(0))}))),to_char_arr:t=>ge(async(r,e)=>Hr(t.value.split("").map(s=>er(s)))),to_charcode_arr:t=>ge(async(r,e)=>Hr(t.value.split("").map(s=>Le(s.charCodeAt(0))))),to_utf8_byte_arr:t=>ge(async(r,e)=>Hr(Array.from(ZC.encode(t.value)).map(s=>Le(s)))),len:t=>Le(Tf(t.value)),replace:t=>ge(async([r,e],s)=>(kr(r),kr(e),er(t.value.split(r.value).join(e.value)))),index_of:t=>ge(async([r,e],s)=>{kr(r),e&&Se(e);const h=e?e.value<0?t.value.length+e.value:e.value:void 0;return Le(Ff(t.value,r.value,h))}),incl:t=>ge(async([r],e)=>(kr(r),t.value.includes(r.value)?Js:Qs)),trim:t=>ge(async(r,e)=>er(t.value.trim())),upper:t=>ge(async(r,e)=>er(t.value.toUpperCase())),lower:t=>ge(async(r,e)=>er(t.value.toLowerCase())),split:t=>ge(async([r],e)=>(r&&kr(r),Hr(r?t.value.split(r?r.value:"").map(s=>er(s)):Zs(t.value).map(s=>er(s))))),slice:t=>ge(async([r,e],s)=>(Se(r),Se(e),er(Of(t.value,r.value,e.value)))),pick:t=>ge(async([r],e)=>{Se(r);const h=Zs(t.value)[r.value];return h?er(h):Bt}),charcode_at:t=>ge(([r],e)=>{Se(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?Bt:Le(s)}),codepoint_at:t=>ge(([r],e)=>{Se(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?Bt:Le(s)}),starts_with:t=>ge(async([r,e],s)=>{if(kr(r),!r.value)return Js;e&&Se(e);const h=(e==null?void 0:e.value)??0;if(h<-t.value.length||h>t.value.length)return Qs;const g=h>=0?h:t.value.length+h;return t.value.startsWith(r.value,g)?Js:Qs}),ends_with:t=>ge(async([r,e],s)=>{if(kr(r),!r.value)return Js;e&&Se(e);const h=(e==null?void 0:e.value)??t.value.length;if(h<-t.value.length||h>t.value.length)return Qs;const g=h>=0?h:t.value.length+h;return t.value.endsWith(r.value,g)?Js:Qs}),pad_start:t=>ge(([r,e],s)=>{Se(r);const h=e?(kr(e),e.value):" ";return er(t.value.padStart(r.value,h))}),pad_end:t=>ge(([r,e],s)=>{Se(r);const h=e?(kr(e),e.value):" ";return er(t.value.padEnd(r.value,h))})},arr:{len:t=>Le(t.value.length),push:t=>ge(async([r],e)=>(Aa(r),t.value.push(r),t)),unshift:t=>ge(async([r],e)=>(Aa(r),t.value.unshift(r),t)),pop:t=>ge(async(r,e)=>t.value.pop()??Bt),shift:t=>ge(async(r,e)=>t.value.shift()??Bt),concat:t=>ge(async([r],e)=>(Ro(r),Hr(t.value.concat(r.value)))),slice:t=>ge(async([r,e],s)=>(Se(r),Se(e),Hr(t.value.slice(r.value,e.value)))),join:t=>ge(async([r],e)=>(r&&kr(r),er(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>ge(async([r],e)=>{Fu(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,Le(g)]));return Hr(await Promise.all(s))}),filter:t=>ge(async([r],e)=>{Fu(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,Le(h)]);kn(b),b.value&&s.push(g)}return Hr(s)}),reduce:t=>ge(async([r,e],s)=>{Fu(r);const h=e!=null;if(!h&&t.value.length===0)throw new fr("Reduce of empty array without initial value");let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,Le(b)])}return g}),find:t=>ge(async([r],e)=>{Fu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Le(s)]);if(kn(g),g.value)return h}return Bt}),incl:t=>ge(async([r],e)=>(Aa(r),t.value.some(s=>Xf(r,s))?Js:Qs)),index_of:t=>ge(async([r,e],s)=>{if(Aa(r),e){Se(e);const h=t.value.slice(0,e.value).length,g=t.value.slice(e.value).findIndex(b=>Xf(b,r));return Le(g<0?g:g+h)}else return Le(t.value.findIndex(h=>Xf(h,r)))}),reverse:t=>ge(async(r,e)=>(t.value.reverse(),Bt)),copy:t=>ge(async(r,e)=>Hr([...t.value])),sort:t=>ge(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=s(g.slice(0,_),b),S=s(g.slice(_),b),[E,O]=await Promise.all([k,S]);return h(E,O,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);Se(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return Fu(r),Ro(t),t.value=await s(t.value,r),t}),fill:t=>ge(async([r,e,s],h)=>{const g=r??Bt,b=e&&(Se(e),e.value),_=s&&(Se(s),s.value);return t.value.fill(g,b,_),t}),repeat:t=>ge(async([r],e)=>{Se(r);try{return Hr(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new fr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new fr("arr.repeat expected integer, got non-integer")}}),splice:t=>ge(async([r,e,s],h)=>{Se(r);const g=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,b=e!=null?(Se(e),e.value):t.value.length-g,_=s!=null?(Ro(s),s.value):[],k=t.value.splice(g,b,..._);return Hr(k)}),flat:t=>ge(async([r],e)=>{if(r=r??Le(1),Se(r),!Number.isInteger(r.value))throw new fr("arr.flat expected integer, got non-integer");if(r.value<0)throw new fr("arr.flat expected non-negative number, got negative");const s=(g,b,_)=>{if(b===0){_.push(...g);return}for(const k of g)tp(k)?s(k.value,b-1,_):_.push(k)},h=[];return s(t.value,r.value,h),Hr(h)}),flat_map:t=>ge(async([r],e)=>{Fu(r);const s=t.value.map(async(g,b)=>{const _=await e.call(r,[g,Le(b)]);return tp(_)?_.value:_}),h=await Promise.all(s);return Hr(h.flat())}),every:t=>ge(async([r],e)=>{Fu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Le(s)]);if(kn(g),!g.value)return Qs}return Js}),some:t=>ge(async([r],e)=>{Fu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Le(s)]);if(kn(g),g.value)return Js}return Qs}),insert:t=>ge(async([r,e],s)=>(Se(r),Aa(e),t.value.splice(r.value,0,e),Bt)),remove:t=>ge(async([r],e)=>(Se(r),t.value.splice(r.value,1)[0]??Bt)),at:t=>ge(async([r,e],s)=>(Se(r),t.value.at(r.value)??e??Bt))},error:{name:t=>er(t.value),info:t=>t.info??Bt}};function e_(t,r){if(Object.hasOwn(Py,t.type)){const e=Py[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new fr(`No such prop (${r}) in ${t.type}.`)}else throw new fr(`Cannot read prop of ${t.type}. (reading ${r})`)}const t_={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Sa=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const j0=300,r_=j0-1;let Bn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const s={print:ge(([h])=>{Aa(h),this.opts.out&&this.opts.out(h)}),readline:ge(async h=>{const g=h[0];if(kr(g),this.opts.in==null)return Bt;const b=await this.opts.in(g.value);return er(b)})};this.vars=Object.fromEntries(Object.entries({...r,...YC,...s}).map(([h,g])=>[h,t_.const(g)])),this.scope=new so([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),zv("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof Ap?this.opts.err(r):this.opts.err(new jC(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const h of r.members)switch(h.type){case"def":{if(h.mut)throw new Error("Namespaces cannot include mutable variable: "+h.name);const g={isMutable:h.mut,value:await this._eval(h.expr,s)};s.add(h.name,g);break}case"ns":break;default:throw new Error("invalid ns member type: "+h.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Bt;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],{isMutable:!0,value:e[g]??Bt});const h=r.scope.createChildScope(s);return GC(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Bt;if(this.stepCount%j0===r_&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new fr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);Fu(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(kn(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(kn(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Bt}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(Xf(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Bt}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return Bt}case"for":{if(r.times){const s=await this._eval(r.times,e);Se(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);Se(s),Se(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Le(g)}]])));if(b.type==="break")break;if(b.type==="return")return b}}return Bt}case"each":{const s=await this._eval(r.items,e);Ro(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(g.type==="break")break;if(g.type==="return")return g}return Bt}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,{isMutable:r.mut,value:s}),Bt}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),Bt}case"addAssign":{const s=await this._eval(r.dest,e);Se(s);const h=await this._eval(r.expr,e);return Se(h),await this.assign(e,r.dest,Le(s.value+h.value)),Bt}case"subAssign":{const s=await this._eval(r.dest,e);Se(s);const h=await this._eval(r.expr,e);return Se(h),await this.assign(e,r.dest,Le(s.value-h.value)),Bt}case"null":return Bt;case"bool":return of(r.value);case"num":return Le(r.value);case"str":return er(r.value);case"arr":return Hr(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return ep(s)}case"prop":{const s=await this._eval(r.target,e);return Xp(s)?s.value.has(r.name)?s.value.get(r.name):Bt:e_(s,r.name)}case"index":{const s=await this._eval(r.target,e),h=await this._eval(r.index,e);if(tp(s)){Se(h);const g=s.value[h.value];if(g===void 0)throw new Cy(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}else{if(Xp(s))return kr(h),s.value.has(h.value)?s.value.get(h.value):Bt;throw new fr(`Cannot read prop (${Yf(h)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return kn(s),of(!s.value)}case"fn":return VC(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return of(e.exists(r.identifier.name));case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);s+=Yf(g)}return er(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),zC(s)}case"break":return this.log("block:break",{scope:e.name}),KC();case"continue":return this.log("block:continue",{scope:e.name}),WC();case"ns":return Bt;case"meta":return Bt;case"and":{const s=await this._eval(r.left,e);if(kn(s),s.value){const h=await this._eval(r.right,e);return kn(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(kn(s),s.value)return s;{const h=await this._eval(r.right,e);return kn(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=Bt;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r),g=await this._eval(e.index,r);if(tp(h)){if(Se(g),h.value[g.value]===void 0)throw new Cy(`Index out of range. index: ${g.value} max: ${h.value.length-1}`);h.value[g.value]=s}else if(Xp(h))kr(g),h.value.set(g.value,s);else throw new fr(`Cannot read prop (${Yf(g)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Tu(h),h.value.set(e.name,s)}else if(e.type==="arr")Ro(s),await Promise.all(e.value.map((h,g)=>this.assign(r,h,s.value[g]??Bt)));else if(e.type==="obj")Tu(s),await Promise.all([...e.value].map(([h,g])=>this.assign(r,g,s.value.get(h)??Bt)));else throw new fr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Sa([fs],Bn.prototype,"exec",null);Sa([fs],Bn.prototype,"execFn",null);Sa([fs],Bn.prototype,"execFnSimple",null);Sa([fs],Bn.prototype,"handleError",null);Sa([fs],Bn.prototype,"log",null);Sa([fs],Bn.prototype,"collectNs",null);Sa([fs],Bn.prototype,"collectNsMember",null);Sa([fs],Bn.prototype,"_fn",null);Sa([fs],Bn.prototype,"_eval",null);Sa([fs],Bn.prototype,"_run",null);Sa([fs],Bn.prototype,"registerAbortHandler",null);Sa([fs],Bn.prototype,"unregisterAbortHandler",null);Sa([fs],Bn.prototype,"abort",null);Sa([fs],Bn.prototype,"assign",null);Sa([fs],Bn,"collectMetadata",null);function s_(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function ff(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,ff.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}s_(ff,Error);function Yp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}ff.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=Yp("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+Yp("",h.column-1," ")+Yp("",O,"^")}else r+=`
 at `+b}return r};ff.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function ky(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:or,Main:xi},g=or,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="!",Cr="[",qt=".",_r="if",Vt="elif",ye="else",qe="match",Te="=>",et="*",ct="eval",At="exists",J="`",Z='"',oe="'",Pe='\\"',ce="\\'",Ee="true",De="false",Oe="null",Fe="@",Ce="@(",ft="<",Ke=">",st=`\r
`,tt=/^[A-Z0-9_:]/i,gt=/^[%*-+\-\/<>\^]/,Tt=/^[^`{]/,Mt=/^[{}`]/,Gt=/^[+\-]/,kt=/^[1-9]/,ht=/^[0-9]/,wr=/^[,;]/,hs=/^[A-Z_]/i,ls=/^[A-Z0-9_]/i,St=/^[\r\n]/,zt=/^[ \t\r\n]/,Sn=/^[ \t]/,mr=F(),nl=j("//",!1),al=j("/*",!1),cr=j("*/",!1),Jt=j("(",!1),Xr=j(")",!1),zn=j("::",!1),Ot=j("{",!1),dt=j("}",!1),Ir=j("###",!1),ar=j("let",!1),ut=j(":",!1),Qt=j("=",!1),bs=j("var",!1),Zt=j("<:",!1),Xt=j("#[",!1),Yr=j("]",!1),Ha=j("each",!1),jr=j(",",!1),ps=j("for",!1),Fs=j("return",!1),yt=Nt([["A","Z"],["0","9"],"_",":"],!1,!0),Ut=j("loop",!1),Ys=j("break",!1),Dr=j("continue",!1),Lr=j("+=",!1),il=j("-=",!1),qa=j("\\",!1),ll=j("||",!1),ul=j("&&",!1),Va=j("==",!1),za=j("!=",!1),ol=j("<=",!1),fl=j(">=",!1),cl=Nt(["%",["*","+"],"-","/","<",">","^"],!1,!1),hl=j("!",!1),Kn=j("[",!1),en=j(".",!1),Wn=j("if",!1),Ka=j("elif",!1),pl=j("else",!1),Wa=j("match",!1),Rs=j("=>",!1),vl=j("*",!1),gl=j("eval",!1),dl=j("exists",!1),As=j("`",!1),Is=Nt(["`","{"],!0,!1),Gn=Nt(["{","}","`"],!1,!1),tn=j('"',!1),rn=j("'",!1),yl=j('\\"',!1),sn=j("\\'",!1),vs=Nt(["+","-"],!1,!1),js=Nt([["1","9"]],!1,!1),Sr=Nt([["0","9"]],!1,!1),nn=j("true",!1),an=j("false",!1),ln=j("null",!1),gs=Nt([",",";"],!1,!1),un=j("@",!1),Ds=j("@(",!1),Ga=j("<",!1),ur=j(">",!1),Ja=Nt([["A","Z"],"_"],!1,!0),$r=Nt([["A","Z"],["0","9"],"_"],!1,!0),wl=j(`\r
`,!1),on=Nt(["\r",`
`],!1,!1),ml=Nt([" ","	","\r",`
`],!1,!1),Ls=Nt([" ","	"],!1,!1),$l=function(f){return f.join("")},Jn=function(){return o()},xl=function(){return o()},Qa=function(){return" ".repeat(o().length)},bl=function(){return o().replace(/[^\n]/g," ")},Al=function(f){return f??[]},Za=function(f,d){return d},Cl=function(f,d){return[f,...d]},Xa=function(f,d){return d},_l=function(f,d){return[f,...d]},Ya=function(f,d){return d},Pl=function(f,d){return[f,...d]},ei=function(f){return f},kl=function(f,d){return ue("ns",{name:f,members:d})},Qn=function(f,d){return ue("meta",{name:f,value:d})},El=function(f){return ue("meta",{name:null,value:f})},Zn=function(f,d,A){return ue("def",{name:f,varType:d,expr:A,mut:!1,attr:[]})},Ml=function(f,d,A){return ue("def",{name:f,varType:d,expr:A,mut:!0,attr:[]})},ti=function(f){return ue("identifier",{name:"print",chain:[ue("callChain",{args:[f]})]})},Sl=function(f,d){return ue("attr",{name:f,value:d??ue("bool",{value:!0})})},Nl=function(f,d,A){return ue("each",{var:f,items:d,for:A})},Tl=function(f,d,A){return ue("each",{var:f,items:d,for:A})},Ol=function(f,d){return d},Fl=function(f,d,A,w){return ue("for",{var:f,from:d??ue("num",{value:0}),to:A,for:w})},Rl=function(f,d){return d},Il=function(f,d,A,w){return ue("for",{var:f,from:d??ue("num",{value:0}),to:A,for:w})},jl=function(f,d){return ue("for",{times:f,for:d})},Dl=function(f,d){return ue("for",{times:f,for:d})},Ll=function(f){return ue("return",{expr:f})},Ul=function(f){return ue("loop",{statements:f})},Bl=function(){return ue("break",{})},Hl=function(){return ue("continue",{})},ql=function(f,d,A){return d==="+="?ue("addAssign",{dest:f,expr:A}):d==="-="?ue("subAssign",{dest:f,expr:A}):ue("assign",{dest:f,expr:A})},ri=function(f,d,A){return{op:d,term:A}},Vl=function(f,d){return ue("infix",{operands:[f,...d.map(A=>A.term)],operators:d.map(A=>A.op.value),operatorLocs:d.map(A=>A.op.loc)})},zl=function(){const f=te();return{value:o(),loc:{start:f.start.offset,end:f.end.offset-1}}},Kl=function(f){return ue("not",{expr:f})},Wl=function(f,d){return f.chain?{...f,chain:[...f.chain,...d]}:{...f,chain:d}},Gl=function(f){return ue("callChain",{args:f??[]})},Xn=function(f,d){return d},Jl=function(f,d){return[f,...d]},si=function(f){return ue("indexChain",{index:f})},Ql=function(f){return ue("propChain",{name:f})},Zl=function(f,d,A,w){return ue("if",{cond:f,then:d,elseif:A??[],else:w})},Xl=function(f,d){return[f,...d]},ni=function(f,d){return{cond:f,then:d}},Yl=function(f){return f},Yn=function(f,d,A){return{q:d,a:A}},eu=function(f,d,A){return ue("match",{about:f,qs:d??[],default:A})},tu=function(f){return ue("block",{statements:f})},ru=function(f){return ue("exists",{identifier:f})},su=function(f){return ue("identifier",{name:f})},nu=function(f){return ue("tmpl",{tmpl:f})},ai=function(f){return f.join("")},ii=function(f){return f},li=function(f){return ue("str",{value:f.join("")})},ui=function(f){return f},au=function(f){return ue("str",{value:f.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return ue("num",{value:parseFloat(o())})},fi=function(){return ue("num",{value:parseFloat(o())})},ci=function(){return ue("num",{value:parseInt(o(),10)})},uu=function(){return ue("num",{value:parseInt(o(),10)})},hi=function(){return ue("bool",{value:!0})},ou=function(){return ue("bool",{value:!1})},fu=function(){return ue("null",{})},pi=function(f,d){return{k:f,v:d}},cu=function(f){const d=new Map;for(const A of f)d.set(A.k,A.v);return ue("obj",{value:d})},vi=function(f){return f},hu=function(f){return ue("arr",{value:f})},pu=function(f,d){return{name:f,argType:d}},gi=function(f,d){return[f,...d]},vu=function(f,d,A,w,a,l){return(f.length>0||A.length>0)&&R("Cannot use spaces before or after the function name."),ue("def",{name:d,expr:ue("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},di=function(f,d,A){return ue("fn",{args:f??[],retType:d},A??[])},ea=function(f){return f},gu=function(f){return ue("arr",{value:f})},ta=function(f,d){return{k:f,v:d}},du=function(f){const d=new Map;for(const A of f)d.set(A.k,A.v);return ue("obj",{value:d})},yu=function(f,d){return ue("fnTypeSource",{args:f??[],result:d})},yi=function(f,d){return[f,...d]},wu=function(f,d){return ue("namedTypeSource",{name:f,inner:d})},wi=function(f){return ue("namedTypeSource",{name:f,inner:null})},mi=function(){return o()},mu=function(){return o()},$i=function(f){return ue("block",{statements:f??[]})},c=r.peg$currPos|0,re=c,Cs=[{line:1,column:1}],xr=c,fn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,T={},es;if(r.startRule){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function o(){return t.substring(re,c)}function te(){return he(re,c)}function R(f,d){throw d=d!==void 0?d:he(re,c),$u(f,d)}function j(f,d){return{type:"literal",text:f,ignoreCase:d}}function Nt(f,d,A){return{type:"class",parts:f,inverted:d,ignoreCase:A}}function F(){return{type:"any"}}function z(){return{type:"end"}}function Us(f){var d=Cs[f],A;if(d)return d;if(f>=Cs.length)A=Cs.length-1;else for(A=f;!Cs[--A];);for(d=Cs[A],d={line:d.line,column:d.column};A<f;)t.charCodeAt(A)===10?(d.line++,d.column=1):d.column++,A++;return Cs[f]=d,d}function he(f,d,A){var w=Us(f),a=Us(d),l={source:s,start:{offset:f,line:w.line,column:w.column},end:{offset:d,line:a.line,column:a.column}};return l}function U(f){c<xr||(c>xr&&(xr=c,fn=[]),fn.push(f))}function $u(f,d){return new ff(f,null,null,d)}function me(f,d,A){return new ff(ff.buildMessage(f,d),f,d,A)}function or(){var f,d,A,w=c*77+0,a=T[w];if(a)return c=a.nextPos,a.result;for(f=c,d=[],A=Bs();A!==e;)d.push(A),A=Bs();return re=f,d=$l(d),f=d,T[w]={nextPos:c,result:f},f}function Bs(){var f,d,A=c*77+1,w=T[A];return w?(c=w.nextPos,w.result):(f=c,d=Si(),d!==e&&(re=f,d=Jn()),f=d,f===e&&(f=c,d=gn(),d!==e&&(re=f,d=xl()),f=d,f===e&&(f=B(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&U(mr))))),T[A]={nextPos:c,result:f},f)}function B(){var f,d,A,w,a,l,$=c*77+2,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,2)===b?(d=b,c+=2):(d=e,i===0&&U(nl)),d!==e){for(A=[],w=c,a=c,i++,l=Ri(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,l=Ri(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);re=f,f=Qa()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===_?(d=_,c+=2):(d=e,i===0&&U(al)),d!==e){for(A=[],w=c,a=c,i++,t.substr(c,2)===k?(l=k,c+=2):(l=e,i===0&&U(cr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.substr(c,2)===k?(l=k,c+=2):(l=e,i===0&&U(cr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===k?(w=k,c+=2):(w=e,i===0&&U(cr)),w!==e?(re=f,f=bl()):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function xi(){var f,d,A,w,a,l=c*77+3,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,d=[],A=M();A!==e;)d.push(A),A=M();for(A=cn(),A===e&&(A=null),w=[],a=M();a!==e;)w.push(a),a=M();return re=f,f=Al(A),T[l]={nextPos:c,result:f},f}function cn(){var f,d,A,w,a,l,$,v,n=c*77+4,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=ra(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=ra(),v!==e?(re=w,w=Za(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=ra(),v!==e?(re=w,w=Za(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=Cl(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function L(){var f,d,A,w,a,l,$,v,n=c*77+5,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=hn(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hn(),v!==e?(re=w,w=Xa(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hn(),v!==e?(re=w,w=Xa(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=_l(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _s(){var f,d,A,w,a,l,$,v,n=c*77+6,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=Ps(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=Ps(),v!==e?(re=w,w=Ya(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=Ps(),v!==e?(re=w,w=Ya(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=Pl(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ra(){var f,d=c*77+7,A=T[d];return A?(c=A.nextPos,A.result):(f=Nr(),f===e&&(f=rt(),f===e&&(f=Ps())),T[d]={nextPos:c,result:f},f)}function hn(){var f,d=c*77+8,A=T[d];return A?(c=A.nextPos,A.result):(f=ds(),f===e&&(f=da(),f===e&&(f=Nr())),T[d]={nextPos:c,result:f},f)}function Ps(){var f,d=c*77+9,A=T[d];return A?(c=A.nextPos,A.result):(f=ds(),f===e&&(f=da(),f===e&&(f=ks(),f===e&&(f=rs(),f===e&&(f=Qe(),f===e&&(f=Hs(),f===e&&(f=bi(),f===e&&(f=Ai(),f===e&&(f=xu(),f===e&&(f=Ci(),f===e&&(f=bu(),f===e&&(f=at()))))))))))),T[d]={nextPos:c,result:f},f)}function at(){var f,d=c*77+10,A=T[d];return A?(c=A.nextPos,A.result):(f=Au(),f===e&&(f=ts()),T[d]={nextPos:c,result:f},f)}function ts(){var f,d=c*77+11,A=T[d];return A?(c=A.nextPos,A.result):(f=as(),f===e&&(f=Eu(),f===e&&(f=_u(),f===e&&(f=pn()))),T[d]={nextPos:c,result:f},f)}function pn(){var f,d,A,w,a,l,$=c*77+12,v=T[$];if(v)return c=v.nextPos,v.result;if(f=ia(),f===e&&(f=Pu(),f===e&&(f=Mi(),f===e&&(f=Si(),f===e&&(f=gn(),f===e&&(f=oa(),f===e&&(f=yn(),f===e&&(f=ha(),f===e&&(f=pa(),f===e&&(f=Oi(),f===e&&(f=Cu(),f===e&&(f=qs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(d=S,c++):(d=e,i===0&&U(Jt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=at(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e?(re=f,f=ei(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ur(){var f,d=c*77+13,A=T[d];return A?(c=A.nextPos,A.result):(f=oa(),f===e&&(f=gn(),f===e&&(f=yn(),f===e&&(f=ya(),f===e&&(f=wa(),f===e&&(f=ha()))))),T[d]={nextPos:c,result:f},f)}function Nr(){var f,d,A,w,a,l,$,v,n,u,y=c*77+14,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===O?(d=O,c+=2):(d=e,i===0&&U(zn)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=D,c++):(l=e,i===0&&U(Ot)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(v=L(),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();t.charCodeAt(c)===125?(u=H,c++):(u=e,i===0&&U(dt)),u!==e?(re=f,f=kl(w,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function rt(){var f,d,A,w,a,l,$=c*77+15,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,3)===ae?(d=ae,c+=3):(d=e,i===0&&U(Ir)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=it(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();l=Ur(),l!==e?(re=f,f=Qn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ae?(d=ae,c+=3):(d=e,i===0&&U(Ir)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();w=Ur(),w!==e?(re=f,f=El(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ds(){var f,d,A,w,a,l,$,v,n,u=c*77+16,y=T[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===se?(d=se,c+=3):(d=e,i===0&&U(ar)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===58?($=ie,c++):($=e,i===0&&U(ut)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=br(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===61?($=de,c++):($=e,i===0&&U(Qt)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=at(),n!==e?(re=f,f=Zn(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===W?(d=W,c+=3):(d=e,i===0&&U(bs)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===58?($=ie,c++):($=e,i===0&&U(ut)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=br(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===61?($=de,c++):($=e,i===0&&U(Qt)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=at(),n!==e?(re=f,f=Ml(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[u]={nextPos:c,result:f},f}function ks(){var f,d,A,w,a=c*77+17,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(d=K,c+=2):(d=e,i===0&&U(Zt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();w=at(),w!==e?(re=f,f=ti(w)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Qe(){var f,d,A,w,a,l,$,v=c*77+18,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,2)===Q?(d=Q,c+=2):(d=e,i===0&&U(Xt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();for($=Ur(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&U(Yr)),$!==e?(re=f,f=Sl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[v]={nextPos:c,result:f},f}function Hs(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+19,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.substr(c,4)===ee?(d=ee,c+=4):(d=e,i===0&&U(Ha)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(t.substr(c,3)===se?(a=se,c+=3):(a=e,i===0&&U(ar)),a!==e){if(l=[],$=M(),$!==e)for(;$!==e;)l.push($),$=M();else l=e;if(l!==e)if($=it(),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();for(t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&U(jr)),n===e&&(n=null),u=[],y=M();y!==e;)u.push(y),y=M();if(y=at(),y!==e)if(t.charCodeAt(c)===41?(p=E,c++):(p=e,i===0&&U(Xr)),p!==e){for(x=[],m=M();m!==e;)x.push(m),m=M();m=hr(),m!==e?(re=f,f=Nl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===ee?(d=ee,c+=4):(d=e,i===0&&U(Ha)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(t.substr(c,3)===se?(w=se,c+=3):(w=e,i===0&&U(ar)),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();if(u=at(),u!==e){if(y=[],p=M(),p!==e)for(;p!==e;)y.push(p),p=M();else y=e;y!==e?(p=hr(),p!==e?(re=f,f=Tl(l,u,p)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function bi(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C=c*77+20,N=T[C];if(N)return c=N.nextPos,N.result;if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(t.substr(c,3)===se?(a=se,c+=3):(a=e,i===0&&U(ar)),a!==e){if(l=[],$=M(),$!==e)for(;$!==e;)l.push($),$=M();else l=e;if(l!==e)if($=it(),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();if(n=c,t.charCodeAt(c)===61?(u=de,c++):(u=e,i===0&&U(Qt)),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();p=at(),p!==e?(re=n,n=Ol($,p)):(c=n,n=e)}else c=n,n=e;for(n===e&&(n=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&U(jr)),u===e&&(u=null),y=[],p=M();p!==e;)y.push(p),p=M();if(p=at(),p!==e)if(t.charCodeAt(c)===41?(x=E,c++):(x=e,i===0&&U(Xr)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();P=hr(),P!==e?(re=f,f=Fl($,n,p,P)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(t.substr(c,3)===se?(w=se,c+=3):(w=e,i===0&&U(ar)),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(v=c,t.charCodeAt(c)===61?(n=de,c++):(n=e,i===0&&U(Qt)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();y=at(),y!==e?(re=v,v=Rl(l,y)):(c=v,v=e)}else c=v,v=e;for(v===e&&(v=null),t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&U(jr)),n===e&&(n=null),u=[],y=M();y!==e;)u.push(y),y=M();if(y=at(),y!==e){if(p=[],x=M(),x!==e)for(;x!==e;)p.push(x),x=M();else p=e;p!==e?(x=hr(),x!==e?(re=f,f=Il(l,v,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(a=at(),a!==e)if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hr(),v!==e?(re=f,f=jl(a,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=at(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;a!==e?(l=hr(),l!==e?(re=f,f=Dl(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return T[C]={nextPos:c,result:f},f}function rs(){var f,d,A,w,a,l=c*77+21,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===le?(d=le,c+=6):(d=e,i===0&&U(Fs)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();a=at(),a!==e?(re=f,f=Ll(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function Ai(){var f,d,A,w,a,l,$,v,n=c*77+22,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===we?(d=we,c+=4):(d=e,i===0&&U(Ut)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===123?(w=D,c++):(w=e,i===0&&U(Ot)),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();if(l=_s(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();t.charCodeAt(c)===125?(v=H,c++):(v=e,i===0&&U(dt)),v!==e?(re=f,f=Ul(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function xu(){var f,d,A,w,a=c*77+23,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===_e?(d=_e,c+=5):(d=e,i===0&&U(Ys)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=Bl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function Ci(){var f,d,A,w,a=c*77+24,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===be?(d=be,c+=8):(d=e,i===0&&U(Dr)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=Hl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function bu(){var f,d,A,w,a,l,$=c*77+25,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=at(),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.substr(c,2)===nt?(w=nt,c+=2):(w=e,i===0&&U(Lr)),w===e&&(t.substr(c,2)===mt?(w=mt,c+=2):(w=e,i===0&&U(il)),w===e&&(t.charCodeAt(c)===61?(w=de,c++):(w=e,i===0&&U(Qt)))),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();l=at(),l!==e?(re=f,f=ql(d,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Au(){var f,d,A,w,a,l,$,v,n=c*77+26,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=ts(),d!==e){for(A=[],w=c,a=[],l=ss();l!==e;)a.push(l),l=ss();if(l=_i(),l!==e){for($=[],v=ss();v!==e;)$.push(v),v=ss();v=ts(),v!==e?(re=w,w=ri(d,l,v)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(A.push(w),w=c,a=[],l=ss();l!==e;)a.push(l),l=ss();if(l=_i(),l!==e){for($=[],v=ss();v!==e;)$.push(v),v=ss();v=ts(),v!==e?(re=w,w=ri(d,l,v)):(c=w,w=e)}else c=w,w=e}else A=e;A!==e?(re=f,f=Vl(d,A)):(c=f,f=e)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ss(){var f,d,A,w=c*77+27,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(d=sr,c++):(d=e,i===0&&U(qa)),d!==e?(A=Ze(),A!==e?(d=[d,A],f=d):(c=f,f=e)):(c=f,f=e),f===e&&(f=Ue()),T[w]={nextPos:c,result:f},f)}function _i(){var f,d,A=c*77+28,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xt?(d=xt,c+=2):(d=e,i===0&&U(ll)),d===e&&(t.substr(c,2)===wt?(d=wt,c+=2):(d=e,i===0&&U(ul)),d===e&&(t.substr(c,2)===Ye?(d=Ye,c+=2):(d=e,i===0&&U(Va)),d===e&&(t.substr(c,2)===bt?(d=bt,c+=2):(d=e,i===0&&U(za)),d===e&&(t.substr(c,2)===Ht?(d=Ht,c+=2):(d=e,i===0&&U(ol)),d===e&&(t.substr(c,2)===nr?(d=nr,c+=2):(d=e,i===0&&U(fl)),d===e&&(d=t.charAt(c),gt.test(d)?c++:(d=e,i===0&&U(cl)))))))),d!==e&&(re=f,d=zl()),f=d,T[A]={nextPos:c,result:f},f)}function Cu(){var f,d,A,w=c*77+29,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(d=vt,c++):(d=e,i===0&&U(hl)),d!==e?(A=at(),A!==e?(re=f,f=Kl(A)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function _u(){var f,d,A,w,a=c*77+30,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,d=pn(),d!==e){if(A=[],w=Pi(),w===e&&(w=sa(),w===e&&(w=ki())),w!==e)for(;w!==e;)A.push(w),w=Pi(),w===e&&(w=sa(),w===e&&(w=ki()));else A=e;A!==e?(re=f,f=Wl(d,A)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Pi(){var f,d,A,w,a,l,$=c*77+31,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===40?(d=S,c++):(d=e,i===0&&U(Jt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ns(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e?(re=f,f=Gl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ns(){var f,d,A,w,a,l,$=c*77+32,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=at(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=at(),l!==e?(re=w,w=Xn(d,l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=at(),l!==e?(re=w,w=Xn(d,l)):(c=w,w=e)):(c=w,w=e);re=f,f=Jl(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function sa(){var f,d,A,w,a,l,$=c*77+33,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=at(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=si(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ki(){var f,d,A,w=c*77+34,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(d=qt,c++):(d=e,i===0&&U(en)),d!==e?(A=it(),A!==e?(re=f,f=Ql(A)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function as(){var f,d,A,w,a,l,$,v,n,u,y=c*77+35,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===_r?(d=_r,c+=2):(d=e,i===0&&U(Wn)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=at(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=hr(),l!==e){if($=c,v=[],n=M(),n!==e)for(;n!==e;)v.push(n),n=M();else v=e;if(v!==e?(n=na(),n!==e?$=n:(c=$,$=e)):(c=$,$=e),$===e&&($=null),v=c,n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;n!==e?(u=Ei(),u!==e?v=u:(c=v,v=e)):(c=v,v=e),v===e&&(v=null),re=f,f=Zl(w,l,$,v)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function na(){var f,d,A,w,a,l,$=c*77+36,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=aa(),d!==e){for(A=[],w=c,a=[],l=M();l!==e;)a.push(l),l=M();for(l=aa(),l!==e?w=l:(c=w,w=e);w!==e;){for(A.push(w),w=c,a=[],l=M();l!==e;)a.push(l),l=M();l=aa(),l!==e?w=l:(c=w,w=e)}re=f,f=Xl(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function aa(){var f,d,A,w,a,l,$,v=c*77+37,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,4)===Vt?(d=Vt,c+=4):(d=e,i===0&&U(Ka)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();if(a=at(),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();$=hr(),$!==e?(re=f,f=ni(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[v]={nextPos:c,result:f},f}function Ei(){var f,d,A,w,a,l=c*77+38,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===ye?(d=ye,c+=4):(d=e,i===0&&U(pl)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();a=hr(),a!==e?(re=f,f=Yl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function ia(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C,N,I=c*77+39,q=T[I];if(q)return c=q.nextPos,q.result;if(f=c,t.substr(c,5)===qe?(d=qe,c+=5):(d=e,i===0&&U(Wa)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();if(a=at(),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===123?($=D,c++):($=e,i===0&&U(Ot)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();if(n=[],u=c,y=at(),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();re=u,u=Yn(a,y,P)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(n.push(u),u=c,y=at(),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();re=u,u=Yn(a,y,P)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else n=e;if(n!==e){if(u=c,t.charCodeAt(c)===42?(y=et,c++):(y=e,i===0&&U(vl)),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();u=P}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],p=M();p!==e;)y.push(p),p=M();t.charCodeAt(c)===125?(p=H,c++):(p=e,i===0&&U(dt)),p!==e?(re=f,f=eu(a,n,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Pu(){var f,d,A,w,a,l,$,v,n=c*77+40,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ct?(d=ct,c+=4):(d=e,i===0&&U(gl)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===123?(w=D,c++):(w=e,i===0&&U(Ot)),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();if(l=_s(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();t.charCodeAt(c)===125?(v=H,c++):(v=e,i===0&&U(dt)),v!==e?(re=f,f=tu(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function Mi(){var f,d,A,w,a=c*77+41,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===At?(d=At,c+=6):(d=e,i===0&&U(dl)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;A!==e?(w=qs(),w!==e?(re=f,f=ru(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function qs(){var f,d,A=c*77+42,w=T[A];return w?(c=w.nextPos,w.result):(f=c,d=Su(),d!==e&&(re=f,d=su(d)),f=d,T[A]={nextPos:c,result:f},f)}function Si(){var f,d,A,w,a,l,$=c*77+43,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===96?(d=J,c++):(d=e,i===0&&U(As)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&U(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Ni(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&U(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Ni(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=J,c++):(w=e,i===0&&U(As)),w!==e?(re=f,f=nu(A)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ni(){var f,d,A,w,a,l,$=c*77+44,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=at(),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();t.charCodeAt(c)===125?(l=H,c++):(l=e,i===0&&U(dt)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,d=[],A=vn(),A!==e)for(;A!==e;)d.push(A),A=vn();else d=e;d!==e&&(re=f,d=ai(d)),f=d}return T[$]={nextPos:c,result:f},f}function vn(){var f,d=c*77+45,A=T[d];return A?(c=A.nextPos,A.result):(f=ku(),f===e&&(f=t.charAt(c),Tt.test(f)?c++:(f=e,i===0&&U(Is))),T[d]={nextPos:c,result:f},f)}function ku(){var f,d,A,w=c*77+46,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(d=sr,c++):(d=e,i===0&&U(qa)),d!==e?(A=t.charAt(c),Mt.test(A)?c++:(A=e,i===0&&U(Gn)),A!==e?f=A:(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function gn(){var f,d,A,w,a,l,$=c*77+47,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===34?(d=Z,c++):(d=e,i===0&&U(tn)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=Z,c++):(l=e,i===0&&U(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=la(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ii(l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=Z,c++):(l=e,i===0&&U(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=la(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ii(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=Z,c++):(w=e,i===0&&U(tn)),w!==e?(re=f,f=li(A)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(d=oe,c++):(d=e,i===0&&U(rn)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=oe,c++):(l=e,i===0&&U(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ua(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ui(l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=oe,c++):(l=e,i===0&&U(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ua(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ui(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=oe,c++):(w=e,i===0&&U(rn)),w!==e?(re=f,f=au(A)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function la(){var f,d,A=c*77+48,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Pe?(d=Pe,c+=2):(d=e,i===0&&U(yl)),d!==e&&(re=f,d=iu()),f=d,T[A]={nextPos:c,result:f},f)}function ua(){var f,d,A=c*77+49,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ce?(d=ce,c+=2):(d=e,i===0&&U(sn)),d!==e&&(re=f,d=oi()),f=d,T[A]={nextPos:c,result:f},f)}function oa(){var f,d=c*77+50,A=T[d];return A?(c=A.nextPos,A.result):(f=dn(),f===e&&(f=fa()),T[d]={nextPos:c,result:f},f)}function dn(){var f,d,A,w,a,l,$,v=c*77+51,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),kt.test(A)?c++:(A=e,i===0&&U(js)),A!==e){if(w=[],a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=qt,c++):(a=e,i===0&&U(en)),a!==e){if(l=[],$=t.charAt(c),ht.test($)?c++:($=e,i===0&&U(Sr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ht.test($)?c++:($=e,i===0&&U(Sr));else l=e;l!==e?(re=f,f=lu()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),ht.test(A)?c++:(A=e,i===0&&U(Sr)),A!==e)if(t.charCodeAt(c)===46?(w=qt,c++):(w=e,i===0&&U(en)),w!==e){if(a=[],l=t.charAt(c),ht.test(l)?c++:(l=e,i===0&&U(Sr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ht.test(l)?c++:(l=e,i===0&&U(Sr));else a=e;a!==e?(re=f,f=fi()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[v]={nextPos:c,result:f},f}function fa(){var f,d,A,w,a,l=c*77+52,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),kt.test(A)?c++:(A=e,i===0&&U(js)),A!==e){if(w=[],a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr));else w=e;w!==e?(re=f,f=ci()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),ht.test(A)?c++:(A=e,i===0&&U(Sr)),A!==e?(re=f,f=uu()):(c=f,f=e)),T[l]={nextPos:c,result:f},f}function yn(){var f,d=c*77+53,A=T[d];return A?(c=A.nextPos,A.result):(f=Ti(),f===e&&(f=ca()),T[d]={nextPos:c,result:f},f)}function Ti(){var f,d,A,w,a=c*77+54,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ee?(d=Ee,c+=4):(d=e,i===0&&U(nn)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=hi()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ca(){var f,d,A,w,a=c*77+55,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===De?(d=De,c+=5):(d=e,i===0&&U(an)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=ou()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ha(){var f,d,A,w,a=c*77+56,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Oe?(d=Oe,c+=4):(d=e,i===0&&U(ln)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=fu()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function pa(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+57,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=at(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=pi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=at(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=pi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=H,c++):(a=e,i===0&&U(dt)),a!==e?(re=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function Oi(){var f,d,A,w,a,l,$,v,n,u,y=c*77+58,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=at(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=vi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=at(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=vi(l)}else c=a,a=e;for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function va(){var f,d,A,w,a,l,$,v=c*77+59,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,d=it(),d!==e){for(A=c,w=[],a=M();a!==e;)w.push(a),a=M();if(t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();$=br(),$!==e?A=$:(c=A,A=e)}else c=A,A=e;A===e&&(A=null),re=f,f=pu(d,A)}else c=f,f=e;return T[v]={nextPos:c,result:f},f}function ga(){var f,d,A,w,a,l,$=c*77+60,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=va(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=va(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=va(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);re=f,f=gi(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function da(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C,N,I=c*77+61,q=T[I];if(q)return c=q.nextPos,q.result;if(f=c,t.charCodeAt(c)===64?(d=Fe,c++):(d=e,i===0&&U(un)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=it(),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(t.charCodeAt(c)===40?(l=S,c++):(l=e,i===0&&U(Jt)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(v=ga(),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();if(t.charCodeAt(c)===41?(u=E,c++):(u=e,i===0&&U(Xr)),u!==e){for(y=c,p=[],x=M();x!==e;)p.push(x),x=M();if(t.charCodeAt(c)===58?(x=ie,c++):(x=e,i===0&&U(ut)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();P=br(),P!==e?y=P:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),p=[],x=M();x!==e;)p.push(x),x=M();if(t.charCodeAt(c)===123?(x=D,c++):(x=e,i===0&&U(Ot)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();for(P=_s(),P===e&&(P=null),C=[],N=M();N!==e;)C.push(N),N=M();t.charCodeAt(c)===125?(N=H,c++):(N=e,i===0&&U(dt)),N!==e?(re=f,f=vu(A,w,a,v,y,P)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Eu(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m=c*77+62,P=T[m];if(P)return c=P.nextPos,P.result;if(f=c,t.substr(c,2)===Ce?(d=Ce,c+=2):(d=e,i===0&&U(Ds)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ga(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=c,v=[],n=M();n!==e;)v.push(n),n=M();if(t.charCodeAt(c)===58?(n=ie,c++):(n=e,i===0&&U(ut)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();y=br(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),v=[],n=M();n!==e;)v.push(n),n=M();if(t.charCodeAt(c)===123?(n=D,c++):(n=e,i===0&&U(Ot)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();for(y=_s(),y===e&&(y=null),p=[],x=M();x!==e;)p.push(x),x=M();t.charCodeAt(c)===125?(x=H,c++):(x=e,i===0&&U(dt)),x!==e?(re=f,f=di(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[m]={nextPos:c,result:f},f}function ya(){var f,d,A,w,a,l,$,v,n,u,y=c*77+63,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=Ur(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=ea(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Ur(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=ea(l)}else c=a,a=e;for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=gu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function wa(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+64,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=Ur(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=ta(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=Ur(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=ta(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=H,c++):(a=e,i===0&&U(dt)),a!==e?(re=f,f=du(w)):(c=f,f=e)}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function br(){var f,d=c*77+65,A=T[d];return A?(c=A.nextPos,A.result):(f=Mu(),f===e&&(f=Fi()),T[d]={nextPos:c,result:f},f)}function Mu(){var f,d,A,w,a,l,$,v,n,u,y=c*77+66,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===Ce?(d=Ce,c+=2):(d=e,i===0&&U(Ds)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ma(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.substr(c,2)===Te?(v=Te,c+=2):(v=e,i===0&&U(Rs)),v!==e){for(n=[],u=M();u!==e;)n.push(u),u=M();u=br(),u!==e?(re=f,f=yu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ma(){var f,d,A,w,a,l,$=c*77+67,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=br(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=br(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=br(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);re=f,f=yi(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Fi(){var f,d,A,w,a,l,$,v,n=c*77+68,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=it(),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(t.charCodeAt(c)===60?(w=ft,c++):(w=e,i===0&&U(Ga)),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=br(),l!==e){for($=[],v=Ue();v!==e;)$.push(v),v=Ue();t.charCodeAt(c)===62?(v=Ke,c++):(v=e,i===0&&U(ur)),v!==e?(re=f,f=wu(d,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,d=it(),d!==e&&(re=f,d=wi(d)),f=d),T[n]={nextPos:c,result:f},f}function it(){var f,d,A,w,a=c*77+69,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,d=t.charAt(c),hs.test(d)?c++:(d=e,i===0&&U(Ja)),d!==e){for(A=[],w=t.charAt(c),ls.test(w)?c++:(w=e,i===0&&U($r));w!==e;)A.push(w),w=t.charAt(c),ls.test(w)?c++:(w=e,i===0&&U($r));re=f,f=mi()}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Su(){var f,d,A,w,a,l,$=c*77+70,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=it(),d!==e){for(A=[],w=c,t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e?(l=it(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e?(l=it(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);re=f,f=mu()}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Es(){var f,d,A,w,a,l=c*77+71,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,d=[],A=M();A!==e;)d.push(A),A=M();if(t.charCodeAt(c)===44?(A=Y,c++):(A=e,i===0&&U(jr)),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();d=[d,A,w],f=d}else c=f,f=e;if(f===e)if(f=[],d=M(),d!==e)for(;d!==e;)f.push(d),d=M();else f=e;return T[l]={nextPos:c,result:f},f}function hr(){var f,d,A,w,a,l,$=c*77+72,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=_s(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===125?(l=H,c++):(l=e,i===0&&U(dt)),l!==e?(re=f,f=$i(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),T[$]={nextPos:c,result:f},f}function Ze(){var f,d=c*77+73,A=T[d];return A?(c=A.nextPos,A.result):(t.substr(c,2)===st?(f=st,c+=2):(f=e,i===0&&U(wl)),f===e&&(f=t.charAt(c),St.test(f)?c++:(f=e,i===0&&U(on))),T[d]={nextPos:c,result:f},f)}function Ri(){var f,d,A=c*77+74,w=T[A];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(d=t.charAt(c),c++):(d=e,i===0&&U(mr)),i--,d===e?f=void 0:(c=f,f=e),f===e&&(f=Ze()),T[A]={nextPos:c,result:f},f)}function M(){var f,d=c*77+75,A=T[d];return A?(c=A.nextPos,A.result):(f=t.charAt(c),zt.test(f)?c++:(f=e,i===0&&U(ml)),T[d]={nextPos:c,result:f},f)}function Ue(){var f,d=c*77+76,A=T[d];return A?(c=A.nextPos,A.result):(f=t.charAt(c),Sn.test(f)?c++:(f=e,i===0&&U(Ls)),T[d]={nextPos:c,result:f},f)}function ue(f,d,A){const w={type:f};d.children=A;for(const l of Object.keys(d))d[l]!==void 0&&(w[l]=d[l]);const a=te();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(es=g(),r.peg$library)return{peg$result:es,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:fn,peg$maxFailPos:xr};if(es!==e&&c===t.length)return es;throw es!==e&&c<t.length&&U(z()),me(fn,xr<t.length?t.charAt(xr):null,xr<t.length?he(xr,xr+1):he(xr,xr))}const n_=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function a_(t){return n_.includes(t.type)}function D0(t){return"chain"in t&&t.chain!==null}function i_(t,r,e){return{type:"call",target:t,args:r,loc:e}}function l_(t,r,e){return{type:"index",target:t,index:r,loc:e}}function u_(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Ft(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Ft(e.expr,r);break}case"return":{e.expr=Ft(e.expr,r);break}case"each":{e.items=Ft(e.items,r),e.for=Ft(e.for,r);break}case"for":{e.from!=null&&(e.from=Ft(e.from,r)),e.to!=null&&(e.to=Ft(e.to,r)),e.times!=null&&(e.times=Ft(e.times,r)),e.for=Ft(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Ft(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Ft(e.expr,r),e.dest=Ft(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Ft(e.operands[s],r);break}case"not":{e.expr=Ft(e.expr,r);break}case"if":{e.cond=Ft(e.cond,r),e.then=Ft(e.then,r);for(const s of e.elseif)s.cond=Ft(s.cond,r),s.then=Ft(s.then,r);e.else!=null&&(e.else=Ft(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Ft(e.children[s],r);break}case"match":{e.about=Ft(e.about,r);for(const s of e.qs)s.q=Ft(s.q,r),s.a=Ft(s.a,r);e.default!=null&&(e.default=Ft(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Ft(e.statements[s],r);break}case"exists":{e.identifier=Ft(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=Ft(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Ft(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Ft(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Ft(e.args[s],r);break}case"indexChain":{e.index=Ft(e.index,r);break}case"call":{e.target=Ft(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Ft(e.args[s],r);break}case"index":{e.target=Ft(e.target,r),e.index=Ft(e.index,r);break}case"prop":{e.target=Ft(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Ft(e.members[s],r);break}case"or":case"and":{e.left=Ft(e.left,r),e.right=Ft(e.right,r);break}}if(D0(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Ft(e.chain[s],r);return e}const ev=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function tv(t){throw new Af(`Reserved word "${t}" cannot be used as variable name.`)}function o_(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{ev.includes(t.name)&&tv(t.name);break}case"meta":{t.name!=null&&ev.includes(t.name)&&tv(t.name);break}case"fn":{for(const r of t.args)ev.includes(r.name)&&tv(r.name);break}}return t}function f_(t){for(const r of t)Ft(r,o_);return t}function Ey(t){return{type:"simple",name:t}}function c_(t,r){return{type:"generic",name:t,inners:r}}function h_(t,r){return{type:"fn",args:t,result:r}}function _h(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=_h(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>_h(s)).join(", "),e=_h(t.result);return`@(${r}) { ${e} }`}}}function ec(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Ey(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=ec(t.inner):r=Ey("any"),c_(t.name,[r])}}throw new Af(`Unknown type: '${_h(t)}'`)}else{const r=t.args.map(e=>ec(e));return h_(r,ec(t.result))}}function p_(t){switch(t.type){case"def":{t.varType!=null&&ec(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&ec(r.argType);t.retType!=null&&ec(t.retType);break}}return t}function v_(t){for(const r of t)Ft(r,p_);return t}function Ph(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Ph(s.expr.children)),r.push(s);else{if(e.length>0)throw new Af("invalid attribute.");switch(s.type){case"fn":{s.children=Ph(s.children);break}case"block":{s.statements=Ph(s.statements);break}}r.push(s)}if(e.length>0)throw new Af("invalid attribute.");return r}function g_(t){if(a_(t)&&D0(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=i_(s,h.args,h.loc);break}case"indexChain":{s=l_(s,h.index,h.loc);break}case"propChain":{s=u_(s,h.name,h.loc);break}}return s}return t}function d_(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],g_);return t}function kh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function L0(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return kh(t,r,e);{const{left:s,right:h,info:g}=t;return kh(s,L0(h,r,e),g)}}function ef(t){if(t.type!=="infixTree")return t;if(t.info.mapFn)return t.info.mapFn(t);{const r=ef(t.left),e=ef(t.right);return{type:"call",target:{type:"identifier",name:t.info.func,loc:t.info.opLoc},args:[r,e],loc:{start:r.loc.start,end:e.loc.end}}}}const y_={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>{const r=ef(t.left),e=ef(t.right);return{type:"and",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3},"||":{mapFn:t=>{const r=ef(t.left),e=ef(t.right);return{type:"or",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3}};function w_(t){const r=t.operators.map((s,h)=>{const g=y_[s];if(g==null)throw new Af(`No such operator: ${s}.`);return{...g,opLoc:t.operatorLocs[h]}});let e=kh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=L0(e,t.operands[2+s],r[1+s]);return ef(e)}function m_(t){for(let r=0;r<t.length;r++)t[r]=Ft(t[r],e=>e.type==="infix"?w_(e):e);return t}var Wu;let $_=(Wu=class{constructor(){ve(this,"plugins");this.plugins={validate:[f_,v_],transform:[Ph,d_,m_]}}static parse(r){return Wu.instance==null&&(Wu.instance=new Wu),Wu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=ky(r,{startRule:"Preprocess"});e=ky(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new Af(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new Af(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},ve(Wu,"instance"),Wu);const x_="0.19.0",b_={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Jv=[],xc=null;function A_(t){return Jv=$_.parse(t),JSON.stringify(Jv,null,"	")}async function C_(t){xc==null||xc.abort(),xc=new Bn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Kv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Kv(e.val,!0),print:!1});break}}});try{await xc.exec(Jv)}catch(r){t.err(r)}}const __=Object.freeze(Object.defineProperty({__proto__:null,exec:C_,parse:A_,samples:b_,version:x_},Symbol.toStringTag,{value:"Module"}));function cs(t,r,e){let s=e.value;return{configurable:!0,get(){const h=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){s=h}}}let Cp=class U0 extends Error{constructor(e,s){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,U0)}},P_=class extends Cp{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},Cf=class extends Cp{constructor(e,s){super(e,s);ve(this,"name","Syntax")}},yr=class extends Cp{constructor(e,s){super(e,s);ve(this,"name","Runtime")}},My=class extends yr{constructor(r,e){super(r,e)}};class k_ extends yr{constructor(e,s){super(e,s);ve(this,"name","")}}var vo=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let no=class Qv{constructor(r=[],e,s,h){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});ve(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=h}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Qv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const h=[e,...this.layerdStates];return new Qv(h,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new yr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new yr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){const g=h.get(r);if(!g.isMutable)throw new yr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new yr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};vo([cs],no.prototype,"log",null);vo([cs],no.prototype,"onUpdated",null);vo([cs],no.prototype,"createChildScope",null);vo([cs],no.prototype,"createChildNamespaceScope",null);vo([cs],no.prototype,"get",null);vo([cs],no.prototype,"exists",null);vo([cs],no.prototype,"getAll",null);vo([cs],no.prototype,"add",null);vo([cs],no.prototype,"assign",null);let vh;const E_=new Uint8Array(16);function M_(){if(!vh&&(vh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vh(E_)}const $n=[];for(let t=0;t<256;++t)$n.push((t+256).toString(16).slice(1));function S_(t,r=0){return $n[t[r+0]]+$n[t[r+1]]+$n[t[r+2]]+$n[t[r+3]]+"-"+$n[t[r+4]]+$n[t[r+5]]+"-"+$n[t[r+6]]+$n[t[r+7]]+"-"+$n[t[r+8]]+$n[t[r+9]]+"-"+$n[t[r+10]]+$n[t[r+11]]+$n[t[r+12]]+$n[t[r+13]]+$n[t[r+14]]+$n[t[r+15]]}const N_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Sy={randomUUID:N_};function T_(t,r,e){if(Sy.randomUUID&&!r&&!t)return Sy.randomUUID();t=t||{};const s=t.random||(t.rng||M_)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,S_(s)}const ir={type:"null"},Fa={type:"bool",value:!0},Ra={type:"bool",value:!1},Be=t=>({type:"num",value:t}),vr=t=>({type:"str",value:t}),cf=t=>({type:"bool",value:t}),rp=t=>({type:"obj",value:t}),us=t=>({type:"arr",value:t}),O_=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),xe=t=>({type:"fn",native:t}),F_=t=>({type:"return",value:t}),R_=()=>({type:"break",value:null}),I_=()=>({type:"continue",value:null}),j_=t=>t.type==="return"?t.value:t,Zv=(t,r)=>({type:"error",value:t,info:r});function Ia(t){if(t==null)throw new yr("Expect anything, but got nothing.")}function En(t){if(t==null)throw new yr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new yr(`Expect boolean, but got ${t.type}.`)}function Vu(t){if(t==null)throw new yr("Expect function, but got nothing.");if(t.type!=="fn")throw new yr(`Expect function, but got ${t.type}.`)}function $s(t){if(t==null)throw new yr("Expect string, but got nothing.");if(t.type!=="str")throw new yr(`Expect string, but got ${t.type}.`)}function Re(t){if(t==null)throw new yr("Expect number, but got nothing.");if(t.type!=="num")throw new yr(`Expect number, but got ${t.type}.`)}function Ou(t){if(t==null)throw new yr("Expect object, but got nothing.");if(t.type!=="obj")throw new yr(`Expect object, but got ${t.type}.`)}function hf(t){if(t==null)throw new yr("Expect array, but got nothing.");if(t.type!=="arr")throw new yr(`Expect array, but got ${t.type}.`)}function rv(t){return t.type==="obj"}function Ny(t){return t.type==="arr"}function tc(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Xv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>Xv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Yv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Yv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Yv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function eg(t){if(t===null)return ir;if(typeof t=="boolean")return cf(t);if(typeof t=="string")return vr(t);if(typeof t=="number")return Be(t);if(Array.isArray(t))return us(t.map(r=>eg(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,eg(s));return rp(r)}return ir}function rc(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const h of t.value)s.push(rc(h,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[h,g]of t.value)s.push(`${h}: ${rc(g,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const D_={version:"0.18.0"},L_=D_.version,U_=new TextEncoder,B_=new TextDecoder,H_={help:vr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":vr(L_),"Core:ai":vr("kawaii"),"Core:not":xe(([t])=>(En(t),t.value?Ra:Fa)),"Core:eq":xe(([t,r])=>(Ia(t),Ia(r),tc(t,r)?Fa:Ra)),"Core:neq":xe(([t,r])=>(Ia(t),Ia(r),tc(t,r)?Ra:Fa)),"Core:and":xe(([t,r])=>(En(t),t.value?(En(r),r.value?Fa:Ra):Ra)),"Core:or":xe(([t,r])=>(En(t),t.value?Fa:(En(r),r.value?Fa:Ra))),"Core:add":xe(([t,r])=>(Re(t),Re(r),Be(t.value+r.value))),"Core:sub":xe(([t,r])=>(Re(t),Re(r),Be(t.value-r.value))),"Core:mul":xe(([t,r])=>(Re(t),Re(r),Be(t.value*r.value))),"Core:pow":xe(([t,r])=>{Re(t),Re(r);const e=t.value**r.value;if(isNaN(e))throw new yr("Invalid operation.");return Be(e)}),"Core:div":xe(([t,r])=>{Re(t),Re(r);const e=t.value/r.value;if(isNaN(e))throw new yr("Invalid operation.");return Be(e)}),"Core:mod":xe(([t,r])=>(Re(t),Re(r),Be(t.value%r.value))),"Core:gt":xe(([t,r])=>(Re(t),Re(r),t.value>r.value?Fa:Ra)),"Core:lt":xe(([t,r])=>(Re(t),Re(r),t.value<r.value?Fa:Ra)),"Core:gteq":xe(([t,r])=>(Re(t),Re(r),t.value>=r.value?Fa:Ra)),"Core:lteq":xe(([t,r])=>(Re(t),Re(r),t.value<=r.value?Fa:Ra)),"Core:type":xe(([t])=>(Ia(t),vr(t.type))),"Core:to_str":xe(([t])=>(Ia(t),vr(rc(t)))),"Core:range":xe(([t,r])=>(Re(t),Re(r),t.value<r.value?us(Array.from({length:r.value-t.value+1},(e,s)=>Be(s+t.value))):t.value>r.value?us(Array.from({length:t.value-r.value+1},(e,s)=>Be(t.value-s))):us([t]))),"Core:sleep":xe(async([t])=>(Re(t),await new Promise(r=>setTimeout(r,t.value)),ir)),"Core:abort":xe(async([t])=>{throw $s(t),new k_(t.value)}),"Util:uuid":xe(()=>vr(T_())),"Json:stringify":xe(([t])=>(Ia(t),vr(JSON.stringify(Yv(t))))),"Json:parse":xe(([t])=>{$s(t);try{return eg(JSON.parse(t.value))}catch{return Zv("not_json")}}),"Json:parsable":xe(([t])=>{$s(t);try{JSON.parse(t.value)}catch{return cf(!1)}return cf(!0)}),"Date:now":xe(()=>Be(Date.now())),"Date:year":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":xe(([t])=>(t&&Re(t),Be(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":xe(([t])=>($s(t),Be(new Date(t.value).getTime()))),"Date:to_iso_str":xe(([t,r])=>{t&&Re(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Re(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let h;if(s===0)h="Z";else{const D=Math.sign(s),H=Math.floor(Math.abs(s)/60),ae=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+D*H),e.setUTCMinutes(e.getUTCMinutes()+D*ae);const se=s>0?"+":"-",ie=H.toString().padStart(2,"0"),de=ae.toString().padStart(2,"0");h=`${se}${ie}:${de}`}const g=e.getUTCFullYear().toString().padStart(4,"0"),b=(e.getUTCMonth()+1).toString().padStart(2,"0"),_=e.getUTCDate().toString().padStart(2,"0"),k=e.getUTCHours().toString().padStart(2,"0"),S=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),O=e.getUTCMilliseconds().toString().padStart(3,"0");return vr(`${g}-${b}-${_}T${k}:${S}:${E}.${O}${h}`)}),"Math:Infinity":Be(1/0),"Math:E":Be(Math.E),"Math:LN2":Be(Math.LN2),"Math:LN10":Be(Math.LN10),"Math:LOG2E":Be(Math.LOG2E),"Math:LOG10E":Be(Math.LOG10E),"Math:PI":Be(Math.PI),"Math:SQRT1_2":Be(Math.SQRT1_2),"Math:SQRT2":Be(Math.SQRT2),"Math:abs":xe(([t])=>(Re(t),Be(Math.abs(t.value)))),"Math:acos":xe(([t])=>(Re(t),Be(Math.acos(t.value)))),"Math:acosh":xe(([t])=>(Re(t),Be(Math.acosh(t.value)))),"Math:asin":xe(([t])=>(Re(t),Be(Math.asin(t.value)))),"Math:asinh":xe(([t])=>(Re(t),Be(Math.asinh(t.value)))),"Math:atan":xe(([t])=>(Re(t),Be(Math.atan(t.value)))),"Math:atanh":xe(([t])=>(Re(t),Be(Math.atanh(t.value)))),"Math:atan2":xe(([t,r])=>(Re(t),Re(r),Be(Math.atan2(t.value,r.value)))),"Math:cbrt":xe(([t])=>(Re(t),Be(Math.cbrt(t.value)))),"Math:ceil":xe(([t])=>(Re(t),Be(Math.ceil(t.value)))),"Math:clz32":xe(([t])=>(Re(t),Be(Math.clz32(t.value)))),"Math:cos":xe(([t])=>(Re(t),Be(Math.cos(t.value)))),"Math:cosh":xe(([t])=>(Re(t),Be(Math.cosh(t.value)))),"Math:exp":xe(([t])=>(Re(t),Be(Math.exp(t.value)))),"Math:expm1":xe(([t])=>(Re(t),Be(Math.expm1(t.value)))),"Math:floor":xe(([t])=>(Re(t),Be(Math.floor(t.value)))),"Math:fround":xe(([t])=>(Re(t),Be(Math.fround(t.value)))),"Math:hypot":xe(([t])=>{hf(t);const r=[];for(const e of t.value)Re(e),r.push(e.value);return Be(Math.hypot(...r))}),"Math:imul":xe(([t,r])=>(Re(t),Re(r),Be(Math.imul(t.value,r.value)))),"Math:log":xe(([t])=>(Re(t),Be(Math.log(t.value)))),"Math:log1p":xe(([t])=>(Re(t),Be(Math.log1p(t.value)))),"Math:log10":xe(([t])=>(Re(t),Be(Math.log10(t.value)))),"Math:log2":xe(([t])=>(Re(t),Be(Math.log2(t.value)))),"Math:max":xe(([t,r])=>(Re(t),Re(r),Be(Math.max(t.value,r.value)))),"Math:min":xe(([t,r])=>(Re(t),Re(r),Be(Math.min(t.value,r.value)))),"Math:pow":xe(([t,r])=>(Re(t),Re(r),Be(Math.pow(t.value,r.value)))),"Math:round":xe(([t])=>(Re(t),Be(Math.round(t.value)))),"Math:sign":xe(([t])=>(Re(t),Be(Math.sign(t.value)))),"Math:sin":xe(([t])=>(Re(t),Be(Math.sin(t.value)))),"Math:sinh":xe(([t])=>(Re(t),Be(Math.sinh(t.value)))),"Math:sqrt":xe(([t])=>{Re(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new yr("Invalid operation.");return Be(r)}),"Math:tan":xe(([t])=>(Re(t),Be(Math.tan(t.value)))),"Math:tanh":xe(([t])=>(Re(t),Be(Math.tanh(t.value)))),"Math:trunc":xe(([t])=>(Re(t),Be(Math.trunc(t.value)))),"Math:rnd":xe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Be(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Be(Math.random())),"Math:gen_rng":xe(([t])=>{if(Ia(t),t.type!=="num"&&t.type!=="str")return ir;const r=Uo(t.value.toString());return xe(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Be(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Be(r()))}),"Num:to_hex":xe(([t])=>(Re(t),vr(t.value.toString(16)))),"Num:from_hex":xe(([t])=>($s(t),Be(parseInt(t.value,16)))),"Str:lf":vr(`
`),"Str:lt":xe(([t,r])=>($s(t),$s(r),t.value<r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:gt":xe(([t,r])=>($s(t),$s(r),t.value>r.value?Be(-1):t.value===r.value?Be(0):Be(1))),"Str:from_codepoint":xe(([t])=>(Re(t),vr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":xe(([t])=>(hf(t),vr(Array.from(t.value.map(r=>(Re(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":xe(([t])=>(hf(t),vr(B_.decode(Uint8Array.from(t.value.map(r=>(Re(r),r.value))))))),"Arr:create":xe(([t,r])=>{Re(t);try{return us(Array(t.value).fill(r??ir))}catch(e){throw t.value<0?new yr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new yr("Arr:create expected integer, got non-integer")}}),"Obj:keys":xe(([t])=>(Ou(t),us(Array.from(t.value.keys()).map(r=>vr(r))))),"Obj:vals":xe(([t])=>(Ou(t),us(Array.from(t.value.values())))),"Obj:kvs":xe(([t])=>(Ou(t),us(Array.from(t.value.entries()).map(([r,e])=>us([vr(r),e]))))),"Obj:get":xe(([t,r])=>(Ou(t),$s(r),t.value.get(r.value)??ir)),"Obj:set":xe(([t,r,e])=>(Ou(t),$s(r),Ia(e),t.value.set(r.value,e),ir)),"Obj:has":xe(([t,r])=>(Ou(t),$s(r),cf(t.value.has(r.value)))),"Obj:copy":xe(([t])=>(Ou(t),rp(new Map(t.value)))),"Obj:merge":xe(([t,r])=>(Ou(t),Ou(r),rp(new Map([...t.value,...r.value])))),"Error:create":xe(([t,r])=>($s(t),Zv(t.value,r))),"Async:interval":xe(async([t,r,e],s)=>{Re(t),Vu(r),e&&(En(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.topCall(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),xe(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":xe(async([t,r],e)=>{Re(t),Vu(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),xe(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},Ty={num:{to_str:t=>xe(async(r,e)=>vr(t.value.toString()))},str:{to_num:t=>xe(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?ir:Be(s)}),to_arr:t=>xe(async(r,e)=>us(Zs(t.value).map(s=>vr(s)))),to_unicode_arr:t=>xe(async(r,e)=>us([...t.value].map(s=>vr(s)))),to_unicode_codepoint_arr:t=>xe(async(r,e)=>us([...t.value].map(s=>{const h=s.codePointAt(0);return Be(h??s.charCodeAt(0))}))),to_char_arr:t=>xe(async(r,e)=>us(t.value.split("").map(s=>vr(s)))),to_charcode_arr:t=>xe(async(r,e)=>us(t.value.split("").map(s=>Be(s.charCodeAt(0))))),to_utf8_byte_arr:t=>xe(async(r,e)=>us(Array.from(U_.encode(t.value)).map(s=>Be(s)))),len:t=>Be(Tf(t.value)),replace:t=>xe(async([r,e],s)=>($s(r),$s(e),vr(t.value.split(r.value).join(e.value)))),index_of:t=>xe(async([r,e],s)=>{$s(r),e&&Re(e);const h=e?e.value<0?t.value.length+e.value:e.value:void 0;return Be(Ff(t.value,r.value,h))}),incl:t=>xe(async([r],e)=>($s(r),t.value.includes(r.value)?Fa:Ra)),trim:t=>xe(async(r,e)=>vr(t.value.trim())),upper:t=>xe(async(r,e)=>vr(t.value.toUpperCase())),lower:t=>xe(async(r,e)=>vr(t.value.toLowerCase())),split:t=>xe(async([r],e)=>(r&&$s(r),us(r?t.value.split(r?r.value:"").map(s=>vr(s)):Zs(t.value).map(s=>vr(s))))),slice:t=>xe(async([r,e],s)=>(Re(r),Re(e),vr(Of(t.value,r.value,e.value)))),pick:t=>xe(async([r],e)=>{Re(r);const h=Zs(t.value)[r.value];return h?vr(h):ir}),charcode_at:t=>xe(([r],e)=>{Re(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?ir:Be(s)}),codepoint_at:t=>xe(([r],e)=>{Re(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?ir:Be(s)})},arr:{len:t=>Be(t.value.length),push:t=>xe(async([r],e)=>(Ia(r),t.value.push(r),t)),unshift:t=>xe(async([r],e)=>(Ia(r),t.value.unshift(r),t)),pop:t=>xe(async(r,e)=>t.value.pop()??ir),shift:t=>xe(async(r,e)=>t.value.shift()??ir),concat:t=>xe(async([r],e)=>(hf(r),us(t.value.concat(r.value)))),slice:t=>xe(async([r,e],s)=>(Re(r),Re(e),us(t.value.slice(r.value,e.value)))),join:t=>xe(async([r],e)=>(r&&$s(r),vr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>xe(async([r],e)=>{Vu(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,Be(g)]));return us(await Promise.all(s))}),filter:t=>xe(async([r],e)=>{Vu(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,Be(h)]);En(b),b.value&&s.push(g)}return us(s)}),reduce:t=>xe(async([r,e],s)=>{Vu(r);const h=e!=null;let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,Be(b)])}return g}),find:t=>xe(async([r],e)=>{Vu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Be(s)]);if(En(g),g.value)return h}return ir}),incl:t=>xe(async([r],e)=>(Ia(r),t.value.some(s=>tc(r,s))?Fa:Ra)),index_of:t=>xe(async([r,e],s)=>{if(Ia(r),e){Re(e);const h=t.value.slice(0,e.value).length,g=t.value.slice(e.value).findIndex(b=>tc(b,r));return Be(g<0?g:g+h)}else return Be(t.value.findIndex(h=>tc(h,r)))}),reverse:t=>xe(async(r,e)=>(t.value.reverse(),ir)),copy:t=>xe(async(r,e)=>us([...t.value])),sort:t=>xe(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=await s(g.slice(0,_),b),S=await s(g.slice(_),b);return h(k,S,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);Re(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return Vu(r),hf(t),t.value=await s(t.value,r),t}),fill:t=>xe(async([r,e,s],h)=>{const g=r??ir,b=e&&(Re(e),e.value),_=s&&(Re(s),s.value);return t.value.fill(g,b,_),t}),repeat:t=>xe(async([r],e)=>{Re(r);try{return us(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new yr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new yr("arr.repeat expected integer, got non-integer")}}),every:t=>xe(async([r],e)=>{Vu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Be(s)]);if(En(g),!g.value)return Ra}return Fa}),some:t=>xe(async([r],e)=>{Vu(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Be(s)]);if(En(g),g.value)return Fa}return Ra})},error:{name:t=>vr(t.value),info:t=>t.info??ir}};function q_(t,r){if(Object.hasOwn(Ty,t.type)){const e=Ty[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new yr(`No such prop (${r}) in ${t.type}.`)}else throw new yr(`Cannot read prop of ${t.type}. (reading ${r})`)}const V_={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Na=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const B0=300,z_=B0-1;let Hn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const s={print:xe(([h])=>{Ia(h),this.opts.out&&this.opts.out(h)}),readline:xe(async h=>{const g=h[0];if($s(g),this.opts.in==null)return ir;const b=await this.opts.in(g.value);return vr(b)})};this.vars=Object.fromEntries(Object.entries({...r,...H_,...s}).map(([h,g])=>[h,V_.const(g)])),this.scope=new no([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),Zv("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Cp?this.opts.err(r):this.opts.err(new P_(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const h of r.members)switch(h.type){case"def":{if(h.mut)throw new Error("Namespaces cannot include mutable variable: "+h.name);const g={isMutable:h.mut,value:await this._eval(h.expr,s)};s.add(h.name,g);break}case"ns":break;default:throw new Error("invalid ns member type: "+h.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??ir;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],{isMutable:!0,value:e[g]});const h=r.scope.createChildScope(s);return j_(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return ir;if(this.stepCount%B0===z_&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new yr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);Vu(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(En(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(En(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return ir}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(tc(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):ir}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return ir}case"for":{if(r.times){const s=await this._eval(r.times,e);Re(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);Re(s),Re(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Be(g)}]])));if(b.type==="break")break;if(b.type==="return")return b}}return ir}case"each":{const s=await this._eval(r.items,e);hf(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(g.type==="break")break;if(g.type==="return")return g}return ir}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,{isMutable:r.mut,value:s}),ir}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),ir}case"addAssign":{const s=await this._eval(r.dest,e);Re(s);const h=await this._eval(r.expr,e);return Re(h),await this.assign(e,r.dest,Be(s.value+h.value)),ir}case"subAssign":{const s=await this._eval(r.dest,e);Re(s);const h=await this._eval(r.expr,e);return Re(h),await this.assign(e,r.dest,Be(s.value-h.value)),ir}case"null":return ir;case"bool":return cf(r.value);case"num":return Be(r.value);case"str":return vr(r.value);case"arr":return us(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return rp(s)}case"prop":{const s=await this._eval(r.target,e);return rv(s)?s.value.has(r.name)?s.value.get(r.name):ir:q_(s,r.name)}case"index":{const s=await this._eval(r.target,e),h=await this._eval(r.index,e);if(Ny(s)){Re(h);const g=s.value[h.value];if(g===void 0)throw new My(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}else{if(rv(s))return $s(h),s.value.has(h.value)?s.value.get(h.value):ir;throw new yr(`Cannot read prop (${rc(h)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return En(s),cf(!s.value)}case"fn":return O_(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return cf(e.exists(r.identifier.name));case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);s+=rc(g)}return vr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),F_(s)}case"break":return this.log("block:break",{scope:e.name}),R_();case"continue":return this.log("block:continue",{scope:e.name}),I_();case"ns":return ir;case"meta":return ir;case"and":{const s=await this._eval(r.left,e);if(En(s),s.value){const h=await this._eval(r.right,e);return En(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(En(s),s.value)return s;{const h=await this._eval(r.right,e);return En(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=ir;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r),g=await this._eval(e.index,r);if(Ny(h)){if(Re(g),h.value[g.value]===void 0)throw new My(`Index out of range. index: ${g.value} max: ${h.value.length-1}`);h.value[g.value]=s}else if(rv(h))$s(g),h.value.set(g.value,s);else throw new yr(`Cannot read prop (${rc(g)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Ou(h),h.value.set(e.name,s)}else if(e.type==="arr")hf(s),await Promise.all(e.value.map((h,g)=>this.assign(r,h,s.value[g]??ir)));else if(e.type==="obj")Ou(s),await Promise.all([...e.value].map(([h,g])=>this.assign(r,g,s.value.get(h)??ir)));else throw new yr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Na([cs],Hn.prototype,"exec",null);Na([cs],Hn.prototype,"execFn",null);Na([cs],Hn.prototype,"execFnSimple",null);Na([cs],Hn.prototype,"handleError",null);Na([cs],Hn.prototype,"log",null);Na([cs],Hn.prototype,"collectNs",null);Na([cs],Hn.prototype,"collectNsMember",null);Na([cs],Hn.prototype,"_fn",null);Na([cs],Hn.prototype,"_eval",null);Na([cs],Hn.prototype,"_run",null);Na([cs],Hn.prototype,"registerAbortHandler",null);Na([cs],Hn.prototype,"unregisterAbortHandler",null);Na([cs],Hn.prototype,"abort",null);Na([cs],Hn.prototype,"assign",null);Na([cs],Hn,"collectMetadata",null);function K_(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function pf(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,pf.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}K_(pf,Error);function sv(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}pf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=sv("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+sv("",h.column-1," ")+sv("",O,"^")}else r+=`
 at `+b}return r};pf.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function Oy(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:or,Main:xi},g=or,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="!",Cr="[",qt=".",_r="if",Vt="elif",ye="else",qe="match",Te="=>",et="*",ct="eval",At="exists",J="`",Z='"',oe="'",Pe='\\"',ce="\\'",Ee="true",De="false",Oe="null",Fe="@",Ce="@(",ft="<",Ke=">",st=`\r
`,tt=/^[A-Z0-9_:]/i,gt=/^[%*-+\-\/<>\^]/,Tt=/^[^`{]/,Mt=/^[{}`]/,Gt=/^[+\-]/,kt=/^[1-9]/,ht=/^[0-9]/,wr=/^[,;]/,hs=/^[A-Z_]/i,ls=/^[A-Z0-9_]/i,St=/^[\r\n]/,zt=/^[ \t\r\n]/,Sn=/^[ \t]/,mr=F(),nl=j("//",!1),al=j("/*",!1),cr=j("*/",!1),Jt=j("(",!1),Xr=j(")",!1),zn=j("::",!1),Ot=j("{",!1),dt=j("}",!1),Ir=j("###",!1),ar=j("let",!1),ut=j(":",!1),Qt=j("=",!1),bs=j("var",!1),Zt=j("<:",!1),Xt=j("#[",!1),Yr=j("]",!1),Ha=j("each",!1),jr=j(",",!1),ps=j("for",!1),Fs=j("return",!1),yt=Nt([["A","Z"],["0","9"],"_",":"],!1,!0),Ut=j("loop",!1),Ys=j("break",!1),Dr=j("continue",!1),Lr=j("+=",!1),il=j("-=",!1),qa=j("\\",!1),ll=j("||",!1),ul=j("&&",!1),Va=j("==",!1),za=j("!=",!1),ol=j("<=",!1),fl=j(">=",!1),cl=Nt(["%",["*","+"],"-","/","<",">","^"],!1,!1),hl=j("!",!1),Kn=j("[",!1),en=j(".",!1),Wn=j("if",!1),Ka=j("elif",!1),pl=j("else",!1),Wa=j("match",!1),Rs=j("=>",!1),vl=j("*",!1),gl=j("eval",!1),dl=j("exists",!1),As=j("`",!1),Is=Nt(["`","{"],!0,!1),Gn=Nt(["{","}","`"],!1,!1),tn=j('"',!1),rn=j("'",!1),yl=j('\\"',!1),sn=j("\\'",!1),vs=Nt(["+","-"],!1,!1),js=Nt([["1","9"]],!1,!1),Sr=Nt([["0","9"]],!1,!1),nn=j("true",!1),an=j("false",!1),ln=j("null",!1),gs=Nt([",",";"],!1,!1),un=j("@",!1),Ds=j("@(",!1),Ga=j("<",!1),ur=j(">",!1),Ja=Nt([["A","Z"],"_"],!1,!0),$r=Nt([["A","Z"],["0","9"],"_"],!1,!0),wl=j(`\r
`,!1),on=Nt(["\r",`
`],!1,!1),ml=Nt([" ","	","\r",`
`],!1,!1),Ls=Nt([" ","	"],!1,!1),$l=function(f){return f.join("")},Jn=function(){return o()},xl=function(){return o()},Qa=function(){return""},bl=function(){return""},Al=function(f){return f??[]},Za=function(f,d){return d},Cl=function(f,d){return[f,...d]},Xa=function(f,d){return d},_l=function(f,d){return[f,...d]},Ya=function(f,d){return d},Pl=function(f,d){return[f,...d]},ei=function(f){return f},kl=function(f,d){return ue("ns",{name:f,members:d})},Qn=function(f,d){return ue("meta",{name:f,value:d})},El=function(f){return ue("meta",{name:null,value:f})},Zn=function(f,d,A){return ue("def",{name:f,varType:d,expr:A,mut:!1,attr:[]})},Ml=function(f,d,A){return ue("def",{name:f,varType:d,expr:A,mut:!0,attr:[]})},ti=function(f){return ue("identifier",{name:"print",chain:[ue("callChain",{args:[f]})]})},Sl=function(f,d){return ue("attr",{name:f,value:d??ue("bool",{value:!0})})},Nl=function(f,d,A){return ue("each",{var:f,items:d,for:A})},Tl=function(f,d,A){return ue("each",{var:f,items:d,for:A})},Ol=function(f,d){return d},Fl=function(f,d,A,w){return ue("for",{var:f,from:d??ue("num",{value:0}),to:A,for:w})},Rl=function(f,d){return d},Il=function(f,d,A,w){return ue("for",{var:f,from:d??ue("num",{value:0}),to:A,for:w})},jl=function(f,d){return ue("for",{times:f,for:d})},Dl=function(f,d){return ue("for",{times:f,for:d})},Ll=function(f){return ue("return",{expr:f})},Ul=function(f){return ue("loop",{statements:f})},Bl=function(){return ue("break",{})},Hl=function(){return ue("continue",{})},ql=function(f,d,A){return d==="+="?ue("addAssign",{dest:f,expr:A}):d==="-="?ue("subAssign",{dest:f,expr:A}):ue("assign",{dest:f,expr:A})},ri=function(f,d,A){return{op:d,term:A}},Vl=function(f,d){return ue("infix",{operands:[f,...d.map(A=>A.term)],operators:d.map(A=>A.op)})},zl=function(){return o()},Kl=function(f){return ue("not",{expr:f})},Wl=function(f,d){return f.chain?{...f,chain:[...f.chain,...d]}:{...f,chain:d}},Gl=function(f){return ue("callChain",{args:f??[]})},Xn=function(f,d){return d},Jl=function(f,d){return[f,...d]},si=function(f){return ue("indexChain",{index:f})},Ql=function(f){return ue("propChain",{name:f})},Zl=function(f,d,A,w){return ue("if",{cond:f,then:d,elseif:A??[],else:w})},Xl=function(f,d){return[f,...d]},ni=function(f,d){return{cond:f,then:d}},Yl=function(f){return f},Yn=function(f,d,A){return{q:d,a:A}},eu=function(f,d,A){return ue("match",{about:f,qs:d??[],default:A})},tu=function(f){return ue("block",{statements:f})},ru=function(f){return ue("exists",{identifier:f})},su=function(f){return ue("identifier",{name:f})},nu=function(f){return ue("tmpl",{tmpl:f})},ai=function(f){return f.join("")},ii=function(f){return f},li=function(f){return ue("str",{value:f.join("")})},ui=function(f){return f},au=function(f){return ue("str",{value:f.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return ue("num",{value:parseFloat(o())})},fi=function(){return ue("num",{value:parseFloat(o())})},ci=function(){return ue("num",{value:parseInt(o(),10)})},uu=function(){return ue("num",{value:parseInt(o(),10)})},hi=function(){return ue("bool",{value:!0})},ou=function(){return ue("bool",{value:!1})},fu=function(){return ue("null",{})},pi=function(f,d){return{k:f,v:d}},cu=function(f){const d=new Map;for(const A of f)d.set(A.k,A.v);return ue("obj",{value:d})},vi=function(f){return f},hu=function(f){return ue("arr",{value:f})},pu=function(f,d){return{name:f,argType:d}},gi=function(f,d){return[f,...d]},vu=function(f,d,A,w,a,l){return(f.length>0||A.length>0)&&R("Cannot use spaces before or after the function name."),ue("def",{name:d,expr:ue("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},di=function(f,d,A){return ue("fn",{args:f??[],retType:d},A??[])},ea=function(f){return f},gu=function(f){return ue("arr",{value:f})},ta=function(f,d){return{k:f,v:d}},du=function(f){const d=new Map;for(const A of f)d.set(A.k,A.v);return ue("obj",{value:d})},yu=function(f,d){return ue("fnTypeSource",{args:f??[],result:d})},yi=function(f,d){return[f,...d]},wu=function(f,d){return ue("namedTypeSource",{name:f,inner:d})},wi=function(f){return ue("namedTypeSource",{name:f,inner:null})},mi=function(){return o()},mu=function(){return o()},$i=function(f){return ue("block",{statements:f??[]})},c=r.peg$currPos|0,re=c,Cs=[{line:1,column:1}],xr=c,fn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,T={},es;if(r.startRule){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function o(){return t.substring(re,c)}function te(){return he(re,c)}function R(f,d){throw d=d!==void 0?d:he(re,c),$u(f,d)}function j(f,d){return{type:"literal",text:f,ignoreCase:d}}function Nt(f,d,A){return{type:"class",parts:f,inverted:d,ignoreCase:A}}function F(){return{type:"any"}}function z(){return{type:"end"}}function Us(f){var d=Cs[f],A;if(d)return d;if(f>=Cs.length)A=Cs.length-1;else for(A=f;!Cs[--A];);for(d=Cs[A],d={line:d.line,column:d.column};A<f;)t.charCodeAt(A)===10?(d.line++,d.column=1):d.column++,A++;return Cs[f]=d,d}function he(f,d,A){var w=Us(f),a=Us(d),l={source:s,start:{offset:f,line:w.line,column:w.column},end:{offset:d,line:a.line,column:a.column}};return l}function U(f){c<xr||(c>xr&&(xr=c,fn=[]),fn.push(f))}function $u(f,d){return new pf(f,null,null,d)}function me(f,d,A){return new pf(pf.buildMessage(f,d),f,d,A)}function or(){var f,d,A,w=c*77+0,a=T[w];if(a)return c=a.nextPos,a.result;for(f=c,d=[],A=Bs();A!==e;)d.push(A),A=Bs();return re=f,d=$l(d),f=d,T[w]={nextPos:c,result:f},f}function Bs(){var f,d,A=c*77+1,w=T[A];return w?(c=w.nextPos,w.result):(f=c,d=Si(),d!==e&&(re=f,d=Jn()),f=d,f===e&&(f=c,d=gn(),d!==e&&(re=f,d=xl()),f=d,f===e&&(f=B(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&U(mr))))),T[A]={nextPos:c,result:f},f)}function B(){var f,d,A,w,a,l,$=c*77+2,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,2)===b?(d=b,c+=2):(d=e,i===0&&U(nl)),d!==e){for(A=[],w=c,a=c,i++,l=Ri(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,l=Ri(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);re=f,f=Qa()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===_?(d=_,c+=2):(d=e,i===0&&U(al)),d!==e){for(A=[],w=c,a=c,i++,t.substr(c,2)===k?(l=k,c+=2):(l=e,i===0&&U(cr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.substr(c,2)===k?(l=k,c+=2):(l=e,i===0&&U(cr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===k?(w=k,c+=2):(w=e,i===0&&U(cr)),w!==e?(re=f,f=bl()):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function xi(){var f,d,A,w,a,l=c*77+3,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,d=[],A=M();A!==e;)d.push(A),A=M();for(A=cn(),A===e&&(A=null),w=[],a=M();a!==e;)w.push(a),a=M();return re=f,f=Al(A),T[l]={nextPos:c,result:f},f}function cn(){var f,d,A,w,a,l,$,v,n=c*77+4,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=ra(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=ra(),v!==e?(re=w,w=Za(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=ra(),v!==e?(re=w,w=Za(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=Cl(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function L(){var f,d,A,w,a,l,$,v,n=c*77+5,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=hn(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hn(),v!==e?(re=w,w=Xa(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hn(),v!==e?(re=w,w=Xa(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=_l(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _s(){var f,d,A,w,a,l,$,v,n=c*77+6,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=Ps(),d!==e){for(A=[],w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=Ps(),v!==e?(re=w,w=Ya(d,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(A.push(w),w=c,a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=Ze(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=Ps(),v!==e?(re=w,w=Ya(d,v)):(c=w,w=e)}else c=w,w=e}re=f,f=Pl(d,A)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ra(){var f,d=c*77+7,A=T[d];return A?(c=A.nextPos,A.result):(f=Nr(),f===e&&(f=rt(),f===e&&(f=Ps())),T[d]={nextPos:c,result:f},f)}function hn(){var f,d=c*77+8,A=T[d];return A?(c=A.nextPos,A.result):(f=ds(),f===e&&(f=da(),f===e&&(f=Nr())),T[d]={nextPos:c,result:f},f)}function Ps(){var f,d=c*77+9,A=T[d];return A?(c=A.nextPos,A.result):(f=ds(),f===e&&(f=da(),f===e&&(f=ks(),f===e&&(f=rs(),f===e&&(f=Qe(),f===e&&(f=Hs(),f===e&&(f=bi(),f===e&&(f=Ai(),f===e&&(f=xu(),f===e&&(f=Ci(),f===e&&(f=bu(),f===e&&(f=at()))))))))))),T[d]={nextPos:c,result:f},f)}function at(){var f,d=c*77+10,A=T[d];return A?(c=A.nextPos,A.result):(f=Au(),f===e&&(f=ts()),T[d]={nextPos:c,result:f},f)}function ts(){var f,d=c*77+11,A=T[d];return A?(c=A.nextPos,A.result):(f=as(),f===e&&(f=Eu(),f===e&&(f=_u(),f===e&&(f=pn()))),T[d]={nextPos:c,result:f},f)}function pn(){var f,d,A,w,a,l,$=c*77+12,v=T[$];if(v)return c=v.nextPos,v.result;if(f=ia(),f===e&&(f=Pu(),f===e&&(f=Mi(),f===e&&(f=Si(),f===e&&(f=gn(),f===e&&(f=oa(),f===e&&(f=yn(),f===e&&(f=ha(),f===e&&(f=pa(),f===e&&(f=Oi(),f===e&&(f=Cu(),f===e&&(f=qs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(d=S,c++):(d=e,i===0&&U(Jt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=at(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e?(re=f,f=ei(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ur(){var f,d=c*77+13,A=T[d];return A?(c=A.nextPos,A.result):(f=oa(),f===e&&(f=gn(),f===e&&(f=yn(),f===e&&(f=ya(),f===e&&(f=wa(),f===e&&(f=ha()))))),T[d]={nextPos:c,result:f},f)}function Nr(){var f,d,A,w,a,l,$,v,n,u,y=c*77+14,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===O?(d=O,c+=2):(d=e,i===0&&U(zn)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=D,c++):(l=e,i===0&&U(Ot)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(v=L(),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();t.charCodeAt(c)===125?(u=H,c++):(u=e,i===0&&U(dt)),u!==e?(re=f,f=kl(w,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function rt(){var f,d,A,w,a,l,$=c*77+15,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,3)===ae?(d=ae,c+=3):(d=e,i===0&&U(Ir)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=it(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();l=Ur(),l!==e?(re=f,f=Qn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ae?(d=ae,c+=3):(d=e,i===0&&U(Ir)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();w=Ur(),w!==e?(re=f,f=El(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ds(){var f,d,A,w,a,l,$,v,n,u=c*77+16,y=T[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===se?(d=se,c+=3):(d=e,i===0&&U(ar)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===58?($=ie,c++):($=e,i===0&&U(ut)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=br(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===61?($=de,c++):($=e,i===0&&U(Qt)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=at(),n!==e?(re=f,f=Zn(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===W?(d=W,c+=3):(d=e,i===0&&U(bs)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===58?($=ie,c++):($=e,i===0&&U(ut)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=br(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===61?($=de,c++):($=e,i===0&&U(Qt)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();n=at(),n!==e?(re=f,f=Ml(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[u]={nextPos:c,result:f},f}function ks(){var f,d,A,w,a=c*77+17,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(d=K,c+=2):(d=e,i===0&&U(Zt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();w=at(),w!==e?(re=f,f=ti(w)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Qe(){var f,d,A,w,a,l,$,v=c*77+18,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,2)===Q?(d=Q,c+=2):(d=e,i===0&&U(Xt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=it(),w!==e){for(a=c,l=[],$=M();$!==e;)l.push($),$=M();for($=Ur(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=M();$!==e;)l.push($),$=M();t.charCodeAt(c)===93?($=X,c++):($=e,i===0&&U(Yr)),$!==e?(re=f,f=Sl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[v]={nextPos:c,result:f},f}function Hs(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+19,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.substr(c,4)===ee?(d=ee,c+=4):(d=e,i===0&&U(Ha)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(t.substr(c,3)===se?(a=se,c+=3):(a=e,i===0&&U(ar)),a!==e){if(l=[],$=M(),$!==e)for(;$!==e;)l.push($),$=M();else l=e;if(l!==e)if($=it(),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();for(t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&U(jr)),n===e&&(n=null),u=[],y=M();y!==e;)u.push(y),y=M();if(y=at(),y!==e)if(t.charCodeAt(c)===41?(p=E,c++):(p=e,i===0&&U(Xr)),p!==e){for(x=[],m=M();m!==e;)x.push(m),m=M();m=hr(),m!==e?(re=f,f=Nl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===ee?(d=ee,c+=4):(d=e,i===0&&U(Ha)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(t.substr(c,3)===se?(w=se,c+=3):(w=e,i===0&&U(ar)),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();if(u=at(),u!==e){if(y=[],p=M(),p!==e)for(;p!==e;)y.push(p),p=M();else y=e;y!==e?(p=hr(),p!==e?(re=f,f=Tl(l,u,p)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function bi(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C=c*77+20,N=T[C];if(N)return c=N.nextPos,N.result;if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(t.substr(c,3)===se?(a=se,c+=3):(a=e,i===0&&U(ar)),a!==e){if(l=[],$=M(),$!==e)for(;$!==e;)l.push($),$=M();else l=e;if(l!==e)if($=it(),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();if(n=c,t.charCodeAt(c)===61?(u=de,c++):(u=e,i===0&&U(Qt)),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();p=at(),p!==e?(re=n,n=Ol($,p)):(c=n,n=e)}else c=n,n=e;for(n===e&&(n=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&U(jr)),u===e&&(u=null),y=[],p=M();p!==e;)y.push(p),p=M();if(p=at(),p!==e)if(t.charCodeAt(c)===41?(x=E,c++):(x=e,i===0&&U(Xr)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();P=hr(),P!==e?(re=f,f=Fl($,n,p,P)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(t.substr(c,3)===se?(w=se,c+=3):(w=e,i===0&&U(ar)),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(v=c,t.charCodeAt(c)===61?(n=de,c++):(n=e,i===0&&U(Qt)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();y=at(),y!==e?(re=v,v=Rl(l,y)):(c=v,v=e)}else c=v,v=e;for(v===e&&(v=null),t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&U(jr)),n===e&&(n=null),u=[],y=M();y!==e;)u.push(y),y=M();if(y=at(),y!==e){if(p=[],x=M(),x!==e)for(;x!==e;)p.push(x),x=M();else p=e;p!==e?(x=hr(),x!==e?(re=f,f=Il(l,v,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===40?(w=S,c++):(w=e,i===0&&U(Jt)),w!==e)if(a=at(),a!==e)if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();v=hr(),v!==e?(re=f,f=jl(a,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===fe?(d=fe,c+=3):(d=e,i===0&&U(ps)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=at(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;a!==e?(l=hr(),l!==e?(re=f,f=Dl(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return T[C]={nextPos:c,result:f},f}function rs(){var f,d,A,w,a,l=c*77+21,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===le?(d=le,c+=6):(d=e,i===0&&U(Fs)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();a=at(),a!==e?(re=f,f=Ll(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function Ai(){var f,d,A,w,a,l,$,v,n=c*77+22,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===we?(d=we,c+=4):(d=e,i===0&&U(Ut)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===123?(w=D,c++):(w=e,i===0&&U(Ot)),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();if(l=_s(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();t.charCodeAt(c)===125?(v=H,c++):(v=e,i===0&&U(dt)),v!==e?(re=f,f=Ul(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function xu(){var f,d,A,w,a=c*77+23,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===_e?(d=_e,c+=5):(d=e,i===0&&U(Ys)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=Bl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function Ci(){var f,d,A,w,a=c*77+24,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===be?(d=be,c+=8):(d=e,i===0&&U(Dr)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=Hl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function bu(){var f,d,A,w,a,l,$=c*77+25,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=at(),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.substr(c,2)===nt?(w=nt,c+=2):(w=e,i===0&&U(Lr)),w===e&&(t.substr(c,2)===mt?(w=mt,c+=2):(w=e,i===0&&U(il)),w===e&&(t.charCodeAt(c)===61?(w=de,c++):(w=e,i===0&&U(Qt)))),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();l=at(),l!==e?(re=f,f=ql(d,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Au(){var f,d,A,w,a,l,$,v,n=c*77+26,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=ts(),d!==e){for(A=[],w=c,a=[],l=ss();l!==e;)a.push(l),l=ss();if(l=_i(),l!==e){for($=[],v=ss();v!==e;)$.push(v),v=ss();v=ts(),v!==e?(re=w,w=ri(d,l,v)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(A.push(w),w=c,a=[],l=ss();l!==e;)a.push(l),l=ss();if(l=_i(),l!==e){for($=[],v=ss();v!==e;)$.push(v),v=ss();v=ts(),v!==e?(re=w,w=ri(d,l,v)):(c=w,w=e)}else c=w,w=e}else A=e;A!==e?(re=f,f=Vl(d,A)):(c=f,f=e)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ss(){var f,d,A,w=c*77+27,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(d=sr,c++):(d=e,i===0&&U(qa)),d!==e?(A=Ze(),A!==e?(d=[d,A],f=d):(c=f,f=e)):(c=f,f=e),f===e&&(f=Ue()),T[w]={nextPos:c,result:f},f)}function _i(){var f,d,A=c*77+28,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===xt?(d=xt,c+=2):(d=e,i===0&&U(ll)),d===e&&(t.substr(c,2)===wt?(d=wt,c+=2):(d=e,i===0&&U(ul)),d===e&&(t.substr(c,2)===Ye?(d=Ye,c+=2):(d=e,i===0&&U(Va)),d===e&&(t.substr(c,2)===bt?(d=bt,c+=2):(d=e,i===0&&U(za)),d===e&&(t.substr(c,2)===Ht?(d=Ht,c+=2):(d=e,i===0&&U(ol)),d===e&&(t.substr(c,2)===nr?(d=nr,c+=2):(d=e,i===0&&U(fl)),d===e&&(d=t.charAt(c),gt.test(d)?c++:(d=e,i===0&&U(cl)))))))),d!==e&&(re=f,d=zl()),f=d,T[A]={nextPos:c,result:f},f)}function Cu(){var f,d,A,w=c*77+29,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(d=vt,c++):(d=e,i===0&&U(hl)),d!==e?(A=at(),A!==e?(re=f,f=Kl(A)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function _u(){var f,d,A,w,a=c*77+30,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,d=pn(),d!==e){if(A=[],w=Pi(),w===e&&(w=sa(),w===e&&(w=ki())),w!==e)for(;w!==e;)A.push(w),w=Pi(),w===e&&(w=sa(),w===e&&(w=ki()));else A=e;A!==e?(re=f,f=Wl(d,A)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Pi(){var f,d,A,w,a,l,$=c*77+31,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===40?(d=S,c++):(d=e,i===0&&U(Jt)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ns(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e?(re=f,f=Gl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ns(){var f,d,A,w,a,l,$=c*77+32,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=at(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=at(),l!==e?(re=w,w=Xn(d,l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=at(),l!==e?(re=w,w=Xn(d,l)):(c=w,w=e)):(c=w,w=e);re=f,f=Jl(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function sa(){var f,d,A,w,a,l,$=c*77+33,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=at(),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=si(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ki(){var f,d,A,w=c*77+34,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(d=qt,c++):(d=e,i===0&&U(en)),d!==e?(A=it(),A!==e?(re=f,f=Ql(A)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function as(){var f,d,A,w,a,l,$,v,n,u,y=c*77+35,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===_r?(d=_r,c+=2):(d=e,i===0&&U(Wn)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;if(A!==e)if(w=at(),w!==e){if(a=[],l=M(),l!==e)for(;l!==e;)a.push(l),l=M();else a=e;if(a!==e)if(l=hr(),l!==e){if($=c,v=[],n=M(),n!==e)for(;n!==e;)v.push(n),n=M();else v=e;if(v!==e?(n=na(),n!==e?$=n:(c=$,$=e)):(c=$,$=e),$===e&&($=null),v=c,n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;n!==e?(u=Ei(),u!==e?v=u:(c=v,v=e)):(c=v,v=e),v===e&&(v=null),re=f,f=Zl(w,l,$,v)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function na(){var f,d,A,w,a,l,$=c*77+36,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=aa(),d!==e){for(A=[],w=c,a=[],l=M();l!==e;)a.push(l),l=M();for(l=aa(),l!==e?w=l:(c=w,w=e);w!==e;){for(A.push(w),w=c,a=[],l=M();l!==e;)a.push(l),l=M();l=aa(),l!==e?w=l:(c=w,w=e)}re=f,f=Xl(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function aa(){var f,d,A,w,a,l,$,v=c*77+37,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,4)===Vt?(d=Vt,c+=4):(d=e,i===0&&U(Ka)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();if(a=at(),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();$=hr(),$!==e?(re=f,f=ni(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[v]={nextPos:c,result:f},f}function Ei(){var f,d,A,w,a,l=c*77+38,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===ye?(d=ye,c+=4):(d=e,i===0&&U(pl)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();a=hr(),a!==e?(re=f,f=Yl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function ia(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C,N,I=c*77+39,q=T[I];if(q)return c=q.nextPos,q.result;if(f=c,t.substr(c,5)===qe?(d=qe,c+=5):(d=e,i===0&&U(Wa)),d!==e)if(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();if(a=at(),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();if(t.charCodeAt(c)===123?($=D,c++):($=e,i===0&&U(Ot)),$!==e){for(v=[],n=M();n!==e;)v.push(n),n=M();if(n=[],u=c,y=at(),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();re=u,u=Yn(a,y,P)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(n.push(u),u=c,y=at(),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();re=u,u=Yn(a,y,P)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else n=e;if(n!==e){if(u=c,t.charCodeAt(c)===42?(y=et,c++):(y=e,i===0&&U(vl)),y!==e){for(p=[],x=M();x!==e;)p.push(x),x=M();if(t.substr(c,2)===Te?(x=Te,c+=2):(x=e,i===0&&U(Rs)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();if(P=hr(),P!==e){for(C=[],N=M();N!==e;)C.push(N),N=M();u=P}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],p=M();p!==e;)y.push(p),p=M();t.charCodeAt(c)===125?(p=H,c++):(p=e,i===0&&U(dt)),p!==e?(re=f,f=eu(a,n,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Pu(){var f,d,A,w,a,l,$,v,n=c*77+40,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ct?(d=ct,c+=4):(d=e,i===0&&U(gl)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(t.charCodeAt(c)===123?(w=D,c++):(w=e,i===0&&U(Ot)),w!==e){for(a=[],l=M();l!==e;)a.push(l),l=M();if(l=_s(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();t.charCodeAt(c)===125?(v=H,c++):(v=e,i===0&&U(dt)),v!==e?(re=f,f=tu(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function Mi(){var f,d,A,w,a=c*77+41,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===At?(d=At,c+=6):(d=e,i===0&&U(dl)),d!==e){if(A=[],w=M(),w!==e)for(;w!==e;)A.push(w),w=M();else A=e;A!==e?(w=qs(),w!==e?(re=f,f=ru(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function qs(){var f,d,A=c*77+42,w=T[A];return w?(c=w.nextPos,w.result):(f=c,d=Su(),d!==e&&(re=f,d=su(d)),f=d,T[A]={nextPos:c,result:f},f)}function Si(){var f,d,A,w,a,l,$=c*77+43,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===96?(d=J,c++):(d=e,i===0&&U(As)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&U(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Ni(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&U(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=Ni(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=J,c++):(w=e,i===0&&U(As)),w!==e?(re=f,f=nu(A)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ni(){var f,d,A,w,a,l,$=c*77+44,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=at(),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();t.charCodeAt(c)===125?(l=H,c++):(l=e,i===0&&U(dt)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,d=[],A=vn(),A!==e)for(;A!==e;)d.push(A),A=vn();else d=e;d!==e&&(re=f,d=ai(d)),f=d}return T[$]={nextPos:c,result:f},f}function vn(){var f,d=c*77+45,A=T[d];return A?(c=A.nextPos,A.result):(f=ku(),f===e&&(f=t.charAt(c),Tt.test(f)?c++:(f=e,i===0&&U(Is))),T[d]={nextPos:c,result:f},f)}function ku(){var f,d,A,w=c*77+46,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(d=sr,c++):(d=e,i===0&&U(qa)),d!==e?(A=t.charAt(c),Mt.test(A)?c++:(A=e,i===0&&U(Gn)),A!==e?f=A:(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function gn(){var f,d,A,w,a,l,$=c*77+47,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===34?(d=Z,c++):(d=e,i===0&&U(tn)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=Z,c++):(l=e,i===0&&U(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=la(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ii(l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=Z,c++):(l=e,i===0&&U(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=la(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ii(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=Z,c++):(w=e,i===0&&U(tn)),w!==e?(re=f,f=li(A)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(d=oe,c++):(d=e,i===0&&U(rn)),d!==e){for(A=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=oe,c++):(l=e,i===0&&U(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ua(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ui(l)):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=oe,c++):(l=e,i===0&&U(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ua(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&U(mr))),l!==e?(re=w,w=ui(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=oe,c++):(w=e,i===0&&U(rn)),w!==e?(re=f,f=au(A)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function la(){var f,d,A=c*77+48,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Pe?(d=Pe,c+=2):(d=e,i===0&&U(yl)),d!==e&&(re=f,d=iu()),f=d,T[A]={nextPos:c,result:f},f)}function ua(){var f,d,A=c*77+49,w=T[A];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ce?(d=ce,c+=2):(d=e,i===0&&U(sn)),d!==e&&(re=f,d=oi()),f=d,T[A]={nextPos:c,result:f},f)}function oa(){var f,d=c*77+50,A=T[d];return A?(c=A.nextPos,A.result):(f=dn(),f===e&&(f=fa()),T[d]={nextPos:c,result:f},f)}function dn(){var f,d,A,w,a,l,$,v=c*77+51,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),kt.test(A)?c++:(A=e,i===0&&U(js)),A!==e){if(w=[],a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=qt,c++):(a=e,i===0&&U(en)),a!==e){if(l=[],$=t.charAt(c),ht.test($)?c++:($=e,i===0&&U(Sr)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),ht.test($)?c++:($=e,i===0&&U(Sr));else l=e;l!==e?(re=f,f=lu()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),ht.test(A)?c++:(A=e,i===0&&U(Sr)),A!==e)if(t.charCodeAt(c)===46?(w=qt,c++):(w=e,i===0&&U(en)),w!==e){if(a=[],l=t.charAt(c),ht.test(l)?c++:(l=e,i===0&&U(Sr)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),ht.test(l)?c++:(l=e,i===0&&U(Sr));else a=e;a!==e?(re=f,f=fi()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[v]={nextPos:c,result:f},f}function fa(){var f,d,A,w,a,l=c*77+52,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),kt.test(A)?c++:(A=e,i===0&&U(js)),A!==e){if(w=[],a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),ht.test(a)?c++:(a=e,i===0&&U(Sr));else w=e;w!==e?(re=f,f=ci()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,d=t.charAt(c),Gt.test(d)?c++:(d=e,i===0&&U(vs)),d===e&&(d=null),A=t.charAt(c),ht.test(A)?c++:(A=e,i===0&&U(Sr)),A!==e?(re=f,f=uu()):(c=f,f=e)),T[l]={nextPos:c,result:f},f}function yn(){var f,d=c*77+53,A=T[d];return A?(c=A.nextPos,A.result):(f=Ti(),f===e&&(f=ca()),T[d]={nextPos:c,result:f},f)}function Ti(){var f,d,A,w,a=c*77+54,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ee?(d=Ee,c+=4):(d=e,i===0&&U(nn)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=hi()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ca(){var f,d,A,w,a=c*77+55,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===De?(d=De,c+=5):(d=e,i===0&&U(an)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=ou()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ha(){var f,d,A,w,a=c*77+56,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Oe?(d=Oe,c+=4):(d=e,i===0&&U(ln)),d!==e?(A=c,i++,w=t.charAt(c),tt.test(w)?c++:(w=e,i===0&&U(yt)),i--,w===e?A=void 0:(c=A,A=e),A!==e?(re=f,f=fu()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function pa(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+57,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=at(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=pi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=at(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=pi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=H,c++):(a=e,i===0&&U(dt)),a!==e?(re=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function Oi(){var f,d,A,w,a,l,$,v,n,u,y=c*77+58,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=at(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=vi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=at(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=vi(l)}else c=a,a=e;for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function va(){var f,d,A,w,a,l,$,v=c*77+59,n=T[v];if(n)return c=n.nextPos,n.result;if(f=c,d=it(),d!==e){for(A=c,w=[],a=M();a!==e;)w.push(a),a=M();if(t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e){for(l=[],$=M();$!==e;)l.push($),$=M();$=br(),$!==e?A=$:(c=A,A=e)}else c=A,A=e;A===e&&(A=null),re=f,f=pu(d,A)}else c=f,f=e;return T[v]={nextPos:c,result:f},f}function ga(){var f,d,A,w,a,l,$=c*77+60,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=va(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=va(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=va(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);re=f,f=gi(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function da(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P,C,N,I=c*77+61,q=T[I];if(q)return c=q.nextPos,q.result;if(f=c,t.charCodeAt(c)===64?(d=Fe,c++):(d=e,i===0&&U(un)),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(w=it(),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(t.charCodeAt(c)===40?(l=S,c++):(l=e,i===0&&U(Jt)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(v=ga(),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();if(t.charCodeAt(c)===41?(u=E,c++):(u=e,i===0&&U(Xr)),u!==e){for(y=c,p=[],x=M();x!==e;)p.push(x),x=M();if(t.charCodeAt(c)===58?(x=ie,c++):(x=e,i===0&&U(ut)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();P=br(),P!==e?y=P:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),p=[],x=M();x!==e;)p.push(x),x=M();if(t.charCodeAt(c)===123?(x=D,c++):(x=e,i===0&&U(Ot)),x!==e){for(m=[],P=M();P!==e;)m.push(P),P=M();for(P=_s(),P===e&&(P=null),C=[],N=M();N!==e;)C.push(N),N=M();t.charCodeAt(c)===125?(N=H,c++):(N=e,i===0&&U(dt)),N!==e?(re=f,f=vu(A,w,a,v,y,P)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Eu(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m=c*77+62,P=T[m];if(P)return c=P.nextPos,P.result;if(f=c,t.substr(c,2)===Ce?(d=Ce,c+=2):(d=e,i===0&&U(Ds)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ga(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=c,v=[],n=M();n!==e;)v.push(n),n=M();if(t.charCodeAt(c)===58?(n=ie,c++):(n=e,i===0&&U(ut)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();y=br(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),v=[],n=M();n!==e;)v.push(n),n=M();if(t.charCodeAt(c)===123?(n=D,c++):(n=e,i===0&&U(Ot)),n!==e){for(u=[],y=M();y!==e;)u.push(y),y=M();for(y=_s(),y===e&&(y=null),p=[],x=M();x!==e;)p.push(x),x=M();t.charCodeAt(c)===125?(x=H,c++):(x=e,i===0&&U(dt)),x!==e?(re=f,f=di(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[m]={nextPos:c,result:f},f}function ya(){var f,d,A,w,a,l,$,v,n,u,y=c*77+63,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(d=Cr,c++):(d=e,i===0&&U(Kn)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=Ur(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=ea(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Ur(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&U(jr)),v===e&&(v=null),n=[],u=M();u!==e;)n.push(u),u=M();re=a,a=ea(l)}else c=a,a=e;for(a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===93?(l=X,c++):(l=e,i===0&&U(Yr)),l!==e?(re=f,f=gu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function wa(){var f,d,A,w,a,l,$,v,n,u,y,p,x,m,P=c*77+64,C=T[P];if(C)return c=C.nextPos,C.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();if(w=[],a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=Ur(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=ta(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=it(),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.charCodeAt(c)===58?(v=ie,c++):(v=e,i===0&&U(ut)),v!==e){if(n=[],u=M(),u!==e)for(;u!==e;)n.push(u),u=M();else n=e;if(n!==e)if(u=Ur(),u!==e){for(y=[],p=M();p!==e;)y.push(p),p=M();for(p=t.charAt(c),wr.test(p)?c++:(p=e,i===0&&U(gs)),p===e&&(p=null),x=[],m=M();m!==e;)x.push(m),m=M();re=a,a=ta(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=H,c++):(a=e,i===0&&U(dt)),a!==e?(re=f,f=du(w)):(c=f,f=e)}else c=f,f=e;return T[P]={nextPos:c,result:f},f}function br(){var f,d=c*77+65,A=T[d];return A?(c=A.nextPos,A.result):(f=Mu(),f===e&&(f=Fi()),T[d]={nextPos:c,result:f},f)}function Mu(){var f,d,A,w,a,l,$,v,n,u,y=c*77+66,p=T[y];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===Ce?(d=Ce,c+=2):(d=e,i===0&&U(Ds)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=ma(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&U(Xr)),l!==e){for($=[],v=M();v!==e;)$.push(v),v=M();if(t.substr(c,2)===Te?(v=Te,c+=2):(v=e,i===0&&U(Rs)),v!==e){for(n=[],u=M();u!==e;)n.push(u),u=M();u=br(),u!==e?(re=f,f=yu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ma(){var f,d,A,w,a,l,$=c*77+67,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=br(),d!==e){for(A=[],w=c,a=Es(),a!==e?(l=br(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,a=Es(),a!==e?(l=br(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);re=f,f=yi(d,A)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Fi(){var f,d,A,w,a,l,$,v,n=c*77+68,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,d=it(),d!==e){for(A=[],w=Ue();w!==e;)A.push(w),w=Ue();if(t.charCodeAt(c)===60?(w=ft,c++):(w=e,i===0&&U(Ga)),w!==e){for(a=[],l=Ue();l!==e;)a.push(l),l=Ue();if(l=br(),l!==e){for($=[],v=Ue();v!==e;)$.push(v),v=Ue();t.charCodeAt(c)===62?(v=Ke,c++):(v=e,i===0&&U(ur)),v!==e?(re=f,f=wu(d,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,d=it(),d!==e&&(re=f,d=wi(d)),f=d),T[n]={nextPos:c,result:f},f}function it(){var f,d,A,w,a=c*77+69,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,d=t.charAt(c),hs.test(d)?c++:(d=e,i===0&&U(Ja)),d!==e){for(A=[],w=t.charAt(c),ls.test(w)?c++:(w=e,i===0&&U($r));w!==e;)A.push(w),w=t.charAt(c),ls.test(w)?c++:(w=e,i===0&&U($r));re=f,f=mi()}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Su(){var f,d,A,w,a,l,$=c*77+70,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,d=it(),d!==e){for(A=[],w=c,t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e?(l=it(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)A.push(w),w=c,t.charCodeAt(c)===58?(a=ie,c++):(a=e,i===0&&U(ut)),a!==e?(l=it(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);re=f,f=mu()}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Es(){var f,d,A,w,a,l=c*77+71,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,d=[],A=M();A!==e;)d.push(A),A=M();if(t.charCodeAt(c)===44?(A=Y,c++):(A=e,i===0&&U(jr)),A!==e){for(w=[],a=M();a!==e;)w.push(a),a=M();d=[d,A,w],f=d}else c=f,f=e;if(f===e)if(f=[],d=M(),d!==e)for(;d!==e;)f.push(d),d=M();else f=e;return T[l]={nextPos:c,result:f},f}function hr(){var f,d,A,w,a,l,$=c*77+72,v=T[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(d=D,c++):(d=e,i===0&&U(Ot)),d!==e){for(A=[],w=M();w!==e;)A.push(w),w=M();for(w=_s(),w===e&&(w=null),a=[],l=M();l!==e;)a.push(l),l=M();t.charCodeAt(c)===125?(l=H,c++):(l=e,i===0&&U(dt)),l!==e?(re=f,f=$i(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),T[$]={nextPos:c,result:f},f}function Ze(){var f,d=c*77+73,A=T[d];return A?(c=A.nextPos,A.result):(t.substr(c,2)===st?(f=st,c+=2):(f=e,i===0&&U(wl)),f===e&&(f=t.charAt(c),St.test(f)?c++:(f=e,i===0&&U(on))),T[d]={nextPos:c,result:f},f)}function Ri(){var f,d,A=c*77+74,w=T[A];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(d=t.charAt(c),c++):(d=e,i===0&&U(mr)),i--,d===e?f=void 0:(c=f,f=e),f===e&&(f=Ze()),T[A]={nextPos:c,result:f},f)}function M(){var f,d=c*77+75,A=T[d];return A?(c=A.nextPos,A.result):(f=t.charAt(c),zt.test(f)?c++:(f=e,i===0&&U(ml)),T[d]={nextPos:c,result:f},f)}function Ue(){var f,d=c*77+76,A=T[d];return A?(c=A.nextPos,A.result):(f=t.charAt(c),Sn.test(f)?c++:(f=e,i===0&&U(Ls)),T[d]={nextPos:c,result:f},f)}function ue(f,d,A){const w={type:f};d.children=A;for(const l of Object.keys(d))d[l]!==void 0&&(w[l]=d[l]);const a=te();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(es=g(),r.peg$library)return{peg$result:es,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:fn,peg$maxFailPos:xr};if(es!==e&&c===t.length)return es;throw es!==e&&c<t.length&&U(z()),me(fn,xr<t.length?t.charAt(xr):null,xr<t.length?he(xr,xr+1):he(xr,xr))}const W_=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function G_(t){return W_.includes(t.type)}function H0(t){return"chain"in t&&t.chain!==null}function J_(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Q_(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Z_(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Rt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Rt(e.expr,r);break}case"return":{e.expr=Rt(e.expr,r);break}case"each":{e.items=Rt(e.items,r),e.for=Rt(e.for,r);break}case"for":{e.from!=null&&(e.from=Rt(e.from,r)),e.to!=null&&(e.to=Rt(e.to,r)),e.times!=null&&(e.times=Rt(e.times,r)),e.for=Rt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Rt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Rt(e.expr,r),e.dest=Rt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Rt(e.operands[s],r);break}case"not":{e.expr=Rt(e.expr,r);break}case"if":{e.cond=Rt(e.cond,r),e.then=Rt(e.then,r);for(const s of e.elseif)s.cond=Rt(s.cond,r),s.then=Rt(s.then,r);e.else!=null&&(e.else=Rt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Rt(e.children[s],r);break}case"match":{e.about=Rt(e.about,r);for(const s of e.qs)s.q=Rt(s.q,r),s.a=Rt(s.a,r);e.default!=null&&(e.default=Rt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Rt(e.statements[s],r);break}case"exists":{e.identifier=Rt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=Rt(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Rt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Rt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Rt(e.args[s],r);break}case"indexChain":{e.index=Rt(e.index,r);break}case"call":{e.target=Rt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Rt(e.args[s],r);break}case"index":{e.target=Rt(e.target,r),e.index=Rt(e.index,r);break}case"prop":{e.target=Rt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Rt(e.members[s],r);break}case"or":case"and":{e.left=Rt(e.left,r),e.right=Rt(e.right,r);break}}if(H0(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Rt(e.chain[s],r);return e}const nv=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function av(t){throw new Cf(`Reserved word "${t}" cannot be used as variable name.`)}function X_(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{nv.includes(t.name)&&av(t.name);break}case"meta":{t.name!=null&&nv.includes(t.name)&&av(t.name);break}case"fn":{for(const r of t.args)nv.includes(r.name)&&av(r.name);break}}return t}function Y_(t){for(const r of t)Rt(r,X_);return t}function Fy(t){return{type:"simple",name:t}}function e2(t,r){return{type:"generic",name:t,inners:r}}function t2(t,r){return{type:"fn",args:t,result:r}}function Eh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Eh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Eh(s)).join(", "),e=Eh(t.result);return`@(${r}) { ${e} }`}}}function sc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Fy(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=sc(t.inner):r=Fy("any"),e2(t.name,[r])}}throw new Cf(`Unknown type: '${Eh(t)}'`)}else{const r=t.args.map(e=>sc(e));return t2(r,sc(t.result))}}function r2(t){switch(t.type){case"def":{t.varType!=null&&sc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&sc(r.argType);t.retType!=null&&sc(t.retType);break}}return t}function s2(t){for(const r of t)Rt(r,r2);return t}function Mh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Mh(s.expr.children)),r.push(s);else{if(e.length>0)throw new Cf("invalid attribute.");switch(s.type){case"fn":{s.children=Mh(s.children);break}case"block":{s.statements=Mh(s.statements);break}}r.push(s)}if(e.length>0)throw new Cf("invalid attribute.");return r}function n2(t){if(G_(t)&&H0(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=J_(s,h.args,h.loc);break}case"indexChain":{s=Q_(s,h.index,h.loc);break}case"propChain":{s=Z_(s,h.name,h.loc);break}}return s}return t}function a2(t){for(let r=0;r<t.length;r++)t[r]=Rt(t[r],n2);return t}function Sh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function q0(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Sh(t,r,e);{const{left:s,right:h,info:g}=t;return Sh(s,q0(h,r,e),g)}}function tf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[tf(t.left),tf(t.right)]}}const i2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:tf(t.left),right:tf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:tf(t.left),right:tf(t.right)}),priority:3}};function l2(t){const r=t.operators.map(s=>{const h=i2[s];if(h==null)throw new Cf(`No such operator: ${s}.`);return h});let e=Sh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=q0(e,t.operands[2+s],r[1+s]);return tf(e)}function u2(t){for(let r=0;r<t.length;r++)t[r]=Rt(t[r],e=>e.type==="infix"?l2(e):e);return t}var Gu;let o2=(Gu=class{constructor(){ve(this,"plugins");this.plugins={validate:[Y_,s2],transform:[Mh,a2,u2]}}static parse(r){return Gu.instance==null&&(Gu.instance=new Gu),Gu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Oy(r,{startRule:"Preprocess"});e=Oy(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new Cf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new Cf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},ve(Gu,"instance"),Gu);const f2="0.18.0",c2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let tg=[],bc=null;function h2(t){return tg=o2.parse(t),JSON.stringify(tg,null,"	")}async function p2(t){bc==null||bc.abort(),bc=new Hn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Xv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Xv(e.val,!0),print:!1});break}}});try{await bc.exec(tg)}catch(r){t.err(r)}}const v2=Object.freeze(Object.defineProperty({__proto__:null,exec:p2,parse:h2,samples:c2,version:f2},Symbol.toStringTag,{value:"Module"}));function ws(t,r,e){let s=e.value;return{configurable:!0,get(){const h=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){s=h}}}let _p=class V0 extends Error{constructor(e,s){super(e);ve(this,"name","AiScript");ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,V0)}},g2=class extends _p{constructor(e){super(e.message??`${e}`,e);ve(this,"name","Internal")}},_f=class extends _p{constructor(e,s){super(e,s);ve(this,"name","Syntax")}},Vr=class extends _p{constructor(e,s){super(e,s);ve(this,"name","Runtime")}},Ry=class extends Vr{constructor(r,e){super(r,e)}};var Bo=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let go=class z0{constructor(r=[],e,s){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new z0(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new Vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Vr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){const g=h.get(r);if(!g.isMutable)throw new Vr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Vr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Bo([ws],go.prototype,"log",null);Bo([ws],go.prototype,"onUpdated",null);Bo([ws],go.prototype,"createChildScope",null);Bo([ws],go.prototype,"get",null);Bo([ws],go.prototype,"exists",null);Bo([ws],go.prototype,"getAll",null);Bo([ws],go.prototype,"add",null);Bo([ws],go.prototype,"assign",null);let gh;const d2=new Uint8Array(16);function y2(){if(!gh&&(gh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gh(d2)}const xn=[];for(let t=0;t<256;++t)xn.push((t+256).toString(16).slice(1));function w2(t,r=0){return xn[t[r+0]]+xn[t[r+1]]+xn[t[r+2]]+xn[t[r+3]]+"-"+xn[t[r+4]]+xn[t[r+5]]+"-"+xn[t[r+6]]+xn[t[r+7]]+"-"+xn[t[r+8]]+xn[t[r+9]]+"-"+xn[t[r+10]]+xn[t[r+11]]+xn[t[r+12]]+xn[t[r+13]]+xn[t[r+14]]+xn[t[r+15]]}const m2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Iy={randomUUID:m2};function $2(t,r,e){if(Iy.randomUUID&&!r&&!t)return Iy.randomUUID();t=t||{};const s=t.random||(t.rng||y2)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,w2(s)}const pr={type:"null"},Zi={type:"bool",value:!0},ji={type:"bool",value:!1},ze=t=>({type:"num",value:t}),dr=t=>({type:"str",value:t}),vf=t=>({type:"bool",value:t}),sp=t=>({type:"obj",value:t}),xs=t=>({type:"arr",value:t}),x2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ae=t=>({type:"fn",native:t}),b2=t=>({type:"return",value:t}),A2=()=>({type:"break",value:null}),C2=()=>({type:"continue",value:null}),_2=t=>t.type==="return"?t.value:t,rg=(t,r)=>({type:"error",value:t,info:r});function Bi(t){if(t==null)throw new Vr("Expect anything, but got nothing.")}function Ca(t){if(t==null)throw new Vr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Vr(`Expect boolean, but got ${t.type}.`)}function So(t){if(t==null)throw new Vr("Expect function, but got nothing.");if(t.type!=="fn")throw new Vr(`Expect function, but got ${t.type}.`)}function Ms(t){if(t==null)throw new Vr("Expect string, but got nothing.");if(t.type!=="str")throw new Vr(`Expect string, but got ${t.type}.`)}function He(t){if(t==null)throw new Vr("Expect number, but got nothing.");if(t.type!=="num")throw new Vr(`Expect number, but got ${t.type}.`)}function Bu(t){if(t==null)throw new Vr("Expect object, but got nothing.");if(t.type!=="obj")throw new Vr(`Expect object, but got ${t.type}.`)}function nc(t){if(t==null)throw new Vr("Expect array, but got nothing.");if(t.type!=="arr")throw new Vr(`Expect array, but got ${t.type}.`)}function iv(t){return t.type==="obj"}function jy(t){return t.type==="arr"}function sg(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function ng(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>ng(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function ag(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>ag(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=ag(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ig(t){if(t===null)return pr;if(typeof t=="boolean")return vf(t);if(typeof t=="string")return dr(t);if(typeof t=="number")return ze(t);if(Array.isArray(t))return xs(t.map(r=>ig(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,ig(s));return sp(r)}return pr}function ac(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const h of t.value)s.push(ac(h,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[h,g]of t.value)s.push(`${h}: ${ac(g,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const P2={version:"0.17.0"},k2=P2.version,E2=new TextEncoder,M2=new TextDecoder,S2={help:dr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":dr(k2),"Core:ai":dr("kawaii"),"Core:not":Ae(([t])=>(Ca(t),t.value?ji:Zi)),"Core:eq":Ae(([t,r])=>(Bi(t),Bi(r),sg(t,r)?Zi:ji)),"Core:neq":Ae(([t,r])=>(Bi(t),Bi(r),sg(t,r)?ji:Zi)),"Core:and":Ae(([t,r])=>(Ca(t),t.value?(Ca(r),r.value?Zi:ji):ji)),"Core:or":Ae(([t,r])=>(Ca(t),t.value?Zi:(Ca(r),r.value?Zi:ji))),"Core:add":Ae(([t,r])=>(He(t),He(r),ze(t.value+r.value))),"Core:sub":Ae(([t,r])=>(He(t),He(r),ze(t.value-r.value))),"Core:mul":Ae(([t,r])=>(He(t),He(r),ze(t.value*r.value))),"Core:pow":Ae(([t,r])=>{He(t),He(r);const e=t.value**r.value;if(isNaN(e))throw new Vr("Invalid operation.");return ze(e)}),"Core:div":Ae(([t,r])=>{He(t),He(r);const e=t.value/r.value;if(isNaN(e))throw new Vr("Invalid operation.");return ze(e)}),"Core:mod":Ae(([t,r])=>(He(t),He(r),ze(t.value%r.value))),"Core:gt":Ae(([t,r])=>(He(t),He(r),t.value>r.value?Zi:ji)),"Core:lt":Ae(([t,r])=>(He(t),He(r),t.value<r.value?Zi:ji)),"Core:gteq":Ae(([t,r])=>(He(t),He(r),t.value>=r.value?Zi:ji)),"Core:lteq":Ae(([t,r])=>(He(t),He(r),t.value<=r.value?Zi:ji)),"Core:type":Ae(([t])=>(Bi(t),dr(t.type))),"Core:to_str":Ae(([t])=>(Bi(t),dr(ac(t)))),"Core:range":Ae(([t,r])=>(He(t),He(r),t.value<r.value?xs(Array.from({length:r.value-t.value+1},(e,s)=>ze(s+t.value))):t.value>r.value?xs(Array.from({length:t.value-r.value+1},(e,s)=>ze(t.value-s))):xs([t]))),"Core:sleep":Ae(async([t])=>(He(t),await new Promise(r=>setTimeout(r,t.value)),pr)),"Util:uuid":Ae(()=>dr($2())),"Json:stringify":Ae(([t])=>(Bi(t),dr(JSON.stringify(ag(t))))),"Json:parse":Ae(([t])=>{Ms(t);try{return ig(JSON.parse(t.value))}catch{return rg("not_json")}}),"Json:parsable":Ae(([t])=>{Ms(t);try{JSON.parse(t.value)}catch{return vf(!1)}return vf(!0)}),"Date:now":Ae(()=>ze(Date.now())),"Date:year":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ae(([t])=>(t&&He(t),ze(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ae(([t])=>(Ms(t),ze(new Date(t.value).getTime()))),"Math:Infinity":ze(1/0),"Math:E":ze(Math.E),"Math:LN2":ze(Math.LN2),"Math:LN10":ze(Math.LN10),"Math:LOG2E":ze(Math.LOG2E),"Math:LOG10E":ze(Math.LOG10E),"Math:PI":ze(Math.PI),"Math:SQRT1_2":ze(Math.SQRT1_2),"Math:SQRT2":ze(Math.SQRT2),"Math:abs":Ae(([t])=>(He(t),ze(Math.abs(t.value)))),"Math:acos":Ae(([t])=>(He(t),ze(Math.acos(t.value)))),"Math:acosh":Ae(([t])=>(He(t),ze(Math.acosh(t.value)))),"Math:asin":Ae(([t])=>(He(t),ze(Math.asin(t.value)))),"Math:asinh":Ae(([t])=>(He(t),ze(Math.asinh(t.value)))),"Math:atan":Ae(([t])=>(He(t),ze(Math.atan(t.value)))),"Math:atanh":Ae(([t])=>(He(t),ze(Math.atanh(t.value)))),"Math:atan2":Ae(([t,r])=>(He(t),He(r),ze(Math.atan2(t.value,r.value)))),"Math:cbrt":Ae(([t])=>(He(t),ze(Math.cbrt(t.value)))),"Math:ceil":Ae(([t])=>(He(t),ze(Math.ceil(t.value)))),"Math:clz32":Ae(([t])=>(He(t),ze(Math.clz32(t.value)))),"Math:cos":Ae(([t])=>(He(t),ze(Math.cos(t.value)))),"Math:cosh":Ae(([t])=>(He(t),ze(Math.cosh(t.value)))),"Math:exp":Ae(([t])=>(He(t),ze(Math.exp(t.value)))),"Math:expm1":Ae(([t])=>(He(t),ze(Math.expm1(t.value)))),"Math:floor":Ae(([t])=>(He(t),ze(Math.floor(t.value)))),"Math:fround":Ae(([t])=>(He(t),ze(Math.fround(t.value)))),"Math:hypot":Ae(([t])=>{nc(t);const r=[];for(const e of t.value)He(e),r.push(e.value);return ze(Math.hypot(...r))}),"Math:imul":Ae(([t,r])=>(He(t),He(r),ze(Math.imul(t.value,r.value)))),"Math:log":Ae(([t])=>(He(t),ze(Math.log(t.value)))),"Math:log1p":Ae(([t])=>(He(t),ze(Math.log1p(t.value)))),"Math:log10":Ae(([t])=>(He(t),ze(Math.log10(t.value)))),"Math:log2":Ae(([t])=>(He(t),ze(Math.log2(t.value)))),"Math:max":Ae(([t,r])=>(He(t),He(r),ze(Math.max(t.value,r.value)))),"Math:min":Ae(([t,r])=>(He(t),He(r),ze(Math.min(t.value,r.value)))),"Math:pow":Ae(([t,r])=>(He(t),He(r),ze(Math.pow(t.value,r.value)))),"Math:round":Ae(([t])=>(He(t),ze(Math.round(t.value)))),"Math:sign":Ae(([t])=>(He(t),ze(Math.sign(t.value)))),"Math:sin":Ae(([t])=>(He(t),ze(Math.sin(t.value)))),"Math:sinh":Ae(([t])=>(He(t),ze(Math.sinh(t.value)))),"Math:sqrt":Ae(([t])=>{He(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Vr("Invalid operation.");return ze(r)}),"Math:tan":Ae(([t])=>(He(t),ze(Math.tan(t.value)))),"Math:tanh":Ae(([t])=>(He(t),ze(Math.tanh(t.value)))),"Math:trunc":Ae(([t])=>(He(t),ze(Math.trunc(t.value)))),"Math:rnd":Ae(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ze(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ze(Math.random())),"Math:gen_rng":Ae(([t])=>{if(Bi(t),t.type!=="num"&&t.type!=="str")return pr;const r=Uo(t.value.toString());return Ae(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?ze(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ze(r()))}),"Num:to_hex":Ae(([t])=>(He(t),dr(t.value.toString(16)))),"Num:from_hex":Ae(([t])=>(Ms(t),ze(parseInt(t.value,16)))),"Str:lf":dr(`
`),"Str:lt":Ae(([t,r])=>(Ms(t),Ms(r),t.value<r.value?ze(-1):t.value===r.value?ze(0):ze(1))),"Str:gt":Ae(([t,r])=>(Ms(t),Ms(r),t.value>r.value?ze(-1):t.value===r.value?ze(0):ze(1))),"Str:from_codepoint":Ae(([t])=>(He(t),dr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":Ae(([t])=>(nc(t),dr(Array.from(t.value.map(r=>(He(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":Ae(([t])=>(nc(t),dr(M2.decode(Uint8Array.from(t.value.map(r=>(He(r),r.value))))))),"Obj:keys":Ae(([t])=>(Bu(t),xs(Array.from(t.value.keys()).map(r=>dr(r))))),"Obj:vals":Ae(([t])=>(Bu(t),xs(Array.from(t.value.values())))),"Obj:kvs":Ae(([t])=>(Bu(t),xs(Array.from(t.value.entries()).map(([r,e])=>xs([dr(r),e]))))),"Obj:get":Ae(([t,r])=>(Bu(t),Ms(r),t.value.get(r.value)??pr)),"Obj:set":Ae(([t,r,e])=>(Bu(t),Ms(r),Bi(e),t.value.set(r.value,e),pr)),"Obj:has":Ae(([t,r])=>(Bu(t),Ms(r),vf(t.value.has(r.value)))),"Obj:copy":Ae(([t])=>(Bu(t),sp(new Map(t.value)))),"Obj:merge":Ae(([t,r])=>(Bu(t),Bu(r),sp(new Map([...t.value,...r.value])))),"Error:create":Ae(([t,r])=>(Ms(t),rg(t.value,r))),"Async:interval":Ae(async([t,r,e],s)=>{He(t),So(r),e&&(Ca(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.topCall(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),Ae(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":Ae(async([t,r],e)=>{He(t),So(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),Ae(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},Dy={num:{to_str:t=>Ae(async(r,e)=>dr(t.value.toString()))},str:{to_num:t=>Ae(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?pr:ze(s)}),to_arr:t=>Ae(async(r,e)=>xs(Zs(t.value).map(s=>dr(s)))),to_unicode_arr:t=>Ae(async(r,e)=>xs([...t.value].map(s=>dr(s)))),to_unicode_codepoint_arr:t=>Ae(async(r,e)=>xs([...t.value].map(s=>{const h=s.codePointAt(0);return ze(h??s.charCodeAt(0))}))),to_char_arr:t=>Ae(async(r,e)=>xs(t.value.split("").map(s=>dr(s)))),to_charcode_arr:t=>Ae(async(r,e)=>xs(t.value.split("").map(s=>ze(s.charCodeAt(0))))),to_utf8_byte_arr:t=>Ae(async(r,e)=>xs(Array.from(E2.encode(t.value)).map(s=>ze(s)))),len:t=>ze(Tf(t.value)),replace:t=>Ae(async([r,e],s)=>(Ms(r),Ms(e),dr(t.value.split(r.value).join(e.value)))),index_of:t=>Ae(async([r],e)=>(Ms(r),ze(Ff(t.value,r.value)))),incl:t=>Ae(async([r],e)=>(Ms(r),t.value.includes(r.value)?Zi:ji)),trim:t=>Ae(async(r,e)=>dr(t.value.trim())),upper:t=>Ae(async(r,e)=>dr(t.value.toUpperCase())),lower:t=>Ae(async(r,e)=>dr(t.value.toLowerCase())),split:t=>Ae(async([r],e)=>(r&&Ms(r),xs(r?t.value.split(r?r.value:"").map(s=>dr(s)):Zs(t.value).map(s=>dr(s))))),slice:t=>Ae(async([r,e],s)=>(He(r),He(e),dr(Of(t.value,r.value,e.value)))),pick:t=>Ae(async([r],e)=>{He(r);const h=Zs(t.value)[r.value];return h?dr(h):pr}),charcode_at:t=>Ae(([r],e)=>{He(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?pr:ze(s)}),codepoint_at:t=>Ae(([r],e)=>{He(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?pr:ze(s)})},arr:{len:t=>ze(t.value.length),push:t=>Ae(async([r],e)=>(Bi(r),t.value.push(r),t)),unshift:t=>Ae(async([r],e)=>(Bi(r),t.value.unshift(r),t)),pop:t=>Ae(async(r,e)=>t.value.pop()??pr),shift:t=>Ae(async(r,e)=>t.value.shift()??pr),concat:t=>Ae(async([r],e)=>(nc(r),xs(t.value.concat(r.value)))),slice:t=>Ae(async([r,e],s)=>(He(r),He(e),xs(t.value.slice(r.value,e.value)))),join:t=>Ae(async([r],e)=>(r&&Ms(r),dr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>Ae(async([r],e)=>{So(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,ze(g)]));return xs(await Promise.all(s))}),filter:t=>Ae(async([r],e)=>{So(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,ze(h)]);Ca(b),b.value&&s.push(g)}return xs(s)}),reduce:t=>Ae(async([r,e],s)=>{So(r);const h=e!=null;let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,ze(b)])}return g}),find:t=>Ae(async([r],e)=>{So(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,ze(s)]);if(Ca(g),g.value)return h}return pr}),incl:t=>Ae(async([r],e)=>(Bi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?ji:(h=>h.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Zi:ji)),reverse:t=>Ae(async(r,e)=>(t.value.reverse(),pr)),copy:t=>Ae(async(r,e)=>xs([...t.value])),sort:t=>Ae(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=await s(g.slice(0,_),b),S=await s(g.slice(_),b);return h(k,S,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);He(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return So(r),nc(t),t.value=await s(t.value,r),t})},error:{name:t=>dr(t.value),info:t=>t.info??pr}};function N2(t,r){if(Object.hasOwn(Dy,t.type)){const e=Dy[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Vr(`No such prop (${r}) in ${t.type}.`)}else throw new Vr(`Cannot read prop of ${t.type}. (reading ${r})`)}const T2={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ta=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const K0=300,O2=K0-1;let qn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const s={print:Ae(([h])=>{Bi(h),this.opts.out&&this.opts.out(h)}),readline:Ae(async h=>{const g=h[0];if(Ms(g),this.opts.in==null)return pr;const b=await this.opts.in(g.value);return dr(b)})};this.vars=Object.fromEntries(Object.entries({...r,...S2,...s}).map(([h,g])=>[h,T2.const(g)])),this.scope=new go([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),rg("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof _p?this.opts.err(r):this.opts.err(new g2(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{if(s.mut)throw new Error("Namespaces cannot include mutable variable: "+s.name);const h={isMutable:s.mut,value:await this._eval(s.expr,e)};e.add(s.name,h),this.scope.add(r.name+":"+s.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??pr;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],{isMutable:!0,value:e[g]});const h=r.scope.createChildScope(s);return _2(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return pr;if(this.stepCount%K0===O2&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Vr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);So(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(Ca(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(Ca(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return pr}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(sg(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):pr}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return pr}case"for":{if(r.times){const s=await this._eval(r.times,e);He(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);He(s),He(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:ze(g)}]])));if(b.type==="break")break;if(b.type==="return")return b}}return pr}case"each":{const s=await this._eval(r.items,e);nc(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(g.type==="break")break;if(g.type==="return")return g}return pr}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,{isMutable:r.mut,value:s}),pr}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),pr}case"addAssign":{const s=await this._eval(r.dest,e);He(s);const h=await this._eval(r.expr,e);return He(h),await this.assign(e,r.dest,ze(s.value+h.value)),pr}case"subAssign":{const s=await this._eval(r.dest,e);He(s);const h=await this._eval(r.expr,e);return He(h),await this.assign(e,r.dest,ze(s.value-h.value)),pr}case"null":return pr;case"bool":return vf(r.value);case"num":return ze(r.value);case"str":return dr(r.value);case"arr":return xs(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return sp(s)}case"prop":{const s=await this._eval(r.target,e);return iv(s)?s.value.has(r.name)?s.value.get(r.name):pr:N2(s,r.name)}case"index":{const s=await this._eval(r.target,e),h=await this._eval(r.index,e);if(jy(s)){He(h);const g=s.value[h.value];if(g===void 0)throw new Ry(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}else{if(iv(s))return Ms(h),s.value.has(h.value)?s.value.get(h.value):pr;throw new Vr(`Cannot read prop (${ac(h)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return Ca(s),vf(!s.value)}case"fn":return x2(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return vf(e.exists(r.identifier.name));case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);s+=ac(g)}return dr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),b2(s)}case"break":return this.log("block:break",{scope:e.name}),A2();case"continue":return this.log("block:continue",{scope:e.name}),C2();case"ns":return pr;case"meta":return pr;case"and":{const s=await this._eval(r.left,e);if(Ca(s),s.value){const h=await this._eval(r.right,e);return Ca(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(Ca(s),s.value)return s;{const h=await this._eval(r.right,e);return Ca(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=pr;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r),g=await this._eval(e.index,r);if(jy(h)){if(He(g),h.value[g.value]===void 0)throw new Ry(`Index out of range. index: ${g.value} max: ${h.value.length-1}`);h.value[g.value]=s}else if(iv(h))Ms(g),h.value.set(g.value,s);else throw new Vr(`Cannot read prop (${ac(g)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Bu(h),h.value.set(e.name,s)}else throw new Vr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ta([ws],qn.prototype,"exec",null);Ta([ws],qn.prototype,"execFn",null);Ta([ws],qn.prototype,"execFnSimple",null);Ta([ws],qn.prototype,"handleError",null);Ta([ws],qn.prototype,"log",null);Ta([ws],qn.prototype,"collectNs",null);Ta([ws],qn.prototype,"collectNsMember",null);Ta([ws],qn.prototype,"_fn",null);Ta([ws],qn.prototype,"_eval",null);Ta([ws],qn.prototype,"_run",null);Ta([ws],qn.prototype,"registerAbortHandler",null);Ta([ws],qn.prototype,"unregisterAbortHandler",null);Ta([ws],qn.prototype,"abort",null);Ta([ws],qn.prototype,"assign",null);Ta([ws],qn,"collectMetadata",null);function F2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function gf(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,gf.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}F2(gf,Error);function lv(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}gf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=lv("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+lv("",h.column-1," ")+lv("",O,"^")}else r+=`
 at `+b}return r};gf.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function Ly(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:hn,Main:ts},g=hn,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="<",Cr=">",qt="+",_r="-",Vt="*",ye="^",qe="/",Te="%",et="!",ct="[",At=".",J="if",Z="elif",oe="else",Pe="match",ce="=>",Ee="eval",De="exists",Oe="`",Fe='"',Ce="'",ft='\\"',Ke="\\'",st="true",tt="false",gt="null",Tt=";",Mt="@",Gt="@(",kt=`\r
`,ht=/^[A-Z0-9_:]/i,wr=/^[^`{]/,hs=/^[{}`]/,ls=/^[+\-]/,St=/^[1-9]/,zt=/^[0-9]/,Sn=/^[A-Z_]/i,mr=/^[A-Z0-9_]/i,nl=/^[\r\n]/,al=/^[ \t\r\n]/,cr=/^[ \t]/,Jt=Bs(),Xr=me("//",!1),zn=me("/*",!1),Ot=me("*/",!1),dt=me("(",!1),Ir=me(")",!1),ar=me("::",!1),ut=me("{",!1),Qt=me("}",!1),bs=me("###",!1),Zt=me("let",!1),Xt=me(":",!1),Yr=me("=",!1),Ha=me("var",!1),jr=me("<:",!1),ps=me("#[",!1),Fs=me("]",!1),yt=me("each",!1),Ut=me(",",!1),Ys=me("for",!1),Dr=me("return",!1),Lr=or([["A","Z"],["0","9"],"_",":"],!1,!0),il=me("loop",!1),qa=me("break",!1),ll=me("continue",!1),ul=me("+=",!1),Va=me("-=",!1),za=me("\\",!1),ol=me("||",!1),fl=me("&&",!1),cl=me("==",!1),hl=me("!=",!1),Kn=me("<=",!1),en=me(">=",!1),Wn=me("<",!1),Ka=me(">",!1),pl=me("+",!1),Wa=me("-",!1),Rs=me("*",!1),vl=me("^",!1),gl=me("/",!1),dl=me("%",!1),As=me("!",!1),Is=me("[",!1),Gn=me(".",!1),tn=me("if",!1),rn=me("elif",!1),yl=me("else",!1),sn=me("match",!1),vs=me("=>",!1),js=me("eval",!1),Sr=me("exists",!1),nn=me("`",!1),an=or(["`","{"],!0,!1),ln=or(["{","}","`"],!1,!1),gs=me('"',!1),un=me("'",!1),Ds=me('\\"',!1),Ga=me("\\'",!1),ur=or(["+","-"],!1,!1),Ja=or([["1","9"]],!1,!1),$r=or([["0","9"]],!1,!1),wl=me("true",!1),on=me("false",!1),ml=me("null",!1),Ls=me(";",!1),$l=me("@",!1),Jn=me("@(",!1),xl=or([["A","Z"],"_"],!1,!0),Qa=or([["A","Z"],["0","9"],"_"],!1,!0),bl=me(`\r
`,!1),Al=or(["\r",`
`],!1,!1),Za=or([" ","	","\r",`
`],!1,!1),Cl=or([" ","	"],!1,!1),Xa=function(n){return n.join("")},_l=function(){return he()},Ya=function(){return he()},Pl=function(){return""},ei=function(){return""},kl=function(n){return n??[]},Qn=function(n,u){return u},El=function(n,u){return[n,...u]},Zn=function(n,u){return u},Ml=function(n,u){return[n,...u]},ti=function(n,u){return u},Sl=function(n,u){return[n,...u]},Nl=function(n){return n},Tl=function(n,u){return v("ns",{name:n,members:u})},Ol=function(n,u){return v("meta",{name:n,value:u})},Fl=function(n){return v("meta",{name:null,value:n})},Rl=function(n,u,y){return v("def",{name:n,varType:u,expr:y,mut:!1,attr:[]})},Il=function(n,u,y){return v("def",{name:n,varType:u,expr:y,mut:!0,attr:[]})},jl=function(n){return v("identifier",{name:"print",chain:[v("callChain",{args:[n]})]})},Dl=function(n,u){return v("attr",{name:n,value:u??v("bool",{value:!0})})},Ll=function(n,u,y){return v("each",{var:n,items:u,for:y})},Ul=function(n,u,y){return v("each",{var:n,items:u,for:y})},Bl=function(n,u){return u},Hl=function(n,u,y,p){return v("for",{var:n,from:u??v("num",{value:0}),to:y,for:p})},ql=function(n,u){return u},ri=function(n,u,y,p){return v("for",{var:n,from:u??v("num",{value:0}),to:y,for:p})},Vl=function(n,u){return v("for",{times:n,for:u})},zl=function(n,u){return v("for",{times:n,for:u})},Kl=function(n){return v("return",{expr:n})},Wl=function(n){return v("loop",{statements:n})},Gl=function(){return v("break",{})},Xn=function(){return v("continue",{})},Jl=function(n,u,y){return u==="+="?v("addAssign",{dest:n,expr:y}):u==="-="?v("subAssign",{dest:n,expr:y}):v("assign",{dest:n,expr:y})},si=function(n,u,y){return{op:u,term:y}},Ql=function(n,u){return v("infix",{operands:[n,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Zl=function(){return he()},Xl=function(n){return v("not",{expr:n})},ni=function(n,u){return n.chain?{...n,chain:[...n.chain,...u]}:{...n,chain:u}},Yl=function(n){return v("callChain",{args:n??[]})},Yn=function(n,u){return u},eu=function(n,u){return[n,...u]},tu=function(n){return v("indexChain",{index:n})},ru=function(n){return v("propChain",{name:n})},su=function(n,u,y,p){return v("if",{cond:n,then:u,elseif:y??[],else:p})},nu=function(n,u){return[n,...u]},ai=function(n,u){return{cond:n,then:u}},ii=function(n){return n},li=function(n,u,y){return{q:u,a:y}},ui=function(n,u,y){return v("match",{about:n,qs:u??[],default:y})},au=function(n){return v("block",{statements:n})},iu=function(n){return v("exists",{identifier:n})},oi=function(n){return v("identifier",{name:n})},lu=function(n){return v("tmpl",{tmpl:n})},fi=function(n){return n.join("")},ci=function(n){return n},uu=function(n){return v("str",{value:n.join("")})},hi=function(n){return n},ou=function(n){return v("str",{value:n.join("")})},fu=function(){return'"'},pi=function(){return"'"},cu=function(){return v("num",{value:parseFloat(he())})},vi=function(){return v("num",{value:parseFloat(he())})},hu=function(){return v("num",{value:parseInt(he(),10)})},pu=function(){return v("num",{value:parseInt(he(),10)})},gi=function(){return v("bool",{value:!0})},vu=function(){return v("bool",{value:!1})},di=function(){return v("null",{})},ea=function(n,u){return{k:n,v:u}},gu=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return v("obj",{value:u})},ta=function(n){return n},du=function(n){return v("arr",{value:n})},yu=function(n,u){return{name:n,argType:u}},yi=function(n,u){return[n,...u]},wu=function(n,u,y,p,x,m){return(n.length>0||y.length>0)&&$u("Cannot use spaces before or after the function name."),v("def",{name:u,expr:v("fn",{args:p??[],retType:x},m??[]),mut:!1,attr:[]})},wi=function(n,u,y){return v("fn",{args:n??[],retType:u},y??[])},mi=function(n){return n},mu=function(n){return v("arr",{value:n})},$i=function(n,u){return{k:n,v:u}},c=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return v("obj",{value:u})},re=function(n,u){return v("fnTypeSource",{args:n??[],result:u})},Cs=function(n,u){return[n,...u]},xr=function(n,u){return v("namedTypeSource",{name:n,inner:u})},fn=function(n){return v("namedTypeSource",{name:n,inner:null})},i=function(){return he()},T=function(){return he()},es=function(n){return v("block",{statements:n??[]})},o=0,te=0,R=[{line:1,column:1}],j=0,Nt=[],F=0,z={},Us;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function he(){return t.substring(te,o)}function U(){return cn(te,o)}function $u(n,u){throw u=u!==void 0?u:cn(te,o),_s(n,u)}function me(n,u){return{type:"literal",text:n,ignoreCase:u}}function or(n,u,y){return{type:"class",parts:n,inverted:u,ignoreCase:y}}function Bs(){return{type:"any"}}function B(){return{type:"end"}}function xi(n){var u=R[n],y;if(u)return u;for(y=n-1;!R[y];)y--;for(u=R[y],u={line:u.line,column:u.column};y<n;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return R[n]=u,u}function cn(n,u,y){var p=xi(n),x=xi(u),m={source:s,start:{offset:n,line:p.line,column:p.column},end:{offset:u,line:x.line,column:x.column}};return m}function L(n){o<j||(o>j&&(j=o,Nt=[]),Nt.push(n))}function _s(n,u){return new gf(n,null,null,u)}function ra(n,u,y){return new gf(gf.buildMessage(n,u),n,u,y)}function hn(){var n,u,y,p=o*77+0,x=z[p];if(x)return o=x.nextPos,x.result;for(n=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return te=n,u=Xa(u),n=u,z[p]={nextPos:o,result:n},n}function Ps(){var n,u,y=o*77+1,p=z[y];return p?(o=p.nextPos,p.result):(n=o,u=dn(),u!==e&&(te=n,u=_l()),n=u,n===e&&(n=o,u=ca(),u!==e&&(te=n,u=Ya()),n=u,n===e&&(n=at(),n===e&&(t.length>o?(n=t.charAt(o),o++):(n=e,F===0&&L(Jt))))),z[y]={nextPos:o,result:n},n)}function at(){var n,u,y,p,x,m,P=o*77+2,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.substr(o,2)===b?(u=b,o+=2):(u=e,F===0&&L(Xr)),u!==e){for(y=[],p=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);te=n,n=Pl()}else o=n,n=e;if(n===e)if(n=o,t.substr(o,2)===_?(u=_,o+=2):(u=e,F===0&&L(zn)),u!==e){for(y=[],p=o,x=o,F++,t.substr(o,2)===k?(m=k,o+=2):(m=e,F===0&&L(Ot)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.substr(o,2)===k?(m=k,o+=2):(m=e,F===0&&L(Ot)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);t.substr(o,2)===k?(p=k,o+=2):(p=e,F===0&&L(Ot)),p!==e?(te=n,n=ei()):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ts(){var n,u,y,p,x,m=o*77+3,P=z[m];if(P)return o=P.nextPos,P.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=pn(),y===e&&(y=null),p=[],x=l();x!==e;)p.push(x),x=l();return te=n,n=kl(y),z[m]={nextPos:o,result:n},n}function pn(){var n,u,y,p,x,m,P,C,N=o*77+4,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=rt(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=rt(),C!==e?(te=p,p=Qn(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=rt(),C!==e?(te=p,p=Qn(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=El(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Ur(){var n,u,y,p,x,m,P,C,N=o*77+5,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ds(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ds(),C!==e?(te=p,p=Zn(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ds(),C!==e?(te=p,p=Zn(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=Ml(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Nr(){var n,u,y,p,x,m,P,C,N=o*77+6,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ks(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ks(),C!==e?(te=p,p=ti(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ks(),C!==e?(te=p,p=ti(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=Sl(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function rt(){var n,u=o*77+7,y=z[u];return y?(o=y.nextPos,y.result):(n=Ai(),n===e&&(n=xu(),n===e&&(n=ks())),z[u]={nextPos:o,result:n},n)}function ds(){var n,u=o*77+8,y=z[u];return y?(o=y.nextPos,y.result):(n=Ci(),n===e&&(n=it(),n===e&&(n=Ai())),z[u]={nextPos:o,result:n},n)}function ks(){var n,u=o*77+9,y=z[u];return y?(o=y.nextPos,y.result):(n=Ci(),n===e&&(n=it(),n===e&&(n=bu(),n===e&&(n=Cu(),n===e&&(n=Au(),n===e&&(n=ss(),n===e&&(n=_i(),n===e&&(n=_u(),n===e&&(n=Pi(),n===e&&(n=ns(),n===e&&(n=sa(),n===e&&(n=Qe()))))))))))),z[u]={nextPos:o,result:n},n)}function Qe(){var n,u=o*77+10,y=z[u];return y?(o=y.nextPos,y.result):(n=ki(),n===e&&(n=Hs()),z[u]={nextPos:o,result:n},n)}function Hs(){var n,u=o*77+11,y=z[u];return y?(o=y.nextPos,y.result):(n=Si(),n===e&&(n=Su(),n===e&&(n=Ei(),n===e&&(n=bi()))),z[u]={nextPos:o,result:n},n)}function bi(){var n,u,y,p,x,m,P=o*77+12,C=z[P];if(C)return o=C.nextPos,C.result;if(n=gn(),n===e&&(n=la(),n===e&&(n=ua(),n===e&&(n=dn(),n===e&&(n=ca(),n===e&&(n=Oi(),n===e&&(n=da(),n===e&&(n=wa(),n===e&&(n=br(),n===e&&(n=Mu(),n===e&&(n=aa(),n===e&&(n=oa(),n===e))))))))))))if(n=o,t.charCodeAt(o)===40?(u=S,o++):(u=e,F===0&&L(dt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=Qe(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e?(te=n,n=Nl(p)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function rs(){var n,u=o*77+13,y=z[u];return y?(o=y.nextPos,y.result):(n=Oi(),n===e&&(n=ca(),n===e&&(n=da(),n===e&&(n=Es(),n===e&&(n=hr(),n===e&&(n=wa()))))),z[u]={nextPos:o,result:n},n)}function Ai(){var n,u,y,p,x,m,P,C,N,I,q=o*77+14,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===O?(u=O,o+=2):(u=e,F===0&&L(ar)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=D,o++):(m=e,F===0&&L(ut)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(C=Ur(),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();t.charCodeAt(o)===125?(I=H,o++):(I=e,F===0&&L(Qt)),I!==e?(te=n,n=Tl(p,C)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function xu(){var n,u,y,p,x,m,P=o*77+15,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.substr(o,3)===ae?(u=ae,o+=3):(u=e,F===0&&L(bs)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=ue(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=rs(),m!==e?(te=n,n=Ol(p,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ae?(u=ae,o+=3):(u=e,F===0&&L(bs)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();p=rs(),p!==e?(te=n,n=Fl(p)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Ci(){var n,u,y,p,x,m,P,C,N,I=o*77+16,q=z[I];if(q)return o=q.nextPos,q.result;if(n=o,t.substr(o,3)===se?(u=se,o+=3):(u=e,F===0&&L(Zt)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===58?(P=ie,o++):(P=e,F===0&&L(Xt)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Ze(),N!==e?x=N:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===61?(P=de,o++):(P=e,F===0&&L(Yr)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Qe(),N!==e?(te=n,n=Rl(p,x,N)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===W?(u=W,o+=3):(u=e,F===0&&L(Ha)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===58?(P=ie,o++):(P=e,F===0&&L(Xt)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Ze(),N!==e?x=N:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===61?(P=de,o++):(P=e,F===0&&L(Yr)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Qe(),N!==e?(te=n,n=Il(p,x,N)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[I]={nextPos:o,result:n},n}function bu(){var n,u,y,p,x=o*77+17,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&L(jr)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();p=Qe(),p!==e?(te=n,n=jl(p)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function Au(){var n,u,y,p,x,m,P,C=o*77+18,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,t.substr(o,2)===Q?(u=Q,o+=2):(u=e,F===0&&L(ps)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();for(P=rs(),P!==e?x=P:(o=x,x=e),x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();t.charCodeAt(o)===93?(P=X,o++):(P=e,F===0&&L(Fs)),P!==e?(te=n,n=Dl(p,x)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[C]={nextPos:o,result:n},n}function ss(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+19,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&L(yt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(t.substr(o,3)===se?(x=se,o+=3):(x=e,F===0&&L(Zt)),x!==e){if(m=[],P=l(),P!==e)for(;P!==e;)m.push(P),P=l();else m=e;if(m!==e)if(P=ue(),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();for(t.charCodeAt(o)===44?(N=Y,o++):(N=e,F===0&&L(Ut)),N===e&&(N=null),I=[],q=l();q!==e;)I.push(q),q=l();if(q=Qe(),q!==e)if(t.charCodeAt(o)===41?(G=E,o++):(G=e,F===0&&L(Ir)),G!==e){for(ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();Ie=A(),Ie!==e?(te=n,n=Ll(P,q,Ie)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&L(yt)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(t.substr(o,3)===se?(p=se,o+=3):(p=e,F===0&&L(Zt)),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();if(I=Qe(),I!==e){if(q=[],G=l(),G!==e)for(;G!==e;)q.push(G),G=l();else q=e;q!==e?(G=A(),G!==e?(te=n,n=Ul(m,I,G)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function _i(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct=o*77+20,_t=z[Ct];if(_t)return o=_t.nextPos,_t.result;if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(t.substr(o,3)===se?(x=se,o+=3):(x=e,F===0&&L(Zt)),x!==e){if(m=[],P=l(),P!==e)for(;P!==e;)m.push(P),P=l();else m=e;if(m!==e)if(P=ue(),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();if(N=o,t.charCodeAt(o)===61?(I=de,o++):(I=e,F===0&&L(Yr)),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();G=Qe(),G!==e?(te=N,N=Bl(P,G)):(o=N,N=e)}else o=N,N=e;for(N===e&&(N=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&L(Ut)),I===e&&(I=null),q=[],G=l();G!==e;)q.push(G),G=l();if(G=Qe(),G!==e)if(t.charCodeAt(o)===41?(ne=E,o++):(ne=e,F===0&&L(Ir)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();$e=A(),$e!==e?(te=n,n=Hl(P,N,G,$e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(t.substr(o,3)===se?(p=se,o+=3):(p=e,F===0&&L(Zt)),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(C=o,t.charCodeAt(o)===61?(N=de,o++):(N=e,F===0&&L(Yr)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();q=Qe(),q!==e?(te=C,C=ql(m,q)):(o=C,C=e)}else o=C,C=e;for(C===e&&(C=null),t.charCodeAt(o)===44?(N=Y,o++):(N=e,F===0&&L(Ut)),N===e&&(N=null),I=[],q=l();q!==e;)I.push(q),q=l();if(q=Qe(),q!==e){if(G=[],ne=l(),ne!==e)for(;ne!==e;)G.push(ne),ne=l();else G=e;G!==e?(ne=A(),ne!==e?(te=n,n=ri(m,C,q,ne)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(x=Qe(),x!==e)if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=A(),C!==e?(te=n,n=Vl(x,C)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=Qe(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=A(),m!==e?(te=n,n=zl(p,m)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e}}return z[Ct]={nextPos:o,result:n},n}function Cu(){var n,u,y,p,x,m=o*77+21,P=z[m];if(P)return o=P.nextPos,P.result;if(n=o,t.substr(o,6)===le?(u=le,o+=6):(u=e,F===0&&L(Dr)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();x=Qe(),x!==e?(te=n,n=Kl(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[m]={nextPos:o,result:n},n}function _u(){var n,u,y,p,x,m,P,C,N=o*77+22,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===we?(u=we,o+=4):(u=e,F===0&&L(il)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===123?(p=D,o++):(p=e,F===0&&L(ut)),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Nr(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();t.charCodeAt(o)===125?(C=H,o++):(C=e,F===0&&L(Qt)),C!==e?(te=n,n=Wl(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Pi(){var n,u,y,p,x=o*77+23,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===_e?(u=_e,o+=5):(u=e,F===0&&L(qa)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=Gl()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function ns(){var n,u,y,p,x=o*77+24,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,8)===be?(u=be,o+=8):(u=e,F===0&&L(ll)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=Xn()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function sa(){var n,u,y,p,x,m,P=o*77+25,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Qe(),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.substr(o,2)===nt?(p=nt,o+=2):(p=e,F===0&&L(ul)),p===e&&(t.substr(o,2)===mt?(p=mt,o+=2):(p=e,F===0&&L(Va)),p===e&&(t.charCodeAt(o)===61?(p=de,o++):(p=e,F===0&&L(Yr)))),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Qe(),m!==e?(te=n,n=Jl(u,p,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ki(){var n,u,y,p,x,m,P,C,N=o*77+26,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=Hs(),u!==e){for(y=[],p=o,x=[],m=as();m!==e;)x.push(m),m=as();if(m=na(),m!==e){for(P=[],C=as();C!==e;)P.push(C),C=as();C=Hs(),C!==e?(te=p,p=si(u,m,C)):(o=p,p=e)}else o=p,p=e;if(p!==e)for(;p!==e;){for(y.push(p),p=o,x=[],m=as();m!==e;)x.push(m),m=as();if(m=na(),m!==e){for(P=[],C=as();C!==e;)P.push(C),C=as();C=Hs(),C!==e?(te=p,p=si(u,m,C)):(o=p,p=e)}else o=p,p=e}else y=e;y!==e?(te=n,n=Ql(u,y)):(o=n,n=e)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function as(){var n,u,y,p=o*77+27,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&L(za)),u!==e?(y=w(),y!==e?(u=[u,y],n=u):(o=n,n=e)):(o=n,n=e),n===e&&(n=$()),z[p]={nextPos:o,result:n},n)}function na(){var n,u,y=o*77+28,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===xt?(u=xt,o+=2):(u=e,F===0&&L(ol)),u===e&&(t.substr(o,2)===wt?(u=wt,o+=2):(u=e,F===0&&L(fl)),u===e&&(t.substr(o,2)===Ye?(u=Ye,o+=2):(u=e,F===0&&L(cl)),u===e&&(t.substr(o,2)===bt?(u=bt,o+=2):(u=e,F===0&&L(hl)),u===e&&(t.substr(o,2)===Ht?(u=Ht,o+=2):(u=e,F===0&&L(Kn)),u===e&&(t.substr(o,2)===nr?(u=nr,o+=2):(u=e,F===0&&L(en)),u===e&&(t.charCodeAt(o)===60?(u=vt,o++):(u=e,F===0&&L(Wn)),u===e&&(t.charCodeAt(o)===62?(u=Cr,o++):(u=e,F===0&&L(Ka)),u===e&&(t.charCodeAt(o)===43?(u=qt,o++):(u=e,F===0&&L(pl)),u===e&&(t.charCodeAt(o)===45?(u=_r,o++):(u=e,F===0&&L(Wa)),u===e&&(t.charCodeAt(o)===42?(u=Vt,o++):(u=e,F===0&&L(Rs)),u===e&&(t.charCodeAt(o)===94?(u=ye,o++):(u=e,F===0&&L(vl)),u===e&&(t.charCodeAt(o)===47?(u=qe,o++):(u=e,F===0&&L(gl)),u===e&&(t.charCodeAt(o)===37?(u=Te,o++):(u=e,F===0&&L(dl))))))))))))))),u!==e&&(te=n,u=Zl()),n=u,z[y]={nextPos:o,result:n},n)}function aa(){var n,u,y,p=o*77+29,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===33?(u=et,o++):(u=e,F===0&&L(As)),u!==e?(y=Qe(),y!==e?(te=n,n=Xl(y)):(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function Ei(){var n,u,y,p,x=o*77+30,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,u=bi(),u!==e){if(y=[],p=ia(),p===e&&(p=Mi(),p===e&&(p=qs())),p!==e)for(;p!==e;)y.push(p),p=ia(),p===e&&(p=Mi(),p===e&&(p=qs()));else y=e;y!==e?(te=n,n=ni(u,y)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function ia(){var n,u,y,p,x,m,P=o*77+31,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===40?(u=S,o++):(u=e,F===0&&L(dt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Pu(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e?(te=n,n=Yl(p)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Pu(){var n,u,y,p,x,m,P=o*77+32,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Qe(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=Qe(),m!==e?(te=p,p=Yn(u,m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=Qe(),m!==e?(te=p,p=Yn(u,m)):(o=p,p=e)):(o=p,p=e);te=n,n=eu(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Mi(){var n,u,y,p,x,m,P=o*77+33,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=Qe(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=tu(p)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function qs(){var n,u,y,p=o*77+34,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===46?(u=At,o++):(u=e,F===0&&L(Gn)),u!==e?(y=ue(),y!==e?(te=n,n=ru(y)):(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function Si(){var n,u,y,p,x,m,P,C,N,I,q=o*77+35,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===J?(u=J,o+=2):(u=e,F===0&&L(tn)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=Qe(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=A(),m!==e){if(P=o,C=[],N=l(),N!==e)for(;N!==e;)C.push(N),N=l();else C=e;if(C!==e?(N=Ni(),N!==e?P=N:(o=P,P=e)):(o=P,P=e),P===e&&(P=null),C=o,N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;N!==e?(I=ku(),I!==e?C=I:(o=C,C=e)):(o=C,C=e),C===e&&(C=null),te=n,n=su(p,m,P,C)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function Ni(){var n,u,y,p,x,m,P=o*77+36,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=vn(),u!==e){for(y=[],p=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=vn(),m!==e?p=m:(o=p,p=e);p!==e;){for(y.push(p),p=o,x=[],m=l();m!==e;)x.push(m),m=l();m=vn(),m!==e?p=m:(o=p,p=e)}te=n,n=nu(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function vn(){var n,u,y,p,x,m,P,C=o*77+37,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&L(rn)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();if(x=Qe(),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();P=A(),P!==e?(te=n,n=ai(x,P)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e;return z[C]={nextPos:o,result:n},n}function ku(){var n,u,y,p,x,m=o*77+38,P=z[m];if(P)return o=P.nextPos,P.result;if(n=o,t.substr(o,4)===oe?(u=oe,o+=4):(u=e,F===0&&L(yl)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();x=A(),x!==e?(te=n,n=ii(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[m]={nextPos:o,result:n},n}function gn(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct,_t,Nu=o*77+39,$a=z[Nu];if($a)return o=$a.nextPos,$a.result;if(n=o,t.substr(o,5)===Pe?(u=Pe,o+=5):(u=e,F===0&&L(sn)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();if(x=Qe(),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===123?(P=D,o++):(P=e,F===0&&L(ut)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();if(N=[],I=o,q=Qe(),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();te=I,I=li(x,q,$e)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(N.push(I),I=o,q=Qe(),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();te=I,I=li(x,q,$e)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else N=e;if(N!==e){if(I=o,t.charCodeAt(o)===42?(q=Vt,o++):(q=e,F===0&&L(Rs)),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();I=$e}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),q=[],G=l();G!==e;)q.push(G),G=l();t.charCodeAt(o)===125?(G=H,o++):(G=e,F===0&&L(Qt)),G!==e?(te=n,n=ui(x,N,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;else o=n,n=e;return z[Nu]={nextPos:o,result:n},n}function la(){var n,u,y,p,x,m,P,C,N=o*77+40,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Ee?(u=Ee,o+=4):(u=e,F===0&&L(js)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===123?(p=D,o++):(p=e,F===0&&L(ut)),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Nr(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();t.charCodeAt(o)===125?(C=H,o++):(C=e,F===0&&L(Qt)),C!==e?(te=n,n=au(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function ua(){var n,u,y,p,x=o*77+41,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,6)===De?(u=De,o+=6):(u=e,F===0&&L(Sr)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;y!==e?(p=oa(),p!==e?(te=n,n=iu(p)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function oa(){var n,u,y=o*77+42,p=z[y];return p?(o=p.nextPos,p.result):(n=o,u=f(),u!==e&&(te=n,u=oi(u)),n=u,z[y]={nextPos:o,result:n},n)}function dn(){var n,u,y,p,x,m,P=o*77+43,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===96?(u=Oe,o++):(u=e,F===0&&L(nn)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===96?(m=Oe,o++):(m=e,F===0&&L(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===96?(m=Oe,o++):(m=e,F===0&&L(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===96?(p=Oe,o++):(p=e,F===0&&L(nn)),p!==e?(te=n,n=lu(y)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function fa(){var n,u,y,p,x,m,P=o*77+44,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=Qe(),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=H,o++):(m=e,F===0&&L(Qt)),m!==e?n=p:(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,u=[],y=yn(),y!==e)for(;y!==e;)u.push(y),y=yn();else u=e;u!==e&&(te=n,u=fi(u)),n=u}return z[P]={nextPos:o,result:n},n}function yn(){var n,u=o*77+45,y=z[u];return y?(o=y.nextPos,y.result):(n=Ti(),n===e&&(wr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(an))),z[u]={nextPos:o,result:n},n)}function Ti(){var n,u,y,p=o*77+46,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&L(za)),u!==e?(hs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&L(ln)),y!==e?n=y:(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function ca(){var n,u,y,p,x,m,P=o*77+47,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===34?(u=Fe,o++):(u=e,F===0&&L(gs)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===34?(m=Fe,o++):(m=e,F===0&&L(gs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ha(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=ci(m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===34?(m=Fe,o++):(m=e,F===0&&L(gs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ha(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=ci(m)):(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===34?(p=Fe,o++):(p=e,F===0&&L(gs)),p!==e?(te=n,n=uu(y)):(o=n,n=e)}else o=n,n=e;if(n===e)if(n=o,t.charCodeAt(o)===39?(u=Ce,o++):(u=e,F===0&&L(un)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===39?(m=Ce,o++):(m=e,F===0&&L(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=pa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=hi(m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===39?(m=Ce,o++):(m=e,F===0&&L(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=pa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=hi(m)):(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===39?(p=Ce,o++):(p=e,F===0&&L(un)),p!==e?(te=n,n=ou(y)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ha(){var n,u,y=o*77+48,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===ft?(u=ft,o+=2):(u=e,F===0&&L(Ds)),u!==e&&(te=n,u=fu()),n=u,z[y]={nextPos:o,result:n},n)}function pa(){var n,u,y=o*77+49,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===Ke?(u=Ke,o+=2):(u=e,F===0&&L(Ga)),u!==e&&(te=n,u=pi()),n=u,z[y]={nextPos:o,result:n},n)}function Oi(){var n,u=o*77+50,y=z[u];return y?(o=y.nextPos,y.result):(n=va(),n===e&&(n=ga()),z[u]={nextPos:o,result:n},n)}function va(){var n,u,y,p,x,m,P=o*77+51,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),St.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(Ja)),u!==e){if(y=[],zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r)),p!==e)for(;p!==e;)y.push(p),zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(p=At,o++):(p=e,F===0&&L(Gn)),p!==e){if(x=[],zt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&L($r)),m!==e)for(;m!==e;)x.push(m),zt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&L($r));else x=e;x!==e?(te=n,n=cu()):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),zt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L($r)),u!==e)if(t.charCodeAt(o)===46?(y=At,o++):(y=e,F===0&&L(Gn)),y!==e){if(p=[],zt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&L($r)),x!==e)for(;x!==e;)p.push(x),zt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&L($r));else p=e;p!==e?(te=n,n=vi()):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ga(){var n,u,y,p,x=o*77+52,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),St.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(Ja)),u!==e){if(y=[],zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r)),p!==e)for(;p!==e;)y.push(p),zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r));else y=e;y!==e?(te=n,n=hu()):(o=n,n=e)}else o=n,n=e;return n===e&&(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),zt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L($r)),u!==e?(te=n,n=pu()):(o=n,n=e)),z[x]={nextPos:o,result:n},n}function da(){var n,u=o*77+53,y=z[u];return y?(o=y.nextPos,y.result):(n=Eu(),n===e&&(n=ya()),z[u]={nextPos:o,result:n},n)}function Eu(){var n,u,y,p,x=o*77+54,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===st?(u=st,o+=4):(u=e,F===0&&L(wl)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=gi()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function ya(){var n,u,y,p,x=o*77+55,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===tt?(u=tt,o+=5):(u=e,F===0&&L(on)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=vu()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function wa(){var n,u,y,p,x=o*77+56,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===gt?(u=gt,o+=4):(u=e,F===0&&L(ml)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=di()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function br(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+57,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=Qe(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=ea(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=Qe(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=ea(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=H,o++):(x=e,F===0&&L(Qt)),x!==e?(te=n,n=gu(p)):(o=n,n=e)}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function Mu(){var n,u,y,p,x,m,P,C,N,I,q=o*77+58,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=Qe(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=ta(m)}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=Qe(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=ta(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=du(p)):(o=n,n=e)}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function ma(){var n,u,y,p,x,m,P,C=o*77+59,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,u=ue(),u!==e){for(y=o,p=[],x=l();x!==e;)p.push(x),x=l();if(t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();P=Ze(),P!==e?y=P:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),te=n,n=yu(u,y)}else o=n,n=e;return z[C]={nextPos:o,result:n},n}function Fi(){var n,u,y,p,x,m,P=o*77+60,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=ma(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=ma(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=ma(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);te=n,n=yi(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function it(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct,_t,Nu=o*77+61,$a=z[Nu];if($a)return o=$a.nextPos,$a.result;if(n=o,t.charCodeAt(o)===64?(u=Mt,o++):(u=e,F===0&&L($l)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=ue(),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=S,o++):(m=e,F===0&&L(dt)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(C=Fi(),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();if(t.charCodeAt(o)===41?(I=E,o++):(I=e,F===0&&L(Ir)),I!==e){for(q=o,G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.charCodeAt(o)===58?(ne=ie,o++):(ne=e,F===0&&L(Xt)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();$e=Ze(),$e!==e?q=$e:(o=q,q=e)}else o=q,q=e;for(q===e&&(q=null),G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.charCodeAt(o)===123?(ne=D,o++):(ne=e,F===0&&L(ut)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();for($e=Nr(),$e===e&&($e=null),Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();t.charCodeAt(o)===125?(_t=H,o++):(_t=e,F===0&&L(Qt)),_t!==e?(te=n,n=wu(y,p,x,C,q,$e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[Nu]={nextPos:o,result:n},n}function Su(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=o*77+62,$e=z[Ie];if($e)return o=$e.nextPos,$e.result;if(n=o,t.substr(o,2)===Gt?(u=Gt,o+=2):(u=e,F===0&&L(Jn)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Fi(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=o,C=[],N=l();N!==e;)C.push(N),N=l();if(t.charCodeAt(o)===58?(N=ie,o++):(N=e,F===0&&L(Xt)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();q=Ze(),q!==e?P=q:(o=P,P=e)}else o=P,P=e;for(P===e&&(P=null),C=[],N=l();N!==e;)C.push(N),N=l();if(t.charCodeAt(o)===123?(N=D,o++):(N=e,F===0&&L(ut)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();for(q=Nr(),q===e&&(q=null),G=[],ne=l();ne!==e;)G.push(ne),ne=l();t.charCodeAt(o)===125?(ne=H,o++):(ne=e,F===0&&L(Qt)),ne!==e?(te=n,n=wi(p,P,q)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[Ie]={nextPos:o,result:n},n}function Es(){var n,u,y,p,x,m,P,C,N,I,q=o*77+63,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=rs(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=mi(m)}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=rs(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=mi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=mu(p)):(o=n,n=e)}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function hr(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+64,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=rs(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=$i(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=rs(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=$i(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=H,o++):(x=e,F===0&&L(Qt)),x!==e?(te=n,n=c(p)):(o=n,n=e)}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function Ze(){var n,u=o*77+65,y=z[u];return y?(o=y.nextPos,y.result):(n=Ri(),n===e&&(n=Ue()),z[u]={nextPos:o,result:n},n)}function Ri(){var n,u,y,p,x,m,P,C,N,I,q=o*77+66,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===Gt?(u=Gt,o+=2):(u=e,F===0&&L(Jn)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=M(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.substr(o,2)===ce?(C=ce,o+=2):(C=e,F===0&&L(vs)),C!==e){for(N=[],I=l();I!==e;)N.push(I),I=l();I=Ze(),I!==e?(te=n,n=re(p,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function M(){var n,u,y,p,x,m,P=o*77+67,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Ze(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=Ze(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=Ze(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);te=n,n=Cs(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Ue(){var n,u,y,p,x,m,P,C,N=o*77+68,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ue(),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(t.charCodeAt(o)===60?(p=vt,o++):(p=e,F===0&&L(Wn)),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ze(),m!==e){for(P=[],C=$();C!==e;)P.push(C),C=$();t.charCodeAt(o)===62?(C=Cr,o++):(C=e,F===0&&L(Ka)),C!==e?(te=n,n=xr(u,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return n===e&&(n=o,u=ue(),u!==e&&(te=n,u=fn(u)),n=u),z[N]={nextPos:o,result:n},n}function ue(){var n,u,y,p,x=o*77+69,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,Sn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(xl)),u!==e){for(y=[],mr.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Qa));p!==e;)y.push(p),mr.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Qa));te=n,n=i()}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function f(){var n,u,y,p,x,m,P=o*77+70,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=ue(),u!==e){for(y=[],p=o,t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e?(m=ue(),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e?(m=ue(),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);te=n,n=T()}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function d(){var n,u,y,p,x,m=o*77+71,P=z[m];if(P)return o=P.nextPos,P.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&L(Ut)),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();u=[u,y,p],n=u}else o=n,n=e;if(n===e)if(n=[],u=l(),u!==e)for(;u!==e;)n.push(u),u=l();else n=e;return z[m]={nextPos:o,result:n},n}function A(){var n,u,y,p,x,m,P=o*77+72,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Nr(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=H,o++):(m=e,F===0&&L(Qt)),m!==e?(te=n,n=es(p)):(o=n,n=e)}else o=n,n=e;return n===e&&(n=ks()),z[P]={nextPos:o,result:n},n}function w(){var n,u=o*77+73,y=z[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===kt?(n=kt,o+=2):(n=e,F===0&&L(bl)),n===e&&(nl.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Al))),z[u]={nextPos:o,result:n},n)}function a(){var n,u,y=o*77+74,p=z[y];return p?(o=p.nextPos,p.result):(n=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&L(Jt)),F--,u===e?n=void 0:(o=n,n=e),n===e&&(n=w()),z[y]={nextPos:o,result:n},n)}function l(){var n,u=o*77+75,y=z[u];return y?(o=y.nextPos,y.result):(al.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Za)),z[u]={nextPos:o,result:n},n)}function $(){var n,u=o*77+76,y=z[u];return y?(o=y.nextPos,y.result):(cr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Cl)),z[u]={nextPos:o,result:n},n)}function v(n,u,y){const p={type:n};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(p[m]=u[m]);const x=U();return p.loc={start:x.start.offset,end:x.end.offset-1},p}if(Us=g(),Us!==e&&o===t.length)return Us;throw Us!==e&&o<t.length&&L(B()),ra(Nt,j<t.length?t.charAt(j):null,j<t.length?cn(j,j+1):cn(j,j))}const R2=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function I2(t){return R2.includes(t.type)}function W0(t){return"chain"in t&&t.chain!==null}function j2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function D2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function L2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function It(t,r){const e=r(t);switch(e.type){case"def":{e.expr=It(e.expr,r);break}case"return":{e.expr=It(e.expr,r);break}case"each":{e.items=It(e.items,r),e.for=It(e.for,r);break}case"for":{e.from!=null&&(e.from=It(e.from,r)),e.to!=null&&(e.to=It(e.to,r)),e.times!=null&&(e.times=It(e.times,r)),e.for=It(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=It(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=It(e.expr,r),e.dest=It(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=It(e.operands[s],r);break}case"not":{e.expr=It(e.expr,r);break}case"if":{e.cond=It(e.cond,r),e.then=It(e.then,r);for(const s of e.elseif)s.cond=It(s.cond,r),s.then=It(s.then,r);e.else!=null&&(e.else=It(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=It(e.children[s],r);break}case"match":{e.about=It(e.about,r);for(const s of e.qs)s.q=It(s.q,r),s.a=It(s.a,r);e.default!=null&&(e.default=It(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=It(e.statements[s],r);break}case"exists":{e.identifier=It(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=It(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],It(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=It(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=It(e.args[s],r);break}case"indexChain":{e.index=It(e.index,r);break}case"call":{e.target=It(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=It(e.args[s],r);break}case"index":{e.target=It(e.target,r),e.index=It(e.index,r);break}case"prop":{e.target=It(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=It(e.members[s],r);break}case"or":case"and":{e.left=It(e.left,r),e.right=It(e.right,r);break}}if(W0(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=It(e.chain[s],r);return e}const uv=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function ov(t){throw new _f(`Reserved word "${t}" cannot be used as variable name.`)}function U2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{uv.includes(t.name)&&ov(t.name);break}case"meta":{t.name!=null&&uv.includes(t.name)&&ov(t.name);break}case"fn":{for(const r of t.args)uv.includes(r.name)&&ov(r.name);break}}return t}function B2(t){for(const r of t)It(r,U2);return t}function Uy(t){return{type:"simple",name:t}}function H2(t,r){return{type:"generic",name:t,inners:r}}function q2(t,r){return{type:"fn",args:t,result:r}}function Nh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Nh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Nh(s)).join(", "),e=Nh(t.result);return`@(${r}) { ${e} }`}}}function ic(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Uy(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=ic(t.inner):r=Uy("any"),H2(t.name,[r])}}throw new _f(`Unknown type: '${Nh(t)}'`)}else{const r=t.args.map(e=>ic(e));return q2(r,ic(t.result))}}function V2(t){switch(t.type){case"def":{t.varType!=null&&ic(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&ic(r.argType);t.retType!=null&&ic(t.retType);break}}return t}function z2(t){for(const r of t)It(r,V2);return t}function Th(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Th(s.expr.children)),r.push(s);else{if(e.length>0)throw new _f("invalid attribute.");switch(s.type){case"fn":{s.children=Th(s.children);break}case"block":{s.statements=Th(s.statements);break}}r.push(s)}if(e.length>0)throw new _f("invalid attribute.");return r}function K2(t){if(I2(t)&&W0(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=j2(s,h.args,h.loc);break}case"indexChain":{s=D2(s,h.index,h.loc);break}case"propChain":{s=L2(s,h.name,h.loc);break}}return s}return t}function W2(t){for(let r=0;r<t.length;r++)t[r]=It(t[r],K2);return t}function Oh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function G0(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Oh(t,r,e);{const{left:s,right:h,info:g}=t;return Oh(s,G0(h,r,e),g)}}function rf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[rf(t.left),rf(t.right)]}}const G2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:rf(t.left),right:rf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:rf(t.left),right:rf(t.right)}),priority:3}};function J2(t){const r=t.operators.map(s=>{const h=G2[s];if(h==null)throw new _f(`No such operator: ${s}.`);return h});let e=Oh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=G0(e,t.operands[2+s],r[1+s]);return rf(e)}function Q2(t){for(let r=0;r<t.length;r++)t[r]=It(t[r],e=>e.type==="infix"?J2(e):e);return t}var Ju;let Z2=(Ju=class{constructor(){ve(this,"plugins");this.plugins={validate:[B2,z2],transform:[Th,W2,Q2]}}static parse(r){return Ju.instance==null&&(Ju.instance=new Ju),Ju.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Ly(r,{startRule:"Preprocess"});e=Ly(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new _f(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new _f(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},ve(Ju,"instance"),Ju);const X2="0.17.0",Y2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let lg=[],Ac=null;function eP(t){return lg=Z2.parse(t),JSON.stringify(lg,null,"	")}async function tP(t){Ac==null||Ac.abort(),Ac=new qn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:ng(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:ng(e.val,!0),print:!1});break}}});try{await Ac.exec(lg)}catch(r){t.err(r)}}const rP=Object.freeze(Object.defineProperty({__proto__:null,exec:tP,parse:eP,samples:Y2,version:X2},Symbol.toStringTag,{value:"Module"}));function ms(t,r,e){let s=e.value;return{configurable:!0,get(){const h=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){s=h}}}let Pp=class J0 extends Error{constructor(e,s){super(e);ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,J0)}};class sP extends Pp{constructor(r){super(`Internal Error. ${r}`,r)}}class Pf extends Pp{constructor(r,e){super(r,e)}}class zr extends Pp{constructor(r,e){super(r,e)}}class nP extends zr{constructor(r,e){super(r,e)}}var Ho=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let yo=class Q0{constructor(r=[],e,s){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Q0(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new zr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new zr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){const g=h.get(r);if(!g.isMutable)throw new zr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new zr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Ho([ms],yo.prototype,"log",null);Ho([ms],yo.prototype,"onUpdated",null);Ho([ms],yo.prototype,"createChildScope",null);Ho([ms],yo.prototype,"get",null);Ho([ms],yo.prototype,"exists",null);Ho([ms],yo.prototype,"getAll",null);Ho([ms],yo.prototype,"add",null);Ho([ms],yo.prototype,"assign",null);let dh;const aP=new Uint8Array(16);function iP(){if(!dh&&(dh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dh(aP)}const bn=[];for(let t=0;t<256;++t)bn.push((t+256).toString(16).slice(1));function lP(t,r=0){return bn[t[r+0]]+bn[t[r+1]]+bn[t[r+2]]+bn[t[r+3]]+"-"+bn[t[r+4]]+bn[t[r+5]]+"-"+bn[t[r+6]]+bn[t[r+7]]+"-"+bn[t[r+8]]+bn[t[r+9]]+"-"+bn[t[r+10]]+bn[t[r+11]]+bn[t[r+12]]+bn[t[r+13]]+bn[t[r+14]]+bn[t[r+15]]}const uP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),By={randomUUID:uP};function oP(t,r,e){if(By.randomUUID&&!r&&!t)return By.randomUUID();t=t||{};const s=t.random||(t.rng||iP)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,lP(s)}const gr={type:"null"},Xi={type:"bool",value:!0},Di={type:"bool",value:!1},Je=t=>({type:"num",value:t}),qr=t=>({type:"str",value:t}),df=t=>({type:"bool",value:t}),sd=t=>({type:"obj",value:t}),Tn=t=>({type:"arr",value:t}),fP=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ke=t=>({type:"fn",native:t}),cP=t=>({type:"return",value:t}),hP=()=>({type:"break",value:null}),pP=()=>({type:"continue",value:null}),vP=t=>t.type==="return"?t.value:t,Z0=(t,r)=>({type:"error",value:t,info:r});function Hi(t){if(t==null)throw new zr("Expect anything, but got nothing.")}function _a(t){if(t==null)throw new zr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new zr(`Expect boolean, but got ${t.type}.`)}function No(t){if(t==null)throw new zr("Expect function, but got nothing.");if(t.type!=="fn")throw new zr(`Expect function, but got ${t.type}.`)}function Os(t){if(t==null)throw new zr("Expect string, but got nothing.");if(t.type!=="str")throw new zr(`Expect string, but got ${t.type}.`)}function Ve(t){if(t==null)throw new zr("Expect number, but got nothing.");if(t.type!=="num")throw new zr(`Expect number, but got ${t.type}.`)}function bo(t){if(t==null)throw new zr("Expect object, but got nothing.");if(t.type!=="obj")throw new zr(`Expect object, but got ${t.type}.`)}function np(t){if(t==null)throw new zr("Expect array, but got nothing.");if(t.type!=="arr")throw new zr(`Expect array, but got ${t.type}.`)}function fv(t){return t.type==="obj"}function Hy(t){return t.type==="arr"}function ug(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function og(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>og(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function fg(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>fg(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=fg(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function cg(t){if(t===null)return gr;if(typeof t=="boolean")return df(t);if(typeof t=="string")return qr(t);if(typeof t=="number")return Je(t);if(Array.isArray(t))return Tn(t.map(r=>cg(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,cg(s));return sd(r)}return gr}function lc(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const h of t.value)s.push(lc(h,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[h,g]of t.value)s.push(`${h}: ${lc(g,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const gP={help:qr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":qr("0.16.0"),"Core:ai":qr("kawaii"),"Core:not":ke(([t])=>(_a(t),t.value?Di:Xi)),"Core:eq":ke(([t,r])=>(Hi(t),Hi(r),ug(t,r)?Xi:Di)),"Core:neq":ke(([t,r])=>(Hi(t),Hi(r),ug(t,r)?Di:Xi)),"Core:and":ke(([t,r])=>(_a(t),t.value?(_a(r),r.value?Xi:Di):Di)),"Core:or":ke(([t,r])=>(_a(t),t.value?Xi:(_a(r),r.value?Xi:Di))),"Core:add":ke(([t,r])=>(Ve(t),Ve(r),Je(t.value+r.value))),"Core:sub":ke(([t,r])=>(Ve(t),Ve(r),Je(t.value-r.value))),"Core:mul":ke(([t,r])=>(Ve(t),Ve(r),Je(t.value*r.value))),"Core:pow":ke(([t,r])=>{Ve(t),Ve(r);const e=t.value**r.value;if(isNaN(e))throw new zr("Invalid operation.");return Je(e)}),"Core:div":ke(([t,r])=>{Ve(t),Ve(r);const e=t.value/r.value;if(isNaN(e))throw new zr("Invalid operation.");return Je(e)}),"Core:mod":ke(([t,r])=>(Ve(t),Ve(r),Je(t.value%r.value))),"Core:gt":ke(([t,r])=>(Ve(t),Ve(r),t.value>r.value?Xi:Di)),"Core:lt":ke(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Xi:Di)),"Core:gteq":ke(([t,r])=>(Ve(t),Ve(r),t.value>=r.value?Xi:Di)),"Core:lteq":ke(([t,r])=>(Ve(t),Ve(r),t.value<=r.value?Xi:Di)),"Core:type":ke(([t])=>(Hi(t),qr(t.type))),"Core:to_str":ke(([t])=>(Hi(t),qr(lc(t)))),"Core:range":ke(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Tn(Array.from({length:r.value-t.value+1},(e,s)=>Je(s+t.value))):t.value>r.value?Tn(Array.from({length:t.value-r.value+1},(e,s)=>Je(t.value-s))):Tn([t]))),"Core:sleep":ke(async([t])=>(Ve(t),await new Promise(r=>setTimeout(r,t.value)),gr)),"Util:uuid":ke(()=>qr(oP())),"Json:stringify":ke(([t])=>(Hi(t),qr(JSON.stringify(fg(t))))),"Json:parse":ke(([t])=>{Os(t);try{return cg(JSON.parse(t.value))}catch{return Z0("not_json")}}),"Json:parsable":ke(([t])=>{Os(t);try{JSON.parse(t.value)}catch{return df(!1)}return df(!0)}),"Date:now":ke(()=>Je(Date.now())),"Date:year":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ke(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ke(([t])=>(Os(t),Je(new Date(t.value).getTime()))),"Math:Infinity":Je(1/0),"Math:E":Je(Math.E),"Math:LN2":Je(Math.LN2),"Math:LN10":Je(Math.LN10),"Math:LOG2E":Je(Math.LOG2E),"Math:LOG10E":Je(Math.LOG10E),"Math:PI":Je(Math.PI),"Math:SQRT1_2":Je(Math.SQRT1_2),"Math:SQRT2":Je(Math.SQRT2),"Math:abs":ke(([t])=>(Ve(t),Je(Math.abs(t.value)))),"Math:acos":ke(([t])=>(Ve(t),Je(Math.acos(t.value)))),"Math:acosh":ke(([t])=>(Ve(t),Je(Math.acosh(t.value)))),"Math:asin":ke(([t])=>(Ve(t),Je(Math.asin(t.value)))),"Math:asinh":ke(([t])=>(Ve(t),Je(Math.asinh(t.value)))),"Math:atan":ke(([t])=>(Ve(t),Je(Math.atan(t.value)))),"Math:atanh":ke(([t])=>(Ve(t),Je(Math.atanh(t.value)))),"Math:atan2":ke(([t,r])=>(Ve(t),Ve(r),Je(Math.atan2(t.value,r.value)))),"Math:cbrt":ke(([t])=>(Ve(t),Je(Math.cbrt(t.value)))),"Math:ceil":ke(([t])=>(Ve(t),Je(Math.ceil(t.value)))),"Math:clz32":ke(([t])=>(Ve(t),Je(Math.clz32(t.value)))),"Math:cos":ke(([t])=>(Ve(t),Je(Math.cos(t.value)))),"Math:cosh":ke(([t])=>(Ve(t),Je(Math.cosh(t.value)))),"Math:exp":ke(([t])=>(Ve(t),Je(Math.exp(t.value)))),"Math:expm1":ke(([t])=>(Ve(t),Je(Math.expm1(t.value)))),"Math:floor":ke(([t])=>(Ve(t),Je(Math.floor(t.value)))),"Math:fround":ke(([t])=>(Ve(t),Je(Math.fround(t.value)))),"Math:hypot":ke(([t])=>{np(t);const r=[];for(const e of t.value)Ve(e),r.push(e.value);return Je(Math.hypot(...r))}),"Math:imul":ke(([t,r])=>(Ve(t),Ve(r),Je(Math.imul(t.value,r.value)))),"Math:log":ke(([t])=>(Ve(t),Je(Math.log(t.value)))),"Math:log1p":ke(([t])=>(Ve(t),Je(Math.log1p(t.value)))),"Math:log10":ke(([t])=>(Ve(t),Je(Math.log10(t.value)))),"Math:log2":ke(([t])=>(Ve(t),Je(Math.log2(t.value)))),"Math:max":ke(([t,r])=>(Ve(t),Ve(r),Je(Math.max(t.value,r.value)))),"Math:min":ke(([t,r])=>(Ve(t),Ve(r),Je(Math.min(t.value,r.value)))),"Math:pow":ke(([t,r])=>(Ve(t),Ve(r),Je(Math.pow(t.value,r.value)))),"Math:round":ke(([t])=>(Ve(t),Je(Math.round(t.value)))),"Math:sign":ke(([t])=>(Ve(t),Je(Math.sign(t.value)))),"Math:sin":ke(([t])=>(Ve(t),Je(Math.sin(t.value)))),"Math:sinh":ke(([t])=>(Ve(t),Je(Math.sinh(t.value)))),"Math:sqrt":ke(([t])=>{Ve(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new zr("Invalid operation.");return Je(r)}),"Math:tan":ke(([t])=>(Ve(t),Je(Math.tan(t.value)))),"Math:tanh":ke(([t])=>(Ve(t),Je(Math.tanh(t.value)))),"Math:trunc":ke(([t])=>(Ve(t),Je(Math.trunc(t.value)))),"Math:rnd":ke(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Je(Math.random())),"Math:gen_rng":ke(([t])=>{if(Hi(t),t.type!=="num"&&t.type!=="str")return gr;const r=Uo(t.value.toString());return ke(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Je(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Je(r()))}),"Num:to_hex":ke(([t])=>(Ve(t),qr(t.value.toString(16)))),"Num:from_hex":ke(([t])=>(Os(t),Je(parseInt(t.value,16)))),"Str:lf":qr(`
`),"Str:lt":ke(([t,r])=>(Os(t),Os(r),t.value<r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Str:gt":ke(([t,r])=>(Os(t),Os(r),t.value>r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Str:from_codepoint":ke(([t])=>(Ve(t),qr(String.fromCodePoint(t.value)))),"Obj:keys":ke(([t])=>(bo(t),Tn(Array.from(t.value.keys()).map(r=>qr(r))))),"Obj:vals":ke(([t])=>(bo(t),Tn(Array.from(t.value.values())))),"Obj:kvs":ke(([t])=>(bo(t),Tn(Array.from(t.value.entries()).map(([r,e])=>Tn([qr(r),e]))))),"Obj:get":ke(([t,r])=>(bo(t),Os(r),t.value.get(r.value)??gr)),"Obj:set":ke(([t,r,e])=>(bo(t),Os(r),Hi(e),t.value.set(r.value,e),gr)),"Obj:has":ke(([t,r])=>(bo(t),Os(r),df(t.value.has(r.value)))),"Obj:copy":ke(([t])=>(bo(t),sd(new Map(t.value)))),"Async:interval":ke(async([t,r,e],s)=>{Ve(t),No(r),e&&(_a(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.topCall(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),ke(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":ke(async([t,r],e)=>{Ve(t),No(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),ke(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},qy={num:{to_str:t=>ke(async(r,e)=>qr(t.value.toString()))},str:{to_num:t=>ke(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?gr:Je(s)}),len:t=>Je(Tf(t.value)),replace:t=>ke(async([r,e],s)=>(Os(r),Os(e),qr(t.value.split(r.value).join(e.value)))),index_of:t=>ke(async([r],e)=>(Os(r),Je(Ff(t.value,r.value)))),incl:t=>ke(async([r],e)=>(Os(r),t.value.includes(r.value)?Xi:Di)),trim:t=>ke(async(r,e)=>qr(t.value.trim())),upper:t=>ke(async(r,e)=>qr(t.value.toUpperCase())),lower:t=>ke(async(r,e)=>qr(t.value.toLowerCase())),split:t=>ke(async([r],e)=>(r&&Os(r),Tn(r?t.value.split(r?r.value:"").map(s=>qr(s)):Zs(t.value).map(s=>qr(s))))),slice:t=>ke(async([r,e],s)=>(Ve(r),Ve(e),qr(Of(t.value,r.value,e.value)))),pick:t=>ke(async([r],e)=>{Ve(r);const h=Zs(t.value)[r.value];return h?qr(h):gr}),codepoint_at:t=>ke(([r],e)=>{Ve(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?gr:Je(s)})},arr:{len:t=>Je(t.value.length),push:t=>ke(async([r],e)=>(Hi(r),t.value.push(r),t)),unshift:t=>ke(async([r],e)=>(Hi(r),t.value.unshift(r),t)),pop:t=>ke(async(r,e)=>t.value.pop()??gr),shift:t=>ke(async(r,e)=>t.value.shift()??gr),concat:t=>ke(async([r],e)=>(np(r),Tn(t.value.concat(r.value)))),slice:t=>ke(async([r,e],s)=>(Ve(r),Ve(e),Tn(t.value.slice(r.value,e.value)))),join:t=>ke(async([r],e)=>(r&&Os(r),qr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>ke(async([r],e)=>{No(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,Je(g)]));return Tn(await Promise.all(s))}),filter:t=>ke(async([r],e)=>{No(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,Je(h)]);_a(b),b.value&&s.push(g)}return Tn(s)}),reduce:t=>ke(async([r,e],s)=>{No(r);const h=e!=null;let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,Je(b)])}return g}),find:t=>ke(async([r],e)=>{No(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Je(s)]);if(_a(g),g.value)return h}return gr}),incl:t=>ke(async([r],e)=>(Hi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Di:(h=>h.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Xi:Di)),reverse:t=>ke(async(r,e)=>(t.value.reverse(),gr)),copy:t=>ke(async(r,e)=>Tn([...t.value])),sort:t=>ke(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=await s(g.slice(0,_),b),S=await s(g.slice(_),b);return h(k,S,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);Ve(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return No(r),np(t),t.value=await s(t.value,r),t})},error:{name:t=>qr(t.value),info:t=>t.info??gr}};function dP(t,r){if(Object.hasOwn(qy,t.type)){const e=qy[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new zr(`No such prop (${r}) in ${t.type}.`)}else throw new zr(`Cannot read prop of ${t.type}. (reading ${r})`)}const yP={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Oa=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const X0=300,wP=X0-1;let Vn=class{constructor(r,e={}){ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);ve(this,"vars",{});this.opts=e;const s={print:ke(([h])=>{Hi(h),this.opts.out&&this.opts.out(h)}),readline:ke(async h=>{const g=h[0];if(Os(g),this.opts.in==null)return gr;const b=await this.opts.in(g.value);return qr(b)})};this.vars=Object.fromEntries(Object.entries({...r,...gP,...s}).map(([h,g])=>[h,yP.const(g)])),this.scope=new yo([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),Z0("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Pp?this.opts.err(r):this.opts.err(new sP(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{if(s.mut)throw new Error("Namespaces cannot include mutable variable: "+s.name);const h={isMutable:s.mut,value:await this._eval(s.expr,e)};e.add(s.name,h),this.scope.add(r.name+":"+s.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??gr;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],{isMutable:!0,value:e[g]});const h=r.scope.createChildScope(s);return vP(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return gr;if(this.stepCount%X0===wP&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new zr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);No(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(_a(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(_a(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return gr}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(ug(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):gr}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return gr}case"for":{if(r.times){const s=await this._eval(r.times,e);Ve(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);Ve(s),Ve(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Je(g)}]])));if(b.type==="break")break;if(b.type==="return")return b}}return gr}case"each":{const s=await this._eval(r.items,e);np(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(g.type==="break")break;if(g.type==="return")return g}return gr}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,{isMutable:r.mut,value:s}),gr}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),gr}case"addAssign":{const s=await this._eval(r.dest,e);Ve(s);const h=await this._eval(r.expr,e);return Ve(h),await this.assign(e,r.dest,Je(s.value+h.value)),gr}case"subAssign":{const s=await this._eval(r.dest,e);Ve(s);const h=await this._eval(r.expr,e);return Ve(h),await this.assign(e,r.dest,Je(s.value-h.value)),gr}case"null":return gr;case"bool":return df(r.value);case"num":return Je(r.value);case"str":return qr(r.value);case"arr":return Tn(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return sd(s)}case"prop":{const s=await this._eval(r.target,e);return fv(s)?s.value.has(r.name)?s.value.get(r.name):gr:dP(s,r.name)}case"index":{const s=await this._eval(r.target,e),h=await this._eval(r.index,e);if(Hy(s)){Ve(h);const g=s.value[h.value];if(g===void 0)throw new nP(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}else{if(fv(s))return Os(h),s.value.has(h.value)?s.value.get(h.value):gr;throw new zr(`Cannot read prop (${lc(h)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return _a(s),df(!s.value)}case"fn":return fP(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return df(e.exists(r.identifier.name));case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);s+=lc(g)}return qr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),cP(s)}case"break":return this.log("block:break",{scope:e.name}),hP();case"continue":return this.log("block:continue",{scope:e.name}),pP();case"ns":return gr;case"meta":return gr;case"and":{const s=await this._eval(r.left,e);if(_a(s),s.value){const h=await this._eval(r.right,e);return _a(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(_a(s),s.value)return s;{const h=await this._eval(r.right,e);return _a(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=gr;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r),g=await this._eval(e.index,r);if(Hy(h))Ve(g),h.value[g.value]=s;else if(fv(h))Os(g),h.value.set(g.value,s);else throw new zr(`Cannot read prop (${lc(g)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);bo(h),h.value.set(e.name,s)}else throw new zr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Oa([ms],Vn.prototype,"exec",null);Oa([ms],Vn.prototype,"execFn",null);Oa([ms],Vn.prototype,"execFnSimple",null);Oa([ms],Vn.prototype,"handleError",null);Oa([ms],Vn.prototype,"log",null);Oa([ms],Vn.prototype,"collectNs",null);Oa([ms],Vn.prototype,"collectNsMember",null);Oa([ms],Vn.prototype,"_fn",null);Oa([ms],Vn.prototype,"_eval",null);Oa([ms],Vn.prototype,"_run",null);Oa([ms],Vn.prototype,"registerAbortHandler",null);Oa([ms],Vn.prototype,"unregisterAbortHandler",null);Oa([ms],Vn.prototype,"abort",null);Oa([ms],Vn.prototype,"assign",null);Oa([ms],Vn,"collectMetadata",null);function mP(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function yf(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,yf.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}mP(yf,Error);function cv(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}yf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=cv("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+cv("",h.column-1," ")+cv("",O,"^")}else r+=`
 at `+b}return r};yf.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function Vy(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:hn,Main:ts},g=hn,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="<",Cr=">",qt="+",_r="-",Vt="*",ye="^",qe="/",Te="%",et="!",ct="[",At=".",J="if",Z="elif",oe="else",Pe="match",ce="=>",Ee="eval",De="exists",Oe="`",Fe='"',Ce="'",ft='\\"',Ke="\\'",st="true",tt="false",gt="null",Tt=";",Mt="@",Gt="@(",kt=`\r
`,ht=/^[A-Z0-9_:]/i,wr=/^[^`{]/,hs=/^[{}`]/,ls=/^[+\-]/,St=/^[1-9]/,zt=/^[0-9]/,Sn=/^[A-Z_]/i,mr=/^[A-Z0-9_]/i,nl=/^[\r\n]/,al=/^[ \t\r\n]/,cr=/^[ \t]/,Jt=Bs(),Xr=me("//",!1),zn=me("/*",!1),Ot=me("*/",!1),dt=me("(",!1),Ir=me(")",!1),ar=me("::",!1),ut=me("{",!1),Qt=me("}",!1),bs=me("###",!1),Zt=me("let",!1),Xt=me(":",!1),Yr=me("=",!1),Ha=me("var",!1),jr=me("<:",!1),ps=me("#[",!1),Fs=me("]",!1),yt=me("each",!1),Ut=me(",",!1),Ys=me("for",!1),Dr=me("return",!1),Lr=or([["A","Z"],["0","9"],"_",":"],!1,!0),il=me("loop",!1),qa=me("break",!1),ll=me("continue",!1),ul=me("+=",!1),Va=me("-=",!1),za=me("\\",!1),ol=me("||",!1),fl=me("&&",!1),cl=me("==",!1),hl=me("!=",!1),Kn=me("<=",!1),en=me(">=",!1),Wn=me("<",!1),Ka=me(">",!1),pl=me("+",!1),Wa=me("-",!1),Rs=me("*",!1),vl=me("^",!1),gl=me("/",!1),dl=me("%",!1),As=me("!",!1),Is=me("[",!1),Gn=me(".",!1),tn=me("if",!1),rn=me("elif",!1),yl=me("else",!1),sn=me("match",!1),vs=me("=>",!1),js=me("eval",!1),Sr=me("exists",!1),nn=me("`",!1),an=or(["`","{"],!0,!1),ln=or(["{","}","`"],!1,!1),gs=me('"',!1),un=me("'",!1),Ds=me('\\"',!1),Ga=me("\\'",!1),ur=or(["+","-"],!1,!1),Ja=or([["1","9"]],!1,!1),$r=or([["0","9"]],!1,!1),wl=me("true",!1),on=me("false",!1),ml=me("null",!1),Ls=me(";",!1),$l=me("@",!1),Jn=me("@(",!1),xl=or([["A","Z"],"_"],!1,!0),Qa=or([["A","Z"],["0","9"],"_"],!1,!0),bl=me(`\r
`,!1),Al=or(["\r",`
`],!1,!1),Za=or([" ","	","\r",`
`],!1,!1),Cl=or([" ","	"],!1,!1),Xa=function(n){return n.join("")},_l=function(){return he()},Ya=function(){return he()},Pl=function(){return""},ei=function(){return""},kl=function(n){return n??[]},Qn=function(n,u){return u},El=function(n,u){return[n,...u]},Zn=function(n,u){return u},Ml=function(n,u){return[n,...u]},ti=function(n,u){return u},Sl=function(n,u){return[n,...u]},Nl=function(n){return n},Tl=function(n,u){return v("ns",{name:n,members:u})},Ol=function(n,u){return v("meta",{name:n,value:u})},Fl=function(n){return v("meta",{name:null,value:n})},Rl=function(n,u,y){return v("def",{name:n,varType:u,expr:y,mut:!1,attr:[]})},Il=function(n,u,y){return v("def",{name:n,varType:u,expr:y,mut:!0,attr:[]})},jl=function(n){return v("identifier",{name:"print",chain:[v("callChain",{args:[n]})]})},Dl=function(n,u){return v("attr",{name:n,value:u??v("bool",{value:!0})})},Ll=function(n,u,y){return v("each",{var:n,items:u,for:y})},Ul=function(n,u,y){return v("each",{var:n,items:u,for:y})},Bl=function(n,u){return u},Hl=function(n,u,y,p){return v("for",{var:n,from:u??v("num",{value:0}),to:y,for:p})},ql=function(n,u){return u},ri=function(n,u,y,p){return v("for",{var:n,from:u??v("num",{value:0}),to:y,for:p})},Vl=function(n,u){return v("for",{times:n,for:u})},zl=function(n,u){return v("for",{times:n,for:u})},Kl=function(n){return v("return",{expr:n})},Wl=function(n){return v("loop",{statements:n})},Gl=function(){return v("break",{})},Xn=function(){return v("continue",{})},Jl=function(n,u,y){return u==="+="?v("addAssign",{dest:n,expr:y}):u==="-="?v("subAssign",{dest:n,expr:y}):v("assign",{dest:n,expr:y})},si=function(n,u,y){return{op:u,term:y}},Ql=function(n,u){return v("infix",{operands:[n,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Zl=function(){return he()},Xl=function(n){return v("not",{expr:n})},ni=function(n,u){return{...n,chain:u}},Yl=function(n){return v("callChain",{args:n??[]})},Yn=function(n,u){return u},eu=function(n,u){return[n,...u]},tu=function(n){return v("indexChain",{index:n})},ru=function(n){return v("propChain",{name:n})},su=function(n,u,y,p){return v("if",{cond:n,then:u,elseif:y??[],else:p})},nu=function(n,u){return[n,...u]},ai=function(n,u){return{cond:n,then:u}},ii=function(n){return n},li=function(n,u,y){return{q:u,a:y}},ui=function(n,u,y){return v("match",{about:n,qs:u??[],default:y})},au=function(n){return v("block",{statements:n})},iu=function(n){return v("exists",{identifier:n})},oi=function(n){return v("identifier",{name:n})},lu=function(n){return v("tmpl",{tmpl:n})},fi=function(n){return n.join("")},ci=function(n){return n},uu=function(n){return v("str",{value:n.join("")})},hi=function(n){return n},ou=function(n){return v("str",{value:n.join("")})},fu=function(){return'"'},pi=function(){return"'"},cu=function(){return v("num",{value:parseFloat(he())})},vi=function(){return v("num",{value:parseFloat(he())})},hu=function(){return v("num",{value:parseInt(he(),10)})},pu=function(){return v("num",{value:parseInt(he(),10)})},gi=function(){return v("bool",{value:!0})},vu=function(){return v("bool",{value:!1})},di=function(){return v("null",{})},ea=function(n,u){return{k:n,v:u}},gu=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return v("obj",{value:u})},ta=function(n){return n},du=function(n){return v("arr",{value:n})},yu=function(n,u){return{name:n,argType:u}},yi=function(n,u){return[n,...u]},wu=function(n,u,y,p,x,m){return(n.length>0||y.length>0)&&$u("Cannot use spaces before or after the function name."),v("def",{name:u,expr:v("fn",{args:p??[],retType:x},m??[]),mut:!1,attr:[]})},wi=function(n,u,y){return v("fn",{args:n??[],retType:u},y??[])},mi=function(n){return n},mu=function(n){return v("arr",{value:n})},$i=function(n,u){return{k:n,v:u}},c=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return v("obj",{value:u})},re=function(n,u){return v("fnTypeSource",{args:n??[],result:u})},Cs=function(n,u){return[n,...u]},xr=function(n,u){return v("namedTypeSource",{name:n,inner:u})},fn=function(n){return v("namedTypeSource",{name:n,inner:null})},i=function(){return he()},T=function(){return he()},es=function(n){return v("block",{statements:n??[]})},o=0,te=0,R=[{line:1,column:1}],j=0,Nt=[],F=0,z={},Us;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function he(){return t.substring(te,o)}function U(){return cn(te,o)}function $u(n,u){throw u=u!==void 0?u:cn(te,o),_s(n,u)}function me(n,u){return{type:"literal",text:n,ignoreCase:u}}function or(n,u,y){return{type:"class",parts:n,inverted:u,ignoreCase:y}}function Bs(){return{type:"any"}}function B(){return{type:"end"}}function xi(n){var u=R[n],y;if(u)return u;for(y=n-1;!R[y];)y--;for(u=R[y],u={line:u.line,column:u.column};y<n;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return R[n]=u,u}function cn(n,u,y){var p=xi(n),x=xi(u),m={source:s,start:{offset:n,line:p.line,column:p.column},end:{offset:u,line:x.line,column:x.column}};return m}function L(n){o<j||(o>j&&(j=o,Nt=[]),Nt.push(n))}function _s(n,u){return new yf(n,null,null,u)}function ra(n,u,y){return new yf(yf.buildMessage(n,u),n,u,y)}function hn(){var n,u,y,p=o*77+0,x=z[p];if(x)return o=x.nextPos,x.result;for(n=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return te=n,u=Xa(u),n=u,z[p]={nextPos:o,result:n},n}function Ps(){var n,u,y=o*77+1,p=z[y];return p?(o=p.nextPos,p.result):(n=o,u=dn(),u!==e&&(te=n,u=_l()),n=u,n===e&&(n=o,u=ca(),u!==e&&(te=n,u=Ya()),n=u,n===e&&(n=at(),n===e&&(t.length>o?(n=t.charAt(o),o++):(n=e,F===0&&L(Jt))))),z[y]={nextPos:o,result:n},n)}function at(){var n,u,y,p,x,m,P=o*77+2,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.substr(o,2)===b?(u=b,o+=2):(u=e,F===0&&L(Xr)),u!==e){for(y=[],p=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);te=n,n=Pl()}else o=n,n=e;if(n===e)if(n=o,t.substr(o,2)===_?(u=_,o+=2):(u=e,F===0&&L(zn)),u!==e){for(y=[],p=o,x=o,F++,t.substr(o,2)===k?(m=k,o+=2):(m=e,F===0&&L(Ot)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.substr(o,2)===k?(m=k,o+=2):(m=e,F===0&&L(Ot)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt)),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);t.substr(o,2)===k?(p=k,o+=2):(p=e,F===0&&L(Ot)),p!==e?(te=n,n=ei()):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ts(){var n,u,y,p,x,m=o*77+3,P=z[m];if(P)return o=P.nextPos,P.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=pn(),y===e&&(y=null),p=[],x=l();x!==e;)p.push(x),x=l();return te=n,n=kl(y),z[m]={nextPos:o,result:n},n}function pn(){var n,u,y,p,x,m,P,C,N=o*77+4,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=rt(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=rt(),C!==e?(te=p,p=Qn(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=rt(),C!==e?(te=p,p=Qn(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=El(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Ur(){var n,u,y,p,x,m,P,C,N=o*77+5,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ds(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ds(),C!==e?(te=p,p=Zn(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ds(),C!==e?(te=p,p=Zn(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=Ml(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Nr(){var n,u,y,p,x,m,P,C,N=o*77+6,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ks(),u!==e){for(y=[],p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ks(),C!==e?(te=p,p=ti(u,C)):(o=p,p=e)}else o=p,p=e;for(;p!==e;){for(y.push(p),p=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=ks(),C!==e?(te=p,p=ti(u,C)):(o=p,p=e)}else o=p,p=e}te=n,n=Sl(u,y)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function rt(){var n,u=o*77+7,y=z[u];return y?(o=y.nextPos,y.result):(n=Ai(),n===e&&(n=xu(),n===e&&(n=ks())),z[u]={nextPos:o,result:n},n)}function ds(){var n,u=o*77+8,y=z[u];return y?(o=y.nextPos,y.result):(n=Ci(),n===e&&(n=it(),n===e&&(n=Ai())),z[u]={nextPos:o,result:n},n)}function ks(){var n,u=o*77+9,y=z[u];return y?(o=y.nextPos,y.result):(n=Ci(),n===e&&(n=it(),n===e&&(n=bu(),n===e&&(n=Cu(),n===e&&(n=Au(),n===e&&(n=ss(),n===e&&(n=_i(),n===e&&(n=_u(),n===e&&(n=Pi(),n===e&&(n=ns(),n===e&&(n=sa(),n===e&&(n=Qe()))))))))))),z[u]={nextPos:o,result:n},n)}function Qe(){var n,u=o*77+10,y=z[u];return y?(o=y.nextPos,y.result):(n=ki(),n===e&&(n=Hs()),z[u]={nextPos:o,result:n},n)}function Hs(){var n,u=o*77+11,y=z[u];return y?(o=y.nextPos,y.result):(n=Si(),n===e&&(n=Su(),n===e&&(n=Ei(),n===e&&(n=bi()))),z[u]={nextPos:o,result:n},n)}function bi(){var n,u,y,p,x,m,P=o*77+12,C=z[P];if(C)return o=C.nextPos,C.result;if(n=gn(),n===e&&(n=la(),n===e&&(n=ua(),n===e&&(n=dn(),n===e&&(n=ca(),n===e&&(n=Oi(),n===e&&(n=da(),n===e&&(n=wa(),n===e&&(n=br(),n===e&&(n=Mu(),n===e&&(n=aa(),n===e&&(n=oa(),n===e))))))))))))if(n=o,t.charCodeAt(o)===40?(u=S,o++):(u=e,F===0&&L(dt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=Qe(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e?(te=n,n=Nl(p)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function rs(){var n,u=o*77+13,y=z[u];return y?(o=y.nextPos,y.result):(n=Oi(),n===e&&(n=ca(),n===e&&(n=da(),n===e&&(n=Es(),n===e&&(n=hr(),n===e&&(n=wa()))))),z[u]={nextPos:o,result:n},n)}function Ai(){var n,u,y,p,x,m,P,C,N,I,q=o*77+14,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===O?(u=O,o+=2):(u=e,F===0&&L(ar)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=D,o++):(m=e,F===0&&L(ut)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(C=Ur(),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();t.charCodeAt(o)===125?(I=H,o++):(I=e,F===0&&L(Qt)),I!==e?(te=n,n=Tl(p,C)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function xu(){var n,u,y,p,x,m,P=o*77+15,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.substr(o,3)===ae?(u=ae,o+=3):(u=e,F===0&&L(bs)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=ue(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=rs(),m!==e?(te=n,n=Ol(p,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ae?(u=ae,o+=3):(u=e,F===0&&L(bs)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();p=rs(),p!==e?(te=n,n=Fl(p)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Ci(){var n,u,y,p,x,m,P,C,N,I=o*77+16,q=z[I];if(q)return o=q.nextPos,q.result;if(n=o,t.substr(o,3)===se?(u=se,o+=3):(u=e,F===0&&L(Zt)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===58?(P=ie,o++):(P=e,F===0&&L(Xt)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Ze(),N!==e?x=N:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===61?(P=de,o++):(P=e,F===0&&L(Yr)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Qe(),N!==e?(te=n,n=Rl(p,x,N)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===W?(u=W,o+=3):(u=e,F===0&&L(Ha)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===58?(P=ie,o++):(P=e,F===0&&L(Xt)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Ze(),N!==e?x=N:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===61?(P=de,o++):(P=e,F===0&&L(Yr)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();N=Qe(),N!==e?(te=n,n=Il(p,x,N)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[I]={nextPos:o,result:n},n}function bu(){var n,u,y,p,x=o*77+17,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&L(jr)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();p=Qe(),p!==e?(te=n,n=jl(p)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function Au(){var n,u,y,p,x,m,P,C=o*77+18,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,t.substr(o,2)===Q?(u=Q,o+=2):(u=e,F===0&&L(ps)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=ue(),p!==e){for(x=o,m=[],P=l();P!==e;)m.push(P),P=l();for(P=rs(),P!==e?x=P:(o=x,x=e),x===e&&(x=null),m=[],P=l();P!==e;)m.push(P),P=l();t.charCodeAt(o)===93?(P=X,o++):(P=e,F===0&&L(Fs)),P!==e?(te=n,n=Dl(p,x)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[C]={nextPos:o,result:n},n}function ss(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+19,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&L(yt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(t.substr(o,3)===se?(x=se,o+=3):(x=e,F===0&&L(Zt)),x!==e){if(m=[],P=l(),P!==e)for(;P!==e;)m.push(P),P=l();else m=e;if(m!==e)if(P=ue(),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();for(t.charCodeAt(o)===44?(N=Y,o++):(N=e,F===0&&L(Ut)),N===e&&(N=null),I=[],q=l();q!==e;)I.push(q),q=l();if(q=Qe(),q!==e)if(t.charCodeAt(o)===41?(G=E,o++):(G=e,F===0&&L(Ir)),G!==e){for(ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();Ie=A(),Ie!==e?(te=n,n=Ll(P,q,Ie)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&L(yt)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(t.substr(o,3)===se?(p=se,o+=3):(p=e,F===0&&L(Zt)),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();if(I=Qe(),I!==e){if(q=[],G=l(),G!==e)for(;G!==e;)q.push(G),G=l();else q=e;q!==e?(G=A(),G!==e?(te=n,n=Ul(m,I,G)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function _i(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct=o*77+20,_t=z[Ct];if(_t)return o=_t.nextPos,_t.result;if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(t.substr(o,3)===se?(x=se,o+=3):(x=e,F===0&&L(Zt)),x!==e){if(m=[],P=l(),P!==e)for(;P!==e;)m.push(P),P=l();else m=e;if(m!==e)if(P=ue(),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();if(N=o,t.charCodeAt(o)===61?(I=de,o++):(I=e,F===0&&L(Yr)),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();G=Qe(),G!==e?(te=N,N=Bl(P,G)):(o=N,N=e)}else o=N,N=e;for(N===e&&(N=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&L(Ut)),I===e&&(I=null),q=[],G=l();G!==e;)q.push(G),G=l();if(G=Qe(),G!==e)if(t.charCodeAt(o)===41?(ne=E,o++):(ne=e,F===0&&L(Ir)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();$e=A(),$e!==e?(te=n,n=Hl(P,N,G,$e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(t.substr(o,3)===se?(p=se,o+=3):(p=e,F===0&&L(Zt)),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(C=o,t.charCodeAt(o)===61?(N=de,o++):(N=e,F===0&&L(Yr)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();q=Qe(),q!==e?(te=C,C=ql(m,q)):(o=C,C=e)}else o=C,C=e;for(C===e&&(C=null),t.charCodeAt(o)===44?(N=Y,o++):(N=e,F===0&&L(Ut)),N===e&&(N=null),I=[],q=l();q!==e;)I.push(q),q=l();if(q=Qe(),q!==e){if(G=[],ne=l(),ne!==e)for(;ne!==e;)G.push(ne),ne=l();else G=e;G!==e?(ne=A(),ne!==e?(te=n,n=ri(m,C,q,ne)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===40?(p=S,o++):(p=e,F===0&&L(dt)),p!==e)if(x=Qe(),x!==e)if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();C=A(),C!==e?(te=n,n=Vl(x,C)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===fe?(u=fe,o+=3):(u=e,F===0&&L(Ys)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=Qe(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=A(),m!==e?(te=n,n=zl(p,m)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e}}return z[Ct]={nextPos:o,result:n},n}function Cu(){var n,u,y,p,x,m=o*77+21,P=z[m];if(P)return o=P.nextPos,P.result;if(n=o,t.substr(o,6)===le?(u=le,o+=6):(u=e,F===0&&L(Dr)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();x=Qe(),x!==e?(te=n,n=Kl(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[m]={nextPos:o,result:n},n}function _u(){var n,u,y,p,x,m,P,C,N=o*77+22,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===we?(u=we,o+=4):(u=e,F===0&&L(il)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===123?(p=D,o++):(p=e,F===0&&L(ut)),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Nr(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();t.charCodeAt(o)===125?(C=H,o++):(C=e,F===0&&L(Qt)),C!==e?(te=n,n=Wl(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function Pi(){var n,u,y,p,x=o*77+23,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===_e?(u=_e,o+=5):(u=e,F===0&&L(qa)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=Gl()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function ns(){var n,u,y,p,x=o*77+24,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,8)===be?(u=be,o+=8):(u=e,F===0&&L(ll)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=Xn()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function sa(){var n,u,y,p,x,m,P=o*77+25,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Qe(),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.substr(o,2)===nt?(p=nt,o+=2):(p=e,F===0&&L(ul)),p===e&&(t.substr(o,2)===mt?(p=mt,o+=2):(p=e,F===0&&L(Va)),p===e&&(t.charCodeAt(o)===61?(p=de,o++):(p=e,F===0&&L(Yr)))),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=Qe(),m!==e?(te=n,n=Jl(u,p,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ki(){var n,u,y,p,x,m,P,C,N=o*77+26,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=Hs(),u!==e){for(y=[],p=o,x=[],m=as();m!==e;)x.push(m),m=as();if(m=na(),m!==e){for(P=[],C=as();C!==e;)P.push(C),C=as();C=Hs(),C!==e?(te=p,p=si(u,m,C)):(o=p,p=e)}else o=p,p=e;if(p!==e)for(;p!==e;){for(y.push(p),p=o,x=[],m=as();m!==e;)x.push(m),m=as();if(m=na(),m!==e){for(P=[],C=as();C!==e;)P.push(C),C=as();C=Hs(),C!==e?(te=p,p=si(u,m,C)):(o=p,p=e)}else o=p,p=e}else y=e;y!==e?(te=n,n=Ql(u,y)):(o=n,n=e)}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function as(){var n,u,y,p=o*77+27,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&L(za)),u!==e?(y=w(),y!==e?(u=[u,y],n=u):(o=n,n=e)):(o=n,n=e),n===e&&(n=$()),z[p]={nextPos:o,result:n},n)}function na(){var n,u,y=o*77+28,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===xt?(u=xt,o+=2):(u=e,F===0&&L(ol)),u===e&&(t.substr(o,2)===wt?(u=wt,o+=2):(u=e,F===0&&L(fl)),u===e&&(t.substr(o,2)===Ye?(u=Ye,o+=2):(u=e,F===0&&L(cl)),u===e&&(t.substr(o,2)===bt?(u=bt,o+=2):(u=e,F===0&&L(hl)),u===e&&(t.substr(o,2)===Ht?(u=Ht,o+=2):(u=e,F===0&&L(Kn)),u===e&&(t.substr(o,2)===nr?(u=nr,o+=2):(u=e,F===0&&L(en)),u===e&&(t.charCodeAt(o)===60?(u=vt,o++):(u=e,F===0&&L(Wn)),u===e&&(t.charCodeAt(o)===62?(u=Cr,o++):(u=e,F===0&&L(Ka)),u===e&&(t.charCodeAt(o)===43?(u=qt,o++):(u=e,F===0&&L(pl)),u===e&&(t.charCodeAt(o)===45?(u=_r,o++):(u=e,F===0&&L(Wa)),u===e&&(t.charCodeAt(o)===42?(u=Vt,o++):(u=e,F===0&&L(Rs)),u===e&&(t.charCodeAt(o)===94?(u=ye,o++):(u=e,F===0&&L(vl)),u===e&&(t.charCodeAt(o)===47?(u=qe,o++):(u=e,F===0&&L(gl)),u===e&&(t.charCodeAt(o)===37?(u=Te,o++):(u=e,F===0&&L(dl))))))))))))))),u!==e&&(te=n,u=Zl()),n=u,z[y]={nextPos:o,result:n},n)}function aa(){var n,u,y,p=o*77+29,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===33?(u=et,o++):(u=e,F===0&&L(As)),u!==e?(y=Qe(),y!==e?(te=n,n=Xl(y)):(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function Ei(){var n,u,y,p,x=o*77+30,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,u=bi(),u!==e){if(y=[],p=ia(),p===e&&(p=Mi(),p===e&&(p=qs())),p!==e)for(;p!==e;)y.push(p),p=ia(),p===e&&(p=Mi(),p===e&&(p=qs()));else y=e;y!==e?(te=n,n=ni(u,y)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function ia(){var n,u,y,p,x,m,P=o*77+31,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===40?(u=S,o++):(u=e,F===0&&L(dt)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Pu(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e?(te=n,n=Yl(p)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Pu(){var n,u,y,p,x,m,P=o*77+32,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Qe(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=Qe(),m!==e?(te=p,p=Yn(u,m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=Qe(),m!==e?(te=p,p=Yn(u,m)):(o=p,p=e)):(o=p,p=e);te=n,n=eu(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Mi(){var n,u,y,p,x,m,P=o*77+33,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=Qe(),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=tu(p)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function qs(){var n,u,y,p=o*77+34,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===46?(u=At,o++):(u=e,F===0&&L(Gn)),u!==e?(y=ue(),y!==e?(te=n,n=ru(y)):(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function Si(){var n,u,y,p,x,m,P,C,N,I,q=o*77+35,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===J?(u=J,o+=2):(u=e,F===0&&L(tn)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;if(y!==e)if(p=Qe(),p!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=A(),m!==e){if(P=o,C=[],N=l(),N!==e)for(;N!==e;)C.push(N),N=l();else C=e;if(C!==e?(N=Ni(),N!==e?P=N:(o=P,P=e)):(o=P,P=e),P===e&&(P=null),C=o,N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;N!==e?(I=ku(),I!==e?C=I:(o=C,C=e)):(o=C,C=e),C===e&&(C=null),te=n,n=su(p,m,P,C)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function Ni(){var n,u,y,p,x,m,P=o*77+36,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=vn(),u!==e){for(y=[],p=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=vn(),m!==e?p=m:(o=p,p=e);p!==e;){for(y.push(p),p=o,x=[],m=l();m!==e;)x.push(m),m=l();m=vn(),m!==e?p=m:(o=p,p=e)}te=n,n=nu(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function vn(){var n,u,y,p,x,m,P,C=o*77+37,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,t.substr(o,4)===Z?(u=Z,o+=4):(u=e,F===0&&L(rn)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();if(x=Qe(),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();P=A(),P!==e?(te=n,n=ai(x,P)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e;return z[C]={nextPos:o,result:n},n}function ku(){var n,u,y,p,x,m=o*77+38,P=z[m];if(P)return o=P.nextPos,P.result;if(n=o,t.substr(o,4)===oe?(u=oe,o+=4):(u=e,F===0&&L(yl)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();x=A(),x!==e?(te=n,n=ii(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[m]={nextPos:o,result:n},n}function gn(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct,_t,Nu=o*77+39,$a=z[Nu];if($a)return o=$a.nextPos,$a.result;if(n=o,t.substr(o,5)===Pe?(u=Pe,o+=5):(u=e,F===0&&L(sn)),u!==e)if(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();if(x=Qe(),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();if(t.charCodeAt(o)===123?(P=D,o++):(P=e,F===0&&L(ut)),P!==e){for(C=[],N=l();N!==e;)C.push(N),N=l();if(N=[],I=o,q=Qe(),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();te=I,I=li(x,q,$e)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(N.push(I),I=o,q=Qe(),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();te=I,I=li(x,q,$e)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else N=e;if(N!==e){if(I=o,t.charCodeAt(o)===42?(q=Vt,o++):(q=e,F===0&&L(Rs)),q!==e){for(G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.substr(o,2)===ce?(ne=ce,o+=2):(ne=e,F===0&&L(vs)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();if($e=A(),$e!==e){for(Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();I=$e}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),q=[],G=l();G!==e;)q.push(G),G=l();t.charCodeAt(o)===125?(G=H,o++):(G=e,F===0&&L(Qt)),G!==e?(te=n,n=ui(x,N,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;else o=n,n=e;return z[Nu]={nextPos:o,result:n},n}function la(){var n,u,y,p,x,m,P,C,N=o*77+40,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Ee?(u=Ee,o+=4):(u=e,F===0&&L(js)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(t.charCodeAt(o)===123?(p=D,o++):(p=e,F===0&&L(ut)),p!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Nr(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();t.charCodeAt(o)===125?(C=H,o++):(C=e,F===0&&L(Qt)),C!==e?(te=n,n=au(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[N]={nextPos:o,result:n},n}function ua(){var n,u,y,p,x=o*77+41,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,6)===De?(u=De,o+=6):(u=e,F===0&&L(Sr)),u!==e){if(y=[],p=l(),p!==e)for(;p!==e;)y.push(p),p=l();else y=e;y!==e?(p=oa(),p!==e?(te=n,n=iu(p)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function oa(){var n,u,y=o*77+42,p=z[y];return p?(o=p.nextPos,p.result):(n=o,u=f(),u!==e&&(te=n,u=oi(u)),n=u,z[y]={nextPos:o,result:n},n)}function dn(){var n,u,y,p,x,m,P=o*77+43,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===96?(u=Oe,o++):(u=e,F===0&&L(nn)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===96?(m=Oe,o++):(m=e,F===0&&L(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===96?(m=Oe,o++):(m=e,F===0&&L(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===96?(p=Oe,o++):(p=e,F===0&&L(nn)),p!==e?(te=n,n=lu(y)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function fa(){var n,u,y,p,x,m,P=o*77+44,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=Qe(),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=H,o++):(m=e,F===0&&L(Qt)),m!==e?n=p:(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,u=[],y=yn(),y!==e)for(;y!==e;)u.push(y),y=yn();else u=e;u!==e&&(te=n,u=fi(u)),n=u}return z[P]={nextPos:o,result:n},n}function yn(){var n,u=o*77+45,y=z[u];return y?(o=y.nextPos,y.result):(n=Ti(),n===e&&(wr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(an))),z[u]={nextPos:o,result:n},n)}function Ti(){var n,u,y,p=o*77+46,x=z[p];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&L(za)),u!==e?(hs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&L(ln)),y!==e?n=y:(o=n,n=e)):(o=n,n=e),z[p]={nextPos:o,result:n},n)}function ca(){var n,u,y,p,x,m,P=o*77+47,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===34?(u=Fe,o++):(u=e,F===0&&L(gs)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===34?(m=Fe,o++):(m=e,F===0&&L(gs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ha(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=ci(m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===34?(m=Fe,o++):(m=e,F===0&&L(gs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ha(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=ci(m)):(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===34?(p=Fe,o++):(p=e,F===0&&L(gs)),p!==e?(te=n,n=uu(y)):(o=n,n=e)}else o=n,n=e;if(n===e)if(n=o,t.charCodeAt(o)===39?(u=Ce,o++):(u=e,F===0&&L(un)),u!==e){for(y=[],p=o,x=o,F++,t.charCodeAt(o)===39?(m=Ce,o++):(m=e,F===0&&L(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=pa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=hi(m)):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=o,F++,t.charCodeAt(o)===39?(m=Ce,o++):(m=e,F===0&&L(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=pa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&L(Jt))),m!==e?(te=p,p=hi(m)):(o=p,p=e)):(o=p,p=e);t.charCodeAt(o)===39?(p=Ce,o++):(p=e,F===0&&L(un)),p!==e?(te=n,n=ou(y)):(o=n,n=e)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ha(){var n,u,y=o*77+48,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===ft?(u=ft,o+=2):(u=e,F===0&&L(Ds)),u!==e&&(te=n,u=fu()),n=u,z[y]={nextPos:o,result:n},n)}function pa(){var n,u,y=o*77+49,p=z[y];return p?(o=p.nextPos,p.result):(n=o,t.substr(o,2)===Ke?(u=Ke,o+=2):(u=e,F===0&&L(Ga)),u!==e&&(te=n,u=pi()),n=u,z[y]={nextPos:o,result:n},n)}function Oi(){var n,u=o*77+50,y=z[u];return y?(o=y.nextPos,y.result):(n=va(),n===e&&(n=ga()),z[u]={nextPos:o,result:n},n)}function va(){var n,u,y,p,x,m,P=o*77+51,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),St.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(Ja)),u!==e){if(y=[],zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r)),p!==e)for(;p!==e;)y.push(p),zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(p=At,o++):(p=e,F===0&&L(Gn)),p!==e){if(x=[],zt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&L($r)),m!==e)for(;m!==e;)x.push(m),zt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&L($r));else x=e;x!==e?(te=n,n=cu()):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),zt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L($r)),u!==e)if(t.charCodeAt(o)===46?(y=At,o++):(y=e,F===0&&L(Gn)),y!==e){if(p=[],zt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&L($r)),x!==e)for(;x!==e;)p.push(x),zt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&L($r));else p=e;p!==e?(te=n,n=vi()):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return z[P]={nextPos:o,result:n},n}function ga(){var n,u,y,p,x=o*77+52,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),St.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(Ja)),u!==e){if(y=[],zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r)),p!==e)for(;p!==e;)y.push(p),zt.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L($r));else y=e;y!==e?(te=n,n=hu()):(o=n,n=e)}else o=n,n=e;return n===e&&(n=o,ls.test(t.charAt(o))?(t.charAt(o),o++):F===0&&L(ur),zt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L($r)),u!==e?(te=n,n=pu()):(o=n,n=e)),z[x]={nextPos:o,result:n},n}function da(){var n,u=o*77+53,y=z[u];return y?(o=y.nextPos,y.result):(n=Eu(),n===e&&(n=ya()),z[u]={nextPos:o,result:n},n)}function Eu(){var n,u,y,p,x=o*77+54,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===st?(u=st,o+=4):(u=e,F===0&&L(wl)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=gi()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function ya(){var n,u,y,p,x=o*77+55,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===tt?(u=tt,o+=5):(u=e,F===0&&L(on)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=vu()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function wa(){var n,u,y,p,x=o*77+56,m=z[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===gt?(u=gt,o+=4):(u=e,F===0&&L(ml)),u!==e?(y=o,F++,ht.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Lr)),F--,p===e?y=void 0:(o=y,y=e),y!==e?(te=n,n=di()):(o=n,n=e)):(o=n,n=e),z[x]={nextPos:o,result:n},n)}function br(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+57,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=Qe(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=ea(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=Qe(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=ea(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=H,o++):(x=e,F===0&&L(Qt)),x!==e?(te=n,n=gu(p)):(o=n,n=e)}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function Mu(){var n,u,y,p,x,m,P,C,N,I,q=o*77+58,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=Qe(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=ta(m)}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=Qe(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=ta(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=du(p)):(o=n,n=e)}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function ma(){var n,u,y,p,x,m,P,C=o*77+59,N=z[C];if(N)return o=N.nextPos,N.result;if(n=o,u=ue(),u!==e){for(y=o,p=[],x=l();x!==e;)p.push(x),x=l();if(t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e){for(m=[],P=l();P!==e;)m.push(P),P=l();P=Ze(),P!==e?y=P:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),te=n,n=yu(u,y)}else o=n,n=e;return z[C]={nextPos:o,result:n},n}function Fi(){var n,u,y,p,x,m,P=o*77+60,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=ma(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=ma(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=ma(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);te=n,n=yi(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function it(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e,Ct,_t,Nu=o*77+61,$a=z[Nu];if($a)return o=$a.nextPos,$a.result;if(n=o,t.charCodeAt(o)===64?(u=Mt,o++):(u=e,F===0&&L($l)),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(p=ue(),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=S,o++):(m=e,F===0&&L(dt)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(C=Fi(),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();if(t.charCodeAt(o)===41?(I=E,o++):(I=e,F===0&&L(Ir)),I!==e){for(q=o,G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.charCodeAt(o)===58?(ne=ie,o++):(ne=e,F===0&&L(Xt)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();$e=Ze(),$e!==e?q=$e:(o=q,q=e)}else o=q,q=e;for(q===e&&(q=null),G=[],ne=l();ne!==e;)G.push(ne),ne=l();if(t.charCodeAt(o)===123?(ne=D,o++):(ne=e,F===0&&L(ut)),ne!==e){for(Ie=[],$e=l();$e!==e;)Ie.push($e),$e=l();for($e=Nr(),$e===e&&($e=null),Ct=[],_t=l();_t!==e;)Ct.push(_t),_t=l();t.charCodeAt(o)===125?(_t=H,o++):(_t=e,F===0&&L(Qt)),_t!==e?(te=n,n=wu(y,p,x,C,q,$e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[Nu]={nextPos:o,result:n},n}function Su(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=o*77+62,$e=z[Ie];if($e)return o=$e.nextPos,$e.result;if(n=o,t.substr(o,2)===Gt?(u=Gt,o+=2):(u=e,F===0&&L(Jn)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Fi(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=o,C=[],N=l();N!==e;)C.push(N),N=l();if(t.charCodeAt(o)===58?(N=ie,o++):(N=e,F===0&&L(Xt)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();q=Ze(),q!==e?P=q:(o=P,P=e)}else o=P,P=e;for(P===e&&(P=null),C=[],N=l();N!==e;)C.push(N),N=l();if(t.charCodeAt(o)===123?(N=D,o++):(N=e,F===0&&L(ut)),N!==e){for(I=[],q=l();q!==e;)I.push(q),q=l();for(q=Nr(),q===e&&(q=null),G=[],ne=l();ne!==e;)G.push(ne),ne=l();t.charCodeAt(o)===125?(ne=H,o++):(ne=e,F===0&&L(Qt)),ne!==e?(te=n,n=wi(p,P,q)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[Ie]={nextPos:o,result:n},n}function Es(){var n,u,y,p,x,m,P,C,N,I,q=o*77+63,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.charCodeAt(o)===91?(u=ct,o++):(u=e,F===0&&L(Is)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=rs(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=mi(m)}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=rs(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();for(t.charCodeAt(o)===44?(C=Y,o++):(C=e,F===0&&L(Ut)),C===e&&(C=null),N=[],I=l();I!==e;)N.push(I),I=l();te=x,x=mi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=X,o++):(m=e,F===0&&L(Fs)),m!==e?(te=n,n=mu(p)):(o=n,n=e)}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function hr(){var n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie,$e=o*77+64,Ct=z[$e];if(Ct)return o=Ct.nextPos,Ct.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();if(p=[],x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=rs(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=$i(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(p.push(x),x=o,m=ue(),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.charCodeAt(o)===58?(C=ie,o++):(C=e,F===0&&L(Xt)),C!==e){if(N=[],I=l(),I!==e)for(;I!==e;)N.push(I),I=l();else N=e;if(N!==e)if(I=rs(),I!==e){for(q=[],G=l();G!==e;)q.push(G),G=l();for(t.charCodeAt(o)===44?(G=Y,o++):(G=e,F===0&&L(Ut)),G===e&&(t.charCodeAt(o)===59?(G=Tt,o++):(G=e,F===0&&L(Ls))),G===e&&(G=null),ne=[],Ie=l();Ie!==e;)ne.push(Ie),Ie=l();te=x,x=$i(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=H,o++):(x=e,F===0&&L(Qt)),x!==e?(te=n,n=c(p)):(o=n,n=e)}else o=n,n=e;return z[$e]={nextPos:o,result:n},n}function Ze(){var n,u=o*77+65,y=z[u];return y?(o=y.nextPos,y.result):(n=Ri(),n===e&&(n=Ue()),z[u]={nextPos:o,result:n},n)}function Ri(){var n,u,y,p,x,m,P,C,N,I,q=o*77+66,G=z[q];if(G)return o=G.nextPos,G.result;if(n=o,t.substr(o,2)===Gt?(u=Gt,o+=2):(u=e,F===0&&L(Jn)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=M(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&L(Ir)),m!==e){for(P=[],C=l();C!==e;)P.push(C),C=l();if(t.substr(o,2)===ce?(C=ce,o+=2):(C=e,F===0&&L(vs)),C!==e){for(N=[],I=l();I!==e;)N.push(I),I=l();I=Ze(),I!==e?(te=n,n=re(p,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return z[q]={nextPos:o,result:n},n}function M(){var n,u,y,p,x,m,P=o*77+67,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=Ze(),u!==e){for(y=[],p=o,x=d(),x!==e?(m=Ze(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,x=d(),x!==e?(m=Ze(),m!==e?p=m:(o=p,p=e)):(o=p,p=e);te=n,n=Cs(u,y)}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function Ue(){var n,u,y,p,x,m,P,C,N=o*77+68,I=z[N];if(I)return o=I.nextPos,I.result;if(n=o,u=ue(),u!==e){for(y=[],p=$();p!==e;)y.push(p),p=$();if(t.charCodeAt(o)===60?(p=vt,o++):(p=e,F===0&&L(Wn)),p!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ze(),m!==e){for(P=[],C=$();C!==e;)P.push(C),C=$();t.charCodeAt(o)===62?(C=Cr,o++):(C=e,F===0&&L(Ka)),C!==e?(te=n,n=xr(u,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return n===e&&(n=o,u=ue(),u!==e&&(te=n,u=fn(u)),n=u),z[N]={nextPos:o,result:n},n}function ue(){var n,u,y,p,x=o*77+69,m=z[x];if(m)return o=m.nextPos,m.result;if(n=o,Sn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&L(xl)),u!==e){for(y=[],mr.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Qa));p!==e;)y.push(p),mr.test(t.charAt(o))?(p=t.charAt(o),o++):(p=e,F===0&&L(Qa));te=n,n=i()}else o=n,n=e;return z[x]={nextPos:o,result:n},n}function f(){var n,u,y,p,x,m,P=o*77+70,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,u=ue(),u!==e){for(y=[],p=o,t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e?(m=ue(),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);p!==e;)y.push(p),p=o,t.charCodeAt(o)===58?(x=ie,o++):(x=e,F===0&&L(Xt)),x!==e?(m=ue(),m!==e?(x=[x,m],p=x):(o=p,p=e)):(o=p,p=e);te=n,n=T()}else o=n,n=e;return z[P]={nextPos:o,result:n},n}function d(){var n,u,y,p,x,m=o*77+71,P=z[m];if(P)return o=P.nextPos,P.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&L(Ut)),y!==e){for(p=[],x=l();x!==e;)p.push(x),x=l();u=[u,y,p],n=u}else o=n,n=e;if(n===e)if(n=[],u=l(),u!==e)for(;u!==e;)n.push(u),u=l();else n=e;return z[m]={nextPos:o,result:n},n}function A(){var n,u,y,p,x,m,P=o*77+72,C=z[P];if(C)return o=C.nextPos,C.result;if(n=o,t.charCodeAt(o)===123?(u=D,o++):(u=e,F===0&&L(ut)),u!==e){for(y=[],p=l();p!==e;)y.push(p),p=l();for(p=Nr(),p===e&&(p=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=H,o++):(m=e,F===0&&L(Qt)),m!==e?(te=n,n=es(p)):(o=n,n=e)}else o=n,n=e;return n===e&&(n=ks()),z[P]={nextPos:o,result:n},n}function w(){var n,u=o*77+73,y=z[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===kt?(n=kt,o+=2):(n=e,F===0&&L(bl)),n===e&&(nl.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Al))),z[u]={nextPos:o,result:n},n)}function a(){var n,u,y=o*77+74,p=z[y];return p?(o=p.nextPos,p.result):(n=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&L(Jt)),F--,u===e?n=void 0:(o=n,n=e),n===e&&(n=w()),z[y]={nextPos:o,result:n},n)}function l(){var n,u=o*77+75,y=z[u];return y?(o=y.nextPos,y.result):(al.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Za)),z[u]={nextPos:o,result:n},n)}function $(){var n,u=o*77+76,y=z[u];return y?(o=y.nextPos,y.result):(cr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&L(Cl)),z[u]={nextPos:o,result:n},n)}function v(n,u,y){const p={type:n};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(p[m]=u[m]);const x=U();return p.loc={start:x.start.offset,end:x.end.offset-1},p}if(Us=g(),Us!==e&&o===t.length)return Us;throw Us!==e&&o<t.length&&L(B()),ra(Nt,j<t.length?t.charAt(j):null,j<t.length?cn(j,j+1):cn(j,j))}const $P=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function xP(t){return $P.includes(t.type)}function Y0(t){return"chain"in t&&t.chain!==null}function bP(t,r,e){return{type:"call",target:t,args:r,loc:e}}function AP(t,r,e){return{type:"index",target:t,index:r,loc:e}}function CP(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function jt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=jt(e.expr,r);break}case"return":{e.expr=jt(e.expr,r);break}case"each":{e.items=jt(e.items,r),e.for=jt(e.for,r);break}case"for":{e.from!=null&&(e.from=jt(e.from,r)),e.to!=null&&(e.to=jt(e.to,r)),e.times!=null&&(e.times=jt(e.times,r)),e.for=jt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=jt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=jt(e.expr,r),e.dest=jt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=jt(e.operands[s],r);break}case"not":{e.expr=jt(e.expr,r);break}case"if":{e.cond=jt(e.cond,r),e.then=jt(e.then,r);for(const s of e.elseif)s.cond=jt(s.cond,r),s.then=jt(s.then,r);e.else!=null&&(e.else=jt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=jt(e.children[s],r);break}case"match":{e.about=jt(e.about,r);for(const s of e.qs)s.q=jt(s.q,r),s.a=jt(s.a,r);e.default!=null&&(e.default=jt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=jt(e.statements[s],r);break}case"exists":{e.identifier=jt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=jt(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],jt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=jt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=jt(e.args[s],r);break}case"indexChain":{e.index=jt(e.index,r);break}case"call":{e.target=jt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=jt(e.args[s],r);break}case"index":{e.target=jt(e.target,r),e.index=jt(e.index,r);break}case"prop":{e.target=jt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=jt(e.members[s],r);break}case"or":case"and":{e.left=jt(e.left,r),e.right=jt(e.right,r);break}}if(Y0(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=jt(e.chain[s],r);return e}const hv=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function pv(t){throw new Pf(`Reserved word "${t}" cannot be used as variable name.`)}function _P(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{hv.includes(t.name)&&pv(t.name);break}case"meta":{t.name!=null&&hv.includes(t.name)&&pv(t.name);break}case"fn":{for(const r of t.args)hv.includes(r.name)&&pv(r.name);break}}return t}function PP(t){for(const r of t)jt(r,_P);return t}function zy(t){return{type:"simple",name:t}}function kP(t,r){return{type:"generic",name:t,inners:r}}function EP(t,r){return{type:"fn",args:t,result:r}}function Fh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Fh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Fh(s)).join(", "),e=Fh(t.result);return`@(${r}) { ${e} }`}}}function uc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return zy(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=uc(t.inner):r=zy("any"),kP(t.name,[r])}}throw new Pf(`Unknown type: '${Fh(t)}'`)}else{const r=t.args.map(e=>uc(e));return EP(r,uc(t.result))}}function MP(t){switch(t.type){case"def":{t.varType!=null&&uc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&uc(r.argType);t.retType!=null&&uc(t.retType);break}}return t}function SP(t){for(const r of t)jt(r,MP);return t}function Rh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Rh(s.expr.children)),r.push(s);else{if(e.length>0)throw new Pf("invalid attribute.");switch(s.type){case"fn":{s.children=Rh(s.children);break}case"block":{s.statements=Rh(s.statements);break}}r.push(s)}if(e.length>0)throw new Pf("invalid attribute.");return r}function NP(t){if(xP(t)&&Y0(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=bP(s,h.args,h.loc);break}case"indexChain":{s=AP(s,h.index,h.loc);break}case"propChain":{s=CP(s,h.name,h.loc);break}}return s}return t}function TP(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],NP);return t}function Ih(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function em(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Ih(t,r,e);{const{left:s,right:h,info:g}=t;return Ih(s,em(h,r,e),g)}}function sf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[sf(t.left),sf(t.right)]}}const OP={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:sf(t.left),right:sf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:sf(t.left),right:sf(t.right)}),priority:3}};function FP(t){const r=t.operators.map(s=>{const h=OP[s];if(h==null)throw new Pf(`No such operator: ${s}.`);return h});let e=Ih(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=em(e,t.operands[2+s],r[1+s]);return sf(e)}function RP(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],e=>e.type==="infix"?FP(e):e);return t}var Qu;let IP=(Qu=class{constructor(){ve(this,"plugins");this.plugins={validate:[PP,SP],transform:[Rh,TP,RP]}}static parse(r){return Qu.instance==null&&(Qu.instance=new Qu),Qu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Vy(r,{startRule:"Preprocess"});e=Vy(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new Pf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new Pf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},ve(Qu,"instance"),Qu);const jP="0.16.0",DP={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let hg=[],Cc=null;function LP(t){return hg=IP.parse(t),JSON.stringify(hg,null,"	")}async function UP(t){Cc==null||Cc.abort(),Cc=new Vn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:og(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:og(e.val,!0),print:!1});break}}});try{await Cc.exec(hg)}catch(r){t.err(r)}}const BP=Object.freeze(Object.defineProperty({__proto__:null,exec:UP,parse:LP,samples:DP,version:jP},Symbol.toStringTag,{value:"Module"}));function jh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(e){return typeof e}:jh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(t)}function tm(t,r,e){var s=e.value;if(typeof s!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(jh(s)));var h=!1;return{configurable:!0,get:function(){if(h||this===t.prototype||this.hasOwnProperty(r)||typeof s!="function")return s;var b=s.bind(this);return h=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return b},set:function(k){s=k,delete this[r]}}),h=!1,b},set:function(b){s=b}}}function HP(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var s=Object.getOwnPropertyDescriptor(t.prototype,e);typeof s.value=="function"&&Object.defineProperty(t.prototype,e,tm(t,e,s))}}),t}function Wt(){return arguments.length===1?HP.apply(void 0,arguments):tm.apply(void 0,arguments)}let rm=class sm extends Error{constructor(e,s){super(e);ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,sm)}},kf=class extends rm{constructor(r,e){super(r,e)}},Qr=class extends rm{constructor(r,e){super(r,e)}},qP=class extends Qr{constructor(r,e){super(r,e)}};var Rf=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};let qo=class nm{constructor(r=[],e,s){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new nm(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r);return this.log("read",{var:r,val:s}),s}throw new Qr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Qr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Qr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Rf([Wt],qo.prototype,"log",null);Rf([Wt],qo.prototype,"onUpdated",null);Rf([Wt],qo.prototype,"createChildScope",null);Rf([Wt],qo.prototype,"get",null);Rf([Wt],qo.prototype,"getAll",null);Rf([Wt],qo.prototype,"add",null);Rf([Wt],qo.prototype,"assign",null);let yh;const VP=new Uint8Array(16);function zP(){if(!yh&&(yh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yh(VP)}const An=[];for(let t=0;t<256;++t)An.push((t+256).toString(16).slice(1));function KP(t,r=0){return(An[t[r+0]]+An[t[r+1]]+An[t[r+2]]+An[t[r+3]]+"-"+An[t[r+4]]+An[t[r+5]]+"-"+An[t[r+6]]+An[t[r+7]]+"-"+An[t[r+8]]+An[t[r+9]]+"-"+An[t[r+10]]+An[t[r+11]]+An[t[r+12]]+An[t[r+13]]+An[t[r+14]]+An[t[r+15]]).toLowerCase()}const WP=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ky={randomUUID:WP};function GP(t,r,e){if(Ky.randomUUID&&!r&&!t)return Ky.randomUUID();t=t||{};const s=t.random||(t.rng||zP)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,KP(s)}const Or={type:"null"},Yi={type:"bool",value:!0},Li={type:"bool",value:!1},Xe=t=>({type:"num",value:t}),Gr=t=>({type:"str",value:t}),oc=t=>({type:"bool",value:t}),nd=t=>({type:"obj",value:t}),On=t=>({type:"arr",value:t}),JP=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Me=t=>({type:"fn",native:t}),QP=t=>({type:"return",value:t}),ZP=()=>({type:"break",value:null}),XP=()=>({type:"continue",value:null}),YP=t=>t.type==="return"?t.value:t;function qi(t){if(t==null)throw new Qr("Expect anything, but got nothing.")}function Pa(t){if(t==null)throw new Qr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Qr(`Expect boolean, but got ${t.type}.`)}function To(t){if(t==null)throw new Qr("Expect function, but got nothing.");if(t.type!=="fn")throw new Qr(`Expect function, but got ${t.type}.`)}function zs(t){if(t==null)throw new Qr("Expect string, but got nothing.");if(t.type!=="str")throw new Qr(`Expect string, but got ${t.type}.`)}function We(t){if(t==null)throw new Qr("Expect number, but got nothing.");if(t.type!=="num")throw new Qr(`Expect number, but got ${t.type}.`)}function Ao(t){if(t==null)throw new Qr("Expect object, but got nothing.");if(t.type!=="obj")throw new Qr(`Expect object, but got ${t.type}.`)}function fc(t){if(t==null)throw new Qr("Expect array, but got nothing.");if(t.type!=="arr")throw new Qr(`Expect array, but got ${t.type}.`)}function e3(t){return t.type==="str"}function t3(t){return t.type==="num"}function r3(t){return t.type==="obj"}function s3(t){return t.type==="arr"}function pg(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function vg(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>vg(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function gg(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>gg(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=gg(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function dg(t){if(t===null)return Or;if(typeof t=="boolean")return oc(t);if(typeof t=="string")return Gr(t);if(typeof t=="number")return Xe(t);if(Array.isArray(t))return On(t.map(r=>dg(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,dg(s));return nd(r)}return Or}const n3={help:Gr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Gr("0.14.1"),"Core:ai":Gr("kawaii"),"Core:not":Me(([t])=>(Pa(t),t.value?Li:Yi)),"Core:eq":Me(([t,r])=>(qi(t),qi(r),pg(t,r)?Yi:Li)),"Core:neq":Me(([t,r])=>(qi(t),qi(r),pg(t,r)?Li:Yi)),"Core:and":Me(([t,r])=>(Pa(t),t.value?(Pa(r),r.value?Yi:Li):Li)),"Core:or":Me(([t,r])=>(Pa(t),t.value?Yi:(Pa(r),r.value?Yi:Li))),"Core:add":Me(([t,r])=>(We(t),We(r),Xe(t.value+r.value))),"Core:sub":Me(([t,r])=>(We(t),We(r),Xe(t.value-r.value))),"Core:mul":Me(([t,r])=>(We(t),We(r),Xe(t.value*r.value))),"Core:pow":Me(([t,r])=>{We(t),We(r);const e=t.value**r.value;if(isNaN(e))throw new Qr("Invalid operation.");return Xe(e)}),"Core:div":Me(([t,r])=>{We(t),We(r);const e=t.value/r.value;if(isNaN(e))throw new Qr("Invalid operation.");return Xe(e)}),"Core:mod":Me(([t,r])=>(We(t),We(r),Xe(t.value%r.value))),"Core:gt":Me(([t,r])=>(We(t),We(r),t.value>r.value?Yi:Li)),"Core:lt":Me(([t,r])=>(We(t),We(r),t.value<r.value?Yi:Li)),"Core:gteq":Me(([t,r])=>(We(t),We(r),t.value>=r.value?Yi:Li)),"Core:lteq":Me(([t,r])=>(We(t),We(r),t.value<=r.value?Yi:Li)),"Core:type":Me(([t])=>(qi(t),Gr(t.type))),"Core:to_str":Me(([t])=>(qi(t),t.type==="str"?t:t.type==="num"?Gr(t.value.toString()):Gr("?"))),"Core:range":Me(([t,r])=>(We(t),We(r),t.value<r.value?On(Array.from({length:r.value-t.value+1},(e,s)=>Xe(s+t.value))):t.value>r.value?On(Array.from({length:t.value-r.value+1},(e,s)=>Xe(t.value-s))):On([t]))),"Util:uuid":Me(()=>Gr(GP())),"Json:stringify":Me(([t])=>(qi(t),Gr(JSON.stringify(gg(t))))),"Json:parse":Me(([t])=>(zs(t),dg(JSON.parse(t.value)))),"Json:parsable":Me(([t])=>{zs(t);try{JSON.parse(t.value)}catch{return oc(!1)}return oc(!0)}),"Date:now":Me(()=>Xe(Date.now())),"Date:year":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Me(([t])=>(t&&We(t),Xe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Me(([t])=>(zs(t),Xe(new Date(t.value).getTime()))),"Math:Infinity":Xe(1/0),"Math:E":Xe(Math.E),"Math:LN2":Xe(Math.LN2),"Math:LN10":Xe(Math.LN10),"Math:LOG2E":Xe(Math.LOG2E),"Math:LOG10E":Xe(Math.LOG10E),"Math:PI":Xe(Math.PI),"Math:SQRT1_2":Xe(Math.SQRT1_2),"Math:SQRT2":Xe(Math.SQRT2),"Math:abs":Me(([t])=>(We(t),Xe(Math.abs(t.value)))),"Math:acos":Me(([t])=>(We(t),Xe(Math.acos(t.value)))),"Math:acosh":Me(([t])=>(We(t),Xe(Math.acosh(t.value)))),"Math:asin":Me(([t])=>(We(t),Xe(Math.asin(t.value)))),"Math:asinh":Me(([t])=>(We(t),Xe(Math.asinh(t.value)))),"Math:atan":Me(([t])=>(We(t),Xe(Math.atan(t.value)))),"Math:atanh":Me(([t])=>(We(t),Xe(Math.atanh(t.value)))),"Math:atan2":Me(([t,r])=>(We(t),We(r),Xe(Math.atan2(t.value,r.value)))),"Math:cbrt":Me(([t])=>(We(t),Xe(Math.cbrt(t.value)))),"Math:ceil":Me(([t])=>(We(t),Xe(Math.ceil(t.value)))),"Math:clz32":Me(([t])=>(We(t),Xe(Math.clz32(t.value)))),"Math:cos":Me(([t])=>(We(t),Xe(Math.cos(t.value)))),"Math:cosh":Me(([t])=>(We(t),Xe(Math.cosh(t.value)))),"Math:exp":Me(([t])=>(We(t),Xe(Math.exp(t.value)))),"Math:expm1":Me(([t])=>(We(t),Xe(Math.expm1(t.value)))),"Math:floor":Me(([t])=>(We(t),Xe(Math.floor(t.value)))),"Math:fround":Me(([t])=>(We(t),Xe(Math.fround(t.value)))),"Math:hypot":Me(([t])=>{fc(t);const r=[];for(const e of t.value)We(e),r.push(e.value);return Xe(Math.hypot(...r))}),"Math:imul":Me(([t,r])=>(We(t),We(r),Xe(Math.imul(t.value,r.value)))),"Math:log":Me(([t])=>(We(t),Xe(Math.log(t.value)))),"Math:log1p":Me(([t])=>(We(t),Xe(Math.log1p(t.value)))),"Math:log10":Me(([t])=>(We(t),Xe(Math.log10(t.value)))),"Math:log2":Me(([t])=>(We(t),Xe(Math.log2(t.value)))),"Math:max":Me(([t,r])=>(We(t),We(r),Xe(Math.max(t.value,r.value)))),"Math:min":Me(([t,r])=>(We(t),We(r),Xe(Math.min(t.value,r.value)))),"Math:pow":Me(([t,r])=>(We(t),We(r),Xe(Math.pow(t.value,r.value)))),"Math:round":Me(([t])=>(We(t),Xe(Math.round(t.value)))),"Math:sign":Me(([t])=>(We(t),Xe(Math.sign(t.value)))),"Math:sin":Me(([t])=>(We(t),Xe(Math.sin(t.value)))),"Math:sinh":Me(([t])=>(We(t),Xe(Math.sinh(t.value)))),"Math:sqrt":Me(([t])=>{We(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Qr("Invalid operation.");return Xe(r)}),"Math:tan":Me(([t])=>(We(t),Xe(Math.tan(t.value)))),"Math:tanh":Me(([t])=>(We(t),Xe(Math.tanh(t.value)))),"Math:trunc":Me(([t])=>(We(t),Xe(Math.trunc(t.value)))),"Math:rnd":Me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Xe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Xe(Math.random())),"Math:gen_rng":Me(([t])=>{if(qi(t),t.type!=="num"&&t.type!=="str")return Or;const r=Uo(t.value.toString());return Me(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Xe(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Xe(r()))}),"Num:to_hex":Me(([t])=>(We(t),Gr(t.value.toString(16)))),"Num:from_hex":Me(([t])=>(zs(t),Xe(parseInt(t.value,16)))),"Str:lf":Gr(`
`),"Str:lt":Me(([t,r])=>(zs(t),zs(r),t.value<r.value?Xe(-1):t.value===r.value?Xe(0):Xe(1))),"Str:gt":Me(([t,r])=>(zs(t),zs(r),t.value>r.value?Xe(-1):t.value===r.value?Xe(0):Xe(1))),"Obj:keys":Me(([t])=>(Ao(t),On(Array.from(t.value.keys()).map(r=>Gr(r))))),"Obj:vals":Me(([t])=>(Ao(t),On(Array.from(t.value.values())))),"Obj:kvs":Me(([t])=>(Ao(t),On(Array.from(t.value.entries()).map(([r,e])=>On([Gr(r),e]))))),"Obj:get":Me(([t,r])=>(Ao(t),zs(r),t.value.get(r.value)??Or)),"Obj:set":Me(([t,r,e])=>(Ao(t),zs(r),qi(e),t.value.set(r.value,e),Or)),"Obj:has":Me(([t,r])=>(Ao(t),zs(r),oc(t.value.has(r.value)))),"Obj:copy":Me(([t])=>(Ao(t),nd(new Map(t.value)))),"Async:interval":Me(async([t,r,e],s)=>{We(t),To(r),e&&(Pa(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.call(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),Me(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":Me(async([t,r],e)=>{We(t),To(r);const s=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),Me(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},Df={num:{to_str:t=>Me(async(r,e)=>Gr(t.value.toString()))},str:{to_num:t=>Me(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Or:Xe(s)}),len:t=>Xe(Tf(t.value)),replace:t=>Me(async([r,e],s)=>(zs(r),zs(e),Gr(t.value.split(r.value).join(e.value)))),index_of:t=>Me(async([r],e)=>(zs(r),Xe(Ff(t.value,r.value)))),incl:t=>Me(async([r],e)=>(zs(r),t.value.includes(r.value)?Yi:Li)),trim:t=>Me(async(r,e)=>Gr(t.value.trim())),upper:t=>Me(async(r,e)=>Gr(t.value.toUpperCase())),lower:t=>Me(async(r,e)=>Gr(t.value.toLowerCase())),split:t=>Me(async([r],e)=>(r&&zs(r),On(r?t.value.split(r?r.value:"").map(s=>Gr(s)):Zs(t.value).map(s=>Gr(s))))),slice:t=>Me(async([r,e],s)=>(We(r),We(e),Gr(Of(t.value,r.value,e.value)))),pick:t=>Me(async([r],e)=>{We(r);const h=Zs(t.value)[r.value];return h?Gr(h):Or})},arr:{len:t=>Xe(t.value.length),push:t=>Me(async([r],e)=>(qi(r),t.value.push(r),t)),unshift:t=>Me(async([r],e)=>(qi(r),t.value.unshift(r),t)),pop:t=>Me(async(r,e)=>t.value.pop()??Or),shift:t=>Me(async(r,e)=>t.value.shift()??Or),concat:t=>Me(async([r],e)=>(fc(r),On(t.value.concat(r.value)))),slice:t=>Me(async([r,e],s)=>(We(r),We(e),On(t.value.slice(r.value,e.value)))),join:t=>Me(async([r],e)=>(r&&zs(r),Gr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>Me(async([r],e)=>{To(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,Xe(g)]));return On(await Promise.all(s))}),filter:t=>Me(async([r],e)=>{To(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,Xe(h)]);Pa(b),b.value&&s.push(g)}return On(s)}),reduce:t=>Me(async([r,e],s)=>{To(r);const h=e!=null;let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,Xe(b)])}return g}),find:t=>Me(async([r],e)=>{To(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,Xe(s)]);if(Pa(g),g.value)return h}return Or}),incl:t=>Me(async([r],e)=>(qi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Li:(h=>h.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Yi:Li)),reverse:t=>Me(async(r,e)=>(t.value.reverse(),Or)),copy:t=>Me(async(r,e)=>On([...t.value])),sort:t=>Me(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=await s(g.slice(0,_),b),S=await s(g.slice(_),b);return h(k,S,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);We(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return To(r),fc(t),t.value=await s(t.value,r),t})}};var Gi=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const am=300,a3=am-1;let Ua=class{constructor(r,e){ve(this,"vars");ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);this.opts=e??{};const s={print:Me(([h])=>{qi(h),this.opts.out&&this.opts.out(h)}),readline:Me(async h=>{const g=h[0];if(zs(g),this.opts.in==null)return Or;const b=await this.opts.in(g.value);return Gr(b)})};this.vars={...r,...n3,...s},this.scope=new qo([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{const h=await this._eval(s.expr,e);e.add(s.name,h),this.scope.add(r.name+":"+s.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Or;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],e[g]);const h=r.scope.createChildScope(s);return YP(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Or;if(this.stepCount%am===a3&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Qr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);To(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(Pa(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(Pa(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Or}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(pg(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Or}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return Or}case"for":{if(r.times){const s=await this._eval(r.times,e);We(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);We(s),We(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,Xe(g)]])));if(b.type==="break")break;if(b.type==="return")return b}}return Or}case"each":{const s=await this._eval(r.items,e);fc(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(g.type==="break")break;if(g.type==="return")return g}return Or}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,s),Or}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),Or}case"addAssign":{const s=await this._eval(r.dest,e);We(s);const h=await this._eval(r.expr,e);return We(h),await this.assign(e,r.dest,Xe(s.value+h.value)),Or}case"subAssign":{const s=await this._eval(r.dest,e);We(s);const h=await this._eval(r.expr,e);return We(h),await this.assign(e,r.dest,Xe(s.value-h.value)),Or}case"null":return Or;case"bool":return oc(r.value);case"num":return Xe(r.value);case"str":return Gr(r.value);case"arr":return On(await Promise.all(r.value.map(async s=>await this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return nd(s)}case"prop":{const s=await this._eval(r.target,e);if(r3(s))return s.value.has(r.name)?s.value.get(r.name):Or;if(t3(s)){if(Object.hasOwn(Df.num,r.name))return Df.num[r.name](s);throw new Qr(`No such prop (${r.name}) in ${s.type}.`)}else if(e3(s)){if(Object.hasOwn(Df.str,r.name))return Df.str[r.name](s);throw new Qr(`No such prop (${r.name}) in ${s.type}.`)}else if(s3(s)){if(Object.hasOwn(Df.arr,r.name))return Df.arr[r.name](s);throw new Qr(`No such prop (${r.name}) in ${s.type}.`)}else throw new Qr(`Cannot read prop (${r.name}) of ${s.type}.`)}case"index":{const s=await this._eval(r.target,e);fc(s);const h=await this._eval(r.index,e);We(h);const g=s.value[h.value];if(g===void 0)throw new qP(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}case"not":{const s=await this._eval(r.expr,e);return Pa(s),oc(!s.value)}case"fn":return JP(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);let b="";g.type==="str"?b=g.value:g.type==="num"&&(b=g.value.toString()),s+=b}return Gr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),QP(s)}case"break":return this.log("block:break",{scope:e.name}),ZP();case"continue":return this.log("block:continue",{scope:e.name}),XP();case"ns":return Or;case"meta":return Or;case"and":{const s=await this._eval(r.left,e);if(Pa(s),s.value){const h=await this._eval(r.right,e);return Pa(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(Pa(s),s.value)return s;{const h=await this._eval(r.right,e);return Pa(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=Or;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r);fc(h);const g=await this._eval(e.index,r);We(g),h.value[g.value]=s}else if(e.type==="prop"){const h=await this._eval(e.target,r);Ao(h),h.value.set(e.name,s)}else throw new Qr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Gi([Wt],Ua.prototype,"exec",null);Gi([Wt],Ua.prototype,"execFn",null);Gi([Wt],Ua.prototype,"log",null);Gi([Wt],Ua.prototype,"collectNs",null);Gi([Wt],Ua.prototype,"collectNsMember",null);Gi([Wt],Ua.prototype,"_fn",null);Gi([Wt],Ua.prototype,"_eval",null);Gi([Wt],Ua.prototype,"_run",null);Gi([Wt],Ua.prototype,"registerAbortHandler",null);Gi([Wt],Ua.prototype,"unregisterAbortHandler",null);Gi([Wt],Ua.prototype,"abort",null);Gi([Wt],Ua.prototype,"assign",null);Gi([Wt],Ua,"collectMetadata",null);function i3(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function wf(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,wf.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}i3(wf,Error);function vv(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}wf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=vv("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+vv("",h.column-1," ")+vv("",O,"^")}else r+=`
 at `+b}return r};wf.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function Wy(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:L,Main:hn},g=L,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="<",Cr=">",qt="+",_r="-",Vt="*",ye="^",qe="/",Te="%",et="!",ct="[",At=".",J="if",Z="elif",oe="else",Pe="match",ce="=>",Ee="eval",De="`",Oe='"',Fe="'",Ce='\\"',ft="\\'",Ke="true",st="false",tt="null",gt=";",Tt="@",Mt="@(",Gt=`\r
`,kt=/^[A-Z0-9_:]/i,ht=/^[^`{]/,wr=/^[{}`]/,hs=/^[+\-]/,ls=/^[1-9]/,St=/^[0-9]/,zt=/^[A-Z_]/i,Sn=/^[A-Z0-9_]/i,mr=/^[\r\n]/,nl=/^[ \t\r\n]/,al=/^[ \t]/,cr=$u(),Jt=he("//",!1),Xr=he("/*",!1),zn=he("*/",!1),Ot=he("(",!1),dt=he(")",!1),Ir=he("::",!1),ar=he("{",!1),ut=he("}",!1),Qt=he("###",!1),bs=he("let",!1),Zt=he(":",!1),Xt=he("=",!1),Yr=he("var",!1),Ha=he("<:",!1),jr=he("#[",!1),ps=he("]",!1),Fs=he("each",!1),yt=he(",",!1),Ut=he("for",!1),Ys=he("return",!1),Dr=U([["A","Z"],["0","9"],"_",":"],!1,!0),Lr=he("loop",!1),il=he("break",!1),qa=he("continue",!1),ll=he("+=",!1),ul=he("-=",!1),Va=he("\\",!1),za=he("||",!1),ol=he("&&",!1),fl=he("==",!1),cl=he("!=",!1),hl=he("<=",!1),Kn=he(">=",!1),en=he("<",!1),Wn=he(">",!1),Ka=he("+",!1),pl=he("-",!1),Wa=he("*",!1),Rs=he("^",!1),vl=he("/",!1),gl=he("%",!1),dl=he("!",!1),As=he("[",!1),Is=he(".",!1),Gn=he("if",!1),tn=he("elif",!1),rn=he("else",!1),yl=he("match",!1),sn=he("=>",!1),vs=he("eval",!1),js=he("`",!1),Sr=U(["`","{"],!0,!1),nn=U(["{","}","`"],!1,!1),an=he('"',!1),ln=he("'",!1),gs=he('\\"',!1),un=he("\\'",!1),Ds=U(["+","-"],!1,!1),Ga=U([["1","9"]],!1,!1),ur=U([["0","9"]],!1,!1),Ja=he("true",!1),$r=he("false",!1),wl=he("null",!1),on=he(";",!1),ml=he("@",!1),Ls=he("@(",!1),$l=U([["A","Z"],"_"],!1,!0),Jn=U([["A","Z"],["0","9"],"_"],!1,!0),xl=he(`\r
`,!1),Qa=U(["\r",`
`],!1,!1),bl=U([" ","	","\r",`
`],!1,!1),Al=U([" ","	"],!1,!1),Za=function(a){return a.join("")},Cl=function(){return F()},Xa=function(){return F()},_l=function(){return""},Ya=function(){return""},Pl=function(a){return a??[]},ei=function(a,l){return l},kl=function(a,l){return[a,...l]},Qn=function(a,l){return l},El=function(a,l){return[a,...l]},Zn=function(a,l){return l},Ml=function(a,l){return[a,...l]},ti=function(a){return a},Sl=function(a,l){return w("ns",{name:a,members:l})},Nl=function(a,l){return w("meta",{name:a,value:l})},Tl=function(a){return w("meta",{name:null,value:a})},Ol=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Fl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Rl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Il=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},jl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Dl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ll=function(a,l){return l},Ul=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},Bl=function(a,l){return l},Hl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},ql=function(a,l){return w("for",{times:a,for:l})},ri=function(a,l){return w("for",{times:a,for:l})},Vl=function(a){return w("return",{expr:a})},zl=function(a){return w("loop",{statements:a})},Kl=function(){return w("break",{})},Wl=function(){return w("continue",{})},Gl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Xn=function(a,l,$){return{op:l,term:$}},Jl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},si=function(){return F()},Ql=function(a){return w("not",{expr:a})},Zl=function(a,l){return{...a,chain:l}},Xl=function(a){return w("callChain",{args:a??[]})},ni=function(a,l){return l},Yl=function(a,l){return[a,...l]},Yn=function(a){return w("indexChain",{index:a})},eu=function(a){return w("propChain",{name:a})},tu=function(a,l,$,v){return w("if",{cond:a,then:l,elseif:$??[],else:v})},ru=function(a,l){return[a,...l]},su=function(a,l){return{cond:a,then:l}},nu=function(a){return a},ai=function(a,l,$){return{q:l,a:$}},ii=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},li=function(a){return w("block",{statements:a})},ui=function(a){return w("identifier",{name:a})},au=function(a){return w("tmpl",{tmpl:a})},iu=function(a){return a.join("")},oi=function(a){return a},lu=function(a){return w("str",{value:a.join("")})},fi=function(a){return a},ci=function(a){return w("str",{value:a.join("")})},uu=function(){return'"'},hi=function(){return"'"},ou=function(){return w("num",{value:parseFloat(F())})},fu=function(){return w("num",{value:parseFloat(F())})},pi=function(){return w("num",{value:parseInt(F(),10)})},cu=function(){return w("num",{value:parseInt(F(),10)})},vi=function(){return w("bool",{value:!0})},hu=function(){return w("bool",{value:!1})},pu=function(){return w("null",{})},gi=function(a,l){return{k:a,v:l}},vu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},di=function(a){return a},ea=function(a){return w("arr",{value:a})},gu=function(a,l){return{name:a,argType:l}},ta=function(a,l){return[a,...l]},du=function(a,l,$,v,n,u){return(a.length>0||$.length>0)&&Us("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:v??[],retType:n},u??[]),mut:!1,attr:[]})},yu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},yi=function(a){return a},wu=function(a){return w("arr",{value:a})},wi=function(a,l){return{k:a,v:l}},mi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},mu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},$i=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},re=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},xr=function(){return F()},fn=function(a){return w("block",{statements:a??[]})},i=0,T=0,es=[{line:1,column:1}],o=0,te=[],R=0,j={},Nt;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function F(){return t.substring(T,i)}function z(){return Bs(T,i)}function Us(a,l){throw l=l!==void 0?l:Bs(T,i),xi(a,l)}function he(a,l){return{type:"literal",text:a,ignoreCase:l}}function U(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function $u(){return{type:"any"}}function me(){return{type:"end"}}function or(a){var l=es[a],$;if(l)return l;for($=a-1;!es[$];)$--;for(l=es[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return es[a]=l,l}function Bs(a,l,$){var v=or(a),n=or(l),u={source:s,start:{offset:a,line:v.line,column:v.column},end:{offset:l,line:n.line,column:n.column}};return u}function B(a){i<o||(i>o&&(o=i,te=[]),te.push(a))}function xi(a,l){return new wf(a,null,null,l)}function cn(a,l,$){return new wf(wf.buildMessage(a,l),a,l,$)}function L(){var a,l,$,v=i*76+0,n=j[v];if(n)return i=n.nextPos,n.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return T=a,l=Za(l),a=l,j[v]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,v=j[$];return v?(i=v.nextPos,v.result):(a=i,l=gn(),l!==e&&(T=a,l=Cl()),a=l,a===e&&(a=i,l=dn(),l!==e&&(T=a,l=Xa()),a=l,a===e&&(a=ra(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,R===0&&B(cr))))),j[$]={nextPos:i,result:a},a)}function ra(){var a,l,$,v,n,u,y=i*76+2,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.substr(i,2)===b?(l=b,i+=2):(l=e,R===0&&B(Jt)),l!==e){for($=[],v=i,n=i,R++,u=f(),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,u=f(),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);T=a,a=_l()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,R===0&&B(Xr)),l!==e){for($=[],v=i,n=i,R++,t.substr(i,2)===k?(u=k,i+=2):(u=e,R===0&&B(zn)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.substr(i,2)===k?(u=k,i+=2):(u=e,R===0&&B(zn)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);t.substr(i,2)===k?(v=k,i+=2):(v=e,R===0&&B(zn)),v!==e?(T=a,a=Ya()):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function hn(){var a,l,$,v,n,u=i*76+3,y=j[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=d();$!==e;)l.push($),$=d();for($=Ps(),$===e&&($=null),v=[],n=d();n!==e;)v.push(n),n=d();return T=a,a=Pl($),j[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,v,n,u,y,p,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=pn(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=pn(),p!==e?(T=v,v=ei(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=pn(),p!==e?(T=v,v=ei(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=kl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function at(){var a,l,$,v,n,u,y,p,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ur(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ur(),p!==e?(T=v,v=Qn(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ur(),p!==e?(T=v,v=Qn(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=El(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ts(){var a,l,$,v,n,u,y,p,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Nr(),p!==e?(T=v,v=Zn(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Nr(),p!==e?(T=v,v=Zn(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=Ml(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function pn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Hs(),a===e&&(a=bi(),a===e&&(a=Nr())),j[l]={nextPos:i,result:a},a)}function Ur(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=rs(),a===e&&(a=br(),a===e&&(a=Hs())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=rs(),a===e&&(a=br(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e&&(a=xu(),a===e&&(a=Ci(),a===e&&(a=bu(),a===e&&(a=ss(),a===e&&(a=_i(),a===e&&(a=Cu(),a===e&&(a=_u(),a===e&&(a=rt()))))))))))),j[l]={nextPos:i,result:a},a)}function rt(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=Pi(),a===e&&(a=ds()),j[l]={nextPos:i,result:a},a)}function ds(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=Mu(),a===e&&(a=as(),a===e&&(a=ks()))),j[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,v,n,u,y=i*76+12,p=j[y];if(p)return i=p.nextPos,p.result;if(a=Ni(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=dn(),a===e&&(a=Ti(),a===e&&(a=pa(),a===e&&(a=ga(),a===e&&(a=da(),a===e&&(a=Eu(),a===e&&(a=ki(),a===e&&(a=ku(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=S,i++):(l=e,R===0&&B(Ot)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=rt(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e?(T=a,a=ti(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Qe(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=Ti(),a===e&&(a=dn(),a===e&&(a=pa(),a===e&&(a=ma(),a===e&&(a=Fi(),a===e&&(a=ga()))))),j[l]={nextPos:i,result:a},a)}function Hs(){var a,l,$,v,n,u,y,p,x,m,P=i*76+14,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===O?(l=O,i+=2):(l=e,R===0&&B(Ir)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(t.charCodeAt(i)===123?(u=D,i++):(u=e,R===0&&B(ar)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(p=at(),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();t.charCodeAt(i)===125?(m=H,i++):(m=e,R===0&&B(ut)),m!==e?(T=a,a=Sl(v,p)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function bi(){var a,l,$,v,n,u,y=i*76+15,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.substr(i,3)===ae?(l=ae,i+=3):(l=e,R===0&&B(Qt)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=Ze(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();u=Qe(),u!==e?(T=a,a=Nl(v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ae?(l=ae,i+=3):(l=e,R===0&&B(Qt)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();v=Qe(),v!==e?(T=a,a=Tl(v)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function rs(){var a,l,$,v,n,u,y,p,x,m=i*76+16,P=j[m];if(P)return i=P.nextPos,P.result;if(a=i,t.substr(i,3)===se?(l=se,i+=3):(l=e,R===0&&B(bs)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===58?(y=ie,i++):(y=e,R===0&&B(Zt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=it(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===61?(y=de,i++):(y=e,R===0&&B(Xt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=rt(),x!==e?(T=a,a=Ol(v,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===W?(l=W,i+=3):(l=e,R===0&&B(Yr)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===58?(y=ie,i++):(y=e,R===0&&B(Zt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=it(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===61?(y=de,i++):(y=e,R===0&&B(Xt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=rt(),x!==e?(T=a,a=Fl(v,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function Ai(){var a,l,$,v,n=i*76+17,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,R===0&&B(Ha)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();v=rt(),v!==e?(T=a,a=Rl(v)):(i=a,a=e)}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function xu(){var a,l,$,v,n,u,y,p=i*76+18,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,R===0&&B(jr)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();for(y=Qe(),y!==e?n=y:(i=n,n=e),n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();t.charCodeAt(i)===93?(y=X,i++):(y=e,R===0&&B(ps)),y!==e?(T=a,a=Il(v,n)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[p]={nextPos:i,result:a},a}function Ci(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+19,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,R===0&&B(Fs)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(t.substr(i,3)===se?(n=se,i+=3):(n=e,R===0&&B(bs)),n!==e){if(u=[],y=d(),y!==e)for(;y!==e;)u.push(y),y=d();else u=e;if(u!==e)if(y=Ze(),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,R===0&&B(yt)),x===e&&(x=null),m=[],P=d();P!==e;)m.push(P),P=d();if(P=rt(),P!==e)if(t.charCodeAt(i)===41?(C=E,i++):(C=e,R===0&&B(dt)),C!==e){for(N=[],I=d();I!==e;)N.push(I),I=d();I=Ue(),I!==e?(T=a,a=jl(y,P,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,R===0&&B(Fs)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(t.substr(i,3)===se?(v=se,i+=3):(v=e,R===0&&B(bs)),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();if(m=rt(),m!==e){if(P=[],C=d(),C!==e)for(;C!==e;)P.push(C),C=d();else P=e;P!==e?(C=Ue(),C!==e?(T=a,a=Dl(u,m,C)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function bu(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G=i*76+20,ne=j[G];if(ne)return i=ne.nextPos,ne.result;if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(t.substr(i,3)===se?(n=se,i+=3):(n=e,R===0&&B(bs)),n!==e){if(u=[],y=d(),y!==e)for(;y!==e;)u.push(y),y=d();else u=e;if(u!==e)if(y=Ze(),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();if(x=i,t.charCodeAt(i)===61?(m=de,i++):(m=e,R===0&&B(Xt)),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();C=rt(),C!==e?(T=x,x=Ll(y,C)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,R===0&&B(yt)),m===e&&(m=null),P=[],C=d();C!==e;)P.push(C),C=d();if(C=rt(),C!==e)if(t.charCodeAt(i)===41?(N=E,i++):(N=e,R===0&&B(dt)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();q=Ue(),q!==e?(T=a,a=Ul(y,x,C,q)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(t.substr(i,3)===se?(v=se,i+=3):(v=e,R===0&&B(bs)),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(p=i,t.charCodeAt(i)===61?(x=de,i++):(x=e,R===0&&B(Xt)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();P=rt(),P!==e?(T=p,p=Bl(u,P)):(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,R===0&&B(yt)),x===e&&(x=null),m=[],P=d();P!==e;)m.push(P),P=d();if(P=rt(),P!==e){if(C=[],N=d(),N!==e)for(;N!==e;)C.push(N),N=d();else C=e;C!==e?(N=Ue(),N!==e?(T=a,a=Hl(u,p,P,N)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(n=rt(),n!==e)if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ue(),p!==e?(T=a,a=ql(n,p)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=rt(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;n!==e?(u=Ue(),u!==e?(T=a,a=ri(v,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[G]={nextPos:i,result:a},a}function Au(){var a,l,$,v,n,u=i*76+21,y=j[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===le?(l=le,i+=6):(l=e,R===0&&B(Ys)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();n=rt(),n!==e?(T=a,a=Vl(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function ss(){var a,l,$,v,n,u,y,p,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===we?(l=we,i+=4):(l=e,R===0&&B(Lr)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===123?(v=D,i++):(v=e,R===0&&B(ar)),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();if(u=ts(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();t.charCodeAt(i)===125?(p=H,i++):(p=e,R===0&&B(ut)),p!==e?(T=a,a=zl(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function _i(){var a,l,$,v,n=i*76+23,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===_e?(l=_e,i+=5):(l=e,R===0&&B(il)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Kl()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function Cu(){var a,l,$,v,n=i*76+24,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===be?(l=be,i+=8):(l=e,R===0&&B(qa)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Wl()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function _u(){var a,l,$,v,n,u,y=i*76+25,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=rt(),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.substr(i,2)===nt?(v=nt,i+=2):(v=e,R===0&&B(ll)),v===e&&(t.substr(i,2)===mt?(v=mt,i+=2):(v=e,R===0&&B(ul)),v===e&&(t.charCodeAt(i)===61?(v=de,i++):(v=e,R===0&&B(Xt)))),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();u=rt(),u!==e?(T=a,a=Gl(l,v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Pi(){var a,l,$,v,n,u,y,p,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=ds(),l!==e){for($=[],v=i,n=[],u=ns();u!==e;)n.push(u),u=ns();if(u=sa(),u!==e){for(y=[],p=ns();p!==e;)y.push(p),p=ns();p=ds(),p!==e?(T=v,v=Xn(l,u,p)):(i=v,v=e)}else i=v,v=e;if(v!==e)for(;v!==e;){for($.push(v),v=i,n=[],u=ns();u!==e;)n.push(u),u=ns();if(u=sa(),u!==e){for(y=[],p=ns();p!==e;)y.push(p),p=ns();p=ds(),p!==e?(T=v,v=Xn(l,u,p)):(i=v,v=e)}else i=v,v=e}else $=e;$!==e?(T=a,a=Jl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ns(){var a,l,$,v=i*76+27,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,R===0&&B(Va)),l!==e?($=ue(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=A()),j[v]={nextPos:i,result:a},a)}function sa(){var a,l,$=i*76+28,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,R===0&&B(za)),l===e&&(t.substr(i,2)===wt?(l=wt,i+=2):(l=e,R===0&&B(ol)),l===e&&(t.substr(i,2)===Ye?(l=Ye,i+=2):(l=e,R===0&&B(fl)),l===e&&(t.substr(i,2)===bt?(l=bt,i+=2):(l=e,R===0&&B(cl)),l===e&&(t.substr(i,2)===Ht?(l=Ht,i+=2):(l=e,R===0&&B(hl)),l===e&&(t.substr(i,2)===nr?(l=nr,i+=2):(l=e,R===0&&B(Kn)),l===e&&(t.charCodeAt(i)===60?(l=vt,i++):(l=e,R===0&&B(en)),l===e&&(t.charCodeAt(i)===62?(l=Cr,i++):(l=e,R===0&&B(Wn)),l===e&&(t.charCodeAt(i)===43?(l=qt,i++):(l=e,R===0&&B(Ka)),l===e&&(t.charCodeAt(i)===45?(l=_r,i++):(l=e,R===0&&B(pl)),l===e&&(t.charCodeAt(i)===42?(l=Vt,i++):(l=e,R===0&&B(Wa)),l===e&&(t.charCodeAt(i)===94?(l=ye,i++):(l=e,R===0&&B(Rs)),l===e&&(t.charCodeAt(i)===47?(l=qe,i++):(l=e,R===0&&B(vl)),l===e&&(t.charCodeAt(i)===37?(l=Te,i++):(l=e,R===0&&B(gl))))))))))))))),l!==e&&(T=a,l=si()),a=l,j[$]={nextPos:i,result:a},a)}function ki(){var a,l,$,v=i*76+29,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===33?(l=et,i++):(l=e,R===0&&B(dl)),l!==e?($=rt(),$!==e?(T=a,a=Ql($)):(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function as(){var a,l,$,v,n=i*76+30,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],v=na(),v===e&&(v=Ei(),v===e&&(v=ia())),v!==e)for(;v!==e;)$.push(v),v=na(),v===e&&(v=Ei(),v===e&&(v=ia()));else $=e;$!==e?(T=a,a=Zl(l,$)):(i=a,a=e)}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function na(){var a,l,$,v,n,u,y=i*76+31,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===40?(l=S,i++):(l=e,R===0&&B(Ot)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=aa(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e?(T=a,a=Xl(v)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function aa(){var a,l,$,v,n,u,y=i*76+32,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=rt(),l!==e){for($=[],v=i,n=M(),n!==e?(u=rt(),u!==e?(T=v,v=ni(l,u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=rt(),u!==e?(T=v,v=ni(l,u)):(i=v,v=e)):(i=v,v=e);T=a,a=Yl(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Ei(){var a,l,$,v,n,u,y=i*76+33,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=rt(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=Yn(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function ia(){var a,l,$,v=i*76+34,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===46?(l=At,i++):(l=e,R===0&&B(Is)),l!==e?($=Ze(),$!==e?(T=a,a=eu($)):(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function Pu(){var a,l,$,v,n,u,y,p,x,m,P=i*76+35,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===J?(l=J,i+=2):(l=e,R===0&&B(Gn)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=rt(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ue(),u!==e){if(y=i,p=[],x=d(),x!==e)for(;x!==e;)p.push(x),x=d();else p=e;if(p!==e?(x=Mi(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),p=i,x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;x!==e?(m=Si(),m!==e?p=m:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),T=a,a=tu(v,u,y,p)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Mi(){var a,l,$,v,n,u,y=i*76+36,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=qs(),l!==e){for($=[],v=i,n=[],u=d();u!==e;)n.push(u),u=d();for(u=qs(),u!==e?v=u:(i=v,v=e);v!==e;){for($.push(v),v=i,n=[],u=d();u!==e;)n.push(u),u=d();u=qs(),u!==e?v=u:(i=v,v=e)}T=a,a=ru(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function qs(){var a,l,$,v,n,u,y,p=i*76+37,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,R===0&&B(tn)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();if(n=rt(),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();y=Ue(),y!==e?(T=a,a=su(n,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[p]={nextPos:i,result:a},a}function Si(){var a,l,$,v,n,u=i*76+38,y=j[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===oe?(l=oe,i+=4):(l=e,R===0&&B(rn)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();n=Ue(),n!==e?(T=a,a=nu(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Ni(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=i*76+39,$e=j[Ie];if($e)return i=$e.nextPos,$e.result;if(a=i,t.substr(i,5)===Pe?(l=Pe,i+=5):(l=e,R===0&&B(yl)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();if(n=rt(),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===123?(y=D,i++):(y=e,R===0&&B(ar)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();if(x=[],m=i,P=rt(),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();T=m,m=ai(n,P,q)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,P=rt(),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();T=m,m=ai(n,P,q)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(P=Vt,i++):(P=e,R===0&&B(Wa)),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();m=q}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),P=[],C=d();C!==e;)P.push(C),C=d();t.charCodeAt(i)===125?(C=H,i++):(C=e,R===0&&B(ut)),C!==e?(T=a,a=ii(n,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Ie]={nextPos:i,result:a},a}function vn(){var a,l,$,v,n,u,y,p,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ee?(l=Ee,i+=4):(l=e,R===0&&B(vs)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===123?(v=D,i++):(v=e,R===0&&B(ar)),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();if(u=ts(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();t.charCodeAt(i)===125?(p=H,i++):(p=e,R===0&&B(ut)),p!==e?(T=a,a=li(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ku(){var a,l,$=i*76+41,v=j[$];return v?(i=v.nextPos,v.result):(a=i,l=Ri(),l!==e&&(T=a,l=ui(l)),a=l,j[$]={nextPos:i,result:a},a)}function gn(){var a,l,$,v,n,u,y=i*76+42,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===96?(l=De,i++):(l=e,R===0&&B(js)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===96?(u=De,i++):(u=e,R===0&&B(js)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=la(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===96?(u=De,i++):(u=e,R===0&&B(js)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=la(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===96?(v=De,i++):(v=e,R===0&&B(js)),v!==e?(T=a,a=au($)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function la(){var a,l,$,v,n,u,y=i*76+43,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=rt(),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();t.charCodeAt(i)===125?(u=H,i++):(u=e,R===0&&B(ut)),u!==e?a=v:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ua(),$!==e)for(;$!==e;)l.push($),$=ua();else l=e;l!==e&&(T=a,l=iu(l)),a=l}return j[y]={nextPos:i,result:a},a}function ua(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(ht.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Sr))),j[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,v=i*76+45,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,R===0&&B(Va)),l!==e?(wr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,R===0&&B(nn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function dn(){var a,l,$,v,n,u,y=i*76+46,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===34?(l=Oe,i++):(l=e,R===0&&B(an)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===34?(u=Oe,i++):(u=e,R===0&&B(an)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=fa(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=oi(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===34?(u=Oe,i++):(u=e,R===0&&B(an)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=fa(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=oi(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===34?(v=Oe,i++):(v=e,R===0&&B(an)),v!==e?(T=a,a=lu($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Fe,i++):(l=e,R===0&&B(ln)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===39?(u=Fe,i++):(u=e,R===0&&B(ln)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=fi(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===39?(u=Fe,i++):(u=e,R===0&&B(ln)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=fi(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===39?(v=Fe,i++):(v=e,R===0&&B(ln)),v!==e?(T=a,a=ci($)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function fa(){var a,l,$=i*76+47,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===Ce?(l=Ce,i+=2):(l=e,R===0&&B(gs)),l!==e&&(T=a,l=uu()),a=l,j[$]={nextPos:i,result:a},a)}function yn(){var a,l,$=i*76+48,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===ft?(l=ft,i+=2):(l=e,R===0&&B(un)),l!==e&&(T=a,l=hi()),a=l,j[$]={nextPos:i,result:a},a)}function Ti(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=ca(),a===e&&(a=ha()),j[l]={nextPos:i,result:a},a)}function ca(){var a,l,$,v,n,u,y=i*76+50,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),ls.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(Ga)),l!==e){if($=[],St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur)),v!==e)for(;v!==e;)$.push(v),St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur));else $=e;if($!==e)if(t.charCodeAt(i)===46?(v=At,i++):(v=e,R===0&&B(Is)),v!==e){if(n=[],St.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,R===0&&B(ur)),u!==e)for(;u!==e;)n.push(u),St.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,R===0&&B(ur));else n=e;n!==e?(T=a,a=ou()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),St.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(ur)),l!==e)if(t.charCodeAt(i)===46?($=At,i++):($=e,R===0&&B(Is)),$!==e){if(v=[],St.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,R===0&&B(ur)),n!==e)for(;n!==e;)v.push(n),St.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,R===0&&B(ur));else v=e;v!==e?(T=a,a=fu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[y]={nextPos:i,result:a},a}function ha(){var a,l,$,v,n=i*76+51,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),ls.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(Ga)),l!==e){if($=[],St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur)),v!==e)for(;v!==e;)$.push(v),St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur));else $=e;$!==e?(T=a,a=pi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),St.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(ur)),l!==e?(T=a,a=cu()):(i=a,a=e)),j[n]={nextPos:i,result:a},a}function pa(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Oi(),a===e&&(a=va()),j[l]={nextPos:i,result:a},a)}function Oi(){var a,l,$,v,n=i*76+53,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Ke?(l=Ke,i+=4):(l=e,R===0&&B(Ja)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=vi()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function va(){var a,l,$,v,n=i*76+54,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===st?(l=st,i+=5):(l=e,R===0&&B($r)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=hu()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function ga(){var a,l,$,v,n=i*76+55,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===tt?(l=tt,i+=4):(l=e,R===0&&B(wl)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=pu()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function da(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+56,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=rt(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=gi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=rt(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=gi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=H,i++):(n=e,R===0&&B(ut)),n!==e?(T=a,a=vu(v)):(i=a,a=e)}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function Eu(){var a,l,$,v,n,u,y,p,x,m,P=i*76+57,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=rt(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=di(u)}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=rt(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=di(u)}else i=n,n=e;for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=ea(v)):(i=a,a=e)}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function ya(){var a,l,$,v,n,u,y,p=i*76+58,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,l=Ze(),l!==e){for($=i,v=[],n=d();n!==e;)v.push(n),n=d();if(t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();y=it(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),T=a,a=gu(l,$)}else i=a,a=e;return j[p]={nextPos:i,result:a},a}function wa(){var a,l,$,v,n,u,y=i*76+59,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=ya(),l!==e){for($=[],v=i,n=M(),n!==e?(u=ya(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=ya(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);T=a,a=ta(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function br(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=i*76+60,$e=j[Ie];if($e)return i=$e.nextPos,$e.result;if(a=i,t.charCodeAt(i)===64?(l=Tt,i++):(l=e,R===0&&B(ml)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=Ze(),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();if(t.charCodeAt(i)===40?(u=S,i++):(u=e,R===0&&B(Ot)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(p=wa(),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();if(t.charCodeAt(i)===41?(m=E,i++):(m=e,R===0&&B(dt)),m!==e){for(P=i,C=[],N=d();N!==e;)C.push(N),N=d();if(t.charCodeAt(i)===58?(N=ie,i++):(N=e,R===0&&B(Zt)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();q=it(),q!==e?P=q:(i=P,P=e)}else i=P,P=e;for(P===e&&(P=null),C=[],N=d();N!==e;)C.push(N),N=d();if(t.charCodeAt(i)===123?(N=D,i++):(N=e,R===0&&B(ar)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();for(q=ts(),q===e&&(q=null),G=[],ne=d();ne!==e;)G.push(ne),ne=d();t.charCodeAt(i)===125?(ne=H,i++):(ne=e,R===0&&B(ut)),ne!==e?(T=a,a=du($,v,n,p,P,q)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Ie]={nextPos:i,result:a},a}function Mu(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I=i*76+61,q=j[I];if(q)return i=q.nextPos,q.result;if(a=i,t.substr(i,2)===Mt?(l=Mt,i+=2):(l=e,R===0&&B(Ls)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=wa(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=i,p=[],x=d();x!==e;)p.push(x),x=d();if(t.charCodeAt(i)===58?(x=ie,i++):(x=e,R===0&&B(Zt)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();P=it(),P!==e?y=P:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),p=[],x=d();x!==e;)p.push(x),x=d();if(t.charCodeAt(i)===123?(x=D,i++):(x=e,R===0&&B(ar)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();for(P=ts(),P===e&&(P=null),C=[],N=d();N!==e;)C.push(N),N=d();t.charCodeAt(i)===125?(N=H,i++):(N=e,R===0&&B(ut)),N!==e?(T=a,a=yu(v,y,P)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function ma(){var a,l,$,v,n,u,y,p,x,m,P=i*76+62,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Qe(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=yi(u)}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Qe(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=yi(u)}else i=n,n=e;for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=wu(v)):(i=a,a=e)}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Fi(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+63,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=Qe(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=wi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=Qe(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=wi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=H,i++):(n=e,R===0&&B(ut)),n!==e?(T=a,a=mi(v)):(i=a,a=e)}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function it(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=Su(),a===e&&(a=hr()),j[l]={nextPos:i,result:a},a)}function Su(){var a,l,$,v,n,u,y,p,x,m,P=i*76+65,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===Mt?(l=Mt,i+=2):(l=e,R===0&&B(Ls)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=Es(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.substr(i,2)===ce?(p=ce,i+=2):(p=e,R===0&&B(sn)),p!==e){for(x=[],m=d();m!==e;)x.push(m),m=d();m=it(),m!==e?(T=a,a=mu(v,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Es(){var a,l,$,v,n,u,y=i*76+66,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=it(),l!==e){for($=[],v=i,n=M(),n!==e?(u=it(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=it(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);T=a,a=$i(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function hr(){var a,l,$,v,n,u,y,p,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ze(),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(t.charCodeAt(i)===60?(v=vt,i++):(v=e,R===0&&B(en)),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();if(u=it(),u!==e){for(y=[],p=A();p!==e;)y.push(p),p=A();t.charCodeAt(i)===62?(p=Cr,i++):(p=e,R===0&&B(Wn)),p!==e?(T=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ze(),l!==e&&(T=a,l=re(l)),a=l),j[x]={nextPos:i,result:a},a}function Ze(){var a,l,$,v,n=i*76+68,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,zt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B($l)),l!==e){for($=[],Sn.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Jn));v!==e;)$.push(v),Sn.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Jn));T=a,a=Cs()}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function Ri(){var a,l,$,v,n,u,y=i*76+69,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=Ze(),l!==e){for($=[],v=i,t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e?(u=Ze(),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e?(u=Ze(),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);T=a,a=xr()}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function M(){var a,l,$,v,n,u=i*76+70,y=j[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=d();$!==e;)l.push($),$=d();if(t.charCodeAt(i)===44?($=Y,i++):($=e,R===0&&B(yt)),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();l=[l,$,v],a=l}else i=a,a=e;if(a===e)if(a=[],l=d(),l!==e)for(;l!==e;)a.push(l),l=d();else a=e;return j[u]={nextPos:i,result:a},a}function Ue(){var a,l,$,v,n,u,y=i*76+71,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=ts(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===125?(u=H,i++):(u=e,R===0&&B(ut)),u!==e?(T=a,a=fn(v)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Nr()),j[y]={nextPos:i,result:a},a}function ue(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Gt?(a=Gt,i+=2):(a=e,R===0&&B(xl)),a===e&&(mr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Qa))),j[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,v=j[$];return v?(i=v.nextPos,v.result):(a=i,R++,t.length>i?(l=t.charAt(i),i++):(l=e,R===0&&B(cr)),R--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ue()),j[$]={nextPos:i,result:a},a)}function d(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(nl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(bl)),j[l]={nextPos:i,result:a},a)}function A(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(al.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Al)),j[l]={nextPos:i,result:a},a)}function w(a,l,$){const v={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(v[u]=l[u]);const n=z();return v.loc={start:n.start.offset,end:n.end.offset-1},v}if(Nt=g(),Nt!==e&&i===t.length)return Nt;throw Nt!==e&&i<t.length&&B(me()),cn(te,o<t.length?t.charAt(o):null,o<t.length?Bs(o,o+1):Bs(o,o))}const l3=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function u3(t){return l3.includes(t.type)}function im(t){return"chain"in t&&t.chain!==null}function o3(t,r,e){return{type:"call",target:t,args:r,loc:e}}function f3(t,r,e){return{type:"index",target:t,index:r,loc:e}}function c3(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Lt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Lt(e.expr,r);break}case"return":{e.expr=Lt(e.expr,r);break}case"each":{e.items=Lt(e.items,r),e.for=Lt(e.for,r);break}case"for":{e.from!=null&&(e.from=Lt(e.from,r)),e.to!=null&&(e.to=Lt(e.to,r)),e.times!=null&&(e.times=Lt(e.times,r)),e.for=Lt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Lt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Lt(e.expr,r),e.dest=Lt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Lt(e.operands[s],r);break}case"not":{e.expr=Lt(e.expr,r);break}case"if":{e.cond=Lt(e.cond,r),e.then=Lt(e.then,r);for(const s of e.elseif)s.cond=Lt(s.cond,r),s.then=Lt(s.then,r);e.else!=null&&(e.else=Lt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Lt(e.children[s],r);break}case"match":{e.about=Lt(e.about,r);for(const s of e.qs)s.q=Lt(s.q,r),s.a=Lt(s.a,r);e.default!=null&&(e.default=Lt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Lt(e.statements[s],r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=Lt(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Lt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Lt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Lt(e.args[s],r);break}case"indexChain":{e.index=Lt(e.index,r);break}case"call":{e.target=Lt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Lt(e.args[s],r);break}case"index":{e.target=Lt(e.target,r),e.index=Lt(e.index,r);break}case"prop":{e.target=Lt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Lt(e.members[s],r);break}case"or":case"and":{e.left=Lt(e.left,r),e.right=Lt(e.right,r);break}}if(im(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Lt(e.chain[s],r);return e}const gv=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function dv(t){throw new kf(`Reserved word "${t}" cannot be used as variable name.`)}function h3(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{gv.includes(t.name)&&dv(t.name);break}case"meta":{t.name!=null&&gv.includes(t.name)&&dv(t.name);break}case"fn":{for(const r of t.args)gv.includes(r.name)&&dv(r.name);break}}return t}function p3(t){for(const r of t)Lt(r,h3);return t}function Gy(t){return{type:"simple",name:t}}function v3(t,r){return{type:"generic",name:t,inners:r}}function g3(t,r){return{type:"fn",args:t,result:r}}function Dh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Dh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Dh(s)).join(", "),e=Dh(t.result);return`@(${r}) { ${e} }`}}}function cc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Gy(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=cc(t.inner):r=Gy("any"),v3(t.name,[r])}}throw new kf(`Unknown type: '${Dh(t)}'`)}else{const r=t.args.map(e=>cc(e));return g3(r,cc(t.result))}}function d3(t){switch(t.type){case"def":{t.varType!=null&&cc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&cc(r.argType);t.retType!=null&&cc(t.retType);break}}return t}function y3(t){for(const r of t)Lt(r,d3);return t}function Lh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Lh(s.expr.children)),r.push(s);else{if(e.length>0)throw new kf("invalid attribute.");switch(s.type){case"fn":{s.children=Lh(s.children);break}case"block":{s.statements=Lh(s.statements);break}}r.push(s)}if(e.length>0)throw new kf("invalid attribute.");return r}function w3(t){if(u3(t)&&im(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=o3(s,h.args,h.loc);break}case"indexChain":{s=f3(s,h.index,h.loc);break}case"propChain":{s=c3(s,h.name,h.loc);break}}return s}return t}function m3(t){for(let r=0;r<t.length;r++)t[r]=Lt(t[r],w3);return t}function Uh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function lm(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Uh(t,r,e);{const{left:s,right:h,info:g}=t;return Uh(s,lm(h,r,e),g)}}function nf(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[nf(t.left),nf(t.right)]}}const $3={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:nf(t.left),right:nf(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:nf(t.left),right:nf(t.right)}),priority:3}};function x3(t){const r=t.operators.map(s=>{const h=$3[s];if(h==null)throw new kf(`No such operator: ${s}.`);return h});let e=Uh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=lm(e,t.operands[2+s],r[1+s]);return nf(e)}function b3(t){for(let r=0;r<t.length;r++)t[r]=Lt(t[r],e=>e.type==="infix"?x3(e):e);return t}var Zu;let A3=(Zu=class{constructor(){ve(this,"plugins");this.plugins={validate:[p3,y3],transform:[Lh,m3,b3]}}static parse(r){return Zu.instance==null&&(Zu.instance=new Zu),Zu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Wy(r,{startRule:"Preprocess"});e=Wy(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new kf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`):new kf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},ve(Zu,"instance"),Zu);const C3="0.15.0",_3={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let yg=[],_c=null;function P3(t){return yg=A3.parse(t),JSON.stringify(yg,null,"	")}async function k3(t){_c==null||_c.abort(),_c=new Ua({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:vg(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:vg(e.val,!0),print:!1});break}}});try{await _c.exec(yg)}catch(r){t.err(r)}}const E3=Object.freeze(Object.defineProperty({__proto__:null,exec:k3,parse:P3,samples:_3,version:C3},Symbol.toStringTag,{value:"Module"}));class kp extends Error{constructor(e,s){super(e);ve(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,kp)}}class Ef extends kp{constructor(r,e){super(r,e)}}class Zr extends kp{constructor(r,e){super(r,e)}}class M3 extends Zr{constructor(r,e){super(r,e)}}var If=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};class ao{constructor(r=[],e,s){ve(this,"parent");ve(this,"layerdStates");ve(this,"name");ve(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new ao(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r);return this.log("read",{var:r,val:s}),s}throw new Zr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Zr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let s=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Zr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}If([Wt],ao.prototype,"log",null);If([Wt],ao.prototype,"onUpdated",null);If([Wt],ao.prototype,"createChildScope",null);If([Wt],ao.prototype,"get",null);If([Wt],ao.prototype,"getAll",null);If([Wt],ao.prototype,"add",null);If([Wt],ao.prototype,"assign",null);let wh;const S3=new Uint8Array(16);function N3(){if(!wh&&(wh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!wh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return wh(S3)}const Cn=[];for(let t=0;t<256;++t)Cn.push((t+256).toString(16).slice(1));function T3(t,r=0){return(Cn[t[r+0]]+Cn[t[r+1]]+Cn[t[r+2]]+Cn[t[r+3]]+"-"+Cn[t[r+4]]+Cn[t[r+5]]+"-"+Cn[t[r+6]]+Cn[t[r+7]]+"-"+Cn[t[r+8]]+Cn[t[r+9]]+"-"+Cn[t[r+10]]+Cn[t[r+11]]+Cn[t[r+12]]+Cn[t[r+13]]+Cn[t[r+14]]+Cn[t[r+15]]).toLowerCase()}const O3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jy={randomUUID:O3};function F3(t,r,e){if(Jy.randomUUID&&!r&&!t)return Jy.randomUUID();t=t||{};const s=t.random||(t.rng||N3)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,T3(s)}const Fr={type:"null"},el={type:"bool",value:!0},Ui={type:"bool",value:!1},$t=t=>({type:"num",value:t}),Jr=t=>({type:"str",value:t}),hc=t=>({type:"bool",value:t}),ad=t=>({type:"obj",value:t}),Fn=t=>({type:"arr",value:t}),R3=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ge=t=>({type:"fn",native:t}),I3=t=>({type:"return",value:t}),j3=()=>({type:"break",value:null}),D3=()=>({type:"continue",value:null}),L3=t=>t.type==="return"?t.value:t;function Vi(t){if(t==null)throw new Zr("Expect anything, but got nothing.")}function ka(t){if(t==null)throw new Zr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Zr(`Expect boolean, but got ${t.type}.`)}function Oo(t){if(t==null)throw new Zr("Expect function, but got nothing.");if(t.type!=="fn")throw new Zr(`Expect function, but got ${t.type}.`)}function Ks(t){if(t==null)throw new Zr("Expect string, but got nothing.");if(t.type!=="str")throw new Zr(`Expect string, but got ${t.type}.`)}function pt(t){if(t==null)throw new Zr("Expect number, but got nothing.");if(t.type!=="num")throw new Zr(`Expect number, but got ${t.type}.`)}function Co(t){if(t==null)throw new Zr("Expect object, but got nothing.");if(t.type!=="obj")throw new Zr(`Expect object, but got ${t.type}.`)}function Dc(t){if(t==null)throw new Zr("Expect array, but got nothing.");if(t.type!=="arr")throw new Zr(`Expect array, but got ${t.type}.`)}function U3(t){return t.type==="str"}function B3(t){return t.type==="num"}function H3(t){return t.type==="obj"}function q3(t){return t.type==="arr"}function wg(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function mg(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>mg(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function $g(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>$g(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=$g(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function xg(t){if(t===null)return Fr;if(typeof t=="boolean")return hc(t);if(typeof t=="string")return Jr(t);if(typeof t=="number")return $t(t);if(Array.isArray(t))return Fn(t.map(r=>xg(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,xg(s));return ad(r)}return Fr}const V3={help:Jr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Jr("0.14.1"),"Core:ai":Jr("kawaii"),"Core:not":Ge(([t])=>(ka(t),t.value?Ui:el)),"Core:eq":Ge(([t,r])=>(Vi(t),Vi(r),wg(t,r)?el:Ui)),"Core:neq":Ge(([t,r])=>(Vi(t),Vi(r),wg(t,r)?Ui:el)),"Core:and":Ge(([t,r])=>(ka(t),t.value?(ka(r),r.value?el:Ui):Ui)),"Core:or":Ge(([t,r])=>(ka(t),t.value?el:(ka(r),r.value?el:Ui))),"Core:add":Ge(([t,r])=>(pt(t),pt(r),$t(t.value+r.value))),"Core:sub":Ge(([t,r])=>(pt(t),pt(r),$t(t.value-r.value))),"Core:mul":Ge(([t,r])=>(pt(t),pt(r),$t(t.value*r.value))),"Core:pow":Ge(([t,r])=>{pt(t),pt(r);const e=t.value**r.value;if(isNaN(e))throw new Zr("Invalid operation.");return $t(e)}),"Core:div":Ge(([t,r])=>{pt(t),pt(r);const e=t.value/r.value;if(isNaN(e))throw new Zr("Invalid operation.");return $t(e)}),"Core:mod":Ge(([t,r])=>(pt(t),pt(r),$t(t.value%r.value))),"Core:gt":Ge(([t,r])=>(pt(t),pt(r),t.value>r.value?el:Ui)),"Core:lt":Ge(([t,r])=>(pt(t),pt(r),t.value<r.value?el:Ui)),"Core:gteq":Ge(([t,r])=>(pt(t),pt(r),t.value>=r.value?el:Ui)),"Core:lteq":Ge(([t,r])=>(pt(t),pt(r),t.value<=r.value?el:Ui)),"Core:type":Ge(([t])=>(Vi(t),Jr(t.type))),"Core:to_str":Ge(([t])=>(Vi(t),t.type==="str"?t:t.type==="num"?Jr(t.value.toString()):Jr("?"))),"Core:range":Ge(([t,r])=>(pt(t),pt(r),t.value<r.value?Fn(Array.from({length:r.value-t.value+1},(e,s)=>$t(s+t.value))):t.value>r.value?Fn(Array.from({length:t.value-r.value+1},(e,s)=>$t(t.value-s))):Fn([t]))),"Util:uuid":Ge(()=>Jr(F3())),"Json:stringify":Ge(([t])=>(Vi(t),Jr(JSON.stringify($g(t))))),"Json:parse":Ge(([t])=>(Ks(t),xg(JSON.parse(t.value)))),"Json:parsable":Ge(([t])=>{Ks(t);try{JSON.parse(t.value)}catch{return hc(!1)}return hc(!0)}),"Date:now":Ge(()=>$t(Date.now())),"Date:year":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ge(([t])=>(t&&pt(t),$t(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ge(([t])=>(Ks(t),$t(new Date(t.value).getTime()))),"Math:Infinity":$t(1/0),"Math:PI":$t(Math.PI),"Math:sin":Ge(([t])=>(pt(t),$t(Math.sin(t.value)))),"Math:cos":Ge(([t])=>(pt(t),$t(Math.cos(t.value)))),"Math:abs":Ge(([t])=>(pt(t),$t(Math.abs(t.value)))),"Math:sqrt":Ge(([t])=>{pt(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Zr("Invalid operation.");return $t(r)}),"Math:round":Ge(([t])=>(pt(t),$t(Math.round(t.value)))),"Math:ceil":Ge(([t])=>(pt(t),$t(Math.ceil(t.value)))),"Math:floor":Ge(([t])=>(pt(t),$t(Math.floor(t.value)))),"Math:min":Ge(([t,r])=>(pt(t),pt(r),$t(Math.min(t.value,r.value)))),"Math:max":Ge(([t,r])=>(pt(t),pt(r),$t(Math.max(t.value,r.value)))),"Math:rnd":Ge(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?$t(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):$t(Math.random())),"Math:gen_rng":Ge(([t])=>{if(Vi(t),t.type!=="num"&&t.type!=="str")return Fr;const r=Uo(t.value.toString());return Ge(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?$t(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):$t(r()))}),"Num:to_hex":Ge(([t])=>(pt(t),Jr(t.value.toString(16)))),"Num:from_hex":Ge(([t])=>(Ks(t),$t(parseInt(t.value,16)))),"Str:lf":Jr(`
`),"Str:lt":Ge(([t,r])=>(Ks(t),Ks(r),t.value<r.value?$t(-1):t.value===r.value?$t(0):$t(1))),"Str:gt":Ge(([t,r])=>(Ks(t),Ks(r),t.value>r.value?$t(-1):t.value===r.value?$t(0):$t(1))),"Obj:keys":Ge(([t])=>(Co(t),Fn(Array.from(t.value.keys()).map(r=>Jr(r))))),"Obj:vals":Ge(([t])=>(Co(t),Fn(Array.from(t.value.values())))),"Obj:kvs":Ge(([t])=>(Co(t),Fn(Array.from(t.value.entries()).map(([r,e])=>Fn([Jr(r),e]))))),"Obj:get":Ge(([t,r])=>(Co(t),Ks(r),t.value.get(r.value)??Fr)),"Obj:set":Ge(([t,r,e])=>(Co(t),Ks(r),Vi(e),t.value.set(r.value,e),Fr)),"Obj:has":Ge(([t,r])=>(Co(t),Ks(r),hc(t.value.has(r.value)))),"Obj:copy":Ge(([t])=>(Co(t),ad(new Map(t.value)))),"Async:interval":Ge(async([t,r,e],s)=>{pt(t),Oo(r),e&&(ka(e),e.value&&s.call(r,[]));const h=setInterval(()=>{s.call(r,[])},t.value),g=()=>{clearInterval(h)};return s.registerAbortHandler(g),Ge(([],b)=>{clearInterval(h),b.unregisterAbortHandler(g)})}),"Async:timeout":Ge(async([t,r],e)=>{pt(t),Oo(r);const s=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(s)};return e.registerAbortHandler(h),Ge(([],g)=>{clearTimeout(s),g.unregisterAbortHandler(h)})})},Lf={num:{to_str:t=>Ge(async(r,e)=>Jr(t.value.toString()))},str:{to_num:t=>Ge(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Fr:$t(s)}),len:t=>$t(Tf(t.value)),replace:t=>Ge(async([r,e],s)=>(Ks(r),Ks(e),Jr(t.value.split(r.value).join(e.value)))),index_of:t=>Ge(async([r],e)=>(Ks(r),$t(Ff(t.value,r.value)))),incl:t=>Ge(async([r],e)=>(Ks(r),t.value.includes(r.value)?el:Ui)),trim:t=>Ge(async(r,e)=>Jr(t.value.trim())),upper:t=>Ge(async(r,e)=>Jr(t.value.toUpperCase())),lower:t=>Ge(async(r,e)=>Jr(t.value.toLowerCase())),split:t=>Ge(async([r],e)=>(r&&Ks(r),Fn(r?t.value.split(r?r.value:"").map(s=>Jr(s)):Zs(t.value).map(s=>Jr(s))))),slice:t=>Ge(async([r,e],s)=>(pt(r),pt(e),Jr(Of(t.value,r.value,e.value)))),pick:t=>Ge(async([r],e)=>{pt(r);const h=Zs(t.value)[r.value];return h?Jr(h):Fr})},arr:{len:t=>$t(t.value.length),push:t=>Ge(async([r],e)=>(Vi(r),t.value.push(r),t)),unshift:t=>Ge(async([r],e)=>(Vi(r),t.value.unshift(r),t)),pop:t=>Ge(async(r,e)=>t.value.pop()??Fr),shift:t=>Ge(async(r,e)=>t.value.shift()??Fr),concat:t=>Ge(async([r],e)=>(Dc(r),Fn(t.value.concat(r.value)))),slice:t=>Ge(async([r,e],s)=>(pt(r),pt(e),Fn(t.value.slice(r.value,e.value)))),join:t=>Ge(async([r],e)=>(r&&Ks(r),Jr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>Ge(async([r],e)=>{Oo(r);const s=t.value.map(async(h,g)=>await e.call(r,[h,$t(g)]));return Fn(await Promise.all(s))}),filter:t=>Ge(async([r],e)=>{Oo(r);const s=[];for(let h=0;h<t.value.length;h++){const g=t.value[h],b=await e.call(r,[g,$t(h)]);ka(b),b.value&&s.push(g)}return Fn(s)}),reduce:t=>Ge(async([r,e],s)=>{Oo(r);const h=e!=null;let g=h?e:t.value[0];for(let b=h?0:1;b<t.value.length;b++){const _=t.value[b];g=await s.call(r,[g,_,$t(b)])}return g}),find:t=>Ge(async([r],e)=>{Oo(r);for(let s=0;s<t.value.length;s++){const h=t.value[s],g=await e.call(r,[h,$t(s)]);if(ka(g),g.value)return h}return Fr}),incl:t=>Ge(async([r],e)=>(Vi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ui:(h=>h.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?el:Ui)),reverse:t=>Ge(async(r,e)=>(t.value.reverse(),Fr)),copy:t=>Ge(async(r,e)=>Fn([...t.value])),sort:t=>Ge(async([r],e)=>{const s=async(g,b)=>{if(g.length<=1)return g;const _=Math.floor(g.length/2),k=await s(g.slice(0,_),b),S=await s(g.slice(_),b);return h(k,S,b)},h=async(g,b,_)=>{const k=[];let S=0,E=0;for(;S<g.length&&E<b.length;){const O=g[S],D=b[E],H=await e.call(_,[O,D]);pt(H),H.value<0?(k.push(g[S]),S++):(k.push(b[E]),E++)}return k.concat(g.slice(S)).concat(b.slice(E))};return Oo(r),Dc(t),t.value=await s(t.value,r),t})}};var Ji=function(t,r,e,s){var h=arguments.length,g=h<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,s);else for(var _=t.length-1;_>=0;_--)(b=t[_])&&(g=(h<3?b(g):h>3?b(r,e,g):b(r,e))||g);return h>3&&g&&Object.defineProperty(r,e,g),g};const um=300,z3=um-1;class Ba{constructor(r,e){ve(this,"vars");ve(this,"opts");ve(this,"stepCount",0);ve(this,"stop",!1);ve(this,"scope");ve(this,"abortHandlers",[]);this.opts=e??{};const s={print:Ge(([h])=>{Vi(h),this.opts.out&&this.opts.out(h)}),readline:Ge(async h=>{const g=h[0];if(Ks(g),this.opts.in==null)return Fr;const b=await this.opts.in(g.value);return Jr(b)})};this.vars={...r,...V3,...s},this.scope=new ao([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,g)=>{switch(h){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(g=>e(g));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const g={};for(const[b,_]of h.value.entries())g[b]=e(_);return g}case"str":return h.value;default:return}}const s=new Map;for(const h of r)switch(h.type){case"meta":{s.set(h.name,e(h.value));break}}return s}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{const h=await this._eval(s.expr,e);e.add(s.name,h),this.scope.add(r.name+":"+s.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Fr;{const s=new Map;for(let g=0;g<(r.args??[]).length;g++)s.set(r.args[g],e[g]);const h=r.scope.createChildScope(s);return L3(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Fr;if(this.stepCount%um===z3&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Zr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);Oo(s);const h=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(s,h)}case"if":{const s=await this._eval(r.cond,e);if(ka(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const g=await this._eval(h.cond,e);if(ka(g),g.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Fr}case"match":{const s=await this._eval(r.about,e);for(const h of r.qs){const g=await this._eval(h.q,e);if(wg(s,g))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Fr}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return Fr}case"for":{if(r.times){const s=await this._eval(r.times,e);pt(s);for(let h=0;h<s.value;h++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const s=await this._eval(r.from,e),h=await this._eval(r.to,e);pt(s),pt(h);for(let g=s.value;g<s.value+h.value;g++){const b=await this._eval(r.for,e.createChildScope(new Map([[r.var,$t(g)]])));if(b.type==="break")break;if(b.type==="return")return b}}return Fr}case"each":{const s=await this._eval(r.items,e);Dc(s);for(const h of s.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(g.type==="break")break;if(g.type==="return")return g}return Fr}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const g of r.attr)h.push({name:g.name,value:await this._eval(g.value,e)});s.attr=h}return e.add(r.name,s),Fr}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),Fr}case"addAssign":{const s=await this._eval(r.dest,e);pt(s);const h=await this._eval(r.expr,e);return pt(h),await this.assign(e,r.dest,$t(s.value+h.value)),Fr}case"subAssign":{const s=await this._eval(r.dest,e);pt(s);const h=await this._eval(r.expr,e);return pt(h),await this.assign(e,r.dest,$t(s.value-h.value)),Fr}case"null":return Fr;case"bool":return hc(r.value);case"num":return $t(r.value);case"str":return Jr(r.value);case"arr":return Fn(await Promise.all(r.value.map(async s=>await this._eval(s,e))));case"obj":{const s=new Map;for(const h of r.value.keys())s.set(h,await this._eval(r.value.get(h),e));return ad(s)}case"prop":{const s=await this._eval(r.target,e);if(H3(s))return s.value.has(r.name)?s.value.get(r.name):Fr;if(B3(s)){if(Object.hasOwn(Lf.num,r.name))return Lf.num[r.name](s);throw new Zr(`No such prop (${r.name}) in ${s.type}.`)}else if(U3(s)){if(Object.hasOwn(Lf.str,r.name))return Lf.str[r.name](s);throw new Zr(`No such prop (${r.name}) in ${s.type}.`)}else if(q3(s)){if(Object.hasOwn(Lf.arr,r.name))return Lf.arr[r.name](s);throw new Zr(`No such prop (${r.name}) in ${s.type}.`)}else throw new Zr(`Cannot read prop (${r.name}) of ${s.type}.`)}case"index":{const s=await this._eval(r.target,e);Dc(s);const h=await this._eval(r.index,e);pt(h);const g=s.value[h.value];if(g===void 0)throw new M3(`Index out of range. index: ${h.value} max: ${s.value.length-1}`);return g}case"not":{const s=await this._eval(r.expr,e);return ka(s),hc(!s.value)}case"fn":return R3(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let s="";for(const h of r.tmpl)if(typeof h=="string")s+=h;else{const g=await this._eval(h,e);let b="";g.type==="str"?b=g.value:g.type==="num"&&(b=g.value.toString()),s+=b}return Jr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),I3(s)}case"break":return this.log("block:break",{scope:e.name}),j3();case"continue":return this.log("block:continue",{scope:e.name}),D3();case"ns":return Fr;case"meta":return Fr;case"and":{const s=await this._eval(r.left,e);if(ka(s),s.value){const h=await this._eval(r.right,e);return ka(h),h}else return s}case"or":{const s=await this._eval(r.left,e);if(ka(s),s.value)return s;{const h=await this._eval(r.right,e);return ka(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=Fr;for(let h=0;h<r.length;h++){const g=r[h];if(s=await this._eval(g,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const h=await this._eval(e.target,r);Dc(h);const g=await this._eval(e.index,r);pt(g),h.value[g.value]=s}else if(e.type==="prop"){const h=await this._eval(e.target,r);Co(h),h.value.set(e.name,s)}else throw new Zr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}Ji([Wt],Ba.prototype,"exec",null);Ji([Wt],Ba.prototype,"execFn",null);Ji([Wt],Ba.prototype,"log",null);Ji([Wt],Ba.prototype,"collectNs",null);Ji([Wt],Ba.prototype,"collectNsMember",null);Ji([Wt],Ba.prototype,"_fn",null);Ji([Wt],Ba.prototype,"_eval",null);Ji([Wt],Ba.prototype,"_run",null);Ji([Wt],Ba.prototype,"registerAbortHandler",null);Ji([Wt],Ba.prototype,"unregisterAbortHandler",null);Ji([Wt],Ba.prototype,"abort",null);Ji([Wt],Ba.prototype,"assign",null);Ji([Wt],Ba,"collectMetadata",null);function K3(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function mf(t,r,e,s){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,mf.prototype),h.expected=r,h.found=e,h.location=s,h.name="SyntaxError",h}K3(mf,Error);function yv(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}mf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,b=this.location.source+":"+g.line+":"+g.column;if(e){var _=this.location.end,k=yv("",g.line.toString().length," "),S=e[h.line-1],E=h.line===_.line?_.column:S.length+1,O=E-h.column||1;r+=`
 --> `+b+`
`+k+` |
`+g.line+" | "+S+`
`+k+" | "+yv("",h.column-1," ")+yv("",O,"^")}else r+=`
 at `+b}return r};mf.buildMessage=function(t,r){var e={literal:function(S){return'"'+h(S.text)+'"'},class:function(S){var E=S.parts.map(function(O){return Array.isArray(O)?g(O[0])+"-"+g(O[1]):g(O)});return"["+(S.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(S){return S.description}};function s(S){return S.charCodeAt(0).toString(16).toUpperCase()}function h(S){return S.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function g(S){return S.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+s(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+s(E)})}function b(S){return e[S.type](S)}function _(S){var E=S.map(b),O,D;if(E.sort(),E.length>0){for(O=1,D=1;O<E.length;O++)E[O-1]!==E[O]&&(E[D]=E[O],D++);E.length=D}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function k(S){return S?'"'+h(S)+'"':"end of input"}return"Expected "+_(t)+" but "+k(r)+" found."};function Qy(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,h={Preprocess:L,Main:hn},g=L,b="//",_="/*",k="*/",S="(",E=")",O="::",D="{",H="}",ae="###",se="let",ie=":",de="=",W="var",K="<:",Q="#[",X="]",ee="each",Y=",",fe="for",le="return",we="loop",_e="break",be="continue",nt="+=",mt="-=",sr="\\",xt="||",wt="&&",Ye="==",bt="!=",Ht="<=",nr=">=",vt="<",Cr=">",qt="+",_r="-",Vt="*",ye="^",qe="/",Te="%",et="!",ct="[",At=".",J="if",Z="elif",oe="else",Pe="match",ce="=>",Ee="eval",De="`",Oe='"',Fe="'",Ce='\\"',ft="\\'",Ke="true",st="false",tt="null",gt=";",Tt="@",Mt="@(",Gt=`\r
`,kt=/^[A-Z0-9_:]/i,ht=/^[^`{]/,wr=/^[{}`]/,hs=/^[+\-]/,ls=/^[1-9]/,St=/^[0-9]/,zt=/^[A-Z_]/i,Sn=/^[A-Z0-9_]/i,mr=/^[\r\n]/,nl=/^[ \t\r\n]/,al=/^[ \t]/,cr=$u(),Jt=he("//",!1),Xr=he("/*",!1),zn=he("*/",!1),Ot=he("(",!1),dt=he(")",!1),Ir=he("::",!1),ar=he("{",!1),ut=he("}",!1),Qt=he("###",!1),bs=he("let",!1),Zt=he(":",!1),Xt=he("=",!1),Yr=he("var",!1),Ha=he("<:",!1),jr=he("#[",!1),ps=he("]",!1),Fs=he("each",!1),yt=he(",",!1),Ut=he("for",!1),Ys=he("return",!1),Dr=U([["A","Z"],["0","9"],"_",":"],!1,!0),Lr=he("loop",!1),il=he("break",!1),qa=he("continue",!1),ll=he("+=",!1),ul=he("-=",!1),Va=he("\\",!1),za=he("||",!1),ol=he("&&",!1),fl=he("==",!1),cl=he("!=",!1),hl=he("<=",!1),Kn=he(">=",!1),en=he("<",!1),Wn=he(">",!1),Ka=he("+",!1),pl=he("-",!1),Wa=he("*",!1),Rs=he("^",!1),vl=he("/",!1),gl=he("%",!1),dl=he("!",!1),As=he("[",!1),Is=he(".",!1),Gn=he("if",!1),tn=he("elif",!1),rn=he("else",!1),yl=he("match",!1),sn=he("=>",!1),vs=he("eval",!1),js=he("`",!1),Sr=U(["`","{"],!0,!1),nn=U(["{","}","`"],!1,!1),an=he('"',!1),ln=he("'",!1),gs=he('\\"',!1),un=he("\\'",!1),Ds=U(["+","-"],!1,!1),Ga=U([["1","9"]],!1,!1),ur=U([["0","9"]],!1,!1),Ja=he("true",!1),$r=he("false",!1),wl=he("null",!1),on=he(";",!1),ml=he("@",!1),Ls=he("@(",!1),$l=U([["A","Z"],"_"],!1,!0),Jn=U([["A","Z"],["0","9"],"_"],!1,!0),xl=he(`\r
`,!1),Qa=U(["\r",`
`],!1,!1),bl=U([" ","	","\r",`
`],!1,!1),Al=U([" ","	"],!1,!1),Za=function(a){return a.join("")},Cl=function(){return F()},Xa=function(){return F()},_l=function(){return""},Ya=function(){return""},Pl=function(a){return a??[]},ei=function(a,l){return l},kl=function(a,l){return[a,...l]},Qn=function(a,l){return l},El=function(a,l){return[a,...l]},Zn=function(a,l){return l},Ml=function(a,l){return[a,...l]},ti=function(a){return a},Sl=function(a,l){return w("ns",{name:a,members:l})},Nl=function(a,l){return w("meta",{name:a,value:l})},Tl=function(a){return w("meta",{name:null,value:a})},Ol=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Fl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Rl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Il=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},jl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Dl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ll=function(a,l){return l},Ul=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},Bl=function(a,l){return l},Hl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},ql=function(a,l){return w("for",{times:a,for:l})},ri=function(a,l){return w("for",{times:a,for:l})},Vl=function(a){return w("return",{expr:a})},zl=function(a){return w("loop",{statements:a})},Kl=function(){return w("break",{})},Wl=function(){return w("continue",{})},Gl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Xn=function(a,l,$){return{op:l,term:$}},Jl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},si=function(){return F()},Ql=function(a){return w("not",{expr:a})},Zl=function(a,l){return{...a,chain:l}},Xl=function(a){return w("callChain",{args:a??[]})},ni=function(a,l){return l},Yl=function(a,l){return[a,...l]},Yn=function(a){return w("indexChain",{index:a})},eu=function(a){return w("propChain",{name:a})},tu=function(a,l,$,v){return w("if",{cond:a,then:l,elseif:$??[],else:v})},ru=function(a,l){return[a,...l]},su=function(a,l){return{cond:a,then:l}},nu=function(a){return a},ai=function(a,l,$){return{q:l,a:$}},ii=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},li=function(a){return w("block",{statements:a})},ui=function(a){return w("identifier",{name:a})},au=function(a){return w("tmpl",{tmpl:a})},iu=function(a){return a.join("")},oi=function(a){return a},lu=function(a){return w("str",{value:a.join("")})},fi=function(a){return a},ci=function(a){return w("str",{value:a.join("")})},uu=function(){return'"'},hi=function(){return"'"},ou=function(){return w("num",{value:parseFloat(F())})},fu=function(){return w("num",{value:parseFloat(F())})},pi=function(){return w("num",{value:parseInt(F(),10)})},cu=function(){return w("num",{value:parseInt(F(),10)})},vi=function(){return w("bool",{value:!0})},hu=function(){return w("bool",{value:!1})},pu=function(){return w("null",{})},gi=function(a,l){return{k:a,v:l}},vu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},di=function(a){return a},ea=function(a){return w("arr",{value:a})},gu=function(a,l){return{name:a,argType:l}},ta=function(a,l){return[a,...l]},du=function(a,l,$,v,n,u){return(a.length>0||$.length>0)&&Us("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:v??[],retType:n},u??[]),mut:!1,attr:[]})},yu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},yi=function(a){return a},wu=function(a){return w("arr",{value:a})},wi=function(a,l){return{k:a,v:l}},mi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},mu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},$i=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},re=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},xr=function(){return F()},fn=function(a){return w("block",{statements:a??[]})},i=0,T=0,es=[{line:1,column:1}],o=0,te=[],R=0,j={},Nt;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=h[r.startRule]}function F(){return t.substring(T,i)}function z(){return Bs(T,i)}function Us(a,l){throw l=l!==void 0?l:Bs(T,i),xi(a,l)}function he(a,l){return{type:"literal",text:a,ignoreCase:l}}function U(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function $u(){return{type:"any"}}function me(){return{type:"end"}}function or(a){var l=es[a],$;if(l)return l;for($=a-1;!es[$];)$--;for(l=es[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return es[a]=l,l}function Bs(a,l,$){var v=or(a),n=or(l),u={source:s,start:{offset:a,line:v.line,column:v.column},end:{offset:l,line:n.line,column:n.column}};return u}function B(a){i<o||(i>o&&(o=i,te=[]),te.push(a))}function xi(a,l){return new mf(a,null,null,l)}function cn(a,l,$){return new mf(mf.buildMessage(a,l),a,l,$)}function L(){var a,l,$,v=i*76+0,n=j[v];if(n)return i=n.nextPos,n.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return T=a,l=Za(l),a=l,j[v]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,v=j[$];return v?(i=v.nextPos,v.result):(a=i,l=gn(),l!==e&&(T=a,l=Cl()),a=l,a===e&&(a=i,l=dn(),l!==e&&(T=a,l=Xa()),a=l,a===e&&(a=ra(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,R===0&&B(cr))))),j[$]={nextPos:i,result:a},a)}function ra(){var a,l,$,v,n,u,y=i*76+2,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.substr(i,2)===b?(l=b,i+=2):(l=e,R===0&&B(Jt)),l!==e){for($=[],v=i,n=i,R++,u=f(),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,u=f(),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);T=a,a=_l()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===_?(l=_,i+=2):(l=e,R===0&&B(Xr)),l!==e){for($=[],v=i,n=i,R++,t.substr(i,2)===k?(u=k,i+=2):(u=e,R===0&&B(zn)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.substr(i,2)===k?(u=k,i+=2):(u=e,R===0&&B(zn)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr)),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);t.substr(i,2)===k?(v=k,i+=2):(v=e,R===0&&B(zn)),v!==e?(T=a,a=Ya()):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function hn(){var a,l,$,v,n,u=i*76+3,y=j[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=d();$!==e;)l.push($),$=d();for($=Ps(),$===e&&($=null),v=[],n=d();n!==e;)v.push(n),n=d();return T=a,a=Pl($),j[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,v,n,u,y,p,x=i*76+4,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=pn(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=pn(),p!==e?(T=v,v=ei(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=pn(),p!==e?(T=v,v=ei(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=kl(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function at(){var a,l,$,v,n,u,y,p,x=i*76+5,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ur(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ur(),p!==e?(T=v,v=Qn(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ur(),p!==e?(T=v,v=Qn(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=El(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ts(){var a,l,$,v,n,u,y,p,x=i*76+6,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Nr(),l!==e){for($=[],v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Nr(),p!==e?(T=v,v=Zn(l,p)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,n=[],u=A();u!==e;)n.push(u),u=A();if(u=ue(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Nr(),p!==e?(T=v,v=Zn(l,p)):(i=v,v=e)}else i=v,v=e}T=a,a=Ml(l,$)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function pn(){var a,l=i*76+7,$=j[l];return $?(i=$.nextPos,$.result):(a=Hs(),a===e&&(a=bi(),a===e&&(a=Nr())),j[l]={nextPos:i,result:a},a)}function Ur(){var a,l=i*76+8,$=j[l];return $?(i=$.nextPos,$.result):(a=rs(),a===e&&(a=br(),a===e&&(a=Hs())),j[l]={nextPos:i,result:a},a)}function Nr(){var a,l=i*76+9,$=j[l];return $?(i=$.nextPos,$.result):(a=rs(),a===e&&(a=br(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e&&(a=xu(),a===e&&(a=Ci(),a===e&&(a=bu(),a===e&&(a=ss(),a===e&&(a=_i(),a===e&&(a=Cu(),a===e&&(a=_u(),a===e&&(a=rt()))))))))))),j[l]={nextPos:i,result:a},a)}function rt(){var a,l=i*76+10,$=j[l];return $?(i=$.nextPos,$.result):(a=Pi(),a===e&&(a=ds()),j[l]={nextPos:i,result:a},a)}function ds(){var a,l=i*76+11,$=j[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=Mu(),a===e&&(a=as(),a===e&&(a=ks()))),j[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,v,n,u,y=i*76+12,p=j[y];if(p)return i=p.nextPos,p.result;if(a=Ni(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=dn(),a===e&&(a=Ti(),a===e&&(a=pa(),a===e&&(a=ga(),a===e&&(a=da(),a===e&&(a=Eu(),a===e&&(a=ki(),a===e&&(a=ku(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=S,i++):(l=e,R===0&&B(Ot)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=rt(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e?(T=a,a=ti(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Qe(){var a,l=i*76+13,$=j[l];return $?(i=$.nextPos,$.result):(a=Ti(),a===e&&(a=dn(),a===e&&(a=pa(),a===e&&(a=ma(),a===e&&(a=Fi(),a===e&&(a=ga()))))),j[l]={nextPos:i,result:a},a)}function Hs(){var a,l,$,v,n,u,y,p,x,m,P=i*76+14,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===O?(l=O,i+=2):(l=e,R===0&&B(Ir)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(t.charCodeAt(i)===123?(u=D,i++):(u=e,R===0&&B(ar)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(p=at(),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();t.charCodeAt(i)===125?(m=H,i++):(m=e,R===0&&B(ut)),m!==e?(T=a,a=Sl(v,p)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function bi(){var a,l,$,v,n,u,y=i*76+15,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.substr(i,3)===ae?(l=ae,i+=3):(l=e,R===0&&B(Qt)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=Ze(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();u=Qe(),u!==e?(T=a,a=Nl(v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ae?(l=ae,i+=3):(l=e,R===0&&B(Qt)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();v=Qe(),v!==e?(T=a,a=Tl(v)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function rs(){var a,l,$,v,n,u,y,p,x,m=i*76+16,P=j[m];if(P)return i=P.nextPos,P.result;if(a=i,t.substr(i,3)===se?(l=se,i+=3):(l=e,R===0&&B(bs)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===58?(y=ie,i++):(y=e,R===0&&B(Zt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=it(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===61?(y=de,i++):(y=e,R===0&&B(Xt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=rt(),x!==e?(T=a,a=Ol(v,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===W?(l=W,i+=3):(l=e,R===0&&B(Yr)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===58?(y=ie,i++):(y=e,R===0&&B(Zt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=it(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===61?(y=de,i++):(y=e,R===0&&B(Xt)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();x=rt(),x!==e?(T=a,a=Fl(v,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[m]={nextPos:i,result:a},a}function Ai(){var a,l,$,v,n=i*76+17,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,R===0&&B(Ha)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();v=rt(),v!==e?(T=a,a=Rl(v)):(i=a,a=e)}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function xu(){var a,l,$,v,n,u,y,p=i*76+18,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===Q?(l=Q,i+=2):(l=e,R===0&&B(jr)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=Ze(),v!==e){for(n=i,u=[],y=d();y!==e;)u.push(y),y=d();for(y=Qe(),y!==e?n=y:(i=n,n=e),n===e&&(n=null),u=[],y=d();y!==e;)u.push(y),y=d();t.charCodeAt(i)===93?(y=X,i++):(y=e,R===0&&B(ps)),y!==e?(T=a,a=Il(v,n)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[p]={nextPos:i,result:a},a}function Ci(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+19,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,R===0&&B(Fs)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(t.substr(i,3)===se?(n=se,i+=3):(n=e,R===0&&B(bs)),n!==e){if(u=[],y=d(),y!==e)for(;y!==e;)u.push(y),y=d();else u=e;if(u!==e)if(y=Ze(),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,R===0&&B(yt)),x===e&&(x=null),m=[],P=d();P!==e;)m.push(P),P=d();if(P=rt(),P!==e)if(t.charCodeAt(i)===41?(C=E,i++):(C=e,R===0&&B(dt)),C!==e){for(N=[],I=d();I!==e;)N.push(I),I=d();I=Ue(),I!==e?(T=a,a=jl(y,P,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,R===0&&B(Fs)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(t.substr(i,3)===se?(v=se,i+=3):(v=e,R===0&&B(bs)),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();if(m=rt(),m!==e){if(P=[],C=d(),C!==e)for(;C!==e;)P.push(C),C=d();else P=e;P!==e?(C=Ue(),C!==e?(T=a,a=Dl(u,m,C)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function bu(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G=i*76+20,ne=j[G];if(ne)return i=ne.nextPos,ne.result;if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(t.substr(i,3)===se?(n=se,i+=3):(n=e,R===0&&B(bs)),n!==e){if(u=[],y=d(),y!==e)for(;y!==e;)u.push(y),y=d();else u=e;if(u!==e)if(y=Ze(),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();if(x=i,t.charCodeAt(i)===61?(m=de,i++):(m=e,R===0&&B(Xt)),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();C=rt(),C!==e?(T=x,x=Ll(y,C)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,R===0&&B(yt)),m===e&&(m=null),P=[],C=d();C!==e;)P.push(C),C=d();if(C=rt(),C!==e)if(t.charCodeAt(i)===41?(N=E,i++):(N=e,R===0&&B(dt)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();q=Ue(),q!==e?(T=a,a=Ul(y,x,C,q)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(t.substr(i,3)===se?(v=se,i+=3):(v=e,R===0&&B(bs)),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(p=i,t.charCodeAt(i)===61?(x=de,i++):(x=e,R===0&&B(Xt)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();P=rt(),P!==e?(T=p,p=Bl(u,P)):(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,R===0&&B(yt)),x===e&&(x=null),m=[],P=d();P!==e;)m.push(P),P=d();if(P=rt(),P!==e){if(C=[],N=d(),N!==e)for(;N!==e;)C.push(N),N=d();else C=e;C!==e?(N=Ue(),N!==e?(T=a,a=Hl(u,p,P,N)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===40?(v=S,i++):(v=e,R===0&&B(Ot)),v!==e)if(n=rt(),n!==e)if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();p=Ue(),p!==e?(T=a,a=ql(n,p)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===fe?(l=fe,i+=3):(l=e,R===0&&B(Ut)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=rt(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;n!==e?(u=Ue(),u!==e?(T=a,a=ri(v,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return j[G]={nextPos:i,result:a},a}function Au(){var a,l,$,v,n,u=i*76+21,y=j[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===le?(l=le,i+=6):(l=e,R===0&&B(Ys)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();n=rt(),n!==e?(T=a,a=Vl(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function ss(){var a,l,$,v,n,u,y,p,x=i*76+22,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===we?(l=we,i+=4):(l=e,R===0&&B(Lr)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===123?(v=D,i++):(v=e,R===0&&B(ar)),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();if(u=ts(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();t.charCodeAt(i)===125?(p=H,i++):(p=e,R===0&&B(ut)),p!==e?(T=a,a=zl(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function _i(){var a,l,$,v,n=i*76+23,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===_e?(l=_e,i+=5):(l=e,R===0&&B(il)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Kl()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function Cu(){var a,l,$,v,n=i*76+24,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===be?(l=be,i+=8):(l=e,R===0&&B(qa)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Wl()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function _u(){var a,l,$,v,n,u,y=i*76+25,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=rt(),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.substr(i,2)===nt?(v=nt,i+=2):(v=e,R===0&&B(ll)),v===e&&(t.substr(i,2)===mt?(v=mt,i+=2):(v=e,R===0&&B(ul)),v===e&&(t.charCodeAt(i)===61?(v=de,i++):(v=e,R===0&&B(Xt)))),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();u=rt(),u!==e?(T=a,a=Gl(l,v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Pi(){var a,l,$,v,n,u,y,p,x=i*76+26,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=ds(),l!==e){for($=[],v=i,n=[],u=ns();u!==e;)n.push(u),u=ns();if(u=sa(),u!==e){for(y=[],p=ns();p!==e;)y.push(p),p=ns();p=ds(),p!==e?(T=v,v=Xn(l,u,p)):(i=v,v=e)}else i=v,v=e;if(v!==e)for(;v!==e;){for($.push(v),v=i,n=[],u=ns();u!==e;)n.push(u),u=ns();if(u=sa(),u!==e){for(y=[],p=ns();p!==e;)y.push(p),p=ns();p=ds(),p!==e?(T=v,v=Xn(l,u,p)):(i=v,v=e)}else i=v,v=e}else $=e;$!==e?(T=a,a=Jl(l,$)):(i=a,a=e)}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ns(){var a,l,$,v=i*76+27,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,R===0&&B(Va)),l!==e?($=ue(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=A()),j[v]={nextPos:i,result:a},a)}function sa(){var a,l,$=i*76+28,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,R===0&&B(za)),l===e&&(t.substr(i,2)===wt?(l=wt,i+=2):(l=e,R===0&&B(ol)),l===e&&(t.substr(i,2)===Ye?(l=Ye,i+=2):(l=e,R===0&&B(fl)),l===e&&(t.substr(i,2)===bt?(l=bt,i+=2):(l=e,R===0&&B(cl)),l===e&&(t.substr(i,2)===Ht?(l=Ht,i+=2):(l=e,R===0&&B(hl)),l===e&&(t.substr(i,2)===nr?(l=nr,i+=2):(l=e,R===0&&B(Kn)),l===e&&(t.charCodeAt(i)===60?(l=vt,i++):(l=e,R===0&&B(en)),l===e&&(t.charCodeAt(i)===62?(l=Cr,i++):(l=e,R===0&&B(Wn)),l===e&&(t.charCodeAt(i)===43?(l=qt,i++):(l=e,R===0&&B(Ka)),l===e&&(t.charCodeAt(i)===45?(l=_r,i++):(l=e,R===0&&B(pl)),l===e&&(t.charCodeAt(i)===42?(l=Vt,i++):(l=e,R===0&&B(Wa)),l===e&&(t.charCodeAt(i)===94?(l=ye,i++):(l=e,R===0&&B(Rs)),l===e&&(t.charCodeAt(i)===47?(l=qe,i++):(l=e,R===0&&B(vl)),l===e&&(t.charCodeAt(i)===37?(l=Te,i++):(l=e,R===0&&B(gl))))))))))))))),l!==e&&(T=a,l=si()),a=l,j[$]={nextPos:i,result:a},a)}function ki(){var a,l,$,v=i*76+29,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===33?(l=et,i++):(l=e,R===0&&B(dl)),l!==e?($=rt(),$!==e?(T=a,a=Ql($)):(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function as(){var a,l,$,v,n=i*76+30,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],v=na(),v===e&&(v=Ei(),v===e&&(v=ia())),v!==e)for(;v!==e;)$.push(v),v=na(),v===e&&(v=Ei(),v===e&&(v=ia()));else $=e;$!==e?(T=a,a=Zl(l,$)):(i=a,a=e)}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function na(){var a,l,$,v,n,u,y=i*76+31,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===40?(l=S,i++):(l=e,R===0&&B(Ot)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=aa(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e?(T=a,a=Xl(v)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function aa(){var a,l,$,v,n,u,y=i*76+32,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=rt(),l!==e){for($=[],v=i,n=M(),n!==e?(u=rt(),u!==e?(T=v,v=ni(l,u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=rt(),u!==e?(T=v,v=ni(l,u)):(i=v,v=e)):(i=v,v=e);T=a,a=Yl(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function Ei(){var a,l,$,v,n,u,y=i*76+33,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=rt(),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=Yn(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function ia(){var a,l,$,v=i*76+34,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===46?(l=At,i++):(l=e,R===0&&B(Is)),l!==e?($=Ze(),$!==e?(T=a,a=eu($)):(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function Pu(){var a,l,$,v,n,u,y,p,x,m,P=i*76+35,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===J?(l=J,i+=2):(l=e,R===0&&B(Gn)),l!==e){if($=[],v=d(),v!==e)for(;v!==e;)$.push(v),v=d();else $=e;if($!==e)if(v=rt(),v!==e){if(n=[],u=d(),u!==e)for(;u!==e;)n.push(u),u=d();else n=e;if(n!==e)if(u=Ue(),u!==e){if(y=i,p=[],x=d(),x!==e)for(;x!==e;)p.push(x),x=d();else p=e;if(p!==e?(x=Mi(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),p=i,x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;x!==e?(m=Si(),m!==e?p=m:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),T=a,a=tu(v,u,y,p)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Mi(){var a,l,$,v,n,u,y=i*76+36,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=qs(),l!==e){for($=[],v=i,n=[],u=d();u!==e;)n.push(u),u=d();for(u=qs(),u!==e?v=u:(i=v,v=e);v!==e;){for($.push(v),v=i,n=[],u=d();u!==e;)n.push(u),u=d();u=qs(),u!==e?v=u:(i=v,v=e)}T=a,a=ru(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function qs(){var a,l,$,v,n,u,y,p=i*76+37,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===Z?(l=Z,i+=4):(l=e,R===0&&B(tn)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();if(n=rt(),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();y=Ue(),y!==e?(T=a,a=su(n,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[p]={nextPos:i,result:a},a}function Si(){var a,l,$,v,n,u=i*76+38,y=j[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===oe?(l=oe,i+=4):(l=e,R===0&&B(rn)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();n=Ue(),n!==e?(T=a,a=nu(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[u]={nextPos:i,result:a},a}function Ni(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=i*76+39,$e=j[Ie];if($e)return i=$e.nextPos,$e.result;if(a=i,t.substr(i,5)===Pe?(l=Pe,i+=5):(l=e,R===0&&B(yl)),l!==e)if($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();if(n=rt(),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();if(t.charCodeAt(i)===123?(y=D,i++):(y=e,R===0&&B(ar)),y!==e){for(p=[],x=d();x!==e;)p.push(x),x=d();if(x=[],m=i,P=rt(),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();T=m,m=ai(n,P,q)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,P=rt(),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();T=m,m=ai(n,P,q)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(P=Vt,i++):(P=e,R===0&&B(Wa)),P!==e){for(C=[],N=d();N!==e;)C.push(N),N=d();if(t.substr(i,2)===ce?(N=ce,i+=2):(N=e,R===0&&B(sn)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();if(q=Ue(),q!==e){for(G=[],ne=d();ne!==e;)G.push(ne),ne=d();m=q}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),P=[],C=d();C!==e;)P.push(C),C=d();t.charCodeAt(i)===125?(C=H,i++):(C=e,R===0&&B(ut)),C!==e?(T=a,a=ii(n,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return j[Ie]={nextPos:i,result:a},a}function vn(){var a,l,$,v,n,u,y,p,x=i*76+40,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ee?(l=Ee,i+=4):(l=e,R===0&&B(vs)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(t.charCodeAt(i)===123?(v=D,i++):(v=e,R===0&&B(ar)),v!==e){for(n=[],u=d();u!==e;)n.push(u),u=d();if(u=ts(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();t.charCodeAt(i)===125?(p=H,i++):(p=e,R===0&&B(ut)),p!==e?(T=a,a=li(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[x]={nextPos:i,result:a},a}function ku(){var a,l,$=i*76+41,v=j[$];return v?(i=v.nextPos,v.result):(a=i,l=Ri(),l!==e&&(T=a,l=ui(l)),a=l,j[$]={nextPos:i,result:a},a)}function gn(){var a,l,$,v,n,u,y=i*76+42,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===96?(l=De,i++):(l=e,R===0&&B(js)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===96?(u=De,i++):(u=e,R===0&&B(js)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=la(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===96?(u=De,i++):(u=e,R===0&&B(js)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=la(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===96?(v=De,i++):(v=e,R===0&&B(js)),v!==e?(T=a,a=au($)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function la(){var a,l,$,v,n,u,y=i*76+43,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=rt(),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();t.charCodeAt(i)===125?(u=H,i++):(u=e,R===0&&B(ut)),u!==e?a=v:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ua(),$!==e)for(;$!==e;)l.push($),$=ua();else l=e;l!==e&&(T=a,l=iu(l)),a=l}return j[y]={nextPos:i,result:a},a}function ua(){var a,l=i*76+44,$=j[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(ht.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Sr))),j[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,v=i*76+45,n=j[v];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,R===0&&B(Va)),l!==e?(wr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,R===0&&B(nn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),j[v]={nextPos:i,result:a},a)}function dn(){var a,l,$,v,n,u,y=i*76+46,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===34?(l=Oe,i++):(l=e,R===0&&B(an)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===34?(u=Oe,i++):(u=e,R===0&&B(an)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=fa(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=oi(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===34?(u=Oe,i++):(u=e,R===0&&B(an)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=fa(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=oi(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===34?(v=Oe,i++):(v=e,R===0&&B(an)),v!==e?(T=a,a=lu($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Fe,i++):(l=e,R===0&&B(ln)),l!==e){for($=[],v=i,n=i,R++,t.charCodeAt(i)===39?(u=Fe,i++):(u=e,R===0&&B(ln)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=fi(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=i,R++,t.charCodeAt(i)===39?(u=Fe,i++):(u=e,R===0&&B(ln)),R--,u===e?n=void 0:(i=n,n=e),n!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,R===0&&B(cr))),u!==e?(T=v,v=fi(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===39?(v=Fe,i++):(v=e,R===0&&B(ln)),v!==e?(T=a,a=ci($)):(i=a,a=e)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function fa(){var a,l,$=i*76+47,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===Ce?(l=Ce,i+=2):(l=e,R===0&&B(gs)),l!==e&&(T=a,l=uu()),a=l,j[$]={nextPos:i,result:a},a)}function yn(){var a,l,$=i*76+48,v=j[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===ft?(l=ft,i+=2):(l=e,R===0&&B(un)),l!==e&&(T=a,l=hi()),a=l,j[$]={nextPos:i,result:a},a)}function Ti(){var a,l=i*76+49,$=j[l];return $?(i=$.nextPos,$.result):(a=ca(),a===e&&(a=ha()),j[l]={nextPos:i,result:a},a)}function ca(){var a,l,$,v,n,u,y=i*76+50,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),ls.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(Ga)),l!==e){if($=[],St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur)),v!==e)for(;v!==e;)$.push(v),St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur));else $=e;if($!==e)if(t.charCodeAt(i)===46?(v=At,i++):(v=e,R===0&&B(Is)),v!==e){if(n=[],St.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,R===0&&B(ur)),u!==e)for(;u!==e;)n.push(u),St.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,R===0&&B(ur));else n=e;n!==e?(T=a,a=ou()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),St.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(ur)),l!==e)if(t.charCodeAt(i)===46?($=At,i++):($=e,R===0&&B(Is)),$!==e){if(v=[],St.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,R===0&&B(ur)),n!==e)for(;n!==e;)v.push(n),St.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,R===0&&B(ur));else v=e;v!==e?(T=a,a=fu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return j[y]={nextPos:i,result:a},a}function ha(){var a,l,$,v,n=i*76+51,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),ls.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(Ga)),l!==e){if($=[],St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur)),v!==e)for(;v!==e;)$.push(v),St.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(ur));else $=e;$!==e?(T=a,a=pi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,hs.test(t.charAt(i))?(t.charAt(i),i++):R===0&&B(Ds),St.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B(ur)),l!==e?(T=a,a=cu()):(i=a,a=e)),j[n]={nextPos:i,result:a},a}function pa(){var a,l=i*76+52,$=j[l];return $?(i=$.nextPos,$.result):(a=Oi(),a===e&&(a=va()),j[l]={nextPos:i,result:a},a)}function Oi(){var a,l,$,v,n=i*76+53,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Ke?(l=Ke,i+=4):(l=e,R===0&&B(Ja)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=vi()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function va(){var a,l,$,v,n=i*76+54,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===st?(l=st,i+=5):(l=e,R===0&&B($r)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=hu()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function ga(){var a,l,$,v,n=i*76+55,u=j[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===tt?(l=tt,i+=4):(l=e,R===0&&B(wl)),l!==e?($=i,R++,kt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Dr)),R--,v===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=pu()):(i=a,a=e)):(i=a,a=e),j[n]={nextPos:i,result:a},a)}function da(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+56,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=rt(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=gi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=rt(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=gi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=H,i++):(n=e,R===0&&B(ut)),n!==e?(T=a,a=vu(v)):(i=a,a=e)}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function Eu(){var a,l,$,v,n,u,y,p,x,m,P=i*76+57,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=rt(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=di(u)}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=rt(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=di(u)}else i=n,n=e;for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=ea(v)):(i=a,a=e)}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function ya(){var a,l,$,v,n,u,y,p=i*76+58,x=j[p];if(x)return i=x.nextPos,x.result;if(a=i,l=Ze(),l!==e){for($=i,v=[],n=d();n!==e;)v.push(n),n=d();if(t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e){for(u=[],y=d();y!==e;)u.push(y),y=d();y=it(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),T=a,a=gu(l,$)}else i=a,a=e;return j[p]={nextPos:i,result:a},a}function wa(){var a,l,$,v,n,u,y=i*76+59,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=ya(),l!==e){for($=[],v=i,n=M(),n!==e?(u=ya(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=ya(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);T=a,a=ta(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function br(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q,G,ne,Ie=i*76+60,$e=j[Ie];if($e)return i=$e.nextPos,$e.result;if(a=i,t.charCodeAt(i)===64?(l=Tt,i++):(l=e,R===0&&B(ml)),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(v=Ze(),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();if(t.charCodeAt(i)===40?(u=S,i++):(u=e,R===0&&B(Ot)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(p=wa(),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();if(t.charCodeAt(i)===41?(m=E,i++):(m=e,R===0&&B(dt)),m!==e){for(P=i,C=[],N=d();N!==e;)C.push(N),N=d();if(t.charCodeAt(i)===58?(N=ie,i++):(N=e,R===0&&B(Zt)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();q=it(),q!==e?P=q:(i=P,P=e)}else i=P,P=e;for(P===e&&(P=null),C=[],N=d();N!==e;)C.push(N),N=d();if(t.charCodeAt(i)===123?(N=D,i++):(N=e,R===0&&B(ar)),N!==e){for(I=[],q=d();q!==e;)I.push(q),q=d();for(q=ts(),q===e&&(q=null),G=[],ne=d();ne!==e;)G.push(ne),ne=d();t.charCodeAt(i)===125?(ne=H,i++):(ne=e,R===0&&B(ut)),ne!==e?(T=a,a=du($,v,n,p,P,q)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[Ie]={nextPos:i,result:a},a}function Mu(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I=i*76+61,q=j[I];if(q)return i=q.nextPos,q.result;if(a=i,t.substr(i,2)===Mt?(l=Mt,i+=2):(l=e,R===0&&B(Ls)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=wa(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=i,p=[],x=d();x!==e;)p.push(x),x=d();if(t.charCodeAt(i)===58?(x=ie,i++):(x=e,R===0&&B(Zt)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();P=it(),P!==e?y=P:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),p=[],x=d();x!==e;)p.push(x),x=d();if(t.charCodeAt(i)===123?(x=D,i++):(x=e,R===0&&B(ar)),x!==e){for(m=[],P=d();P!==e;)m.push(P),P=d();for(P=ts(),P===e&&(P=null),C=[],N=d();N!==e;)C.push(N),N=d();t.charCodeAt(i)===125?(N=H,i++):(N=e,R===0&&B(ut)),N!==e?(T=a,a=yu(v,y,P)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[I]={nextPos:i,result:a},a}function ma(){var a,l,$,v,n,u,y,p,x,m,P=i*76+62,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.charCodeAt(i)===91?(l=ct,i++):(l=e,R===0&&B(As)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Qe(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=yi(u)}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Qe(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();for(t.charCodeAt(i)===44?(p=Y,i++):(p=e,R===0&&B(yt)),p===e&&(p=null),x=[],m=d();m!==e;)x.push(m),m=d();T=n,n=yi(u)}else i=n,n=e;for(n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===93?(u=X,i++):(u=e,R===0&&B(ps)),u!==e?(T=a,a=wu(v)):(i=a,a=e)}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Fi(){var a,l,$,v,n,u,y,p,x,m,P,C,N,I,q=i*76+63,G=j[q];if(G)return i=G.nextPos,G.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();if(v=[],n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=Qe(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=wi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(v.push(n),n=i,u=Ze(),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,R===0&&B(Zt)),p!==e){if(x=[],m=d(),m!==e)for(;m!==e;)x.push(m),m=d();else x=e;if(x!==e)if(m=Qe(),m!==e){for(P=[],C=d();C!==e;)P.push(C),C=d();for(t.charCodeAt(i)===44?(C=Y,i++):(C=e,R===0&&B(yt)),C===e&&(t.charCodeAt(i)===59?(C=gt,i++):(C=e,R===0&&B(on))),C===e&&(C=null),N=[],I=d();I!==e;)N.push(I),I=d();T=n,n=wi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=H,i++):(n=e,R===0&&B(ut)),n!==e?(T=a,a=mi(v)):(i=a,a=e)}else i=a,a=e;return j[q]={nextPos:i,result:a},a}function it(){var a,l=i*76+64,$=j[l];return $?(i=$.nextPos,$.result):(a=Su(),a===e&&(a=hr()),j[l]={nextPos:i,result:a},a)}function Su(){var a,l,$,v,n,u,y,p,x,m,P=i*76+65,C=j[P];if(C)return i=C.nextPos,C.result;if(a=i,t.substr(i,2)===Mt?(l=Mt,i+=2):(l=e,R===0&&B(Ls)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=Es(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,R===0&&B(dt)),u!==e){for(y=[],p=d();p!==e;)y.push(p),p=d();if(t.substr(i,2)===ce?(p=ce,i+=2):(p=e,R===0&&B(sn)),p!==e){for(x=[],m=d();m!==e;)x.push(m),m=d();m=it(),m!==e?(T=a,a=mu(v,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return j[P]={nextPos:i,result:a},a}function Es(){var a,l,$,v,n,u,y=i*76+66,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=it(),l!==e){for($=[],v=i,n=M(),n!==e?(u=it(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,n=M(),n!==e?(u=it(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);T=a,a=$i(l,$)}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function hr(){var a,l,$,v,n,u,y,p,x=i*76+67,m=j[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ze(),l!==e){for($=[],v=A();v!==e;)$.push(v),v=A();if(t.charCodeAt(i)===60?(v=vt,i++):(v=e,R===0&&B(en)),v!==e){for(n=[],u=A();u!==e;)n.push(u),u=A();if(u=it(),u!==e){for(y=[],p=A();p!==e;)y.push(p),p=A();t.charCodeAt(i)===62?(p=Cr,i++):(p=e,R===0&&B(Wn)),p!==e?(T=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ze(),l!==e&&(T=a,l=re(l)),a=l),j[x]={nextPos:i,result:a},a}function Ze(){var a,l,$,v,n=i*76+68,u=j[n];if(u)return i=u.nextPos,u.result;if(a=i,zt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,R===0&&B($l)),l!==e){for($=[],Sn.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Jn));v!==e;)$.push(v),Sn.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,R===0&&B(Jn));T=a,a=Cs()}else i=a,a=e;return j[n]={nextPos:i,result:a},a}function Ri(){var a,l,$,v,n,u,y=i*76+69,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,l=Ze(),l!==e){for($=[],v=i,t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e?(u=Ze(),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,t.charCodeAt(i)===58?(n=ie,i++):(n=e,R===0&&B(Zt)),n!==e?(u=Ze(),u!==e?(n=[n,u],v=n):(i=v,v=e)):(i=v,v=e);T=a,a=xr()}else i=a,a=e;return j[y]={nextPos:i,result:a},a}function M(){var a,l,$,v,n,u=i*76+70,y=j[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=d();$!==e;)l.push($),$=d();if(t.charCodeAt(i)===44?($=Y,i++):($=e,R===0&&B(yt)),$!==e){for(v=[],n=d();n!==e;)v.push(n),n=d();l=[l,$,v],a=l}else i=a,a=e;if(a===e)if(a=[],l=d(),l!==e)for(;l!==e;)a.push(l),l=d();else a=e;return j[u]={nextPos:i,result:a},a}function Ue(){var a,l,$,v,n,u,y=i*76+71,p=j[y];if(p)return i=p.nextPos,p.result;if(a=i,t.charCodeAt(i)===123?(l=D,i++):(l=e,R===0&&B(ar)),l!==e){for($=[],v=d();v!==e;)$.push(v),v=d();for(v=ts(),v===e&&(v=null),n=[],u=d();u!==e;)n.push(u),u=d();t.charCodeAt(i)===125?(u=H,i++):(u=e,R===0&&B(ut)),u!==e?(T=a,a=fn(v)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Nr()),j[y]={nextPos:i,result:a},a}function ue(){var a,l=i*76+72,$=j[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Gt?(a=Gt,i+=2):(a=e,R===0&&B(xl)),a===e&&(mr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Qa))),j[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,v=j[$];return v?(i=v.nextPos,v.result):(a=i,R++,t.length>i?(l=t.charAt(i),i++):(l=e,R===0&&B(cr)),R--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ue()),j[$]={nextPos:i,result:a},a)}function d(){var a,l=i*76+74,$=j[l];return $?(i=$.nextPos,$.result):(nl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(bl)),j[l]={nextPos:i,result:a},a)}function A(){var a,l=i*76+75,$=j[l];return $?(i=$.nextPos,$.result):(al.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,R===0&&B(Al)),j[l]={nextPos:i,result:a},a)}function w(a,l,$){const v={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(v[u]=l[u]);const n=z();return v.loc={start:n.start.offset,end:n.end.offset-1},v}if(Nt=g(),Nt!==e&&i===t.length)return Nt;throw Nt!==e&&i<t.length&&B(me()),cn(te,o<t.length?t.charAt(o):null,o<t.length?Bs(o,o+1):Bs(o,o))}const W3=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function G3(t){return W3.includes(t.type)}function om(t){return"chain"in t&&t.chain!==null}function J3(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Q3(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Z3(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Kt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Kt(e.expr,r);break}case"return":{e.expr=Kt(e.expr,r);break}case"each":{e.items=Kt(e.items,r),e.for=Kt(e.for,r);break}case"for":{e.from!=null&&(e.from=Kt(e.from,r)),e.to!=null&&(e.to=Kt(e.to,r)),e.times!=null&&(e.times=Kt(e.times,r)),e.for=Kt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Kt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Kt(e.expr,r),e.dest=Kt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Kt(e.operands[s],r);break}case"not":{e.expr=Kt(e.expr,r);break}case"if":{e.cond=Kt(e.cond,r),e.then=Kt(e.then,r);for(const s of e.elseif)s.cond=Kt(s.cond,r),s.then=Kt(s.then,r);e.else!=null&&(e.else=Kt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Kt(e.children[s],r);break}case"match":{e.about=Kt(e.about,r);for(const s of e.qs)s.q=Kt(s.q,r),s.a=Kt(s.a,r);e.default!=null&&(e.default=Kt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Kt(e.statements[s],r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const h=e.tmpl[s];typeof h!="string"&&(e.tmpl[s]=Kt(h,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Kt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Kt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Kt(e.args[s],r);break}case"indexChain":{e.index=Kt(e.index,r);break}case"call":{e.target=Kt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Kt(e.args[s],r);break}case"index":{e.target=Kt(e.target,r),e.index=Kt(e.index,r);break}case"prop":{e.target=Kt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Kt(e.members[s],r);break}}if(om(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Kt(e.chain[s],r);return e}const wv=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function mv(t){throw new Ef(`Reserved word "${t}" cannot be used as variable name.`)}function X3(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{wv.includes(t.name)&&mv(t.name);break}case"meta":{t.name!=null&&wv.includes(t.name)&&mv(t.name);break}case"fn":{for(const r of t.args)wv.includes(r.name)&&mv(r.name);break}}return t}function Y3(t){for(const r of t)Kt(r,X3);return t}function Zy(t){return{type:"simple",name:t}}function e4(t,r){return{type:"generic",name:t,inners:r}}function t4(t,r){return{type:"fn",args:t,result:r}}function Bh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Bh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Bh(s)).join(", "),e=Bh(t.result);return`@(${r}) { ${e} }`}}}function pc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Zy(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=pc(t.inner):r=Zy("any"),e4(t.name,[r])}}throw new Ef(`Unknown type: '${Bh(t)}'`)}else{const r=t.args.map(e=>pc(e));return t4(r,pc(t.result))}}function r4(t){switch(t.type){case"def":{t.varType!=null&&pc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&pc(r.argType);t.retType!=null&&pc(t.retType);break}}return t}function s4(t){for(const r of t)Kt(r,r4);return t}function Hh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Hh(s.expr.children)),r.push(s);else{if(e.length>0)throw new Ef("invalid attribute.");switch(s.type){case"fn":{s.children=Hh(s.children);break}case"block":{s.statements=Hh(s.statements);break}}r.push(s)}if(e.length>0)throw new Ef("invalid attribute.");return r}function n4(t){if(G3(t)&&om(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const h of r)switch(h.type){case"callChain":{s=J3(s,h.args,h.loc);break}case"indexChain":{s=Q3(s,h.index,h.loc);break}case"propChain":{s=Z3(s,h.name,h.loc);break}}return s}return t}function a4(t){for(let r=0;r<t.length;r++)t[r]=Kt(t[r],n4);return t}function qh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function fm(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return qh(t,r,e);{const{left:s,right:h,info:g}=t;return qh(s,fm(h,r,e),g)}}function af(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[af(t.left),af(t.right)]}}const i4={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:af(t.left),right:af(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:af(t.left),right:af(t.right)}),priority:3}};function l4(t){const r=t.operators.map(s=>{const h=i4[s];if(h==null)throw new Ef(`No such operator: ${s}.`);return h});let e=qh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=fm(e,t.operands[2+s],r[1+s]);return af(e)}function u4(t){for(let r=0;r<t.length;r++)t[r]=Kt(t[r],e=>e.type==="infix"?l4(e):e);return t}const Xo=class Xo{constructor(){ve(this,"plugins");this.plugins={validate:[Y3,s4],transform:[Hh,a4,u4]}}static parse(r){return Xo.instance==null&&(Xo.instance=new Xo),Xo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Qy(r,{startRule:"Preprocess"});e=Qy(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new Ef(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`):new Ef(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}};ve(Xo,"instance");let bg=Xo;const o4="0.14.1",f4={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Ag=[],Pc=null;function c4(t){return Ag=bg.parse(t),JSON.stringify(Ag,null,"	")}async function h4(t){Pc==null||Pc.abort(),Pc=new Ba({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:mg(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:mg(e.val,!0),print:!1});break}}});try{await Pc.exec(Ag)}catch(r){t.err(r)}}const p4=Object.freeze(Object.defineProperty({__proto__:null,exec:h4,parse:c4,samples:f4,version:o4},Symbol.toStringTag,{value:"Module"})),v4={id:"root"},g4={id:"grid1"},d4={class:"type"},y4={id:"grid2"},cm=["develop","0.19.0","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],hm="0.19.0",w4=Mf({__name:"MainArea",props:{ver:{}},setup(t){const r=t,e={develop:IC,"0.19.0":__,"0.18.0":v2,"0.17.0":rP,"0.16.0":BP,"0.15.0":E3,"0.14.1":p4},s=La(()=>e[r.ver]),h=Object.fromEntries(cm.map(E=>[E,p1(E,'<: "Hello, AiScript!"')])),g=La({get(){return h[r.ver].value},set(E){h[r.ver].value=E}}),b=vc([]),_=vc(null),k=La(()=>{try{const E=s.value.parse(g.value);return _.value=null,E}catch(E){const O=E;return _.value=O.message,console.error("info"in O?O.info:O),`${O}`}});function S(){b.value=[],s.value.exec({in:E=>new Promise(O=>{const D=window.prompt(E);O(D??"")}),out:E=>b.value.push(E),end:E=>b.value.push(E),err:E=>{console.error(E),window.alert(`${E}`)}})}return(E,O)=>(Ss(),_n("div",v4,[rl("div",g4,[os(Q1,{modelValue:g.value,"onUpdate:modelValue":O[0]||(O[0]=D=>g.value=D),samples:s.value.samples,parseError:_.value,onRun:S},null,8,["modelValue","samples","parseError"]),os(Ec,{id:"logs"},{header:ja(()=>O[1]||(O[1]=[Ru("Output")])),default:ja(()=>[(Ss(!0),_n(jn,null,kv(b.value,D=>(Ss(),_n("div",{class:Dn(["log",[{print:D.print},D.type]]),key:D.id},[rl("span",d4,Fo(D.type),1),Ru(" "+Fo(D.text),1)],2))),128))]),_:1})]),rl("div",y4,[os(Ec,{id:"ast"},{header:ja(()=>O[2]||(O[2]=[Ru("AST")])),default:ja(()=>[rl("pre",null,Fo(k.value),1)]),_:1}),os(Ec,{id:"bin"},{header:ja(()=>O[3]||(O[3]=[Ru("Bytecode")])),default:ja(()=>[O[4]||(O[4]=rl("header",null,null,-1))]),_:1}),os(Ec,{id:"debugger"},{header:ja(()=>O[5]||(O[5]=[Ru("Debugger")])),_:1})])]))}}),m4=Yc(w4,[["__scopeId","data-v-ad635a2b"]]),$4={id:"wrapper"},x4=Mf({__name:"App",setup(t){const r=Jb(),e=Object.fromEntries(cm.map(h=>[h,h+(h==hm?"(latest)":"")]));function s(h){window.localStorage.setItem("version",h),r.push({path:h})}return(h,g)=>{const b=b$("RouterView");return Ss(),_n("div",$4,[rl("h1",null,[g[0]||(g[0]=Ru(" AiScript ( ")),os(_0,{id:"version",options:Yu(e),onSelect:s},{default:ja(()=>[Ru(Fo(Yu(r).currentRoute.value.params.ver),1)]),_:1},8,["options"]),g[1]||(g[1]=Ru(" ) Playground "))]),os(b)])}}}),b4=Yc(x4,[["__scopeId","data-v-e4789a81"]]),A4=Wb({history:Ab(),routes:[{path:"/",redirect:()=>window.localStorage.getItem("version")??hm},{path:"/:ver",component:m4,props:!0}]}),pm=qx(b4);pm.use(A4);pm.mount("#app");
