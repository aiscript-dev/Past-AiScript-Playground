var sd=Object.defineProperty;var nd=(t,r,e)=>r in t?sd(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var me=(t,r,e)=>(nd(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))n(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const $ of d.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&n($)}).observe(document,{childList:!0,subtree:!0});function e(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(h){if(h.ep)return;h.ep=!0;const d=e(h);fetch(h.href,d)}})();function jh(t,r){const e=Object.create(null),n=t.split(",");for(let h=0;h<n.length;h++)e[n[h]]=!0;return r?h=>!!e[h.toLowerCase()]:h=>!!e[h]}const ir={},yu=[],Dn=()=>{},ad=()=>!1,id=/^on[^a-z]/,sc=t=>id.test(t),Rh=t=>t.startsWith("onUpdate:"),Sr=Object.assign,Dh=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},ld=Object.prototype.hasOwnProperty,$t=(t,r)=>ld.call(t,r),Ge=Array.isArray,wu=t=>ac(t)==="[object Map]",kv=t=>ac(t)==="[object Set]",ft=t=>typeof t=="function",Pr=t=>typeof t=="string",nc=t=>typeof t=="symbol",ar=t=>t!==null&&typeof t=="object",Pv=t=>(ar(t)||ft(t))&&ft(t.then)&&ft(t.catch),Ev=Object.prototype.toString,ac=t=>Ev.call(t),od=t=>ac(t).slice(8,-1),Mv=t=>ac(t)==="[object Object]",Lh=t=>Pr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Pf=jh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ic=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},ud=/-(\w)/g,Ou=ic(t=>t.replace(ud,(r,e)=>e?e.toUpperCase():"")),fd=/\B([A-Z])/g,Ru=ic(t=>t.replace(fd,"-$1").toLowerCase()),Sv=ic(t=>t.charAt(0).toUpperCase()+t.slice(1)),xc=ic(t=>t?`on${Sv(t)}`:""),tu=(t,r)=>!Object.is(t,r),bc=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},Wf=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},cd=t=>{const r=parseFloat(t);return isNaN(r)?t:r},hd=t=>{const r=Pr(t)?Number(t):NaN;return isNaN(r)?t:r};let vp;const Kc=()=>vp||(vp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bh(t){if(Ge(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],h=Pr(n)?dd(n):Bh(n);if(h)for(const d in h)r[d]=h[d]}return r}else if(Pr(t)||ar(t))return t}const pd=/;(?![^(]*\))/g,vd=/:([^]+)/,gd=/\/\*[^]*?\*\//g;function dd(t){const r={};return t.replace(gd,"").split(pd).forEach(e=>{if(e){const n=e.split(vd);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Yr(t){let r="";if(Pr(t))r=t;else if(Ge(t))for(let e=0;e<t.length;e++){const n=Yr(t[e]);n&&(r+=n+" ")}else if(ar(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const yd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wd=jh(yd);function Fv(t){return!!t||t===""}const Wo=t=>Pr(t)?t:t==null?"":Ge(t)||ar(t)&&(t.toString===Ev||!ft(t.toString))?JSON.stringify(t,Ov,2):String(t),Ov=(t,r)=>r&&r.__v_isRef?Ov(t,r.value):wu(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,h])=>(e[`${n} =>`]=h,e),{})}:kv(r)?{[`Set(${r.size})`]:[...r.values()]}:ar(r)&&!Ge(r)&&!Mv(r)?String(r):r;let Tn;class md{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Tn,!r&&Tn&&(this.index=(Tn.scopes||(Tn.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=Tn;try{return Tn=this,r()}finally{Tn=e}}}on(){Tn=this}off(){Tn=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0,this._active=!1}}}function $d(t,r=Tn){r&&r.active&&r.effects.push(t)}function xd(){return Tn}const Hh=t=>{const r=new Set(t);return r.w=0,r.n=0,r},Nv=t=>(t.w&wi)>0,Tv=t=>(t.n&wi)>0,bd=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=wi},Ad=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const h=r[n];Nv(h)&&!Tv(h)?h.delete(t):r[e++]=h,h.w&=~wi,h.n&=~wi}r.length=e}},Jc=new WeakMap;let Vu=0,wi=1;const Zc=30;let In;const Vo=Symbol(""),Gc=Symbol("");class Uh{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,$d(this,n)}run(){if(!this.active)return this.fn();let r=In,e=gi;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=In,In=this,gi=!0,wi=1<<++Vu,Vu<=Zc?bd(this):gp(this),this.fn()}finally{Vu<=Zc&&Ad(this),wi=1<<--Vu,In=this.parent,gi=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){In===this?this.deferStop=!0:this.active&&(gp(this),this.onStop&&this.onStop(),this.active=!1)}}function gp(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let gi=!0;const Iv=[];function Du(){Iv.push(gi),gi=!1}function Lu(){const t=Iv.pop();gi=t===void 0?!0:t}function bs(t,r,e){if(gi&&In){let n=Jc.get(t);n||Jc.set(t,n=new Map);let h=n.get(e);h||n.set(e,h=Hh()),jv(h)}}function jv(t,r){let e=!1;Vu<=Zc?Tv(t)||(t.n|=wi,e=!Nv(t)):e=!t.has(In),e&&(t.add(In),In.deps.push(t))}function Ga(t,r,e,n,h,d){const $=Jc.get(t);if(!$)return;let b=[];if(r==="clear")b=[...$.values()];else if(e==="length"&&Ge(t)){const k=Number(n);$.forEach((E,F)=>{(F==="length"||!nc(F)&&F>=k)&&b.push(E)})}else switch(e!==void 0&&b.push($.get(e)),r){case"add":Ge(t)?Lh(e)&&b.push($.get("length")):(b.push($.get(Vo)),wu(t)&&b.push($.get(Gc)));break;case"delete":Ge(t)||(b.push($.get(Vo)),wu(t)&&b.push($.get(Gc)));break;case"set":wu(t)&&b.push($.get(Vo));break}if(b.length===1)b[0]&&Qc(b[0]);else{const k=[];for(const E of b)E&&k.push(...E);Qc(Hh(k))}}function Qc(t,r){const e=Ge(t)?t:[...t];for(const n of e)n.computed&&dp(n);for(const n of e)n.computed||dp(n)}function dp(t,r){(t!==In||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Cd=jh("__proto__,__v_isRef,__isVue"),Rv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(nc)),yp=_d();function _d(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=_t(this);for(let d=0,$=this.length;d<$;d++)bs(n,"get",d+"");const h=n[r](...e);return h===-1||h===!1?n[r](...e.map(_t)):h}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){Du();const n=_t(this)[r].apply(this,e);return Lu(),n}}),t}function kd(t){const r=_t(this);return bs(r,"has",t),r.hasOwnProperty(t)}class Dv{constructor(r=!1,e=!1){this._isReadonly=r,this._shallow=e}get(r,e,n){const h=this._isReadonly,d=this._shallow;if(e==="__v_isReactive")return!h;if(e==="__v_isReadonly")return h;if(e==="__v_isShallow")return d;if(e==="__v_raw"&&n===(h?d?Ld:Uv:d?Hv:Bv).get(r))return r;const $=Ge(r);if(!h){if($&&$t(yp,e))return Reflect.get(yp,e,n);if(e==="hasOwnProperty")return kd}const b=Reflect.get(r,e,n);return(nc(e)?Rv.has(e):Cd(e))||(h||bs(r,"get",e),d)?b:es(b)?$&&Lh(e)?b:b.value:ar(b)?h?qv(b):Wh(b):b}}class Lv extends Dv{constructor(r=!1){super(!1,r)}set(r,e,n,h){let d=r[e];if(Nu(d)&&es(d)&&!es(n))return!1;if(!this._shallow&&(!Vf(n)&&!Nu(n)&&(d=_t(d),n=_t(n)),!Ge(r)&&es(d)&&!es(n)))return d.value=n,!0;const $=Ge(r)&&Lh(e)?Number(e)<r.length:$t(r,e),b=Reflect.set(r,e,n,h);return r===_t(h)&&($?tu(n,d)&&Ga(r,"set",e,n):Ga(r,"add",e,n)),b}deleteProperty(r,e){const n=$t(r,e);r[e];const h=Reflect.deleteProperty(r,e);return h&&n&&Ga(r,"delete",e,void 0),h}has(r,e){const n=Reflect.has(r,e);return(!nc(e)||!Rv.has(e))&&bs(r,"has",e),n}ownKeys(r){return bs(r,"iterate",Ge(r)?"length":Vo),Reflect.ownKeys(r)}}class Pd extends Dv{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Ed=new Lv,Md=new Pd,Sd=new Lv(!0),qh=t=>t,lc=t=>Reflect.getPrototypeOf(t);function df(t,r,e=!1,n=!1){t=t.__v_raw;const h=_t(t),d=_t(r);e||(tu(r,d)&&bs(h,"get",r),bs(h,"get",d));const{has:$}=lc(h),b=n?qh:e?Kh:tf;if($.call(h,r))return b(t.get(r));if($.call(h,d))return b(t.get(d));t!==h&&t.get(r)}function yf(t,r=!1){const e=this.__v_raw,n=_t(e),h=_t(t);return r||(tu(t,h)&&bs(n,"has",t),bs(n,"has",h)),t===h?e.has(t):e.has(t)||e.has(h)}function wf(t,r=!1){return t=t.__v_raw,!r&&bs(_t(t),"iterate",Vo),Reflect.get(t,"size",t)}function wp(t){t=_t(t);const r=_t(this);return lc(r).has.call(r,t)||(r.add(t),Ga(r,"add",t,t)),this}function mp(t,r){r=_t(r);const e=_t(this),{has:n,get:h}=lc(e);let d=n.call(e,t);d||(t=_t(t),d=n.call(e,t));const $=h.call(e,t);return e.set(t,r),d?tu(r,$)&&Ga(e,"set",t,r):Ga(e,"add",t,r),this}function $p(t){const r=_t(this),{has:e,get:n}=lc(r);let h=e.call(r,t);h||(t=_t(t),h=e.call(r,t)),n&&n.call(r,t);const d=r.delete(t);return h&&Ga(r,"delete",t,void 0),d}function xp(){const t=_t(this),r=t.size!==0,e=t.clear();return r&&Ga(t,"clear",void 0,void 0),e}function mf(t,r){return function(n,h){const d=this,$=d.__v_raw,b=_t($),k=r?qh:t?Kh:tf;return!t&&bs(b,"iterate",Vo),$.forEach((E,F)=>n.call(h,k(E),k(F),d))}}function $f(t,r,e){return function(...n){const h=this.__v_raw,d=_t(h),$=wu(d),b=t==="entries"||t===Symbol.iterator&&$,k=t==="keys"&&$,E=h[t](...n),F=e?qh:r?Kh:tf;return!r&&bs(d,"iterate",k?Gc:Vo),{next(){const{value:j,done:D}=E.next();return D?{value:j,done:D}:{value:b?[F(j[0]),F(j[1])]:F(j),done:D}},[Symbol.iterator](){return this}}}}function ti(t){return function(...r){return t==="delete"?!1:this}}function Fd(){const t={get(d){return df(this,d)},get size(){return wf(this)},has:yf,add:wp,set:mp,delete:$p,clear:xp,forEach:mf(!1,!1)},r={get(d){return df(this,d,!1,!0)},get size(){return wf(this)},has:yf,add:wp,set:mp,delete:$p,clear:xp,forEach:mf(!1,!0)},e={get(d){return df(this,d,!0)},get size(){return wf(this,!0)},has(d){return yf.call(this,d,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:mf(!0,!1)},n={get(d){return df(this,d,!0,!0)},get size(){return wf(this,!0)},has(d){return yf.call(this,d,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:mf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=$f(d,!1,!1),e[d]=$f(d,!0,!1),r[d]=$f(d,!1,!0),n[d]=$f(d,!0,!0)}),[t,e,r,n]}const[Od,Nd,Td,Id]=Fd();function zh(t,r){const e=r?t?Id:Td:t?Nd:Od;return(n,h,d)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?n:Reflect.get($t(e,h)&&h in n?e:n,h,d)}const jd={get:zh(!1,!1)},Rd={get:zh(!1,!0)},Dd={get:zh(!0,!1)},Bv=new WeakMap,Hv=new WeakMap,Uv=new WeakMap,Ld=new WeakMap;function Bd(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hd(t){return t.__v_skip||!Object.isExtensible(t)?0:Bd(od(t))}function Wh(t){return Nu(t)?t:Vh(t,!1,Ed,jd,Bv)}function Ud(t){return Vh(t,!1,Sd,Rd,Hv)}function qv(t){return Vh(t,!0,Md,Dd,Uv)}function Vh(t,r,e,n,h){if(!ar(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const d=h.get(t);if(d)return d;const $=Hd(t);if($===0)return t;const b=new Proxy(t,$===2?n:e);return h.set(t,b),b}function mu(t){return Nu(t)?mu(t.__v_raw):!!(t&&t.__v_isReactive)}function Nu(t){return!!(t&&t.__v_isReadonly)}function Vf(t){return!!(t&&t.__v_isShallow)}function zv(t){return mu(t)||Nu(t)}function _t(t){const r=t&&t.__v_raw;return r?_t(r):t}function Wv(t){return Wf(t,"__v_skip",!0),t}const tf=t=>ar(t)?Wh(t):t,Kh=t=>ar(t)?qv(t):t;function Vv(t){gi&&In&&(t=_t(t),jv(t.dep||(t.dep=Hh())))}function Kv(t,r){t=_t(t);const e=t.dep;e&&Qc(e)}function es(t){return!!(t&&t.__v_isRef===!0)}function Bo(t){return qd(t,!1)}function qd(t,r){return es(t)?t:new zd(t,r)}class zd{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:_t(r),this._value=e?r:tf(r)}get value(){return Vv(this),this._value}set value(r){const e=this.__v_isShallow||Vf(r)||Nu(r);r=e?r:_t(r),tu(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:tf(r),Kv(this))}}function rf(t){return es(t)?t.value:t}const Wd={get:(t,r,e)=>rf(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const h=t[r];return es(h)&&!es(e)?(h.value=e,!0):Reflect.set(t,r,e,n)}};function Jv(t){return mu(t)?t:new Proxy(t,Wd)}class Vd{constructor(r,e,n,h){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Uh(r,()=>{this._dirty||(this._dirty=!0,Kv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=n}get value(){const r=_t(this);return Vv(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function Kd(t,r,e=!1){let n,h;const d=ft(t);return d?(n=t,h=Dn):(n=t.get,h=t.set),new Vd(n,h,d||!h,e)}function di(t,r,e,n){let h;try{h=n?t(...n):t()}catch(d){oc(d,r,e)}return h}function hn(t,r,e,n){if(ft(t)){const d=di(t,r,e,n);return d&&Pv(d)&&d.catch($=>{oc($,r,e)}),d}const h=[];for(let d=0;d<t.length;d++)h.push(hn(t[d],r,e,n));return h}function oc(t,r,e,n=!0){const h=r?r.vnode:null;if(r){let d=r.parent;const $=r.proxy,b=e;for(;d;){const E=d.ec;if(E){for(let F=0;F<E.length;F++)if(E[F](t,$,b)===!1)return}d=d.parent}const k=r.appContext.config.errorHandler;if(k){di(k,null,10,[t,$,b]);return}}Jd(t,e,h,n)}function Jd(t,r,e,n=!0){console.error(t)}let sf=!1,Xc=!1;const Xr=[];let qn=0;const $u=[];let Wa=null,jo=0;const Zv=Promise.resolve();let Jh=null;function Zd(t){const r=Jh||Zv;return t?r.then(this?t.bind(this):t):r}function Gd(t){let r=qn+1,e=Xr.length;for(;r<e;){const n=r+e>>>1,h=Xr[n],d=nf(h);d<t||d===t&&h.pre?r=n+1:e=n}return r}function Zh(t){(!Xr.length||!Xr.includes(t,sf&&t.allowRecurse?qn+1:qn))&&(t.id==null?Xr.push(t):Xr.splice(Gd(t.id),0,t),Gv())}function Gv(){!sf&&!Xc&&(Xc=!0,Jh=Zv.then(Xv))}function Qd(t){const r=Xr.indexOf(t);r>qn&&Xr.splice(r,1)}function Xd(t){Ge(t)?$u.push(...t):(!Wa||!Wa.includes(t,t.allowRecurse?jo+1:jo))&&$u.push(t),Gv()}function bp(t,r=sf?qn+1:0){for(;r<Xr.length;r++){const e=Xr[r];e&&e.pre&&(Xr.splice(r,1),r--,e())}}function Qv(t){if($u.length){const r=[...new Set($u)];if($u.length=0,Wa){Wa.push(...r);return}for(Wa=r,Wa.sort((e,n)=>nf(e)-nf(n)),jo=0;jo<Wa.length;jo++)Wa[jo]();Wa=null,jo=0}}const nf=t=>t.id==null?1/0:t.id,Yd=(t,r)=>{const e=nf(t)-nf(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Xv(t){Xc=!1,sf=!0,Xr.sort(Yd);const r=Dn;try{for(qn=0;qn<Xr.length;qn++){const e=Xr[qn];e&&e.active!==!1&&di(e,null,14)}}finally{qn=0,Xr.length=0,Qv(),sf=!1,Jh=null,(Xr.length||$u.length)&&Xv()}}function ey(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||ir;let h=e;const d=r.startsWith("update:"),$=d&&r.slice(7);if($&&$ in n){const F=`${$==="modelValue"?"model":$}Modifiers`,{number:j,trim:D}=n[F]||ir;D&&(h=e.map(V=>Pr(V)?V.trim():V)),j&&(h=e.map(cd))}let b,k=n[b=xc(r)]||n[b=xc(Ou(r))];!k&&d&&(k=n[b=xc(Ru(r))]),k&&hn(k,t,6,h);const E=n[b+"Once"];if(E){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,hn(E,t,6,h)}}function Yv(t,r,e=!1){const n=r.emitsCache,h=n.get(t);if(h!==void 0)return h;const d=t.emits;let $={},b=!1;if(!ft(t)){const k=E=>{const F=Yv(E,r,!0);F&&(b=!0,Sr($,F))};!e&&r.mixins.length&&r.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}return!d&&!b?(ar(t)&&n.set(t,null),null):(Ge(d)?d.forEach(k=>$[k]=null):Sr($,d),ar(t)&&n.set(t,$),$)}function uc(t,r){return!t||!sc(r)?!1:(r=r.slice(2).replace(/Once$/,""),$t(t,r[0].toLowerCase()+r.slice(1))||$t(t,Ru(r))||$t(t,r))}let ys=null,fc=null;function Kf(t){const r=ys;return ys=t,fc=t&&t.type.__scopeId||null,r}function ty(t){fc=t}function ry(){fc=null}function xs(t,r=ys,e){if(!r||t._n)return t;const n=(...h)=>{n._d&&Np(-1);const d=Kf(r);let $;try{$=t(...h)}finally{Kf(d),n._d&&Np(1)}return $};return n._n=!0,n._c=!0,n._d=!0,n}function Ac(t){const{type:r,vnode:e,proxy:n,withProxy:h,props:d,propsOptions:[$],slots:b,attrs:k,emit:E,render:F,renderCache:j,data:D,setupState:V,ctx:pe,inheritAttrs:ee}=t;let ae,_e;const H=Kf(t);try{if(e.shapeFlag&4){const B=h||n;ae=Un(F.call(B,B,j,d,V,D,pe)),_e=k}else{const B=r;ae=Un(B.length>1?B(d,{attrs:k,slots:b,emit:E}):B(d,null)),_e=r.props?k:sy(k)}}catch(B){Xu.length=0,oc(B,t,1),ae=hr(pn)}let L=ae;if(_e&&ee!==!1){const B=Object.keys(_e),{shapeFlag:q}=L;B.length&&q&7&&($&&B.some(Rh)&&(_e=ny(_e,$)),L=mi(L,_e))}return e.dirs&&(L=mi(L),L.dirs=L.dirs?L.dirs.concat(e.dirs):e.dirs),e.transition&&(L.transition=e.transition),ae=L,Kf(H),ae}const sy=t=>{let r;for(const e in t)(e==="class"||e==="style"||sc(e))&&((r||(r={}))[e]=t[e]);return r},ny=(t,r)=>{const e={};for(const n in t)(!Rh(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function ay(t,r,e){const{props:n,children:h,component:d}=t,{props:$,children:b,patchFlag:k}=r,E=d.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&k>=0){if(k&1024)return!0;if(k&16)return n?Ap(n,$,E):!!$;if(k&8){const F=r.dynamicProps;for(let j=0;j<F.length;j++){const D=F[j];if($[D]!==n[D]&&!uc(E,D))return!0}}}else return(h||b)&&(!b||!b.$stable)?!0:n===$?!1:n?$?Ap(n,$,E):!0:!!$;return!1}function Ap(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let h=0;h<n.length;h++){const d=n[h];if(r[d]!==t[d]&&!uc(e,d))return!0}return!1}function iy({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const ly=Symbol.for("v-ndc"),oy=t=>t.__isSuspense;function uy(t,r){r&&r.pendingBranch?Ge(t)?r.effects.push(...t):r.effects.push(t):Xd(t)}const xf={};function Zu(t,r,e){return eg(t,r,e)}function eg(t,r,{immediate:e,deep:n,flush:h,onTrack:d,onTrigger:$}=ir){var b;const k=xd()===((b=qr)==null?void 0:b.scope)?qr:null;let E,F=!1,j=!1;if(es(t)?(E=()=>t.value,F=Vf(t)):mu(t)?(E=()=>t,n=!0):Ge(t)?(j=!0,F=t.some(B=>mu(B)||Vf(B)),E=()=>t.map(B=>{if(es(B))return B.value;if(mu(B))return du(B);if(ft(B))return di(B,k,2)})):ft(t)?r?E=()=>di(t,k,2):E=()=>{if(!(k&&k.isUnmounted))return D&&D(),hn(t,k,3,[V])}:E=Dn,r&&n){const B=E;E=()=>du(B())}let D,V=B=>{D=H.onStop=()=>{di(B,k,4)}},pe;if(lf)if(V=Dn,r?e&&hn(r,k,3,[E(),j?[]:void 0,V]):E(),h==="sync"){const B=nw();pe=B.__watcherHandles||(B.__watcherHandles=[])}else return Dn;let ee=j?new Array(t.length).fill(xf):xf;const ae=()=>{if(H.active)if(r){const B=H.run();(n||F||(j?B.some((q,J)=>tu(q,ee[J])):tu(B,ee)))&&(D&&D(),hn(r,k,3,[B,ee===xf?void 0:j&&ee[0]===xf?[]:ee,V]),ee=B)}else H.run()};ae.allowRecurse=!!r;let _e;h==="sync"?_e=ae:h==="post"?_e=()=>$s(ae,k&&k.suspense):(ae.pre=!0,k&&(ae.id=k.uid),_e=()=>Zh(ae));const H=new Uh(E,_e);r?e?ae():ee=H.run():h==="post"?$s(H.run.bind(H),k&&k.suspense):H.run();const L=()=>{H.stop(),k&&k.scope&&Dh(k.scope.effects,H)};return pe&&pe.push(L),L}function fy(t,r,e){const n=this.proxy,h=Pr(t)?t.includes(".")?tg(n,t):()=>n[t]:t.bind(n,n);let d;ft(r)?d=r:(d=r.handler,e=r);const $=qr;Iu(this);const b=eg(h,d.bind(n),e);return $?Iu($):Ko(),b}function tg(t,r){const e=r.split(".");return()=>{let n=t;for(let h=0;h<e.length&&n;h++)n=n[e[h]];return n}}function du(t,r){if(!ar(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),es(t))du(t.value,r);else if(Ge(t))for(let e=0;e<t.length;e++)du(t[e],r);else if(kv(t)||wu(t))t.forEach(e=>{du(e,r)});else if(Mv(t))for(const e in t)du(t[e],r);return t}function Oo(t,r,e,n){const h=t.dirs,d=r&&r.dirs;for(let $=0;$<h.length;$++){const b=h[$];d&&(b.oldValue=d[$].value);let k=b.dir[n];k&&(Du(),hn(k,e,8,[t.el,b,t,r]),Lu())}}const oi=Symbol("_leaveCb"),bf=Symbol("_enterCb");function cy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ig(()=>{t.isMounted=!0}),lg(()=>{t.isUnmounting=!0}),t}const nn=[Function,Array],rg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:nn,onEnter:nn,onAfterEnter:nn,onEnterCancelled:nn,onBeforeLeave:nn,onLeave:nn,onAfterLeave:nn,onLeaveCancelled:nn,onBeforeAppear:nn,onAppear:nn,onAfterAppear:nn,onAppearCancelled:nn},hy={name:"BaseTransition",props:rg,setup(t,{slots:r}){const e=Gy(),n=cy();let h;return()=>{const d=r.default&&ng(r.default(),!0);if(!d||!d.length)return;let $=d[0];if(d.length>1){for(const ee of d)if(ee.type!==pn){$=ee;break}}const b=_t(t),{mode:k}=b;if(n.isLeaving)return Cc($);const E=Cp($);if(!E)return Cc($);const F=Yc(E,b,n,e);eh(E,F);const j=e.subTree,D=j&&Cp(j);let V=!1;const{getTransitionKey:pe}=E.type;if(pe){const ee=pe();h===void 0?h=ee:ee!==h&&(h=ee,V=!0)}if(D&&D.type!==pn&&(!Ro(E,D)||V)){const ee=Yc(D,b,n,e);if(eh(D,ee),k==="out-in")return n.isLeaving=!0,ee.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},Cc($);k==="in-out"&&E.type!==pn&&(ee.delayLeave=(ae,_e,H)=>{const L=sg(n,D);L[String(D.key)]=D,ae[oi]=()=>{_e(),ae[oi]=void 0,delete F.delayedLeave},F.delayedLeave=H})}return $}}},py=hy;function sg(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Yc(t,r,e,n){const{appear:h,mode:d,persisted:$=!1,onBeforeEnter:b,onEnter:k,onAfterEnter:E,onEnterCancelled:F,onBeforeLeave:j,onLeave:D,onAfterLeave:V,onLeaveCancelled:pe,onBeforeAppear:ee,onAppear:ae,onAfterAppear:_e,onAppearCancelled:H}=r,L=String(t.key),B=sg(e,t),q=(Q,X)=>{Q&&hn(Q,n,9,X)},J=(Q,X)=>{const $e=X[1];q(Q,X),Ge(Q)?Q.every(ke=>ke.length<=1)&&$e():Q.length<=1&&$e()},G={mode:d,persisted:$,beforeEnter(Q){let X=b;if(!e.isMounted)if(h)X=ee||b;else return;Q[oi]&&Q[oi](!0);const $e=B[L];$e&&Ro(t,$e)&&$e.el[oi]&&$e.el[oi](),q(X,[Q])},enter(Q){let X=k,$e=E,ke=F;if(!e.isMounted)if(h)X=ae||k,$e=_e||E,ke=H||F;else return;let ge=!1;const qe=Q[bf]=it=>{ge||(ge=!0,it?q(ke,[Q]):q($e,[Q]),G.delayedLeave&&G.delayedLeave(),Q[bf]=void 0)};X?J(X,[Q,qe]):qe()},leave(Q,X){const $e=String(t.key);if(Q[bf]&&Q[bf](!0),e.isUnmounting)return X();q(j,[Q]);let ke=!1;const ge=Q[oi]=qe=>{ke||(ke=!0,X(),qe?q(pe,[Q]):q(V,[Q]),Q[oi]=void 0,B[$e]===t&&delete B[$e])};B[$e]=t,D?J(D,[Q,ge]):ge()},clone(Q){return Yc(Q,r,e,n)}};return G}function Cc(t){if(cc(t))return t=mi(t),t.children=null,t}function Cp(t){return cc(t)?t.children?t.children[0]:void 0:t}function eh(t,r){t.shapeFlag&6&&t.component?eh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function ng(t,r=!1,e){let n=[],h=0;for(let d=0;d<t.length;d++){let $=t[d];const b=e==null?$.key:String(e)+String($.key!=null?$.key:d);$.type===Qr?($.patchFlag&128&&h++,n=n.concat(ng($.children,r,b))):(r||$.type!==pn)&&n.push(b!=null?mi($,{key:b}):$)}if(h>1)for(let d=0;d<n.length;d++)n[d].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function uf(t,r){return ft(t)?(()=>Sr({name:t.name},r,{setup:t}))():t}const Gu=t=>!!t.type.__asyncLoader,cc=t=>t.type.__isKeepAlive;function vy(t,r){ag(t,"a",r)}function gy(t,r){ag(t,"da",r)}function ag(t,r,e=qr){const n=t.__wdc||(t.__wdc=()=>{let h=e;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(hc(r,n,e),e){let h=e.parent;for(;h&&h.parent;)cc(h.parent.vnode)&&dy(n,r,e,h),h=h.parent}}function dy(t,r,e,n){const h=hc(r,t,n,!0);og(()=>{Dh(n[r],h)},e)}function hc(t,r,e=qr,n=!1){if(e){const h=e[t]||(e[t]=[]),d=r.__weh||(r.__weh=(...$)=>{if(e.isUnmounted)return;Du(),Iu(e);const b=hn(r,e,t,$);return Ko(),Lu(),b});return n?h.unshift(d):h.push(d),d}}const Qa=t=>(r,e=qr)=>(!lf||t==="sp")&&hc(t,(...n)=>r(...n),e),yy=Qa("bm"),ig=Qa("m"),wy=Qa("bu"),my=Qa("u"),lg=Qa("bum"),og=Qa("um"),$y=Qa("sp"),xy=Qa("rtg"),by=Qa("rtc");function Ay(t,r=qr){hc("ec",t,r)}function Jf(t,r,e,n){let h;const d=e&&e[n];if(Ge(t)||Pr(t)){h=new Array(t.length);for(let $=0,b=t.length;$<b;$++)h[$]=r(t[$],$,void 0,d&&d[$])}else if(typeof t=="number"){h=new Array(t);for(let $=0;$<t;$++)h[$]=r($+1,$,void 0,d&&d[$])}else if(ar(t))if(t[Symbol.iterator])h=Array.from(t,($,b)=>r($,b,void 0,d&&d[b]));else{const $=Object.keys(t);h=new Array($.length);for(let b=0,k=$.length;b<k;b++){const E=$[b];h[b]=r(t[E],E,b,d&&d[b])}}else h=[];return e&&(e[n]=h),h}function Ef(t,r,e={},n,h){if(ys.isCE||ys.parent&&Gu(ys.parent)&&ys.parent.isCE)return r!=="default"&&(e.name=r),hr("slot",e,n&&n());let d=t[r];d&&d._c&&(d._d=!1),cr();const $=d&&ug(d(e)),b=vc(Qr,{key:e.key||$&&$.key||`_${r}`},$||(n?n():[]),$&&t._===1?64:-2);return!h&&b.scopeId&&(b.slotScopeIds=[b.scopeId+"-s"]),d&&d._c&&(d._d=!0),b}function ug(t){return t.some(r=>Qf(r)?!(r.type===pn||r.type===Qr&&!ug(r.children)):!0)?t:null}const th=t=>t?$g(t)?ep(t)||t.proxy:th(t.parent):null,Qu=Sr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>th(t.parent),$root:t=>th(t.root),$emit:t=>t.emit,$options:t=>Gh(t),$forceUpdate:t=>t.f||(t.f=()=>Zh(t.update)),$nextTick:t=>t.n||(t.n=Zd.bind(t.proxy)),$watch:t=>fy.bind(t)}),_c=(t,r)=>t!==ir&&!t.__isScriptSetup&&$t(t,r),Cy={get({_:t},r){const{ctx:e,setupState:n,data:h,props:d,accessCache:$,type:b,appContext:k}=t;let E;if(r[0]!=="$"){const V=$[r];if(V!==void 0)switch(V){case 1:return n[r];case 2:return h[r];case 4:return e[r];case 3:return d[r]}else{if(_c(n,r))return $[r]=1,n[r];if(h!==ir&&$t(h,r))return $[r]=2,h[r];if((E=t.propsOptions[0])&&$t(E,r))return $[r]=3,d[r];if(e!==ir&&$t(e,r))return $[r]=4,e[r];rh&&($[r]=0)}}const F=Qu[r];let j,D;if(F)return r==="$attrs"&&bs(t,"get",r),F(t);if((j=b.__cssModules)&&(j=j[r]))return j;if(e!==ir&&$t(e,r))return $[r]=4,e[r];if(D=k.config.globalProperties,$t(D,r))return D[r]},set({_:t},r,e){const{data:n,setupState:h,ctx:d}=t;return _c(h,r)?(h[r]=e,!0):n!==ir&&$t(n,r)?(n[r]=e,!0):$t(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(d[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:h,propsOptions:d}},$){let b;return!!e[$]||t!==ir&&$t(t,$)||_c(r,$)||(b=d[0])&&$t(b,$)||$t(n,$)||$t(Qu,$)||$t(h.config.globalProperties,$)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:$t(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function _p(t){return Ge(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let rh=!0;function _y(t){const r=Gh(t),e=t.proxy,n=t.ctx;rh=!1,r.beforeCreate&&kp(r.beforeCreate,t,"bc");const{data:h,computed:d,methods:$,watch:b,provide:k,inject:E,created:F,beforeMount:j,mounted:D,beforeUpdate:V,updated:pe,activated:ee,deactivated:ae,beforeDestroy:_e,beforeUnmount:H,destroyed:L,unmounted:B,render:q,renderTracked:J,renderTriggered:G,errorCaptured:Q,serverPrefetch:X,expose:$e,inheritAttrs:ke,components:ge,directives:qe,filters:it}=r;if(E&&ky(E,n,null),$)for(const ot in $){const Ie=$[ot];ft(Ie)&&(n[ot]=Ie.bind(e))}if(h){const ot=h.call(e,e);ar(ot)&&(t.data=Wh(ot))}if(rh=!0,d)for(const ot in d){const Ie=d[ot],at=ft(Ie)?Ie.bind(e,e):ft(Ie.get)?Ie.get.bind(e,e):Dn,Mt=!ft(Ie)&&ft(Ie.set)?Ie.set.bind(e):Dn,St=rw({get:at,set:Mt});Object.defineProperty(n,ot,{enumerable:!0,configurable:!0,get:()=>St.value,set:Qe=>St.value=Qe})}if(b)for(const ot in b)fg(b[ot],n,e,ot);if(k){const ot=ft(k)?k.call(e):k;Reflect.ownKeys(ot).forEach(Ie=>{Oy(Ie,ot[Ie])})}F&&kp(F,t,"c");function lt(ot,Ie){Ge(Ie)?Ie.forEach(at=>ot(at.bind(e))):Ie&&ot(Ie.bind(e))}if(lt(yy,j),lt(ig,D),lt(wy,V),lt(my,pe),lt(vy,ee),lt(gy,ae),lt(Ay,Q),lt(by,J),lt(xy,G),lt(lg,H),lt(og,B),lt($y,X),Ge($e))if($e.length){const ot=t.exposed||(t.exposed={});$e.forEach(Ie=>{Object.defineProperty(ot,Ie,{get:()=>e[Ie],set:at=>e[Ie]=at})})}else t.exposed||(t.exposed={});q&&t.render===Dn&&(t.render=q),ke!=null&&(t.inheritAttrs=ke),ge&&(t.components=ge),qe&&(t.directives=qe)}function ky(t,r,e=Dn){Ge(t)&&(t=sh(t));for(const n in t){const h=t[n];let d;ar(h)?"default"in h?d=Mf(h.from||n,h.default,!0):d=Mf(h.from||n):d=Mf(h),es(d)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>d.value,set:$=>d.value=$}):r[n]=d}}function kp(t,r,e){hn(Ge(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function fg(t,r,e,n){const h=n.includes(".")?tg(e,n):()=>e[n];if(Pr(t)){const d=r[t];ft(d)&&Zu(h,d)}else if(ft(t))Zu(h,t.bind(e));else if(ar(t))if(Ge(t))t.forEach(d=>fg(d,r,e,n));else{const d=ft(t.handler)?t.handler.bind(e):r[t.handler];ft(d)&&Zu(h,d,t)}}function Gh(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:h,optionsCache:d,config:{optionMergeStrategies:$}}=t.appContext,b=d.get(r);let k;return b?k=b:!h.length&&!e&&!n?k=r:(k={},h.length&&h.forEach(E=>Zf(k,E,$,!0)),Zf(k,r,$)),ar(r)&&d.set(r,k),k}function Zf(t,r,e,n=!1){const{mixins:h,extends:d}=r;d&&Zf(t,d,e,!0),h&&h.forEach($=>Zf(t,$,e,!0));for(const $ in r)if(!(n&&$==="expose")){const b=Py[$]||e&&e[$];t[$]=b?b(t[$],r[$]):r[$]}return t}const Py={data:Pp,props:Ep,emits:Ep,methods:Ku,computed:Ku,beforeCreate:cs,created:cs,beforeMount:cs,mounted:cs,beforeUpdate:cs,updated:cs,beforeDestroy:cs,beforeUnmount:cs,destroyed:cs,unmounted:cs,activated:cs,deactivated:cs,errorCaptured:cs,serverPrefetch:cs,components:Ku,directives:Ku,watch:My,provide:Pp,inject:Ey};function Pp(t,r){return r?t?function(){return Sr(ft(t)?t.call(this,this):t,ft(r)?r.call(this,this):r)}:r:t}function Ey(t,r){return Ku(sh(t),sh(r))}function sh(t){if(Ge(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function cs(t,r){return t?[...new Set([].concat(t,r))]:r}function Ku(t,r){return t?Sr(Object.create(null),t,r):r}function Ep(t,r){return t?Ge(t)&&Ge(r)?[...new Set([...t,...r])]:Sr(Object.create(null),_p(t),_p(r??{})):r}function My(t,r){if(!t)return r;if(!r)return t;const e=Sr(Object.create(null),t);for(const n in r)e[n]=cs(t[n],r[n]);return e}function cg(){return{app:null,config:{isNativeTag:ad,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Sy=0;function Fy(t,r){return function(n,h=null){ft(n)||(n=Sr({},n)),h!=null&&!ar(h)&&(h=null);const d=cg(),$=new WeakSet;let b=!1;const k=d.app={_uid:Sy++,_component:n,_props:h,_container:null,_context:d,_instance:null,version:aw,get config(){return d.config},set config(E){},use(E,...F){return $.has(E)||(E&&ft(E.install)?($.add(E),E.install(k,...F)):ft(E)&&($.add(E),E(k,...F))),k},mixin(E){return d.mixins.includes(E)||d.mixins.push(E),k},component(E,F){return F?(d.components[E]=F,k):d.components[E]},directive(E,F){return F?(d.directives[E]=F,k):d.directives[E]},mount(E,F,j){if(!b){const D=hr(n,h);return D.appContext=d,F&&r?r(D,E):t(D,E,j),b=!0,k._container=E,E.__vue_app__=k,ep(D.component)||D.component.proxy}},unmount(){b&&(t(null,k._container),delete k._container.__vue_app__)},provide(E,F){return d.provides[E]=F,k},runWithContext(E){Gf=k;try{return E()}finally{Gf=null}}};return k}}let Gf=null;function Oy(t,r){if(qr){let e=qr.provides;const n=qr.parent&&qr.parent.provides;n===e&&(e=qr.provides=Object.create(n)),e[t]=r}}function Mf(t,r,e=!1){const n=qr||ys;if(n||Gf){const h=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Gf._context.provides;if(h&&t in h)return h[t];if(arguments.length>1)return e&&ft(r)?r.call(n&&n.proxy):r}}function Ny(t,r,e,n=!1){const h={},d={};Wf(d,gc,1),t.propsDefaults=Object.create(null),hg(t,r,h,d);for(const $ in t.propsOptions[0])$ in h||(h[$]=void 0);e?t.props=n?h:Ud(h):t.type.props?t.props=h:t.props=d,t.attrs=d}function Ty(t,r,e,n){const{props:h,attrs:d,vnode:{patchFlag:$}}=t,b=_t(h),[k]=t.propsOptions;let E=!1;if((n||$>0)&&!($&16)){if($&8){const F=t.vnode.dynamicProps;for(let j=0;j<F.length;j++){let D=F[j];if(uc(t.emitsOptions,D))continue;const V=r[D];if(k)if($t(d,D))V!==d[D]&&(d[D]=V,E=!0);else{const pe=Ou(D);h[pe]=nh(k,b,pe,V,t,!1)}else V!==d[D]&&(d[D]=V,E=!0)}}}else{hg(t,r,h,d)&&(E=!0);let F;for(const j in b)(!r||!$t(r,j)&&((F=Ru(j))===j||!$t(r,F)))&&(k?e&&(e[j]!==void 0||e[F]!==void 0)&&(h[j]=nh(k,b,j,void 0,t,!0)):delete h[j]);if(d!==b)for(const j in d)(!r||!$t(r,j))&&(delete d[j],E=!0)}E&&Ga(t,"set","$attrs")}function hg(t,r,e,n){const[h,d]=t.propsOptions;let $=!1,b;if(r)for(let k in r){if(Pf(k))continue;const E=r[k];let F;h&&$t(h,F=Ou(k))?!d||!d.includes(F)?e[F]=E:(b||(b={}))[F]=E:uc(t.emitsOptions,k)||(!(k in n)||E!==n[k])&&(n[k]=E,$=!0)}if(d){const k=_t(e),E=b||ir;for(let F=0;F<d.length;F++){const j=d[F];e[j]=nh(h,k,j,E[j],t,!$t(E,j))}}return $}function nh(t,r,e,n,h,d){const $=t[e];if($!=null){const b=$t($,"default");if(b&&n===void 0){const k=$.default;if($.type!==Function&&!$.skipFactory&&ft(k)){const{propsDefaults:E}=h;e in E?n=E[e]:(Iu(h),n=E[e]=k.call(null,r),Ko())}else n=k}$[0]&&(d&&!b?n=!1:$[1]&&(n===""||n===Ru(e))&&(n=!0))}return n}function pg(t,r,e=!1){const n=r.propsCache,h=n.get(t);if(h)return h;const d=t.props,$={},b=[];let k=!1;if(!ft(t)){const F=j=>{k=!0;const[D,V]=pg(j,r,!0);Sr($,D),V&&b.push(...V)};!e&&r.mixins.length&&r.mixins.forEach(F),t.extends&&F(t.extends),t.mixins&&t.mixins.forEach(F)}if(!d&&!k)return ar(t)&&n.set(t,yu),yu;if(Ge(d))for(let F=0;F<d.length;F++){const j=Ou(d[F]);Mp(j)&&($[j]=ir)}else if(d)for(const F in d){const j=Ou(F);if(Mp(j)){const D=d[F],V=$[j]=Ge(D)||ft(D)?{type:D}:Sr({},D);if(V){const pe=Op(Boolean,V.type),ee=Op(String,V.type);V[0]=pe>-1,V[1]=ee<0||pe<ee,(pe>-1||$t(V,"default"))&&b.push(j)}}}const E=[$,b];return ar(t)&&n.set(t,E),E}function Mp(t){return t[0]!=="$"}function Sp(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function Fp(t,r){return Sp(t)===Sp(r)}function Op(t,r){return Ge(r)?r.findIndex(e=>Fp(e,t)):ft(r)&&Fp(r,t)?0:-1}const vg=t=>t[0]==="_"||t==="$stable",Qh=t=>Ge(t)?t.map(Un):[Un(t)],Iy=(t,r,e)=>{if(r._n)return r;const n=xs((...h)=>Qh(r(...h)),e);return n._c=!1,n},gg=(t,r,e)=>{const n=t._ctx;for(const h in t){if(vg(h))continue;const d=t[h];if(ft(d))r[h]=Iy(h,d,n);else if(d!=null){const $=Qh(d);r[h]=()=>$}}},dg=(t,r)=>{const e=Qh(r);t.slots.default=()=>e},jy=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=_t(r),Wf(r,"_",e)):gg(r,t.slots={})}else t.slots={},r&&dg(t,r);Wf(t.slots,gc,1)},Ry=(t,r,e)=>{const{vnode:n,slots:h}=t;let d=!0,$=ir;if(n.shapeFlag&32){const b=r._;b?e&&b===1?d=!1:(Sr(h,r),!e&&b===1&&delete h._):(d=!r.$stable,gg(r,h)),$=r}else r&&(dg(t,r),$={default:1});if(d)for(const b in h)!vg(b)&&$[b]==null&&delete h[b]};function ah(t,r,e,n,h=!1){if(Ge(t)){t.forEach((D,V)=>ah(D,r&&(Ge(r)?r[V]:r),e,n,h));return}if(Gu(n)&&!h)return;const d=n.shapeFlag&4?ep(n.component)||n.component.proxy:n.el,$=h?null:d,{i:b,r:k}=t,E=r&&r.r,F=b.refs===ir?b.refs={}:b.refs,j=b.setupState;if(E!=null&&E!==k&&(Pr(E)?(F[E]=null,$t(j,E)&&(j[E]=null)):es(E)&&(E.value=null)),ft(k))di(k,b,12,[$,F]);else{const D=Pr(k),V=es(k);if(D||V){const pe=()=>{if(t.f){const ee=D?$t(j,k)?j[k]:F[k]:k.value;h?Ge(ee)&&Dh(ee,d):Ge(ee)?ee.includes(d)||ee.push(d):D?(F[k]=[d],$t(j,k)&&(j[k]=F[k])):(k.value=[d],t.k&&(F[t.k]=k.value))}else D?(F[k]=$,$t(j,k)&&(j[k]=$)):V&&(k.value=$,t.k&&(F[t.k]=$))};$?(pe.id=-1,$s(pe,e)):pe()}}}const $s=uy;function Dy(t){return Ly(t)}function Ly(t,r){const e=Kc();e.__VUE__=!0;const{insert:n,remove:h,patchProp:d,createElement:$,createText:b,createComment:k,setText:E,setElementText:F,parentNode:j,nextSibling:D,setScopeId:V=Dn,insertStaticContent:pe}=t,ee=(U,K,te,ce=null,he=null,ie=null,Ne=!1,de=null,we=!!K.dynamicChildren)=>{if(U===K)return;U&&!Ro(U,K)&&(ce=dr(U),Qe(U,he,ie,!0),U=null),K.patchFlag===-2&&(we=!1,K.dynamicChildren=null);const{type:ue,ref:De,shapeFlag:je}=K;switch(ue){case pc:ae(U,K,te,ce);break;case pn:_e(U,K,te,ce);break;case kc:U==null&&H(K,te,ce,Ne);break;case Qr:ge(U,K,te,ce,he,ie,Ne,de,we);break;default:je&1?q(U,K,te,ce,he,ie,Ne,de,we):je&6?qe(U,K,te,ce,he,ie,Ne,de,we):(je&64||je&128)&&ue.process(U,K,te,ce,he,ie,Ne,de,we,_r)}De!=null&&he&&ah(De,U&&U.ref,ie,K||U,!K)},ae=(U,K,te,ce)=>{if(U==null)n(K.el=b(K.children),te,ce);else{const he=K.el=U.el;K.children!==U.children&&E(he,K.children)}},_e=(U,K,te,ce)=>{U==null?n(K.el=k(K.children||""),te,ce):K.el=U.el},H=(U,K,te,ce)=>{[U.el,U.anchor]=pe(U.children,K,te,ce,U.el,U.anchor)},L=({el:U,anchor:K},te,ce)=>{let he;for(;U&&U!==K;)he=D(U),n(U,te,ce),U=he;n(K,te,ce)},B=({el:U,anchor:K})=>{let te;for(;U&&U!==K;)te=D(U),h(U),U=te;h(K)},q=(U,K,te,ce,he,ie,Ne,de,we)=>{Ne=Ne||K.type==="svg",U==null?J(K,te,ce,he,ie,Ne,de,we):X(U,K,he,ie,Ne,de,we)},J=(U,K,te,ce,he,ie,Ne,de)=>{let we,ue;const{type:De,props:je,shapeFlag:Be,transition:We,dirs:Ze}=U;if(we=U.el=$(U.type,ie,je&&je.is,je),Be&8?F(we,U.children):Be&16&&Q(U.children,we,null,ce,he,ie&&De!=="foreignObject",Ne,de),Ze&&Oo(U,null,ce,"created"),G(we,U,U.scopeId,Ne,ce),je){for(const st in je)st!=="value"&&!Pf(st)&&d(we,st,null,je[st],ie,U.children,ce,he,kt);"value"in je&&d(we,"value",null,je.value),(ue=je.onVnodeBeforeMount)&&Ln(ue,ce,U)}Ze&&Oo(U,null,ce,"beforeMount");const rt=By(he,We);rt&&We.beforeEnter(we),n(we,K,te),((ue=je&&je.onVnodeMounted)||rt||Ze)&&$s(()=>{ue&&Ln(ue,ce,U),rt&&We.enter(we),Ze&&Oo(U,null,ce,"mounted")},he)},G=(U,K,te,ce,he)=>{if(te&&V(U,te),ce)for(let ie=0;ie<ce.length;ie++)V(U,ce[ie]);if(he){let ie=he.subTree;if(K===ie){const Ne=he.vnode;G(U,Ne,Ne.scopeId,Ne.slotScopeIds,he.parent)}}},Q=(U,K,te,ce,he,ie,Ne,de,we=0)=>{for(let ue=we;ue<U.length;ue++){const De=U[ue]=de?ui(U[ue]):Un(U[ue]);ee(null,De,K,te,ce,he,ie,Ne,de)}},X=(U,K,te,ce,he,ie,Ne)=>{const de=K.el=U.el;let{patchFlag:we,dynamicChildren:ue,dirs:De}=K;we|=U.patchFlag&16;const je=U.props||ir,Be=K.props||ir;let We;te&&No(te,!1),(We=Be.onVnodeBeforeUpdate)&&Ln(We,te,K,U),De&&Oo(K,U,te,"beforeUpdate"),te&&No(te,!0);const Ze=he&&K.type!=="foreignObject";if(ue?$e(U.dynamicChildren,ue,de,te,ce,Ze,ie):Ne||Ie(U,K,de,null,te,ce,Ze,ie,!1),we>0){if(we&16)ke(de,K,je,Be,te,ce,he);else if(we&2&&je.class!==Be.class&&d(de,"class",null,Be.class,he),we&4&&d(de,"style",je.style,Be.style,he),we&8){const rt=K.dynamicProps;for(let st=0;st<rt.length;st++){const wt=rt[st],Lt=je[wt],xt=Be[wt];(xt!==Lt||wt==="value")&&d(de,wt,Lt,xt,he,U.children,te,ce,kt)}}we&1&&U.children!==K.children&&F(de,K.children)}else!Ne&&ue==null&&ke(de,K,je,Be,te,ce,he);((We=Be.onVnodeUpdated)||De)&&$s(()=>{We&&Ln(We,te,K,U),De&&Oo(K,U,te,"updated")},ce)},$e=(U,K,te,ce,he,ie,Ne)=>{for(let de=0;de<K.length;de++){const we=U[de],ue=K[de],De=we.el&&(we.type===Qr||!Ro(we,ue)||we.shapeFlag&70)?j(we.el):te;ee(we,ue,De,null,ce,he,ie,Ne,!0)}},ke=(U,K,te,ce,he,ie,Ne)=>{if(te!==ce){if(te!==ir)for(const de in te)!Pf(de)&&!(de in ce)&&d(U,de,te[de],null,Ne,K.children,he,ie,kt);for(const de in ce){if(Pf(de))continue;const we=ce[de],ue=te[de];we!==ue&&de!=="value"&&d(U,de,ue,we,Ne,K.children,he,ie,kt)}"value"in ce&&d(U,"value",te.value,ce.value)}},ge=(U,K,te,ce,he,ie,Ne,de,we)=>{const ue=K.el=U?U.el:b(""),De=K.anchor=U?U.anchor:b("");let{patchFlag:je,dynamicChildren:Be,slotScopeIds:We}=K;We&&(de=de?de.concat(We):We),U==null?(n(ue,te,ce),n(De,te,ce),Q(K.children,te,De,he,ie,Ne,de,we)):je>0&&je&64&&Be&&U.dynamicChildren?($e(U.dynamicChildren,Be,te,he,ie,Ne,de),(K.key!=null||he&&K===he.subTree)&&yg(U,K,!0)):Ie(U,K,te,De,he,ie,Ne,de,we)},qe=(U,K,te,ce,he,ie,Ne,de,we)=>{K.slotScopeIds=de,U==null?K.shapeFlag&512?he.ctx.activate(K,te,ce,Ne,we):it(K,te,ce,he,ie,Ne,we):Zt(U,K,we)},it=(U,K,te,ce,he,ie,Ne)=>{const de=U.component=Zy(U,ce,he);if(cc(U)&&(de.ctx.renderer=_r),Qy(de),de.asyncDep){if(he&&he.registerDep(de,lt),!U.el){const we=de.subTree=hr(pn);_e(null,we,K,te)}return}lt(de,U,K,te,he,ie,Ne)},Zt=(U,K,te)=>{const ce=K.component=U.component;if(ay(U,K,te))if(ce.asyncDep&&!ce.asyncResolved){ot(ce,K,te);return}else ce.next=K,Qd(ce.update),ce.update();else K.el=U.el,ce.vnode=K},lt=(U,K,te,ce,he,ie,Ne)=>{const de=()=>{if(U.isMounted){let{next:De,bu:je,u:Be,parent:We,vnode:Ze}=U,rt=De,st;No(U,!1),De?(De.el=Ze.el,ot(U,De,Ne)):De=Ze,je&&bc(je),(st=De.props&&De.props.onVnodeBeforeUpdate)&&Ln(st,We,De,Ze),No(U,!0);const wt=Ac(U),Lt=U.subTree;U.subTree=wt,ee(Lt,wt,j(Lt.el),dr(Lt),U,he,ie),De.el=wt.el,rt===null&&iy(U,wt.el),Be&&$s(Be,he),(st=De.props&&De.props.onVnodeUpdated)&&$s(()=>Ln(st,We,De,Ze),he)}else{let De;const{el:je,props:Be}=K,{bm:We,m:Ze,parent:rt}=U,st=Gu(K);if(No(U,!1),We&&bc(We),!st&&(De=Be&&Be.onVnodeBeforeMount)&&Ln(De,rt,K),No(U,!0),je&&Ft){const wt=()=>{U.subTree=Ac(U),Ft(je,U.subTree,U,he,null)};st?K.type.__asyncLoader().then(()=>!U.isUnmounted&&wt()):wt()}else{const wt=U.subTree=Ac(U);ee(null,wt,te,ce,U,he,ie),K.el=wt.el}if(Ze&&$s(Ze,he),!st&&(De=Be&&Be.onVnodeMounted)){const wt=K;$s(()=>Ln(De,rt,wt),he)}(K.shapeFlag&256||rt&&Gu(rt.vnode)&&rt.vnode.shapeFlag&256)&&U.a&&$s(U.a,he),U.isMounted=!0,K=te=ce=null}},we=U.effect=new Uh(de,()=>Zh(ue),U.scope),ue=U.update=()=>we.run();ue.id=U.uid,No(U,!0),ue()},ot=(U,K,te)=>{K.component=U;const ce=U.vnode.props;U.vnode=K,U.next=null,Ty(U,K.props,ce,te),Ry(U,K.children,te),Du(),bp(),Lu()},Ie=(U,K,te,ce,he,ie,Ne,de,we=!1)=>{const ue=U&&U.children,De=U?U.shapeFlag:0,je=K.children,{patchFlag:Be,shapeFlag:We}=K;if(Be>0){if(Be&128){Mt(ue,je,te,ce,he,ie,Ne,de,we);return}else if(Be&256){at(ue,je,te,ce,he,ie,Ne,de,we);return}}We&8?(De&16&&kt(ue,he,ie),je!==ue&&F(te,je)):De&16?We&16?Mt(ue,je,te,ce,he,ie,Ne,de,we):kt(ue,he,ie,!0):(De&8&&F(te,""),We&16&&Q(je,te,ce,he,ie,Ne,de,we))},at=(U,K,te,ce,he,ie,Ne,de,we)=>{U=U||yu,K=K||yu;const ue=U.length,De=K.length,je=Math.min(ue,De);let Be;for(Be=0;Be<je;Be++){const We=K[Be]=we?ui(K[Be]):Un(K[Be]);ee(U[Be],We,te,null,he,ie,Ne,de,we)}ue>De?kt(U,he,ie,!0,!1,je):Q(K,te,ce,he,ie,Ne,de,we,je)},Mt=(U,K,te,ce,he,ie,Ne,de,we)=>{let ue=0;const De=K.length;let je=U.length-1,Be=De-1;for(;ue<=je&&ue<=Be;){const We=U[ue],Ze=K[ue]=we?ui(K[ue]):Un(K[ue]);if(Ro(We,Ze))ee(We,Ze,te,null,he,ie,Ne,de,we);else break;ue++}for(;ue<=je&&ue<=Be;){const We=U[je],Ze=K[Be]=we?ui(K[Be]):Un(K[Be]);if(Ro(We,Ze))ee(We,Ze,te,null,he,ie,Ne,de,we);else break;je--,Be--}if(ue>je){if(ue<=Be){const We=Be+1,Ze=We<De?K[We].el:ce;for(;ue<=Be;)ee(null,K[ue]=we?ui(K[ue]):Un(K[ue]),te,Ze,he,ie,Ne,de,we),ue++}}else if(ue>Be)for(;ue<=je;)Qe(U[ue],he,ie,!0),ue++;else{const We=ue,Ze=ue,rt=new Map;for(ue=Ze;ue<=Be;ue++){const Ot=K[ue]=we?ui(K[ue]):Un(K[ue]);Ot.key!=null&&rt.set(Ot.key,ue)}let st,wt=0;const Lt=Be-Ze+1;let xt=!1,Gt=0;const _s=new Array(Lt);for(ue=0;ue<Lt;ue++)_s[ue]=0;for(ue=We;ue<=je;ue++){const Ot=U[ue];if(wt>=Lt){Qe(Ot,he,ie,!0);continue}let ht;if(Ot.key!=null)ht=rt.get(Ot.key);else for(st=Ze;st<=Be;st++)if(_s[st-Ze]===0&&Ro(Ot,K[st])){ht=st;break}ht===void 0?Qe(Ot,he,ie,!0):(_s[ht-Ze]=ue+1,ht>=Gt?Gt=ht:xt=!0,ee(Ot,K[ht],te,null,he,ie,Ne,de,we),wt++)}const Wr=xt?Hy(_s):yu;for(st=Wr.length-1,ue=Lt-1;ue>=0;ue--){const Ot=Ze+ue,ht=K[Ot],It=Ot+1<De?K[Ot+1].el:ce;_s[ue]===0?ee(null,ht,te,It,he,ie,Ne,de,we):xt&&(st<0||ue!==Wr[st]?St(ht,te,It,2):st--)}}},St=(U,K,te,ce,he=null)=>{const{el:ie,type:Ne,transition:de,children:we,shapeFlag:ue}=U;if(ue&6){St(U.component.subTree,K,te,ce);return}if(ue&128){U.suspense.move(K,te,ce);return}if(ue&64){Ne.move(U,K,te,_r);return}if(Ne===Qr){n(ie,K,te);for(let je=0;je<we.length;je++)St(we[je],K,te,ce);n(U.anchor,K,te);return}if(Ne===kc){L(U,K,te);return}if(ce!==2&&ue&1&&de)if(ce===0)de.beforeEnter(ie),n(ie,K,te),$s(()=>de.enter(ie),he);else{const{leave:je,delayLeave:Be,afterLeave:We}=de,Ze=()=>n(ie,K,te),rt=()=>{je(ie,()=>{Ze(),We&&We()})};Be?Be(ie,Ze,rt):rt()}else n(ie,K,te)},Qe=(U,K,te,ce=!1,he=!1)=>{const{type:ie,props:Ne,ref:de,children:we,dynamicChildren:ue,shapeFlag:De,patchFlag:je,dirs:Be}=U;if(de!=null&&ah(de,null,te,U,!0),De&256){K.ctx.deactivate(U);return}const We=De&1&&Be,Ze=!Gu(U);let rt;if(Ze&&(rt=Ne&&Ne.onVnodeBeforeUnmount)&&Ln(rt,K,U),De&6)yr(U.component,te,ce);else{if(De&128){U.suspense.unmount(te,ce);return}We&&Oo(U,null,K,"beforeUnmount"),De&64?U.type.remove(U,K,te,he,_r,ce):ue&&(ie!==Qr||je>0&&je&64)?kt(ue,K,te,!1,!0):(ie===Qr&&je&384||!he&&De&16)&&kt(we,K,te),ce&&Fr(U)}(Ze&&(rt=Ne&&Ne.onVnodeUnmounted)||We)&&$s(()=>{rt&&Ln(rt,K,U),We&&Oo(U,null,K,"unmounted")},te)},Fr=U=>{const{type:K,el:te,anchor:ce,transition:he}=U;if(K===Qr){Dt(te,ce);return}if(K===kc){B(U);return}const ie=()=>{h(te),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(U.shapeFlag&1&&he&&!he.persisted){const{leave:Ne,delayLeave:de}=he,we=()=>Ne(te,ie);de?de(U.el,ie,we):we()}else ie()},Dt=(U,K)=>{let te;for(;U!==K;)te=D(U),h(U),U=te;h(K)},yr=(U,K,te)=>{const{bum:ce,scope:he,update:ie,subTree:Ne,um:de}=U;ce&&bc(ce),he.stop(),ie&&(ie.active=!1,Qe(Ne,U,K,te)),de&&$s(de,K),$s(()=>{U.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},kt=(U,K,te,ce=!1,he=!1,ie=0)=>{for(let Ne=ie;Ne<U.length;Ne++)Qe(U[Ne],K,te,ce,he)},dr=U=>U.shapeFlag&6?dr(U.component.subTree):U.shapeFlag&128?U.suspense.next():D(U.anchor||U.el),Or=(U,K,te)=>{U==null?K._vnode&&Qe(K._vnode,null,null,!0):ee(K._vnode||null,U,K,null,null,null,te),bp(),Qv(),K._vnode=U},_r={p:ee,um:Qe,m:St,r:Fr,mt:it,mc:Q,pc:Ie,pbc:$e,n:dr,o:t};let Er,Ft;return r&&([Er,Ft]=r(_r)),{render:Or,hydrate:Er,createApp:Fy(Or,Er)}}function No({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function By(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function yg(t,r,e=!1){const n=t.children,h=r.children;if(Ge(n)&&Ge(h))for(let d=0;d<n.length;d++){const $=n[d];let b=h[d];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=h[d]=ui(h[d]),b.el=$.el),e||yg($,b)),b.type===pc&&(b.el=$.el)}}function Hy(t){const r=t.slice(),e=[0];let n,h,d,$,b;const k=t.length;for(n=0;n<k;n++){const E=t[n];if(E!==0){if(h=e[e.length-1],t[h]<E){r[n]=h,e.push(n);continue}for(d=0,$=e.length-1;d<$;)b=d+$>>1,t[e[b]]<E?d=b+1:$=b;E<t[e[d]]&&(d>0&&(r[n]=e[d-1]),e[d]=n)}}for(d=e.length,$=e[d-1];d-- >0;)e[d]=$,$=r[$];return e}const Uy=t=>t.__isTeleport,Qr=Symbol.for("v-fgt"),pc=Symbol.for("v-txt"),pn=Symbol.for("v-cmt"),kc=Symbol.for("v-stc"),Xu=[];let Rn=null;function cr(t=!1){Xu.push(Rn=t?null:[])}function qy(){Xu.pop(),Rn=Xu[Xu.length-1]||null}let af=1;function Np(t){af+=t}function wg(t){return t.dynamicChildren=af>0?Rn||yu:null,qy(),af>0&&Rn&&Rn.push(t),t}function Mr(t,r,e,n,h,d){return wg(cn(t,r,e,n,h,d,!0))}function vc(t,r,e,n,h){return wg(hr(t,r,e,n,h,!0))}function Qf(t){return t?t.__v_isVNode===!0:!1}function Ro(t,r){return t.type===r.type&&t.key===r.key}const gc="__vInternal",mg=({key:t})=>t??null,Sf=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Pr(t)||es(t)||ft(t)?{i:ys,r:t,k:r,f:!!e}:t:null);function cn(t,r=null,e=null,n=0,h=null,d=t===Qr?0:1,$=!1,b=!1){const k={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&mg(r),ref:r&&Sf(r),scopeId:fc,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:n,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:ys};return b?(Xh(k,e),d&128&&t.normalize(k)):e&&(k.shapeFlag|=Pr(e)?8:16),af>0&&!$&&Rn&&(k.patchFlag>0||d&6)&&k.patchFlag!==32&&Rn.push(k),k}const hr=zy;function zy(t,r=null,e=null,n=0,h=null,d=!1){if((!t||t===ly)&&(t=pn),Qf(t)){const b=mi(t,r,!0);return e&&Xh(b,e),af>0&&!d&&Rn&&(b.shapeFlag&6?Rn[Rn.indexOf(t)]=b:Rn.push(b)),b.patchFlag|=-2,b}if(tw(t)&&(t=t.__vccOpts),r){r=Wy(r);let{class:b,style:k}=r;b&&!Pr(b)&&(r.class=Yr(b)),ar(k)&&(zv(k)&&!Ge(k)&&(k=Sr({},k)),r.style=Bh(k))}const $=Pr(t)?1:oy(t)?128:Uy(t)?64:ar(t)?4:ft(t)?2:0;return cn(t,r,e,n,h,$,d,!0)}function Wy(t){return t?zv(t)||gc in t?Sr({},t):t:null}function mi(t,r,e=!1){const{props:n,ref:h,patchFlag:d,children:$}=t,b=r?Vy(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:b,key:b&&mg(b),ref:r&&r.ref?e&&h?Ge(h)?h.concat(Sf(r)):[h,Sf(r)]:Sf(r):h,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:$,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Qr?d===-1?16:d|16:d,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&mi(t.ssContent),ssFallback:t.ssFallback&&mi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function jn(t=" ",r=0){return hr(pc,null,t,r)}function Tu(t="",r=!1){return r?(cr(),vc(pn,null,t)):hr(pn,null,t)}function Un(t){return t==null||typeof t=="boolean"?hr(pn):Ge(t)?hr(Qr,null,t.slice()):typeof t=="object"?ui(t):hr(pc,null,String(t))}function ui(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:mi(t)}function Xh(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(Ge(r))e=16;else if(typeof r=="object")if(n&65){const h=r.default;h&&(h._c&&(h._d=!1),Xh(t,h()),h._c&&(h._d=!0));return}else{e=32;const h=r._;!h&&!(gc in r)?r._ctx=ys:h===3&&ys&&(ys.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else ft(r)?(r={default:r,_ctx:ys},e=32):(r=String(r),n&64?(e=16,r=[jn(r)]):e=8);t.children=r,t.shapeFlag|=e}function Vy(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const h in n)if(h==="class")r.class!==n.class&&(r.class=Yr([r.class,n.class]));else if(h==="style")r.style=Bh([r.style,n.style]);else if(sc(h)){const d=r[h],$=n[h];$&&d!==$&&!(Ge(d)&&d.includes($))&&(r[h]=d?[].concat(d,$):$)}else h!==""&&(r[h]=n[h])}return r}function Ln(t,r,e,n=null){hn(t,r,7,[e,n])}const Ky=cg();let Jy=0;function Zy(t,r,e){const n=t.type,h=(r?r.appContext:t.appContext)||Ky,d={uid:Jy++,vnode:t,type:n,parent:r,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new md(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pg(n,h),emitsOptions:Yv(n,h),emit:null,emitted:null,propsDefaults:ir,inheritAttrs:n.inheritAttrs,ctx:ir,data:ir,props:ir,attrs:ir,slots:ir,refs:ir,setupState:ir,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=r?r.root:d,d.emit=ey.bind(null,d),t.ce&&t.ce(d),d}let qr=null;const Gy=()=>qr||ys;let Yh,cu,Tp="__VUE_INSTANCE_SETTERS__";(cu=Kc()[Tp])||(cu=Kc()[Tp]=[]),cu.push(t=>qr=t),Yh=t=>{cu.length>1?cu.forEach(r=>r(t)):cu[0](t)};const Iu=t=>{Yh(t),t.scope.on()},Ko=()=>{qr&&qr.scope.off(),Yh(null)};function $g(t){return t.vnode.shapeFlag&4}let lf=!1;function Qy(t,r=!1){lf=r;const{props:e,children:n}=t.vnode,h=$g(t);Ny(t,e,h,r),jy(t,n);const d=h?Xy(t,r):void 0;return lf=!1,d}function Xy(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=Wv(new Proxy(t.ctx,Cy));const{setup:n}=e;if(n){const h=t.setupContext=n.length>1?ew(t):null;Iu(t),Du();const d=di(n,t,0,[t.props,h]);if(Lu(),Ko(),Pv(d)){if(d.then(Ko,Ko),r)return d.then($=>{Ip(t,$,r)}).catch($=>{oc($,t,0)});t.asyncDep=d}else Ip(t,d,r)}else xg(t,r)}function Ip(t,r,e){ft(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:ar(r)&&(t.setupState=Jv(r)),xg(t,e)}let jp;function xg(t,r,e){const n=t.type;if(!t.render){if(!r&&jp&&!n.render){const h=n.template||Gh(t).template;if(h){const{isCustomElement:d,compilerOptions:$}=t.appContext.config,{delimiters:b,compilerOptions:k}=n,E=Sr(Sr({isCustomElement:d,delimiters:b},$),k);n.render=jp(h,E)}}t.render=n.render||Dn}{Iu(t),Du();try{_y(t)}finally{Lu(),Ko()}}}function Yy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return bs(t,"get","$attrs"),r[e]}}))}function ew(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return Yy(t)},slots:t.slots,emit:t.emit,expose:r}}function ep(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Jv(Wv(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in Qu)return Qu[e](t)},has(r,e){return e in r||e in Qu}}))}function tw(t){return ft(t)&&"__vccOpts"in t}const rw=(t,r)=>Kd(t,r,lf);function ni(t,r,e){const n=arguments.length;return n===2?ar(r)&&!Ge(r)?Qf(r)?hr(t,null,[r]):hr(t,r):hr(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Qf(e)&&(e=[e]),hr(t,r,e))}const sw=Symbol.for("v-scx"),nw=()=>Mf(sw),aw="3.3.8",iw="http://www.w3.org/2000/svg",Do=typeof document<"u"?document:null,Rp=Do&&Do.createElement("template"),lw={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const h=r?Do.createElementNS(iw,t):Do.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&h.setAttribute("multiple",n.multiple),h},createText:t=>Do.createTextNode(t),createComment:t=>Do.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Do.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,h,d){const $=e?e.previousSibling:r.lastChild;if(h&&(h===d||h.nextSibling))for(;r.insertBefore(h.cloneNode(!0),e),!(h===d||!(h=h.nextSibling)););else{Rp.innerHTML=n?`<svg>${t}</svg>`:t;const b=Rp.content;if(n){const k=b.firstChild;for(;k.firstChild;)b.appendChild(k.firstChild);b.removeChild(k)}r.insertBefore(b,e)}return[$?$.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},ri="transition",Bu="animation",of=Symbol("_vtc"),tp=(t,{slots:r})=>ni(py,ow(t),r);tp.displayName="Transition";const bg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};tp.props=Sr({},rg,bg);const To=(t,r=[])=>{Ge(t)?t.forEach(e=>e(...r)):t&&t(...r)},Dp=t=>t?Ge(t)?t.some(r=>r.length>1):t.length>1:!1;function ow(t){const r={};for(const ge in t)ge in bg||(r[ge]=t[ge]);if(t.css===!1)return r;const{name:e="v",type:n,duration:h,enterFromClass:d=`${e}-enter-from`,enterActiveClass:$=`${e}-enter-active`,enterToClass:b=`${e}-enter-to`,appearFromClass:k=d,appearActiveClass:E=$,appearToClass:F=b,leaveFromClass:j=`${e}-leave-from`,leaveActiveClass:D=`${e}-leave-active`,leaveToClass:V=`${e}-leave-to`}=t,pe=uw(h),ee=pe&&pe[0],ae=pe&&pe[1],{onBeforeEnter:_e,onEnter:H,onEnterCancelled:L,onLeave:B,onLeaveCancelled:q,onBeforeAppear:J=_e,onAppear:G=H,onAppearCancelled:Q=L}=r,X=(ge,qe,it)=>{Io(ge,qe?F:b),Io(ge,qe?E:$),it&&it()},$e=(ge,qe)=>{ge._isLeaving=!1,Io(ge,j),Io(ge,V),Io(ge,D),qe&&qe()},ke=ge=>(qe,it)=>{const Zt=ge?G:H,lt=()=>X(qe,ge,it);To(Zt,[qe,lt]),Lp(()=>{Io(qe,ge?k:d),si(qe,ge?F:b),Dp(Zt)||Bp(qe,n,ee,lt)})};return Sr(r,{onBeforeEnter(ge){To(_e,[ge]),si(ge,d),si(ge,$)},onBeforeAppear(ge){To(J,[ge]),si(ge,k),si(ge,E)},onEnter:ke(!1),onAppear:ke(!0),onLeave(ge,qe){ge._isLeaving=!0;const it=()=>$e(ge,qe);si(ge,j),hw(),si(ge,D),Lp(()=>{ge._isLeaving&&(Io(ge,j),si(ge,V),Dp(B)||Bp(ge,n,ae,it))}),To(B,[ge,it])},onEnterCancelled(ge){X(ge,!1),To(L,[ge])},onAppearCancelled(ge){X(ge,!0),To(Q,[ge])},onLeaveCancelled(ge){$e(ge),To(q,[ge])}})}function uw(t){if(t==null)return null;if(ar(t))return[Pc(t.enter),Pc(t.leave)];{const r=Pc(t);return[r,r]}}function Pc(t){return hd(t)}function si(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[of]||(t[of]=new Set)).add(r)}function Io(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[of];e&&(e.delete(r),e.size||(t[of]=void 0))}function Lp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let fw=0;function Bp(t,r,e,n){const h=t._endId=++fw,d=()=>{h===t._endId&&n()};if(e)return setTimeout(d,e);const{type:$,timeout:b,propCount:k}=cw(t,r);if(!$)return n();const E=$+"end";let F=0;const j=()=>{t.removeEventListener(E,D),d()},D=V=>{V.target===t&&++F>=k&&j()};setTimeout(()=>{F<k&&j()},b+1),t.addEventListener(E,D)}function cw(t,r){const e=window.getComputedStyle(t),n=pe=>(e[pe]||"").split(", "),h=n(`${ri}Delay`),d=n(`${ri}Duration`),$=Hp(h,d),b=n(`${Bu}Delay`),k=n(`${Bu}Duration`),E=Hp(b,k);let F=null,j=0,D=0;r===ri?$>0&&(F=ri,j=$,D=d.length):r===Bu?E>0&&(F=Bu,j=E,D=k.length):(j=Math.max($,E),F=j>0?$>E?ri:Bu:null,D=F?F===ri?d.length:k.length:0);const V=F===ri&&/\b(transform|all)(,|$)/.test(n(`${ri}Property`).toString());return{type:F,timeout:j,propCount:D,hasTransform:V}}function Hp(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Up(e)+Up(t[n])))}function Up(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function hw(){return document.body.offsetHeight}function pw(t,r,e){const n=t[of];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const vw=Symbol("_vod");function gw(t,r,e){const n=t.style,h=Pr(e);if(e&&!h){if(r&&!Pr(r))for(const d in r)e[d]==null&&ih(n,d,"");for(const d in e)ih(n,d,e[d])}else{const d=n.display;h?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),vw in t&&(n.display=d)}}const qp=/\s*!important$/;function ih(t,r,e){if(Ge(e))e.forEach(n=>ih(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=dw(t,r);qp.test(e)?t.setProperty(Ru(n),e.replace(qp,""),"important"):t[n]=e}}const zp=["Webkit","Moz","ms"],Ec={};function dw(t,r){const e=Ec[r];if(e)return e;let n=Ou(r);if(n!=="filter"&&n in t)return Ec[r]=n;n=Sv(n);for(let h=0;h<zp.length;h++){const d=zp[h]+n;if(d in t)return Ec[r]=d}return r}const Wp="http://www.w3.org/1999/xlink";function yw(t,r,e,n,h){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(Wp,r.slice(6,r.length)):t.setAttributeNS(Wp,r,e);else{const d=wd(r);e==null||d&&!Fv(e)?t.removeAttribute(r):t.setAttribute(r,d?"":e)}}function ww(t,r,e,n,h,d,$){if(r==="innerHTML"||r==="textContent"){n&&$(n,h,d),t[r]=e??"";return}const b=t.tagName;if(r==="value"&&b!=="PROGRESS"&&!b.includes("-")){t._value=e;const E=b==="OPTION"?t.getAttribute("value"):t.value,F=e??"";E!==F&&(t.value=F),e==null&&t.removeAttribute(r);return}let k=!1;if(e===""||e==null){const E=typeof t[r];E==="boolean"?e=Fv(e):e==null&&E==="string"?(e="",k=!0):E==="number"&&(e=0,k=!0)}try{t[r]=e}catch{}k&&t.removeAttribute(r)}function mw(t,r,e,n){t.addEventListener(r,e,n)}function $w(t,r,e,n){t.removeEventListener(r,e,n)}const Vp=Symbol("_vei");function xw(t,r,e,n,h=null){const d=t[Vp]||(t[Vp]={}),$=d[r];if(n&&$)$.value=n;else{const[b,k]=bw(r);if(n){const E=d[r]=_w(n,h);mw(t,b,E,k)}else $&&($w(t,b,$,k),d[r]=void 0)}}const Kp=/(?:Once|Passive|Capture)$/;function bw(t){let r;if(Kp.test(t)){r={};let n;for(;n=t.match(Kp);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ru(t.slice(2)),r]}let Mc=0;const Aw=Promise.resolve(),Cw=()=>Mc||(Aw.then(()=>Mc=0),Mc=Date.now());function _w(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;hn(kw(n,e.value),r,5,[n])};return e.value=t,e.attached=Cw(),e}function kw(t,r){if(Ge(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>h=>!h._stopped&&n&&n(h))}else return r}const Jp=/^on[a-z]/,Pw=(t,r,e,n,h=!1,d,$,b,k)=>{r==="class"?pw(t,n,h):r==="style"?gw(t,e,n):sc(r)?Rh(r)||xw(t,r,e,n,$):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Ew(t,r,n,h))?ww(t,r,n,d,$,b,k):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),yw(t,r,n,h))};function Ew(t,r,e,n){return n?!!(r==="innerHTML"||r==="textContent"||r in t&&Jp.test(r)&&ft(e)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||Jp.test(r)&&Pr(e)?!1:r in t}const Mw=Sr({patchProp:Pw},lw);let Zp;function Sw(){return Zp||(Zp=Dy(Mw))}const Fw=(...t)=>{const r=Sw().createApp(...t),{mount:e}=r;return r.mount=n=>{const h=Ow(n);if(!h)return;const d=r._component;!ft(d)&&!d.render&&!d.template&&(d.template=h.innerHTML),h.innerHTML="";const $=e(h,!1,h instanceof SVGElement);return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),$},r};function Ow(t){return Pr(t)?document.querySelector(t):t}function Yu(){return Yu=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Yu.apply(this,arguments)}var Nw=13,Tw=9,Iw=8,jw=89,Af=90,Rw=77,Gp=57,Qp=219,Xp=222,Yp=192,Dw=27,ev=100,Lw=3e3,Bw=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),Sc=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Hw=uf({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var h="border-top-left-radius",d="border-bottom-left-radius";if(e){e.style[h]=n[h],e.style[d]=n[d],r.style[h]="0",r.style[d]="0";var $=["background-color","margin-top","padding-top","font-family","font-size","line-height"];$.forEach(function(b){e.style[b]=n[b]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,h=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:h})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=Yu({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,h=n.stack,d=n.offset;if(h.length&&d>-1){this.history.stack=h.slice(0,d+1);var $=this.history.stack.length;if($>ev){var b=$-ev;this.history.stack=h.slice(b,$),this.history.offset=Math.max(this.history.offset-b,0)}}var k=Date.now();if(e){var E=this.history.stack[this.history.offset];if(E&&k-E.timestamp<Lw){var F,j,D=/[^a-z0-9]([a-z0-9]+)$/i,V=(F=this._getLines(E.value,E.selectionStart).pop())===null||F===void 0?void 0:F.match(D),pe=(j=this._getLines(r.value,r.selectionStart).pop())===null||j===void 0?void 0:j.match(D);if(V&&pe&&pe[1].startsWith(V[1])){this.history.stack[this.history.offset]=Yu({},r,{timestamp:k});return}}}this.history.stack.push(Yu({},r,{timestamp:k})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,h=e.selectionStart,d=e.selectionEnd;this._recordChange({value:n,selectionStart:h,selectionEnd:d},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,h=e[n-1];h&&(this._updateInput(h),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,h=e[n+1];h&&(this._updateInput(h),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,h=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Dw&&(r.target.blur(),this.$emit("blur",r));var d=r.target,$=d.value,b=d.selectionStart,k=d.selectionEnd,E=(n?" ":"	").repeat(e);if(r.keyCode===Tw&&!h&&this.capture)if(r.preventDefault(),r.shiftKey){var F=this._getLines($,b),j=F.length-1,D=this._getLines($,k).length-1,V=$.split(`
`).map(function(ge,qe){return qe>=j&&qe<=D&&ge.startsWith(E)?ge.substring(E.length):ge}).join(`
`);if($!==V){var pe=F[j];this._applyEdits({value:V,selectionStart:pe.startsWith(E)?b-E.length:b,selectionEnd:k-($.length-V.length)})}}else if(b!==k){var ee=this._getLines($,b),ae=ee.length-1,_e=this._getLines($,k).length-1,H=ee[ae];this._applyEdits({value:$.split(`
`).map(function(ge,qe){return qe>=ae&&qe<=_e?E+ge:ge}).join(`
`),selectionStart:/\S/.test(H)?b+E.length:b,selectionEnd:k+E.length*(_e-ae+1)})}else{var L=b+E.length;this._applyEdits({value:$.substring(0,b)+E+$.substring(k),selectionStart:L,selectionEnd:L})}else if(r.keyCode===Iw){var B=b!==k,q=$.substring(0,b);if(q.endsWith(E)&&!B){r.preventDefault();var J=b-E.length;this._applyEdits({value:$.substring(0,b-E.length)+$.substring(k),selectionStart:J,selectionEnd:J})}}else if(r.keyCode===Nw){if(b===k){var G=this._getLines($,b).pop(),Q=G==null?void 0:G.match(/^\s+/);if(Q&&Q[0]){r.preventDefault();var X=`
`+Q[0],$e=b+X.length;this._applyEdits({value:$.substring(0,b)+X+$.substring(k),selectionStart:$e,selectionEnd:$e})}}}else if(r.keyCode===Gp||r.keyCode===Qp||r.keyCode===Xp||r.keyCode===Yp){var ke;r.keyCode===Gp&&r.shiftKey?ke=["(",")"]:r.keyCode===Qp?r.shiftKey?ke=["{","}"]:ke=["[","]"]:r.keyCode===Xp?r.shiftKey?ke=['"','"']:ke=["'","'"]:r.keyCode===Yp&&!r.shiftKey&&(ke=["`","`"]),b!==k&&ke&&(r.preventDefault(),this._applyEdits({value:$.substring(0,b)+ke[0]+$.substring(b,k)+ke[1]+$.substring(k),selectionStart:b,selectionEnd:k+2}))}else(Sc?r.metaKey&&r.keyCode===Af:r.ctrlKey&&r.keyCode===Af)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(Sc?r.metaKey&&r.keyCode===Af&&r.shiftKey:Bw?r.ctrlKey&&r.keyCode===jw:r.ctrlKey&&r.keyCode===Af&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===Rw&&r.ctrlKey&&(!Sc||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=ni("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=ni("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(b,k){return ni("div",{class:"prism-editor__line-number token comment"},""+ ++k)})]),h=ni("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(k){r.$emit("click",k)},onKeyup:function(k){r.$emit("keyup",k)},onFocus:function(k){r.$emit("focus",k)},onBlur:function(k){r.$emit("blur",k)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),d=ni("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),$=ni("div",{class:"prism-editor__container"},[h,d]);return ni("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,$])}});var tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qw(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var h=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,h.get?h:{enumerable:!0,get:function(){return t[n]}})}),e}var zw={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,$={},b={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function H(L){return L instanceof k?new k(L.type,H(L.content),L.alias):Array.isArray(L)?L.map(H):L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(H){return Object.prototype.toString.call(H).slice(8,-1)},objId:function(H){return H.__id||Object.defineProperty(H,"__id",{value:++d}),H.__id},clone:function H(L,B){B=B||{};var q,J;switch(b.util.type(L)){case"Object":if(J=b.util.objId(L),B[J])return B[J];q={},B[J]=q;for(var G in L)L.hasOwnProperty(G)&&(q[G]=H(L[G],B));return q;case"Array":return J=b.util.objId(L),B[J]?B[J]:(q=[],B[J]=q,L.forEach(function(Q,X){q[X]=H(Q,B)}),q);default:return L}},getLanguage:function(H){for(;H;){var L=h.exec(H.className);if(L)return L[1].toLowerCase();H=H.parentElement}return"none"},setLanguage:function(H,L){H.className=H.className.replace(RegExp(h,"gi"),""),H.classList.add("language-"+L)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(q){var H=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(q.stack)||[])[1];if(H){var L=document.getElementsByTagName("script");for(var B in L)if(L[B].src==H)return L[B]}return null}},isActive:function(H,L,B){for(var q="no-"+L;H;){var J=H.classList;if(J.contains(L))return!0;if(J.contains(q))return!1;H=H.parentElement}return!!B}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(H,L){var B=b.util.clone(b.languages[H]);for(var q in L)B[q]=L[q];return B},insertBefore:function(H,L,B,q){q=q||b.languages;var J=q[H],G={};for(var Q in J)if(J.hasOwnProperty(Q)){if(Q==L)for(var X in B)B.hasOwnProperty(X)&&(G[X]=B[X]);B.hasOwnProperty(Q)||(G[Q]=J[Q])}var $e=q[H];return q[H]=G,b.languages.DFS(b.languages,function(ke,ge){ge===$e&&ke!=H&&(this[ke]=G)}),G},DFS:function H(L,B,q,J){J=J||{};var G=b.util.objId;for(var Q in L)if(L.hasOwnProperty(Q)){B.call(L,Q,L[Q],q||Q);var X=L[Q],$e=b.util.type(X);$e==="Object"&&!J[G(X)]?(J[G(X)]=!0,H(X,B,null,J)):$e==="Array"&&!J[G(X)]&&(J[G(X)]=!0,H(X,B,Q,J))}}},plugins:{},highlightAll:function(H,L){b.highlightAllUnder(document,H,L)},highlightAllUnder:function(H,L,B){var q={callback:B,container:H,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};b.hooks.run("before-highlightall",q),q.elements=Array.prototype.slice.apply(q.container.querySelectorAll(q.selector)),b.hooks.run("before-all-elements-highlight",q);for(var J=0,G;G=q.elements[J++];)b.highlightElement(G,L===!0,q.callback)},highlightElement:function(H,L,B){var q=b.util.getLanguage(H),J=b.languages[q];b.util.setLanguage(H,q);var G=H.parentElement;G&&G.nodeName.toLowerCase()==="pre"&&b.util.setLanguage(G,q);var Q=H.textContent,X={element:H,language:q,grammar:J,code:Q};function $e(ge){X.highlightedCode=ge,b.hooks.run("before-insert",X),X.element.innerHTML=X.highlightedCode,b.hooks.run("after-highlight",X),b.hooks.run("complete",X),B&&B.call(X.element)}if(b.hooks.run("before-sanity-check",X),G=X.element.parentElement,G&&G.nodeName.toLowerCase()==="pre"&&!G.hasAttribute("tabindex")&&G.setAttribute("tabindex","0"),!X.code){b.hooks.run("complete",X),B&&B.call(X.element);return}if(b.hooks.run("before-highlight",X),!X.grammar){$e(b.util.encode(X.code));return}if(L&&n.Worker){var ke=new Worker(b.filename);ke.onmessage=function(ge){$e(ge.data)},ke.postMessage(JSON.stringify({language:X.language,code:X.code,immediateClose:!0}))}else $e(b.highlight(X.code,X.grammar,X.language))},highlight:function(H,L,B){var q={code:H,grammar:L,language:B};if(b.hooks.run("before-tokenize",q),!q.grammar)throw new Error('The language "'+q.language+'" has no grammar.');return q.tokens=b.tokenize(q.code,q.grammar),b.hooks.run("after-tokenize",q),k.stringify(b.util.encode(q.tokens),q.language)},tokenize:function(H,L){var B=L.rest;if(B){for(var q in B)L[q]=B[q];delete L.rest}var J=new j;return D(J,J.head,H),F(H,J,L,J.head,0),pe(J)},hooks:{all:{},add:function(H,L){var B=b.hooks.all;B[H]=B[H]||[],B[H].push(L)},run:function(H,L){var B=b.hooks.all[H];if(!(!B||!B.length))for(var q=0,J;J=B[q++];)J(L)}},Token:k};n.Prism=b;function k(H,L,B,q){this.type=H,this.content=L,this.alias=B,this.length=(q||"").length|0}k.stringify=function H(L,B){if(typeof L=="string")return L;if(Array.isArray(L)){var q="";return L.forEach(function($e){q+=H($e,B)}),q}var J={type:L.type,content:H(L.content,B),tag:"span",classes:["token",L.type],attributes:{},language:B},G=L.alias;G&&(Array.isArray(G)?Array.prototype.push.apply(J.classes,G):J.classes.push(G)),b.hooks.run("wrap",J);var Q="";for(var X in J.attributes)Q+=" "+X+'="'+(J.attributes[X]||"").replace(/"/g,"&quot;")+'"';return"<"+J.tag+' class="'+J.classes.join(" ")+'"'+Q+">"+J.content+"</"+J.tag+">"};function E(H,L,B,q){H.lastIndex=L;var J=H.exec(B);if(J&&q&&J[1]){var G=J[1].length;J.index+=G,J[0]=J[0].slice(G)}return J}function F(H,L,B,q,J,G){for(var Q in B)if(!(!B.hasOwnProperty(Q)||!B[Q])){var X=B[Q];X=Array.isArray(X)?X:[X];for(var $e=0;$e<X.length;++$e){if(G&&G.cause==Q+","+$e)return;var ke=X[$e],ge=ke.inside,qe=!!ke.lookbehind,it=!!ke.greedy,Zt=ke.alias;if(it&&!ke.pattern.global){var lt=ke.pattern.toString().match(/[imsuy]*$/)[0];ke.pattern=RegExp(ke.pattern.source,lt+"g")}for(var ot=ke.pattern||ke,Ie=q.next,at=J;Ie!==L.tail&&!(G&&at>=G.reach);at+=Ie.value.length,Ie=Ie.next){var Mt=Ie.value;if(L.length>H.length)return;if(!(Mt instanceof k)){var St=1,Qe;if(it){if(Qe=E(ot,at,H,qe),!Qe||Qe.index>=H.length)break;var kt=Qe.index,Fr=Qe.index+Qe[0].length,Dt=at;for(Dt+=Ie.value.length;kt>=Dt;)Ie=Ie.next,Dt+=Ie.value.length;if(Dt-=Ie.value.length,at=Dt,Ie.value instanceof k)continue;for(var yr=Ie;yr!==L.tail&&(Dt<Fr||typeof yr.value=="string");yr=yr.next)St++,Dt+=yr.value.length;St--,Mt=H.slice(at,Dt),Qe.index-=at}else if(Qe=E(ot,0,Mt,qe),!Qe)continue;var kt=Qe.index,dr=Qe[0],Or=Mt.slice(0,kt),_r=Mt.slice(kt+dr.length),Er=at+Mt.length;G&&Er>G.reach&&(G.reach=Er);var Ft=Ie.prev;Or&&(Ft=D(L,Ft,Or),at+=Or.length),V(L,Ft,St);var U=new k(Q,ge?b.tokenize(dr,ge):dr,Zt,dr);if(Ie=D(L,Ft,U),_r&&D(L,Ie,_r),St>1){var K={cause:Q+","+$e,reach:Er};F(H,L,B,Ie.prev,at,K),G&&K.reach>G.reach&&(G.reach=K.reach)}}}}}}function j(){var H={value:null,prev:null,next:null},L={value:null,prev:H,next:null};H.next=L,this.head=H,this.tail=L,this.length=0}function D(H,L,B){var q=L.next,J={value:B,prev:L,next:q};return L.next=J,q.prev=J,H.length++,J}function V(H,L,B){for(var q=L.next,J=0;J<B&&q!==H.tail;J++)q=q.next;L.next=q,q.prev=L,H.length-=J}function pe(H){for(var L=[],B=H.head.next;B!==H.tail;)L.push(B.value),B=B.next;return L}if(!n.document)return n.addEventListener&&(b.disableWorkerMessageHandler||n.addEventListener("message",function(H){var L=JSON.parse(H.data),B=L.language,q=L.code,J=L.immediateClose;n.postMessage(b.highlight(q,b.languages[B],B)),J&&n.close()},!1)),b;var ee=b.util.currentScript();ee&&(b.filename=ee.src,ee.hasAttribute("data-manual")&&(b.manual=!0));function ae(){b.manual||b.highlightAll()}if(!b.manual){var _e=document.readyState;_e==="loading"||_e==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",ae):window.requestAnimationFrame?window.requestAnimationFrame(ae):window.setTimeout(ae,16)}return b}(r);t.exports&&(t.exports=e),typeof tn<"u"&&(tn.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(h,d){var $={};$["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[d]},$.cdata=/^<!\[CDATA\[|\]\]>$/i;var b={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:$}};b["language-"+d]={pattern:/[\s\S]+/,inside:e.languages[d]};var k={};k[h]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return h}),"i"),lookbehind:!0,greedy:!0,inside:b},e.languages.insertBefore("markup","cdata",k)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,h){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[h,"language-"+h],inside:e.languages[h]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var h=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+h.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+h.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+h.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+h.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:h,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var d=n.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",h=function(ee,ae){return" Error "+ee+" while fetching file: "+ae},d=" Error: File does not exist or is empty",$={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},b="data-src-status",k="loading",E="loaded",F="failed",j="pre[data-src]:not(["+b+'="'+E+'"]):not(['+b+'="'+k+'"])';function D(ee,ae,_e){var H=new XMLHttpRequest;H.open("GET",ee,!0),H.onreadystatechange=function(){H.readyState==4&&(H.status<400&&H.responseText?ae(H.responseText):H.status>=400?_e(h(H.status,H.statusText)):_e(d))},H.send(null)}function V(ee){var ae=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ee||"");if(ae){var _e=Number(ae[1]),H=ae[2],L=ae[3];return H?L?[_e,Number(L)]:[_e,void 0]:[_e,_e]}}e.hooks.add("before-highlightall",function(ee){ee.selector+=", "+j}),e.hooks.add("before-sanity-check",function(ee){var ae=ee.element;if(ae.matches(j)){ee.code="",ae.setAttribute(b,k);var _e=ae.appendChild(document.createElement("CODE"));_e.textContent=n;var H=ae.getAttribute("data-src"),L=ee.language;if(L==="none"){var B=(/\.(\w+)$/.exec(H)||[,"none"])[1];L=$[B]||B}e.util.setLanguage(_e,L),e.util.setLanguage(ae,L);var q=e.plugins.autoloader;q&&q.loadLanguages(L),D(H,function(J){ae.setAttribute(b,E);var G=V(ae.getAttribute("data-range"));if(G){var Q=J.split(/\r\n?|\n/g),X=G[0],$e=G[1]==null?Q.length:G[1];X<0&&(X+=Q.length),X=Math.max(0,Math.min(X-1,Q.length)),$e<0&&($e+=Q.length),$e=Math.max(0,Math.min($e,Q.length)),J=Q.slice(X,$e).join(`
`),ae.hasAttribute("data-start")||ae.setAttribute("data-start",String(X+1))}_e.textContent=J,e.highlightElement(_e)},function(J){ae.setAttribute(b,F),_e.textContent=J})}}),e.plugins.fileHighlight={highlight:function(ae){for(var _e=(ae||document).querySelectorAll(j),H=0,L;L=_e[H++];)e.highlightElement(L)}};var pe=!1;e.fileHighlight=function(){pe||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),pe=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(zw);var Ag={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,$={},b={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function H(L){return L instanceof k?new k(L.type,H(L.content),L.alias):Array.isArray(L)?L.map(H):L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(H){return Object.prototype.toString.call(H).slice(8,-1)},objId:function(H){return H.__id||Object.defineProperty(H,"__id",{value:++d}),H.__id},clone:function H(L,B){B=B||{};var q,J;switch(b.util.type(L)){case"Object":if(J=b.util.objId(L),B[J])return B[J];q={},B[J]=q;for(var G in L)L.hasOwnProperty(G)&&(q[G]=H(L[G],B));return q;case"Array":return J=b.util.objId(L),B[J]?B[J]:(q=[],B[J]=q,L.forEach(function(Q,X){q[X]=H(Q,B)}),q);default:return L}},getLanguage:function(H){for(;H;){var L=h.exec(H.className);if(L)return L[1].toLowerCase();H=H.parentElement}return"none"},setLanguage:function(H,L){H.className=H.className.replace(RegExp(h,"gi"),""),H.classList.add("language-"+L)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(q){var H=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(q.stack)||[])[1];if(H){var L=document.getElementsByTagName("script");for(var B in L)if(L[B].src==H)return L[B]}return null}},isActive:function(H,L,B){for(var q="no-"+L;H;){var J=H.classList;if(J.contains(L))return!0;if(J.contains(q))return!1;H=H.parentElement}return!!B}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(H,L){var B=b.util.clone(b.languages[H]);for(var q in L)B[q]=L[q];return B},insertBefore:function(H,L,B,q){q=q||b.languages;var J=q[H],G={};for(var Q in J)if(J.hasOwnProperty(Q)){if(Q==L)for(var X in B)B.hasOwnProperty(X)&&(G[X]=B[X]);B.hasOwnProperty(Q)||(G[Q]=J[Q])}var $e=q[H];return q[H]=G,b.languages.DFS(b.languages,function(ke,ge){ge===$e&&ke!=H&&(this[ke]=G)}),G},DFS:function H(L,B,q,J){J=J||{};var G=b.util.objId;for(var Q in L)if(L.hasOwnProperty(Q)){B.call(L,Q,L[Q],q||Q);var X=L[Q],$e=b.util.type(X);$e==="Object"&&!J[G(X)]?(J[G(X)]=!0,H(X,B,null,J)):$e==="Array"&&!J[G(X)]&&(J[G(X)]=!0,H(X,B,Q,J))}}},plugins:{},highlightAll:function(H,L){b.highlightAllUnder(document,H,L)},highlightAllUnder:function(H,L,B){var q={callback:B,container:H,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};b.hooks.run("before-highlightall",q),q.elements=Array.prototype.slice.apply(q.container.querySelectorAll(q.selector)),b.hooks.run("before-all-elements-highlight",q);for(var J=0,G;G=q.elements[J++];)b.highlightElement(G,L===!0,q.callback)},highlightElement:function(H,L,B){var q=b.util.getLanguage(H),J=b.languages[q];b.util.setLanguage(H,q);var G=H.parentElement;G&&G.nodeName.toLowerCase()==="pre"&&b.util.setLanguage(G,q);var Q=H.textContent,X={element:H,language:q,grammar:J,code:Q};function $e(ge){X.highlightedCode=ge,b.hooks.run("before-insert",X),X.element.innerHTML=X.highlightedCode,b.hooks.run("after-highlight",X),b.hooks.run("complete",X),B&&B.call(X.element)}if(b.hooks.run("before-sanity-check",X),G=X.element.parentElement,G&&G.nodeName.toLowerCase()==="pre"&&!G.hasAttribute("tabindex")&&G.setAttribute("tabindex","0"),!X.code){b.hooks.run("complete",X),B&&B.call(X.element);return}if(b.hooks.run("before-highlight",X),!X.grammar){$e(b.util.encode(X.code));return}if(L&&n.Worker){var ke=new Worker(b.filename);ke.onmessage=function(ge){$e(ge.data)},ke.postMessage(JSON.stringify({language:X.language,code:X.code,immediateClose:!0}))}else $e(b.highlight(X.code,X.grammar,X.language))},highlight:function(H,L,B){var q={code:H,grammar:L,language:B};if(b.hooks.run("before-tokenize",q),!q.grammar)throw new Error('The language "'+q.language+'" has no grammar.');return q.tokens=b.tokenize(q.code,q.grammar),b.hooks.run("after-tokenize",q),k.stringify(b.util.encode(q.tokens),q.language)},tokenize:function(H,L){var B=L.rest;if(B){for(var q in B)L[q]=B[q];delete L.rest}var J=new j;return D(J,J.head,H),F(H,J,L,J.head,0),pe(J)},hooks:{all:{},add:function(H,L){var B=b.hooks.all;B[H]=B[H]||[],B[H].push(L)},run:function(H,L){var B=b.hooks.all[H];if(!(!B||!B.length))for(var q=0,J;J=B[q++];)J(L)}},Token:k};n.Prism=b;function k(H,L,B,q){this.type=H,this.content=L,this.alias=B,this.length=(q||"").length|0}k.stringify=function H(L,B){if(typeof L=="string")return L;if(Array.isArray(L)){var q="";return L.forEach(function($e){q+=H($e,B)}),q}var J={type:L.type,content:H(L.content,B),tag:"span",classes:["token",L.type],attributes:{},language:B},G=L.alias;G&&(Array.isArray(G)?Array.prototype.push.apply(J.classes,G):J.classes.push(G)),b.hooks.run("wrap",J);var Q="";for(var X in J.attributes)Q+=" "+X+'="'+(J.attributes[X]||"").replace(/"/g,"&quot;")+'"';return"<"+J.tag+' class="'+J.classes.join(" ")+'"'+Q+">"+J.content+"</"+J.tag+">"};function E(H,L,B,q){H.lastIndex=L;var J=H.exec(B);if(J&&q&&J[1]){var G=J[1].length;J.index+=G,J[0]=J[0].slice(G)}return J}function F(H,L,B,q,J,G){for(var Q in B)if(!(!B.hasOwnProperty(Q)||!B[Q])){var X=B[Q];X=Array.isArray(X)?X:[X];for(var $e=0;$e<X.length;++$e){if(G&&G.cause==Q+","+$e)return;var ke=X[$e],ge=ke.inside,qe=!!ke.lookbehind,it=!!ke.greedy,Zt=ke.alias;if(it&&!ke.pattern.global){var lt=ke.pattern.toString().match(/[imsuy]*$/)[0];ke.pattern=RegExp(ke.pattern.source,lt+"g")}for(var ot=ke.pattern||ke,Ie=q.next,at=J;Ie!==L.tail&&!(G&&at>=G.reach);at+=Ie.value.length,Ie=Ie.next){var Mt=Ie.value;if(L.length>H.length)return;if(!(Mt instanceof k)){var St=1,Qe;if(it){if(Qe=E(ot,at,H,qe),!Qe||Qe.index>=H.length)break;var kt=Qe.index,Fr=Qe.index+Qe[0].length,Dt=at;for(Dt+=Ie.value.length;kt>=Dt;)Ie=Ie.next,Dt+=Ie.value.length;if(Dt-=Ie.value.length,at=Dt,Ie.value instanceof k)continue;for(var yr=Ie;yr!==L.tail&&(Dt<Fr||typeof yr.value=="string");yr=yr.next)St++,Dt+=yr.value.length;St--,Mt=H.slice(at,Dt),Qe.index-=at}else if(Qe=E(ot,0,Mt,qe),!Qe)continue;var kt=Qe.index,dr=Qe[0],Or=Mt.slice(0,kt),_r=Mt.slice(kt+dr.length),Er=at+Mt.length;G&&Er>G.reach&&(G.reach=Er);var Ft=Ie.prev;Or&&(Ft=D(L,Ft,Or),at+=Or.length),V(L,Ft,St);var U=new k(Q,ge?b.tokenize(dr,ge):dr,Zt,dr);if(Ie=D(L,Ft,U),_r&&D(L,Ie,_r),St>1){var K={cause:Q+","+$e,reach:Er};F(H,L,B,Ie.prev,at,K),G&&K.reach>G.reach&&(G.reach=K.reach)}}}}}}function j(){var H={value:null,prev:null,next:null},L={value:null,prev:H,next:null};H.next=L,this.head=H,this.tail=L,this.length=0}function D(H,L,B){var q=L.next,J={value:B,prev:L,next:q};return L.next=J,q.prev=J,H.length++,J}function V(H,L,B){for(var q=L.next,J=0;J<B&&q!==H.tail;J++)q=q.next;L.next=q,q.prev=L,H.length-=J}function pe(H){for(var L=[],B=H.head.next;B!==H.tail;)L.push(B.value),B=B.next;return L}if(!n.document)return n.addEventListener&&(b.disableWorkerMessageHandler||n.addEventListener("message",function(H){var L=JSON.parse(H.data),B=L.language,q=L.code,J=L.immediateClose;n.postMessage(b.highlight(q,b.languages[B],B)),J&&n.close()},!1)),b;var ee=b.util.currentScript();ee&&(b.filename=ee.src,ee.hasAttribute("data-manual")&&(b.manual=!0));function ae(){b.manual||b.highlightAll()}if(!b.manual){var _e=document.readyState;_e==="loading"||_e==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",ae):window.requestAnimationFrame?window.requestAnimationFrame(ae):window.setTimeout(ae,16)}return b}(r);t.exports&&(t.exports=e),typeof tn<"u"&&(tn.Prism=e)})(Ag);var tv=Ag.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const Ww={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},Vw="_container_zhbxc_2",Kw="_header_zhbxc_9",Jw="_main_zhbxc_14",Zw="_footer_zhbxc_19",Gw={container:Vw,header:Kw,main:Jw,footer:Zw},ff=(t,r)=>{const e=t.__vccOpts||t;for(const[n,h]of r)e[n]=h;return e};function Qw(t,r,e,n,h,d){return cr(),Mr("div",{class:Yr(t.$style.container)},[d.hasHeader?(cr(),Mr("header",{key:0,class:Yr(t.$style.header)},[Ef(t.$slots,"header")],2)):Tu("",!0),cn("main",{class:Yr(t.$style.main)},[Ef(t.$slots,"default")],2),d.hasFooter?(cr(),Mr("footer",{key:1,class:Yr(t.$style.footer)},[Ef(t.$slots,"footer")],2)):Tu("",!0)],2)}const Xw={$style:Gw},Ju=ff(Ww,[["render",Qw],["__cssModules",Xw]]),Yw={key:0},em=["onClick"],tm={key:1},rm=["onClick"],sm=uf({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=Bo(!1),n=r;return(h,d)=>(cr(),Mr("div",{class:Yr(h.$style.wrapper)},[cn("button",{onClick:d[0]||(d[0]=$=>e.value=!e.value)},[Ef(h.$slots,"default")]),hr(tp,null,{default:xs(()=>[e.value?(cr(),Mr("div",{key:0,class:Yr(h.$style.menu)},[h.options instanceof Array?(cr(),Mr("div",Yw,[(cr(!0),Mr(Qr,null,Jf(h.options,$=>(cr(),Mr("div",{class:Yr(h.$style.opt),onClick:b=>{e.value=!1,n("select",$)}},Wo($),11,em))),256))])):(cr(),Mr("div",tm,[(cr(!0),Mr(Qr,null,Jf(Object.keys(h.options),$=>(cr(),Mr("div",{class:Yr(h.$style.opt),onClick:b=>{e.value=!1,n("select",$)}},Wo(h.options[$]),11,rm))),256))]))],2)):Tu("",!0)]),_:1})],2))}}),nm="_wrapper_1dk0z_2",am="_menu_1dk0z_5",im="_opt_1dk0z_12",lm={wrapper:nm,menu:am,opt:im},om={$style:lm},Cg=ff(sm,[["__cssModules",om]]),um=uf({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,h=Bo(e.modelValue);Zu(h,()=>{n("update:modelValue",h.value)},{immediate:!0});function d(b){h.value=e.samples[b]}const $=b=>tv.highlight(b,tv.languages.js,"javascript");return(b,k)=>(cr(),vc(Ju,null,{header:xs(()=>[jn(" Input "),e.samples?(cr(),Mr("div",{key:0,class:Yr(b.$style.actions)},[hr(Cg,{options:Object.keys(e.samples),onSelect:d},{default:xs(()=>[jn("Samples")]),_:1},8,["options"])],2)):Tu("",!0)]),footer:xs(()=>[e.parseError?(cr(),Mr("span",{key:0,class:Yr(b.$style.parseError)},Wo(e.parseError),3)):Tu("",!0),cn("div",{class:Yr(b.$style.actions)},[cn("button",{onClick:k[1]||(k[1]=E=>n("run"))},"RUN")],2)]),default:xs(()=>[hr(rf(Hw),{class:Yr(b.$style.code),modelValue:h.value,"onUpdate:modelValue":k[0]||(k[0]=E=>h.value=E),highlight:$,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),fm="_code_af8rl_2",cm="_parseError_af8rl_6",hm="_actions_af8rl_9",pm={code:fm,parseError:cm,actions:hm},vm={$style:pm},gm=ff(um,[["__cssModules",vm]]);function lr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let ju=class _g extends Error{constructor(e,n){super(e);me(this,"name","AiScript");me(this,"info");me(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,_g)}},rv=class extends ju{constructor(e){super(e.message??`${e}`,e);me(this,"name","Internal")}},gt=class extends ju{constructor(e,n,h){super(`${e} (Line ${n.line}, Column ${n.column})`,h);me(this,"loc");me(this,"name","Syntax");this.loc=n}};class sv extends ju{constructor(e,n,h){super(`${e} (Line ${n.line}, Column ${n.column})`,h);me(this,"loc");me(this,"name","Namespace");this.loc=n}}let Vt=class extends ju{constructor(e,n){super(e,n);me(this,"name","Runtime")}},dm=class extends Vt{constructor(r,e){super(r,e)}};var $i=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Xa=class kg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new kg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Vt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Vt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Vt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Vt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};$i([lr],Xa.prototype,"log",null);$i([lr],Xa.prototype,"onUpdated",null);$i([lr],Xa.prototype,"createChildScope",null);$i([lr],Xa.prototype,"get",null);$i([lr],Xa.prototype,"exists",null);$i([lr],Xa.prototype,"getAll",null);$i([lr],Xa.prototype,"add",null);$i([lr],Xa.prototype,"assign",null);let Cf;const ym=new Uint8Array(16);function wm(){if(!Cf&&(Cf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cf(ym)}const Br=[];for(let t=0;t<256;++t)Br.push((t+256).toString(16).slice(1));function mm(t,r=0){return Br[t[r+0]]+Br[t[r+1]]+Br[t[r+2]]+Br[t[r+3]]+"-"+Br[t[r+4]]+Br[t[r+5]]+"-"+Br[t[r+6]]+Br[t[r+7]]+"-"+Br[t[r+8]]+Br[t[r+9]]+"-"+Br[t[r+10]]+Br[t[r+11]]+Br[t[r+12]]+Br[t[r+13]]+Br[t[r+14]]+Br[t[r+15]]}const $m=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nv={randomUUID:$m};function rp(t,r,e){if(nv.randomUUID&&!r&&!t)return nv.randomUUID();t=t||{};const n=t.random||(t.rng||wm)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return mm(n)}var sp={exports:{}};sp.exports;(function(t){(function(r,e,n){function h(k){var E=this,F=b();E.next=function(){var j=2091639*E.s0+E.c*23283064365386963e-26;return E.s0=E.s1,E.s1=E.s2,E.s2=j-(E.c=j|0)},E.c=1,E.s0=F(" "),E.s1=F(" "),E.s2=F(" "),E.s0-=F(k),E.s0<0&&(E.s0+=1),E.s1-=F(k),E.s1<0&&(E.s1+=1),E.s2-=F(k),E.s2<0&&(E.s2+=1),F=null}function d(k,E){return E.c=k.c,E.s0=k.s0,E.s1=k.s1,E.s2=k.s2,E}function $(k,E){var F=new h(k),j=E&&E.state,D=F.next;return D.int32=function(){return F.next()*4294967296|0},D.double=function(){return D()+(D()*2097152|0)*11102230246251565e-32},D.quick=D,j&&(typeof j=="object"&&d(j,F),D.state=function(){return d(F,{})}),D}function b(){var k=4022871197,E=function(F){F=String(F);for(var j=0;j<F.length;j++){k+=F.charCodeAt(j);var D=.02519603282416938*k;k=D>>>0,D-=k,D*=k,k=D>>>0,D-=k,k+=D*4294967296}return(k>>>0)*23283064365386963e-26};return E}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.alea=$})(tn,t,!1)})(sp);var xm=sp.exports,np={exports:{}};np.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.x=0,k.y=0,k.z=0,k.w=0,k.next=function(){var j=k.x^k.x<<11;return k.x=k.y,k.y=k.z,k.z=k.w,k.w^=k.w>>>19^j^j>>>8},b===(b|0)?k.x=b:E+=b;for(var F=0;F<E.length+64;F++)k.x^=E.charCodeAt(F)|0,k.next()}function d(b,k){return k.x=b.x,k.y=b.y,k.z=b.z,k.w=b.w,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor128=$})(tn,t,!1)})(np);var bm=np.exports,ap={exports:{}};ap.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.next=function(){var j=k.x^k.x>>>2;return k.x=k.y,k.y=k.z,k.z=k.w,k.w=k.v,(k.d=k.d+362437|0)+(k.v=k.v^k.v<<4^(j^j<<1))|0},k.x=0,k.y=0,k.z=0,k.w=0,k.v=0,b===(b|0)?k.x=b:E+=b;for(var F=0;F<E.length+64;F++)k.x^=E.charCodeAt(F)|0,F==E.length&&(k.d=k.x<<10^k.x>>>4),k.next()}function d(b,k){return k.x=b.x,k.y=b.y,k.z=b.z,k.w=b.w,k.v=b.v,k.d=b.d,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorwow=$})(tn,t,!1)})(ap);var Am=ap.exports,ip={exports:{}};ip.exports;(function(t){(function(r,e,n){function h(b){var k=this;k.next=function(){var F=k.x,j=k.i,D,V;return D=F[j],D^=D>>>7,V=D^D<<24,D=F[j+1&7],V^=D^D>>>10,D=F[j+3&7],V^=D^D>>>3,D=F[j+4&7],V^=D^D<<7,D=F[j+7&7],D=D^D<<13,V^=D^D<<9,F[j]=V,k.i=j+1&7,V};function E(F,j){var D,V=[];if(j===(j|0))V[0]=j;else for(j=""+j,D=0;D<j.length;++D)V[D&7]=V[D&7]<<15^j.charCodeAt(D)+V[D+1&7]<<13;for(;V.length<8;)V.push(0);for(D=0;D<8&&V[D]===0;++D);for(D==8?V[7]=-1:V[D],F.x=V,F.i=0,D=256;D>0;--D)F.next()}E(k,b)}function d(b,k){return k.x=b.x.slice(),k.i=b.i,k}function $(b,k){b==null&&(b=+new Date);var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(F.x&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorshift7=$})(tn,t,!1)})(ip);var Cm=ip.exports,lp={exports:{}};lp.exports;(function(t){(function(r,e,n){function h(b){var k=this;k.next=function(){var F=k.w,j=k.X,D=k.i,V,pe;return k.w=F=F+1640531527|0,pe=j[D+34&127],V=j[D=D+1&127],pe^=pe<<13,V^=V<<17,pe^=pe>>>15,V^=V>>>12,pe=j[D]=pe^V,k.i=D,pe+(F^F>>>16)|0};function E(F,j){var D,V,pe,ee,ae,_e=[],H=128;for(j===(j|0)?(V=j,j=null):(j=j+"\0",V=0,H=Math.max(H,j.length)),pe=0,ee=-32;ee<H;++ee)j&&(V^=j.charCodeAt((ee+32)%j.length)),ee===0&&(ae=V),V^=V<<10,V^=V>>>15,V^=V<<4,V^=V>>>13,ee>=0&&(ae=ae+1640531527|0,D=_e[ee&127]^=V+ae,pe=D==0?pe+1:0);for(pe>=128&&(_e[(j&&j.length||0)&127]=-1),pe=127,ee=4*128;ee>0;--ee)V=_e[pe+34&127],D=_e[pe=pe+1&127],V^=V<<13,D^=D<<17,V^=V>>>15,D^=D>>>12,_e[pe]=V^D;F.w=ae,F.X=_e,F.i=pe}E(k,b)}function d(b,k){return k.i=b.i,k.w=b.w,k.X=b.X.slice(),k}function $(b,k){b==null&&(b=+new Date);var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(F.X&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor4096=$})(tn,t,!1)})(lp);var _m=lp.exports,op={exports:{}};op.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.next=function(){var j=k.b,D=k.c,V=k.d,pe=k.a;return j=j<<25^j>>>7^D,D=D-V|0,V=V<<24^V>>>8^pe,pe=pe-j|0,k.b=j=j<<20^j>>>12^D,k.c=D=D-V|0,k.d=V<<16^D>>>16^pe,k.a=pe-j|0},k.a=0,k.b=0,k.c=-1640531527,k.d=1367130551,b===Math.floor(b)?(k.a=b/4294967296|0,k.b=b|0):E+=b;for(var F=0;F<E.length+20;F++)k.b^=E.charCodeAt(F)|0,k.next()}function d(b,k){return k.a=b.a,k.b=b.b,k.c=b.c,k.d=b.d,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.tychei=$})(tn,t,!1)})(op);var km=op.exports,Pg={exports:{}};const Pm={},Em=Object.freeze(Object.defineProperty({__proto__:null,default:Pm},Symbol.toStringTag,{value:"Module"})),Mm=qw(Em);(function(t){(function(r,e,n){var h=256,d=6,$=52,b="random",k=n.pow(h,d),E=n.pow(2,$),F=E*2,j=h-1,D;function V(B,q,J){var G=[];q=q==!0?{entropy:!0}:q||{};var Q=_e(ae(q.entropy?[B,L(e)]:B??H(),3),G),X=new pe(G),$e=function(){for(var ke=X.g(d),ge=k,qe=0;ke<E;)ke=(ke+qe)*h,ge*=h,qe=X.g(1);for(;ke>=F;)ke/=2,ge/=2,qe>>>=1;return(ke+qe)/ge};return $e.int32=function(){return X.g(4)|0},$e.quick=function(){return X.g(4)/4294967296},$e.double=$e,_e(L(X.S),e),(q.pass||J||function(ke,ge,qe,it){return it&&(it.S&&ee(it,X),ke.state=function(){return ee(X,{})}),qe?(n[b]=ke,ge):ke})($e,Q,"global"in q?q.global:this==n,q.state)}function pe(B){var q,J=B.length,G=this,Q=0,X=G.i=G.j=0,$e=G.S=[];for(J||(B=[J++]);Q<h;)$e[Q]=Q++;for(Q=0;Q<h;Q++)$e[Q]=$e[X=j&X+B[Q%J]+(q=$e[Q])],$e[X]=q;(G.g=function(ke){for(var ge,qe=0,it=G.i,Zt=G.j,lt=G.S;ke--;)ge=lt[it=j&it+1],qe=qe*h+lt[j&(lt[it]=lt[Zt=j&Zt+ge])+(lt[Zt]=ge)];return G.i=it,G.j=Zt,qe})(h)}function ee(B,q){return q.i=B.i,q.j=B.j,q.S=B.S.slice(),q}function ae(B,q){var J=[],G=typeof B,Q;if(q&&G=="object")for(Q in B)try{J.push(ae(B[Q],q-1))}catch{}return J.length?J:G=="string"?B:B+"\0"}function _e(B,q){for(var J=B+"",G,Q=0;Q<J.length;)q[j&Q]=j&(G^=q[j&Q]*19)+J.charCodeAt(Q++);return L(q)}function H(){try{var B;return D&&(B=D.randomBytes)?B=B(h):(B=new Uint8Array(h),(r.crypto||r.msCrypto).getRandomValues(B)),L(B)}catch{var q=r.navigator,J=q&&q.plugins;return[+new Date,r,J,r.screen,L(e)]}}function L(B){return String.fromCharCode.apply(0,B)}if(_e(n.random(),e),t.exports){t.exports=V;try{D=Mm}catch{}}else n["seed"+b]=V})(typeof self<"u"?self:tn,[],Math)})(Pg);var Sm=Pg.exports,Fm=xm,Om=bm,Nm=Am,Tm=Cm,Im=_m,jm=km,lu=Sm;lu.alea=Fm;lu.xor128=Om;lu.xorwow=Nm;lu.xorshift7=Tm;lu.xor4096=Im;lu.tychei=jm;var Rm=lu;const cf=Uw(Rm),bt={type:"null"},an={type:"bool",value:!0},Ws={type:"bool",value:!1},Me=t=>({type:"num",value:t}),qt=t=>({type:"str",value:t}),Jo=t=>({type:"bool",value:t}),Xf=t=>({type:"obj",value:t}),Vr=t=>({type:"arr",value:t}),Dm=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),le=t=>({type:"fn",native:t}),Lm=t=>({type:"return",value:t}),Bm=()=>({type:"break",value:null}),Hm=()=>({type:"continue",value:null}),Um=t=>t.type==="return"?t.value:t,lh=(t,r)=>({type:"error",value:t,info:r});function Gs(t){if(t==null)throw new Vt("Expect anything, but got nothing.")}function hs(t){if(t==null)throw new Vt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Vt(`Expect boolean, but got ${t.type}.`)}function fi(t){if(t==null)throw new Vt("Expect function, but got nothing.");if(t.type!=="fn")throw new Vt(`Expect function, but got ${t.type}.`)}function Ar(t){if(t==null)throw new Vt("Expect string, but got nothing.");if(t.type!=="str")throw new Vt(`Expect string, but got ${t.type}.`)}function be(t){if(t==null)throw new Vt("Expect number, but got nothing.");if(t.type!=="num")throw new Vt(`Expect number, but got ${t.type}.`)}function Bn(t){if(t==null)throw new Vt("Expect object, but got nothing.");if(t.type!=="obj")throw new Vt(`Expect object, but got ${t.type}.`)}function Yf(t){if(t==null)throw new Vt("Expect array, but got nothing.");if(t.type!=="arr")throw new Vt(`Expect array, but got ${t.type}.`)}function Fc(t){return t.type==="obj"}function av(t){return t.type==="arr"}function oh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function uh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>uh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function fh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>fh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=fh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ch(t){if(t===null)return bt;if(typeof t=="boolean")return Jo(t);if(typeof t=="string")return qt(t);if(typeof t=="number")return Me(t);if(Array.isArray(t))return Vr(t.map(r=>ch(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ch(n));return Xf(r)}return bt}function xu(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(xu(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${xu(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const qm={help:qt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":qt("0.16.0"),"Core:ai":qt("kawaii"),"Core:not":le(([t])=>(hs(t),t.value?Ws:an)),"Core:eq":le(([t,r])=>(Gs(t),Gs(r),oh(t,r)?an:Ws)),"Core:neq":le(([t,r])=>(Gs(t),Gs(r),oh(t,r)?Ws:an)),"Core:and":le(([t,r])=>(hs(t),t.value?(hs(r),r.value?an:Ws):Ws)),"Core:or":le(([t,r])=>(hs(t),t.value?an:(hs(r),r.value?an:Ws))),"Core:add":le(([t,r])=>(be(t),be(r),Me(t.value+r.value))),"Core:sub":le(([t,r])=>(be(t),be(r),Me(t.value-r.value))),"Core:mul":le(([t,r])=>(be(t),be(r),Me(t.value*r.value))),"Core:pow":le(([t,r])=>{be(t),be(r);const e=t.value**r.value;if(isNaN(e))throw new Vt("Invalid operation.");return Me(e)}),"Core:div":le(([t,r])=>{be(t),be(r);const e=t.value/r.value;if(isNaN(e))throw new Vt("Invalid operation.");return Me(e)}),"Core:mod":le(([t,r])=>(be(t),be(r),Me(t.value%r.value))),"Core:gt":le(([t,r])=>(be(t),be(r),t.value>r.value?an:Ws)),"Core:lt":le(([t,r])=>(be(t),be(r),t.value<r.value?an:Ws)),"Core:gteq":le(([t,r])=>(be(t),be(r),t.value>=r.value?an:Ws)),"Core:lteq":le(([t,r])=>(be(t),be(r),t.value<=r.value?an:Ws)),"Core:type":le(([t])=>(Gs(t),qt(t.type))),"Core:to_str":le(([t])=>(Gs(t),qt(xu(t)))),"Core:range":le(([t,r])=>(be(t),be(r),t.value<r.value?Vr(Array.from({length:r.value-t.value+1},(e,n)=>Me(n+t.value))):t.value>r.value?Vr(Array.from({length:t.value-r.value+1},(e,n)=>Me(t.value-n))):Vr([t]))),"Core:sleep":le(async([t])=>(be(t),await new Promise(r=>setTimeout(r,t.value)),bt)),"Util:uuid":le(()=>qt(rp())),"Json:stringify":le(([t])=>(Gs(t),qt(JSON.stringify(fh(t))))),"Json:parse":le(([t])=>{Ar(t);try{return ch(JSON.parse(t.value))}catch{return lh("not_json")}}),"Json:parsable":le(([t])=>{Ar(t);try{JSON.parse(t.value)}catch{return Jo(!1)}return Jo(!0)}),"Date:now":le(()=>Me(Date.now())),"Date:year":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":le(([t])=>(t&&be(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":le(([t])=>(Ar(t),Me(new Date(t.value).getTime()))),"Math:Infinity":Me(1/0),"Math:E":Me(Math.E),"Math:LN2":Me(Math.LN2),"Math:LN10":Me(Math.LN10),"Math:LOG2E":Me(Math.LOG2E),"Math:LOG10E":Me(Math.LOG10E),"Math:PI":Me(Math.PI),"Math:SQRT1_2":Me(Math.SQRT1_2),"Math:SQRT2":Me(Math.SQRT2),"Math:abs":le(([t])=>(be(t),Me(Math.abs(t.value)))),"Math:acos":le(([t])=>(be(t),Me(Math.acos(t.value)))),"Math:acosh":le(([t])=>(be(t),Me(Math.acosh(t.value)))),"Math:asin":le(([t])=>(be(t),Me(Math.asin(t.value)))),"Math:asinh":le(([t])=>(be(t),Me(Math.asinh(t.value)))),"Math:atan":le(([t])=>(be(t),Me(Math.atan(t.value)))),"Math:atanh":le(([t])=>(be(t),Me(Math.atanh(t.value)))),"Math:atan2":le(([t,r])=>(be(t),be(r),Me(Math.atan2(t.value,r.value)))),"Math:cbrt":le(([t])=>(be(t),Me(Math.cbrt(t.value)))),"Math:ceil":le(([t])=>(be(t),Me(Math.ceil(t.value)))),"Math:clz32":le(([t])=>(be(t),Me(Math.clz32(t.value)))),"Math:cos":le(([t])=>(be(t),Me(Math.cos(t.value)))),"Math:cosh":le(([t])=>(be(t),Me(Math.cosh(t.value)))),"Math:exp":le(([t])=>(be(t),Me(Math.exp(t.value)))),"Math:expm1":le(([t])=>(be(t),Me(Math.expm1(t.value)))),"Math:floor":le(([t])=>(be(t),Me(Math.floor(t.value)))),"Math:fround":le(([t])=>(be(t),Me(Math.fround(t.value)))),"Math:hypot":le(([t])=>{Yf(t);const r=[];for(const e of t.value)be(e),r.push(e.value);return Me(Math.hypot(...r))}),"Math:imul":le(([t,r])=>(be(t),be(r),Me(Math.imul(t.value,r.value)))),"Math:log":le(([t])=>(be(t),Me(Math.log(t.value)))),"Math:log1p":le(([t])=>(be(t),Me(Math.log1p(t.value)))),"Math:log10":le(([t])=>(be(t),Me(Math.log10(t.value)))),"Math:log2":le(([t])=>(be(t),Me(Math.log2(t.value)))),"Math:max":le(([t,r])=>(be(t),be(r),Me(Math.max(t.value,r.value)))),"Math:min":le(([t,r])=>(be(t),be(r),Me(Math.min(t.value,r.value)))),"Math:pow":le(([t,r])=>(be(t),be(r),Me(Math.pow(t.value,r.value)))),"Math:round":le(([t])=>(be(t),Me(Math.round(t.value)))),"Math:sign":le(([t])=>(be(t),Me(Math.sign(t.value)))),"Math:sin":le(([t])=>(be(t),Me(Math.sin(t.value)))),"Math:sinh":le(([t])=>(be(t),Me(Math.sinh(t.value)))),"Math:sqrt":le(([t])=>{be(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Vt("Invalid operation.");return Me(r)}),"Math:tan":le(([t])=>(be(t),Me(Math.tan(t.value)))),"Math:tanh":le(([t])=>(be(t),Me(Math.tanh(t.value)))),"Math:trunc":le(([t])=>(be(t),Me(Math.trunc(t.value)))),"Math:rnd":le(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Me(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Me(Math.random())),"Math:gen_rng":le(([t])=>{if(Gs(t),t.type!=="num"&&t.type!=="str")return bt;const r=cf(t.value.toString());return le(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Me(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Me(r()))}),"Num:to_hex":le(([t])=>(be(t),qt(t.value.toString(16)))),"Num:from_hex":le(([t])=>(Ar(t),Me(parseInt(t.value,16)))),"Str:lf":qt(`
`),"Str:lt":le(([t,r])=>(Ar(t),Ar(r),t.value<r.value?Me(-1):t.value===r.value?Me(0):Me(1))),"Str:gt":le(([t,r])=>(Ar(t),Ar(r),t.value>r.value?Me(-1):t.value===r.value?Me(0):Me(1))),"Str:from_codepoint":le(([t])=>(be(t),qt(String.fromCodePoint(t.value)))),"Obj:keys":le(([t])=>(Bn(t),Vr(Array.from(t.value.keys()).map(r=>qt(r))))),"Obj:vals":le(([t])=>(Bn(t),Vr(Array.from(t.value.values())))),"Obj:kvs":le(([t])=>(Bn(t),Vr(Array.from(t.value.entries()).map(([r,e])=>Vr([qt(r),e]))))),"Obj:get":le(([t,r])=>(Bn(t),Ar(r),t.value.get(r.value)??bt)),"Obj:set":le(([t,r,e])=>(Bn(t),Ar(r),Gs(e),t.value.set(r.value,e),bt)),"Obj:has":le(([t,r])=>(Bn(t),Ar(r),Jo(t.value.has(r.value)))),"Obj:copy":le(([t])=>(Bn(t),Xf(new Map(t.value)))),"Obj:merge":le(([t,r])=>(Bn(t),Bn(r),Xf(new Map([...t.value,...r.value])))),"Error:create":le(([t,r])=>(Ar(t),lh(t.value,r))),"Async:interval":le(async([t,r,e],n)=>{be(t),fi(r),e&&(hs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),le(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":le(async([t,r],e)=>{be(t),fi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),le(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})};var ou={},zm=()=>{const t="\\ud800-\\udfff",r="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",h="\\u1ab0-\\u1aff",d="\\u1dc0-\\u1dff",$=r+e+n+h+d,b="\\ufe0e\\ufe0f",k="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",E=`[${t}]`,F=`[${$}]`,j="\\ud83c[\\udffb-\\udfff]",D=`(?:${F}|${j})`,V=`[^${t}]`,pe="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="\\u200d",_e="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",H=`[${k}]`,L=`${D}?`,B=`[${b}]?`,q=`(?:${ae}(?:${[V,pe,ee].join("|")})${B+L})*`,J=B+L+q,Q=`(?:${[`${V}${F}?`,F,pe,ee,E,H].join("|")})`;return new RegExp(`${_e}|${j}(?=${j})|${Q+J}`,"g")},Wm=tn&&tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ou,"__esModule",{value:!0});var dc=Wm(zm);function hh(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(dc.default())||[]}var zn=ou.toArray=hh;function up(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(dc.default());return r===null?0:r.length}var hf=ou.length=up;function Eg(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(dc.default());return n?n.slice(r,e).join(""):""}var pf=ou.substring=Eg;function Vm(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=up(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var h;typeof e>"u"?h=n:(typeof e!="number"&&(e=parseInt(e,10)),h=e>=0?e+r:r);var d=t.match(dc.default());return d?d.slice(r,h).join(""):""}ou.substr=Vm;function Km(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var h=up(t);if(h>r)return Eg(t,0,r);if(h<r){var d=e.repeat(r-h);return n==="left"?d+t:t+d}return t}ou.limit=Km;function Jm(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=hh(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var h=hh(r),d=!1,$;for($=e;$<n.length;$+=1){for(var b=0;b<h.length&&h[b]===n[$+b];)b+=1;if(b===h.length&&h[b-1]===n[$+b-1]){d=!0;break}}return d?$:-1}var vf=ou.indexOf=Jm;const iv={num:{to_str:t=>le(async(r,e)=>qt(t.value.toString()))},str:{to_num:t=>le(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?bt:Me(n)}),len:t=>Me(hf(t.value)),replace:t=>le(async([r,e],n)=>(Ar(r),Ar(e),qt(t.value.split(r.value).join(e.value)))),index_of:t=>le(async([r],e)=>(Ar(r),Me(vf(t.value,r.value)))),incl:t=>le(async([r],e)=>(Ar(r),t.value.includes(r.value)?an:Ws)),trim:t=>le(async(r,e)=>qt(t.value.trim())),upper:t=>le(async(r,e)=>qt(t.value.toUpperCase())),lower:t=>le(async(r,e)=>qt(t.value.toLowerCase())),split:t=>le(async([r],e)=>(r&&Ar(r),Vr(r?t.value.split(r?r.value:"").map(n=>qt(n)):zn(t.value).map(n=>qt(n))))),slice:t=>le(async([r,e],n)=>(be(r),be(e),qt(pf(t.value,r.value,e.value)))),pick:t=>le(async([r],e)=>{be(r);const h=zn(t.value)[r.value];return h?qt(h):bt}),codepoint_at:t=>le(([r],e)=>{be(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?bt:Me(n)})},arr:{len:t=>Me(t.value.length),push:t=>le(async([r],e)=>(Gs(r),t.value.push(r),t)),unshift:t=>le(async([r],e)=>(Gs(r),t.value.unshift(r),t)),pop:t=>le(async(r,e)=>t.value.pop()??bt),shift:t=>le(async(r,e)=>t.value.shift()??bt),concat:t=>le(async([r],e)=>(Yf(r),Vr(t.value.concat(r.value)))),slice:t=>le(async([r,e],n)=>(be(r),be(e),Vr(t.value.slice(r.value,e.value)))),join:t=>le(async([r],e)=>(r&&Ar(r),qt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>le(async([r],e)=>{fi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Me(d)]));return Vr(await Promise.all(n))}),filter:t=>le(async([r],e)=>{fi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Me(h)]);hs($),$.value&&n.push(d)}return Vr(n)}),reduce:t=>le(async([r,e],n)=>{fi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Me($)])}return d}),find:t=>le(async([r],e)=>{fi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Me(n)]);if(hs(d),d.value)return h}return bt}),incl:t=>le(async([r],e)=>(Gs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ws:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?an:Ws)),reverse:t=>le(async(r,e)=>(t.value.reverse(),bt)),copy:t=>le(async(r,e)=>Vr([...t.value])),sort:t=>le(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);be(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return fi(r),Yf(t),t.value=await n(t.value,r),t})},error:{name:t=>qt(t.value),info:t=>t.info??bt}};function Zm(t,r){if(Object.hasOwn(iv,t.type)){const e=iv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Vt(`No such prop (${r}) in ${t.type}.`)}else throw new Vt(`Cannot read prop of ${t.type}. (reading ${r})`)}const Gm={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ts=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Mg=300,Qm=Mg-1;let zr=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:le(([h])=>{Gs(h),this.opts.out&&this.opts.out(h)}),readline:le(async h=>{const d=h[0];if(Ar(d),this.opts.in==null)return bt;const $=await this.opts.in(d.value);return qt($)})};this.vars=Object.fromEntries(Object.entries({...r,...qm,...n}).map(([h,d])=>[h,Gm.const(d)])),this.scope=new Xa([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),lh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof ju?this.opts.err(r):this.opts.err(new rv(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new sv('No "var" in namespace declaration: '+n.name,n.loc);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:{const d=n;throw new sv("invalid ns member type: "+d.type,d.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??bt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return Um(await this._run(r.statements,h))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const h=n instanceof ju?n:new rv(n);throw h.loc=r.loc,h.message=`${h.message} (Line ${r.loc.line}, Column ${r.loc.column})`,h}})}async __eval(r,e){if(this.stop)return bt;if(this.stepCount%Mg===Qm&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Vt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);fi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(hs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(hs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return bt}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(oh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):bt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return bt}case"for":{if(r.times){const n=await this._eval(r.times,e);be(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);be(n),be(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Me(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return bt}case"each":{const n=await this._eval(r.items,e);Yf(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return bt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),bt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),bt}case"addAssign":{const n=await this._eval(r.dest,e);be(n);const h=await this._eval(r.expr,e);return be(h),await this.assign(e,r.dest,Me(n.value+h.value)),bt}case"subAssign":{const n=await this._eval(r.dest,e);be(n);const h=await this._eval(r.expr,e);return be(h),await this.assign(e,r.dest,Me(n.value-h.value)),bt}case"null":return bt;case"bool":return Jo(r.value);case"num":return Me(r.value);case"str":return qt(r.value);case"arr":return Vr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return Xf(n)}case"prop":{const n=await this._eval(r.target,e);return Fc(n)?n.value.has(r.name)?n.value.get(r.name):bt:Zm(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(av(n)){be(h);const d=n.value[h.value];if(d===void 0)throw new dm(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Fc(n))return Ar(h),n.value.has(h.value)?n.value.get(h.value):bt;throw new Vt(`Cannot read prop (${xu(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return hs(n),Jo(!n.value)}case"fn":return Dm(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Jo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=xu(d)}return qt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Lm(n)}case"break":return this.log("block:break",{scope:e.name}),Bm();case"continue":return this.log("block:continue",{scope:e.name}),Hm();case"ns":return bt;case"meta":return bt;case"and":{const n=await this._eval(r.left,e);if(hs(n),n.value){const h=await this._eval(r.right,e);return hs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(hs(n),n.value)return n;{const h=await this._eval(r.right,e);return hs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=bt;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(av(h))be(d),h.value[d.value]=n;else if(Fc(h))Ar(d),h.value.set(d.value,n);else throw new Vt(`Cannot read prop (${xu(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Bn(h),h.value.set(e.name,n)}else throw new Vt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ts([lr],zr.prototype,"exec",null);ts([lr],zr.prototype,"execFn",null);ts([lr],zr.prototype,"execFnSimple",null);ts([lr],zr.prototype,"handleError",null);ts([lr],zr.prototype,"log",null);ts([lr],zr.prototype,"collectNs",null);ts([lr],zr.prototype,"collectNsMember",null);ts([lr],zr.prototype,"_fn",null);ts([lr],zr.prototype,"_eval",null);ts([lr],zr.prototype,"__eval",null);ts([lr],zr.prototype,"_run",null);ts([lr],zr.prototype,"registerAbortHandler",null);ts([lr],zr.prototype,"unregisterAbortHandler",null);ts([lr],zr.prototype,"abort",null);ts([lr],zr.prototype,"assign",null);ts([lr],zr,"collectMetadata",null);class Xm{constructor(r,e){me(this,"pages");me(this,"firstPageIndex");me(this,"lastPageIndex");me(this,"pageIndex");me(this,"address");me(this,"_char");me(this,"line");me(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var N;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(N||(N={}));class Ym{constructor(r,e,n=!1,h,d){me(this,"kind");me(this,"loc");me(this,"hasLeftSpacing");me(this,"value");me(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=h,this.children=d}}function Le(t,r,e){return new Ym(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const lv=[" ","	"],e0=["\r",`
`],ov=/^[0-9]$/,t0=/^[A-Za-z0-9_]$/;class r0{constructor(r){me(this,"stream");me(this,"_tokens",[]);typeof r=="string"?this.stream=new Xm(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}get kind(){return this.token.kind}next(){this._tokens[0].kind!==N.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.kind!==r)throw new gt(`unexpected token: ${N[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=Le(N.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(lv.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(e0.includes(this.stream.char))return this.stream.next(),r=Le(N.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.NotEq,n,{hasLeftSpacing:e})):r=Le(N.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=Le(N.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=Le(N.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new gt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=Le(N.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=Le(N.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=Le(N.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=Le(N.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=Le(N.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.PlusEq,n,{hasLeftSpacing:e})):r=Le(N.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=Le(N.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.MinusEq,n,{hasLeftSpacing:e})):r=Le(N.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=Le(N.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=Le(N.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Le(N.Colon2,n,{hasLeftSpacing:e})):r=Le(N.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=Le(N.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Le(N.Out,n,{hasLeftSpacing:e})):r=Le(N.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=Le(N.Arrow,n,{hasLeftSpacing:e})):r=Le(N.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(N.GtEq,n,{hasLeftSpacing:e})):r=Le(N.Gt,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=Le(N.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=Le(N.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=Le(N.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=Le(N.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=Le(N.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=Le(N.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=Le(N.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=Le(N.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const h=this.tryReadDigits(e);if(h){r=h;break}const d=this.tryReadWord(e);if(d){r=d;break}throw new gt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&t0.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return Le(N.NullKeyword,n,{hasLeftSpacing:r});case"true":return Le(N.TrueKeyword,n,{hasLeftSpacing:r});case"false":return Le(N.FalseKeyword,n,{hasLeftSpacing:r});case"each":return Le(N.EachKeyword,n,{hasLeftSpacing:r});case"for":return Le(N.ForKeyword,n,{hasLeftSpacing:r});case"loop":return Le(N.LoopKeyword,n,{hasLeftSpacing:r});case"break":return Le(N.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return Le(N.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return Le(N.MatchKeyword,n,{hasLeftSpacing:r});case"case":return Le(N.CaseKeyword,n,{hasLeftSpacing:r});case"default":return Le(N.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return Le(N.IfKeyword,n,{hasLeftSpacing:r});case"elif":return Le(N.ElifKeyword,n,{hasLeftSpacing:r});case"else":return Le(N.ElseKeyword,n,{hasLeftSpacing:r});case"return":return Le(N.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return Le(N.EvalKeyword,n,{hasLeftSpacing:r});case"var":return Le(N.VarKeyword,n,{hasLeftSpacing:r});case"let":return Le(N.LetKeyword,n,{hasLeftSpacing:r});case"exists":return Le(N.ExistsKeyword,n,{hasLeftSpacing:r});default:return Le(N.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const h=this.stream.getPos();for(;!this.stream.eof&&ov.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&ov.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new gt("digit expected",h)}let d;return n.length>0?d=e+"."+n:d=e,Le(N.NumberLiteral,h,{hasLeftSpacing:r,value:d})}readStringLiteral(r){let e="";const n=this.stream.char;let h="string";const d=this.stream.getPos();for(this.stream.next();h!=="finish";)switch(h){case"string":{if(this.stream.eof)throw new gt("unexpected EOF",d);if(this.stream.char==="\\"){this.stream.next(),h="escape";break}if(this.stream.char===n){this.stream.next(),h="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new gt("unexpected EOF",d);e+=this.stream.char,this.stream.next(),h="string";break}}return Le(N.StringLiteral,d,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",h=[],d="string";const $=this.stream.getPos();let b=$;for(this.stream.next();d!=="finish";)switch(d){case"string":{if(this.stream.eof)throw new gt("unexpected EOF",$);if(this.stream.char==="\\"){this.stream.next(),d="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(Le(N.TemplateStringElement,b,{hasLeftSpacing:r,value:n})),d="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(Le(N.TemplateStringElement,b,{hasLeftSpacing:r,value:n})),n=""),b=this.stream.getPos(),d="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new gt("unexpected EOF",$);n+=this.stream.char,this.stream.next(),d="string";break}case"expr":{if(this.stream.eof)throw new gt("unexpected EOF",$);if(lv.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(Le(N.TemplateExprElement,b,{hasLeftSpacing:r,children:h})),h=[],b=this.stream.getPos(),d="string";break}const k=this.readToken();h.push(k);break}}return Le(N.Template,$,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function Xe(t,r,e){const n={type:t};for(const h of Object.keys(r))r[h]!==void 0&&(n[h]=r[h]);return n.loc=e,n}function zs(t,r,e){return Xe("call",{target:Xe("identifier",{name:t},e),args:r},e)}function Sg(t){const r=[];for(t.nextWith(N.OpenParen),t.kind===N.NewLine&&t.next();t.kind!==N.CloseParen;){t.expect(N.Identifier);const e=t.token.value;t.next();let n;switch(t.kind===N.Colon&&(t.next(),n=ru(t)),r.push({name:e,argType:n}),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.CloseParen:break;default:throw new gt("separator expected",t.token.loc)}}return t.nextWith(N.CloseParen),r}function gf(t){for(t.nextWith(N.OpenBrace);t.kind===N.NewLine;)t.next();const r=[];for(;t.kind!==N.CloseBrace;)switch(r.push(yc(t)),t.kind){case N.NewLine:case N.SemiColon:{for(;[N.NewLine,N.SemiColon].includes(t.kind);)t.next();break}case N.CloseBrace:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(N.CloseBrace),r}function ru(t){return t.kind===N.At?s0(t):n0(t)}function s0(t){const r=t.token.loc;t.nextWith(N.At),t.nextWith(N.OpenParen);const e=[];for(;t.kind!==N.CloseParen;){if(e.length>0)switch(t.kind){case N.Comma:{t.next();break}default:throw new gt("separator expected",t.token.loc)}const h=ru(t);e.push(h)}t.nextWith(N.CloseParen),t.nextWith(N.Arrow);const n=ru(t);return Xe("fnTypeSource",{args:e,result:n},r)}function n0(t){const r=t.token.loc;t.expect(N.Identifier);const e=t.token.value;t.next();let n=null;return t.kind===N.Lt&&(t.next(),n=ru(t),t.nextWith(N.Gt)),Xe("namedTypeSource",{name:e,inner:n},r)}class a0{constructor(r){me(this,"source");me(this,"index");me(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?Le(N.EOF,{line:-1,column:-1}):this._token}get kind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:Le(N.EOF,{line:-1,column:-1})}expect(r){if(this.kind!==r)throw new gt(`unexpected token: ${N[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=Le(N.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function pr(t,r){return r?Fg(t,!0):fp(t,0)}const Oc=[{opKind:"postfix",kind:N.OpenParen,bp:20},{opKind:"postfix",kind:N.OpenBracket,bp:20},{opKind:"infix",kind:N.Dot,lbp:18,rbp:19},{opKind:"infix",kind:N.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:N.Plus,bp:14},{opKind:"prefix",kind:N.Minus,bp:14},{opKind:"prefix",kind:N.Not,bp:14},{opKind:"infix",kind:N.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:N.Slash,lbp:12,rbp:13},{opKind:"infix",kind:N.Percent,lbp:12,rbp:13},{opKind:"infix",kind:N.Plus,lbp:10,rbp:11},{opKind:"infix",kind:N.Minus,lbp:10,rbp:11},{opKind:"infix",kind:N.Lt,lbp:8,rbp:9},{opKind:"infix",kind:N.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:N.Gt,lbp:8,rbp:9},{opKind:"infix",kind:N.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:N.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:N.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:N.And2,lbp:4,rbp:5},{opKind:"infix",kind:N.Or2,lbp:2,rbp:3}];function i0(t,r){const e=t.token.loc,n=t.kind;t.next(),t.kind===N.BackSlash&&(t.next(),t.nextWith(N.NewLine));const h=fp(t,r);switch(n){case N.Plus:{if(h.type==="num")return Xe("num",{value:h.value},e);throw new gt("currently, sign is only supported for number literal.",e)}case N.Minus:{if(h.type==="num")return Xe("num",{value:-1*h.value},e);throw new gt("currently, sign is only supported for number literal.",e)}case N.Not:return Xe("not",{expr:h},e);default:throw new gt(`unexpected token: ${N[n]}`,e)}}function l0(t,r,e){const n=t.token.loc,h=t.kind;if(t.next(),t.kind===N.BackSlash&&(t.next(),t.nextWith(N.NewLine)),h===N.Dot){t.expect(N.Identifier);const d=t.token.value;return t.next(),Xe("prop",{target:r,name:d},n)}else{const d=fp(t,e);switch(h){case N.Hat:return zs("Core:pow",[r,d],n);case N.Asterisk:return zs("Core:mul",[r,d],n);case N.Slash:return zs("Core:div",[r,d],n);case N.Percent:return zs("Core:mod",[r,d],n);case N.Plus:return zs("Core:add",[r,d],n);case N.Minus:return zs("Core:sub",[r,d],n);case N.Lt:return zs("Core:lt",[r,d],n);case N.LtEq:return zs("Core:lteq",[r,d],n);case N.Gt:return zs("Core:gt",[r,d],n);case N.GtEq:return zs("Core:gteq",[r,d],n);case N.Eq2:return zs("Core:eq",[r,d],n);case N.NotEq:return zs("Core:neq",[r,d],n);case N.And2:return Xe("and",{left:r,right:d},n);case N.Or2:return Xe("or",{left:r,right:d},n);default:throw new gt(`unexpected token: ${N[h]}`,n)}}}function o0(t,r){const e=t.token.loc,n=t.kind;switch(n){case N.OpenParen:return u0(t,r);case N.OpenBracket:{t.next();const h=pr(t,!1);return t.nextWith(N.CloseBracket),Xe("index",{target:r,index:h},e)}default:throw new gt(`unexpected token: ${N[n]}`,e)}}function Fg(t,r){const e=t.token.loc;switch(t.kind){case N.IfKeyword:{if(r)break;return f0(t)}case N.At:{if(r)break;return c0(t)}case N.MatchKeyword:{if(r)break;return h0(t)}case N.EvalKeyword:{if(r)break;return p0(t)}case N.ExistsKeyword:{if(r)break;return v0(t)}case N.Template:{const n=[];if(r)break;for(const h of t.token.children)switch(h.kind){case N.TemplateStringElement:{n.push(Xe("str",{value:h.value},h.loc));break}case N.TemplateExprElement:{const d=new a0(h.children),$=pr(d,!1);if(d.kind!==N.EOF)throw new gt(`unexpected token: ${N[d.token.kind]}`,d.token.loc);n.push($);break}default:throw new gt(`unexpected token: ${N[h.kind]}`,h.loc)}return t.next(),Xe("tmpl",{tmpl:n},e)}case N.StringLiteral:{const n=t.token.value;return t.next(),Xe("str",{value:n},e)}case N.NumberLiteral:{const n=Number(t.token.value);return t.next(),Xe("num",{value:n},e)}case N.TrueKeyword:case N.FalseKeyword:{const n=t.kind===N.TrueKeyword;return t.next(),Xe("bool",{value:n},e)}case N.NullKeyword:return t.next(),Xe("null",{},e);case N.OpenBrace:return g0(t,r);case N.OpenBracket:return d0(t,r);case N.Identifier:{if(r)break;return Og(t)}case N.OpenParen:{t.next();const n=pr(t,r);return t.nextWith(N.CloseParen),n}}throw new gt(`unexpected token: ${N[t.kind]}`,e)}function u0(t,r){const e=t.token.loc,n=[];for(t.nextWith(N.OpenParen),t.kind===N.NewLine&&t.next();t.kind!==N.CloseParen;)switch(n.push(pr(t,!1)),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.CloseParen:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(N.CloseParen),Xe("call",{target:r,args:n},e)}function f0(t){const r=t.token.loc;t.nextWith(N.IfKeyword);const e=pr(t,!1),n=yi(t);t.kind===N.NewLine&&[N.ElifKeyword,N.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const h=[];for(;t.kind===N.ElifKeyword;){t.next();const $=pr(t,!1),b=yi(t);t.kind===N.NewLine&&[N.ElifKeyword,N.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),h.push({cond:$,then:b})}let d;return t.kind===N.ElseKeyword&&(t.next(),d=yi(t)),Xe("if",{cond:e,then:n,elseif:h,else:d},r)}function c0(t){const r=t.token.loc;t.nextWith(N.At);const e=Sg(t);let n;t.kind===N.Colon&&(t.next(),n=ru(t));const h=gf(t);return Xe("fn",{args:e,retType:n,children:h},r)}function h0(t){const r=t.token.loc;t.nextWith(N.MatchKeyword);const e=pr(t,!1);t.nextWith(N.OpenBrace),t.kind===N.NewLine&&t.next();const n=[];for(;t.kind!==N.DefaultKeyword&&t.kind!==N.CloseBrace;){t.nextWith(N.CaseKeyword);const d=pr(t,!1);t.nextWith(N.Arrow);const $=yi(t);switch(n.push({q:d,a:$}),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.DefaultKeyword:case N.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}}let h;if(t.kind===N.DefaultKeyword)switch(t.next(),t.nextWith(N.Arrow),h=yi(t),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(N.CloseBrace),Xe("match",{about:e,qs:n,default:h},r)}function p0(t){const r=t.token.loc;t.nextWith(N.EvalKeyword);const e=gf(t);return Xe("block",{statements:e},r)}function v0(t){const r=t.token.loc;t.nextWith(N.ExistsKeyword);const e=Og(t);return Xe("exists",{identifier:e},r)}function Og(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.kind===N.Colon){if(t.token.hasLeftSpacing)throw new gt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new gt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(N.Identifier),e.push(t.token.value),t.next()}return Xe("identifier",{name:e.join(":")},r)}function g0(t,r){const e=t.token.loc;t.nextWith(N.OpenBrace),t.kind===N.NewLine&&t.next();const n=new Map;for(;t.kind!==N.CloseBrace;){t.expect(N.Identifier);const h=t.token.value;t.next(),t.nextWith(N.Colon);const d=pr(t,r);switch(n.set(h,d),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}}return t.nextWith(N.CloseBrace),Xe("obj",{value:n},e)}function d0(t,r){const e=t.token.loc;t.nextWith(N.OpenBracket),t.kind===N.NewLine&&t.next();const n=[];for(;t.kind!==N.CloseBracket;)switch(n.push(pr(t,r)),t.kind){case N.NewLine:{t.next();break}case N.Comma:{t.next(),t.kind===N.NewLine&&t.next();break}case N.CloseBracket:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(N.CloseBracket),Xe("arr",{value:n},e)}function fp(t,r){let e;const n=t.kind,h=Oc.find(d=>d.opKind==="prefix"&&d.kind===n);for(h!=null?e=i0(t,h.bp):e=Fg(t,!1);;){t.kind===N.BackSlash&&(t.next(),t.nextWith(N.NewLine));const d=t.kind,$=Oc.find(k=>k.opKind==="postfix"&&k.kind===d);if($!=null){if($.bp<r)break;if(!([N.OpenBracket,N.OpenParen].includes(d)&&t.token.hasLeftSpacing)){e=o0(t,e);continue}}const b=Oc.find(k=>k.opKind==="infix"&&k.kind===d);if(b!=null){if(b.lbp<r)break;e=l0(t,e,b.rbp);continue}break}return e}function yc(t){const r=t.token.loc;switch(t.kind){case N.VarKeyword:case N.LetKeyword:return Ng(t);case N.At:{if(t.lookahead(1).kind===N.Identifier)return Tg(t);break}case N.Out:return w0(t);case N.ReturnKeyword:return x0(t);case N.OpenSharpBracket:return b0(t);case N.EachKeyword:return m0(t);case N.ForKeyword:return $0(t);case N.LoopKeyword:return C0(t);case N.BreakKeyword:return t.next(),Xe("break",{},r);case N.ContinueKeyword:return t.next(),Xe("continue",{},r)}const e=pr(t,!1),n=_0(t,e);return n||e}function y0(t){switch(t.kind){case N.VarKeyword:case N.LetKeyword:return Ng(t);case N.At:return Tg(t);default:throw new gt(`unexpected token: ${N[t.kind]}`,t.token.loc)}}function yi(t){const r=t.token.loc;if(t.kind===N.OpenBrace){const e=gf(t);return Xe("block",{statements:e},r)}else return yc(t)}function Ng(t){const r=t.token.loc;let e;switch(t.kind){case N.LetKeyword:{e=!1;break}case N.VarKeyword:{e=!0;break}default:throw new gt(`unexpected token: ${N[t.kind]}`,t.token.loc)}t.next(),t.expect(N.Identifier);const n=t.token.value;t.next();let h;t.kind===N.Colon&&(t.next(),h=ru(t)),t.nextWith(N.Eq),t.kind===N.NewLine&&t.next();const d=pr(t,!1);return Xe("def",{name:n,varType:h,expr:d,mut:e,attr:[]},r)}function Tg(t){const r=t.token.loc;t.nextWith(N.At),t.expect(N.Identifier);const e=t.token.value;t.next();const n=Sg(t);let h;t.kind===N.Colon&&(t.next(),h=ru(t));const d=gf(t);return Xe("def",{name:e,expr:Xe("fn",{args:n,retType:h,children:d},r),mut:!1,attr:[]},r)}function w0(t){const r=t.token.loc;t.nextWith(N.Out);const e=pr(t,!1);return zs("print",[e],r)}function m0(t){const r=t.token.loc;let e=!1;t.nextWith(N.EachKeyword),t.kind===N.OpenParen&&(e=!0,t.next()),t.nextWith(N.LetKeyword),t.expect(N.Identifier);const n=t.token.value;if(t.next(),t.kind===N.Comma)t.next();else throw new gt("separator expected",t.token.loc);const h=pr(t,!1);e&&t.nextWith(N.CloseParen);const d=yi(t);return Xe("each",{var:n,items:h,for:d},r)}function $0(t){const r=t.token.loc;let e=!1;if(t.nextWith(N.ForKeyword),t.kind===N.OpenParen&&(e=!0,t.next()),t.kind===N.LetKeyword){t.next();const n=t.token.loc;t.expect(N.Identifier);const h=t.token.value;t.next();let d;if(t.kind===N.Eq?(t.next(),d=pr(t,!1)):d=Xe("num",{value:0},n),t.kind===N.Comma)t.next();else throw new gt("separator expected",t.token.loc);const $=pr(t,!1);e&&t.nextWith(N.CloseParen);const b=yi(t);return Xe("for",{var:h,from:d,to:$,for:b},r)}else{const n=pr(t,!1);e&&t.nextWith(N.CloseParen);const h=yi(t);return Xe("for",{times:n,for:h},r)}}function x0(t){const r=t.token.loc;t.nextWith(N.ReturnKeyword);const e=pr(t,!1);return Xe("return",{expr:e},r)}function b0(t){const r=[];for(;t.kind===N.OpenSharpBracket;)r.push(A0(t)),t.nextWith(N.NewLine);const e=yc(t);if(e.type!=="def")throw new gt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function A0(t){const r=t.token.loc;t.nextWith(N.OpenSharpBracket),t.expect(N.Identifier);const e=t.token.value;t.next();let n;return t.kind!==N.CloseBracket?n=pr(t,!0):n=Xe("bool",{value:!0},r),t.nextWith(N.CloseBracket),Xe("attr",{name:e,value:n},r)}function C0(t){const r=t.token.loc;t.nextWith(N.LoopKeyword);const e=gf(t);return Xe("loop",{statements:e},r)}function _0(t,r){const e=t.token.loc;switch(t.kind){case N.Eq:{t.next();const n=pr(t,!1);return Xe("assign",{dest:r,expr:n},e)}case N.PlusEq:{t.next();const n=pr(t,!1);return Xe("addAssign",{dest:r,expr:n},e)}case N.MinusEq:{t.next();const n=pr(t,!1);return Xe("subAssign",{dest:r,expr:n},e)}default:return}}function k0(t){const r=[];for(;t.kind===N.NewLine;)t.next();for(;t.kind!==N.EOF;){switch(t.kind){case N.Colon2:{r.push(Ig(t));break}case N.Sharp3:{r.push(P0(t));break}default:{r.push(yc(t));break}}switch(t.kind){case N.NewLine:case N.SemiColon:{for(;[N.NewLine,N.SemiColon].includes(t.kind);)t.next();break}case N.EOF:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Ig(t){const r=t.token.loc;t.nextWith(N.Colon2),t.expect(N.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(N.OpenBrace);t.kind===N.NewLine;)t.next();for(;t.kind!==N.CloseBrace;){switch(t.kind){case N.VarKeyword:case N.LetKeyword:case N.At:{n.push(y0(t));break}case N.Colon2:{n.push(Ig(t));break}}switch(t.kind){case N.NewLine:case N.SemiColon:{for(;[N.NewLine,N.SemiColon].includes(t.kind);)t.next();break}case N.CloseBrace:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(N.CloseBrace),Xe("ns",{name:e,members:n},r)}function P0(t){const r=t.token.loc;t.nextWith(N.Sharp3);let e=null;t.kind===N.Identifier&&(e=t.token.value,t.next());const n=pr(t,!0);return Xe("meta",{name:e,value:n},r)}function vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=vt(e.expr,r);break}case"return":{e.expr=vt(e.expr,r);break}case"each":{e.items=vt(e.items,r),e.for=vt(e.for,r);break}case"for":{e.from!=null&&(e.from=vt(e.from,r)),e.to!=null&&(e.to=vt(e.to,r)),e.times!=null&&(e.times=vt(e.times,r)),e.for=vt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=vt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=vt(e.expr,r),e.dest=vt(e.dest,r);break}case"not":{e.expr=vt(e.expr,r);break}case"if":{e.cond=vt(e.cond,r),e.then=vt(e.then,r);for(const n of e.elseif)n.cond=vt(n.cond,r),n.then=vt(n.then,r);e.else!=null&&(e.else=vt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=vt(e.children[n],r);break}case"match":{e.about=vt(e.about,r);for(const n of e.qs)n.q=vt(n.q,r),n.a=vt(n.a,r);e.default!=null&&(e.default=vt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=vt(e.statements[n],r);break}case"exists":{e.identifier=vt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=vt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],vt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=vt(e.value[n],r);break}case"call":{e.target=vt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=vt(e.args[n],r);break}case"index":{e.target=vt(e.target,r),e.index=vt(e.index,r);break}case"prop":{e.target=vt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=vt(e.members[n],r);break}case"or":case"and":{e.left=vt(e.left,r),e.right=vt(e.right,r);break}}return e}const hu=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function pu(t,r){throw new gt(`Reserved word "${t}" cannot be used as variable name.`,r)}function E0(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{hu.includes(t.name)&&pu(t.name,t.loc);break}case"meta":{t.name!=null&&hu.includes(t.name)&&pu(t.name,t.loc);break}case"each":{hu.includes(t.var)&&pu(t.var,t.loc);break}case"for":{t.var!=null&&hu.includes(t.var)&&pu(t.var,t.loc);break}case"fn":{for(const r of t.args)hu.includes(r.name)&&pu(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())hu.includes(r)&&pu(r,t.loc);break}}return t}function M0(t){for(const r of t)vt(r,E0);return t}function uv(t){return{type:"simple",name:t}}function S0(t,r){return{type:"generic",name:t,inners:r}}function F0(t,r){return{type:"fn",args:t,result:r}}function Ff(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Ff(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Ff(n)).join(", "),e=Ff(t.result);return`@(${r}) { ${e} }`}}}function bu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return uv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=bu(t.inner):r=uv("any"),S0(t.name,[r])}}throw new gt(`Unknown type: '${Ff(t)}'`,t.loc)}else{const r=t.args.map(e=>bu(e));return F0(r,bu(t.result))}}function O0(t){switch(t.type){case"def":{t.varType!=null&&bu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&bu(r.argType);t.retType!=null&&bu(t.retType);break}}return t}function N0(t){for(const r of t)vt(r,O0);return t}var Va;let T0=(Va=class{constructor(){me(this,"plugins");this.plugins={validate:[M0,N0],transform:[]}}static parse(r){return Va.instance==null&&(Va.instance=new Va),Va.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new r0(r);e=k0(n);for(const h of this.plugins.validate)e=h(e);for(const h of this.plugins.transform)e=h(e);return e}},me(Va,"instance"),Va);const I0="next",j0={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let ph=[],Hu=null;function R0(t){return ph=T0.parse(t),JSON.stringify(ph,null,"	")}async function D0(t){Hu==null||Hu.abort(),Hu=new zr({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:uh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:uh(e.val,!0),print:!1});break}}});try{await Hu.exec(ph)}catch(r){t.err(r)}}const L0=Object.freeze(Object.defineProperty({__proto__:null,exec:D0,parse:R0,samples:j0,version:I0},Symbol.toStringTag,{value:"Module"}));function vr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let wc=class jg extends Error{constructor(e,n){super(e);me(this,"name","AiScript");me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,jg)}},B0=class extends wc{constructor(e){super(e.message??`${e}`,e);me(this,"name","Internal")}},su=class extends wc{constructor(e,n){super(e,n);me(this,"name","Syntax")}},Kt=class extends wc{constructor(e,n){super(e,n);me(this,"name","Runtime")}},H0=class extends Kt{constructor(r,e){super(r,e)}};var xi=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Ya=class Rg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Rg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Kt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Kt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Kt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Kt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};xi([vr],Ya.prototype,"log",null);xi([vr],Ya.prototype,"onUpdated",null);xi([vr],Ya.prototype,"createChildScope",null);xi([vr],Ya.prototype,"get",null);xi([vr],Ya.prototype,"exists",null);xi([vr],Ya.prototype,"getAll",null);xi([vr],Ya.prototype,"add",null);xi([vr],Ya.prototype,"assign",null);const At={type:"null"},ln={type:"bool",value:!0},Vs={type:"bool",value:!1},Se=t=>({type:"num",value:t}),zt=t=>({type:"str",value:t}),Zo=t=>({type:"bool",value:t}),ec=t=>({type:"obj",value:t}),Kr=t=>({type:"arr",value:t}),U0=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),oe=t=>({type:"fn",native:t}),q0=t=>({type:"return",value:t}),z0=()=>({type:"break",value:null}),W0=()=>({type:"continue",value:null}),V0=t=>t.type==="return"?t.value:t,vh=(t,r)=>({type:"error",value:t,info:r});function Qs(t){if(t==null)throw new Kt("Expect anything, but got nothing.")}function ps(t){if(t==null)throw new Kt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Kt(`Expect boolean, but got ${t.type}.`)}function ci(t){if(t==null)throw new Kt("Expect function, but got nothing.");if(t.type!=="fn")throw new Kt(`Expect function, but got ${t.type}.`)}function Cr(t){if(t==null)throw new Kt("Expect string, but got nothing.");if(t.type!=="str")throw new Kt(`Expect string, but got ${t.type}.`)}function Ae(t){if(t==null)throw new Kt("Expect number, but got nothing.");if(t.type!=="num")throw new Kt(`Expect number, but got ${t.type}.`)}function Hn(t){if(t==null)throw new Kt("Expect object, but got nothing.");if(t.type!=="obj")throw new Kt(`Expect object, but got ${t.type}.`)}function tc(t){if(t==null)throw new Kt("Expect array, but got nothing.");if(t.type!=="arr")throw new Kt(`Expect array, but got ${t.type}.`)}function Nc(t){return t.type==="obj"}function fv(t){return t.type==="arr"}function gh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function dh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>dh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function yh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>yh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=yh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function wh(t){if(t===null)return At;if(typeof t=="boolean")return Zo(t);if(typeof t=="string")return zt(t);if(typeof t=="number")return Se(t);if(Array.isArray(t))return Kr(t.map(r=>wh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,wh(n));return ec(r)}return At}function Au(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(Au(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${Au(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const K0={help:zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zt("0.16.0"),"Core:ai":zt("kawaii"),"Core:not":oe(([t])=>(ps(t),t.value?Vs:ln)),"Core:eq":oe(([t,r])=>(Qs(t),Qs(r),gh(t,r)?ln:Vs)),"Core:neq":oe(([t,r])=>(Qs(t),Qs(r),gh(t,r)?Vs:ln)),"Core:and":oe(([t,r])=>(ps(t),t.value?(ps(r),r.value?ln:Vs):Vs)),"Core:or":oe(([t,r])=>(ps(t),t.value?ln:(ps(r),r.value?ln:Vs))),"Core:add":oe(([t,r])=>(Ae(t),Ae(r),Se(t.value+r.value))),"Core:sub":oe(([t,r])=>(Ae(t),Ae(r),Se(t.value-r.value))),"Core:mul":oe(([t,r])=>(Ae(t),Ae(r),Se(t.value*r.value))),"Core:pow":oe(([t,r])=>{Ae(t),Ae(r);const e=t.value**r.value;if(isNaN(e))throw new Kt("Invalid operation.");return Se(e)}),"Core:div":oe(([t,r])=>{Ae(t),Ae(r);const e=t.value/r.value;if(isNaN(e))throw new Kt("Invalid operation.");return Se(e)}),"Core:mod":oe(([t,r])=>(Ae(t),Ae(r),Se(t.value%r.value))),"Core:gt":oe(([t,r])=>(Ae(t),Ae(r),t.value>r.value?ln:Vs)),"Core:lt":oe(([t,r])=>(Ae(t),Ae(r),t.value<r.value?ln:Vs)),"Core:gteq":oe(([t,r])=>(Ae(t),Ae(r),t.value>=r.value?ln:Vs)),"Core:lteq":oe(([t,r])=>(Ae(t),Ae(r),t.value<=r.value?ln:Vs)),"Core:type":oe(([t])=>(Qs(t),zt(t.type))),"Core:to_str":oe(([t])=>(Qs(t),zt(Au(t)))),"Core:range":oe(([t,r])=>(Ae(t),Ae(r),t.value<r.value?Kr(Array.from({length:r.value-t.value+1},(e,n)=>Se(n+t.value))):t.value>r.value?Kr(Array.from({length:t.value-r.value+1},(e,n)=>Se(t.value-n))):Kr([t]))),"Core:sleep":oe(async([t])=>(Ae(t),await new Promise(r=>setTimeout(r,t.value)),At)),"Util:uuid":oe(()=>zt(rp())),"Json:stringify":oe(([t])=>(Qs(t),zt(JSON.stringify(yh(t))))),"Json:parse":oe(([t])=>{Cr(t);try{return wh(JSON.parse(t.value))}catch{return vh("not_json")}}),"Json:parsable":oe(([t])=>{Cr(t);try{JSON.parse(t.value)}catch{return Zo(!1)}return Zo(!0)}),"Date:now":oe(()=>Se(Date.now())),"Date:year":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":oe(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":oe(([t])=>(Cr(t),Se(new Date(t.value).getTime()))),"Math:Infinity":Se(1/0),"Math:E":Se(Math.E),"Math:LN2":Se(Math.LN2),"Math:LN10":Se(Math.LN10),"Math:LOG2E":Se(Math.LOG2E),"Math:LOG10E":Se(Math.LOG10E),"Math:PI":Se(Math.PI),"Math:SQRT1_2":Se(Math.SQRT1_2),"Math:SQRT2":Se(Math.SQRT2),"Math:abs":oe(([t])=>(Ae(t),Se(Math.abs(t.value)))),"Math:acos":oe(([t])=>(Ae(t),Se(Math.acos(t.value)))),"Math:acosh":oe(([t])=>(Ae(t),Se(Math.acosh(t.value)))),"Math:asin":oe(([t])=>(Ae(t),Se(Math.asin(t.value)))),"Math:asinh":oe(([t])=>(Ae(t),Se(Math.asinh(t.value)))),"Math:atan":oe(([t])=>(Ae(t),Se(Math.atan(t.value)))),"Math:atanh":oe(([t])=>(Ae(t),Se(Math.atanh(t.value)))),"Math:atan2":oe(([t,r])=>(Ae(t),Ae(r),Se(Math.atan2(t.value,r.value)))),"Math:cbrt":oe(([t])=>(Ae(t),Se(Math.cbrt(t.value)))),"Math:ceil":oe(([t])=>(Ae(t),Se(Math.ceil(t.value)))),"Math:clz32":oe(([t])=>(Ae(t),Se(Math.clz32(t.value)))),"Math:cos":oe(([t])=>(Ae(t),Se(Math.cos(t.value)))),"Math:cosh":oe(([t])=>(Ae(t),Se(Math.cosh(t.value)))),"Math:exp":oe(([t])=>(Ae(t),Se(Math.exp(t.value)))),"Math:expm1":oe(([t])=>(Ae(t),Se(Math.expm1(t.value)))),"Math:floor":oe(([t])=>(Ae(t),Se(Math.floor(t.value)))),"Math:fround":oe(([t])=>(Ae(t),Se(Math.fround(t.value)))),"Math:hypot":oe(([t])=>{tc(t);const r=[];for(const e of t.value)Ae(e),r.push(e.value);return Se(Math.hypot(...r))}),"Math:imul":oe(([t,r])=>(Ae(t),Ae(r),Se(Math.imul(t.value,r.value)))),"Math:log":oe(([t])=>(Ae(t),Se(Math.log(t.value)))),"Math:log1p":oe(([t])=>(Ae(t),Se(Math.log1p(t.value)))),"Math:log10":oe(([t])=>(Ae(t),Se(Math.log10(t.value)))),"Math:log2":oe(([t])=>(Ae(t),Se(Math.log2(t.value)))),"Math:max":oe(([t,r])=>(Ae(t),Ae(r),Se(Math.max(t.value,r.value)))),"Math:min":oe(([t,r])=>(Ae(t),Ae(r),Se(Math.min(t.value,r.value)))),"Math:pow":oe(([t,r])=>(Ae(t),Ae(r),Se(Math.pow(t.value,r.value)))),"Math:round":oe(([t])=>(Ae(t),Se(Math.round(t.value)))),"Math:sign":oe(([t])=>(Ae(t),Se(Math.sign(t.value)))),"Math:sin":oe(([t])=>(Ae(t),Se(Math.sin(t.value)))),"Math:sinh":oe(([t])=>(Ae(t),Se(Math.sinh(t.value)))),"Math:sqrt":oe(([t])=>{Ae(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Kt("Invalid operation.");return Se(r)}),"Math:tan":oe(([t])=>(Ae(t),Se(Math.tan(t.value)))),"Math:tanh":oe(([t])=>(Ae(t),Se(Math.tanh(t.value)))),"Math:trunc":oe(([t])=>(Ae(t),Se(Math.trunc(t.value)))),"Math:rnd":oe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Se(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Se(Math.random())),"Math:gen_rng":oe(([t])=>{if(Qs(t),t.type!=="num"&&t.type!=="str")return At;const r=cf(t.value.toString());return oe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Se(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Se(r()))}),"Num:to_hex":oe(([t])=>(Ae(t),zt(t.value.toString(16)))),"Num:from_hex":oe(([t])=>(Cr(t),Se(parseInt(t.value,16)))),"Str:lf":zt(`
`),"Str:lt":oe(([t,r])=>(Cr(t),Cr(r),t.value<r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:gt":oe(([t,r])=>(Cr(t),Cr(r),t.value>r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:from_codepoint":oe(([t])=>(Ae(t),zt(String.fromCodePoint(t.value)))),"Obj:keys":oe(([t])=>(Hn(t),Kr(Array.from(t.value.keys()).map(r=>zt(r))))),"Obj:vals":oe(([t])=>(Hn(t),Kr(Array.from(t.value.values())))),"Obj:kvs":oe(([t])=>(Hn(t),Kr(Array.from(t.value.entries()).map(([r,e])=>Kr([zt(r),e]))))),"Obj:get":oe(([t,r])=>(Hn(t),Cr(r),t.value.get(r.value)??At)),"Obj:set":oe(([t,r,e])=>(Hn(t),Cr(r),Qs(e),t.value.set(r.value,e),At)),"Obj:has":oe(([t,r])=>(Hn(t),Cr(r),Zo(t.value.has(r.value)))),"Obj:copy":oe(([t])=>(Hn(t),ec(new Map(t.value)))),"Obj:merge":oe(([t,r])=>(Hn(t),Hn(r),ec(new Map([...t.value,...r.value])))),"Error:create":oe(([t,r])=>(Cr(t),vh(t.value,r))),"Async:interval":oe(async([t,r,e],n)=>{Ae(t),ci(r),e&&(ps(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),oe(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":oe(async([t,r],e)=>{Ae(t),ci(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),oe(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},cv={num:{to_str:t=>oe(async(r,e)=>zt(t.value.toString()))},str:{to_num:t=>oe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?At:Se(n)}),len:t=>Se(hf(t.value)),replace:t=>oe(async([r,e],n)=>(Cr(r),Cr(e),zt(t.value.split(r.value).join(e.value)))),index_of:t=>oe(async([r],e)=>(Cr(r),Se(vf(t.value,r.value)))),incl:t=>oe(async([r],e)=>(Cr(r),t.value.includes(r.value)?ln:Vs)),trim:t=>oe(async(r,e)=>zt(t.value.trim())),upper:t=>oe(async(r,e)=>zt(t.value.toUpperCase())),lower:t=>oe(async(r,e)=>zt(t.value.toLowerCase())),split:t=>oe(async([r],e)=>(r&&Cr(r),Kr(r?t.value.split(r?r.value:"").map(n=>zt(n)):zn(t.value).map(n=>zt(n))))),slice:t=>oe(async([r,e],n)=>(Ae(r),Ae(e),zt(pf(t.value,r.value,e.value)))),pick:t=>oe(async([r],e)=>{Ae(r);const h=zn(t.value)[r.value];return h?zt(h):At}),codepoint_at:t=>oe(([r],e)=>{Ae(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?At:Se(n)})},arr:{len:t=>Se(t.value.length),push:t=>oe(async([r],e)=>(Qs(r),t.value.push(r),t)),unshift:t=>oe(async([r],e)=>(Qs(r),t.value.unshift(r),t)),pop:t=>oe(async(r,e)=>t.value.pop()??At),shift:t=>oe(async(r,e)=>t.value.shift()??At),concat:t=>oe(async([r],e)=>(tc(r),Kr(t.value.concat(r.value)))),slice:t=>oe(async([r,e],n)=>(Ae(r),Ae(e),Kr(t.value.slice(r.value,e.value)))),join:t=>oe(async([r],e)=>(r&&Cr(r),zt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>oe(async([r],e)=>{ci(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Se(d)]));return Kr(await Promise.all(n))}),filter:t=>oe(async([r],e)=>{ci(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Se(h)]);ps($),$.value&&n.push(d)}return Kr(n)}),reduce:t=>oe(async([r,e],n)=>{ci(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Se($)])}return d}),find:t=>oe(async([r],e)=>{ci(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Se(n)]);if(ps(d),d.value)return h}return At}),incl:t=>oe(async([r],e)=>(Qs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Vs:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?ln:Vs)),reverse:t=>oe(async(r,e)=>(t.value.reverse(),At)),copy:t=>oe(async(r,e)=>Kr([...t.value])),sort:t=>oe(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Ae(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return ci(r),tc(t),t.value=await n(t.value,r),t})},error:{name:t=>zt(t.value),info:t=>t.info??At}};function J0(t,r){if(Object.hasOwn(cv,t.type)){const e=cv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Kt(`No such prop (${r}) in ${t.type}.`)}else throw new Kt(`Cannot read prop of ${t.type}. (reading ${r})`)}const Z0={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ws=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Dg=300,G0=Dg-1;let rs=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:oe(([h])=>{Qs(h),this.opts.out&&this.opts.out(h)}),readline:oe(async h=>{const d=h[0];if(Cr(d),this.opts.in==null)return At;const $=await this.opts.in(d.value);return zt($)})};this.vars=Object.fromEntries(Object.entries({...r,...K0,...n}).map(([h,d])=>[h,Z0.const(d)])),this.scope=new Ya([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),vh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof wc?this.opts.err(r):this.opts.err(new B0(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??At;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return V0(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return At;if(this.stepCount%Dg===G0&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Kt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);ci(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(ps(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(ps(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return At}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(gh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):At}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return At}case"for":{if(r.times){const n=await this._eval(r.times,e);Ae(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Ae(n),Ae(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Se(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return At}case"each":{const n=await this._eval(r.items,e);tc(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return At}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),At}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),At}case"addAssign":{const n=await this._eval(r.dest,e);Ae(n);const h=await this._eval(r.expr,e);return Ae(h),await this.assign(e,r.dest,Se(n.value+h.value)),At}case"subAssign":{const n=await this._eval(r.dest,e);Ae(n);const h=await this._eval(r.expr,e);return Ae(h),await this.assign(e,r.dest,Se(n.value-h.value)),At}case"null":return At;case"bool":return Zo(r.value);case"num":return Se(r.value);case"str":return zt(r.value);case"arr":return Kr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return ec(n)}case"prop":{const n=await this._eval(r.target,e);return Nc(n)?n.value.has(r.name)?n.value.get(r.name):At:J0(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(fv(n)){Ae(h);const d=n.value[h.value];if(d===void 0)throw new H0(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Nc(n))return Cr(h),n.value.has(h.value)?n.value.get(h.value):At;throw new Kt(`Cannot read prop (${Au(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return ps(n),Zo(!n.value)}case"fn":return U0(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Zo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=Au(d)}return zt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),q0(n)}case"break":return this.log("block:break",{scope:e.name}),z0();case"continue":return this.log("block:continue",{scope:e.name}),W0();case"ns":return At;case"meta":return At;case"and":{const n=await this._eval(r.left,e);if(ps(n),n.value){const h=await this._eval(r.right,e);return ps(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(ps(n),n.value)return n;{const h=await this._eval(r.right,e);return ps(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=At;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(fv(h))Ae(d),h.value[d.value]=n;else if(Nc(h))Cr(d),h.value.set(d.value,n);else throw new Kt(`Cannot read prop (${Au(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Hn(h),h.value.set(e.name,n)}else throw new Kt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ws([vr],rs.prototype,"exec",null);ws([vr],rs.prototype,"execFn",null);ws([vr],rs.prototype,"execFnSimple",null);ws([vr],rs.prototype,"handleError",null);ws([vr],rs.prototype,"log",null);ws([vr],rs.prototype,"collectNs",null);ws([vr],rs.prototype,"collectNsMember",null);ws([vr],rs.prototype,"_fn",null);ws([vr],rs.prototype,"_eval",null);ws([vr],rs.prototype,"_run",null);ws([vr],rs.prototype,"registerAbortHandler",null);ws([vr],rs.prototype,"unregisterAbortHandler",null);ws([vr],rs.prototype,"abort",null);ws([vr],rs.prototype,"assign",null);ws([vr],rs,"collectMetadata",null);function Q0(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Go(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Go.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}Q0(Go,Error);function Tc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Go.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Tc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Tc("",h.column-1," ")+Tc("",j,"^")}else r+=`
 at `+$}return r};Go.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function hv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:_a,Main:os},d=_a,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ae=":",_e="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",ke="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ot="&&",Ie="==",at="!=",Mt="<=",St=">=",Qe="<",Fr=">",Dt="+",yr="-",kt="*",dr="^",Or="/",_r="%",Er="!",Ft="[",U=".",K="if",te="elif",ce="else",he="match",ie="=>",Ne="eval",de="exists",we="`",ue='"',De="'",je='\\"',Be="\\'",We="true",Ze="false",rt="null",st=";",wt="@",Lt="@(",xt=`\r
`,Gt=/^[A-Z0-9_:]/i,_s=/^[^`{]/,Wr=/^[{}`]/,Ot=/^[+\-]/,ht=/^[1-9]/,It=/^[0-9]/,Vn=/^[A-Z_]/i,Kn=/^[A-Z0-9_]/i,Ci=/^[\r\n]/,_i=/^[ \t\r\n]/,tr=/^[ \t]/,rr=Bs(),ki=se("//",!1),vn=se("/*",!1),wr=se("*/",!1),Pt=se("(",!1),mr=se(")",!1),sr=se("::",!1),Ye=se("{",!1),Bt=se("}",!1),Ir=se("###",!1),dt=se("let",!1),yt=se(":",!1),ns=se("=",!1),Pi=se("var",!1),Ei=se("<:",!1),ks=se("#[",!1),as=se("]",!1),mt=se("each",!1),pt=se(",",!1),Ps=se("for",!1),or=se("return",!1),ur=Nt([["A","Z"],["0","9"],"_",":"],!1,!0),Mi=se("loop",!1),Si=se("break",!1),Fi=se("continue",!1),Oi=se("+=",!1),Jn=se("-=",!1),Zn=se("\\",!1),Ni=se("||",!1),Ti=se("&&",!1),Ii=se("==",!1),ji=se("!=",!1),Ri=se("<=",!1),Gn=se(">=",!1),gn=se("<",!1),Qn=se(">",!1),Di=se("+",!1),Xn=se("-",!1),Yn=se("*",!1),Li=se("^",!1),Bi=se("/",!1),Hi=se("%",!1),dn=se("!",!1),is=se("[",!1),yn=se(".",!1),Ui=se("if",!1),qi=se("elif",!1),zi=se("else",!1),Es=se("match",!1),Ms=se("=>",!1),Ss=se("eval",!1),Wi=se("exists",!1),Fs=se("`",!1),Os=Nt(["`","{"],!0,!1),Ns=Nt(["{","}","`"],!1,!1),Ts=se('"',!1),Is=se("'",!1),js=se('\\"',!1),ea=se("\\'",!1),Et=Nt(["+","-"],!1,!1),ta=Nt([["1","9"]],!1,!1),nr=Nt([["0","9"]],!1,!1),Vi=se("true",!1),Rs=se("false",!1),Ki=se("null",!1),ls=se(";",!1),Ji=se("@",!1),wn=se("@(",!1),Zi=Nt([["A","Z"],"_"],!1,!0),ra=Nt([["A","Z"],["0","9"],"_"],!1,!0),Gi=se(`\r
`,!1),Qi=Nt(["\r",`
`],!1,!1),Xi=Nt([" ","	","\r",`
`],!1,!1),Yi=Nt([" ","	"],!1,!1),el=function(s){return s.join("")},tl=function(){return Y()},rl=function(){return Y()},sl=function(){return""},sa=function(){return""},nl=function(s){return s??[]},mn=function(s,o){return o},al=function(s,o){return[s,...o]},$n=function(s,o){return o},il=function(s,o){return[s,...o]},na=function(s,o){return o},ll=function(s,o){return[s,...o]},ol=function(s){return s},ul=function(s,o){return c("ns",{name:s,members:o})},fl=function(s,o){return c("meta",{name:s,value:o})},cl=function(s){return c("meta",{name:null,value:s})},hl=function(s,o,p){return c("def",{name:s,varType:o,expr:p,mut:!1,attr:[]})},pl=function(s,o,p){return c("def",{name:s,varType:o,expr:p,mut:!0,attr:[]})},vl=function(s){return c("identifier",{name:"print",chain:[c("callChain",{args:[s]})]})},gl=function(s,o){return c("attr",{name:s,value:o??c("bool",{value:!0})})},dl=function(s,o,p){return c("each",{var:s,items:o,for:p})},yl=function(s,o,p){return c("each",{var:s,items:o,for:p})},wl=function(s,o){return o},ml=function(s,o,p,u){return c("for",{var:s,from:o??c("num",{value:0}),to:p,for:u})},$l=function(s,o){return o},xl=function(s,o,p,u){return c("for",{var:s,from:o??c("num",{value:0}),to:p,for:u})},bl=function(s,o){return c("for",{times:s,for:o})},Al=function(s,o){return c("for",{times:s,for:o})},Cl=function(s){return c("return",{expr:s})},_l=function(s){return c("loop",{statements:s})},kl=function(){return c("break",{})},aa=function(){return c("continue",{})},Pl=function(s,o,p){return o==="+="?c("addAssign",{dest:s,expr:p}):o==="-="?c("subAssign",{dest:s,expr:p}):c("assign",{dest:s,expr:p})},ia=function(s,o,p){return{op:o,term:p}},El=function(s,o){return c("infix",{operands:[s,...o.map(p=>p.term)],operators:o.map(p=>p.op)})},Ml=function(){return Y()},Sl=function(s){return c("not",{expr:s})},la=function(s,o){return s.chain?{...s,chain:[...s.chain,...o]}:{...s,chain:o}},Fl=function(s){return c("callChain",{args:s??[]})},oa=function(s,o){return o},Ol=function(s,o){return[s,...o]},Nl=function(s){return c("indexChain",{index:s})},Tl=function(s){return c("propChain",{name:s})},Il=function(s,o,p,u){return c("if",{cond:s,then:o,elseif:p??[],else:u})},jl=function(s,o){return[s,...o]},ua=function(s,o){return{cond:s,then:o}},Rl=function(s){return s},fa=function(s,o,p){return{q:o,a:p}},Dl=function(s,o,p){return c("match",{about:s,qs:o??[],default:p})},Ll=function(s){return c("block",{statements:s})},Bl=function(s){return c("exists",{identifier:s})},ca=function(s){return c("identifier",{name:s})},Hl=function(s){return c("tmpl",{tmpl:s})},ha=function(s){return s.join("")},pa=function(s){return s},Ul=function(s){return c("str",{value:s.join("")})},va=function(s){return s},ql=function(s){return c("str",{value:s.join("")})},zl=function(){return'"'},Wl=function(){return"'"},Vl=function(){return c("num",{value:parseFloat(Y())})},Kl=function(){return c("num",{value:parseFloat(Y())})},Jl=function(){return c("num",{value:parseInt(Y(),10)})},Zl=function(){return c("num",{value:parseInt(Y(),10)})},ga=function(){return c("bool",{value:!0})},Gl=function(){return c("bool",{value:!1})},da=function(){return c("null",{})},ya=function(s,o){return{k:s,v:o}},Ql=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return c("obj",{value:o})},wa=function(s){return s},Xl=function(s){return c("arr",{value:s})},Yl=function(s,o){return{name:s,argType:o}},ma=function(s,o){return[s,...o]},eo=function(s,o,p,u,g,v){return(s.length>0||p.length>0)&&lo("Cannot use spaces before or after the function name."),c("def",{name:o,expr:c("fn",{args:u??[],retType:g},v??[]),mut:!1,attr:[]})},$a=function(s,o,p){return c("fn",{args:s??[],retType:o},p??[])},xa=function(s){return s},to=function(s){return c("arr",{value:s})},ba=function(s,o){return{k:s,v:o}},ro=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return c("obj",{value:o})},so=function(s,o){return c("fnTypeSource",{args:s??[],result:o})},no=function(s,o){return[s,...o]},ao=function(s,o){return c("namedTypeSource",{name:s,inner:o})},io=function(s){return c("namedTypeSource",{name:s,inner:null})},i=function(){return Y()},W=function(){return Y()},Ds=function(s){return c("block",{statements:s??[]})},a=0,z=0,C=[{line:1,column:1}],O=0,jr=[],A=0,T={},Ls;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function Y(){return t.substring(z,a)}function Ht(){return Hs(z,a)}function lo(s,o){throw o=o!==void 0?o:Hs(z,a),Ca(s,o)}function se(s,o){return{type:"literal",text:s,ignoreCase:o}}function Nt(s,o,p){return{type:"class",parts:s,inverted:o,ignoreCase:p}}function Bs(){return{type:"any"}}function S(){return{type:"end"}}function Aa(s){var o=C[s],p;if(o)return o;for(p=s-1;!C[p];)p--;for(o=C[p],o={line:o.line,column:o.column};p<s;)t.charCodeAt(p)===10?(o.line++,o.column=1):o.column++,p++;return C[s]=o,o}function Hs(s,o,p){var u=Aa(s),g=Aa(o),v={source:n,start:{offset:s,line:u.line,column:u.column},end:{offset:o,line:g.line,column:g.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function M(s){a<O||(a>O&&(O=a,jr=[]),jr.push(s))}function Ca(s,o){return new Go(s,null,null,o)}function oo(s,o,p){return new Go(Go.buildMessage(s,o),s,o,p)}function _a(){var s,o,p,u=a*77+0,g=T[u];if(g)return a=g.nextPos,g.result;for(s=a,o=[],p=ka();p!==e;)o.push(p),p=ka();return z=s,o=el(o),s=o,T[u]={nextPos:a,result:s},s}function ka(){var s,o,p=a*77+1,u=T[p];return u?(a=u.nextPos,u.result):(s=a,o=qs(),o!==e&&(z=s,o=tl()),s=o,s===e&&(s=a,o=En(),o!==e&&(z=s,o=rl()),s=o,s===e&&(s=uo(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,A===0&&M(rr))))),T[p]={nextPos:a,result:s},s)}function uo(){var s,o,p,u,g,v,m=a*77+2,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(o=$,a+=2):(o=e,A===0&&M(ki)),o!==e){for(p=[],u=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);z=s,s=sl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===b?(o=b,a+=2):(o=e,A===0&&M(vn)),o!==e){for(p=[],u=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(wr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(wr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);t.substr(a,2)===k?(u=k,a+=2):(u=e,A===0&&M(wr)),u!==e?(z=s,s=sa()):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function os(){var s,o,p,u,g,v=a*77+3,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();for(p=xn(),p===e&&(p=null),u=[],g=f();g!==e;)u.push(g),g=f();return z=s,s=nl(p),T[v]={nextPos:a,result:s},s}function xn(){var s,o,p,u,g,v,m,w,_=a*77+4,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Re(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=u,u=mn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=u,u=mn(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=al(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function bn(){var s,o,p,u,g,v,m,w,_=a*77+5,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Rr(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Rr(),w!==e?(z=u,u=$n(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Rr(),w!==e?(z=u,u=$n(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=il(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function fr(){var s,o,p,u,g,v,m,w,_=a*77+6,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Dr(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=u,u=na(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=u,u=na(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=ll(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Re(){var s,o=a*77+7,p=T[o];return p?(a=p.nextPos,p.result):(s=Ea(),s===e&&(s=fo(),s===e&&(s=Dr())),T[o]={nextPos:a,result:s},s)}function Rr(){var s,o=a*77+8,p=T[o];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=Ut(),s===e&&(s=Ea())),T[o]={nextPos:a,result:s},s)}function Dr(){var s,o=a*77+9,p=T[o];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=Ut(),s===e&&(s=co(),s===e&&(s=go(),s===e&&(s=ho(),s===e&&(s=po(),s===e&&(s=vo(),s===e&&(s=yo(),s===e&&(s=wo(),s===e&&(s=xr(),s===e&&(s=Sa(),s===e&&(s=Te()))))))))))),T[o]={nextPos:a,result:s},s)}function Te(){var s,o=a*77+10,p=T[o];return p?(a=p.nextPos,p.result):(s=mo(),s===e&&(s=us()),T[o]={nextPos:a,result:s},s)}function us(){var s,o=a*77+11,p=T[o];return p?(a=p.nextPos,p.result):(s=bo(),s===e&&(s=Eo(),s===e&&(s=Fa(),s===e&&(s=Pa()))),T[o]={nextPos:a,result:s},s)}function Pa(){var s,o,p,u,g,v,m=a*77+12,w=T[m];if(w)return a=w.nextPos,w.result;if(s=Na(),s===e&&(s=Ta(),s===e&&(s=Ia(),s===e&&(s=qs(),s===e&&(s=En(),s===e&&(s=La(),s===e&&(s=Ha(),s===e&&(s=Fn(),s===e&&(s=Ua(),s===e&&(s=Po(),s===e&&(s=$o(),s===e&&(s=ja(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Pt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e?(z=s,s=ol(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function $r(){var s,o=a*77+13,p=T[o];return p?(a=p.nextPos,p.result):(s=La(),s===e&&(s=En(),s===e&&(s=Ha(),s===e&&(s=Mo(),s===e&&(s=So(),s===e&&(s=Fn()))))),T[o]={nextPos:a,result:s},s)}function Ea(){var s,o,p,u,g,v,m,w,_,P,I=a*77+14,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===j?(o=j,a+=2):(o=e,A===0&&M(sr)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(t.charCodeAt(a)===123?(v=D,a++):(v=e,A===0&&M(Ye)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=bn(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();t.charCodeAt(a)===125?(P=V,a++):(P=e,A===0&&M(Bt)),P!==e?(z=s,s=ul(u,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function fo(){var s,o,p,u,g,v,m=a*77+15,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===pe?(o=pe,a+=3):(o=e,A===0&&M(Ir)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Ue(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=$r(),v!==e?(z=s,s=fl(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===pe?(o=pe,a+=3):(o=e,A===0&&M(Ir)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();u=$r(),u!==e?(z=s,s=cl(u)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ma(){var s,o,p,u,g,v,m,w,_,P=a*77+16,I=T[P];if(I)return a=I.nextPos,I.result;if(s=a,t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ae,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=_e,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=hl(u,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===H?(o=H,a+=3):(o=e,A===0&&M(Pi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ae,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=_e,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=pl(u,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[P]={nextPos:a,result:s},s}function co(){var s,o,p,u,g=a*77+17,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===L?(o=L,a+=2):(o=e,A===0&&M(Ei)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();u=Te(),u!==e?(z=s,s=vl(u)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ho(){var s,o,p,u,g,v,m,w=a*77+18,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,2)===B?(o=B,a+=2):(o=e,A===0&&M(ks)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();for(m=$r(),m!==e?g=m:(a=g,g=e),g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();t.charCodeAt(a)===93?(m=q,a++):(m=e,A===0&&M(as)),m!==e?(z=s,s=gl(u,g)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function po(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+19,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.substr(a,4)===J?(o=J,a+=4):(o=e,A===0&&M(mt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();for(t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e)if(t.charCodeAt(a)===41?(R=F,a++):(R=e,A===0&&M(mr)),R!==e){for(Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();ye=xe(),ye!==e?(z=s,s=dl(m,I,ye)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===J?(o=J,a+=4):(o=e,A===0&&M(mt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(P=Te(),P!==e){if(I=[],R=f(),R!==e)for(;R!==e;)I.push(R),R=f();else I=e;I!==e?(R=xe(),R!==e?(z=s,s=yl(v,P,R)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function vo(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke=a*77+20,Je=T[Ke];if(Je)return a=Je.nextPos,Je.result;if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=a,t.charCodeAt(a)===61?(P=_e,a++):(P=e,A===0&&M(ns)),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();R=Te(),R!==e?(z=_,_=wl(m,R)):(a=_,_=e)}else a=_,_=e;for(_===e&&(_=null),t.charCodeAt(a)===44?(P=G,a++):(P=e,A===0&&M(pt)),P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();if(R=Te(),R!==e)if(t.charCodeAt(a)===41?(Z=F,a++):(Z=e,A===0&&M(mr)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=xe(),re!==e?(z=s,s=ml(m,_,R,re)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(_=_e,a++):(_=e,A===0&&M(ns)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=Te(),I!==e?(z=w,w=$l(v,I)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e){if(R=[],Z=f(),Z!==e)for(;Z!==e;)R.push(Z),Z=f();else R=e;R!==e?(Z=xe(),Z!==e?(z=s,s=xl(v,w,I,Z)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(g=Te(),g!==e)if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=xe(),w!==e?(z=s,s=bl(g,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;g!==e?(v=xe(),v!==e?(z=s,s=Al(u,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return T[Ke]={nextPos:a,result:s},s}function go(){var s,o,p,u,g,v=a*77+21,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,6)===X?(o=X,a+=6):(o=e,A===0&&M(or)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();g=Te(),g!==e?(z=s,s=Cl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function yo(){var s,o,p,u,g,v,m,w,_=a*77+22,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===$e?(o=$e,a+=4):(o=e,A===0&&M(Mi)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Bt)),w!==e?(z=s,s=_l(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function wo(){var s,o,p,u,g=a*77+23,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===ke?(o=ke,a+=5):(o=e,A===0&&M(Si)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=kl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function xr(){var s,o,p,u,g=a*77+24,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===ge?(o=ge,a+=8):(o=e,A===0&&M(Fi)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=aa()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sa(){var s,o,p,u,g,v,m=a*77+25,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.substr(a,2)===qe?(u=qe,a+=2):(u=e,A===0&&M(Oi)),u===e&&(t.substr(a,2)===it?(u=it,a+=2):(u=e,A===0&&M(Jn)),u===e&&(t.charCodeAt(a)===61?(u=_e,a++):(u=e,A===0&&M(ns)))),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=Te(),v!==e?(z=s,s=Pl(o,u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function mo(){var s,o,p,u,g,v,m,w,_=a*77+26,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=us(),o!==e){for(p=[],u=a,g=[],v=br();v!==e;)g.push(v),v=br();if(v=An(),v!==e){for(m=[],w=br();w!==e;)m.push(w),w=br();w=us(),w!==e?(z=u,u=ia(o,v,w)):(a=u,u=e)}else a=u,u=e;if(u!==e)for(;u!==e;){for(p.push(u),u=a,g=[],v=br();v!==e;)g.push(v),v=br();if(v=An(),v!==e){for(m=[],w=br();w!==e;)m.push(w),w=br();w=us(),w!==e?(z=u,u=ia(o,v,w)):(a=u,u=e)}else a=u,u=e}else p=e;p!==e?(z=s,s=El(o,p)):(a=s,s=e)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function br(){var s,o,p,u=a*77+27,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(o=Zt,a++):(o=e,A===0&&M(Zn)),o!==e?(p=ne(),p!==e?(o=[o,p],s=o):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),T[u]={nextPos:a,result:s},s)}function An(){var s,o,p=a*77+28,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===lt?(o=lt,a+=2):(o=e,A===0&&M(Ni)),o===e&&(t.substr(a,2)===ot?(o=ot,a+=2):(o=e,A===0&&M(Ti)),o===e&&(t.substr(a,2)===Ie?(o=Ie,a+=2):(o=e,A===0&&M(Ii)),o===e&&(t.substr(a,2)===at?(o=at,a+=2):(o=e,A===0&&M(ji)),o===e&&(t.substr(a,2)===Mt?(o=Mt,a+=2):(o=e,A===0&&M(Ri)),o===e&&(t.substr(a,2)===St?(o=St,a+=2):(o=e,A===0&&M(Gn)),o===e&&(t.charCodeAt(a)===60?(o=Qe,a++):(o=e,A===0&&M(gn)),o===e&&(t.charCodeAt(a)===62?(o=Fr,a++):(o=e,A===0&&M(Qn)),o===e&&(t.charCodeAt(a)===43?(o=Dt,a++):(o=e,A===0&&M(Di)),o===e&&(t.charCodeAt(a)===45?(o=yr,a++):(o=e,A===0&&M(Xn)),o===e&&(t.charCodeAt(a)===42?(o=kt,a++):(o=e,A===0&&M(Yn)),o===e&&(t.charCodeAt(a)===94?(o=dr,a++):(o=e,A===0&&M(Li)),o===e&&(t.charCodeAt(a)===47?(o=Or,a++):(o=e,A===0&&M(Bi)),o===e&&(t.charCodeAt(a)===37?(o=_r,a++):(o=e,A===0&&M(Hi))))))))))))))),o!==e&&(z=s,o=Ml()),s=o,T[p]={nextPos:a,result:s},s)}function $o(){var s,o,p,u=a*77+29,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===33?(o=Er,a++):(o=e,A===0&&M(dn)),o!==e?(p=Te(),p!==e?(z=s,s=Sl(p)):(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function Fa(){var s,o,p,u,g=a*77+30,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,o=Pa(),o!==e){if(p=[],u=Cn(),u===e&&(u=Oa(),u===e&&(u=Us())),u!==e)for(;u!==e;)p.push(u),u=Cn(),u===e&&(u=Oa(),u===e&&(u=Us()));else p=e;p!==e?(z=s,s=la(o,p)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function Cn(){var s,o,p,u,g,v,m=a*77+31,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Pt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=xo(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e?(z=s,s=Fl(u)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function xo(){var s,o,p,u,g,v,m=a*77+32,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=Te(),v!==e?(z=u,u=oa(o,v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=Te(),v!==e?(z=u,u=oa(o,v)):(a=u,u=e)):(a=u,u=e);z=s,s=Ol(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Oa(){var s,o,p,u,g,v,m=a*77+33,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Nl(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Us(){var s,o,p,u=a*77+34,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===46?(o=U,a++):(o=e,A===0&&M(yn)),o!==e?(p=Ue(),p!==e?(z=s,s=Tl(p)):(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function bo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+35,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===K?(o=K,a+=2):(o=e,A===0&&M(Ui)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=xe(),v!==e){if(m=a,w=[],_=f(),_!==e)for(;_!==e;)w.push(_),_=f();else w=e;if(w!==e?(_=Ao(),_!==e?m=_:(a=m,m=e)):(a=m,m=e),m===e&&(m=null),w=a,_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;_!==e?(P=Co(),P!==e?w=P:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),z=s,s=Il(u,v,m,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Ao(){var s,o,p,u,g,v,m=a*77+36,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=_n(),o!==e){for(p=[],u=a,g=[],v=f();v!==e;)g.push(v),v=f();for(v=_n(),v!==e?u=v:(a=u,u=e);u!==e;){for(p.push(u),u=a,g=[],v=f();v!==e;)g.push(v),v=f();v=_n(),v!==e?u=v:(a=u,u=e)}z=s,s=jl(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function _n(){var s,o,p,u,g,v,m,w=a*77+37,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,4)===te?(o=te,a+=4):(o=e,A===0&&M(qi)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=xe(),m!==e?(z=s,s=ua(g,m)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[w]={nextPos:a,result:s},s}function Co(){var s,o,p,u,g,v=a*77+38,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,4)===ce?(o=ce,a+=4):(o=e,A===0&&M(zi)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();g=xe(),g!==e?(z=s,s=Rl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function Na(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,Nn=a*77+39,fs=T[Nn];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.substr(a,5)===he?(o=he,a+=5):(o=e,A===0&&M(Es)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===123?(m=D,a++):(m=e,A===0&&M(Ye)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=[],P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;if(P!==e)for(;P!==e;)if(_.push(P),P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;else _=e;if(_!==e){if(P=a,t.charCodeAt(a)===42?(I=kt,a++):(I=e,A===0&&M(Yn)),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();P=re}else a=P,P=e}else a=P,P=e}else a=P,P=e;for(P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();t.charCodeAt(a)===125?(R=V,a++):(R=e,A===0&&M(Bt)),R!==e?(z=s,s=Dl(g,_,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[Nn]={nextPos:a,result:s},s}function Ta(){var s,o,p,u,g,v,m,w,_=a*77+40,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===Ne?(o=Ne,a+=4):(o=e,A===0&&M(Ss)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Bt)),w!==e?(z=s,s=Ll(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ia(){var s,o,p,u,g=a*77+41,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===de?(o=de,a+=6):(o=e,A===0&&M(Wi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;p!==e?(u=ja(),u!==e?(z=s,s=Bl(u)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ja(){var s,o,p=a*77+42,u=T[p];return u?(a=u.nextPos,u.result):(s=a,o=za(),o!==e&&(z=s,o=ca(o)),s=o,T[p]={nextPos:a,result:s},s)}function qs(){var s,o,p,u,g,v,m=a*77+43,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(o=we,a++):(o=e,A===0&&M(Fs)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===96?(u=we,a++):(u=e,A===0&&M(Fs)),u!==e?(z=s,s=Hl(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function kn(){var s,o,p,u,g,v,m=a*77+44,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Te(),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Bt)),v!==e?s=u:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,o=[],p=Pn(),p!==e)for(;p!==e;)o.push(p),p=Pn();else o=e;o!==e&&(z=s,o=ha(o)),s=o}return T[m]={nextPos:a,result:s},s}function Pn(){var s,o=a*77+45,p=T[o];return p?(a=p.nextPos,p.result):(s=Ra(),s===e&&(_s.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Os))),T[o]={nextPos:a,result:s},s)}function Ra(){var s,o,p,u=a*77+46,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(o=Zt,a++):(o=e,A===0&&M(Zn)),o!==e?(Wr.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,A===0&&M(Ns)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function En(){var s,o,p,u,g,v,m=a*77+47,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(o=ue,a++):(o=e,A===0&&M(Ts)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===34?(v=ue,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=pa(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===34?(v=ue,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=pa(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===34?(u=ue,a++):(u=e,A===0&&M(Ts)),u!==e?(z=s,s=Ul(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(o=De,a++):(o=e,A===0&&M(Is)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=va(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=va(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===39?(u=De,a++):(u=e,A===0&&M(Is)),u!==e?(z=s,s=ql(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Da(){var s,o,p=a*77+48,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===je?(o=je,a+=2):(o=e,A===0&&M(js)),o!==e&&(z=s,o=zl()),s=o,T[p]={nextPos:a,result:s},s)}function Mn(){var s,o,p=a*77+49,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Be?(o=Be,a+=2):(o=e,A===0&&M(ea)),o!==e&&(z=s,o=Wl()),s=o,T[p]={nextPos:a,result:s},s)}function La(){var s,o=a*77+50,p=T[o];return p?(a=p.nextPos,p.result):(s=_o(),s===e&&(s=Ba()),T[o]={nextPos:a,result:s},s)}function _o(){var s,o,p,u,g,v,m=a*77+51,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),ht.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ta)),o!==e){if(p=[],It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)for(;u!==e;)p.push(u),It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(u=U,a++):(u=e,A===0&&M(yn)),u!==e){if(g=[],It.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr)),v!==e)for(;v!==e;)g.push(v),It.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr));else g=e;g!==e?(z=s,s=Vl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),It.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)if(t.charCodeAt(a)===46?(p=U,a++):(p=e,A===0&&M(yn)),p!==e){if(u=[],It.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr)),g!==e)for(;g!==e;)u.push(g),It.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr));else u=e;u!==e?(z=s,s=Kl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ba(){var s,o,p,u,g=a*77+52,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),ht.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ta)),o!==e){if(p=[],It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)for(;u!==e;)p.push(u),It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr));else p=e;p!==e?(z=s,s=Jl()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),It.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e?(z=s,s=Zl()):(a=s,s=e)),T[g]={nextPos:a,result:s},s}function Ha(){var s,o=a*77+53,p=T[o];return p?(a=p.nextPos,p.result):(s=ko(),s===e&&(s=Sn()),T[o]={nextPos:a,result:s},s)}function ko(){var s,o,p,u,g=a*77+54,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(o=We,a+=4):(o=e,A===0&&M(Vi)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=ga()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sn(){var s,o,p,u,g=a*77+55,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(o=Ze,a+=5):(o=e,A===0&&M(Rs)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=Gl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Fn(){var s,o,p,u,g=a*77+56,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===rt?(o=rt,a+=4):(o=e,A===0&&M(Ki)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=da()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Ua(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+57,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Bt)),g!==e?(z=s,s=Ql(u)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function Po(){var s,o,p,u,g,v,m,w,_,P,I=a*77+58,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Xl(u)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function On(){var s,o,p,u,g,v,m,w=a*77+59,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,o=Ue(),o!==e){for(p=a,u=[],g=f();g!==e;)u.push(g),g=f();if(t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=He(),m!==e?p=m:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),z=s,s=Yl(o,p)}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function qa(){var s,o,p,u,g,v,m=a*77+60,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=On(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);z=s,s=ma(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ut(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,Nn=a*77+61,fs=T[Nn];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.charCodeAt(a)===64?(o=wt,a++):(o=e,A===0&&M(Ji)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Ue(),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(t.charCodeAt(a)===40?(v=E,a++):(v=e,A===0&&M(Pt)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=qa(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(t.charCodeAt(a)===41?(P=F,a++):(P=e,A===0&&M(mr)),P!==e){for(I=a,R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===58?(Z=ae,a++):(Z=e,A===0&&M(yt)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=He(),re!==e?I=re:(a=I,I=e)}else a=I,I=e;for(I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===123?(Z=D,a++):(Z=e,A===0&&M(Ye)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();for(re=fr(),re===e&&(re=null),Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();t.charCodeAt(a)===125?(Je=V,a++):(Je=e,A===0&&M(Bt)),Je!==e?(z=s,s=eo(p,u,g,w,I,re)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[Nn]={nextPos:a,result:s},s}function Eo(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=a*77+62,re=T[ye];if(re)return a=re.nextPos,re.result;if(s=a,t.substr(a,2)===Lt?(o=Lt,a+=2):(o=e,A===0&&M(wn)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=qa(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=a,w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===58?(_=ae,a++):(_=e,A===0&&M(yt)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=He(),I!==e?m=I:(a=m,m=e)}else a=m,m=e;for(m===e&&(m=null),w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===123?(_=D,a++):(_=e,A===0&&M(Ye)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();for(I=fr(),I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();t.charCodeAt(a)===125?(Z=V,a++):(Z=e,A===0&&M(Bt)),Z!==e?(z=s,s=$a(u,m,I)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[ye]={nextPos:a,result:s},s}function Mo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+63,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=$r(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=$r(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=to(u)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function So(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+64,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=$r(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=$r(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Bt)),g!==e?(z=s,s=ro(u)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function He(){var s,o=a*77+65,p=T[o];return p?(a=p.nextPos,p.result):(s=Fo(),s===e&&(s=Tt()),T[o]={nextPos:a,result:s},s)}function Fo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+66,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===Lt?(o=Lt,a+=2):(o=e,A===0&&M(wn)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Lr(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.substr(a,2)===ie?(w=ie,a+=2):(w=e,A===0&&M(Ms)),w!==e){for(_=[],P=f();P!==e;)_.push(P),P=f();P=He(),P!==e?(z=s,s=so(u,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Lr(){var s,o,p,u,g,v,m=a*77+67,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=He(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=He(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=He(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);z=s,s=no(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Tt(){var s,o,p,u,g,v,m,w,_=a*77+68,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Ue(),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(t.charCodeAt(a)===60?(u=Qe,a++):(u=e,A===0&&M(gn)),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(v=He(),v!==e){for(m=[],w=y();w!==e;)m.push(w),w=y();t.charCodeAt(a)===62?(w=Fr,a++):(w=e,A===0&&M(Qn)),w!==e?(z=s,s=ao(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,o=Ue(),o!==e&&(z=s,o=io(o)),s=o),T[_]={nextPos:a,result:s},s}function Ue(){var s,o,p,u,g=a*77+69,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Vn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(Zi)),o!==e){for(p=[],Kn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ra));u!==e;)p.push(u),Kn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ra));z=s,s=i()}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function za(){var s,o,p,u,g,v,m=a*77+70,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Ue(),o!==e){for(p=[],u=a,t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);z=s,s=W()}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function x(){var s,o,p,u,g,v=a*77+71,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();if(t.charCodeAt(a)===44?(p=G,a++):(p=e,A===0&&M(pt)),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();o=[o,p,u],s=o}else a=s,s=e;if(s===e)if(s=[],o=f(),o!==e)for(;o!==e;)s.push(o),o=f();else s=e;return T[v]={nextPos:a,result:s},s}function xe(){var s,o,p,u,g,v,m=a*77+72,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=fr(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Bt)),v!==e?(z=s,s=Ds(u)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Dr()),T[m]={nextPos:a,result:s},s}function ne(){var s,o=a*77+73,p=T[o];return p?(a=p.nextPos,p.result):(t.substr(a,2)===xt?(s=xt,a+=2):(s=e,A===0&&M(Gi)),s===e&&(Ci.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Qi))),T[o]={nextPos:a,result:s},s)}function l(){var s,o,p=a*77+74,u=T[p];return u?(a=u.nextPos,u.result):(s=a,A++,t.length>a?(o=t.charAt(a),a++):(o=e,A===0&&M(rr)),A--,o===e?s=void 0:(a=s,s=e),s===e&&(s=ne()),T[p]={nextPos:a,result:s},s)}function f(){var s,o=a*77+75,p=T[o];return p?(a=p.nextPos,p.result):(_i.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Xi)),T[o]={nextPos:a,result:s},s)}function y(){var s,o=a*77+76,p=T[o];return p?(a=p.nextPos,p.result):(tr.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Yi)),T[o]={nextPos:a,result:s},s)}function c(s,o,p){const u={type:s};o.children=p;for(const v of Object.keys(o))o[v]!==void 0&&(u[v]=o[v]);const g=Ht();return u.loc={start:g.start.offset,end:g.end.offset-1},u}if(Ls=d(),Ls!==e&&a===t.length)return Ls;throw Ls!==e&&a<t.length&&M(S()),oo(jr,O<t.length?t.charAt(O):null,O<t.length?Hs(O,O+1):Hs(O,O))}const X0=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function Y0(t){return X0.includes(t.type)}function Lg(t){return"chain"in t&&t.chain!==null}function e$(t,r,e){return{type:"call",target:t,args:r,loc:e}}function t$(t,r,e){return{type:"index",target:t,index:r,loc:e}}function r$(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=et(e.expr,r);break}case"return":{e.expr=et(e.expr,r);break}case"each":{e.items=et(e.items,r),e.for=et(e.for,r);break}case"for":{e.from!=null&&(e.from=et(e.from,r)),e.to!=null&&(e.to=et(e.to,r)),e.times!=null&&(e.times=et(e.times,r)),e.for=et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=et(e.expr,r),e.dest=et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=et(e.operands[n],r);break}case"not":{e.expr=et(e.expr,r);break}case"if":{e.cond=et(e.cond,r),e.then=et(e.then,r);for(const n of e.elseif)n.cond=et(n.cond,r),n.then=et(n.then,r);e.else!=null&&(e.else=et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=et(e.children[n],r);break}case"match":{e.about=et(e.about,r);for(const n of e.qs)n.q=et(n.q,r),n.a=et(n.a,r);e.default!=null&&(e.default=et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=et(e.statements[n],r);break}case"exists":{e.identifier=et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=et(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=et(e.args[n],r);break}case"indexChain":{e.index=et(e.index,r);break}case"call":{e.target=et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=et(e.args[n],r);break}case"index":{e.target=et(e.target,r),e.index=et(e.index,r);break}case"prop":{e.target=et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=et(e.members[n],r);break}case"or":case"and":{e.left=et(e.left,r),e.right=et(e.right,r);break}}if(Lg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=et(e.chain[n],r);return e}const Ic=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function jc(t){throw new su(`Reserved word "${t}" cannot be used as variable name.`)}function s$(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Ic.includes(t.name)&&jc(t.name);break}case"meta":{t.name!=null&&Ic.includes(t.name)&&jc(t.name);break}case"fn":{for(const r of t.args)Ic.includes(r.name)&&jc(r.name);break}}return t}function n$(t){for(const r of t)et(r,s$);return t}function pv(t){return{type:"simple",name:t}}function a$(t,r){return{type:"generic",name:t,inners:r}}function i$(t,r){return{type:"fn",args:t,result:r}}function Of(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Of(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Of(n)).join(", "),e=Of(t.result);return`@(${r}) { ${e} }`}}}function Cu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return pv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Cu(t.inner):r=pv("any"),a$(t.name,[r])}}throw new su(`Unknown type: '${Of(t)}'`)}else{const r=t.args.map(e=>Cu(e));return i$(r,Cu(t.result))}}function l$(t){switch(t.type){case"def":{t.varType!=null&&Cu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Cu(r.argType);t.retType!=null&&Cu(t.retType);break}}return t}function o$(t){for(const r of t)et(r,l$);return t}function Nf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Nf(n.expr.children)),r.push(n);else{if(e.length>0)throw new su("invalid attribute.");switch(n.type){case"fn":{n.children=Nf(n.children);break}case"block":{n.statements=Nf(n.statements);break}}r.push(n)}if(e.length>0)throw new su("invalid attribute.");return r}function u$(t){if(Y0(t)&&Lg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=e$(n,h.args,h.loc);break}case"indexChain":{n=t$(n,h.index,h.loc);break}case"propChain":{n=r$(n,h.name,h.loc);break}}return n}return t}function f$(t){for(let r=0;r<t.length;r++)t[r]=et(t[r],u$);return t}function Tf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Bg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Tf(t,r,e);{const{left:n,right:h,info:d}=t;return Tf(n,Bg(h,r,e),d)}}function Ho(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Ho(t.left),Ho(t.right)]}}const c$={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Ho(t.left),right:Ho(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Ho(t.left),right:Ho(t.right)}),priority:3}};function h$(t){const r=t.operators.map(n=>{const h=c$[n];if(h==null)throw new su(`No such operator: ${n}.`);return h});let e=Tf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Bg(e,t.operands[2+n],r[1+n]);return Ho(e)}function p$(t){for(let r=0;r<t.length;r++)t[r]=et(t[r],e=>e.type==="infix"?h$(e):e);return t}var Ka;let v$=(Ka=class{constructor(){me(this,"plugins");this.plugins={validate:[n$,o$],transform:[Nf,f$,p$]}}static parse(r){return Ka.instance==null&&(Ka.instance=new Ka),Ka.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=hv(r,{startRule:"Preprocess"});e=hv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new su(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new su(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Ka,"instance"),Ka);const g$="develop",d$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let mh=[],Uu=null;function y$(t){return mh=v$.parse(t),JSON.stringify(mh,null,"	")}async function w$(t){Uu==null||Uu.abort(),Uu=new rs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:dh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:dh(e.val,!0),print:!1});break}}});try{await Uu.exec(mh)}catch(r){t.err(r)}}const m$=Object.freeze(Object.defineProperty({__proto__:null,exec:w$,parse:y$,samples:d$,version:g$},Symbol.toStringTag,{value:"Module"}));function gr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let mc=class Hg extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Hg)}};class $$ extends mc{constructor(r){super(`Internal Error. ${r}`,r)}}class nu extends mc{constructor(r,e){super(r,e)}}class Jt extends mc{constructor(r,e){super(r,e)}}class x$ extends Jt{constructor(r,e){super(r,e)}}var bi=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let ei=class Ug{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Ug(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Jt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Jt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Jt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Jt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};bi([gr],ei.prototype,"log",null);bi([gr],ei.prototype,"onUpdated",null);bi([gr],ei.prototype,"createChildScope",null);bi([gr],ei.prototype,"get",null);bi([gr],ei.prototype,"exists",null);bi([gr],ei.prototype,"getAll",null);bi([gr],ei.prototype,"add",null);bi([gr],ei.prototype,"assign",null);const Ct={type:"null"},on={type:"bool",value:!0},Ks={type:"bool",value:!1},Fe=t=>({type:"num",value:t}),Wt=t=>({type:"str",value:t}),Qo=t=>({type:"bool",value:t}),cp=t=>({type:"obj",value:t}),Jr=t=>({type:"arr",value:t}),b$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),fe=t=>({type:"fn",native:t}),A$=t=>({type:"return",value:t}),C$=()=>({type:"break",value:null}),_$=()=>({type:"continue",value:null}),k$=t=>t.type==="return"?t.value:t,qg=(t,r)=>({type:"error",value:t,info:r});function Xs(t){if(t==null)throw new Jt("Expect anything, but got nothing.")}function vs(t){if(t==null)throw new Jt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Jt(`Expect boolean, but got ${t.type}.`)}function hi(t){if(t==null)throw new Jt("Expect function, but got nothing.");if(t.type!=="fn")throw new Jt(`Expect function, but got ${t.type}.`)}function kr(t){if(t==null)throw new Jt("Expect string, but got nothing.");if(t.type!=="str")throw new Jt(`Expect string, but got ${t.type}.`)}function Ce(t){if(t==null)throw new Jt("Expect number, but got nothing.");if(t.type!=="num")throw new Jt(`Expect number, but got ${t.type}.`)}function ai(t){if(t==null)throw new Jt("Expect object, but got nothing.");if(t.type!=="obj")throw new Jt(`Expect object, but got ${t.type}.`)}function rc(t){if(t==null)throw new Jt("Expect array, but got nothing.");if(t.type!=="arr")throw new Jt(`Expect array, but got ${t.type}.`)}function Rc(t){return t.type==="obj"}function vv(t){return t.type==="arr"}function $h(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function xh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>xh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function bh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>bh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=bh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ah(t){if(t===null)return Ct;if(typeof t=="boolean")return Qo(t);if(typeof t=="string")return Wt(t);if(typeof t=="number")return Fe(t);if(Array.isArray(t))return Jr(t.map(r=>Ah(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ah(n));return cp(r)}return Ct}function _u(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(_u(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${_u(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const P$={help:Wt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Wt("0.16.0"),"Core:ai":Wt("kawaii"),"Core:not":fe(([t])=>(vs(t),t.value?Ks:on)),"Core:eq":fe(([t,r])=>(Xs(t),Xs(r),$h(t,r)?on:Ks)),"Core:neq":fe(([t,r])=>(Xs(t),Xs(r),$h(t,r)?Ks:on)),"Core:and":fe(([t,r])=>(vs(t),t.value?(vs(r),r.value?on:Ks):Ks)),"Core:or":fe(([t,r])=>(vs(t),t.value?on:(vs(r),r.value?on:Ks))),"Core:add":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value+r.value))),"Core:sub":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value-r.value))),"Core:mul":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value*r.value))),"Core:pow":fe(([t,r])=>{Ce(t),Ce(r);const e=t.value**r.value;if(isNaN(e))throw new Jt("Invalid operation.");return Fe(e)}),"Core:div":fe(([t,r])=>{Ce(t),Ce(r);const e=t.value/r.value;if(isNaN(e))throw new Jt("Invalid operation.");return Fe(e)}),"Core:mod":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value%r.value))),"Core:gt":fe(([t,r])=>(Ce(t),Ce(r),t.value>r.value?on:Ks)),"Core:lt":fe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?on:Ks)),"Core:gteq":fe(([t,r])=>(Ce(t),Ce(r),t.value>=r.value?on:Ks)),"Core:lteq":fe(([t,r])=>(Ce(t),Ce(r),t.value<=r.value?on:Ks)),"Core:type":fe(([t])=>(Xs(t),Wt(t.type))),"Core:to_str":fe(([t])=>(Xs(t),Wt(_u(t)))),"Core:range":fe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?Jr(Array.from({length:r.value-t.value+1},(e,n)=>Fe(n+t.value))):t.value>r.value?Jr(Array.from({length:t.value-r.value+1},(e,n)=>Fe(t.value-n))):Jr([t]))),"Core:sleep":fe(async([t])=>(Ce(t),await new Promise(r=>setTimeout(r,t.value)),Ct)),"Util:uuid":fe(()=>Wt(rp())),"Json:stringify":fe(([t])=>(Xs(t),Wt(JSON.stringify(bh(t))))),"Json:parse":fe(([t])=>{kr(t);try{return Ah(JSON.parse(t.value))}catch{return qg("not_json")}}),"Json:parsable":fe(([t])=>{kr(t);try{JSON.parse(t.value)}catch{return Qo(!1)}return Qo(!0)}),"Date:now":fe(()=>Fe(Date.now())),"Date:year":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":fe(([t])=>(kr(t),Fe(new Date(t.value).getTime()))),"Math:Infinity":Fe(1/0),"Math:E":Fe(Math.E),"Math:LN2":Fe(Math.LN2),"Math:LN10":Fe(Math.LN10),"Math:LOG2E":Fe(Math.LOG2E),"Math:LOG10E":Fe(Math.LOG10E),"Math:PI":Fe(Math.PI),"Math:SQRT1_2":Fe(Math.SQRT1_2),"Math:SQRT2":Fe(Math.SQRT2),"Math:abs":fe(([t])=>(Ce(t),Fe(Math.abs(t.value)))),"Math:acos":fe(([t])=>(Ce(t),Fe(Math.acos(t.value)))),"Math:acosh":fe(([t])=>(Ce(t),Fe(Math.acosh(t.value)))),"Math:asin":fe(([t])=>(Ce(t),Fe(Math.asin(t.value)))),"Math:asinh":fe(([t])=>(Ce(t),Fe(Math.asinh(t.value)))),"Math:atan":fe(([t])=>(Ce(t),Fe(Math.atan(t.value)))),"Math:atanh":fe(([t])=>(Ce(t),Fe(Math.atanh(t.value)))),"Math:atan2":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.atan2(t.value,r.value)))),"Math:cbrt":fe(([t])=>(Ce(t),Fe(Math.cbrt(t.value)))),"Math:ceil":fe(([t])=>(Ce(t),Fe(Math.ceil(t.value)))),"Math:clz32":fe(([t])=>(Ce(t),Fe(Math.clz32(t.value)))),"Math:cos":fe(([t])=>(Ce(t),Fe(Math.cos(t.value)))),"Math:cosh":fe(([t])=>(Ce(t),Fe(Math.cosh(t.value)))),"Math:exp":fe(([t])=>(Ce(t),Fe(Math.exp(t.value)))),"Math:expm1":fe(([t])=>(Ce(t),Fe(Math.expm1(t.value)))),"Math:floor":fe(([t])=>(Ce(t),Fe(Math.floor(t.value)))),"Math:fround":fe(([t])=>(Ce(t),Fe(Math.fround(t.value)))),"Math:hypot":fe(([t])=>{rc(t);const r=[];for(const e of t.value)Ce(e),r.push(e.value);return Fe(Math.hypot(...r))}),"Math:imul":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.imul(t.value,r.value)))),"Math:log":fe(([t])=>(Ce(t),Fe(Math.log(t.value)))),"Math:log1p":fe(([t])=>(Ce(t),Fe(Math.log1p(t.value)))),"Math:log10":fe(([t])=>(Ce(t),Fe(Math.log10(t.value)))),"Math:log2":fe(([t])=>(Ce(t),Fe(Math.log2(t.value)))),"Math:max":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.max(t.value,r.value)))),"Math:min":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.min(t.value,r.value)))),"Math:pow":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.pow(t.value,r.value)))),"Math:round":fe(([t])=>(Ce(t),Fe(Math.round(t.value)))),"Math:sign":fe(([t])=>(Ce(t),Fe(Math.sign(t.value)))),"Math:sin":fe(([t])=>(Ce(t),Fe(Math.sin(t.value)))),"Math:sinh":fe(([t])=>(Ce(t),Fe(Math.sinh(t.value)))),"Math:sqrt":fe(([t])=>{Ce(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Jt("Invalid operation.");return Fe(r)}),"Math:tan":fe(([t])=>(Ce(t),Fe(Math.tan(t.value)))),"Math:tanh":fe(([t])=>(Ce(t),Fe(Math.tanh(t.value)))),"Math:trunc":fe(([t])=>(Ce(t),Fe(Math.trunc(t.value)))),"Math:rnd":fe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Fe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Fe(Math.random())),"Math:gen_rng":fe(([t])=>{if(Xs(t),t.type!=="num"&&t.type!=="str")return Ct;const r=cf(t.value.toString());return fe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Fe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Fe(r()))}),"Num:to_hex":fe(([t])=>(Ce(t),Wt(t.value.toString(16)))),"Num:from_hex":fe(([t])=>(kr(t),Fe(parseInt(t.value,16)))),"Str:lf":Wt(`
`),"Str:lt":fe(([t,r])=>(kr(t),kr(r),t.value<r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:gt":fe(([t,r])=>(kr(t),kr(r),t.value>r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:from_codepoint":fe(([t])=>(Ce(t),Wt(String.fromCodePoint(t.value)))),"Obj:keys":fe(([t])=>(ai(t),Jr(Array.from(t.value.keys()).map(r=>Wt(r))))),"Obj:vals":fe(([t])=>(ai(t),Jr(Array.from(t.value.values())))),"Obj:kvs":fe(([t])=>(ai(t),Jr(Array.from(t.value.entries()).map(([r,e])=>Jr([Wt(r),e]))))),"Obj:get":fe(([t,r])=>(ai(t),kr(r),t.value.get(r.value)??Ct)),"Obj:set":fe(([t,r,e])=>(ai(t),kr(r),Xs(e),t.value.set(r.value,e),Ct)),"Obj:has":fe(([t,r])=>(ai(t),kr(r),Qo(t.value.has(r.value)))),"Obj:copy":fe(([t])=>(ai(t),cp(new Map(t.value)))),"Async:interval":fe(async([t,r,e],n)=>{Ce(t),hi(r),e&&(vs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),fe(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":fe(async([t,r],e)=>{Ce(t),hi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),fe(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},gv={num:{to_str:t=>fe(async(r,e)=>Wt(t.value.toString()))},str:{to_num:t=>fe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Ct:Fe(n)}),len:t=>Fe(hf(t.value)),replace:t=>fe(async([r,e],n)=>(kr(r),kr(e),Wt(t.value.split(r.value).join(e.value)))),index_of:t=>fe(async([r],e)=>(kr(r),Fe(vf(t.value,r.value)))),incl:t=>fe(async([r],e)=>(kr(r),t.value.includes(r.value)?on:Ks)),trim:t=>fe(async(r,e)=>Wt(t.value.trim())),upper:t=>fe(async(r,e)=>Wt(t.value.toUpperCase())),lower:t=>fe(async(r,e)=>Wt(t.value.toLowerCase())),split:t=>fe(async([r],e)=>(r&&kr(r),Jr(r?t.value.split(r?r.value:"").map(n=>Wt(n)):zn(t.value).map(n=>Wt(n))))),slice:t=>fe(async([r,e],n)=>(Ce(r),Ce(e),Wt(pf(t.value,r.value,e.value)))),pick:t=>fe(async([r],e)=>{Ce(r);const h=zn(t.value)[r.value];return h?Wt(h):Ct}),codepoint_at:t=>fe(([r],e)=>{Ce(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Ct:Fe(n)})},arr:{len:t=>Fe(t.value.length),push:t=>fe(async([r],e)=>(Xs(r),t.value.push(r),t)),unshift:t=>fe(async([r],e)=>(Xs(r),t.value.unshift(r),t)),pop:t=>fe(async(r,e)=>t.value.pop()??Ct),shift:t=>fe(async(r,e)=>t.value.shift()??Ct),concat:t=>fe(async([r],e)=>(rc(r),Jr(t.value.concat(r.value)))),slice:t=>fe(async([r,e],n)=>(Ce(r),Ce(e),Jr(t.value.slice(r.value,e.value)))),join:t=>fe(async([r],e)=>(r&&kr(r),Wt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>fe(async([r],e)=>{hi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Fe(d)]));return Jr(await Promise.all(n))}),filter:t=>fe(async([r],e)=>{hi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Fe(h)]);vs($),$.value&&n.push(d)}return Jr(n)}),reduce:t=>fe(async([r,e],n)=>{hi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Fe($)])}return d}),find:t=>fe(async([r],e)=>{hi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Fe(n)]);if(vs(d),d.value)return h}return Ct}),incl:t=>fe(async([r],e)=>(Xs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ks:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?on:Ks)),reverse:t=>fe(async(r,e)=>(t.value.reverse(),Ct)),copy:t=>fe(async(r,e)=>Jr([...t.value])),sort:t=>fe(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Ce(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return hi(r),rc(t),t.value=await n(t.value,r),t})},error:{name:t=>Wt(t.value),info:t=>t.info??Ct}};function E$(t,r){if(Object.hasOwn(gv,t.type)){const e=gv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Jt(`No such prop (${r}) in ${t.type}.`)}else throw new Jt(`Cannot read prop of ${t.type}. (reading ${r})`)}const M$={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ms=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const zg=300,S$=zg-1;let ss=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:fe(([h])=>{Xs(h),this.opts.out&&this.opts.out(h)}),readline:fe(async h=>{const d=h[0];if(kr(d),this.opts.in==null)return Ct;const $=await this.opts.in(d.value);return Wt($)})};this.vars=Object.fromEntries(Object.entries({...r,...P$,...n}).map(([h,d])=>[h,M$.const(d)])),this.scope=new ei([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),qg("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof mc?this.opts.err(r):this.opts.err(new $$(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Ct;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return k$(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Ct;if(this.stepCount%zg===S$&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Jt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);hi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(vs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(vs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Ct}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if($h(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Ct}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Ct}case"for":{if(r.times){const n=await this._eval(r.times,e);Ce(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Ce(n),Ce(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Fe(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return Ct}case"each":{const n=await this._eval(r.items,e);rc(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return Ct}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),Ct}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Ct}case"addAssign":{const n=await this._eval(r.dest,e);Ce(n);const h=await this._eval(r.expr,e);return Ce(h),await this.assign(e,r.dest,Fe(n.value+h.value)),Ct}case"subAssign":{const n=await this._eval(r.dest,e);Ce(n);const h=await this._eval(r.expr,e);return Ce(h),await this.assign(e,r.dest,Fe(n.value-h.value)),Ct}case"null":return Ct;case"bool":return Qo(r.value);case"num":return Fe(r.value);case"str":return Wt(r.value);case"arr":return Jr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return cp(n)}case"prop":{const n=await this._eval(r.target,e);return Rc(n)?n.value.has(r.name)?n.value.get(r.name):Ct:E$(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(vv(n)){Ce(h);const d=n.value[h.value];if(d===void 0)throw new x$(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Rc(n))return kr(h),n.value.has(h.value)?n.value.get(h.value):Ct;throw new Jt(`Cannot read prop (${_u(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return vs(n),Qo(!n.value)}case"fn":return b$(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Qo(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=_u(d)}return Wt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),A$(n)}case"break":return this.log("block:break",{scope:e.name}),C$();case"continue":return this.log("block:continue",{scope:e.name}),_$();case"ns":return Ct;case"meta":return Ct;case"and":{const n=await this._eval(r.left,e);if(vs(n),n.value){const h=await this._eval(r.right,e);return vs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(vs(n),n.value)return n;{const h=await this._eval(r.right,e);return vs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Ct;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(vv(h))Ce(d),h.value[d.value]=n;else if(Rc(h))kr(d),h.value.set(d.value,n);else throw new Jt(`Cannot read prop (${_u(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);ai(h),h.value.set(e.name,n)}else throw new Jt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ms([gr],ss.prototype,"exec",null);ms([gr],ss.prototype,"execFn",null);ms([gr],ss.prototype,"execFnSimple",null);ms([gr],ss.prototype,"handleError",null);ms([gr],ss.prototype,"log",null);ms([gr],ss.prototype,"collectNs",null);ms([gr],ss.prototype,"collectNsMember",null);ms([gr],ss.prototype,"_fn",null);ms([gr],ss.prototype,"_eval",null);ms([gr],ss.prototype,"_run",null);ms([gr],ss.prototype,"registerAbortHandler",null);ms([gr],ss.prototype,"unregisterAbortHandler",null);ms([gr],ss.prototype,"abort",null);ms([gr],ss.prototype,"assign",null);ms([gr],ss,"collectMetadata",null);function F$(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Xo(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Xo.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}F$(Xo,Error);function Dc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Xo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Dc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Dc("",h.column-1," ")+Dc("",j,"^")}else r+=`
 at `+$}return r};Xo.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function dv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:_a,Main:os},d=_a,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ae=":",_e="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",ke="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ot="&&",Ie="==",at="!=",Mt="<=",St=">=",Qe="<",Fr=">",Dt="+",yr="-",kt="*",dr="^",Or="/",_r="%",Er="!",Ft="[",U=".",K="if",te="elif",ce="else",he="match",ie="=>",Ne="eval",de="exists",we="`",ue='"',De="'",je='\\"',Be="\\'",We="true",Ze="false",rt="null",st=";",wt="@",Lt="@(",xt=`\r
`,Gt=/^[A-Z0-9_:]/i,_s=/^[^`{]/,Wr=/^[{}`]/,Ot=/^[+\-]/,ht=/^[1-9]/,It=/^[0-9]/,Vn=/^[A-Z_]/i,Kn=/^[A-Z0-9_]/i,Ci=/^[\r\n]/,_i=/^[ \t\r\n]/,tr=/^[ \t]/,rr=Bs(),ki=se("//",!1),vn=se("/*",!1),wr=se("*/",!1),Pt=se("(",!1),mr=se(")",!1),sr=se("::",!1),Ye=se("{",!1),Bt=se("}",!1),Ir=se("###",!1),dt=se("let",!1),yt=se(":",!1),ns=se("=",!1),Pi=se("var",!1),Ei=se("<:",!1),ks=se("#[",!1),as=se("]",!1),mt=se("each",!1),pt=se(",",!1),Ps=se("for",!1),or=se("return",!1),ur=Nt([["A","Z"],["0","9"],"_",":"],!1,!0),Mi=se("loop",!1),Si=se("break",!1),Fi=se("continue",!1),Oi=se("+=",!1),Jn=se("-=",!1),Zn=se("\\",!1),Ni=se("||",!1),Ti=se("&&",!1),Ii=se("==",!1),ji=se("!=",!1),Ri=se("<=",!1),Gn=se(">=",!1),gn=se("<",!1),Qn=se(">",!1),Di=se("+",!1),Xn=se("-",!1),Yn=se("*",!1),Li=se("^",!1),Bi=se("/",!1),Hi=se("%",!1),dn=se("!",!1),is=se("[",!1),yn=se(".",!1),Ui=se("if",!1),qi=se("elif",!1),zi=se("else",!1),Es=se("match",!1),Ms=se("=>",!1),Ss=se("eval",!1),Wi=se("exists",!1),Fs=se("`",!1),Os=Nt(["`","{"],!0,!1),Ns=Nt(["{","}","`"],!1,!1),Ts=se('"',!1),Is=se("'",!1),js=se('\\"',!1),ea=se("\\'",!1),Et=Nt(["+","-"],!1,!1),ta=Nt([["1","9"]],!1,!1),nr=Nt([["0","9"]],!1,!1),Vi=se("true",!1),Rs=se("false",!1),Ki=se("null",!1),ls=se(";",!1),Ji=se("@",!1),wn=se("@(",!1),Zi=Nt([["A","Z"],"_"],!1,!0),ra=Nt([["A","Z"],["0","9"],"_"],!1,!0),Gi=se(`\r
`,!1),Qi=Nt(["\r",`
`],!1,!1),Xi=Nt([" ","	","\r",`
`],!1,!1),Yi=Nt([" ","	"],!1,!1),el=function(s){return s.join("")},tl=function(){return Y()},rl=function(){return Y()},sl=function(){return""},sa=function(){return""},nl=function(s){return s??[]},mn=function(s,o){return o},al=function(s,o){return[s,...o]},$n=function(s,o){return o},il=function(s,o){return[s,...o]},na=function(s,o){return o},ll=function(s,o){return[s,...o]},ol=function(s){return s},ul=function(s,o){return c("ns",{name:s,members:o})},fl=function(s,o){return c("meta",{name:s,value:o})},cl=function(s){return c("meta",{name:null,value:s})},hl=function(s,o,p){return c("def",{name:s,varType:o,expr:p,mut:!1,attr:[]})},pl=function(s,o,p){return c("def",{name:s,varType:o,expr:p,mut:!0,attr:[]})},vl=function(s){return c("identifier",{name:"print",chain:[c("callChain",{args:[s]})]})},gl=function(s,o){return c("attr",{name:s,value:o??c("bool",{value:!0})})},dl=function(s,o,p){return c("each",{var:s,items:o,for:p})},yl=function(s,o,p){return c("each",{var:s,items:o,for:p})},wl=function(s,o){return o},ml=function(s,o,p,u){return c("for",{var:s,from:o??c("num",{value:0}),to:p,for:u})},$l=function(s,o){return o},xl=function(s,o,p,u){return c("for",{var:s,from:o??c("num",{value:0}),to:p,for:u})},bl=function(s,o){return c("for",{times:s,for:o})},Al=function(s,o){return c("for",{times:s,for:o})},Cl=function(s){return c("return",{expr:s})},_l=function(s){return c("loop",{statements:s})},kl=function(){return c("break",{})},aa=function(){return c("continue",{})},Pl=function(s,o,p){return o==="+="?c("addAssign",{dest:s,expr:p}):o==="-="?c("subAssign",{dest:s,expr:p}):c("assign",{dest:s,expr:p})},ia=function(s,o,p){return{op:o,term:p}},El=function(s,o){return c("infix",{operands:[s,...o.map(p=>p.term)],operators:o.map(p=>p.op)})},Ml=function(){return Y()},Sl=function(s){return c("not",{expr:s})},la=function(s,o){return{...s,chain:o}},Fl=function(s){return c("callChain",{args:s??[]})},oa=function(s,o){return o},Ol=function(s,o){return[s,...o]},Nl=function(s){return c("indexChain",{index:s})},Tl=function(s){return c("propChain",{name:s})},Il=function(s,o,p,u){return c("if",{cond:s,then:o,elseif:p??[],else:u})},jl=function(s,o){return[s,...o]},ua=function(s,o){return{cond:s,then:o}},Rl=function(s){return s},fa=function(s,o,p){return{q:o,a:p}},Dl=function(s,o,p){return c("match",{about:s,qs:o??[],default:p})},Ll=function(s){return c("block",{statements:s})},Bl=function(s){return c("exists",{identifier:s})},ca=function(s){return c("identifier",{name:s})},Hl=function(s){return c("tmpl",{tmpl:s})},ha=function(s){return s.join("")},pa=function(s){return s},Ul=function(s){return c("str",{value:s.join("")})},va=function(s){return s},ql=function(s){return c("str",{value:s.join("")})},zl=function(){return'"'},Wl=function(){return"'"},Vl=function(){return c("num",{value:parseFloat(Y())})},Kl=function(){return c("num",{value:parseFloat(Y())})},Jl=function(){return c("num",{value:parseInt(Y(),10)})},Zl=function(){return c("num",{value:parseInt(Y(),10)})},ga=function(){return c("bool",{value:!0})},Gl=function(){return c("bool",{value:!1})},da=function(){return c("null",{})},ya=function(s,o){return{k:s,v:o}},Ql=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return c("obj",{value:o})},wa=function(s){return s},Xl=function(s){return c("arr",{value:s})},Yl=function(s,o){return{name:s,argType:o}},ma=function(s,o){return[s,...o]},eo=function(s,o,p,u,g,v){return(s.length>0||p.length>0)&&lo("Cannot use spaces before or after the function name."),c("def",{name:o,expr:c("fn",{args:u??[],retType:g},v??[]),mut:!1,attr:[]})},$a=function(s,o,p){return c("fn",{args:s??[],retType:o},p??[])},xa=function(s){return s},to=function(s){return c("arr",{value:s})},ba=function(s,o){return{k:s,v:o}},ro=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return c("obj",{value:o})},so=function(s,o){return c("fnTypeSource",{args:s??[],result:o})},no=function(s,o){return[s,...o]},ao=function(s,o){return c("namedTypeSource",{name:s,inner:o})},io=function(s){return c("namedTypeSource",{name:s,inner:null})},i=function(){return Y()},W=function(){return Y()},Ds=function(s){return c("block",{statements:s??[]})},a=0,z=0,C=[{line:1,column:1}],O=0,jr=[],A=0,T={},Ls;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function Y(){return t.substring(z,a)}function Ht(){return Hs(z,a)}function lo(s,o){throw o=o!==void 0?o:Hs(z,a),Ca(s,o)}function se(s,o){return{type:"literal",text:s,ignoreCase:o}}function Nt(s,o,p){return{type:"class",parts:s,inverted:o,ignoreCase:p}}function Bs(){return{type:"any"}}function S(){return{type:"end"}}function Aa(s){var o=C[s],p;if(o)return o;for(p=s-1;!C[p];)p--;for(o=C[p],o={line:o.line,column:o.column};p<s;)t.charCodeAt(p)===10?(o.line++,o.column=1):o.column++,p++;return C[s]=o,o}function Hs(s,o,p){var u=Aa(s),g=Aa(o),v={source:n,start:{offset:s,line:u.line,column:u.column},end:{offset:o,line:g.line,column:g.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function M(s){a<O||(a>O&&(O=a,jr=[]),jr.push(s))}function Ca(s,o){return new Xo(s,null,null,o)}function oo(s,o,p){return new Xo(Xo.buildMessage(s,o),s,o,p)}function _a(){var s,o,p,u=a*77+0,g=T[u];if(g)return a=g.nextPos,g.result;for(s=a,o=[],p=ka();p!==e;)o.push(p),p=ka();return z=s,o=el(o),s=o,T[u]={nextPos:a,result:s},s}function ka(){var s,o,p=a*77+1,u=T[p];return u?(a=u.nextPos,u.result):(s=a,o=qs(),o!==e&&(z=s,o=tl()),s=o,s===e&&(s=a,o=En(),o!==e&&(z=s,o=rl()),s=o,s===e&&(s=uo(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,A===0&&M(rr))))),T[p]={nextPos:a,result:s},s)}function uo(){var s,o,p,u,g,v,m=a*77+2,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(o=$,a+=2):(o=e,A===0&&M(ki)),o!==e){for(p=[],u=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);z=s,s=sl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===b?(o=b,a+=2):(o=e,A===0&&M(vn)),o!==e){for(p=[],u=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(wr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(wr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);t.substr(a,2)===k?(u=k,a+=2):(u=e,A===0&&M(wr)),u!==e?(z=s,s=sa()):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function os(){var s,o,p,u,g,v=a*77+3,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();for(p=xn(),p===e&&(p=null),u=[],g=f();g!==e;)u.push(g),g=f();return z=s,s=nl(p),T[v]={nextPos:a,result:s},s}function xn(){var s,o,p,u,g,v,m,w,_=a*77+4,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Re(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=u,u=mn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=u,u=mn(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=al(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function bn(){var s,o,p,u,g,v,m,w,_=a*77+5,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Rr(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Rr(),w!==e?(z=u,u=$n(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Rr(),w!==e?(z=u,u=$n(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=il(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function fr(){var s,o,p,u,g,v,m,w,_=a*77+6,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Dr(),o!==e){for(p=[],u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=u,u=na(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=u,u=na(o,w)):(a=u,u=e)}else a=u,u=e}z=s,s=ll(o,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Re(){var s,o=a*77+7,p=T[o];return p?(a=p.nextPos,p.result):(s=Ea(),s===e&&(s=fo(),s===e&&(s=Dr())),T[o]={nextPos:a,result:s},s)}function Rr(){var s,o=a*77+8,p=T[o];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=Ut(),s===e&&(s=Ea())),T[o]={nextPos:a,result:s},s)}function Dr(){var s,o=a*77+9,p=T[o];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=Ut(),s===e&&(s=co(),s===e&&(s=go(),s===e&&(s=ho(),s===e&&(s=po(),s===e&&(s=vo(),s===e&&(s=yo(),s===e&&(s=wo(),s===e&&(s=xr(),s===e&&(s=Sa(),s===e&&(s=Te()))))))))))),T[o]={nextPos:a,result:s},s)}function Te(){var s,o=a*77+10,p=T[o];return p?(a=p.nextPos,p.result):(s=mo(),s===e&&(s=us()),T[o]={nextPos:a,result:s},s)}function us(){var s,o=a*77+11,p=T[o];return p?(a=p.nextPos,p.result):(s=bo(),s===e&&(s=Eo(),s===e&&(s=Fa(),s===e&&(s=Pa()))),T[o]={nextPos:a,result:s},s)}function Pa(){var s,o,p,u,g,v,m=a*77+12,w=T[m];if(w)return a=w.nextPos,w.result;if(s=Na(),s===e&&(s=Ta(),s===e&&(s=Ia(),s===e&&(s=qs(),s===e&&(s=En(),s===e&&(s=La(),s===e&&(s=Ha(),s===e&&(s=Fn(),s===e&&(s=Ua(),s===e&&(s=Po(),s===e&&(s=$o(),s===e&&(s=ja(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Pt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e?(z=s,s=ol(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function $r(){var s,o=a*77+13,p=T[o];return p?(a=p.nextPos,p.result):(s=La(),s===e&&(s=En(),s===e&&(s=Ha(),s===e&&(s=Mo(),s===e&&(s=So(),s===e&&(s=Fn()))))),T[o]={nextPos:a,result:s},s)}function Ea(){var s,o,p,u,g,v,m,w,_,P,I=a*77+14,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===j?(o=j,a+=2):(o=e,A===0&&M(sr)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(t.charCodeAt(a)===123?(v=D,a++):(v=e,A===0&&M(Ye)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=bn(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();t.charCodeAt(a)===125?(P=V,a++):(P=e,A===0&&M(Bt)),P!==e?(z=s,s=ul(u,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function fo(){var s,o,p,u,g,v,m=a*77+15,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===pe?(o=pe,a+=3):(o=e,A===0&&M(Ir)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Ue(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=$r(),v!==e?(z=s,s=fl(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===pe?(o=pe,a+=3):(o=e,A===0&&M(Ir)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();u=$r(),u!==e?(z=s,s=cl(u)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ma(){var s,o,p,u,g,v,m,w,_,P=a*77+16,I=T[P];if(I)return a=I.nextPos,I.result;if(s=a,t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ae,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=_e,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=hl(u,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===H?(o=H,a+=3):(o=e,A===0&&M(Pi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ae,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=_e,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=pl(u,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[P]={nextPos:a,result:s},s}function co(){var s,o,p,u,g=a*77+17,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===L?(o=L,a+=2):(o=e,A===0&&M(Ei)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();u=Te(),u!==e?(z=s,s=vl(u)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ho(){var s,o,p,u,g,v,m,w=a*77+18,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,2)===B?(o=B,a+=2):(o=e,A===0&&M(ks)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Ue(),u!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();for(m=$r(),m!==e?g=m:(a=g,g=e),g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();t.charCodeAt(a)===93?(m=q,a++):(m=e,A===0&&M(as)),m!==e?(z=s,s=gl(u,g)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function po(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+19,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.substr(a,4)===J?(o=J,a+=4):(o=e,A===0&&M(mt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();for(t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e)if(t.charCodeAt(a)===41?(R=F,a++):(R=e,A===0&&M(mr)),R!==e){for(Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();ye=xe(),ye!==e?(z=s,s=dl(m,I,ye)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===J?(o=J,a+=4):(o=e,A===0&&M(mt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(P=Te(),P!==e){if(I=[],R=f(),R!==e)for(;R!==e;)I.push(R),R=f();else I=e;I!==e?(R=xe(),R!==e?(z=s,s=yl(v,P,R)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function vo(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke=a*77+20,Je=T[Ke];if(Je)return a=Je.nextPos,Je.result;if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=a,t.charCodeAt(a)===61?(P=_e,a++):(P=e,A===0&&M(ns)),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();R=Te(),R!==e?(z=_,_=wl(m,R)):(a=_,_=e)}else a=_,_=e;for(_===e&&(_=null),t.charCodeAt(a)===44?(P=G,a++):(P=e,A===0&&M(pt)),P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();if(R=Te(),R!==e)if(t.charCodeAt(a)===41?(Z=F,a++):(Z=e,A===0&&M(mr)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=xe(),re!==e?(z=s,s=ml(m,_,R,re)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(_=_e,a++):(_=e,A===0&&M(ns)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=Te(),I!==e?(z=w,w=$l(v,I)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e){if(R=[],Z=f(),Z!==e)for(;Z!==e;)R.push(Z),Z=f();else R=e;R!==e?(Z=xe(),Z!==e?(z=s,s=xl(v,w,I,Z)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Pt)),u!==e)if(g=Te(),g!==e)if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=xe(),w!==e?(z=s,s=bl(g,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===Q?(o=Q,a+=3):(o=e,A===0&&M(Ps)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;g!==e?(v=xe(),v!==e?(z=s,s=Al(u,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return T[Ke]={nextPos:a,result:s},s}function go(){var s,o,p,u,g,v=a*77+21,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,6)===X?(o=X,a+=6):(o=e,A===0&&M(or)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();g=Te(),g!==e?(z=s,s=Cl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function yo(){var s,o,p,u,g,v,m,w,_=a*77+22,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===$e?(o=$e,a+=4):(o=e,A===0&&M(Mi)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Bt)),w!==e?(z=s,s=_l(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function wo(){var s,o,p,u,g=a*77+23,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===ke?(o=ke,a+=5):(o=e,A===0&&M(Si)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=kl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function xr(){var s,o,p,u,g=a*77+24,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===ge?(o=ge,a+=8):(o=e,A===0&&M(Fi)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=aa()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sa(){var s,o,p,u,g,v,m=a*77+25,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.substr(a,2)===qe?(u=qe,a+=2):(u=e,A===0&&M(Oi)),u===e&&(t.substr(a,2)===it?(u=it,a+=2):(u=e,A===0&&M(Jn)),u===e&&(t.charCodeAt(a)===61?(u=_e,a++):(u=e,A===0&&M(ns)))),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=Te(),v!==e?(z=s,s=Pl(o,u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function mo(){var s,o,p,u,g,v,m,w,_=a*77+26,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=us(),o!==e){for(p=[],u=a,g=[],v=br();v!==e;)g.push(v),v=br();if(v=An(),v!==e){for(m=[],w=br();w!==e;)m.push(w),w=br();w=us(),w!==e?(z=u,u=ia(o,v,w)):(a=u,u=e)}else a=u,u=e;if(u!==e)for(;u!==e;){for(p.push(u),u=a,g=[],v=br();v!==e;)g.push(v),v=br();if(v=An(),v!==e){for(m=[],w=br();w!==e;)m.push(w),w=br();w=us(),w!==e?(z=u,u=ia(o,v,w)):(a=u,u=e)}else a=u,u=e}else p=e;p!==e?(z=s,s=El(o,p)):(a=s,s=e)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function br(){var s,o,p,u=a*77+27,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(o=Zt,a++):(o=e,A===0&&M(Zn)),o!==e?(p=ne(),p!==e?(o=[o,p],s=o):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),T[u]={nextPos:a,result:s},s)}function An(){var s,o,p=a*77+28,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===lt?(o=lt,a+=2):(o=e,A===0&&M(Ni)),o===e&&(t.substr(a,2)===ot?(o=ot,a+=2):(o=e,A===0&&M(Ti)),o===e&&(t.substr(a,2)===Ie?(o=Ie,a+=2):(o=e,A===0&&M(Ii)),o===e&&(t.substr(a,2)===at?(o=at,a+=2):(o=e,A===0&&M(ji)),o===e&&(t.substr(a,2)===Mt?(o=Mt,a+=2):(o=e,A===0&&M(Ri)),o===e&&(t.substr(a,2)===St?(o=St,a+=2):(o=e,A===0&&M(Gn)),o===e&&(t.charCodeAt(a)===60?(o=Qe,a++):(o=e,A===0&&M(gn)),o===e&&(t.charCodeAt(a)===62?(o=Fr,a++):(o=e,A===0&&M(Qn)),o===e&&(t.charCodeAt(a)===43?(o=Dt,a++):(o=e,A===0&&M(Di)),o===e&&(t.charCodeAt(a)===45?(o=yr,a++):(o=e,A===0&&M(Xn)),o===e&&(t.charCodeAt(a)===42?(o=kt,a++):(o=e,A===0&&M(Yn)),o===e&&(t.charCodeAt(a)===94?(o=dr,a++):(o=e,A===0&&M(Li)),o===e&&(t.charCodeAt(a)===47?(o=Or,a++):(o=e,A===0&&M(Bi)),o===e&&(t.charCodeAt(a)===37?(o=_r,a++):(o=e,A===0&&M(Hi))))))))))))))),o!==e&&(z=s,o=Ml()),s=o,T[p]={nextPos:a,result:s},s)}function $o(){var s,o,p,u=a*77+29,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===33?(o=Er,a++):(o=e,A===0&&M(dn)),o!==e?(p=Te(),p!==e?(z=s,s=Sl(p)):(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function Fa(){var s,o,p,u,g=a*77+30,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,o=Pa(),o!==e){if(p=[],u=Cn(),u===e&&(u=Oa(),u===e&&(u=Us())),u!==e)for(;u!==e;)p.push(u),u=Cn(),u===e&&(u=Oa(),u===e&&(u=Us()));else p=e;p!==e?(z=s,s=la(o,p)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function Cn(){var s,o,p,u,g,v,m=a*77+31,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Pt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=xo(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e?(z=s,s=Fl(u)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function xo(){var s,o,p,u,g,v,m=a*77+32,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=Te(),v!==e?(z=u,u=oa(o,v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=Te(),v!==e?(z=u,u=oa(o,v)):(a=u,u=e)):(a=u,u=e);z=s,s=Ol(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Oa(){var s,o,p,u,g,v,m=a*77+33,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Nl(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Us(){var s,o,p,u=a*77+34,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===46?(o=U,a++):(o=e,A===0&&M(yn)),o!==e?(p=Ue(),p!==e?(z=s,s=Tl(p)):(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function bo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+35,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===K?(o=K,a+=2):(o=e,A===0&&M(Ui)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=xe(),v!==e){if(m=a,w=[],_=f(),_!==e)for(;_!==e;)w.push(_),_=f();else w=e;if(w!==e?(_=Ao(),_!==e?m=_:(a=m,m=e)):(a=m,m=e),m===e&&(m=null),w=a,_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;_!==e?(P=Co(),P!==e?w=P:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),z=s,s=Il(u,v,m,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Ao(){var s,o,p,u,g,v,m=a*77+36,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=_n(),o!==e){for(p=[],u=a,g=[],v=f();v!==e;)g.push(v),v=f();for(v=_n(),v!==e?u=v:(a=u,u=e);u!==e;){for(p.push(u),u=a,g=[],v=f();v!==e;)g.push(v),v=f();v=_n(),v!==e?u=v:(a=u,u=e)}z=s,s=jl(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function _n(){var s,o,p,u,g,v,m,w=a*77+37,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,4)===te?(o=te,a+=4):(o=e,A===0&&M(qi)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=xe(),m!==e?(z=s,s=ua(g,m)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[w]={nextPos:a,result:s},s}function Co(){var s,o,p,u,g,v=a*77+38,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,4)===ce?(o=ce,a+=4):(o=e,A===0&&M(zi)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();g=xe(),g!==e?(z=s,s=Rl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function Na(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,Nn=a*77+39,fs=T[Nn];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.substr(a,5)===he?(o=he,a+=5):(o=e,A===0&&M(Es)),o!==e)if(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===123?(m=D,a++):(m=e,A===0&&M(Ye)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=[],P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;if(P!==e)for(;P!==e;)if(_.push(P),P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;else _=e;if(_!==e){if(P=a,t.charCodeAt(a)===42?(I=kt,a++):(I=e,A===0&&M(Yn)),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===ie?(Z=ie,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=xe(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();P=re}else a=P,P=e}else a=P,P=e}else a=P,P=e;for(P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();t.charCodeAt(a)===125?(R=V,a++):(R=e,A===0&&M(Bt)),R!==e?(z=s,s=Dl(g,_,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[Nn]={nextPos:a,result:s},s}function Ta(){var s,o,p,u,g,v,m,w,_=a*77+40,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===Ne?(o=Ne,a+=4):(o=e,A===0&&M(Ss)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Bt)),w!==e?(z=s,s=Ll(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ia(){var s,o,p,u,g=a*77+41,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===de?(o=de,a+=6):(o=e,A===0&&M(Wi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;p!==e?(u=ja(),u!==e?(z=s,s=Bl(u)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ja(){var s,o,p=a*77+42,u=T[p];return u?(a=u.nextPos,u.result):(s=a,o=za(),o!==e&&(z=s,o=ca(o)),s=o,T[p]={nextPos:a,result:s},s)}function qs(){var s,o,p,u,g,v,m=a*77+43,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(o=we,a++):(o=e,A===0&&M(Fs)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===96?(u=we,a++):(u=e,A===0&&M(Fs)),u!==e?(z=s,s=Hl(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function kn(){var s,o,p,u,g,v,m=a*77+44,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Te(),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Bt)),v!==e?s=u:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,o=[],p=Pn(),p!==e)for(;p!==e;)o.push(p),p=Pn();else o=e;o!==e&&(z=s,o=ha(o)),s=o}return T[m]={nextPos:a,result:s},s}function Pn(){var s,o=a*77+45,p=T[o];return p?(a=p.nextPos,p.result):(s=Ra(),s===e&&(_s.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Os))),T[o]={nextPos:a,result:s},s)}function Ra(){var s,o,p,u=a*77+46,g=T[u];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(o=Zt,a++):(o=e,A===0&&M(Zn)),o!==e?(Wr.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,A===0&&M(Ns)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),T[u]={nextPos:a,result:s},s)}function En(){var s,o,p,u,g,v,m=a*77+47,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(o=ue,a++):(o=e,A===0&&M(Ts)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===34?(v=ue,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=pa(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===34?(v=ue,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=pa(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===34?(u=ue,a++):(u=e,A===0&&M(Ts)),u!==e?(z=s,s=Ul(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(o=De,a++):(o=e,A===0&&M(Is)),o!==e){for(p=[],u=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=va(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=u,u=va(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===39?(u=De,a++):(u=e,A===0&&M(Is)),u!==e?(z=s,s=ql(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Da(){var s,o,p=a*77+48,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===je?(o=je,a+=2):(o=e,A===0&&M(js)),o!==e&&(z=s,o=zl()),s=o,T[p]={nextPos:a,result:s},s)}function Mn(){var s,o,p=a*77+49,u=T[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Be?(o=Be,a+=2):(o=e,A===0&&M(ea)),o!==e&&(z=s,o=Wl()),s=o,T[p]={nextPos:a,result:s},s)}function La(){var s,o=a*77+50,p=T[o];return p?(a=p.nextPos,p.result):(s=_o(),s===e&&(s=Ba()),T[o]={nextPos:a,result:s},s)}function _o(){var s,o,p,u,g,v,m=a*77+51,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),ht.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ta)),o!==e){if(p=[],It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)for(;u!==e;)p.push(u),It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(u=U,a++):(u=e,A===0&&M(yn)),u!==e){if(g=[],It.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr)),v!==e)for(;v!==e;)g.push(v),It.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr));else g=e;g!==e?(z=s,s=Vl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),It.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)if(t.charCodeAt(a)===46?(p=U,a++):(p=e,A===0&&M(yn)),p!==e){if(u=[],It.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr)),g!==e)for(;g!==e;)u.push(g),It.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr));else u=e;u!==e?(z=s,s=Kl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ba(){var s,o,p,u,g=a*77+52,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),ht.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ta)),o!==e){if(p=[],It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)for(;u!==e;)p.push(u),It.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr));else p=e;p!==e?(z=s,s=Jl()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Et),It.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e?(z=s,s=Zl()):(a=s,s=e)),T[g]={nextPos:a,result:s},s}function Ha(){var s,o=a*77+53,p=T[o];return p?(a=p.nextPos,p.result):(s=ko(),s===e&&(s=Sn()),T[o]={nextPos:a,result:s},s)}function ko(){var s,o,p,u,g=a*77+54,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(o=We,a+=4):(o=e,A===0&&M(Vi)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=ga()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sn(){var s,o,p,u,g=a*77+55,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(o=Ze,a+=5):(o=e,A===0&&M(Rs)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=Gl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Fn(){var s,o,p,u,g=a*77+56,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===rt?(o=rt,a+=4):(o=e,A===0&&M(Ki)),o!==e?(p=a,A++,Gt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ur)),A--,u===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=da()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Ua(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+57,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Bt)),g!==e?(z=s,s=Ql(u)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function Po(){var s,o,p,u,g,v,m,w,_,P,I=a*77+58,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Xl(u)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function On(){var s,o,p,u,g,v,m,w=a*77+59,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,o=Ue(),o!==e){for(p=a,u=[],g=f();g!==e;)u.push(g),g=f();if(t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=He(),m!==e?p=m:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),z=s,s=Yl(o,p)}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function qa(){var s,o,p,u,g,v,m=a*77+60,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=On(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);z=s,s=ma(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ut(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,Nn=a*77+61,fs=T[Nn];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.charCodeAt(a)===64?(o=wt,a++):(o=e,A===0&&M(Ji)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Ue(),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(t.charCodeAt(a)===40?(v=E,a++):(v=e,A===0&&M(Pt)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=qa(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(t.charCodeAt(a)===41?(P=F,a++):(P=e,A===0&&M(mr)),P!==e){for(I=a,R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===58?(Z=ae,a++):(Z=e,A===0&&M(yt)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=He(),re!==e?I=re:(a=I,I=e)}else a=I,I=e;for(I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===123?(Z=D,a++):(Z=e,A===0&&M(Ye)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();for(re=fr(),re===e&&(re=null),Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();t.charCodeAt(a)===125?(Je=V,a++):(Je=e,A===0&&M(Bt)),Je!==e?(z=s,s=eo(p,u,g,w,I,re)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[Nn]={nextPos:a,result:s},s}function Eo(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=a*77+62,re=T[ye];if(re)return a=re.nextPos,re.result;if(s=a,t.substr(a,2)===Lt?(o=Lt,a+=2):(o=e,A===0&&M(wn)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=qa(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=a,w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===58?(_=ae,a++):(_=e,A===0&&M(yt)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=He(),I!==e?m=I:(a=m,m=e)}else a=m,m=e;for(m===e&&(m=null),w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===123?(_=D,a++):(_=e,A===0&&M(Ye)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();for(I=fr(),I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();t.charCodeAt(a)===125?(Z=V,a++):(Z=e,A===0&&M(Bt)),Z!==e?(z=s,s=$a(u,m,I)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[ye]={nextPos:a,result:s},s}function Mo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+63,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(o=Ft,a++):(o=e,A===0&&M(is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=$r(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=$r(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=to(u)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function So(){var s,o,p,u,g,v,m,w,_,P,I,R,Z,ye,re=a*77+64,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=$r(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(u.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ae,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=$r(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Bt)),g!==e?(z=s,s=ro(u)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function He(){var s,o=a*77+65,p=T[o];return p?(a=p.nextPos,p.result):(s=Fo(),s===e&&(s=Tt()),T[o]={nextPos:a,result:s},s)}function Fo(){var s,o,p,u,g,v,m,w,_,P,I=a*77+66,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===Lt?(o=Lt,a+=2):(o=e,A===0&&M(wn)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Lr(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M(mr)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.substr(a,2)===ie?(w=ie,a+=2):(w=e,A===0&&M(Ms)),w!==e){for(_=[],P=f();P!==e;)_.push(P),P=f();P=He(),P!==e?(z=s,s=so(u,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Lr(){var s,o,p,u,g,v,m=a*77+67,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=He(),o!==e){for(p=[],u=a,g=x(),g!==e?(v=He(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,g=x(),g!==e?(v=He(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);z=s,s=no(o,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Tt(){var s,o,p,u,g,v,m,w,_=a*77+68,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,o=Ue(),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(t.charCodeAt(a)===60?(u=Qe,a++):(u=e,A===0&&M(gn)),u!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(v=He(),v!==e){for(m=[],w=y();w!==e;)m.push(w),w=y();t.charCodeAt(a)===62?(w=Fr,a++):(w=e,A===0&&M(Qn)),w!==e?(z=s,s=ao(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,o=Ue(),o!==e&&(z=s,o=io(o)),s=o),T[_]={nextPos:a,result:s},s}function Ue(){var s,o,p,u,g=a*77+69,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Vn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(Zi)),o!==e){for(p=[],Kn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ra));u!==e;)p.push(u),Kn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ra));z=s,s=i()}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function za(){var s,o,p,u,g,v,m=a*77+70,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,o=Ue(),o!==e){for(p=[],u=a,t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,t.charCodeAt(a)===58?(g=ae,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],u=g):(a=u,u=e)):(a=u,u=e);z=s,s=W()}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function x(){var s,o,p,u,g,v=a*77+71,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();if(t.charCodeAt(a)===44?(p=G,a++):(p=e,A===0&&M(pt)),p!==e){for(u=[],g=f();g!==e;)u.push(g),g=f();o=[o,p,u],s=o}else a=s,s=e;if(s===e)if(s=[],o=f(),o!==e)for(;o!==e;)s.push(o),o=f();else s=e;return T[v]={nextPos:a,result:s},s}function xe(){var s,o,p,u,g,v,m=a*77+72,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=fr(),u===e&&(u=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Bt)),v!==e?(z=s,s=Ds(u)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Dr()),T[m]={nextPos:a,result:s},s}function ne(){var s,o=a*77+73,p=T[o];return p?(a=p.nextPos,p.result):(t.substr(a,2)===xt?(s=xt,a+=2):(s=e,A===0&&M(Gi)),s===e&&(Ci.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Qi))),T[o]={nextPos:a,result:s},s)}function l(){var s,o,p=a*77+74,u=T[p];return u?(a=u.nextPos,u.result):(s=a,A++,t.length>a?(o=t.charAt(a),a++):(o=e,A===0&&M(rr)),A--,o===e?s=void 0:(a=s,s=e),s===e&&(s=ne()),T[p]={nextPos:a,result:s},s)}function f(){var s,o=a*77+75,p=T[o];return p?(a=p.nextPos,p.result):(_i.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Xi)),T[o]={nextPos:a,result:s},s)}function y(){var s,o=a*77+76,p=T[o];return p?(a=p.nextPos,p.result):(tr.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Yi)),T[o]={nextPos:a,result:s},s)}function c(s,o,p){const u={type:s};o.children=p;for(const v of Object.keys(o))o[v]!==void 0&&(u[v]=o[v]);const g=Ht();return u.loc={start:g.start.offset,end:g.end.offset-1},u}if(Ls=d(),Ls!==e&&a===t.length)return Ls;throw Ls!==e&&a<t.length&&M(S()),oo(jr,O<t.length?t.charAt(O):null,O<t.length?Hs(O,O+1):Hs(O,O))}const O$=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function N$(t){return O$.includes(t.type)}function Wg(t){return"chain"in t&&t.chain!==null}function T$(t,r,e){return{type:"call",target:t,args:r,loc:e}}function I$(t,r,e){return{type:"index",target:t,index:r,loc:e}}function j$(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function tt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=tt(e.expr,r);break}case"return":{e.expr=tt(e.expr,r);break}case"each":{e.items=tt(e.items,r),e.for=tt(e.for,r);break}case"for":{e.from!=null&&(e.from=tt(e.from,r)),e.to!=null&&(e.to=tt(e.to,r)),e.times!=null&&(e.times=tt(e.times,r)),e.for=tt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=tt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=tt(e.expr,r),e.dest=tt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=tt(e.operands[n],r);break}case"not":{e.expr=tt(e.expr,r);break}case"if":{e.cond=tt(e.cond,r),e.then=tt(e.then,r);for(const n of e.elseif)n.cond=tt(n.cond,r),n.then=tt(n.then,r);e.else!=null&&(e.else=tt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=tt(e.children[n],r);break}case"match":{e.about=tt(e.about,r);for(const n of e.qs)n.q=tt(n.q,r),n.a=tt(n.a,r);e.default!=null&&(e.default=tt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=tt(e.statements[n],r);break}case"exists":{e.identifier=tt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=tt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],tt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=tt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=tt(e.args[n],r);break}case"indexChain":{e.index=tt(e.index,r);break}case"call":{e.target=tt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=tt(e.args[n],r);break}case"index":{e.target=tt(e.target,r),e.index=tt(e.index,r);break}case"prop":{e.target=tt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=tt(e.members[n],r);break}case"or":case"and":{e.left=tt(e.left,r),e.right=tt(e.right,r);break}}if(Wg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=tt(e.chain[n],r);return e}const Lc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Bc(t){throw new nu(`Reserved word "${t}" cannot be used as variable name.`)}function R$(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Lc.includes(t.name)&&Bc(t.name);break}case"meta":{t.name!=null&&Lc.includes(t.name)&&Bc(t.name);break}case"fn":{for(const r of t.args)Lc.includes(r.name)&&Bc(r.name);break}}return t}function D$(t){for(const r of t)tt(r,R$);return t}function yv(t){return{type:"simple",name:t}}function L$(t,r){return{type:"generic",name:t,inners:r}}function B$(t,r){return{type:"fn",args:t,result:r}}function If(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=If(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>If(n)).join(", "),e=If(t.result);return`@(${r}) { ${e} }`}}}function ku(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return yv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=ku(t.inner):r=yv("any"),L$(t.name,[r])}}throw new nu(`Unknown type: '${If(t)}'`)}else{const r=t.args.map(e=>ku(e));return B$(r,ku(t.result))}}function H$(t){switch(t.type){case"def":{t.varType!=null&&ku(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&ku(r.argType);t.retType!=null&&ku(t.retType);break}}return t}function U$(t){for(const r of t)tt(r,H$);return t}function jf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=jf(n.expr.children)),r.push(n);else{if(e.length>0)throw new nu("invalid attribute.");switch(n.type){case"fn":{n.children=jf(n.children);break}case"block":{n.statements=jf(n.statements);break}}r.push(n)}if(e.length>0)throw new nu("invalid attribute.");return r}function q$(t){if(N$(t)&&Wg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=T$(n,h.args,h.loc);break}case"indexChain":{n=I$(n,h.index,h.loc);break}case"propChain":{n=j$(n,h.name,h.loc);break}}return n}return t}function z$(t){for(let r=0;r<t.length;r++)t[r]=tt(t[r],q$);return t}function Rf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Rf(t,r,e);{const{left:n,right:h,info:d}=t;return Rf(n,Vg(h,r,e),d)}}function Uo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Uo(t.left),Uo(t.right)]}}const W$={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Uo(t.left),right:Uo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Uo(t.left),right:Uo(t.right)}),priority:3}};function V$(t){const r=t.operators.map(n=>{const h=W$[n];if(h==null)throw new nu(`No such operator: ${n}.`);return h});let e=Rf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Vg(e,t.operands[2+n],r[1+n]);return Uo(e)}function K$(t){for(let r=0;r<t.length;r++)t[r]=tt(t[r],e=>e.type==="infix"?V$(e):e);return t}var Ja;let J$=(Ja=class{constructor(){me(this,"plugins");this.plugins={validate:[D$,U$],transform:[jf,z$,K$]}}static parse(r){return Ja.instance==null&&(Ja.instance=new Ja),Ja.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=dv(r,{startRule:"Preprocess"});e=dv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new nu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new nu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Ja,"instance"),Ja);const Z$="0.16.0",G$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Ch=[],qu=null;function Q$(t){return Ch=J$.parse(t),JSON.stringify(Ch,null,"	")}async function X$(t){qu==null||qu.abort(),qu=new ss({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:xh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:xh(e.val,!0),print:!1});break}}});try{await qu.exec(Ch)}catch(r){t.err(r)}}const Y$=Object.freeze(Object.defineProperty({__proto__:null,exec:X$,parse:Q$,samples:G$,version:Z$},Symbol.toStringTag,{value:"Module"}));function Df(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Df=function(e){return typeof e}:Df=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Df(t)}function Kg(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Df(n)));var h=!1;return{configurable:!0,get:function(){if(h||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var $=n.bind(this);return h=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return $},set:function(k){n=k,delete this[r]}}),h=!1,$},set:function($){n=$}}}function ex(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,Kg(t,e,n))}}),t}function ct(){return arguments.length===1?ex.apply(void 0,arguments):Kg.apply(void 0,arguments)}let Jg=class Zg extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Zg)}},au=class extends Jg{constructor(r,e){super(r,e)}},Yt=class extends Jg{constructor(r,e){super(r,e)}},tx=class extends Yt{constructor(r,e){super(r,e)}};var uu=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Ai=class Gg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Gg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Yt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Yt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Yt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};uu([ct],Ai.prototype,"log",null);uu([ct],Ai.prototype,"onUpdated",null);uu([ct],Ai.prototype,"createChildScope",null);uu([ct],Ai.prototype,"get",null);uu([ct],Ai.prototype,"getAll",null);uu([ct],Ai.prototype,"add",null);uu([ct],Ai.prototype,"assign",null);let _f;const rx=new Uint8Array(16);function sx(){if(!_f&&(_f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _f(rx)}const Hr=[];for(let t=0;t<256;++t)Hr.push((t+256).toString(16).slice(1));function nx(t,r=0){return(Hr[t[r+0]]+Hr[t[r+1]]+Hr[t[r+2]]+Hr[t[r+3]]+"-"+Hr[t[r+4]]+Hr[t[r+5]]+"-"+Hr[t[r+6]]+Hr[t[r+7]]+"-"+Hr[t[r+8]]+Hr[t[r+9]]+"-"+Hr[t[r+10]]+Hr[t[r+11]]+Hr[t[r+12]]+Hr[t[r+13]]+Hr[t[r+14]]+Hr[t[r+15]]).toLowerCase()}const ax=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wv={randomUUID:ax};function ix(t,r,e){if(wv.randomUUID&&!r&&!t)return wv.randomUUID();t=t||{};const n=t.random||(t.rng||sx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return nx(n)}const jt={type:"null"},un={type:"bool",value:!0},Js={type:"bool",value:!1},Oe=t=>({type:"num",value:t}),Qt=t=>({type:"str",value:t}),Pu=t=>({type:"bool",value:t}),hp=t=>({type:"obj",value:t}),Zr=t=>({type:"arr",value:t}),lx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ve=t=>({type:"fn",native:t}),ox=t=>({type:"return",value:t}),ux=()=>({type:"break",value:null}),fx=()=>({type:"continue",value:null}),cx=t=>t.type==="return"?t.value:t;function Ys(t){if(t==null)throw new Yt("Expect anything, but got nothing.")}function gs(t){if(t==null)throw new Yt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Yt(`Expect boolean, but got ${t.type}.`)}function pi(t){if(t==null)throw new Yt("Expect function, but got nothing.");if(t.type!=="fn")throw new Yt(`Expect function, but got ${t.type}.`)}function Nr(t){if(t==null)throw new Yt("Expect string, but got nothing.");if(t.type!=="str")throw new Yt(`Expect string, but got ${t.type}.`)}function Pe(t){if(t==null)throw new Yt("Expect number, but got nothing.");if(t.type!=="num")throw new Yt(`Expect number, but got ${t.type}.`)}function ii(t){if(t==null)throw new Yt("Expect object, but got nothing.");if(t.type!=="obj")throw new Yt(`Expect object, but got ${t.type}.`)}function Eu(t){if(t==null)throw new Yt("Expect array, but got nothing.");if(t.type!=="arr")throw new Yt(`Expect array, but got ${t.type}.`)}function hx(t){return t.type==="str"}function px(t){return t.type==="num"}function vx(t){return t.type==="obj"}function gx(t){return t.type==="arr"}function _h(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function kh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>kh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ph(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ph(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Ph(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Eh(t){if(t===null)return jt;if(typeof t=="boolean")return Pu(t);if(typeof t=="string")return Qt(t);if(typeof t=="number")return Oe(t);if(Array.isArray(t))return Zr(t.map(r=>Eh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Eh(n));return hp(r)}return jt}const dx={help:Qt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Qt("0.14.1"),"Core:ai":Qt("kawaii"),"Core:not":ve(([t])=>(gs(t),t.value?Js:un)),"Core:eq":ve(([t,r])=>(Ys(t),Ys(r),_h(t,r)?un:Js)),"Core:neq":ve(([t,r])=>(Ys(t),Ys(r),_h(t,r)?Js:un)),"Core:and":ve(([t,r])=>(gs(t),t.value?(gs(r),r.value?un:Js):Js)),"Core:or":ve(([t,r])=>(gs(t),t.value?un:(gs(r),r.value?un:Js))),"Core:add":ve(([t,r])=>(Pe(t),Pe(r),Oe(t.value+r.value))),"Core:sub":ve(([t,r])=>(Pe(t),Pe(r),Oe(t.value-r.value))),"Core:mul":ve(([t,r])=>(Pe(t),Pe(r),Oe(t.value*r.value))),"Core:pow":ve(([t,r])=>{Pe(t),Pe(r);const e=t.value**r.value;if(isNaN(e))throw new Yt("Invalid operation.");return Oe(e)}),"Core:div":ve(([t,r])=>{Pe(t),Pe(r);const e=t.value/r.value;if(isNaN(e))throw new Yt("Invalid operation.");return Oe(e)}),"Core:mod":ve(([t,r])=>(Pe(t),Pe(r),Oe(t.value%r.value))),"Core:gt":ve(([t,r])=>(Pe(t),Pe(r),t.value>r.value?un:Js)),"Core:lt":ve(([t,r])=>(Pe(t),Pe(r),t.value<r.value?un:Js)),"Core:gteq":ve(([t,r])=>(Pe(t),Pe(r),t.value>=r.value?un:Js)),"Core:lteq":ve(([t,r])=>(Pe(t),Pe(r),t.value<=r.value?un:Js)),"Core:type":ve(([t])=>(Ys(t),Qt(t.type))),"Core:to_str":ve(([t])=>(Ys(t),t.type==="str"?t:t.type==="num"?Qt(t.value.toString()):Qt("?"))),"Core:range":ve(([t,r])=>(Pe(t),Pe(r),t.value<r.value?Zr(Array.from({length:r.value-t.value+1},(e,n)=>Oe(n+t.value))):t.value>r.value?Zr(Array.from({length:t.value-r.value+1},(e,n)=>Oe(t.value-n))):Zr([t]))),"Util:uuid":ve(()=>Qt(ix())),"Json:stringify":ve(([t])=>(Ys(t),Qt(JSON.stringify(Ph(t))))),"Json:parse":ve(([t])=>(Nr(t),Eh(JSON.parse(t.value)))),"Json:parsable":ve(([t])=>{Nr(t);try{JSON.parse(t.value)}catch{return Pu(!1)}return Pu(!0)}),"Date:now":ve(()=>Oe(Date.now())),"Date:year":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ve(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ve(([t])=>(Nr(t),Oe(new Date(t.value).getTime()))),"Math:Infinity":Oe(1/0),"Math:E":Oe(Math.E),"Math:LN2":Oe(Math.LN2),"Math:LN10":Oe(Math.LN10),"Math:LOG2E":Oe(Math.LOG2E),"Math:LOG10E":Oe(Math.LOG10E),"Math:PI":Oe(Math.PI),"Math:SQRT1_2":Oe(Math.SQRT1_2),"Math:SQRT2":Oe(Math.SQRT2),"Math:abs":ve(([t])=>(Pe(t),Oe(Math.abs(t.value)))),"Math:acos":ve(([t])=>(Pe(t),Oe(Math.acos(t.value)))),"Math:acosh":ve(([t])=>(Pe(t),Oe(Math.acosh(t.value)))),"Math:asin":ve(([t])=>(Pe(t),Oe(Math.asin(t.value)))),"Math:asinh":ve(([t])=>(Pe(t),Oe(Math.asinh(t.value)))),"Math:atan":ve(([t])=>(Pe(t),Oe(Math.atan(t.value)))),"Math:atanh":ve(([t])=>(Pe(t),Oe(Math.atanh(t.value)))),"Math:atan2":ve(([t,r])=>(Pe(t),Pe(r),Oe(Math.atan2(t.value,r.value)))),"Math:cbrt":ve(([t])=>(Pe(t),Oe(Math.cbrt(t.value)))),"Math:ceil":ve(([t])=>(Pe(t),Oe(Math.ceil(t.value)))),"Math:clz32":ve(([t])=>(Pe(t),Oe(Math.clz32(t.value)))),"Math:cos":ve(([t])=>(Pe(t),Oe(Math.cos(t.value)))),"Math:cosh":ve(([t])=>(Pe(t),Oe(Math.cosh(t.value)))),"Math:exp":ve(([t])=>(Pe(t),Oe(Math.exp(t.value)))),"Math:expm1":ve(([t])=>(Pe(t),Oe(Math.expm1(t.value)))),"Math:floor":ve(([t])=>(Pe(t),Oe(Math.floor(t.value)))),"Math:fround":ve(([t])=>(Pe(t),Oe(Math.fround(t.value)))),"Math:hypot":ve(([t])=>{Eu(t);const r=[];for(const e of t.value)Pe(e),r.push(e.value);return Oe(Math.hypot(...r))}),"Math:imul":ve(([t,r])=>(Pe(t),Pe(r),Oe(Math.imul(t.value,r.value)))),"Math:log":ve(([t])=>(Pe(t),Oe(Math.log(t.value)))),"Math:log1p":ve(([t])=>(Pe(t),Oe(Math.log1p(t.value)))),"Math:log10":ve(([t])=>(Pe(t),Oe(Math.log10(t.value)))),"Math:log2":ve(([t])=>(Pe(t),Oe(Math.log2(t.value)))),"Math:max":ve(([t,r])=>(Pe(t),Pe(r),Oe(Math.max(t.value,r.value)))),"Math:min":ve(([t,r])=>(Pe(t),Pe(r),Oe(Math.min(t.value,r.value)))),"Math:pow":ve(([t,r])=>(Pe(t),Pe(r),Oe(Math.pow(t.value,r.value)))),"Math:round":ve(([t])=>(Pe(t),Oe(Math.round(t.value)))),"Math:sign":ve(([t])=>(Pe(t),Oe(Math.sign(t.value)))),"Math:sin":ve(([t])=>(Pe(t),Oe(Math.sin(t.value)))),"Math:sinh":ve(([t])=>(Pe(t),Oe(Math.sinh(t.value)))),"Math:sqrt":ve(([t])=>{Pe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Yt("Invalid operation.");return Oe(r)}),"Math:tan":ve(([t])=>(Pe(t),Oe(Math.tan(t.value)))),"Math:tanh":ve(([t])=>(Pe(t),Oe(Math.tanh(t.value)))),"Math:trunc":ve(([t])=>(Pe(t),Oe(Math.trunc(t.value)))),"Math:rnd":ve(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Oe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Oe(Math.random())),"Math:gen_rng":ve(([t])=>{if(Ys(t),t.type!=="num"&&t.type!=="str")return jt;const r=cf(t.value.toString());return ve(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Oe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Oe(r()))}),"Num:to_hex":ve(([t])=>(Pe(t),Qt(t.value.toString(16)))),"Num:from_hex":ve(([t])=>(Nr(t),Oe(parseInt(t.value,16)))),"Str:lf":Qt(`
`),"Str:lt":ve(([t,r])=>(Nr(t),Nr(r),t.value<r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:gt":ve(([t,r])=>(Nr(t),Nr(r),t.value>r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Obj:keys":ve(([t])=>(ii(t),Zr(Array.from(t.value.keys()).map(r=>Qt(r))))),"Obj:vals":ve(([t])=>(ii(t),Zr(Array.from(t.value.values())))),"Obj:kvs":ve(([t])=>(ii(t),Zr(Array.from(t.value.entries()).map(([r,e])=>Zr([Qt(r),e]))))),"Obj:get":ve(([t,r])=>(ii(t),Nr(r),t.value.get(r.value)??jt)),"Obj:set":ve(([t,r,e])=>(ii(t),Nr(r),Ys(e),t.value.set(r.value,e),jt)),"Obj:has":ve(([t,r])=>(ii(t),Nr(r),Pu(t.value.has(r.value)))),"Obj:copy":ve(([t])=>(ii(t),hp(new Map(t.value)))),"Async:interval":ve(async([t,r,e],n)=>{Pe(t),pi(r),e&&(gs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),ve(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":ve(async([t,r],e)=>{Pe(t),pi(r);const n=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),ve(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},vu={num:{to_str:t=>ve(async(r,e)=>Qt(t.value.toString()))},str:{to_num:t=>ve(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?jt:Oe(n)}),len:t=>Oe(hf(t.value)),replace:t=>ve(async([r,e],n)=>(Nr(r),Nr(e),Qt(t.value.split(r.value).join(e.value)))),index_of:t=>ve(async([r],e)=>(Nr(r),Oe(vf(t.value,r.value)))),incl:t=>ve(async([r],e)=>(Nr(r),t.value.includes(r.value)?un:Js)),trim:t=>ve(async(r,e)=>Qt(t.value.trim())),upper:t=>ve(async(r,e)=>Qt(t.value.toUpperCase())),lower:t=>ve(async(r,e)=>Qt(t.value.toLowerCase())),split:t=>ve(async([r],e)=>(r&&Nr(r),Zr(r?t.value.split(r?r.value:"").map(n=>Qt(n)):zn(t.value).map(n=>Qt(n))))),slice:t=>ve(async([r,e],n)=>(Pe(r),Pe(e),Qt(pf(t.value,r.value,e.value)))),pick:t=>ve(async([r],e)=>{Pe(r);const h=zn(t.value)[r.value];return h?Qt(h):jt})},arr:{len:t=>Oe(t.value.length),push:t=>ve(async([r],e)=>(Ys(r),t.value.push(r),t)),unshift:t=>ve(async([r],e)=>(Ys(r),t.value.unshift(r),t)),pop:t=>ve(async(r,e)=>t.value.pop()??jt),shift:t=>ve(async(r,e)=>t.value.shift()??jt),concat:t=>ve(async([r],e)=>(Eu(r),Zr(t.value.concat(r.value)))),slice:t=>ve(async([r,e],n)=>(Pe(r),Pe(e),Zr(t.value.slice(r.value,e.value)))),join:t=>ve(async([r],e)=>(r&&Nr(r),Qt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ve(async([r],e)=>{pi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Oe(d)]));return Zr(await Promise.all(n))}),filter:t=>ve(async([r],e)=>{pi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Oe(h)]);gs($),$.value&&n.push(d)}return Zr(n)}),reduce:t=>ve(async([r,e],n)=>{pi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Oe($)])}return d}),find:t=>ve(async([r],e)=>{pi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Oe(n)]);if(gs(d),d.value)return h}return jt}),incl:t=>ve(async([r],e)=>(Ys(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Js:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?un:Js)),reverse:t=>ve(async(r,e)=>(t.value.reverse(),jt)),copy:t=>ve(async(r,e)=>Zr([...t.value])),sort:t=>ve(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Pe(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return pi(r),Eu(t),t.value=await n(t.value,r),t})}};var rn=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Qg=300,yx=Qg-1;let As=class{constructor(r,e){me(this,"vars");me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);this.opts=e??{};const n={print:ve(([h])=>{Ys(h),this.opts.out&&this.opts.out(h)}),readline:ve(async h=>{const d=h[0];if(Nr(d),this.opts.in==null)return jt;const $=await this.opts.in(d.value);return Qt($)})};this.vars={...r,...dx,...n},this.scope=new Ai([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const h=await this._eval(n.expr,e);e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??jt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const h=r.scope.createChildScope(n);return cx(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return jt;if(this.stepCount%Qg===yx&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Yt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);pi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(gs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(gs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return jt}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(_h(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):jt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return jt}case"for":{if(r.times){const n=await this._eval(r.times,e);Pe(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Pe(n),Pe(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Oe(d)]])));if($.type==="break")break;if($.type==="return")return $}}return jt}case"each":{const n=await this._eval(r.items,e);Eu(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(d.type==="break")break;if(d.type==="return")return d}return jt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,n),jt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),jt}case"addAssign":{const n=await this._eval(r.dest,e);Pe(n);const h=await this._eval(r.expr,e);return Pe(h),await this.assign(e,r.dest,Oe(n.value+h.value)),jt}case"subAssign":{const n=await this._eval(r.dest,e);Pe(n);const h=await this._eval(r.expr,e);return Pe(h),await this.assign(e,r.dest,Oe(n.value-h.value)),jt}case"null":return jt;case"bool":return Pu(r.value);case"num":return Oe(r.value);case"str":return Qt(r.value);case"arr":return Zr(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return hp(n)}case"prop":{const n=await this._eval(r.target,e);if(vx(n))return n.value.has(r.name)?n.value.get(r.name):jt;if(px(n)){if(Object.hasOwn(vu.num,r.name))return vu.num[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else if(hx(n)){if(Object.hasOwn(vu.str,r.name))return vu.str[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else if(gx(n)){if(Object.hasOwn(vu.arr,r.name))return vu.arr[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else throw new Yt(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Eu(n);const h=await this._eval(r.index,e);Pe(h);const d=n.value[h.value];if(d===void 0)throw new tx(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return gs(n),Pu(!n.value)}case"fn":return lx(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);let $="";d.type==="str"?$=d.value:d.type==="num"&&($=d.value.toString()),n+=$}return Qt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),ox(n)}case"break":return this.log("block:break",{scope:e.name}),ux();case"continue":return this.log("block:continue",{scope:e.name}),fx();case"ns":return jt;case"meta":return jt;case"and":{const n=await this._eval(r.left,e);if(gs(n),n.value){const h=await this._eval(r.right,e);return gs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(gs(n),n.value)return n;{const h=await this._eval(r.right,e);return gs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=jt;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r);Eu(h);const d=await this._eval(e.index,r);Pe(d),h.value[d.value]=n}else if(e.type==="prop"){const h=await this._eval(e.target,r);ii(h),h.value.set(e.name,n)}else throw new Yt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};rn([ct],As.prototype,"exec",null);rn([ct],As.prototype,"execFn",null);rn([ct],As.prototype,"log",null);rn([ct],As.prototype,"collectNs",null);rn([ct],As.prototype,"collectNsMember",null);rn([ct],As.prototype,"_fn",null);rn([ct],As.prototype,"_eval",null);rn([ct],As.prototype,"_run",null);rn([ct],As.prototype,"registerAbortHandler",null);rn([ct],As.prototype,"unregisterAbortHandler",null);rn([ct],As.prototype,"abort",null);rn([ct],As.prototype,"assign",null);rn([ct],As,"collectMetadata",null);function wx(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Yo(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Yo.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}wx(Yo,Error);function Hc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Yo.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Hc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Hc("",h.column-1," ")+Hc("",j,"^")}else r+=`
 at `+$}return r};Yo.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function mv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:M,Main:_a},d=M,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ae=":",_e="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",ke="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ot="&&",Ie="==",at="!=",Mt="<=",St=">=",Qe="<",Fr=">",Dt="+",yr="-",kt="*",dr="^",Or="/",_r="%",Er="!",Ft="[",U=".",K="if",te="elif",ce="else",he="match",ie="=>",Ne="eval",de="`",we='"',ue="'",De='\\"',je="\\'",Be="true",We="false",Ze="null",rt=";",st="@",wt="@(",Lt=`\r
`,xt=/^[A-Z0-9_:]/i,Gt=/^[^`{]/,_s=/^[{}`]/,Wr=/^[+\-]/,Ot=/^[1-9]/,ht=/^[0-9]/,It=/^[A-Z_]/i,Vn=/^[A-Z0-9_]/i,Kn=/^[\r\n]/,Ci=/^[ \t\r\n]/,_i=/^[ \t]/,tr=lo(),rr=Y("//",!1),ki=Y("/*",!1),vn=Y("*/",!1),wr=Y("(",!1),Pt=Y(")",!1),mr=Y("::",!1),sr=Y("{",!1),Ye=Y("}",!1),Bt=Y("###",!1),Ir=Y("let",!1),dt=Y(":",!1),yt=Y("=",!1),ns=Y("var",!1),Pi=Y("<:",!1),Ei=Y("#[",!1),ks=Y("]",!1),as=Y("each",!1),mt=Y(",",!1),pt=Y("for",!1),Ps=Y("return",!1),or=Ht([["A","Z"],["0","9"],"_",":"],!1,!0),ur=Y("loop",!1),Mi=Y("break",!1),Si=Y("continue",!1),Fi=Y("+=",!1),Oi=Y("-=",!1),Jn=Y("\\",!1),Zn=Y("||",!1),Ni=Y("&&",!1),Ti=Y("==",!1),Ii=Y("!=",!1),ji=Y("<=",!1),Ri=Y(">=",!1),Gn=Y("<",!1),gn=Y(">",!1),Qn=Y("+",!1),Di=Y("-",!1),Xn=Y("*",!1),Yn=Y("^",!1),Li=Y("/",!1),Bi=Y("%",!1),Hi=Y("!",!1),dn=Y("[",!1),is=Y(".",!1),yn=Y("if",!1),Ui=Y("elif",!1),qi=Y("else",!1),zi=Y("match",!1),Es=Y("=>",!1),Ms=Y("eval",!1),Ss=Y("`",!1),Wi=Ht(["`","{"],!0,!1),Fs=Ht(["{","}","`"],!1,!1),Os=Y('"',!1),Ns=Y("'",!1),Ts=Y('\\"',!1),Is=Y("\\'",!1),js=Ht(["+","-"],!1,!1),ea=Ht([["1","9"]],!1,!1),Et=Ht([["0","9"]],!1,!1),ta=Y("true",!1),nr=Y("false",!1),Vi=Y("null",!1),Rs=Y(";",!1),Ki=Y("@",!1),ls=Y("@(",!1),Ji=Ht([["A","Z"],"_"],!1,!0),wn=Ht([["A","Z"],["0","9"],"_"],!1,!0),Zi=Y(`\r
`,!1),ra=Ht(["\r",`
`],!1,!1),Gi=Ht([" ","	","\r",`
`],!1,!1),Qi=Ht([" ","	"],!1,!1),Xi=function(l){return l.join("")},Yi=function(){return A()},el=function(){return A()},tl=function(){return""},rl=function(){return""},sl=function(l){return l??[]},sa=function(l,f){return f},nl=function(l,f){return[l,...f]},mn=function(l,f){return f},al=function(l,f){return[l,...f]},$n=function(l,f){return f},il=function(l,f){return[l,...f]},na=function(l){return l},ll=function(l,f){return ne("ns",{name:l,members:f})},ol=function(l,f){return ne("meta",{name:l,value:f})},ul=function(l){return ne("meta",{name:null,value:l})},fl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},cl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},hl=function(l){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[l]})]})},pl=function(l,f){return ne("attr",{name:l,value:f??ne("bool",{value:!0})})},vl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},gl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},dl=function(l,f){return f},yl=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},wl=function(l,f){return f},ml=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},$l=function(l,f){return ne("for",{times:l,for:f})},xl=function(l,f){return ne("for",{times:l,for:f})},bl=function(l){return ne("return",{expr:l})},Al=function(l){return ne("loop",{statements:l})},Cl=function(){return ne("break",{})},_l=function(){return ne("continue",{})},kl=function(l,f,y){return f==="+="?ne("addAssign",{dest:l,expr:y}):f==="-="?ne("subAssign",{dest:l,expr:y}):ne("assign",{dest:l,expr:y})},aa=function(l,f,y){return{op:f,term:y}},Pl=function(l,f){return ne("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ia=function(){return A()},El=function(l){return ne("not",{expr:l})},Ml=function(l,f){return{...l,chain:f}},Sl=function(l){return ne("callChain",{args:l??[]})},la=function(l,f){return f},Fl=function(l,f){return[l,...f]},oa=function(l){return ne("indexChain",{index:l})},Ol=function(l){return ne("propChain",{name:l})},Nl=function(l,f,y,c){return ne("if",{cond:l,then:f,elseif:y??[],else:c})},Tl=function(l,f){return[l,...f]},Il=function(l,f){return{cond:l,then:f}},jl=function(l){return l},ua=function(l,f,y){return{q:f,a:y}},Rl=function(l,f,y){return ne("match",{about:l,qs:f??[],default:y})},fa=function(l){return ne("block",{statements:l})},Dl=function(l){return ne("identifier",{name:l})},Ll=function(l){return ne("tmpl",{tmpl:l})},Bl=function(l){return l.join("")},ca=function(l){return l},Hl=function(l){return ne("str",{value:l.join("")})},ha=function(l){return l},pa=function(l){return ne("str",{value:l.join("")})},Ul=function(){return'"'},va=function(){return"'"},ql=function(){return ne("num",{value:parseFloat(A())})},zl=function(){return ne("num",{value:parseFloat(A())})},Wl=function(){return ne("num",{value:parseInt(A(),10)})},Vl=function(){return ne("num",{value:parseInt(A(),10)})},Kl=function(){return ne("bool",{value:!0})},Jl=function(){return ne("bool",{value:!1})},Zl=function(){return ne("null",{})},ga=function(l,f){return{k:l,v:f}},Gl=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},da=function(l){return l},ya=function(l){return ne("arr",{value:l})},Ql=function(l,f){return{name:l,argType:f}},wa=function(l,f){return[l,...f]},Xl=function(l,f,y,c,s,o){return(l.length>0||y.length>0)&&Ls("Cannot use spaces before or after the function name."),ne("def",{name:f,expr:ne("fn",{args:c??[],retType:s},o??[]),mut:!1,attr:[]})},Yl=function(l,f,y){return ne("fn",{args:l??[],retType:f},y??[])},ma=function(l){return l},eo=function(l){return ne("arr",{value:l})},$a=function(l,f){return{k:l,v:f}},xa=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},to=function(l,f){return ne("fnTypeSource",{args:l??[],result:f})},ba=function(l,f){return[l,...f]},ro=function(l,f){return ne("namedTypeSource",{name:l,inner:f})},so=function(l){return ne("namedTypeSource",{name:l,inner:null})},no=function(){return A()},ao=function(){return A()},io=function(l){return ne("block",{statements:l??[]})},i=0,W=0,Ds=[{line:1,column:1}],a=0,z=[],C=0,O={},jr;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function A(){return t.substring(W,i)}function T(){return Bs(W,i)}function Ls(l,f){throw f=f!==void 0?f:Bs(W,i),Aa(l,f)}function Y(l,f){return{type:"literal",text:l,ignoreCase:f}}function Ht(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function lo(){return{type:"any"}}function se(){return{type:"end"}}function Nt(l){var f=Ds[l],y;if(f)return f;for(y=l-1;!Ds[y];)y--;for(f=Ds[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ds[l]=f,f}function Bs(l,f,y){var c=Nt(l),s=Nt(f),o={source:n,start:{offset:l,line:c.line,column:c.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(o.start=n.offset(o.start),o.end=n.offset(o.end)),o}function S(l){i<a||(i>a&&(a=i,z=[]),z.push(l))}function Aa(l,f){return new Yo(l,null,null,f)}function Hs(l,f,y){return new Yo(Yo.buildMessage(l,f),l,f,y)}function M(){var l,f,y,c=i*76+0,s=O[c];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ca();y!==e;)f.push(y),y=Ca();return W=l,f=Xi(f),l=f,O[c]={nextPos:i,result:l},l}function Ca(){var l,f,y=i*76+1,c=O[y];return c?(i=c.nextPos,c.result):(l=i,f=Na(),f!==e&&(W=l,f=Yi()),l=f,l===e&&(l=i,f=qs(),f!==e&&(W=l,f=el()),l=f,l===e&&(l=oo(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,C===0&&S(tr))))),O[y]={nextPos:i,result:l},l)}function oo(){var l,f,y,c,s,o,p=i*76+2,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,C===0&&S(rr)),f!==e){for(y=[],c=i,s=i,C++,o=za(),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,o=za(),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=tl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===b?(f=b,i+=2):(f=e,C===0&&S(ki)),f!==e){for(y=[],c=i,s=i,C++,t.substr(i,2)===k?(o=k,i+=2):(o=e,C===0&&S(vn)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.substr(i,2)===k?(o=k,i+=2):(o=e,C===0&&S(vn)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);t.substr(i,2)===k?(c=k,i+=2):(c=e,C===0&&S(vn)),c!==e?(W=l,l=rl()):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function _a(){var l,f,y,c,s,o=i*76+3,p=O[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();for(y=ka(),y===e&&(y=null),c=[],s=x();s!==e;)c.push(s),s=x();return W=l,l=sl(y),O[o]={nextPos:i,result:l},l}function ka(){var l,f,y,c,s,o,p,u,g=i*76+4,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=xn(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=xn(),u!==e?(W=c,c=sa(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=xn(),u!==e?(W=c,c=sa(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=nl(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function uo(){var l,f,y,c,s,o,p,u,g=i*76+5,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=bn(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=bn(),u!==e?(W=c,c=mn(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=bn(),u!==e?(W=c,c=mn(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=al(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function os(){var l,f,y,c,s,o,p,u,g=i*76+6,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=fr(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=fr(),u!==e?(W=c,c=$n(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=fr(),u!==e?(W=c,c=$n(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=il(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function xn(){var l,f=i*76+7,y=O[f];return y?(i=y.nextPos,y.result):(l=us(),l===e&&(l=Pa(),l===e&&(l=fr())),O[f]={nextPos:i,result:l},l)}function bn(){var l,f=i*76+8,y=O[f];return y?(i=y.nextPos,y.result):(l=$r(),l===e&&(l=Ua(),l===e&&(l=us())),O[f]={nextPos:i,result:l},l)}function fr(){var l,f=i*76+9,y=O[f];return y?(i=y.nextPos,y.result):(l=$r(),l===e&&(l=Ua(),l===e&&(l=Ea(),l===e&&(l=ho(),l===e&&(l=fo(),l===e&&(l=Ma(),l===e&&(l=co(),l===e&&(l=po(),l===e&&(l=vo(),l===e&&(l=go(),l===e&&(l=yo(),l===e&&(l=Re()))))))))))),O[f]={nextPos:i,result:l},l)}function Re(){var l,f=i*76+10,y=O[f];return y?(i=y.nextPos,y.result):(l=wo(),l===e&&(l=Rr()),O[f]={nextPos:i,result:l},l)}function Rr(){var l,f=i*76+11,y=O[f];return y?(i=y.nextPos,y.result):(l=xo(),l===e&&(l=Po(),l===e&&(l=br(),l===e&&(l=Dr()))),O[f]={nextPos:i,result:l},l)}function Dr(){var l,f,y,c,s,o,p=i*76+12,u=O[p];if(u)return i=u.nextPos,u.result;if(l=Ao(),l===e&&(l=_n(),l===e&&(l=Na(),l===e&&(l=qs(),l===e&&(l=Ra(),l===e&&(l=Mn(),l===e&&(l=Ba(),l===e&&(l=Ha(),l===e&&(l=ko(),l===e&&(l=mo(),l===e&&(l=Co(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(wr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e?(W=l,l=na(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=O[f];return y?(i=y.nextPos,y.result):(l=Ra(),l===e&&(l=qs(),l===e&&(l=Mn(),l===e&&(l=On(),l===e&&(l=qa(),l===e&&(l=Ba()))))),O[f]={nextPos:i,result:l},l)}function us(){var l,f,y,c,s,o,p,u,g,v,m=i*76+14,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===j?(f=j,i+=2):(f=e,C===0&&S(mr)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(o=D,i++):(o=e,C===0&&S(sr)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(u=uo(),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();t.charCodeAt(i)===125?(v=V,i++):(v=e,C===0&&S(Ye)),v!==e?(W=l,l=ll(c,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Pa(){var l,f,y,c,s,o,p=i*76+15,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Bt)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=He(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();o=Te(),o!==e?(W=l,l=ol(c,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Bt)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();c=Te(),c!==e?(W=l,l=ul(c)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function $r(){var l,f,y,c,s,o,p,u,g,v=i*76+16,m=O[v];if(m)return i=m.nextPos,m.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,C===0&&S(Ir)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===58?(p=ae,i++):(p=e,C===0&&S(dt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Ut(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===61?(p=_e,i++):(p=e,C===0&&S(yt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Re(),g!==e?(W=l,l=fl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===H?(f=H,i+=3):(f=e,C===0&&S(ns)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===58?(p=ae,i++):(p=e,C===0&&S(dt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Ut(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===61?(p=_e,i++):(p=e,C===0&&S(yt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Re(),g!==e?(W=l,l=cl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[v]={nextPos:i,result:l},l}function Ea(){var l,f,y,c,s=i*76+17,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,C===0&&S(Pi)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();c=Re(),c!==e?(W=l,l=hl(c)):(i=l,l=e)}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function fo(){var l,f,y,c,s,o,p,u=i*76+18,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,2)===B?(f=B,i+=2):(f=e,C===0&&S(Ei)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();t.charCodeAt(i)===93?(p=q,i++):(p=e,C===0&&S(ks)),p!==e?(W=l,l=pl(c,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[u]={nextPos:i,result:l},l}function Ma(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+19,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(Ir)),s!==e){if(o=[],p=x(),p!==e)for(;p!==e;)o.push(p),p=x();else o=e;if(o!==e)if(p=He(),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();for(t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e)if(t.charCodeAt(i)===41?(w=F,i++):(w=e,C===0&&S(Pt)),w!==e){for(_=[],P=x();P!==e;)_.push(P),P=x();P=Tt(),P!==e?(W=l,l=vl(p,m,P)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(Ir)),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();if(v=Re(),v!==e){if(m=[],w=x(),w!==e)for(;w!==e;)m.push(w),w=x();else m=e;m!==e?(w=Tt(),w!==e?(W=l,l=gl(o,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function co(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R=i*76+20,Z=O[R];if(Z)return i=Z.nextPos,Z.result;if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(Ir)),s!==e){if(o=[],p=x(),p!==e)for(;p!==e;)o.push(p),p=x();else o=e;if(o!==e)if(p=He(),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();if(g=i,t.charCodeAt(i)===61?(v=_e,i++):(v=e,C===0&&S(yt)),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();w=Re(),w!==e?(W=g,g=dl(p,w)):(i=g,g=e)}else i=g,g=e;for(g===e&&(g=null),t.charCodeAt(i)===44?(v=G,i++):(v=e,C===0&&S(mt)),v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();if(w=Re(),w!==e)if(t.charCodeAt(i)===41?(_=F,i++):(_=e,C===0&&S(Pt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=Tt(),I!==e?(W=l,l=yl(p,g,w,I)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(Ir)),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(u=i,t.charCodeAt(i)===61?(g=_e,i++):(g=e,C===0&&S(yt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Re(),m!==e?(W=u,u=wl(o,m)):(i=u,u=e)}else i=u,u=e;for(u===e&&(u=null),t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e){if(w=[],_=x(),_!==e)for(;_!==e;)w.push(_),_=x();else w=e;w!==e?(_=Tt(),_!==e?(W=l,l=ml(o,u,m,_)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(s=Re(),s!==e)if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=Tt(),u!==e?(W=l,l=$l(s,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;s!==e?(o=Tt(),o!==e?(W=l,l=xl(c,o)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return O[R]={nextPos:i,result:l},l}function ho(){var l,f,y,c,s,o=i*76+21,p=O[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===X?(f=X,i+=6):(f=e,C===0&&S(Ps)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Re(),s!==e?(W=l,l=bl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[o]={nextPos:i,result:l},l}function po(){var l,f,y,c,s,o,p,u,g=i*76+22,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===$e?(f=$e,i+=4):(f=e,C===0&&S(ur)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();if(o=os(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=Al(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function vo(){var l,f,y,c,s=i*76+23,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===ke?(f=ke,i+=5):(f=e,C===0&&S(Mi)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Cl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function go(){var l,f,y,c,s=i*76+24,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,8)===ge?(f=ge,i+=8):(f=e,C===0&&S(Si)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=_l()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function yo(){var l,f,y,c,s,o,p=i*76+25,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Re(),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.substr(i,2)===qe?(c=qe,i+=2):(c=e,C===0&&S(Fi)),c===e&&(t.substr(i,2)===it?(c=it,i+=2):(c=e,C===0&&S(Oi)),c===e&&(t.charCodeAt(i)===61?(c=_e,i++):(c=e,C===0&&S(yt)))),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();o=Re(),o!==e?(W=l,l=kl(f,c,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function wo(){var l,f,y,c,s,o,p,u,g=i*76+26,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=Rr(),f!==e){for(y=[],c=i,s=[],o=xr();o!==e;)s.push(o),o=xr();if(o=Sa(),o!==e){for(p=[],u=xr();u!==e;)p.push(u),u=xr();u=Rr(),u!==e?(W=c,c=aa(f,o,u)):(i=c,c=e)}else i=c,c=e;if(c!==e)for(;c!==e;){for(y.push(c),c=i,s=[],o=xr();o!==e;)s.push(o),o=xr();if(o=Sa(),o!==e){for(p=[],u=xr();u!==e;)p.push(u),u=xr();u=Rr(),u!==e?(W=c,c=aa(f,o,u)):(i=c,c=e)}else i=c,c=e}else y=e;y!==e?(W=l,l=Pl(f,y)):(i=l,l=e)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function xr(){var l,f,y,c=i*76+27,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(y=Ue(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=xe()),O[c]={nextPos:i,result:l},l)}function Sa(){var l,f,y=i*76+28,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===lt?(f=lt,i+=2):(f=e,C===0&&S(Zn)),f===e&&(t.substr(i,2)===ot?(f=ot,i+=2):(f=e,C===0&&S(Ni)),f===e&&(t.substr(i,2)===Ie?(f=Ie,i+=2):(f=e,C===0&&S(Ti)),f===e&&(t.substr(i,2)===at?(f=at,i+=2):(f=e,C===0&&S(Ii)),f===e&&(t.substr(i,2)===Mt?(f=Mt,i+=2):(f=e,C===0&&S(ji)),f===e&&(t.substr(i,2)===St?(f=St,i+=2):(f=e,C===0&&S(Ri)),f===e&&(t.charCodeAt(i)===60?(f=Qe,i++):(f=e,C===0&&S(Gn)),f===e&&(t.charCodeAt(i)===62?(f=Fr,i++):(f=e,C===0&&S(gn)),f===e&&(t.charCodeAt(i)===43?(f=Dt,i++):(f=e,C===0&&S(Qn)),f===e&&(t.charCodeAt(i)===45?(f=yr,i++):(f=e,C===0&&S(Di)),f===e&&(t.charCodeAt(i)===42?(f=kt,i++):(f=e,C===0&&S(Xn)),f===e&&(t.charCodeAt(i)===94?(f=dr,i++):(f=e,C===0&&S(Yn)),f===e&&(t.charCodeAt(i)===47?(f=Or,i++):(f=e,C===0&&S(Li)),f===e&&(t.charCodeAt(i)===37?(f=_r,i++):(f=e,C===0&&S(Bi))))))))))))))),f!==e&&(W=l,f=ia()),l=f,O[y]={nextPos:i,result:l},l)}function mo(){var l,f,y,c=i*76+29,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Er,i++):(f=e,C===0&&S(Hi)),f!==e?(y=Re(),y!==e?(W=l,l=El(y)):(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function br(){var l,f,y,c,s=i*76+30,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,f=Dr(),f!==e){if(y=[],c=An(),c===e&&(c=Fa(),c===e&&(c=Cn())),c!==e)for(;c!==e;)y.push(c),c=An(),c===e&&(c=Fa(),c===e&&(c=Cn()));else y=e;y!==e?(W=l,l=Ml(f,y)):(i=l,l=e)}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function An(){var l,f,y,c,s,o,p=i*76+31,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(wr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=$o(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e?(W=l,l=Sl(c)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function $o(){var l,f,y,c,s,o,p=i*76+32,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Re(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Re(),o!==e?(W=c,c=la(f,o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Re(),o!==e?(W=c,c=la(f,o)):(i=c,c=e)):(i=c,c=e);W=l,l=Fl(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Fa(){var l,f,y,c,s,o,p=i*76+33,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=oa(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Cn(){var l,f,y,c=i*76+34,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=U,i++):(f=e,C===0&&S(is)),f!==e?(y=He(),y!==e?(W=l,l=Ol(y)):(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function xo(){var l,f,y,c,s,o,p,u,g,v,m=i*76+35,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===K?(f=K,i+=2):(f=e,C===0&&S(yn)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=Tt(),o!==e){if(p=i,u=[],g=x(),g!==e)for(;g!==e;)u.push(g),g=x();else u=e;if(u!==e?(g=Oa(),g!==e?p=g:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),u=i,g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;g!==e?(v=bo(),v!==e?u=v:(i=u,u=e)):(i=u,u=e),u===e&&(u=null),W=l,l=Nl(c,o,p,u)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Oa(){var l,f,y,c,s,o,p=i*76+36,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Us(),f!==e){for(y=[],c=i,s=[],o=x();o!==e;)s.push(o),o=x();for(o=Us(),o!==e?c=o:(i=c,c=e);c!==e;){for(y.push(c),c=i,s=[],o=x();o!==e;)s.push(o),o=x();o=Us(),o!==e?c=o:(i=c,c=e)}W=l,l=Tl(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Us(){var l,f,y,c,s,o,p,u=i*76+37,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,4)===te?(f=te,i+=4):(f=e,C===0&&S(Ui)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();p=Tt(),p!==e?(W=l,l=Il(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return O[u]={nextPos:i,result:l},l}function bo(){var l,f,y,c,s,o=i*76+38,p=O[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ce?(f=ce,i+=4):(f=e,C===0&&S(qi)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Tt(),s!==e?(W=l,l=jl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[o]={nextPos:i,result:l},l}function Ao(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=i*76+39,re=O[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.substr(i,5)===he?(f=he,i+=5):(f=e,C===0&&S(zi)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===123?(p=D,i++):(p=e,C===0&&S(sr)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();if(g=[],v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=ua(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(g.push(v),v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=ua(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else g=e;if(g!==e){if(v=i,t.charCodeAt(i)===42?(m=kt,i++):(m=e,C===0&&S(Xn)),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();v=I}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();t.charCodeAt(i)===125?(w=V,i++):(w=e,C===0&&S(Ye)),w!==e?(W=l,l=Rl(s,g,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return O[ye]={nextPos:i,result:l},l}function _n(){var l,f,y,c,s,o,p,u,g=i*76+40,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Ne?(f=Ne,i+=4):(f=e,C===0&&S(Ms)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();if(o=os(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=fa(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function Co(){var l,f,y=i*76+41,c=O[y];return c?(i=c.nextPos,c.result):(l=i,f=Fo(),f!==e&&(W=l,f=Dl(f)),l=f,O[y]={nextPos:i,result:l},l)}function Na(){var l,f,y,c,s,o,p=i*76+42,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===96?(f=de,i++):(f=e,C===0&&S(Ss)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===96?(o=de,i++):(o=e,C===0&&S(Ss)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Ta(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===96?(o=de,i++):(o=e,C===0&&S(Ss)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Ta(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===96?(c=de,i++):(c=e,C===0&&S(Ss)),c!==e?(W=l,l=Ll(y)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Ta(){var l,f,y,c,s,o,p=i*76+43,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=Re(),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?l=c:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ia(),y!==e)for(;y!==e;)f.push(y),y=Ia();else f=e;f!==e&&(W=l,f=Bl(f)),l=f}return O[p]={nextPos:i,result:l},l}function Ia(){var l,f=i*76+44,y=O[f];return y?(i=y.nextPos,y.result):(l=ja(),l===e&&(Gt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Wi))),O[f]={nextPos:i,result:l},l)}function ja(){var l,f,y,c=i*76+45,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(_s.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,C===0&&S(Fs)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function qs(){var l,f,y,c,s,o,p=i*76+46,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===34?(f=we,i++):(f=e,C===0&&S(Os)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===34?(o=we,i++):(o=e,C===0&&S(Os)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=kn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ca(o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===34?(o=we,i++):(o=e,C===0&&S(Os)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=kn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ca(o)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===34?(c=we,i++):(c=e,C===0&&S(Os)),c!==e?(W=l,l=Hl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=ue,i++):(f=e,C===0&&S(Ns)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===39?(o=ue,i++):(o=e,C===0&&S(Ns)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Pn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ha(o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===39?(o=ue,i++):(o=e,C===0&&S(Ns)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Pn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ha(o)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===39?(c=ue,i++):(c=e,C===0&&S(Ns)),c!==e?(W=l,l=pa(y)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function kn(){var l,f,y=i*76+47,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===De?(f=De,i+=2):(f=e,C===0&&S(Ts)),f!==e&&(W=l,f=Ul()),l=f,O[y]={nextPos:i,result:l},l)}function Pn(){var l,f,y=i*76+48,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===je?(f=je,i+=2):(f=e,C===0&&S(Is)),f!==e&&(W=l,f=va()),l=f,O[y]={nextPos:i,result:l},l)}function Ra(){var l,f=i*76+49,y=O[f];return y?(i=y.nextPos,y.result):(l=En(),l===e&&(l=Da()),O[f]={nextPos:i,result:l},l)}function En(){var l,f,y,c,s,o,p=i*76+50,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(c=U,i++):(c=e,C===0&&S(is)),c!==e){if(s=[],ht.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,C===0&&S(Et)),o!==e)for(;o!==e;)s.push(o),ht.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,C===0&&S(Et));else s=e;s!==e?(W=l,l=ql()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Et)),f!==e)if(t.charCodeAt(i)===46?(y=U,i++):(y=e,C===0&&S(is)),y!==e){if(c=[],ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Et)),s!==e)for(;s!==e;)c.push(s),ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Et));else c=e;c!==e?(W=l,l=zl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Da(){var l,f,y,c,s=i*76+51,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et));else y=e;y!==e?(W=l,l=Wl()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Et)),f!==e?(W=l,l=Vl()):(i=l,l=e)),O[s]={nextPos:i,result:l},l}function Mn(){var l,f=i*76+52,y=O[f];return y?(i=y.nextPos,y.result):(l=La(),l===e&&(l=_o()),O[f]={nextPos:i,result:l},l)}function La(){var l,f,y,c,s=i*76+53,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Be?(f=Be,i+=4):(f=e,C===0&&S(ta)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Kl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function _o(){var l,f,y,c,s=i*76+54,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,C===0&&S(nr)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Jl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function Ba(){var l,f,y,c,s=i*76+55,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,C===0&&S(Vi)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Zl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function Ha(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+56,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=Gl(c)):(i=l,l=e)}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function ko(){var l,f,y,c,s,o,p,u,g,v,m=i*76+57,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=Re(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(o)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=Re(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(o)}else i=s,s=e;for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=ya(c)):(i=l,l=e)}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Sn(){var l,f,y,c,s,o,p,u=i*76+58,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,f=He(),f!==e){for(y=i,c=[],s=x();s!==e;)c.push(s),s=x();if(t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();p=Ut(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),W=l,l=Ql(f,y)}else i=l,l=e;return O[u]={nextPos:i,result:l},l}function Fn(){var l,f,y,c,s,o,p=i*76+59,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Sn(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Sn(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Sn(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);W=l,l=wa(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Ua(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=i*76+60,re=O[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.charCodeAt(i)===64?(f=st,i++):(f=e,C===0&&S(Ki)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=He(),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();if(t.charCodeAt(i)===40?(o=E,i++):(o=e,C===0&&S(wr)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(u=Fn(),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();if(t.charCodeAt(i)===41?(v=F,i++):(v=e,C===0&&S(Pt)),v!==e){for(m=i,w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===58?(_=ae,i++):(_=e,C===0&&S(dt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=Ut(),I!==e?m=I:(i=m,m=e)}else i=m,m=e;for(m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===123?(_=D,i++):(_=e,C===0&&S(sr)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();for(I=os(),I===e&&(I=null),R=[],Z=x();Z!==e;)R.push(Z),Z=x();t.charCodeAt(i)===125?(Z=V,i++):(Z=e,C===0&&S(Ye)),Z!==e?(W=l,l=Xl(y,c,s,u,m,I)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[ye]={nextPos:i,result:l},l}function Po(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P=i*76+61,I=O[P];if(I)return i=I.nextPos,I.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Fn(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=i,u=[],g=x();g!==e;)u.push(g),g=x();if(t.charCodeAt(i)===58?(g=ae,i++):(g=e,C===0&&S(dt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Ut(),m!==e?p=m:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),u=[],g=x();g!==e;)u.push(g),g=x();if(t.charCodeAt(i)===123?(g=D,i++):(g=e,C===0&&S(sr)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();for(m=os(),m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();t.charCodeAt(i)===125?(_=V,i++):(_=e,C===0&&S(Ye)),_!==e?(W=l,l=Yl(c,p,m)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[P]={nextPos:i,result:l},l}function On(){var l,f,y,c,s,o,p,u,g,v,m=i*76+62,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=Te(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(o)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=Te(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(o)}else i=s,s=e;for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=eo(c)):(i=l,l=e)}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function qa(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+63,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=xa(c)):(i=l,l=e)}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function Ut(){var l,f=i*76+64,y=O[f];return y?(i=y.nextPos,y.result):(l=Eo(),l===e&&(l=So()),O[f]={nextPos:i,result:l},l)}function Eo(){var l,f,y,c,s,o,p,u,g,v,m=i*76+65,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Mo(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.substr(i,2)===ie?(u=ie,i+=2):(u=e,C===0&&S(Es)),u!==e){for(g=[],v=x();v!==e;)g.push(v),v=x();v=Ut(),v!==e?(W=l,l=to(c,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Mo(){var l,f,y,c,s,o,p=i*76+66,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Ut(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Ut(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Ut(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);W=l,l=ba(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function So(){var l,f,y,c,s,o,p,u,g=i*76+67,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=He(),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(t.charCodeAt(i)===60?(c=Qe,i++):(c=e,C===0&&S(Gn)),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ut(),o!==e){for(p=[],u=xe();u!==e;)p.push(u),u=xe();t.charCodeAt(i)===62?(u=Fr,i++):(u=e,C===0&&S(gn)),u!==e?(W=l,l=ro(f,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=He(),f!==e&&(W=l,f=so(f)),l=f),O[g]={nextPos:i,result:l},l}function He(){var l,f,y,c,s=i*76+68,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,It.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Ji)),f!==e){for(y=[],Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));c!==e;)y.push(c),Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));W=l,l=no()}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function Fo(){var l,f,y,c,s,o,p=i*76+69,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=He(),f!==e){for(y=[],c=i,t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e?(o=He(),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e?(o=He(),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=ao()}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Lr(){var l,f,y,c,s,o=i*76+70,p=O[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();if(t.charCodeAt(i)===44?(y=G,i++):(y=e,C===0&&S(mt)),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();f=[f,y,c],l=f}else i=l,l=e;if(l===e)if(l=[],f=x(),f!==e)for(;f!==e;)l.push(f),f=x();else l=e;return O[o]={nextPos:i,result:l},l}function Tt(){var l,f,y,c,s,o,p=i*76+71,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=os(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=io(c)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=fr()),O[p]={nextPos:i,result:l},l}function Ue(){var l,f=i*76+72,y=O[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Lt?(l=Lt,i+=2):(l=e,C===0&&S(Zi)),l===e&&(Kn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(ra))),O[f]={nextPos:i,result:l},l)}function za(){var l,f,y=i*76+73,c=O[y];return c?(i=c.nextPos,c.result):(l=i,C++,t.length>i?(f=t.charAt(i),i++):(f=e,C===0&&S(tr)),C--,f===e?l=void 0:(i=l,l=e),l===e&&(l=Ue()),O[y]={nextPos:i,result:l},l)}function x(){var l,f=i*76+74,y=O[f];return y?(i=y.nextPos,y.result):(Ci.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Gi)),O[f]={nextPos:i,result:l},l)}function xe(){var l,f=i*76+75,y=O[f];return y?(i=y.nextPos,y.result):(_i.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Qi)),O[f]={nextPos:i,result:l},l)}function ne(l,f,y){const c={type:l};f.children=y;for(const o of Object.keys(f))f[o]!==void 0&&(c[o]=f[o]);const s=T();return c.loc={start:s.start.offset,end:s.end.offset-1},c}if(jr=d(),jr!==e&&i===t.length)return jr;throw jr!==e&&i<t.length&&S(se()),Hs(z,a<t.length?t.charAt(a):null,a<t.length?Bs(a,a+1):Bs(a,a))}const mx=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function $x(t){return mx.includes(t.type)}function Xg(t){return"chain"in t&&t.chain!==null}function xx(t,r,e){return{type:"call",target:t,args:r,loc:e}}function bx(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Ax(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=nt(e.expr,r);break}case"return":{e.expr=nt(e.expr,r);break}case"each":{e.items=nt(e.items,r),e.for=nt(e.for,r);break}case"for":{e.from!=null&&(e.from=nt(e.from,r)),e.to!=null&&(e.to=nt(e.to,r)),e.times!=null&&(e.times=nt(e.times,r)),e.for=nt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=nt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=nt(e.expr,r),e.dest=nt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=nt(e.operands[n],r);break}case"not":{e.expr=nt(e.expr,r);break}case"if":{e.cond=nt(e.cond,r),e.then=nt(e.then,r);for(const n of e.elseif)n.cond=nt(n.cond,r),n.then=nt(n.then,r);e.else!=null&&(e.else=nt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=nt(e.children[n],r);break}case"match":{e.about=nt(e.about,r);for(const n of e.qs)n.q=nt(n.q,r),n.a=nt(n.a,r);e.default!=null&&(e.default=nt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=nt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=nt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],nt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=nt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=nt(e.args[n],r);break}case"indexChain":{e.index=nt(e.index,r);break}case"call":{e.target=nt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=nt(e.args[n],r);break}case"index":{e.target=nt(e.target,r),e.index=nt(e.index,r);break}case"prop":{e.target=nt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=nt(e.members[n],r);break}case"or":case"and":{e.left=nt(e.left,r),e.right=nt(e.right,r);break}}if(Xg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=nt(e.chain[n],r);return e}const Uc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function qc(t){throw new au(`Reserved word "${t}" cannot be used as variable name.`)}function Cx(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Uc.includes(t.name)&&qc(t.name);break}case"meta":{t.name!=null&&Uc.includes(t.name)&&qc(t.name);break}case"fn":{for(const r of t.args)Uc.includes(r.name)&&qc(r.name);break}}return t}function _x(t){for(const r of t)nt(r,Cx);return t}function $v(t){return{type:"simple",name:t}}function kx(t,r){return{type:"generic",name:t,inners:r}}function Px(t,r){return{type:"fn",args:t,result:r}}function Lf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Lf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Lf(n)).join(", "),e=Lf(t.result);return`@(${r}) { ${e} }`}}}function Mu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return $v(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Mu(t.inner):r=$v("any"),kx(t.name,[r])}}throw new au(`Unknown type: '${Lf(t)}'`)}else{const r=t.args.map(e=>Mu(e));return Px(r,Mu(t.result))}}function Ex(t){switch(t.type){case"def":{t.varType!=null&&Mu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Mu(r.argType);t.retType!=null&&Mu(t.retType);break}}return t}function Mx(t){for(const r of t)nt(r,Ex);return t}function Bf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Bf(n.expr.children)),r.push(n);else{if(e.length>0)throw new au("invalid attribute.");switch(n.type){case"fn":{n.children=Bf(n.children);break}case"block":{n.statements=Bf(n.statements);break}}r.push(n)}if(e.length>0)throw new au("invalid attribute.");return r}function Sx(t){if($x(t)&&Xg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=xx(n,h.args,h.loc);break}case"indexChain":{n=bx(n,h.index,h.loc);break}case"propChain":{n=Ax(n,h.name,h.loc);break}}return n}return t}function Fx(t){for(let r=0;r<t.length;r++)t[r]=nt(t[r],Sx);return t}function Hf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Yg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Hf(t,r,e);{const{left:n,right:h,info:d}=t;return Hf(n,Yg(h,r,e),d)}}function qo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[qo(t.left),qo(t.right)]}}const Ox={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:qo(t.left),right:qo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:qo(t.left),right:qo(t.right)}),priority:3}};function Nx(t){const r=t.operators.map(n=>{const h=Ox[n];if(h==null)throw new au(`No such operator: ${n}.`);return h});let e=Hf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Yg(e,t.operands[2+n],r[1+n]);return qo(e)}function Tx(t){for(let r=0;r<t.length;r++)t[r]=nt(t[r],e=>e.type==="infix"?Nx(e):e);return t}var Za;let Ix=(Za=class{constructor(){me(this,"plugins");this.plugins={validate:[_x,Mx],transform:[Bf,Fx,Tx]}}static parse(r){return Za.instance==null&&(Za.instance=new Za),Za.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=mv(r,{startRule:"Preprocess"});e=mv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new au(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new au(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Za,"instance"),Za);const jx="0.15.0",Rx={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Mh=[],zu=null;function Dx(t){return Mh=Ix.parse(t),JSON.stringify(Mh,null,"	")}async function Lx(t){zu==null||zu.abort(),zu=new As({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:kh(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:kh(e.val,!0),print:!1});break}}});try{await zu.exec(Mh)}catch(r){t.err(r)}}const Bx=Object.freeze(Object.defineProperty({__proto__:null,exec:Lx,parse:Dx,samples:Rx,version:jx},Symbol.toStringTag,{value:"Module"}));class $c extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,$c)}}class iu extends $c{constructor(r,e){super(r,e)}}class er extends $c{constructor(r,e){super(r,e)}}class Hx extends er{constructor(r,e){super(r,e)}}var fu=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};class Wn{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Wn(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new er(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}fu([ct],Wn.prototype,"log",null);fu([ct],Wn.prototype,"onUpdated",null);fu([ct],Wn.prototype,"createChildScope",null);fu([ct],Wn.prototype,"get",null);fu([ct],Wn.prototype,"getAll",null);fu([ct],Wn.prototype,"add",null);fu([ct],Wn.prototype,"assign",null);let kf;const Ux=new Uint8Array(16);function qx(){if(!kf&&(kf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kf(Ux)}const Ur=[];for(let t=0;t<256;++t)Ur.push((t+256).toString(16).slice(1));function zx(t,r=0){return(Ur[t[r+0]]+Ur[t[r+1]]+Ur[t[r+2]]+Ur[t[r+3]]+"-"+Ur[t[r+4]]+Ur[t[r+5]]+"-"+Ur[t[r+6]]+Ur[t[r+7]]+"-"+Ur[t[r+8]]+Ur[t[r+9]]+"-"+Ur[t[r+10]]+Ur[t[r+11]]+Ur[t[r+12]]+Ur[t[r+13]]+Ur[t[r+14]]+Ur[t[r+15]]).toLowerCase()}const Wx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xv={randomUUID:Wx};function Vx(t,r,e){if(xv.randomUUID&&!r&&!t)return xv.randomUUID();t=t||{};const n=t.random||(t.rng||qx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return zx(n)}const Rt={type:"null"},fn={type:"bool",value:!0},Zs={type:"bool",value:!1},Ve=t=>({type:"num",value:t}),Xt=t=>({type:"str",value:t}),Su=t=>({type:"bool",value:t}),pp=t=>({type:"obj",value:t}),Gr=t=>({type:"arr",value:t}),Kx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ee=t=>({type:"fn",native:t}),Jx=t=>({type:"return",value:t}),Zx=()=>({type:"break",value:null}),Gx=()=>({type:"continue",value:null}),Qx=t=>t.type==="return"?t.value:t;function en(t){if(t==null)throw new er("Expect anything, but got nothing.")}function ds(t){if(t==null)throw new er("Expect boolean, but got nothing.");if(t.type!=="bool")throw new er(`Expect boolean, but got ${t.type}.`)}function vi(t){if(t==null)throw new er("Expect function, but got nothing.");if(t.type!=="fn")throw new er(`Expect function, but got ${t.type}.`)}function Tr(t){if(t==null)throw new er("Expect string, but got nothing.");if(t.type!=="str")throw new er(`Expect string, but got ${t.type}.`)}function ze(t){if(t==null)throw new er("Expect number, but got nothing.");if(t.type!=="num")throw new er(`Expect number, but got ${t.type}.`)}function li(t){if(t==null)throw new er("Expect object, but got nothing.");if(t.type!=="obj")throw new er(`Expect object, but got ${t.type}.`)}function ef(t){if(t==null)throw new er("Expect array, but got nothing.");if(t.type!=="arr")throw new er(`Expect array, but got ${t.type}.`)}function Xx(t){return t.type==="str"}function Yx(t){return t.type==="num"}function eb(t){return t.type==="obj"}function tb(t){return t.type==="arr"}function Sh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Fh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Fh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Oh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Oh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Oh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Nh(t){if(t===null)return Rt;if(typeof t=="boolean")return Su(t);if(typeof t=="string")return Xt(t);if(typeof t=="number")return Ve(t);if(Array.isArray(t))return Gr(t.map(r=>Nh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Nh(n));return pp(r)}return Rt}const rb={help:Xt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Xt("0.14.1"),"Core:ai":Xt("kawaii"),"Core:not":Ee(([t])=>(ds(t),t.value?Zs:fn)),"Core:eq":Ee(([t,r])=>(en(t),en(r),Sh(t,r)?fn:Zs)),"Core:neq":Ee(([t,r])=>(en(t),en(r),Sh(t,r)?Zs:fn)),"Core:and":Ee(([t,r])=>(ds(t),t.value?(ds(r),r.value?fn:Zs):Zs)),"Core:or":Ee(([t,r])=>(ds(t),t.value?fn:(ds(r),r.value?fn:Zs))),"Core:add":Ee(([t,r])=>(ze(t),ze(r),Ve(t.value+r.value))),"Core:sub":Ee(([t,r])=>(ze(t),ze(r),Ve(t.value-r.value))),"Core:mul":Ee(([t,r])=>(ze(t),ze(r),Ve(t.value*r.value))),"Core:pow":Ee(([t,r])=>{ze(t),ze(r);const e=t.value**r.value;if(isNaN(e))throw new er("Invalid operation.");return Ve(e)}),"Core:div":Ee(([t,r])=>{ze(t),ze(r);const e=t.value/r.value;if(isNaN(e))throw new er("Invalid operation.");return Ve(e)}),"Core:mod":Ee(([t,r])=>(ze(t),ze(r),Ve(t.value%r.value))),"Core:gt":Ee(([t,r])=>(ze(t),ze(r),t.value>r.value?fn:Zs)),"Core:lt":Ee(([t,r])=>(ze(t),ze(r),t.value<r.value?fn:Zs)),"Core:gteq":Ee(([t,r])=>(ze(t),ze(r),t.value>=r.value?fn:Zs)),"Core:lteq":Ee(([t,r])=>(ze(t),ze(r),t.value<=r.value?fn:Zs)),"Core:type":Ee(([t])=>(en(t),Xt(t.type))),"Core:to_str":Ee(([t])=>(en(t),t.type==="str"?t:t.type==="num"?Xt(t.value.toString()):Xt("?"))),"Core:range":Ee(([t,r])=>(ze(t),ze(r),t.value<r.value?Gr(Array.from({length:r.value-t.value+1},(e,n)=>Ve(n+t.value))):t.value>r.value?Gr(Array.from({length:t.value-r.value+1},(e,n)=>Ve(t.value-n))):Gr([t]))),"Util:uuid":Ee(()=>Xt(Vx())),"Json:stringify":Ee(([t])=>(en(t),Xt(JSON.stringify(Oh(t))))),"Json:parse":Ee(([t])=>(Tr(t),Nh(JSON.parse(t.value)))),"Json:parsable":Ee(([t])=>{Tr(t);try{JSON.parse(t.value)}catch{return Su(!1)}return Su(!0)}),"Date:now":Ee(()=>Ve(Date.now())),"Date:year":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ee(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ee(([t])=>(Tr(t),Ve(new Date(t.value).getTime()))),"Math:Infinity":Ve(1/0),"Math:PI":Ve(Math.PI),"Math:sin":Ee(([t])=>(ze(t),Ve(Math.sin(t.value)))),"Math:cos":Ee(([t])=>(ze(t),Ve(Math.cos(t.value)))),"Math:abs":Ee(([t])=>(ze(t),Ve(Math.abs(t.value)))),"Math:sqrt":Ee(([t])=>{ze(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new er("Invalid operation.");return Ve(r)}),"Math:round":Ee(([t])=>(ze(t),Ve(Math.round(t.value)))),"Math:ceil":Ee(([t])=>(ze(t),Ve(Math.ceil(t.value)))),"Math:floor":Ee(([t])=>(ze(t),Ve(Math.floor(t.value)))),"Math:min":Ee(([t,r])=>(ze(t),ze(r),Ve(Math.min(t.value,r.value)))),"Math:max":Ee(([t,r])=>(ze(t),ze(r),Ve(Math.max(t.value,r.value)))),"Math:rnd":Ee(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ve(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ve(Math.random())),"Math:gen_rng":Ee(([t])=>{if(en(t),t.type!=="num"&&t.type!=="str")return Rt;const r=cf(t.value.toString());return Ee(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ve(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ve(r()))}),"Num:to_hex":Ee(([t])=>(ze(t),Xt(t.value.toString(16)))),"Num:from_hex":Ee(([t])=>(Tr(t),Ve(parseInt(t.value,16)))),"Str:lf":Xt(`
`),"Str:lt":Ee(([t,r])=>(Tr(t),Tr(r),t.value<r.value?Ve(-1):t.value===r.value?Ve(0):Ve(1))),"Str:gt":Ee(([t,r])=>(Tr(t),Tr(r),t.value>r.value?Ve(-1):t.value===r.value?Ve(0):Ve(1))),"Obj:keys":Ee(([t])=>(li(t),Gr(Array.from(t.value.keys()).map(r=>Xt(r))))),"Obj:vals":Ee(([t])=>(li(t),Gr(Array.from(t.value.values())))),"Obj:kvs":Ee(([t])=>(li(t),Gr(Array.from(t.value.entries()).map(([r,e])=>Gr([Xt(r),e]))))),"Obj:get":Ee(([t,r])=>(li(t),Tr(r),t.value.get(r.value)??Rt)),"Obj:set":Ee(([t,r,e])=>(li(t),Tr(r),en(e),t.value.set(r.value,e),Rt)),"Obj:has":Ee(([t,r])=>(li(t),Tr(r),Su(t.value.has(r.value)))),"Obj:copy":Ee(([t])=>(li(t),pp(new Map(t.value)))),"Async:interval":Ee(async([t,r,e],n)=>{ze(t),vi(r),e&&(ds(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),Ee(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":Ee(async([t,r],e)=>{ze(t),vi(r);const n=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),Ee(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},gu={num:{to_str:t=>Ee(async(r,e)=>Xt(t.value.toString()))},str:{to_num:t=>Ee(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Rt:Ve(n)}),len:t=>Ve(hf(t.value)),replace:t=>Ee(async([r,e],n)=>(Tr(r),Tr(e),Xt(t.value.split(r.value).join(e.value)))),index_of:t=>Ee(async([r],e)=>(Tr(r),Ve(vf(t.value,r.value)))),incl:t=>Ee(async([r],e)=>(Tr(r),t.value.includes(r.value)?fn:Zs)),trim:t=>Ee(async(r,e)=>Xt(t.value.trim())),upper:t=>Ee(async(r,e)=>Xt(t.value.toUpperCase())),lower:t=>Ee(async(r,e)=>Xt(t.value.toLowerCase())),split:t=>Ee(async([r],e)=>(r&&Tr(r),Gr(r?t.value.split(r?r.value:"").map(n=>Xt(n)):zn(t.value).map(n=>Xt(n))))),slice:t=>Ee(async([r,e],n)=>(ze(r),ze(e),Xt(pf(t.value,r.value,e.value)))),pick:t=>Ee(async([r],e)=>{ze(r);const h=zn(t.value)[r.value];return h?Xt(h):Rt})},arr:{len:t=>Ve(t.value.length),push:t=>Ee(async([r],e)=>(en(r),t.value.push(r),t)),unshift:t=>Ee(async([r],e)=>(en(r),t.value.unshift(r),t)),pop:t=>Ee(async(r,e)=>t.value.pop()??Rt),shift:t=>Ee(async(r,e)=>t.value.shift()??Rt),concat:t=>Ee(async([r],e)=>(ef(r),Gr(t.value.concat(r.value)))),slice:t=>Ee(async([r,e],n)=>(ze(r),ze(e),Gr(t.value.slice(r.value,e.value)))),join:t=>Ee(async([r],e)=>(r&&Tr(r),Xt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Ee(async([r],e)=>{vi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Ve(d)]));return Gr(await Promise.all(n))}),filter:t=>Ee(async([r],e)=>{vi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Ve(h)]);ds($),$.value&&n.push(d)}return Gr(n)}),reduce:t=>Ee(async([r,e],n)=>{vi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Ve($)])}return d}),find:t=>Ee(async([r],e)=>{vi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Ve(n)]);if(ds(d),d.value)return h}return Rt}),incl:t=>Ee(async([r],e)=>(en(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Zs:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?fn:Zs)),reverse:t=>Ee(async(r,e)=>(t.value.reverse(),Rt)),copy:t=>Ee(async(r,e)=>Gr([...t.value])),sort:t=>Ee(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);ze(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return vi(r),ef(t),t.value=await n(t.value,r),t})}};var sn=globalThis&&globalThis.__decorate||function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const ed=300,sb=ed-1;class Cs{constructor(r,e){me(this,"vars");me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);this.opts=e??{};const n={print:Ee(([h])=>{en(h),this.opts.out&&this.opts.out(h)}),readline:Ee(async h=>{const d=h[0];if(Tr(d),this.opts.in==null)return Rt;const $=await this.opts.in(d.value);return Xt($)})};this.vars={...r,...rb,...n},this.scope=new Wn([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const h=await this._eval(n.expr,e);e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Rt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const h=r.scope.createChildScope(n);return Qx(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Rt;if(this.stepCount%ed===sb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new er("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);vi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(ds(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(ds(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Rt}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(Sh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Rt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Rt}case"for":{if(r.times){const n=await this._eval(r.times,e);ze(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);ze(n),ze(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ve(d)]])));if($.type==="break")break;if($.type==="return")return $}}return Rt}case"each":{const n=await this._eval(r.items,e);ef(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(d.type==="break")break;if(d.type==="return")return d}return Rt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,n),Rt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Rt}case"addAssign":{const n=await this._eval(r.dest,e);ze(n);const h=await this._eval(r.expr,e);return ze(h),await this.assign(e,r.dest,Ve(n.value+h.value)),Rt}case"subAssign":{const n=await this._eval(r.dest,e);ze(n);const h=await this._eval(r.expr,e);return ze(h),await this.assign(e,r.dest,Ve(n.value-h.value)),Rt}case"null":return Rt;case"bool":return Su(r.value);case"num":return Ve(r.value);case"str":return Xt(r.value);case"arr":return Gr(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return pp(n)}case"prop":{const n=await this._eval(r.target,e);if(eb(n))return n.value.has(r.name)?n.value.get(r.name):Rt;if(Yx(n)){if(Object.hasOwn(gu.num,r.name))return gu.num[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else if(Xx(n)){if(Object.hasOwn(gu.str,r.name))return gu.str[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else if(tb(n)){if(Object.hasOwn(gu.arr,r.name))return gu.arr[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else throw new er(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);ef(n);const h=await this._eval(r.index,e);ze(h);const d=n.value[h.value];if(d===void 0)throw new Hx(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return ds(n),Su(!n.value)}case"fn":return Kx(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);let $="";d.type==="str"?$=d.value:d.type==="num"&&($=d.value.toString()),n+=$}return Xt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Jx(n)}case"break":return this.log("block:break",{scope:e.name}),Zx();case"continue":return this.log("block:continue",{scope:e.name}),Gx();case"ns":return Rt;case"meta":return Rt;case"and":{const n=await this._eval(r.left,e);if(ds(n),n.value){const h=await this._eval(r.right,e);return ds(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(ds(n),n.value)return n;{const h=await this._eval(r.right,e);return ds(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Rt;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r);ef(h);const d=await this._eval(e.index,r);ze(d),h.value[d.value]=n}else if(e.type==="prop"){const h=await this._eval(e.target,r);li(h),h.value.set(e.name,n)}else throw new er("The left-hand side of an assignment expression must be a variable or a property/index access.")}}sn([ct],Cs.prototype,"exec",null);sn([ct],Cs.prototype,"execFn",null);sn([ct],Cs.prototype,"log",null);sn([ct],Cs.prototype,"collectNs",null);sn([ct],Cs.prototype,"collectNsMember",null);sn([ct],Cs.prototype,"_fn",null);sn([ct],Cs.prototype,"_eval",null);sn([ct],Cs.prototype,"_run",null);sn([ct],Cs.prototype,"registerAbortHandler",null);sn([ct],Cs.prototype,"unregisterAbortHandler",null);sn([ct],Cs.prototype,"abort",null);sn([ct],Cs.prototype,"assign",null);sn([ct],Cs,"collectMetadata",null);function nb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function eu(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,eu.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}nb(eu,Error);function zc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}eu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=zc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+zc("",h.column-1," ")+zc("",j,"^")}else r+=`
 at `+$}return r};eu.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function bv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:M,Main:_a},d=M,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ae=":",_e="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",ke="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ot="&&",Ie="==",at="!=",Mt="<=",St=">=",Qe="<",Fr=">",Dt="+",yr="-",kt="*",dr="^",Or="/",_r="%",Er="!",Ft="[",U=".",K="if",te="elif",ce="else",he="match",ie="=>",Ne="eval",de="`",we='"',ue="'",De='\\"',je="\\'",Be="true",We="false",Ze="null",rt=";",st="@",wt="@(",Lt=`\r
`,xt=/^[A-Z0-9_:]/i,Gt=/^[^`{]/,_s=/^[{}`]/,Wr=/^[+\-]/,Ot=/^[1-9]/,ht=/^[0-9]/,It=/^[A-Z_]/i,Vn=/^[A-Z0-9_]/i,Kn=/^[\r\n]/,Ci=/^[ \t\r\n]/,_i=/^[ \t]/,tr=lo(),rr=Y("//",!1),ki=Y("/*",!1),vn=Y("*/",!1),wr=Y("(",!1),Pt=Y(")",!1),mr=Y("::",!1),sr=Y("{",!1),Ye=Y("}",!1),Bt=Y("###",!1),Ir=Y("let",!1),dt=Y(":",!1),yt=Y("=",!1),ns=Y("var",!1),Pi=Y("<:",!1),Ei=Y("#[",!1),ks=Y("]",!1),as=Y("each",!1),mt=Y(",",!1),pt=Y("for",!1),Ps=Y("return",!1),or=Ht([["A","Z"],["0","9"],"_",":"],!1,!0),ur=Y("loop",!1),Mi=Y("break",!1),Si=Y("continue",!1),Fi=Y("+=",!1),Oi=Y("-=",!1),Jn=Y("\\",!1),Zn=Y("||",!1),Ni=Y("&&",!1),Ti=Y("==",!1),Ii=Y("!=",!1),ji=Y("<=",!1),Ri=Y(">=",!1),Gn=Y("<",!1),gn=Y(">",!1),Qn=Y("+",!1),Di=Y("-",!1),Xn=Y("*",!1),Yn=Y("^",!1),Li=Y("/",!1),Bi=Y("%",!1),Hi=Y("!",!1),dn=Y("[",!1),is=Y(".",!1),yn=Y("if",!1),Ui=Y("elif",!1),qi=Y("else",!1),zi=Y("match",!1),Es=Y("=>",!1),Ms=Y("eval",!1),Ss=Y("`",!1),Wi=Ht(["`","{"],!0,!1),Fs=Ht(["{","}","`"],!1,!1),Os=Y('"',!1),Ns=Y("'",!1),Ts=Y('\\"',!1),Is=Y("\\'",!1),js=Ht(["+","-"],!1,!1),ea=Ht([["1","9"]],!1,!1),Et=Ht([["0","9"]],!1,!1),ta=Y("true",!1),nr=Y("false",!1),Vi=Y("null",!1),Rs=Y(";",!1),Ki=Y("@",!1),ls=Y("@(",!1),Ji=Ht([["A","Z"],"_"],!1,!0),wn=Ht([["A","Z"],["0","9"],"_"],!1,!0),Zi=Y(`\r
`,!1),ra=Ht(["\r",`
`],!1,!1),Gi=Ht([" ","	","\r",`
`],!1,!1),Qi=Ht([" ","	"],!1,!1),Xi=function(l){return l.join("")},Yi=function(){return A()},el=function(){return A()},tl=function(){return""},rl=function(){return""},sl=function(l){return l??[]},sa=function(l,f){return f},nl=function(l,f){return[l,...f]},mn=function(l,f){return f},al=function(l,f){return[l,...f]},$n=function(l,f){return f},il=function(l,f){return[l,...f]},na=function(l){return l},ll=function(l,f){return ne("ns",{name:l,members:f})},ol=function(l,f){return ne("meta",{name:l,value:f})},ul=function(l){return ne("meta",{name:null,value:l})},fl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},cl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},hl=function(l){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[l]})]})},pl=function(l,f){return ne("attr",{name:l,value:f??ne("bool",{value:!0})})},vl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},gl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},dl=function(l,f){return f},yl=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},wl=function(l,f){return f},ml=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},$l=function(l,f){return ne("for",{times:l,for:f})},xl=function(l,f){return ne("for",{times:l,for:f})},bl=function(l){return ne("return",{expr:l})},Al=function(l){return ne("loop",{statements:l})},Cl=function(){return ne("break",{})},_l=function(){return ne("continue",{})},kl=function(l,f,y){return f==="+="?ne("addAssign",{dest:l,expr:y}):f==="-="?ne("subAssign",{dest:l,expr:y}):ne("assign",{dest:l,expr:y})},aa=function(l,f,y){return{op:f,term:y}},Pl=function(l,f){return ne("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ia=function(){return A()},El=function(l){return ne("not",{expr:l})},Ml=function(l,f){return{...l,chain:f}},Sl=function(l){return ne("callChain",{args:l??[]})},la=function(l,f){return f},Fl=function(l,f){return[l,...f]},oa=function(l){return ne("indexChain",{index:l})},Ol=function(l){return ne("propChain",{name:l})},Nl=function(l,f,y,c){return ne("if",{cond:l,then:f,elseif:y??[],else:c})},Tl=function(l,f){return[l,...f]},Il=function(l,f){return{cond:l,then:f}},jl=function(l){return l},ua=function(l,f,y){return{q:f,a:y}},Rl=function(l,f,y){return ne("match",{about:l,qs:f??[],default:y})},fa=function(l){return ne("block",{statements:l})},Dl=function(l){return ne("identifier",{name:l})},Ll=function(l){return ne("tmpl",{tmpl:l})},Bl=function(l){return l.join("")},ca=function(l){return l},Hl=function(l){return ne("str",{value:l.join("")})},ha=function(l){return l},pa=function(l){return ne("str",{value:l.join("")})},Ul=function(){return'"'},va=function(){return"'"},ql=function(){return ne("num",{value:parseFloat(A())})},zl=function(){return ne("num",{value:parseFloat(A())})},Wl=function(){return ne("num",{value:parseInt(A(),10)})},Vl=function(){return ne("num",{value:parseInt(A(),10)})},Kl=function(){return ne("bool",{value:!0})},Jl=function(){return ne("bool",{value:!1})},Zl=function(){return ne("null",{})},ga=function(l,f){return{k:l,v:f}},Gl=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},da=function(l){return l},ya=function(l){return ne("arr",{value:l})},Ql=function(l,f){return{name:l,argType:f}},wa=function(l,f){return[l,...f]},Xl=function(l,f,y,c,s,o){return(l.length>0||y.length>0)&&Ls("Cannot use spaces before or after the function name."),ne("def",{name:f,expr:ne("fn",{args:c??[],retType:s},o??[]),mut:!1,attr:[]})},Yl=function(l,f,y){return ne("fn",{args:l??[],retType:f},y??[])},ma=function(l){return l},eo=function(l){return ne("arr",{value:l})},$a=function(l,f){return{k:l,v:f}},xa=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},to=function(l,f){return ne("fnTypeSource",{args:l??[],result:f})},ba=function(l,f){return[l,...f]},ro=function(l,f){return ne("namedTypeSource",{name:l,inner:f})},so=function(l){return ne("namedTypeSource",{name:l,inner:null})},no=function(){return A()},ao=function(){return A()},io=function(l){return ne("block",{statements:l??[]})},i=0,W=0,Ds=[{line:1,column:1}],a=0,z=[],C=0,O={},jr;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function A(){return t.substring(W,i)}function T(){return Bs(W,i)}function Ls(l,f){throw f=f!==void 0?f:Bs(W,i),Aa(l,f)}function Y(l,f){return{type:"literal",text:l,ignoreCase:f}}function Ht(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function lo(){return{type:"any"}}function se(){return{type:"end"}}function Nt(l){var f=Ds[l],y;if(f)return f;for(y=l-1;!Ds[y];)y--;for(f=Ds[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ds[l]=f,f}function Bs(l,f,y){var c=Nt(l),s=Nt(f),o={source:n,start:{offset:l,line:c.line,column:c.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(o.start=n.offset(o.start),o.end=n.offset(o.end)),o}function S(l){i<a||(i>a&&(a=i,z=[]),z.push(l))}function Aa(l,f){return new eu(l,null,null,f)}function Hs(l,f,y){return new eu(eu.buildMessage(l,f),l,f,y)}function M(){var l,f,y,c=i*76+0,s=O[c];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ca();y!==e;)f.push(y),y=Ca();return W=l,f=Xi(f),l=f,O[c]={nextPos:i,result:l},l}function Ca(){var l,f,y=i*76+1,c=O[y];return c?(i=c.nextPos,c.result):(l=i,f=Na(),f!==e&&(W=l,f=Yi()),l=f,l===e&&(l=i,f=qs(),f!==e&&(W=l,f=el()),l=f,l===e&&(l=oo(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,C===0&&S(tr))))),O[y]={nextPos:i,result:l},l)}function oo(){var l,f,y,c,s,o,p=i*76+2,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,C===0&&S(rr)),f!==e){for(y=[],c=i,s=i,C++,o=za(),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,o=za(),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=tl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===b?(f=b,i+=2):(f=e,C===0&&S(ki)),f!==e){for(y=[],c=i,s=i,C++,t.substr(i,2)===k?(o=k,i+=2):(o=e,C===0&&S(vn)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.substr(i,2)===k?(o=k,i+=2):(o=e,C===0&&S(vn)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr)),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);t.substr(i,2)===k?(c=k,i+=2):(c=e,C===0&&S(vn)),c!==e?(W=l,l=rl()):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function _a(){var l,f,y,c,s,o=i*76+3,p=O[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();for(y=ka(),y===e&&(y=null),c=[],s=x();s!==e;)c.push(s),s=x();return W=l,l=sl(y),O[o]={nextPos:i,result:l},l}function ka(){var l,f,y,c,s,o,p,u,g=i*76+4,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=xn(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=xn(),u!==e?(W=c,c=sa(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=xn(),u!==e?(W=c,c=sa(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=nl(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function uo(){var l,f,y,c,s,o,p,u,g=i*76+5,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=bn(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=bn(),u!==e?(W=c,c=mn(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=bn(),u!==e?(W=c,c=mn(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=al(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function os(){var l,f,y,c,s,o,p,u,g=i*76+6,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=fr(),f!==e){for(y=[],c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=fr(),u!==e?(W=c,c=$n(f,u)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ue(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=fr(),u!==e?(W=c,c=$n(f,u)):(i=c,c=e)}else i=c,c=e}W=l,l=il(f,y)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function xn(){var l,f=i*76+7,y=O[f];return y?(i=y.nextPos,y.result):(l=us(),l===e&&(l=Pa(),l===e&&(l=fr())),O[f]={nextPos:i,result:l},l)}function bn(){var l,f=i*76+8,y=O[f];return y?(i=y.nextPos,y.result):(l=$r(),l===e&&(l=Ua(),l===e&&(l=us())),O[f]={nextPos:i,result:l},l)}function fr(){var l,f=i*76+9,y=O[f];return y?(i=y.nextPos,y.result):(l=$r(),l===e&&(l=Ua(),l===e&&(l=Ea(),l===e&&(l=ho(),l===e&&(l=fo(),l===e&&(l=Ma(),l===e&&(l=co(),l===e&&(l=po(),l===e&&(l=vo(),l===e&&(l=go(),l===e&&(l=yo(),l===e&&(l=Re()))))))))))),O[f]={nextPos:i,result:l},l)}function Re(){var l,f=i*76+10,y=O[f];return y?(i=y.nextPos,y.result):(l=wo(),l===e&&(l=Rr()),O[f]={nextPos:i,result:l},l)}function Rr(){var l,f=i*76+11,y=O[f];return y?(i=y.nextPos,y.result):(l=xo(),l===e&&(l=Po(),l===e&&(l=br(),l===e&&(l=Dr()))),O[f]={nextPos:i,result:l},l)}function Dr(){var l,f,y,c,s,o,p=i*76+12,u=O[p];if(u)return i=u.nextPos,u.result;if(l=Ao(),l===e&&(l=_n(),l===e&&(l=Na(),l===e&&(l=qs(),l===e&&(l=Ra(),l===e&&(l=Mn(),l===e&&(l=Ba(),l===e&&(l=Ha(),l===e&&(l=ko(),l===e&&(l=mo(),l===e&&(l=Co(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(wr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e?(W=l,l=na(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=O[f];return y?(i=y.nextPos,y.result):(l=Ra(),l===e&&(l=qs(),l===e&&(l=Mn(),l===e&&(l=On(),l===e&&(l=qa(),l===e&&(l=Ba()))))),O[f]={nextPos:i,result:l},l)}function us(){var l,f,y,c,s,o,p,u,g,v,m=i*76+14,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===j?(f=j,i+=2):(f=e,C===0&&S(mr)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(o=D,i++):(o=e,C===0&&S(sr)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(u=uo(),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();t.charCodeAt(i)===125?(v=V,i++):(v=e,C===0&&S(Ye)),v!==e?(W=l,l=ll(c,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Pa(){var l,f,y,c,s,o,p=i*76+15,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Bt)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=He(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();o=Te(),o!==e?(W=l,l=ol(c,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Bt)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();c=Te(),c!==e?(W=l,l=ul(c)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function $r(){var l,f,y,c,s,o,p,u,g,v=i*76+16,m=O[v];if(m)return i=m.nextPos,m.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,C===0&&S(Ir)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===58?(p=ae,i++):(p=e,C===0&&S(dt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Ut(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===61?(p=_e,i++):(p=e,C===0&&S(yt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Re(),g!==e?(W=l,l=fl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===H?(f=H,i+=3):(f=e,C===0&&S(ns)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===58?(p=ae,i++):(p=e,C===0&&S(dt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Ut(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===61?(p=_e,i++):(p=e,C===0&&S(yt)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();g=Re(),g!==e?(W=l,l=cl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[v]={nextPos:i,result:l},l}function Ea(){var l,f,y,c,s=i*76+17,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,C===0&&S(Pi)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();c=Re(),c!==e?(W=l,l=hl(c)):(i=l,l=e)}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function fo(){var l,f,y,c,s,o,p,u=i*76+18,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,2)===B?(f=B,i+=2):(f=e,C===0&&S(Ei)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=He(),c!==e){for(s=i,o=[],p=x();p!==e;)o.push(p),p=x();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),o=[],p=x();p!==e;)o.push(p),p=x();t.charCodeAt(i)===93?(p=q,i++):(p=e,C===0&&S(ks)),p!==e?(W=l,l=pl(c,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[u]={nextPos:i,result:l},l}function Ma(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+19,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(Ir)),s!==e){if(o=[],p=x(),p!==e)for(;p!==e;)o.push(p),p=x();else o=e;if(o!==e)if(p=He(),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();for(t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e)if(t.charCodeAt(i)===41?(w=F,i++):(w=e,C===0&&S(Pt)),w!==e){for(_=[],P=x();P!==e;)_.push(P),P=x();P=Tt(),P!==e?(W=l,l=vl(p,m,P)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(Ir)),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();if(v=Re(),v!==e){if(m=[],w=x(),w!==e)for(;w!==e;)m.push(w),w=x();else m=e;m!==e?(w=Tt(),w!==e?(W=l,l=gl(o,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function co(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R=i*76+20,Z=O[R];if(Z)return i=Z.nextPos,Z.result;if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(Ir)),s!==e){if(o=[],p=x(),p!==e)for(;p!==e;)o.push(p),p=x();else o=e;if(o!==e)if(p=He(),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();if(g=i,t.charCodeAt(i)===61?(v=_e,i++):(v=e,C===0&&S(yt)),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();w=Re(),w!==e?(W=g,g=dl(p,w)):(i=g,g=e)}else i=g,g=e;for(g===e&&(g=null),t.charCodeAt(i)===44?(v=G,i++):(v=e,C===0&&S(mt)),v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();if(w=Re(),w!==e)if(t.charCodeAt(i)===41?(_=F,i++):(_=e,C===0&&S(Pt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=Tt(),I!==e?(W=l,l=yl(p,g,w,I)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(Ir)),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(u=i,t.charCodeAt(i)===61?(g=_e,i++):(g=e,C===0&&S(yt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Re(),m!==e?(W=u,u=wl(o,m)):(i=u,u=e)}else i=u,u=e;for(u===e&&(u=null),t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e){if(w=[],_=x(),_!==e)for(;_!==e;)w.push(_),_=x();else w=e;w!==e?(_=Tt(),_!==e?(W=l,l=ml(o,u,m,_)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(wr)),c!==e)if(s=Re(),s!==e)if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();u=Tt(),u!==e?(W=l,l=$l(s,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;s!==e?(o=Tt(),o!==e?(W=l,l=xl(c,o)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return O[R]={nextPos:i,result:l},l}function ho(){var l,f,y,c,s,o=i*76+21,p=O[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===X?(f=X,i+=6):(f=e,C===0&&S(Ps)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Re(),s!==e?(W=l,l=bl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[o]={nextPos:i,result:l},l}function po(){var l,f,y,c,s,o,p,u,g=i*76+22,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===$e?(f=$e,i+=4):(f=e,C===0&&S(ur)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();if(o=os(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=Al(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function vo(){var l,f,y,c,s=i*76+23,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===ke?(f=ke,i+=5):(f=e,C===0&&S(Mi)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Cl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function go(){var l,f,y,c,s=i*76+24,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,8)===ge?(f=ge,i+=8):(f=e,C===0&&S(Si)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=_l()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function yo(){var l,f,y,c,s,o,p=i*76+25,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Re(),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.substr(i,2)===qe?(c=qe,i+=2):(c=e,C===0&&S(Fi)),c===e&&(t.substr(i,2)===it?(c=it,i+=2):(c=e,C===0&&S(Oi)),c===e&&(t.charCodeAt(i)===61?(c=_e,i++):(c=e,C===0&&S(yt)))),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();o=Re(),o!==e?(W=l,l=kl(f,c,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function wo(){var l,f,y,c,s,o,p,u,g=i*76+26,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=Rr(),f!==e){for(y=[],c=i,s=[],o=xr();o!==e;)s.push(o),o=xr();if(o=Sa(),o!==e){for(p=[],u=xr();u!==e;)p.push(u),u=xr();u=Rr(),u!==e?(W=c,c=aa(f,o,u)):(i=c,c=e)}else i=c,c=e;if(c!==e)for(;c!==e;){for(y.push(c),c=i,s=[],o=xr();o!==e;)s.push(o),o=xr();if(o=Sa(),o!==e){for(p=[],u=xr();u!==e;)p.push(u),u=xr();u=Rr(),u!==e?(W=c,c=aa(f,o,u)):(i=c,c=e)}else i=c,c=e}else y=e;y!==e?(W=l,l=Pl(f,y)):(i=l,l=e)}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function xr(){var l,f,y,c=i*76+27,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(y=Ue(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=xe()),O[c]={nextPos:i,result:l},l)}function Sa(){var l,f,y=i*76+28,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===lt?(f=lt,i+=2):(f=e,C===0&&S(Zn)),f===e&&(t.substr(i,2)===ot?(f=ot,i+=2):(f=e,C===0&&S(Ni)),f===e&&(t.substr(i,2)===Ie?(f=Ie,i+=2):(f=e,C===0&&S(Ti)),f===e&&(t.substr(i,2)===at?(f=at,i+=2):(f=e,C===0&&S(Ii)),f===e&&(t.substr(i,2)===Mt?(f=Mt,i+=2):(f=e,C===0&&S(ji)),f===e&&(t.substr(i,2)===St?(f=St,i+=2):(f=e,C===0&&S(Ri)),f===e&&(t.charCodeAt(i)===60?(f=Qe,i++):(f=e,C===0&&S(Gn)),f===e&&(t.charCodeAt(i)===62?(f=Fr,i++):(f=e,C===0&&S(gn)),f===e&&(t.charCodeAt(i)===43?(f=Dt,i++):(f=e,C===0&&S(Qn)),f===e&&(t.charCodeAt(i)===45?(f=yr,i++):(f=e,C===0&&S(Di)),f===e&&(t.charCodeAt(i)===42?(f=kt,i++):(f=e,C===0&&S(Xn)),f===e&&(t.charCodeAt(i)===94?(f=dr,i++):(f=e,C===0&&S(Yn)),f===e&&(t.charCodeAt(i)===47?(f=Or,i++):(f=e,C===0&&S(Li)),f===e&&(t.charCodeAt(i)===37?(f=_r,i++):(f=e,C===0&&S(Bi))))))))))))))),f!==e&&(W=l,f=ia()),l=f,O[y]={nextPos:i,result:l},l)}function mo(){var l,f,y,c=i*76+29,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Er,i++):(f=e,C===0&&S(Hi)),f!==e?(y=Re(),y!==e?(W=l,l=El(y)):(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function br(){var l,f,y,c,s=i*76+30,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,f=Dr(),f!==e){if(y=[],c=An(),c===e&&(c=Fa(),c===e&&(c=Cn())),c!==e)for(;c!==e;)y.push(c),c=An(),c===e&&(c=Fa(),c===e&&(c=Cn()));else y=e;y!==e?(W=l,l=Ml(f,y)):(i=l,l=e)}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function An(){var l,f,y,c,s,o,p=i*76+31,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(wr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=$o(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e?(W=l,l=Sl(c)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function $o(){var l,f,y,c,s,o,p=i*76+32,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Re(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Re(),o!==e?(W=c,c=la(f,o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Re(),o!==e?(W=c,c=la(f,o)):(i=c,c=e)):(i=c,c=e);W=l,l=Fl(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Fa(){var l,f,y,c,s,o,p=i*76+33,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=oa(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Cn(){var l,f,y,c=i*76+34,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=U,i++):(f=e,C===0&&S(is)),f!==e?(y=He(),y!==e?(W=l,l=Ol(y)):(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function xo(){var l,f,y,c,s,o,p,u,g,v,m=i*76+35,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===K?(f=K,i+=2):(f=e,C===0&&S(yn)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],o=x(),o!==e)for(;o!==e;)s.push(o),o=x();else s=e;if(s!==e)if(o=Tt(),o!==e){if(p=i,u=[],g=x(),g!==e)for(;g!==e;)u.push(g),g=x();else u=e;if(u!==e?(g=Oa(),g!==e?p=g:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),u=i,g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;g!==e?(v=bo(),v!==e?u=v:(i=u,u=e)):(i=u,u=e),u===e&&(u=null),W=l,l=Nl(c,o,p,u)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Oa(){var l,f,y,c,s,o,p=i*76+36,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Us(),f!==e){for(y=[],c=i,s=[],o=x();o!==e;)s.push(o),o=x();for(o=Us(),o!==e?c=o:(i=c,c=e);c!==e;){for(y.push(c),c=i,s=[],o=x();o!==e;)s.push(o),o=x();o=Us(),o!==e?c=o:(i=c,c=e)}W=l,l=Tl(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Us(){var l,f,y,c,s,o,p,u=i*76+37,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,4)===te?(f=te,i+=4):(f=e,C===0&&S(Ui)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();p=Tt(),p!==e?(W=l,l=Il(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return O[u]={nextPos:i,result:l},l}function bo(){var l,f,y,c,s,o=i*76+38,p=O[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ce?(f=ce,i+=4):(f=e,C===0&&S(qi)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Tt(),s!==e?(W=l,l=jl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[o]={nextPos:i,result:l},l}function Ao(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=i*76+39,re=O[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.substr(i,5)===he?(f=he,i+=5):(f=e,C===0&&S(zi)),f!==e)if(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();if(t.charCodeAt(i)===123?(p=D,i++):(p=e,C===0&&S(sr)),p!==e){for(u=[],g=x();g!==e;)u.push(g),g=x();if(g=[],v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=ua(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(g.push(v),v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=ua(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else g=e;if(g!==e){if(v=i,t.charCodeAt(i)===42?(m=kt,i++):(m=e,C===0&&S(Xn)),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===ie?(_=ie,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=Tt(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();v=I}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();t.charCodeAt(i)===125?(w=V,i++):(w=e,C===0&&S(Ye)),w!==e?(W=l,l=Rl(s,g,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return O[ye]={nextPos:i,result:l},l}function _n(){var l,f,y,c,s,o,p,u,g=i*76+40,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Ne?(f=Ne,i+=4):(f=e,C===0&&S(Ms)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],o=x();o!==e;)s.push(o),o=x();if(o=os(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=fa(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[g]={nextPos:i,result:l},l}function Co(){var l,f,y=i*76+41,c=O[y];return c?(i=c.nextPos,c.result):(l=i,f=Fo(),f!==e&&(W=l,f=Dl(f)),l=f,O[y]={nextPos:i,result:l},l)}function Na(){var l,f,y,c,s,o,p=i*76+42,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===96?(f=de,i++):(f=e,C===0&&S(Ss)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===96?(o=de,i++):(o=e,C===0&&S(Ss)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Ta(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===96?(o=de,i++):(o=e,C===0&&S(Ss)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Ta(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===96?(c=de,i++):(c=e,C===0&&S(Ss)),c!==e?(W=l,l=Ll(y)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Ta(){var l,f,y,c,s,o,p=i*76+43,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=Re(),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?l=c:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ia(),y!==e)for(;y!==e;)f.push(y),y=Ia();else f=e;f!==e&&(W=l,f=Bl(f)),l=f}return O[p]={nextPos:i,result:l},l}function Ia(){var l,f=i*76+44,y=O[f];return y?(i=y.nextPos,y.result):(l=ja(),l===e&&(Gt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Wi))),O[f]={nextPos:i,result:l},l)}function ja(){var l,f,y,c=i*76+45,s=O[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(_s.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,C===0&&S(Fs)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),O[c]={nextPos:i,result:l},l)}function qs(){var l,f,y,c,s,o,p=i*76+46,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===34?(f=we,i++):(f=e,C===0&&S(Os)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===34?(o=we,i++):(o=e,C===0&&S(Os)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=kn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ca(o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===34?(o=we,i++):(o=e,C===0&&S(Os)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=kn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ca(o)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===34?(c=we,i++):(c=e,C===0&&S(Os)),c!==e?(W=l,l=Hl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=ue,i++):(f=e,C===0&&S(Ns)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===39?(o=ue,i++):(o=e,C===0&&S(Ns)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Pn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ha(o)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===39?(o=ue,i++):(o=e,C===0&&S(Ns)),C--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Pn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,C===0&&S(tr))),o!==e?(W=c,c=ha(o)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===39?(c=ue,i++):(c=e,C===0&&S(Ns)),c!==e?(W=l,l=pa(y)):(i=l,l=e)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function kn(){var l,f,y=i*76+47,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===De?(f=De,i+=2):(f=e,C===0&&S(Ts)),f!==e&&(W=l,f=Ul()),l=f,O[y]={nextPos:i,result:l},l)}function Pn(){var l,f,y=i*76+48,c=O[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===je?(f=je,i+=2):(f=e,C===0&&S(Is)),f!==e&&(W=l,f=va()),l=f,O[y]={nextPos:i,result:l},l)}function Ra(){var l,f=i*76+49,y=O[f];return y?(i=y.nextPos,y.result):(l=En(),l===e&&(l=Da()),O[f]={nextPos:i,result:l},l)}function En(){var l,f,y,c,s,o,p=i*76+50,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(c=U,i++):(c=e,C===0&&S(is)),c!==e){if(s=[],ht.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,C===0&&S(Et)),o!==e)for(;o!==e;)s.push(o),ht.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,C===0&&S(Et));else s=e;s!==e?(W=l,l=ql()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Et)),f!==e)if(t.charCodeAt(i)===46?(y=U,i++):(y=e,C===0&&S(is)),y!==e){if(c=[],ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Et)),s!==e)for(;s!==e;)c.push(s),ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Et));else c=e;c!==e?(W=l,l=zl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Da(){var l,f,y,c,s=i*76+51,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Et));else y=e;y!==e?(W=l,l=Wl()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,Wr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Et)),f!==e?(W=l,l=Vl()):(i=l,l=e)),O[s]={nextPos:i,result:l},l}function Mn(){var l,f=i*76+52,y=O[f];return y?(i=y.nextPos,y.result):(l=La(),l===e&&(l=_o()),O[f]={nextPos:i,result:l},l)}function La(){var l,f,y,c,s=i*76+53,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Be?(f=Be,i+=4):(f=e,C===0&&S(ta)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Kl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function _o(){var l,f,y,c,s=i*76+54,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,C===0&&S(nr)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Jl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function Ba(){var l,f,y,c,s=i*76+55,o=O[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,C===0&&S(Vi)),f!==e?(y=i,C++,xt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(or)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Zl()):(i=l,l=e)):(i=l,l=e),O[s]={nextPos:i,result:l},l)}function Ha(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+56,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=Gl(c)):(i=l,l=e)}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function ko(){var l,f,y,c,s,o,p,u,g,v,m=i*76+57,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=Re(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(o)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=Re(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(o)}else i=s,s=e;for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=ya(c)):(i=l,l=e)}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Sn(){var l,f,y,c,s,o,p,u=i*76+58,g=O[u];if(g)return i=g.nextPos,g.result;if(l=i,f=He(),f!==e){for(y=i,c=[],s=x();s!==e;)c.push(s),s=x();if(t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e){for(o=[],p=x();p!==e;)o.push(p),p=x();p=Ut(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),W=l,l=Ql(f,y)}else i=l,l=e;return O[u]={nextPos:i,result:l},l}function Fn(){var l,f,y,c,s,o,p=i*76+59,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Sn(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Sn(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Sn(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);W=l,l=wa(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Ua(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I,R,Z,ye=i*76+60,re=O[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.charCodeAt(i)===64?(f=st,i++):(f=e,C===0&&S(Ki)),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(c=He(),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();if(t.charCodeAt(i)===40?(o=E,i++):(o=e,C===0&&S(wr)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(u=Fn(),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();if(t.charCodeAt(i)===41?(v=F,i++):(v=e,C===0&&S(Pt)),v!==e){for(m=i,w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===58?(_=ae,i++):(_=e,C===0&&S(dt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=Ut(),I!==e?m=I:(i=m,m=e)}else i=m,m=e;for(m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===123?(_=D,i++):(_=e,C===0&&S(sr)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();for(I=os(),I===e&&(I=null),R=[],Z=x();Z!==e;)R.push(Z),Z=x();t.charCodeAt(i)===125?(Z=V,i++):(Z=e,C===0&&S(Ye)),Z!==e?(W=l,l=Xl(y,c,s,u,m,I)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[ye]={nextPos:i,result:l},l}function Po(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P=i*76+61,I=O[P];if(I)return i=I.nextPos,I.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Fn(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=i,u=[],g=x();g!==e;)u.push(g),g=x();if(t.charCodeAt(i)===58?(g=ae,i++):(g=e,C===0&&S(dt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Ut(),m!==e?p=m:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),u=[],g=x();g!==e;)u.push(g),g=x();if(t.charCodeAt(i)===123?(g=D,i++):(g=e,C===0&&S(sr)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();for(m=os(),m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();t.charCodeAt(i)===125?(_=V,i++):(_=e,C===0&&S(Ye)),_!==e?(W=l,l=Yl(c,p,m)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[P]={nextPos:i,result:l},l}function On(){var l,f,y,c,s,o,p,u,g,v,m=i*76+62,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Ft,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=Te(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(o)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=Te(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();for(t.charCodeAt(i)===44?(u=G,i++):(u=e,C===0&&S(mt)),u===e&&(u=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(o)}else i=s,s=e;for(s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===93?(o=q,i++):(o=e,C===0&&S(ks)),o!==e?(W=l,l=eo(c)):(i=l,l=e)}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function qa(){var l,f,y,c,s,o,p,u,g,v,m,w,_,P,I=i*76+63,R=O[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,o=He(),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.charCodeAt(i)===58?(u=ae,i++):(u=e,C===0&&S(dt)),u!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=xa(c)):(i=l,l=e)}else i=l,l=e;return O[I]={nextPos:i,result:l},l}function Ut(){var l,f=i*76+64,y=O[f];return y?(i=y.nextPos,y.result):(l=Eo(),l===e&&(l=So()),O[f]={nextPos:i,result:l},l)}function Eo(){var l,f,y,c,s,o,p,u,g,v,m=i*76+65,w=O[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Mo(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();if(t.charCodeAt(i)===41?(o=F,i++):(o=e,C===0&&S(Pt)),o!==e){for(p=[],u=x();u!==e;)p.push(u),u=x();if(t.substr(i,2)===ie?(u=ie,i+=2):(u=e,C===0&&S(Es)),u!==e){for(g=[],v=x();v!==e;)g.push(v),v=x();v=Ut(),v!==e?(W=l,l=to(c,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return O[m]={nextPos:i,result:l},l}function Mo(){var l,f,y,c,s,o,p=i*76+66,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Ut(),f!==e){for(y=[],c=i,s=Lr(),s!==e?(o=Ut(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Lr(),s!==e?(o=Ut(),o!==e?c=o:(i=c,c=e)):(i=c,c=e);W=l,l=ba(f,y)}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function So(){var l,f,y,c,s,o,p,u,g=i*76+67,v=O[g];if(v)return i=v.nextPos,v.result;if(l=i,f=He(),f!==e){for(y=[],c=xe();c!==e;)y.push(c),c=xe();if(t.charCodeAt(i)===60?(c=Qe,i++):(c=e,C===0&&S(Gn)),c!==e){for(s=[],o=xe();o!==e;)s.push(o),o=xe();if(o=Ut(),o!==e){for(p=[],u=xe();u!==e;)p.push(u),u=xe();t.charCodeAt(i)===62?(u=Fr,i++):(u=e,C===0&&S(gn)),u!==e?(W=l,l=ro(f,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=He(),f!==e&&(W=l,f=so(f)),l=f),O[g]={nextPos:i,result:l},l}function He(){var l,f,y,c,s=i*76+68,o=O[s];if(o)return i=o.nextPos,o.result;if(l=i,It.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Ji)),f!==e){for(y=[],Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));c!==e;)y.push(c),Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));W=l,l=no()}else i=l,l=e;return O[s]={nextPos:i,result:l},l}function Fo(){var l,f,y,c,s,o,p=i*76+69,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,f=He(),f!==e){for(y=[],c=i,t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e?(o=He(),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,t.charCodeAt(i)===58?(s=ae,i++):(s=e,C===0&&S(dt)),s!==e?(o=He(),o!==e?(s=[s,o],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=ao()}else i=l,l=e;return O[p]={nextPos:i,result:l},l}function Lr(){var l,f,y,c,s,o=i*76+70,p=O[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();if(t.charCodeAt(i)===44?(y=G,i++):(y=e,C===0&&S(mt)),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();f=[f,y,c],l=f}else i=l,l=e;if(l===e)if(l=[],f=x(),f!==e)for(;f!==e;)l.push(f),f=x();else l=e;return O[o]={nextPos:i,result:l},l}function Tt(){var l,f,y,c,s,o,p=i*76+71,u=O[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=os(),c===e&&(c=null),s=[],o=x();o!==e;)s.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=io(c)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=fr()),O[p]={nextPos:i,result:l},l}function Ue(){var l,f=i*76+72,y=O[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Lt?(l=Lt,i+=2):(l=e,C===0&&S(Zi)),l===e&&(Kn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(ra))),O[f]={nextPos:i,result:l},l)}function za(){var l,f,y=i*76+73,c=O[y];return c?(i=c.nextPos,c.result):(l=i,C++,t.length>i?(f=t.charAt(i),i++):(f=e,C===0&&S(tr)),C--,f===e?l=void 0:(i=l,l=e),l===e&&(l=Ue()),O[y]={nextPos:i,result:l},l)}function x(){var l,f=i*76+74,y=O[f];return y?(i=y.nextPos,y.result):(Ci.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Gi)),O[f]={nextPos:i,result:l},l)}function xe(){var l,f=i*76+75,y=O[f];return y?(i=y.nextPos,y.result):(_i.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Qi)),O[f]={nextPos:i,result:l},l)}function ne(l,f,y){const c={type:l};f.children=y;for(const o of Object.keys(f))f[o]!==void 0&&(c[o]=f[o]);const s=T();return c.loc={start:s.start.offset,end:s.end.offset-1},c}if(jr=d(),jr!==e&&i===t.length)return jr;throw jr!==e&&i<t.length&&S(se()),Hs(z,a<t.length?t.charAt(a):null,a<t.length?Bs(a,a+1):Bs(a,a))}const ab=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function ib(t){return ab.includes(t.type)}function td(t){return"chain"in t&&t.chain!==null}function lb(t,r,e){return{type:"call",target:t,args:r,loc:e}}function ob(t,r,e){return{type:"index",target:t,index:r,loc:e}}function ub(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function ut(t,r){const e=r(t);switch(e.type){case"def":{e.expr=ut(e.expr,r);break}case"return":{e.expr=ut(e.expr,r);break}case"each":{e.items=ut(e.items,r),e.for=ut(e.for,r);break}case"for":{e.from!=null&&(e.from=ut(e.from,r)),e.to!=null&&(e.to=ut(e.to,r)),e.times!=null&&(e.times=ut(e.times,r)),e.for=ut(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ut(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=ut(e.expr,r),e.dest=ut(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=ut(e.operands[n],r);break}case"not":{e.expr=ut(e.expr,r);break}case"if":{e.cond=ut(e.cond,r),e.then=ut(e.then,r);for(const n of e.elseif)n.cond=ut(n.cond,r),n.then=ut(n.then,r);e.else!=null&&(e.else=ut(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=ut(e.children[n],r);break}case"match":{e.about=ut(e.about,r);for(const n of e.qs)n.q=ut(n.q,r),n.a=ut(n.a,r);e.default!=null&&(e.default=ut(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ut(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=ut(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],ut(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=ut(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=ut(e.args[n],r);break}case"indexChain":{e.index=ut(e.index,r);break}case"call":{e.target=ut(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=ut(e.args[n],r);break}case"index":{e.target=ut(e.target,r),e.index=ut(e.index,r);break}case"prop":{e.target=ut(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=ut(e.members[n],r);break}}if(td(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=ut(e.chain[n],r);return e}const Wc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Vc(t){throw new iu(`Reserved word "${t}" cannot be used as variable name.`)}function fb(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Wc.includes(t.name)&&Vc(t.name);break}case"meta":{t.name!=null&&Wc.includes(t.name)&&Vc(t.name);break}case"fn":{for(const r of t.args)Wc.includes(r.name)&&Vc(r.name);break}}return t}function cb(t){for(const r of t)ut(r,fb);return t}function Av(t){return{type:"simple",name:t}}function hb(t,r){return{type:"generic",name:t,inners:r}}function pb(t,r){return{type:"fn",args:t,result:r}}function Uf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Uf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Uf(n)).join(", "),e=Uf(t.result);return`@(${r}) { ${e} }`}}}function Fu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Av(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Fu(t.inner):r=Av("any"),hb(t.name,[r])}}throw new iu(`Unknown type: '${Uf(t)}'`)}else{const r=t.args.map(e=>Fu(e));return pb(r,Fu(t.result))}}function vb(t){switch(t.type){case"def":{t.varType!=null&&Fu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Fu(r.argType);t.retType!=null&&Fu(t.retType);break}}return t}function gb(t){for(const r of t)ut(r,vb);return t}function qf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=qf(n.expr.children)),r.push(n);else{if(e.length>0)throw new iu("invalid attribute.");switch(n.type){case"fn":{n.children=qf(n.children);break}case"block":{n.statements=qf(n.statements);break}}r.push(n)}if(e.length>0)throw new iu("invalid attribute.");return r}function db(t){if(ib(t)&&td(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=lb(n,h.args,h.loc);break}case"indexChain":{n=ob(n,h.index,h.loc);break}case"propChain":{n=ub(n,h.name,h.loc);break}}return n}return t}function yb(t){for(let r=0;r<t.length;r++)t[r]=ut(t[r],db);return t}function zf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function rd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return zf(t,r,e);{const{left:n,right:h,info:d}=t;return zf(n,rd(h,r,e),d)}}function zo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[zo(t.left),zo(t.right)]}}const wb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:zo(t.left),right:zo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:zo(t.left),right:zo(t.right)}),priority:3}};function mb(t){const r=t.operators.map(n=>{const h=wb[n];if(h==null)throw new iu(`No such operator: ${n}.`);return h});let e=zf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=rd(e,t.operands[2+n],r[1+n]);return zo(e)}function $b(t){for(let r=0;r<t.length;r++)t[r]=ut(t[r],e=>e.type==="infix"?mb(e):e);return t}const Lo=class Lo{constructor(){me(this,"plugins");this.plugins={validate:[cb,gb],transform:[qf,yb,$b]}}static parse(r){return Lo.instance==null&&(Lo.instance=new Lo),Lo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=bv(r,{startRule:"Preprocess"});e=bv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new iu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new iu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};me(Lo,"instance");let Th=Lo;const xb="0.14.1",bb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Ih=[],Wu=null;function Ab(t){return Ih=Th.parse(t),JSON.stringify(Ih,null,"	")}async function Cb(t){Wu==null||Wu.abort(),Wu=new Cs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Fh(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Fh(e.val,!0),print:!1});break}}});try{await Wu.exec(Ih)}catch(r){t.err(r)}}const _b=Object.freeze(Object.defineProperty({__proto__:null,exec:Cb,parse:Ab,samples:bb,version:xb},Symbol.toStringTag,{value:"Module"})),kb=t=>(ty("data-v-449a2641"),t=t(),ry(),t),Pb={id:"root"},Eb={id:"grid1"},Mb={class:"type"},Sb={id:"grid2"},Fb=kb(()=>cn("header",null,null,-1)),Cv=["next","develop","0.16.0","0.15.0","0.14.1"],_v="0.16.0",Ob=uf({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:h,samples:d}={next:L0,develop:m$,"0.16.0":Y$,"0.15.0":Bx,"0.14.1":_b}[r.ver],$=Bo(window.localStorage.getItem(h)??'<: "Hello, AiScript!"'),b=Bo([]),k=Bo(""),E=Bo(null);Zu($,()=>{window.localStorage.setItem(h,$.value);try{k.value=e($.value),E.value=null}catch(j){const D=j;E.value=D.message,console.error("info"in D?D.info:D);return}},{immediate:!0});function F(){b.value=[],n({in:j=>new Promise(D=>{const V=window.prompt(j);D(V??"")}),out:j=>b.value.push(j),end:j=>b.value.push(j),err:j=>{console.error(j),window.alert(`${j}`)}})}return(j,D)=>(cr(),Mr("div",Pb,[cn("div",Eb,[hr(gm,{modelValue:$.value,"onUpdate:modelValue":D[0]||(D[0]=V=>$.value=V),samples:rf(d),parseError:E.value,onRun:F},null,8,["modelValue","samples","parseError"]),hr(Ju,{id:"logs"},{header:xs(()=>[jn("Output")]),default:xs(()=>[(cr(!0),Mr(Qr,null,Jf(b.value,V=>(cr(),Mr("div",{class:Yr(["log",[{print:V.print},V.type]]),key:V.id},[cn("span",Mb,Wo(V.type),1),jn(" "+Wo(V.text),1)],2))),128))]),_:1})]),cn("div",Sb,[hr(Ju,{id:"ast"},{header:xs(()=>[jn("AST")]),default:xs(()=>[cn("pre",null,Wo(k.value),1)]),_:1}),hr(Ju,{id:"bin"},{header:xs(()=>[jn("Bytecode")]),default:xs(()=>[Fb]),_:1}),hr(Ju,{id:"debugger"},{header:xs(()=>[jn("Debugger")]),_:1})])]))}});const Nb=ff(Ob,[["__scopeId","data-v-449a2641"]]),Tb={id:"wrapper"},Ib=uf({__name:"App",setup(t){const r=Bo(window.localStorage.getItem("version")??_v),e=Object.fromEntries(Cv.map(h=>[h,h+(h==_v?"(latest)":"")]));function n(h){r.value=h,window.localStorage.setItem("version",r.value)}return(h,d)=>(cr(),Mr("div",Tb,[cn("h1",null,[jn(" AiScript ( "),hr(Cg,{id:"version",options:rf(e),onSelect:n},{default:xs(()=>[jn(Wo(r.value),1)]),_:1},8,["options"]),jn(" ) Playground ")]),(cr(!0),Mr(Qr,null,Jf(rf(Cv),$=>(cr(),Mr("div",null,[$==r.value?(cr(),vc(Nb,{key:0,ver:$},null,8,["ver"])):Tu("",!0)]))),256))]))}});const jb=ff(Ib,[["__scopeId","data-v-caf8f745"]]);Fw(jb).mount("#app");
