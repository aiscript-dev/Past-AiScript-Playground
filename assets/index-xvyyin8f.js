var sd=Object.defineProperty;var nd=(t,r,e)=>r in t?sd(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var me=(t,r,e)=>(nd(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))n(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const $ of d.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&n($)}).observe(document,{childList:!0,subtree:!0});function e(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(h){if(h.ep)return;h.ep=!0;const d=e(h);fetch(h.href,d)}})();function jh(t,r){const e=Object.create(null),n=t.split(",");for(let h=0;h<n.length;h++)e[n[h]]=!0;return r?h=>!!e[h.toLowerCase()]:h=>!!e[h]}const ir={},yo=[],zn=()=>{},ad=()=>!1,sc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rh=t=>t.startsWith("onUpdate:"),Fr=Object.assign,Dh=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},id=Object.prototype.hasOwnProperty,xt=(t,r)=>id.call(t,r),Ge=Array.isArray,wo=t=>ac(t)==="[object Map]",kv=t=>ac(t)==="[object Set]",ft=t=>typeof t=="function",Er=t=>typeof t=="string",nc=t=>typeof t=="symbol",ar=t=>t!==null&&typeof t=="object",Pv=t=>(ar(t)||ft(t))&&ft(t.then)&&ft(t.catch),Ev=Object.prototype.toString,ac=t=>Ev.call(t),ld=t=>ac(t).slice(8,-1),Mv=t=>ac(t)==="[object Object]",Lh=t=>Er(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ef=jh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ic=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},ud=/-(\w)/g,Oo=ic(t=>t.replace(ud,(r,e)=>e?e.toUpperCase():"")),od=/\B([A-Z])/g,Do=ic(t=>t.replace(od,"-$1").toLowerCase()),Sv=ic(t=>t.charAt(0).toUpperCase()+t.slice(1)),xc=ic(t=>t?`on${Sv(t)}`:""),eo=(t,r)=>!Object.is(t,r),bc=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},Vf=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},fd=t=>{const r=parseFloat(t);return isNaN(r)?t:r},cd=t=>{const r=Er(t)?Number(t):NaN;return isNaN(r)?t:r};let vp;const Kc=()=>vp||(vp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Bh(t){if(Ge(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],h=Er(n)?gd(n):Bh(n);if(h)for(const d in h)r[d]=h[d]}return r}else if(Er(t)||ar(t))return t}const hd=/;(?![^(]*\))/g,pd=/:([^]+)/,vd=/\/\*[^]*?\*\//g;function gd(t){const r={};return t.replace(vd,"").split(hd).forEach(e=>{if(e){const n=e.split(pd);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Yr(t){let r="";if(Er(t))r=t;else if(Ge(t))for(let e=0;e<t.length;e++){const n=Yr(t[e]);n&&(r+=n+" ")}else if(ar(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const dd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yd=jh(dd);function Fv(t){return!!t||t===""}const zu=t=>Er(t)?t:t==null?"":Ge(t)||ar(t)&&(t.toString===Ev||!ft(t.toString))?JSON.stringify(t,Nv,2):String(t),Nv=(t,r)=>r&&r.__v_isRef?Nv(t,r.value):wo(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,h])=>(e[`${n} =>`]=h,e),{})}:kv(r)?{[`Set(${r.size})`]:[...r.values()]}:ar(r)&&!Ge(r)&&!Mv(r)?String(r):r;let Tn;class wd{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Tn,!r&&Tn&&(this.index=(Tn.scopes||(Tn.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=Tn;try{return Tn=this,r()}finally{Tn=e}}}on(){Tn=this}off(){Tn=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0,this._active=!1}}}function md(t,r=Tn){r&&r.active&&r.effects.push(t)}function $d(){return Tn}const Hh=t=>{const r=new Set(t);return r.w=0,r.n=0,r},Ov=t=>(t.w&wi)>0,Tv=t=>(t.n&wi)>0,xd=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=wi},bd=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const h=r[n];Ov(h)&&!Tv(h)?h.delete(t):r[e++]=h,h.w&=~wi,h.n&=~wi}r.length=e}},Jc=new WeakMap;let Ko=0,wi=1;const Zc=30;let In;const Wu=Symbol(""),Gc=Symbol("");class Uh{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,md(this,n)}run(){if(!this.active)return this.fn();let r=In,e=gi;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=In,In=this,gi=!0,wi=1<<++Ko,Ko<=Zc?xd(this):gp(this),this.fn()}finally{Ko<=Zc&&bd(this),wi=1<<--Ko,In=this.parent,gi=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){In===this?this.deferStop=!0:this.active&&(gp(this),this.onStop&&this.onStop(),this.active=!1)}}function gp(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let gi=!0;const Iv=[];function Lo(){Iv.push(gi),gi=!1}function Bo(){const t=Iv.pop();gi=t===void 0?!0:t}function bs(t,r,e){if(gi&&In){let n=Jc.get(t);n||Jc.set(t,n=new Map);let h=n.get(e);h||n.set(e,h=Hh()),jv(h)}}function jv(t,r){let e=!1;Ko<=Zc?Tv(t)||(t.n|=wi,e=!Ov(t)):e=!t.has(In),e&&(t.add(In),In.deps.push(t))}function Ga(t,r,e,n,h,d){const $=Jc.get(t);if(!$)return;let b=[];if(r==="clear")b=[...$.values()];else if(e==="length"&&Ge(t)){const k=Number(n);$.forEach((E,F)=>{(F==="length"||!nc(F)&&F>=k)&&b.push(E)})}else switch(e!==void 0&&b.push($.get(e)),r){case"add":Ge(t)?Lh(e)&&b.push($.get("length")):(b.push($.get(Wu)),wo(t)&&b.push($.get(Gc)));break;case"delete":Ge(t)||(b.push($.get(Wu)),wo(t)&&b.push($.get(Gc)));break;case"set":wo(t)&&b.push($.get(Wu));break}if(b.length===1)b[0]&&Qc(b[0]);else{const k=[];for(const E of b)E&&k.push(...E);Qc(Hh(k))}}function Qc(t,r){const e=Ge(t)?t:[...t];for(const n of e)n.computed&&dp(n);for(const n of e)n.computed||dp(n)}function dp(t,r){(t!==In||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const Ad=jh("__proto__,__v_isRef,__isVue"),Rv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(nc)),yp=Cd();function Cd(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=kt(this);for(let d=0,$=this.length;d<$;d++)bs(n,"get",d+"");const h=n[r](...e);return h===-1||h===!1?n[r](...e.map(kt)):h}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){Lo();const n=kt(this)[r].apply(this,e);return Bo(),n}}),t}function _d(t){const r=kt(this);return bs(r,"has",t),r.hasOwnProperty(t)}class Dv{constructor(r=!1,e=!1){this._isReadonly=r,this._shallow=e}get(r,e,n){const h=this._isReadonly,d=this._shallow;if(e==="__v_isReactive")return!h;if(e==="__v_isReadonly")return h;if(e==="__v_isShallow")return d;if(e==="__v_raw"&&n===(h?d?Dd:Uv:d?Hv:Bv).get(r))return r;const $=Ge(r);if(!h){if($&&xt(yp,e))return Reflect.get(yp,e,n);if(e==="hasOwnProperty")return _d}const b=Reflect.get(r,e,n);return(nc(e)?Rv.has(e):Ad(e))||(h||bs(r,"get",e),d)?b:es(b)?$&&Lh(e)?b:b.value:ar(b)?h?qv(b):Wh(b):b}}class Lv extends Dv{constructor(r=!1){super(!1,r)}set(r,e,n,h){let d=r[e];if(To(d)&&es(d)&&!es(n))return!1;if(!this._shallow&&(!Kf(n)&&!To(n)&&(d=kt(d),n=kt(n)),!Ge(r)&&es(d)&&!es(n)))return d.value=n,!0;const $=Ge(r)&&Lh(e)?Number(e)<r.length:xt(r,e),b=Reflect.set(r,e,n,h);return r===kt(h)&&($?eo(n,d)&&Ga(r,"set",e,n):Ga(r,"add",e,n)),b}deleteProperty(r,e){const n=xt(r,e);r[e];const h=Reflect.deleteProperty(r,e);return h&&n&&Ga(r,"delete",e,void 0),h}has(r,e){const n=Reflect.has(r,e);return(!nc(e)||!Rv.has(e))&&bs(r,"has",e),n}ownKeys(r){return bs(r,"iterate",Ge(r)?"length":Wu),Reflect.ownKeys(r)}}class kd extends Dv{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const Pd=new Lv,Ed=new kd,Md=new Lv(!0),qh=t=>t,lc=t=>Reflect.getPrototypeOf(t);function yf(t,r,e=!1,n=!1){t=t.__v_raw;const h=kt(t),d=kt(r);e||(eo(r,d)&&bs(h,"get",r),bs(h,"get",d));const{has:$}=lc(h),b=n?qh:e?Kh:rf;if($.call(h,r))return b(t.get(r));if($.call(h,d))return b(t.get(d));t!==h&&t.get(r)}function wf(t,r=!1){const e=this.__v_raw,n=kt(e),h=kt(t);return r||(eo(t,h)&&bs(n,"has",t),bs(n,"has",h)),t===h?e.has(t):e.has(t)||e.has(h)}function mf(t,r=!1){return t=t.__v_raw,!r&&bs(kt(t),"iterate",Wu),Reflect.get(t,"size",t)}function wp(t){t=kt(t);const r=kt(this);return lc(r).has.call(r,t)||(r.add(t),Ga(r,"add",t,t)),this}function mp(t,r){r=kt(r);const e=kt(this),{has:n,get:h}=lc(e);let d=n.call(e,t);d||(t=kt(t),d=n.call(e,t));const $=h.call(e,t);return e.set(t,r),d?eo(r,$)&&Ga(e,"set",t,r):Ga(e,"add",t,r),this}function $p(t){const r=kt(this),{has:e,get:n}=lc(r);let h=e.call(r,t);h||(t=kt(t),h=e.call(r,t)),n&&n.call(r,t);const d=r.delete(t);return h&&Ga(r,"delete",t,void 0),d}function xp(){const t=kt(this),r=t.size!==0,e=t.clear();return r&&Ga(t,"clear",void 0,void 0),e}function $f(t,r){return function(n,h){const d=this,$=d.__v_raw,b=kt($),k=r?qh:t?Kh:rf;return!t&&bs(b,"iterate",Wu),$.forEach((E,F)=>n.call(h,k(E),k(F),d))}}function xf(t,r,e){return function(...n){const h=this.__v_raw,d=kt(h),$=wo(d),b=t==="entries"||t===Symbol.iterator&&$,k=t==="keys"&&$,E=h[t](...n),F=e?qh:r?Kh:rf;return!r&&bs(d,"iterate",k?Gc:Wu),{next(){const{value:j,done:D}=E.next();return D?{value:j,done:D}:{value:b?[F(j[0]),F(j[1])]:F(j),done:D}},[Symbol.iterator](){return this}}}}function ti(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function Sd(){const t={get(d){return yf(this,d)},get size(){return mf(this)},has:wf,add:wp,set:mp,delete:$p,clear:xp,forEach:$f(!1,!1)},r={get(d){return yf(this,d,!1,!0)},get size(){return mf(this)},has:wf,add:wp,set:mp,delete:$p,clear:xp,forEach:$f(!1,!0)},e={get(d){return yf(this,d,!0)},get size(){return mf(this,!0)},has(d){return wf.call(this,d,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:$f(!0,!1)},n={get(d){return yf(this,d,!0,!0)},get size(){return mf(this,!0)},has(d){return wf.call(this,d,!0)},add:ti("add"),set:ti("set"),delete:ti("delete"),clear:ti("clear"),forEach:$f(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=xf(d,!1,!1),e[d]=xf(d,!0,!1),r[d]=xf(d,!1,!0),n[d]=xf(d,!0,!0)}),[t,e,r,n]}const[Fd,Nd,Od,Td]=Sd();function zh(t,r){const e=r?t?Td:Od:t?Nd:Fd;return(n,h,d)=>h==="__v_isReactive"?!t:h==="__v_isReadonly"?t:h==="__v_raw"?n:Reflect.get(xt(e,h)&&h in n?e:n,h,d)}const Id={get:zh(!1,!1)},jd={get:zh(!1,!0)},Rd={get:zh(!0,!1)},Bv=new WeakMap,Hv=new WeakMap,Uv=new WeakMap,Dd=new WeakMap;function Ld(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bd(t){return t.__v_skip||!Object.isExtensible(t)?0:Ld(ld(t))}function Wh(t){return To(t)?t:Vh(t,!1,Pd,Id,Bv)}function Hd(t){return Vh(t,!1,Md,jd,Hv)}function qv(t){return Vh(t,!0,Ed,Rd,Uv)}function Vh(t,r,e,n,h){if(!ar(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const d=h.get(t);if(d)return d;const $=Bd(t);if($===0)return t;const b=new Proxy(t,$===2?n:e);return h.set(t,b),b}function mo(t){return To(t)?mo(t.__v_raw):!!(t&&t.__v_isReactive)}function To(t){return!!(t&&t.__v_isReadonly)}function Kf(t){return!!(t&&t.__v_isShallow)}function zv(t){return mo(t)||To(t)}function kt(t){const r=t&&t.__v_raw;return r?kt(r):t}function Wv(t){return Vf(t,"__v_skip",!0),t}const rf=t=>ar(t)?Wh(t):t,Kh=t=>ar(t)?qv(t):t;function Vv(t){gi&&In&&(t=kt(t),jv(t.dep||(t.dep=Hh())))}function Kv(t,r){t=kt(t);const e=t.dep;e&&Qc(e)}function es(t){return!!(t&&t.__v_isRef===!0)}function Lu(t){return Ud(t,!1)}function Ud(t,r){return es(t)?t:new qd(t,r)}class qd{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:kt(r),this._value=e?r:rf(r)}get value(){return Vv(this),this._value}set value(r){const e=this.__v_isShallow||Kf(r)||To(r);r=e?r:kt(r),eo(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:rf(r),Kv(this))}}function sf(t){return es(t)?t.value:t}const zd={get:(t,r,e)=>sf(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const h=t[r];return es(h)&&!es(e)?(h.value=e,!0):Reflect.set(t,r,e,n)}};function Jv(t){return mo(t)?t:new Proxy(t,zd)}class Wd{constructor(r,e,n,h){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Uh(r,()=>{this._dirty||(this._dirty=!0,Kv(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=n}get value(){const r=kt(this);return Vv(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function Vd(t,r,e=!1){let n,h;const d=ft(t);return d?(n=t,h=zn):(n=t.get,h=t.set),new Wd(n,h,d||!h,e)}function di(t,r,e,n){let h;try{h=n?t(...n):t()}catch(d){uc(d,r,e)}return h}function hn(t,r,e,n){if(ft(t)){const d=di(t,r,e,n);return d&&Pv(d)&&d.catch($=>{uc($,r,e)}),d}const h=[];for(let d=0;d<t.length;d++)h.push(hn(t[d],r,e,n));return h}function uc(t,r,e,n=!0){const h=r?r.vnode:null;if(r){let d=r.parent;const $=r.proxy,b=e;for(;d;){const E=d.ec;if(E){for(let F=0;F<E.length;F++)if(E[F](t,$,b)===!1)return}d=d.parent}const k=r.appContext.config.errorHandler;if(k){di(k,null,10,[t,$,b]);return}}Kd(t,e,h,n)}function Kd(t,r,e,n=!0){console.error(t)}let nf=!1,Xc=!1;const Xr=[];let qn=0;const $o=[];let Wa=null,Iu=0;const Zv=Promise.resolve();let Jh=null;function Jd(t){const r=Jh||Zv;return t?r.then(this?t.bind(this):t):r}function Zd(t){let r=qn+1,e=Xr.length;for(;r<e;){const n=r+e>>>1,h=Xr[n],d=af(h);d<t||d===t&&h.pre?r=n+1:e=n}return r}function Zh(t){(!Xr.length||!Xr.includes(t,nf&&t.allowRecurse?qn+1:qn))&&(t.id==null?Xr.push(t):Xr.splice(Zd(t.id),0,t),Gv())}function Gv(){!nf&&!Xc&&(Xc=!0,Jh=Zv.then(Xv))}function Gd(t){const r=Xr.indexOf(t);r>qn&&Xr.splice(r,1)}function Qd(t){Ge(t)?$o.push(...t):(!Wa||!Wa.includes(t,t.allowRecurse?Iu+1:Iu))&&$o.push(t),Gv()}function bp(t,r=nf?qn+1:0){for(;r<Xr.length;r++){const e=Xr[r];e&&e.pre&&(Xr.splice(r,1),r--,e())}}function Qv(t){if($o.length){const r=[...new Set($o)];if($o.length=0,Wa){Wa.push(...r);return}for(Wa=r,Wa.sort((e,n)=>af(e)-af(n)),Iu=0;Iu<Wa.length;Iu++)Wa[Iu]();Wa=null,Iu=0}}const af=t=>t.id==null?1/0:t.id,Xd=(t,r)=>{const e=af(t)-af(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function Xv(t){Xc=!1,nf=!0,Xr.sort(Xd);try{for(qn=0;qn<Xr.length;qn++){const r=Xr[qn];r&&r.active!==!1&&di(r,null,14)}}finally{qn=0,Xr.length=0,Qv(),nf=!1,Jh=null,(Xr.length||$o.length)&&Xv()}}function Yd(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||ir;let h=e;const d=r.startsWith("update:"),$=d&&r.slice(7);if($&&$ in n){const F=`${$==="modelValue"?"model":$}Modifiers`,{number:j,trim:D}=n[F]||ir;D&&(h=e.map(V=>Er(V)?V.trim():V)),j&&(h=e.map(fd))}let b,k=n[b=xc(r)]||n[b=xc(Oo(r))];!k&&d&&(k=n[b=xc(Do(r))]),k&&hn(k,t,6,h);const E=n[b+"Once"];if(E){if(!t.emitted)t.emitted={};else if(t.emitted[b])return;t.emitted[b]=!0,hn(E,t,6,h)}}function Yv(t,r,e=!1){const n=r.emitsCache,h=n.get(t);if(h!==void 0)return h;const d=t.emits;let $={},b=!1;if(!ft(t)){const k=E=>{const F=Yv(E,r,!0);F&&(b=!0,Fr($,F))};!e&&r.mixins.length&&r.mixins.forEach(k),t.extends&&k(t.extends),t.mixins&&t.mixins.forEach(k)}return!d&&!b?(ar(t)&&n.set(t,null),null):(Ge(d)?d.forEach(k=>$[k]=null):Fr($,d),ar(t)&&n.set(t,$),$)}function oc(t,r){return!t||!sc(r)?!1:(r=r.slice(2).replace(/Once$/,""),xt(t,r[0].toLowerCase()+r.slice(1))||xt(t,Do(r))||xt(t,r))}let ys=null,fc=null;function Jf(t){const r=ys;return ys=t,fc=t&&t.type.__scopeId||null,r}function ey(t){fc=t}function ty(){fc=null}function xs(t,r=ys,e){if(!r||t._n)return t;const n=(...h)=>{n._d&&Op(-1);const d=Jf(r);let $;try{$=t(...h)}finally{Jf(d),n._d&&Op(1)}return $};return n._n=!0,n._c=!0,n._d=!0,n}function Ac(t){const{type:r,vnode:e,proxy:n,withProxy:h,props:d,propsOptions:[$],slots:b,attrs:k,emit:E,render:F,renderCache:j,data:D,setupState:V,ctx:pe,inheritAttrs:ee}=t;let ie,ke;const H=Jf(t);try{if(e.shapeFlag&4){const B=h||n,q=B;ie=Un(F.call(q,B,j,d,V,D,pe)),ke=k}else{const B=r;ie=Un(B.length>1?B(d,{attrs:k,slots:b,emit:E}):B(d,null)),ke=r.props?k:ry(k)}}catch(B){Yo.length=0,uc(B,t,1),ie=hr(pn)}let L=ie;if(ke&&ee!==!1){const B=Object.keys(ke),{shapeFlag:q}=L;B.length&&q&7&&($&&B.some(Rh)&&(ke=sy(ke,$)),L=mi(L,ke))}return e.dirs&&(L=mi(L),L.dirs=L.dirs?L.dirs.concat(e.dirs):e.dirs),e.transition&&(L.transition=e.transition),ie=L,Jf(H),ie}const ry=t=>{let r;for(const e in t)(e==="class"||e==="style"||sc(e))&&((r||(r={}))[e]=t[e]);return r},sy=(t,r)=>{const e={};for(const n in t)(!Rh(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function ny(t,r,e){const{props:n,children:h,component:d}=t,{props:$,children:b,patchFlag:k}=r,E=d.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&k>=0){if(k&1024)return!0;if(k&16)return n?Ap(n,$,E):!!$;if(k&8){const F=r.dynamicProps;for(let j=0;j<F.length;j++){const D=F[j];if($[D]!==n[D]&&!oc(E,D))return!0}}}else return(h||b)&&(!b||!b.$stable)?!0:n===$?!1:n?$?Ap(n,$,E):!0:!!$;return!1}function Ap(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let h=0;h<n.length;h++){const d=n[h];if(r[d]!==t[d]&&!oc(e,d))return!0}return!1}function ay({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const iy=Symbol.for("v-ndc"),ly=t=>t.__isSuspense;function uy(t,r){r&&r.pendingBranch?Ge(t)?r.effects.push(...t):r.effects.push(t):Qd(t)}const bf={};function Go(t,r,e){return eg(t,r,e)}function eg(t,r,{immediate:e,deep:n,flush:h,onTrack:d,onTrigger:$}=ir){var b;const k=$d()===((b=zr)==null?void 0:b.scope)?zr:null;let E,F=!1,j=!1;if(es(t)?(E=()=>t.value,F=Kf(t)):mo(t)?(E=()=>t,n=!0):Ge(t)?(j=!0,F=t.some(B=>mo(B)||Kf(B)),E=()=>t.map(B=>{if(es(B))return B.value;if(mo(B))return go(B);if(ft(B))return di(B,k,2)})):ft(t)?r?E=()=>di(t,k,2):E=()=>{if(!(k&&k.isUnmounted))return D&&D(),hn(t,k,3,[V])}:E=zn,r&&n){const B=E;E=()=>go(B())}let D,V=B=>{D=H.onStop=()=>{di(B,k,4),D=H.onStop=void 0}},pe;if(uf)if(V=zn,r?e&&hn(r,k,3,[E(),j?[]:void 0,V]):E(),h==="sync"){const B=sw();pe=B.__watcherHandles||(B.__watcherHandles=[])}else return zn;let ee=j?new Array(t.length).fill(bf):bf;const ie=()=>{if(H.active)if(r){const B=H.run();(n||F||(j?B.some((q,J)=>eo(q,ee[J])):eo(B,ee)))&&(D&&D(),hn(r,k,3,[B,ee===bf?void 0:j&&ee[0]===bf?[]:ee,V]),ee=B)}else H.run()};ie.allowRecurse=!!r;let ke;h==="sync"?ke=ie:h==="post"?ke=()=>$s(ie,k&&k.suspense):(ie.pre=!0,k&&(ie.id=k.uid),ke=()=>Zh(ie));const H=new Uh(E,ke);r?e?ie():ee=H.run():h==="post"?$s(H.run.bind(H),k&&k.suspense):H.run();const L=()=>{H.stop(),k&&k.scope&&Dh(k.scope.effects,H)};return pe&&pe.push(L),L}function oy(t,r,e){const n=this.proxy,h=Er(t)?t.includes(".")?tg(n,t):()=>n[t]:t.bind(n,n);let d;ft(r)?d=r:(d=r.handler,e=r);const $=zr;jo(this);const b=eg(h,d.bind(n),e);return $?jo($):Vu(),b}function tg(t,r){const e=r.split(".");return()=>{let n=t;for(let h=0;h<e.length&&n;h++)n=n[e[h]];return n}}function go(t,r){if(!ar(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),es(t))go(t.value,r);else if(Ge(t))for(let e=0;e<t.length;e++)go(t[e],r);else if(kv(t)||wo(t))t.forEach(e=>{go(e,r)});else if(Mv(t))for(const e in t)go(t[e],r);return t}function Fu(t,r,e,n){const h=t.dirs,d=r&&r.dirs;for(let $=0;$<h.length;$++){const b=h[$];d&&(b.oldValue=d[$].value);let k=b.dir[n];k&&(Lo(),hn(k,e,8,[t.el,b,t,r]),Bo())}}const ui=Symbol("_leaveCb"),Af=Symbol("_enterCb");function fy(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ig(()=>{t.isMounted=!0}),lg(()=>{t.isUnmounting=!0}),t}const nn=[Function,Array],rg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:nn,onEnter:nn,onAfterEnter:nn,onEnterCancelled:nn,onBeforeLeave:nn,onLeave:nn,onAfterLeave:nn,onLeaveCancelled:nn,onBeforeAppear:nn,onAppear:nn,onAfterAppear:nn,onAppearCancelled:nn},cy={name:"BaseTransition",props:rg,setup(t,{slots:r}){const e=Zy(),n=fy();let h;return()=>{const d=r.default&&ng(r.default(),!0);if(!d||!d.length)return;let $=d[0];if(d.length>1){for(const ee of d)if(ee.type!==pn){$=ee;break}}const b=kt(t),{mode:k}=b;if(n.isLeaving)return Cc($);const E=Cp($);if(!E)return Cc($);const F=Yc(E,b,n,e);eh(E,F);const j=e.subTree,D=j&&Cp(j);let V=!1;const{getTransitionKey:pe}=E.type;if(pe){const ee=pe();h===void 0?h=ee:ee!==h&&(h=ee,V=!0)}if(D&&D.type!==pn&&(!ju(E,D)||V)){const ee=Yc(D,b,n,e);if(eh(D,ee),k==="out-in")return n.isLeaving=!0,ee.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},Cc($);k==="in-out"&&E.type!==pn&&(ee.delayLeave=(ie,ke,H)=>{const L=sg(n,D);L[String(D.key)]=D,ie[ui]=()=>{ke(),ie[ui]=void 0,delete F.delayedLeave},F.delayedLeave=H})}return $}}},hy=cy;function sg(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Yc(t,r,e,n){const{appear:h,mode:d,persisted:$=!1,onBeforeEnter:b,onEnter:k,onAfterEnter:E,onEnterCancelled:F,onBeforeLeave:j,onLeave:D,onAfterLeave:V,onLeaveCancelled:pe,onBeforeAppear:ee,onAppear:ie,onAfterAppear:ke,onAppearCancelled:H}=r,L=String(t.key),B=sg(e,t),q=(Q,X)=>{Q&&hn(Q,n,9,X)},J=(Q,X)=>{const $e=X[1];q(Q,X),Ge(Q)?Q.every(Pe=>Pe.length<=1)&&$e():Q.length<=1&&$e()},G={mode:d,persisted:$,beforeEnter(Q){let X=b;if(!e.isMounted)if(h)X=ee||b;else return;Q[ui]&&Q[ui](!0);const $e=B[L];$e&&ju(t,$e)&&$e.el[ui]&&$e.el[ui](),q(X,[Q])},enter(Q){let X=k,$e=E,Pe=F;if(!e.isMounted)if(h)X=ie||k,$e=ke||E,Pe=H||F;else return;let ge=!1;const qe=Q[Af]=it=>{ge||(ge=!0,it?q(Pe,[Q]):q($e,[Q]),G.delayedLeave&&G.delayedLeave(),Q[Af]=void 0)};X?J(X,[Q,qe]):qe()},leave(Q,X){const $e=String(t.key);if(Q[Af]&&Q[Af](!0),e.isUnmounting)return X();q(j,[Q]);let Pe=!1;const ge=Q[ui]=qe=>{Pe||(Pe=!0,X(),qe?q(pe,[Q]):q(V,[Q]),Q[ui]=void 0,B[$e]===t&&delete B[$e])};B[$e]=t,D?J(D,[Q,ge]):ge()},clone(Q){return Yc(Q,r,e,n)}};return G}function Cc(t){if(cc(t))return t=mi(t),t.children=null,t}function Cp(t){return cc(t)?t.children?t.children[0]:void 0:t}function eh(t,r){t.shapeFlag&6&&t.component?eh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function ng(t,r=!1,e){let n=[],h=0;for(let d=0;d<t.length;d++){let $=t[d];const b=e==null?$.key:String(e)+String($.key!=null?$.key:d);$.type===Qr?($.patchFlag&128&&h++,n=n.concat(ng($.children,r,b))):(r||$.type!==pn)&&n.push(b!=null?mi($,{key:b}):$)}if(h>1)for(let d=0;d<n.length;d++)n[d].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function ff(t,r){return ft(t)?Fr({name:t.name},r,{setup:t}):t}const Qo=t=>!!t.type.__asyncLoader,cc=t=>t.type.__isKeepAlive;function py(t,r){ag(t,"a",r)}function vy(t,r){ag(t,"da",r)}function ag(t,r,e=zr){const n=t.__wdc||(t.__wdc=()=>{let h=e;for(;h;){if(h.isDeactivated)return;h=h.parent}return t()});if(hc(r,n,e),e){let h=e.parent;for(;h&&h.parent;)cc(h.parent.vnode)&&gy(n,r,e,h),h=h.parent}}function gy(t,r,e,n){const h=hc(r,t,n,!0);ug(()=>{Dh(n[r],h)},e)}function hc(t,r,e=zr,n=!1){if(e){const h=e[t]||(e[t]=[]),d=r.__weh||(r.__weh=(...$)=>{if(e.isUnmounted)return;Lo(),jo(e);const b=hn(r,e,t,$);return Vu(),Bo(),b});return n?h.unshift(d):h.push(d),d}}const Qa=t=>(r,e=zr)=>(!uf||t==="sp")&&hc(t,(...n)=>r(...n),e),dy=Qa("bm"),ig=Qa("m"),yy=Qa("bu"),wy=Qa("u"),lg=Qa("bum"),ug=Qa("um"),my=Qa("sp"),$y=Qa("rtg"),xy=Qa("rtc");function by(t,r=zr){hc("ec",t,r)}function Zf(t,r,e,n){let h;const d=e&&e[n];if(Ge(t)||Er(t)){h=new Array(t.length);for(let $=0,b=t.length;$<b;$++)h[$]=r(t[$],$,void 0,d&&d[$])}else if(typeof t=="number"){h=new Array(t);for(let $=0;$<t;$++)h[$]=r($+1,$,void 0,d&&d[$])}else if(ar(t))if(t[Symbol.iterator])h=Array.from(t,($,b)=>r($,b,void 0,d&&d[b]));else{const $=Object.keys(t);h=new Array($.length);for(let b=0,k=$.length;b<k;b++){const E=$[b];h[b]=r(t[E],E,b,d&&d[b])}}else h=[];return e&&(e[n]=h),h}function Mf(t,r,e={},n,h){if(ys.isCE||ys.parent&&Qo(ys.parent)&&ys.parent.isCE)return r!=="default"&&(e.name=r),hr("slot",e,n&&n());let d=t[r];d&&d._c&&(d._d=!1),cr();const $=d&&og(d(e)),b=vc(Qr,{key:e.key||$&&$.key||`_${r}`},$||(n?n():[]),$&&t._===1?64:-2);return!h&&b.scopeId&&(b.slotScopeIds=[b.scopeId+"-s"]),d&&d._c&&(d._d=!0),b}function og(t){return t.some(r=>Xf(r)?!(r.type===pn||r.type===Qr&&!og(r.children)):!0)?t:null}const th=t=>t?$g(t)?ep(t)||t.proxy:th(t.parent):null,Xo=Fr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>th(t.parent),$root:t=>th(t.root),$emit:t=>t.emit,$options:t=>Gh(t),$forceUpdate:t=>t.f||(t.f=()=>Zh(t.update)),$nextTick:t=>t.n||(t.n=Jd.bind(t.proxy)),$watch:t=>oy.bind(t)}),_c=(t,r)=>t!==ir&&!t.__isScriptSetup&&xt(t,r),Ay={get({_:t},r){const{ctx:e,setupState:n,data:h,props:d,accessCache:$,type:b,appContext:k}=t;let E;if(r[0]!=="$"){const V=$[r];if(V!==void 0)switch(V){case 1:return n[r];case 2:return h[r];case 4:return e[r];case 3:return d[r]}else{if(_c(n,r))return $[r]=1,n[r];if(h!==ir&&xt(h,r))return $[r]=2,h[r];if((E=t.propsOptions[0])&&xt(E,r))return $[r]=3,d[r];if(e!==ir&&xt(e,r))return $[r]=4,e[r];rh&&($[r]=0)}}const F=Xo[r];let j,D;if(F)return r==="$attrs"&&bs(t,"get",r),F(t);if((j=b.__cssModules)&&(j=j[r]))return j;if(e!==ir&&xt(e,r))return $[r]=4,e[r];if(D=k.config.globalProperties,xt(D,r))return D[r]},set({_:t},r,e){const{data:n,setupState:h,ctx:d}=t;return _c(h,r)?(h[r]=e,!0):n!==ir&&xt(n,r)?(n[r]=e,!0):xt(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(d[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:h,propsOptions:d}},$){let b;return!!e[$]||t!==ir&&xt(t,$)||_c(r,$)||(b=d[0])&&xt(b,$)||xt(n,$)||xt(Xo,$)||xt(h.config.globalProperties,$)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:xt(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function _p(t){return Ge(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let rh=!0;function Cy(t){const r=Gh(t),e=t.proxy,n=t.ctx;rh=!1,r.beforeCreate&&kp(r.beforeCreate,t,"bc");const{data:h,computed:d,methods:$,watch:b,provide:k,inject:E,created:F,beforeMount:j,mounted:D,beforeUpdate:V,updated:pe,activated:ee,deactivated:ie,beforeDestroy:ke,beforeUnmount:H,destroyed:L,unmounted:B,render:q,renderTracked:J,renderTriggered:G,errorCaptured:Q,serverPrefetch:X,expose:$e,inheritAttrs:Pe,components:ge,directives:qe,filters:it}=r;if(E&&_y(E,n,null),$)for(const ut in $){const Ie=$[ut];ft(Ie)&&(n[ut]=Ie.bind(e))}if(h){const ut=h.call(e,e);ar(ut)&&(t.data=Wh(ut))}if(rh=!0,d)for(const ut in d){const Ie=d[ut],at=ft(Ie)?Ie.bind(e,e):ft(Ie.get)?Ie.get.bind(e,e):zn,St=!ft(Ie)&&ft(Ie.set)?Ie.set.bind(e):zn,Ft=tw({get:at,set:St});Object.defineProperty(n,ut,{enumerable:!0,configurable:!0,get:()=>Ft.value,set:Qe=>Ft.value=Qe})}if(b)for(const ut in b)fg(b[ut],n,e,ut);if(k){const ut=ft(k)?k.call(e):k;Reflect.ownKeys(ut).forEach(Ie=>{Fy(Ie,ut[Ie])})}F&&kp(F,t,"c");function lt(ut,Ie){Ge(Ie)?Ie.forEach(at=>ut(at.bind(e))):Ie&&ut(Ie.bind(e))}if(lt(dy,j),lt(ig,D),lt(yy,V),lt(wy,pe),lt(py,ee),lt(vy,ie),lt(by,Q),lt(xy,J),lt($y,G),lt(lg,H),lt(ug,B),lt(my,X),Ge($e))if($e.length){const ut=t.exposed||(t.exposed={});$e.forEach(Ie=>{Object.defineProperty(ut,Ie,{get:()=>e[Ie],set:at=>e[Ie]=at})})}else t.exposed||(t.exposed={});q&&t.render===zn&&(t.render=q),Pe!=null&&(t.inheritAttrs=Pe),ge&&(t.components=ge),qe&&(t.directives=qe)}function _y(t,r,e=zn){Ge(t)&&(t=sh(t));for(const n in t){const h=t[n];let d;ar(h)?"default"in h?d=Sf(h.from||n,h.default,!0):d=Sf(h.from||n):d=Sf(h),es(d)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>d.value,set:$=>d.value=$}):r[n]=d}}function kp(t,r,e){hn(Ge(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function fg(t,r,e,n){const h=n.includes(".")?tg(e,n):()=>e[n];if(Er(t)){const d=r[t];ft(d)&&Go(h,d)}else if(ft(t))Go(h,t.bind(e));else if(ar(t))if(Ge(t))t.forEach(d=>fg(d,r,e,n));else{const d=ft(t.handler)?t.handler.bind(e):r[t.handler];ft(d)&&Go(h,d,t)}}function Gh(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:h,optionsCache:d,config:{optionMergeStrategies:$}}=t.appContext,b=d.get(r);let k;return b?k=b:!h.length&&!e&&!n?k=r:(k={},h.length&&h.forEach(E=>Gf(k,E,$,!0)),Gf(k,r,$)),ar(r)&&d.set(r,k),k}function Gf(t,r,e,n=!1){const{mixins:h,extends:d}=r;d&&Gf(t,d,e,!0),h&&h.forEach($=>Gf(t,$,e,!0));for(const $ in r)if(!(n&&$==="expose")){const b=ky[$]||e&&e[$];t[$]=b?b(t[$],r[$]):r[$]}return t}const ky={data:Pp,props:Ep,emits:Ep,methods:Jo,computed:Jo,beforeCreate:cs,created:cs,beforeMount:cs,mounted:cs,beforeUpdate:cs,updated:cs,beforeDestroy:cs,beforeUnmount:cs,destroyed:cs,unmounted:cs,activated:cs,deactivated:cs,errorCaptured:cs,serverPrefetch:cs,components:Jo,directives:Jo,watch:Ey,provide:Pp,inject:Py};function Pp(t,r){return r?t?function(){return Fr(ft(t)?t.call(this,this):t,ft(r)?r.call(this,this):r)}:r:t}function Py(t,r){return Jo(sh(t),sh(r))}function sh(t){if(Ge(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function cs(t,r){return t?[...new Set([].concat(t,r))]:r}function Jo(t,r){return t?Fr(Object.create(null),t,r):r}function Ep(t,r){return t?Ge(t)&&Ge(r)?[...new Set([...t,...r])]:Fr(Object.create(null),_p(t),_p(r??{})):r}function Ey(t,r){if(!t)return r;if(!r)return t;const e=Fr(Object.create(null),t);for(const n in r)e[n]=cs(t[n],r[n]);return e}function cg(){return{app:null,config:{isNativeTag:ad,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let My=0;function Sy(t,r){return function(n,h=null){ft(n)||(n=Fr({},n)),h!=null&&!ar(h)&&(h=null);const d=cg(),$=new WeakSet;let b=!1;const k=d.app={_uid:My++,_component:n,_props:h,_container:null,_context:d,_instance:null,version:nw,get config(){return d.config},set config(E){},use(E,...F){return $.has(E)||(E&&ft(E.install)?($.add(E),E.install(k,...F)):ft(E)&&($.add(E),E(k,...F))),k},mixin(E){return d.mixins.includes(E)||d.mixins.push(E),k},component(E,F){return F?(d.components[E]=F,k):d.components[E]},directive(E,F){return F?(d.directives[E]=F,k):d.directives[E]},mount(E,F,j){if(!b){const D=hr(n,h);return D.appContext=d,F&&r?r(D,E):t(D,E,j),b=!0,k._container=E,E.__vue_app__=k,ep(D.component)||D.component.proxy}},unmount(){b&&(t(null,k._container),delete k._container.__vue_app__)},provide(E,F){return d.provides[E]=F,k},runWithContext(E){Qf=k;try{return E()}finally{Qf=null}}};return k}}let Qf=null;function Fy(t,r){if(zr){let e=zr.provides;const n=zr.parent&&zr.parent.provides;n===e&&(e=zr.provides=Object.create(n)),e[t]=r}}function Sf(t,r,e=!1){const n=zr||ys;if(n||Qf){const h=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Qf._context.provides;if(h&&t in h)return h[t];if(arguments.length>1)return e&&ft(r)?r.call(n&&n.proxy):r}}function Ny(t,r,e,n=!1){const h={},d={};Vf(d,gc,1),t.propsDefaults=Object.create(null),hg(t,r,h,d);for(const $ in t.propsOptions[0])$ in h||(h[$]=void 0);e?t.props=n?h:Hd(h):t.type.props?t.props=h:t.props=d,t.attrs=d}function Oy(t,r,e,n){const{props:h,attrs:d,vnode:{patchFlag:$}}=t,b=kt(h),[k]=t.propsOptions;let E=!1;if((n||$>0)&&!($&16)){if($&8){const F=t.vnode.dynamicProps;for(let j=0;j<F.length;j++){let D=F[j];if(oc(t.emitsOptions,D))continue;const V=r[D];if(k)if(xt(d,D))V!==d[D]&&(d[D]=V,E=!0);else{const pe=Oo(D);h[pe]=nh(k,b,pe,V,t,!1)}else V!==d[D]&&(d[D]=V,E=!0)}}}else{hg(t,r,h,d)&&(E=!0);let F;for(const j in b)(!r||!xt(r,j)&&((F=Do(j))===j||!xt(r,F)))&&(k?e&&(e[j]!==void 0||e[F]!==void 0)&&(h[j]=nh(k,b,j,void 0,t,!0)):delete h[j]);if(d!==b)for(const j in d)(!r||!xt(r,j))&&(delete d[j],E=!0)}E&&Ga(t,"set","$attrs")}function hg(t,r,e,n){const[h,d]=t.propsOptions;let $=!1,b;if(r)for(let k in r){if(Ef(k))continue;const E=r[k];let F;h&&xt(h,F=Oo(k))?!d||!d.includes(F)?e[F]=E:(b||(b={}))[F]=E:oc(t.emitsOptions,k)||(!(k in n)||E!==n[k])&&(n[k]=E,$=!0)}if(d){const k=kt(e),E=b||ir;for(let F=0;F<d.length;F++){const j=d[F];e[j]=nh(h,k,j,E[j],t,!xt(E,j))}}return $}function nh(t,r,e,n,h,d){const $=t[e];if($!=null){const b=xt($,"default");if(b&&n===void 0){const k=$.default;if($.type!==Function&&!$.skipFactory&&ft(k)){const{propsDefaults:E}=h;e in E?n=E[e]:(jo(h),n=E[e]=k.call(null,r),Vu())}else n=k}$[0]&&(d&&!b?n=!1:$[1]&&(n===""||n===Do(e))&&(n=!0))}return n}function pg(t,r,e=!1){const n=r.propsCache,h=n.get(t);if(h)return h;const d=t.props,$={},b=[];let k=!1;if(!ft(t)){const F=j=>{k=!0;const[D,V]=pg(j,r,!0);Fr($,D),V&&b.push(...V)};!e&&r.mixins.length&&r.mixins.forEach(F),t.extends&&F(t.extends),t.mixins&&t.mixins.forEach(F)}if(!d&&!k)return ar(t)&&n.set(t,yo),yo;if(Ge(d))for(let F=0;F<d.length;F++){const j=Oo(d[F]);Mp(j)&&($[j]=ir)}else if(d)for(const F in d){const j=Oo(F);if(Mp(j)){const D=d[F],V=$[j]=Ge(D)||ft(D)?{type:D}:Fr({},D);if(V){const pe=Np(Boolean,V.type),ee=Np(String,V.type);V[0]=pe>-1,V[1]=ee<0||pe<ee,(pe>-1||xt(V,"default"))&&b.push(j)}}}const E=[$,b];return ar(t)&&n.set(t,E),E}function Mp(t){return t[0]!=="$"}function Sp(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function Fp(t,r){return Sp(t)===Sp(r)}function Np(t,r){return Ge(r)?r.findIndex(e=>Fp(e,t)):ft(r)&&Fp(r,t)?0:-1}const vg=t=>t[0]==="_"||t==="$stable",Qh=t=>Ge(t)?t.map(Un):[Un(t)],Ty=(t,r,e)=>{if(r._n)return r;const n=xs((...h)=>Qh(r(...h)),e);return n._c=!1,n},gg=(t,r,e)=>{const n=t._ctx;for(const h in t){if(vg(h))continue;const d=t[h];if(ft(d))r[h]=Ty(h,d,n);else if(d!=null){const $=Qh(d);r[h]=()=>$}}},dg=(t,r)=>{const e=Qh(r);t.slots.default=()=>e},Iy=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=kt(r),Vf(r,"_",e)):gg(r,t.slots={})}else t.slots={},r&&dg(t,r);Vf(t.slots,gc,1)},jy=(t,r,e)=>{const{vnode:n,slots:h}=t;let d=!0,$=ir;if(n.shapeFlag&32){const b=r._;b?e&&b===1?d=!1:(Fr(h,r),!e&&b===1&&delete h._):(d=!r.$stable,gg(r,h)),$=r}else r&&(dg(t,r),$={default:1});if(d)for(const b in h)!vg(b)&&$[b]==null&&delete h[b]};function ah(t,r,e,n,h=!1){if(Ge(t)){t.forEach((D,V)=>ah(D,r&&(Ge(r)?r[V]:r),e,n,h));return}if(Qo(n)&&!h)return;const d=n.shapeFlag&4?ep(n.component)||n.component.proxy:n.el,$=h?null:d,{i:b,r:k}=t,E=r&&r.r,F=b.refs===ir?b.refs={}:b.refs,j=b.setupState;if(E!=null&&E!==k&&(Er(E)?(F[E]=null,xt(j,E)&&(j[E]=null)):es(E)&&(E.value=null)),ft(k))di(k,b,12,[$,F]);else{const D=Er(k),V=es(k);if(D||V){const pe=()=>{if(t.f){const ee=D?xt(j,k)?j[k]:F[k]:k.value;h?Ge(ee)&&Dh(ee,d):Ge(ee)?ee.includes(d)||ee.push(d):D?(F[k]=[d],xt(j,k)&&(j[k]=F[k])):(k.value=[d],t.k&&(F[t.k]=k.value))}else D?(F[k]=$,xt(j,k)&&(j[k]=$)):V&&(k.value=$,t.k&&(F[t.k]=$))};$?(pe.id=-1,$s(pe,e)):pe()}}}const $s=uy;function Ry(t){return Dy(t)}function Dy(t,r){const e=Kc();e.__VUE__=!0;const{insert:n,remove:h,patchProp:d,createElement:$,createText:b,createComment:k,setText:E,setElementText:F,parentNode:j,nextSibling:D,setScopeId:V=zn,insertStaticContent:pe}=t,ee=(U,K,te,ce=null,he=null,le=null,Oe=!1,de=null,we=!!K.dynamicChildren)=>{if(U===K)return;U&&!ju(U,K)&&(ce=dr(U),Qe(U,he,le,!0),U=null),K.patchFlag===-2&&(we=!1,K.dynamicChildren=null);const{type:oe,ref:De,shapeFlag:je}=K;switch(oe){case pc:ie(U,K,te,ce);break;case pn:ke(U,K,te,ce);break;case kc:U==null&&H(K,te,ce,Oe);break;case Qr:ge(U,K,te,ce,he,le,Oe,de,we);break;default:je&1?q(U,K,te,ce,he,le,Oe,de,we):je&6?qe(U,K,te,ce,he,le,Oe,de,we):(je&64||je&128)&&oe.process(U,K,te,ce,he,le,Oe,de,we,kr)}De!=null&&he&&ah(De,U&&U.ref,le,K||U,!K)},ie=(U,K,te,ce)=>{if(U==null)n(K.el=b(K.children),te,ce);else{const he=K.el=U.el;K.children!==U.children&&E(he,K.children)}},ke=(U,K,te,ce)=>{U==null?n(K.el=k(K.children||""),te,ce):K.el=U.el},H=(U,K,te,ce)=>{[U.el,U.anchor]=pe(U.children,K,te,ce,U.el,U.anchor)},L=({el:U,anchor:K},te,ce)=>{let he;for(;U&&U!==K;)he=D(U),n(U,te,ce),U=he;n(K,te,ce)},B=({el:U,anchor:K})=>{let te;for(;U&&U!==K;)te=D(U),h(U),U=te;h(K)},q=(U,K,te,ce,he,le,Oe,de,we)=>{Oe=Oe||K.type==="svg",U==null?J(K,te,ce,he,le,Oe,de,we):X(U,K,he,le,Oe,de,we)},J=(U,K,te,ce,he,le,Oe,de)=>{let we,oe;const{type:De,props:je,shapeFlag:Be,transition:We,dirs:Ze}=U;if(we=U.el=$(U.type,le,je&&je.is,je),Be&8?F(we,U.children):Be&16&&Q(U.children,we,null,ce,he,le&&De!=="foreignObject",Oe,de),Ze&&Fu(U,null,ce,"created"),G(we,U,U.scopeId,Oe,ce),je){for(const st in je)st!=="value"&&!Ef(st)&&d(we,st,null,je[st],le,U.children,ce,he,Pt);"value"in je&&d(we,"value",null,je.value),(oe=je.onVnodeBeforeMount)&&Ln(oe,ce,U)}Ze&&Fu(U,null,ce,"beforeMount");const rt=Ly(he,We);rt&&We.beforeEnter(we),n(we,K,te),((oe=je&&je.onVnodeMounted)||rt||Ze)&&$s(()=>{oe&&Ln(oe,ce,U),rt&&We.enter(we),Ze&&Fu(U,null,ce,"mounted")},he)},G=(U,K,te,ce,he)=>{if(te&&V(U,te),ce)for(let le=0;le<ce.length;le++)V(U,ce[le]);if(he){let le=he.subTree;if(K===le){const Oe=he.vnode;G(U,Oe,Oe.scopeId,Oe.slotScopeIds,he.parent)}}},Q=(U,K,te,ce,he,le,Oe,de,we=0)=>{for(let oe=we;oe<U.length;oe++){const De=U[oe]=de?oi(U[oe]):Un(U[oe]);ee(null,De,K,te,ce,he,le,Oe,de)}},X=(U,K,te,ce,he,le,Oe)=>{const de=K.el=U.el;let{patchFlag:we,dynamicChildren:oe,dirs:De}=K;we|=U.patchFlag&16;const je=U.props||ir,Be=K.props||ir;let We;te&&Nu(te,!1),(We=Be.onVnodeBeforeUpdate)&&Ln(We,te,K,U),De&&Fu(K,U,te,"beforeUpdate"),te&&Nu(te,!0);const Ze=he&&K.type!=="foreignObject";if(oe?$e(U.dynamicChildren,oe,de,te,ce,Ze,le):Oe||Ie(U,K,de,null,te,ce,Ze,le,!1),we>0){if(we&16)Pe(de,K,je,Be,te,ce,he);else if(we&2&&je.class!==Be.class&&d(de,"class",null,Be.class,he),we&4&&d(de,"style",je.style,Be.style,he),we&8){const rt=K.dynamicProps;for(let st=0;st<rt.length;st++){const wt=rt[st],Bt=je[wt],bt=Be[wt];(bt!==Bt||wt==="value")&&d(de,wt,Bt,bt,he,U.children,te,ce,Pt)}}we&1&&U.children!==K.children&&F(de,K.children)}else!Oe&&oe==null&&Pe(de,K,je,Be,te,ce,he);((We=Be.onVnodeUpdated)||De)&&$s(()=>{We&&Ln(We,te,K,U),De&&Fu(K,U,te,"updated")},ce)},$e=(U,K,te,ce,he,le,Oe)=>{for(let de=0;de<K.length;de++){const we=U[de],oe=K[de],De=we.el&&(we.type===Qr||!ju(we,oe)||we.shapeFlag&70)?j(we.el):te;ee(we,oe,De,null,ce,he,le,Oe,!0)}},Pe=(U,K,te,ce,he,le,Oe)=>{if(te!==ce){if(te!==ir)for(const de in te)!Ef(de)&&!(de in ce)&&d(U,de,te[de],null,Oe,K.children,he,le,Pt);for(const de in ce){if(Ef(de))continue;const we=ce[de],oe=te[de];we!==oe&&de!=="value"&&d(U,de,oe,we,Oe,K.children,he,le,Pt)}"value"in ce&&d(U,"value",te.value,ce.value)}},ge=(U,K,te,ce,he,le,Oe,de,we)=>{const oe=K.el=U?U.el:b(""),De=K.anchor=U?U.anchor:b("");let{patchFlag:je,dynamicChildren:Be,slotScopeIds:We}=K;We&&(de=de?de.concat(We):We),U==null?(n(oe,te,ce),n(De,te,ce),Q(K.children,te,De,he,le,Oe,de,we)):je>0&&je&64&&Be&&U.dynamicChildren?($e(U.dynamicChildren,Be,te,he,le,Oe,de),(K.key!=null||he&&K===he.subTree)&&yg(U,K,!0)):Ie(U,K,te,De,he,le,Oe,de,we)},qe=(U,K,te,ce,he,le,Oe,de,we)=>{K.slotScopeIds=de,U==null?K.shapeFlag&512?he.ctx.activate(K,te,ce,Oe,we):it(K,te,ce,he,le,Oe,we):Zt(U,K,we)},it=(U,K,te,ce,he,le,Oe)=>{const de=U.component=Jy(U,ce,he);if(cc(U)&&(de.ctx.renderer=kr),Gy(de),de.asyncDep){if(he&&he.registerDep(de,lt),!U.el){const we=de.subTree=hr(pn);ke(null,we,K,te)}return}lt(de,U,K,te,he,le,Oe)},Zt=(U,K,te)=>{const ce=K.component=U.component;if(ny(U,K,te))if(ce.asyncDep&&!ce.asyncResolved){ut(ce,K,te);return}else ce.next=K,Gd(ce.update),ce.update();else K.el=U.el,ce.vnode=K},lt=(U,K,te,ce,he,le,Oe)=>{const de=()=>{if(U.isMounted){let{next:De,bu:je,u:Be,parent:We,vnode:Ze}=U,rt=De,st;Nu(U,!1),De?(De.el=Ze.el,ut(U,De,Oe)):De=Ze,je&&bc(je),(st=De.props&&De.props.onVnodeBeforeUpdate)&&Ln(st,We,De,Ze),Nu(U,!0);const wt=Ac(U),Bt=U.subTree;U.subTree=wt,ee(Bt,wt,j(Bt.el),dr(Bt),U,he,le),De.el=wt.el,rt===null&&ay(U,wt.el),Be&&$s(Be,he),(st=De.props&&De.props.onVnodeUpdated)&&$s(()=>Ln(st,We,De,Ze),he)}else{let De;const{el:je,props:Be}=K,{bm:We,m:Ze,parent:rt}=U,st=Qo(K);if(Nu(U,!1),We&&bc(We),!st&&(De=Be&&Be.onVnodeBeforeMount)&&Ln(De,rt,K),Nu(U,!0),je&&Nt){const wt=()=>{U.subTree=Ac(U),Nt(je,U.subTree,U,he,null)};st?K.type.__asyncLoader().then(()=>!U.isUnmounted&&wt()):wt()}else{const wt=U.subTree=Ac(U);ee(null,wt,te,ce,U,he,le),K.el=wt.el}if(Ze&&$s(Ze,he),!st&&(De=Be&&Be.onVnodeMounted)){const wt=K;$s(()=>Ln(De,rt,wt),he)}(K.shapeFlag&256||rt&&Qo(rt.vnode)&&rt.vnode.shapeFlag&256)&&U.a&&$s(U.a,he),U.isMounted=!0,K=te=ce=null}},we=U.effect=new Uh(de,()=>Zh(oe),U.scope),oe=U.update=()=>we.run();oe.id=U.uid,Nu(U,!0),oe()},ut=(U,K,te)=>{K.component=U;const ce=U.vnode.props;U.vnode=K,U.next=null,Oy(U,K.props,ce,te),jy(U,K.children,te),Lo(),bp(),Bo()},Ie=(U,K,te,ce,he,le,Oe,de,we=!1)=>{const oe=U&&U.children,De=U?U.shapeFlag:0,je=K.children,{patchFlag:Be,shapeFlag:We}=K;if(Be>0){if(Be&128){St(oe,je,te,ce,he,le,Oe,de,we);return}else if(Be&256){at(oe,je,te,ce,he,le,Oe,de,we);return}}We&8?(De&16&&Pt(oe,he,le),je!==oe&&F(te,je)):De&16?We&16?St(oe,je,te,ce,he,le,Oe,de,we):Pt(oe,he,le,!0):(De&8&&F(te,""),We&16&&Q(je,te,ce,he,le,Oe,de,we))},at=(U,K,te,ce,he,le,Oe,de,we)=>{U=U||yo,K=K||yo;const oe=U.length,De=K.length,je=Math.min(oe,De);let Be;for(Be=0;Be<je;Be++){const We=K[Be]=we?oi(K[Be]):Un(K[Be]);ee(U[Be],We,te,null,he,le,Oe,de,we)}oe>De?Pt(U,he,le,!0,!1,je):Q(K,te,ce,he,le,Oe,de,we,je)},St=(U,K,te,ce,he,le,Oe,de,we)=>{let oe=0;const De=K.length;let je=U.length-1,Be=De-1;for(;oe<=je&&oe<=Be;){const We=U[oe],Ze=K[oe]=we?oi(K[oe]):Un(K[oe]);if(ju(We,Ze))ee(We,Ze,te,null,he,le,Oe,de,we);else break;oe++}for(;oe<=je&&oe<=Be;){const We=U[je],Ze=K[Be]=we?oi(K[Be]):Un(K[Be]);if(ju(We,Ze))ee(We,Ze,te,null,he,le,Oe,de,we);else break;je--,Be--}if(oe>je){if(oe<=Be){const We=Be+1,Ze=We<De?K[We].el:ce;for(;oe<=Be;)ee(null,K[oe]=we?oi(K[oe]):Un(K[oe]),te,Ze,he,le,Oe,de,we),oe++}}else if(oe>Be)for(;oe<=je;)Qe(U[oe],he,le,!0),oe++;else{const We=oe,Ze=oe,rt=new Map;for(oe=Ze;oe<=Be;oe++){const Ot=K[oe]=we?oi(K[oe]):Un(K[oe]);Ot.key!=null&&rt.set(Ot.key,oe)}let st,wt=0;const Bt=Be-Ze+1;let bt=!1,Gt=0;const _s=new Array(Bt);for(oe=0;oe<Bt;oe++)_s[oe]=0;for(oe=We;oe<=je;oe++){const Ot=U[oe];if(wt>=Bt){Qe(Ot,he,le,!0);continue}let ht;if(Ot.key!=null)ht=rt.get(Ot.key);else for(st=Ze;st<=Be;st++)if(_s[st-Ze]===0&&ju(Ot,K[st])){ht=st;break}ht===void 0?Qe(Ot,he,le,!0):(_s[ht-Ze]=oe+1,ht>=Gt?Gt=ht:bt=!0,ee(Ot,K[ht],te,null,he,le,Oe,de,we),wt++)}const Vr=bt?By(_s):yo;for(st=Vr.length-1,oe=Bt-1;oe>=0;oe--){const Ot=Ze+oe,ht=K[Ot],jt=Ot+1<De?K[Ot+1].el:ce;_s[oe]===0?ee(null,ht,te,jt,he,le,Oe,de,we):bt&&(st<0||oe!==Vr[st]?Ft(ht,te,jt,2):st--)}}},Ft=(U,K,te,ce,he=null)=>{const{el:le,type:Oe,transition:de,children:we,shapeFlag:oe}=U;if(oe&6){Ft(U.component.subTree,K,te,ce);return}if(oe&128){U.suspense.move(K,te,ce);return}if(oe&64){Oe.move(U,K,te,kr);return}if(Oe===Qr){n(le,K,te);for(let je=0;je<we.length;je++)Ft(we[je],K,te,ce);n(U.anchor,K,te);return}if(Oe===kc){L(U,K,te);return}if(ce!==2&&oe&1&&de)if(ce===0)de.beforeEnter(le),n(le,K,te),$s(()=>de.enter(le),he);else{const{leave:je,delayLeave:Be,afterLeave:We}=de,Ze=()=>n(le,K,te),rt=()=>{je(le,()=>{Ze(),We&&We()})};Be?Be(le,Ze,rt):rt()}else n(le,K,te)},Qe=(U,K,te,ce=!1,he=!1)=>{const{type:le,props:Oe,ref:de,children:we,dynamicChildren:oe,shapeFlag:De,patchFlag:je,dirs:Be}=U;if(de!=null&&ah(de,null,te,U,!0),De&256){K.ctx.deactivate(U);return}const We=De&1&&Be,Ze=!Qo(U);let rt;if(Ze&&(rt=Oe&&Oe.onVnodeBeforeUnmount)&&Ln(rt,K,U),De&6)wr(U.component,te,ce);else{if(De&128){U.suspense.unmount(te,ce);return}We&&Fu(U,null,K,"beforeUnmount"),De&64?U.type.remove(U,K,te,he,kr,ce):oe&&(le!==Qr||je>0&&je&64)?Pt(oe,K,te,!1,!0):(le===Qr&&je&384||!he&&De&16)&&Pt(we,K,te),ce&&Nr(U)}(Ze&&(rt=Oe&&Oe.onVnodeUnmounted)||We)&&$s(()=>{rt&&Ln(rt,K,U),We&&Fu(U,null,K,"unmounted")},te)},Nr=U=>{const{type:K,el:te,anchor:ce,transition:he}=U;if(K===Qr){Lt(te,ce);return}if(K===kc){B(U);return}const le=()=>{h(te),he&&!he.persisted&&he.afterLeave&&he.afterLeave()};if(U.shapeFlag&1&&he&&!he.persisted){const{leave:Oe,delayLeave:de}=he,we=()=>Oe(te,le);de?de(U.el,le,we):we()}else le()},Lt=(U,K)=>{let te;for(;U!==K;)te=D(U),h(U),U=te;h(K)},wr=(U,K,te)=>{const{bum:ce,scope:he,update:le,subTree:Oe,um:de}=U;ce&&bc(ce),he.stop(),le&&(le.active=!1,Qe(Oe,U,K,te)),de&&$s(de,K),$s(()=>{U.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&U.asyncDep&&!U.asyncResolved&&U.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},Pt=(U,K,te,ce=!1,he=!1,le=0)=>{for(let Oe=le;Oe<U.length;Oe++)Qe(U[Oe],K,te,ce,he)},dr=U=>U.shapeFlag&6?dr(U.component.subTree):U.shapeFlag&128?U.suspense.next():D(U.anchor||U.el),Or=(U,K,te)=>{U==null?K._vnode&&Qe(K._vnode,null,null,!0):ee(K._vnode||null,U,K,null,null,null,te),bp(),Qv(),K._vnode=U},kr={p:ee,um:Qe,m:Ft,r:Nr,mt:it,mc:Q,pc:Ie,pbc:$e,n:dr,o:t};let Mr,Nt;return r&&([Mr,Nt]=r(kr)),{render:Or,hydrate:Mr,createApp:Sy(Or,Mr)}}function Nu({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function Ly(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function yg(t,r,e=!1){const n=t.children,h=r.children;if(Ge(n)&&Ge(h))for(let d=0;d<n.length;d++){const $=n[d];let b=h[d];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=h[d]=oi(h[d]),b.el=$.el),e||yg($,b)),b.type===pc&&(b.el=$.el)}}function By(t){const r=t.slice(),e=[0];let n,h,d,$,b;const k=t.length;for(n=0;n<k;n++){const E=t[n];if(E!==0){if(h=e[e.length-1],t[h]<E){r[n]=h,e.push(n);continue}for(d=0,$=e.length-1;d<$;)b=d+$>>1,t[e[b]]<E?d=b+1:$=b;E<t[e[d]]&&(d>0&&(r[n]=e[d-1]),e[d]=n)}}for(d=e.length,$=e[d-1];d-- >0;)e[d]=$,$=r[$];return e}const Hy=t=>t.__isTeleport,Qr=Symbol.for("v-fgt"),pc=Symbol.for("v-txt"),pn=Symbol.for("v-cmt"),kc=Symbol.for("v-stc"),Yo=[];let Rn=null;function cr(t=!1){Yo.push(Rn=t?null:[])}function Uy(){Yo.pop(),Rn=Yo[Yo.length-1]||null}let lf=1;function Op(t){lf+=t}function wg(t){return t.dynamicChildren=lf>0?Rn||yo:null,Uy(),lf>0&&Rn&&Rn.push(t),t}function Sr(t,r,e,n,h,d){return wg(cn(t,r,e,n,h,d,!0))}function vc(t,r,e,n,h){return wg(hr(t,r,e,n,h,!0))}function Xf(t){return t?t.__v_isVNode===!0:!1}function ju(t,r){return t.type===r.type&&t.key===r.key}const gc="__vInternal",mg=({key:t})=>t??null,Ff=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Er(t)||es(t)||ft(t)?{i:ys,r:t,k:r,f:!!e}:t:null);function cn(t,r=null,e=null,n=0,h=null,d=t===Qr?0:1,$=!1,b=!1){const k={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&mg(r),ref:r&&Ff(r),scopeId:fc,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:n,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:ys};return b?(Xh(k,e),d&128&&t.normalize(k)):e&&(k.shapeFlag|=Er(e)?8:16),lf>0&&!$&&Rn&&(k.patchFlag>0||d&6)&&k.patchFlag!==32&&Rn.push(k),k}const hr=qy;function qy(t,r=null,e=null,n=0,h=null,d=!1){if((!t||t===iy)&&(t=pn),Xf(t)){const b=mi(t,r,!0);return e&&Xh(b,e),lf>0&&!d&&Rn&&(b.shapeFlag&6?Rn[Rn.indexOf(t)]=b:Rn.push(b)),b.patchFlag|=-2,b}if(ew(t)&&(t=t.__vccOpts),r){r=zy(r);let{class:b,style:k}=r;b&&!Er(b)&&(r.class=Yr(b)),ar(k)&&(zv(k)&&!Ge(k)&&(k=Fr({},k)),r.style=Bh(k))}const $=Er(t)?1:ly(t)?128:Hy(t)?64:ar(t)?4:ft(t)?2:0;return cn(t,r,e,n,h,$,d,!0)}function zy(t){return t?zv(t)||gc in t?Fr({},t):t:null}function mi(t,r,e=!1){const{props:n,ref:h,patchFlag:d,children:$}=t,b=r?Wy(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:b,key:b&&mg(b),ref:r&&r.ref?e&&h?Ge(h)?h.concat(Ff(r)):[h,Ff(r)]:Ff(r):h,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:$,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Qr?d===-1?16:d|16:d,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&mi(t.ssContent),ssFallback:t.ssFallback&&mi(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function jn(t=" ",r=0){return hr(pc,null,t,r)}function Io(t="",r=!1){return r?(cr(),vc(pn,null,t)):hr(pn,null,t)}function Un(t){return t==null||typeof t=="boolean"?hr(pn):Ge(t)?hr(Qr,null,t.slice()):typeof t=="object"?oi(t):hr(pc,null,String(t))}function oi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:mi(t)}function Xh(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(Ge(r))e=16;else if(typeof r=="object")if(n&65){const h=r.default;h&&(h._c&&(h._d=!1),Xh(t,h()),h._c&&(h._d=!0));return}else{e=32;const h=r._;!h&&!(gc in r)?r._ctx=ys:h===3&&ys&&(ys.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else ft(r)?(r={default:r,_ctx:ys},e=32):(r=String(r),n&64?(e=16,r=[jn(r)]):e=8);t.children=r,t.shapeFlag|=e}function Wy(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const h in n)if(h==="class")r.class!==n.class&&(r.class=Yr([r.class,n.class]));else if(h==="style")r.style=Bh([r.style,n.style]);else if(sc(h)){const d=r[h],$=n[h];$&&d!==$&&!(Ge(d)&&d.includes($))&&(r[h]=d?[].concat(d,$):$)}else h!==""&&(r[h]=n[h])}return r}function Ln(t,r,e,n=null){hn(t,r,7,[e,n])}const Vy=cg();let Ky=0;function Jy(t,r,e){const n=t.type,h=(r?r.appContext:t.appContext)||Vy,d={uid:Ky++,vnode:t,type:n,parent:r,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new wd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pg(n,h),emitsOptions:Yv(n,h),emit:null,emitted:null,propsDefaults:ir,inheritAttrs:n.inheritAttrs,ctx:ir,data:ir,props:ir,attrs:ir,slots:ir,refs:ir,setupState:ir,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=r?r.root:d,d.emit=Yd.bind(null,d),t.ce&&t.ce(d),d}let zr=null;const Zy=()=>zr||ys;let Yh,fo,Tp="__VUE_INSTANCE_SETTERS__";(fo=Kc()[Tp])||(fo=Kc()[Tp]=[]),fo.push(t=>zr=t),Yh=t=>{fo.length>1?fo.forEach(r=>r(t)):fo[0](t)};const jo=t=>{Yh(t),t.scope.on()},Vu=()=>{zr&&zr.scope.off(),Yh(null)};function $g(t){return t.vnode.shapeFlag&4}let uf=!1;function Gy(t,r=!1){uf=r;const{props:e,children:n}=t.vnode,h=$g(t);Ny(t,e,h,r),Iy(t,n);const d=h?Qy(t,r):void 0;return uf=!1,d}function Qy(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=Wv(new Proxy(t.ctx,Ay));const{setup:n}=e;if(n){const h=t.setupContext=n.length>1?Yy(t):null;jo(t),Lo();const d=di(n,t,0,[t.props,h]);if(Bo(),Vu(),Pv(d)){if(d.then(Vu,Vu),r)return d.then($=>{Ip(t,$,r)}).catch($=>{uc($,t,0)});t.asyncDep=d}else Ip(t,d,r)}else xg(t,r)}function Ip(t,r,e){ft(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:ar(r)&&(t.setupState=Jv(r)),xg(t,e)}let jp;function xg(t,r,e){const n=t.type;if(!t.render){if(!r&&jp&&!n.render){const h=n.template||Gh(t).template;if(h){const{isCustomElement:d,compilerOptions:$}=t.appContext.config,{delimiters:b,compilerOptions:k}=n,E=Fr(Fr({isCustomElement:d,delimiters:b},$),k);n.render=jp(h,E)}}t.render=n.render||zn}{jo(t),Lo();try{Cy(t)}finally{Bo(),Vu()}}}function Xy(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return bs(t,"get","$attrs"),r[e]}}))}function Yy(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return Xy(t)},slots:t.slots,emit:t.emit,expose:r}}function ep(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(Jv(Wv(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in Xo)return Xo[e](t)},has(r,e){return e in r||e in Xo}}))}function ew(t){return ft(t)&&"__vccOpts"in t}const tw=(t,r)=>Vd(t,r,uf);function ni(t,r,e){const n=arguments.length;return n===2?ar(r)&&!Ge(r)?Xf(r)?hr(t,null,[r]):hr(t,r):hr(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Xf(e)&&(e=[e]),hr(t,r,e))}const rw=Symbol.for("v-scx"),sw=()=>Sf(rw),nw="3.3.10",aw="http://www.w3.org/2000/svg",Ru=typeof document<"u"?document:null,Rp=Ru&&Ru.createElement("template"),iw={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const h=r?Ru.createElementNS(aw,t):Ru.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&h.setAttribute("multiple",n.multiple),h},createText:t=>Ru.createTextNode(t),createComment:t=>Ru.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ru.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,h,d){const $=e?e.previousSibling:r.lastChild;if(h&&(h===d||h.nextSibling))for(;r.insertBefore(h.cloneNode(!0),e),!(h===d||!(h=h.nextSibling)););else{Rp.innerHTML=n?`<svg>${t}</svg>`:t;const b=Rp.content;if(n){const k=b.firstChild;for(;k.firstChild;)b.appendChild(k.firstChild);b.removeChild(k)}r.insertBefore(b,e)}return[$?$.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},ri="transition",Ho="animation",of=Symbol("_vtc"),tp=(t,{slots:r})=>ni(hy,lw(t),r);tp.displayName="Transition";const bg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};tp.props=Fr({},rg,bg);const Ou=(t,r=[])=>{Ge(t)?t.forEach(e=>e(...r)):t&&t(...r)},Dp=t=>t?Ge(t)?t.some(r=>r.length>1):t.length>1:!1;function lw(t){const r={};for(const ge in t)ge in bg||(r[ge]=t[ge]);if(t.css===!1)return r;const{name:e="v",type:n,duration:h,enterFromClass:d=`${e}-enter-from`,enterActiveClass:$=`${e}-enter-active`,enterToClass:b=`${e}-enter-to`,appearFromClass:k=d,appearActiveClass:E=$,appearToClass:F=b,leaveFromClass:j=`${e}-leave-from`,leaveActiveClass:D=`${e}-leave-active`,leaveToClass:V=`${e}-leave-to`}=t,pe=uw(h),ee=pe&&pe[0],ie=pe&&pe[1],{onBeforeEnter:ke,onEnter:H,onEnterCancelled:L,onLeave:B,onLeaveCancelled:q,onBeforeAppear:J=ke,onAppear:G=H,onAppearCancelled:Q=L}=r,X=(ge,qe,it)=>{Tu(ge,qe?F:b),Tu(ge,qe?E:$),it&&it()},$e=(ge,qe)=>{ge._isLeaving=!1,Tu(ge,j),Tu(ge,V),Tu(ge,D),qe&&qe()},Pe=ge=>(qe,it)=>{const Zt=ge?G:H,lt=()=>X(qe,ge,it);Ou(Zt,[qe,lt]),Lp(()=>{Tu(qe,ge?k:d),si(qe,ge?F:b),Dp(Zt)||Bp(qe,n,ee,lt)})};return Fr(r,{onBeforeEnter(ge){Ou(ke,[ge]),si(ge,d),si(ge,$)},onBeforeAppear(ge){Ou(J,[ge]),si(ge,k),si(ge,E)},onEnter:Pe(!1),onAppear:Pe(!0),onLeave(ge,qe){ge._isLeaving=!0;const it=()=>$e(ge,qe);si(ge,j),cw(),si(ge,D),Lp(()=>{ge._isLeaving&&(Tu(ge,j),si(ge,V),Dp(B)||Bp(ge,n,ie,it))}),Ou(B,[ge,it])},onEnterCancelled(ge){X(ge,!1),Ou(L,[ge])},onAppearCancelled(ge){X(ge,!0),Ou(Q,[ge])},onLeaveCancelled(ge){$e(ge),Ou(q,[ge])}})}function uw(t){if(t==null)return null;if(ar(t))return[Pc(t.enter),Pc(t.leave)];{const r=Pc(t);return[r,r]}}function Pc(t){return cd(t)}function si(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[of]||(t[of]=new Set)).add(r)}function Tu(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[of];e&&(e.delete(r),e.size||(t[of]=void 0))}function Lp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ow=0;function Bp(t,r,e,n){const h=t._endId=++ow,d=()=>{h===t._endId&&n()};if(e)return setTimeout(d,e);const{type:$,timeout:b,propCount:k}=fw(t,r);if(!$)return n();const E=$+"end";let F=0;const j=()=>{t.removeEventListener(E,D),d()},D=V=>{V.target===t&&++F>=k&&j()};setTimeout(()=>{F<k&&j()},b+1),t.addEventListener(E,D)}function fw(t,r){const e=window.getComputedStyle(t),n=pe=>(e[pe]||"").split(", "),h=n(`${ri}Delay`),d=n(`${ri}Duration`),$=Hp(h,d),b=n(`${Ho}Delay`),k=n(`${Ho}Duration`),E=Hp(b,k);let F=null,j=0,D=0;r===ri?$>0&&(F=ri,j=$,D=d.length):r===Ho?E>0&&(F=Ho,j=E,D=k.length):(j=Math.max($,E),F=j>0?$>E?ri:Ho:null,D=F?F===ri?d.length:k.length:0);const V=F===ri&&/\b(transform|all)(,|$)/.test(n(`${ri}Property`).toString());return{type:F,timeout:j,propCount:D,hasTransform:V}}function Hp(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Up(e)+Up(t[n])))}function Up(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function cw(){return document.body.offsetHeight}function hw(t,r,e){const n=t[of];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const pw=Symbol("_vod");function vw(t,r,e){const n=t.style,h=Er(e);if(e&&!h){if(r&&!Er(r))for(const d in r)e[d]==null&&ih(n,d,"");for(const d in e)ih(n,d,e[d])}else{const d=n.display;h?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),pw in t&&(n.display=d)}}const qp=/\s*!important$/;function ih(t,r,e){if(Ge(e))e.forEach(n=>ih(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=gw(t,r);qp.test(e)?t.setProperty(Do(n),e.replace(qp,""),"important"):t[n]=e}}const zp=["Webkit","Moz","ms"],Ec={};function gw(t,r){const e=Ec[r];if(e)return e;let n=Oo(r);if(n!=="filter"&&n in t)return Ec[r]=n;n=Sv(n);for(let h=0;h<zp.length;h++){const d=zp[h]+n;if(d in t)return Ec[r]=d}return r}const Wp="http://www.w3.org/1999/xlink";function dw(t,r,e,n,h){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(Wp,r.slice(6,r.length)):t.setAttributeNS(Wp,r,e);else{const d=yd(r);e==null||d&&!Fv(e)?t.removeAttribute(r):t.setAttribute(r,d?"":e)}}function yw(t,r,e,n,h,d,$){if(r==="innerHTML"||r==="textContent"){n&&$(n,h,d),t[r]=e??"";return}const b=t.tagName;if(r==="value"&&b!=="PROGRESS"&&!b.includes("-")){t._value=e;const E=b==="OPTION"?t.getAttribute("value"):t.value,F=e??"";E!==F&&(t.value=F),e==null&&t.removeAttribute(r);return}let k=!1;if(e===""||e==null){const E=typeof t[r];E==="boolean"?e=Fv(e):e==null&&E==="string"?(e="",k=!0):E==="number"&&(e=0,k=!0)}try{t[r]=e}catch{}k&&t.removeAttribute(r)}function ww(t,r,e,n){t.addEventListener(r,e,n)}function mw(t,r,e,n){t.removeEventListener(r,e,n)}const Vp=Symbol("_vei");function $w(t,r,e,n,h=null){const d=t[Vp]||(t[Vp]={}),$=d[r];if(n&&$)$.value=n;else{const[b,k]=xw(r);if(n){const E=d[r]=Cw(n,h);ww(t,b,E,k)}else $&&(mw(t,b,$,k),d[r]=void 0)}}const Kp=/(?:Once|Passive|Capture)$/;function xw(t){let r;if(Kp.test(t)){r={};let n;for(;n=t.match(Kp);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Do(t.slice(2)),r]}let Mc=0;const bw=Promise.resolve(),Aw=()=>Mc||(bw.then(()=>Mc=0),Mc=Date.now());function Cw(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;hn(_w(n,e.value),r,5,[n])};return e.value=t,e.attached=Aw(),e}function _w(t,r){if(Ge(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>h=>!h._stopped&&n&&n(h))}else return r}const Jp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,kw=(t,r,e,n,h=!1,d,$,b,k)=>{r==="class"?hw(t,n,h):r==="style"?vw(t,e,n):sc(r)?Rh(r)||$w(t,r,e,n,$):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):Pw(t,r,n,h))?yw(t,r,n,d,$,b,k):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),dw(t,r,n,h))};function Pw(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&Jp(r)&&ft(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const h=t.tagName;return!(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")}return Jp(r)&&Er(e)?!1:r in t}const Ew=Fr({patchProp:kw},iw);let Zp;function Mw(){return Zp||(Zp=Ry(Ew))}const Sw=(...t)=>{const r=Mw().createApp(...t),{mount:e}=r;return r.mount=n=>{const h=Fw(n);if(!h)return;const d=r._component;!ft(d)&&!d.render&&!d.template&&(d.template=h.innerHTML),h.innerHTML="";const $=e(h,!1,h instanceof SVGElement);return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),$},r};function Fw(t){return Er(t)?document.querySelector(t):t}function ef(){return ef=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},ef.apply(this,arguments)}var Nw=13,Ow=9,Tw=8,Iw=89,Cf=90,jw=77,Gp=57,Qp=219,Xp=222,Yp=192,Rw=27,ev=100,Dw=3e3,Lw=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),Sc=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Bw=ff({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var h="border-top-left-radius",d="border-bottom-left-radius";if(e){e.style[h]=n[h],e.style[d]=n[d],r.style[h]="0",r.style[d]="0";var $=["background-color","margin-top","padding-top","font-family","font-size","line-height"];$.forEach(function(b){e.style[b]=n[b]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,h=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:h})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=ef({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,h=n.stack,d=n.offset;if(h.length&&d>-1){this.history.stack=h.slice(0,d+1);var $=this.history.stack.length;if($>ev){var b=$-ev;this.history.stack=h.slice(b,$),this.history.offset=Math.max(this.history.offset-b,0)}}var k=Date.now();if(e){var E=this.history.stack[this.history.offset];if(E&&k-E.timestamp<Dw){var F,j,D=/[^a-z0-9]([a-z0-9]+)$/i,V=(F=this._getLines(E.value,E.selectionStart).pop())===null||F===void 0?void 0:F.match(D),pe=(j=this._getLines(r.value,r.selectionStart).pop())===null||j===void 0?void 0:j.match(D);if(V&&pe&&pe[1].startsWith(V[1])){this.history.stack[this.history.offset]=ef({},r,{timestamp:k});return}}}this.history.stack.push(ef({},r,{timestamp:k})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,h=e.selectionStart,d=e.selectionEnd;this._recordChange({value:n,selectionStart:h,selectionEnd:d},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,h=e[n-1];h&&(this._updateInput(h),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,h=e[n+1];h&&(this._updateInput(h),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,h=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Rw&&(r.target.blur(),this.$emit("blur",r));var d=r.target,$=d.value,b=d.selectionStart,k=d.selectionEnd,E=(n?" ":"	").repeat(e);if(r.keyCode===Ow&&!h&&this.capture)if(r.preventDefault(),r.shiftKey){var F=this._getLines($,b),j=F.length-1,D=this._getLines($,k).length-1,V=$.split(`
`).map(function(ge,qe){return qe>=j&&qe<=D&&ge.startsWith(E)?ge.substring(E.length):ge}).join(`
`);if($!==V){var pe=F[j];this._applyEdits({value:V,selectionStart:pe.startsWith(E)?b-E.length:b,selectionEnd:k-($.length-V.length)})}}else if(b!==k){var ee=this._getLines($,b),ie=ee.length-1,ke=this._getLines($,k).length-1,H=ee[ie];this._applyEdits({value:$.split(`
`).map(function(ge,qe){return qe>=ie&&qe<=ke?E+ge:ge}).join(`
`),selectionStart:/\S/.test(H)?b+E.length:b,selectionEnd:k+E.length*(ke-ie+1)})}else{var L=b+E.length;this._applyEdits({value:$.substring(0,b)+E+$.substring(k),selectionStart:L,selectionEnd:L})}else if(r.keyCode===Tw){var B=b!==k,q=$.substring(0,b);if(q.endsWith(E)&&!B){r.preventDefault();var J=b-E.length;this._applyEdits({value:$.substring(0,b-E.length)+$.substring(k),selectionStart:J,selectionEnd:J})}}else if(r.keyCode===Nw){if(b===k){var G=this._getLines($,b).pop(),Q=G==null?void 0:G.match(/^\s+/);if(Q&&Q[0]){r.preventDefault();var X=`
`+Q[0],$e=b+X.length;this._applyEdits({value:$.substring(0,b)+X+$.substring(k),selectionStart:$e,selectionEnd:$e})}}}else if(r.keyCode===Gp||r.keyCode===Qp||r.keyCode===Xp||r.keyCode===Yp){var Pe;r.keyCode===Gp&&r.shiftKey?Pe=["(",")"]:r.keyCode===Qp?r.shiftKey?Pe=["{","}"]:Pe=["[","]"]:r.keyCode===Xp?r.shiftKey?Pe=['"','"']:Pe=["'","'"]:r.keyCode===Yp&&!r.shiftKey&&(Pe=["`","`"]),b!==k&&Pe&&(r.preventDefault(),this._applyEdits({value:$.substring(0,b)+Pe[0]+$.substring(b,k)+Pe[1]+$.substring(k),selectionStart:b,selectionEnd:k+2}))}else(Sc?r.metaKey&&r.keyCode===Cf:r.ctrlKey&&r.keyCode===Cf)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(Sc?r.metaKey&&r.keyCode===Cf&&r.shiftKey:Lw?r.ctrlKey&&r.keyCode===Iw:r.ctrlKey&&r.keyCode===Cf&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===jw&&r.ctrlKey&&(!Sc||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=ni("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=ni("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(b,k){return ni("div",{class:"prism-editor__line-number token comment"},""+ ++k)})]),h=ni("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(k){r.$emit("click",k)},onKeyup:function(k){r.$emit("keyup",k)},onFocus:function(k){r.$emit("focus",k)},onBlur:function(k){r.$emit("blur",k)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),d=ni("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),$=ni("div",{class:"prism-editor__container"},[h,d]);return ni("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,$])}}),tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Uw(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var h=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,h.get?h:{enumerable:!0,get:function(){return t[n]}})}),e}var qw={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,$={},b={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function H(L){return L instanceof k?new k(L.type,H(L.content),L.alias):Array.isArray(L)?L.map(H):L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(H){return Object.prototype.toString.call(H).slice(8,-1)},objId:function(H){return H.__id||Object.defineProperty(H,"__id",{value:++d}),H.__id},clone:function H(L,B){B=B||{};var q,J;switch(b.util.type(L)){case"Object":if(J=b.util.objId(L),B[J])return B[J];q={},B[J]=q;for(var G in L)L.hasOwnProperty(G)&&(q[G]=H(L[G],B));return q;case"Array":return J=b.util.objId(L),B[J]?B[J]:(q=[],B[J]=q,L.forEach(function(Q,X){q[X]=H(Q,B)}),q);default:return L}},getLanguage:function(H){for(;H;){var L=h.exec(H.className);if(L)return L[1].toLowerCase();H=H.parentElement}return"none"},setLanguage:function(H,L){H.className=H.className.replace(RegExp(h,"gi"),""),H.classList.add("language-"+L)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(q){var H=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(q.stack)||[])[1];if(H){var L=document.getElementsByTagName("script");for(var B in L)if(L[B].src==H)return L[B]}return null}},isActive:function(H,L,B){for(var q="no-"+L;H;){var J=H.classList;if(J.contains(L))return!0;if(J.contains(q))return!1;H=H.parentElement}return!!B}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(H,L){var B=b.util.clone(b.languages[H]);for(var q in L)B[q]=L[q];return B},insertBefore:function(H,L,B,q){q=q||b.languages;var J=q[H],G={};for(var Q in J)if(J.hasOwnProperty(Q)){if(Q==L)for(var X in B)B.hasOwnProperty(X)&&(G[X]=B[X]);B.hasOwnProperty(Q)||(G[Q]=J[Q])}var $e=q[H];return q[H]=G,b.languages.DFS(b.languages,function(Pe,ge){ge===$e&&Pe!=H&&(this[Pe]=G)}),G},DFS:function H(L,B,q,J){J=J||{};var G=b.util.objId;for(var Q in L)if(L.hasOwnProperty(Q)){B.call(L,Q,L[Q],q||Q);var X=L[Q],$e=b.util.type(X);$e==="Object"&&!J[G(X)]?(J[G(X)]=!0,H(X,B,null,J)):$e==="Array"&&!J[G(X)]&&(J[G(X)]=!0,H(X,B,Q,J))}}},plugins:{},highlightAll:function(H,L){b.highlightAllUnder(document,H,L)},highlightAllUnder:function(H,L,B){var q={callback:B,container:H,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};b.hooks.run("before-highlightall",q),q.elements=Array.prototype.slice.apply(q.container.querySelectorAll(q.selector)),b.hooks.run("before-all-elements-highlight",q);for(var J=0,G;G=q.elements[J++];)b.highlightElement(G,L===!0,q.callback)},highlightElement:function(H,L,B){var q=b.util.getLanguage(H),J=b.languages[q];b.util.setLanguage(H,q);var G=H.parentElement;G&&G.nodeName.toLowerCase()==="pre"&&b.util.setLanguage(G,q);var Q=H.textContent,X={element:H,language:q,grammar:J,code:Q};function $e(ge){X.highlightedCode=ge,b.hooks.run("before-insert",X),X.element.innerHTML=X.highlightedCode,b.hooks.run("after-highlight",X),b.hooks.run("complete",X),B&&B.call(X.element)}if(b.hooks.run("before-sanity-check",X),G=X.element.parentElement,G&&G.nodeName.toLowerCase()==="pre"&&!G.hasAttribute("tabindex")&&G.setAttribute("tabindex","0"),!X.code){b.hooks.run("complete",X),B&&B.call(X.element);return}if(b.hooks.run("before-highlight",X),!X.grammar){$e(b.util.encode(X.code));return}if(L&&n.Worker){var Pe=new Worker(b.filename);Pe.onmessage=function(ge){$e(ge.data)},Pe.postMessage(JSON.stringify({language:X.language,code:X.code,immediateClose:!0}))}else $e(b.highlight(X.code,X.grammar,X.language))},highlight:function(H,L,B){var q={code:H,grammar:L,language:B};if(b.hooks.run("before-tokenize",q),!q.grammar)throw new Error('The language "'+q.language+'" has no grammar.');return q.tokens=b.tokenize(q.code,q.grammar),b.hooks.run("after-tokenize",q),k.stringify(b.util.encode(q.tokens),q.language)},tokenize:function(H,L){var B=L.rest;if(B){for(var q in B)L[q]=B[q];delete L.rest}var J=new j;return D(J,J.head,H),F(H,J,L,J.head,0),pe(J)},hooks:{all:{},add:function(H,L){var B=b.hooks.all;B[H]=B[H]||[],B[H].push(L)},run:function(H,L){var B=b.hooks.all[H];if(!(!B||!B.length))for(var q=0,J;J=B[q++];)J(L)}},Token:k};n.Prism=b;function k(H,L,B,q){this.type=H,this.content=L,this.alias=B,this.length=(q||"").length|0}k.stringify=function H(L,B){if(typeof L=="string")return L;if(Array.isArray(L)){var q="";return L.forEach(function($e){q+=H($e,B)}),q}var J={type:L.type,content:H(L.content,B),tag:"span",classes:["token",L.type],attributes:{},language:B},G=L.alias;G&&(Array.isArray(G)?Array.prototype.push.apply(J.classes,G):J.classes.push(G)),b.hooks.run("wrap",J);var Q="";for(var X in J.attributes)Q+=" "+X+'="'+(J.attributes[X]||"").replace(/"/g,"&quot;")+'"';return"<"+J.tag+' class="'+J.classes.join(" ")+'"'+Q+">"+J.content+"</"+J.tag+">"};function E(H,L,B,q){H.lastIndex=L;var J=H.exec(B);if(J&&q&&J[1]){var G=J[1].length;J.index+=G,J[0]=J[0].slice(G)}return J}function F(H,L,B,q,J,G){for(var Q in B)if(!(!B.hasOwnProperty(Q)||!B[Q])){var X=B[Q];X=Array.isArray(X)?X:[X];for(var $e=0;$e<X.length;++$e){if(G&&G.cause==Q+","+$e)return;var Pe=X[$e],ge=Pe.inside,qe=!!Pe.lookbehind,it=!!Pe.greedy,Zt=Pe.alias;if(it&&!Pe.pattern.global){var lt=Pe.pattern.toString().match(/[imsuy]*$/)[0];Pe.pattern=RegExp(Pe.pattern.source,lt+"g")}for(var ut=Pe.pattern||Pe,Ie=q.next,at=J;Ie!==L.tail&&!(G&&at>=G.reach);at+=Ie.value.length,Ie=Ie.next){var St=Ie.value;if(L.length>H.length)return;if(!(St instanceof k)){var Ft=1,Qe;if(it){if(Qe=E(ut,at,H,qe),!Qe||Qe.index>=H.length)break;var Pt=Qe.index,Nr=Qe.index+Qe[0].length,Lt=at;for(Lt+=Ie.value.length;Pt>=Lt;)Ie=Ie.next,Lt+=Ie.value.length;if(Lt-=Ie.value.length,at=Lt,Ie.value instanceof k)continue;for(var wr=Ie;wr!==L.tail&&(Lt<Nr||typeof wr.value=="string");wr=wr.next)Ft++,Lt+=wr.value.length;Ft--,St=H.slice(at,Lt),Qe.index-=at}else if(Qe=E(ut,0,St,qe),!Qe)continue;var Pt=Qe.index,dr=Qe[0],Or=St.slice(0,Pt),kr=St.slice(Pt+dr.length),Mr=at+St.length;G&&Mr>G.reach&&(G.reach=Mr);var Nt=Ie.prev;Or&&(Nt=D(L,Nt,Or),at+=Or.length),V(L,Nt,Ft);var U=new k(Q,ge?b.tokenize(dr,ge):dr,Zt,dr);if(Ie=D(L,Nt,U),kr&&D(L,Ie,kr),Ft>1){var K={cause:Q+","+$e,reach:Mr};F(H,L,B,Ie.prev,at,K),G&&K.reach>G.reach&&(G.reach=K.reach)}}}}}}function j(){var H={value:null,prev:null,next:null},L={value:null,prev:H,next:null};H.next=L,this.head=H,this.tail=L,this.length=0}function D(H,L,B){var q=L.next,J={value:B,prev:L,next:q};return L.next=J,q.prev=J,H.length++,J}function V(H,L,B){for(var q=L.next,J=0;J<B&&q!==H.tail;J++)q=q.next;L.next=q,q.prev=L,H.length-=J}function pe(H){for(var L=[],B=H.head.next;B!==H.tail;)L.push(B.value),B=B.next;return L}if(!n.document)return n.addEventListener&&(b.disableWorkerMessageHandler||n.addEventListener("message",function(H){var L=JSON.parse(H.data),B=L.language,q=L.code,J=L.immediateClose;n.postMessage(b.highlight(q,b.languages[B],B)),J&&n.close()},!1)),b;var ee=b.util.currentScript();ee&&(b.filename=ee.src,ee.hasAttribute("data-manual")&&(b.manual=!0));function ie(){b.manual||b.highlightAll()}if(!b.manual){var ke=document.readyState;ke==="loading"||ke==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return b}(r);t.exports&&(t.exports=e),typeof tn<"u"&&(tn.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(h,d){var $={};$["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[d]},$.cdata=/^<!\[CDATA\[|\]\]>$/i;var b={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:$}};b["language-"+d]={pattern:/[\s\S]+/,inside:e.languages[d]};var k={};k[h]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return h}),"i"),lookbehind:!0,greedy:!0,inside:b},e.languages.insertBefore("markup","cdata",k)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,h){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[h,"language-"+h],inside:e.languages[h]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var h=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+h.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+h.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+h.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+h.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:h,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var d=n.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",h=function(ee,ie){return" Error "+ee+" while fetching file: "+ie},d=" Error: File does not exist or is empty",$={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},b="data-src-status",k="loading",E="loaded",F="failed",j="pre[data-src]:not(["+b+'="'+E+'"]):not(['+b+'="'+k+'"])';function D(ee,ie,ke){var H=new XMLHttpRequest;H.open("GET",ee,!0),H.onreadystatechange=function(){H.readyState==4&&(H.status<400&&H.responseText?ie(H.responseText):H.status>=400?ke(h(H.status,H.statusText)):ke(d))},H.send(null)}function V(ee){var ie=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ee||"");if(ie){var ke=Number(ie[1]),H=ie[2],L=ie[3];return H?L?[ke,Number(L)]:[ke,void 0]:[ke,ke]}}e.hooks.add("before-highlightall",function(ee){ee.selector+=", "+j}),e.hooks.add("before-sanity-check",function(ee){var ie=ee.element;if(ie.matches(j)){ee.code="",ie.setAttribute(b,k);var ke=ie.appendChild(document.createElement("CODE"));ke.textContent=n;var H=ie.getAttribute("data-src"),L=ee.language;if(L==="none"){var B=(/\.(\w+)$/.exec(H)||[,"none"])[1];L=$[B]||B}e.util.setLanguage(ke,L),e.util.setLanguage(ie,L);var q=e.plugins.autoloader;q&&q.loadLanguages(L),D(H,function(J){ie.setAttribute(b,E);var G=V(ie.getAttribute("data-range"));if(G){var Q=J.split(/\r\n?|\n/g),X=G[0],$e=G[1]==null?Q.length:G[1];X<0&&(X+=Q.length),X=Math.max(0,Math.min(X-1,Q.length)),$e<0&&($e+=Q.length),$e=Math.max(0,Math.min($e,Q.length)),J=Q.slice(X,$e).join(`
`),ie.hasAttribute("data-start")||ie.setAttribute("data-start",String(X+1))}ke.textContent=J,e.highlightElement(ke)},function(J){ie.setAttribute(b,F),ke.textContent=J})}}),e.plugins.fileHighlight={highlight:function(ie){for(var ke=(ie||document).querySelectorAll(j),H=0,L;L=ke[H++];)e.highlightElement(L)}};var pe=!1;e.fileHighlight=function(){pe||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),pe=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(qw);var Ag={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var h=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,$={},b={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function H(L){return L instanceof k?new k(L.type,H(L.content),L.alias):Array.isArray(L)?L.map(H):L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(H){return Object.prototype.toString.call(H).slice(8,-1)},objId:function(H){return H.__id||Object.defineProperty(H,"__id",{value:++d}),H.__id},clone:function H(L,B){B=B||{};var q,J;switch(b.util.type(L)){case"Object":if(J=b.util.objId(L),B[J])return B[J];q={},B[J]=q;for(var G in L)L.hasOwnProperty(G)&&(q[G]=H(L[G],B));return q;case"Array":return J=b.util.objId(L),B[J]?B[J]:(q=[],B[J]=q,L.forEach(function(Q,X){q[X]=H(Q,B)}),q);default:return L}},getLanguage:function(H){for(;H;){var L=h.exec(H.className);if(L)return L[1].toLowerCase();H=H.parentElement}return"none"},setLanguage:function(H,L){H.className=H.className.replace(RegExp(h,"gi"),""),H.classList.add("language-"+L)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(q){var H=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(q.stack)||[])[1];if(H){var L=document.getElementsByTagName("script");for(var B in L)if(L[B].src==H)return L[B]}return null}},isActive:function(H,L,B){for(var q="no-"+L;H;){var J=H.classList;if(J.contains(L))return!0;if(J.contains(q))return!1;H=H.parentElement}return!!B}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(H,L){var B=b.util.clone(b.languages[H]);for(var q in L)B[q]=L[q];return B},insertBefore:function(H,L,B,q){q=q||b.languages;var J=q[H],G={};for(var Q in J)if(J.hasOwnProperty(Q)){if(Q==L)for(var X in B)B.hasOwnProperty(X)&&(G[X]=B[X]);B.hasOwnProperty(Q)||(G[Q]=J[Q])}var $e=q[H];return q[H]=G,b.languages.DFS(b.languages,function(Pe,ge){ge===$e&&Pe!=H&&(this[Pe]=G)}),G},DFS:function H(L,B,q,J){J=J||{};var G=b.util.objId;for(var Q in L)if(L.hasOwnProperty(Q)){B.call(L,Q,L[Q],q||Q);var X=L[Q],$e=b.util.type(X);$e==="Object"&&!J[G(X)]?(J[G(X)]=!0,H(X,B,null,J)):$e==="Array"&&!J[G(X)]&&(J[G(X)]=!0,H(X,B,Q,J))}}},plugins:{},highlightAll:function(H,L){b.highlightAllUnder(document,H,L)},highlightAllUnder:function(H,L,B){var q={callback:B,container:H,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};b.hooks.run("before-highlightall",q),q.elements=Array.prototype.slice.apply(q.container.querySelectorAll(q.selector)),b.hooks.run("before-all-elements-highlight",q);for(var J=0,G;G=q.elements[J++];)b.highlightElement(G,L===!0,q.callback)},highlightElement:function(H,L,B){var q=b.util.getLanguage(H),J=b.languages[q];b.util.setLanguage(H,q);var G=H.parentElement;G&&G.nodeName.toLowerCase()==="pre"&&b.util.setLanguage(G,q);var Q=H.textContent,X={element:H,language:q,grammar:J,code:Q};function $e(ge){X.highlightedCode=ge,b.hooks.run("before-insert",X),X.element.innerHTML=X.highlightedCode,b.hooks.run("after-highlight",X),b.hooks.run("complete",X),B&&B.call(X.element)}if(b.hooks.run("before-sanity-check",X),G=X.element.parentElement,G&&G.nodeName.toLowerCase()==="pre"&&!G.hasAttribute("tabindex")&&G.setAttribute("tabindex","0"),!X.code){b.hooks.run("complete",X),B&&B.call(X.element);return}if(b.hooks.run("before-highlight",X),!X.grammar){$e(b.util.encode(X.code));return}if(L&&n.Worker){var Pe=new Worker(b.filename);Pe.onmessage=function(ge){$e(ge.data)},Pe.postMessage(JSON.stringify({language:X.language,code:X.code,immediateClose:!0}))}else $e(b.highlight(X.code,X.grammar,X.language))},highlight:function(H,L,B){var q={code:H,grammar:L,language:B};if(b.hooks.run("before-tokenize",q),!q.grammar)throw new Error('The language "'+q.language+'" has no grammar.');return q.tokens=b.tokenize(q.code,q.grammar),b.hooks.run("after-tokenize",q),k.stringify(b.util.encode(q.tokens),q.language)},tokenize:function(H,L){var B=L.rest;if(B){for(var q in B)L[q]=B[q];delete L.rest}var J=new j;return D(J,J.head,H),F(H,J,L,J.head,0),pe(J)},hooks:{all:{},add:function(H,L){var B=b.hooks.all;B[H]=B[H]||[],B[H].push(L)},run:function(H,L){var B=b.hooks.all[H];if(!(!B||!B.length))for(var q=0,J;J=B[q++];)J(L)}},Token:k};n.Prism=b;function k(H,L,B,q){this.type=H,this.content=L,this.alias=B,this.length=(q||"").length|0}k.stringify=function H(L,B){if(typeof L=="string")return L;if(Array.isArray(L)){var q="";return L.forEach(function($e){q+=H($e,B)}),q}var J={type:L.type,content:H(L.content,B),tag:"span",classes:["token",L.type],attributes:{},language:B},G=L.alias;G&&(Array.isArray(G)?Array.prototype.push.apply(J.classes,G):J.classes.push(G)),b.hooks.run("wrap",J);var Q="";for(var X in J.attributes)Q+=" "+X+'="'+(J.attributes[X]||"").replace(/"/g,"&quot;")+'"';return"<"+J.tag+' class="'+J.classes.join(" ")+'"'+Q+">"+J.content+"</"+J.tag+">"};function E(H,L,B,q){H.lastIndex=L;var J=H.exec(B);if(J&&q&&J[1]){var G=J[1].length;J.index+=G,J[0]=J[0].slice(G)}return J}function F(H,L,B,q,J,G){for(var Q in B)if(!(!B.hasOwnProperty(Q)||!B[Q])){var X=B[Q];X=Array.isArray(X)?X:[X];for(var $e=0;$e<X.length;++$e){if(G&&G.cause==Q+","+$e)return;var Pe=X[$e],ge=Pe.inside,qe=!!Pe.lookbehind,it=!!Pe.greedy,Zt=Pe.alias;if(it&&!Pe.pattern.global){var lt=Pe.pattern.toString().match(/[imsuy]*$/)[0];Pe.pattern=RegExp(Pe.pattern.source,lt+"g")}for(var ut=Pe.pattern||Pe,Ie=q.next,at=J;Ie!==L.tail&&!(G&&at>=G.reach);at+=Ie.value.length,Ie=Ie.next){var St=Ie.value;if(L.length>H.length)return;if(!(St instanceof k)){var Ft=1,Qe;if(it){if(Qe=E(ut,at,H,qe),!Qe||Qe.index>=H.length)break;var Pt=Qe.index,Nr=Qe.index+Qe[0].length,Lt=at;for(Lt+=Ie.value.length;Pt>=Lt;)Ie=Ie.next,Lt+=Ie.value.length;if(Lt-=Ie.value.length,at=Lt,Ie.value instanceof k)continue;for(var wr=Ie;wr!==L.tail&&(Lt<Nr||typeof wr.value=="string");wr=wr.next)Ft++,Lt+=wr.value.length;Ft--,St=H.slice(at,Lt),Qe.index-=at}else if(Qe=E(ut,0,St,qe),!Qe)continue;var Pt=Qe.index,dr=Qe[0],Or=St.slice(0,Pt),kr=St.slice(Pt+dr.length),Mr=at+St.length;G&&Mr>G.reach&&(G.reach=Mr);var Nt=Ie.prev;Or&&(Nt=D(L,Nt,Or),at+=Or.length),V(L,Nt,Ft);var U=new k(Q,ge?b.tokenize(dr,ge):dr,Zt,dr);if(Ie=D(L,Nt,U),kr&&D(L,Ie,kr),Ft>1){var K={cause:Q+","+$e,reach:Mr};F(H,L,B,Ie.prev,at,K),G&&K.reach>G.reach&&(G.reach=K.reach)}}}}}}function j(){var H={value:null,prev:null,next:null},L={value:null,prev:H,next:null};H.next=L,this.head=H,this.tail=L,this.length=0}function D(H,L,B){var q=L.next,J={value:B,prev:L,next:q};return L.next=J,q.prev=J,H.length++,J}function V(H,L,B){for(var q=L.next,J=0;J<B&&q!==H.tail;J++)q=q.next;L.next=q,q.prev=L,H.length-=J}function pe(H){for(var L=[],B=H.head.next;B!==H.tail;)L.push(B.value),B=B.next;return L}if(!n.document)return n.addEventListener&&(b.disableWorkerMessageHandler||n.addEventListener("message",function(H){var L=JSON.parse(H.data),B=L.language,q=L.code,J=L.immediateClose;n.postMessage(b.highlight(q,b.languages[B],B)),J&&n.close()},!1)),b;var ee=b.util.currentScript();ee&&(b.filename=ee.src,ee.hasAttribute("data-manual")&&(b.manual=!0));function ie(){b.manual||b.highlightAll()}if(!b.manual){var ke=document.readyState;ke==="loading"||ke==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",ie):window.requestAnimationFrame?window.requestAnimationFrame(ie):window.setTimeout(ie,16)}return b}(r);t.exports&&(t.exports=e),typeof tn<"u"&&(tn.Prism=e)})(Ag);var tv=Ag.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const zw={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},Ww="_container_zhbxc_2",Vw="_header_zhbxc_9",Kw="_main_zhbxc_14",Jw="_footer_zhbxc_19",Zw={container:Ww,header:Vw,main:Kw,footer:Jw},cf=(t,r)=>{const e=t.__vccOpts||t;for(const[n,h]of r)e[n]=h;return e};function Gw(t,r,e,n,h,d){return cr(),Sr("div",{class:Yr(t.$style.container)},[d.hasHeader?(cr(),Sr("header",{key:0,class:Yr(t.$style.header)},[Mf(t.$slots,"header")],2)):Io("",!0),cn("main",{class:Yr(t.$style.main)},[Mf(t.$slots,"default")],2),d.hasFooter?(cr(),Sr("footer",{key:1,class:Yr(t.$style.footer)},[Mf(t.$slots,"footer")],2)):Io("",!0)],2)}const Qw={$style:Zw},Zo=cf(zw,[["render",Gw],["__cssModules",Qw]]),Xw={key:0},Yw=["onClick"],em={key:1},tm=["onClick"],rm=ff({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=Lu(!1),n=r;return(h,d)=>(cr(),Sr("div",{class:Yr(h.$style.wrapper)},[cn("button",{onClick:d[0]||(d[0]=$=>e.value=!e.value)},[Mf(h.$slots,"default")]),hr(tp,null,{default:xs(()=>[e.value?(cr(),Sr("div",{key:0,class:Yr(h.$style.menu)},[h.options instanceof Array?(cr(),Sr("div",Xw,[(cr(!0),Sr(Qr,null,Zf(h.options,$=>(cr(),Sr("div",{class:Yr(h.$style.opt),onClick:b=>{e.value=!1,n("select",$)}},zu($),11,Yw))),256))])):(cr(),Sr("div",em,[(cr(!0),Sr(Qr,null,Zf(Object.keys(h.options),$=>(cr(),Sr("div",{class:Yr(h.$style.opt),onClick:b=>{e.value=!1,n("select",$)}},zu(h.options[$]),11,tm))),256))]))],2)):Io("",!0)]),_:1})],2))}}),sm="_wrapper_1dk0z_2",nm="_menu_1dk0z_5",am="_opt_1dk0z_12",im={wrapper:sm,menu:nm,opt:am},lm={$style:im},Cg=cf(rm,[["__cssModules",lm]]),um=ff({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,h=Lu(e.modelValue);Go(h,()=>{n("update:modelValue",h.value)},{immediate:!0});function d(b){h.value=e.samples[b]}const $=b=>tv.highlight(b,tv.languages.js,"javascript");return(b,k)=>(cr(),vc(Zo,null,{header:xs(()=>[jn(" Input "),e.samples?(cr(),Sr("div",{key:0,class:Yr(b.$style.actions)},[hr(Cg,{options:Object.keys(e.samples),onSelect:d},{default:xs(()=>[jn("Samples")]),_:1},8,["options"])],2)):Io("",!0)]),footer:xs(()=>[e.parseError?(cr(),Sr("span",{key:0,class:Yr(b.$style.parseError)},zu(e.parseError),3)):Io("",!0),cn("div",{class:Yr(b.$style.actions)},[cn("button",{onClick:k[1]||(k[1]=E=>n("run"))},"RUN")],2)]),default:xs(()=>[hr(sf(Bw),{class:Yr(b.$style.code),modelValue:h.value,"onUpdate:modelValue":k[0]||(k[0]=E=>h.value=E),highlight:$,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),om="_code_af8rl_2",fm="_parseError_af8rl_6",cm="_actions_af8rl_9",hm={code:om,parseError:fm,actions:cm},pm={$style:hm},vm=cf(um,[["__cssModules",pm]]);function lr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let Ro=class _g extends Error{constructor(e,n){super(e);me(this,"name","AiScript");me(this,"info");me(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,_g)}},rv=class extends Ro{constructor(e){super(e.message??`${e}`,e);me(this,"name","Internal")}},gt=class extends Ro{constructor(e,n,h){super(`${e} (Line ${n.line}, Column ${n.column})`,h);me(this,"loc");me(this,"name","Syntax");this.loc=n}};class sv extends Ro{constructor(e,n,h){super(`${e} (Line ${n.line}, Column ${n.column})`,h);me(this,"loc");me(this,"name","Namespace");this.loc=n}}let Vt=class extends Ro{constructor(e,n){super(e,n);me(this,"name","Runtime")}},gm=class extends Vt{constructor(r,e){super(r,e)}};var $i=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Xa=class kg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new kg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Vt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Vt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Vt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Vt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};$i([lr],Xa.prototype,"log",null);$i([lr],Xa.prototype,"onUpdated",null);$i([lr],Xa.prototype,"createChildScope",null);$i([lr],Xa.prototype,"get",null);$i([lr],Xa.prototype,"exists",null);$i([lr],Xa.prototype,"getAll",null);$i([lr],Xa.prototype,"add",null);$i([lr],Xa.prototype,"assign",null);let _f;const dm=new Uint8Array(16);function ym(){if(!_f&&(_f=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_f))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _f(dm)}const Hr=[];for(let t=0;t<256;++t)Hr.push((t+256).toString(16).slice(1));function wm(t,r=0){return Hr[t[r+0]]+Hr[t[r+1]]+Hr[t[r+2]]+Hr[t[r+3]]+"-"+Hr[t[r+4]]+Hr[t[r+5]]+"-"+Hr[t[r+6]]+Hr[t[r+7]]+"-"+Hr[t[r+8]]+Hr[t[r+9]]+"-"+Hr[t[r+10]]+Hr[t[r+11]]+Hr[t[r+12]]+Hr[t[r+13]]+Hr[t[r+14]]+Hr[t[r+15]]}const mm=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nv={randomUUID:mm};function rp(t,r,e){if(nv.randomUUID&&!r&&!t)return nv.randomUUID();t=t||{};const n=t.random||(t.rng||ym)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return wm(n)}var sp={exports:{}};sp.exports;(function(t){(function(r,e,n){function h(k){var E=this,F=b();E.next=function(){var j=2091639*E.s0+E.c*23283064365386963e-26;return E.s0=E.s1,E.s1=E.s2,E.s2=j-(E.c=j|0)},E.c=1,E.s0=F(" "),E.s1=F(" "),E.s2=F(" "),E.s0-=F(k),E.s0<0&&(E.s0+=1),E.s1-=F(k),E.s1<0&&(E.s1+=1),E.s2-=F(k),E.s2<0&&(E.s2+=1),F=null}function d(k,E){return E.c=k.c,E.s0=k.s0,E.s1=k.s1,E.s2=k.s2,E}function $(k,E){var F=new h(k),j=E&&E.state,D=F.next;return D.int32=function(){return F.next()*4294967296|0},D.double=function(){return D()+(D()*2097152|0)*11102230246251565e-32},D.quick=D,j&&(typeof j=="object"&&d(j,F),D.state=function(){return d(F,{})}),D}function b(){var k=4022871197,E=function(F){F=String(F);for(var j=0;j<F.length;j++){k+=F.charCodeAt(j);var D=.02519603282416938*k;k=D>>>0,D-=k,D*=k,k=D>>>0,D-=k,k+=D*4294967296}return(k>>>0)*23283064365386963e-26};return E}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.alea=$})(tn,t,!1)})(sp);var $m=sp.exports,np={exports:{}};np.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.x=0,k.y=0,k.z=0,k.w=0,k.next=function(){var j=k.x^k.x<<11;return k.x=k.y,k.y=k.z,k.z=k.w,k.w^=k.w>>>19^j^j>>>8},b===(b|0)?k.x=b:E+=b;for(var F=0;F<E.length+64;F++)k.x^=E.charCodeAt(F)|0,k.next()}function d(b,k){return k.x=b.x,k.y=b.y,k.z=b.z,k.w=b.w,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor128=$})(tn,t,!1)})(np);var xm=np.exports,ap={exports:{}};ap.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.next=function(){var j=k.x^k.x>>>2;return k.x=k.y,k.y=k.z,k.z=k.w,k.w=k.v,(k.d=k.d+362437|0)+(k.v=k.v^k.v<<4^(j^j<<1))|0},k.x=0,k.y=0,k.z=0,k.w=0,k.v=0,b===(b|0)?k.x=b:E+=b;for(var F=0;F<E.length+64;F++)k.x^=E.charCodeAt(F)|0,F==E.length&&(k.d=k.x<<10^k.x>>>4),k.next()}function d(b,k){return k.x=b.x,k.y=b.y,k.z=b.z,k.w=b.w,k.v=b.v,k.d=b.d,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorwow=$})(tn,t,!1)})(ap);var bm=ap.exports,ip={exports:{}};ip.exports;(function(t){(function(r,e,n){function h(b){var k=this;k.next=function(){var F=k.x,j=k.i,D,V;return D=F[j],D^=D>>>7,V=D^D<<24,D=F[j+1&7],V^=D^D>>>10,D=F[j+3&7],V^=D^D>>>3,D=F[j+4&7],V^=D^D<<7,D=F[j+7&7],D=D^D<<13,V^=D^D<<9,F[j]=V,k.i=j+1&7,V};function E(F,j){var D,V=[];if(j===(j|0))V[0]=j;else for(j=""+j,D=0;D<j.length;++D)V[D&7]=V[D&7]<<15^j.charCodeAt(D)+V[D+1&7]<<13;for(;V.length<8;)V.push(0);for(D=0;D<8&&V[D]===0;++D);for(D==8?V[7]=-1:V[D],F.x=V,F.i=0,D=256;D>0;--D)F.next()}E(k,b)}function d(b,k){return k.x=b.x.slice(),k.i=b.i,k}function $(b,k){b==null&&(b=+new Date);var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(F.x&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorshift7=$})(tn,t,!1)})(ip);var Am=ip.exports,lp={exports:{}};lp.exports;(function(t){(function(r,e,n){function h(b){var k=this;k.next=function(){var F=k.w,j=k.X,D=k.i,V,pe;return k.w=F=F+1640531527|0,pe=j[D+34&127],V=j[D=D+1&127],pe^=pe<<13,V^=V<<17,pe^=pe>>>15,V^=V>>>12,pe=j[D]=pe^V,k.i=D,pe+(F^F>>>16)|0};function E(F,j){var D,V,pe,ee,ie,ke=[],H=128;for(j===(j|0)?(V=j,j=null):(j=j+"\0",V=0,H=Math.max(H,j.length)),pe=0,ee=-32;ee<H;++ee)j&&(V^=j.charCodeAt((ee+32)%j.length)),ee===0&&(ie=V),V^=V<<10,V^=V>>>15,V^=V<<4,V^=V>>>13,ee>=0&&(ie=ie+1640531527|0,D=ke[ee&127]^=V+ie,pe=D==0?pe+1:0);for(pe>=128&&(ke[(j&&j.length||0)&127]=-1),pe=127,ee=4*128;ee>0;--ee)V=ke[pe+34&127],D=ke[pe=pe+1&127],V^=V<<13,D^=D<<17,V^=V>>>15,D^=D>>>12,ke[pe]=V^D;F.w=ie,F.X=ke,F.i=pe}E(k,b)}function d(b,k){return k.i=b.i,k.w=b.w,k.X=b.X.slice(),k}function $(b,k){b==null&&(b=+new Date);var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(F.X&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor4096=$})(tn,t,!1)})(lp);var Cm=lp.exports,up={exports:{}};up.exports;(function(t){(function(r,e,n){function h(b){var k=this,E="";k.next=function(){var j=k.b,D=k.c,V=k.d,pe=k.a;return j=j<<25^j>>>7^D,D=D-V|0,V=V<<24^V>>>8^pe,pe=pe-j|0,k.b=j=j<<20^j>>>12^D,k.c=D=D-V|0,k.d=V<<16^D>>>16^pe,k.a=pe-j|0},k.a=0,k.b=0,k.c=-1640531527,k.d=1367130551,b===Math.floor(b)?(k.a=b/4294967296|0,k.b=b|0):E+=b;for(var F=0;F<E.length+20;F++)k.b^=E.charCodeAt(F)|0,k.next()}function d(b,k){return k.a=b.a,k.b=b.b,k.c=b.c,k.d=b.d,k}function $(b,k){var E=new h(b),F=k&&k.state,j=function(){return(E.next()>>>0)/4294967296};return j.double=function(){do var D=E.next()>>>11,V=(E.next()>>>0)/4294967296,pe=(D+V)/(1<<21);while(pe===0);return pe},j.int32=E.next,j.quick=j,F&&(typeof F=="object"&&d(F,E),j.state=function(){return d(E,{})}),j}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.tychei=$})(tn,t,!1)})(up);var _m=up.exports,Pg={exports:{}};const km={},Pm=Object.freeze(Object.defineProperty({__proto__:null,default:km},Symbol.toStringTag,{value:"Module"})),Em=Uw(Pm);(function(t){(function(r,e,n){var h=256,d=6,$=52,b="random",k=n.pow(h,d),E=n.pow(2,$),F=E*2,j=h-1,D;function V(B,q,J){var G=[];q=q==!0?{entropy:!0}:q||{};var Q=ke(ie(q.entropy?[B,L(e)]:B??H(),3),G),X=new pe(G),$e=function(){for(var Pe=X.g(d),ge=k,qe=0;Pe<E;)Pe=(Pe+qe)*h,ge*=h,qe=X.g(1);for(;Pe>=F;)Pe/=2,ge/=2,qe>>>=1;return(Pe+qe)/ge};return $e.int32=function(){return X.g(4)|0},$e.quick=function(){return X.g(4)/4294967296},$e.double=$e,ke(L(X.S),e),(q.pass||J||function(Pe,ge,qe,it){return it&&(it.S&&ee(it,X),Pe.state=function(){return ee(X,{})}),qe?(n[b]=Pe,ge):Pe})($e,Q,"global"in q?q.global:this==n,q.state)}function pe(B){var q,J=B.length,G=this,Q=0,X=G.i=G.j=0,$e=G.S=[];for(J||(B=[J++]);Q<h;)$e[Q]=Q++;for(Q=0;Q<h;Q++)$e[Q]=$e[X=j&X+B[Q%J]+(q=$e[Q])],$e[X]=q;(G.g=function(Pe){for(var ge,qe=0,it=G.i,Zt=G.j,lt=G.S;Pe--;)ge=lt[it=j&it+1],qe=qe*h+lt[j&(lt[it]=lt[Zt=j&Zt+ge])+(lt[Zt]=ge)];return G.i=it,G.j=Zt,qe})(h)}function ee(B,q){return q.i=B.i,q.j=B.j,q.S=B.S.slice(),q}function ie(B,q){var J=[],G=typeof B,Q;if(q&&G=="object")for(Q in B)try{J.push(ie(B[Q],q-1))}catch{}return J.length?J:G=="string"?B:B+"\0"}function ke(B,q){for(var J=B+"",G,Q=0;Q<J.length;)q[j&Q]=j&(G^=q[j&Q]*19)+J.charCodeAt(Q++);return L(q)}function H(){try{var B;return D&&(B=D.randomBytes)?B=B(h):(B=new Uint8Array(h),(r.crypto||r.msCrypto).getRandomValues(B)),L(B)}catch{var q=r.navigator,J=q&&q.plugins;return[+new Date,r,J,r.screen,L(e)]}}function L(B){return String.fromCharCode.apply(0,B)}if(ke(n.random(),e),t.exports){t.exports=V;try{D=Em}catch{}}else n["seed"+b]=V})(typeof self<"u"?self:tn,[],Math)})(Pg);var Mm=Pg.exports,Sm=$m,Fm=xm,Nm=bm,Om=Am,Tm=Cm,Im=_m,io=Mm;io.alea=Sm;io.xor128=Fm;io.xorwow=Nm;io.xorshift7=Om;io.xor4096=Tm;io.tychei=Im;var jm=io;const hf=Hw(jm),At={type:"null"},an={type:"bool",value:!0},Ws={type:"bool",value:!1},Se=t=>({type:"num",value:t}),zt=t=>({type:"str",value:t}),Ku=t=>({type:"bool",value:t}),Yf=t=>({type:"obj",value:t}),Kr=t=>({type:"arr",value:t}),Rm=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ue=t=>({type:"fn",native:t}),Dm=t=>({type:"return",value:t}),Lm=()=>({type:"break",value:null}),Bm=()=>({type:"continue",value:null}),Hm=t=>t.type==="return"?t.value:t,lh=(t,r)=>({type:"error",value:t,info:r});function Gs(t){if(t==null)throw new Vt("Expect anything, but got nothing.")}function hs(t){if(t==null)throw new Vt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Vt(`Expect boolean, but got ${t.type}.`)}function fi(t){if(t==null)throw new Vt("Expect function, but got nothing.");if(t.type!=="fn")throw new Vt(`Expect function, but got ${t.type}.`)}function Cr(t){if(t==null)throw new Vt("Expect string, but got nothing.");if(t.type!=="str")throw new Vt(`Expect string, but got ${t.type}.`)}function Ae(t){if(t==null)throw new Vt("Expect number, but got nothing.");if(t.type!=="num")throw new Vt(`Expect number, but got ${t.type}.`)}function Bn(t){if(t==null)throw new Vt("Expect object, but got nothing.");if(t.type!=="obj")throw new Vt(`Expect object, but got ${t.type}.`)}function ec(t){if(t==null)throw new Vt("Expect array, but got nothing.");if(t.type!=="arr")throw new Vt(`Expect array, but got ${t.type}.`)}function Fc(t){return t.type==="obj"}function av(t){return t.type==="arr"}function uh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function oh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>oh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function fh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>fh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=fh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function ch(t){if(t===null)return At;if(typeof t=="boolean")return Ku(t);if(typeof t=="string")return zt(t);if(typeof t=="number")return Se(t);if(Array.isArray(t))return Kr(t.map(r=>ch(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,ch(n));return Yf(r)}return At}function xo(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(xo(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${xo(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Um={help:zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zt("0.16.0"),"Core:ai":zt("kawaii"),"Core:not":ue(([t])=>(hs(t),t.value?Ws:an)),"Core:eq":ue(([t,r])=>(Gs(t),Gs(r),uh(t,r)?an:Ws)),"Core:neq":ue(([t,r])=>(Gs(t),Gs(r),uh(t,r)?Ws:an)),"Core:and":ue(([t,r])=>(hs(t),t.value?(hs(r),r.value?an:Ws):Ws)),"Core:or":ue(([t,r])=>(hs(t),t.value?an:(hs(r),r.value?an:Ws))),"Core:add":ue(([t,r])=>(Ae(t),Ae(r),Se(t.value+r.value))),"Core:sub":ue(([t,r])=>(Ae(t),Ae(r),Se(t.value-r.value))),"Core:mul":ue(([t,r])=>(Ae(t),Ae(r),Se(t.value*r.value))),"Core:pow":ue(([t,r])=>{Ae(t),Ae(r);const e=t.value**r.value;if(isNaN(e))throw new Vt("Invalid operation.");return Se(e)}),"Core:div":ue(([t,r])=>{Ae(t),Ae(r);const e=t.value/r.value;if(isNaN(e))throw new Vt("Invalid operation.");return Se(e)}),"Core:mod":ue(([t,r])=>(Ae(t),Ae(r),Se(t.value%r.value))),"Core:gt":ue(([t,r])=>(Ae(t),Ae(r),t.value>r.value?an:Ws)),"Core:lt":ue(([t,r])=>(Ae(t),Ae(r),t.value<r.value?an:Ws)),"Core:gteq":ue(([t,r])=>(Ae(t),Ae(r),t.value>=r.value?an:Ws)),"Core:lteq":ue(([t,r])=>(Ae(t),Ae(r),t.value<=r.value?an:Ws)),"Core:type":ue(([t])=>(Gs(t),zt(t.type))),"Core:to_str":ue(([t])=>(Gs(t),zt(xo(t)))),"Core:range":ue(([t,r])=>(Ae(t),Ae(r),t.value<r.value?Kr(Array.from({length:r.value-t.value+1},(e,n)=>Se(n+t.value))):t.value>r.value?Kr(Array.from({length:t.value-r.value+1},(e,n)=>Se(t.value-n))):Kr([t]))),"Core:sleep":ue(async([t])=>(Ae(t),await new Promise(r=>setTimeout(r,t.value)),At)),"Util:uuid":ue(()=>zt(rp())),"Json:stringify":ue(([t])=>(Gs(t),zt(JSON.stringify(fh(t))))),"Json:parse":ue(([t])=>{Cr(t);try{return ch(JSON.parse(t.value))}catch{return lh("not_json")}}),"Json:parsable":ue(([t])=>{Cr(t);try{JSON.parse(t.value)}catch{return Ku(!1)}return Ku(!0)}),"Date:now":ue(()=>Se(Date.now())),"Date:year":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ue(([t])=>(t&&Ae(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ue(([t])=>(Cr(t),Se(new Date(t.value).getTime()))),"Math:Infinity":Se(1/0),"Math:E":Se(Math.E),"Math:LN2":Se(Math.LN2),"Math:LN10":Se(Math.LN10),"Math:LOG2E":Se(Math.LOG2E),"Math:LOG10E":Se(Math.LOG10E),"Math:PI":Se(Math.PI),"Math:SQRT1_2":Se(Math.SQRT1_2),"Math:SQRT2":Se(Math.SQRT2),"Math:abs":ue(([t])=>(Ae(t),Se(Math.abs(t.value)))),"Math:acos":ue(([t])=>(Ae(t),Se(Math.acos(t.value)))),"Math:acosh":ue(([t])=>(Ae(t),Se(Math.acosh(t.value)))),"Math:asin":ue(([t])=>(Ae(t),Se(Math.asin(t.value)))),"Math:asinh":ue(([t])=>(Ae(t),Se(Math.asinh(t.value)))),"Math:atan":ue(([t])=>(Ae(t),Se(Math.atan(t.value)))),"Math:atanh":ue(([t])=>(Ae(t),Se(Math.atanh(t.value)))),"Math:atan2":ue(([t,r])=>(Ae(t),Ae(r),Se(Math.atan2(t.value,r.value)))),"Math:cbrt":ue(([t])=>(Ae(t),Se(Math.cbrt(t.value)))),"Math:ceil":ue(([t])=>(Ae(t),Se(Math.ceil(t.value)))),"Math:clz32":ue(([t])=>(Ae(t),Se(Math.clz32(t.value)))),"Math:cos":ue(([t])=>(Ae(t),Se(Math.cos(t.value)))),"Math:cosh":ue(([t])=>(Ae(t),Se(Math.cosh(t.value)))),"Math:exp":ue(([t])=>(Ae(t),Se(Math.exp(t.value)))),"Math:expm1":ue(([t])=>(Ae(t),Se(Math.expm1(t.value)))),"Math:floor":ue(([t])=>(Ae(t),Se(Math.floor(t.value)))),"Math:fround":ue(([t])=>(Ae(t),Se(Math.fround(t.value)))),"Math:hypot":ue(([t])=>{ec(t);const r=[];for(const e of t.value)Ae(e),r.push(e.value);return Se(Math.hypot(...r))}),"Math:imul":ue(([t,r])=>(Ae(t),Ae(r),Se(Math.imul(t.value,r.value)))),"Math:log":ue(([t])=>(Ae(t),Se(Math.log(t.value)))),"Math:log1p":ue(([t])=>(Ae(t),Se(Math.log1p(t.value)))),"Math:log10":ue(([t])=>(Ae(t),Se(Math.log10(t.value)))),"Math:log2":ue(([t])=>(Ae(t),Se(Math.log2(t.value)))),"Math:max":ue(([t,r])=>(Ae(t),Ae(r),Se(Math.max(t.value,r.value)))),"Math:min":ue(([t,r])=>(Ae(t),Ae(r),Se(Math.min(t.value,r.value)))),"Math:pow":ue(([t,r])=>(Ae(t),Ae(r),Se(Math.pow(t.value,r.value)))),"Math:round":ue(([t])=>(Ae(t),Se(Math.round(t.value)))),"Math:sign":ue(([t])=>(Ae(t),Se(Math.sign(t.value)))),"Math:sin":ue(([t])=>(Ae(t),Se(Math.sin(t.value)))),"Math:sinh":ue(([t])=>(Ae(t),Se(Math.sinh(t.value)))),"Math:sqrt":ue(([t])=>{Ae(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Vt("Invalid operation.");return Se(r)}),"Math:tan":ue(([t])=>(Ae(t),Se(Math.tan(t.value)))),"Math:tanh":ue(([t])=>(Ae(t),Se(Math.tanh(t.value)))),"Math:trunc":ue(([t])=>(Ae(t),Se(Math.trunc(t.value)))),"Math:rnd":ue(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Se(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Se(Math.random())),"Math:gen_rng":ue(([t])=>{if(Gs(t),t.type!=="num"&&t.type!=="str")return At;const r=hf(t.value.toString());return ue(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Se(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Se(r()))}),"Num:to_hex":ue(([t])=>(Ae(t),zt(t.value.toString(16)))),"Num:from_hex":ue(([t])=>(Cr(t),Se(parseInt(t.value,16)))),"Str:lf":zt(`
`),"Str:lt":ue(([t,r])=>(Cr(t),Cr(r),t.value<r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:gt":ue(([t,r])=>(Cr(t),Cr(r),t.value>r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:from_codepoint":ue(([t])=>(Ae(t),zt(String.fromCodePoint(t.value)))),"Obj:keys":ue(([t])=>(Bn(t),Kr(Array.from(t.value.keys()).map(r=>zt(r))))),"Obj:vals":ue(([t])=>(Bn(t),Kr(Array.from(t.value.values())))),"Obj:kvs":ue(([t])=>(Bn(t),Kr(Array.from(t.value.entries()).map(([r,e])=>Kr([zt(r),e]))))),"Obj:get":ue(([t,r])=>(Bn(t),Cr(r),t.value.get(r.value)??At)),"Obj:set":ue(([t,r,e])=>(Bn(t),Cr(r),Gs(e),t.value.set(r.value,e),At)),"Obj:has":ue(([t,r])=>(Bn(t),Cr(r),Ku(t.value.has(r.value)))),"Obj:copy":ue(([t])=>(Bn(t),Yf(new Map(t.value)))),"Obj:merge":ue(([t,r])=>(Bn(t),Bn(r),Yf(new Map([...t.value,...r.value])))),"Error:create":ue(([t,r])=>(Cr(t),lh(t.value,r))),"Async:interval":ue(async([t,r,e],n)=>{Ae(t),fi(r),e&&(hs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),ue(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":ue(async([t,r],e)=>{Ae(t),fi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),ue(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})};var lo={},qm=()=>{const t="\\ud800-\\udfff",r="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",h="\\u1ab0-\\u1aff",d="\\u1dc0-\\u1dff",$=r+e+n+h+d,b="\\ufe0e\\ufe0f",k="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",E=`[${t}]`,F=`[${$}]`,j="\\ud83c[\\udffb-\\udfff]",D=`(?:${F}|${j})`,V=`[^${t}]`,pe="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",ie="\\u200d",ke="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",H=`[${k}]`,L=`${D}?`,B=`[${b}]?`,q=`(?:${ie}(?:${[V,pe,ee].join("|")})${B+L})*`,J=B+L+q,Q=`(?:${[`${V}${F}?`,F,pe,ee,E,H].join("|")})`;return new RegExp(`${ke}|${j}(?=${j})|${Q+J}`,"g")},zm=tn&&tn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(lo,"__esModule",{value:!0});var dc=zm(qm);function hh(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(dc.default())||[]}var Dn=lo.toArray=hh;function op(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(dc.default());return r===null?0:r.length}var pf=lo.length=op;function Eg(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(dc.default());return n?n.slice(r,e).join(""):""}var vf=lo.substring=Eg;function Wm(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=op(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var h;typeof e>"u"?h=n:(typeof e!="number"&&(e=parseInt(e,10)),h=e>=0?e+r:r);var d=t.match(dc.default());return d?d.slice(r,h).join(""):""}lo.substr=Wm;function Vm(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var h=op(t);if(h>r)return Eg(t,0,r);if(h<r){var d=e.repeat(r-h);return n==="left"?d+t:t+d}return t}lo.limit=Vm;function Km(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=hh(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var h=hh(r),d=!1,$;for($=e;$<n.length;$+=1){for(var b=0;b<h.length&&h[b]===n[$+b];)b+=1;if(b===h.length&&h[b-1]===n[$+b-1]){d=!0;break}}return d?$:-1}var gf=lo.indexOf=Km;const iv={num:{to_str:t=>ue(async(r,e)=>zt(t.value.toString()))},str:{to_num:t=>ue(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?At:Se(n)}),len:t=>Se(pf(t.value)),replace:t=>ue(async([r,e],n)=>(Cr(r),Cr(e),zt(t.value.split(r.value).join(e.value)))),index_of:t=>ue(async([r],e)=>(Cr(r),Se(gf(t.value,r.value)))),incl:t=>ue(async([r],e)=>(Cr(r),t.value.includes(r.value)?an:Ws)),trim:t=>ue(async(r,e)=>zt(t.value.trim())),upper:t=>ue(async(r,e)=>zt(t.value.toUpperCase())),lower:t=>ue(async(r,e)=>zt(t.value.toLowerCase())),split:t=>ue(async([r],e)=>(r&&Cr(r),Kr(r?t.value.split(r?r.value:"").map(n=>zt(n)):Dn(t.value).map(n=>zt(n))))),slice:t=>ue(async([r,e],n)=>(Ae(r),Ae(e),zt(vf(t.value,r.value,e.value)))),pick:t=>ue(async([r],e)=>{Ae(r);const h=Dn(t.value)[r.value];return h?zt(h):At}),codepoint_at:t=>ue(([r],e)=>{Ae(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?At:Se(n)})},arr:{len:t=>Se(t.value.length),push:t=>ue(async([r],e)=>(Gs(r),t.value.push(r),t)),unshift:t=>ue(async([r],e)=>(Gs(r),t.value.unshift(r),t)),pop:t=>ue(async(r,e)=>t.value.pop()??At),shift:t=>ue(async(r,e)=>t.value.shift()??At),concat:t=>ue(async([r],e)=>(ec(r),Kr(t.value.concat(r.value)))),slice:t=>ue(async([r,e],n)=>(Ae(r),Ae(e),Kr(t.value.slice(r.value,e.value)))),join:t=>ue(async([r],e)=>(r&&Cr(r),zt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ue(async([r],e)=>{fi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Se(d)]));return Kr(await Promise.all(n))}),filter:t=>ue(async([r],e)=>{fi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Se(h)]);hs($),$.value&&n.push(d)}return Kr(n)}),reduce:t=>ue(async([r,e],n)=>{fi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Se($)])}return d}),find:t=>ue(async([r],e)=>{fi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Se(n)]);if(hs(d),d.value)return h}return At}),incl:t=>ue(async([r],e)=>(Gs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ws:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?an:Ws)),reverse:t=>ue(async(r,e)=>(t.value.reverse(),At)),copy:t=>ue(async(r,e)=>Kr([...t.value])),sort:t=>ue(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Ae(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return fi(r),ec(t),t.value=await n(t.value,r),t})},error:{name:t=>zt(t.value),info:t=>t.info??At}};function Jm(t,r){if(Object.hasOwn(iv,t.type)){const e=iv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Vt(`No such prop (${r}) in ${t.type}.`)}else throw new Vt(`Cannot read prop of ${t.type}. (reading ${r})`)}const Zm={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ts=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Mg=300,Gm=Mg-1;let Wr=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:ue(([h])=>{Gs(h),this.opts.out&&this.opts.out(h)}),readline:ue(async h=>{const d=h[0];if(Cr(d),this.opts.in==null)return At;const $=await this.opts.in(d.value);return zt($)})};this.vars=Object.fromEntries(Object.entries({...r,...Um,...n}).map(([h,d])=>[h,Zm.const(d)])),this.scope=new Xa([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),lh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ro?this.opts.err(r):this.opts.err(new rv(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new sv('No "var" in namespace declaration: '+n.name,n.loc);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:{const d=n;throw new sv("invalid ns member type: "+d.type,d.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??At;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return Hm(await this._run(r.statements,h))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const h=n instanceof Ro?n:new rv(n);throw h.loc=r.loc,h.message=`${h.message} (Line ${r.loc.line}, Column ${r.loc.column})`,h}})}async __eval(r,e){if(this.stop)return At;if(this.stepCount%Mg===Gm&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Vt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);fi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(hs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(hs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return At}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(uh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):At}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return At}case"for":{if(r.times){const n=await this._eval(r.times,e);Ae(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Ae(n),Ae(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Se(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return At}case"each":{const n=await this._eval(r.items,e);ec(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return At}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),At}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),At}case"addAssign":{const n=await this._eval(r.dest,e);Ae(n);const h=await this._eval(r.expr,e);return Ae(h),await this.assign(e,r.dest,Se(n.value+h.value)),At}case"subAssign":{const n=await this._eval(r.dest,e);Ae(n);const h=await this._eval(r.expr,e);return Ae(h),await this.assign(e,r.dest,Se(n.value-h.value)),At}case"null":return At;case"bool":return Ku(r.value);case"num":return Se(r.value);case"str":return zt(r.value);case"arr":return Kr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return Yf(n)}case"prop":{const n=await this._eval(r.target,e);return Fc(n)?n.value.has(r.name)?n.value.get(r.name):At:Jm(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(av(n)){Ae(h);const d=n.value[h.value];if(d===void 0)throw new gm(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Fc(n))return Cr(h),n.value.has(h.value)?n.value.get(h.value):At;throw new Vt(`Cannot read prop (${xo(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return hs(n),Ku(!n.value)}case"fn":return Rm(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Ku(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=xo(d)}return zt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Dm(n)}case"break":return this.log("block:break",{scope:e.name}),Lm();case"continue":return this.log("block:continue",{scope:e.name}),Bm();case"ns":return At;case"meta":return At;case"and":{const n=await this._eval(r.left,e);if(hs(n),n.value){const h=await this._eval(r.right,e);return hs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(hs(n),n.value)return n;{const h=await this._eval(r.right,e);return hs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=At;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(av(h))Ae(d),h.value[d.value]=n;else if(Fc(h))Cr(d),h.value.set(d.value,n);else throw new Vt(`Cannot read prop (${xo(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Bn(h),h.value.set(e.name,n)}else throw new Vt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ts([lr],Wr.prototype,"exec",null);ts([lr],Wr.prototype,"execFn",null);ts([lr],Wr.prototype,"execFnSimple",null);ts([lr],Wr.prototype,"handleError",null);ts([lr],Wr.prototype,"log",null);ts([lr],Wr.prototype,"collectNs",null);ts([lr],Wr.prototype,"collectNsMember",null);ts([lr],Wr.prototype,"_fn",null);ts([lr],Wr.prototype,"_eval",null);ts([lr],Wr.prototype,"__eval",null);ts([lr],Wr.prototype,"_run",null);ts([lr],Wr.prototype,"registerAbortHandler",null);ts([lr],Wr.prototype,"unregisterAbortHandler",null);ts([lr],Wr.prototype,"abort",null);ts([lr],Wr.prototype,"assign",null);ts([lr],Wr,"collectMetadata",null);class Qm{constructor(r,e){me(this,"pages");me(this,"firstPageIndex");me(this,"lastPageIndex");me(this,"pageIndex");me(this,"address");me(this,"_char");me(this,"line");me(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var O;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(O||(O={}));class Xm{constructor(r,e,n=!1,h,d){me(this,"kind");me(this,"loc");me(this,"hasLeftSpacing");me(this,"value");me(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=h,this.children=d}}function Le(t,r,e){return new Xm(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const lv=[" ","	"],Ym=["\r",`
`],uv=/^[0-9]$/,e0=/^[A-Za-z0-9_]$/;class t0{constructor(r){me(this,"stream");me(this,"_tokens",[]);typeof r=="string"?this.stream=new Qm(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}get kind(){return this.token.kind}next(){this._tokens[0].kind!==O.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.kind!==r)throw new gt(`unexpected token: ${O[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=Le(O.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(lv.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(Ym.includes(this.stream.char))return this.stream.next(),r=Le(O.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.NotEq,n,{hasLeftSpacing:e})):r=Le(O.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=Le(O.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=Le(O.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new gt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=Le(O.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=Le(O.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=Le(O.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=Le(O.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=Le(O.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.PlusEq,n,{hasLeftSpacing:e})):r=Le(O.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=Le(O.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.MinusEq,n,{hasLeftSpacing:e})):r=Le(O.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=Le(O.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=Le(O.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Le(O.Colon2,n,{hasLeftSpacing:e})):r=Le(O.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=Le(O.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Le(O.Out,n,{hasLeftSpacing:e})):r=Le(O.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=Le(O.Arrow,n,{hasLeftSpacing:e})):r=Le(O.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Le(O.GtEq,n,{hasLeftSpacing:e})):r=Le(O.Gt,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=Le(O.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=Le(O.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=Le(O.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=Le(O.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=Le(O.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=Le(O.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=Le(O.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=Le(O.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const h=this.tryReadDigits(e);if(h){r=h;break}const d=this.tryReadWord(e);if(d){r=d;break}throw new gt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&e0.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return Le(O.NullKeyword,n,{hasLeftSpacing:r});case"true":return Le(O.TrueKeyword,n,{hasLeftSpacing:r});case"false":return Le(O.FalseKeyword,n,{hasLeftSpacing:r});case"each":return Le(O.EachKeyword,n,{hasLeftSpacing:r});case"for":return Le(O.ForKeyword,n,{hasLeftSpacing:r});case"loop":return Le(O.LoopKeyword,n,{hasLeftSpacing:r});case"break":return Le(O.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return Le(O.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return Le(O.MatchKeyword,n,{hasLeftSpacing:r});case"case":return Le(O.CaseKeyword,n,{hasLeftSpacing:r});case"default":return Le(O.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return Le(O.IfKeyword,n,{hasLeftSpacing:r});case"elif":return Le(O.ElifKeyword,n,{hasLeftSpacing:r});case"else":return Le(O.ElseKeyword,n,{hasLeftSpacing:r});case"return":return Le(O.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return Le(O.EvalKeyword,n,{hasLeftSpacing:r});case"var":return Le(O.VarKeyword,n,{hasLeftSpacing:r});case"let":return Le(O.LetKeyword,n,{hasLeftSpacing:r});case"exists":return Le(O.ExistsKeyword,n,{hasLeftSpacing:r});default:return Le(O.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const h=this.stream.getPos();for(;!this.stream.eof&&uv.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&uv.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new gt("digit expected",h)}let d;return n.length>0?d=e+"."+n:d=e,Le(O.NumberLiteral,h,{hasLeftSpacing:r,value:d})}readStringLiteral(r){let e="";const n=this.stream.char;let h="string";const d=this.stream.getPos();for(this.stream.next();h!=="finish";)switch(h){case"string":{if(this.stream.eof)throw new gt("unexpected EOF",d);if(this.stream.char==="\\"){this.stream.next(),h="escape";break}if(this.stream.char===n){this.stream.next(),h="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new gt("unexpected EOF",d);e+=this.stream.char,this.stream.next(),h="string";break}}return Le(O.StringLiteral,d,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",h=[],d="string";const $=this.stream.getPos();let b=$;for(this.stream.next();d!=="finish";)switch(d){case"string":{if(this.stream.eof)throw new gt("unexpected EOF",$);if(this.stream.char==="\\"){this.stream.next(),d="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(Le(O.TemplateStringElement,b,{hasLeftSpacing:r,value:n})),d="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(Le(O.TemplateStringElement,b,{hasLeftSpacing:r,value:n})),n=""),b=this.stream.getPos(),d="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new gt("unexpected EOF",$);n+=this.stream.char,this.stream.next(),d="string";break}case"expr":{if(this.stream.eof)throw new gt("unexpected EOF",$);if(lv.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(Le(O.TemplateExprElement,b,{hasLeftSpacing:r,children:h})),h=[],b=this.stream.getPos(),d="string";break}const k=this.readToken();h.push(k);break}}return Le(O.Template,$,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function Xe(t,r,e){const n={type:t};for(const h of Object.keys(r))r[h]!==void 0&&(n[h]=r[h]);return n.loc=e,n}function zs(t,r,e){return Xe("call",{target:Xe("identifier",{name:t},e),args:r},e)}function Sg(t){const r=[];for(t.nextWith(O.OpenParen),t.kind===O.NewLine&&t.next();t.kind!==O.CloseParen;){t.expect(O.Identifier);const e=t.token.value;t.next();let n;switch(t.kind===O.Colon&&(t.next(),n=to(t)),r.push({name:e,argType:n}),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.CloseParen:break;default:throw new gt("separator expected",t.token.loc)}}return t.nextWith(O.CloseParen),r}function df(t){for(t.nextWith(O.OpenBrace);t.kind===O.NewLine;)t.next();const r=[];for(;t.kind!==O.CloseBrace;)switch(r.push(yc(t)),t.kind){case O.NewLine:case O.SemiColon:{for(;[O.NewLine,O.SemiColon].includes(t.kind);)t.next();break}case O.CloseBrace:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(O.CloseBrace),r}function to(t){return t.kind===O.At?r0(t):s0(t)}function r0(t){const r=t.token.loc;t.nextWith(O.At),t.nextWith(O.OpenParen);const e=[];for(;t.kind!==O.CloseParen;){if(e.length>0)switch(t.kind){case O.Comma:{t.next();break}default:throw new gt("separator expected",t.token.loc)}const h=to(t);e.push(h)}t.nextWith(O.CloseParen),t.nextWith(O.Arrow);const n=to(t);return Xe("fnTypeSource",{args:e,result:n},r)}function s0(t){const r=t.token.loc;t.expect(O.Identifier);const e=t.token.value;t.next();let n=null;return t.kind===O.Lt&&(t.next(),n=to(t),t.nextWith(O.Gt)),Xe("namedTypeSource",{name:e,inner:n},r)}class n0{constructor(r){me(this,"source");me(this,"index");me(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?Le(O.EOF,{line:-1,column:-1}):this._token}get kind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:Le(O.EOF,{line:-1,column:-1})}expect(r){if(this.kind!==r)throw new gt(`unexpected token: ${O[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=Le(O.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function pr(t,r){return r?Fg(t,!0):fp(t,0)}const Nc=[{opKind:"postfix",kind:O.OpenParen,bp:20},{opKind:"postfix",kind:O.OpenBracket,bp:20},{opKind:"infix",kind:O.Dot,lbp:18,rbp:19},{opKind:"infix",kind:O.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:O.Plus,bp:14},{opKind:"prefix",kind:O.Minus,bp:14},{opKind:"prefix",kind:O.Not,bp:14},{opKind:"infix",kind:O.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:O.Slash,lbp:12,rbp:13},{opKind:"infix",kind:O.Percent,lbp:12,rbp:13},{opKind:"infix",kind:O.Plus,lbp:10,rbp:11},{opKind:"infix",kind:O.Minus,lbp:10,rbp:11},{opKind:"infix",kind:O.Lt,lbp:8,rbp:9},{opKind:"infix",kind:O.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:O.Gt,lbp:8,rbp:9},{opKind:"infix",kind:O.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:O.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:O.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:O.And2,lbp:4,rbp:5},{opKind:"infix",kind:O.Or2,lbp:2,rbp:3}];function a0(t,r){const e=t.token.loc,n=t.kind;t.next(),t.kind===O.BackSlash&&(t.next(),t.nextWith(O.NewLine));const h=fp(t,r);switch(n){case O.Plus:{if(h.type==="num")return Xe("num",{value:h.value},e);throw new gt("currently, sign is only supported for number literal.",e)}case O.Minus:{if(h.type==="num")return Xe("num",{value:-1*h.value},e);throw new gt("currently, sign is only supported for number literal.",e)}case O.Not:return Xe("not",{expr:h},e);default:throw new gt(`unexpected token: ${O[n]}`,e)}}function i0(t,r,e){const n=t.token.loc,h=t.kind;if(t.next(),t.kind===O.BackSlash&&(t.next(),t.nextWith(O.NewLine)),h===O.Dot){t.expect(O.Identifier);const d=t.token.value;return t.next(),Xe("prop",{target:r,name:d},n)}else{const d=fp(t,e);switch(h){case O.Hat:return zs("Core:pow",[r,d],n);case O.Asterisk:return zs("Core:mul",[r,d],n);case O.Slash:return zs("Core:div",[r,d],n);case O.Percent:return zs("Core:mod",[r,d],n);case O.Plus:return zs("Core:add",[r,d],n);case O.Minus:return zs("Core:sub",[r,d],n);case O.Lt:return zs("Core:lt",[r,d],n);case O.LtEq:return zs("Core:lteq",[r,d],n);case O.Gt:return zs("Core:gt",[r,d],n);case O.GtEq:return zs("Core:gteq",[r,d],n);case O.Eq2:return zs("Core:eq",[r,d],n);case O.NotEq:return zs("Core:neq",[r,d],n);case O.And2:return Xe("and",{left:r,right:d},n);case O.Or2:return Xe("or",{left:r,right:d},n);default:throw new gt(`unexpected token: ${O[h]}`,n)}}}function l0(t,r){const e=t.token.loc,n=t.kind;switch(n){case O.OpenParen:return u0(t,r);case O.OpenBracket:{t.next();const h=pr(t,!1);return t.nextWith(O.CloseBracket),Xe("index",{target:r,index:h},e)}default:throw new gt(`unexpected token: ${O[n]}`,e)}}function Fg(t,r){const e=t.token.loc;switch(t.kind){case O.IfKeyword:{if(r)break;return o0(t)}case O.At:{if(r)break;return f0(t)}case O.MatchKeyword:{if(r)break;return c0(t)}case O.EvalKeyword:{if(r)break;return h0(t)}case O.ExistsKeyword:{if(r)break;return p0(t)}case O.Template:{const n=[];if(r)break;for(const h of t.token.children)switch(h.kind){case O.TemplateStringElement:{n.push(Xe("str",{value:h.value},h.loc));break}case O.TemplateExprElement:{const d=new n0(h.children),$=pr(d,!1);if(d.kind!==O.EOF)throw new gt(`unexpected token: ${O[d.token.kind]}`,d.token.loc);n.push($);break}default:throw new gt(`unexpected token: ${O[h.kind]}`,h.loc)}return t.next(),Xe("tmpl",{tmpl:n},e)}case O.StringLiteral:{const n=t.token.value;return t.next(),Xe("str",{value:n},e)}case O.NumberLiteral:{const n=Number(t.token.value);return t.next(),Xe("num",{value:n},e)}case O.TrueKeyword:case O.FalseKeyword:{const n=t.kind===O.TrueKeyword;return t.next(),Xe("bool",{value:n},e)}case O.NullKeyword:return t.next(),Xe("null",{},e);case O.OpenBrace:return v0(t,r);case O.OpenBracket:return g0(t,r);case O.Identifier:{if(r)break;return Ng(t)}case O.OpenParen:{t.next();const n=pr(t,r);return t.nextWith(O.CloseParen),n}}throw new gt(`unexpected token: ${O[t.kind]}`,e)}function u0(t,r){const e=t.token.loc,n=[];for(t.nextWith(O.OpenParen),t.kind===O.NewLine&&t.next();t.kind!==O.CloseParen;)switch(n.push(pr(t,!1)),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.CloseParen:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(O.CloseParen),Xe("call",{target:r,args:n},e)}function o0(t){const r=t.token.loc;t.nextWith(O.IfKeyword);const e=pr(t,!1),n=yi(t);t.kind===O.NewLine&&[O.ElifKeyword,O.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const h=[];for(;t.kind===O.ElifKeyword;){t.next();const $=pr(t,!1),b=yi(t);t.kind===O.NewLine&&[O.ElifKeyword,O.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),h.push({cond:$,then:b})}let d;return t.kind===O.ElseKeyword&&(t.next(),d=yi(t)),Xe("if",{cond:e,then:n,elseif:h,else:d},r)}function f0(t){const r=t.token.loc;t.nextWith(O.At);const e=Sg(t);let n;t.kind===O.Colon&&(t.next(),n=to(t));const h=df(t);return Xe("fn",{args:e,retType:n,children:h},r)}function c0(t){const r=t.token.loc;t.nextWith(O.MatchKeyword);const e=pr(t,!1);t.nextWith(O.OpenBrace),t.kind===O.NewLine&&t.next();const n=[];for(;t.kind!==O.DefaultKeyword&&t.kind!==O.CloseBrace;){t.nextWith(O.CaseKeyword);const d=pr(t,!1);t.nextWith(O.Arrow);const $=yi(t);switch(n.push({q:d,a:$}),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.DefaultKeyword:case O.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}}let h;if(t.kind===O.DefaultKeyword)switch(t.next(),t.nextWith(O.Arrow),h=yi(t),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(O.CloseBrace),Xe("match",{about:e,qs:n,default:h},r)}function h0(t){const r=t.token.loc;t.nextWith(O.EvalKeyword);const e=df(t);return Xe("block",{statements:e},r)}function p0(t){const r=t.token.loc;t.nextWith(O.ExistsKeyword);const e=Ng(t);return Xe("exists",{identifier:e},r)}function Ng(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.kind===O.Colon){if(t.token.hasLeftSpacing)throw new gt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new gt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(O.Identifier),e.push(t.token.value),t.next()}return Xe("identifier",{name:e.join(":")},r)}function v0(t,r){const e=t.token.loc;t.nextWith(O.OpenBrace),t.kind===O.NewLine&&t.next();const n=new Map;for(;t.kind!==O.CloseBrace;){t.expect(O.Identifier);const h=t.token.value;t.next(),t.nextWith(O.Colon);const d=pr(t,r);switch(n.set(h,d),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.CloseBrace:break;default:throw new gt("separator expected",t.token.loc)}}return t.nextWith(O.CloseBrace),Xe("obj",{value:n},e)}function g0(t,r){const e=t.token.loc;t.nextWith(O.OpenBracket),t.kind===O.NewLine&&t.next();const n=[];for(;t.kind!==O.CloseBracket;)switch(n.push(pr(t,r)),t.kind){case O.NewLine:{t.next();break}case O.Comma:{t.next(),t.kind===O.NewLine&&t.next();break}case O.CloseBracket:break;default:throw new gt("separator expected",t.token.loc)}return t.nextWith(O.CloseBracket),Xe("arr",{value:n},e)}function fp(t,r){let e;const n=t.kind,h=Nc.find(d=>d.opKind==="prefix"&&d.kind===n);for(h!=null?e=a0(t,h.bp):e=Fg(t,!1);;){t.kind===O.BackSlash&&(t.next(),t.nextWith(O.NewLine));const d=t.kind,$=Nc.find(k=>k.opKind==="postfix"&&k.kind===d);if($!=null){if($.bp<r)break;if(!([O.OpenBracket,O.OpenParen].includes(d)&&t.token.hasLeftSpacing)){e=l0(t,e);continue}}const b=Nc.find(k=>k.opKind==="infix"&&k.kind===d);if(b!=null){if(b.lbp<r)break;e=i0(t,e,b.rbp);continue}break}return e}function yc(t){const r=t.token.loc;switch(t.kind){case O.VarKeyword:case O.LetKeyword:return Og(t);case O.At:{if(t.lookahead(1).kind===O.Identifier)return Tg(t);break}case O.Out:return y0(t);case O.ReturnKeyword:return $0(t);case O.OpenSharpBracket:return x0(t);case O.EachKeyword:return w0(t);case O.ForKeyword:return m0(t);case O.LoopKeyword:return A0(t);case O.BreakKeyword:return t.next(),Xe("break",{},r);case O.ContinueKeyword:return t.next(),Xe("continue",{},r)}const e=pr(t,!1),n=C0(t,e);return n||e}function d0(t){switch(t.kind){case O.VarKeyword:case O.LetKeyword:return Og(t);case O.At:return Tg(t);default:throw new gt(`unexpected token: ${O[t.kind]}`,t.token.loc)}}function yi(t){const r=t.token.loc;if(t.kind===O.OpenBrace){const e=df(t);return Xe("block",{statements:e},r)}else return yc(t)}function Og(t){const r=t.token.loc;let e;switch(t.kind){case O.LetKeyword:{e=!1;break}case O.VarKeyword:{e=!0;break}default:throw new gt(`unexpected token: ${O[t.kind]}`,t.token.loc)}t.next(),t.expect(O.Identifier);const n=t.token.value;t.next();let h;t.kind===O.Colon&&(t.next(),h=to(t)),t.nextWith(O.Eq),t.kind===O.NewLine&&t.next();const d=pr(t,!1);return Xe("def",{name:n,varType:h,expr:d,mut:e,attr:[]},r)}function Tg(t){const r=t.token.loc;t.nextWith(O.At),t.expect(O.Identifier);const e=t.token.value;t.next();const n=Sg(t);let h;t.kind===O.Colon&&(t.next(),h=to(t));const d=df(t);return Xe("def",{name:e,expr:Xe("fn",{args:n,retType:h,children:d},r),mut:!1,attr:[]},r)}function y0(t){const r=t.token.loc;t.nextWith(O.Out);const e=pr(t,!1);return zs("print",[e],r)}function w0(t){const r=t.token.loc;let e=!1;t.nextWith(O.EachKeyword),t.kind===O.OpenParen&&(e=!0,t.next()),t.nextWith(O.LetKeyword),t.expect(O.Identifier);const n=t.token.value;if(t.next(),t.kind===O.Comma)t.next();else throw new gt("separator expected",t.token.loc);const h=pr(t,!1);e&&t.nextWith(O.CloseParen);const d=yi(t);return Xe("each",{var:n,items:h,for:d},r)}function m0(t){const r=t.token.loc;let e=!1;if(t.nextWith(O.ForKeyword),t.kind===O.OpenParen&&(e=!0,t.next()),t.kind===O.LetKeyword){t.next();const n=t.token.loc;t.expect(O.Identifier);const h=t.token.value;t.next();let d;if(t.kind===O.Eq?(t.next(),d=pr(t,!1)):d=Xe("num",{value:0},n),t.kind===O.Comma)t.next();else throw new gt("separator expected",t.token.loc);const $=pr(t,!1);e&&t.nextWith(O.CloseParen);const b=yi(t);return Xe("for",{var:h,from:d,to:$,for:b},r)}else{const n=pr(t,!1);e&&t.nextWith(O.CloseParen);const h=yi(t);return Xe("for",{times:n,for:h},r)}}function $0(t){const r=t.token.loc;t.nextWith(O.ReturnKeyword);const e=pr(t,!1);return Xe("return",{expr:e},r)}function x0(t){const r=[];for(;t.kind===O.OpenSharpBracket;)r.push(b0(t)),t.nextWith(O.NewLine);const e=yc(t);if(e.type!=="def")throw new gt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function b0(t){const r=t.token.loc;t.nextWith(O.OpenSharpBracket),t.expect(O.Identifier);const e=t.token.value;t.next();let n;return t.kind!==O.CloseBracket?n=pr(t,!0):n=Xe("bool",{value:!0},r),t.nextWith(O.CloseBracket),Xe("attr",{name:e,value:n},r)}function A0(t){const r=t.token.loc;t.nextWith(O.LoopKeyword);const e=df(t);return Xe("loop",{statements:e},r)}function C0(t,r){const e=t.token.loc;switch(t.kind){case O.Eq:{t.next();const n=pr(t,!1);return Xe("assign",{dest:r,expr:n},e)}case O.PlusEq:{t.next();const n=pr(t,!1);return Xe("addAssign",{dest:r,expr:n},e)}case O.MinusEq:{t.next();const n=pr(t,!1);return Xe("subAssign",{dest:r,expr:n},e)}default:return}}function _0(t){const r=[];for(;t.kind===O.NewLine;)t.next();for(;t.kind!==O.EOF;){switch(t.kind){case O.Colon2:{r.push(Ig(t));break}case O.Sharp3:{r.push(k0(t));break}default:{r.push(yc(t));break}}switch(t.kind){case O.NewLine:case O.SemiColon:{for(;[O.NewLine,O.SemiColon].includes(t.kind);)t.next();break}case O.EOF:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function Ig(t){const r=t.token.loc;t.nextWith(O.Colon2),t.expect(O.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(O.OpenBrace);t.kind===O.NewLine;)t.next();for(;t.kind!==O.CloseBrace;){switch(t.kind){case O.VarKeyword:case O.LetKeyword:case O.At:{n.push(d0(t));break}case O.Colon2:{n.push(Ig(t));break}}switch(t.kind){case O.NewLine:case O.SemiColon:{for(;[O.NewLine,O.SemiColon].includes(t.kind);)t.next();break}case O.CloseBrace:break;default:throw new gt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(O.CloseBrace),Xe("ns",{name:e,members:n},r)}function k0(t){const r=t.token.loc;t.nextWith(O.Sharp3);let e=null;t.kind===O.Identifier&&(e=t.token.value,t.next());const n=pr(t,!0);return Xe("meta",{name:e,value:n},r)}function vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=vt(e.expr,r);break}case"return":{e.expr=vt(e.expr,r);break}case"each":{e.items=vt(e.items,r),e.for=vt(e.for,r);break}case"for":{e.from!=null&&(e.from=vt(e.from,r)),e.to!=null&&(e.to=vt(e.to,r)),e.times!=null&&(e.times=vt(e.times,r)),e.for=vt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=vt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=vt(e.expr,r),e.dest=vt(e.dest,r);break}case"not":{e.expr=vt(e.expr,r);break}case"if":{e.cond=vt(e.cond,r),e.then=vt(e.then,r);for(const n of e.elseif)n.cond=vt(n.cond,r),n.then=vt(n.then,r);e.else!=null&&(e.else=vt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=vt(e.children[n],r);break}case"match":{e.about=vt(e.about,r);for(const n of e.qs)n.q=vt(n.q,r),n.a=vt(n.a,r);e.default!=null&&(e.default=vt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=vt(e.statements[n],r);break}case"exists":{e.identifier=vt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=vt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],vt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=vt(e.value[n],r);break}case"call":{e.target=vt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=vt(e.args[n],r);break}case"index":{e.target=vt(e.target,r),e.index=vt(e.index,r);break}case"prop":{e.target=vt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=vt(e.members[n],r);break}case"or":case"and":{e.left=vt(e.left,r),e.right=vt(e.right,r);break}}return e}const co=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function ho(t,r){throw new gt(`Reserved word "${t}" cannot be used as variable name.`,r)}function P0(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{co.includes(t.name)&&ho(t.name,t.loc);break}case"meta":{t.name!=null&&co.includes(t.name)&&ho(t.name,t.loc);break}case"each":{co.includes(t.var)&&ho(t.var,t.loc);break}case"for":{t.var!=null&&co.includes(t.var)&&ho(t.var,t.loc);break}case"fn":{for(const r of t.args)co.includes(r.name)&&ho(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())co.includes(r)&&ho(r,t.loc);break}}return t}function E0(t){for(const r of t)vt(r,P0);return t}function ov(t){return{type:"simple",name:t}}function M0(t,r){return{type:"generic",name:t,inners:r}}function S0(t,r){return{type:"fn",args:t,result:r}}function Nf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Nf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Nf(n)).join(", "),e=Nf(t.result);return`@(${r}) { ${e} }`}}}function bo(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return ov(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=bo(t.inner):r=ov("any"),M0(t.name,[r])}}throw new gt(`Unknown type: '${Nf(t)}'`,t.loc)}else{const r=t.args.map(e=>bo(e));return S0(r,bo(t.result))}}function F0(t){switch(t.type){case"def":{t.varType!=null&&bo(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&bo(r.argType);t.retType!=null&&bo(t.retType);break}}return t}function N0(t){for(const r of t)vt(r,F0);return t}var Va;let O0=(Va=class{constructor(){me(this,"plugins");this.plugins={validate:[E0,N0],transform:[]}}static parse(r){return Va.instance==null&&(Va.instance=new Va),Va.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new t0(r);e=_0(n);for(const h of this.plugins.validate)e=h(e);for(const h of this.plugins.transform)e=h(e);return e}},me(Va,"instance"),Va);const T0="next",I0={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let ph=[],Uo=null;function j0(t){return ph=O0.parse(t),JSON.stringify(ph,null,"	")}async function R0(t){Uo==null||Uo.abort(),Uo=new Wr({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:oh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:oh(e.val,!0),print:!1});break}}});try{await Uo.exec(ph)}catch(r){t.err(r)}}const D0=Object.freeze(Object.defineProperty({__proto__:null,exec:R0,parse:j0,samples:I0,version:T0},Symbol.toStringTag,{value:"Module"}));function vr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let wc=class jg extends Error{constructor(e,n){super(e);me(this,"name","AiScript");me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,jg)}},L0=class extends wc{constructor(e){super(e.message??`${e}`,e);me(this,"name","Internal")}},ro=class extends wc{constructor(e,n){super(e,n);me(this,"name","Syntax")}},Kt=class extends wc{constructor(e,n){super(e,n);me(this,"name","Runtime")}},B0=class extends Kt{constructor(r,e){super(r,e)}};var xi=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Ya=class Rg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Rg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Kt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Kt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Kt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Kt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};xi([vr],Ya.prototype,"log",null);xi([vr],Ya.prototype,"onUpdated",null);xi([vr],Ya.prototype,"createChildScope",null);xi([vr],Ya.prototype,"get",null);xi([vr],Ya.prototype,"exists",null);xi([vr],Ya.prototype,"getAll",null);xi([vr],Ya.prototype,"add",null);xi([vr],Ya.prototype,"assign",null);const $t={type:"null"},ln={type:"bool",value:!0},Vs={type:"bool",value:!1},_e=t=>({type:"num",value:t}),_t=t=>({type:"str",value:t}),Ju=t=>({type:"bool",value:t}),tc=t=>({type:"obj",value:t}),yr=t=>({type:"arr",value:t}),H0=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ae=t=>({type:"fn",native:t}),U0=t=>({type:"return",value:t}),q0=()=>({type:"break",value:null}),z0=()=>({type:"continue",value:null}),W0=t=>t.type==="return"?t.value:t,vh=(t,r)=>({type:"error",value:t,info:r});function Qs(t){if(t==null)throw new Kt("Expect anything, but got nothing.")}function ps(t){if(t==null)throw new Kt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Kt(`Expect boolean, but got ${t.type}.`)}function ci(t){if(t==null)throw new Kt("Expect function, but got nothing.");if(t.type!=="fn")throw new Kt(`Expect function, but got ${t.type}.`)}function _r(t){if(t==null)throw new Kt("Expect string, but got nothing.");if(t.type!=="str")throw new Kt(`Expect string, but got ${t.type}.`)}function xe(t){if(t==null)throw new Kt("Expect number, but got nothing.");if(t.type!=="num")throw new Kt(`Expect number, but got ${t.type}.`)}function Hn(t){if(t==null)throw new Kt("Expect object, but got nothing.");if(t.type!=="obj")throw new Kt(`Expect object, but got ${t.type}.`)}function Ao(t){if(t==null)throw new Kt("Expect array, but got nothing.");if(t.type!=="arr")throw new Kt(`Expect array, but got ${t.type}.`)}function Oc(t){return t.type==="obj"}function fv(t){return t.type==="arr"}function gh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function dh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>dh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function yh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>yh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=yh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function wh(t){if(t===null)return $t;if(typeof t=="boolean")return Ju(t);if(typeof t=="string")return _t(t);if(typeof t=="number")return _e(t);if(Array.isArray(t))return yr(t.map(r=>wh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,wh(n));return tc(r)}return $t}function Co(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(Co(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${Co(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const V0=new TextEncoder,K0=new TextDecoder,J0={help:_t("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":_t("0.16.0"),"Core:ai":_t("kawaii"),"Core:not":ae(([t])=>(ps(t),t.value?Vs:ln)),"Core:eq":ae(([t,r])=>(Qs(t),Qs(r),gh(t,r)?ln:Vs)),"Core:neq":ae(([t,r])=>(Qs(t),Qs(r),gh(t,r)?Vs:ln)),"Core:and":ae(([t,r])=>(ps(t),t.value?(ps(r),r.value?ln:Vs):Vs)),"Core:or":ae(([t,r])=>(ps(t),t.value?ln:(ps(r),r.value?ln:Vs))),"Core:add":ae(([t,r])=>(xe(t),xe(r),_e(t.value+r.value))),"Core:sub":ae(([t,r])=>(xe(t),xe(r),_e(t.value-r.value))),"Core:mul":ae(([t,r])=>(xe(t),xe(r),_e(t.value*r.value))),"Core:pow":ae(([t,r])=>{xe(t),xe(r);const e=t.value**r.value;if(isNaN(e))throw new Kt("Invalid operation.");return _e(e)}),"Core:div":ae(([t,r])=>{xe(t),xe(r);const e=t.value/r.value;if(isNaN(e))throw new Kt("Invalid operation.");return _e(e)}),"Core:mod":ae(([t,r])=>(xe(t),xe(r),_e(t.value%r.value))),"Core:gt":ae(([t,r])=>(xe(t),xe(r),t.value>r.value?ln:Vs)),"Core:lt":ae(([t,r])=>(xe(t),xe(r),t.value<r.value?ln:Vs)),"Core:gteq":ae(([t,r])=>(xe(t),xe(r),t.value>=r.value?ln:Vs)),"Core:lteq":ae(([t,r])=>(xe(t),xe(r),t.value<=r.value?ln:Vs)),"Core:type":ae(([t])=>(Qs(t),_t(t.type))),"Core:to_str":ae(([t])=>(Qs(t),_t(Co(t)))),"Core:range":ae(([t,r])=>(xe(t),xe(r),t.value<r.value?yr(Array.from({length:r.value-t.value+1},(e,n)=>_e(n+t.value))):t.value>r.value?yr(Array.from({length:t.value-r.value+1},(e,n)=>_e(t.value-n))):yr([t]))),"Core:sleep":ae(async([t])=>(xe(t),await new Promise(r=>setTimeout(r,t.value)),$t)),"Util:uuid":ae(()=>_t(rp())),"Json:stringify":ae(([t])=>(Qs(t),_t(JSON.stringify(yh(t))))),"Json:parse":ae(([t])=>{_r(t);try{return wh(JSON.parse(t.value))}catch{return vh("not_json")}}),"Json:parsable":ae(([t])=>{_r(t);try{JSON.parse(t.value)}catch{return Ju(!1)}return Ju(!0)}),"Date:now":ae(()=>_e(Date.now())),"Date:year":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ae(([t])=>(t&&xe(t),_e(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ae(([t])=>(_r(t),_e(new Date(t.value).getTime()))),"Math:Infinity":_e(1/0),"Math:E":_e(Math.E),"Math:LN2":_e(Math.LN2),"Math:LN10":_e(Math.LN10),"Math:LOG2E":_e(Math.LOG2E),"Math:LOG10E":_e(Math.LOG10E),"Math:PI":_e(Math.PI),"Math:SQRT1_2":_e(Math.SQRT1_2),"Math:SQRT2":_e(Math.SQRT2),"Math:abs":ae(([t])=>(xe(t),_e(Math.abs(t.value)))),"Math:acos":ae(([t])=>(xe(t),_e(Math.acos(t.value)))),"Math:acosh":ae(([t])=>(xe(t),_e(Math.acosh(t.value)))),"Math:asin":ae(([t])=>(xe(t),_e(Math.asin(t.value)))),"Math:asinh":ae(([t])=>(xe(t),_e(Math.asinh(t.value)))),"Math:atan":ae(([t])=>(xe(t),_e(Math.atan(t.value)))),"Math:atanh":ae(([t])=>(xe(t),_e(Math.atanh(t.value)))),"Math:atan2":ae(([t,r])=>(xe(t),xe(r),_e(Math.atan2(t.value,r.value)))),"Math:cbrt":ae(([t])=>(xe(t),_e(Math.cbrt(t.value)))),"Math:ceil":ae(([t])=>(xe(t),_e(Math.ceil(t.value)))),"Math:clz32":ae(([t])=>(xe(t),_e(Math.clz32(t.value)))),"Math:cos":ae(([t])=>(xe(t),_e(Math.cos(t.value)))),"Math:cosh":ae(([t])=>(xe(t),_e(Math.cosh(t.value)))),"Math:exp":ae(([t])=>(xe(t),_e(Math.exp(t.value)))),"Math:expm1":ae(([t])=>(xe(t),_e(Math.expm1(t.value)))),"Math:floor":ae(([t])=>(xe(t),_e(Math.floor(t.value)))),"Math:fround":ae(([t])=>(xe(t),_e(Math.fround(t.value)))),"Math:hypot":ae(([t])=>{Ao(t);const r=[];for(const e of t.value)xe(e),r.push(e.value);return _e(Math.hypot(...r))}),"Math:imul":ae(([t,r])=>(xe(t),xe(r),_e(Math.imul(t.value,r.value)))),"Math:log":ae(([t])=>(xe(t),_e(Math.log(t.value)))),"Math:log1p":ae(([t])=>(xe(t),_e(Math.log1p(t.value)))),"Math:log10":ae(([t])=>(xe(t),_e(Math.log10(t.value)))),"Math:log2":ae(([t])=>(xe(t),_e(Math.log2(t.value)))),"Math:max":ae(([t,r])=>(xe(t),xe(r),_e(Math.max(t.value,r.value)))),"Math:min":ae(([t,r])=>(xe(t),xe(r),_e(Math.min(t.value,r.value)))),"Math:pow":ae(([t,r])=>(xe(t),xe(r),_e(Math.pow(t.value,r.value)))),"Math:round":ae(([t])=>(xe(t),_e(Math.round(t.value)))),"Math:sign":ae(([t])=>(xe(t),_e(Math.sign(t.value)))),"Math:sin":ae(([t])=>(xe(t),_e(Math.sin(t.value)))),"Math:sinh":ae(([t])=>(xe(t),_e(Math.sinh(t.value)))),"Math:sqrt":ae(([t])=>{xe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Kt("Invalid operation.");return _e(r)}),"Math:tan":ae(([t])=>(xe(t),_e(Math.tan(t.value)))),"Math:tanh":ae(([t])=>(xe(t),_e(Math.tanh(t.value)))),"Math:trunc":ae(([t])=>(xe(t),_e(Math.trunc(t.value)))),"Math:rnd":ae(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?_e(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):_e(Math.random())),"Math:gen_rng":ae(([t])=>{if(Qs(t),t.type!=="num"&&t.type!=="str")return $t;const r=hf(t.value.toString());return ae(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?_e(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):_e(r()))}),"Num:to_hex":ae(([t])=>(xe(t),_t(t.value.toString(16)))),"Num:from_hex":ae(([t])=>(_r(t),_e(parseInt(t.value,16)))),"Str:lf":_t(`
`),"Str:lt":ae(([t,r])=>(_r(t),_r(r),t.value<r.value?_e(-1):t.value===r.value?_e(0):_e(1))),"Str:gt":ae(([t,r])=>(_r(t),_r(r),t.value>r.value?_e(-1):t.value===r.value?_e(0):_e(1))),"Str:from_codepoint":ae(([t])=>(xe(t),_t(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ae(([t])=>(Ao(t),_t(Array.from(t.value.map(r=>(xe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ae(([t])=>(Ao(t),_t(K0.decode(Uint8Array.from(t.value.map(r=>(xe(r),r.value))))))),"Obj:keys":ae(([t])=>(Hn(t),yr(Array.from(t.value.keys()).map(r=>_t(r))))),"Obj:vals":ae(([t])=>(Hn(t),yr(Array.from(t.value.values())))),"Obj:kvs":ae(([t])=>(Hn(t),yr(Array.from(t.value.entries()).map(([r,e])=>yr([_t(r),e]))))),"Obj:get":ae(([t,r])=>(Hn(t),_r(r),t.value.get(r.value)??$t)),"Obj:set":ae(([t,r,e])=>(Hn(t),_r(r),Qs(e),t.value.set(r.value,e),$t)),"Obj:has":ae(([t,r])=>(Hn(t),_r(r),Ju(t.value.has(r.value)))),"Obj:copy":ae(([t])=>(Hn(t),tc(new Map(t.value)))),"Obj:merge":ae(([t,r])=>(Hn(t),Hn(r),tc(new Map([...t.value,...r.value])))),"Error:create":ae(([t,r])=>(_r(t),vh(t.value,r))),"Async:interval":ae(async([t,r,e],n)=>{xe(t),ci(r),e&&(ps(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),ae(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":ae(async([t,r],e)=>{xe(t),ci(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),ae(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},cv={num:{to_str:t=>ae(async(r,e)=>_t(t.value.toString()))},str:{to_num:t=>ae(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?$t:_e(n)}),to_arr:t=>ae(async(r,e)=>yr(Dn(t.value).map(n=>_t(n)))),to_unicode_arr:t=>ae(async(r,e)=>yr([...t.value].map(n=>_t(n)))),to_unicode_codepoint_arr:t=>ae(async(r,e)=>yr([...t.value].map(n=>{const h=n.codePointAt(0);return _e(h??n.charCodeAt(0))}))),to_char_arr:t=>ae(async(r,e)=>yr(t.value.split("").map(n=>_t(n)))),to_charcode_arr:t=>ae(async(r,e)=>yr(t.value.split("").map(n=>_e(n.charCodeAt(0))))),to_utf8_byte_arr:t=>ae(async(r,e)=>yr(Array.from(V0.encode(t.value)).map(n=>_e(n)))),len:t=>_e(pf(t.value)),replace:t=>ae(async([r,e],n)=>(_r(r),_r(e),_t(t.value.split(r.value).join(e.value)))),index_of:t=>ae(async([r],e)=>(_r(r),_e(gf(t.value,r.value)))),incl:t=>ae(async([r],e)=>(_r(r),t.value.includes(r.value)?ln:Vs)),trim:t=>ae(async(r,e)=>_t(t.value.trim())),upper:t=>ae(async(r,e)=>_t(t.value.toUpperCase())),lower:t=>ae(async(r,e)=>_t(t.value.toLowerCase())),split:t=>ae(async([r],e)=>(r&&_r(r),yr(r?t.value.split(r?r.value:"").map(n=>_t(n)):Dn(t.value).map(n=>_t(n))))),slice:t=>ae(async([r,e],n)=>(xe(r),xe(e),_t(vf(t.value,r.value,e.value)))),pick:t=>ae(async([r],e)=>{xe(r);const h=Dn(t.value)[r.value];return h?_t(h):$t}),charcode_at:t=>ae(([r],e)=>{xe(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?$t:_e(n)}),codepoint_at:t=>ae(([r],e)=>{xe(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?$t:_e(n)})},arr:{len:t=>_e(t.value.length),push:t=>ae(async([r],e)=>(Qs(r),t.value.push(r),t)),unshift:t=>ae(async([r],e)=>(Qs(r),t.value.unshift(r),t)),pop:t=>ae(async(r,e)=>t.value.pop()??$t),shift:t=>ae(async(r,e)=>t.value.shift()??$t),concat:t=>ae(async([r],e)=>(Ao(r),yr(t.value.concat(r.value)))),slice:t=>ae(async([r,e],n)=>(xe(r),xe(e),yr(t.value.slice(r.value,e.value)))),join:t=>ae(async([r],e)=>(r&&_r(r),_t(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ae(async([r],e)=>{ci(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,_e(d)]));return yr(await Promise.all(n))}),filter:t=>ae(async([r],e)=>{ci(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,_e(h)]);ps($),$.value&&n.push(d)}return yr(n)}),reduce:t=>ae(async([r,e],n)=>{ci(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,_e($)])}return d}),find:t=>ae(async([r],e)=>{ci(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,_e(n)]);if(ps(d),d.value)return h}return $t}),incl:t=>ae(async([r],e)=>(Qs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Vs:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?ln:Vs)),reverse:t=>ae(async(r,e)=>(t.value.reverse(),$t)),copy:t=>ae(async(r,e)=>yr([...t.value])),sort:t=>ae(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);xe(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return ci(r),Ao(t),t.value=await n(t.value,r),t})},error:{name:t=>_t(t.value),info:t=>t.info??$t}};function Z0(t,r){if(Object.hasOwn(cv,t.type)){const e=cv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Kt(`No such prop (${r}) in ${t.type}.`)}else throw new Kt(`Cannot read prop of ${t.type}. (reading ${r})`)}const G0={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ws=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Dg=300,Q0=Dg-1;let rs=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:ae(([h])=>{Qs(h),this.opts.out&&this.opts.out(h)}),readline:ae(async h=>{const d=h[0];if(_r(d),this.opts.in==null)return $t;const $=await this.opts.in(d.value);return _t($)})};this.vars=Object.fromEntries(Object.entries({...r,...J0,...n}).map(([h,d])=>[h,G0.const(d)])),this.scope=new Ya([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),vh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof wc?this.opts.err(r):this.opts.err(new L0(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??$t;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return W0(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return $t;if(this.stepCount%Dg===Q0&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Kt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);ci(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(ps(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(ps(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return $t}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(gh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):$t}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return $t}case"for":{if(r.times){const n=await this._eval(r.times,e);xe(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);xe(n),xe(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:_e(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return $t}case"each":{const n=await this._eval(r.items,e);Ao(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return $t}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),$t}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),$t}case"addAssign":{const n=await this._eval(r.dest,e);xe(n);const h=await this._eval(r.expr,e);return xe(h),await this.assign(e,r.dest,_e(n.value+h.value)),$t}case"subAssign":{const n=await this._eval(r.dest,e);xe(n);const h=await this._eval(r.expr,e);return xe(h),await this.assign(e,r.dest,_e(n.value-h.value)),$t}case"null":return $t;case"bool":return Ju(r.value);case"num":return _e(r.value);case"str":return _t(r.value);case"arr":return yr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return tc(n)}case"prop":{const n=await this._eval(r.target,e);return Oc(n)?n.value.has(r.name)?n.value.get(r.name):$t:Z0(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(fv(n)){xe(h);const d=n.value[h.value];if(d===void 0)throw new B0(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Oc(n))return _r(h),n.value.has(h.value)?n.value.get(h.value):$t;throw new Kt(`Cannot read prop (${Co(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return ps(n),Ju(!n.value)}case"fn":return H0(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Ju(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=Co(d)}return _t(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),U0(n)}case"break":return this.log("block:break",{scope:e.name}),q0();case"continue":return this.log("block:continue",{scope:e.name}),z0();case"ns":return $t;case"meta":return $t;case"and":{const n=await this._eval(r.left,e);if(ps(n),n.value){const h=await this._eval(r.right,e);return ps(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(ps(n),n.value)return n;{const h=await this._eval(r.right,e);return ps(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=$t;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(fv(h))xe(d),h.value[d.value]=n;else if(Oc(h))_r(d),h.value.set(d.value,n);else throw new Kt(`Cannot read prop (${Co(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);Hn(h),h.value.set(e.name,n)}else throw new Kt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ws([vr],rs.prototype,"exec",null);ws([vr],rs.prototype,"execFn",null);ws([vr],rs.prototype,"execFnSimple",null);ws([vr],rs.prototype,"handleError",null);ws([vr],rs.prototype,"log",null);ws([vr],rs.prototype,"collectNs",null);ws([vr],rs.prototype,"collectNsMember",null);ws([vr],rs.prototype,"_fn",null);ws([vr],rs.prototype,"_eval",null);ws([vr],rs.prototype,"_run",null);ws([vr],rs.prototype,"registerAbortHandler",null);ws([vr],rs.prototype,"unregisterAbortHandler",null);ws([vr],rs.prototype,"abort",null);ws([vr],rs.prototype,"assign",null);ws([vr],rs,"collectMetadata",null);function X0(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Zu(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Zu.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}X0(Zu,Error);function Tc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Zu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Tc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Tc("",h.column-1," ")+Tc("",j,"^")}else r+=`
 at `+$}return r};Zu.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function hv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:_a,Main:us},d=_a,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ie=":",ke="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",Pe="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ut="&&",Ie="==",at="!=",St="<=",Ft=">=",Qe="<",Nr=">",Lt="+",wr="-",Pt="*",dr="^",Or="/",kr="%",Mr="!",Nt="[",U=".",K="if",te="elif",ce="else",he="match",le="=>",Oe="eval",de="exists",we="`",oe='"',De="'",je='\\"',Be="\\'",We="true",Ze="false",rt="null",st=";",wt="@",Bt="@(",bt=`\r
`,Gt=/^[A-Z0-9_:]/i,_s=/^[^`{]/,Vr=/^[{}`]/,Ot=/^[+\-]/,ht=/^[1-9]/,jt=/^[0-9]/,Vn=/^[A-Z_]/i,Kn=/^[A-Z0-9_]/i,Ci=/^[\r\n]/,_i=/^[ \t\r\n]/,tr=/^[ \t]/,rr=Bs(),ki=se("//",!1),vn=se("/*",!1),mr=se("*/",!1),Et=se("(",!1),$r=se(")",!1),sr=se("::",!1),Ye=se("{",!1),Ht=se("}",!1),jr=se("###",!1),dt=se("let",!1),yt=se(":",!1),ns=se("=",!1),Pi=se("var",!1),Ei=se("<:",!1),ks=se("#[",!1),as=se("]",!1),mt=se("each",!1),pt=se(",",!1),Ps=se("for",!1),ur=se("return",!1),or=Tt([["A","Z"],["0","9"],"_",":"],!1,!0),Mi=se("loop",!1),Si=se("break",!1),Fi=se("continue",!1),Ni=se("+=",!1),Jn=se("-=",!1),Zn=se("\\",!1),Oi=se("||",!1),Ti=se("&&",!1),Ii=se("==",!1),ji=se("!=",!1),Ri=se("<=",!1),Gn=se(">=",!1),gn=se("<",!1),Qn=se(">",!1),Di=se("+",!1),Xn=se("-",!1),Yn=se("*",!1),Li=se("^",!1),Bi=se("/",!1),Hi=se("%",!1),dn=se("!",!1),is=se("[",!1),yn=se(".",!1),Ui=se("if",!1),qi=se("elif",!1),zi=se("else",!1),Es=se("match",!1),Ms=se("=>",!1),Ss=se("eval",!1),Wi=se("exists",!1),Fs=se("`",!1),Ns=Tt(["`","{"],!0,!1),Os=Tt(["{","}","`"],!1,!1),Ts=se('"',!1),Is=se("'",!1),js=se('\\"',!1),ea=se("\\'",!1),Mt=Tt(["+","-"],!1,!1),ta=Tt([["1","9"]],!1,!1),nr=Tt([["0","9"]],!1,!1),Vi=se("true",!1),Rs=se("false",!1),Ki=se("null",!1),ls=se(";",!1),Ji=se("@",!1),wn=se("@(",!1),Zi=Tt([["A","Z"],"_"],!1,!0),ra=Tt([["A","Z"],["0","9"],"_"],!1,!0),Gi=se(`\r
`,!1),Qi=Tt(["\r",`
`],!1,!1),Xi=Tt([" ","	","\r",`
`],!1,!1),Yi=Tt([" ","	"],!1,!1),el=function(s){return s.join("")},tl=function(){return Y()},rl=function(){return Y()},sl=function(){return""},sa=function(){return""},nl=function(s){return s??[]},mn=function(s,u){return u},al=function(s,u){return[s,...u]},$n=function(s,u){return u},il=function(s,u){return[s,...u]},na=function(s,u){return u},ll=function(s,u){return[s,...u]},ul=function(s){return s},ol=function(s,u){return c("ns",{name:s,members:u})},fl=function(s,u){return c("meta",{name:s,value:u})},cl=function(s){return c("meta",{name:null,value:s})},hl=function(s,u,p){return c("def",{name:s,varType:u,expr:p,mut:!1,attr:[]})},pl=function(s,u,p){return c("def",{name:s,varType:u,expr:p,mut:!0,attr:[]})},vl=function(s){return c("identifier",{name:"print",chain:[c("callChain",{args:[s]})]})},gl=function(s,u){return c("attr",{name:s,value:u??c("bool",{value:!0})})},dl=function(s,u,p){return c("each",{var:s,items:u,for:p})},yl=function(s,u,p){return c("each",{var:s,items:u,for:p})},wl=function(s,u){return u},ml=function(s,u,p,o){return c("for",{var:s,from:u??c("num",{value:0}),to:p,for:o})},$l=function(s,u){return u},xl=function(s,u,p,o){return c("for",{var:s,from:u??c("num",{value:0}),to:p,for:o})},bl=function(s,u){return c("for",{times:s,for:u})},Al=function(s,u){return c("for",{times:s,for:u})},Cl=function(s){return c("return",{expr:s})},_l=function(s){return c("loop",{statements:s})},kl=function(){return c("break",{})},aa=function(){return c("continue",{})},Pl=function(s,u,p){return u==="+="?c("addAssign",{dest:s,expr:p}):u==="-="?c("subAssign",{dest:s,expr:p}):c("assign",{dest:s,expr:p})},ia=function(s,u,p){return{op:u,term:p}},El=function(s,u){return c("infix",{operands:[s,...u.map(p=>p.term)],operators:u.map(p=>p.op)})},Ml=function(){return Y()},Sl=function(s){return c("not",{expr:s})},la=function(s,u){return s.chain?{...s,chain:[...s.chain,...u]}:{...s,chain:u}},Fl=function(s){return c("callChain",{args:s??[]})},ua=function(s,u){return u},Nl=function(s,u){return[s,...u]},Ol=function(s){return c("indexChain",{index:s})},Tl=function(s){return c("propChain",{name:s})},Il=function(s,u,p,o){return c("if",{cond:s,then:u,elseif:p??[],else:o})},jl=function(s,u){return[s,...u]},oa=function(s,u){return{cond:s,then:u}},Rl=function(s){return s},fa=function(s,u,p){return{q:u,a:p}},Dl=function(s,u,p){return c("match",{about:s,qs:u??[],default:p})},Ll=function(s){return c("block",{statements:s})},Bl=function(s){return c("exists",{identifier:s})},ca=function(s){return c("identifier",{name:s})},Hl=function(s){return c("tmpl",{tmpl:s})},ha=function(s){return s.join("")},pa=function(s){return s},Ul=function(s){return c("str",{value:s.join("")})},va=function(s){return s},ql=function(s){return c("str",{value:s.join("")})},zl=function(){return'"'},Wl=function(){return"'"},Vl=function(){return c("num",{value:parseFloat(Y())})},Kl=function(){return c("num",{value:parseFloat(Y())})},Jl=function(){return c("num",{value:parseInt(Y(),10)})},Zl=function(){return c("num",{value:parseInt(Y(),10)})},ga=function(){return c("bool",{value:!0})},Gl=function(){return c("bool",{value:!1})},da=function(){return c("null",{})},ya=function(s,u){return{k:s,v:u}},Ql=function(s){const u=new Map;for(const p of s)u.set(p.k,p.v);return c("obj",{value:u})},wa=function(s){return s},Xl=function(s){return c("arr",{value:s})},Yl=function(s,u){return{name:s,argType:u}},ma=function(s,u){return[s,...u]},eu=function(s,u,p,o,g,v){return(s.length>0||p.length>0)&&lu("Cannot use spaces before or after the function name."),c("def",{name:u,expr:c("fn",{args:o??[],retType:g},v??[]),mut:!1,attr:[]})},$a=function(s,u,p){return c("fn",{args:s??[],retType:u},p??[])},xa=function(s){return s},tu=function(s){return c("arr",{value:s})},ba=function(s,u){return{k:s,v:u}},ru=function(s){const u=new Map;for(const p of s)u.set(p.k,p.v);return c("obj",{value:u})},su=function(s,u){return c("fnTypeSource",{args:s??[],result:u})},nu=function(s,u){return[s,...u]},au=function(s,u){return c("namedTypeSource",{name:s,inner:u})},iu=function(s){return c("namedTypeSource",{name:s,inner:null})},i=function(){return Y()},W=function(){return Y()},Ds=function(s){return c("block",{statements:s??[]})},a=0,z=0,C=[{line:1,column:1}],N=0,Rr=[],A=0,T={},Ls;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function Y(){return t.substring(z,a)}function Ut(){return Hs(z,a)}function lu(s,u){throw u=u!==void 0?u:Hs(z,a),Ca(s,u)}function se(s,u){return{type:"literal",text:s,ignoreCase:u}}function Tt(s,u,p){return{type:"class",parts:s,inverted:u,ignoreCase:p}}function Bs(){return{type:"any"}}function S(){return{type:"end"}}function Aa(s){var u=C[s],p;if(u)return u;for(p=s-1;!C[p];)p--;for(u=C[p],u={line:u.line,column:u.column};p<s;)t.charCodeAt(p)===10?(u.line++,u.column=1):u.column++,p++;return C[s]=u,u}function Hs(s,u,p){var o=Aa(s),g=Aa(u),v={source:n,start:{offset:s,line:o.line,column:o.column},end:{offset:u,line:g.line,column:g.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function M(s){a<N||(a>N&&(N=a,Rr=[]),Rr.push(s))}function Ca(s,u){return new Zu(s,null,null,u)}function uu(s,u,p){return new Zu(Zu.buildMessage(s,u),s,u,p)}function _a(){var s,u,p,o=a*77+0,g=T[o];if(g)return a=g.nextPos,g.result;for(s=a,u=[],p=ka();p!==e;)u.push(p),p=ka();return z=s,u=el(u),s=u,T[o]={nextPos:a,result:s},s}function ka(){var s,u,p=a*77+1,o=T[p];return o?(a=o.nextPos,o.result):(s=a,u=qs(),u!==e&&(z=s,u=tl()),s=u,s===e&&(s=a,u=En(),u!==e&&(z=s,u=rl()),s=u,s===e&&(s=ou(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,A===0&&M(rr))))),T[p]={nextPos:a,result:s},s)}function ou(){var s,u,p,o,g,v,m=a*77+2,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(u=$,a+=2):(u=e,A===0&&M(ki)),u!==e){for(p=[],o=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);z=s,s=sl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===b?(u=b,a+=2):(u=e,A===0&&M(vn)),u!==e){for(p=[],o=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(mr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(mr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);t.substr(a,2)===k?(o=k,a+=2):(o=e,A===0&&M(mr)),o!==e?(z=s,s=sa()):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function us(){var s,u,p,o,g,v=a*77+3,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,u=[],p=f();p!==e;)u.push(p),p=f();for(p=xn(),p===e&&(p=null),o=[],g=f();g!==e;)o.push(g),g=f();return z=s,s=nl(p),T[v]={nextPos:a,result:s},s}function xn(){var s,u,p,o,g,v,m,w,_=a*77+4,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Re(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=o,o=mn(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=o,o=mn(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=al(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function bn(){var s,u,p,o,g,v,m,w,_=a*77+5,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Dr(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=o,o=$n(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=o,o=$n(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=il(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function fr(){var s,u,p,o,g,v,m,w,_=a*77+6,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Lr(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Lr(),w!==e?(z=o,o=na(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Lr(),w!==e?(z=o,o=na(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=ll(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Re(){var s,u=a*77+7,p=T[u];return p?(a=p.nextPos,p.result):(s=Ea(),s===e&&(s=fu(),s===e&&(s=Lr())),T[u]={nextPos:a,result:s},s)}function Dr(){var s,u=a*77+8,p=T[u];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=qt(),s===e&&(s=Ea())),T[u]={nextPos:a,result:s},s)}function Lr(){var s,u=a*77+9,p=T[u];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=qt(),s===e&&(s=cu(),s===e&&(s=gu(),s===e&&(s=hu(),s===e&&(s=pu(),s===e&&(s=vu(),s===e&&(s=du(),s===e&&(s=yu(),s===e&&(s=br(),s===e&&(s=Sa(),s===e&&(s=Te()))))))))))),T[u]={nextPos:a,result:s},s)}function Te(){var s,u=a*77+10,p=T[u];return p?(a=p.nextPos,p.result):(s=wu(),s===e&&(s=os()),T[u]={nextPos:a,result:s},s)}function os(){var s,u=a*77+11,p=T[u];return p?(a=p.nextPos,p.result):(s=xu(),s===e&&(s=Pu(),s===e&&(s=Fa(),s===e&&(s=Pa()))),T[u]={nextPos:a,result:s},s)}function Pa(){var s,u,p,o,g,v,m=a*77+12,w=T[m];if(w)return a=w.nextPos,w.result;if(s=Oa(),s===e&&(s=Ta(),s===e&&(s=Ia(),s===e&&(s=qs(),s===e&&(s=En(),s===e&&(s=La(),s===e&&(s=Ha(),s===e&&(s=Fn(),s===e&&(s=Ua(),s===e&&(s=ku(),s===e&&(s=mu(),s===e&&(s=ja(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Et)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Te(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e?(z=s,s=ul(o)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function xr(){var s,u=a*77+13,p=T[u];return p?(a=p.nextPos,p.result):(s=La(),s===e&&(s=En(),s===e&&(s=Ha(),s===e&&(s=Eu(),s===e&&(s=Mu(),s===e&&(s=Fn()))))),T[u]={nextPos:a,result:s},s)}function Ea(){var s,u,p,o,g,v,m,w,_,P,I=a*77+14,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===j?(u=j,a+=2):(u=e,A===0&&M(sr)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(t.charCodeAt(a)===123?(v=D,a++):(v=e,A===0&&M(Ye)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=bn(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();t.charCodeAt(a)===125?(P=V,a++):(P=e,A===0&&M(Ht)),P!==e?(z=s,s=ol(o,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function fu(){var s,u,p,o,g,v,m=a*77+15,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===pe?(u=pe,a+=3):(u=e,A===0&&M(jr)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Ue(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=xr(),v!==e?(z=s,s=fl(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===pe?(u=pe,a+=3):(u=e,A===0&&M(jr)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();o=xr(),o!==e?(z=s,s=cl(o)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ma(){var s,u,p,o,g,v,m,w,_,P=a*77+16,I=T[P];if(I)return a=I.nextPos,I.result;if(s=a,t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ie,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=ke,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=hl(o,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===H?(u=H,a+=3):(u=e,A===0&&M(Pi)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ie,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=ke,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=pl(o,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[P]={nextPos:a,result:s},s}function cu(){var s,u,p,o,g=a*77+17,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===L?(u=L,a+=2):(u=e,A===0&&M(Ei)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();o=Te(),o!==e?(z=s,s=vl(o)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function hu(){var s,u,p,o,g,v,m,w=a*77+18,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,2)===B?(u=B,a+=2):(u=e,A===0&&M(ks)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();for(m=xr(),m!==e?g=m:(a=g,g=e),g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();t.charCodeAt(a)===93?(m=q,a++):(m=e,A===0&&M(as)),m!==e?(z=s,s=gl(o,g)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function pu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+19,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.substr(a,4)===J?(u=J,a+=4):(u=e,A===0&&M(mt)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();for(t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e)if(t.charCodeAt(a)===41?(R=F,a++):(R=e,A===0&&M($r)),R!==e){for(Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();ye=be(),ye!==e?(z=s,s=dl(m,I,ye)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===J?(u=J,a+=4):(u=e,A===0&&M(mt)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(P=Te(),P!==e){if(I=[],R=f(),R!==e)for(;R!==e;)I.push(R),R=f();else I=e;I!==e?(R=be(),R!==e?(z=s,s=yl(v,P,R)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function vu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke=a*77+20,Je=T[Ke];if(Je)return a=Je.nextPos,Je.result;if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=a,t.charCodeAt(a)===61?(P=ke,a++):(P=e,A===0&&M(ns)),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();R=Te(),R!==e?(z=_,_=wl(m,R)):(a=_,_=e)}else a=_,_=e;for(_===e&&(_=null),t.charCodeAt(a)===44?(P=G,a++):(P=e,A===0&&M(pt)),P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();if(R=Te(),R!==e)if(t.charCodeAt(a)===41?(Z=F,a++):(Z=e,A===0&&M($r)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=be(),re!==e?(z=s,s=ml(m,_,R,re)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(_=ke,a++):(_=e,A===0&&M(ns)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=Te(),I!==e?(z=w,w=$l(v,I)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e){if(R=[],Z=f(),Z!==e)for(;Z!==e;)R.push(Z),Z=f();else R=e;R!==e?(Z=be(),Z!==e?(z=s,s=xl(v,w,I,Z)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(g=Te(),g!==e)if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=be(),w!==e?(z=s,s=bl(g,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Te(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;g!==e?(v=be(),v!==e?(z=s,s=Al(o,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return T[Ke]={nextPos:a,result:s},s}function gu(){var s,u,p,o,g,v=a*77+21,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,6)===X?(u=X,a+=6):(u=e,A===0&&M(ur)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();g=Te(),g!==e?(z=s,s=Cl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function du(){var s,u,p,o,g,v,m,w,_=a*77+22,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===$e?(u=$e,a+=4):(u=e,A===0&&M(Mi)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Ht)),w!==e?(z=s,s=_l(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function yu(){var s,u,p,o,g=a*77+23,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Pe?(u=Pe,a+=5):(u=e,A===0&&M(Si)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=kl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function br(){var s,u,p,o,g=a*77+24,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===ge?(u=ge,a+=8):(u=e,A===0&&M(Fi)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=aa()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sa(){var s,u,p,o,g,v,m=a*77+25,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Te(),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.substr(a,2)===qe?(o=qe,a+=2):(o=e,A===0&&M(Ni)),o===e&&(t.substr(a,2)===it?(o=it,a+=2):(o=e,A===0&&M(Jn)),o===e&&(t.charCodeAt(a)===61?(o=ke,a++):(o=e,A===0&&M(ns)))),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=Te(),v!==e?(z=s,s=Pl(u,o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function wu(){var s,u,p,o,g,v,m,w,_=a*77+26,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=os(),u!==e){for(p=[],o=a,g=[],v=Ar();v!==e;)g.push(v),v=Ar();if(v=An(),v!==e){for(m=[],w=Ar();w!==e;)m.push(w),w=Ar();w=os(),w!==e?(z=o,o=ia(u,v,w)):(a=o,o=e)}else a=o,o=e;if(o!==e)for(;o!==e;){for(p.push(o),o=a,g=[],v=Ar();v!==e;)g.push(v),v=Ar();if(v=An(),v!==e){for(m=[],w=Ar();w!==e;)m.push(w),w=Ar();w=os(),w!==e?(z=o,o=ia(u,v,w)):(a=o,o=e)}else a=o,o=e}else p=e;p!==e?(z=s,s=El(u,p)):(a=s,s=e)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ar(){var s,u,p,o=a*77+27,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(u=Zt,a++):(u=e,A===0&&M(Zn)),u!==e?(p=ne(),p!==e?(u=[u,p],s=u):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),T[o]={nextPos:a,result:s},s)}function An(){var s,u,p=a*77+28,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===lt?(u=lt,a+=2):(u=e,A===0&&M(Oi)),u===e&&(t.substr(a,2)===ut?(u=ut,a+=2):(u=e,A===0&&M(Ti)),u===e&&(t.substr(a,2)===Ie?(u=Ie,a+=2):(u=e,A===0&&M(Ii)),u===e&&(t.substr(a,2)===at?(u=at,a+=2):(u=e,A===0&&M(ji)),u===e&&(t.substr(a,2)===St?(u=St,a+=2):(u=e,A===0&&M(Ri)),u===e&&(t.substr(a,2)===Ft?(u=Ft,a+=2):(u=e,A===0&&M(Gn)),u===e&&(t.charCodeAt(a)===60?(u=Qe,a++):(u=e,A===0&&M(gn)),u===e&&(t.charCodeAt(a)===62?(u=Nr,a++):(u=e,A===0&&M(Qn)),u===e&&(t.charCodeAt(a)===43?(u=Lt,a++):(u=e,A===0&&M(Di)),u===e&&(t.charCodeAt(a)===45?(u=wr,a++):(u=e,A===0&&M(Xn)),u===e&&(t.charCodeAt(a)===42?(u=Pt,a++):(u=e,A===0&&M(Yn)),u===e&&(t.charCodeAt(a)===94?(u=dr,a++):(u=e,A===0&&M(Li)),u===e&&(t.charCodeAt(a)===47?(u=Or,a++):(u=e,A===0&&M(Bi)),u===e&&(t.charCodeAt(a)===37?(u=kr,a++):(u=e,A===0&&M(Hi))))))))))))))),u!==e&&(z=s,u=Ml()),s=u,T[p]={nextPos:a,result:s},s)}function mu(){var s,u,p,o=a*77+29,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===33?(u=Mr,a++):(u=e,A===0&&M(dn)),u!==e?(p=Te(),p!==e?(z=s,s=Sl(p)):(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function Fa(){var s,u,p,o,g=a*77+30,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,u=Pa(),u!==e){if(p=[],o=Cn(),o===e&&(o=Na(),o===e&&(o=Us())),o!==e)for(;o!==e;)p.push(o),o=Cn(),o===e&&(o=Na(),o===e&&(o=Us()));else p=e;p!==e?(z=s,s=la(u,p)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function Cn(){var s,u,p,o,g,v,m=a*77+31,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Et)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=$u(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e?(z=s,s=Fl(o)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function $u(){var s,u,p,o,g,v,m=a*77+32,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Te(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=Te(),v!==e?(z=o,o=ua(u,v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=Te(),v!==e?(z=o,o=ua(u,v)):(a=o,o=e)):(a=o,o=e);z=s,s=Nl(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Na(){var s,u,p,o,g,v,m=a*77+33,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Te(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Ol(o)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Us(){var s,u,p,o=a*77+34,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===46?(u=U,a++):(u=e,A===0&&M(yn)),u!==e?(p=Ue(),p!==e?(z=s,s=Tl(p)):(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function xu(){var s,u,p,o,g,v,m,w,_,P,I=a*77+35,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===K?(u=K,a+=2):(u=e,A===0&&M(Ui)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Te(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=be(),v!==e){if(m=a,w=[],_=f(),_!==e)for(;_!==e;)w.push(_),_=f();else w=e;if(w!==e?(_=bu(),_!==e?m=_:(a=m,m=e)):(a=m,m=e),m===e&&(m=null),w=a,_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;_!==e?(P=Au(),P!==e?w=P:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),z=s,s=Il(o,v,m,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function bu(){var s,u,p,o,g,v,m=a*77+36,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=_n(),u!==e){for(p=[],o=a,g=[],v=f();v!==e;)g.push(v),v=f();for(v=_n(),v!==e?o=v:(a=o,o=e);o!==e;){for(p.push(o),o=a,g=[],v=f();v!==e;)g.push(v),v=f();v=_n(),v!==e?o=v:(a=o,o=e)}z=s,s=jl(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function _n(){var s,u,p,o,g,v,m,w=a*77+37,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,4)===te?(u=te,a+=4):(u=e,A===0&&M(qi)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=be(),m!==e?(z=s,s=oa(g,m)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[w]={nextPos:a,result:s},s}function Au(){var s,u,p,o,g,v=a*77+38,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,4)===ce?(u=ce,a+=4):(u=e,A===0&&M(zi)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();g=be(),g!==e?(z=s,s=Rl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function Oa(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,On=a*77+39,fs=T[On];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.substr(a,5)===he?(u=he,a+=5):(u=e,A===0&&M(Es)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===123?(m=D,a++):(m=e,A===0&&M(Ye)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=[],P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;if(P!==e)for(;P!==e;)if(_.push(P),P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;else _=e;if(_!==e){if(P=a,t.charCodeAt(a)===42?(I=Pt,a++):(I=e,A===0&&M(Yn)),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();P=re}else a=P,P=e}else a=P,P=e}else a=P,P=e;for(P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();t.charCodeAt(a)===125?(R=V,a++):(R=e,A===0&&M(Ht)),R!==e?(z=s,s=Dl(g,_,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[On]={nextPos:a,result:s},s}function Ta(){var s,u,p,o,g,v,m,w,_=a*77+40,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===Oe?(u=Oe,a+=4):(u=e,A===0&&M(Ss)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Ht)),w!==e?(z=s,s=Ll(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ia(){var s,u,p,o,g=a*77+41,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===de?(u=de,a+=6):(u=e,A===0&&M(Wi)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;p!==e?(o=ja(),o!==e?(z=s,s=Bl(o)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ja(){var s,u,p=a*77+42,o=T[p];return o?(a=o.nextPos,o.result):(s=a,u=za(),u!==e&&(z=s,u=ca(u)),s=u,T[p]={nextPos:a,result:s},s)}function qs(){var s,u,p,o,g,v,m=a*77+43,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(u=we,a++):(u=e,A===0&&M(Fs)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===96?(o=we,a++):(o=e,A===0&&M(Fs)),o!==e?(z=s,s=Hl(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function kn(){var s,u,p,o,g,v,m=a*77+44,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Te(),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Ht)),v!==e?s=o:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,u=[],p=Pn(),p!==e)for(;p!==e;)u.push(p),p=Pn();else u=e;u!==e&&(z=s,u=ha(u)),s=u}return T[m]={nextPos:a,result:s},s}function Pn(){var s,u=a*77+45,p=T[u];return p?(a=p.nextPos,p.result):(s=Ra(),s===e&&(_s.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Ns))),T[u]={nextPos:a,result:s},s)}function Ra(){var s,u,p,o=a*77+46,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(u=Zt,a++):(u=e,A===0&&M(Zn)),u!==e?(Vr.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,A===0&&M(Os)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function En(){var s,u,p,o,g,v,m=a*77+47,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(u=oe,a++):(u=e,A===0&&M(Ts)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===34?(v=oe,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=pa(v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===34?(v=oe,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=pa(v)):(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===34?(o=oe,a++):(o=e,A===0&&M(Ts)),o!==e?(z=s,s=Ul(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(u=De,a++):(u=e,A===0&&M(Is)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=va(v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=va(v)):(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===39?(o=De,a++):(o=e,A===0&&M(Is)),o!==e?(z=s,s=ql(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Da(){var s,u,p=a*77+48,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===je?(u=je,a+=2):(u=e,A===0&&M(js)),u!==e&&(z=s,u=zl()),s=u,T[p]={nextPos:a,result:s},s)}function Mn(){var s,u,p=a*77+49,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===Be?(u=Be,a+=2):(u=e,A===0&&M(ea)),u!==e&&(z=s,u=Wl()),s=u,T[p]={nextPos:a,result:s},s)}function La(){var s,u=a*77+50,p=T[u];return p?(a=p.nextPos,p.result):(s=Cu(),s===e&&(s=Ba()),T[u]={nextPos:a,result:s},s)}function Cu(){var s,u,p,o,g,v,m=a*77+51,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),ht.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ta)),u!==e){if(p=[],jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)for(;o!==e;)p.push(o),jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(o=U,a++):(o=e,A===0&&M(yn)),o!==e){if(g=[],jt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr)),v!==e)for(;v!==e;)g.push(v),jt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr));else g=e;g!==e?(z=s,s=Vl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),jt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)if(t.charCodeAt(a)===46?(p=U,a++):(p=e,A===0&&M(yn)),p!==e){if(o=[],jt.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr)),g!==e)for(;g!==e;)o.push(g),jt.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr));else o=e;o!==e?(z=s,s=Kl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ba(){var s,u,p,o,g=a*77+52,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),ht.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ta)),u!==e){if(p=[],jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)for(;o!==e;)p.push(o),jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr));else p=e;p!==e?(z=s,s=Jl()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),jt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e?(z=s,s=Zl()):(a=s,s=e)),T[g]={nextPos:a,result:s},s}function Ha(){var s,u=a*77+53,p=T[u];return p?(a=p.nextPos,p.result):(s=_u(),s===e&&(s=Sn()),T[u]={nextPos:a,result:s},s)}function _u(){var s,u,p,o,g=a*77+54,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(u=We,a+=4):(u=e,A===0&&M(Vi)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=ga()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sn(){var s,u,p,o,g=a*77+55,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(u=Ze,a+=5):(u=e,A===0&&M(Rs)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=Gl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Fn(){var s,u,p,o,g=a*77+56,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===rt?(u=rt,a+=4):(u=e,A===0&&M(Ki)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=da()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Ua(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+57,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Ht)),g!==e?(z=s,s=Ql(o)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function ku(){var s,u,p,o,g,v,m,w,_,P,I=a*77+58,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Xl(o)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Nn(){var s,u,p,o,g,v,m,w=a*77+59,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,u=Ue(),u!==e){for(p=a,o=[],g=f();g!==e;)o.push(g),g=f();if(t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=He(),m!==e?p=m:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),z=s,s=Yl(u,p)}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function qa(){var s,u,p,o,g,v,m=a*77+60,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Nn(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=Nn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=Nn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);z=s,s=ma(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function qt(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,On=a*77+61,fs=T[On];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.charCodeAt(a)===64?(u=wt,a++):(u=e,A===0&&M(Ji)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Ue(),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(t.charCodeAt(a)===40?(v=E,a++):(v=e,A===0&&M(Et)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=qa(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(t.charCodeAt(a)===41?(P=F,a++):(P=e,A===0&&M($r)),P!==e){for(I=a,R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===58?(Z=ie,a++):(Z=e,A===0&&M(yt)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=He(),re!==e?I=re:(a=I,I=e)}else a=I,I=e;for(I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===123?(Z=D,a++):(Z=e,A===0&&M(Ye)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();for(re=fr(),re===e&&(re=null),Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();t.charCodeAt(a)===125?(Je=V,a++):(Je=e,A===0&&M(Ht)),Je!==e?(z=s,s=eu(p,o,g,w,I,re)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[On]={nextPos:a,result:s},s}function Pu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=a*77+62,re=T[ye];if(re)return a=re.nextPos,re.result;if(s=a,t.substr(a,2)===Bt?(u=Bt,a+=2):(u=e,A===0&&M(wn)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=qa(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=a,w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===58?(_=ie,a++):(_=e,A===0&&M(yt)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=He(),I!==e?m=I:(a=m,m=e)}else a=m,m=e;for(m===e&&(m=null),w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===123?(_=D,a++):(_=e,A===0&&M(Ye)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();for(I=fr(),I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();t.charCodeAt(a)===125?(Z=V,a++):(Z=e,A===0&&M(Ht)),Z!==e?(z=s,s=$a(o,m,I)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[ye]={nextPos:a,result:s},s}function Eu(){var s,u,p,o,g,v,m,w,_,P,I=a*77+63,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=xr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=xr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=tu(o)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Mu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+64,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=xr(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=xr(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Ht)),g!==e?(z=s,s=ru(o)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function He(){var s,u=a*77+65,p=T[u];return p?(a=p.nextPos,p.result):(s=Su(),s===e&&(s=It()),T[u]={nextPos:a,result:s},s)}function Su(){var s,u,p,o,g,v,m,w,_,P,I=a*77+66,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===Bt?(u=Bt,a+=2):(u=e,A===0&&M(wn)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=Br(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.substr(a,2)===le?(w=le,a+=2):(w=e,A===0&&M(Ms)),w!==e){for(_=[],P=f();P!==e;)_.push(P),P=f();P=He(),P!==e?(z=s,s=su(o,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Br(){var s,u,p,o,g,v,m=a*77+67,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=He(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=He(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=He(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);z=s,s=nu(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function It(){var s,u,p,o,g,v,m,w,_=a*77+68,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Ue(),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(t.charCodeAt(a)===60?(o=Qe,a++):(o=e,A===0&&M(gn)),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(v=He(),v!==e){for(m=[],w=y();w!==e;)m.push(w),w=y();t.charCodeAt(a)===62?(w=Nr,a++):(w=e,A===0&&M(Qn)),w!==e?(z=s,s=au(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,u=Ue(),u!==e&&(z=s,u=iu(u)),s=u),T[_]={nextPos:a,result:s},s}function Ue(){var s,u,p,o,g=a*77+69,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Vn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(Zi)),u!==e){for(p=[],Kn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ra));o!==e;)p.push(o),Kn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ra));z=s,s=i()}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function za(){var s,u,p,o,g,v,m=a*77+70,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Ue(),u!==e){for(p=[],o=a,t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);z=s,s=W()}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function x(){var s,u,p,o,g,v=a*77+71,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,u=[],p=f();p!==e;)u.push(p),p=f();if(t.charCodeAt(a)===44?(p=G,a++):(p=e,A===0&&M(pt)),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();u=[u,p,o],s=u}else a=s,s=e;if(s===e)if(s=[],u=f(),u!==e)for(;u!==e;)s.push(u),u=f();else s=e;return T[v]={nextPos:a,result:s},s}function be(){var s,u,p,o,g,v,m=a*77+72,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=fr(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Ht)),v!==e?(z=s,s=Ds(o)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Lr()),T[m]={nextPos:a,result:s},s}function ne(){var s,u=a*77+73,p=T[u];return p?(a=p.nextPos,p.result):(t.substr(a,2)===bt?(s=bt,a+=2):(s=e,A===0&&M(Gi)),s===e&&(Ci.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Qi))),T[u]={nextPos:a,result:s},s)}function l(){var s,u,p=a*77+74,o=T[p];return o?(a=o.nextPos,o.result):(s=a,A++,t.length>a?(u=t.charAt(a),a++):(u=e,A===0&&M(rr)),A--,u===e?s=void 0:(a=s,s=e),s===e&&(s=ne()),T[p]={nextPos:a,result:s},s)}function f(){var s,u=a*77+75,p=T[u];return p?(a=p.nextPos,p.result):(_i.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Xi)),T[u]={nextPos:a,result:s},s)}function y(){var s,u=a*77+76,p=T[u];return p?(a=p.nextPos,p.result):(tr.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Yi)),T[u]={nextPos:a,result:s},s)}function c(s,u,p){const o={type:s};u.children=p;for(const v of Object.keys(u))u[v]!==void 0&&(o[v]=u[v]);const g=Ut();return o.loc={start:g.start.offset,end:g.end.offset-1},o}if(Ls=d(),Ls!==e&&a===t.length)return Ls;throw Ls!==e&&a<t.length&&M(S()),uu(Rr,N<t.length?t.charAt(N):null,N<t.length?Hs(N,N+1):Hs(N,N))}const Y0=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function e$(t){return Y0.includes(t.type)}function Lg(t){return"chain"in t&&t.chain!==null}function t$(t,r,e){return{type:"call",target:t,args:r,loc:e}}function r$(t,r,e){return{type:"index",target:t,index:r,loc:e}}function s$(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=et(e.expr,r);break}case"return":{e.expr=et(e.expr,r);break}case"each":{e.items=et(e.items,r),e.for=et(e.for,r);break}case"for":{e.from!=null&&(e.from=et(e.from,r)),e.to!=null&&(e.to=et(e.to,r)),e.times!=null&&(e.times=et(e.times,r)),e.for=et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=et(e.expr,r),e.dest=et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=et(e.operands[n],r);break}case"not":{e.expr=et(e.expr,r);break}case"if":{e.cond=et(e.cond,r),e.then=et(e.then,r);for(const n of e.elseif)n.cond=et(n.cond,r),n.then=et(n.then,r);e.else!=null&&(e.else=et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=et(e.children[n],r);break}case"match":{e.about=et(e.about,r);for(const n of e.qs)n.q=et(n.q,r),n.a=et(n.a,r);e.default!=null&&(e.default=et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=et(e.statements[n],r);break}case"exists":{e.identifier=et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=et(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=et(e.args[n],r);break}case"indexChain":{e.index=et(e.index,r);break}case"call":{e.target=et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=et(e.args[n],r);break}case"index":{e.target=et(e.target,r),e.index=et(e.index,r);break}case"prop":{e.target=et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=et(e.members[n],r);break}case"or":case"and":{e.left=et(e.left,r),e.right=et(e.right,r);break}}if(Lg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=et(e.chain[n],r);return e}const Ic=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function jc(t){throw new ro(`Reserved word "${t}" cannot be used as variable name.`)}function n$(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Ic.includes(t.name)&&jc(t.name);break}case"meta":{t.name!=null&&Ic.includes(t.name)&&jc(t.name);break}case"fn":{for(const r of t.args)Ic.includes(r.name)&&jc(r.name);break}}return t}function a$(t){for(const r of t)et(r,n$);return t}function pv(t){return{type:"simple",name:t}}function i$(t,r){return{type:"generic",name:t,inners:r}}function l$(t,r){return{type:"fn",args:t,result:r}}function Of(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Of(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Of(n)).join(", "),e=Of(t.result);return`@(${r}) { ${e} }`}}}function _o(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return pv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=_o(t.inner):r=pv("any"),i$(t.name,[r])}}throw new ro(`Unknown type: '${Of(t)}'`)}else{const r=t.args.map(e=>_o(e));return l$(r,_o(t.result))}}function u$(t){switch(t.type){case"def":{t.varType!=null&&_o(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&_o(r.argType);t.retType!=null&&_o(t.retType);break}}return t}function o$(t){for(const r of t)et(r,u$);return t}function Tf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Tf(n.expr.children)),r.push(n);else{if(e.length>0)throw new ro("invalid attribute.");switch(n.type){case"fn":{n.children=Tf(n.children);break}case"block":{n.statements=Tf(n.statements);break}}r.push(n)}if(e.length>0)throw new ro("invalid attribute.");return r}function f$(t){if(e$(t)&&Lg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=t$(n,h.args,h.loc);break}case"indexChain":{n=r$(n,h.index,h.loc);break}case"propChain":{n=s$(n,h.name,h.loc);break}}return n}return t}function c$(t){for(let r=0;r<t.length;r++)t[r]=et(t[r],f$);return t}function If(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Bg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return If(t,r,e);{const{left:n,right:h,info:d}=t;return If(n,Bg(h,r,e),d)}}function Bu(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Bu(t.left),Bu(t.right)]}}const h$={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Bu(t.left),right:Bu(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Bu(t.left),right:Bu(t.right)}),priority:3}};function p$(t){const r=t.operators.map(n=>{const h=h$[n];if(h==null)throw new ro(`No such operator: ${n}.`);return h});let e=If(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Bg(e,t.operands[2+n],r[1+n]);return Bu(e)}function v$(t){for(let r=0;r<t.length;r++)t[r]=et(t[r],e=>e.type==="infix"?p$(e):e);return t}var Ka;let g$=(Ka=class{constructor(){me(this,"plugins");this.plugins={validate:[a$,o$],transform:[Tf,c$,v$]}}static parse(r){return Ka.instance==null&&(Ka.instance=new Ka),Ka.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=hv(r,{startRule:"Preprocess"});e=hv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ro(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new ro(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Ka,"instance"),Ka);const d$="develop",y$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let mh=[],qo=null;function w$(t){return mh=g$.parse(t),JSON.stringify(mh,null,"	")}async function m$(t){qo==null||qo.abort(),qo=new rs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:dh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:dh(e.val,!0),print:!1});break}}});try{await qo.exec(mh)}catch(r){t.err(r)}}const $$=Object.freeze(Object.defineProperty({__proto__:null,exec:m$,parse:w$,samples:y$,version:d$},Symbol.toStringTag,{value:"Module"}));function gr(t,r,e){let n=e.value;return{configurable:!0,get(){const h=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:h}),h},set(h){n=h}}}let mc=class Hg extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Hg)}};class x$ extends mc{constructor(r){super(`Internal Error. ${r}`,r)}}class so extends mc{constructor(r,e){super(r,e)}}class Jt extends mc{constructor(r,e){super(r,e)}}class b$ extends Jt{constructor(r,e){super(r,e)}}var bi=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let ei=class Ug{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Ug(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Jt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Jt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){const d=h.get(r);if(!d.isMutable)throw new Jt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Jt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};bi([gr],ei.prototype,"log",null);bi([gr],ei.prototype,"onUpdated",null);bi([gr],ei.prototype,"createChildScope",null);bi([gr],ei.prototype,"get",null);bi([gr],ei.prototype,"exists",null);bi([gr],ei.prototype,"getAll",null);bi([gr],ei.prototype,"add",null);bi([gr],ei.prototype,"assign",null);const Ct={type:"null"},un={type:"bool",value:!0},Ks={type:"bool",value:!1},Fe=t=>({type:"num",value:t}),Wt=t=>({type:"str",value:t}),Gu=t=>({type:"bool",value:t}),cp=t=>({type:"obj",value:t}),Jr=t=>({type:"arr",value:t}),A$=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),fe=t=>({type:"fn",native:t}),C$=t=>({type:"return",value:t}),_$=()=>({type:"break",value:null}),k$=()=>({type:"continue",value:null}),P$=t=>t.type==="return"?t.value:t,qg=(t,r)=>({type:"error",value:t,info:r});function Xs(t){if(t==null)throw new Jt("Expect anything, but got nothing.")}function vs(t){if(t==null)throw new Jt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Jt(`Expect boolean, but got ${t.type}.`)}function hi(t){if(t==null)throw new Jt("Expect function, but got nothing.");if(t.type!=="fn")throw new Jt(`Expect function, but got ${t.type}.`)}function Pr(t){if(t==null)throw new Jt("Expect string, but got nothing.");if(t.type!=="str")throw new Jt(`Expect string, but got ${t.type}.`)}function Ce(t){if(t==null)throw new Jt("Expect number, but got nothing.");if(t.type!=="num")throw new Jt(`Expect number, but got ${t.type}.`)}function ai(t){if(t==null)throw new Jt("Expect object, but got nothing.");if(t.type!=="obj")throw new Jt(`Expect object, but got ${t.type}.`)}function rc(t){if(t==null)throw new Jt("Expect array, but got nothing.");if(t.type!=="arr")throw new Jt(`Expect array, but got ${t.type}.`)}function Rc(t){return t.type==="obj"}function vv(t){return t.type==="arr"}function $h(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function xh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>xh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function bh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>bh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=bh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ah(t){if(t===null)return Ct;if(typeof t=="boolean")return Gu(t);if(typeof t=="string")return Wt(t);if(typeof t=="number")return Fe(t);if(Array.isArray(t))return Jr(t.map(r=>Ah(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ah(n));return cp(r)}return Ct}function ko(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const h of t.value)n.push(ko(h,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[h,d]of t.value)n.push(`${h}: ${ko(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const E$={help:Wt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Wt("0.16.0"),"Core:ai":Wt("kawaii"),"Core:not":fe(([t])=>(vs(t),t.value?Ks:un)),"Core:eq":fe(([t,r])=>(Xs(t),Xs(r),$h(t,r)?un:Ks)),"Core:neq":fe(([t,r])=>(Xs(t),Xs(r),$h(t,r)?Ks:un)),"Core:and":fe(([t,r])=>(vs(t),t.value?(vs(r),r.value?un:Ks):Ks)),"Core:or":fe(([t,r])=>(vs(t),t.value?un:(vs(r),r.value?un:Ks))),"Core:add":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value+r.value))),"Core:sub":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value-r.value))),"Core:mul":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value*r.value))),"Core:pow":fe(([t,r])=>{Ce(t),Ce(r);const e=t.value**r.value;if(isNaN(e))throw new Jt("Invalid operation.");return Fe(e)}),"Core:div":fe(([t,r])=>{Ce(t),Ce(r);const e=t.value/r.value;if(isNaN(e))throw new Jt("Invalid operation.");return Fe(e)}),"Core:mod":fe(([t,r])=>(Ce(t),Ce(r),Fe(t.value%r.value))),"Core:gt":fe(([t,r])=>(Ce(t),Ce(r),t.value>r.value?un:Ks)),"Core:lt":fe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?un:Ks)),"Core:gteq":fe(([t,r])=>(Ce(t),Ce(r),t.value>=r.value?un:Ks)),"Core:lteq":fe(([t,r])=>(Ce(t),Ce(r),t.value<=r.value?un:Ks)),"Core:type":fe(([t])=>(Xs(t),Wt(t.type))),"Core:to_str":fe(([t])=>(Xs(t),Wt(ko(t)))),"Core:range":fe(([t,r])=>(Ce(t),Ce(r),t.value<r.value?Jr(Array.from({length:r.value-t.value+1},(e,n)=>Fe(n+t.value))):t.value>r.value?Jr(Array.from({length:t.value-r.value+1},(e,n)=>Fe(t.value-n))):Jr([t]))),"Core:sleep":fe(async([t])=>(Ce(t),await new Promise(r=>setTimeout(r,t.value)),Ct)),"Util:uuid":fe(()=>Wt(rp())),"Json:stringify":fe(([t])=>(Xs(t),Wt(JSON.stringify(bh(t))))),"Json:parse":fe(([t])=>{Pr(t);try{return Ah(JSON.parse(t.value))}catch{return qg("not_json")}}),"Json:parsable":fe(([t])=>{Pr(t);try{JSON.parse(t.value)}catch{return Gu(!1)}return Gu(!0)}),"Date:now":fe(()=>Fe(Date.now())),"Date:year":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":fe(([t])=>(t&&Ce(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":fe(([t])=>(Pr(t),Fe(new Date(t.value).getTime()))),"Math:Infinity":Fe(1/0),"Math:E":Fe(Math.E),"Math:LN2":Fe(Math.LN2),"Math:LN10":Fe(Math.LN10),"Math:LOG2E":Fe(Math.LOG2E),"Math:LOG10E":Fe(Math.LOG10E),"Math:PI":Fe(Math.PI),"Math:SQRT1_2":Fe(Math.SQRT1_2),"Math:SQRT2":Fe(Math.SQRT2),"Math:abs":fe(([t])=>(Ce(t),Fe(Math.abs(t.value)))),"Math:acos":fe(([t])=>(Ce(t),Fe(Math.acos(t.value)))),"Math:acosh":fe(([t])=>(Ce(t),Fe(Math.acosh(t.value)))),"Math:asin":fe(([t])=>(Ce(t),Fe(Math.asin(t.value)))),"Math:asinh":fe(([t])=>(Ce(t),Fe(Math.asinh(t.value)))),"Math:atan":fe(([t])=>(Ce(t),Fe(Math.atan(t.value)))),"Math:atanh":fe(([t])=>(Ce(t),Fe(Math.atanh(t.value)))),"Math:atan2":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.atan2(t.value,r.value)))),"Math:cbrt":fe(([t])=>(Ce(t),Fe(Math.cbrt(t.value)))),"Math:ceil":fe(([t])=>(Ce(t),Fe(Math.ceil(t.value)))),"Math:clz32":fe(([t])=>(Ce(t),Fe(Math.clz32(t.value)))),"Math:cos":fe(([t])=>(Ce(t),Fe(Math.cos(t.value)))),"Math:cosh":fe(([t])=>(Ce(t),Fe(Math.cosh(t.value)))),"Math:exp":fe(([t])=>(Ce(t),Fe(Math.exp(t.value)))),"Math:expm1":fe(([t])=>(Ce(t),Fe(Math.expm1(t.value)))),"Math:floor":fe(([t])=>(Ce(t),Fe(Math.floor(t.value)))),"Math:fround":fe(([t])=>(Ce(t),Fe(Math.fround(t.value)))),"Math:hypot":fe(([t])=>{rc(t);const r=[];for(const e of t.value)Ce(e),r.push(e.value);return Fe(Math.hypot(...r))}),"Math:imul":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.imul(t.value,r.value)))),"Math:log":fe(([t])=>(Ce(t),Fe(Math.log(t.value)))),"Math:log1p":fe(([t])=>(Ce(t),Fe(Math.log1p(t.value)))),"Math:log10":fe(([t])=>(Ce(t),Fe(Math.log10(t.value)))),"Math:log2":fe(([t])=>(Ce(t),Fe(Math.log2(t.value)))),"Math:max":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.max(t.value,r.value)))),"Math:min":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.min(t.value,r.value)))),"Math:pow":fe(([t,r])=>(Ce(t),Ce(r),Fe(Math.pow(t.value,r.value)))),"Math:round":fe(([t])=>(Ce(t),Fe(Math.round(t.value)))),"Math:sign":fe(([t])=>(Ce(t),Fe(Math.sign(t.value)))),"Math:sin":fe(([t])=>(Ce(t),Fe(Math.sin(t.value)))),"Math:sinh":fe(([t])=>(Ce(t),Fe(Math.sinh(t.value)))),"Math:sqrt":fe(([t])=>{Ce(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Jt("Invalid operation.");return Fe(r)}),"Math:tan":fe(([t])=>(Ce(t),Fe(Math.tan(t.value)))),"Math:tanh":fe(([t])=>(Ce(t),Fe(Math.tanh(t.value)))),"Math:trunc":fe(([t])=>(Ce(t),Fe(Math.trunc(t.value)))),"Math:rnd":fe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Fe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Fe(Math.random())),"Math:gen_rng":fe(([t])=>{if(Xs(t),t.type!=="num"&&t.type!=="str")return Ct;const r=hf(t.value.toString());return fe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Fe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Fe(r()))}),"Num:to_hex":fe(([t])=>(Ce(t),Wt(t.value.toString(16)))),"Num:from_hex":fe(([t])=>(Pr(t),Fe(parseInt(t.value,16)))),"Str:lf":Wt(`
`),"Str:lt":fe(([t,r])=>(Pr(t),Pr(r),t.value<r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:gt":fe(([t,r])=>(Pr(t),Pr(r),t.value>r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:from_codepoint":fe(([t])=>(Ce(t),Wt(String.fromCodePoint(t.value)))),"Obj:keys":fe(([t])=>(ai(t),Jr(Array.from(t.value.keys()).map(r=>Wt(r))))),"Obj:vals":fe(([t])=>(ai(t),Jr(Array.from(t.value.values())))),"Obj:kvs":fe(([t])=>(ai(t),Jr(Array.from(t.value.entries()).map(([r,e])=>Jr([Wt(r),e]))))),"Obj:get":fe(([t,r])=>(ai(t),Pr(r),t.value.get(r.value)??Ct)),"Obj:set":fe(([t,r,e])=>(ai(t),Pr(r),Xs(e),t.value.set(r.value,e),Ct)),"Obj:has":fe(([t,r])=>(ai(t),Pr(r),Gu(t.value.has(r.value)))),"Obj:copy":fe(([t])=>(ai(t),cp(new Map(t.value)))),"Async:interval":fe(async([t,r,e],n)=>{Ce(t),hi(r),e&&(vs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),fe(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":fe(async([t,r],e)=>{Ce(t),hi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),fe(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},gv={num:{to_str:t=>fe(async(r,e)=>Wt(t.value.toString()))},str:{to_num:t=>fe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Ct:Fe(n)}),len:t=>Fe(pf(t.value)),replace:t=>fe(async([r,e],n)=>(Pr(r),Pr(e),Wt(t.value.split(r.value).join(e.value)))),index_of:t=>fe(async([r],e)=>(Pr(r),Fe(gf(t.value,r.value)))),incl:t=>fe(async([r],e)=>(Pr(r),t.value.includes(r.value)?un:Ks)),trim:t=>fe(async(r,e)=>Wt(t.value.trim())),upper:t=>fe(async(r,e)=>Wt(t.value.toUpperCase())),lower:t=>fe(async(r,e)=>Wt(t.value.toLowerCase())),split:t=>fe(async([r],e)=>(r&&Pr(r),Jr(r?t.value.split(r?r.value:"").map(n=>Wt(n)):Dn(t.value).map(n=>Wt(n))))),slice:t=>fe(async([r,e],n)=>(Ce(r),Ce(e),Wt(vf(t.value,r.value,e.value)))),pick:t=>fe(async([r],e)=>{Ce(r);const h=Dn(t.value)[r.value];return h?Wt(h):Ct}),codepoint_at:t=>fe(([r],e)=>{Ce(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Ct:Fe(n)})},arr:{len:t=>Fe(t.value.length),push:t=>fe(async([r],e)=>(Xs(r),t.value.push(r),t)),unshift:t=>fe(async([r],e)=>(Xs(r),t.value.unshift(r),t)),pop:t=>fe(async(r,e)=>t.value.pop()??Ct),shift:t=>fe(async(r,e)=>t.value.shift()??Ct),concat:t=>fe(async([r],e)=>(rc(r),Jr(t.value.concat(r.value)))),slice:t=>fe(async([r,e],n)=>(Ce(r),Ce(e),Jr(t.value.slice(r.value,e.value)))),join:t=>fe(async([r],e)=>(r&&Pr(r),Wt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>fe(async([r],e)=>{hi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Fe(d)]));return Jr(await Promise.all(n))}),filter:t=>fe(async([r],e)=>{hi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Fe(h)]);vs($),$.value&&n.push(d)}return Jr(n)}),reduce:t=>fe(async([r,e],n)=>{hi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Fe($)])}return d}),find:t=>fe(async([r],e)=>{hi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Fe(n)]);if(vs(d),d.value)return h}return Ct}),incl:t=>fe(async([r],e)=>(Xs(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ks:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?un:Ks)),reverse:t=>fe(async(r,e)=>(t.value.reverse(),Ct)),copy:t=>fe(async(r,e)=>Jr([...t.value])),sort:t=>fe(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Ce(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return hi(r),rc(t),t.value=await n(t.value,r),t})},error:{name:t=>Wt(t.value),info:t=>t.info??Ct}};function M$(t,r){if(Object.hasOwn(gv,t.type)){const e=gv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Jt(`No such prop (${r}) in ${t.type}.`)}else throw new Jt(`Cannot read prop of ${t.type}. (reading ${r})`)}const S$={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var ms=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const zg=300,F$=zg-1;let ss=class{constructor(r,e={}){me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);me(this,"vars",{});this.opts=e;const n={print:fe(([h])=>{Xs(h),this.opts.out&&this.opts.out(h)}),readline:fe(async h=>{const d=h[0];if(Pr(d),this.opts.in==null)return Ct;const $=await this.opts.in(d.value);return Wt($)})};this.vars=Object.fromEntries(Object.entries({...r,...E$,...n}).map(([h,d])=>[h,S$.const(d)])),this.scope=new ei([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),qg("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof mc?this.opts.err(r):this.opts.err(new x$(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const h={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Ct;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const h=r.scope.createChildScope(n);return P$(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Ct;if(this.stepCount%zg===F$&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Jt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);hi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(vs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(vs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Ct}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if($h(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Ct}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Ct}case"for":{if(r.times){const n=await this._eval(r.times,e);Ce(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Ce(n),Ce(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Fe(d)}]])));if($.type==="break")break;if($.type==="return")return $}}return Ct}case"each":{const n=await this._eval(r.items,e);rc(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:h}]])));if(d.type==="break")break;if(d.type==="return")return d}return Ct}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,{isMutable:r.mut,value:n}),Ct}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Ct}case"addAssign":{const n=await this._eval(r.dest,e);Ce(n);const h=await this._eval(r.expr,e);return Ce(h),await this.assign(e,r.dest,Fe(n.value+h.value)),Ct}case"subAssign":{const n=await this._eval(r.dest,e);Ce(n);const h=await this._eval(r.expr,e);return Ce(h),await this.assign(e,r.dest,Fe(n.value-h.value)),Ct}case"null":return Ct;case"bool":return Gu(r.value);case"num":return Fe(r.value);case"str":return Wt(r.value);case"arr":return Jr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return cp(n)}case"prop":{const n=await this._eval(r.target,e);return Rc(n)?n.value.has(r.name)?n.value.get(r.name):Ct:M$(n,r.name)}case"index":{const n=await this._eval(r.target,e),h=await this._eval(r.index,e);if(vv(n)){Ce(h);const d=n.value[h.value];if(d===void 0)throw new b$(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}else{if(Rc(n))return Pr(h),n.value.has(h.value)?n.value.get(h.value):Ct;throw new Jt(`Cannot read prop (${ko(h)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return vs(n),Gu(!n.value)}case"fn":return A$(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return Gu(e.exists(r.identifier.name));case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);n+=ko(d)}return Wt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),C$(n)}case"break":return this.log("block:break",{scope:e.name}),_$();case"continue":return this.log("block:continue",{scope:e.name}),k$();case"ns":return Ct;case"meta":return Ct;case"and":{const n=await this._eval(r.left,e);if(vs(n),n.value){const h=await this._eval(r.right,e);return vs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(vs(n),n.value)return n;{const h=await this._eval(r.right,e);return vs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Ct;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r),d=await this._eval(e.index,r);if(vv(h))Ce(d),h.value[d.value]=n;else if(Rc(h))Pr(d),h.value.set(d.value,n);else throw new Jt(`Cannot read prop (${ko(d)}) of ${h.type}.`)}else if(e.type==="prop"){const h=await this._eval(e.target,r);ai(h),h.value.set(e.name,n)}else throw new Jt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};ms([gr],ss.prototype,"exec",null);ms([gr],ss.prototype,"execFn",null);ms([gr],ss.prototype,"execFnSimple",null);ms([gr],ss.prototype,"handleError",null);ms([gr],ss.prototype,"log",null);ms([gr],ss.prototype,"collectNs",null);ms([gr],ss.prototype,"collectNsMember",null);ms([gr],ss.prototype,"_fn",null);ms([gr],ss.prototype,"_eval",null);ms([gr],ss.prototype,"_run",null);ms([gr],ss.prototype,"registerAbortHandler",null);ms([gr],ss.prototype,"unregisterAbortHandler",null);ms([gr],ss.prototype,"abort",null);ms([gr],ss.prototype,"assign",null);ms([gr],ss,"collectMetadata",null);function N$(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Qu(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Qu.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}N$(Qu,Error);function Dc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Qu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Dc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Dc("",h.column-1," ")+Dc("",j,"^")}else r+=`
 at `+$}return r};Qu.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function dv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:_a,Main:us},d=_a,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ie=":",ke="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",Pe="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ut="&&",Ie="==",at="!=",St="<=",Ft=">=",Qe="<",Nr=">",Lt="+",wr="-",Pt="*",dr="^",Or="/",kr="%",Mr="!",Nt="[",U=".",K="if",te="elif",ce="else",he="match",le="=>",Oe="eval",de="exists",we="`",oe='"',De="'",je='\\"',Be="\\'",We="true",Ze="false",rt="null",st=";",wt="@",Bt="@(",bt=`\r
`,Gt=/^[A-Z0-9_:]/i,_s=/^[^`{]/,Vr=/^[{}`]/,Ot=/^[+\-]/,ht=/^[1-9]/,jt=/^[0-9]/,Vn=/^[A-Z_]/i,Kn=/^[A-Z0-9_]/i,Ci=/^[\r\n]/,_i=/^[ \t\r\n]/,tr=/^[ \t]/,rr=Bs(),ki=se("//",!1),vn=se("/*",!1),mr=se("*/",!1),Et=se("(",!1),$r=se(")",!1),sr=se("::",!1),Ye=se("{",!1),Ht=se("}",!1),jr=se("###",!1),dt=se("let",!1),yt=se(":",!1),ns=se("=",!1),Pi=se("var",!1),Ei=se("<:",!1),ks=se("#[",!1),as=se("]",!1),mt=se("each",!1),pt=se(",",!1),Ps=se("for",!1),ur=se("return",!1),or=Tt([["A","Z"],["0","9"],"_",":"],!1,!0),Mi=se("loop",!1),Si=se("break",!1),Fi=se("continue",!1),Ni=se("+=",!1),Jn=se("-=",!1),Zn=se("\\",!1),Oi=se("||",!1),Ti=se("&&",!1),Ii=se("==",!1),ji=se("!=",!1),Ri=se("<=",!1),Gn=se(">=",!1),gn=se("<",!1),Qn=se(">",!1),Di=se("+",!1),Xn=se("-",!1),Yn=se("*",!1),Li=se("^",!1),Bi=se("/",!1),Hi=se("%",!1),dn=se("!",!1),is=se("[",!1),yn=se(".",!1),Ui=se("if",!1),qi=se("elif",!1),zi=se("else",!1),Es=se("match",!1),Ms=se("=>",!1),Ss=se("eval",!1),Wi=se("exists",!1),Fs=se("`",!1),Ns=Tt(["`","{"],!0,!1),Os=Tt(["{","}","`"],!1,!1),Ts=se('"',!1),Is=se("'",!1),js=se('\\"',!1),ea=se("\\'",!1),Mt=Tt(["+","-"],!1,!1),ta=Tt([["1","9"]],!1,!1),nr=Tt([["0","9"]],!1,!1),Vi=se("true",!1),Rs=se("false",!1),Ki=se("null",!1),ls=se(";",!1),Ji=se("@",!1),wn=se("@(",!1),Zi=Tt([["A","Z"],"_"],!1,!0),ra=Tt([["A","Z"],["0","9"],"_"],!1,!0),Gi=se(`\r
`,!1),Qi=Tt(["\r",`
`],!1,!1),Xi=Tt([" ","	","\r",`
`],!1,!1),Yi=Tt([" ","	"],!1,!1),el=function(s){return s.join("")},tl=function(){return Y()},rl=function(){return Y()},sl=function(){return""},sa=function(){return""},nl=function(s){return s??[]},mn=function(s,u){return u},al=function(s,u){return[s,...u]},$n=function(s,u){return u},il=function(s,u){return[s,...u]},na=function(s,u){return u},ll=function(s,u){return[s,...u]},ul=function(s){return s},ol=function(s,u){return c("ns",{name:s,members:u})},fl=function(s,u){return c("meta",{name:s,value:u})},cl=function(s){return c("meta",{name:null,value:s})},hl=function(s,u,p){return c("def",{name:s,varType:u,expr:p,mut:!1,attr:[]})},pl=function(s,u,p){return c("def",{name:s,varType:u,expr:p,mut:!0,attr:[]})},vl=function(s){return c("identifier",{name:"print",chain:[c("callChain",{args:[s]})]})},gl=function(s,u){return c("attr",{name:s,value:u??c("bool",{value:!0})})},dl=function(s,u,p){return c("each",{var:s,items:u,for:p})},yl=function(s,u,p){return c("each",{var:s,items:u,for:p})},wl=function(s,u){return u},ml=function(s,u,p,o){return c("for",{var:s,from:u??c("num",{value:0}),to:p,for:o})},$l=function(s,u){return u},xl=function(s,u,p,o){return c("for",{var:s,from:u??c("num",{value:0}),to:p,for:o})},bl=function(s,u){return c("for",{times:s,for:u})},Al=function(s,u){return c("for",{times:s,for:u})},Cl=function(s){return c("return",{expr:s})},_l=function(s){return c("loop",{statements:s})},kl=function(){return c("break",{})},aa=function(){return c("continue",{})},Pl=function(s,u,p){return u==="+="?c("addAssign",{dest:s,expr:p}):u==="-="?c("subAssign",{dest:s,expr:p}):c("assign",{dest:s,expr:p})},ia=function(s,u,p){return{op:u,term:p}},El=function(s,u){return c("infix",{operands:[s,...u.map(p=>p.term)],operators:u.map(p=>p.op)})},Ml=function(){return Y()},Sl=function(s){return c("not",{expr:s})},la=function(s,u){return{...s,chain:u}},Fl=function(s){return c("callChain",{args:s??[]})},ua=function(s,u){return u},Nl=function(s,u){return[s,...u]},Ol=function(s){return c("indexChain",{index:s})},Tl=function(s){return c("propChain",{name:s})},Il=function(s,u,p,o){return c("if",{cond:s,then:u,elseif:p??[],else:o})},jl=function(s,u){return[s,...u]},oa=function(s,u){return{cond:s,then:u}},Rl=function(s){return s},fa=function(s,u,p){return{q:u,a:p}},Dl=function(s,u,p){return c("match",{about:s,qs:u??[],default:p})},Ll=function(s){return c("block",{statements:s})},Bl=function(s){return c("exists",{identifier:s})},ca=function(s){return c("identifier",{name:s})},Hl=function(s){return c("tmpl",{tmpl:s})},ha=function(s){return s.join("")},pa=function(s){return s},Ul=function(s){return c("str",{value:s.join("")})},va=function(s){return s},ql=function(s){return c("str",{value:s.join("")})},zl=function(){return'"'},Wl=function(){return"'"},Vl=function(){return c("num",{value:parseFloat(Y())})},Kl=function(){return c("num",{value:parseFloat(Y())})},Jl=function(){return c("num",{value:parseInt(Y(),10)})},Zl=function(){return c("num",{value:parseInt(Y(),10)})},ga=function(){return c("bool",{value:!0})},Gl=function(){return c("bool",{value:!1})},da=function(){return c("null",{})},ya=function(s,u){return{k:s,v:u}},Ql=function(s){const u=new Map;for(const p of s)u.set(p.k,p.v);return c("obj",{value:u})},wa=function(s){return s},Xl=function(s){return c("arr",{value:s})},Yl=function(s,u){return{name:s,argType:u}},ma=function(s,u){return[s,...u]},eu=function(s,u,p,o,g,v){return(s.length>0||p.length>0)&&lu("Cannot use spaces before or after the function name."),c("def",{name:u,expr:c("fn",{args:o??[],retType:g},v??[]),mut:!1,attr:[]})},$a=function(s,u,p){return c("fn",{args:s??[],retType:u},p??[])},xa=function(s){return s},tu=function(s){return c("arr",{value:s})},ba=function(s,u){return{k:s,v:u}},ru=function(s){const u=new Map;for(const p of s)u.set(p.k,p.v);return c("obj",{value:u})},su=function(s,u){return c("fnTypeSource",{args:s??[],result:u})},nu=function(s,u){return[s,...u]},au=function(s,u){return c("namedTypeSource",{name:s,inner:u})},iu=function(s){return c("namedTypeSource",{name:s,inner:null})},i=function(){return Y()},W=function(){return Y()},Ds=function(s){return c("block",{statements:s??[]})},a=0,z=0,C=[{line:1,column:1}],N=0,Rr=[],A=0,T={},Ls;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function Y(){return t.substring(z,a)}function Ut(){return Hs(z,a)}function lu(s,u){throw u=u!==void 0?u:Hs(z,a),Ca(s,u)}function se(s,u){return{type:"literal",text:s,ignoreCase:u}}function Tt(s,u,p){return{type:"class",parts:s,inverted:u,ignoreCase:p}}function Bs(){return{type:"any"}}function S(){return{type:"end"}}function Aa(s){var u=C[s],p;if(u)return u;for(p=s-1;!C[p];)p--;for(u=C[p],u={line:u.line,column:u.column};p<s;)t.charCodeAt(p)===10?(u.line++,u.column=1):u.column++,p++;return C[s]=u,u}function Hs(s,u,p){var o=Aa(s),g=Aa(u),v={source:n,start:{offset:s,line:o.line,column:o.column},end:{offset:u,line:g.line,column:g.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function M(s){a<N||(a>N&&(N=a,Rr=[]),Rr.push(s))}function Ca(s,u){return new Qu(s,null,null,u)}function uu(s,u,p){return new Qu(Qu.buildMessage(s,u),s,u,p)}function _a(){var s,u,p,o=a*77+0,g=T[o];if(g)return a=g.nextPos,g.result;for(s=a,u=[],p=ka();p!==e;)u.push(p),p=ka();return z=s,u=el(u),s=u,T[o]={nextPos:a,result:s},s}function ka(){var s,u,p=a*77+1,o=T[p];return o?(a=o.nextPos,o.result):(s=a,u=qs(),u!==e&&(z=s,u=tl()),s=u,s===e&&(s=a,u=En(),u!==e&&(z=s,u=rl()),s=u,s===e&&(s=ou(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,A===0&&M(rr))))),T[p]={nextPos:a,result:s},s)}function ou(){var s,u,p,o,g,v,m=a*77+2,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(u=$,a+=2):(u=e,A===0&&M(ki)),u!==e){for(p=[],o=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,v=l(),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);z=s,s=sl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===b?(u=b,a+=2):(u=e,A===0&&M(vn)),u!==e){for(p=[],o=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(mr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.substr(a,2)===k?(v=k,a+=2):(v=e,A===0&&M(mr)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr)),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);t.substr(a,2)===k?(o=k,a+=2):(o=e,A===0&&M(mr)),o!==e?(z=s,s=sa()):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function us(){var s,u,p,o,g,v=a*77+3,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,u=[],p=f();p!==e;)u.push(p),p=f();for(p=xn(),p===e&&(p=null),o=[],g=f();g!==e;)o.push(g),g=f();return z=s,s=nl(p),T[v]={nextPos:a,result:s},s}function xn(){var s,u,p,o,g,v,m,w,_=a*77+4,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Re(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=o,o=mn(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Re(),w!==e?(z=o,o=mn(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=al(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function bn(){var s,u,p,o,g,v,m,w,_=a*77+5,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Dr(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=o,o=$n(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Dr(),w!==e?(z=o,o=$n(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=il(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function fr(){var s,u,p,o,g,v,m,w,_=a*77+6,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Lr(),u!==e){for(p=[],o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Lr(),w!==e?(z=o,o=na(u,w)):(a=o,o=e)}else a=o,o=e;for(;o!==e;){for(p.push(o),o=a,g=[],v=y();v!==e;)g.push(v),v=y();if(v=ne(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=Lr(),w!==e?(z=o,o=na(u,w)):(a=o,o=e)}else a=o,o=e}z=s,s=ll(u,p)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Re(){var s,u=a*77+7,p=T[u];return p?(a=p.nextPos,p.result):(s=Ea(),s===e&&(s=fu(),s===e&&(s=Lr())),T[u]={nextPos:a,result:s},s)}function Dr(){var s,u=a*77+8,p=T[u];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=qt(),s===e&&(s=Ea())),T[u]={nextPos:a,result:s},s)}function Lr(){var s,u=a*77+9,p=T[u];return p?(a=p.nextPos,p.result):(s=Ma(),s===e&&(s=qt(),s===e&&(s=cu(),s===e&&(s=gu(),s===e&&(s=hu(),s===e&&(s=pu(),s===e&&(s=vu(),s===e&&(s=du(),s===e&&(s=yu(),s===e&&(s=br(),s===e&&(s=Sa(),s===e&&(s=Te()))))))))))),T[u]={nextPos:a,result:s},s)}function Te(){var s,u=a*77+10,p=T[u];return p?(a=p.nextPos,p.result):(s=wu(),s===e&&(s=os()),T[u]={nextPos:a,result:s},s)}function os(){var s,u=a*77+11,p=T[u];return p?(a=p.nextPos,p.result):(s=xu(),s===e&&(s=Pu(),s===e&&(s=Fa(),s===e&&(s=Pa()))),T[u]={nextPos:a,result:s},s)}function Pa(){var s,u,p,o,g,v,m=a*77+12,w=T[m];if(w)return a=w.nextPos,w.result;if(s=Oa(),s===e&&(s=Ta(),s===e&&(s=Ia(),s===e&&(s=qs(),s===e&&(s=En(),s===e&&(s=La(),s===e&&(s=Ha(),s===e&&(s=Fn(),s===e&&(s=Ua(),s===e&&(s=ku(),s===e&&(s=mu(),s===e&&(s=ja(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Et)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Te(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e?(z=s,s=ul(o)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function xr(){var s,u=a*77+13,p=T[u];return p?(a=p.nextPos,p.result):(s=La(),s===e&&(s=En(),s===e&&(s=Ha(),s===e&&(s=Eu(),s===e&&(s=Mu(),s===e&&(s=Fn()))))),T[u]={nextPos:a,result:s},s)}function Ea(){var s,u,p,o,g,v,m,w,_,P,I=a*77+14,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===j?(u=j,a+=2):(u=e,A===0&&M(sr)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(t.charCodeAt(a)===123?(v=D,a++):(v=e,A===0&&M(Ye)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=bn(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();t.charCodeAt(a)===125?(P=V,a++):(P=e,A===0&&M(Ht)),P!==e?(z=s,s=ol(o,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function fu(){var s,u,p,o,g,v,m=a*77+15,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===pe?(u=pe,a+=3):(u=e,A===0&&M(jr)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Ue(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=xr(),v!==e?(z=s,s=fl(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===pe?(u=pe,a+=3):(u=e,A===0&&M(jr)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();o=xr(),o!==e?(z=s,s=cl(o)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ma(){var s,u,p,o,g,v,m,w,_,P=a*77+16,I=T[P];if(I)return a=I.nextPos,I.result;if(s=a,t.substr(a,3)===ee?(u=ee,a+=3):(u=e,A===0&&M(dt)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ie,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=ke,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=hl(o,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===H?(u=H,a+=3):(u=e,A===0&&M(Pi)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===58?(m=ie,a++):(m=e,A===0&&M(yt)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=He(),_!==e?g=_:(a=g,g=e)}else a=g,g=e;for(g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===61?(m=ke,a++):(m=e,A===0&&M(ns)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();_=Te(),_!==e?(z=s,s=pl(o,g,_)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[P]={nextPos:a,result:s},s}function cu(){var s,u,p,o,g=a*77+17,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===L?(u=L,a+=2):(u=e,A===0&&M(Ei)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();o=Te(),o!==e?(z=s,s=vl(o)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function hu(){var s,u,p,o,g,v,m,w=a*77+18,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,2)===B?(u=B,a+=2):(u=e,A===0&&M(ks)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Ue(),o!==e){for(g=a,v=[],m=f();m!==e;)v.push(m),m=f();for(m=xr(),m!==e?g=m:(a=g,g=e),g===e&&(g=null),v=[],m=f();m!==e;)v.push(m),m=f();t.charCodeAt(a)===93?(m=q,a++):(m=e,A===0&&M(as)),m!==e?(z=s,s=gl(o,g)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function pu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+19,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.substr(a,4)===J?(u=J,a+=4):(u=e,A===0&&M(mt)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();for(t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e)if(t.charCodeAt(a)===41?(R=F,a++):(R=e,A===0&&M($r)),R!==e){for(Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();ye=be(),ye!==e?(z=s,s=dl(m,I,ye)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===J?(u=J,a+=4):(u=e,A===0&&M(mt)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(P=Te(),P!==e){if(I=[],R=f(),R!==e)for(;R!==e;)I.push(R),R=f();else I=e;I!==e?(R=be(),R!==e?(z=s,s=yl(v,P,R)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function vu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke=a*77+20,Je=T[Ke];if(Je)return a=Je.nextPos,Je.result;if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(t.substr(a,3)===ee?(g=ee,a+=3):(g=e,A===0&&M(dt)),g!==e){if(v=[],m=f(),m!==e)for(;m!==e;)v.push(m),m=f();else v=e;if(v!==e)if(m=Ue(),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=a,t.charCodeAt(a)===61?(P=ke,a++):(P=e,A===0&&M(ns)),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();R=Te(),R!==e?(z=_,_=wl(m,R)):(a=_,_=e)}else a=_,_=e;for(_===e&&(_=null),t.charCodeAt(a)===44?(P=G,a++):(P=e,A===0&&M(pt)),P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();if(R=Te(),R!==e)if(t.charCodeAt(a)===41?(Z=F,a++):(Z=e,A===0&&M($r)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=be(),re!==e?(z=s,s=ml(m,_,R,re)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(o=ee,a+=3):(o=e,A===0&&M(dt)),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(_=ke,a++):(_=e,A===0&&M(ns)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=Te(),I!==e?(z=w,w=$l(v,I)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(_=G,a++):(_=e,A===0&&M(pt)),_===e&&(_=null),P=[],I=f();I!==e;)P.push(I),I=f();if(I=Te(),I!==e){if(R=[],Z=f(),Z!==e)for(;Z!==e;)R.push(Z),Z=f();else R=e;R!==e?(Z=be(),Z!==e?(z=s,s=xl(v,w,I,Z)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===40?(o=E,a++):(o=e,A===0&&M(Et)),o!==e)if(g=Te(),g!==e)if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();w=be(),w!==e?(z=s,s=bl(g,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===Q?(u=Q,a+=3):(u=e,A===0&&M(Ps)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Te(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;g!==e?(v=be(),v!==e?(z=s,s=Al(o,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return T[Ke]={nextPos:a,result:s},s}function gu(){var s,u,p,o,g,v=a*77+21,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,6)===X?(u=X,a+=6):(u=e,A===0&&M(ur)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();g=Te(),g!==e?(z=s,s=Cl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function du(){var s,u,p,o,g,v,m,w,_=a*77+22,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===$e?(u=$e,a+=4):(u=e,A===0&&M(Mi)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Ht)),w!==e?(z=s,s=_l(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function yu(){var s,u,p,o,g=a*77+23,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Pe?(u=Pe,a+=5):(u=e,A===0&&M(Si)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=kl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function br(){var s,u,p,o,g=a*77+24,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===ge?(u=ge,a+=8):(u=e,A===0&&M(Fi)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=aa()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sa(){var s,u,p,o,g,v,m=a*77+25,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Te(),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.substr(a,2)===qe?(o=qe,a+=2):(o=e,A===0&&M(Ni)),o===e&&(t.substr(a,2)===it?(o=it,a+=2):(o=e,A===0&&M(Jn)),o===e&&(t.charCodeAt(a)===61?(o=ke,a++):(o=e,A===0&&M(ns)))),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();v=Te(),v!==e?(z=s,s=Pl(u,o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function wu(){var s,u,p,o,g,v,m,w,_=a*77+26,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=os(),u!==e){for(p=[],o=a,g=[],v=Ar();v!==e;)g.push(v),v=Ar();if(v=An(),v!==e){for(m=[],w=Ar();w!==e;)m.push(w),w=Ar();w=os(),w!==e?(z=o,o=ia(u,v,w)):(a=o,o=e)}else a=o,o=e;if(o!==e)for(;o!==e;){for(p.push(o),o=a,g=[],v=Ar();v!==e;)g.push(v),v=Ar();if(v=An(),v!==e){for(m=[],w=Ar();w!==e;)m.push(w),w=Ar();w=os(),w!==e?(z=o,o=ia(u,v,w)):(a=o,o=e)}else a=o,o=e}else p=e;p!==e?(z=s,s=El(u,p)):(a=s,s=e)}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ar(){var s,u,p,o=a*77+27,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(u=Zt,a++):(u=e,A===0&&M(Zn)),u!==e?(p=ne(),p!==e?(u=[u,p],s=u):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),T[o]={nextPos:a,result:s},s)}function An(){var s,u,p=a*77+28,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===lt?(u=lt,a+=2):(u=e,A===0&&M(Oi)),u===e&&(t.substr(a,2)===ut?(u=ut,a+=2):(u=e,A===0&&M(Ti)),u===e&&(t.substr(a,2)===Ie?(u=Ie,a+=2):(u=e,A===0&&M(Ii)),u===e&&(t.substr(a,2)===at?(u=at,a+=2):(u=e,A===0&&M(ji)),u===e&&(t.substr(a,2)===St?(u=St,a+=2):(u=e,A===0&&M(Ri)),u===e&&(t.substr(a,2)===Ft?(u=Ft,a+=2):(u=e,A===0&&M(Gn)),u===e&&(t.charCodeAt(a)===60?(u=Qe,a++):(u=e,A===0&&M(gn)),u===e&&(t.charCodeAt(a)===62?(u=Nr,a++):(u=e,A===0&&M(Qn)),u===e&&(t.charCodeAt(a)===43?(u=Lt,a++):(u=e,A===0&&M(Di)),u===e&&(t.charCodeAt(a)===45?(u=wr,a++):(u=e,A===0&&M(Xn)),u===e&&(t.charCodeAt(a)===42?(u=Pt,a++):(u=e,A===0&&M(Yn)),u===e&&(t.charCodeAt(a)===94?(u=dr,a++):(u=e,A===0&&M(Li)),u===e&&(t.charCodeAt(a)===47?(u=Or,a++):(u=e,A===0&&M(Bi)),u===e&&(t.charCodeAt(a)===37?(u=kr,a++):(u=e,A===0&&M(Hi))))))))))))))),u!==e&&(z=s,u=Ml()),s=u,T[p]={nextPos:a,result:s},s)}function mu(){var s,u,p,o=a*77+29,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===33?(u=Mr,a++):(u=e,A===0&&M(dn)),u!==e?(p=Te(),p!==e?(z=s,s=Sl(p)):(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function Fa(){var s,u,p,o,g=a*77+30,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,u=Pa(),u!==e){if(p=[],o=Cn(),o===e&&(o=Na(),o===e&&(o=Us())),o!==e)for(;o!==e;)p.push(o),o=Cn(),o===e&&(o=Na(),o===e&&(o=Us()));else p=e;p!==e?(z=s,s=la(u,p)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function Cn(){var s,u,p,o,g,v,m=a*77+31,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(u=E,a++):(u=e,A===0&&M(Et)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=$u(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e?(z=s,s=Fl(o)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function $u(){var s,u,p,o,g,v,m=a*77+32,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Te(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=Te(),v!==e?(z=o,o=ua(u,v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=Te(),v!==e?(z=o,o=ua(u,v)):(a=o,o=e)):(a=o,o=e);z=s,s=Nl(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Na(){var s,u,p,o,g,v,m=a*77+33,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=Te(),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Ol(o)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Us(){var s,u,p,o=a*77+34,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===46?(u=U,a++):(u=e,A===0&&M(yn)),u!==e?(p=Ue(),p!==e?(z=s,s=Tl(p)):(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function xu(){var s,u,p,o,g,v,m,w,_,P,I=a*77+35,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===K?(u=K,a+=2):(u=e,A===0&&M(Ui)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;if(p!==e)if(o=Te(),o!==e){if(g=[],v=f(),v!==e)for(;v!==e;)g.push(v),v=f();else g=e;if(g!==e)if(v=be(),v!==e){if(m=a,w=[],_=f(),_!==e)for(;_!==e;)w.push(_),_=f();else w=e;if(w!==e?(_=bu(),_!==e?m=_:(a=m,m=e)):(a=m,m=e),m===e&&(m=null),w=a,_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;_!==e?(P=Au(),P!==e?w=P:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),z=s,s=Il(o,v,m,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function bu(){var s,u,p,o,g,v,m=a*77+36,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=_n(),u!==e){for(p=[],o=a,g=[],v=f();v!==e;)g.push(v),v=f();for(v=_n(),v!==e?o=v:(a=o,o=e);o!==e;){for(p.push(o),o=a,g=[],v=f();v!==e;)g.push(v),v=f();v=_n(),v!==e?o=v:(a=o,o=e)}z=s,s=jl(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function _n(){var s,u,p,o,g,v,m,w=a*77+37,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,t.substr(a,4)===te?(u=te,a+=4):(u=e,A===0&&M(qi)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=be(),m!==e?(z=s,s=oa(g,m)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[w]={nextPos:a,result:s},s}function Au(){var s,u,p,o,g,v=a*77+38,m=T[v];if(m)return a=m.nextPos,m.result;if(s=a,t.substr(a,4)===ce?(u=ce,a+=4):(u=e,A===0&&M(zi)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();g=be(),g!==e?(z=s,s=Rl(g)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[v]={nextPos:a,result:s},s}function Oa(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,On=a*77+39,fs=T[On];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.substr(a,5)===he?(u=he,a+=5):(u=e,A===0&&M(Es)),u!==e)if(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();if(g=Te(),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();if(t.charCodeAt(a)===123?(m=D,a++):(m=e,A===0&&M(Ye)),m!==e){for(w=[],_=f();_!==e;)w.push(_),_=f();if(_=[],P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;if(P!==e)for(;P!==e;)if(_.push(P),P=a,I=Te(),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();z=P,P=fa(g,I,re)}else a=P,P=e}else a=P,P=e}else a=P,P=e;else _=e;if(_!==e){if(P=a,t.charCodeAt(a)===42?(I=Pt,a++):(I=e,A===0&&M(Yn)),I!==e){for(R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.substr(a,2)===le?(Z=le,a+=2):(Z=e,A===0&&M(Ms)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();if(re=be(),re!==e){for(Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();P=re}else a=P,P=e}else a=P,P=e}else a=P,P=e;for(P===e&&(P=null),I=[],R=f();R!==e;)I.push(R),R=f();t.charCodeAt(a)===125?(R=V,a++):(R=e,A===0&&M(Ht)),R!==e?(z=s,s=Dl(g,_,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return T[On]={nextPos:a,result:s},s}function Ta(){var s,u,p,o,g,v,m,w,_=a*77+40,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,t.substr(a,4)===Oe?(u=Oe,a+=4):(u=e,A===0&&M(Ss)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(t.charCodeAt(a)===123?(o=D,a++):(o=e,A===0&&M(Ye)),o!==e){for(g=[],v=f();v!==e;)g.push(v),v=f();if(v=fr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();t.charCodeAt(a)===125?(w=V,a++):(w=e,A===0&&M(Ht)),w!==e?(z=s,s=Ll(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[_]={nextPos:a,result:s},s}function Ia(){var s,u,p,o,g=a*77+41,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===de?(u=de,a+=6):(u=e,A===0&&M(Wi)),u!==e){if(p=[],o=f(),o!==e)for(;o!==e;)p.push(o),o=f();else p=e;p!==e?(o=ja(),o!==e?(z=s,s=Bl(o)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function ja(){var s,u,p=a*77+42,o=T[p];return o?(a=o.nextPos,o.result):(s=a,u=za(),u!==e&&(z=s,u=ca(u)),s=u,T[p]={nextPos:a,result:s},s)}function qs(){var s,u,p,o,g,v,m=a*77+43,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(u=we,a++):(u=e,A===0&&M(Fs)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===96?(v=we,a++):(v=e,A===0&&M(Fs)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=kn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===96?(o=we,a++):(o=e,A===0&&M(Fs)),o!==e?(z=s,s=Hl(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function kn(){var s,u,p,o,g,v,m=a*77+44,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Te(),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Ht)),v!==e?s=o:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,u=[],p=Pn(),p!==e)for(;p!==e;)u.push(p),p=Pn();else u=e;u!==e&&(z=s,u=ha(u)),s=u}return T[m]={nextPos:a,result:s},s}function Pn(){var s,u=a*77+45,p=T[u];return p?(a=p.nextPos,p.result):(s=Ra(),s===e&&(_s.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Ns))),T[u]={nextPos:a,result:s},s)}function Ra(){var s,u,p,o=a*77+46,g=T[o];return g?(a=g.nextPos,g.result):(s=a,t.charCodeAt(a)===92?(u=Zt,a++):(u=e,A===0&&M(Zn)),u!==e?(Vr.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,A===0&&M(Os)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),T[o]={nextPos:a,result:s},s)}function En(){var s,u,p,o,g,v,m=a*77+47,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(u=oe,a++):(u=e,A===0&&M(Ts)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===34?(v=oe,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=pa(v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===34?(v=oe,a++):(v=e,A===0&&M(Ts)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Da(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=pa(v)):(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===34?(o=oe,a++):(o=e,A===0&&M(Ts)),o!==e?(z=s,s=Ul(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(u=De,a++):(u=e,A===0&&M(Is)),u!==e){for(p=[],o=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=va(v)):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=a,A++,t.charCodeAt(a)===39?(v=De,a++):(v=e,A===0&&M(Is)),A--,v===e?g=void 0:(a=g,g=e),g!==e?(v=Mn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,A===0&&M(rr))),v!==e?(z=o,o=va(v)):(a=o,o=e)):(a=o,o=e);t.charCodeAt(a)===39?(o=De,a++):(o=e,A===0&&M(Is)),o!==e?(z=s,s=ql(p)):(a=s,s=e)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Da(){var s,u,p=a*77+48,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===je?(u=je,a+=2):(u=e,A===0&&M(js)),u!==e&&(z=s,u=zl()),s=u,T[p]={nextPos:a,result:s},s)}function Mn(){var s,u,p=a*77+49,o=T[p];return o?(a=o.nextPos,o.result):(s=a,t.substr(a,2)===Be?(u=Be,a+=2):(u=e,A===0&&M(ea)),u!==e&&(z=s,u=Wl()),s=u,T[p]={nextPos:a,result:s},s)}function La(){var s,u=a*77+50,p=T[u];return p?(a=p.nextPos,p.result):(s=Cu(),s===e&&(s=Ba()),T[u]={nextPos:a,result:s},s)}function Cu(){var s,u,p,o,g,v,m=a*77+51,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),ht.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ta)),u!==e){if(p=[],jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)for(;o!==e;)p.push(o),jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(o=U,a++):(o=e,A===0&&M(yn)),o!==e){if(g=[],jt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr)),v!==e)for(;v!==e;)g.push(v),jt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,A===0&&M(nr));else g=e;g!==e?(z=s,s=Vl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),jt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e)if(t.charCodeAt(a)===46?(p=U,a++):(p=e,A===0&&M(yn)),p!==e){if(o=[],jt.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr)),g!==e)for(;g!==e;)o.push(g),jt.test(t.charAt(a))?(g=t.charAt(a),a++):(g=e,A===0&&M(nr));else o=e;o!==e?(z=s,s=Kl()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return T[m]={nextPos:a,result:s},s}function Ba(){var s,u,p,o,g=a*77+52,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),ht.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(ta)),u!==e){if(p=[],jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr)),o!==e)for(;o!==e;)p.push(o),jt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(nr));else p=e;p!==e?(z=s,s=Jl()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Ot.test(t.charAt(a))?(t.charAt(a),a++):A===0&&M(Mt),jt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(nr)),u!==e?(z=s,s=Zl()):(a=s,s=e)),T[g]={nextPos:a,result:s},s}function Ha(){var s,u=a*77+53,p=T[u];return p?(a=p.nextPos,p.result):(s=_u(),s===e&&(s=Sn()),T[u]={nextPos:a,result:s},s)}function _u(){var s,u,p,o,g=a*77+54,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(u=We,a+=4):(u=e,A===0&&M(Vi)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=ga()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Sn(){var s,u,p,o,g=a*77+55,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(u=Ze,a+=5):(u=e,A===0&&M(Rs)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=Gl()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Fn(){var s,u,p,o,g=a*77+56,v=T[g];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===rt?(u=rt,a+=4):(u=e,A===0&&M(Ki)),u!==e?(p=a,A++,Gt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(or)),A--,o===e?p=void 0:(a=p,p=e),p!==e?(z=s,s=da()):(a=s,s=e)):(a=s,s=e),T[g]={nextPos:a,result:s},s)}function Ua(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+57,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=Te(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ya(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Ht)),g!==e?(z=s,s=Ql(o)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function ku(){var s,u,p,o,g,v,m,w,_,P,I=a*77+58,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Te(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=wa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=Xl(o)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Nn(){var s,u,p,o,g,v,m,w=a*77+59,_=T[w];if(_)return a=_.nextPos,_.result;if(s=a,u=Ue(),u!==e){for(p=a,o=[],g=f();g!==e;)o.push(g),g=f();if(t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e){for(v=[],m=f();m!==e;)v.push(m),m=f();m=He(),m!==e?p=m:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),z=s,s=Yl(u,p)}else a=s,s=e;return T[w]={nextPos:a,result:s},s}function qa(){var s,u,p,o,g,v,m=a*77+60,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Nn(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=Nn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=Nn(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);z=s,s=ma(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function qt(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re,Ke,Je,On=a*77+61,fs=T[On];if(fs)return a=fs.nextPos,fs.result;if(s=a,t.charCodeAt(a)===64?(u=wt,a++):(u=e,A===0&&M(Ji)),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(o=Ue(),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(t.charCodeAt(a)===40?(v=E,a++):(v=e,A===0&&M(Et)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(w=qa(),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();if(t.charCodeAt(a)===41?(P=F,a++):(P=e,A===0&&M($r)),P!==e){for(I=a,R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===58?(Z=ie,a++):(Z=e,A===0&&M(yt)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();re=He(),re!==e?I=re:(a=I,I=e)}else a=I,I=e;for(I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();if(t.charCodeAt(a)===123?(Z=D,a++):(Z=e,A===0&&M(Ye)),Z!==e){for(ye=[],re=f();re!==e;)ye.push(re),re=f();for(re=fr(),re===e&&(re=null),Ke=[],Je=f();Je!==e;)Ke.push(Je),Je=f();t.charCodeAt(a)===125?(Je=V,a++):(Je=e,A===0&&M(Ht)),Je!==e?(z=s,s=eu(p,o,g,w,I,re)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[On]={nextPos:a,result:s},s}function Pu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=a*77+62,re=T[ye];if(re)return a=re.nextPos,re.result;if(s=a,t.substr(a,2)===Bt?(u=Bt,a+=2):(u=e,A===0&&M(wn)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=qa(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=a,w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===58?(_=ie,a++):(_=e,A===0&&M(yt)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();I=He(),I!==e?m=I:(a=m,m=e)}else a=m,m=e;for(m===e&&(m=null),w=[],_=f();_!==e;)w.push(_),_=f();if(t.charCodeAt(a)===123?(_=D,a++):(_=e,A===0&&M(Ye)),_!==e){for(P=[],I=f();I!==e;)P.push(I),I=f();for(I=fr(),I===e&&(I=null),R=[],Z=f();Z!==e;)R.push(Z),Z=f();t.charCodeAt(a)===125?(Z=V,a++):(Z=e,A===0&&M(Ht)),Z!==e?(z=s,s=$a(o,m,I)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[ye]={nextPos:a,result:s},s}function Eu(){var s,u,p,o,g,v,m,w,_,P,I=a*77+63,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.charCodeAt(a)===91?(u=Nt,a++):(u=e,A===0&&M(is)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=xr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=xr(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();for(t.charCodeAt(a)===44?(w=G,a++):(w=e,A===0&&M(pt)),w===e&&(w=null),_=[],P=f();P!==e;)_.push(P),P=f();z=g,g=xa(v)}else a=g,g=e;for(g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===93?(v=q,a++):(v=e,A===0&&M(as)),v!==e?(z=s,s=tu(o)):(a=s,s=e)}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Mu(){var s,u,p,o,g,v,m,w,_,P,I,R,Z,ye,re=a*77+64,Ke=T[re];if(Ke)return a=Ke.nextPos,Ke.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();if(o=[],g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=xr(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;for(;g!==e;)if(o.push(g),g=a,v=Ue(),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.charCodeAt(a)===58?(w=ie,a++):(w=e,A===0&&M(yt)),w!==e){if(_=[],P=f(),P!==e)for(;P!==e;)_.push(P),P=f();else _=e;if(_!==e)if(P=xr(),P!==e){for(I=[],R=f();R!==e;)I.push(R),R=f();for(t.charCodeAt(a)===44?(R=G,a++):(R=e,A===0&&M(pt)),R===e&&(t.charCodeAt(a)===59?(R=st,a++):(R=e,A===0&&M(ls))),R===e&&(R=null),Z=[],ye=f();ye!==e;)Z.push(ye),ye=f();z=g,g=ba(v,P)}else a=g,g=e;else a=g,g=e}else a=g,g=e}else a=g,g=e;t.charCodeAt(a)===125?(g=V,a++):(g=e,A===0&&M(Ht)),g!==e?(z=s,s=ru(o)):(a=s,s=e)}else a=s,s=e;return T[re]={nextPos:a,result:s},s}function He(){var s,u=a*77+65,p=T[u];return p?(a=p.nextPos,p.result):(s=Su(),s===e&&(s=It()),T[u]={nextPos:a,result:s},s)}function Su(){var s,u,p,o,g,v,m,w,_,P,I=a*77+66,R=T[I];if(R)return a=R.nextPos,R.result;if(s=a,t.substr(a,2)===Bt?(u=Bt,a+=2):(u=e,A===0&&M(wn)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=Br(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();if(t.charCodeAt(a)===41?(v=F,a++):(v=e,A===0&&M($r)),v!==e){for(m=[],w=f();w!==e;)m.push(w),w=f();if(t.substr(a,2)===le?(w=le,a+=2):(w=e,A===0&&M(Ms)),w!==e){for(_=[],P=f();P!==e;)_.push(P),P=f();P=He(),P!==e?(z=s,s=su(o,P)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return T[I]={nextPos:a,result:s},s}function Br(){var s,u,p,o,g,v,m=a*77+67,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=He(),u!==e){for(p=[],o=a,g=x(),g!==e?(v=He(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,g=x(),g!==e?(v=He(),v!==e?o=v:(a=o,o=e)):(a=o,o=e);z=s,s=nu(u,p)}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function It(){var s,u,p,o,g,v,m,w,_=a*77+68,P=T[_];if(P)return a=P.nextPos,P.result;if(s=a,u=Ue(),u!==e){for(p=[],o=y();o!==e;)p.push(o),o=y();if(t.charCodeAt(a)===60?(o=Qe,a++):(o=e,A===0&&M(gn)),o!==e){for(g=[],v=y();v!==e;)g.push(v),v=y();if(v=He(),v!==e){for(m=[],w=y();w!==e;)m.push(w),w=y();t.charCodeAt(a)===62?(w=Nr,a++):(w=e,A===0&&M(Qn)),w!==e?(z=s,s=au(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,u=Ue(),u!==e&&(z=s,u=iu(u)),s=u),T[_]={nextPos:a,result:s},s}function Ue(){var s,u,p,o,g=a*77+69,v=T[g];if(v)return a=v.nextPos,v.result;if(s=a,Vn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,A===0&&M(Zi)),u!==e){for(p=[],Kn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ra));o!==e;)p.push(o),Kn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,A===0&&M(ra));z=s,s=i()}else a=s,s=e;return T[g]={nextPos:a,result:s},s}function za(){var s,u,p,o,g,v,m=a*77+70,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,u=Ue(),u!==e){for(p=[],o=a,t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);o!==e;)p.push(o),o=a,t.charCodeAt(a)===58?(g=ie,a++):(g=e,A===0&&M(yt)),g!==e?(v=Ue(),v!==e?(g=[g,v],o=g):(a=o,o=e)):(a=o,o=e);z=s,s=W()}else a=s,s=e;return T[m]={nextPos:a,result:s},s}function x(){var s,u,p,o,g,v=a*77+71,m=T[v];if(m)return a=m.nextPos,m.result;for(s=a,u=[],p=f();p!==e;)u.push(p),p=f();if(t.charCodeAt(a)===44?(p=G,a++):(p=e,A===0&&M(pt)),p!==e){for(o=[],g=f();g!==e;)o.push(g),g=f();u=[u,p,o],s=u}else a=s,s=e;if(s===e)if(s=[],u=f(),u!==e)for(;u!==e;)s.push(u),u=f();else s=e;return T[v]={nextPos:a,result:s},s}function be(){var s,u,p,o,g,v,m=a*77+72,w=T[m];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(u=D,a++):(u=e,A===0&&M(Ye)),u!==e){for(p=[],o=f();o!==e;)p.push(o),o=f();for(o=fr(),o===e&&(o=null),g=[],v=f();v!==e;)g.push(v),v=f();t.charCodeAt(a)===125?(v=V,a++):(v=e,A===0&&M(Ht)),v!==e?(z=s,s=Ds(o)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Lr()),T[m]={nextPos:a,result:s},s}function ne(){var s,u=a*77+73,p=T[u];return p?(a=p.nextPos,p.result):(t.substr(a,2)===bt?(s=bt,a+=2):(s=e,A===0&&M(Gi)),s===e&&(Ci.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Qi))),T[u]={nextPos:a,result:s},s)}function l(){var s,u,p=a*77+74,o=T[p];return o?(a=o.nextPos,o.result):(s=a,A++,t.length>a?(u=t.charAt(a),a++):(u=e,A===0&&M(rr)),A--,u===e?s=void 0:(a=s,s=e),s===e&&(s=ne()),T[p]={nextPos:a,result:s},s)}function f(){var s,u=a*77+75,p=T[u];return p?(a=p.nextPos,p.result):(_i.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Xi)),T[u]={nextPos:a,result:s},s)}function y(){var s,u=a*77+76,p=T[u];return p?(a=p.nextPos,p.result):(tr.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,A===0&&M(Yi)),T[u]={nextPos:a,result:s},s)}function c(s,u,p){const o={type:s};u.children=p;for(const v of Object.keys(u))u[v]!==void 0&&(o[v]=u[v]);const g=Ut();return o.loc={start:g.start.offset,end:g.end.offset-1},o}if(Ls=d(),Ls!==e&&a===t.length)return Ls;throw Ls!==e&&a<t.length&&M(S()),uu(Rr,N<t.length?t.charAt(N):null,N<t.length?Hs(N,N+1):Hs(N,N))}const O$=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function T$(t){return O$.includes(t.type)}function Wg(t){return"chain"in t&&t.chain!==null}function I$(t,r,e){return{type:"call",target:t,args:r,loc:e}}function j$(t,r,e){return{type:"index",target:t,index:r,loc:e}}function R$(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function tt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=tt(e.expr,r);break}case"return":{e.expr=tt(e.expr,r);break}case"each":{e.items=tt(e.items,r),e.for=tt(e.for,r);break}case"for":{e.from!=null&&(e.from=tt(e.from,r)),e.to!=null&&(e.to=tt(e.to,r)),e.times!=null&&(e.times=tt(e.times,r)),e.for=tt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=tt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=tt(e.expr,r),e.dest=tt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=tt(e.operands[n],r);break}case"not":{e.expr=tt(e.expr,r);break}case"if":{e.cond=tt(e.cond,r),e.then=tt(e.then,r);for(const n of e.elseif)n.cond=tt(n.cond,r),n.then=tt(n.then,r);e.else!=null&&(e.else=tt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=tt(e.children[n],r);break}case"match":{e.about=tt(e.about,r);for(const n of e.qs)n.q=tt(n.q,r),n.a=tt(n.a,r);e.default!=null&&(e.default=tt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=tt(e.statements[n],r);break}case"exists":{e.identifier=tt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=tt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],tt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=tt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=tt(e.args[n],r);break}case"indexChain":{e.index=tt(e.index,r);break}case"call":{e.target=tt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=tt(e.args[n],r);break}case"index":{e.target=tt(e.target,r),e.index=tt(e.index,r);break}case"prop":{e.target=tt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=tt(e.members[n],r);break}case"or":case"and":{e.left=tt(e.left,r),e.right=tt(e.right,r);break}}if(Wg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=tt(e.chain[n],r);return e}const Lc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Bc(t){throw new so(`Reserved word "${t}" cannot be used as variable name.`)}function D$(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Lc.includes(t.name)&&Bc(t.name);break}case"meta":{t.name!=null&&Lc.includes(t.name)&&Bc(t.name);break}case"fn":{for(const r of t.args)Lc.includes(r.name)&&Bc(r.name);break}}return t}function L$(t){for(const r of t)tt(r,D$);return t}function yv(t){return{type:"simple",name:t}}function B$(t,r){return{type:"generic",name:t,inners:r}}function H$(t,r){return{type:"fn",args:t,result:r}}function jf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=jf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>jf(n)).join(", "),e=jf(t.result);return`@(${r}) { ${e} }`}}}function Po(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return yv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Po(t.inner):r=yv("any"),B$(t.name,[r])}}throw new so(`Unknown type: '${jf(t)}'`)}else{const r=t.args.map(e=>Po(e));return H$(r,Po(t.result))}}function U$(t){switch(t.type){case"def":{t.varType!=null&&Po(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Po(r.argType);t.retType!=null&&Po(t.retType);break}}return t}function q$(t){for(const r of t)tt(r,U$);return t}function Rf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Rf(n.expr.children)),r.push(n);else{if(e.length>0)throw new so("invalid attribute.");switch(n.type){case"fn":{n.children=Rf(n.children);break}case"block":{n.statements=Rf(n.statements);break}}r.push(n)}if(e.length>0)throw new so("invalid attribute.");return r}function z$(t){if(T$(t)&&Wg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=I$(n,h.args,h.loc);break}case"indexChain":{n=j$(n,h.index,h.loc);break}case"propChain":{n=R$(n,h.name,h.loc);break}}return n}return t}function W$(t){for(let r=0;r<t.length;r++)t[r]=tt(t[r],z$);return t}function Df(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Df(t,r,e);{const{left:n,right:h,info:d}=t;return Df(n,Vg(h,r,e),d)}}function Hu(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Hu(t.left),Hu(t.right)]}}const V$={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Hu(t.left),right:Hu(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Hu(t.left),right:Hu(t.right)}),priority:3}};function K$(t){const r=t.operators.map(n=>{const h=V$[n];if(h==null)throw new so(`No such operator: ${n}.`);return h});let e=Df(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Vg(e,t.operands[2+n],r[1+n]);return Hu(e)}function J$(t){for(let r=0;r<t.length;r++)t[r]=tt(t[r],e=>e.type==="infix"?K$(e):e);return t}var Ja;let Z$=(Ja=class{constructor(){me(this,"plugins");this.plugins={validate:[L$,q$],transform:[Rf,W$,J$]}}static parse(r){return Ja.instance==null&&(Ja.instance=new Ja),Ja.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=dv(r,{startRule:"Preprocess"});e=dv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new so(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new so(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Ja,"instance"),Ja);const G$="0.16.0",Q$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Ch=[],zo=null;function X$(t){return Ch=Z$.parse(t),JSON.stringify(Ch,null,"	")}async function Y$(t){zo==null||zo.abort(),zo=new ss({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:xh(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:xh(e.val,!0),print:!1});break}}});try{await zo.exec(Ch)}catch(r){t.err(r)}}const ex=Object.freeze(Object.defineProperty({__proto__:null,exec:Y$,parse:X$,samples:Q$,version:G$},Symbol.toStringTag,{value:"Module"}));function Lf(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lf=function(e){return typeof e}:Lf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function Kg(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Lf(n)));var h=!1;return{configurable:!0,get:function(){if(h||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var $=n.bind(this);return h=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return $},set:function(k){n=k,delete this[r]}}),h=!1,$},set:function($){n=$}}}function tx(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,Kg(t,e,n))}}),t}function ct(){return arguments.length===1?tx.apply(void 0,arguments):Kg.apply(void 0,arguments)}let Jg=class Zg extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Zg)}},no=class extends Jg{constructor(r,e){super(r,e)}},Yt=class extends Jg{constructor(r,e){super(r,e)}},rx=class extends Yt{constructor(r,e){super(r,e)}};var uo=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};let Ai=class Gg{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Gg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Yt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Yt(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Yt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};uo([ct],Ai.prototype,"log",null);uo([ct],Ai.prototype,"onUpdated",null);uo([ct],Ai.prototype,"createChildScope",null);uo([ct],Ai.prototype,"get",null);uo([ct],Ai.prototype,"getAll",null);uo([ct],Ai.prototype,"add",null);uo([ct],Ai.prototype,"assign",null);let kf;const sx=new Uint8Array(16);function nx(){if(!kf&&(kf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!kf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kf(sx)}const Ur=[];for(let t=0;t<256;++t)Ur.push((t+256).toString(16).slice(1));function ax(t,r=0){return(Ur[t[r+0]]+Ur[t[r+1]]+Ur[t[r+2]]+Ur[t[r+3]]+"-"+Ur[t[r+4]]+Ur[t[r+5]]+"-"+Ur[t[r+6]]+Ur[t[r+7]]+"-"+Ur[t[r+8]]+Ur[t[r+9]]+"-"+Ur[t[r+10]]+Ur[t[r+11]]+Ur[t[r+12]]+Ur[t[r+13]]+Ur[t[r+14]]+Ur[t[r+15]]).toLowerCase()}const ix=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wv={randomUUID:ix};function lx(t,r,e){if(wv.randomUUID&&!r&&!t)return wv.randomUUID();t=t||{};const n=t.random||(t.rng||nx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return ax(n)}const Rt={type:"null"},on={type:"bool",value:!0},Js={type:"bool",value:!1},Ne=t=>({type:"num",value:t}),Qt=t=>({type:"str",value:t}),Eo=t=>({type:"bool",value:t}),hp=t=>({type:"obj",value:t}),Zr=t=>({type:"arr",value:t}),ux=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ve=t=>({type:"fn",native:t}),ox=t=>({type:"return",value:t}),fx=()=>({type:"break",value:null}),cx=()=>({type:"continue",value:null}),hx=t=>t.type==="return"?t.value:t;function Ys(t){if(t==null)throw new Yt("Expect anything, but got nothing.")}function gs(t){if(t==null)throw new Yt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Yt(`Expect boolean, but got ${t.type}.`)}function pi(t){if(t==null)throw new Yt("Expect function, but got nothing.");if(t.type!=="fn")throw new Yt(`Expect function, but got ${t.type}.`)}function Tr(t){if(t==null)throw new Yt("Expect string, but got nothing.");if(t.type!=="str")throw new Yt(`Expect string, but got ${t.type}.`)}function Ee(t){if(t==null)throw new Yt("Expect number, but got nothing.");if(t.type!=="num")throw new Yt(`Expect number, but got ${t.type}.`)}function ii(t){if(t==null)throw new Yt("Expect object, but got nothing.");if(t.type!=="obj")throw new Yt(`Expect object, but got ${t.type}.`)}function Mo(t){if(t==null)throw new Yt("Expect array, but got nothing.");if(t.type!=="arr")throw new Yt(`Expect array, but got ${t.type}.`)}function px(t){return t.type==="str"}function vx(t){return t.type==="num"}function gx(t){return t.type==="obj"}function dx(t){return t.type==="arr"}function _h(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function kh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>kh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ph(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ph(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Ph(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Eh(t){if(t===null)return Rt;if(typeof t=="boolean")return Eo(t);if(typeof t=="string")return Qt(t);if(typeof t=="number")return Ne(t);if(Array.isArray(t))return Zr(t.map(r=>Eh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Eh(n));return hp(r)}return Rt}const yx={help:Qt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Qt("0.14.1"),"Core:ai":Qt("kawaii"),"Core:not":ve(([t])=>(gs(t),t.value?Js:on)),"Core:eq":ve(([t,r])=>(Ys(t),Ys(r),_h(t,r)?on:Js)),"Core:neq":ve(([t,r])=>(Ys(t),Ys(r),_h(t,r)?Js:on)),"Core:and":ve(([t,r])=>(gs(t),t.value?(gs(r),r.value?on:Js):Js)),"Core:or":ve(([t,r])=>(gs(t),t.value?on:(gs(r),r.value?on:Js))),"Core:add":ve(([t,r])=>(Ee(t),Ee(r),Ne(t.value+r.value))),"Core:sub":ve(([t,r])=>(Ee(t),Ee(r),Ne(t.value-r.value))),"Core:mul":ve(([t,r])=>(Ee(t),Ee(r),Ne(t.value*r.value))),"Core:pow":ve(([t,r])=>{Ee(t),Ee(r);const e=t.value**r.value;if(isNaN(e))throw new Yt("Invalid operation.");return Ne(e)}),"Core:div":ve(([t,r])=>{Ee(t),Ee(r);const e=t.value/r.value;if(isNaN(e))throw new Yt("Invalid operation.");return Ne(e)}),"Core:mod":ve(([t,r])=>(Ee(t),Ee(r),Ne(t.value%r.value))),"Core:gt":ve(([t,r])=>(Ee(t),Ee(r),t.value>r.value?on:Js)),"Core:lt":ve(([t,r])=>(Ee(t),Ee(r),t.value<r.value?on:Js)),"Core:gteq":ve(([t,r])=>(Ee(t),Ee(r),t.value>=r.value?on:Js)),"Core:lteq":ve(([t,r])=>(Ee(t),Ee(r),t.value<=r.value?on:Js)),"Core:type":ve(([t])=>(Ys(t),Qt(t.type))),"Core:to_str":ve(([t])=>(Ys(t),t.type==="str"?t:t.type==="num"?Qt(t.value.toString()):Qt("?"))),"Core:range":ve(([t,r])=>(Ee(t),Ee(r),t.value<r.value?Zr(Array.from({length:r.value-t.value+1},(e,n)=>Ne(n+t.value))):t.value>r.value?Zr(Array.from({length:t.value-r.value+1},(e,n)=>Ne(t.value-n))):Zr([t]))),"Util:uuid":ve(()=>Qt(lx())),"Json:stringify":ve(([t])=>(Ys(t),Qt(JSON.stringify(Ph(t))))),"Json:parse":ve(([t])=>(Tr(t),Eh(JSON.parse(t.value)))),"Json:parsable":ve(([t])=>{Tr(t);try{JSON.parse(t.value)}catch{return Eo(!1)}return Eo(!0)}),"Date:now":ve(()=>Ne(Date.now())),"Date:year":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ve(([t])=>(t&&Ee(t),Ne(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ve(([t])=>(Tr(t),Ne(new Date(t.value).getTime()))),"Math:Infinity":Ne(1/0),"Math:E":Ne(Math.E),"Math:LN2":Ne(Math.LN2),"Math:LN10":Ne(Math.LN10),"Math:LOG2E":Ne(Math.LOG2E),"Math:LOG10E":Ne(Math.LOG10E),"Math:PI":Ne(Math.PI),"Math:SQRT1_2":Ne(Math.SQRT1_2),"Math:SQRT2":Ne(Math.SQRT2),"Math:abs":ve(([t])=>(Ee(t),Ne(Math.abs(t.value)))),"Math:acos":ve(([t])=>(Ee(t),Ne(Math.acos(t.value)))),"Math:acosh":ve(([t])=>(Ee(t),Ne(Math.acosh(t.value)))),"Math:asin":ve(([t])=>(Ee(t),Ne(Math.asin(t.value)))),"Math:asinh":ve(([t])=>(Ee(t),Ne(Math.asinh(t.value)))),"Math:atan":ve(([t])=>(Ee(t),Ne(Math.atan(t.value)))),"Math:atanh":ve(([t])=>(Ee(t),Ne(Math.atanh(t.value)))),"Math:atan2":ve(([t,r])=>(Ee(t),Ee(r),Ne(Math.atan2(t.value,r.value)))),"Math:cbrt":ve(([t])=>(Ee(t),Ne(Math.cbrt(t.value)))),"Math:ceil":ve(([t])=>(Ee(t),Ne(Math.ceil(t.value)))),"Math:clz32":ve(([t])=>(Ee(t),Ne(Math.clz32(t.value)))),"Math:cos":ve(([t])=>(Ee(t),Ne(Math.cos(t.value)))),"Math:cosh":ve(([t])=>(Ee(t),Ne(Math.cosh(t.value)))),"Math:exp":ve(([t])=>(Ee(t),Ne(Math.exp(t.value)))),"Math:expm1":ve(([t])=>(Ee(t),Ne(Math.expm1(t.value)))),"Math:floor":ve(([t])=>(Ee(t),Ne(Math.floor(t.value)))),"Math:fround":ve(([t])=>(Ee(t),Ne(Math.fround(t.value)))),"Math:hypot":ve(([t])=>{Mo(t);const r=[];for(const e of t.value)Ee(e),r.push(e.value);return Ne(Math.hypot(...r))}),"Math:imul":ve(([t,r])=>(Ee(t),Ee(r),Ne(Math.imul(t.value,r.value)))),"Math:log":ve(([t])=>(Ee(t),Ne(Math.log(t.value)))),"Math:log1p":ve(([t])=>(Ee(t),Ne(Math.log1p(t.value)))),"Math:log10":ve(([t])=>(Ee(t),Ne(Math.log10(t.value)))),"Math:log2":ve(([t])=>(Ee(t),Ne(Math.log2(t.value)))),"Math:max":ve(([t,r])=>(Ee(t),Ee(r),Ne(Math.max(t.value,r.value)))),"Math:min":ve(([t,r])=>(Ee(t),Ee(r),Ne(Math.min(t.value,r.value)))),"Math:pow":ve(([t,r])=>(Ee(t),Ee(r),Ne(Math.pow(t.value,r.value)))),"Math:round":ve(([t])=>(Ee(t),Ne(Math.round(t.value)))),"Math:sign":ve(([t])=>(Ee(t),Ne(Math.sign(t.value)))),"Math:sin":ve(([t])=>(Ee(t),Ne(Math.sin(t.value)))),"Math:sinh":ve(([t])=>(Ee(t),Ne(Math.sinh(t.value)))),"Math:sqrt":ve(([t])=>{Ee(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Yt("Invalid operation.");return Ne(r)}),"Math:tan":ve(([t])=>(Ee(t),Ne(Math.tan(t.value)))),"Math:tanh":ve(([t])=>(Ee(t),Ne(Math.tanh(t.value)))),"Math:trunc":ve(([t])=>(Ee(t),Ne(Math.trunc(t.value)))),"Math:rnd":ve(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ne(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ne(Math.random())),"Math:gen_rng":ve(([t])=>{if(Ys(t),t.type!=="num"&&t.type!=="str")return Rt;const r=hf(t.value.toString());return ve(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ne(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ne(r()))}),"Num:to_hex":ve(([t])=>(Ee(t),Qt(t.value.toString(16)))),"Num:from_hex":ve(([t])=>(Tr(t),Ne(parseInt(t.value,16)))),"Str:lf":Qt(`
`),"Str:lt":ve(([t,r])=>(Tr(t),Tr(r),t.value<r.value?Ne(-1):t.value===r.value?Ne(0):Ne(1))),"Str:gt":ve(([t,r])=>(Tr(t),Tr(r),t.value>r.value?Ne(-1):t.value===r.value?Ne(0):Ne(1))),"Obj:keys":ve(([t])=>(ii(t),Zr(Array.from(t.value.keys()).map(r=>Qt(r))))),"Obj:vals":ve(([t])=>(ii(t),Zr(Array.from(t.value.values())))),"Obj:kvs":ve(([t])=>(ii(t),Zr(Array.from(t.value.entries()).map(([r,e])=>Zr([Qt(r),e]))))),"Obj:get":ve(([t,r])=>(ii(t),Tr(r),t.value.get(r.value)??Rt)),"Obj:set":ve(([t,r,e])=>(ii(t),Tr(r),Ys(e),t.value.set(r.value,e),Rt)),"Obj:has":ve(([t,r])=>(ii(t),Tr(r),Eo(t.value.has(r.value)))),"Obj:copy":ve(([t])=>(ii(t),hp(new Map(t.value)))),"Async:interval":ve(async([t,r,e],n)=>{Ee(t),pi(r),e&&(gs(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),ve(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":ve(async([t,r],e)=>{Ee(t),pi(r);const n=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),ve(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},po={num:{to_str:t=>ve(async(r,e)=>Qt(t.value.toString()))},str:{to_num:t=>ve(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Rt:Ne(n)}),len:t=>Ne(pf(t.value)),replace:t=>ve(async([r,e],n)=>(Tr(r),Tr(e),Qt(t.value.split(r.value).join(e.value)))),index_of:t=>ve(async([r],e)=>(Tr(r),Ne(gf(t.value,r.value)))),incl:t=>ve(async([r],e)=>(Tr(r),t.value.includes(r.value)?on:Js)),trim:t=>ve(async(r,e)=>Qt(t.value.trim())),upper:t=>ve(async(r,e)=>Qt(t.value.toUpperCase())),lower:t=>ve(async(r,e)=>Qt(t.value.toLowerCase())),split:t=>ve(async([r],e)=>(r&&Tr(r),Zr(r?t.value.split(r?r.value:"").map(n=>Qt(n)):Dn(t.value).map(n=>Qt(n))))),slice:t=>ve(async([r,e],n)=>(Ee(r),Ee(e),Qt(vf(t.value,r.value,e.value)))),pick:t=>ve(async([r],e)=>{Ee(r);const h=Dn(t.value)[r.value];return h?Qt(h):Rt})},arr:{len:t=>Ne(t.value.length),push:t=>ve(async([r],e)=>(Ys(r),t.value.push(r),t)),unshift:t=>ve(async([r],e)=>(Ys(r),t.value.unshift(r),t)),pop:t=>ve(async(r,e)=>t.value.pop()??Rt),shift:t=>ve(async(r,e)=>t.value.shift()??Rt),concat:t=>ve(async([r],e)=>(Mo(r),Zr(t.value.concat(r.value)))),slice:t=>ve(async([r,e],n)=>(Ee(r),Ee(e),Zr(t.value.slice(r.value,e.value)))),join:t=>ve(async([r],e)=>(r&&Tr(r),Qt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ve(async([r],e)=>{pi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Ne(d)]));return Zr(await Promise.all(n))}),filter:t=>ve(async([r],e)=>{pi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Ne(h)]);gs($),$.value&&n.push(d)}return Zr(n)}),reduce:t=>ve(async([r,e],n)=>{pi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Ne($)])}return d}),find:t=>ve(async([r],e)=>{pi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Ne(n)]);if(gs(d),d.value)return h}return Rt}),incl:t=>ve(async([r],e)=>(Ys(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Js:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?on:Js)),reverse:t=>ve(async(r,e)=>(t.value.reverse(),Rt)),copy:t=>ve(async(r,e)=>Zr([...t.value])),sort:t=>ve(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);Ee(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return pi(r),Mo(t),t.value=await n(t.value,r),t})}};var rn=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const Qg=300,wx=Qg-1;let As=class{constructor(r,e){me(this,"vars");me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);this.opts=e??{};const n={print:ve(([h])=>{Ys(h),this.opts.out&&this.opts.out(h)}),readline:ve(async h=>{const d=h[0];if(Tr(d),this.opts.in==null)return Rt;const $=await this.opts.in(d.value);return Qt($)})};this.vars={...r,...yx,...n},this.scope=new Ai([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const h=await this._eval(n.expr,e);e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Rt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const h=r.scope.createChildScope(n);return hx(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Rt;if(this.stepCount%Qg===wx&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Yt("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);pi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(gs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(gs(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Rt}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(_h(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Rt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Rt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ee(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);Ee(n),Ee(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ne(d)]])));if($.type==="break")break;if($.type==="return")return $}}return Rt}case"each":{const n=await this._eval(r.items,e);Mo(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(d.type==="break")break;if(d.type==="return")return d}return Rt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,n),Rt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Rt}case"addAssign":{const n=await this._eval(r.dest,e);Ee(n);const h=await this._eval(r.expr,e);return Ee(h),await this.assign(e,r.dest,Ne(n.value+h.value)),Rt}case"subAssign":{const n=await this._eval(r.dest,e);Ee(n);const h=await this._eval(r.expr,e);return Ee(h),await this.assign(e,r.dest,Ne(n.value-h.value)),Rt}case"null":return Rt;case"bool":return Eo(r.value);case"num":return Ne(r.value);case"str":return Qt(r.value);case"arr":return Zr(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return hp(n)}case"prop":{const n=await this._eval(r.target,e);if(gx(n))return n.value.has(r.name)?n.value.get(r.name):Rt;if(vx(n)){if(Object.hasOwn(po.num,r.name))return po.num[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else if(px(n)){if(Object.hasOwn(po.str,r.name))return po.str[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else if(dx(n)){if(Object.hasOwn(po.arr,r.name))return po.arr[r.name](n);throw new Yt(`No such prop (${r.name}) in ${n.type}.`)}else throw new Yt(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Mo(n);const h=await this._eval(r.index,e);Ee(h);const d=n.value[h.value];if(d===void 0)throw new rx(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return gs(n),Eo(!n.value)}case"fn":return ux(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);let $="";d.type==="str"?$=d.value:d.type==="num"&&($=d.value.toString()),n+=$}return Qt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),ox(n)}case"break":return this.log("block:break",{scope:e.name}),fx();case"continue":return this.log("block:continue",{scope:e.name}),cx();case"ns":return Rt;case"meta":return Rt;case"and":{const n=await this._eval(r.left,e);if(gs(n),n.value){const h=await this._eval(r.right,e);return gs(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(gs(n),n.value)return n;{const h=await this._eval(r.right,e);return gs(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Rt;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r);Mo(h);const d=await this._eval(e.index,r);Ee(d),h.value[d.value]=n}else if(e.type==="prop"){const h=await this._eval(e.target,r);ii(h),h.value.set(e.name,n)}else throw new Yt("The left-hand side of an assignment expression must be a variable or a property/index access.")}};rn([ct],As.prototype,"exec",null);rn([ct],As.prototype,"execFn",null);rn([ct],As.prototype,"log",null);rn([ct],As.prototype,"collectNs",null);rn([ct],As.prototype,"collectNsMember",null);rn([ct],As.prototype,"_fn",null);rn([ct],As.prototype,"_eval",null);rn([ct],As.prototype,"_run",null);rn([ct],As.prototype,"registerAbortHandler",null);rn([ct],As.prototype,"unregisterAbortHandler",null);rn([ct],As.prototype,"abort",null);rn([ct],As.prototype,"assign",null);rn([ct],As,"collectMetadata",null);function mx(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Xu(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Xu.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}mx(Xu,Error);function Hc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Xu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=Hc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+Hc("",h.column-1," ")+Hc("",j,"^")}else r+=`
 at `+$}return r};Xu.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function mv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:M,Main:_a},d=M,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ie=":",ke="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",Pe="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ut="&&",Ie="==",at="!=",St="<=",Ft=">=",Qe="<",Nr=">",Lt="+",wr="-",Pt="*",dr="^",Or="/",kr="%",Mr="!",Nt="[",U=".",K="if",te="elif",ce="else",he="match",le="=>",Oe="eval",de="`",we='"',oe="'",De='\\"',je="\\'",Be="true",We="false",Ze="null",rt=";",st="@",wt="@(",Bt=`\r
`,bt=/^[A-Z0-9_:]/i,Gt=/^[^`{]/,_s=/^[{}`]/,Vr=/^[+\-]/,Ot=/^[1-9]/,ht=/^[0-9]/,jt=/^[A-Z_]/i,Vn=/^[A-Z0-9_]/i,Kn=/^[\r\n]/,Ci=/^[ \t\r\n]/,_i=/^[ \t]/,tr=lu(),rr=Y("//",!1),ki=Y("/*",!1),vn=Y("*/",!1),mr=Y("(",!1),Et=Y(")",!1),$r=Y("::",!1),sr=Y("{",!1),Ye=Y("}",!1),Ht=Y("###",!1),jr=Y("let",!1),dt=Y(":",!1),yt=Y("=",!1),ns=Y("var",!1),Pi=Y("<:",!1),Ei=Y("#[",!1),ks=Y("]",!1),as=Y("each",!1),mt=Y(",",!1),pt=Y("for",!1),Ps=Y("return",!1),ur=Ut([["A","Z"],["0","9"],"_",":"],!1,!0),or=Y("loop",!1),Mi=Y("break",!1),Si=Y("continue",!1),Fi=Y("+=",!1),Ni=Y("-=",!1),Jn=Y("\\",!1),Zn=Y("||",!1),Oi=Y("&&",!1),Ti=Y("==",!1),Ii=Y("!=",!1),ji=Y("<=",!1),Ri=Y(">=",!1),Gn=Y("<",!1),gn=Y(">",!1),Qn=Y("+",!1),Di=Y("-",!1),Xn=Y("*",!1),Yn=Y("^",!1),Li=Y("/",!1),Bi=Y("%",!1),Hi=Y("!",!1),dn=Y("[",!1),is=Y(".",!1),yn=Y("if",!1),Ui=Y("elif",!1),qi=Y("else",!1),zi=Y("match",!1),Es=Y("=>",!1),Ms=Y("eval",!1),Ss=Y("`",!1),Wi=Ut(["`","{"],!0,!1),Fs=Ut(["{","}","`"],!1,!1),Ns=Y('"',!1),Os=Y("'",!1),Ts=Y('\\"',!1),Is=Y("\\'",!1),js=Ut(["+","-"],!1,!1),ea=Ut([["1","9"]],!1,!1),Mt=Ut([["0","9"]],!1,!1),ta=Y("true",!1),nr=Y("false",!1),Vi=Y("null",!1),Rs=Y(";",!1),Ki=Y("@",!1),ls=Y("@(",!1),Ji=Ut([["A","Z"],"_"],!1,!0),wn=Ut([["A","Z"],["0","9"],"_"],!1,!0),Zi=Y(`\r
`,!1),ra=Ut(["\r",`
`],!1,!1),Gi=Ut([" ","	","\r",`
`],!1,!1),Qi=Ut([" ","	"],!1,!1),Xi=function(l){return l.join("")},Yi=function(){return A()},el=function(){return A()},tl=function(){return""},rl=function(){return""},sl=function(l){return l??[]},sa=function(l,f){return f},nl=function(l,f){return[l,...f]},mn=function(l,f){return f},al=function(l,f){return[l,...f]},$n=function(l,f){return f},il=function(l,f){return[l,...f]},na=function(l){return l},ll=function(l,f){return ne("ns",{name:l,members:f})},ul=function(l,f){return ne("meta",{name:l,value:f})},ol=function(l){return ne("meta",{name:null,value:l})},fl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},cl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},hl=function(l){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[l]})]})},pl=function(l,f){return ne("attr",{name:l,value:f??ne("bool",{value:!0})})},vl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},gl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},dl=function(l,f){return f},yl=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},wl=function(l,f){return f},ml=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},$l=function(l,f){return ne("for",{times:l,for:f})},xl=function(l,f){return ne("for",{times:l,for:f})},bl=function(l){return ne("return",{expr:l})},Al=function(l){return ne("loop",{statements:l})},Cl=function(){return ne("break",{})},_l=function(){return ne("continue",{})},kl=function(l,f,y){return f==="+="?ne("addAssign",{dest:l,expr:y}):f==="-="?ne("subAssign",{dest:l,expr:y}):ne("assign",{dest:l,expr:y})},aa=function(l,f,y){return{op:f,term:y}},Pl=function(l,f){return ne("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ia=function(){return A()},El=function(l){return ne("not",{expr:l})},Ml=function(l,f){return{...l,chain:f}},Sl=function(l){return ne("callChain",{args:l??[]})},la=function(l,f){return f},Fl=function(l,f){return[l,...f]},ua=function(l){return ne("indexChain",{index:l})},Nl=function(l){return ne("propChain",{name:l})},Ol=function(l,f,y,c){return ne("if",{cond:l,then:f,elseif:y??[],else:c})},Tl=function(l,f){return[l,...f]},Il=function(l,f){return{cond:l,then:f}},jl=function(l){return l},oa=function(l,f,y){return{q:f,a:y}},Rl=function(l,f,y){return ne("match",{about:l,qs:f??[],default:y})},fa=function(l){return ne("block",{statements:l})},Dl=function(l){return ne("identifier",{name:l})},Ll=function(l){return ne("tmpl",{tmpl:l})},Bl=function(l){return l.join("")},ca=function(l){return l},Hl=function(l){return ne("str",{value:l.join("")})},ha=function(l){return l},pa=function(l){return ne("str",{value:l.join("")})},Ul=function(){return'"'},va=function(){return"'"},ql=function(){return ne("num",{value:parseFloat(A())})},zl=function(){return ne("num",{value:parseFloat(A())})},Wl=function(){return ne("num",{value:parseInt(A(),10)})},Vl=function(){return ne("num",{value:parseInt(A(),10)})},Kl=function(){return ne("bool",{value:!0})},Jl=function(){return ne("bool",{value:!1})},Zl=function(){return ne("null",{})},ga=function(l,f){return{k:l,v:f}},Gl=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},da=function(l){return l},ya=function(l){return ne("arr",{value:l})},Ql=function(l,f){return{name:l,argType:f}},wa=function(l,f){return[l,...f]},Xl=function(l,f,y,c,s,u){return(l.length>0||y.length>0)&&Ls("Cannot use spaces before or after the function name."),ne("def",{name:f,expr:ne("fn",{args:c??[],retType:s},u??[]),mut:!1,attr:[]})},Yl=function(l,f,y){return ne("fn",{args:l??[],retType:f},y??[])},ma=function(l){return l},eu=function(l){return ne("arr",{value:l})},$a=function(l,f){return{k:l,v:f}},xa=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},tu=function(l,f){return ne("fnTypeSource",{args:l??[],result:f})},ba=function(l,f){return[l,...f]},ru=function(l,f){return ne("namedTypeSource",{name:l,inner:f})},su=function(l){return ne("namedTypeSource",{name:l,inner:null})},nu=function(){return A()},au=function(){return A()},iu=function(l){return ne("block",{statements:l??[]})},i=0,W=0,Ds=[{line:1,column:1}],a=0,z=[],C=0,N={},Rr;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function A(){return t.substring(W,i)}function T(){return Bs(W,i)}function Ls(l,f){throw f=f!==void 0?f:Bs(W,i),Aa(l,f)}function Y(l,f){return{type:"literal",text:l,ignoreCase:f}}function Ut(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function lu(){return{type:"any"}}function se(){return{type:"end"}}function Tt(l){var f=Ds[l],y;if(f)return f;for(y=l-1;!Ds[y];)y--;for(f=Ds[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ds[l]=f,f}function Bs(l,f,y){var c=Tt(l),s=Tt(f),u={source:n,start:{offset:l,line:c.line,column:c.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function S(l){i<a||(i>a&&(a=i,z=[]),z.push(l))}function Aa(l,f){return new Xu(l,null,null,f)}function Hs(l,f,y){return new Xu(Xu.buildMessage(l,f),l,f,y)}function M(){var l,f,y,c=i*76+0,s=N[c];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ca();y!==e;)f.push(y),y=Ca();return W=l,f=Xi(f),l=f,N[c]={nextPos:i,result:l},l}function Ca(){var l,f,y=i*76+1,c=N[y];return c?(i=c.nextPos,c.result):(l=i,f=Oa(),f!==e&&(W=l,f=Yi()),l=f,l===e&&(l=i,f=qs(),f!==e&&(W=l,f=el()),l=f,l===e&&(l=uu(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,C===0&&S(tr))))),N[y]={nextPos:i,result:l},l)}function uu(){var l,f,y,c,s,u,p=i*76+2,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,C===0&&S(rr)),f!==e){for(y=[],c=i,s=i,C++,u=za(),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,u=za(),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=tl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===b?(f=b,i+=2):(f=e,C===0&&S(ki)),f!==e){for(y=[],c=i,s=i,C++,t.substr(i,2)===k?(u=k,i+=2):(u=e,C===0&&S(vn)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.substr(i,2)===k?(u=k,i+=2):(u=e,C===0&&S(vn)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);t.substr(i,2)===k?(c=k,i+=2):(c=e,C===0&&S(vn)),c!==e?(W=l,l=rl()):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function _a(){var l,f,y,c,s,u=i*76+3,p=N[u];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();for(y=ka(),y===e&&(y=null),c=[],s=x();s!==e;)c.push(s),s=x();return W=l,l=sl(y),N[u]={nextPos:i,result:l},l}function ka(){var l,f,y,c,s,u,p,o,g=i*76+4,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=xn(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=xn(),o!==e?(W=c,c=sa(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=xn(),o!==e?(W=c,c=sa(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=nl(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function ou(){var l,f,y,c,s,u,p,o,g=i*76+5,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=bn(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=bn(),o!==e?(W=c,c=mn(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=bn(),o!==e?(W=c,c=mn(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=al(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function us(){var l,f,y,c,s,u,p,o,g=i*76+6,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=fr(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=fr(),o!==e?(W=c,c=$n(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=fr(),o!==e?(W=c,c=$n(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=il(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function xn(){var l,f=i*76+7,y=N[f];return y?(i=y.nextPos,y.result):(l=os(),l===e&&(l=Pa(),l===e&&(l=fr())),N[f]={nextPos:i,result:l},l)}function bn(){var l,f=i*76+8,y=N[f];return y?(i=y.nextPos,y.result):(l=xr(),l===e&&(l=Ua(),l===e&&(l=os())),N[f]={nextPos:i,result:l},l)}function fr(){var l,f=i*76+9,y=N[f];return y?(i=y.nextPos,y.result):(l=xr(),l===e&&(l=Ua(),l===e&&(l=Ea(),l===e&&(l=hu(),l===e&&(l=fu(),l===e&&(l=Ma(),l===e&&(l=cu(),l===e&&(l=pu(),l===e&&(l=vu(),l===e&&(l=gu(),l===e&&(l=du(),l===e&&(l=Re()))))))))))),N[f]={nextPos:i,result:l},l)}function Re(){var l,f=i*76+10,y=N[f];return y?(i=y.nextPos,y.result):(l=yu(),l===e&&(l=Dr()),N[f]={nextPos:i,result:l},l)}function Dr(){var l,f=i*76+11,y=N[f];return y?(i=y.nextPos,y.result):(l=$u(),l===e&&(l=ku(),l===e&&(l=Ar(),l===e&&(l=Lr()))),N[f]={nextPos:i,result:l},l)}function Lr(){var l,f,y,c,s,u,p=i*76+12,o=N[p];if(o)return i=o.nextPos,o.result;if(l=bu(),l===e&&(l=_n(),l===e&&(l=Oa(),l===e&&(l=qs(),l===e&&(l=Ra(),l===e&&(l=Mn(),l===e&&(l=Ba(),l===e&&(l=Ha(),l===e&&(l=_u(),l===e&&(l=wu(),l===e&&(l=Au(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(mr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e?(W=l,l=na(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=N[f];return y?(i=y.nextPos,y.result):(l=Ra(),l===e&&(l=qs(),l===e&&(l=Mn(),l===e&&(l=Nn(),l===e&&(l=qa(),l===e&&(l=Ba()))))),N[f]={nextPos:i,result:l},l)}function os(){var l,f,y,c,s,u,p,o,g,v,m=i*76+14,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===j?(f=j,i+=2):(f=e,C===0&&S($r)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=D,i++):(u=e,C===0&&S(sr)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(o=ou(),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();t.charCodeAt(i)===125?(v=V,i++):(v=e,C===0&&S(Ye)),v!==e?(W=l,l=ll(c,o)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Pa(){var l,f,y,c,s,u,p=i*76+15,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Ht)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=He(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();u=Te(),u!==e?(W=l,l=ul(c,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Ht)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();c=Te(),c!==e?(W=l,l=ol(c)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function xr(){var l,f,y,c,s,u,p,o,g,v=i*76+16,m=N[v];if(m)return i=m.nextPos,m.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,C===0&&S(jr)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,C===0&&S(dt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=qt(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===61?(p=ke,i++):(p=e,C===0&&S(yt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=Re(),g!==e?(W=l,l=fl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===H?(f=H,i+=3):(f=e,C===0&&S(ns)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,C===0&&S(dt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=qt(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===61?(p=ke,i++):(p=e,C===0&&S(yt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=Re(),g!==e?(W=l,l=cl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[v]={nextPos:i,result:l},l}function Ea(){var l,f,y,c,s=i*76+17,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,C===0&&S(Pi)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();c=Re(),c!==e?(W=l,l=hl(c)):(i=l,l=e)}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function fu(){var l,f,y,c,s,u,p,o=i*76+18,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,2)===B?(f=B,i+=2):(f=e,C===0&&S(Ei)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();t.charCodeAt(i)===93?(p=q,i++):(p=e,C===0&&S(ks)),p!==e?(W=l,l=pl(c,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[o]={nextPos:i,result:l},l}function Ma(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+19,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(jr)),s!==e){if(u=[],p=x(),p!==e)for(;p!==e;)u.push(p),p=x();else u=e;if(u!==e)if(p=He(),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();for(t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e)if(t.charCodeAt(i)===41?(w=F,i++):(w=e,C===0&&S(Et)),w!==e){for(_=[],P=x();P!==e;)_.push(P),P=x();P=It(),P!==e?(W=l,l=vl(p,m,P)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(jr)),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();if(v=Re(),v!==e){if(m=[],w=x(),w!==e)for(;w!==e;)m.push(w),w=x();else m=e;m!==e?(w=It(),w!==e?(W=l,l=gl(u,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function cu(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R=i*76+20,Z=N[R];if(Z)return i=Z.nextPos,Z.result;if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(jr)),s!==e){if(u=[],p=x(),p!==e)for(;p!==e;)u.push(p),p=x();else u=e;if(u!==e)if(p=He(),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();if(g=i,t.charCodeAt(i)===61?(v=ke,i++):(v=e,C===0&&S(yt)),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();w=Re(),w!==e?(W=g,g=dl(p,w)):(i=g,g=e)}else i=g,g=e;for(g===e&&(g=null),t.charCodeAt(i)===44?(v=G,i++):(v=e,C===0&&S(mt)),v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();if(w=Re(),w!==e)if(t.charCodeAt(i)===41?(_=F,i++):(_=e,C===0&&S(Et)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=It(),I!==e?(W=l,l=yl(p,g,w,I)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(jr)),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(o=i,t.charCodeAt(i)===61?(g=ke,i++):(g=e,C===0&&S(yt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Re(),m!==e?(W=o,o=wl(u,m)):(i=o,o=e)}else i=o,o=e;for(o===e&&(o=null),t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e){if(w=[],_=x(),_!==e)for(;_!==e;)w.push(_),_=x();else w=e;w!==e?(_=It(),_!==e?(W=l,l=ml(u,o,m,_)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(s=Re(),s!==e)if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=It(),o!==e?(W=l,l=$l(s,o)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;s!==e?(u=It(),u!==e?(W=l,l=xl(c,u)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return N[R]={nextPos:i,result:l},l}function hu(){var l,f,y,c,s,u=i*76+21,p=N[u];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===X?(f=X,i+=6):(f=e,C===0&&S(Ps)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Re(),s!==e?(W=l,l=bl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[u]={nextPos:i,result:l},l}function pu(){var l,f,y,c,s,u,p,o,g=i*76+22,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===$e?(f=$e,i+=4):(f=e,C===0&&S(or)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();if(u=us(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=Al(u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function vu(){var l,f,y,c,s=i*76+23,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,5)===Pe?(f=Pe,i+=5):(f=e,C===0&&S(Mi)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Cl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function gu(){var l,f,y,c,s=i*76+24,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,8)===ge?(f=ge,i+=8):(f=e,C===0&&S(Si)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=_l()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function du(){var l,f,y,c,s,u,p=i*76+25,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Re(),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.substr(i,2)===qe?(c=qe,i+=2):(c=e,C===0&&S(Fi)),c===e&&(t.substr(i,2)===it?(c=it,i+=2):(c=e,C===0&&S(Ni)),c===e&&(t.charCodeAt(i)===61?(c=ke,i++):(c=e,C===0&&S(yt)))),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();u=Re(),u!==e?(W=l,l=kl(f,c,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function yu(){var l,f,y,c,s,u,p,o,g=i*76+26,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=Dr(),f!==e){for(y=[],c=i,s=[],u=br();u!==e;)s.push(u),u=br();if(u=Sa(),u!==e){for(p=[],o=br();o!==e;)p.push(o),o=br();o=Dr(),o!==e?(W=c,c=aa(f,u,o)):(i=c,c=e)}else i=c,c=e;if(c!==e)for(;c!==e;){for(y.push(c),c=i,s=[],u=br();u!==e;)s.push(u),u=br();if(u=Sa(),u!==e){for(p=[],o=br();o!==e;)p.push(o),o=br();o=Dr(),o!==e?(W=c,c=aa(f,u,o)):(i=c,c=e)}else i=c,c=e}else y=e;y!==e?(W=l,l=Pl(f,y)):(i=l,l=e)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function br(){var l,f,y,c=i*76+27,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(y=Ue(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=be()),N[c]={nextPos:i,result:l},l)}function Sa(){var l,f,y=i*76+28,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===lt?(f=lt,i+=2):(f=e,C===0&&S(Zn)),f===e&&(t.substr(i,2)===ut?(f=ut,i+=2):(f=e,C===0&&S(Oi)),f===e&&(t.substr(i,2)===Ie?(f=Ie,i+=2):(f=e,C===0&&S(Ti)),f===e&&(t.substr(i,2)===at?(f=at,i+=2):(f=e,C===0&&S(Ii)),f===e&&(t.substr(i,2)===St?(f=St,i+=2):(f=e,C===0&&S(ji)),f===e&&(t.substr(i,2)===Ft?(f=Ft,i+=2):(f=e,C===0&&S(Ri)),f===e&&(t.charCodeAt(i)===60?(f=Qe,i++):(f=e,C===0&&S(Gn)),f===e&&(t.charCodeAt(i)===62?(f=Nr,i++):(f=e,C===0&&S(gn)),f===e&&(t.charCodeAt(i)===43?(f=Lt,i++):(f=e,C===0&&S(Qn)),f===e&&(t.charCodeAt(i)===45?(f=wr,i++):(f=e,C===0&&S(Di)),f===e&&(t.charCodeAt(i)===42?(f=Pt,i++):(f=e,C===0&&S(Xn)),f===e&&(t.charCodeAt(i)===94?(f=dr,i++):(f=e,C===0&&S(Yn)),f===e&&(t.charCodeAt(i)===47?(f=Or,i++):(f=e,C===0&&S(Li)),f===e&&(t.charCodeAt(i)===37?(f=kr,i++):(f=e,C===0&&S(Bi))))))))))))))),f!==e&&(W=l,f=ia()),l=f,N[y]={nextPos:i,result:l},l)}function wu(){var l,f,y,c=i*76+29,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Mr,i++):(f=e,C===0&&S(Hi)),f!==e?(y=Re(),y!==e?(W=l,l=El(y)):(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function Ar(){var l,f,y,c,s=i*76+30,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,f=Lr(),f!==e){if(y=[],c=An(),c===e&&(c=Fa(),c===e&&(c=Cn())),c!==e)for(;c!==e;)y.push(c),c=An(),c===e&&(c=Fa(),c===e&&(c=Cn()));else y=e;y!==e?(W=l,l=Ml(f,y)):(i=l,l=e)}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function An(){var l,f,y,c,s,u,p=i*76+31,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(mr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=mu(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e?(W=l,l=Sl(c)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function mu(){var l,f,y,c,s,u,p=i*76+32,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Re(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=Re(),u!==e?(W=c,c=la(f,u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=Re(),u!==e?(W=c,c=la(f,u)):(i=c,c=e)):(i=c,c=e);W=l,l=Fl(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Fa(){var l,f,y,c,s,u,p=i*76+33,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=ua(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Cn(){var l,f,y,c=i*76+34,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=U,i++):(f=e,C===0&&S(is)),f!==e?(y=He(),y!==e?(W=l,l=Nl(y)):(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function $u(){var l,f,y,c,s,u,p,o,g,v,m=i*76+35,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===K?(f=K,i+=2):(f=e,C===0&&S(yn)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=It(),u!==e){if(p=i,o=[],g=x(),g!==e)for(;g!==e;)o.push(g),g=x();else o=e;if(o!==e?(g=Na(),g!==e?p=g:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),o=i,g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;g!==e?(v=xu(),v!==e?o=v:(i=o,o=e)):(i=o,o=e),o===e&&(o=null),W=l,l=Ol(c,u,p,o)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Na(){var l,f,y,c,s,u,p=i*76+36,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Us(),f!==e){for(y=[],c=i,s=[],u=x();u!==e;)s.push(u),u=x();for(u=Us(),u!==e?c=u:(i=c,c=e);c!==e;){for(y.push(c),c=i,s=[],u=x();u!==e;)s.push(u),u=x();u=Us(),u!==e?c=u:(i=c,c=e)}W=l,l=Tl(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Us(){var l,f,y,c,s,u,p,o=i*76+37,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,4)===te?(f=te,i+=4):(f=e,C===0&&S(Ui)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();p=It(),p!==e?(W=l,l=Il(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return N[o]={nextPos:i,result:l},l}function xu(){var l,f,y,c,s,u=i*76+38,p=N[u];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ce?(f=ce,i+=4):(f=e,C===0&&S(qi)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=It(),s!==e?(W=l,l=jl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[u]={nextPos:i,result:l},l}function bu(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=i*76+39,re=N[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.substr(i,5)===he?(f=he,i+=5):(f=e,C===0&&S(zi)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===123?(p=D,i++):(p=e,C===0&&S(sr)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();if(g=[],v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=oa(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(g.push(v),v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=oa(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else g=e;if(g!==e){if(v=i,t.charCodeAt(i)===42?(m=Pt,i++):(m=e,C===0&&S(Xn)),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();v=I}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();t.charCodeAt(i)===125?(w=V,i++):(w=e,C===0&&S(Ye)),w!==e?(W=l,l=Rl(s,g,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return N[ye]={nextPos:i,result:l},l}function _n(){var l,f,y,c,s,u,p,o,g=i*76+40,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Oe?(f=Oe,i+=4):(f=e,C===0&&S(Ms)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();if(u=us(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=fa(u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function Au(){var l,f,y=i*76+41,c=N[y];return c?(i=c.nextPos,c.result):(l=i,f=Su(),f!==e&&(W=l,f=Dl(f)),l=f,N[y]={nextPos:i,result:l},l)}function Oa(){var l,f,y,c,s,u,p=i*76+42,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===96?(f=de,i++):(f=e,C===0&&S(Ss)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===96?(u=de,i++):(u=e,C===0&&S(Ss)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Ta(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===96?(u=de,i++):(u=e,C===0&&S(Ss)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Ta(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===96?(c=de,i++):(c=e,C===0&&S(Ss)),c!==e?(W=l,l=Ll(y)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Ta(){var l,f,y,c,s,u,p=i*76+43,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=Re(),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?l=c:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ia(),y!==e)for(;y!==e;)f.push(y),y=Ia();else f=e;f!==e&&(W=l,f=Bl(f)),l=f}return N[p]={nextPos:i,result:l},l}function Ia(){var l,f=i*76+44,y=N[f];return y?(i=y.nextPos,y.result):(l=ja(),l===e&&(Gt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Wi))),N[f]={nextPos:i,result:l},l)}function ja(){var l,f,y,c=i*76+45,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(_s.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,C===0&&S(Fs)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function qs(){var l,f,y,c,s,u,p=i*76+46,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===34?(f=we,i++):(f=e,C===0&&S(Ns)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===34?(u=we,i++):(u=e,C===0&&S(Ns)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=kn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ca(u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===34?(u=we,i++):(u=e,C===0&&S(Ns)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=kn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ca(u)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===34?(c=we,i++):(c=e,C===0&&S(Ns)),c!==e?(W=l,l=Hl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=oe,i++):(f=e,C===0&&S(Os)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===39?(u=oe,i++):(u=e,C===0&&S(Os)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ha(u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===39?(u=oe,i++):(u=e,C===0&&S(Os)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ha(u)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===39?(c=oe,i++):(c=e,C===0&&S(Os)),c!==e?(W=l,l=pa(y)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function kn(){var l,f,y=i*76+47,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===De?(f=De,i+=2):(f=e,C===0&&S(Ts)),f!==e&&(W=l,f=Ul()),l=f,N[y]={nextPos:i,result:l},l)}function Pn(){var l,f,y=i*76+48,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===je?(f=je,i+=2):(f=e,C===0&&S(Is)),f!==e&&(W=l,f=va()),l=f,N[y]={nextPos:i,result:l},l)}function Ra(){var l,f=i*76+49,y=N[f];return y?(i=y.nextPos,y.result):(l=En(),l===e&&(l=Da()),N[f]={nextPos:i,result:l},l)}function En(){var l,f,y,c,s,u,p=i*76+50,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(c=U,i++):(c=e,C===0&&S(is)),c!==e){if(s=[],ht.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,C===0&&S(Mt)),u!==e)for(;u!==e;)s.push(u),ht.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,C===0&&S(Mt));else s=e;s!==e?(W=l,l=ql()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Mt)),f!==e)if(t.charCodeAt(i)===46?(y=U,i++):(y=e,C===0&&S(is)),y!==e){if(c=[],ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Mt)),s!==e)for(;s!==e;)c.push(s),ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Mt));else c=e;c!==e?(W=l,l=zl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Da(){var l,f,y,c,s=i*76+51,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt));else y=e;y!==e?(W=l,l=Wl()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Mt)),f!==e?(W=l,l=Vl()):(i=l,l=e)),N[s]={nextPos:i,result:l},l}function Mn(){var l,f=i*76+52,y=N[f];return y?(i=y.nextPos,y.result):(l=La(),l===e&&(l=Cu()),N[f]={nextPos:i,result:l},l)}function La(){var l,f,y,c,s=i*76+53,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,4)===Be?(f=Be,i+=4):(f=e,C===0&&S(ta)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Kl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Cu(){var l,f,y,c,s=i*76+54,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,C===0&&S(nr)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Jl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Ba(){var l,f,y,c,s=i*76+55,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,C===0&&S(Vi)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Zl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Ha(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+56,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=Gl(c)):(i=l,l=e)}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function _u(){var l,f,y,c,s,u,p,o,g,v,m=i*76+57,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=Re(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(u)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=Re(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(u)}else i=s,s=e;for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=ya(c)):(i=l,l=e)}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Sn(){var l,f,y,c,s,u,p,o=i*76+58,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,f=He(),f!==e){for(y=i,c=[],s=x();s!==e;)c.push(s),s=x();if(t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();p=qt(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),W=l,l=Ql(f,y)}else i=l,l=e;return N[o]={nextPos:i,result:l},l}function Fn(){var l,f,y,c,s,u,p=i*76+59,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Sn(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=Sn(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=Sn(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);W=l,l=wa(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Ua(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=i*76+60,re=N[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.charCodeAt(i)===64?(f=st,i++):(f=e,C===0&&S(Ki)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=He(),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();if(t.charCodeAt(i)===40?(u=E,i++):(u=e,C===0&&S(mr)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(o=Fn(),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();if(t.charCodeAt(i)===41?(v=F,i++):(v=e,C===0&&S(Et)),v!==e){for(m=i,w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===58?(_=ie,i++):(_=e,C===0&&S(dt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=qt(),I!==e?m=I:(i=m,m=e)}else i=m,m=e;for(m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===123?(_=D,i++):(_=e,C===0&&S(sr)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();for(I=us(),I===e&&(I=null),R=[],Z=x();Z!==e;)R.push(Z),Z=x();t.charCodeAt(i)===125?(Z=V,i++):(Z=e,C===0&&S(Ye)),Z!==e?(W=l,l=Xl(y,c,s,o,m,I)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[ye]={nextPos:i,result:l},l}function ku(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P=i*76+61,I=N[P];if(I)return i=I.nextPos,I.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Fn(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=i,o=[],g=x();g!==e;)o.push(g),g=x();if(t.charCodeAt(i)===58?(g=ie,i++):(g=e,C===0&&S(dt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=qt(),m!==e?p=m:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),o=[],g=x();g!==e;)o.push(g),g=x();if(t.charCodeAt(i)===123?(g=D,i++):(g=e,C===0&&S(sr)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();for(m=us(),m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();t.charCodeAt(i)===125?(_=V,i++):(_=e,C===0&&S(Ye)),_!==e?(W=l,l=Yl(c,p,m)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[P]={nextPos:i,result:l},l}function Nn(){var l,f,y,c,s,u,p,o,g,v,m=i*76+62,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=Te(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(u)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=Te(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(u)}else i=s,s=e;for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=eu(c)):(i=l,l=e)}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function qa(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+63,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=xa(c)):(i=l,l=e)}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function qt(){var l,f=i*76+64,y=N[f];return y?(i=y.nextPos,y.result):(l=Pu(),l===e&&(l=Mu()),N[f]={nextPos:i,result:l},l)}function Pu(){var l,f,y,c,s,u,p,o,g,v,m=i*76+65,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Eu(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.substr(i,2)===le?(o=le,i+=2):(o=e,C===0&&S(Es)),o!==e){for(g=[],v=x();v!==e;)g.push(v),v=x();v=qt(),v!==e?(W=l,l=tu(c,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Eu(){var l,f,y,c,s,u,p=i*76+66,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=qt(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=qt(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=qt(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);W=l,l=ba(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Mu(){var l,f,y,c,s,u,p,o,g=i*76+67,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=He(),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(t.charCodeAt(i)===60?(c=Qe,i++):(c=e,C===0&&S(Gn)),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();if(u=qt(),u!==e){for(p=[],o=be();o!==e;)p.push(o),o=be();t.charCodeAt(i)===62?(o=Nr,i++):(o=e,C===0&&S(gn)),o!==e?(W=l,l=ru(f,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=He(),f!==e&&(W=l,f=su(f)),l=f),N[g]={nextPos:i,result:l},l}function He(){var l,f,y,c,s=i*76+68,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,jt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Ji)),f!==e){for(y=[],Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));c!==e;)y.push(c),Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));W=l,l=nu()}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function Su(){var l,f,y,c,s,u,p=i*76+69,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=He(),f!==e){for(y=[],c=i,t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e?(u=He(),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e?(u=He(),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=au()}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Br(){var l,f,y,c,s,u=i*76+70,p=N[u];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();if(t.charCodeAt(i)===44?(y=G,i++):(y=e,C===0&&S(mt)),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();f=[f,y,c],l=f}else i=l,l=e;if(l===e)if(l=[],f=x(),f!==e)for(;f!==e;)l.push(f),f=x();else l=e;return N[u]={nextPos:i,result:l},l}function It(){var l,f,y,c,s,u,p=i*76+71,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=us(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=iu(c)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=fr()),N[p]={nextPos:i,result:l},l}function Ue(){var l,f=i*76+72,y=N[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Bt?(l=Bt,i+=2):(l=e,C===0&&S(Zi)),l===e&&(Kn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(ra))),N[f]={nextPos:i,result:l},l)}function za(){var l,f,y=i*76+73,c=N[y];return c?(i=c.nextPos,c.result):(l=i,C++,t.length>i?(f=t.charAt(i),i++):(f=e,C===0&&S(tr)),C--,f===e?l=void 0:(i=l,l=e),l===e&&(l=Ue()),N[y]={nextPos:i,result:l},l)}function x(){var l,f=i*76+74,y=N[f];return y?(i=y.nextPos,y.result):(Ci.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Gi)),N[f]={nextPos:i,result:l},l)}function be(){var l,f=i*76+75,y=N[f];return y?(i=y.nextPos,y.result):(_i.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Qi)),N[f]={nextPos:i,result:l},l)}function ne(l,f,y){const c={type:l};f.children=y;for(const u of Object.keys(f))f[u]!==void 0&&(c[u]=f[u]);const s=T();return c.loc={start:s.start.offset,end:s.end.offset-1},c}if(Rr=d(),Rr!==e&&i===t.length)return Rr;throw Rr!==e&&i<t.length&&S(se()),Hs(z,a<t.length?t.charAt(a):null,a<t.length?Bs(a,a+1):Bs(a,a))}const $x=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function xx(t){return $x.includes(t.type)}function Xg(t){return"chain"in t&&t.chain!==null}function bx(t,r,e){return{type:"call",target:t,args:r,loc:e}}function Ax(t,r,e){return{type:"index",target:t,index:r,loc:e}}function Cx(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=nt(e.expr,r);break}case"return":{e.expr=nt(e.expr,r);break}case"each":{e.items=nt(e.items,r),e.for=nt(e.for,r);break}case"for":{e.from!=null&&(e.from=nt(e.from,r)),e.to!=null&&(e.to=nt(e.to,r)),e.times!=null&&(e.times=nt(e.times,r)),e.for=nt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=nt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=nt(e.expr,r),e.dest=nt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=nt(e.operands[n],r);break}case"not":{e.expr=nt(e.expr,r);break}case"if":{e.cond=nt(e.cond,r),e.then=nt(e.then,r);for(const n of e.elseif)n.cond=nt(n.cond,r),n.then=nt(n.then,r);e.else!=null&&(e.else=nt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=nt(e.children[n],r);break}case"match":{e.about=nt(e.about,r);for(const n of e.qs)n.q=nt(n.q,r),n.a=nt(n.a,r);e.default!=null&&(e.default=nt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=nt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=nt(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],nt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=nt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=nt(e.args[n],r);break}case"indexChain":{e.index=nt(e.index,r);break}case"call":{e.target=nt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=nt(e.args[n],r);break}case"index":{e.target=nt(e.target,r),e.index=nt(e.index,r);break}case"prop":{e.target=nt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=nt(e.members[n],r);break}case"or":case"and":{e.left=nt(e.left,r),e.right=nt(e.right,r);break}}if(Xg(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=nt(e.chain[n],r);return e}const Uc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function qc(t){throw new no(`Reserved word "${t}" cannot be used as variable name.`)}function _x(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Uc.includes(t.name)&&qc(t.name);break}case"meta":{t.name!=null&&Uc.includes(t.name)&&qc(t.name);break}case"fn":{for(const r of t.args)Uc.includes(r.name)&&qc(r.name);break}}return t}function kx(t){for(const r of t)nt(r,_x);return t}function $v(t){return{type:"simple",name:t}}function Px(t,r){return{type:"generic",name:t,inners:r}}function Ex(t,r){return{type:"fn",args:t,result:r}}function Bf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Bf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Bf(n)).join(", "),e=Bf(t.result);return`@(${r}) { ${e} }`}}}function So(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return $v(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=So(t.inner):r=$v("any"),Px(t.name,[r])}}throw new no(`Unknown type: '${Bf(t)}'`)}else{const r=t.args.map(e=>So(e));return Ex(r,So(t.result))}}function Mx(t){switch(t.type){case"def":{t.varType!=null&&So(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&So(r.argType);t.retType!=null&&So(t.retType);break}}return t}function Sx(t){for(const r of t)nt(r,Mx);return t}function Hf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Hf(n.expr.children)),r.push(n);else{if(e.length>0)throw new no("invalid attribute.");switch(n.type){case"fn":{n.children=Hf(n.children);break}case"block":{n.statements=Hf(n.statements);break}}r.push(n)}if(e.length>0)throw new no("invalid attribute.");return r}function Fx(t){if(xx(t)&&Xg(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=bx(n,h.args,h.loc);break}case"indexChain":{n=Ax(n,h.index,h.loc);break}case"propChain":{n=Cx(n,h.name,h.loc);break}}return n}return t}function Nx(t){for(let r=0;r<t.length;r++)t[r]=nt(t[r],Fx);return t}function Uf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Yg(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Uf(t,r,e);{const{left:n,right:h,info:d}=t;return Uf(n,Yg(h,r,e),d)}}function Uu(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Uu(t.left),Uu(t.right)]}}const Ox={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Uu(t.left),right:Uu(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Uu(t.left),right:Uu(t.right)}),priority:3}};function Tx(t){const r=t.operators.map(n=>{const h=Ox[n];if(h==null)throw new no(`No such operator: ${n}.`);return h});let e=Uf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Yg(e,t.operands[2+n],r[1+n]);return Uu(e)}function Ix(t){for(let r=0;r<t.length;r++)t[r]=nt(t[r],e=>e.type==="infix"?Tx(e):e);return t}var Za;let jx=(Za=class{constructor(){me(this,"plugins");this.plugins={validate:[kx,Sx],transform:[Hf,Nx,Ix]}}static parse(r){return Za.instance==null&&(Za.instance=new Za),Za.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=mv(r,{startRule:"Preprocess"});e=mv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new no(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new no(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},me(Za,"instance"),Za);const Rx="0.15.0",Dx={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Mh=[],Wo=null;function Lx(t){return Mh=jx.parse(t),JSON.stringify(Mh,null,"	")}async function Bx(t){Wo==null||Wo.abort(),Wo=new As({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:kh(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:kh(e.val,!0),print:!1});break}}});try{await Wo.exec(Mh)}catch(r){t.err(r)}}const Hx=Object.freeze(Object.defineProperty({__proto__:null,exec:Bx,parse:Lx,samples:Dx,version:Rx},Symbol.toStringTag,{value:"Module"}));class $c extends Error{constructor(e,n){super(e);me(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,$c)}}class ao extends $c{constructor(r,e){super(r,e)}}class er extends $c{constructor(r,e){super(r,e)}}class Ux extends er{constructor(r,e){super(r,e)}}var oo=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};class Wn{constructor(r=[],e,n){me(this,"parent");me(this,"layerdStates");me(this,"name");me(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Wn(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new er(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const h of this.layerdStates){if(h.has(r)){h.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}oo([ct],Wn.prototype,"log",null);oo([ct],Wn.prototype,"onUpdated",null);oo([ct],Wn.prototype,"createChildScope",null);oo([ct],Wn.prototype,"get",null);oo([ct],Wn.prototype,"getAll",null);oo([ct],Wn.prototype,"add",null);oo([ct],Wn.prototype,"assign",null);let Pf;const qx=new Uint8Array(16);function zx(){if(!Pf&&(Pf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pf(qx)}const qr=[];for(let t=0;t<256;++t)qr.push((t+256).toString(16).slice(1));function Wx(t,r=0){return(qr[t[r+0]]+qr[t[r+1]]+qr[t[r+2]]+qr[t[r+3]]+"-"+qr[t[r+4]]+qr[t[r+5]]+"-"+qr[t[r+6]]+qr[t[r+7]]+"-"+qr[t[r+8]]+qr[t[r+9]]+"-"+qr[t[r+10]]+qr[t[r+11]]+qr[t[r+12]]+qr[t[r+13]]+qr[t[r+14]]+qr[t[r+15]]).toLowerCase()}const Vx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),xv={randomUUID:Vx};function Kx(t,r,e){if(xv.randomUUID&&!r&&!t)return xv.randomUUID();t=t||{};const n=t.random||(t.rng||zx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let h=0;h<16;++h)r[e+h]=n[h];return r}return Wx(n)}const Dt={type:"null"},fn={type:"bool",value:!0},Zs={type:"bool",value:!1},Ve=t=>({type:"num",value:t}),Xt=t=>({type:"str",value:t}),Fo=t=>({type:"bool",value:t}),pp=t=>({type:"obj",value:t}),Gr=t=>({type:"arr",value:t}),Jx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Me=t=>({type:"fn",native:t}),Zx=t=>({type:"return",value:t}),Gx=()=>({type:"break",value:null}),Qx=()=>({type:"continue",value:null}),Xx=t=>t.type==="return"?t.value:t;function en(t){if(t==null)throw new er("Expect anything, but got nothing.")}function ds(t){if(t==null)throw new er("Expect boolean, but got nothing.");if(t.type!=="bool")throw new er(`Expect boolean, but got ${t.type}.`)}function vi(t){if(t==null)throw new er("Expect function, but got nothing.");if(t.type!=="fn")throw new er(`Expect function, but got ${t.type}.`)}function Ir(t){if(t==null)throw new er("Expect string, but got nothing.");if(t.type!=="str")throw new er(`Expect string, but got ${t.type}.`)}function ze(t){if(t==null)throw new er("Expect number, but got nothing.");if(t.type!=="num")throw new er(`Expect number, but got ${t.type}.`)}function li(t){if(t==null)throw new er("Expect object, but got nothing.");if(t.type!=="obj")throw new er(`Expect object, but got ${t.type}.`)}function tf(t){if(t==null)throw new er("Expect array, but got nothing.");if(t.type!=="arr")throw new er(`Expect array, but got ${t.type}.`)}function Yx(t){return t.type==="str"}function eb(t){return t.type==="num"}function tb(t){return t.type==="obj"}function rb(t){return t.type==="arr"}function Sh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Fh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Fh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Nh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Nh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Nh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Oh(t){if(t===null)return Dt;if(typeof t=="boolean")return Fo(t);if(typeof t=="string")return Xt(t);if(typeof t=="number")return Ve(t);if(Array.isArray(t))return Gr(t.map(r=>Oh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Oh(n));return pp(r)}return Dt}const sb={help:Xt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Xt("0.14.1"),"Core:ai":Xt("kawaii"),"Core:not":Me(([t])=>(ds(t),t.value?Zs:fn)),"Core:eq":Me(([t,r])=>(en(t),en(r),Sh(t,r)?fn:Zs)),"Core:neq":Me(([t,r])=>(en(t),en(r),Sh(t,r)?Zs:fn)),"Core:and":Me(([t,r])=>(ds(t),t.value?(ds(r),r.value?fn:Zs):Zs)),"Core:or":Me(([t,r])=>(ds(t),t.value?fn:(ds(r),r.value?fn:Zs))),"Core:add":Me(([t,r])=>(ze(t),ze(r),Ve(t.value+r.value))),"Core:sub":Me(([t,r])=>(ze(t),ze(r),Ve(t.value-r.value))),"Core:mul":Me(([t,r])=>(ze(t),ze(r),Ve(t.value*r.value))),"Core:pow":Me(([t,r])=>{ze(t),ze(r);const e=t.value**r.value;if(isNaN(e))throw new er("Invalid operation.");return Ve(e)}),"Core:div":Me(([t,r])=>{ze(t),ze(r);const e=t.value/r.value;if(isNaN(e))throw new er("Invalid operation.");return Ve(e)}),"Core:mod":Me(([t,r])=>(ze(t),ze(r),Ve(t.value%r.value))),"Core:gt":Me(([t,r])=>(ze(t),ze(r),t.value>r.value?fn:Zs)),"Core:lt":Me(([t,r])=>(ze(t),ze(r),t.value<r.value?fn:Zs)),"Core:gteq":Me(([t,r])=>(ze(t),ze(r),t.value>=r.value?fn:Zs)),"Core:lteq":Me(([t,r])=>(ze(t),ze(r),t.value<=r.value?fn:Zs)),"Core:type":Me(([t])=>(en(t),Xt(t.type))),"Core:to_str":Me(([t])=>(en(t),t.type==="str"?t:t.type==="num"?Xt(t.value.toString()):Xt("?"))),"Core:range":Me(([t,r])=>(ze(t),ze(r),t.value<r.value?Gr(Array.from({length:r.value-t.value+1},(e,n)=>Ve(n+t.value))):t.value>r.value?Gr(Array.from({length:t.value-r.value+1},(e,n)=>Ve(t.value-n))):Gr([t]))),"Util:uuid":Me(()=>Xt(Kx())),"Json:stringify":Me(([t])=>(en(t),Xt(JSON.stringify(Nh(t))))),"Json:parse":Me(([t])=>(Ir(t),Oh(JSON.parse(t.value)))),"Json:parsable":Me(([t])=>{Ir(t);try{JSON.parse(t.value)}catch{return Fo(!1)}return Fo(!0)}),"Date:now":Me(()=>Ve(Date.now())),"Date:year":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Me(([t])=>(t&&ze(t),Ve(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Me(([t])=>(Ir(t),Ve(new Date(t.value).getTime()))),"Math:Infinity":Ve(1/0),"Math:PI":Ve(Math.PI),"Math:sin":Me(([t])=>(ze(t),Ve(Math.sin(t.value)))),"Math:cos":Me(([t])=>(ze(t),Ve(Math.cos(t.value)))),"Math:abs":Me(([t])=>(ze(t),Ve(Math.abs(t.value)))),"Math:sqrt":Me(([t])=>{ze(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new er("Invalid operation.");return Ve(r)}),"Math:round":Me(([t])=>(ze(t),Ve(Math.round(t.value)))),"Math:ceil":Me(([t])=>(ze(t),Ve(Math.ceil(t.value)))),"Math:floor":Me(([t])=>(ze(t),Ve(Math.floor(t.value)))),"Math:min":Me(([t,r])=>(ze(t),ze(r),Ve(Math.min(t.value,r.value)))),"Math:max":Me(([t,r])=>(ze(t),ze(r),Ve(Math.max(t.value,r.value)))),"Math:rnd":Me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ve(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ve(Math.random())),"Math:gen_rng":Me(([t])=>{if(en(t),t.type!=="num"&&t.type!=="str")return Dt;const r=hf(t.value.toString());return Me(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ve(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ve(r()))}),"Num:to_hex":Me(([t])=>(ze(t),Xt(t.value.toString(16)))),"Num:from_hex":Me(([t])=>(Ir(t),Ve(parseInt(t.value,16)))),"Str:lf":Xt(`
`),"Str:lt":Me(([t,r])=>(Ir(t),Ir(r),t.value<r.value?Ve(-1):t.value===r.value?Ve(0):Ve(1))),"Str:gt":Me(([t,r])=>(Ir(t),Ir(r),t.value>r.value?Ve(-1):t.value===r.value?Ve(0):Ve(1))),"Obj:keys":Me(([t])=>(li(t),Gr(Array.from(t.value.keys()).map(r=>Xt(r))))),"Obj:vals":Me(([t])=>(li(t),Gr(Array.from(t.value.values())))),"Obj:kvs":Me(([t])=>(li(t),Gr(Array.from(t.value.entries()).map(([r,e])=>Gr([Xt(r),e]))))),"Obj:get":Me(([t,r])=>(li(t),Ir(r),t.value.get(r.value)??Dt)),"Obj:set":Me(([t,r,e])=>(li(t),Ir(r),en(e),t.value.set(r.value,e),Dt)),"Obj:has":Me(([t,r])=>(li(t),Ir(r),Fo(t.value.has(r.value)))),"Obj:copy":Me(([t])=>(li(t),pp(new Map(t.value)))),"Async:interval":Me(async([t,r,e],n)=>{ze(t),vi(r),e&&(ds(e),e.value&&n.call(r,[]));const h=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(h)};return n.registerAbortHandler(d),Me(([],$)=>{clearInterval(h),$.unregisterAbortHandler(d)})}),"Async:timeout":Me(async([t,r],e)=>{ze(t),vi(r);const n=setTimeout(()=>{e.call(r,[])},t.value),h=()=>{clearTimeout(n)};return e.registerAbortHandler(h),Me(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(h)})})},vo={num:{to_str:t=>Me(async(r,e)=>Xt(t.value.toString()))},str:{to_num:t=>Me(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Dt:Ve(n)}),len:t=>Ve(pf(t.value)),replace:t=>Me(async([r,e],n)=>(Ir(r),Ir(e),Xt(t.value.split(r.value).join(e.value)))),index_of:t=>Me(async([r],e)=>(Ir(r),Ve(gf(t.value,r.value)))),incl:t=>Me(async([r],e)=>(Ir(r),t.value.includes(r.value)?fn:Zs)),trim:t=>Me(async(r,e)=>Xt(t.value.trim())),upper:t=>Me(async(r,e)=>Xt(t.value.toUpperCase())),lower:t=>Me(async(r,e)=>Xt(t.value.toLowerCase())),split:t=>Me(async([r],e)=>(r&&Ir(r),Gr(r?t.value.split(r?r.value:"").map(n=>Xt(n)):Dn(t.value).map(n=>Xt(n))))),slice:t=>Me(async([r,e],n)=>(ze(r),ze(e),Xt(vf(t.value,r.value,e.value)))),pick:t=>Me(async([r],e)=>{ze(r);const h=Dn(t.value)[r.value];return h?Xt(h):Dt})},arr:{len:t=>Ve(t.value.length),push:t=>Me(async([r],e)=>(en(r),t.value.push(r),t)),unshift:t=>Me(async([r],e)=>(en(r),t.value.unshift(r),t)),pop:t=>Me(async(r,e)=>t.value.pop()??Dt),shift:t=>Me(async(r,e)=>t.value.shift()??Dt),concat:t=>Me(async([r],e)=>(tf(r),Gr(t.value.concat(r.value)))),slice:t=>Me(async([r,e],n)=>(ze(r),ze(e),Gr(t.value.slice(r.value,e.value)))),join:t=>Me(async([r],e)=>(r&&Ir(r),Xt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Me(async([r],e)=>{vi(r);const n=t.value.map(async(h,d)=>await e.call(r,[h,Ve(d)]));return Gr(await Promise.all(n))}),filter:t=>Me(async([r],e)=>{vi(r);const n=[];for(let h=0;h<t.value.length;h++){const d=t.value[h],$=await e.call(r,[d,Ve(h)]);ds($),$.value&&n.push(d)}return Gr(n)}),reduce:t=>Me(async([r,e],n)=>{vi(r);const h=e!=null;let d=h?e:t.value[0];for(let $=h?0:1;$<t.value.length;$++){const b=t.value[$];d=await n.call(r,[d,b,Ve($)])}return d}),find:t=>Me(async([r],e)=>{vi(r);for(let n=0;n<t.value.length;n++){const h=t.value[n],d=await e.call(r,[h,Ve(n)]);if(ds(d),d.value)return h}return Dt}),incl:t=>Me(async([r],e)=>(en(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Zs:(h=>h.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?fn:Zs)),reverse:t=>Me(async(r,e)=>(t.value.reverse(),Dt)),copy:t=>Me(async(r,e)=>Gr([...t.value])),sort:t=>Me(async([r],e)=>{const n=async(d,$)=>{if(d.length<=1)return d;const b=Math.floor(d.length/2),k=await n(d.slice(0,b),$),E=await n(d.slice(b),$);return h(k,E,$)},h=async(d,$,b)=>{const k=[];let E=0,F=0;for(;E<d.length&&F<$.length;){const j=d[E],D=$[F],V=await e.call(b,[j,D]);ze(V),V.value<0?(k.push(d[E]),E++):(k.push($[F]),F++)}return k.concat(d.slice(E)).concat($.slice(F))};return vi(r),tf(t),t.value=await n(t.value,r),t})}};var sn=function(t,r,e,n){var h=arguments.length,d=h<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var b=t.length-1;b>=0;b--)($=t[b])&&(d=(h<3?$(d):h>3?$(r,e,d):$(r,e))||d);return h>3&&d&&Object.defineProperty(r,e,d),d};const ed=300,nb=ed-1;class Cs{constructor(r,e){me(this,"vars");me(this,"opts");me(this,"stepCount",0);me(this,"stop",!1);me(this,"scope");me(this,"abortHandlers",[]);this.opts=e??{};const n={print:Me(([h])=>{en(h),this.opts.out&&this.opts.out(h)}),readline:Me(async h=>{const d=h[0];if(Ir(d),this.opts.in==null)return Dt;const $=await this.opts.in(d.value);return Xt($)})};this.vars={...r,...sb,...n},this.scope=new Wn([new Map(Object.entries(this.vars))]),this.scope.opts.log=(h,d)=>{switch(h){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(h){switch(h.type){case"arr":return h.value.map(d=>e(d));case"bool":return h.value;case"null":return null;case"num":return h.value;case"obj":{const d={};for(const[$,b]of h.value.entries())d[$]=e(b);return d}case"str":return h.value;default:return}}const n=new Map;for(const h of r)switch(h.type){case"meta":{n.set(h.name,e(h.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const h=await this._eval(n.expr,e);e.add(n.name,h),this.scope.add(r.name+":"+n.name,h);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Dt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const h=r.scope.createChildScope(n);return Xx(await this._run(r.statements,h))}}async _eval(r,e){if(this.stop)return Dt;if(this.stepCount%ed===nb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new er("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);vi(n);const h=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,h)}case"if":{const n=await this._eval(r.cond,e);if(ds(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const h of r.elseif){const d=await this._eval(h.cond,e);if(ds(d),d.value)return this._eval(h.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Dt}case"match":{const n=await this._eval(r.about,e);for(const h of r.qs){const d=await this._eval(h.q,e);if(Sh(n,d))return await this._eval(h.a,e)}return r.default?await this._eval(r.default,e):Dt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Dt}case"for":{if(r.times){const n=await this._eval(r.times,e);ze(n);for(let h=0;h<n.value;h++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),h=await this._eval(r.to,e);ze(n),ze(h);for(let d=n.value;d<n.value+h.value;d++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Ve(d)]])));if($.type==="break")break;if($.type==="return")return $}}return Dt}case"each":{const n=await this._eval(r.items,e);tf(n);for(const h of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,h]])));if(d.type==="break")break;if(d.type==="return")return d}return Dt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const h=[];for(const d of r.attr)h.push({name:d.name,value:await this._eval(d.value,e)});n.attr=h}return e.add(r.name,n),Dt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Dt}case"addAssign":{const n=await this._eval(r.dest,e);ze(n);const h=await this._eval(r.expr,e);return ze(h),await this.assign(e,r.dest,Ve(n.value+h.value)),Dt}case"subAssign":{const n=await this._eval(r.dest,e);ze(n);const h=await this._eval(r.expr,e);return ze(h),await this.assign(e,r.dest,Ve(n.value-h.value)),Dt}case"null":return Dt;case"bool":return Fo(r.value);case"num":return Ve(r.value);case"str":return Xt(r.value);case"arr":return Gr(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const h of r.value.keys())n.set(h,await this._eval(r.value.get(h),e));return pp(n)}case"prop":{const n=await this._eval(r.target,e);if(tb(n))return n.value.has(r.name)?n.value.get(r.name):Dt;if(eb(n)){if(Object.hasOwn(vo.num,r.name))return vo.num[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else if(Yx(n)){if(Object.hasOwn(vo.str,r.name))return vo.str[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else if(rb(n)){if(Object.hasOwn(vo.arr,r.name))return vo.arr[r.name](n);throw new er(`No such prop (${r.name}) in ${n.type}.`)}else throw new er(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);tf(n);const h=await this._eval(r.index,e);ze(h);const d=n.value[h.value];if(d===void 0)throw new Ux(`Index out of range. index: ${h.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return ds(n),Fo(!n.value)}case"fn":return Jx(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const h of r.tmpl)if(typeof h=="string")n+=h;else{const d=await this._eval(h,e);let $="";d.type==="str"?$=d.value:d.type==="num"&&($=d.value.toString()),n+=$}return Xt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Zx(n)}case"break":return this.log("block:break",{scope:e.name}),Gx();case"continue":return this.log("block:continue",{scope:e.name}),Qx();case"ns":return Dt;case"meta":return Dt;case"and":{const n=await this._eval(r.left,e);if(ds(n),n.value){const h=await this._eval(r.right,e);return ds(h),h}else return n}case"or":{const n=await this._eval(r.left,e);if(ds(n),n.value)return n;{const h=await this._eval(r.right,e);return ds(h),h}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Dt;for(let h=0;h<r.length;h++){const d=r[h];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const h=await this._eval(e.target,r);tf(h);const d=await this._eval(e.index,r);ze(d),h.value[d.value]=n}else if(e.type==="prop"){const h=await this._eval(e.target,r);li(h),h.value.set(e.name,n)}else throw new er("The left-hand side of an assignment expression must be a variable or a property/index access.")}}sn([ct],Cs.prototype,"exec",null);sn([ct],Cs.prototype,"execFn",null);sn([ct],Cs.prototype,"log",null);sn([ct],Cs.prototype,"collectNs",null);sn([ct],Cs.prototype,"collectNsMember",null);sn([ct],Cs.prototype,"_fn",null);sn([ct],Cs.prototype,"_eval",null);sn([ct],Cs.prototype,"_run",null);sn([ct],Cs.prototype,"registerAbortHandler",null);sn([ct],Cs.prototype,"unregisterAbortHandler",null);sn([ct],Cs.prototype,"abort",null);sn([ct],Cs.prototype,"assign",null);sn([ct],Cs,"collectMetadata",null);function ab(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function Yu(t,r,e,n){var h=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(h,Yu.prototype),h.expected=r,h.found=e,h.location=n,h.name="SyntaxError",h}ab(Yu,Error);function zc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}Yu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var h=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(h):h,$=this.location.source+":"+d.line+":"+d.column;if(e){var b=this.location.end,k=zc("",d.line.toString().length," "),E=e[h.line-1],F=h.line===b.line?b.column:E.length+1,j=F-h.column||1;r+=`
 --> `+$+`
`+k+` |
`+d.line+" | "+E+`
`+k+" | "+zc("",h.column-1," ")+zc("",j,"^")}else r+=`
 at `+$}return r};Yu.buildMessage=function(t,r){var e={literal:function(E){return'"'+h(E.text)+'"'},class:function(E){var F=E.parts.map(function(j){return Array.isArray(j)?d(j[0])+"-"+d(j[1]):d(j)});return"["+(E.inverted?"^":"")+F.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(E){return E.description}};function n(E){return E.charCodeAt(0).toString(16).toUpperCase()}function h(E){return E.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function d(E){return E.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(F){return"\\x0"+n(F)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(F){return"\\x"+n(F)})}function $(E){return e[E.type](E)}function b(E){var F=E.map($),j,D;if(F.sort(),F.length>0){for(j=1,D=1;j<F.length;j++)F[j-1]!==F[j]&&(F[D]=F[j],D++);F.length=D}switch(F.length){case 1:return F[0];case 2:return F[0]+" or "+F[1];default:return F.slice(0,-1).join(", ")+", or "+F[F.length-1]}}function k(E){return E?'"'+h(E)+'"':"end of input"}return"Expected "+b(t)+" but "+k(r)+" found."};function bv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,h={Preprocess:M,Main:_a},d=M,$="//",b="/*",k="*/",E="(",F=")",j="::",D="{",V="}",pe="###",ee="let",ie=":",ke="=",H="var",L="<:",B="#[",q="]",J="each",G=",",Q="for",X="return",$e="loop",Pe="break",ge="continue",qe="+=",it="-=",Zt="\\",lt="||",ut="&&",Ie="==",at="!=",St="<=",Ft=">=",Qe="<",Nr=">",Lt="+",wr="-",Pt="*",dr="^",Or="/",kr="%",Mr="!",Nt="[",U=".",K="if",te="elif",ce="else",he="match",le="=>",Oe="eval",de="`",we='"',oe="'",De='\\"',je="\\'",Be="true",We="false",Ze="null",rt=";",st="@",wt="@(",Bt=`\r
`,bt=/^[A-Z0-9_:]/i,Gt=/^[^`{]/,_s=/^[{}`]/,Vr=/^[+\-]/,Ot=/^[1-9]/,ht=/^[0-9]/,jt=/^[A-Z_]/i,Vn=/^[A-Z0-9_]/i,Kn=/^[\r\n]/,Ci=/^[ \t\r\n]/,_i=/^[ \t]/,tr=lu(),rr=Y("//",!1),ki=Y("/*",!1),vn=Y("*/",!1),mr=Y("(",!1),Et=Y(")",!1),$r=Y("::",!1),sr=Y("{",!1),Ye=Y("}",!1),Ht=Y("###",!1),jr=Y("let",!1),dt=Y(":",!1),yt=Y("=",!1),ns=Y("var",!1),Pi=Y("<:",!1),Ei=Y("#[",!1),ks=Y("]",!1),as=Y("each",!1),mt=Y(",",!1),pt=Y("for",!1),Ps=Y("return",!1),ur=Ut([["A","Z"],["0","9"],"_",":"],!1,!0),or=Y("loop",!1),Mi=Y("break",!1),Si=Y("continue",!1),Fi=Y("+=",!1),Ni=Y("-=",!1),Jn=Y("\\",!1),Zn=Y("||",!1),Oi=Y("&&",!1),Ti=Y("==",!1),Ii=Y("!=",!1),ji=Y("<=",!1),Ri=Y(">=",!1),Gn=Y("<",!1),gn=Y(">",!1),Qn=Y("+",!1),Di=Y("-",!1),Xn=Y("*",!1),Yn=Y("^",!1),Li=Y("/",!1),Bi=Y("%",!1),Hi=Y("!",!1),dn=Y("[",!1),is=Y(".",!1),yn=Y("if",!1),Ui=Y("elif",!1),qi=Y("else",!1),zi=Y("match",!1),Es=Y("=>",!1),Ms=Y("eval",!1),Ss=Y("`",!1),Wi=Ut(["`","{"],!0,!1),Fs=Ut(["{","}","`"],!1,!1),Ns=Y('"',!1),Os=Y("'",!1),Ts=Y('\\"',!1),Is=Y("\\'",!1),js=Ut(["+","-"],!1,!1),ea=Ut([["1","9"]],!1,!1),Mt=Ut([["0","9"]],!1,!1),ta=Y("true",!1),nr=Y("false",!1),Vi=Y("null",!1),Rs=Y(";",!1),Ki=Y("@",!1),ls=Y("@(",!1),Ji=Ut([["A","Z"],"_"],!1,!0),wn=Ut([["A","Z"],["0","9"],"_"],!1,!0),Zi=Y(`\r
`,!1),ra=Ut(["\r",`
`],!1,!1),Gi=Ut([" ","	","\r",`
`],!1,!1),Qi=Ut([" ","	"],!1,!1),Xi=function(l){return l.join("")},Yi=function(){return A()},el=function(){return A()},tl=function(){return""},rl=function(){return""},sl=function(l){return l??[]},sa=function(l,f){return f},nl=function(l,f){return[l,...f]},mn=function(l,f){return f},al=function(l,f){return[l,...f]},$n=function(l,f){return f},il=function(l,f){return[l,...f]},na=function(l){return l},ll=function(l,f){return ne("ns",{name:l,members:f})},ul=function(l,f){return ne("meta",{name:l,value:f})},ol=function(l){return ne("meta",{name:null,value:l})},fl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},cl=function(l,f,y){return ne("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},hl=function(l){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[l]})]})},pl=function(l,f){return ne("attr",{name:l,value:f??ne("bool",{value:!0})})},vl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},gl=function(l,f,y){return ne("each",{var:l,items:f,for:y})},dl=function(l,f){return f},yl=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},wl=function(l,f){return f},ml=function(l,f,y,c){return ne("for",{var:l,from:f??ne("num",{value:0}),to:y,for:c})},$l=function(l,f){return ne("for",{times:l,for:f})},xl=function(l,f){return ne("for",{times:l,for:f})},bl=function(l){return ne("return",{expr:l})},Al=function(l){return ne("loop",{statements:l})},Cl=function(){return ne("break",{})},_l=function(){return ne("continue",{})},kl=function(l,f,y){return f==="+="?ne("addAssign",{dest:l,expr:y}):f==="-="?ne("subAssign",{dest:l,expr:y}):ne("assign",{dest:l,expr:y})},aa=function(l,f,y){return{op:f,term:y}},Pl=function(l,f){return ne("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ia=function(){return A()},El=function(l){return ne("not",{expr:l})},Ml=function(l,f){return{...l,chain:f}},Sl=function(l){return ne("callChain",{args:l??[]})},la=function(l,f){return f},Fl=function(l,f){return[l,...f]},ua=function(l){return ne("indexChain",{index:l})},Nl=function(l){return ne("propChain",{name:l})},Ol=function(l,f,y,c){return ne("if",{cond:l,then:f,elseif:y??[],else:c})},Tl=function(l,f){return[l,...f]},Il=function(l,f){return{cond:l,then:f}},jl=function(l){return l},oa=function(l,f,y){return{q:f,a:y}},Rl=function(l,f,y){return ne("match",{about:l,qs:f??[],default:y})},fa=function(l){return ne("block",{statements:l})},Dl=function(l){return ne("identifier",{name:l})},Ll=function(l){return ne("tmpl",{tmpl:l})},Bl=function(l){return l.join("")},ca=function(l){return l},Hl=function(l){return ne("str",{value:l.join("")})},ha=function(l){return l},pa=function(l){return ne("str",{value:l.join("")})},Ul=function(){return'"'},va=function(){return"'"},ql=function(){return ne("num",{value:parseFloat(A())})},zl=function(){return ne("num",{value:parseFloat(A())})},Wl=function(){return ne("num",{value:parseInt(A(),10)})},Vl=function(){return ne("num",{value:parseInt(A(),10)})},Kl=function(){return ne("bool",{value:!0})},Jl=function(){return ne("bool",{value:!1})},Zl=function(){return ne("null",{})},ga=function(l,f){return{k:l,v:f}},Gl=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},da=function(l){return l},ya=function(l){return ne("arr",{value:l})},Ql=function(l,f){return{name:l,argType:f}},wa=function(l,f){return[l,...f]},Xl=function(l,f,y,c,s,u){return(l.length>0||y.length>0)&&Ls("Cannot use spaces before or after the function name."),ne("def",{name:f,expr:ne("fn",{args:c??[],retType:s},u??[]),mut:!1,attr:[]})},Yl=function(l,f,y){return ne("fn",{args:l??[],retType:f},y??[])},ma=function(l){return l},eu=function(l){return ne("arr",{value:l})},$a=function(l,f){return{k:l,v:f}},xa=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ne("obj",{value:f})},tu=function(l,f){return ne("fnTypeSource",{args:l??[],result:f})},ba=function(l,f){return[l,...f]},ru=function(l,f){return ne("namedTypeSource",{name:l,inner:f})},su=function(l){return ne("namedTypeSource",{name:l,inner:null})},nu=function(){return A()},au=function(){return A()},iu=function(l){return ne("block",{statements:l??[]})},i=0,W=0,Ds=[{line:1,column:1}],a=0,z=[],C=0,N={},Rr;if("startRule"in r){if(!(r.startRule in h))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=h[r.startRule]}function A(){return t.substring(W,i)}function T(){return Bs(W,i)}function Ls(l,f){throw f=f!==void 0?f:Bs(W,i),Aa(l,f)}function Y(l,f){return{type:"literal",text:l,ignoreCase:f}}function Ut(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function lu(){return{type:"any"}}function se(){return{type:"end"}}function Tt(l){var f=Ds[l],y;if(f)return f;for(y=l-1;!Ds[y];)y--;for(f=Ds[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ds[l]=f,f}function Bs(l,f,y){var c=Tt(l),s=Tt(f),u={source:n,start:{offset:l,line:c.line,column:c.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(u.start=n.offset(u.start),u.end=n.offset(u.end)),u}function S(l){i<a||(i>a&&(a=i,z=[]),z.push(l))}function Aa(l,f){return new Yu(l,null,null,f)}function Hs(l,f,y){return new Yu(Yu.buildMessage(l,f),l,f,y)}function M(){var l,f,y,c=i*76+0,s=N[c];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ca();y!==e;)f.push(y),y=Ca();return W=l,f=Xi(f),l=f,N[c]={nextPos:i,result:l},l}function Ca(){var l,f,y=i*76+1,c=N[y];return c?(i=c.nextPos,c.result):(l=i,f=Oa(),f!==e&&(W=l,f=Yi()),l=f,l===e&&(l=i,f=qs(),f!==e&&(W=l,f=el()),l=f,l===e&&(l=uu(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,C===0&&S(tr))))),N[y]={nextPos:i,result:l},l)}function uu(){var l,f,y,c,s,u,p=i*76+2,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,C===0&&S(rr)),f!==e){for(y=[],c=i,s=i,C++,u=za(),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,u=za(),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=tl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===b?(f=b,i+=2):(f=e,C===0&&S(ki)),f!==e){for(y=[],c=i,s=i,C++,t.substr(i,2)===k?(u=k,i+=2):(u=e,C===0&&S(vn)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.substr(i,2)===k?(u=k,i+=2):(u=e,C===0&&S(vn)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr)),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);t.substr(i,2)===k?(c=k,i+=2):(c=e,C===0&&S(vn)),c!==e?(W=l,l=rl()):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function _a(){var l,f,y,c,s,u=i*76+3,p=N[u];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();for(y=ka(),y===e&&(y=null),c=[],s=x();s!==e;)c.push(s),s=x();return W=l,l=sl(y),N[u]={nextPos:i,result:l},l}function ka(){var l,f,y,c,s,u,p,o,g=i*76+4,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=xn(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=xn(),o!==e?(W=c,c=sa(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=xn(),o!==e?(W=c,c=sa(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=nl(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function ou(){var l,f,y,c,s,u,p,o,g=i*76+5,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=bn(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=bn(),o!==e?(W=c,c=mn(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=bn(),o!==e?(W=c,c=mn(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=al(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function us(){var l,f,y,c,s,u,p,o,g=i*76+6,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=fr(),f!==e){for(y=[],c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=fr(),o!==e?(W=c,c=$n(f,o)):(i=c,c=e)}else i=c,c=e;for(;c!==e;){for(y.push(c),c=i,s=[],u=be();u!==e;)s.push(u),u=be();if(u=Ue(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=fr(),o!==e?(W=c,c=$n(f,o)):(i=c,c=e)}else i=c,c=e}W=l,l=il(f,y)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function xn(){var l,f=i*76+7,y=N[f];return y?(i=y.nextPos,y.result):(l=os(),l===e&&(l=Pa(),l===e&&(l=fr())),N[f]={nextPos:i,result:l},l)}function bn(){var l,f=i*76+8,y=N[f];return y?(i=y.nextPos,y.result):(l=xr(),l===e&&(l=Ua(),l===e&&(l=os())),N[f]={nextPos:i,result:l},l)}function fr(){var l,f=i*76+9,y=N[f];return y?(i=y.nextPos,y.result):(l=xr(),l===e&&(l=Ua(),l===e&&(l=Ea(),l===e&&(l=hu(),l===e&&(l=fu(),l===e&&(l=Ma(),l===e&&(l=cu(),l===e&&(l=pu(),l===e&&(l=vu(),l===e&&(l=gu(),l===e&&(l=du(),l===e&&(l=Re()))))))))))),N[f]={nextPos:i,result:l},l)}function Re(){var l,f=i*76+10,y=N[f];return y?(i=y.nextPos,y.result):(l=yu(),l===e&&(l=Dr()),N[f]={nextPos:i,result:l},l)}function Dr(){var l,f=i*76+11,y=N[f];return y?(i=y.nextPos,y.result):(l=$u(),l===e&&(l=ku(),l===e&&(l=Ar(),l===e&&(l=Lr()))),N[f]={nextPos:i,result:l},l)}function Lr(){var l,f,y,c,s,u,p=i*76+12,o=N[p];if(o)return i=o.nextPos,o.result;if(l=bu(),l===e&&(l=_n(),l===e&&(l=Oa(),l===e&&(l=qs(),l===e&&(l=Ra(),l===e&&(l=Mn(),l===e&&(l=Ba(),l===e&&(l=Ha(),l===e&&(l=_u(),l===e&&(l=wu(),l===e&&(l=Au(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(mr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e?(W=l,l=na(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=N[f];return y?(i=y.nextPos,y.result):(l=Ra(),l===e&&(l=qs(),l===e&&(l=Mn(),l===e&&(l=Nn(),l===e&&(l=qa(),l===e&&(l=Ba()))))),N[f]={nextPos:i,result:l},l)}function os(){var l,f,y,c,s,u,p,o,g,v,m=i*76+14,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===j?(f=j,i+=2):(f=e,C===0&&S($r)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=D,i++):(u=e,C===0&&S(sr)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(o=ou(),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();t.charCodeAt(i)===125?(v=V,i++):(v=e,C===0&&S(Ye)),v!==e?(W=l,l=ll(c,o)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Pa(){var l,f,y,c,s,u,p=i*76+15,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Ht)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=He(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();u=Te(),u!==e?(W=l,l=ul(c,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===pe?(f=pe,i+=3):(f=e,C===0&&S(Ht)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();c=Te(),c!==e?(W=l,l=ol(c)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function xr(){var l,f,y,c,s,u,p,o,g,v=i*76+16,m=N[v];if(m)return i=m.nextPos,m.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,C===0&&S(jr)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,C===0&&S(dt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=qt(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===61?(p=ke,i++):(p=e,C===0&&S(yt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=Re(),g!==e?(W=l,l=fl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===H?(f=H,i+=3):(f=e,C===0&&S(ns)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===58?(p=ie,i++):(p=e,C===0&&S(dt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=qt(),g!==e?s=g:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===61?(p=ke,i++):(p=e,C===0&&S(yt)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();g=Re(),g!==e?(W=l,l=cl(c,s,g)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[v]={nextPos:i,result:l},l}function Ea(){var l,f,y,c,s=i*76+17,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,C===0&&S(Pi)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();c=Re(),c!==e?(W=l,l=hl(c)):(i=l,l=e)}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function fu(){var l,f,y,c,s,u,p,o=i*76+18,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,2)===B?(f=B,i+=2):(f=e,C===0&&S(Ei)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=He(),c!==e){for(s=i,u=[],p=x();p!==e;)u.push(p),p=x();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),u=[],p=x();p!==e;)u.push(p),p=x();t.charCodeAt(i)===93?(p=q,i++):(p=e,C===0&&S(ks)),p!==e?(W=l,l=pl(c,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[o]={nextPos:i,result:l},l}function Ma(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+19,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(jr)),s!==e){if(u=[],p=x(),p!==e)for(;p!==e;)u.push(p),p=x();else u=e;if(u!==e)if(p=He(),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();for(t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e)if(t.charCodeAt(i)===41?(w=F,i++):(w=e,C===0&&S(Et)),w!==e){for(_=[],P=x();P!==e;)_.push(P),P=x();P=It(),P!==e?(W=l,l=vl(p,m,P)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===J?(f=J,i+=4):(f=e,C===0&&S(as)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(jr)),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();if(v=Re(),v!==e){if(m=[],w=x(),w!==e)for(;w!==e;)m.push(w),w=x();else m=e;m!==e?(w=It(),w!==e?(W=l,l=gl(u,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function cu(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R=i*76+20,Z=N[R];if(Z)return i=Z.nextPos,Z.result;if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,C===0&&S(jr)),s!==e){if(u=[],p=x(),p!==e)for(;p!==e;)u.push(p),p=x();else u=e;if(u!==e)if(p=He(),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();if(g=i,t.charCodeAt(i)===61?(v=ke,i++):(v=e,C===0&&S(yt)),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();w=Re(),w!==e?(W=g,g=dl(p,w)):(i=g,g=e)}else i=g,g=e;for(g===e&&(g=null),t.charCodeAt(i)===44?(v=G,i++):(v=e,C===0&&S(mt)),v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();if(w=Re(),w!==e)if(t.charCodeAt(i)===41?(_=F,i++):(_=e,C===0&&S(Et)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=It(),I!==e?(W=l,l=yl(p,g,w,I)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(t.substr(i,3)===ee?(c=ee,i+=3):(c=e,C===0&&S(jr)),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(o=i,t.charCodeAt(i)===61?(g=ke,i++):(g=e,C===0&&S(yt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=Re(),m!==e?(W=o,o=wl(u,m)):(i=o,o=e)}else i=o,o=e;for(o===e&&(o=null),t.charCodeAt(i)===44?(g=G,i++):(g=e,C===0&&S(mt)),g===e&&(g=null),v=[],m=x();m!==e;)v.push(m),m=x();if(m=Re(),m!==e){if(w=[],_=x(),_!==e)for(;_!==e;)w.push(_),_=x();else w=e;w!==e?(_=It(),_!==e?(W=l,l=ml(u,o,m,_)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===40?(c=E,i++):(c=e,C===0&&S(mr)),c!==e)if(s=Re(),s!==e)if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();o=It(),o!==e?(W=l,l=$l(s,o)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===Q?(f=Q,i+=3):(f=e,C===0&&S(pt)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;s!==e?(u=It(),u!==e?(W=l,l=xl(c,u)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return N[R]={nextPos:i,result:l},l}function hu(){var l,f,y,c,s,u=i*76+21,p=N[u];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===X?(f=X,i+=6):(f=e,C===0&&S(Ps)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=Re(),s!==e?(W=l,l=bl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[u]={nextPos:i,result:l},l}function pu(){var l,f,y,c,s,u,p,o,g=i*76+22,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===$e?(f=$e,i+=4):(f=e,C===0&&S(or)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();if(u=us(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=Al(u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function vu(){var l,f,y,c,s=i*76+23,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,5)===Pe?(f=Pe,i+=5):(f=e,C===0&&S(Mi)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Cl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function gu(){var l,f,y,c,s=i*76+24,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,8)===ge?(f=ge,i+=8):(f=e,C===0&&S(Si)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=_l()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function du(){var l,f,y,c,s,u,p=i*76+25,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Re(),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.substr(i,2)===qe?(c=qe,i+=2):(c=e,C===0&&S(Fi)),c===e&&(t.substr(i,2)===it?(c=it,i+=2):(c=e,C===0&&S(Ni)),c===e&&(t.charCodeAt(i)===61?(c=ke,i++):(c=e,C===0&&S(yt)))),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();u=Re(),u!==e?(W=l,l=kl(f,c,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function yu(){var l,f,y,c,s,u,p,o,g=i*76+26,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=Dr(),f!==e){for(y=[],c=i,s=[],u=br();u!==e;)s.push(u),u=br();if(u=Sa(),u!==e){for(p=[],o=br();o!==e;)p.push(o),o=br();o=Dr(),o!==e?(W=c,c=aa(f,u,o)):(i=c,c=e)}else i=c,c=e;if(c!==e)for(;c!==e;){for(y.push(c),c=i,s=[],u=br();u!==e;)s.push(u),u=br();if(u=Sa(),u!==e){for(p=[],o=br();o!==e;)p.push(o),o=br();o=Dr(),o!==e?(W=c,c=aa(f,u,o)):(i=c,c=e)}else i=c,c=e}else y=e;y!==e?(W=l,l=Pl(f,y)):(i=l,l=e)}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function br(){var l,f,y,c=i*76+27,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(y=Ue(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=be()),N[c]={nextPos:i,result:l},l)}function Sa(){var l,f,y=i*76+28,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===lt?(f=lt,i+=2):(f=e,C===0&&S(Zn)),f===e&&(t.substr(i,2)===ut?(f=ut,i+=2):(f=e,C===0&&S(Oi)),f===e&&(t.substr(i,2)===Ie?(f=Ie,i+=2):(f=e,C===0&&S(Ti)),f===e&&(t.substr(i,2)===at?(f=at,i+=2):(f=e,C===0&&S(Ii)),f===e&&(t.substr(i,2)===St?(f=St,i+=2):(f=e,C===0&&S(ji)),f===e&&(t.substr(i,2)===Ft?(f=Ft,i+=2):(f=e,C===0&&S(Ri)),f===e&&(t.charCodeAt(i)===60?(f=Qe,i++):(f=e,C===0&&S(Gn)),f===e&&(t.charCodeAt(i)===62?(f=Nr,i++):(f=e,C===0&&S(gn)),f===e&&(t.charCodeAt(i)===43?(f=Lt,i++):(f=e,C===0&&S(Qn)),f===e&&(t.charCodeAt(i)===45?(f=wr,i++):(f=e,C===0&&S(Di)),f===e&&(t.charCodeAt(i)===42?(f=Pt,i++):(f=e,C===0&&S(Xn)),f===e&&(t.charCodeAt(i)===94?(f=dr,i++):(f=e,C===0&&S(Yn)),f===e&&(t.charCodeAt(i)===47?(f=Or,i++):(f=e,C===0&&S(Li)),f===e&&(t.charCodeAt(i)===37?(f=kr,i++):(f=e,C===0&&S(Bi))))))))))))))),f!==e&&(W=l,f=ia()),l=f,N[y]={nextPos:i,result:l},l)}function wu(){var l,f,y,c=i*76+29,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Mr,i++):(f=e,C===0&&S(Hi)),f!==e?(y=Re(),y!==e?(W=l,l=El(y)):(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function Ar(){var l,f,y,c,s=i*76+30,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,f=Lr(),f!==e){if(y=[],c=An(),c===e&&(c=Fa(),c===e&&(c=Cn())),c!==e)for(;c!==e;)y.push(c),c=An(),c===e&&(c=Fa(),c===e&&(c=Cn()));else y=e;y!==e?(W=l,l=Ml(f,y)):(i=l,l=e)}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function An(){var l,f,y,c,s,u,p=i*76+31,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===40?(f=E,i++):(f=e,C===0&&S(mr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=mu(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e?(W=l,l=Sl(c)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function mu(){var l,f,y,c,s,u,p=i*76+32,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Re(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=Re(),u!==e?(W=c,c=la(f,u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=Re(),u!==e?(W=c,c=la(f,u)):(i=c,c=e)):(i=c,c=e);W=l,l=Fl(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Fa(){var l,f,y,c,s,u,p=i*76+33,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=Re(),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=ua(c)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Cn(){var l,f,y,c=i*76+34,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=U,i++):(f=e,C===0&&S(is)),f!==e?(y=He(),y!==e?(W=l,l=Nl(y)):(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function $u(){var l,f,y,c,s,u,p,o,g,v,m=i*76+35,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===K?(f=K,i+=2):(f=e,C===0&&S(yn)),f!==e){if(y=[],c=x(),c!==e)for(;c!==e;)y.push(c),c=x();else y=e;if(y!==e)if(c=Re(),c!==e){if(s=[],u=x(),u!==e)for(;u!==e;)s.push(u),u=x();else s=e;if(s!==e)if(u=It(),u!==e){if(p=i,o=[],g=x(),g!==e)for(;g!==e;)o.push(g),g=x();else o=e;if(o!==e?(g=Na(),g!==e?p=g:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),o=i,g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;g!==e?(v=xu(),v!==e?o=v:(i=o,o=e)):(i=o,o=e),o===e&&(o=null),W=l,l=Ol(c,u,p,o)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Na(){var l,f,y,c,s,u,p=i*76+36,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Us(),f!==e){for(y=[],c=i,s=[],u=x();u!==e;)s.push(u),u=x();for(u=Us(),u!==e?c=u:(i=c,c=e);c!==e;){for(y.push(c),c=i,s=[],u=x();u!==e;)s.push(u),u=x();u=Us(),u!==e?c=u:(i=c,c=e)}W=l,l=Tl(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Us(){var l,f,y,c,s,u,p,o=i*76+37,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,t.substr(i,4)===te?(f=te,i+=4):(f=e,C===0&&S(Ui)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();p=It(),p!==e?(W=l,l=Il(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return N[o]={nextPos:i,result:l},l}function xu(){var l,f,y,c,s,u=i*76+38,p=N[u];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ce?(f=ce,i+=4):(f=e,C===0&&S(qi)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();s=It(),s!==e?(W=l,l=jl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[u]={nextPos:i,result:l},l}function bu(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=i*76+39,re=N[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.substr(i,5)===he?(f=he,i+=5):(f=e,C===0&&S(zi)),f!==e)if(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();if(s=Re(),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();if(t.charCodeAt(i)===123?(p=D,i++):(p=e,C===0&&S(sr)),p!==e){for(o=[],g=x();g!==e;)o.push(g),g=x();if(g=[],v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=oa(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(g.push(v),v=i,m=Re(),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();W=v,v=oa(s,m,I)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else g=e;if(g!==e){if(v=i,t.charCodeAt(i)===42?(m=Pt,i++):(m=e,C===0&&S(Xn)),m!==e){for(w=[],_=x();_!==e;)w.push(_),_=x();if(t.substr(i,2)===le?(_=le,i+=2):(_=e,C===0&&S(Es)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();if(I=It(),I!==e){for(R=[],Z=x();Z!==e;)R.push(Z),Z=x();v=I}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),m=[],w=x();w!==e;)m.push(w),w=x();t.charCodeAt(i)===125?(w=V,i++):(w=e,C===0&&S(Ye)),w!==e?(W=l,l=Rl(s,g,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return N[ye]={nextPos:i,result:l},l}function _n(){var l,f,y,c,s,u,p,o,g=i*76+40,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Oe?(f=Oe,i+=4):(f=e,C===0&&S(Ms)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(t.charCodeAt(i)===123?(c=D,i++):(c=e,C===0&&S(sr)),c!==e){for(s=[],u=x();u!==e;)s.push(u),u=x();if(u=us(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();t.charCodeAt(i)===125?(o=V,i++):(o=e,C===0&&S(Ye)),o!==e?(W=l,l=fa(u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[g]={nextPos:i,result:l},l}function Au(){var l,f,y=i*76+41,c=N[y];return c?(i=c.nextPos,c.result):(l=i,f=Su(),f!==e&&(W=l,f=Dl(f)),l=f,N[y]={nextPos:i,result:l},l)}function Oa(){var l,f,y,c,s,u,p=i*76+42,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===96?(f=de,i++):(f=e,C===0&&S(Ss)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===96?(u=de,i++):(u=e,C===0&&S(Ss)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Ta(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===96?(u=de,i++):(u=e,C===0&&S(Ss)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Ta(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===96?(c=de,i++):(c=e,C===0&&S(Ss)),c!==e?(W=l,l=Ll(y)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Ta(){var l,f,y,c,s,u,p=i*76+43,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=Re(),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?l=c:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ia(),y!==e)for(;y!==e;)f.push(y),y=Ia();else f=e;f!==e&&(W=l,f=Bl(f)),l=f}return N[p]={nextPos:i,result:l},l}function Ia(){var l,f=i*76+44,y=N[f];return y?(i=y.nextPos,y.result):(l=ja(),l===e&&(Gt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Wi))),N[f]={nextPos:i,result:l},l)}function ja(){var l,f,y,c=i*76+45,s=N[c];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=Zt,i++):(f=e,C===0&&S(Jn)),f!==e?(_s.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,C===0&&S(Fs)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),N[c]={nextPos:i,result:l},l)}function qs(){var l,f,y,c,s,u,p=i*76+46,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===34?(f=we,i++):(f=e,C===0&&S(Ns)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===34?(u=we,i++):(u=e,C===0&&S(Ns)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=kn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ca(u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===34?(u=we,i++):(u=e,C===0&&S(Ns)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=kn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ca(u)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===34?(c=we,i++):(c=e,C===0&&S(Ns)),c!==e?(W=l,l=Hl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=oe,i++):(f=e,C===0&&S(Os)),f!==e){for(y=[],c=i,s=i,C++,t.charCodeAt(i)===39?(u=oe,i++):(u=e,C===0&&S(Os)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ha(u)):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=i,C++,t.charCodeAt(i)===39?(u=oe,i++):(u=e,C===0&&S(Os)),C--,u===e?s=void 0:(i=s,s=e),s!==e?(u=Pn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,C===0&&S(tr))),u!==e?(W=c,c=ha(u)):(i=c,c=e)):(i=c,c=e);t.charCodeAt(i)===39?(c=oe,i++):(c=e,C===0&&S(Os)),c!==e?(W=l,l=pa(y)):(i=l,l=e)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function kn(){var l,f,y=i*76+47,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===De?(f=De,i+=2):(f=e,C===0&&S(Ts)),f!==e&&(W=l,f=Ul()),l=f,N[y]={nextPos:i,result:l},l)}function Pn(){var l,f,y=i*76+48,c=N[y];return c?(i=c.nextPos,c.result):(l=i,t.substr(i,2)===je?(f=je,i+=2):(f=e,C===0&&S(Is)),f!==e&&(W=l,f=va()),l=f,N[y]={nextPos:i,result:l},l)}function Ra(){var l,f=i*76+49,y=N[f];return y?(i=y.nextPos,y.result):(l=En(),l===e&&(l=Da()),N[f]={nextPos:i,result:l},l)}function En(){var l,f,y,c,s,u,p=i*76+50,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(c=U,i++):(c=e,C===0&&S(is)),c!==e){if(s=[],ht.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,C===0&&S(Mt)),u!==e)for(;u!==e;)s.push(u),ht.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,C===0&&S(Mt));else s=e;s!==e?(W=l,l=ql()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Mt)),f!==e)if(t.charCodeAt(i)===46?(y=U,i++):(y=e,C===0&&S(is)),y!==e){if(c=[],ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Mt)),s!==e)for(;s!==e;)c.push(s),ht.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,C===0&&S(Mt));else c=e;c!==e?(W=l,l=zl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Da(){var l,f,y,c,s=i*76+51,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),Ot.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(ea)),f!==e){if(y=[],ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt)),c!==e)for(;c!==e;)y.push(c),ht.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(Mt));else y=e;y!==e?(W=l,l=Wl()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,Vr.test(t.charAt(i))?(t.charAt(i),i++):C===0&&S(js),ht.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Mt)),f!==e?(W=l,l=Vl()):(i=l,l=e)),N[s]={nextPos:i,result:l},l}function Mn(){var l,f=i*76+52,y=N[f];return y?(i=y.nextPos,y.result):(l=La(),l===e&&(l=Cu()),N[f]={nextPos:i,result:l},l)}function La(){var l,f,y,c,s=i*76+53,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,4)===Be?(f=Be,i+=4):(f=e,C===0&&S(ta)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Kl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Cu(){var l,f,y,c,s=i*76+54,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,C===0&&S(nr)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Jl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Ba(){var l,f,y,c,s=i*76+55,u=N[s];return u?(i=u.nextPos,u.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,C===0&&S(Vi)),f!==e?(y=i,C++,bt.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(ur)),C--,c===e?y=void 0:(i=y,y=e),y!==e?(W=l,l=Zl()):(i=l,l=e)):(i=l,l=e),N[s]={nextPos:i,result:l},l)}function Ha(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+56,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Re(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=ga(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=Gl(c)):(i=l,l=e)}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function _u(){var l,f,y,c,s,u,p,o,g,v,m=i*76+57,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=Re(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(u)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=Re(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=da(u)}else i=s,s=e;for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=ya(c)):(i=l,l=e)}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Sn(){var l,f,y,c,s,u,p,o=i*76+58,g=N[o];if(g)return i=g.nextPos,g.result;if(l=i,f=He(),f!==e){for(y=i,c=[],s=x();s!==e;)c.push(s),s=x();if(t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e){for(u=[],p=x();p!==e;)u.push(p),p=x();p=qt(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),W=l,l=Ql(f,y)}else i=l,l=e;return N[o]={nextPos:i,result:l},l}function Fn(){var l,f,y,c,s,u,p=i*76+59,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=Sn(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=Sn(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=Sn(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);W=l,l=wa(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Ua(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I,R,Z,ye=i*76+60,re=N[ye];if(re)return i=re.nextPos,re.result;if(l=i,t.charCodeAt(i)===64?(f=st,i++):(f=e,C===0&&S(Ki)),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(c=He(),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();if(t.charCodeAt(i)===40?(u=E,i++):(u=e,C===0&&S(mr)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(o=Fn(),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();if(t.charCodeAt(i)===41?(v=F,i++):(v=e,C===0&&S(Et)),v!==e){for(m=i,w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===58?(_=ie,i++):(_=e,C===0&&S(dt)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();I=qt(),I!==e?m=I:(i=m,m=e)}else i=m,m=e;for(m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();if(t.charCodeAt(i)===123?(_=D,i++):(_=e,C===0&&S(sr)),_!==e){for(P=[],I=x();I!==e;)P.push(I),I=x();for(I=us(),I===e&&(I=null),R=[],Z=x();Z!==e;)R.push(Z),Z=x();t.charCodeAt(i)===125?(Z=V,i++):(Z=e,C===0&&S(Ye)),Z!==e?(W=l,l=Xl(y,c,s,o,m,I)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[ye]={nextPos:i,result:l},l}function ku(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P=i*76+61,I=N[P];if(I)return i=I.nextPos,I.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Fn(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=i,o=[],g=x();g!==e;)o.push(g),g=x();if(t.charCodeAt(i)===58?(g=ie,i++):(g=e,C===0&&S(dt)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();m=qt(),m!==e?p=m:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),o=[],g=x();g!==e;)o.push(g),g=x();if(t.charCodeAt(i)===123?(g=D,i++):(g=e,C===0&&S(sr)),g!==e){for(v=[],m=x();m!==e;)v.push(m),m=x();for(m=us(),m===e&&(m=null),w=[],_=x();_!==e;)w.push(_),_=x();t.charCodeAt(i)===125?(_=V,i++):(_=e,C===0&&S(Ye)),_!==e?(W=l,l=Yl(c,p,m)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[P]={nextPos:i,result:l},l}function Nn(){var l,f,y,c,s,u,p,o,g,v,m=i*76+62,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Nt,i++):(f=e,C===0&&S(dn)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=Te(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(u)}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=Te(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();for(t.charCodeAt(i)===44?(o=G,i++):(o=e,C===0&&S(mt)),o===e&&(o=null),g=[],v=x();v!==e;)g.push(v),v=x();W=s,s=ma(u)}else i=s,s=e;for(s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===93?(u=q,i++):(u=e,C===0&&S(ks)),u!==e?(W=l,l=eu(c)):(i=l,l=e)}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function qa(){var l,f,y,c,s,u,p,o,g,v,m,w,_,P,I=i*76+63,R=N[I];if(R)return i=R.nextPos,R.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();if(c=[],s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(c.push(s),s=i,u=He(),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.charCodeAt(i)===58?(o=ie,i++):(o=e,C===0&&S(dt)),o!==e){if(g=[],v=x(),v!==e)for(;v!==e;)g.push(v),v=x();else g=e;if(g!==e)if(v=Te(),v!==e){for(m=[],w=x();w!==e;)m.push(w),w=x();for(t.charCodeAt(i)===44?(w=G,i++):(w=e,C===0&&S(mt)),w===e&&(t.charCodeAt(i)===59?(w=rt,i++):(w=e,C===0&&S(Rs))),w===e&&(w=null),_=[],P=x();P!==e;)_.push(P),P=x();W=s,s=$a(u,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=V,i++):(s=e,C===0&&S(Ye)),s!==e?(W=l,l=xa(c)):(i=l,l=e)}else i=l,l=e;return N[I]={nextPos:i,result:l},l}function qt(){var l,f=i*76+64,y=N[f];return y?(i=y.nextPos,y.result):(l=Pu(),l===e&&(l=Mu()),N[f]={nextPos:i,result:l},l)}function Pu(){var l,f,y,c,s,u,p,o,g,v,m=i*76+65,w=N[m];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===wt?(f=wt,i+=2):(f=e,C===0&&S(ls)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=Eu(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();if(t.charCodeAt(i)===41?(u=F,i++):(u=e,C===0&&S(Et)),u!==e){for(p=[],o=x();o!==e;)p.push(o),o=x();if(t.substr(i,2)===le?(o=le,i+=2):(o=e,C===0&&S(Es)),o!==e){for(g=[],v=x();v!==e;)g.push(v),v=x();v=qt(),v!==e?(W=l,l=tu(c,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return N[m]={nextPos:i,result:l},l}function Eu(){var l,f,y,c,s,u,p=i*76+66,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=qt(),f!==e){for(y=[],c=i,s=Br(),s!==e?(u=qt(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,s=Br(),s!==e?(u=qt(),u!==e?c=u:(i=c,c=e)):(i=c,c=e);W=l,l=ba(f,y)}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Mu(){var l,f,y,c,s,u,p,o,g=i*76+67,v=N[g];if(v)return i=v.nextPos,v.result;if(l=i,f=He(),f!==e){for(y=[],c=be();c!==e;)y.push(c),c=be();if(t.charCodeAt(i)===60?(c=Qe,i++):(c=e,C===0&&S(Gn)),c!==e){for(s=[],u=be();u!==e;)s.push(u),u=be();if(u=qt(),u!==e){for(p=[],o=be();o!==e;)p.push(o),o=be();t.charCodeAt(i)===62?(o=Nr,i++):(o=e,C===0&&S(gn)),o!==e?(W=l,l=ru(f,u)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=He(),f!==e&&(W=l,f=su(f)),l=f),N[g]={nextPos:i,result:l},l}function He(){var l,f,y,c,s=i*76+68,u=N[s];if(u)return i=u.nextPos,u.result;if(l=i,jt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,C===0&&S(Ji)),f!==e){for(y=[],Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));c!==e;)y.push(c),Vn.test(t.charAt(i))?(c=t.charAt(i),i++):(c=e,C===0&&S(wn));W=l,l=nu()}else i=l,l=e;return N[s]={nextPos:i,result:l},l}function Su(){var l,f,y,c,s,u,p=i*76+69,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,f=He(),f!==e){for(y=[],c=i,t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e?(u=He(),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);c!==e;)y.push(c),c=i,t.charCodeAt(i)===58?(s=ie,i++):(s=e,C===0&&S(dt)),s!==e?(u=He(),u!==e?(s=[s,u],c=s):(i=c,c=e)):(i=c,c=e);W=l,l=au()}else i=l,l=e;return N[p]={nextPos:i,result:l},l}function Br(){var l,f,y,c,s,u=i*76+70,p=N[u];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=x();y!==e;)f.push(y),y=x();if(t.charCodeAt(i)===44?(y=G,i++):(y=e,C===0&&S(mt)),y!==e){for(c=[],s=x();s!==e;)c.push(s),s=x();f=[f,y,c],l=f}else i=l,l=e;if(l===e)if(l=[],f=x(),f!==e)for(;f!==e;)l.push(f),f=x();else l=e;return N[u]={nextPos:i,result:l},l}function It(){var l,f,y,c,s,u,p=i*76+71,o=N[p];if(o)return i=o.nextPos,o.result;if(l=i,t.charCodeAt(i)===123?(f=D,i++):(f=e,C===0&&S(sr)),f!==e){for(y=[],c=x();c!==e;)y.push(c),c=x();for(c=us(),c===e&&(c=null),s=[],u=x();u!==e;)s.push(u),u=x();t.charCodeAt(i)===125?(u=V,i++):(u=e,C===0&&S(Ye)),u!==e?(W=l,l=iu(c)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=fr()),N[p]={nextPos:i,result:l},l}function Ue(){var l,f=i*76+72,y=N[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Bt?(l=Bt,i+=2):(l=e,C===0&&S(Zi)),l===e&&(Kn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(ra))),N[f]={nextPos:i,result:l},l)}function za(){var l,f,y=i*76+73,c=N[y];return c?(i=c.nextPos,c.result):(l=i,C++,t.length>i?(f=t.charAt(i),i++):(f=e,C===0&&S(tr)),C--,f===e?l=void 0:(i=l,l=e),l===e&&(l=Ue()),N[y]={nextPos:i,result:l},l)}function x(){var l,f=i*76+74,y=N[f];return y?(i=y.nextPos,y.result):(Ci.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Gi)),N[f]={nextPos:i,result:l},l)}function be(){var l,f=i*76+75,y=N[f];return y?(i=y.nextPos,y.result):(_i.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,C===0&&S(Qi)),N[f]={nextPos:i,result:l},l)}function ne(l,f,y){const c={type:l};f.children=y;for(const u of Object.keys(f))f[u]!==void 0&&(c[u]=f[u]);const s=T();return c.loc={start:s.start.offset,end:s.end.offset-1},c}if(Rr=d(),Rr!==e&&i===t.length)return Rr;throw Rr!==e&&i<t.length&&S(se()),Hs(z,a<t.length?t.charAt(a):null,a<t.length?Bs(a,a+1):Bs(a,a))}const ib=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function lb(t){return ib.includes(t.type)}function td(t){return"chain"in t&&t.chain!==null}function ub(t,r,e){return{type:"call",target:t,args:r,loc:e}}function ob(t,r,e){return{type:"index",target:t,index:r,loc:e}}function fb(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function ot(t,r){const e=r(t);switch(e.type){case"def":{e.expr=ot(e.expr,r);break}case"return":{e.expr=ot(e.expr,r);break}case"each":{e.items=ot(e.items,r),e.for=ot(e.for,r);break}case"for":{e.from!=null&&(e.from=ot(e.from,r)),e.to!=null&&(e.to=ot(e.to,r)),e.times!=null&&(e.times=ot(e.times,r)),e.for=ot(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ot(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=ot(e.expr,r),e.dest=ot(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=ot(e.operands[n],r);break}case"not":{e.expr=ot(e.expr,r);break}case"if":{e.cond=ot(e.cond,r),e.then=ot(e.then,r);for(const n of e.elseif)n.cond=ot(n.cond,r),n.then=ot(n.then,r);e.else!=null&&(e.else=ot(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=ot(e.children[n],r);break}case"match":{e.about=ot(e.about,r);for(const n of e.qs)n.q=ot(n.q,r),n.a=ot(n.a,r);e.default!=null&&(e.default=ot(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ot(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const h=e.tmpl[n];typeof h!="string"&&(e.tmpl[n]=ot(h,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],ot(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=ot(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=ot(e.args[n],r);break}case"indexChain":{e.index=ot(e.index,r);break}case"call":{e.target=ot(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=ot(e.args[n],r);break}case"index":{e.target=ot(e.target,r),e.index=ot(e.index,r);break}case"prop":{e.target=ot(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=ot(e.members[n],r);break}}if(td(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=ot(e.chain[n],r);return e}const Wc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Vc(t){throw new ao(`Reserved word "${t}" cannot be used as variable name.`)}function cb(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Wc.includes(t.name)&&Vc(t.name);break}case"meta":{t.name!=null&&Wc.includes(t.name)&&Vc(t.name);break}case"fn":{for(const r of t.args)Wc.includes(r.name)&&Vc(r.name);break}}return t}function hb(t){for(const r of t)ot(r,cb);return t}function Av(t){return{type:"simple",name:t}}function pb(t,r){return{type:"generic",name:t,inners:r}}function vb(t,r){return{type:"fn",args:t,result:r}}function qf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=qf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>qf(n)).join(", "),e=qf(t.result);return`@(${r}) { ${e} }`}}}function No(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Av(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=No(t.inner):r=Av("any"),pb(t.name,[r])}}throw new ao(`Unknown type: '${qf(t)}'`)}else{const r=t.args.map(e=>No(e));return vb(r,No(t.result))}}function gb(t){switch(t.type){case"def":{t.varType!=null&&No(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&No(r.argType);t.retType!=null&&No(t.retType);break}}return t}function db(t){for(const r of t)ot(r,gb);return t}function zf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=zf(n.expr.children)),r.push(n);else{if(e.length>0)throw new ao("invalid attribute.");switch(n.type){case"fn":{n.children=zf(n.children);break}case"block":{n.statements=zf(n.statements);break}}r.push(n)}if(e.length>0)throw new ao("invalid attribute.");return r}function yb(t){if(lb(t)&&td(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const h of r)switch(h.type){case"callChain":{n=ub(n,h.args,h.loc);break}case"indexChain":{n=ob(n,h.index,h.loc);break}case"propChain":{n=fb(n,h.name,h.loc);break}}return n}return t}function wb(t){for(let r=0;r<t.length;r++)t[r]=ot(t[r],yb);return t}function Wf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function rd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Wf(t,r,e);{const{left:n,right:h,info:d}=t;return Wf(n,rd(h,r,e),d)}}function qu(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[qu(t.left),qu(t.right)]}}const mb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:qu(t.left),right:qu(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:qu(t.left),right:qu(t.right)}),priority:3}};function $b(t){const r=t.operators.map(n=>{const h=mb[n];if(h==null)throw new ao(`No such operator: ${n}.`);return h});let e=Wf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=rd(e,t.operands[2+n],r[1+n]);return qu(e)}function xb(t){for(let r=0;r<t.length;r++)t[r]=ot(t[r],e=>e.type==="infix"?$b(e):e);return t}const Du=class Du{constructor(){me(this,"plugins");this.plugins={validate:[hb,db],transform:[zf,wb,xb]}}static parse(r){return Du.instance==null&&(Du.instance=new Du),Du.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=bv(r,{startRule:"Preprocess"});e=bv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new ao(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new ao(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};me(Du,"instance");let Th=Du;const bb="0.14.1",Ab={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Ih=[],Vo=null;function Cb(t){return Ih=Th.parse(t),JSON.stringify(Ih,null,"	")}async function _b(t){Vo==null||Vo.abort(),Vo=new Cs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Fh(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Fh(e.val,!0),print:!1});break}}});try{await Vo.exec(Ih)}catch(r){t.err(r)}}const kb=Object.freeze(Object.defineProperty({__proto__:null,exec:_b,parse:Cb,samples:Ab,version:bb},Symbol.toStringTag,{value:"Module"})),Pb=t=>(ey("data-v-449a2641"),t=t(),ty(),t),Eb={id:"root"},Mb={id:"grid1"},Sb={class:"type"},Fb={id:"grid2"},Nb=Pb(()=>cn("header",null,null,-1)),Cv=["next","develop","0.16.0","0.15.0","0.14.1"],_v="0.16.0",Ob=ff({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:h,samples:d}={next:D0,develop:$$,"0.16.0":ex,"0.15.0":Hx,"0.14.1":kb}[r.ver],$=Lu(window.localStorage.getItem(h)??'<: "Hello, AiScript!"'),b=Lu([]),k=Lu(""),E=Lu(null);Go($,()=>{window.localStorage.setItem(h,$.value);try{k.value=e($.value),E.value=null}catch(j){const D=j;E.value=D.message,console.error("info"in D?D.info:D);return}},{immediate:!0});function F(){b.value=[],n({in:j=>new Promise(D=>{const V=window.prompt(j);D(V??"")}),out:j=>b.value.push(j),end:j=>b.value.push(j),err:j=>{console.error(j),window.alert(`${j}`)}})}return(j,D)=>(cr(),Sr("div",Eb,[cn("div",Mb,[hr(vm,{modelValue:$.value,"onUpdate:modelValue":D[0]||(D[0]=V=>$.value=V),samples:sf(d),parseError:E.value,onRun:F},null,8,["modelValue","samples","parseError"]),hr(Zo,{id:"logs"},{header:xs(()=>[jn("Output")]),default:xs(()=>[(cr(!0),Sr(Qr,null,Zf(b.value,V=>(cr(),Sr("div",{class:Yr(["log",[{print:V.print},V.type]]),key:V.id},[cn("span",Sb,zu(V.type),1),jn(" "+zu(V.text),1)],2))),128))]),_:1})]),cn("div",Fb,[hr(Zo,{id:"ast"},{header:xs(()=>[jn("AST")]),default:xs(()=>[cn("pre",null,zu(k.value),1)]),_:1}),hr(Zo,{id:"bin"},{header:xs(()=>[jn("Bytecode")]),default:xs(()=>[Nb]),_:1}),hr(Zo,{id:"debugger"},{header:xs(()=>[jn("Debugger")]),_:1})])]))}}),Tb=cf(Ob,[["__scopeId","data-v-449a2641"]]),Ib={id:"wrapper"},jb=ff({__name:"App",setup(t){const r=Lu(window.localStorage.getItem("version")??_v),e=Object.fromEntries(Cv.map(h=>[h,h+(h==_v?"(latest)":"")]));function n(h){r.value=h,window.localStorage.setItem("version",r.value)}return(h,d)=>(cr(),Sr("div",Ib,[cn("h1",null,[jn(" AiScript ( "),hr(Cg,{id:"version",options:sf(e),onSelect:n},{default:xs(()=>[jn(zu(r.value),1)]),_:1},8,["options"]),jn(" ) Playground ")]),(cr(!0),Sr(Qr,null,Zf(sf(Cv),$=>(cr(),Sr("div",null,[$==r.value?(cr(),vc(Tb,{key:0,ver:$},null,8,["ver"])):Io("",!0)]))),256))]))}}),Rb=cf(jb,[["__scopeId","data-v-caf8f745"]]);Sw(Rb).mount("#app");
