var Qw=Object.defineProperty;var Xw=(t,r,e)=>r in t?Qw(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var fe=(t,r,e)=>Xw(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))n(p);new MutationObserver(p=>{for(const d of p)if(d.type==="childList")for(const C of d.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&n(C)}).observe(document,{childList:!0,subtree:!0});function e(p){const d={};return p.integrity&&(d.integrity=p.integrity),p.referrerPolicy&&(d.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?d.credentials="include":p.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(p){if(p.ep)return;p.ep=!0;const d=e(p);fetch(p.href,d)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Wv(t){const r=Object.create(null);for(const e of t.split(","))r[e]=1;return e=>e in r}const Kr={},Ff=[],Ku=()=>{},Yw=()=>!1,Hh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Gv=t=>t.startsWith("onUpdate:"),Ns=Object.assign,Jv=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},e0=Object.prototype.hasOwnProperty,br=(t,r)=>e0.call(t,r),bt=Array.isArray,Of=t=>qh(t)==="[object Map]",Yd=t=>qh(t)==="[object Set]",Ft=t=>typeof t=="function",Ss=t=>typeof t=="string",ro=t=>typeof t=="symbol",as=t=>t!==null&&typeof t=="object",ey=t=>(as(t)||Ft(t))&&Ft(t.then)&&Ft(t.catch),ty=Object.prototype.toString,qh=t=>ty.call(t),t0=t=>qh(t).slice(8,-1),ry=t=>qh(t)==="[object Object]",Zv=t=>Ss(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yc=Wv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vh=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},r0=/-(\w)/g,ko=Vh(t=>t.replace(r0,(r,e)=>e?e.toUpperCase():"")),s0=/\B([A-Z])/g,xf=Vh(t=>t.replace(s0,"-$1").toLowerCase()),sy=Vh(t=>t.charAt(0).toUpperCase()+t.slice(1)),ap=Vh(t=>t?`on${sy(t)}`:""),Co=(t,r)=>!Object.is(t,r),ip=(t,...r)=>{for(let e=0;e<t.length;e++)t[e](...r)},ny=(t,r,e,n=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:n,value:e})},n0=t=>{const r=parseFloat(t);return isNaN(r)?t:r},a0=t=>{const r=Ss(t)?Number(t):NaN;return isNaN(r)?t:r};let _g;const zh=()=>_g||(_g=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qv(t){if(bt(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],p=Ss(n)?o0(n):Qv(n);if(p)for(const d in p)r[d]=p[d]}return r}else if(Ss(t)||as(t))return t}const i0=/;(?![^(]*\))/g,l0=/:([^]+)/,u0=/\/\*[^]*?\*\//g;function o0(t){const r={};return t.replace(u0,"").split(i0).forEach(e=>{if(e){const n=e.split(l0);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function jn(t){let r="";if(Ss(t))r=t;else if(bt(t))for(let e=0;e<t.length;e++){const n=jn(t[e]);n&&(r+=n+" ")}else if(as(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const f0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c0=Wv(f0);function ay(t){return!!t||t===""}const iy=t=>!!(t&&t.__v_isRef===!0),_o=t=>Ss(t)?t:t==null?"":bt(t)||as(t)&&(t.toString===ty||!Ft(t.toString))?iy(t)?_o(t.value):JSON.stringify(t,ly,2):String(t),ly=(t,r)=>iy(r)?ly(t,r.value):Of(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,p],d)=>(e[lp(n,d)+" =>"]=p,e),{})}:Yd(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>lp(e))}:ro(r)?lp(r):as(r)&&!bt(r)&&!ry(r)?String(r):r,lp=(t,r="")=>{var e;return ro(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ji;class h0{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ji,!r&&ji&&(this.index=(ji.scopes||(ji.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].pause();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].resume();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].resume()}}run(r){if(this._active){const e=ji;try{return ji=this,r()}finally{ji=e}}}on(){ji=this}off(){ji=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const p=this.parent.scopes.pop();p&&p!==this&&(this.parent.scopes[this.index]=p,p.index=this.index)}this.parent=void 0,this._active=!1}}}function p0(){return ji}let qr;const up=new WeakSet;class uy{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ji&&ji.active&&ji.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,up.has(this)&&(up.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||fy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Pg(this),cy(this);const r=qr,e=Nu;qr=this,Nu=!0;try{return this.fn()}finally{hy(this),qr=r,Nu=e,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)eg(r);this.deps=this.depsTail=void 0,Pg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?up.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gp(this)&&this.run()}get dirty(){return Gp(this)}}let oy=0,wc,mc;function fy(t,r=!1){if(t.flags|=8,r){t.next=mc,mc=t;return}t.next=wc,wc=t}function Xv(){oy++}function Yv(){if(--oy>0)return;if(mc){let r=mc;for(mc=void 0;r;){const e=r.next;r.next=void 0,r.flags&=-9,r=e}}let t;for(;wc;){let r=wc;for(wc=void 0;r;){const e=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(n){t||(t=n)}r=e}}if(t)throw t}function cy(t){for(let r=t.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function hy(t){let r,e=t.depsTail,n=e;for(;n;){const p=n.prevDep;n.version===-1?(n===e&&(e=p),eg(n),v0(n)):r=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=p}t.deps=r,t.depsTail=e}function Gp(t){for(let r=t.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(py(r.dep.computed)||r.dep.version!==r.version))return!0;return!!t._dirty}function py(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Pc))return;t.globalVersion=Pc;const r=t.dep;if(t.flags|=2,r.version>0&&!t.isSSR&&t.deps&&!Gp(t)){t.flags&=-3;return}const e=qr,n=Nu;qr=t,Nu=!0;try{cy(t);const p=t.fn(t._value);(r.version===0||Co(p,t._value))&&(t._value=p,r.version++)}catch(p){throw r.version++,p}finally{qr=e,Nu=n,hy(t),t.flags&=-3}}function eg(t,r=!1){const{dep:e,prevSub:n,nextSub:p}=t;if(n&&(n.nextSub=p,t.prevSub=void 0),p&&(p.prevSub=n,t.nextSub=void 0),e.subs===t&&(e.subs=n,!n&&e.computed)){e.computed.flags&=-5;for(let d=e.computed.deps;d;d=d.nextDep)eg(d,!0)}!r&&!--e.sc&&e.map&&e.map.delete(e.key)}function v0(t){const{prevDep:r,nextDep:e}=t;r&&(r.nextDep=e,t.prevDep=void 0),e&&(e.prevDep=r,t.nextDep=void 0)}let Nu=!0;const vy=[];function Eo(){vy.push(Nu),Nu=!1}function So(){const t=vy.pop();Nu=t===void 0?!0:t}function Pg(t){const{cleanup:r}=t;if(t.cleanup=void 0,r){const e=qr;qr=void 0;try{r()}finally{qr=e}}}let Pc=0;class g0{constructor(r,e){this.sub=r,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tg{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!qr||!Nu||qr===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==qr)e=this.activeLink=new g0(qr,this),qr.deps?(e.prevDep=qr.depsTail,qr.depsTail.nextDep=e,qr.depsTail=e):qr.deps=qr.depsTail=e,gy(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const n=e.nextDep;n.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=n),e.prevDep=qr.depsTail,e.nextDep=void 0,qr.depsTail.nextDep=e,qr.depsTail=e,qr.deps===e&&(qr.deps=n)}return e}trigger(r){this.version++,Pc++,this.notify(r)}notify(r){Xv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Yv()}}}function gy(t){if(t.dep.sc++,t.sub.flags&4){const r=t.dep.computed;if(r&&!t.dep.subs){r.flags|=20;for(let n=r.deps;n;n=n.nextDep)gy(n)}const e=t.dep.subs;e!==t&&(t.prevSub=e,e&&(e.nextSub=t)),t.dep.subs=t}}const Jp=new WeakMap,Xo=Symbol(""),Zp=Symbol(""),kc=Symbol("");function On(t,r,e){if(Nu&&qr){let n=Jp.get(t);n||Jp.set(t,n=new Map);let p=n.get(e);p||(n.set(e,p=new tg),p.map=n,p.key=e),p.track()}}function eo(t,r,e,n,p,d){const C=Jp.get(t);if(!C){Pc++;return}const P=M=>{M&&M.trigger()};if(Xv(),r==="clear")C.forEach(P);else{const M=bt(t),T=M&&Zv(e);if(M&&e==="length"){const E=Number(n);C.forEach((B,L)=>{(L==="length"||L===kc||!ro(L)&&L>=E)&&P(B)})}else switch((e!==void 0||C.has(void 0))&&P(C.get(e)),T&&P(C.get(kc)),r){case"add":M?T&&P(C.get("length")):(P(C.get(Xo)),Of(t)&&P(C.get(Zp)));break;case"delete":M||(P(C.get(Xo)),Of(t)&&P(C.get(Zp)));break;case"set":Of(t)&&P(C.get(Xo));break}}Yv()}function Ef(t){const r=mr(t);return r===t?r:(On(r,"iterate",kc),Yi(t)?r:r.map(In))}function Kh(t){return On(t=mr(t),"iterate",kc),t}const d0={__proto__:null,[Symbol.iterator](){return op(this,Symbol.iterator,In)},concat(...t){return Ef(this).concat(...t.map(r=>bt(r)?Ef(r):r))},entries(){return op(this,"entries",t=>(t[1]=In(t[1]),t))},every(t,r){return Xu(this,"every",t,r,void 0,arguments)},filter(t,r){return Xu(this,"filter",t,r,e=>e.map(In),arguments)},find(t,r){return Xu(this,"find",t,r,In,arguments)},findIndex(t,r){return Xu(this,"findIndex",t,r,void 0,arguments)},findLast(t,r){return Xu(this,"findLast",t,r,In,arguments)},findLastIndex(t,r){return Xu(this,"findLastIndex",t,r,void 0,arguments)},forEach(t,r){return Xu(this,"forEach",t,r,void 0,arguments)},includes(...t){return fp(this,"includes",t)},indexOf(...t){return fp(this,"indexOf",t)},join(t){return Ef(this).join(t)},lastIndexOf(...t){return fp(this,"lastIndexOf",t)},map(t,r){return Xu(this,"map",t,r,void 0,arguments)},pop(){return ac(this,"pop")},push(...t){return ac(this,"push",t)},reduce(t,...r){return kg(this,"reduce",t,r)},reduceRight(t,...r){return kg(this,"reduceRight",t,r)},shift(){return ac(this,"shift")},some(t,r){return Xu(this,"some",t,r,void 0,arguments)},splice(...t){return ac(this,"splice",t)},toReversed(){return Ef(this).toReversed()},toSorted(t){return Ef(this).toSorted(t)},toSpliced(...t){return Ef(this).toSpliced(...t)},unshift(...t){return ac(this,"unshift",t)},values(){return op(this,"values",In)}};function op(t,r,e){const n=Kh(t),p=n[r]();return n!==t&&!Yi(t)&&(p._next=p.next,p.next=()=>{const d=p._next();return d.value&&(d.value=e(d.value)),d}),p}const y0=Array.prototype;function Xu(t,r,e,n,p,d){const C=Kh(t),P=C!==t&&!Yi(t),M=C[r];if(M!==y0[r]){const B=M.apply(t,d);return P?In(B):B}let T=e;C!==t&&(P?T=function(B,L){return e.call(this,In(B),L,t)}:e.length>2&&(T=function(B,L){return e.call(this,B,L,t)}));const E=M.call(C,T,n);return P&&p?p(E):E}function kg(t,r,e,n){const p=Kh(t);let d=e;return p!==t&&(Yi(t)?e.length>3&&(d=function(C,P,M){return e.call(this,C,P,M,t)}):d=function(C,P,M){return e.call(this,C,In(P),M,t)}),p[r](d,...n)}function fp(t,r,e){const n=mr(t);On(n,"iterate",kc);const p=n[r](...e);return(p===-1||p===!1)&&ag(e[0])?(e[0]=mr(e[0]),n[r](...e)):p}function ac(t,r,e=[]){Eo(),Xv();const n=mr(t)[r].apply(t,e);return Yv(),So(),n}const w0=Wv("__proto__,__v_isRef,__isVue"),dy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(ro));function m0(t){ro(t)||(t=String(t));const r=mr(this);return On(r,"has",t),r.hasOwnProperty(t)}class yy{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,n){const p=this._isReadonly,d=this._isShallow;if(e==="__v_isReactive")return!p;if(e==="__v_isReadonly")return p;if(e==="__v_isShallow")return d;if(e==="__v_raw")return n===(p?d?E0:xy:d?$y:my).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(n)?r:void 0;const C=bt(r);if(!p){let M;if(C&&(M=d0[e]))return M;if(e==="hasOwnProperty")return m0}const P=Reflect.get(r,e,Dn(r)?r:n);return(ro(e)?dy.has(e):w0(e))||(p||On(r,"get",e),d)?P:Dn(P)?C&&Zv(e)?P:P.value:as(P)?p?by(P):sg(P):P}}class wy extends yy{constructor(r=!1){super(!1,r)}set(r,e,n,p){let d=r[e];if(!this._isShallow){const M=hf(d);if(!Yi(n)&&!hf(n)&&(d=mr(d),n=mr(n)),!bt(r)&&Dn(d)&&!Dn(n))return M?!1:(d.value=n,!0)}const C=bt(r)&&Zv(e)?Number(e)<r.length:br(r,e),P=Reflect.set(r,e,n,Dn(r)?r:p);return r===mr(p)&&(C?Co(n,d)&&eo(r,"set",e,n):eo(r,"add",e,n)),P}deleteProperty(r,e){const n=br(r,e);r[e];const p=Reflect.deleteProperty(r,e);return p&&n&&eo(r,"delete",e,void 0),p}has(r,e){const n=Reflect.has(r,e);return(!ro(e)||!dy.has(e))&&On(r,"has",e),n}ownKeys(r){return On(r,"iterate",bt(r)?"length":Xo),Reflect.ownKeys(r)}}class $0 extends yy{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const x0=new wy,b0=new $0,A0=new wy(!0);const Qp=t=>t,Lc=t=>Reflect.getPrototypeOf(t);function C0(t,r,e){return function(...n){const p=this.__v_raw,d=mr(p),C=Of(d),P=t==="entries"||t===Symbol.iterator&&C,M=t==="keys"&&C,T=p[t](...n),E=e?Qp:r?Xp:In;return!r&&On(d,"iterate",M?Zp:Xo),{next(){const{value:B,done:L}=T.next();return L?{value:B,done:L}:{value:P?[E(B[0]),E(B[1])]:E(B),done:L}},[Symbol.iterator](){return this}}}}function Hc(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function _0(t,r){const e={get(p){const d=this.__v_raw,C=mr(d),P=mr(p);t||(Co(p,P)&&On(C,"get",p),On(C,"get",P));const{has:M}=Lc(C),T=r?Qp:t?Xp:In;if(M.call(C,p))return T(d.get(p));if(M.call(C,P))return T(d.get(P));d!==C&&d.get(p)},get size(){const p=this.__v_raw;return!t&&On(mr(p),"iterate",Xo),Reflect.get(p,"size",p)},has(p){const d=this.__v_raw,C=mr(d),P=mr(p);return t||(Co(p,P)&&On(C,"has",p),On(C,"has",P)),p===P?d.has(p):d.has(p)||d.has(P)},forEach(p,d){const C=this,P=C.__v_raw,M=mr(P),T=r?Qp:t?Xp:In;return!t&&On(M,"iterate",Xo),P.forEach((E,B)=>p.call(d,T(E),T(B),C))}};return Ns(e,t?{add:Hc("add"),set:Hc("set"),delete:Hc("delete"),clear:Hc("clear")}:{add(p){!r&&!Yi(p)&&!hf(p)&&(p=mr(p));const d=mr(this);return Lc(d).has.call(d,p)||(d.add(p),eo(d,"add",p,p)),this},set(p,d){!r&&!Yi(d)&&!hf(d)&&(d=mr(d));const C=mr(this),{has:P,get:M}=Lc(C);let T=P.call(C,p);T||(p=mr(p),T=P.call(C,p));const E=M.call(C,p);return C.set(p,d),T?Co(d,E)&&eo(C,"set",p,d):eo(C,"add",p,d),this},delete(p){const d=mr(this),{has:C,get:P}=Lc(d);let M=C.call(d,p);M||(p=mr(p),M=C.call(d,p)),P&&P.call(d,p);const T=d.delete(p);return M&&eo(d,"delete",p,void 0),T},clear(){const p=mr(this),d=p.size!==0,C=p.clear();return d&&eo(p,"clear",void 0,void 0),C}}),["keys","values","entries",Symbol.iterator].forEach(p=>{e[p]=C0(p,t,r)}),e}function rg(t,r){const e=_0(t,r);return(n,p,d)=>p==="__v_isReactive"?!t:p==="__v_isReadonly"?t:p==="__v_raw"?n:Reflect.get(br(e,p)&&p in n?e:n,p,d)}const P0={get:rg(!1,!1)},k0={get:rg(!1,!0)},M0={get:rg(!0,!1)};const my=new WeakMap,$y=new WeakMap,xy=new WeakMap,E0=new WeakMap;function S0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function T0(t){return t.__v_skip||!Object.isExtensible(t)?0:S0(t0(t))}function sg(t){return hf(t)?t:ng(t,!1,x0,P0,my)}function N0(t){return ng(t,!1,A0,k0,$y)}function by(t){return ng(t,!0,b0,M0,xy)}function ng(t,r,e,n,p){if(!as(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const d=p.get(t);if(d)return d;const C=T0(t);if(C===0)return t;const P=new Proxy(t,C===2?n:e);return p.set(t,P),P}function If(t){return hf(t)?If(t.__v_raw):!!(t&&t.__v_isReactive)}function hf(t){return!!(t&&t.__v_isReadonly)}function Yi(t){return!!(t&&t.__v_isShallow)}function ag(t){return t?!!t.__v_raw:!1}function mr(t){const r=t&&t.__v_raw;return r?mr(r):t}function F0(t){return!br(t,"__v_skip")&&Object.isExtensible(t)&&ny(t,"__v_skip",!0),t}const In=t=>as(t)?sg(t):t,Xp=t=>as(t)?by(t):t;function Dn(t){return t?t.__v_isRef===!0:!1}function Vo(t){return O0(t,!1)}function O0(t,r){return Dn(t)?t:new I0(t,r)}class I0{constructor(r,e){this.dep=new tg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?r:mr(r),this._value=e?r:In(r),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(r){const e=this._rawValue,n=this.__v_isShallow||Yi(r)||hf(r);r=n?r:mr(r),Co(r,e)&&(this._rawValue=r,this._value=n?r:In(r),this.dep.trigger())}}function Mc(t){return Dn(t)?t.value:t}const R0={get:(t,r,e)=>r==="__v_raw"?t:Mc(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const p=t[r];return Dn(p)&&!Dn(e)?(p.value=e,!0):Reflect.set(t,r,e,n)}};function Ay(t){return If(t)?t:new Proxy(t,R0)}class j0{constructor(r,e,n){this.fn=r,this.setter=e,this._value=void 0,this.dep=new tg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&qr!==this)return fy(this,!0),!0}get value(){const r=this.dep.track();return py(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function D0(t,r,e=!1){let n,p;return Ft(t)?n=t:(n=t.get,p=t.set),new j0(n,p,e)}const qc={},Mh=new WeakMap;let Bo;function U0(t,r=!1,e=Bo){if(e){let n=Mh.get(e);n||Mh.set(e,n=[]),n.push(t)}}function B0(t,r,e=Kr){const{immediate:n,deep:p,once:d,scheduler:C,augmentJob:P,call:M}=e,T=G=>p?G:Yi(G)||p===!1||p===0?mo(G,1):mo(G);let E,B,L,W,ge=!1,ie=!1;if(Dn(t)?(B=()=>t.value,ge=Yi(t)):If(t)?(B=()=>T(t),ge=!0):bt(t)?(ie=!0,ge=t.some(G=>If(G)||Yi(G)),B=()=>t.map(G=>{if(Dn(G))return G.value;if(If(G))return T(G);if(Ft(G))return M?M(G,2):G()})):Ft(t)?r?B=M?()=>M(t,2):t:B=()=>{if(L){Eo();try{L()}finally{So()}}const G=Bo;Bo=E;try{return M?M(t,3,[W]):t(W)}finally{Bo=G}}:B=Ku,r&&p){const G=B,Q=p===!0?1/0:p;B=()=>mo(G(),Q)}const pe=p0(),be=()=>{E.stop(),pe&&Jv(pe.effects,E)};if(d&&r){const G=r;r=(...Q)=>{G(...Q),be()}}let Z=ie?new Array(t.length).fill(qc):qc;const K=G=>{if(!(!(E.flags&1)||!E.dirty&&!G))if(r){const Q=E.run();if(p||ge||(ie?Q.some((re,Y)=>Co(re,Z[Y])):Co(Q,Z))){L&&L();const re=Bo;Bo=E;try{const Y=[Q,Z===qc?void 0:ie&&Z[0]===qc?[]:Z,W];M?M(r,3,Y):r(...Y),Z=Q}finally{Bo=re}}}else E.run()};return P&&P(K),E=new uy(B),E.scheduler=C?()=>C(K,!1):K,W=G=>U0(G,!1,E),L=E.onStop=()=>{const G=Mh.get(E);if(G){if(M)M(G,4);else for(const Q of G)Q();Mh.delete(E)}},r?n?K(!0):Z=E.run():C?C(K.bind(null,!0),!0):E.run(),be.pause=E.pause.bind(E),be.resume=E.resume.bind(E),be.stop=be,be}function mo(t,r=1/0,e){if(r<=0||!as(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,Dn(t))mo(t.value,r,e);else if(bt(t))for(let n=0;n<t.length;n++)mo(t[n],r,e);else if(Yd(t)||Of(t))t.forEach(n=>{mo(n,r,e)});else if(ry(t)){for(const n in t)mo(t[n],r,e);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&mo(t[n],r,e)}return t}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rc(t,r,e,n){try{return n?t(...n):t()}catch(p){Wh(p,r,e)}}function Fu(t,r,e,n){if(Ft(t)){const p=Rc(t,r,e,n);return p&&ey(p)&&p.catch(d=>{Wh(d,r,e)}),p}if(bt(t)){const p=[];for(let d=0;d<t.length;d++)p.push(Fu(t[d],r,e,n));return p}}function Wh(t,r,e,n=!0){const p=r?r.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:C}=r&&r.appContext.config||Kr;if(r){let P=r.parent;const M=r.proxy,T=`https://vuejs.org/error-reference/#runtime-${e}`;for(;P;){const E=P.ec;if(E){for(let B=0;B<E.length;B++)if(E[B](t,M,T)===!1)return}P=P.parent}if(d){Eo(),Rc(d,null,10,[t,M,T]),So();return}}L0(t,e,p,n,C)}function L0(t,r,e,n=!0,p=!1){if(p)throw t;console.error(t)}const _a=[];let ju=-1;const Rf=[];let go=null,Nf=0;const Cy=Promise.resolve();let Eh=null;function H0(t){const r=Eh||Cy;return t?r.then(this?t.bind(this):t):r}function q0(t){let r=ju+1,e=_a.length;for(;r<e;){const n=r+e>>>1,p=_a[n],d=Ec(p);d<t||d===t&&p.flags&2?r=n+1:e=n}return r}function ig(t){if(!(t.flags&1)){const r=Ec(t),e=_a[_a.length-1];!e||!(t.flags&2)&&r>=Ec(e)?_a.push(t):_a.splice(q0(r),0,t),t.flags|=1,_y()}}function _y(){Eh||(Eh=Cy.then(ky))}function V0(t){bt(t)?Rf.push(...t):go&&t.id===-1?go.splice(Nf+1,0,t):t.flags&1||(Rf.push(t),t.flags|=1),_y()}function Mg(t,r,e=ju+1){for(;e<_a.length;e++){const n=_a[e];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;_a.splice(e,1),e--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Py(t){if(Rf.length){const r=[...new Set(Rf)].sort((e,n)=>Ec(e)-Ec(n));if(Rf.length=0,go){go.push(...r);return}for(go=r,Nf=0;Nf<go.length;Nf++){const e=go[Nf];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}go=null,Nf=0}}const Ec=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ky(t){try{for(ju=0;ju<_a.length;ju++){const r=_a[ju];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),Rc(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;ju<_a.length;ju++){const r=_a[ju];r&&(r.flags&=-2)}ju=-1,_a.length=0,Py(),Eh=null,(_a.length||Rf.length)&&ky()}}let ka=null,My=null;function Sh(t){const r=ka;return ka=t,My=t&&t.type.__scopeId||null,r}function Ia(t,r=ka,e){if(!r||t._n)return t;const n=(...p)=>{n._d&&jg(-1);const d=Sh(r);let C;try{C=t(...p)}finally{Sh(d),n._d&&jg(1)}return C};return n._n=!0,n._c=!0,n._d=!0,n}function Io(t,r,e,n){const p=t.dirs,d=r&&r.dirs;for(let C=0;C<p.length;C++){const P=p[C];d&&(P.oldValue=d[C].value);let M=P.dir[n];M&&(Eo(),Fu(M,e,8,[t.el,P,t,r]),So())}}const z0=Symbol("_vte"),Ey=t=>t.__isTeleport,yo=Symbol("_leaveCb"),Vc=Symbol("_enterCb");function K0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return jy(()=>{t.isMounted=!0}),Dy(()=>{t.isUnmounting=!0}),t}const Ki=[Function,Array],Sy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ki,onEnter:Ki,onAfterEnter:Ki,onEnterCancelled:Ki,onBeforeLeave:Ki,onLeave:Ki,onAfterLeave:Ki,onLeaveCancelled:Ki,onBeforeAppear:Ki,onAppear:Ki,onAfterAppear:Ki,onAppearCancelled:Ki},Ty=t=>{const r=t.subTree;return r.component?Ty(r.component):r},W0={name:"BaseTransition",props:Sy,setup(t,{slots:r}){const e=Hm(),n=K0();return()=>{const p=r.default&&Oy(r.default(),!0);if(!p||!p.length)return;const d=Ny(p),C=mr(t),{mode:P}=C;if(n.isLeaving)return cp(d);const M=Eg(d);if(!M)return cp(d);let T=Yp(M,C,n,e,L=>T=L);M.type!==Pa&&Sc(M,T);const E=e.subTree,B=E&&Eg(E);if(B&&B.type!==Pa&&!Lo(M,B)&&Ty(e).type!==Pa){const L=Yp(B,C,n,e);if(Sc(B,L),P==="out-in"&&M.type!==Pa)return n.isLeaving=!0,L.afterLeave=()=>{n.isLeaving=!1,e.job.flags&8||e.update(),delete L.afterLeave},cp(d);P==="in-out"&&M.type!==Pa&&(L.delayLeave=(W,ge,ie)=>{const pe=Fy(n,B);pe[String(B.key)]=B,W[yo]=()=>{ge(),W[yo]=void 0,delete T.delayedLeave},T.delayedLeave=ie})}return d}}};function Ny(t){let r=t[0];if(t.length>1){for(const e of t)if(e.type!==Pa){r=e;break}}return r}const G0=W0;function Fy(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function Yp(t,r,e,n,p){const{appear:d,mode:C,persisted:P=!1,onBeforeEnter:M,onEnter:T,onAfterEnter:E,onEnterCancelled:B,onBeforeLeave:L,onLeave:W,onAfterLeave:ge,onLeaveCancelled:ie,onBeforeAppear:pe,onAppear:be,onAfterAppear:Z,onAppearCancelled:K}=r,G=String(t.key),Q=Fy(e,t),re=(ae,Te)=>{ae&&Fu(ae,n,9,Te)},Y=(ae,Te)=>{const Ie=Te[1];re(ae,Te),bt(ae)?ae.every(ke=>ke.length<=1)&&Ie():ae.length<=1&&Ie()},le={mode:C,persisted:P,beforeEnter(ae){let Te=M;if(!e.isMounted)if(d)Te=pe||M;else return;ae[yo]&&ae[yo](!0);const Ie=Q[G];Ie&&Lo(t,Ie)&&Ie.el[yo]&&Ie.el[yo](),re(Te,[ae])},enter(ae){let Te=T,Ie=E,ke=B;if(!e.isMounted)if(d)Te=be||T,Ie=Z||E,ke=K||B;else return;let at=!1;const vt=ae[Vc]=sr=>{at||(at=!0,sr?re(ke,[ae]):re(Ie,[ae]),le.delayedLeave&&le.delayedLeave(),ae[Vc]=void 0)};Te?Y(Te,[ae,vt]):vt()},leave(ae,Te){const Ie=String(t.key);if(ae[Vc]&&ae[Vc](!0),e.isUnmounting)return Te();re(L,[ae]);let ke=!1;const at=ae[yo]=vt=>{ke||(ke=!0,Te(),vt?re(ie,[ae]):re(ge,[ae]),ae[yo]=void 0,Q[Ie]===t&&delete Q[Ie])};Q[Ie]=t,W?Y(W,[ae,at]):at()},clone(ae){const Te=Yp(ae,r,e,n,p);return p&&p(Te),Te}};return le}function cp(t){if(Gh(t))return t=Mo(t),t.children=null,t}function Eg(t){if(!Gh(t))return Ey(t.type)&&t.children?Ny(t.children):t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&Ft(e.default))return e.default()}}function Sc(t,r){t.shapeFlag&6&&t.component?(t.transition=r,Sc(t.component.subTree,r)):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function Oy(t,r=!1,e){let n=[],p=0;for(let d=0;d<t.length;d++){let C=t[d];const P=e==null?C.key:String(e)+String(C.key!=null?C.key:d);C.type===Mn?(C.patchFlag&128&&p++,n=n.concat(Oy(C.children,r,P))):(r||C.type!==Pa)&&n.push(P!=null?Mo(C,{key:P}):C)}if(p>1)for(let d=0;d<n.length;d++)n[d].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function jc(t,r){return Ft(t)?Ns({name:t.name},r,{setup:t}):t}function Iy(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ev(t,r,e,n,p=!1){if(bt(t)){t.forEach((ge,ie)=>ev(ge,r&&(bt(r)?r[ie]:r),e,n,p));return}if(jf(n)&&!p)return;const d=n.shapeFlag&4?fg(n.component):n.el,C=p?null:d,{i:P,r:M}=t,T=r&&r.r,E=P.refs===Kr?P.refs={}:P.refs,B=P.setupState,L=mr(B),W=B===Kr?()=>!1:ge=>br(L,ge);if(T!=null&&T!==M&&(Ss(T)?(E[T]=null,W(T)&&(B[T]=null)):Dn(T)&&(T.value=null)),Ft(M))Rc(M,P,12,[C,E]);else{const ge=Ss(M),ie=Dn(M);if(ge||ie){const pe=()=>{if(t.f){const be=ge?W(M)?B[M]:E[M]:M.value;p?bt(be)&&Jv(be,d):bt(be)?be.includes(d)||be.push(d):ge?(E[M]=[d],W(M)&&(B[M]=E[M])):(M.value=[d],t.k&&(E[t.k]=M.value))}else ge?(E[M]=C,W(M)&&(B[M]=C)):ie&&(M.value=C,t.k&&(E[t.k]=C))};C?(pe.id=-1,Ni(pe,e)):pe()}}}zh().requestIdleCallback;zh().cancelIdleCallback;const jf=t=>!!t.type.__asyncLoader,Gh=t=>t.type.__isKeepAlive;function J0(t,r){Ry(t,"a",r)}function Z0(t,r){Ry(t,"da",r)}function Ry(t,r,e=Rn){const n=t.__wdc||(t.__wdc=()=>{let p=e;for(;p;){if(p.isDeactivated)return;p=p.parent}return t()});if(Jh(r,n,e),e){let p=e.parent;for(;p&&p.parent;)Gh(p.parent.vnode)&&Q0(n,r,e,p),p=p.parent}}function Q0(t,r,e,n){const p=Jh(r,t,n,!0);Uy(()=>{Jv(n[r],p)},e)}function Jh(t,r,e=Rn,n=!1){if(e){const p=e[t]||(e[t]=[]),d=r.__weh||(r.__weh=(...C)=>{Eo();const P=Dc(e),M=Fu(r,e,t,C);return P(),So(),M});return n?p.unshift(d):p.push(d),d}}const so=t=>(r,e=Rn)=>{(!Oc||t==="sp")&&Jh(t,(...n)=>r(...n),e)},X0=so("bm"),jy=so("m"),Y0=so("bu"),em=so("u"),Dy=so("bum"),Uy=so("um"),tm=so("sp"),rm=so("rtg"),sm=so("rtc");function nm(t,r=Rn){Jh("ec",t,r)}const am=Symbol.for("v-ndc");function Th(t,r,e,n){let p;const d=e,C=bt(t);if(C||Ss(t)){const P=C&&If(t);let M=!1;P&&(M=!Yi(t),t=Kh(t)),p=new Array(t.length);for(let T=0,E=t.length;T<E;T++)p[T]=r(M?In(t[T]):t[T],T,void 0,d)}else if(typeof t=="number"){p=new Array(t);for(let P=0;P<t;P++)p[P]=r(P+1,P,void 0,d)}else if(as(t))if(t[Symbol.iterator])p=Array.from(t,(P,M)=>r(P,M,void 0,d));else{const P=Object.keys(t);p=new Array(P.length);for(let M=0,T=P.length;M<T;M++){const E=P[M];p[M]=r(t[E],E,M,d)}}else p=[];return p}function sh(t,r,e={},n,p){if(ka.ce||ka.parent&&jf(ka.parent)&&ka.parent.ce)return r!=="default"&&(e.name=r),us(),Nc(Mn,null,[ys("slot",e,n)],64);let d=t[r];d&&d._c&&(d._d=!1),us();const C=d&&By(d(e)),P=e.key||C&&C.key,M=Nc(Mn,{key:(P&&!ro(P)?P:`_${r}`)+(!C&&n?"_fb":"")},C||[],C&&t._===1?64:-2);return M.scopeId&&(M.slotScopeIds=[M.scopeId+"-s"]),d&&d._c&&(d._d=!0),M}function By(t){return t.some(r=>Fc(r)?!(r.type===Pa||r.type===Mn&&!By(r.children)):!0)?t:null}const tv=t=>t?iw(t)?fg(t):tv(t.parent):null,$c=Ns(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tv(t.parent),$root:t=>tv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>lg(t),$forceUpdate:t=>t.f||(t.f=()=>{ig(t.update)}),$nextTick:t=>t.n||(t.n=H0.bind(t.proxy)),$watch:t=>km.bind(t)}),hp=(t,r)=>t!==Kr&&!t.__isScriptSetup&&br(t,r),im={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:n,data:p,props:d,accessCache:C,type:P,appContext:M}=t;let T;if(r[0]!=="$"){const W=C[r];if(W!==void 0)switch(W){case 1:return n[r];case 2:return p[r];case 4:return e[r];case 3:return d[r]}else{if(hp(n,r))return C[r]=1,n[r];if(p!==Kr&&br(p,r))return C[r]=2,p[r];if((T=t.propsOptions[0])&&br(T,r))return C[r]=3,d[r];if(e!==Kr&&br(e,r))return C[r]=4,e[r];rv&&(C[r]=0)}}const E=$c[r];let B,L;if(E)return r==="$attrs"&&On(t.attrs,"get",""),E(t);if((B=P.__cssModules)&&(B=B[r]))return B;if(e!==Kr&&br(e,r))return C[r]=4,e[r];if(L=M.config.globalProperties,br(L,r))return L[r]},set({_:t},r,e){const{data:n,setupState:p,ctx:d}=t;return hp(p,r)?(p[r]=e,!0):n!==Kr&&br(n,r)?(n[r]=e,!0):br(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(d[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:p,propsOptions:d}},C){let P;return!!e[C]||t!==Kr&&br(t,C)||hp(r,C)||(P=d[0])&&br(P,C)||br(n,C)||br($c,C)||br(p.config.globalProperties,C)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:br(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function Sg(t){return bt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let rv=!0;function lm(t){const r=lg(t),e=t.proxy,n=t.ctx;rv=!1,r.beforeCreate&&Tg(r.beforeCreate,t,"bc");const{data:p,computed:d,methods:C,watch:P,provide:M,inject:T,created:E,beforeMount:B,mounted:L,beforeUpdate:W,updated:ge,activated:ie,deactivated:pe,beforeDestroy:be,beforeUnmount:Z,destroyed:K,unmounted:G,render:Q,renderTracked:re,renderTriggered:Y,errorCaptured:le,serverPrefetch:ae,expose:Te,inheritAttrs:Ie,components:ke,directives:at,filters:vt}=r;if(T&&um(T,n,null),C)for(const mt in C){const Ze=C[mt];Ft(Ze)&&(n[mt]=Ze.bind(e))}if(p){const mt=p.call(e,e);as(mt)&&(t.data=sg(mt))}if(rv=!0,d)for(const mt in d){const Ze=d[mt],$t=Ft(Ze)?Ze.bind(e,e):Ft(Ze.get)?Ze.get.bind(e,e):Ku,Qt=!Ft(Ze)&&Ft(Ze.set)?Ze.set.bind(e):Ku,Xt=Gm({get:$t,set:Qt});Object.defineProperty(n,mt,{enumerable:!0,configurable:!0,get:()=>Xt.value,set:pt=>Xt.value=pt})}if(P)for(const mt in P)Ly(P[mt],n,e,mt);if(M){const mt=Ft(M)?M.call(e):M;Reflect.ownKeys(mt).forEach(Ze=>{vm(Ze,mt[Ze])})}E&&Tg(E,t,"c");function At(mt,Ze){bt(Ze)?Ze.forEach($t=>mt($t.bind(e))):Ze&&mt(Ze.bind(e))}if(At(X0,B),At(jy,L),At(Y0,W),At(em,ge),At(J0,ie),At(Z0,pe),At(nm,le),At(sm,re),At(rm,Y),At(Dy,Z),At(Uy,G),At(tm,ae),bt(Te))if(Te.length){const mt=t.exposed||(t.exposed={});Te.forEach(Ze=>{Object.defineProperty(mt,Ze,{get:()=>e[Ze],set:$t=>e[Ze]=$t})})}else t.exposed||(t.exposed={});Q&&t.render===Ku&&(t.render=Q),Ie!=null&&(t.inheritAttrs=Ie),ke&&(t.components=ke),at&&(t.directives=at),ae&&Iy(t)}function um(t,r,e=Ku){bt(t)&&(t=sv(t));for(const n in t){const p=t[n];let d;as(p)?"default"in p?d=nh(p.from||n,p.default,!0):d=nh(p.from||n):d=nh(p),Dn(d)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>d.value,set:C=>d.value=C}):r[n]=d}}function Tg(t,r,e){Fu(bt(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function Ly(t,r,e,n){let p=n.includes(".")?tw(e,n):()=>e[n];if(Ss(t)){const d=r[t];Ft(d)&&xc(p,d)}else if(Ft(t))xc(p,t.bind(e));else if(as(t))if(bt(t))t.forEach(d=>Ly(d,r,e,n));else{const d=Ft(t.handler)?t.handler.bind(e):r[t.handler];Ft(d)&&xc(p,d,t)}}function lg(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:p,optionsCache:d,config:{optionMergeStrategies:C}}=t.appContext,P=d.get(r);let M;return P?M=P:!p.length&&!e&&!n?M=r:(M={},p.length&&p.forEach(T=>Nh(M,T,C,!0)),Nh(M,r,C)),as(r)&&d.set(r,M),M}function Nh(t,r,e,n=!1){const{mixins:p,extends:d}=r;d&&Nh(t,d,e,!0),p&&p.forEach(C=>Nh(t,C,e,!0));for(const C in r)if(!(n&&C==="expose")){const P=om[C]||e&&e[C];t[C]=P?P(t[C],r[C]):r[C]}return t}const om={data:Ng,props:Fg,emits:Fg,methods:vc,computed:vc,beforeCreate:ma,created:ma,beforeMount:ma,mounted:ma,beforeUpdate:ma,updated:ma,beforeDestroy:ma,beforeUnmount:ma,destroyed:ma,unmounted:ma,activated:ma,deactivated:ma,errorCaptured:ma,serverPrefetch:ma,components:vc,directives:vc,watch:cm,provide:Ng,inject:fm};function Ng(t,r){return r?t?function(){return Ns(Ft(t)?t.call(this,this):t,Ft(r)?r.call(this,this):r)}:r:t}function fm(t,r){return vc(sv(t),sv(r))}function sv(t){if(bt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function ma(t,r){return t?[...new Set([].concat(t,r))]:r}function vc(t,r){return t?Ns(Object.create(null),t,r):r}function Fg(t,r){return t?bt(t)&&bt(r)?[...new Set([...t,...r])]:Ns(Object.create(null),Sg(t),Sg(r??{})):r}function cm(t,r){if(!t)return r;if(!r)return t;const e=Ns(Object.create(null),t);for(const n in r)e[n]=ma(t[n],r[n]);return e}function Hy(){return{app:null,config:{isNativeTag:Yw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hm=0;function pm(t,r){return function(n,p=null){Ft(n)||(n=Ns({},n)),p!=null&&!as(p)&&(p=null);const d=Hy(),C=new WeakSet,P=[];let M=!1;const T=d.app={_uid:hm++,_component:n,_props:p,_container:null,_context:d,_instance:null,version:Jm,get config(){return d.config},set config(E){},use(E,...B){return C.has(E)||(E&&Ft(E.install)?(C.add(E),E.install(T,...B)):Ft(E)&&(C.add(E),E(T,...B))),T},mixin(E){return d.mixins.includes(E)||d.mixins.push(E),T},component(E,B){return B?(d.components[E]=B,T):d.components[E]},directive(E,B){return B?(d.directives[E]=B,T):d.directives[E]},mount(E,B,L){if(!M){const W=T._ceVNode||ys(n,p);return W.appContext=d,L===!0?L="svg":L===!1&&(L=void 0),B&&r?r(W,E):t(W,E,L),M=!0,T._container=E,E.__vue_app__=T,fg(W.component)}},onUnmount(E){P.push(E)},unmount(){M&&(Fu(P,T._instance,16),t(null,T._container),delete T._container.__vue_app__)},provide(E,B){return d.provides[E]=B,T},runWithContext(E){const B=Df;Df=T;try{return E()}finally{Df=B}}};return T}}let Df=null;function vm(t,r){if(Rn){let e=Rn.provides;const n=Rn.parent&&Rn.parent.provides;n===e&&(e=Rn.provides=Object.create(n)),e[t]=r}}function nh(t,r,e=!1){const n=Rn||ka;if(n||Df){const p=Df?Df._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(p&&t in p)return p[t];if(arguments.length>1)return e&&Ft(r)?r.call(n&&n.proxy):r}}const qy={},Vy=()=>Object.create(qy),zy=t=>Object.getPrototypeOf(t)===qy;function gm(t,r,e,n=!1){const p={},d=Vy();t.propsDefaults=Object.create(null),Ky(t,r,p,d);for(const C in t.propsOptions[0])C in p||(p[C]=void 0);e?t.props=n?p:N0(p):t.type.props?t.props=p:t.props=d,t.attrs=d}function dm(t,r,e,n){const{props:p,attrs:d,vnode:{patchFlag:C}}=t,P=mr(p),[M]=t.propsOptions;let T=!1;if((n||C>0)&&!(C&16)){if(C&8){const E=t.vnode.dynamicProps;for(let B=0;B<E.length;B++){let L=E[B];if(Zh(t.emitsOptions,L))continue;const W=r[L];if(M)if(br(d,L))W!==d[L]&&(d[L]=W,T=!0);else{const ge=ko(L);p[ge]=nv(M,P,ge,W,t,!1)}else W!==d[L]&&(d[L]=W,T=!0)}}}else{Ky(t,r,p,d)&&(T=!0);let E;for(const B in P)(!r||!br(r,B)&&((E=xf(B))===B||!br(r,E)))&&(M?e&&(e[B]!==void 0||e[E]!==void 0)&&(p[B]=nv(M,P,B,void 0,t,!0)):delete p[B]);if(d!==P)for(const B in d)(!r||!br(r,B))&&(delete d[B],T=!0)}T&&eo(t.attrs,"set","")}function Ky(t,r,e,n){const[p,d]=t.propsOptions;let C=!1,P;if(r)for(let M in r){if(yc(M))continue;const T=r[M];let E;p&&br(p,E=ko(M))?!d||!d.includes(E)?e[E]=T:(P||(P={}))[E]=T:Zh(t.emitsOptions,M)||(!(M in n)||T!==n[M])&&(n[M]=T,C=!0)}if(d){const M=mr(e),T=P||Kr;for(let E=0;E<d.length;E++){const B=d[E];e[B]=nv(p,M,B,T[B],t,!br(T,B))}}return C}function nv(t,r,e,n,p,d){const C=t[e];if(C!=null){const P=br(C,"default");if(P&&n===void 0){const M=C.default;if(C.type!==Function&&!C.skipFactory&&Ft(M)){const{propsDefaults:T}=p;if(e in T)n=T[e];else{const E=Dc(p);n=T[e]=M.call(null,r),E()}}else n=M;p.ce&&p.ce._setProp(e,n)}C[0]&&(d&&!P?n=!1:C[1]&&(n===""||n===xf(e))&&(n=!0))}return n}const ym=new WeakMap;function Wy(t,r,e=!1){const n=e?ym:r.propsCache,p=n.get(t);if(p)return p;const d=t.props,C={},P=[];let M=!1;if(!Ft(t)){const E=B=>{M=!0;const[L,W]=Wy(B,r,!0);Ns(C,L),W&&P.push(...W)};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}if(!d&&!M)return as(t)&&n.set(t,Ff),Ff;if(bt(d))for(let E=0;E<d.length;E++){const B=ko(d[E]);Og(B)&&(C[B]=Kr)}else if(d)for(const E in d){const B=ko(E);if(Og(B)){const L=d[E],W=C[B]=bt(L)||Ft(L)?{type:L}:Ns({},L),ge=W.type;let ie=!1,pe=!0;if(bt(ge))for(let be=0;be<ge.length;++be){const Z=ge[be],K=Ft(Z)&&Z.name;if(K==="Boolean"){ie=!0;break}else K==="String"&&(pe=!1)}else ie=Ft(ge)&&ge.name==="Boolean";W[0]=ie,W[1]=pe,(ie||br(W,"default"))&&P.push(B)}}const T=[C,P];return as(t)&&n.set(t,T),T}function Og(t){return t[0]!=="$"&&!yc(t)}const Gy=t=>t[0]==="_"||t==="$stable",ug=t=>bt(t)?t.map(Uu):[Uu(t)],wm=(t,r,e)=>{if(r._n)return r;const n=Ia((...p)=>ug(r(...p)),e);return n._c=!1,n},Jy=(t,r,e)=>{const n=t._ctx;for(const p in t){if(Gy(p))continue;const d=t[p];if(Ft(d))r[p]=wm(p,d,n);else if(d!=null){const C=ug(d);r[p]=()=>C}}},Zy=(t,r)=>{const e=ug(r);t.slots.default=()=>e},Qy=(t,r,e)=>{for(const n in r)(e||n!=="_")&&(t[n]=r[n])},mm=(t,r,e)=>{const n=t.slots=Vy();if(t.vnode.shapeFlag&32){const p=r._;p?(Qy(n,r,e),e&&ny(n,"_",p,!0)):Jy(r,n)}else r&&Zy(t,r)},$m=(t,r,e)=>{const{vnode:n,slots:p}=t;let d=!0,C=Kr;if(n.shapeFlag&32){const P=r._;P?e&&P===1?d=!1:Qy(p,r,e):(d=!r.$stable,Jy(r,p)),C=r}else r&&(Zy(t,r),C={default:1});if(d)for(const P in p)!Gy(P)&&C[P]==null&&delete p[P]},Ni=Om;function xm(t){return bm(t)}function bm(t,r){const e=zh();e.__VUE__=!0;const{insert:n,remove:p,patchProp:d,createElement:C,createText:P,createComment:M,setText:T,setElementText:E,parentNode:B,nextSibling:L,setScopeId:W=Ku,insertStaticContent:ge}=t,ie=(J,ee,ce,Ce=null,ve=null,Ae=null,Re=void 0,Ee=null,Se=!!ee.dynamicChildren)=>{if(J===ee)return;J&&!Lo(J,ee)&&(Ce=_r(J),pt(J,ve,Ae,!0),J=null),ee.patchFlag===-2&&(Se=!1,ee.dynamicChildren=null);const{type:$e,ref:it,shapeFlag:qe}=ee;switch($e){case Qh:pe(J,ee,ce,Ce);break;case Pa:be(J,ee,ce,Ce);break;case gp:J==null&&Z(ee,ce,Ce,Re);break;case Mn:ke(J,ee,ce,Ce,ve,Ae,Re,Ee,Se);break;default:qe&1?Q(J,ee,ce,Ce,ve,Ae,Re,Ee,Se):qe&6?at(J,ee,ce,Ce,ve,Ae,Re,Ee,Se):(qe&64||qe&128)&&$e.process(J,ee,ce,Ce,ve,Ae,Re,Ee,Se,Zr)}it!=null&&ve&&ev(it,J&&J.ref,Ae,ee||J,!ee)},pe=(J,ee,ce,Ce)=>{if(J==null)n(ee.el=P(ee.children),ce,Ce);else{const ve=ee.el=J.el;ee.children!==J.children&&T(ve,ee.children)}},be=(J,ee,ce,Ce)=>{J==null?n(ee.el=M(ee.children||""),ce,Ce):ee.el=J.el},Z=(J,ee,ce,Ce)=>{[J.el,J.anchor]=ge(J.children,ee,ce,Ce,J.el,J.anchor)},K=({el:J,anchor:ee},ce,Ce)=>{let ve;for(;J&&J!==ee;)ve=L(J),n(J,ce,Ce),J=ve;n(ee,ce,Ce)},G=({el:J,anchor:ee})=>{let ce;for(;J&&J!==ee;)ce=L(J),p(J),J=ce;p(ee)},Q=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se)=>{ee.type==="svg"?Re="svg":ee.type==="math"&&(Re="mathml"),J==null?re(ee,ce,Ce,ve,Ae,Re,Ee,Se):ae(J,ee,ve,Ae,Re,Ee,Se)},re=(J,ee,ce,Ce,ve,Ae,Re,Ee)=>{let Se,$e;const{props:it,shapeFlag:qe,transition:Ye,dirs:Qe}=J;if(Se=J.el=C(J.type,Ae,it&&it.is,it),qe&8?E(Se,J.children):qe&16&&le(J.children,Se,null,Ce,ve,pp(J,Ae),Re,Ee),Qe&&Io(J,null,Ce,"created"),Y(Se,J,J.scopeId,Re,Ce),it){for(const Pt in it)Pt!=="value"&&!yc(Pt)&&d(Se,Pt,null,it[Pt],Ae,Ce);"value"in it&&d(Se,"value",null,it.value,Ae),($e=it.onVnodeBeforeMount)&&Iu($e,Ce,J)}Qe&&Io(J,null,Ce,"beforeMount");const ot=Am(ve,Ye);ot&&Ye.beforeEnter(Se),n(Se,ee,ce),(($e=it&&it.onVnodeMounted)||ot||Qe)&&Ni(()=>{$e&&Iu($e,Ce,J),ot&&Ye.enter(Se),Qe&&Io(J,null,Ce,"mounted")},ve)},Y=(J,ee,ce,Ce,ve)=>{if(ce&&W(J,ce),Ce)for(let Ae=0;Ae<Ce.length;Ae++)W(J,Ce[Ae]);if(ve){let Ae=ve.subTree;if(ee===Ae||sw(Ae.type)&&(Ae.ssContent===ee||Ae.ssFallback===ee)){const Re=ve.vnode;Y(J,Re,Re.scopeId,Re.slotScopeIds,ve.parent)}}},le=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se=0)=>{for(let $e=Se;$e<J.length;$e++){const it=J[$e]=Ee?wo(J[$e]):Uu(J[$e]);ie(null,it,ee,ce,Ce,ve,Ae,Re,Ee)}},ae=(J,ee,ce,Ce,ve,Ae,Re)=>{const Ee=ee.el=J.el;let{patchFlag:Se,dynamicChildren:$e,dirs:it}=ee;Se|=J.patchFlag&16;const qe=J.props||Kr,Ye=ee.props||Kr;let Qe;if(ce&&Ro(ce,!1),(Qe=Ye.onVnodeBeforeUpdate)&&Iu(Qe,ce,ee,J),it&&Io(ee,J,ce,"beforeUpdate"),ce&&Ro(ce,!0),(qe.innerHTML&&Ye.innerHTML==null||qe.textContent&&Ye.textContent==null)&&E(Ee,""),$e?Te(J.dynamicChildren,$e,Ee,ce,Ce,pp(ee,ve),Ae):Re||Ze(J,ee,Ee,null,ce,Ce,pp(ee,ve),Ae,!1),Se>0){if(Se&16)Ie(Ee,qe,Ye,ce,ve);else if(Se&2&&qe.class!==Ye.class&&d(Ee,"class",null,Ye.class,ve),Se&4&&d(Ee,"style",qe.style,Ye.style,ve),Se&8){const ot=ee.dynamicProps;for(let Pt=0;Pt<ot.length;Pt++){const xt=ot[Pt],Ut=qe[xt],yt=Ye[xt];(yt!==Ut||xt==="value")&&d(Ee,xt,Ut,yt,ve,ce)}}Se&1&&J.children!==ee.children&&E(Ee,ee.children)}else!Re&&$e==null&&Ie(Ee,qe,Ye,ce,ve);((Qe=Ye.onVnodeUpdated)||it)&&Ni(()=>{Qe&&Iu(Qe,ce,ee,J),it&&Io(ee,J,ce,"updated")},Ce)},Te=(J,ee,ce,Ce,ve,Ae,Re)=>{for(let Ee=0;Ee<ee.length;Ee++){const Se=J[Ee],$e=ee[Ee],it=Se.el&&(Se.type===Mn||!Lo(Se,$e)||Se.shapeFlag&70)?B(Se.el):ce;ie(Se,$e,it,null,Ce,ve,Ae,Re,!0)}},Ie=(J,ee,ce,Ce,ve)=>{if(ee!==ce){if(ee!==Kr)for(const Ae in ee)!yc(Ae)&&!(Ae in ce)&&d(J,Ae,ee[Ae],null,ve,Ce);for(const Ae in ce){if(yc(Ae))continue;const Re=ce[Ae],Ee=ee[Ae];Re!==Ee&&Ae!=="value"&&d(J,Ae,Ee,Re,ve,Ce)}"value"in ce&&d(J,"value",ee.value,ce.value,ve)}},ke=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se)=>{const $e=ee.el=J?J.el:P(""),it=ee.anchor=J?J.anchor:P("");let{patchFlag:qe,dynamicChildren:Ye,slotScopeIds:Qe}=ee;Qe&&(Ee=Ee?Ee.concat(Qe):Qe),J==null?(n($e,ce,Ce),n(it,ce,Ce),le(ee.children||[],ce,it,ve,Ae,Re,Ee,Se)):qe>0&&qe&64&&Ye&&J.dynamicChildren?(Te(J.dynamicChildren,Ye,ce,ve,Ae,Re,Ee),(ee.key!=null||ve&&ee===ve.subTree)&&Xy(J,ee,!0)):Ze(J,ee,ce,it,ve,Ae,Re,Ee,Se)},at=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se)=>{ee.slotScopeIds=Ee,J==null?ee.shapeFlag&512?ve.ctx.activate(ee,ce,Ce,Re,Se):vt(ee,ce,Ce,ve,Ae,Re,Se):sr(J,ee,Se)},vt=(J,ee,ce,Ce,ve,Ae,Re)=>{const Ee=J.component=Lm(J,Ce,ve);if(Gh(J)&&(Ee.ctx.renderer=Zr),qm(Ee,!1,Re),Ee.asyncDep){if(ve&&ve.registerDep(Ee,At,Re),!J.el){const Se=Ee.subTree=ys(Pa);be(null,Se,ee,ce)}}else At(Ee,J,ee,ce,ve,Ae,Re)},sr=(J,ee,ce)=>{const Ce=ee.component=J.component;if(Nm(J,ee,ce))if(Ce.asyncDep&&!Ce.asyncResolved){mt(Ce,ee,ce);return}else Ce.next=ee,Ce.update();else ee.el=J.el,Ce.vnode=ee},At=(J,ee,ce,Ce,ve,Ae,Re)=>{const Ee=()=>{if(J.isMounted){let{next:qe,bu:Ye,u:Qe,parent:ot,vnode:Pt}=J;{const vr=Yy(J);if(vr){qe&&(qe.el=Pt.el,mt(J,qe,Re)),vr.asyncDep.then(()=>{J.isUnmounted||Ee()});return}}let xt=qe,Ut;Ro(J,!1),qe?(qe.el=Pt.el,mt(J,qe,Re)):qe=Pt,Ye&&ip(Ye),(Ut=qe.props&&qe.props.onVnodeBeforeUpdate)&&Iu(Ut,ot,qe,Pt),Ro(J,!0);const yt=vp(J),lt=J.subTree;J.subTree=yt,ie(lt,yt,B(lt.el),_r(lt),J,ve,Ae),qe.el=yt.el,xt===null&&Fm(J,yt.el),Qe&&Ni(Qe,ve),(Ut=qe.props&&qe.props.onVnodeUpdated)&&Ni(()=>Iu(Ut,ot,qe,Pt),ve)}else{let qe;const{el:Ye,props:Qe}=ee,{bm:ot,m:Pt,parent:xt,root:Ut,type:yt}=J,lt=jf(ee);if(Ro(J,!1),ot&&ip(ot),!lt&&(qe=Qe&&Qe.onVnodeBeforeMount)&&Iu(qe,xt,ee),Ro(J,!0),Ye&&Pr){const vr=()=>{J.subTree=vp(J),Pr(Ye,J.subTree,J,ve,null)};lt&&yt.__asyncHydrate?yt.__asyncHydrate(Ye,J,vr):vr()}else{Ut.ce&&Ut.ce._injectChildStyle(yt);const vr=J.subTree=vp(J);ie(null,vr,ce,Ce,J,ve,Ae),ee.el=vr.el}if(Pt&&Ni(Pt,ve),!lt&&(qe=Qe&&Qe.onVnodeMounted)){const vr=ee;Ni(()=>Iu(qe,xt,vr),ve)}(ee.shapeFlag&256||xt&&jf(xt.vnode)&&xt.vnode.shapeFlag&256)&&J.a&&Ni(J.a,ve),J.isMounted=!0,ee=ce=Ce=null}};J.scope.on();const Se=J.effect=new uy(Ee);J.scope.off();const $e=J.update=Se.run.bind(Se),it=J.job=Se.runIfDirty.bind(Se);it.i=J,it.id=J.uid,Se.scheduler=()=>ig(it),Ro(J,!0),$e()},mt=(J,ee,ce)=>{ee.component=J;const Ce=J.vnode.props;J.vnode=ee,J.next=null,dm(J,ee.props,Ce,ce),$m(J,ee.children,ce),Eo(),Mg(J),So()},Ze=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se=!1)=>{const $e=J&&J.children,it=J?J.shapeFlag:0,qe=ee.children,{patchFlag:Ye,shapeFlag:Qe}=ee;if(Ye>0){if(Ye&128){Qt($e,qe,ce,Ce,ve,Ae,Re,Ee,Se);return}else if(Ye&256){$t($e,qe,ce,Ce,ve,Ae,Re,Ee,Se);return}}Qe&8?(it&16&&ir($e,ve,Ae),qe!==$e&&E(ce,qe)):it&16?Qe&16?Qt($e,qe,ce,Ce,ve,Ae,Re,Ee,Se):ir($e,ve,Ae,!0):(it&8&&E(ce,""),Qe&16&&le(qe,ce,Ce,ve,Ae,Re,Ee,Se))},$t=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se)=>{J=J||Ff,ee=ee||Ff;const $e=J.length,it=ee.length,qe=Math.min($e,it);let Ye;for(Ye=0;Ye<qe;Ye++){const Qe=ee[Ye]=Se?wo(ee[Ye]):Uu(ee[Ye]);ie(J[Ye],Qe,ce,null,ve,Ae,Re,Ee,Se)}$e>it?ir(J,ve,Ae,!0,!1,qe):le(ee,ce,Ce,ve,Ae,Re,Ee,Se,qe)},Qt=(J,ee,ce,Ce,ve,Ae,Re,Ee,Se)=>{let $e=0;const it=ee.length;let qe=J.length-1,Ye=it-1;for(;$e<=qe&&$e<=Ye;){const Qe=J[$e],ot=ee[$e]=Se?wo(ee[$e]):Uu(ee[$e]);if(Lo(Qe,ot))ie(Qe,ot,ce,null,ve,Ae,Re,Ee,Se);else break;$e++}for(;$e<=qe&&$e<=Ye;){const Qe=J[qe],ot=ee[Ye]=Se?wo(ee[Ye]):Uu(ee[Ye]);if(Lo(Qe,ot))ie(Qe,ot,ce,null,ve,Ae,Re,Ee,Se);else break;qe--,Ye--}if($e>qe){if($e<=Ye){const Qe=Ye+1,ot=Qe<it?ee[Qe].el:Ce;for(;$e<=Ye;)ie(null,ee[$e]=Se?wo(ee[$e]):Uu(ee[$e]),ce,ot,ve,Ae,Re,Ee,Se),$e++}}else if($e>Ye)for(;$e<=qe;)pt(J[$e],ve,Ae,!0),$e++;else{const Qe=$e,ot=$e,Pt=new Map;for($e=ot;$e<=Ye;$e++){const Ct=ee[$e]=Se?wo(ee[$e]):Uu(ee[$e]);Ct.key!=null&&Pt.set(Ct.key,$e)}let xt,Ut=0;const yt=Ye-ot+1;let lt=!1,vr=0;const cs=new Array(yt);for($e=0;$e<yt;$e++)cs[$e]=0;for($e=Qe;$e<=qe;$e++){const Ct=J[$e];if(Ut>=yt){pt(Ct,ve,Ae,!0);continue}let Rt;if(Ct.key!=null)Rt=Pt.get(Ct.key);else for(xt=ot;xt<=Ye;xt++)if(cs[xt-ot]===0&&Lo(Ct,ee[xt])){Rt=xt;break}Rt===void 0?pt(Ct,ve,Ae,!0):(cs[Rt-ot]=$e+1,Rt>=vr?vr=Rt:lt=!0,ie(Ct,ee[Rt],ce,null,ve,Ae,Re,Ee,Se),Ut++)}const is=lt?Cm(cs):Ff;for(xt=is.length-1,$e=yt-1;$e>=0;$e--){const Ct=ot+$e,Rt=ee[Ct],En=Ct+1<it?ee[Ct+1].el:Ce;cs[$e]===0?ie(null,Rt,ce,En,ve,Ae,Re,Ee,Se):lt&&(xt<0||$e!==is[xt]?Xt(Rt,ce,En,2):xt--)}}},Xt=(J,ee,ce,Ce,ve=null)=>{const{el:Ae,type:Re,transition:Ee,children:Se,shapeFlag:$e}=J;if($e&6){Xt(J.component.subTree,ee,ce,Ce);return}if($e&128){J.suspense.move(ee,ce,Ce);return}if($e&64){Re.move(J,ee,ce,Zr);return}if(Re===Mn){n(Ae,ee,ce);for(let qe=0;qe<Se.length;qe++)Xt(Se[qe],ee,ce,Ce);n(J.anchor,ee,ce);return}if(Re===gp){K(J,ee,ce);return}if(Ce!==2&&$e&1&&Ee)if(Ce===0)Ee.beforeEnter(Ae),n(Ae,ee,ce),Ni(()=>Ee.enter(Ae),ve);else{const{leave:qe,delayLeave:Ye,afterLeave:Qe}=Ee,ot=()=>n(Ae,ee,ce),Pt=()=>{qe(Ae,()=>{ot(),Qe&&Qe()})};Ye?Ye(Ae,ot,Pt):Pt()}else n(Ae,ee,ce)},pt=(J,ee,ce,Ce=!1,ve=!1)=>{const{type:Ae,props:Re,ref:Ee,children:Se,dynamicChildren:$e,shapeFlag:it,patchFlag:qe,dirs:Ye,cacheIndex:Qe}=J;if(qe===-2&&(ve=!1),Ee!=null&&ev(Ee,null,ce,J,!0),Qe!=null&&(ee.renderCache[Qe]=void 0),it&256){ee.ctx.deactivate(J);return}const ot=it&1&&Ye,Pt=!jf(J);let xt;if(Pt&&(xt=Re&&Re.onVnodeBeforeUnmount)&&Iu(xt,ee,J),it&6)Sr(J.component,ce,Ce);else{if(it&128){J.suspense.unmount(ce,Ce);return}ot&&Io(J,null,ee,"beforeUnmount"),it&64?J.type.remove(J,ee,ce,Zr,Ce):$e&&!$e.hasOnce&&(Ae!==Mn||qe>0&&qe&64)?ir($e,ee,ce,!1,!0):(Ae===Mn&&qe&384||!ve&&it&16)&&ir(Se,ee,ce),Ce&&Hr(J)}(Pt&&(xt=Re&&Re.onVnodeUnmounted)||ot)&&Ni(()=>{xt&&Iu(xt,ee,J),ot&&Io(J,null,ee,"unmounted")},ce)},Hr=J=>{const{type:ee,el:ce,anchor:Ce,transition:ve}=J;if(ee===Mn){Yt(ce,Ce);return}if(ee===gp){G(J);return}const Ae=()=>{p(ce),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(J.shapeFlag&1&&ve&&!ve.persisted){const{leave:Re,delayLeave:Ee}=ve,Se=()=>Re(ce,Ae);Ee?Ee(J.el,Ae,Se):Se()}else Ae()},Yt=(J,ee)=>{let ce;for(;J!==ee;)ce=L(J),p(J),J=ce;p(ee)},Sr=(J,ee,ce)=>{const{bum:Ce,scope:ve,job:Ae,subTree:Re,um:Ee,m:Se,a:$e}=J;Ig(Se),Ig($e),Ce&&ip(Ce),ve.stop(),Ae&&(Ae.flags|=8,pt(Re,J,ee,ce)),Ee&&Ni(Ee,ee),Ni(()=>{J.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&J.asyncDep&&!J.asyncResolved&&J.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},ir=(J,ee,ce,Ce=!1,ve=!1,Ae=0)=>{for(let Re=Ae;Re<J.length;Re++)pt(J[Re],ee,ce,Ce,ve)},_r=J=>{if(J.shapeFlag&6)return _r(J.component.subTree);if(J.shapeFlag&128)return J.suspense.next();const ee=L(J.anchor||J.el),ce=ee&&ee[z0];return ce?L(ce):ee};let Jr=!1;const nr=(J,ee,ce)=>{J==null?ee._vnode&&pt(ee._vnode,null,null,!0):ie(ee._vnode||null,J,ee,null,null,null,ce),ee._vnode=J,Jr||(Jr=!0,Mg(),Py(),Jr=!1)},Zr={p:ie,um:pt,m:Xt,r:Hr,mt:vt,mc:le,pc:Ze,pbc:Te,n:_r,o:t};let ar,Pr;return{render:nr,hydrate:ar,createApp:pm(nr,ar)}}function pp({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function Ro({effect:t,job:r},e){e?(t.flags|=32,r.flags|=4):(t.flags&=-33,r.flags&=-5)}function Am(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function Xy(t,r,e=!1){const n=t.children,p=r.children;if(bt(n)&&bt(p))for(let d=0;d<n.length;d++){const C=n[d];let P=p[d];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=p[d]=wo(p[d]),P.el=C.el),!e&&P.patchFlag!==-2&&Xy(C,P)),P.type===Qh&&(P.el=C.el)}}function Cm(t){const r=t.slice(),e=[0];let n,p,d,C,P;const M=t.length;for(n=0;n<M;n++){const T=t[n];if(T!==0){if(p=e[e.length-1],t[p]<T){r[n]=p,e.push(n);continue}for(d=0,C=e.length-1;d<C;)P=d+C>>1,t[e[P]]<T?d=P+1:C=P;T<t[e[d]]&&(d>0&&(r[n]=e[d-1]),e[d]=n)}}for(d=e.length,C=e[d-1];d-- >0;)e[d]=C,C=r[C];return e}function Yy(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:Yy(r)}function Ig(t){if(t)for(let r=0;r<t.length;r++)t[r].flags|=8}const _m=Symbol.for("v-scx"),Pm=()=>nh(_m);function xc(t,r,e){return ew(t,r,e)}function ew(t,r,e=Kr){const{immediate:n,deep:p,flush:d,once:C}=e,P=Ns({},e),M=r&&n||!r&&d!=="post";let T;if(Oc){if(d==="sync"){const W=Pm();T=W.__watcherHandles||(W.__watcherHandles=[])}else if(!M){const W=()=>{};return W.stop=Ku,W.resume=Ku,W.pause=Ku,W}}const E=Rn;P.call=(W,ge,ie)=>Fu(W,E,ge,ie);let B=!1;d==="post"?P.scheduler=W=>{Ni(W,E&&E.suspense)}:d!=="sync"&&(B=!0,P.scheduler=(W,ge)=>{ge?W():ig(W)}),P.augmentJob=W=>{r&&(W.flags|=4),B&&(W.flags|=2,E&&(W.id=E.uid,W.i=E))};const L=B0(t,r,P);return Oc&&(T?T.push(L):M&&L()),L}function km(t,r,e){const n=this.proxy,p=Ss(t)?t.includes(".")?tw(n,t):()=>n[t]:t.bind(n,n);let d;Ft(r)?d=r:(d=r.handler,e=r);const C=Dc(this),P=ew(p,d.bind(n),e);return C(),P}function tw(t,r){const e=r.split(".");return()=>{let n=t;for(let p=0;p<e.length&&n;p++)n=n[e[p]];return n}}const Mm=(t,r)=>r==="modelValue"||r==="model-value"?t.modelModifiers:t[`${r}Modifiers`]||t[`${ko(r)}Modifiers`]||t[`${xf(r)}Modifiers`];function Em(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||Kr;let p=e;const d=r.startsWith("update:"),C=d&&Mm(n,r.slice(7));C&&(C.trim&&(p=e.map(E=>Ss(E)?E.trim():E)),C.number&&(p=e.map(n0)));let P,M=n[P=ap(r)]||n[P=ap(ko(r))];!M&&d&&(M=n[P=ap(xf(r))]),M&&Fu(M,t,6,p);const T=n[P+"Once"];if(T){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,Fu(T,t,6,p)}}function rw(t,r,e=!1){const n=r.emitsCache,p=n.get(t);if(p!==void 0)return p;const d=t.emits;let C={},P=!1;if(!Ft(t)){const M=T=>{const E=rw(T,r,!0);E&&(P=!0,Ns(C,E))};!e&&r.mixins.length&&r.mixins.forEach(M),t.extends&&M(t.extends),t.mixins&&t.mixins.forEach(M)}return!d&&!P?(as(t)&&n.set(t,null),null):(bt(d)?d.forEach(M=>C[M]=null):Ns(C,d),as(t)&&n.set(t,C),C)}function Zh(t,r){return!t||!Hh(r)?!1:(r=r.slice(2).replace(/Once$/,""),br(t,r[0].toLowerCase()+r.slice(1))||br(t,xf(r))||br(t,r))}function vp(t){const{type:r,vnode:e,proxy:n,withProxy:p,propsOptions:[d],slots:C,attrs:P,emit:M,render:T,renderCache:E,props:B,data:L,setupState:W,ctx:ge,inheritAttrs:ie}=t,pe=Sh(t);let be,Z;try{if(e.shapeFlag&4){const G=p||n,Q=G;be=Uu(T.call(Q,G,E,B,W,L,ge)),Z=P}else{const G=r;be=Uu(G.length>1?G(B,{attrs:P,slots:C,emit:M}):G(B,null)),Z=r.props?P:Sm(P)}}catch(G){bc.length=0,Wh(G,t,1),be=ys(Pa)}let K=be;if(Z&&ie!==!1){const G=Object.keys(Z),{shapeFlag:Q}=K;G.length&&Q&7&&(d&&G.some(Gv)&&(Z=Tm(Z,d)),K=Mo(K,Z,!1,!0))}return e.dirs&&(K=Mo(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(e.dirs):e.dirs),e.transition&&Sc(K,e.transition),be=K,Sh(pe),be}const Sm=t=>{let r;for(const e in t)(e==="class"||e==="style"||Hh(e))&&((r||(r={}))[e]=t[e]);return r},Tm=(t,r)=>{const e={};for(const n in t)(!Gv(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function Nm(t,r,e){const{props:n,children:p,component:d}=t,{props:C,children:P,patchFlag:M}=r,T=d.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&M>=0){if(M&1024)return!0;if(M&16)return n?Rg(n,C,T):!!C;if(M&8){const E=r.dynamicProps;for(let B=0;B<E.length;B++){const L=E[B];if(C[L]!==n[L]&&!Zh(T,L))return!0}}}else return(p||P)&&(!P||!P.$stable)?!0:n===C?!1:n?C?Rg(n,C,T):!0:!!C;return!1}function Rg(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let p=0;p<n.length;p++){const d=n[p];if(r[d]!==t[d]&&!Zh(e,d))return!0}return!1}function Fm({vnode:t,parent:r},e){for(;r;){const n=r.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=r.vnode).el=e,r=r.parent;else break}}const sw=t=>t.__isSuspense;function Om(t,r){r&&r.pendingBranch?bt(t)?r.effects.push(...t):r.effects.push(t):V0(t)}const Mn=Symbol.for("v-fgt"),Qh=Symbol.for("v-txt"),Pa=Symbol.for("v-cmt"),gp=Symbol.for("v-stc"),bc=[];let Hi=null;function us(t=!1){bc.push(Hi=t?null:[])}function Im(){bc.pop(),Hi=bc[bc.length-1]||null}let Tc=1;function jg(t){Tc+=t,t<0&&Hi&&(Hi.hasOnce=!0)}function nw(t){return t.dynamicChildren=Tc>0?Hi||Ff:null,Im(),Tc>0&&Hi&&Hi.push(t),t}function qs(t,r,e,n,p,d){return nw(Xi(t,r,e,n,p,d,!0))}function Nc(t,r,e,n,p){return nw(ys(t,r,e,n,p,!0))}function Fc(t){return t?t.__v_isVNode===!0:!1}function Lo(t,r){return t.type===r.type&&t.key===r.key}const aw=({key:t})=>t??null,ah=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ss(t)||Dn(t)||Ft(t)?{i:ka,r:t,k:r,f:!!e}:t:null);function Xi(t,r=null,e=null,n=0,p=null,d=t===Mn?0:1,C=!1,P=!1){const M={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&aw(r),ref:r&&ah(r),scopeId:My,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:n,dynamicProps:p,dynamicChildren:null,appContext:null,ctx:ka};return P?(og(M,e),d&128&&t.normalize(M)):e&&(M.shapeFlag|=Ss(e)?8:16),Tc>0&&!C&&Hi&&(M.patchFlag>0||d&6)&&M.patchFlag!==32&&Hi.push(M),M}const ys=Rm;function Rm(t,r=null,e=null,n=0,p=null,d=!1){if((!t||t===am)&&(t=Pa),Fc(t)){const P=Mo(t,r,!0);return e&&og(P,e),Tc>0&&!d&&Hi&&(P.shapeFlag&6?Hi[Hi.indexOf(t)]=P:Hi.push(P)),P.patchFlag=-2,P}if(Wm(t)&&(t=t.__vccOpts),r){r=jm(r);let{class:P,style:M}=r;P&&!Ss(P)&&(r.class=jn(P)),as(M)&&(ag(M)&&!bt(M)&&(M=Ns({},M)),r.style=Qv(M))}const C=Ss(t)?1:sw(t)?128:Ey(t)?64:as(t)?4:Ft(t)?2:0;return Xi(t,r,e,n,p,C,d,!0)}function jm(t){return t?ag(t)||zy(t)?Ns({},t):t:null}function Mo(t,r,e=!1,n=!1){const{props:p,ref:d,patchFlag:C,children:P,transition:M}=t,T=r?Dm(p||{},r):p,E={__v_isVNode:!0,__v_skip:!0,type:t.type,props:T,key:T&&aw(T),ref:r&&r.ref?e&&d?bt(d)?d.concat(ah(r)):[d,ah(r)]:ah(r):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:P,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Mn?C===-1?16:C|16:C,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:M,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Mo(t.ssContent),ssFallback:t.ssFallback&&Mo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return M&&n&&Sc(E,M.clone(E)),E}function Tu(t=" ",r=0){return ys(Qh,null,t,r)}function nc(t="",r=!1){return r?(us(),Nc(Pa,null,t)):ys(Pa,null,t)}function Uu(t){return t==null||typeof t=="boolean"?ys(Pa):bt(t)?ys(Mn,null,t.slice()):Fc(t)?wo(t):ys(Qh,null,String(t))}function wo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Mo(t)}function og(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(bt(r))e=16;else if(typeof r=="object")if(n&65){const p=r.default;p&&(p._c&&(p._d=!1),og(t,p()),p._c&&(p._d=!0));return}else{e=32;const p=r._;!p&&!zy(r)?r._ctx=ka:p===3&&ka&&(ka.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else Ft(r)?(r={default:r,_ctx:ka},e=32):(r=String(r),n&64?(e=16,r=[Tu(r)]):e=8);t.children=r,t.shapeFlag|=e}function Dm(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const p in n)if(p==="class")r.class!==n.class&&(r.class=jn([r.class,n.class]));else if(p==="style")r.style=Qv([r.style,n.style]);else if(Hh(p)){const d=r[p],C=n[p];C&&d!==C&&!(bt(d)&&d.includes(C))&&(r[p]=d?[].concat(d,C):C)}else p!==""&&(r[p]=n[p])}return r}function Iu(t,r,e,n=null){Fu(t,r,7,[e,n])}const Um=Hy();let Bm=0;function Lm(t,r,e){const n=t.type,p=(r?r.appContext:t.appContext)||Um,d={uid:Bm++,vnode:t,type:n,parent:r,appContext:p,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new h0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(p.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wy(n,p),emitsOptions:rw(n,p),emit:null,emitted:null,propsDefaults:Kr,inheritAttrs:n.inheritAttrs,ctx:Kr,data:Kr,props:Kr,attrs:Kr,slots:Kr,refs:Kr,setupState:Kr,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=r?r.root:d,d.emit=Em.bind(null,d),t.ce&&t.ce(d),d}let Rn=null;const Hm=()=>Rn||ka;let Fh,av;{const t=zh(),r=(e,n)=>{let p;return(p=t[e])||(p=t[e]=[]),p.push(n),d=>{p.length>1?p.forEach(C=>C(d)):p[0](d)}};Fh=r("__VUE_INSTANCE_SETTERS__",e=>Rn=e),av=r("__VUE_SSR_SETTERS__",e=>Oc=e)}const Dc=t=>{const r=Rn;return Fh(t),t.scope.on(),()=>{t.scope.off(),Fh(r)}},Dg=()=>{Rn&&Rn.scope.off(),Fh(null)};function iw(t){return t.vnode.shapeFlag&4}let Oc=!1;function qm(t,r=!1,e=!1){r&&av(r);const{props:n,children:p}=t.vnode,d=iw(t);gm(t,n,d,r),mm(t,p,e);const C=d?Vm(t,r):void 0;return r&&av(!1),C}function Vm(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,im);const{setup:n}=e;if(n){Eo();const p=t.setupContext=n.length>1?Km(t):null,d=Dc(t),C=Rc(n,t,0,[t.props,p]),P=ey(C);if(So(),d(),(P||t.sp)&&!jf(t)&&Iy(t),P){if(C.then(Dg,Dg),r)return C.then(M=>{Ug(t,M,r)}).catch(M=>{Wh(M,t,0)});t.asyncDep=C}else Ug(t,C,r)}else lw(t,r)}function Ug(t,r,e){Ft(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:as(r)&&(t.setupState=Ay(r)),lw(t,e)}let Bg;function lw(t,r,e){const n=t.type;if(!t.render){if(!r&&Bg&&!n.render){const p=n.template||lg(t).template;if(p){const{isCustomElement:d,compilerOptions:C}=t.appContext.config,{delimiters:P,compilerOptions:M}=n,T=Ns(Ns({isCustomElement:d,delimiters:P},C),M);n.render=Bg(p,T)}}t.render=n.render||Ku}{const p=Dc(t);Eo();try{lm(t)}finally{So(),p()}}}const zm={get(t,r){return On(t,"get",""),t[r]}};function Km(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,zm),slots:t.slots,emit:t.emit,expose:r}}function fg(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Ay(F0(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in $c)return $c[e](t)},has(r,e){return e in r||e in $c}})):t.proxy}function Wm(t){return Ft(t)&&"__vccOpts"in t}const Gm=(t,r)=>D0(t,r,Oc);function co(t,r,e){const n=arguments.length;return n===2?as(r)&&!bt(r)?Fc(r)?ys(t,null,[r]):ys(t,r):ys(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&Fc(e)&&(e=[e]),ys(t,r,e))}const Jm="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let iv;const Lg=typeof window<"u"&&window.trustedTypes;if(Lg)try{iv=Lg.createPolicy("vue",{createHTML:t=>t})}catch{}const uw=iv?t=>iv.createHTML(t):t=>t,Zm="http://www.w3.org/2000/svg",Qm="http://www.w3.org/1998/Math/MathML",Yu=typeof document<"u"?document:null,Hg=Yu&&Yu.createElement("template"),Xm={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const p=r==="svg"?Yu.createElementNS(Zm,t):r==="mathml"?Yu.createElementNS(Qm,t):e?Yu.createElement(t,{is:e}):Yu.createElement(t);return t==="select"&&n&&n.multiple!=null&&p.setAttribute("multiple",n.multiple),p},createText:t=>Yu.createTextNode(t),createComment:t=>Yu.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Yu.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,p,d){const C=e?e.previousSibling:r.lastChild;if(p&&(p===d||p.nextSibling))for(;r.insertBefore(p.cloneNode(!0),e),!(p===d||!(p=p.nextSibling)););else{Hg.innerHTML=uw(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const P=Hg.content;if(n==="svg"||n==="mathml"){const M=P.firstChild;for(;M.firstChild;)P.appendChild(M.firstChild);P.removeChild(M)}r.insertBefore(P,e)}return[C?C.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},uo="transition",ic="animation",Ic=Symbol("_vtc"),ow={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ym=Ns({},Sy,ow),e$=t=>(t.displayName="Transition",t.props=Ym,t),t$=e$((t,{slots:r})=>co(G0,r$(t),r)),jo=(t,r=[])=>{bt(t)?t.forEach(e=>e(...r)):t&&t(...r)},qg=t=>t?bt(t)?t.some(r=>r.length>1):t.length>1:!1;function r$(t){const r={};for(const ke in t)ke in ow||(r[ke]=t[ke]);if(t.css===!1)return r;const{name:e="v",type:n,duration:p,enterFromClass:d=`${e}-enter-from`,enterActiveClass:C=`${e}-enter-active`,enterToClass:P=`${e}-enter-to`,appearFromClass:M=d,appearActiveClass:T=C,appearToClass:E=P,leaveFromClass:B=`${e}-leave-from`,leaveActiveClass:L=`${e}-leave-active`,leaveToClass:W=`${e}-leave-to`}=t,ge=s$(p),ie=ge&&ge[0],pe=ge&&ge[1],{onBeforeEnter:be,onEnter:Z,onEnterCancelled:K,onLeave:G,onLeaveCancelled:Q,onBeforeAppear:re=be,onAppear:Y=Z,onAppearCancelled:le=K}=r,ae=(ke,at,vt)=>{Do(ke,at?E:P),Do(ke,at?T:C),vt&&vt()},Te=(ke,at)=>{ke._isLeaving=!1,Do(ke,B),Do(ke,W),Do(ke,L),at&&at()},Ie=ke=>(at,vt)=>{const sr=ke?Y:Z,At=()=>ae(at,ke,vt);jo(sr,[at,At]),Vg(()=>{Do(at,ke?M:d),oo(at,ke?E:P),qg(sr)||zg(at,n,ie,At)})};return Ns(r,{onBeforeEnter(ke){jo(be,[ke]),oo(ke,d),oo(ke,C)},onBeforeAppear(ke){jo(re,[ke]),oo(ke,M),oo(ke,T)},onEnter:Ie(!1),onAppear:Ie(!0),onLeave(ke,at){ke._isLeaving=!0;const vt=()=>Te(ke,at);oo(ke,B),oo(ke,L),i$(),Vg(()=>{ke._isLeaving&&(Do(ke,B),oo(ke,W),qg(G)||zg(ke,n,pe,vt))}),jo(G,[ke,vt])},onEnterCancelled(ke){ae(ke,!1),jo(K,[ke])},onAppearCancelled(ke){ae(ke,!0),jo(le,[ke])},onLeaveCancelled(ke){Te(ke),jo(Q,[ke])}})}function s$(t){if(t==null)return null;if(as(t))return[dp(t.enter),dp(t.leave)];{const r=dp(t);return[r,r]}}function dp(t){return a0(t)}function oo(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[Ic]||(t[Ic]=new Set)).add(r)}function Do(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[Ic];e&&(e.delete(r),e.size||(t[Ic]=void 0))}function Vg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let n$=0;function zg(t,r,e,n){const p=t._endId=++n$,d=()=>{p===t._endId&&n()};if(e!=null)return setTimeout(d,e);const{type:C,timeout:P,propCount:M}=a$(t,r);if(!C)return n();const T=C+"end";let E=0;const B=()=>{t.removeEventListener(T,L),d()},L=W=>{W.target===t&&++E>=M&&B()};setTimeout(()=>{E<M&&B()},P+1),t.addEventListener(T,L)}function a$(t,r){const e=window.getComputedStyle(t),n=ge=>(e[ge]||"").split(", "),p=n(`${uo}Delay`),d=n(`${uo}Duration`),C=Kg(p,d),P=n(`${ic}Delay`),M=n(`${ic}Duration`),T=Kg(P,M);let E=null,B=0,L=0;r===uo?C>0&&(E=uo,B=C,L=d.length):r===ic?T>0&&(E=ic,B=T,L=M.length):(B=Math.max(C,T),E=B>0?C>T?uo:ic:null,L=E?E===uo?d.length:M.length:0);const W=E===uo&&/\b(transform|all)(,|$)/.test(n(`${uo}Property`).toString());return{type:E,timeout:B,propCount:L,hasTransform:W}}function Kg(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>Wg(e)+Wg(t[n])))}function Wg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function i$(){return document.body.offsetHeight}function l$(t,r,e){const n=t[Ic];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const Gg=Symbol("_vod"),u$=Symbol("_vsh"),o$=Symbol(""),f$=/(^|;)\s*display\s*:/;function c$(t,r,e){const n=t.style,p=Ss(e);let d=!1;if(e&&!p){if(r)if(Ss(r))for(const C of r.split(";")){const P=C.slice(0,C.indexOf(":")).trim();e[P]==null&&ih(n,P,"")}else for(const C in r)e[C]==null&&ih(n,C,"");for(const C in e)C==="display"&&(d=!0),ih(n,C,e[C])}else if(p){if(r!==e){const C=n[o$];C&&(e+=";"+C),n.cssText=e,d=f$.test(e)}}else r&&t.removeAttribute("style");Gg in t&&(t[Gg]=d?n.display:"",t[u$]&&(n.display="none"))}const Jg=/\s*!important$/;function ih(t,r,e){if(bt(e))e.forEach(n=>ih(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=h$(t,r);Jg.test(e)?t.setProperty(xf(n),e.replace(Jg,""),"important"):t[n]=e}}const Zg=["Webkit","Moz","ms"],yp={};function h$(t,r){const e=yp[r];if(e)return e;let n=ko(r);if(n!=="filter"&&n in t)return yp[r]=n;n=sy(n);for(let p=0;p<Zg.length;p++){const d=Zg[p]+n;if(d in t)return yp[r]=d}return r}const Qg="http://www.w3.org/1999/xlink";function Xg(t,r,e,n,p,d=c0(r)){n&&r.startsWith("xlink:")?e==null?t.removeAttributeNS(Qg,r.slice(6,r.length)):t.setAttributeNS(Qg,r,e):e==null||d&&!ay(e)?t.removeAttribute(r):t.setAttribute(r,d?"":ro(e)?String(e):e)}function Yg(t,r,e,n,p){if(r==="innerHTML"||r==="textContent"){e!=null&&(t[r]=r==="innerHTML"?uw(e):e);return}const d=t.tagName;if(r==="value"&&d!=="PROGRESS"&&!d.includes("-")){const P=d==="OPTION"?t.getAttribute("value")||"":t.value,M=e==null?t.type==="checkbox"?"on":"":String(e);(P!==M||!("_value"in t))&&(t.value=M),e==null&&t.removeAttribute(r),t._value=e;return}let C=!1;if(e===""||e==null){const P=typeof t[r];P==="boolean"?e=ay(e):e==null&&P==="string"?(e="",C=!0):P==="number"&&(e=0,C=!0)}try{t[r]=e}catch{}C&&t.removeAttribute(p||r)}function p$(t,r,e,n){t.addEventListener(r,e,n)}function v$(t,r,e,n){t.removeEventListener(r,e,n)}const ed=Symbol("_vei");function g$(t,r,e,n,p=null){const d=t[ed]||(t[ed]={}),C=d[r];if(n&&C)C.value=n;else{const[P,M]=d$(r);if(n){const T=d[r]=m$(n,p);p$(t,P,T,M)}else C&&(v$(t,P,C,M),d[r]=void 0)}}const td=/(?:Once|Passive|Capture)$/;function d$(t){let r;if(td.test(t)){r={};let n;for(;n=t.match(td);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xf(t.slice(2)),r]}let wp=0;const y$=Promise.resolve(),w$=()=>wp||(y$.then(()=>wp=0),wp=Date.now());function m$(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;Fu($$(n,e.value),r,5,[n])};return e.value=t,e.attached=w$(),e}function $$(t,r){if(bt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>p=>!p._stopped&&n&&n(p))}else return r}const rd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,x$=(t,r,e,n,p,d)=>{const C=p==="svg";r==="class"?l$(t,n,C):r==="style"?c$(t,e,n):Hh(r)?Gv(r)||g$(t,r,e,n,d):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):b$(t,r,n,C))?(Yg(t,r,n),!t.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&Xg(t,r,n,C,d,r!=="value")):t._isVueCE&&(/[A-Z]/.test(r)||!Ss(n))?Yg(t,ko(r),n,d,r):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),Xg(t,r,n,C))};function b$(t,r,e,n){if(n)return!!(r==="innerHTML"||r==="textContent"||r in t&&rd(r)&&Ft(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const p=t.tagName;if(p==="IMG"||p==="VIDEO"||p==="CANVAS"||p==="SOURCE")return!1}return rd(r)&&Ss(e)?!1:r in t}const A$=Ns({patchProp:x$},Xm);let sd;function C$(){return sd||(sd=xm(A$))}const _$=(...t)=>{const r=C$().createApp(...t),{mount:e}=r;return r.mount=n=>{const p=k$(n);if(!p)return;const d=r._component;!Ft(d)&&!d.render&&!d.template&&(d.template=p.innerHTML),p.nodeType===1&&(p.textContent="");const C=e(p,!1,P$(p));return p instanceof Element&&(p.removeAttribute("v-cloak"),p.setAttribute("data-v-app","")),C},r};function P$(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function k$(t){return Ss(t)?document.querySelector(t):t}function Ac(){return Ac=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Ac.apply(this,arguments)}var M$=13,E$=9,S$=8,T$=89,zc=90,N$=77,nd=57,ad=219,id=222,ld=192,F$=27,ud=100,O$=3e3,I$=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),mp=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),R$=jc({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var p="border-top-left-radius",d="border-bottom-left-radius";if(e){e.style[p]=n[p],e.style[d]=n[d],r.style[p]="0",r.style[d]="0";var C=["background-color","margin-top","padding-top","font-family","font-size","line-height"];C.forEach(function(P){e.style[P]=n[P]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,p=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:p})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=Ac({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,p=n.stack,d=n.offset;if(p.length&&d>-1){this.history.stack=p.slice(0,d+1);var C=this.history.stack.length;if(C>ud){var P=C-ud;this.history.stack=p.slice(P,C),this.history.offset=Math.max(this.history.offset-P,0)}}var M=Date.now();if(e){var T=this.history.stack[this.history.offset];if(T&&M-T.timestamp<O$){var E,B,L=/[^a-z0-9]([a-z0-9]+)$/i,W=(E=this._getLines(T.value,T.selectionStart).pop())===null||E===void 0?void 0:E.match(L),ge=(B=this._getLines(r.value,r.selectionStart).pop())===null||B===void 0?void 0:B.match(L);if(W&&ge&&ge[1].startsWith(W[1])){this.history.stack[this.history.offset]=Ac({},r,{timestamp:M});return}}}this.history.stack.push(Ac({},r,{timestamp:M})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,p=e.selectionStart,d=e.selectionEnd;this._recordChange({value:n,selectionStart:p,selectionEnd:d},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,p=e[n-1];p&&(this._updateInput(p),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,p=e[n+1];p&&(this._updateInput(p),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,p=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===F$&&(r.target.blur(),this.$emit("blur",r));var d=r.target,C=d.value,P=d.selectionStart,M=d.selectionEnd,T=(n?" ":"	").repeat(e);if(r.keyCode===E$&&!p&&this.capture)if(r.preventDefault(),r.shiftKey){var E=this._getLines(C,P),B=E.length-1,L=this._getLines(C,M).length-1,W=C.split(`
`).map(function(ke,at){return at>=B&&at<=L&&ke.startsWith(T)?ke.substring(T.length):ke}).join(`
`);if(C!==W){var ge=E[B];this._applyEdits({value:W,selectionStart:ge.startsWith(T)?P-T.length:P,selectionEnd:M-(C.length-W.length)})}}else if(P!==M){var ie=this._getLines(C,P),pe=ie.length-1,be=this._getLines(C,M).length-1,Z=ie[pe];this._applyEdits({value:C.split(`
`).map(function(ke,at){return at>=pe&&at<=be?T+ke:ke}).join(`
`),selectionStart:/\S/.test(Z)?P+T.length:P,selectionEnd:M+T.length*(be-pe+1)})}else{var K=P+T.length;this._applyEdits({value:C.substring(0,P)+T+C.substring(M),selectionStart:K,selectionEnd:K})}else if(r.keyCode===S$){var G=P!==M,Q=C.substring(0,P);if(Q.endsWith(T)&&!G){r.preventDefault();var re=P-T.length;this._applyEdits({value:C.substring(0,P-T.length)+C.substring(M),selectionStart:re,selectionEnd:re})}}else if(r.keyCode===M$){if(P===M){var Y=this._getLines(C,P).pop(),le=Y==null?void 0:Y.match(/^\s+/);if(le&&le[0]){r.preventDefault();var ae=`
`+le[0],Te=P+ae.length;this._applyEdits({value:C.substring(0,P)+ae+C.substring(M),selectionStart:Te,selectionEnd:Te})}}}else if(r.keyCode===nd||r.keyCode===ad||r.keyCode===id||r.keyCode===ld){var Ie;r.keyCode===nd&&r.shiftKey?Ie=["(",")"]:r.keyCode===ad?r.shiftKey?Ie=["{","}"]:Ie=["[","]"]:r.keyCode===id?r.shiftKey?Ie=['"','"']:Ie=["'","'"]:r.keyCode===ld&&!r.shiftKey&&(Ie=["`","`"]),P!==M&&Ie&&(r.preventDefault(),this._applyEdits({value:C.substring(0,P)+Ie[0]+C.substring(P,M)+Ie[1]+C.substring(M),selectionStart:P,selectionEnd:M+2}))}else(mp?r.metaKey&&r.keyCode===zc:r.ctrlKey&&r.keyCode===zc)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(mp?r.metaKey&&r.keyCode===zc&&r.shiftKey:I$?r.ctrlKey&&r.keyCode===T$:r.ctrlKey&&r.keyCode===zc&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===N$&&r.ctrlKey&&(!mp||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=co("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=co("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(P,M){return co("div",{class:"prism-editor__line-number token comment"},""+ ++M)})]),p=co("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(M){r.$emit("click",M)},onKeyup:function(M){r.$emit("keyup",M)},onFocus:function(M){r.$emit("focus",M)},onBlur:function(M){r.$emit("blur",M)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),d=co("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),C=co("div",{class:"prism-editor__container"},[p,d]);return co("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,C])}}),qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function D$(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var p=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,p.get?p:{enumerable:!0,get:function(){return t[n]}})}),e}var U$={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var p=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,C={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function Z(K){return K instanceof M?new M(K.type,Z(K.content),K.alias):Array.isArray(K)?K.map(Z):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Z){return Object.prototype.toString.call(Z).slice(8,-1)},objId:function(Z){return Z.__id||Object.defineProperty(Z,"__id",{value:++d}),Z.__id},clone:function Z(K,G){G=G||{};var Q,re;switch(P.util.type(K)){case"Object":if(re=P.util.objId(K),G[re])return G[re];Q={},G[re]=Q;for(var Y in K)K.hasOwnProperty(Y)&&(Q[Y]=Z(K[Y],G));return Q;case"Array":return re=P.util.objId(K),G[re]?G[re]:(Q=[],G[re]=Q,K.forEach(function(le,ae){Q[ae]=Z(le,G)}),Q);default:return K}},getLanguage:function(Z){for(;Z;){var K=p.exec(Z.className);if(K)return K[1].toLowerCase();Z=Z.parentElement}return"none"},setLanguage:function(Z,K){Z.className=Z.className.replace(RegExp(p,"gi"),""),Z.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var Z=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(Z){var K=document.getElementsByTagName("script");for(var G in K)if(K[G].src==Z)return K[G]}return null}},isActive:function(Z,K,G){for(var Q="no-"+K;Z;){var re=Z.classList;if(re.contains(K))return!0;if(re.contains(Q))return!1;Z=Z.parentElement}return!!G}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(Z,K){var G=P.util.clone(P.languages[Z]);for(var Q in K)G[Q]=K[Q];return G},insertBefore:function(Z,K,G,Q){Q=Q||P.languages;var re=Q[Z],Y={};for(var le in re)if(re.hasOwnProperty(le)){if(le==K)for(var ae in G)G.hasOwnProperty(ae)&&(Y[ae]=G[ae]);G.hasOwnProperty(le)||(Y[le]=re[le])}var Te=Q[Z];return Q[Z]=Y,P.languages.DFS(P.languages,function(Ie,ke){ke===Te&&Ie!=Z&&(this[Ie]=Y)}),Y},DFS:function Z(K,G,Q,re){re=re||{};var Y=P.util.objId;for(var le in K)if(K.hasOwnProperty(le)){G.call(K,le,K[le],Q||le);var ae=K[le],Te=P.util.type(ae);Te==="Object"&&!re[Y(ae)]?(re[Y(ae)]=!0,Z(ae,G,null,re)):Te==="Array"&&!re[Y(ae)]&&(re[Y(ae)]=!0,Z(ae,G,le,re))}}},plugins:{},highlightAll:function(Z,K){P.highlightAllUnder(document,Z,K)},highlightAllUnder:function(Z,K,G){var Q={callback:G,container:Z,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var re=0,Y;Y=Q.elements[re++];)P.highlightElement(Y,K===!0,Q.callback)},highlightElement:function(Z,K,G){var Q=P.util.getLanguage(Z),re=P.languages[Q];P.util.setLanguage(Z,Q);var Y=Z.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(Y,Q);var le=Z.textContent,ae={element:Z,language:Q,grammar:re,code:le};function Te(ke){ae.highlightedCode=ke,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),G&&G.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),Y=ae.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),G&&G.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Te(P.util.encode(ae.code));return}if(K&&n.Worker){var Ie=new Worker(P.filename);Ie.onmessage=function(ke){Te(ke.data)},Ie.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Te(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(Z,K,G){var Q={code:Z,grammar:K,language:G};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),M.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(Z,K){var G=K.rest;if(G){for(var Q in G)K[Q]=G[Q];delete K.rest}var re=new B;return L(re,re.head,Z),E(Z,re,K,re.head,0),ge(re)},hooks:{all:{},add:function(Z,K){var G=P.hooks.all;G[Z]=G[Z]||[],G[Z].push(K)},run:function(Z,K){var G=P.hooks.all[Z];if(!(!G||!G.length))for(var Q=0,re;re=G[Q++];)re(K)}},Token:M};n.Prism=P;function M(Z,K,G,Q){this.type=Z,this.content=K,this.alias=G,this.length=(Q||"").length|0}M.stringify=function Z(K,G){if(typeof K=="string")return K;if(Array.isArray(K)){var Q="";return K.forEach(function(Te){Q+=Z(Te,G)}),Q}var re={type:K.type,content:Z(K.content,G),tag:"span",classes:["token",K.type],attributes:{},language:G},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(re.classes,Y):re.classes.push(Y)),P.hooks.run("wrap",re);var le="";for(var ae in re.attributes)le+=" "+ae+'="'+(re.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+re.tag+' class="'+re.classes.join(" ")+'"'+le+">"+re.content+"</"+re.tag+">"};function T(Z,K,G,Q){Z.lastIndex=K;var re=Z.exec(G);if(re&&Q&&re[1]){var Y=re[1].length;re.index+=Y,re[0]=re[0].slice(Y)}return re}function E(Z,K,G,Q,re,Y){for(var le in G)if(!(!G.hasOwnProperty(le)||!G[le])){var ae=G[le];ae=Array.isArray(ae)?ae:[ae];for(var Te=0;Te<ae.length;++Te){if(Y&&Y.cause==le+","+Te)return;var Ie=ae[Te],ke=Ie.inside,at=!!Ie.lookbehind,vt=!!Ie.greedy,sr=Ie.alias;if(vt&&!Ie.pattern.global){var At=Ie.pattern.toString().match(/[imsuy]*$/)[0];Ie.pattern=RegExp(Ie.pattern.source,At+"g")}for(var mt=Ie.pattern||Ie,Ze=Q.next,$t=re;Ze!==K.tail&&!(Y&&$t>=Y.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(K.length>Z.length)return;if(!(Qt instanceof M)){var Xt=1,pt;if(vt){if(pt=T(mt,$t,Z,at),!pt||pt.index>=Z.length)break;var ir=pt.index,Hr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;ir>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof M)continue;for(var Sr=Ze;Sr!==K.tail&&(Yt<Hr||typeof Sr.value=="string");Sr=Sr.next)Xt++,Yt+=Sr.value.length;Xt--,Qt=Z.slice($t,Yt),pt.index-=$t}else if(pt=T(mt,0,Qt,at),!pt)continue;var ir=pt.index,_r=pt[0],Jr=Qt.slice(0,ir),nr=Qt.slice(ir+_r.length),Zr=$t+Qt.length;Y&&Zr>Y.reach&&(Y.reach=Zr);var ar=Ze.prev;Jr&&(ar=L(K,ar,Jr),$t+=Jr.length),W(K,ar,Xt);var Pr=new M(le,ke?P.tokenize(_r,ke):_r,sr,_r);if(Ze=L(K,ar,Pr),nr&&L(K,Ze,nr),Xt>1){var J={cause:le+","+Te,reach:Zr};E(Z,K,G,Ze.prev,$t,J),Y&&J.reach>Y.reach&&(Y.reach=J.reach)}}}}}}function B(){var Z={value:null,prev:null,next:null},K={value:null,prev:Z,next:null};Z.next=K,this.head=Z,this.tail=K,this.length=0}function L(Z,K,G){var Q=K.next,re={value:G,prev:K,next:Q};return K.next=re,Q.prev=re,Z.length++,re}function W(Z,K,G){for(var Q=K.next,re=0;re<G&&Q!==Z.tail;re++)Q=Q.next;K.next=Q,Q.prev=K,Z.length-=re}function ge(Z){for(var K=[],G=Z.head.next;G!==Z.tail;)K.push(G.value),G=G.next;return K}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(Z){var K=JSON.parse(Z.data),G=K.language,Q=K.code,re=K.immediateClose;n.postMessage(P.highlight(Q,P.languages[G],G)),re&&n.close()},!1)),P;var ie=P.util.currentScript();ie&&(P.filename=ie.src,ie.hasAttribute("data-manual")&&(P.manual=!0));function pe(){P.manual||P.highlightAll()}if(!P.manual){var be=document.readyState;be==="loading"||be==="interactive"&&ie&&ie.defer?document.addEventListener("DOMContentLoaded",pe):window.requestAnimationFrame?window.requestAnimationFrame(pe):window.setTimeout(pe,16)}return P}(r);t.exports&&(t.exports=e),typeof qi<"u"&&(qi.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(p,d){var C={};C["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[d]},C.cdata=/^<!\[CDATA\[|\]\]>$/i;var P={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:C}};P["language-"+d]={pattern:/[\s\S]+/,inside:e.languages[d]};var M={};M[p]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return p}),"i"),lookbehind:!0,greedy:!0,inside:P},e.languages.insertBefore("markup","cdata",M)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,p){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[p,"language-"+p],inside:e.languages[p]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var p=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+p.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+p.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+p.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+p.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:p,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var d=n.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",p=function(ie,pe){return"✖ Error "+ie+" while fetching file: "+pe},d="✖ Error: File does not exist or is empty",C={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},P="data-src-status",M="loading",T="loaded",E="failed",B="pre[data-src]:not(["+P+'="'+T+'"]):not(['+P+'="'+M+'"])';function L(ie,pe,be){var Z=new XMLHttpRequest;Z.open("GET",ie,!0),Z.onreadystatechange=function(){Z.readyState==4&&(Z.status<400&&Z.responseText?pe(Z.responseText):Z.status>=400?be(p(Z.status,Z.statusText)):be(d))},Z.send(null)}function W(ie){var pe=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ie||"");if(pe){var be=Number(pe[1]),Z=pe[2],K=pe[3];return Z?K?[be,Number(K)]:[be,void 0]:[be,be]}}e.hooks.add("before-highlightall",function(ie){ie.selector+=", "+B}),e.hooks.add("before-sanity-check",function(ie){var pe=ie.element;if(pe.matches(B)){ie.code="",pe.setAttribute(P,M);var be=pe.appendChild(document.createElement("CODE"));be.textContent=n;var Z=pe.getAttribute("data-src"),K=ie.language;if(K==="none"){var G=(/\.(\w+)$/.exec(Z)||[,"none"])[1];K=C[G]||G}e.util.setLanguage(be,K),e.util.setLanguage(pe,K);var Q=e.plugins.autoloader;Q&&Q.loadLanguages(K),L(Z,function(re){pe.setAttribute(P,T);var Y=W(pe.getAttribute("data-range"));if(Y){var le=re.split(/\r\n?|\n/g),ae=Y[0],Te=Y[1]==null?le.length:Y[1];ae<0&&(ae+=le.length),ae=Math.max(0,Math.min(ae-1,le.length)),Te<0&&(Te+=le.length),Te=Math.max(0,Math.min(Te,le.length)),re=le.slice(ae,Te).join(`
`),pe.hasAttribute("data-start")||pe.setAttribute("data-start",String(ae+1))}be.textContent=re,e.highlightElement(be)},function(re){pe.setAttribute(P,E),be.textContent=re})}}),e.plugins.fileHighlight={highlight:function(pe){for(var be=(pe||document).querySelectorAll(B),Z=0,K;K=be[Z++];)e.highlightElement(K)}};var ge=!1;e.fileHighlight=function(){ge||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),ge=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(U$);var fw={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var p=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,C={},P={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function Z(K){return K instanceof M?new M(K.type,Z(K.content),K.alias):Array.isArray(K)?K.map(Z):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(Z){return Object.prototype.toString.call(Z).slice(8,-1)},objId:function(Z){return Z.__id||Object.defineProperty(Z,"__id",{value:++d}),Z.__id},clone:function Z(K,G){G=G||{};var Q,re;switch(P.util.type(K)){case"Object":if(re=P.util.objId(K),G[re])return G[re];Q={},G[re]=Q;for(var Y in K)K.hasOwnProperty(Y)&&(Q[Y]=Z(K[Y],G));return Q;case"Array":return re=P.util.objId(K),G[re]?G[re]:(Q=[],G[re]=Q,K.forEach(function(le,ae){Q[ae]=Z(le,G)}),Q);default:return K}},getLanguage:function(Z){for(;Z;){var K=p.exec(Z.className);if(K)return K[1].toLowerCase();Z=Z.parentElement}return"none"},setLanguage:function(Z,K){Z.className=Z.className.replace(RegExp(p,"gi"),""),Z.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var Z=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(Z){var K=document.getElementsByTagName("script");for(var G in K)if(K[G].src==Z)return K[G]}return null}},isActive:function(Z,K,G){for(var Q="no-"+K;Z;){var re=Z.classList;if(re.contains(K))return!0;if(re.contains(Q))return!1;Z=Z.parentElement}return!!G}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(Z,K){var G=P.util.clone(P.languages[Z]);for(var Q in K)G[Q]=K[Q];return G},insertBefore:function(Z,K,G,Q){Q=Q||P.languages;var re=Q[Z],Y={};for(var le in re)if(re.hasOwnProperty(le)){if(le==K)for(var ae in G)G.hasOwnProperty(ae)&&(Y[ae]=G[ae]);G.hasOwnProperty(le)||(Y[le]=re[le])}var Te=Q[Z];return Q[Z]=Y,P.languages.DFS(P.languages,function(Ie,ke){ke===Te&&Ie!=Z&&(this[Ie]=Y)}),Y},DFS:function Z(K,G,Q,re){re=re||{};var Y=P.util.objId;for(var le in K)if(K.hasOwnProperty(le)){G.call(K,le,K[le],Q||le);var ae=K[le],Te=P.util.type(ae);Te==="Object"&&!re[Y(ae)]?(re[Y(ae)]=!0,Z(ae,G,null,re)):Te==="Array"&&!re[Y(ae)]&&(re[Y(ae)]=!0,Z(ae,G,le,re))}}},plugins:{},highlightAll:function(Z,K){P.highlightAllUnder(document,Z,K)},highlightAllUnder:function(Z,K,G){var Q={callback:G,container:Z,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var re=0,Y;Y=Q.elements[re++];)P.highlightElement(Y,K===!0,Q.callback)},highlightElement:function(Z,K,G){var Q=P.util.getLanguage(Z),re=P.languages[Q];P.util.setLanguage(Z,Q);var Y=Z.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(Y,Q);var le=Z.textContent,ae={element:Z,language:Q,grammar:re,code:le};function Te(ke){ae.highlightedCode=ke,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),G&&G.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),Y=ae.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),G&&G.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Te(P.util.encode(ae.code));return}if(K&&n.Worker){var Ie=new Worker(P.filename);Ie.onmessage=function(ke){Te(ke.data)},Ie.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Te(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(Z,K,G){var Q={code:Z,grammar:K,language:G};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),M.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(Z,K){var G=K.rest;if(G){for(var Q in G)K[Q]=G[Q];delete K.rest}var re=new B;return L(re,re.head,Z),E(Z,re,K,re.head,0),ge(re)},hooks:{all:{},add:function(Z,K){var G=P.hooks.all;G[Z]=G[Z]||[],G[Z].push(K)},run:function(Z,K){var G=P.hooks.all[Z];if(!(!G||!G.length))for(var Q=0,re;re=G[Q++];)re(K)}},Token:M};n.Prism=P;function M(Z,K,G,Q){this.type=Z,this.content=K,this.alias=G,this.length=(Q||"").length|0}M.stringify=function Z(K,G){if(typeof K=="string")return K;if(Array.isArray(K)){var Q="";return K.forEach(function(Te){Q+=Z(Te,G)}),Q}var re={type:K.type,content:Z(K.content,G),tag:"span",classes:["token",K.type],attributes:{},language:G},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(re.classes,Y):re.classes.push(Y)),P.hooks.run("wrap",re);var le="";for(var ae in re.attributes)le+=" "+ae+'="'+(re.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+re.tag+' class="'+re.classes.join(" ")+'"'+le+">"+re.content+"</"+re.tag+">"};function T(Z,K,G,Q){Z.lastIndex=K;var re=Z.exec(G);if(re&&Q&&re[1]){var Y=re[1].length;re.index+=Y,re[0]=re[0].slice(Y)}return re}function E(Z,K,G,Q,re,Y){for(var le in G)if(!(!G.hasOwnProperty(le)||!G[le])){var ae=G[le];ae=Array.isArray(ae)?ae:[ae];for(var Te=0;Te<ae.length;++Te){if(Y&&Y.cause==le+","+Te)return;var Ie=ae[Te],ke=Ie.inside,at=!!Ie.lookbehind,vt=!!Ie.greedy,sr=Ie.alias;if(vt&&!Ie.pattern.global){var At=Ie.pattern.toString().match(/[imsuy]*$/)[0];Ie.pattern=RegExp(Ie.pattern.source,At+"g")}for(var mt=Ie.pattern||Ie,Ze=Q.next,$t=re;Ze!==K.tail&&!(Y&&$t>=Y.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(K.length>Z.length)return;if(!(Qt instanceof M)){var Xt=1,pt;if(vt){if(pt=T(mt,$t,Z,at),!pt||pt.index>=Z.length)break;var ir=pt.index,Hr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;ir>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof M)continue;for(var Sr=Ze;Sr!==K.tail&&(Yt<Hr||typeof Sr.value=="string");Sr=Sr.next)Xt++,Yt+=Sr.value.length;Xt--,Qt=Z.slice($t,Yt),pt.index-=$t}else if(pt=T(mt,0,Qt,at),!pt)continue;var ir=pt.index,_r=pt[0],Jr=Qt.slice(0,ir),nr=Qt.slice(ir+_r.length),Zr=$t+Qt.length;Y&&Zr>Y.reach&&(Y.reach=Zr);var ar=Ze.prev;Jr&&(ar=L(K,ar,Jr),$t+=Jr.length),W(K,ar,Xt);var Pr=new M(le,ke?P.tokenize(_r,ke):_r,sr,_r);if(Ze=L(K,ar,Pr),nr&&L(K,Ze,nr),Xt>1){var J={cause:le+","+Te,reach:Zr};E(Z,K,G,Ze.prev,$t,J),Y&&J.reach>Y.reach&&(Y.reach=J.reach)}}}}}}function B(){var Z={value:null,prev:null,next:null},K={value:null,prev:Z,next:null};Z.next=K,this.head=Z,this.tail=K,this.length=0}function L(Z,K,G){var Q=K.next,re={value:G,prev:K,next:Q};return K.next=re,Q.prev=re,Z.length++,re}function W(Z,K,G){for(var Q=K.next,re=0;re<G&&Q!==Z.tail;re++)Q=Q.next;K.next=Q,Q.prev=K,Z.length-=re}function ge(Z){for(var K=[],G=Z.head.next;G!==Z.tail;)K.push(G.value),G=G.next;return K}if(!n.document)return n.addEventListener&&(P.disableWorkerMessageHandler||n.addEventListener("message",function(Z){var K=JSON.parse(Z.data),G=K.language,Q=K.code,re=K.immediateClose;n.postMessage(P.highlight(Q,P.languages[G],G)),re&&n.close()},!1)),P;var ie=P.util.currentScript();ie&&(P.filename=ie.src,ie.hasAttribute("data-manual")&&(P.manual=!0));function pe(){P.manual||P.highlightAll()}if(!P.manual){var be=document.readyState;be==="loading"||be==="interactive"&&ie&&ie.defer?document.addEventListener("DOMContentLoaded",pe):window.requestAnimationFrame?window.requestAnimationFrame(pe):window.setTimeout(pe,16)}return P}(r);t.exports&&(t.exports=e),typeof qi<"u"&&(qi.Prism=e)})(fw);var od=fw.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const B$={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},L$="_container_zhbxc_2",H$="_header_zhbxc_9",q$="_main_zhbxc_14",V$="_footer_zhbxc_19",z$={container:L$,header:H$,main:q$,footer:V$},Uc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,p]of r)e[n]=p;return e};function K$(t,r,e,n,p,d){return us(),qs("div",{class:jn(t.$style.container)},[d.hasHeader?(us(),qs("header",{key:0,class:jn(t.$style.header)},[sh(t.$slots,"header")],2)):nc("",!0),Xi("main",{class:jn(t.$style.main)},[sh(t.$slots,"default")],2),d.hasFooter?(us(),qs("footer",{key:1,class:jn(t.$style.footer)},[sh(t.$slots,"footer")],2)):nc("",!0)],2)}const W$={$style:z$},gc=Uc(B$,[["render",K$],["__cssModules",W$]]),G$={key:0},J$=["onClick"],Z$={key:1},Q$=["onClick"],X$=jc({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=Vo(!1),n=r;return(p,d)=>(us(),qs("div",{class:jn(p.$style.wrapper)},[Xi("button",{onClick:d[0]||(d[0]=C=>e.value=!e.value)},[sh(p.$slots,"default")]),ys(t$,null,{default:Ia(()=>[e.value?(us(),qs("div",{key:0,class:jn(p.$style.menu)},[p.options instanceof Array?(us(),qs("div",G$,[(us(!0),qs(Mn,null,Th(p.options,C=>(us(),qs("div",{class:jn(p.$style.opt),onClick:P=>{e.value=!1,n("select",C)}},_o(C),11,J$))),256))])):(us(),qs("div",Z$,[(us(!0),qs(Mn,null,Th(Object.keys(p.options),C=>(us(),qs("div",{class:jn(p.$style.opt),onClick:P=>{e.value=!1,n("select",C)}},_o(p.options[C]),11,Q$))),256))]))],2)):nc("",!0)]),_:1})],2))}}),Y$="_wrapper_1dk0z_2",ex="_menu_1dk0z_5",tx="_opt_1dk0z_12",rx={wrapper:Y$,menu:ex,opt:tx},sx={$style:rx},cw=Uc(X$,[["__cssModules",sx]]),nx=jc({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,p=Vo(e.modelValue);xc(p,()=>{n("update:modelValue",p.value)},{immediate:!0});function d(P){p.value=e.samples[P]}const C=P=>od.highlight(P,od.languages.js,"javascript");return(P,M)=>(us(),Nc(gc,null,{header:Ia(()=>[M[3]||(M[3]=Tu(" Input ")),e.samples?(us(),qs("div",{key:0,class:jn(P.$style.actions)},[ys(cw,{options:Object.keys(e.samples),onSelect:d},{default:Ia(()=>M[2]||(M[2]=[Tu("Samples")])),_:1},8,["options"])],2)):nc("",!0)]),footer:Ia(()=>[e.parseError?(us(),qs("span",{key:0,class:jn(P.$style.parseError)},_o(e.parseError),3)):nc("",!0),Xi("div",{class:jn(P.$style.actions)},[Xi("button",{onClick:M[1]||(M[1]=T=>n("run"))},"RUN")],2)]),default:Ia(()=>[ys(Mc(R$),{class:jn(P.$style.code),modelValue:p.value,"onUpdate:modelValue":M[0]||(M[0]=T=>p.value=T),highlight:C,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),ax="_code_af8rl_2",ix="_parseError_af8rl_6",lx="_actions_af8rl_9",ux={code:ax,parseError:ix,actions:lx},ox={$style:ux},fx=Uc(nx,[["__cssModules",ox]]);function Er(t,r,e){let n=e.value;return{configurable:!0,get(){const p=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:p}),p},set(p){n=p}}}let pf=class hw extends Error{constructor(e,n){super(e);fe(this,"name","AiScript");fe(this,"info");fe(this,"pos");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,hw)}},fd=class extends pf{constructor(e){const n=String((e==null?void 0:e.message)??e);super(n,e);fe(this,"name","Internal")}},Wt=class extends pf{constructor(e,n,p){super(`${e} (Line ${n.line}, Column ${n.column})`,p);fe(this,"pos");fe(this,"name","Syntax");this.pos=n}};class $p extends pf{constructor(e,n,p){super(`${e} (Line ${n.line}, Column ${n.column})`,p);fe(this,"pos");fe(this,"name","Namespace");this.pos=n}}let Zt=class extends pf{constructor(e,n){super(e,n);fe(this,"name","Runtime")}},cd=class extends Zt{constructor(r,e){super(r,e)}},cx=class extends Zt{constructor(e,n){super(e,n);fe(this,"name","")}};class hd extends pf{constructor(e,n){super(e,n);fe(this,"name","Host")}}const hx=["def","return","each","for","loop","break","continue","assign","addAssign","subAssign"];function px(t){return hx.includes(t.type)}var Gu=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let Ou=class lv{constructor(r=[],e,n,p){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});fe(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=p}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new lv(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const p=[e,...this.layerdStates];return new lv(p,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Zt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getNsPrefix(){return this.parent==null||this.nsName==null?"":this.parent.getNsPrefix()+this.nsName+":"}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Zt(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){const d=p.get(r);if(!d.isMutable)throw new Zt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Zt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Gu([Er],Ou.prototype,"log",null);Gu([Er],Ou.prototype,"onUpdated",null);Gu([Er],Ou.prototype,"createChildScope",null);Gu([Er],Ou.prototype,"createChildNamespaceScope",null);Gu([Er],Ou.prototype,"get",null);Gu([Er],Ou.prototype,"getNsPrefix",null);Gu([Er],Ou.prototype,"exists",null);Gu([Er],Ou.prototype,"getAll",null);Gu([Er],Ou.prototype,"add",null);Gu([Er],Ou.prototype,"assign",null);var wn=[];for(var xp=0;xp<256;++xp)wn.push((xp+256).toString(16).slice(1));function vx(t,r=0){return(wn[t[r+0]]+wn[t[r+1]]+wn[t[r+2]]+wn[t[r+3]]+"-"+wn[t[r+4]]+wn[t[r+5]]+"-"+wn[t[r+6]]+wn[t[r+7]]+"-"+wn[t[r+8]]+wn[t[r+9]]+"-"+wn[t[r+10]]+wn[t[r+11]]+wn[t[r+12]]+wn[t[r+13]]+wn[t[r+14]]+wn[t[r+15]]).toLowerCase()}var Kc,gx=new Uint8Array(16);function dx(){if(!Kc&&(Kc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Kc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kc(gx)}var yx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const pd={randomUUID:yx};function wx(t,r,e){if(pd.randomUUID&&!r&&!t)return pd.randomUUID();t=t||{};var n=t.random||(t.rng||dx)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,vx(n)}const wt={type:"null"},Ws={type:"bool",value:!0},Gs={type:"bool",value:!1},Oe=t=>({type:"num",value:t}),Kt=t=>({type:"str",value:t}),Yo=t=>({type:"bool",value:t}),Oh=t=>({type:"obj",value:t}),Rr=t=>({type:"arr",value:t}),mx=(t,r,e)=>({type:"fn",params:t,statements:r,scope:e}),oe=t=>({type:"fn",native:t}),$x=t=>({type:"return",value:t}),xx=()=>({type:"break",value:null}),bx=()=>({type:"continue",value:null}),Ax=t=>t.type==="return"?t.value:t,lh=(t,r)=>({type:"error",value:t,info:r});function Sn(t){if(t==null)throw new Zt("Expect anything, but got nothing.")}function _n(t){if(t==null)throw new Zt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Zt(`Expect boolean, but got ${t.type}.`)}function ds(t){if(t==null)throw new Zt("Expect function, but got nothing.");if(t.type!=="fn")throw new Zt(`Expect function, but got ${t.type}.`)}function $r(t){if(t==null)throw new Zt("Expect string, but got nothing.");if(t.type!=="str")throw new Zt(`Expect string, but got ${t.type}.`)}function Me(t){if(t==null)throw new Zt("Expect number, but got nothing.");if(t.type!=="num")throw new Zt(`Expect number, but got ${t.type}.`)}function Qi(t){if(t==null)throw new Zt("Expect object, but got nothing.");if(t.type!=="obj")throw new Zt(`Expect object, but got ${t.type}.`)}function to(t){if(t==null)throw new Zt("Expect array, but got nothing.");if(t.type!=="arr")throw new Zt(`Expect array, but got ${t.type}.`)}function vd(t){return t.type==="fn"}function bp(t){return t.type==="obj"}function Ih(t){return t.type==="arr"}function Uf(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function uv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>uv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function ov(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>ov(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=ov(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function fv(t){if(t===null)return wt;if(typeof t=="boolean")return Yo(t);if(typeof t=="string")return Kt(t);if(typeof t=="number")return Oe(t);if(Array.isArray(t))return Rr(t.map(r=>fv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,fv(n));return Oh(r)}return wt}function Bf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const p of t.value)n.push(Bf(p,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[p,d]of t.value)n.push(`${p}: ${Bf(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?t.native?"@( ?? ) { native code }":`@( ${t.params.map(n=>n.dest.type==="identifier"?n.dest.name:"?").join(", ")} ) { ... }`:"?"}const Cx={version:"1.0.0-dev.20241030"},_x=Cx.version,pw=new TextEncoder,Px=new TextDecoder,Ho=Math.ceil(Math.log2(Number.MAX_SAFE_INTEGER));BigInt(Ho);const kx=Ho-1;BigInt(kx);class cg{generateNumber0To1(){let r=this.generateBigUintByBits(Ho),e=1022,n=Ho-gd(r);for(;n>0&&e>=Ho;)e-=n,r<<=BigInt(n),r|=this.generateBigUintByBits(n),n=Ho-gd(r);if(n>0){const p=Math.min(e-1,n);r<<=BigInt(p),r|=this.generateBigUintByBits(p),e=Math.max(e-p,0)}return Number(r)*.5**Ho*.5**(1022-e)}generateUniform(r){if(r<1)return 0n;const e=r.toString(2).length,n=Math.ceil(e/8),p=BigInt(n*8-e);let d;do d=this.generateBigUintByBytes(n)>>p;while(d>r);return d}generateRandomIntegerInRange(r,e){const n=Math.ceil(r),p=Math.floor(e),d=p-n;if(d===0)return n;const C=Math.abs(d),P=Math.sign(d);if(!Number.isSafeInteger(C)||!Number.isSafeInteger(n)||!Number.isSafeInteger(p))return null;const M=BigInt(C);return Number(this.generateUniform(M))*P+n}}function gd(t){return t===0n?0:t.toString(2).length}function Mx(t){if(t.byteLength===0)return null;if(t.byteLength<8){const r=new Uint8Array(8);return r.set(new Uint8Array(t)),new DataView(r.buffer).getBigUint64(0,!0)}return new DataView(t).getBigUint64(0,!0)}function hg(t){if(t.byteLength===0)return null;if(t.byteLength<=8)return Mx(t);const r=new DataView(t);let e=0n,n=0n,p=0;for(;p<r.byteLength-7;p+=8,e+=64n){const d=r.getBigUint64(p,!0);n|=d<<e}if(p<r.byteLength){const d=new Uint8Array(8);d.set(new Uint8Array(t,p)),n|=new DataView(d.buffer).getBigUint64(0,!0)<<e}return n}const _c=class _c extends cg{static get instance(){return _c._instance}constructor(){super()}generateBigUintByBytes(r){let e=new Uint8Array(Math.ceil(r/8)*8);return e.length<1||!Number.isSafeInteger(r)?0n:(e=this.generateBytes(e.subarray(0,r)),hg(e.buffer)??0n)}generateBigUintByBits(r){if(r<1||!Number.isSafeInteger(r))return 0n;const e=Math.ceil(r/8),n=BigInt(e*8-r);return this.generateBigUintByBytes(e)>>n}generateBytes(r){return crypto.getRandomValues(r)}};fe(_c,"_instance",new _c);let Rh=_c;var pg={exports:{}};pg.exports;(function(t){(function(r,e,n){function p(M){var T=this,E=P();T.next=function(){var B=2091639*T.s0+T.c*23283064365386963e-26;return T.s0=T.s1,T.s1=T.s2,T.s2=B-(T.c=B|0)},T.c=1,T.s0=E(" "),T.s1=E(" "),T.s2=E(" "),T.s0-=E(M),T.s0<0&&(T.s0+=1),T.s1-=E(M),T.s1<0&&(T.s1+=1),T.s2-=E(M),T.s2<0&&(T.s2+=1),E=null}function d(M,T){return T.c=M.c,T.s0=M.s0,T.s1=M.s1,T.s2=M.s2,T}function C(M,T){var E=new p(M),B=T&&T.state,L=E.next;return L.int32=function(){return E.next()*4294967296|0},L.double=function(){return L()+(L()*2097152|0)*11102230246251565e-32},L.quick=L,B&&(typeof B=="object"&&d(B,E),L.state=function(){return d(E,{})}),L}function P(){var M=4022871197,T=function(E){E=String(E);for(var B=0;B<E.length;B++){M+=E.charCodeAt(B);var L=.02519603282416938*M;M=L>>>0,L-=M,L*=M,M=L>>>0,L-=M,M+=L*4294967296}return(M>>>0)*23283064365386963e-26};return T}e&&e.exports?e.exports=C:this.alea=C})(qi,t)})(pg);var Ex=pg.exports,vg={exports:{}};vg.exports;(function(t){(function(r,e,n){function p(P){var M=this,T="";M.x=0,M.y=0,M.z=0,M.w=0,M.next=function(){var B=M.x^M.x<<11;return M.x=M.y,M.y=M.z,M.z=M.w,M.w^=M.w>>>19^B^B>>>8},P===(P|0)?M.x=P:T+=P;for(var E=0;E<T.length+64;E++)M.x^=T.charCodeAt(E)|0,M.next()}function d(P,M){return M.x=P.x,M.y=P.y,M.z=P.z,M.w=P.w,M}function C(P,M){var T=new p(P),E=M&&M.state,B=function(){return(T.next()>>>0)/4294967296};return B.double=function(){do var L=T.next()>>>11,W=(T.next()>>>0)/4294967296,ge=(L+W)/(1<<21);while(ge===0);return ge},B.int32=T.next,B.quick=B,E&&(typeof E=="object"&&d(E,T),B.state=function(){return d(T,{})}),B}e&&e.exports?e.exports=C:this.xor128=C})(qi,t)})(vg);var Sx=vg.exports,gg={exports:{}};gg.exports;(function(t){(function(r,e,n){function p(P){var M=this,T="";M.next=function(){var B=M.x^M.x>>>2;return M.x=M.y,M.y=M.z,M.z=M.w,M.w=M.v,(M.d=M.d+362437|0)+(M.v=M.v^M.v<<4^(B^B<<1))|0},M.x=0,M.y=0,M.z=0,M.w=0,M.v=0,P===(P|0)?M.x=P:T+=P;for(var E=0;E<T.length+64;E++)M.x^=T.charCodeAt(E)|0,E==T.length&&(M.d=M.x<<10^M.x>>>4),M.next()}function d(P,M){return M.x=P.x,M.y=P.y,M.z=P.z,M.w=P.w,M.v=P.v,M.d=P.d,M}function C(P,M){var T=new p(P),E=M&&M.state,B=function(){return(T.next()>>>0)/4294967296};return B.double=function(){do var L=T.next()>>>11,W=(T.next()>>>0)/4294967296,ge=(L+W)/(1<<21);while(ge===0);return ge},B.int32=T.next,B.quick=B,E&&(typeof E=="object"&&d(E,T),B.state=function(){return d(T,{})}),B}e&&e.exports?e.exports=C:this.xorwow=C})(qi,t)})(gg);var Tx=gg.exports,dg={exports:{}};dg.exports;(function(t){(function(r,e,n){function p(P){var M=this;M.next=function(){var E=M.x,B=M.i,L,W;return L=E[B],L^=L>>>7,W=L^L<<24,L=E[B+1&7],W^=L^L>>>10,L=E[B+3&7],W^=L^L>>>3,L=E[B+4&7],W^=L^L<<7,L=E[B+7&7],L=L^L<<13,W^=L^L<<9,E[B]=W,M.i=B+1&7,W};function T(E,B){var L,W=[];if(B===(B|0))W[0]=B;else for(B=""+B,L=0;L<B.length;++L)W[L&7]=W[L&7]<<15^B.charCodeAt(L)+W[L+1&7]<<13;for(;W.length<8;)W.push(0);for(L=0;L<8&&W[L]===0;++L);for(L==8?W[7]=-1:W[L],E.x=W,E.i=0,L=256;L>0;--L)E.next()}T(M,P)}function d(P,M){return M.x=P.x.slice(),M.i=P.i,M}function C(P,M){P==null&&(P=+new Date);var T=new p(P),E=M&&M.state,B=function(){return(T.next()>>>0)/4294967296};return B.double=function(){do var L=T.next()>>>11,W=(T.next()>>>0)/4294967296,ge=(L+W)/(1<<21);while(ge===0);return ge},B.int32=T.next,B.quick=B,E&&(E.x&&d(E,T),B.state=function(){return d(T,{})}),B}e&&e.exports?e.exports=C:this.xorshift7=C})(qi,t)})(dg);var Nx=dg.exports,yg={exports:{}};yg.exports;(function(t){(function(r,e,n){function p(P){var M=this;M.next=function(){var E=M.w,B=M.X,L=M.i,W,ge;return M.w=E=E+1640531527|0,ge=B[L+34&127],W=B[L=L+1&127],ge^=ge<<13,W^=W<<17,ge^=ge>>>15,W^=W>>>12,ge=B[L]=ge^W,M.i=L,ge+(E^E>>>16)|0};function T(E,B){var L,W,ge,ie,pe,be=[],Z=128;for(B===(B|0)?(W=B,B=null):(B=B+"\0",W=0,Z=Math.max(Z,B.length)),ge=0,ie=-32;ie<Z;++ie)B&&(W^=B.charCodeAt((ie+32)%B.length)),ie===0&&(pe=W),W^=W<<10,W^=W>>>15,W^=W<<4,W^=W>>>13,ie>=0&&(pe=pe+1640531527|0,L=be[ie&127]^=W+pe,ge=L==0?ge+1:0);for(ge>=128&&(be[(B&&B.length||0)&127]=-1),ge=127,ie=4*128;ie>0;--ie)W=be[ge+34&127],L=be[ge=ge+1&127],W^=W<<13,L^=L<<17,W^=W>>>15,L^=L>>>12,be[ge]=W^L;E.w=pe,E.X=be,E.i=ge}T(M,P)}function d(P,M){return M.i=P.i,M.w=P.w,M.X=P.X.slice(),M}function C(P,M){P==null&&(P=+new Date);var T=new p(P),E=M&&M.state,B=function(){return(T.next()>>>0)/4294967296};return B.double=function(){do var L=T.next()>>>11,W=(T.next()>>>0)/4294967296,ge=(L+W)/(1<<21);while(ge===0);return ge},B.int32=T.next,B.quick=B,E&&(E.X&&d(E,T),B.state=function(){return d(T,{})}),B}e&&e.exports?e.exports=C:this.xor4096=C})(qi,t)})(yg);var Fx=yg.exports,wg={exports:{}};wg.exports;(function(t){(function(r,e,n){function p(P){var M=this,T="";M.next=function(){var B=M.b,L=M.c,W=M.d,ge=M.a;return B=B<<25^B>>>7^L,L=L-W|0,W=W<<24^W>>>8^ge,ge=ge-B|0,M.b=B=B<<20^B>>>12^L,M.c=L=L-W|0,M.d=W<<16^L>>>16^ge,M.a=ge-B|0},M.a=0,M.b=0,M.c=-1640531527,M.d=1367130551,P===Math.floor(P)?(M.a=P/4294967296|0,M.b=P|0):T+=P;for(var E=0;E<T.length+20;E++)M.b^=T.charCodeAt(E)|0,M.next()}function d(P,M){return M.a=P.a,M.b=P.b,M.c=P.c,M.d=P.d,M}function C(P,M){var T=new p(P),E=M&&M.state,B=function(){return(T.next()>>>0)/4294967296};return B.double=function(){do var L=T.next()>>>11,W=(T.next()>>>0)/4294967296,ge=(L+W)/(1<<21);while(ge===0);return ge},B.int32=T.next,B.quick=B,E&&(typeof E=="object"&&d(E,T),B.state=function(){return d(T,{})}),B}e&&e.exports?e.exports=C:this.tychei=C})(qi,t)})(wg);var Ox=wg.exports,vw={exports:{}};const Ix={},Rx=Object.freeze(Object.defineProperty({__proto__:null,default:Ix},Symbol.toStringTag,{value:"Module"})),jx=D$(Rx);(function(t){(function(r,e,n){var p=256,d=6,C=52,P="random",M=n.pow(p,d),T=n.pow(2,C),E=T*2,B=p-1,L;function W(G,Q,re){var Y=[];Q=Q==!0?{entropy:!0}:Q||{};var le=be(pe(Q.entropy?[G,K(e)]:G??Z(),3),Y),ae=new ge(Y),Te=function(){for(var Ie=ae.g(d),ke=M,at=0;Ie<T;)Ie=(Ie+at)*p,ke*=p,at=ae.g(1);for(;Ie>=E;)Ie/=2,ke/=2,at>>>=1;return(Ie+at)/ke};return Te.int32=function(){return ae.g(4)|0},Te.quick=function(){return ae.g(4)/4294967296},Te.double=Te,be(K(ae.S),e),(Q.pass||re||function(Ie,ke,at,vt){return vt&&(vt.S&&ie(vt,ae),Ie.state=function(){return ie(ae,{})}),at?(n[P]=Ie,ke):Ie})(Te,le,"global"in Q?Q.global:this==n,Q.state)}function ge(G){var Q,re=G.length,Y=this,le=0,ae=Y.i=Y.j=0,Te=Y.S=[];for(re||(G=[re++]);le<p;)Te[le]=le++;for(le=0;le<p;le++)Te[le]=Te[ae=B&ae+G[le%re]+(Q=Te[le])],Te[ae]=Q;(Y.g=function(Ie){for(var ke,at=0,vt=Y.i,sr=Y.j,At=Y.S;Ie--;)ke=At[vt=B&vt+1],at=at*p+At[B&(At[vt]=At[sr=B&sr+ke])+(At[sr]=ke)];return Y.i=vt,Y.j=sr,at})(p)}function ie(G,Q){return Q.i=G.i,Q.j=G.j,Q.S=G.S.slice(),Q}function pe(G,Q){var re=[],Y=typeof G,le;if(Q&&Y=="object")for(le in G)try{re.push(pe(G[le],Q-1))}catch{}return re.length?re:Y=="string"?G:G+"\0"}function be(G,Q){for(var re=G+"",Y,le=0;le<re.length;)Q[B&le]=B&(Y^=Q[B&le]*19)+re.charCodeAt(le++);return K(Q)}function Z(){try{var G;return L&&(G=L.randomBytes)?G=G(p):(G=new Uint8Array(p),(r.crypto||r.msCrypto).getRandomValues(G)),K(G)}catch{var Q=r.navigator,re=Q&&Q.plugins;return[+new Date,r,re,r.screen,K(e)]}}function K(G){return String.fromCharCode.apply(0,G)}if(be(n.random(),e),t.exports){t.exports=W;try{L=jx}catch{}}else n["seed"+P]=W})(typeof self<"u"?self:qi,[],Math)})(vw);var Dx=vw.exports,Ux=Ex,Bx=Sx,Lx=Tx,Hx=Nx,qx=Fx,Vx=Ox,bf=Dx;bf.alea=Ux;bf.xor128=Bx;bf.xorwow=Lx;bf.xorshift7=Hx;bf.xor4096=qx;bf.tychei=Vx;var zx=bf;const To=j$(zx),Uo=Int32Array.BYTES_PER_ELEMENT;class Kx extends cg{constructor(e){super();fe(this,"rng");fe(this,"buffer");fe(this,"filledBuffer");this.rng=To(e.toString()),this.buffer=new Uint8Array(Uo),this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%Uo!==0)throw new Error(`SeedRandomWrapper.fillBufferDirect should always be called with the buffer with the length a multiple-of-${Uo}!`);const n=e.length/Uo,p=new DataView(e.buffer);let d=0;for(let C=0;C<n;C++,d+=Uo)p.setInt32(d,this.rng.int32(),!1);return e}generateBigUintByBytes(e){let n=new Uint8Array(Math.ceil(e/8)*8);return n.length<1||!Number.isSafeInteger(e)?0n:(n=this.generateBytes(n.subarray(0,e)),hg(n.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const n=Math.ceil(e/8),p=BigInt(n*8-e);return this.generateBigUintByBytes(n)>>p}generateBytes(e){if(e.length<1)return e;e.fill(0);let n=e;if(n.length<=this.filledBuffer.length)return n.set(this.filledBuffer.subarray(0,n.length)),this.filledBuffer=this.filledBuffer.subarray(n.length),e;for(;n.length>0;){if(this.filledBuffer.length===0){if(n.length>=Uo){const p=n.subarray(0,n.length-n.length%Uo);this.fillBufferDirect(p),n=n.subarray(p.length);continue}this.fillBuffer()}if(n.length<=this.filledBuffer.length)return n.set(this.filledBuffer.subarray(0,n.length)),this.filledBuffer=this.filledBuffer.subarray(n.length),e;n.set(this.filledBuffer),n=n.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}const Wc=64,Wx=20,Gc=32,dd=8;function Jc(t,r){return t<<r|t>>>32-r}function fo(t,r,e,n,p){if(t.length<16)return;let d=t[r],C=t[e],P=t[n],M=t[p];d===void 0||C===void 0||P===void 0||M===void 0||(d=d+C|0,M=Jc(M^d,16),P=P+M|0,C=Jc(C^P,12),d=d+C|0,M=Jc(M^d,8),P=P+M|0,C=Jc(C^P,7),t[r]=d,t[e]=C,t[n]=P,t[p]=M)}function Gx(t,r){if(!(t.length<16||r.length<16)){t.set(r);for(let e=0;e<Wx;e+=2)fo(t,0,4,8,12),fo(t,1,5,9,13),fo(t,2,6,10,14),fo(t,3,7,11,15),fo(t,0,5,10,15),fo(t,1,6,11,12),fo(t,2,7,8,13),fo(t,3,4,9,14);for(let e=0;e<16;e++){let n=t[e];const p=r[e];if(n===void 0||p===void 0)throw new Error("generateChaCha20: Something went wrong!");n=n+p|0,t[e]=n}}}class Jx extends cg{constructor(e){const n=dd+Gc;super();fe(this,"keynonce");fe(this,"state");fe(this,"buffer");fe(this,"filledBuffer");fe(this,"counter");let p;if(typeof e>"u")p=crypto.getRandomValues(new Uint8Array(n));else if(p=e,p.byteLength>n&&(p=e.subarray(0,n)),p.byteLength<n){const M=new Uint8Array(n);M.set(p),p=M}const d=p.subarray(0,Gc),C=p.subarray(Gc,Gc+dd),P=new Uint8Array(16*4);P.set([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),P.set(d,4*4),P.set(C,14*4),this.keynonce=new Uint32Array(P.buffer),this.state=new Uint32Array(16),this.buffer=new Uint8Array(Wc),this.counter=0n,this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%Wc!==0)throw new Error("ChaCha20.fillBufferDirect should always be called with the buffer with the length a multiple-of-64!");e.fill(0);let n=this.counter;const p=this.state,d=new BigUint64Array(p.buffer);let C=e;for(;C.length>0;){const P=C.subarray(0,p.byteLength),M=new Uint32Array(P.buffer);p.set(this.keynonce),d[6]=BigInt.asUintN(64,n),Gx(M,p),C=C.subarray(P.length),n=BigInt.asUintN(64,n+1n)}return this.counter=n,e}generateBigUintByBytes(e){let n=new Uint8Array(Math.ceil(e/8)*8);return n.length<1||!Number.isSafeInteger(e)?0n:(n=this.generateBytes(n.subarray(0,e)),hg(n.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const n=Math.ceil(e/8),p=BigInt(n*8-e);return this.generateBigUintByBytes(n)>>p}generateBytes(e){if(e.length<1)return e;e.fill(0);let n=e;if(n.length<=this.filledBuffer.length)return n.set(this.filledBuffer.subarray(0,n.length)),this.filledBuffer=this.filledBuffer.subarray(n.length),e;for(;n.length>0;){if(this.filledBuffer.length===0){if(n.length>=Wc){const p=n.subarray(0,n.length-n.length%Wc);this.fillBufferDirect(p),n=n.subarray(p.length);continue}this.fillBuffer()}if(n.length<=this.filledBuffer.length)return n.set(this.filledBuffer.subarray(0,n.length)),this.filledBuffer=this.filledBuffer.subarray(n.length),e;n.set(this.filledBuffer),n=n.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}function Zx(t){if(!t||t.type!=="num"&&t.type!=="str")return wt;const r=To(t.value.toString());return oe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Oe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Oe(r()))}function Qx(t){if(!t||t.type!=="num"&&t.type!=="str")return wt;const r=new Kx(t.value);return oe(([e,n])=>{if(e&&e.type==="num"&&n&&n.type==="num"){const p=r.generateRandomIntegerInRange(e.value,n.value);return typeof p=="number"?Oe(p):wt}return Oe(r.generateNumber0To1())})}async function Xx(t){if(!t||t.type!=="num"&&t.type!=="str"&&t.type!=="null")return wt;let r;t.type==="num"?r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(new Float64Array([t.value])))):t.type==="str"&&(r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(pw.encode(t.value)))));const e=new Jx(r);return oe(([n,p])=>{if(n&&n.type==="num"&&p&&p.type==="num"){const d=e.generateRandomIntegerInRange(n.value,p.value);return typeof d=="number"?Oe(d):wt}return Oe(e.generateNumber0To1())})}const Yx={help:Kt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Kt(_x),"Core:ai":Kt("kawaii"),"Core:not":oe(([t])=>(_n(t),t.value?Gs:Ws)),"Core:eq":oe(([t,r])=>(Sn(t),Sn(r),Uf(t,r)?Ws:Gs)),"Core:neq":oe(([t,r])=>(Sn(t),Sn(r),Uf(t,r)?Gs:Ws)),"Core:and":oe(([t,r])=>(_n(t),t.value?(_n(r),r.value?Ws:Gs):Gs)),"Core:or":oe(([t,r])=>(_n(t),t.value?Ws:(_n(r),r.value?Ws:Gs))),"Core:add":oe(([t,r])=>(Me(t),Me(r),Oe(t.value+r.value))),"Core:sub":oe(([t,r])=>(Me(t),Me(r),Oe(t.value-r.value))),"Core:mul":oe(([t,r])=>(Me(t),Me(r),Oe(t.value*r.value))),"Core:pow":oe(([t,r])=>{Me(t),Me(r);const e=t.value**r.value;return Oe(e)}),"Core:div":oe(([t,r])=>{Me(t),Me(r);const e=t.value/r.value;return Oe(e)}),"Core:mod":oe(([t,r])=>(Me(t),Me(r),Oe(t.value%r.value))),"Core:gt":oe(([t,r])=>(Me(t),Me(r),t.value>r.value?Ws:Gs)),"Core:lt":oe(([t,r])=>(Me(t),Me(r),t.value<r.value?Ws:Gs)),"Core:gteq":oe(([t,r])=>(Me(t),Me(r),t.value>=r.value?Ws:Gs)),"Core:lteq":oe(([t,r])=>(Me(t),Me(r),t.value<=r.value?Ws:Gs)),"Core:type":oe(([t])=>(Sn(t),Kt(t.type))),"Core:to_str":oe(([t])=>(Sn(t),Kt(Bf(t)))),"Core:range":oe(([t,r])=>(Me(t),Me(r),t.value<r.value?Rr(Array.from({length:r.value-t.value+1},(e,n)=>Oe(n+t.value))):t.value>r.value?Rr(Array.from({length:t.value-r.value+1},(e,n)=>Oe(t.value-n))):Rr([t]))),"Core:sleep":oe(async([t])=>(Me(t),await new Promise(r=>setTimeout(r,t.value)),wt)),"Core:abort":oe(async([t])=>{throw $r(t),new cx(t.value)}),"Util:uuid":oe(()=>Kt(wx())),"Json:stringify":oe(([t])=>(Sn(t),Kt(JSON.stringify(ov(t))))),"Json:parse":oe(([t])=>{$r(t);try{return fv(JSON.parse(t.value))}catch{return lh("not_json")}}),"Json:parsable":oe(([t])=>{$r(t);try{JSON.parse(t.value)}catch{return Yo(!1)}return Yo(!0)}),"Date:now":oe(()=>Oe(Date.now())),"Date:year":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":oe(([t])=>(t&&Me(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":oe(([t])=>{$r(t);const r=new Date(t.value).getTime();return r===r?Oe(r):lh("not_date")}),"Date:to_iso_str":oe(([t,r])=>{t&&Me(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Me(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let p;if(n===0)p="Z";else{const L=Math.sign(n),W=Math.floor(Math.abs(n)/60),ge=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+L*W),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const ie=n>0?"+":"-",pe=W.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");p=`${ie}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),T=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return Kt(`${d}-${C}-${P}T${M}:${T}:${E}.${B}${p}`)}),"Math:Infinity":Oe(1/0),"Math:E":Oe(Math.E),"Math:LN2":Oe(Math.LN2),"Math:LN10":Oe(Math.LN10),"Math:LOG2E":Oe(Math.LOG2E),"Math:LOG10E":Oe(Math.LOG10E),"Math:PI":Oe(Math.PI),"Math:SQRT1_2":Oe(Math.SQRT1_2),"Math:SQRT2":Oe(Math.SQRT2),"Math:abs":oe(([t])=>(Me(t),Oe(Math.abs(t.value)))),"Math:acos":oe(([t])=>(Me(t),Oe(Math.acos(t.value)))),"Math:acosh":oe(([t])=>(Me(t),Oe(Math.acosh(t.value)))),"Math:asin":oe(([t])=>(Me(t),Oe(Math.asin(t.value)))),"Math:asinh":oe(([t])=>(Me(t),Oe(Math.asinh(t.value)))),"Math:atan":oe(([t])=>(Me(t),Oe(Math.atan(t.value)))),"Math:atanh":oe(([t])=>(Me(t),Oe(Math.atanh(t.value)))),"Math:atan2":oe(([t,r])=>(Me(t),Me(r),Oe(Math.atan2(t.value,r.value)))),"Math:cbrt":oe(([t])=>(Me(t),Oe(Math.cbrt(t.value)))),"Math:ceil":oe(([t])=>(Me(t),Oe(Math.ceil(t.value)))),"Math:clz32":oe(([t])=>(Me(t),Oe(Math.clz32(t.value)))),"Math:cos":oe(([t])=>(Me(t),Oe(Math.cos(t.value)))),"Math:cosh":oe(([t])=>(Me(t),Oe(Math.cosh(t.value)))),"Math:exp":oe(([t])=>(Me(t),Oe(Math.exp(t.value)))),"Math:expm1":oe(([t])=>(Me(t),Oe(Math.expm1(t.value)))),"Math:floor":oe(([t])=>(Me(t),Oe(Math.floor(t.value)))),"Math:fround":oe(([t])=>(Me(t),Oe(Math.fround(t.value)))),"Math:hypot":oe(([t])=>{to(t);const r=[];for(const e of t.value)Me(e),r.push(e.value);return Oe(Math.hypot(...r))}),"Math:imul":oe(([t,r])=>(Me(t),Me(r),Oe(Math.imul(t.value,r.value)))),"Math:log":oe(([t])=>(Me(t),Oe(Math.log(t.value)))),"Math:log1p":oe(([t])=>(Me(t),Oe(Math.log1p(t.value)))),"Math:log10":oe(([t])=>(Me(t),Oe(Math.log10(t.value)))),"Math:log2":oe(([t])=>(Me(t),Oe(Math.log2(t.value)))),"Math:max":oe(([t,r])=>(Me(t),Me(r),Oe(Math.max(t.value,r.value)))),"Math:min":oe(([t,r])=>(Me(t),Me(r),Oe(Math.min(t.value,r.value)))),"Math:pow":oe(([t,r])=>(Me(t),Me(r),Oe(Math.pow(t.value,r.value)))),"Math:round":oe(([t])=>(Me(t),Oe(Math.round(t.value)))),"Math:sign":oe(([t])=>(Me(t),Oe(Math.sign(t.value)))),"Math:sin":oe(([t])=>(Me(t),Oe(Math.sin(t.value)))),"Math:sinh":oe(([t])=>(Me(t),Oe(Math.sinh(t.value)))),"Math:sqrt":oe(([t])=>{Me(t);const r=Math.sqrt(t.value);return Oe(r)}),"Math:tan":oe(([t])=>(Me(t),Oe(Math.tan(t.value)))),"Math:tanh":oe(([t])=>(Me(t),Oe(Math.tanh(t.value)))),"Math:trunc":oe(([t])=>(Me(t),Oe(Math.trunc(t.value)))),"Math:rnd":oe(([t,r])=>{if(t&&t.type==="num"&&r&&r.type==="num"){const e=Rh.instance.generateRandomIntegerInRange(t.value,r.value);return e===null?wt:Oe(e)}return Oe(Rh.instance.generateNumber0To1())}),"Math:gen_rng":oe(async([t,r])=>{Sn(t);let e="chacha20";if((r==null?void 0:r.type)==="obj"){const n=r.value.get("algorithm");if((n==null?void 0:n.type)!=="str")throw new Zt("`options.algorithm` must be string.");e=n.value}else if((r==null?void 0:r.type)!==void 0)throw new Zt("`options` must be an object if specified.");if(t.type!=="num"&&t.type!=="str"&&t.type!=="null")throw new Zt("`seed` must be either number or string if specified.");switch(e){case"rc4_legacy":return Zx(t);case"rc4":return Qx(t);case"chacha20":return await Xx(t);default:throw new Zt("`options.algorithm` must be one of these: `chacha20`, `rc4`, or `rc4_legacy`.")}}),"Num:from_hex":oe(([t])=>($r(t),Oe(parseInt(t.value,16)))),"Str:lf":Kt(`
`),"Str:lt":oe(([t,r])=>($r(t),$r(r),t.value<r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:gt":oe(([t,r])=>($r(t),$r(r),t.value>r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:from_codepoint":oe(([t])=>(Me(t),Kt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":oe(([t])=>(to(t),Kt(Array.from(t.value.map(r=>(Me(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":oe(([t])=>(to(t),Kt(Px.decode(Uint8Array.from(t.value.map(r=>(Me(r),r.value))))))),"Uri:encode_full":oe(([t])=>($r(t),Kt(encodeURI(t.value)))),"Uri:encode_component":oe(([t])=>($r(t),Kt(encodeURIComponent(t.value)))),"Uri:decode_full":oe(([t])=>($r(t),Kt(decodeURI(t.value)))),"Uri:decode_component":oe(([t])=>($r(t),Kt(decodeURIComponent(t.value)))),"Arr:create":oe(([t,r])=>{Me(t);try{return Rr(Array(t.value).fill(r??wt))}catch(e){throw t.value<0?new Zt("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new Zt("Arr:create expected integer, got non-integer")}}),"Obj:keys":oe(([t])=>(Qi(t),Rr(Array.from(t.value.keys()).map(r=>Kt(r))))),"Obj:vals":oe(([t])=>(Qi(t),Rr(Array.from(t.value.values())))),"Obj:kvs":oe(([t])=>(Qi(t),Rr(Array.from(t.value.entries()).map(([r,e])=>Rr([Kt(r),e]))))),"Obj:get":oe(([t,r])=>(Qi(t),$r(r),t.value.get(r.value)??wt)),"Obj:set":oe(([t,r,e])=>(Qi(t),$r(r),Sn(e),t.value.set(r.value,e),wt)),"Obj:has":oe(([t,r])=>(Qi(t),$r(r),Yo(t.value.has(r.value)))),"Obj:copy":oe(([t])=>(Qi(t),Oh(new Map(t.value)))),"Obj:merge":oe(([t,r])=>(Qi(t),Qi(r),Oh(new Map([...t.value,...r.value])))),"Error:create":oe(([t,r])=>($r(t),lh(t.value,r))),"Async:interval":oe(async([t,r,e],n)=>{Me(t),ds(r),e&&(_n(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),oe(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":oe(async([t,r],e)=>{Me(t),ds(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),oe(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})};var Af={},eb=()=>{const t="\\ud800-\\udfff",C="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",P="\\ufe0e\\ufe0f",M="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",T=`[${t}]`,E=`[${C}]`,B="\\ud83c[\\udffb-\\udfff]",L=`(?:${E}|${B})`,W=`[^${t}]`,ge="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ie="[\\ud800-\\udbff][\\udc00-\\udfff]",pe="\\u200d",be="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",Z=`[${M}]`,K=`${L}?`,G=`[${P}]?`,Q=`(?:${pe}(?:${[W,ge,ie].join("|")})${G+K})*`,re=G+K+Q,le=`(?:${[`${W}${E}?`,E,ge,ie,T,Z].join("|")})`;return new RegExp(`${be}|${B}(?=${B})|${le+re}`,"g")},tb=qi&&qi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});var Xh=tb(eb);function cv(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Xh.default())||[]}var Qs=Af.toArray=cv;function mg(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Xh.default());return r===null?0:r.length}var Cf=Af.length=mg;function gw(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(Xh.default());return n?n.slice(r,e).join(""):""}var _f=Af.substring=gw;function rb(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=mg(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var p;typeof e>"u"?p=n:(typeof e!="number"&&(e=parseInt(e,10)),p=e>=0?e+r:r);var d=t.match(Xh.default());return d?d.slice(r,p).join(""):""}Af.substr=rb;function sb(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var p=mg(t);if(p>r)return gw(t,0,r);if(p<r){var d=e.repeat(r-p);return n==="left"?d+t:t+d}return t}Af.limit=sb;function nb(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=cv(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var p=cv(r),d=!1,C;for(C=e;C<n.length;C+=1){for(var P=0;P<p.length&&p[P]===n[C+P];)P+=1;if(P===p.length&&p[P-1]===n[C+P-1]){d=!0;break}}return d?C:-1}var Pf=Af.indexOf=nb;const yd={num:{to_str:t=>oe(async(r,e)=>Kt(t.value.toString())),to_hex:t=>oe(async(r,e)=>Kt(t.value.toString(16)))},str:{to_num:t=>oe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?wt:Oe(n)}),to_arr:t=>oe(async(r,e)=>Rr(Qs(t.value).map(n=>Kt(n)))),to_unicode_arr:t=>oe(async(r,e)=>Rr([...t.value].map(n=>Kt(n)))),to_unicode_codepoint_arr:t=>oe(async(r,e)=>Rr([...t.value].map(n=>{const p=n.codePointAt(0);return Oe(p??n.charCodeAt(0))}))),to_char_arr:t=>oe(async(r,e)=>Rr(t.value.split("").map(n=>Kt(n)))),to_charcode_arr:t=>oe(async(r,e)=>Rr(t.value.split("").map(n=>Oe(n.charCodeAt(0))))),to_utf8_byte_arr:t=>oe(async(r,e)=>Rr(Array.from(pw.encode(t.value)).map(n=>Oe(n)))),len:t=>Oe(Cf(t.value)),replace:t=>oe(async([r,e],n)=>($r(r),$r(e),Kt(t.value.split(r.value).join(e.value)))),index_of:t=>oe(async([r,e],n)=>{$r(r),e&&Me(e);const p=e?e.value<0?t.value.length+e.value:e.value:void 0;return Oe(Pf(t.value,r.value,p))}),incl:t=>oe(async([r],e)=>($r(r),t.value.includes(r.value)?Ws:Gs)),trim:t=>oe(async(r,e)=>Kt(t.value.trim())),upper:t=>oe(async(r,e)=>Kt(t.value.toUpperCase())),lower:t=>oe(async(r,e)=>Kt(t.value.toLowerCase())),split:t=>oe(async([r],e)=>(r&&$r(r),Rr(r?t.value.split(r?r.value:"").map(n=>Kt(n)):Qs(t.value).map(n=>Kt(n))))),slice:t=>oe(async([r,e],n)=>(Me(r),Me(e),Kt(_f(t.value,r.value,e.value)))),pick:t=>oe(async([r],e)=>{Me(r);const p=Qs(t.value)[r.value];return p?Kt(p):wt}),charcode_at:t=>oe(([r],e)=>{Me(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?wt:Oe(n)}),codepoint_at:t=>oe(([r],e)=>{Me(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?wt:Oe(n)}),starts_with:t=>oe(async([r,e],n)=>{if($r(r),!r.value)return Ws;e&&Me(e);const p=(e==null?void 0:e.value)??0;if(p<-t.value.length||p>t.value.length)return Gs;const d=p>=0?p:t.value.length+p;return t.value.startsWith(r.value,d)?Ws:Gs}),ends_with:t=>oe(async([r,e],n)=>{if($r(r),!r.value)return Ws;e&&Me(e);const p=(e==null?void 0:e.value)??t.value.length;if(p<-t.value.length||p>t.value.length)return Gs;const d=p>=0?p:t.value.length+p;return t.value.endsWith(r.value,d)?Ws:Gs}),pad_start:t=>oe(([r,e],n)=>{Me(r);const p=e?($r(e),e.value):" ";return Kt(t.value.padStart(r.value,p))}),pad_end:t=>oe(([r,e],n)=>{Me(r);const p=e?($r(e),e.value):" ";return Kt(t.value.padEnd(r.value,p))})},arr:{len:t=>Oe(t.value.length),push:t=>oe(async([r],e)=>(Sn(r),t.value.push(r),t)),unshift:t=>oe(async([r],e)=>(Sn(r),t.value.unshift(r),t)),pop:t=>oe(async(r,e)=>t.value.pop()??wt),shift:t=>oe(async(r,e)=>t.value.shift()??wt),concat:t=>oe(async([r],e)=>(to(r),Rr(t.value.concat(r.value)))),slice:t=>oe(async([r,e],n)=>(Me(r),Me(e),Rr(t.value.slice(r.value,e.value)))),join:t=>oe(async([r],e)=>(r&&$r(r),Kt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>oe(async([r],e)=>{ds(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,Oe(d)]));return Rr(await Promise.all(n))}),filter:t=>oe(async([r],e)=>{ds(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,Oe(p)]);_n(C),C.value&&n.push(d)}return Rr(n)}),reduce:t=>oe(async([r,e],n)=>{ds(r);const p=e!=null;if(!p&&t.value.length===0)throw new Zt("Reduce of empty array without initial value");let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,Oe(C)])}return d}),find:t=>oe(async([r],e)=>{ds(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Oe(n)]);if(_n(d),d.value)return p}return wt}),incl:t=>oe(async([r],e)=>(Sn(r),t.value.some(n=>Uf(r,n))?Ws:Gs)),index_of:t=>oe(async([r,e],n)=>{if(Sn(r),e){Me(e);const p=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>Uf(C,r));return Oe(d<0?d:d+p)}else return Oe(t.value.findIndex(p=>Uf(p,r)))}),reverse:t=>oe(async(r,e)=>(t.value.reverse(),wt)),copy:t=>oe(async(r,e)=>Rr([...t.value])),sort:t=>oe(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=n(d.slice(0,P),C),T=n(d.slice(P),C),[E,B]=await Promise.all([M,T]);return p(E,B,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Me(W),W.value<=0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return ds(r),to(t),t.value=await n(t.value,r),t}),fill:t=>oe(async([r,e,n],p)=>{const d=r??wt,C=e&&(Me(e),e.value),P=n&&(Me(n),n.value);return t.value.fill(d,C,P),t}),repeat:t=>oe(async([r],e)=>{Me(r);try{return Rr(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new Zt("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new Zt("arr.repeat expected integer, got non-integer")}}),splice:t=>oe(async([r,e,n],p)=>{Me(r);const d=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(Me(e),e.value):t.value.length-d,P=n!=null?(to(n),n.value):[],M=t.value.splice(d,C,...P);return Rr(M)}),flat:t=>oe(async([r],e)=>{if(r=r??Oe(1),Me(r),!Number.isInteger(r.value))throw new Zt("arr.flat expected integer, got non-integer");if(r.value<0)throw new Zt("arr.flat expected non-negative number, got negative");const n=(d,C,P)=>{if(C===0){P.push(...d);return}for(const M of d)Ih(M)?n(M.value,C-1,P):P.push(M)},p=[];return n(t.value,r.value,p),Rr(p)}),flat_map:t=>oe(async([r],e)=>{ds(r);const n=t.value.map(async(d,C)=>{const P=await e.call(r,[d,Oe(C)]);return Ih(P)?P.value:P}),p=await Promise.all(n);return Rr(p.flat())}),every:t=>oe(async([r],e)=>{ds(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Oe(n)]);if(_n(d),!d.value)return Gs}return Ws}),some:t=>oe(async([r],e)=>{ds(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Oe(n)]);if(_n(d),d.value)return Ws}return Gs}),insert:t=>oe(async([r,e],n)=>(Me(r),Sn(e),t.value.splice(r.value,0,e),wt)),remove:t=>oe(async([r],e)=>(Me(r),t.value.splice(r.value,1)[0]??wt)),at:t=>oe(async([r,e],n)=>(Me(r),t.value.at(r.value)??e??wt))},error:{name:t=>Kt(t.value),info:t=>t.info??wt}};function ab(t,r){if(Object.hasOwn(yd,t.type)){const e=yd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Zt(`No such prop (${r}) in ${t.type}.`)}else throw new Zt(`Cannot read prop of ${t.type}. (reading ${r})`)}const ib={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Xs=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let Vs=class{constructor(r,e={}){fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);fe(this,"vars",{});fe(this,"irqRate");fe(this,"irqSleep");this.opts=e;const n={print:oe(([d])=>{Sn(d),this.opts.out&&this.opts.out(d)}),readline:oe(async d=>{const C=d[0];if($r(C),this.opts.in==null)return wt;const P=await this.opts.in(C.value);return Kt(P)})};if(this.vars=Object.fromEntries(Object.entries({...r,...Yx,...n}).map(([d,C])=>[d,ib.const(C)])),this.scope=new Ou([new Map(Object.entries(this.vars))]),this.scope.opts.log=(d,C)=>{switch(d){case"add":this.log("var:add",C);break;case"read":this.log("var:read",C);break;case"write":this.log("var:write",C);break}},!((this.opts.irqRate??300)>=0))throw new hd(`Invalid IRQ rate (${this.opts.irqRate}): must be non-negative number`);this.irqRate=this.opts.irqRate??300;const p=d=>()=>new Promise(C=>setTimeout(C,d));if(typeof this.opts.irqSleep=="function")this.irqSleep=this.opts.irqSleep;else if(this.opts.irqSleep===void 0)this.irqSleep=p(5);else if(this.opts.irqSleep>=0)this.irqSleep=p(this.opts.irqSleep);else throw new hd("irqSleep must be a function or a positive number.")}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope,[]);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e,[]).catch(n=>(this.handleError(n),lh("func_failed")))}execFnSimple(r,e){return this._fn(r,e,[])}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof pf?this.opts.err(r):this.opts.err(new fd(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const p of r.members)switch(p.type){case"def":{if(p.dest.type!=="identifier")throw new $p("Destructuring assignment is invalid in namespace declarations.",p.loc.start);if(p.mut)throw new $p('No "var" in namespace declaration: '+p.dest.name,p.loc.start);const d=await this._eval(p.expr,n,[]);p.expr.type==="fn"&&vd(d)&&!d.native&&(d.name=n.getNsPrefix()+p.dest.name),await this.define(n,p.dest,d,p.mut);break}case"ns":break;default:{const C=p;throw new $p("invalid ns member type: "+C.type,C.loc.start)}}}async _fn(r,e,n,p){if(r.native){const d={name:"<native>",pos:p};return r.native(e,{call:(P,M)=>this._fn(P,M,[...n,d]),topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??wt}else{const d=r.scope.createChildScope();for(const[P,M]of r.params.entries()){const T=e[P];M.default||Sn(T),this.define(d,M.dest,T??M.default,!0)}const C={name:r.name??"<anonymous>",pos:p};return Ax(await this._run(r.statements,d,[...n,C]))}}_evalClause(r,e,n){return this._eval(r,px(r)?e.createChildScope():e,n)}_eval(r,e,n){return this.__eval(r,e,n).catch(p=>{if(p.pos)throw p;{const d=p instanceof pf?p:new fd(p);throw d.pos=r.loc.start,d.message=[d.message,...[...n,{pos:d.pos}].map(({pos:C},P)=>{var T;const M=((T=n[P-1])==null?void 0:T.name)??"<root>";return C?`  at ${M} (Line ${C.line}, Column ${C.column})`:`  at ${M}`}).reverse()].join(`
`),d}})}async __eval(r,e,n){if(this.stop)return wt;if(this.irqRate!==0&&this.stepCount%this.irqRate>=this.irqRate-1&&await this.irqSleep(),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Zt("max step exceeded");switch(r.type){case"call":{const p=await this._eval(r.target,e,n);ds(p);const d=await Promise.all(r.args.map(C=>this._eval(C,e,n)));return this._fn(p,d,n,r.loc.start)}case"if":{const p=await this._eval(r.cond,e,n);if(_n(p),p.value)return this._evalClause(r.then,e,n);for(const d of r.elseif){const C=await this._eval(d.cond,e,n);if(_n(C),C.value)return this._evalClause(d.then,e,n)}return r.else?this._evalClause(r.else,e,n):wt}case"match":{const p=await this._eval(r.about,e,n);for(const d of r.qs){const C=await this._eval(d.q,e,n);if(Uf(p,C))return await this._evalClause(d.a,e,n)}return r.default?await this._evalClause(r.default,e,n):wt}case"loop":{for(;;){const p=await this._run(r.statements,e.createChildScope(),n);if(p.type==="break")break;if(p.type==="return")return p}return wt}case"for":{if(r.times){const p=await this._eval(r.times,e,n);Me(p);for(let d=0;d<p.value;d++){const C=await this._evalClause(r.for,e,n);if(C.type==="break")break;if(C.type==="return")return C}}else{const p=await this._eval(r.from,e,n),d=await this._eval(r.to,e,n);Me(p),Me(d);for(let C=p.value;C<p.value+d.value;C++){const P=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Oe(C)}]])),n);if(P.type==="break")break;if(P.type==="return")return P}}return wt}case"each":{const p=await this._eval(r.items,e,n);to(p);for(const d of p.value){const C=e.createChildScope();this.define(C,r.var,d,!1);const P=await this._eval(r.for,C,n);if(P.type==="break")break;if(P.type==="return")return P}return wt}case"def":{const p=await this._eval(r.expr,e,n);if(r.attr.length>0){const d=[];for(const C of r.attr)d.push({name:C.name,value:await this._eval(C.value,e,n)});p.attr=d}return r.expr.type==="fn"&&r.dest.type==="identifier"&&vd(p)&&!p.native&&(p.name=r.dest.name),await this.define(e,r.dest,p,r.mut),wt}case"identifier":return e.get(r.name);case"assign":{const p=await this._eval(r.expr,e,n);return await this.assign(e,r.dest,p,n),wt}case"addAssign":{const p=await this._eval(r.dest,e,n);Me(p);const d=await this._eval(r.expr,e,n);return Me(d),await this.assign(e,r.dest,Oe(p.value+d.value),n),wt}case"subAssign":{const p=await this._eval(r.dest,e,n);Me(p);const d=await this._eval(r.expr,e,n);return Me(d),await this.assign(e,r.dest,Oe(p.value-d.value),n),wt}case"null":return wt;case"bool":return Yo(r.value);case"num":return Oe(r.value);case"str":return Kt(r.value);case"arr":return Rr(await Promise.all(r.value.map(p=>this._eval(p,e,n))));case"obj":{const p=new Map;for(const[d,C]of r.value)p.set(d,await this._eval(C,e,n));return Oh(p)}case"prop":{const p=await this._eval(r.target,e,n);return bp(p)?p.value.has(r.name)?p.value.get(r.name):wt:ab(p,r.name)}case"index":{const p=await this._eval(r.target,e,n),d=await this._eval(r.index,e,n);if(Ih(p)){Me(d);const C=p.value[d.value];if(C===void 0)throw new cd(`Index out of range. index: ${d.value} max: ${p.value.length-1}`);return C}else{if(bp(p))return $r(d),p.value.has(d.value)?p.value.get(d.value):wt;throw new Zt(`Cannot read prop (${Bf(d)}) of ${p.type}.`)}}case"not":{const p=await this._eval(r.expr,e,n);return _n(p),Yo(!p.value)}case"fn":return mx(await Promise.all(r.params.map(async p=>({dest:p.dest,default:p.default?await this._eval(p.default,e,n):p.optional?wt:void 0}))),r.children,e);case"block":return this._run(r.statements,e.createChildScope(),n);case"exists":return Yo(e.exists(r.identifier.name));case"tmpl":{let p="";for(const d of r.tmpl)if(typeof d=="string")p+=d;else{const C=await this._eval(d,e,n);p+=Bf(C)}return Kt(p)}case"return":{const p=await this._eval(r.expr,e,n);return this.log("block:return",{scope:e.name,val:p}),$x(p)}case"break":return this.log("block:break",{scope:e.name}),xx();case"continue":return this.log("block:continue",{scope:e.name}),bx();case"ns":return wt;case"meta":return wt;case"pow":{const p=e.get("Core:pow");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"mul":{const p=e.get("Core:mul");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"div":{const p=e.get("Core:div");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"rem":{const p=e.get("Core:mod");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"add":{const p=e.get("Core:add");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"sub":{const p=e.get("Core:sub");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"lt":{const p=e.get("Core:lt");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"lteq":{const p=e.get("Core:lteq");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"gt":{const p=e.get("Core:gt");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"gteq":{const p=e.get("Core:gteq");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"eq":{const p=e.get("Core:eq");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"neq":{const p=e.get("Core:neq");ds(p);const d=await this._eval(r.left,e,n),C=await this._eval(r.right,e,n);return this._fn(p,[d,C],n)}case"and":{const p=await this._eval(r.left,e,n);if(_n(p),p.value){const d=await this._eval(r.right,e,n);return _n(d),d}else return p}case"or":{const p=await this._eval(r.left,e,n);if(_n(p),p.value)return p;{const d=await this._eval(r.right,e,n);return _n(d),d}}default:throw new Error("invalid node type")}}async _run(r,e,n){this.log("block:enter",{scope:e.name});let p=wt;for(let d=0;d<r.length;d++){const C=r[d];if(p=await this._eval(C,e,n),p.type==="return")return this.log("block:return",{scope:e.name,val:p.value}),p;if(p.type==="break")return this.log("block:break",{scope:e.name}),p;if(p.type==="continue")return this.log("block:continue",{scope:e.name}),p}return this.log("block:leave",{scope:e.name,val:p}),p}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async define(r,e,n,p){switch(e.type){case"identifier":{r.add(e.name,{isMutable:p,value:n});break}case"arr":{to(n),await Promise.all(e.value.map((d,C)=>this.define(r,d,n.value[C]??wt,p)));break}case"obj":{Qi(n),await Promise.all([...e.value].map(([d,C])=>this.define(r,C,n.value.get(d)??wt,p)));break}default:throw new Zt("The left-hand side of an definition expression must be a variable.")}}async assign(r,e,n,p){switch(e.type){case"identifier":{r.assign(e.name,n);break}case"index":{const d=await this._eval(e.target,r,p),C=await this._eval(e.index,r,p);if(Ih(d)){if(Me(C),d.value[C.value]===void 0)throw new cd(`Index out of range. index: ${C.value} max: ${d.value.length-1}`);d.value[C.value]=n}else if(bp(d))$r(C),d.value.set(C.value,n);else throw new Zt(`Cannot read prop (${Bf(C)}) of ${d.type}.`);break}case"prop":{const d=await this._eval(e.target,r,p);Qi(d),d.value.set(e.name,n);break}case"arr":{to(n),await Promise.all(e.value.map((d,C)=>this.assign(r,d,n.value[C]??wt,p)));break}case"obj":{Qi(n),await Promise.all([...e.value].map(([d,C])=>this.assign(r,C,n.value.get(d)??wt,p)));break}default:throw new Zt("The left-hand side of an assignment expression must be a variable or a property/index access.")}}};Xs([Er],Vs.prototype,"exec",null);Xs([Er],Vs.prototype,"execFn",null);Xs([Er],Vs.prototype,"execFnSimple",null);Xs([Er],Vs.prototype,"handleError",null);Xs([Er],Vs.prototype,"log",null);Xs([Er],Vs.prototype,"collectNs",null);Xs([Er],Vs.prototype,"collectNsMember",null);Xs([Er],Vs.prototype,"_fn",null);Xs([Er],Vs.prototype,"_evalClause",null);Xs([Er],Vs.prototype,"_eval",null);Xs([Er],Vs.prototype,"__eval",null);Xs([Er],Vs.prototype,"_run",null);Xs([Er],Vs.prototype,"registerAbortHandler",null);Xs([Er],Vs.prototype,"unregisterAbortHandler",null);Xs([Er],Vs.prototype,"abort",null);Xs([Er],Vs.prototype,"define",null);Xs([Er],Vs.prototype,"assign",null);Xs([Er],Vs,"collectMetadata",null);class lb{constructor(r,e){fe(this,"pages");fe(this,"firstPageIndex");fe(this,"lastPageIndex");fe(this,"pageIndex");fe(this,"address");fe(this,"_char");fe(this,"line");fe(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var q;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.DoKeyword=14]="DoKeyword",t[t.WhileKeyword=15]="WhileKeyword",t[t.BreakKeyword=16]="BreakKeyword",t[t.ContinueKeyword=17]="ContinueKeyword",t[t.MatchKeyword=18]="MatchKeyword",t[t.CaseKeyword=19]="CaseKeyword",t[t.DefaultKeyword=20]="DefaultKeyword",t[t.IfKeyword=21]="IfKeyword",t[t.ElifKeyword=22]="ElifKeyword",t[t.ElseKeyword=23]="ElseKeyword",t[t.ReturnKeyword=24]="ReturnKeyword",t[t.EvalKeyword=25]="EvalKeyword",t[t.VarKeyword=26]="VarKeyword",t[t.LetKeyword=27]="LetKeyword",t[t.ExistsKeyword=28]="ExistsKeyword",t[t.Not=29]="Not",t[t.NotEq=30]="NotEq",t[t.OpenSharpBracket=31]="OpenSharpBracket",t[t.Sharp3=32]="Sharp3",t[t.Percent=33]="Percent",t[t.And2=34]="And2",t[t.OpenParen=35]="OpenParen",t[t.CloseParen=36]="CloseParen",t[t.Asterisk=37]="Asterisk",t[t.Plus=38]="Plus",t[t.PlusEq=39]="PlusEq",t[t.Comma=40]="Comma",t[t.Minus=41]="Minus",t[t.MinusEq=42]="MinusEq",t[t.Dot=43]="Dot",t[t.Slash=44]="Slash",t[t.Colon=45]="Colon",t[t.Colon2=46]="Colon2",t[t.SemiColon=47]="SemiColon",t[t.Lt=48]="Lt",t[t.LtEq=49]="LtEq",t[t.Out=50]="Out",t[t.Eq=51]="Eq",t[t.Eq2=52]="Eq2",t[t.Arrow=53]="Arrow",t[t.Gt=54]="Gt",t[t.GtEq=55]="GtEq",t[t.Question=56]="Question",t[t.At=57]="At",t[t.OpenBracket=58]="OpenBracket",t[t.BackSlash=59]="BackSlash",t[t.CloseBracket=60]="CloseBracket",t[t.Hat=61]="Hat",t[t.OpenBrace=62]="OpenBrace",t[t.Or2=63]="Or2",t[t.CloseBrace=64]="CloseBrace"})(q||(q={}));class ub{constructor(r,e,n=!1,p,d){fe(this,"kind");fe(this,"pos");fe(this,"hasLeftSpacing");fe(this,"value");fe(this,"children");this.kind=r,this.pos=e,this.hasLeftSpacing=n,this.value=p,this.children=d}}function rt(t,r,e){return new ub(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const Ap=[" ","	"],wd=["\r",`
`],md=/^[0-9]$/,ob=/^[A-Za-z0-9_]$/;class fb{constructor(r){fe(this,"stream");fe(this,"_tokens",[]);typeof r=="string"?this.stream=new lb(r):this.stream=r,this._tokens.push(this.readToken())}getToken(){return this._tokens[0]}is(r){return this.getTokenKind()===r}getTokenKind(){return this.getToken().kind}getTokenValue(){return this.getToken().value}getPos(){return this.getToken().pos}next(){this._tokens[0].kind!==q.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(!this.is(r))throw new Wt(`unexpected token: ${q[this.getTokenKind()]}`,this.getPos())}readToken(){let r=!1;for(;;){if(this.stream.eof)return rt(q.EOF,this.stream.getPos(),{hasLeftSpacing:r});if(Ap.includes(this.stream.char)){this.stream.next(),r=!0;continue}const e=this.stream.getPos();if(wd.includes(this.stream.char))return this.skipEmptyLines(),rt(q.NewLine,e,{hasLeftSpacing:r});switch(this.stream.char){case"!":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.NotEq,e,{hasLeftSpacing:r})):rt(q.Not,e,{hasLeftSpacing:r});case'"':case"'":return this.readStringLiteral(r);case"#":if(this.stream.next(),!this.stream.eof&&this.stream.char==="#"){if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")return this.stream.next(),rt(q.Sharp3,e,{hasLeftSpacing:r});throw new Wt('invalid sequence of characters: "##"',e)}else{if(!this.stream.eof&&this.stream.char==="[")return this.stream.next(),rt(q.OpenSharpBracket,e,{hasLeftSpacing:r});throw new Wt('invalid character: "#"',e)}case"%":return this.stream.next(),rt(q.Percent,e,{hasLeftSpacing:r});case"&":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="&")return this.stream.next(),rt(q.And2,e,{hasLeftSpacing:r});throw new Wt('invalid character: "&"',e)}case"(":return this.stream.next(),rt(q.OpenParen,e,{hasLeftSpacing:r});case")":return this.stream.next(),rt(q.CloseParen,e,{hasLeftSpacing:r});case"*":return this.stream.next(),rt(q.Asterisk,e,{hasLeftSpacing:r});case"+":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.PlusEq,e,{hasLeftSpacing:r})):rt(q.Plus,e,{hasLeftSpacing:r});case",":return this.stream.next(),rt(q.Comma,e,{hasLeftSpacing:r});case"-":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.MinusEq,e,{hasLeftSpacing:r})):rt(q.Minus,e,{hasLeftSpacing:r});case".":return this.stream.next(),rt(q.Dot,e,{hasLeftSpacing:r});case"/":if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else return rt(q.Slash,e,{hasLeftSpacing:r});case":":return this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),rt(q.Colon2,e,{hasLeftSpacing:r})):rt(q.Colon,e,{hasLeftSpacing:r});case";":return this.stream.next(),rt(q.SemiColon,e,{hasLeftSpacing:r});case"<":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.LtEq,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),rt(q.Out,e,{hasLeftSpacing:r})):rt(q.Lt,e,{hasLeftSpacing:r});case"=":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.Eq2,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),rt(q.Arrow,e,{hasLeftSpacing:r})):rt(q.Eq,e,{hasLeftSpacing:r});case">":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.GtEq,e,{hasLeftSpacing:r})):rt(q.Gt,e,{hasLeftSpacing:r});case"?":return this.stream.next(),rt(q.Question,e,{hasLeftSpacing:r});case"@":return this.stream.next(),rt(q.At,e,{hasLeftSpacing:r});case"[":return this.stream.next(),rt(q.OpenBracket,e,{hasLeftSpacing:r});case"\\":return this.stream.next(),rt(q.BackSlash,e,{hasLeftSpacing:r});case"]":return this.stream.next(),rt(q.CloseBracket,e,{hasLeftSpacing:r});case"^":return this.stream.next(),rt(q.Hat,e,{hasLeftSpacing:r});case"`":return this.readTemplate(r);case"{":return this.stream.next(),rt(q.OpenBrace,e,{hasLeftSpacing:r});case"|":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="|")return this.stream.next(),rt(q.Or2,e,{hasLeftSpacing:r});throw new Wt('invalid character: "|"',e)}case"}":return this.stream.next(),rt(q.CloseBrace,e,{hasLeftSpacing:r});default:{const n=this.tryReadDigits(r);if(n)return n;const p=this.tryReadWord(r);if(p)return p;throw new Wt(`invalid character: "${this.stream.char}"`,e)}}break}}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&ob.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return rt(q.NullKeyword,n,{hasLeftSpacing:r});case"true":return rt(q.TrueKeyword,n,{hasLeftSpacing:r});case"false":return rt(q.FalseKeyword,n,{hasLeftSpacing:r});case"each":return rt(q.EachKeyword,n,{hasLeftSpacing:r});case"for":return rt(q.ForKeyword,n,{hasLeftSpacing:r});case"loop":return rt(q.LoopKeyword,n,{hasLeftSpacing:r});case"do":return rt(q.DoKeyword,n,{hasLeftSpacing:r});case"while":return rt(q.WhileKeyword,n,{hasLeftSpacing:r});case"break":return rt(q.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return rt(q.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return rt(q.MatchKeyword,n,{hasLeftSpacing:r});case"case":return rt(q.CaseKeyword,n,{hasLeftSpacing:r});case"default":return rt(q.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return rt(q.IfKeyword,n,{hasLeftSpacing:r});case"elif":return rt(q.ElifKeyword,n,{hasLeftSpacing:r});case"else":return rt(q.ElseKeyword,n,{hasLeftSpacing:r});case"return":return rt(q.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return rt(q.EvalKeyword,n,{hasLeftSpacing:r});case"var":return rt(q.VarKeyword,n,{hasLeftSpacing:r});case"let":return rt(q.LetKeyword,n,{hasLeftSpacing:r});case"exists":return rt(q.ExistsKeyword,n,{hasLeftSpacing:r});default:return rt(q.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const p=this.stream.getPos();for(;!this.stream.eof&&md.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&md.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new Wt("digit expected",p)}let d;return n.length>0?d=e+"."+n:d=e,rt(q.NumberLiteral,p,{hasLeftSpacing:r,value:d})}readStringLiteral(r){let e="";const n=this.stream.char;let p="string";const d=this.stream.getPos();for(this.stream.next();p!=="finish";)switch(p){case"string":{if(this.stream.eof)throw new Wt("unexpected EOF",d);if(this.stream.char==="\\"){this.stream.next(),p="escape";break}if(this.stream.char===n){this.stream.next(),p="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Wt("unexpected EOF",d);e+=this.stream.char,this.stream.next(),p="string";break}}return rt(q.StringLiteral,d,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",p=[],d="string";const C=this.stream.getPos();let P=C;for(this.stream.next();d!=="finish";)switch(d){case"string":{if(this.stream.eof)throw new Wt("unexpected EOF",C);if(this.stream.char==="\\"){this.stream.next(),d="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(rt(q.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),d="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(rt(q.TemplateStringElement,P,{hasLeftSpacing:r,value:n})),n=""),P=this.stream.getPos(),d="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Wt("unexpected EOF",C);n+=this.stream.char,this.stream.next(),d="string";break}case"expr":{if(this.stream.eof)throw new Wt("unexpected EOF",C);if(Ap.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){e.push(rt(q.TemplateExprElement,P,{hasLeftSpacing:r,children:p})),P=this.stream.getPos(),p.push(rt(q.EOF,P)),p=[],d="string",this.stream.next();break}const M=this.readToken();p.push(M);break}}return rt(q.Template,C,{hasLeftSpacing:r,children:e})}skipEmptyLines(){for(;!this.stream.eof;){if(Ap.includes(this.stream.char)||wd.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="/")if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else{this.stream.prev();break}break}}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function nt(t,r,e,n){const p={type:t};for(const d of Object.keys(r))r[d]!==void 0&&(p[d]=r[d]);return p.loc={start:e,end:n},p}function cb(t,r,e,n){return nt("call",{target:nt("identifier",{name:t},e,e),args:r},e,n)}class hb{constructor(r){fe(this,"source");fe(this,"index");fe(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}getToken(){return this.eof?rt(q.EOF,{line:-1,column:-1}):this._token}is(r){return this.getTokenKind()===r}getTokenValue(){return this.getToken().value}getTokenKind(){return this.getToken().kind}getPos(){return this.getToken().pos}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:rt(q.EOF,{line:-1,column:-1})}expect(r){if(!this.is(r))throw new Wt(`unexpected token: ${q[this.getTokenKind()]}`,this.getPos())}load(){this.eof?this._token=rt(q.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function Lr(t,r){return r?dw(t,!0):$g(t,0)}const Cp=[{opKind:"postfix",kind:q.OpenParen,bp:20},{opKind:"postfix",kind:q.OpenBracket,bp:20},{opKind:"infix",kind:q.Dot,lbp:18,rbp:19},{opKind:"infix",kind:q.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:q.Plus,bp:14},{opKind:"prefix",kind:q.Minus,bp:14},{opKind:"prefix",kind:q.Not,bp:14},{opKind:"infix",kind:q.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:q.Slash,lbp:12,rbp:13},{opKind:"infix",kind:q.Percent,lbp:12,rbp:13},{opKind:"infix",kind:q.Plus,lbp:10,rbp:11},{opKind:"infix",kind:q.Minus,lbp:10,rbp:11},{opKind:"infix",kind:q.Lt,lbp:8,rbp:9},{opKind:"infix",kind:q.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:q.Gt,lbp:8,rbp:9},{opKind:"infix",kind:q.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:q.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:q.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:q.And2,lbp:4,rbp:5},{opKind:"infix",kind:q.Or2,lbp:2,rbp:3}];function pb(t,r){const e=t.getPos(),n=t.getTokenKind();t.next(),t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next());const p=$g(t,r),d=p.loc.end;switch(n){case q.Plus:{if(p.type==="num")return nt("num",{value:p.value},e,d);throw new Wt("currently, sign is only supported for number literal.",e)}case q.Minus:{if(p.type==="num")return nt("num",{value:-1*p.value},e,d);throw new Wt("currently, sign is only supported for number literal.",e)}case q.Not:return nt("not",{expr:p},e,d);default:throw new Wt(`unexpected token: ${q[n]}`,e)}}function vb(t,r,e){const n=t.getPos(),p=t.getTokenKind();if(t.next(),t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next()),p===q.Dot){t.expect(q.Identifier);const d=t.getTokenValue();return t.next(),nt("prop",{target:r,name:d},n,t.getPos())}else{const d=$g(t,e),C=t.getPos();switch(p){case q.Hat:return nt("pow",{left:r,right:d},n,C);case q.Asterisk:return nt("mul",{left:r,right:d},n,C);case q.Slash:return nt("div",{left:r,right:d},n,C);case q.Percent:return nt("rem",{left:r,right:d},n,C);case q.Plus:return nt("add",{left:r,right:d},n,C);case q.Minus:return nt("sub",{left:r,right:d},n,C);case q.Lt:return nt("lt",{left:r,right:d},n,C);case q.LtEq:return nt("lteq",{left:r,right:d},n,C);case q.Gt:return nt("gt",{left:r,right:d},n,C);case q.GtEq:return nt("gteq",{left:r,right:d},n,C);case q.Eq2:return nt("eq",{left:r,right:d},n,C);case q.NotEq:return nt("neq",{left:r,right:d},n,C);case q.And2:return nt("and",{left:r,right:d},n,C);case q.Or2:return nt("or",{left:r,right:d},n,C);default:throw new Wt(`unexpected token: ${q[p]}`,n)}}}function gb(t,r){const e=t.getPos(),n=t.getTokenKind();switch(n){case q.OpenParen:return db(t,r);case q.OpenBracket:{t.next();const p=Lr(t,!1);return t.expect(q.CloseBracket),t.next(),nt("index",{target:r,index:p},e,t.getPos())}default:throw new Wt(`unexpected token: ${q[n]}`,e)}}function dw(t,r){const e=t.getPos();switch(t.getTokenKind()){case q.IfKeyword:{if(r)break;return yb(t)}case q.At:{if(r)break;return wb(t)}case q.MatchKeyword:{if(r)break;return mb(t)}case q.EvalKeyword:{if(r)break;return $b(t)}case q.ExistsKeyword:{if(r)break;return xb(t)}case q.Template:{const n=[];if(r)break;for(const[p,d]of t.getToken().children.entries())switch(d.kind){case q.TemplateStringElement:{const C=t.getToken().children[p+1]??t.lookahead(1);n.push(nt("str",{value:d.value},d.pos,C.pos));break}case q.TemplateExprElement:{const C=new hb(d.children),P=Lr(C,!1);C.expect(q.EOF),n.push(P);break}default:throw new Wt(`unexpected token: ${q[d.kind]}`,d.pos)}return t.next(),nt("tmpl",{tmpl:n},e,t.getPos())}case q.StringLiteral:{const n=t.getTokenValue();return t.next(),nt("str",{value:n},e,t.getPos())}case q.NumberLiteral:{const n=Number(t.getTokenValue());return t.next(),nt("num",{value:n},e,t.getPos())}case q.TrueKeyword:case q.FalseKeyword:{const n=t.is(q.TrueKeyword);return t.next(),nt("bool",{value:n},e,t.getPos())}case q.NullKeyword:return t.next(),nt("null",{},e,t.getPos());case q.OpenBrace:return bb(t,r);case q.OpenBracket:return Ab(t,r);case q.Identifier:{if(r)break;return yw(t)}case q.OpenParen:{t.next();const n=Lr(t,r);return t.expect(q.CloseParen),t.next(),n}}throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,e)}function db(t,r){const e=t.getPos(),n=[];for(t.expect(q.OpenParen),t.next(),t.is(q.NewLine)&&t.next();!t.is(q.CloseParen);)switch(n.push(Lr(t,!1)),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.CloseParen:break;default:throw new Wt("separator expected",t.getPos())}return t.expect(q.CloseParen),t.next(),nt("call",{target:r,args:n},e,t.getPos())}function yb(t){const r=t.getPos();t.expect(q.IfKeyword),t.next();const e=Lr(t,!1),n=Wu(t);t.is(q.NewLine)&&[q.ElifKeyword,q.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const p=[];for(;t.is(q.ElifKeyword);){t.next();const C=Lr(t,!1),P=Wu(t);t.is(q.NewLine)&&[q.ElifKeyword,q.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),p.push({cond:C,then:P})}let d;return t.is(q.ElseKeyword)&&(t.next(),d=Wu(t)),nt("if",{cond:e,then:n,elseif:p,else:d},r,t.getPos())}function wb(t){const r=t.getPos();t.expect(q.At),t.next();const e=ww(t);let n;t.is(q.Colon)&&(t.next(),n=vf(t));const p=Bc(t);return nt("fn",{params:e,retType:n,children:p},r,t.getPos())}function mb(t){const r=t.getPos();t.expect(q.MatchKeyword),t.next();const e=Lr(t,!1);t.expect(q.OpenBrace),t.next(),t.is(q.NewLine)&&t.next();const n=[];let p;if(t.is(q.CaseKeyword)){n.push($d(t));let d=Zc(t);for(;t.is(q.CaseKeyword);){if(!d)throw new Wt("separator expected",t.getPos());n.push($d(t)),d=Zc(t)}if(t.is(q.DefaultKeyword)){if(!d)throw new Wt("separator expected",t.getPos());p=xd(t),Zc(t)}}else t.is(q.DefaultKeyword)&&(p=xd(t),Zc(t));return t.expect(q.CloseBrace),t.next(),nt("match",{about:e,qs:n,default:p},r,t.getPos())}function $d(t){t.expect(q.CaseKeyword),t.next();const r=Lr(t,!1);t.expect(q.Arrow),t.next();const e=Wu(t);return{q:r,a:e}}function xd(t){return t.expect(q.DefaultKeyword),t.next(),t.expect(q.Arrow),t.next(),Wu(t)}function $b(t){const r=t.getPos();t.expect(q.EvalKeyword),t.next();const e=Bc(t);return nt("block",{statements:e},r,t.getPos())}function xb(t){const r=t.getPos();t.expect(q.ExistsKeyword),t.next();const e=yw(t);return nt("exists",{identifier:e},r,t.getPos())}function yw(t){const r=t.getPos(),e=[];for(;;){if(e.length>0)if(t.is(q.Colon)){if(t.getToken().hasLeftSpacing)throw new Wt("Cannot use spaces in a reference.",t.getPos());if(t.next(),t.getToken().hasLeftSpacing)throw new Wt("Cannot use spaces in a reference.",t.getPos())}else break;t.expect(q.Identifier),e.push(t.getTokenValue()),t.next()}return nt("identifier",{name:e.join(":")},r,t.getPos())}function bb(t,r){const e=t.getPos();for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();const n=new Map;for(;!t.is(q.CloseBrace);){t.expect(q.Identifier);const p=t.getTokenValue();t.next(),t.expect(q.Colon),t.next();const d=Lr(t,r);switch(n.set(p,d),t.getTokenKind()){case q.NewLine:case q.Comma:{for(t.next();t.is(q.NewLine);)t.next();break}case q.CloseBrace:break;default:throw new Wt("separator expected",t.getPos())}}return t.expect(q.CloseBrace),t.next(),nt("obj",{value:n},e,t.getPos())}function Ab(t,r){const e=t.getPos();for(t.expect(q.OpenBracket),t.next();t.is(q.NewLine);)t.next();const n=[];for(;!t.is(q.CloseBracket);)switch(n.push(Lr(t,r)),t.getTokenKind()){case q.NewLine:case q.Comma:{for(t.next();t.is(q.NewLine);)t.next();break}case q.CloseBracket:break;default:throw new Wt("separator expected",t.getPos())}return t.expect(q.CloseBracket),t.next(),nt("arr",{value:n},e,t.getPos())}function $g(t,r){let e;const n=t.getTokenKind(),p=Cp.find(d=>d.opKind==="prefix"&&d.kind===n);for(p!=null?e=pb(t,p.bp):e=dw(t,!1);;){t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next());const d=t.getTokenKind(),C=Cp.find(M=>M.opKind==="postfix"&&M.kind===d);if(C!=null){if(C.bp<r)break;if(!([q.OpenBracket,q.OpenParen].includes(d)&&t.getToken().hasLeftSpacing)){e=gb(t,e);continue}}const P=Cp.find(M=>M.opKind==="infix"&&M.kind===d);if(P!=null){if(P.lbp<r)break;e=vb(t,e,P.rbp);continue}break}return e}function xg(t){if(t.is(q.Identifier)){const r=t.getPos(),e=t.getTokenValue();return t.next(),nt("identifier",{name:e},r,t.getPos())}else return Lr(t,!1)}function ww(t){const r=[];for(t.expect(q.OpenParen),t.next(),t.is(q.NewLine)&&t.next();!t.is(q.CloseParen);){const e=xg(t);let n=!1,p;t.is(q.Question)?(t.next(),n=!0):t.is(q.Eq)&&(t.next(),p=Lr(t,!1));let d;switch(t.is(q.Colon)&&(t.next(),d=vf(t)),r.push({dest:e,optional:n,default:p,argType:d}),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.CloseParen:break;default:throw new Wt("separator expected",t.getPos())}}return t.expect(q.CloseParen),t.next(),r}function Bc(t){for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();const r=[];for(;!t.is(q.CloseBrace);)switch(r.push(Yh(t)),t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.CloseBrace:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}return t.expect(q.CloseBrace),t.next(),r}function vf(t){return t.is(q.At)?Cb(t):_b(t)}function Zc(t){switch(t.getTokenKind()){case q.NewLine:return t.next(),!0;case q.Comma:return t.next(),t.is(q.NewLine)&&t.next(),!0;default:return!1}}function Cb(t){const r=t.getPos();t.expect(q.At),t.next(),t.expect(q.OpenParen),t.next();const e=[];for(;!t.is(q.CloseParen);){if(e.length>0)switch(t.getTokenKind()){case q.Comma:{t.next();break}default:throw new Wt("separator expected",t.getPos())}const p=vf(t);e.push(p)}t.expect(q.CloseParen),t.next(),t.expect(q.Arrow),t.next();const n=vf(t);return nt("fnTypeSource",{params:e,result:n},r,t.getPos())}function _b(t){const r=t.getPos();let e;t.is(q.Identifier)?(e=t.getTokenValue(),t.next()):(t.expect(q.NullKeyword),t.next(),e="null");let n;return t.is(q.Lt)&&(t.next(),n=vf(t),t.expect(q.Gt),t.next()),nt("namedTypeSource",{name:e,inner:n},r,t.getPos())}function Yh(t){const r=t.getPos();switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:return mw(t);case q.At:{if(t.lookahead(1).kind===q.Identifier)return $w(t);break}case q.Out:return kb(t);case q.ReturnKeyword:return Sb(t);case q.OpenSharpBracket:return Tb(t);case q.EachKeyword:return Mb(t);case q.ForKeyword:return Eb(t);case q.LoopKeyword:return Fb(t);case q.DoKeyword:return Ob(t);case q.WhileKeyword:return Ib(t);case q.BreakKeyword:return t.next(),nt("break",{},r,t.getPos());case q.ContinueKeyword:return t.next(),nt("continue",{},r,t.getPos())}const e=Lr(t,!1),n=Rb(t,e);return n||e}function Pb(t){switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:return mw(t);case q.At:return $w(t);default:throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,t.getPos())}}function Wu(t){if(t.is(q.OpenBrace)){const r=t.getPos(),e=Bc(t);return nt("block",{statements:e},r,t.getPos())}else return Yh(t)}function mw(t){const r=t.getPos();let e;switch(t.getTokenKind()){case q.LetKeyword:{e=!1;break}case q.VarKeyword:{e=!0;break}default:throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,t.getPos())}t.next();const n=xg(t);let p;t.is(q.Colon)&&(t.next(),p=vf(t)),t.expect(q.Eq),t.next(),t.is(q.NewLine)&&t.next();const d=Lr(t,!1);return nt("def",{dest:n,varType:p,expr:d,mut:e,attr:[]},r,t.getPos())}function $w(t){const r=t.getPos();t.expect(q.At),t.next(),t.expect(q.Identifier);const e=t.getPos(),n=t.getTokenValue();t.next();const p=nt("identifier",{name:n},e,t.getPos()),d=ww(t);let C;t.is(q.Colon)&&(t.next(),C=vf(t));const P=Bc(t),M=t.getPos();return nt("def",{dest:p,expr:nt("fn",{params:d,retType:C,children:P},r,M),mut:!1,attr:[]},r,M)}function kb(t){const r=t.getPos();t.expect(q.Out),t.next();const e=Lr(t,!1);return cb("print",[e],r,t.getPos())}function Mb(t){const r=t.getPos();let e=!1;t.expect(q.EachKeyword),t.next(),t.is(q.OpenParen)&&(e=!0,t.next()),t.expect(q.LetKeyword),t.next();const n=xg(t);if(t.is(q.Comma))t.next();else throw new Wt("separator expected",t.getPos());const p=Lr(t,!1);e&&(t.expect(q.CloseParen),t.next());const d=Wu(t);return nt("each",{var:n,items:p,for:d},r,t.getPos())}function Eb(t){const r=t.getPos();let e=!1;if(t.expect(q.ForKeyword),t.next(),t.is(q.OpenParen)&&(e=!0,t.next()),t.is(q.LetKeyword)){t.next();const n=t.getPos();t.expect(q.Identifier);const p=t.getTokenValue();t.next();let d;if(t.is(q.Eq)?(t.next(),d=Lr(t,!1)):d=nt("num",{value:0},n,n),t.is(q.Comma))t.next();else throw new Wt("separator expected",t.getPos());const C=Lr(t,!1);e&&(t.expect(q.CloseParen),t.next());const P=Wu(t);return nt("for",{var:p,from:d,to:C,for:P},r,t.getPos())}else{const n=Lr(t,!1);e&&(t.expect(q.CloseParen),t.next());const p=Wu(t);return nt("for",{times:n,for:p},r,t.getPos())}}function Sb(t){const r=t.getPos();t.expect(q.ReturnKeyword),t.next();const e=Lr(t,!1);return nt("return",{expr:e},r,t.getPos())}function Tb(t){const r=[];for(;t.is(q.OpenSharpBracket);)r.push(Nb(t)),t.expect(q.NewLine),t.next();const e=Yh(t);if(e.type!=="def")throw new Wt("invalid attribute.",e.loc.start);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function Nb(t){const r=t.getPos();t.expect(q.OpenSharpBracket),t.next(),t.expect(q.Identifier);const e=t.getTokenValue();t.next();let n;if(!t.is(q.CloseBracket))n=Lr(t,!0);else{const p=t.getPos();n=nt("bool",{value:!0},p,p)}return t.expect(q.CloseBracket),t.next(),nt("attr",{name:e,value:n},r,t.getPos())}function Fb(t){const r=t.getPos();t.expect(q.LoopKeyword),t.next();const e=Bc(t);return nt("loop",{statements:e},r,t.getPos())}function Ob(t){const r=t.getPos();t.expect(q.DoKeyword),t.next();const e=Wu(t),n=t.getPos();t.expect(q.WhileKeyword),t.next();const p=Lr(t,!1),d=t.getPos();return nt("loop",{statements:[e,nt("if",{cond:nt("not",{expr:p},n,d),then:nt("break",{},d,d),elseif:[]},n,d)]},r,d)}function Ib(t){const r=t.getPos();t.expect(q.WhileKeyword),t.next();const e=Lr(t,!1),n=t.getPos(),p=Wu(t);return nt("loop",{statements:[nt("if",{cond:nt("not",{expr:e},r,n),then:nt("break",{},n,n),elseif:[]},r,n),p]},r,t.getPos())}function Rb(t,r){const e=t.getPos();switch(t.getTokenKind()){case q.Eq:{t.next();const n=Lr(t,!1);return nt("assign",{dest:r,expr:n},e,t.getPos())}case q.PlusEq:{t.next();const n=Lr(t,!1);return nt("addAssign",{dest:r,expr:n},e,t.getPos())}case q.MinusEq:{t.next();const n=Lr(t,!1);return nt("subAssign",{dest:r,expr:n},e,t.getPos())}default:return}}function jb(t){const r=[];for(;t.is(q.NewLine);)t.next();for(;!t.is(q.EOF);){switch(t.getTokenKind()){case q.Colon2:{r.push(xw(t));break}case q.Sharp3:{r.push(Db(t));break}default:{r.push(Yh(t));break}}switch(t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.EOF:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}}return r}function xw(t){const r=t.getPos();t.expect(q.Colon2),t.next(),t.expect(q.Identifier);const e=t.getTokenValue();t.next();const n=[];for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();for(;!t.is(q.CloseBrace);){switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:case q.At:{n.push(Pb(t));break}case q.Colon2:{n.push(xw(t));break}}switch(t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.CloseBrace:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}}return t.expect(q.CloseBrace),t.next(),nt("ns",{name:e,members:n},r,t.getPos())}function Db(t){const r=t.getPos();t.expect(q.Sharp3),t.next();let e=null;t.is(q.Identifier)&&(e=t.getTokenValue(),t.next());const n=Lr(t,!0);return nt("meta",{name:e,value:n},r,n.loc.end)}function Vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Vt(e.expr,r);break}case"return":{e.expr=Vt(e.expr,r);break}case"each":{e.items=Vt(e.items,r),e.for=Vt(e.for,r);break}case"for":{e.from!=null&&(e.from=Vt(e.from,r)),e.to!=null&&(e.to=Vt(e.to,r)),e.times!=null&&(e.times=Vt(e.times,r)),e.for=Vt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Vt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Vt(e.expr,r),e.dest=Vt(e.dest,r);break}case"not":{e.expr=Vt(e.expr,r);break}case"if":{e.cond=Vt(e.cond,r),e.then=Vt(e.then,r);for(const n of e.elseif)n.cond=Vt(n.cond,r),n.then=Vt(n.then,r);e.else!=null&&(e.else=Vt(e.else,r));break}case"fn":{for(const n of e.params)n.default&&(n.default=Vt(n.default,r));for(let n=0;n<e.children.length;n++)e.children[n]=Vt(e.children[n],r);break}case"match":{e.about=Vt(e.about,r);for(const n of e.qs)n.q=Vt(n.q,r),n.a=Vt(n.a,r);e.default!=null&&(e.default=Vt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Vt(e.statements[n],r);break}case"exists":{e.identifier=Vt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=Vt(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Vt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Vt(e.value[n],r);break}case"call":{e.target=Vt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Vt(e.args[n],r);break}case"index":{e.target=Vt(e.target,r),e.index=Vt(e.index,r);break}case"prop":{e.target=Vt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Vt(e.members[n],r);break}case"pow":case"mul":case"div":case"rem":case"add":case"sub":case"lt":case"lteq":case"gt":case"gteq":case"eq":case"neq":case"and":case"or":{e.left=Vt(e.left,r),e.right=Vt(e.right,r);break}}return e}const dc=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","yield","import","is","meta","module","namespace","new"];function zo(t,r){throw new Wt(`Reserved word "${t}" cannot be used as variable name.`,r.start)}function _p(t){return Vt(t,r=>{switch(r.type){case"null":{zo(r.type,r.loc);break}case"bool":{zo(`${r.value}`,r.loc);break}case"identifier":{dc.includes(r.name)&&zo(r.name,r.loc);break}}return r})}function Ub(t){switch(t.type){case"def":{_p(t.dest);break}case"ns":case"attr":case"identifier":case"prop":{dc.includes(t.name)&&zo(t.name,t.loc);break}case"meta":{t.name!=null&&dc.includes(t.name)&&zo(t.name,t.loc);break}case"each":{_p(t.var);break}case"for":{t.var!=null&&dc.includes(t.var)&&zo(t.var,t.loc);break}case"fn":{for(const r of t.params)_p(r.dest);break}case"obj":{for(const r of t.value.keys())dc.includes(r)&&zo(r,t.loc);break}}return t}function Bb(t){for(const r of t)Vt(r,Ub);return t}function bd(t){return{type:"simple",name:t}}function Lb(t,r){return{type:"generic",name:t,inners:r}}function Hb(t,r){return{type:"fn",params:t,result:r}}function uh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=uh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.params.map(n=>uh(n)).join(", "),e=uh(t.result);return`@(${r}) { ${e} }`}}}function Lf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return bd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Lf(t.inner):r=bd("any"),Lb(t.name,[r])}}throw new Wt(`Unknown type: '${uh(t)}'`,t.loc.start)}else{const r=t.params.map(e=>Lf(e));return Hb(r,Lf(t.result))}}function qb(t){switch(t.type){case"def":{t.varType!=null&&Lf(t.varType);break}case"fn":{for(const r of t.params)r.argType!=null&&Lf(r.argType);t.retType!=null&&Lf(t.retType);break}}return t}function Vb(t){for(const r of t)Vt(r,qb);return t}var Bu;let zb=(Bu=class{constructor(){fe(this,"plugins");this.plugins={validate:[Bb,Vb],transform:[]}}static parse(r){return Bu.instance==null&&(Bu.instance=new Bu),Bu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new fb(r);e=jb(n);for(const p of this.plugins.validate)e=p(e);for(const p of this.plugins.transform)e=p(e);return e}},fe(Bu,"instance"),Bu);const Kb="develop",Wb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let hv=[],lc=null;function Gb(t){return hv=zb.parse(t),JSON.stringify(hv,null,"	")}async function Jb(t){lc==null||lc.abort(),lc=new Vs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:uv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:uv(e.val,!0),print:!1});break}}});try{await lc.exec(hv)}catch(r){t.err(r)}}const Zb=Object.freeze(Object.defineProperty({__proto__:null,exec:Jb,parse:Gb,samples:Wb,version:Kb},Symbol.toStringTag,{value:"Module"}));function os(t,r,e){let n=e.value;return{configurable:!0,get(){const p=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:p}),p},set(p){n=p}}}let ep=class bw extends Error{constructor(e,n){super(e);fe(this,"name","AiScript");fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,bw)}},Qb=class extends ep{constructor(e){super(e.message??`${e}`,e);fe(this,"name","Internal")}},gf=class extends ep{constructor(e,n){super(e,n);fe(this,"name","Syntax")}},rr=class extends ep{constructor(e,n){super(e,n);fe(this,"name","Runtime")}},Ad=class extends rr{constructor(r,e){super(r,e)}},Xb=class extends rr{constructor(e,n){super(e,n);fe(this,"name","")}};var no=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let Ju=class pv{constructor(r=[],e,n,p){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});fe(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=p}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new pv(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const p=[e,...this.layerdStates];return new pv(p,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new rr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){const d=p.get(r);if(!d.isMutable)throw new rr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};no([os],Ju.prototype,"log",null);no([os],Ju.prototype,"onUpdated",null);no([os],Ju.prototype,"createChildScope",null);no([os],Ju.prototype,"createChildNamespaceScope",null);no([os],Ju.prototype,"get",null);no([os],Ju.prototype,"exists",null);no([os],Ju.prototype,"getAll",null);no([os],Ju.prototype,"add",null);no([os],Ju.prototype,"assign",null);let Qc;const Yb=new Uint8Array(16);function e1(){if(!Qc&&(Qc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qc(Yb)}const mn=[];for(let t=0;t<256;++t)mn.push((t+256).toString(16).slice(1));function t1(t,r=0){return mn[t[r+0]]+mn[t[r+1]]+mn[t[r+2]]+mn[t[r+3]]+"-"+mn[t[r+4]]+mn[t[r+5]]+"-"+mn[t[r+6]]+mn[t[r+7]]+"-"+mn[t[r+8]]+mn[t[r+9]]+"-"+mn[t[r+10]]+mn[t[r+11]]+mn[t[r+12]]+mn[t[r+13]]+mn[t[r+14]]+mn[t[r+15]]}const r1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Cd={randomUUID:r1};function s1(t,r,e){if(Cd.randomUUID&&!r&&!t)return Cd.randomUUID();t=t||{};const n=t.random||(t.rng||e1)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,t1(n)}const It={type:"null"},Js={type:"bool",value:!0},Zs={type:"bool",value:!1},je=t=>({type:"num",value:t}),zt=t=>({type:"str",value:t}),ef=t=>({type:"bool",value:t}),jh=t=>({type:"obj",value:t}),jr=t=>({type:"arr",value:t}),n1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),he=t=>({type:"fn",native:t}),a1=t=>({type:"return",value:t}),i1=()=>({type:"break",value:null}),l1=()=>({type:"continue",value:null}),u1=t=>t.type==="return"?t.value:t,vv=(t,r)=>({type:"error",value:t,info:r});function $a(t){if(t==null)throw new rr("Expect anything, but got nothing.")}function Pn(t){if(t==null)throw new rr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new rr(`Expect boolean, but got ${t.type}.`)}function Su(t){if(t==null)throw new rr("Expect function, but got nothing.");if(t.type!=="fn")throw new rr(`Expect function, but got ${t.type}.`)}function xr(t){if(t==null)throw new rr("Expect string, but got nothing.");if(t.type!=="str")throw new rr(`Expect string, but got ${t.type}.`)}function Pe(t){if(t==null)throw new rr("Expect number, but got nothing.");if(t.type!=="num")throw new rr(`Expect number, but got ${t.type}.`)}function Mu(t){if(t==null)throw new rr("Expect object, but got nothing.");if(t.type!=="obj")throw new rr(`Expect object, but got ${t.type}.`)}function Po(t){if(t==null)throw new rr("Expect array, but got nothing.");if(t.type!=="arr")throw new rr(`Expect array, but got ${t.type}.`)}function Pp(t){return t.type==="obj"}function Dh(t){return t.type==="arr"}function Hf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function gv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>gv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function dv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>dv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=dv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function yv(t){if(t===null)return It;if(typeof t=="boolean")return ef(t);if(typeof t=="string")return zt(t);if(typeof t=="number")return je(t);if(Array.isArray(t))return jr(t.map(r=>yv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,yv(n));return jh(r)}return It}function qf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const p of t.value)n.push(qf(p,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[p,d]of t.value)n.push(`${p}: ${qf(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const o1={version:"0.19.0"},f1=o1.version,c1=new TextEncoder,h1=new TextDecoder,p1={help:zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zt(f1),"Core:ai":zt("kawaii"),"Core:not":he(([t])=>(Pn(t),t.value?Zs:Js)),"Core:eq":he(([t,r])=>($a(t),$a(r),Hf(t,r)?Js:Zs)),"Core:neq":he(([t,r])=>($a(t),$a(r),Hf(t,r)?Zs:Js)),"Core:and":he(([t,r])=>(Pn(t),t.value?(Pn(r),r.value?Js:Zs):Zs)),"Core:or":he(([t,r])=>(Pn(t),t.value?Js:(Pn(r),r.value?Js:Zs))),"Core:add":he(([t,r])=>(Pe(t),Pe(r),je(t.value+r.value))),"Core:sub":he(([t,r])=>(Pe(t),Pe(r),je(t.value-r.value))),"Core:mul":he(([t,r])=>(Pe(t),Pe(r),je(t.value*r.value))),"Core:pow":he(([t,r])=>{Pe(t),Pe(r);const e=t.value**r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:div":he(([t,r])=>{Pe(t),Pe(r);const e=t.value/r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:mod":he(([t,r])=>(Pe(t),Pe(r),je(t.value%r.value))),"Core:gt":he(([t,r])=>(Pe(t),Pe(r),t.value>r.value?Js:Zs)),"Core:lt":he(([t,r])=>(Pe(t),Pe(r),t.value<r.value?Js:Zs)),"Core:gteq":he(([t,r])=>(Pe(t),Pe(r),t.value>=r.value?Js:Zs)),"Core:lteq":he(([t,r])=>(Pe(t),Pe(r),t.value<=r.value?Js:Zs)),"Core:type":he(([t])=>($a(t),zt(t.type))),"Core:to_str":he(([t])=>($a(t),zt(qf(t)))),"Core:range":he(([t,r])=>(Pe(t),Pe(r),t.value<r.value?jr(Array.from({length:r.value-t.value+1},(e,n)=>je(n+t.value))):t.value>r.value?jr(Array.from({length:t.value-r.value+1},(e,n)=>je(t.value-n))):jr([t]))),"Core:sleep":he(async([t])=>(Pe(t),await new Promise(r=>setTimeout(r,t.value)),It)),"Core:abort":he(async([t])=>{throw xr(t),new Xb(t.value)}),"Util:uuid":he(()=>zt(s1())),"Json:stringify":he(([t])=>($a(t),zt(JSON.stringify(dv(t))))),"Json:parse":he(([t])=>{xr(t);try{return yv(JSON.parse(t.value))}catch{return vv("not_json")}}),"Json:parsable":he(([t])=>{xr(t);try{JSON.parse(t.value)}catch{return ef(!1)}return ef(!0)}),"Date:now":he(()=>je(Date.now())),"Date:year":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":he(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":he(([t])=>(xr(t),je(new Date(t.value).getTime()))),"Date:to_iso_str":he(([t,r])=>{t&&Pe(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Pe(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let p;if(n===0)p="Z";else{const L=Math.sign(n),W=Math.floor(Math.abs(n)/60),ge=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+L*W),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const ie=n>0?"+":"-",pe=W.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");p=`${ie}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),T=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return zt(`${d}-${C}-${P}T${M}:${T}:${E}.${B}${p}`)}),"Math:Infinity":je(1/0),"Math:E":je(Math.E),"Math:LN2":je(Math.LN2),"Math:LN10":je(Math.LN10),"Math:LOG2E":je(Math.LOG2E),"Math:LOG10E":je(Math.LOG10E),"Math:PI":je(Math.PI),"Math:SQRT1_2":je(Math.SQRT1_2),"Math:SQRT2":je(Math.SQRT2),"Math:abs":he(([t])=>(Pe(t),je(Math.abs(t.value)))),"Math:acos":he(([t])=>(Pe(t),je(Math.acos(t.value)))),"Math:acosh":he(([t])=>(Pe(t),je(Math.acosh(t.value)))),"Math:asin":he(([t])=>(Pe(t),je(Math.asin(t.value)))),"Math:asinh":he(([t])=>(Pe(t),je(Math.asinh(t.value)))),"Math:atan":he(([t])=>(Pe(t),je(Math.atan(t.value)))),"Math:atanh":he(([t])=>(Pe(t),je(Math.atanh(t.value)))),"Math:atan2":he(([t,r])=>(Pe(t),Pe(r),je(Math.atan2(t.value,r.value)))),"Math:cbrt":he(([t])=>(Pe(t),je(Math.cbrt(t.value)))),"Math:ceil":he(([t])=>(Pe(t),je(Math.ceil(t.value)))),"Math:clz32":he(([t])=>(Pe(t),je(Math.clz32(t.value)))),"Math:cos":he(([t])=>(Pe(t),je(Math.cos(t.value)))),"Math:cosh":he(([t])=>(Pe(t),je(Math.cosh(t.value)))),"Math:exp":he(([t])=>(Pe(t),je(Math.exp(t.value)))),"Math:expm1":he(([t])=>(Pe(t),je(Math.expm1(t.value)))),"Math:floor":he(([t])=>(Pe(t),je(Math.floor(t.value)))),"Math:fround":he(([t])=>(Pe(t),je(Math.fround(t.value)))),"Math:hypot":he(([t])=>{Po(t);const r=[];for(const e of t.value)Pe(e),r.push(e.value);return je(Math.hypot(...r))}),"Math:imul":he(([t,r])=>(Pe(t),Pe(r),je(Math.imul(t.value,r.value)))),"Math:log":he(([t])=>(Pe(t),je(Math.log(t.value)))),"Math:log1p":he(([t])=>(Pe(t),je(Math.log1p(t.value)))),"Math:log10":he(([t])=>(Pe(t),je(Math.log10(t.value)))),"Math:log2":he(([t])=>(Pe(t),je(Math.log2(t.value)))),"Math:max":he(([t,r])=>(Pe(t),Pe(r),je(Math.max(t.value,r.value)))),"Math:min":he(([t,r])=>(Pe(t),Pe(r),je(Math.min(t.value,r.value)))),"Math:pow":he(([t,r])=>(Pe(t),Pe(r),je(Math.pow(t.value,r.value)))),"Math:round":he(([t])=>(Pe(t),je(Math.round(t.value)))),"Math:sign":he(([t])=>(Pe(t),je(Math.sign(t.value)))),"Math:sin":he(([t])=>(Pe(t),je(Math.sin(t.value)))),"Math:sinh":he(([t])=>(Pe(t),je(Math.sinh(t.value)))),"Math:sqrt":he(([t])=>{Pe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new rr("Invalid operation.");return je(r)}),"Math:tan":he(([t])=>(Pe(t),je(Math.tan(t.value)))),"Math:tanh":he(([t])=>(Pe(t),je(Math.tanh(t.value)))),"Math:trunc":he(([t])=>(Pe(t),je(Math.trunc(t.value)))),"Math:rnd":he(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):je(Math.random())),"Math:gen_rng":he(([t])=>{if($a(t),t.type!=="num"&&t.type!=="str")return It;const r=To(t.value.toString());return he(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?je(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):je(r()))}),"Num:to_hex":he(([t])=>(Pe(t),zt(t.value.toString(16)))),"Num:from_hex":he(([t])=>(xr(t),je(parseInt(t.value,16)))),"Str:lf":zt(`
`),"Str:lt":he(([t,r])=>(xr(t),xr(r),t.value<r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:gt":he(([t,r])=>(xr(t),xr(r),t.value>r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:from_codepoint":he(([t])=>(Pe(t),zt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":he(([t])=>(Po(t),zt(Array.from(t.value.map(r=>(Pe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":he(([t])=>(Po(t),zt(h1.decode(Uint8Array.from(t.value.map(r=>(Pe(r),r.value))))))),"Uri:encode_full":he(([t])=>(xr(t),zt(encodeURI(t.value)))),"Uri:encode_component":he(([t])=>(xr(t),zt(encodeURIComponent(t.value)))),"Uri:decode_full":he(([t])=>(xr(t),zt(decodeURI(t.value)))),"Uri:decode_component":he(([t])=>(xr(t),zt(decodeURIComponent(t.value)))),"Arr:create":he(([t,r])=>{Pe(t);try{return jr(Array(t.value).fill(r??It))}catch(e){throw t.value<0?new rr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new rr("Arr:create expected integer, got non-integer")}}),"Obj:keys":he(([t])=>(Mu(t),jr(Array.from(t.value.keys()).map(r=>zt(r))))),"Obj:vals":he(([t])=>(Mu(t),jr(Array.from(t.value.values())))),"Obj:kvs":he(([t])=>(Mu(t),jr(Array.from(t.value.entries()).map(([r,e])=>jr([zt(r),e]))))),"Obj:get":he(([t,r])=>(Mu(t),xr(r),t.value.get(r.value)??It)),"Obj:set":he(([t,r,e])=>(Mu(t),xr(r),$a(e),t.value.set(r.value,e),It)),"Obj:has":he(([t,r])=>(Mu(t),xr(r),ef(t.value.has(r.value)))),"Obj:copy":he(([t])=>(Mu(t),jh(new Map(t.value)))),"Obj:merge":he(([t,r])=>(Mu(t),Mu(r),jh(new Map([...t.value,...r.value])))),"Error:create":he(([t,r])=>(xr(t),vv(t.value,r))),"Async:interval":he(async([t,r,e],n)=>{Pe(t),Su(r),e&&(Pn(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),he(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":he(async([t,r],e)=>{Pe(t),Su(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),he(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},_d={num:{to_str:t=>he(async(r,e)=>zt(t.value.toString()))},str:{to_num:t=>he(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?It:je(n)}),to_arr:t=>he(async(r,e)=>jr(Qs(t.value).map(n=>zt(n)))),to_unicode_arr:t=>he(async(r,e)=>jr([...t.value].map(n=>zt(n)))),to_unicode_codepoint_arr:t=>he(async(r,e)=>jr([...t.value].map(n=>{const p=n.codePointAt(0);return je(p??n.charCodeAt(0))}))),to_char_arr:t=>he(async(r,e)=>jr(t.value.split("").map(n=>zt(n)))),to_charcode_arr:t=>he(async(r,e)=>jr(t.value.split("").map(n=>je(n.charCodeAt(0))))),to_utf8_byte_arr:t=>he(async(r,e)=>jr(Array.from(c1.encode(t.value)).map(n=>je(n)))),len:t=>je(Cf(t.value)),replace:t=>he(async([r,e],n)=>(xr(r),xr(e),zt(t.value.split(r.value).join(e.value)))),index_of:t=>he(async([r,e],n)=>{xr(r),e&&Pe(e);const p=e?e.value<0?t.value.length+e.value:e.value:void 0;return je(Pf(t.value,r.value,p))}),incl:t=>he(async([r],e)=>(xr(r),t.value.includes(r.value)?Js:Zs)),trim:t=>he(async(r,e)=>zt(t.value.trim())),upper:t=>he(async(r,e)=>zt(t.value.toUpperCase())),lower:t=>he(async(r,e)=>zt(t.value.toLowerCase())),split:t=>he(async([r],e)=>(r&&xr(r),jr(r?t.value.split(r?r.value:"").map(n=>zt(n)):Qs(t.value).map(n=>zt(n))))),slice:t=>he(async([r,e],n)=>(Pe(r),Pe(e),zt(_f(t.value,r.value,e.value)))),pick:t=>he(async([r],e)=>{Pe(r);const p=Qs(t.value)[r.value];return p?zt(p):It}),charcode_at:t=>he(([r],e)=>{Pe(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?It:je(n)}),codepoint_at:t=>he(([r],e)=>{Pe(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?It:je(n)}),starts_with:t=>he(async([r,e],n)=>{if(xr(r),!r.value)return Js;e&&Pe(e);const p=(e==null?void 0:e.value)??0;if(p<-t.value.length||p>t.value.length)return Zs;const d=p>=0?p:t.value.length+p;return t.value.startsWith(r.value,d)?Js:Zs}),ends_with:t=>he(async([r,e],n)=>{if(xr(r),!r.value)return Js;e&&Pe(e);const p=(e==null?void 0:e.value)??t.value.length;if(p<-t.value.length||p>t.value.length)return Zs;const d=p>=0?p:t.value.length+p;return t.value.endsWith(r.value,d)?Js:Zs}),pad_start:t=>he(([r,e],n)=>{Pe(r);const p=e?(xr(e),e.value):" ";return zt(t.value.padStart(r.value,p))}),pad_end:t=>he(([r,e],n)=>{Pe(r);const p=e?(xr(e),e.value):" ";return zt(t.value.padEnd(r.value,p))})},arr:{len:t=>je(t.value.length),push:t=>he(async([r],e)=>($a(r),t.value.push(r),t)),unshift:t=>he(async([r],e)=>($a(r),t.value.unshift(r),t)),pop:t=>he(async(r,e)=>t.value.pop()??It),shift:t=>he(async(r,e)=>t.value.shift()??It),concat:t=>he(async([r],e)=>(Po(r),jr(t.value.concat(r.value)))),slice:t=>he(async([r,e],n)=>(Pe(r),Pe(e),jr(t.value.slice(r.value,e.value)))),join:t=>he(async([r],e)=>(r&&xr(r),zt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>he(async([r],e)=>{Su(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,je(d)]));return jr(await Promise.all(n))}),filter:t=>he(async([r],e)=>{Su(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,je(p)]);Pn(C),C.value&&n.push(d)}return jr(n)}),reduce:t=>he(async([r,e],n)=>{Su(r);const p=e!=null;if(!p&&t.value.length===0)throw new rr("Reduce of empty array without initial value");let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,je(C)])}return d}),find:t=>he(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,je(n)]);if(Pn(d),d.value)return p}return It}),incl:t=>he(async([r],e)=>($a(r),t.value.some(n=>Hf(r,n))?Js:Zs)),index_of:t=>he(async([r,e],n)=>{if($a(r),e){Pe(e);const p=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>Hf(C,r));return je(d<0?d:d+p)}else return je(t.value.findIndex(p=>Hf(p,r)))}),reverse:t=>he(async(r,e)=>(t.value.reverse(),It)),copy:t=>he(async(r,e)=>jr([...t.value])),sort:t=>he(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=n(d.slice(0,P),C),T=n(d.slice(P),C),[E,B]=await Promise.all([M,T]);return p(E,B,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Pe(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return Su(r),Po(t),t.value=await n(t.value,r),t}),fill:t=>he(async([r,e,n],p)=>{const d=r??It,C=e&&(Pe(e),e.value),P=n&&(Pe(n),n.value);return t.value.fill(d,C,P),t}),repeat:t=>he(async([r],e)=>{Pe(r);try{return jr(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new rr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new rr("arr.repeat expected integer, got non-integer")}}),splice:t=>he(async([r,e,n],p)=>{Pe(r);const d=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(Pe(e),e.value):t.value.length-d,P=n!=null?(Po(n),n.value):[],M=t.value.splice(d,C,...P);return jr(M)}),flat:t=>he(async([r],e)=>{if(r=r??je(1),Pe(r),!Number.isInteger(r.value))throw new rr("arr.flat expected integer, got non-integer");if(r.value<0)throw new rr("arr.flat expected non-negative number, got negative");const n=(d,C,P)=>{if(C===0){P.push(...d);return}for(const M of d)Dh(M)?n(M.value,C-1,P):P.push(M)},p=[];return n(t.value,r.value,p),jr(p)}),flat_map:t=>he(async([r],e)=>{Su(r);const n=t.value.map(async(d,C)=>{const P=await e.call(r,[d,je(C)]);return Dh(P)?P.value:P}),p=await Promise.all(n);return jr(p.flat())}),every:t=>he(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,je(n)]);if(Pn(d),!d.value)return Zs}return Js}),some:t=>he(async([r],e)=>{Su(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,je(n)]);if(Pn(d),d.value)return Js}return Zs}),insert:t=>he(async([r,e],n)=>(Pe(r),$a(e),t.value.splice(r.value,0,e),It)),remove:t=>he(async([r],e)=>(Pe(r),t.value.splice(r.value,1)[0]??It)),at:t=>he(async([r,e],n)=>(Pe(r),t.value.at(r.value)??e??It))},error:{name:t=>zt(t.value),info:t=>t.info??It}};function v1(t,r){if(Object.hasOwn(_d,t.type)){const e=_d[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new rr(`No such prop (${r}) in ${t.type}.`)}else throw new rr(`Cannot read prop of ${t.type}. (reading ${r})`)}const g1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ma=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const Aw=300,d1=Aw-1;let Un=class{constructor(r,e={}){fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);fe(this,"vars",{});this.opts=e;const n={print:he(([p])=>{$a(p),this.opts.out&&this.opts.out(p)}),readline:he(async p=>{const d=p[0];if(xr(d),this.opts.in==null)return It;const C=await this.opts.in(d.value);return zt(C)})};this.vars=Object.fromEntries(Object.entries({...r,...p1,...n}).map(([p,d])=>[p,g1.const(d)])),this.scope=new Ju([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),vv("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof ep?this.opts.err(r):this.opts.err(new Qb(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const p of r.members)switch(p.type){case"def":{if(p.mut)throw new Error("Namespaces cannot include mutable variable: "+p.name);const d={isMutable:p.mut,value:await this._eval(p.expr,n)};n.add(p.name,d);break}case"ns":break;default:throw new Error("invalid ns member type: "+p.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??It;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]??It});const p=r.scope.createChildScope(n);return u1(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return It;if(this.stepCount%Aw===d1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new rr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Su(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(Pn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(Pn(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return It}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(Hf(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):It}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return It}case"for":{if(r.times){const n=await this._eval(r.times,e);Pe(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);Pe(n),Pe(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:je(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return It}case"each":{const n=await this._eval(r.items,e);Po(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:p}]])));if(d.type==="break")break;if(d.type==="return")return d}return It}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,{isMutable:r.mut,value:n}),It}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),It}case"addAssign":{const n=await this._eval(r.dest,e);Pe(n);const p=await this._eval(r.expr,e);return Pe(p),await this.assign(e,r.dest,je(n.value+p.value)),It}case"subAssign":{const n=await this._eval(r.dest,e);Pe(n);const p=await this._eval(r.expr,e);return Pe(p),await this.assign(e,r.dest,je(n.value-p.value)),It}case"null":return It;case"bool":return ef(r.value);case"num":return je(r.value);case"str":return zt(r.value);case"arr":return jr(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return jh(n)}case"prop":{const n=await this._eval(r.target,e);return Pp(n)?n.value.has(r.name)?n.value.get(r.name):It:v1(n,r.name)}case"index":{const n=await this._eval(r.target,e),p=await this._eval(r.index,e);if(Dh(n)){Pe(p);const d=n.value[p.value];if(d===void 0)throw new Ad(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}else{if(Pp(n))return xr(p),n.value.has(p.value)?n.value.get(p.value):It;throw new rr(`Cannot read prop (${qf(p)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return Pn(n),ef(!n.value)}case"fn":return n1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return ef(e.exists(r.identifier.name));case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);n+=qf(d)}return zt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),a1(n)}case"break":return this.log("block:break",{scope:e.name}),i1();case"continue":return this.log("block:continue",{scope:e.name}),l1();case"ns":return It;case"meta":return It;case"and":{const n=await this._eval(r.left,e);if(Pn(n),n.value){const p=await this._eval(r.right,e);return Pn(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(Pn(n),n.value)return n;{const p=await this._eval(r.right,e);return Pn(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=It;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Dh(p)){if(Pe(d),p.value[d.value]===void 0)throw new Ad(`Index out of range. index: ${d.value} max: ${p.value.length-1}`);p.value[d.value]=n}else if(Pp(p))xr(d),p.value.set(d.value,n);else throw new rr(`Cannot read prop (${qf(d)}) of ${p.type}.`)}else if(e.type==="prop"){const p=await this._eval(e.target,r);Mu(p),p.value.set(e.name,n)}else if(e.type==="arr")Po(n),await Promise.all(e.value.map((p,d)=>this.assign(r,p,n.value[d]??It)));else if(e.type==="obj")Mu(n),await Promise.all([...e.value].map(([p,d])=>this.assign(r,d,n.value.get(p)??It)));else throw new rr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ma([os],Un.prototype,"exec",null);Ma([os],Un.prototype,"execFn",null);Ma([os],Un.prototype,"execFnSimple",null);Ma([os],Un.prototype,"handleError",null);Ma([os],Un.prototype,"log",null);Ma([os],Un.prototype,"collectNs",null);Ma([os],Un.prototype,"collectNsMember",null);Ma([os],Un.prototype,"_fn",null);Ma([os],Un.prototype,"_eval",null);Ma([os],Un.prototype,"_run",null);Ma([os],Un.prototype,"registerAbortHandler",null);Ma([os],Un.prototype,"unregisterAbortHandler",null);Ma([os],Un.prototype,"abort",null);Ma([os],Un.prototype,"assign",null);Ma([os],Un,"collectMetadata",null);function y1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function tf(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,tf.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}y1(tf,Error);function kp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}tf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=kp("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+kp("",p.column-1," ")+kp("",B,"^")}else r+=`
 at `+C}return r};tf.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Pd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:tr,Main:yi},d=tr,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Hr="[",Yt=".",Sr="if",ir="elif",_r="else",Jr="match",nr="=>",Zr="*",ar="eval",Pr="exists",J="`",ee='"',ce="'",Ce='\\"',ve="\\'",Ae="true",Re="false",Ee="null",Se="@",$e="@(",it="<",qe=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,ot=/^[%*-+\-\/<>\^]/,Pt=/^[^`{]/,xt=/^[{}`]/,Ut=/^[+\-]/,yt=/^[1-9]/,lt=/^[0-9]/,vr=/^[,;]/,cs=/^[A-Z_]/i,is=/^[A-Z0-9_]/i,Ct=/^[\r\n]/,Rt=/^[ \t\r\n]/,En=/^[ \t]/,gr=F(),el=R("//",!1),tl=R("/*",!1),lr=R("*/",!1),Bt=R("(",!1),Qr=R(")",!1),qn=R("::",!1),kt=R("{",!1),ft=R("}",!1),Tr=R("###",!1),Gt=R("let",!1),st=R(":",!1),Lt=R("=",!1),bs=R("var",!1),Ht=R("<:",!1),qt=R("#[",!1),Xr=R("]",!1),Da=R("each",!1),Nr=R(",",!1),hs=R("for",!1),Fs=R("return",!1),ct=_t([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=R("loop",!1),Ys=R("break",!1),Fr=R("continue",!1),Or=R("+=",!1),rl=R("-=",!1),Ua=R("\\",!1),sl=R("||",!1),nl=R("&&",!1),Ba=R("==",!1),La=R("!=",!1),al=R("<=",!1),il=R(">=",!1),ll=_t(["%",["*","+"],"-","/","<",">","^"],!1,!1),ul=R("!",!1),Vn=R("[",!1),en=R(".",!1),zn=R("if",!1),Ha=R("elif",!1),ol=R("else",!1),qa=R("match",!1),Os=R("=>",!1),fl=R("*",!1),cl=R("eval",!1),hl=R("exists",!1),As=R("`",!1),Is=_t(["`","{"],!0,!1),Kn=_t(["{","}","`"],!1,!1),tn=R('"',!1),rn=R("'",!1),pl=R('\\"',!1),sn=R("\\'",!1),ps=_t(["+","-"],!1,!1),Rs=_t([["1","9"]],!1,!1),Ar=_t([["0","9"]],!1,!1),nn=R("true",!1),an=R("false",!1),ln=R("null",!1),vs=_t([",",";"],!1,!1),un=R("@",!1),js=R("@(",!1),Va=R("<",!1),er=R(">",!1),za=_t([["A","Z"],"_"],!1,!0),dr=_t([["A","Z"],["0","9"],"_"],!1,!0),vl=R(`\r
`,!1),on=_t(["\r",`
`],!1,!1),gl=_t([" ","	","\r",`
`],!1,!1),Ds=_t([" ","	"],!1,!1),dl=function(f){return f.join("")},Wn=function(){return o()},yl=function(){return o()},Ka=function(){return" ".repeat(o().length)},wl=function(){return o().replace(/[^\n]/g," ")},ml=function(f){return f??[]},Wa=function(f,g){return g},$l=function(f,g){return[f,...g]},Ga=function(f,g){return g},xl=function(f,g){return[f,...g]},Ja=function(f,g){return g},bl=function(f,g){return[f,...g]},Za=function(f){return f},Al=function(f,g){return ne("ns",{name:f,members:g})},Gn=function(f,g){return ne("meta",{name:f,value:g})},Cl=function(f){return ne("meta",{name:null,value:f})},Jn=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},_l=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},Qa=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},Pl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},kl=function(f,g,b){return ne("each",{var:f,items:g,for:b})},Ml=function(f,g,b){return ne("each",{var:f,items:g,for:b})},El=function(f,g){return g},Sl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Tl=function(f,g){return g},Nl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Fl=function(f,g){return ne("for",{times:f,for:g})},Ol=function(f,g){return ne("for",{times:f,for:g})},Il=function(f){return ne("return",{expr:f})},Rl=function(f){return ne("loop",{statements:f})},jl=function(){return ne("break",{})},Dl=function(){return ne("continue",{})},Ul=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Xa=function(f,g,b){return{op:g,term:b}},Bl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op.value),operatorLocs:g.map(b=>b.op.loc)})},Ll=function(){const f=X();return{value:o(),loc:{start:f.start.offset,end:f.end.offset-1}}},Hl=function(f){return ne("not",{expr:f})},ql=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},Vl=function(f){return ne("callChain",{args:f??[]})},Zn=function(f,g){return g},zl=function(f,g){return[f,...g]},Ya=function(f){return ne("indexChain",{index:f})},Kl=function(f){return ne("propChain",{name:f})},Wl=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Gl=function(f,g){return[f,...g]},ei=function(f,g){return{cond:f,then:g}},Jl=function(f){return f},Qn=function(f,g,b){return{q:g,a:b}},Zl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},Ql=function(f){return ne("block",{statements:f})},Xl=function(f){return ne("exists",{identifier:f})},Yl=function(f){return ne("identifier",{name:f})},eu=function(f){return ne("tmpl",{tmpl:f})},ti=function(f){return f.join("")},ri=function(f){return f},si=function(f){return ne("str",{value:f.join("")})},ni=function(f){return f},tu=function(f){return ne("str",{value:f.join("")})},ru=function(){return'"'},ai=function(){return"'"},su=function(){return ne("num",{value:parseFloat(o())})},ii=function(){return ne("num",{value:parseFloat(o())})},li=function(){return ne("num",{value:parseInt(o(),10)})},nu=function(){return ne("num",{value:parseInt(o(),10)})},ui=function(){return ne("bool",{value:!0})},au=function(){return ne("bool",{value:!1})},iu=function(){return ne("null",{})},oi=function(f,g){return{k:f,v:g}},lu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},fi=function(f){return f},uu=function(f){return ne("arr",{value:f})},ou=function(f,g){return{name:f,argType:g}},ci=function(f,g){return[f,...g]},fu=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},hi=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Xn=function(f){return f},cu=function(f){return ne("arr",{value:f})},Yn=function(f,g){return{k:f,v:g}},hu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},pu=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},pi=function(f,g){return[f,...g]},vu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},vi=function(f){return ne("namedTypeSource",{name:f,inner:null})},gi=function(){return o()},gu=function(){return o()},di=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,Cs=[{line:1,column:1}],yr=c,fn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,N={},Yr;if(r.startRule){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function o(){return t.substring(te,c)}function X(){return ue(te,c)}function O(f,g){throw g=g!==void 0?g:ue(te,c),du(f,g)}function R(f,g){return{type:"literal",text:f,ignoreCase:g}}function _t(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function V(){return{type:"end"}}function Us(f){var g=Cs[f],b;if(g)return g;if(f>=Cs.length)b=Cs.length-1;else for(b=f;!Cs[--b];);for(g=Cs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return Cs[f]=g,g}function ue(f,g,b){var w=Us(f),a=Us(g),l={source:n,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,fn=[]),fn.push(f))}function du(f,g){return new tf(f,null,null,g)}function de(f,g,b){return new tf(tf.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=N[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Bs();b!==e;)g.push(b),b=Bs();return te=f,g=dl(g),f=g,N[w]={nextPos:c,result:f},f}function Bs(){var f,g,b=c*77+1,w=N[b];return w?(c=w.nextPos,w.result):(f=c,g=Pi(),g!==e&&(te=f,g=Wn()),f=g,f===e&&(f=c,g=gn(),g!==e&&(te=f,g=yl()),f=g,f===e&&(f=U(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),N[b]={nextPos:c,result:f},f)}function U(){var f,g,b,w,a,l,$=c*77+2,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(el)),g!==e){for(b=[],w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ka()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(tl)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===M?(w=M,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=wl()):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w,a,l=c*77+3,$=N[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=cn(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=ml(b),N[l]={nextPos:c,result:f},f}function cn(){var f,g,b,w,a,l,$,v,s=c*77+4,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=ea(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ea(),v!==e?(te=w,w=Wa(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ea(),v!==e?(te=w,w=Wa(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=$l(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function j(){var f,g,b,w,a,l,$,v,s=c*77+5,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=hn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=hn(),v!==e?(te=w,w=Ga(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=hn(),v!==e?(te=w,w=Ga(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=xl(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a,l,$,v,s=c*77+6,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Ps(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=Ps(),v!==e?(te=w,w=Ja(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=Ps(),v!==e?(te=w,w=Ja(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=bl(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function ea(){var f,g=c*77+7,b=N[g];return b?(c=b.nextPos,b.result):(f=Cr(),f===e&&(f=Xe(),f===e&&(f=Ps())),N[g]={nextPos:c,result:f},f)}function hn(){var f,g=c*77+8,b=N[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=Cr())),N[g]={nextPos:c,result:f},f)}function Ps(){var f,g=c*77+9,b=N[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=ks(),f===e&&(f=ts(),f===e&&(f=We(),f===e&&(f=Ls(),f===e&&(f=wi(),f===e&&(f=mi(),f===e&&(f=yu(),f===e&&(f=$i(),f===e&&(f=wu(),f===e&&(f=et()))))))))))),N[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=N[g];return b?(c=b.nextPos,b.result):(f=mu(),f===e&&(f=es()),N[g]={nextPos:c,result:f},f)}function es(){var f,g=c*77+11,b=N[g];return b?(c=b.nextPos,b.result):(f=ns(),f===e&&(f=Cu(),f===e&&(f=xu(),f===e&&(f=pn()))),N[g]={nextPos:c,result:f},f)}function pn(){var f,g,b,w,a,l,$=c*77+12,v=N[$];if(v)return c=v.nextPos,v.result;if(f=na(),f===e&&(f=bu(),f===e&&(f=_i(),f===e&&(f=Pi(),f===e&&(f=gn(),f===e&&(f=la(),f===e&&(f=yn(),f===e&&(f=fa(),f===e&&(f=ca(),f===e&&(f=Ei(),f===e&&(f=$u(),f===e&&(f=Hs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=T,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Za(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ir(){var f,g=c*77+13,b=N[g];return b?(c=b.nextPos,b.result):(f=la(),f===e&&(f=gn(),f===e&&(f=yn(),f===e&&(f=ga(),f===e&&(f=da(),f===e&&(f=fa()))))),N[g]={nextPos:c,result:f},f)}function Cr(){var f,g,b,w,a,l,$,v,s,u,y=c*77+14,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===B?(g=B,c+=2):(g=e,i===0&&D(qn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=L,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(v=j(),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=W,c++):(u=e,i===0&&D(ft)),u!==e?(te=f,f=Al(w,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Tr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Ir(),l!==e?(te=f,f=Gn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Tr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Ir(),w!==e?(te=f,f=Cl(w)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function gs(){var f,g,b,w,a,l,$,v,s,u=c*77+16,y=N[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=et(),s!==e?(te=f,f=Jn(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===Z?(g=Z,c+=3):(g=e,i===0&&D(bs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=et(),s!==e?(te=f,f=_l(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[u]={nextPos:c,result:f},f}function ks(){var f,g,b,w,a=c*77+17,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(g=K,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=Qa(w)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function We(){var f,g,b,w,a,l,$,v=c*77+18,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,2)===G?(g=G,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Ir(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(Xr)),$!==e?(te=f,f=Pl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[v]={nextPos:c,result:f},f}function Ls(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+19,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===ie?(a=ie,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();for(t.charCodeAt(c)===44?(s=Y,c++):(s=e,i===0&&D(Nr)),s===e&&(s=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e)if(t.charCodeAt(c)===41?(h=E,c++):(h=e,i===0&&D(Qr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=kl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ie?(w=ie,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(y=[],h=k(),h!==e)for(;h!==e;)y.push(h),h=k();else y=e;y!==e?(h=ur(),h!==e?(te=f,f=Ml(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A=c*77+20,S=N[A];if(S)return c=S.nextPos,S.result;if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===ie?(a=ie,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=be,c++):(u=e,i===0&&D(Lt)),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();h=et(),h!==e?(te=s,s=El($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&D(Nr)),u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=E,c++):(x=e,i===0&&D(Qr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=Sl($,s,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ie?(w=ie,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(v=c,t.charCodeAt(c)===61?(s=be,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=et(),y!==e?(te=v,v=Tl(l,y)):(c=v,v=e)}else c=v,v=e;for(v===e&&(v=null),t.charCodeAt(c)===44?(s=Y,c++):(s=e,i===0&&D(Nr)),s===e&&(s=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=Nl(l,v,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ur(),v!==e?(te=f,f=Fl(a,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Ol(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return N[A]={nextPos:c,result:f},f}function ts(){var f,g,b,w,a,l=c*77+21,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Fs)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=Il(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[l]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a,l,$,v,s=c*77+22,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();t.charCodeAt(c)===125?(v=W,c++):(v=e,i===0&&D(ft)),v!==e?(te=f,f=Rl(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function yu(){var f,g,b,w,a=c*77+23,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Ys)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=jl()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a=c*77+24,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===ke?(g=ke,c+=8):(g=e,i===0&&D(Fr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Dl()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function wu(){var f,g,b,w,a,l,$=c*77+25,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Or)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(rl)),w===e&&(t.charCodeAt(c)===61?(w=be,c++):(w=e,i===0&&D(Lt)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Ul(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function mu(){var f,g,b,w,a,l,$,v,s=c*77+26,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=es(),g!==e){for(b=[],w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],v=rs();v!==e;)$.push(v),v=rs();v=es(),v!==e?(te=w,w=Xa(g,l,v)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],v=rs();v!==e;)$.push(v),v=rs();v=es(),v!==e?(te=w,w=Xa(g,l,v)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Bl(g,b)):(c=f,f=e)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function rs(){var f,g,b,w=c*77+27,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=Ge(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),N[w]={nextPos:c,result:f},f)}function xi(){var f,g,b=c*77+28,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===At?(g=At,c+=2):(g=e,i===0&&D(sl)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(nl)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ba)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(La)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(al)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(il)),g===e&&(g=t.charAt(c),ot.test(g)?c++:(g=e,i===0&&D(ll)))))))),g!==e&&(te=f,g=Ll()),f=g,N[b]={nextPos:c,result:f},f)}function $u(){var f,g,b,w=c*77+29,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(ul)),g!==e?(b=et(),b!==e?(te=f,f=Hl(b)):(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function xu(){var f,g,b,w,a=c*77+30,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,g=pn(),g!==e){if(b=[],w=bi(),w===e&&(w=ta(),w===e&&(w=Ai())),w!==e)for(;w!==e;)b.push(w),w=bi(),w===e&&(w=ta(),w===e&&(w=Ai()));else b=e;b!==e?(te=f,f=ql(g,b)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function bi(){var f,g,b,w,a,l,$=c*77+31,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===40?(g=T,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ss(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Vl(w)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ss(){var f,g,b,w,a,l,$=c*77+32,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=zl(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ta(){var f,g,b,w,a,l,$=c*77+33,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=Ya(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ai(){var f,g,b,w=c*77+34,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(en)),g!==e?(b=tt(),b!==e?(te=f,f=Kl(b)):(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function ns(){var f,g,b,w,a,l,$,v,s,u,y=c*77+35,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Sr?(g=Sr,c+=2):(g=e,i===0&&D(zn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,v=[],s=k(),s!==e)for(;s!==e;)v.push(s),s=k();else v=e;if(v!==e?(s=ra(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),v=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=Ci(),u!==e?v=u:(c=v,v=e)):(c=v,v=e),v===e&&(v=null),te=f,f=Wl(w,l,$,v)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ra(){var f,g,b,w,a,l,$=c*77+36,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=sa(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=sa(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=sa(),l!==e?w=l:(c=w,w=e)}te=f,f=Gl(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function sa(){var f,g,b,w,a,l,$,v=c*77+37,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(Ha)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=ei(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return N[v]={nextPos:c,result:f},f}function Ci(){var f,g,b,w,a,l=c*77+38,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(ol)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Jl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[l]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A,S,I=c*77+39,H=N[I];if(H)return c=H.nextPos,H.result;if(f=c,t.substr(c,5)===Jr?(g=Jr,c+=5):(g=e,i===0&&D(qa)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=L,c++):($=e,i===0&&D(kt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();if(s=[],u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(y=Zr,c++):(y=e,i===0&&D(fl)),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();t.charCodeAt(c)===125?(h=W,c++):(h=e,i===0&&D(ft)),h!==e?(te=f,f=Zl(a,s,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return N[I]={nextPos:c,result:f},f}function bu(){var f,g,b,w,a,l,$,v,s=c*77+40,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ar?(g=ar,c+=4):(g=e,i===0&&D(cl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();t.charCodeAt(c)===125?(v=W,c++):(v=e,i===0&&D(ft)),v!==e?(te=f,f=Ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a=c*77+41,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Pr?(g=Pr,c+=6):(g=e,i===0&&D(hl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Hs(),w!==e?(te=f,f=Xl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function Hs(){var f,g,b=c*77+42,w=N[b];return w?(c=w.nextPos,w.result):(f=c,g=Pu(),g!==e&&(te=f,g=Yl(g)),f=g,N[b]={nextPos:c,result:f},f)}function Pi(){var f,g,b,w,a,l,$=c*77+43,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===96?(g=J,c++):(g=e,i===0&&D(As)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=J,c++):(w=e,i===0&&D(As)),w!==e?(te=f,f=eu(b)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ki(){var f,g,b,w,a,l,$=c*77+44,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=W,c++):(l=e,i===0&&D(ft)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=vn(),b!==e)for(;b!==e;)g.push(b),b=vn();else g=e;g!==e&&(te=f,g=ti(g)),f=g}return N[$]={nextPos:c,result:f},f}function vn(){var f,g=c*77+45,b=N[g];return b?(c=b.nextPos,b.result):(f=Au(),f===e&&(f=t.charAt(c),Pt.test(f)?c++:(f=e,i===0&&D(Is))),N[g]={nextPos:c,result:f},f)}function Au(){var f,g,b,w=c*77+46,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=t.charAt(c),xt.test(b)?c++:(b=e,i===0&&D(Kn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function gn(){var f,g,b,w,a,l,$=c*77+47,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===34?(g=ee,c++):(g=e,i===0&&D(tn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=ee,c++):(w=e,i===0&&D(tn)),w!==e?(te=f,f=si(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=ce,c++):(g=e,i===0&&D(rn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=ce,c++):(w=e,i===0&&D(rn)),w!==e?(te=f,f=tu(b)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function aa(){var f,g,b=c*77+48,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Ce?(g=Ce,c+=2):(g=e,i===0&&D(pl)),g!==e&&(te=f,g=ru()),f=g,N[b]={nextPos:c,result:f},f)}function ia(){var f,g,b=c*77+49,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ve?(g=ve,c+=2):(g=e,i===0&&D(sn)),g!==e&&(te=f,g=ai()),f=g,N[b]={nextPos:c,result:f},f)}function la(){var f,g=c*77+50,b=N[g];return b?(c=b.nextPos,b.result):(f=dn(),f===e&&(f=ua()),N[g]={nextPos:c,result:f},f)}function dn(){var f,g,b,w,a,l,$,v=c*77+51,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Rs)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(en)),a!==e){if(l=[],$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar));else l=e;l!==e?(te=f,f=su()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(en)),w!==e){if(a=[],l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar));else a=e;a!==e?(te=f,f=ii()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[v]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l=c*77+52,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Rs)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;w!==e?(te=f,f=li()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e?(te=f,f=nu()):(c=f,f=e)),N[l]={nextPos:c,result:f},f}function yn(){var f,g=c*77+53,b=N[g];return b?(c=b.nextPos,b.result):(f=Mi(),f===e&&(f=oa()),N[g]={nextPos:c,result:f},f)}function Mi(){var f,g,b,w,a=c*77+54,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(nn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ui()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function oa(){var f,g,b,w,a=c*77+55,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Re?(g=Re,c+=5):(g=e,i===0&&D(an)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=au()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function fa(){var f,g,b,w,a=c*77+56,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ee?(g=Ee,c+=4):(g=e,i===0&&D(ln)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=iu()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function ca(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+57,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=W,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=lu(w)):(c=f,f=e)}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function Ei(){var f,g,b,w,a,l,$,v,s,u,y=c*77+58,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=uu(w)):(c=f,f=e)}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ha(){var f,g,b,w,a,l,$,v=c*77+59,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=ou(g,b)}else c=f,f=e;return N[v]={nextPos:c,result:f},f}function pa(){var f,g,b,w,a,l,$=c*77+60,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=ha(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ci(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function va(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A,S,I=c*77+61,H=N[I];if(H)return c=H.nextPos,H.result;if(f=c,t.charCodeAt(c)===64?(g=Se,c++):(g=e,i===0&&D(un)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=T,c++):(l=e,i===0&&D(Bt)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(v=pa(),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=E,c++):(u=e,i===0&&D(Qr)),u!==e){for(y=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=pe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?y=_:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=L,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=_s(),_===e&&(_=null),A=[],S=k();S!==e;)A.push(S),S=k();t.charCodeAt(c)===125?(S=W,c++):(S=e,i===0&&D(ft)),S!==e?(te=f,f=fu(b,w,a,v,y,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[I]={nextPos:c,result:f},f}function Cu(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m=c*77+62,_=N[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(js)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=pa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=c,v=[],s=k();s!==e;)v.push(s),s=k();if(t.charCodeAt(c)===58?(s=pe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=wr(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),v=[],s=k();s!==e;)v.push(s),s=k();if(t.charCodeAt(c)===123?(s=L,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();for(y=_s(),y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=W,c++):(x=e,i===0&&D(ft)),x!==e?(te=f,f=hi(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[m]={nextPos:c,result:f},f}function ga(){var f,g,b,w,a,l,$,v,s,u,y=c*77+63,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Ir(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Ir(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function da(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+64,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Ir(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Ir(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=W,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=N[g];return b?(c=b.nextPos,b.result):(f=_u(),f===e&&(f=Si()),N[g]={nextPos:c,result:f},f)}function _u(){var f,g,b,w,a,l,$,v,s,u,y=c*77+66,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(js)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ya(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.substr(c,2)===nr?(v=nr,c+=2):(v=e,i===0&&D(Os)),v!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=f,f=pu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ya(){var f,g,b,w,a,l,$=c*77+67,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=pi(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Si(){var f,g,b,w,a,l,$,v,s=c*77+68,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=it,c++):(w=e,i===0&&D(Va)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],v=De();v!==e;)$.push(v),v=De();t.charCodeAt(c)===62?(v=qe,c++):(v=e,i===0&&D(er)),v!==e?(te=f,f=vu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=vi(g)),f=g),N[s]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),cs.test(g)?c++:(g=e,i===0&&D(za)),g!==e){for(b=[],w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=gi()}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function Pu(){var f,g,b,w,a,l,$=c*77+70,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=gu()}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ms(){var f,g,b,w,a,l=c*77+71,$=N[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=Y,c++):(b=e,i===0&&D(Nr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return N[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=_s(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=W,c++):(l=e,i===0&&D(ft)),l!==e?(te=f,f=di(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),N[$]={nextPos:c,result:f},f}function Ge(){var f,g=c*77+73,b=N[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(vl)),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(on))),N[g]={nextPos:c,result:f},f)}function Ti(){var f,g,b=c*77+74,w=N[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=Ge()),N[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=N[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(gl)),N[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=N[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),En.test(f)?c++:(f=e,i===0&&D(Ds)),N[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=X();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Yr=d(),r.peg$library)return{peg$result:Yr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:fn,peg$maxFailPos:yr};if(Yr!==e&&c===t.length)return Yr;throw Yr!==e&&c<t.length&&D(V()),de(fn,yr<t.length?t.charAt(yr):null,yr<t.length?ue(yr,yr+1):ue(yr,yr))}const w1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function m1(t){return w1.includes(t.type)}function Cw(t){return"chain"in t&&t.chain!==null}function $1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function x1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function b1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Mt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Mt(e.expr,r);break}case"return":{e.expr=Mt(e.expr,r);break}case"each":{e.items=Mt(e.items,r),e.for=Mt(e.for,r);break}case"for":{e.from!=null&&(e.from=Mt(e.from,r)),e.to!=null&&(e.to=Mt(e.to,r)),e.times!=null&&(e.times=Mt(e.times,r)),e.for=Mt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Mt(e.expr,r),e.dest=Mt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Mt(e.operands[n],r);break}case"not":{e.expr=Mt(e.expr,r);break}case"if":{e.cond=Mt(e.cond,r),e.then=Mt(e.then,r);for(const n of e.elseif)n.cond=Mt(n.cond,r),n.then=Mt(n.then,r);e.else!=null&&(e.else=Mt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Mt(e.children[n],r);break}case"match":{e.about=Mt(e.about,r);for(const n of e.qs)n.q=Mt(n.q,r),n.a=Mt(n.a,r);e.default!=null&&(e.default=Mt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Mt(e.statements[n],r);break}case"exists":{e.identifier=Mt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=Mt(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Mt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Mt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"indexChain":{e.index=Mt(e.index,r);break}case"call":{e.target=Mt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Mt(e.args[n],r);break}case"index":{e.target=Mt(e.target,r),e.index=Mt(e.index,r);break}case"prop":{e.target=Mt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Mt(e.members[n],r);break}case"or":case"and":{e.left=Mt(e.left,r),e.right=Mt(e.right,r);break}}if(Cw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Mt(e.chain[n],r);return e}const Mp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Ep(t){throw new gf(`Reserved word "${t}" cannot be used as variable name.`)}function A1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Mp.includes(t.name)&&Ep(t.name);break}case"meta":{t.name!=null&&Mp.includes(t.name)&&Ep(t.name);break}case"fn":{for(const r of t.args)Mp.includes(r.name)&&Ep(r.name);break}}return t}function C1(t){for(const r of t)Mt(r,A1);return t}function kd(t){return{type:"simple",name:t}}function _1(t,r){return{type:"generic",name:t,inners:r}}function P1(t,r){return{type:"fn",args:t,result:r}}function oh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=oh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>oh(n)).join(", "),e=oh(t.result);return`@(${r}) { ${e} }`}}}function Vf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return kd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Vf(t.inner):r=kd("any"),_1(t.name,[r])}}throw new gf(`Unknown type: '${oh(t)}'`)}else{const r=t.args.map(e=>Vf(e));return P1(r,Vf(t.result))}}function k1(t){switch(t.type){case"def":{t.varType!=null&&Vf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Vf(r.argType);t.retType!=null&&Vf(t.retType);break}}return t}function M1(t){for(const r of t)Mt(r,k1);return t}function fh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=fh(n.expr.children)),r.push(n);else{if(e.length>0)throw new gf("invalid attribute.");switch(n.type){case"fn":{n.children=fh(n.children);break}case"block":{n.statements=fh(n.statements);break}}r.push(n)}if(e.length>0)throw new gf("invalid attribute.");return r}function E1(t){if(m1(t)&&Cw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=$1(n,p.args,p.loc);break}case"indexChain":{n=x1(n,p.index,p.loc);break}case"propChain":{n=b1(n,p.name,p.loc);break}}return n}return t}function S1(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],E1);return t}function ch(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function _w(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return ch(t,r,e);{const{left:n,right:p,info:d}=t;return ch(n,_w(p,r,e),d)}}function Ko(t){if(t.type!=="infixTree")return t;if(t.info.mapFn)return t.info.mapFn(t);{const r=Ko(t.left),e=Ko(t.right);return{type:"call",target:{type:"identifier",name:t.info.func,loc:t.info.opLoc},args:[r,e],loc:{start:r.loc.start,end:e.loc.end}}}}const T1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>{const r=Ko(t.left),e=Ko(t.right);return{type:"and",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3},"||":{mapFn:t=>{const r=Ko(t.left),e=Ko(t.right);return{type:"or",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3}};function N1(t){const r=t.operators.map((n,p)=>{const d=T1[n];if(d==null)throw new gf(`No such operator: ${n}.`);return{...d,opLoc:t.operatorLocs[p]}});let e=ch(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=_w(e,t.operands[2+n],r[1+n]);return Ko(e)}function F1(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],e=>e.type==="infix"?N1(e):e);return t}var Lu;let O1=(Lu=class{constructor(){fe(this,"plugins");this.plugins={validate:[C1,M1],transform:[fh,S1,F1]}}static parse(r){return Lu.instance==null&&(Lu.instance=new Lu),Lu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Pd(r,{startRule:"Preprocess"});e=Pd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new gf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new gf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},fe(Lu,"instance"),Lu);const I1="0.19.0",R1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let wv=[],uc=null;function j1(t){return wv=O1.parse(t),JSON.stringify(wv,null,"	")}async function D1(t){uc==null||uc.abort(),uc=new Un({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:gv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:gv(e.val,!0),print:!1});break}}});try{await uc.exec(wv)}catch(r){t.err(r)}}const U1=Object.freeze(Object.defineProperty({__proto__:null,exec:D1,parse:j1,samples:R1,version:I1},Symbol.toStringTag,{value:"Module"}));function fs(t,r,e){let n=e.value;return{configurable:!0,get(){const p=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:p}),p},set(p){n=p}}}let tp=class Pw extends Error{constructor(e,n){super(e);fe(this,"name","AiScript");fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Pw)}},B1=class extends tp{constructor(e){super(e.message??`${e}`,e);fe(this,"name","Internal")}},df=class extends tp{constructor(e,n){super(e,n);fe(this,"name","Syntax")}},pr=class extends tp{constructor(e,n){super(e,n);fe(this,"name","Runtime")}},Md=class extends pr{constructor(r,e){super(r,e)}};class L1 extends pr{constructor(e,n){super(e,n);fe(this,"name","")}}var ao=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let Zu=class mv{constructor(r=[],e,n,p){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});fe(this,"nsName");this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>"),this.nsName=p}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new mv(n,this,e)}createChildNamespaceScope(r,e=new Map,n){const p=[e,...this.layerdStates];return new mv(p,this,n,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new pr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){const d=p.get(r);if(!d.isMutable)throw new pr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};ao([fs],Zu.prototype,"log",null);ao([fs],Zu.prototype,"onUpdated",null);ao([fs],Zu.prototype,"createChildScope",null);ao([fs],Zu.prototype,"createChildNamespaceScope",null);ao([fs],Zu.prototype,"get",null);ao([fs],Zu.prototype,"exists",null);ao([fs],Zu.prototype,"getAll",null);ao([fs],Zu.prototype,"add",null);ao([fs],Zu.prototype,"assign",null);let Xc;const H1=new Uint8Array(16);function q1(){if(!Xc&&(Xc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xc(H1)}const $n=[];for(let t=0;t<256;++t)$n.push((t+256).toString(16).slice(1));function V1(t,r=0){return $n[t[r+0]]+$n[t[r+1]]+$n[t[r+2]]+$n[t[r+3]]+"-"+$n[t[r+4]]+$n[t[r+5]]+"-"+$n[t[r+6]]+$n[t[r+7]]+"-"+$n[t[r+8]]+$n[t[r+9]]+"-"+$n[t[r+10]]+$n[t[r+11]]+$n[t[r+12]]+$n[t[r+13]]+$n[t[r+14]]+$n[t[r+15]]}const z1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ed={randomUUID:z1};function K1(t,r,e){if(Ed.randomUUID&&!r&&!t)return Ed.randomUUID();t=t||{};const n=t.random||(t.rng||q1)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,V1(n)}const Jt={type:"null"},Na={type:"bool",value:!0},Fa={type:"bool",value:!1},Ue=t=>({type:"num",value:t}),fr=t=>({type:"str",value:t}),rf=t=>({type:"bool",value:t}),Uh=t=>({type:"obj",value:t}),ls=t=>({type:"arr",value:t}),W1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),we=t=>({type:"fn",native:t}),G1=t=>({type:"return",value:t}),J1=()=>({type:"break",value:null}),Z1=()=>({type:"continue",value:null}),Q1=t=>t.type==="return"?t.value:t,$v=(t,r)=>({type:"error",value:t,info:r});function Oa(t){if(t==null)throw new pr("Expect anything, but got nothing.")}function kn(t){if(t==null)throw new pr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new pr(`Expect boolean, but got ${t.type}.`)}function Du(t){if(t==null)throw new pr("Expect function, but got nothing.");if(t.type!=="fn")throw new pr(`Expect function, but got ${t.type}.`)}function $s(t){if(t==null)throw new pr("Expect string, but got nothing.");if(t.type!=="str")throw new pr(`Expect string, but got ${t.type}.`)}function Ne(t){if(t==null)throw new pr("Expect number, but got nothing.");if(t.type!=="num")throw new pr(`Expect number, but got ${t.type}.`)}function Eu(t){if(t==null)throw new pr("Expect object, but got nothing.");if(t.type!=="obj")throw new pr(`Expect object, but got ${t.type}.`)}function sf(t){if(t==null)throw new pr("Expect array, but got nothing.");if(t.type!=="arr")throw new pr(`Expect array, but got ${t.type}.`)}function Sp(t){return t.type==="obj"}function Sd(t){return t.type==="arr"}function zf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function xv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>xv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function bv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>bv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=bv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Av(t){if(t===null)return Jt;if(typeof t=="boolean")return rf(t);if(typeof t=="string")return fr(t);if(typeof t=="number")return Ue(t);if(Array.isArray(t))return ls(t.map(r=>Av(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Av(n));return Uh(r)}return Jt}function Kf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const p of t.value)n.push(Kf(p,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[p,d]of t.value)n.push(`${p}: ${Kf(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const X1={version:"0.18.0"},Y1=X1.version,eA=new TextEncoder,tA=new TextDecoder,rA={help:fr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":fr(Y1),"Core:ai":fr("kawaii"),"Core:not":we(([t])=>(kn(t),t.value?Fa:Na)),"Core:eq":we(([t,r])=>(Oa(t),Oa(r),zf(t,r)?Na:Fa)),"Core:neq":we(([t,r])=>(Oa(t),Oa(r),zf(t,r)?Fa:Na)),"Core:and":we(([t,r])=>(kn(t),t.value?(kn(r),r.value?Na:Fa):Fa)),"Core:or":we(([t,r])=>(kn(t),t.value?Na:(kn(r),r.value?Na:Fa))),"Core:add":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value+r.value))),"Core:sub":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value-r.value))),"Core:mul":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value*r.value))),"Core:pow":we(([t,r])=>{Ne(t),Ne(r);const e=t.value**r.value;if(isNaN(e))throw new pr("Invalid operation.");return Ue(e)}),"Core:div":we(([t,r])=>{Ne(t),Ne(r);const e=t.value/r.value;if(isNaN(e))throw new pr("Invalid operation.");return Ue(e)}),"Core:mod":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value%r.value))),"Core:gt":we(([t,r])=>(Ne(t),Ne(r),t.value>r.value?Na:Fa)),"Core:lt":we(([t,r])=>(Ne(t),Ne(r),t.value<r.value?Na:Fa)),"Core:gteq":we(([t,r])=>(Ne(t),Ne(r),t.value>=r.value?Na:Fa)),"Core:lteq":we(([t,r])=>(Ne(t),Ne(r),t.value<=r.value?Na:Fa)),"Core:type":we(([t])=>(Oa(t),fr(t.type))),"Core:to_str":we(([t])=>(Oa(t),fr(Kf(t)))),"Core:range":we(([t,r])=>(Ne(t),Ne(r),t.value<r.value?ls(Array.from({length:r.value-t.value+1},(e,n)=>Ue(n+t.value))):t.value>r.value?ls(Array.from({length:t.value-r.value+1},(e,n)=>Ue(t.value-n))):ls([t]))),"Core:sleep":we(async([t])=>(Ne(t),await new Promise(r=>setTimeout(r,t.value)),Jt)),"Core:abort":we(async([t])=>{throw $s(t),new L1(t.value)}),"Util:uuid":we(()=>fr(K1())),"Json:stringify":we(([t])=>(Oa(t),fr(JSON.stringify(bv(t))))),"Json:parse":we(([t])=>{$s(t);try{return Av(JSON.parse(t.value))}catch{return $v("not_json")}}),"Json:parsable":we(([t])=>{$s(t);try{JSON.parse(t.value)}catch{return rf(!1)}return rf(!0)}),"Date:now":we(()=>Ue(Date.now())),"Date:year":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":we(([t])=>($s(t),Ue(new Date(t.value).getTime()))),"Date:to_iso_str":we(([t,r])=>{t&&Ne(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ne(r);const n=(r==null?void 0:r.value)??-e.getTimezoneOffset();let p;if(n===0)p="Z";else{const L=Math.sign(n),W=Math.floor(Math.abs(n)/60),ge=Math.abs(n)%60;e.setUTCHours(e.getUTCHours()+L*W),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const ie=n>0?"+":"-",pe=W.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");p=`${ie}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),M=e.getUTCHours().toString().padStart(2,"0"),T=e.getUTCMinutes().toString().padStart(2,"0"),E=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return fr(`${d}-${C}-${P}T${M}:${T}:${E}.${B}${p}`)}),"Math:Infinity":Ue(1/0),"Math:E":Ue(Math.E),"Math:LN2":Ue(Math.LN2),"Math:LN10":Ue(Math.LN10),"Math:LOG2E":Ue(Math.LOG2E),"Math:LOG10E":Ue(Math.LOG10E),"Math:PI":Ue(Math.PI),"Math:SQRT1_2":Ue(Math.SQRT1_2),"Math:SQRT2":Ue(Math.SQRT2),"Math:abs":we(([t])=>(Ne(t),Ue(Math.abs(t.value)))),"Math:acos":we(([t])=>(Ne(t),Ue(Math.acos(t.value)))),"Math:acosh":we(([t])=>(Ne(t),Ue(Math.acosh(t.value)))),"Math:asin":we(([t])=>(Ne(t),Ue(Math.asin(t.value)))),"Math:asinh":we(([t])=>(Ne(t),Ue(Math.asinh(t.value)))),"Math:atan":we(([t])=>(Ne(t),Ue(Math.atan(t.value)))),"Math:atanh":we(([t])=>(Ne(t),Ue(Math.atanh(t.value)))),"Math:atan2":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.atan2(t.value,r.value)))),"Math:cbrt":we(([t])=>(Ne(t),Ue(Math.cbrt(t.value)))),"Math:ceil":we(([t])=>(Ne(t),Ue(Math.ceil(t.value)))),"Math:clz32":we(([t])=>(Ne(t),Ue(Math.clz32(t.value)))),"Math:cos":we(([t])=>(Ne(t),Ue(Math.cos(t.value)))),"Math:cosh":we(([t])=>(Ne(t),Ue(Math.cosh(t.value)))),"Math:exp":we(([t])=>(Ne(t),Ue(Math.exp(t.value)))),"Math:expm1":we(([t])=>(Ne(t),Ue(Math.expm1(t.value)))),"Math:floor":we(([t])=>(Ne(t),Ue(Math.floor(t.value)))),"Math:fround":we(([t])=>(Ne(t),Ue(Math.fround(t.value)))),"Math:hypot":we(([t])=>{sf(t);const r=[];for(const e of t.value)Ne(e),r.push(e.value);return Ue(Math.hypot(...r))}),"Math:imul":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.imul(t.value,r.value)))),"Math:log":we(([t])=>(Ne(t),Ue(Math.log(t.value)))),"Math:log1p":we(([t])=>(Ne(t),Ue(Math.log1p(t.value)))),"Math:log10":we(([t])=>(Ne(t),Ue(Math.log10(t.value)))),"Math:log2":we(([t])=>(Ne(t),Ue(Math.log2(t.value)))),"Math:max":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.max(t.value,r.value)))),"Math:min":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.min(t.value,r.value)))),"Math:pow":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.pow(t.value,r.value)))),"Math:round":we(([t])=>(Ne(t),Ue(Math.round(t.value)))),"Math:sign":we(([t])=>(Ne(t),Ue(Math.sign(t.value)))),"Math:sin":we(([t])=>(Ne(t),Ue(Math.sin(t.value)))),"Math:sinh":we(([t])=>(Ne(t),Ue(Math.sinh(t.value)))),"Math:sqrt":we(([t])=>{Ne(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new pr("Invalid operation.");return Ue(r)}),"Math:tan":we(([t])=>(Ne(t),Ue(Math.tan(t.value)))),"Math:tanh":we(([t])=>(Ne(t),Ue(Math.tanh(t.value)))),"Math:trunc":we(([t])=>(Ne(t),Ue(Math.trunc(t.value)))),"Math:rnd":we(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ue(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ue(Math.random())),"Math:gen_rng":we(([t])=>{if(Oa(t),t.type!=="num"&&t.type!=="str")return Jt;const r=To(t.value.toString());return we(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ue(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ue(r()))}),"Num:to_hex":we(([t])=>(Ne(t),fr(t.value.toString(16)))),"Num:from_hex":we(([t])=>($s(t),Ue(parseInt(t.value,16)))),"Str:lf":fr(`
`),"Str:lt":we(([t,r])=>($s(t),$s(r),t.value<r.value?Ue(-1):t.value===r.value?Ue(0):Ue(1))),"Str:gt":we(([t,r])=>($s(t),$s(r),t.value>r.value?Ue(-1):t.value===r.value?Ue(0):Ue(1))),"Str:from_codepoint":we(([t])=>(Ne(t),fr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":we(([t])=>(sf(t),fr(Array.from(t.value.map(r=>(Ne(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":we(([t])=>(sf(t),fr(tA.decode(Uint8Array.from(t.value.map(r=>(Ne(r),r.value))))))),"Arr:create":we(([t,r])=>{Ne(t);try{return ls(Array(t.value).fill(r??Jt))}catch(e){throw t.value<0?new pr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new pr("Arr:create expected integer, got non-integer")}}),"Obj:keys":we(([t])=>(Eu(t),ls(Array.from(t.value.keys()).map(r=>fr(r))))),"Obj:vals":we(([t])=>(Eu(t),ls(Array.from(t.value.values())))),"Obj:kvs":we(([t])=>(Eu(t),ls(Array.from(t.value.entries()).map(([r,e])=>ls([fr(r),e]))))),"Obj:get":we(([t,r])=>(Eu(t),$s(r),t.value.get(r.value)??Jt)),"Obj:set":we(([t,r,e])=>(Eu(t),$s(r),Oa(e),t.value.set(r.value,e),Jt)),"Obj:has":we(([t,r])=>(Eu(t),$s(r),rf(t.value.has(r.value)))),"Obj:copy":we(([t])=>(Eu(t),Uh(new Map(t.value)))),"Obj:merge":we(([t,r])=>(Eu(t),Eu(r),Uh(new Map([...t.value,...r.value])))),"Error:create":we(([t,r])=>($s(t),$v(t.value,r))),"Async:interval":we(async([t,r,e],n)=>{Ne(t),Du(r),e&&(kn(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),we(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":we(async([t,r],e)=>{Ne(t),Du(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),we(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},Td={num:{to_str:t=>we(async(r,e)=>fr(t.value.toString()))},str:{to_num:t=>we(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Jt:Ue(n)}),to_arr:t=>we(async(r,e)=>ls(Qs(t.value).map(n=>fr(n)))),to_unicode_arr:t=>we(async(r,e)=>ls([...t.value].map(n=>fr(n)))),to_unicode_codepoint_arr:t=>we(async(r,e)=>ls([...t.value].map(n=>{const p=n.codePointAt(0);return Ue(p??n.charCodeAt(0))}))),to_char_arr:t=>we(async(r,e)=>ls(t.value.split("").map(n=>fr(n)))),to_charcode_arr:t=>we(async(r,e)=>ls(t.value.split("").map(n=>Ue(n.charCodeAt(0))))),to_utf8_byte_arr:t=>we(async(r,e)=>ls(Array.from(eA.encode(t.value)).map(n=>Ue(n)))),len:t=>Ue(Cf(t.value)),replace:t=>we(async([r,e],n)=>($s(r),$s(e),fr(t.value.split(r.value).join(e.value)))),index_of:t=>we(async([r,e],n)=>{$s(r),e&&Ne(e);const p=e?e.value<0?t.value.length+e.value:e.value:void 0;return Ue(Pf(t.value,r.value,p))}),incl:t=>we(async([r],e)=>($s(r),t.value.includes(r.value)?Na:Fa)),trim:t=>we(async(r,e)=>fr(t.value.trim())),upper:t=>we(async(r,e)=>fr(t.value.toUpperCase())),lower:t=>we(async(r,e)=>fr(t.value.toLowerCase())),split:t=>we(async([r],e)=>(r&&$s(r),ls(r?t.value.split(r?r.value:"").map(n=>fr(n)):Qs(t.value).map(n=>fr(n))))),slice:t=>we(async([r,e],n)=>(Ne(r),Ne(e),fr(_f(t.value,r.value,e.value)))),pick:t=>we(async([r],e)=>{Ne(r);const p=Qs(t.value)[r.value];return p?fr(p):Jt}),charcode_at:t=>we(([r],e)=>{Ne(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Jt:Ue(n)}),codepoint_at:t=>we(([r],e)=>{Ne(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?Jt:Ue(n)})},arr:{len:t=>Ue(t.value.length),push:t=>we(async([r],e)=>(Oa(r),t.value.push(r),t)),unshift:t=>we(async([r],e)=>(Oa(r),t.value.unshift(r),t)),pop:t=>we(async(r,e)=>t.value.pop()??Jt),shift:t=>we(async(r,e)=>t.value.shift()??Jt),concat:t=>we(async([r],e)=>(sf(r),ls(t.value.concat(r.value)))),slice:t=>we(async([r,e],n)=>(Ne(r),Ne(e),ls(t.value.slice(r.value,e.value)))),join:t=>we(async([r],e)=>(r&&$s(r),fr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>we(async([r],e)=>{Du(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,Ue(d)]));return ls(await Promise.all(n))}),filter:t=>we(async([r],e)=>{Du(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,Ue(p)]);kn(C),C.value&&n.push(d)}return ls(n)}),reduce:t=>we(async([r,e],n)=>{Du(r);const p=e!=null;let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,Ue(C)])}return d}),find:t=>we(async([r],e)=>{Du(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Ue(n)]);if(kn(d),d.value)return p}return Jt}),incl:t=>we(async([r],e)=>(Oa(r),t.value.some(n=>zf(r,n))?Na:Fa)),index_of:t=>we(async([r,e],n)=>{if(Oa(r),e){Ne(e);const p=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>zf(C,r));return Ue(d<0?d:d+p)}else return Ue(t.value.findIndex(p=>zf(p,r)))}),reverse:t=>we(async(r,e)=>(t.value.reverse(),Jt)),copy:t=>we(async(r,e)=>ls([...t.value])),sort:t=>we(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=await n(d.slice(0,P),C),T=await n(d.slice(P),C);return p(M,T,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Ne(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return Du(r),sf(t),t.value=await n(t.value,r),t}),fill:t=>we(async([r,e,n],p)=>{const d=r??Jt,C=e&&(Ne(e),e.value),P=n&&(Ne(n),n.value);return t.value.fill(d,C,P),t}),repeat:t=>we(async([r],e)=>{Ne(r);try{return ls(Array(r.value).fill(t.value).flat())}catch(n){throw r.value<0?new pr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?n:new pr("arr.repeat expected integer, got non-integer")}}),every:t=>we(async([r],e)=>{Du(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Ue(n)]);if(kn(d),!d.value)return Fa}return Na}),some:t=>we(async([r],e)=>{Du(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Ue(n)]);if(kn(d),d.value)return Na}return Fa})},error:{name:t=>fr(t.value),info:t=>t.info??Jt}};function sA(t,r){if(Object.hasOwn(Td,t.type)){const e=Td[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new pr(`No such prop (${r}) in ${t.type}.`)}else throw new pr(`Cannot read prop of ${t.type}. (reading ${r})`)}const nA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ea=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const kw=300,aA=kw-1;let Bn=class{constructor(r,e={}){fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);fe(this,"vars",{});this.opts=e;const n={print:we(([p])=>{Oa(p),this.opts.out&&this.opts.out(p)}),readline:we(async p=>{const d=p[0];if($s(d),this.opts.in==null)return Jt;const C=await this.opts.in(d.value);return fr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...rA,...n}).map(([p,d])=>[p,nA.const(d)])),this.scope=new Zu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),$v("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof tp?this.opts.err(r):this.opts.err(new B1(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const n of r)switch(n.type){case"ns":{await this.collectNsMember(n,e);break}}}async collectNsMember(r,e=this.scope){const n=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,n);for(const p of r.members)switch(p.type){case"def":{if(p.mut)throw new Error("Namespaces cannot include mutable variable: "+p.name);const d={isMutable:p.mut,value:await this._eval(p.expr,n)};n.add(p.name,d);break}case"ns":break;default:throw new Error("invalid ns member type: "+p.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Jt;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const p=r.scope.createChildScope(n);return Q1(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return Jt;if(this.stepCount%kw===aA&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new pr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Du(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(kn(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(kn(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Jt}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(zf(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):Jt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Jt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ne(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);Ne(n),Ne(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ue(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return Jt}case"each":{const n=await this._eval(r.items,e);sf(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:p}]])));if(d.type==="break")break;if(d.type==="return")return d}return Jt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,{isMutable:r.mut,value:n}),Jt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Jt}case"addAssign":{const n=await this._eval(r.dest,e);Ne(n);const p=await this._eval(r.expr,e);return Ne(p),await this.assign(e,r.dest,Ue(n.value+p.value)),Jt}case"subAssign":{const n=await this._eval(r.dest,e);Ne(n);const p=await this._eval(r.expr,e);return Ne(p),await this.assign(e,r.dest,Ue(n.value-p.value)),Jt}case"null":return Jt;case"bool":return rf(r.value);case"num":return Ue(r.value);case"str":return fr(r.value);case"arr":return ls(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return Uh(n)}case"prop":{const n=await this._eval(r.target,e);return Sp(n)?n.value.has(r.name)?n.value.get(r.name):Jt:sA(n,r.name)}case"index":{const n=await this._eval(r.target,e),p=await this._eval(r.index,e);if(Sd(n)){Ne(p);const d=n.value[p.value];if(d===void 0)throw new Md(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}else{if(Sp(n))return $s(p),n.value.has(p.value)?n.value.get(p.value):Jt;throw new pr(`Cannot read prop (${Kf(p)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return kn(n),rf(!n.value)}case"fn":return W1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return rf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);n+=Kf(d)}return fr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),G1(n)}case"break":return this.log("block:break",{scope:e.name}),J1();case"continue":return this.log("block:continue",{scope:e.name}),Z1();case"ns":return Jt;case"meta":return Jt;case"and":{const n=await this._eval(r.left,e);if(kn(n),n.value){const p=await this._eval(r.right,e);return kn(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(kn(n),n.value)return n;{const p=await this._eval(r.right,e);return kn(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Jt;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Sd(p)){if(Ne(d),p.value[d.value]===void 0)throw new Md(`Index out of range. index: ${d.value} max: ${p.value.length-1}`);p.value[d.value]=n}else if(Sp(p))$s(d),p.value.set(d.value,n);else throw new pr(`Cannot read prop (${Kf(d)}) of ${p.type}.`)}else if(e.type==="prop"){const p=await this._eval(e.target,r);Eu(p),p.value.set(e.name,n)}else if(e.type==="arr")sf(n),await Promise.all(e.value.map((p,d)=>this.assign(r,p,n.value[d]??Jt)));else if(e.type==="obj")Eu(n),await Promise.all([...e.value].map(([p,d])=>this.assign(r,d,n.value.get(p)??Jt)));else throw new pr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ea([fs],Bn.prototype,"exec",null);Ea([fs],Bn.prototype,"execFn",null);Ea([fs],Bn.prototype,"execFnSimple",null);Ea([fs],Bn.prototype,"handleError",null);Ea([fs],Bn.prototype,"log",null);Ea([fs],Bn.prototype,"collectNs",null);Ea([fs],Bn.prototype,"collectNsMember",null);Ea([fs],Bn.prototype,"_fn",null);Ea([fs],Bn.prototype,"_eval",null);Ea([fs],Bn.prototype,"_run",null);Ea([fs],Bn.prototype,"registerAbortHandler",null);Ea([fs],Bn.prototype,"unregisterAbortHandler",null);Ea([fs],Bn.prototype,"abort",null);Ea([fs],Bn.prototype,"assign",null);Ea([fs],Bn,"collectMetadata",null);function iA(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function nf(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,nf.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}iA(nf,Error);function Tp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}nf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=Tp("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+Tp("",p.column-1," ")+Tp("",B,"^")}else r+=`
 at `+C}return r};nf.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Nd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:tr,Main:yi},d=tr,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Hr="[",Yt=".",Sr="if",ir="elif",_r="else",Jr="match",nr="=>",Zr="*",ar="eval",Pr="exists",J="`",ee='"',ce="'",Ce='\\"',ve="\\'",Ae="true",Re="false",Ee="null",Se="@",$e="@(",it="<",qe=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,ot=/^[%*-+\-\/<>\^]/,Pt=/^[^`{]/,xt=/^[{}`]/,Ut=/^[+\-]/,yt=/^[1-9]/,lt=/^[0-9]/,vr=/^[,;]/,cs=/^[A-Z_]/i,is=/^[A-Z0-9_]/i,Ct=/^[\r\n]/,Rt=/^[ \t\r\n]/,En=/^[ \t]/,gr=F(),el=R("//",!1),tl=R("/*",!1),lr=R("*/",!1),Bt=R("(",!1),Qr=R(")",!1),qn=R("::",!1),kt=R("{",!1),ft=R("}",!1),Tr=R("###",!1),Gt=R("let",!1),st=R(":",!1),Lt=R("=",!1),bs=R("var",!1),Ht=R("<:",!1),qt=R("#[",!1),Xr=R("]",!1),Da=R("each",!1),Nr=R(",",!1),hs=R("for",!1),Fs=R("return",!1),ct=_t([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=R("loop",!1),Ys=R("break",!1),Fr=R("continue",!1),Or=R("+=",!1),rl=R("-=",!1),Ua=R("\\",!1),sl=R("||",!1),nl=R("&&",!1),Ba=R("==",!1),La=R("!=",!1),al=R("<=",!1),il=R(">=",!1),ll=_t(["%",["*","+"],"-","/","<",">","^"],!1,!1),ul=R("!",!1),Vn=R("[",!1),en=R(".",!1),zn=R("if",!1),Ha=R("elif",!1),ol=R("else",!1),qa=R("match",!1),Os=R("=>",!1),fl=R("*",!1),cl=R("eval",!1),hl=R("exists",!1),As=R("`",!1),Is=_t(["`","{"],!0,!1),Kn=_t(["{","}","`"],!1,!1),tn=R('"',!1),rn=R("'",!1),pl=R('\\"',!1),sn=R("\\'",!1),ps=_t(["+","-"],!1,!1),Rs=_t([["1","9"]],!1,!1),Ar=_t([["0","9"]],!1,!1),nn=R("true",!1),an=R("false",!1),ln=R("null",!1),vs=_t([",",";"],!1,!1),un=R("@",!1),js=R("@(",!1),Va=R("<",!1),er=R(">",!1),za=_t([["A","Z"],"_"],!1,!0),dr=_t([["A","Z"],["0","9"],"_"],!1,!0),vl=R(`\r
`,!1),on=_t(["\r",`
`],!1,!1),gl=_t([" ","	","\r",`
`],!1,!1),Ds=_t([" ","	"],!1,!1),dl=function(f){return f.join("")},Wn=function(){return o()},yl=function(){return o()},Ka=function(){return""},wl=function(){return""},ml=function(f){return f??[]},Wa=function(f,g){return g},$l=function(f,g){return[f,...g]},Ga=function(f,g){return g},xl=function(f,g){return[f,...g]},Ja=function(f,g){return g},bl=function(f,g){return[f,...g]},Za=function(f){return f},Al=function(f,g){return ne("ns",{name:f,members:g})},Gn=function(f,g){return ne("meta",{name:f,value:g})},Cl=function(f){return ne("meta",{name:null,value:f})},Jn=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},_l=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},Qa=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},Pl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},kl=function(f,g,b){return ne("each",{var:f,items:g,for:b})},Ml=function(f,g,b){return ne("each",{var:f,items:g,for:b})},El=function(f,g){return g},Sl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Tl=function(f,g){return g},Nl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Fl=function(f,g){return ne("for",{times:f,for:g})},Ol=function(f,g){return ne("for",{times:f,for:g})},Il=function(f){return ne("return",{expr:f})},Rl=function(f){return ne("loop",{statements:f})},jl=function(){return ne("break",{})},Dl=function(){return ne("continue",{})},Ul=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Xa=function(f,g,b){return{op:g,term:b}},Bl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Ll=function(){return o()},Hl=function(f){return ne("not",{expr:f})},ql=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},Vl=function(f){return ne("callChain",{args:f??[]})},Zn=function(f,g){return g},zl=function(f,g){return[f,...g]},Ya=function(f){return ne("indexChain",{index:f})},Kl=function(f){return ne("propChain",{name:f})},Wl=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Gl=function(f,g){return[f,...g]},ei=function(f,g){return{cond:f,then:g}},Jl=function(f){return f},Qn=function(f,g,b){return{q:g,a:b}},Zl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},Ql=function(f){return ne("block",{statements:f})},Xl=function(f){return ne("exists",{identifier:f})},Yl=function(f){return ne("identifier",{name:f})},eu=function(f){return ne("tmpl",{tmpl:f})},ti=function(f){return f.join("")},ri=function(f){return f},si=function(f){return ne("str",{value:f.join("")})},ni=function(f){return f},tu=function(f){return ne("str",{value:f.join("")})},ru=function(){return'"'},ai=function(){return"'"},su=function(){return ne("num",{value:parseFloat(o())})},ii=function(){return ne("num",{value:parseFloat(o())})},li=function(){return ne("num",{value:parseInt(o(),10)})},nu=function(){return ne("num",{value:parseInt(o(),10)})},ui=function(){return ne("bool",{value:!0})},au=function(){return ne("bool",{value:!1})},iu=function(){return ne("null",{})},oi=function(f,g){return{k:f,v:g}},lu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},fi=function(f){return f},uu=function(f){return ne("arr",{value:f})},ou=function(f,g){return{name:f,argType:g}},ci=function(f,g){return[f,...g]},fu=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},hi=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Xn=function(f){return f},cu=function(f){return ne("arr",{value:f})},Yn=function(f,g){return{k:f,v:g}},hu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},pu=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},pi=function(f,g){return[f,...g]},vu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},vi=function(f){return ne("namedTypeSource",{name:f,inner:null})},gi=function(){return o()},gu=function(){return o()},di=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,Cs=[{line:1,column:1}],yr=c,fn=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,N={},Yr;if(r.startRule){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function o(){return t.substring(te,c)}function X(){return ue(te,c)}function O(f,g){throw g=g!==void 0?g:ue(te,c),du(f,g)}function R(f,g){return{type:"literal",text:f,ignoreCase:g}}function _t(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function V(){return{type:"end"}}function Us(f){var g=Cs[f],b;if(g)return g;if(f>=Cs.length)b=Cs.length-1;else for(b=f;!Cs[--b];);for(g=Cs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return Cs[f]=g,g}function ue(f,g,b){var w=Us(f),a=Us(g),l={source:n,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,fn=[]),fn.push(f))}function du(f,g){return new nf(f,null,null,g)}function de(f,g,b){return new nf(nf.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=N[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Bs();b!==e;)g.push(b),b=Bs();return te=f,g=dl(g),f=g,N[w]={nextPos:c,result:f},f}function Bs(){var f,g,b=c*77+1,w=N[b];return w?(c=w.nextPos,w.result):(f=c,g=Pi(),g!==e&&(te=f,g=Wn()),f=g,f===e&&(f=c,g=gn(),g!==e&&(te=f,g=yl()),f=g,f===e&&(f=U(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),N[b]={nextPos:c,result:f},f)}function U(){var f,g,b,w,a,l,$=c*77+2,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(el)),g!==e){for(b=[],w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ka()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(tl)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===M?(l=M,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===M?(w=M,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=wl()):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w,a,l=c*77+3,$=N[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=cn(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=ml(b),N[l]={nextPos:c,result:f},f}function cn(){var f,g,b,w,a,l,$,v,s=c*77+4,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=ea(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ea(),v!==e?(te=w,w=Wa(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ea(),v!==e?(te=w,w=Wa(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=$l(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function j(){var f,g,b,w,a,l,$,v,s=c*77+5,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=hn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=hn(),v!==e?(te=w,w=Ga(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=hn(),v!==e?(te=w,w=Ga(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=xl(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a,l,$,v,s=c*77+6,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=Ps(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=Ps(),v!==e?(te=w,w=Ja(g,v)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=Ps(),v!==e?(te=w,w=Ja(g,v)):(c=w,w=e)}else c=w,w=e}te=f,f=bl(g,b)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function ea(){var f,g=c*77+7,b=N[g];return b?(c=b.nextPos,b.result):(f=Cr(),f===e&&(f=Xe(),f===e&&(f=Ps())),N[g]={nextPos:c,result:f},f)}function hn(){var f,g=c*77+8,b=N[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=Cr())),N[g]={nextPos:c,result:f},f)}function Ps(){var f,g=c*77+9,b=N[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=ks(),f===e&&(f=ts(),f===e&&(f=We(),f===e&&(f=Ls(),f===e&&(f=wi(),f===e&&(f=mi(),f===e&&(f=yu(),f===e&&(f=$i(),f===e&&(f=wu(),f===e&&(f=et()))))))))))),N[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=N[g];return b?(c=b.nextPos,b.result):(f=mu(),f===e&&(f=es()),N[g]={nextPos:c,result:f},f)}function es(){var f,g=c*77+11,b=N[g];return b?(c=b.nextPos,b.result):(f=ns(),f===e&&(f=Cu(),f===e&&(f=xu(),f===e&&(f=pn()))),N[g]={nextPos:c,result:f},f)}function pn(){var f,g,b,w,a,l,$=c*77+12,v=N[$];if(v)return c=v.nextPos,v.result;if(f=na(),f===e&&(f=bu(),f===e&&(f=_i(),f===e&&(f=Pi(),f===e&&(f=gn(),f===e&&(f=la(),f===e&&(f=yn(),f===e&&(f=fa(),f===e&&(f=ca(),f===e&&(f=Ei(),f===e&&(f=$u(),f===e&&(f=Hs(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=T,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Za(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ir(){var f,g=c*77+13,b=N[g];return b?(c=b.nextPos,b.result):(f=la(),f===e&&(f=gn(),f===e&&(f=yn(),f===e&&(f=ga(),f===e&&(f=da(),f===e&&(f=fa()))))),N[g]={nextPos:c,result:f},f)}function Cr(){var f,g,b,w,a,l,$,v,s,u,y=c*77+14,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===B?(g=B,c+=2):(g=e,i===0&&D(qn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=L,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(v=j(),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();t.charCodeAt(c)===125?(u=W,c++):(u=e,i===0&&D(ft)),u!==e?(te=f,f=Al(w,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Tr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Ir(),l!==e?(te=f,f=Gn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Tr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Ir(),w!==e?(te=f,f=Cl(w)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function gs(){var f,g,b,w,a,l,$,v,s,u=c*77+16,y=N[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=et(),s!==e?(te=f,f=Jn(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===Z?(g=Z,c+=3):(g=e,i===0&&D(bs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=wr(),s!==e?a=s:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();s=et(),s!==e?(te=f,f=_l(w,a,s)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[u]={nextPos:c,result:f},f}function ks(){var f,g,b,w,a=c*77+17,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(g=K,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=Qa(w)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function We(){var f,g,b,w,a,l,$,v=c*77+18,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,2)===G?(g=G,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Ir(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(Xr)),$!==e?(te=f,f=Pl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[v]={nextPos:c,result:f},f}function Ls(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+19,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===ie?(a=ie,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();for(t.charCodeAt(c)===44?(s=Y,c++):(s=e,i===0&&D(Nr)),s===e&&(s=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e)if(t.charCodeAt(c)===41?(h=E,c++):(h=e,i===0&&D(Qr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=kl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ie?(w=ie,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();if(u=et(),u!==e){if(y=[],h=k(),h!==e)for(;h!==e;)y.push(h),h=k();else y=e;y!==e?(h=ur(),h!==e?(te=f,f=Ml(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A=c*77+20,S=N[A];if(S)return c=S.nextPos,S.result;if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===ie?(a=ie,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();if(s=c,t.charCodeAt(c)===61?(u=be,c++):(u=e,i===0&&D(Lt)),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();h=et(),h!==e?(te=s,s=El($,h)):(c=s,s=e)}else c=s,s=e;for(s===e&&(s=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&D(Nr)),u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=E,c++):(x=e,i===0&&D(Qr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=Sl($,s,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===ie?(w=ie,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(v=c,t.charCodeAt(c)===61?(s=be,c++):(s=e,i===0&&D(Lt)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=et(),y!==e?(te=v,v=Tl(l,y)):(c=v,v=e)}else c=v,v=e;for(v===e&&(v=null),t.charCodeAt(c)===44?(s=Y,c++):(s=e,i===0&&D(Nr)),s===e&&(s=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=Nl(l,v,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=T,c++):(w=e,i===0&&D(Bt)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();v=ur(),v!==e?(te=f,f=Fl(a,v)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Ol(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return N[A]={nextPos:c,result:f},f}function ts(){var f,g,b,w,a,l=c*77+21,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Fs)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=Il(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[l]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a,l,$,v,s=c*77+22,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();t.charCodeAt(c)===125?(v=W,c++):(v=e,i===0&&D(ft)),v!==e?(te=f,f=Rl(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function yu(){var f,g,b,w,a=c*77+23,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Ys)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=jl()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a=c*77+24,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===ke?(g=ke,c+=8):(g=e,i===0&&D(Fr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Dl()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function wu(){var f,g,b,w,a,l,$=c*77+25,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Or)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(rl)),w===e&&(t.charCodeAt(c)===61?(w=be,c++):(w=e,i===0&&D(Lt)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Ul(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function mu(){var f,g,b,w,a,l,$,v,s=c*77+26,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=es(),g!==e){for(b=[],w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],v=rs();v!==e;)$.push(v),v=rs();v=es(),v!==e?(te=w,w=Xa(g,l,v)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],v=rs();v!==e;)$.push(v),v=rs();v=es(),v!==e?(te=w,w=Xa(g,l,v)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Bl(g,b)):(c=f,f=e)}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function rs(){var f,g,b,w=c*77+27,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=Ge(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),N[w]={nextPos:c,result:f},f)}function xi(){var f,g,b=c*77+28,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===At?(g=At,c+=2):(g=e,i===0&&D(sl)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(nl)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ba)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(La)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(al)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(il)),g===e&&(g=t.charAt(c),ot.test(g)?c++:(g=e,i===0&&D(ll)))))))),g!==e&&(te=f,g=Ll()),f=g,N[b]={nextPos:c,result:f},f)}function $u(){var f,g,b,w=c*77+29,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(ul)),g!==e?(b=et(),b!==e?(te=f,f=Hl(b)):(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function xu(){var f,g,b,w,a=c*77+30,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,g=pn(),g!==e){if(b=[],w=bi(),w===e&&(w=ta(),w===e&&(w=Ai())),w!==e)for(;w!==e;)b.push(w),w=bi(),w===e&&(w=ta(),w===e&&(w=Ai()));else b=e;b!==e?(te=f,f=ql(g,b)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function bi(){var f,g,b,w,a,l,$=c*77+31,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===40?(g=T,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ss(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Vl(w)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ss(){var f,g,b,w,a,l,$=c*77+32,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=zl(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ta(){var f,g,b,w,a,l,$=c*77+33,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=Ya(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ai(){var f,g,b,w=c*77+34,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(en)),g!==e?(b=tt(),b!==e?(te=f,f=Kl(b)):(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function ns(){var f,g,b,w,a,l,$,v,s,u,y=c*77+35,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Sr?(g=Sr,c+=2):(g=e,i===0&&D(zn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,v=[],s=k(),s!==e)for(;s!==e;)v.push(s),s=k();else v=e;if(v!==e?(s=ra(),s!==e?$=s:(c=$,$=e)):(c=$,$=e),$===e&&($=null),v=c,s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;s!==e?(u=Ci(),u!==e?v=u:(c=v,v=e)):(c=v,v=e),v===e&&(v=null),te=f,f=Wl(w,l,$,v)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ra(){var f,g,b,w,a,l,$=c*77+36,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=sa(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=sa(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=sa(),l!==e?w=l:(c=w,w=e)}te=f,f=Gl(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function sa(){var f,g,b,w,a,l,$,v=c*77+37,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(Ha)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=ei(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return N[v]={nextPos:c,result:f},f}function Ci(){var f,g,b,w,a,l=c*77+38,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(ol)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Jl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[l]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A,S,I=c*77+39,H=N[I];if(H)return c=H.nextPos,H.result;if(f=c,t.substr(c,5)===Jr?(g=Jr,c+=5):(g=e,i===0&&D(qa)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=L,c++):($=e,i===0&&D(kt)),$!==e){for(v=[],s=k();s!==e;)v.push(s),s=k();if(s=[],u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(s.push(u),u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else s=e;if(s!==e){if(u=c,t.charCodeAt(c)===42?(y=Zr,c++):(y=e,i===0&&D(fl)),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Os)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],S=k();S!==e;)A.push(S),S=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();t.charCodeAt(c)===125?(h=W,c++):(h=e,i===0&&D(ft)),h!==e?(te=f,f=Zl(a,s,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return N[I]={nextPos:c,result:f},f}function bu(){var f,g,b,w,a,l,$,v,s=c*77+40,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ar?(g=ar,c+=4):(g=e,i===0&&D(cl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();t.charCodeAt(c)===125?(v=W,c++):(v=e,i===0&&D(ft)),v!==e?(te=f,f=Ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[s]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a=c*77+41,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Pr?(g=Pr,c+=6):(g=e,i===0&&D(hl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Hs(),w!==e?(te=f,f=Xl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function Hs(){var f,g,b=c*77+42,w=N[b];return w?(c=w.nextPos,w.result):(f=c,g=Pu(),g!==e&&(te=f,g=Yl(g)),f=g,N[b]={nextPos:c,result:f},f)}function Pi(){var f,g,b,w,a,l,$=c*77+43,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===96?(g=J,c++):(g=e,i===0&&D(As)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=J,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=J,c++):(w=e,i===0&&D(As)),w!==e?(te=f,f=eu(b)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function ki(){var f,g,b,w,a,l,$=c*77+44,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=W,c++):(l=e,i===0&&D(ft)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=vn(),b!==e)for(;b!==e;)g.push(b),b=vn();else g=e;g!==e&&(te=f,g=ti(g)),f=g}return N[$]={nextPos:c,result:f},f}function vn(){var f,g=c*77+45,b=N[g];return b?(c=b.nextPos,b.result):(f=Au(),f===e&&(f=t.charAt(c),Pt.test(f)?c++:(f=e,i===0&&D(Is))),N[g]={nextPos:c,result:f},f)}function Au(){var f,g,b,w=c*77+46,a=N[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=t.charAt(c),xt.test(b)?c++:(b=e,i===0&&D(Kn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),N[w]={nextPos:c,result:f},f)}function gn(){var f,g,b,w,a,l,$=c*77+47,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===34?(g=ee,c++):(g=e,i===0&&D(tn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=ee,c++):(w=e,i===0&&D(tn)),w!==e?(te=f,f=si(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=ce,c++):(g=e,i===0&&D(rn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=ce,c++):(l=e,i===0&&D(rn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=ce,c++):(w=e,i===0&&D(rn)),w!==e?(te=f,f=tu(b)):(c=f,f=e)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function aa(){var f,g,b=c*77+48,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Ce?(g=Ce,c+=2):(g=e,i===0&&D(pl)),g!==e&&(te=f,g=ru()),f=g,N[b]={nextPos:c,result:f},f)}function ia(){var f,g,b=c*77+49,w=N[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ve?(g=ve,c+=2):(g=e,i===0&&D(sn)),g!==e&&(te=f,g=ai()),f=g,N[b]={nextPos:c,result:f},f)}function la(){var f,g=c*77+50,b=N[g];return b?(c=b.nextPos,b.result):(f=dn(),f===e&&(f=ua()),N[g]={nextPos:c,result:f},f)}function dn(){var f,g,b,w,a,l,$,v=c*77+51,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Rs)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(en)),a!==e){if(l=[],$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar));else l=e;l!==e?(te=f,f=su()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(en)),w!==e){if(a=[],l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar));else a=e;a!==e?(te=f,f=ii()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return N[v]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l=c*77+52,$=N[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Rs)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;w!==e?(te=f,f=li()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e?(te=f,f=nu()):(c=f,f=e)),N[l]={nextPos:c,result:f},f}function yn(){var f,g=c*77+53,b=N[g];return b?(c=b.nextPos,b.result):(f=Mi(),f===e&&(f=oa()),N[g]={nextPos:c,result:f},f)}function Mi(){var f,g,b,w,a=c*77+54,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(nn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ui()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function oa(){var f,g,b,w,a=c*77+55,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Re?(g=Re,c+=5):(g=e,i===0&&D(an)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=au()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function fa(){var f,g,b,w,a=c*77+56,l=N[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ee?(g=Ee,c+=4):(g=e,i===0&&D(ln)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=iu()):(c=f,f=e)):(c=f,f=e),N[a]={nextPos:c,result:f},f)}function ca(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+57,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=W,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=lu(w)):(c=f,f=e)}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function Ei(){var f,g,b,w,a,l,$,v,s,u,y=c*77+58,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=uu(w)):(c=f,f=e)}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ha(){var f,g,b,w,a,l,$,v=c*77+59,s=N[v];if(s)return c=s.nextPos,s.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=ou(g,b)}else c=f,f=e;return N[v]={nextPos:c,result:f},f}function pa(){var f,g,b,w,a,l,$=c*77+60,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=ha(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ci(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function va(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_,A,S,I=c*77+61,H=N[I];if(H)return c=H.nextPos,H.result;if(f=c,t.charCodeAt(c)===64?(g=Se,c++):(g=e,i===0&&D(un)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=T,c++):(l=e,i===0&&D(Bt)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(v=pa(),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();if(t.charCodeAt(c)===41?(u=E,c++):(u=e,i===0&&D(Qr)),u!==e){for(y=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=pe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?y=_:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=L,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=_s(),_===e&&(_=null),A=[],S=k();S!==e;)A.push(S),S=k();t.charCodeAt(c)===125?(S=W,c++):(S=e,i===0&&D(ft)),S!==e?(te=f,f=fu(b,w,a,v,y,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[I]={nextPos:c,result:f},f}function Cu(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m=c*77+62,_=N[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(js)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=pa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=c,v=[],s=k();s!==e;)v.push(s),s=k();if(t.charCodeAt(c)===58?(s=pe,c++):(s=e,i===0&&D(st)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=wr(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),v=[],s=k();s!==e;)v.push(s),s=k();if(t.charCodeAt(c)===123?(s=L,c++):(s=e,i===0&&D(kt)),s!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();for(y=_s(),y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=W,c++):(x=e,i===0&&D(ft)),x!==e?(te=f,f=hi(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[m]={nextPos:c,result:f},f}function ga(){var f,g,b,w,a,l,$,v,s,u,y=c*77+63,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Hr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Ir(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Ir(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();for(t.charCodeAt(c)===44?(v=Y,c++):(v=e,i===0&&D(Nr)),v===e&&(v=null),s=[],u=k();u!==e;)s.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function da(){var f,g,b,w,a,l,$,v,s,u,y,h,x,m,_=c*77+64,A=N[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Ir(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.charCodeAt(c)===58?(v=pe,c++):(v=e,i===0&&D(st)),v!==e){if(s=[],u=k(),u!==e)for(;u!==e;)s.push(u),u=k();else s=e;if(s!==e)if(u=Ir(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=W,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return N[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=N[g];return b?(c=b.nextPos,b.result):(f=_u(),f===e&&(f=Si()),N[g]={nextPos:c,result:f},f)}function _u(){var f,g,b,w,a,l,$,v,s,u,y=c*77+66,h=N[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(js)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ya(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=E,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],v=k();v!==e;)$.push(v),v=k();if(t.substr(c,2)===nr?(v=nr,c+=2):(v=e,i===0&&D(Os)),v!==e){for(s=[],u=k();u!==e;)s.push(u),u=k();u=wr(),u!==e?(te=f,f=pu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return N[y]={nextPos:c,result:f},f}function ya(){var f,g,b,w,a,l,$=c*77+67,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Ms(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Ms(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=pi(g,b)}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Si(){var f,g,b,w,a,l,$,v,s=c*77+68,u=N[s];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=it,c++):(w=e,i===0&&D(Va)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],v=De();v!==e;)$.push(v),v=De();t.charCodeAt(c)===62?(v=qe,c++):(v=e,i===0&&D(er)),v!==e?(te=f,f=vu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=vi(g)),f=g),N[s]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=N[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),cs.test(g)?c++:(g=e,i===0&&D(za)),g!==e){for(b=[],w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=gi()}else c=f,f=e;return N[a]={nextPos:c,result:f},f}function Pu(){var f,g,b,w,a,l,$=c*77+70,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=gu()}else c=f,f=e;return N[$]={nextPos:c,result:f},f}function Ms(){var f,g,b,w,a,l=c*77+71,$=N[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=Y,c++):(b=e,i===0&&D(Nr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return N[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,v=N[$];if(v)return c=v.nextPos,v.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=_s(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=W,c++):(l=e,i===0&&D(ft)),l!==e?(te=f,f=di(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),N[$]={nextPos:c,result:f},f}function Ge(){var f,g=c*77+73,b=N[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(vl)),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(on))),N[g]={nextPos:c,result:f},f)}function Ti(){var f,g,b=c*77+74,w=N[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=Ge()),N[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=N[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(gl)),N[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=N[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),En.test(f)?c++:(f=e,i===0&&D(Ds)),N[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=X();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Yr=d(),r.peg$library)return{peg$result:Yr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:fn,peg$maxFailPos:yr};if(Yr!==e&&c===t.length)return Yr;throw Yr!==e&&c<t.length&&D(V()),de(fn,yr<t.length?t.charAt(yr):null,yr<t.length?ue(yr,yr+1):ue(yr,yr))}const lA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function uA(t){return lA.includes(t.type)}function Mw(t){return"chain"in t&&t.chain!==null}function oA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function fA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function cA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Et(e.expr,r);break}case"return":{e.expr=Et(e.expr,r);break}case"each":{e.items=Et(e.items,r),e.for=Et(e.for,r);break}case"for":{e.from!=null&&(e.from=Et(e.from,r)),e.to!=null&&(e.to=Et(e.to,r)),e.times!=null&&(e.times=Et(e.times,r)),e.for=Et(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Et(e.expr,r),e.dest=Et(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Et(e.operands[n],r);break}case"not":{e.expr=Et(e.expr,r);break}case"if":{e.cond=Et(e.cond,r),e.then=Et(e.then,r);for(const n of e.elseif)n.cond=Et(n.cond,r),n.then=Et(n.then,r);e.else!=null&&(e.else=Et(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Et(e.children[n],r);break}case"match":{e.about=Et(e.about,r);for(const n of e.qs)n.q=Et(n.q,r),n.a=Et(n.a,r);e.default!=null&&(e.default=Et(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Et(e.statements[n],r);break}case"exists":{e.identifier=Et(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=Et(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Et(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Et(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"indexChain":{e.index=Et(e.index,r);break}case"call":{e.target=Et(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Et(e.args[n],r);break}case"index":{e.target=Et(e.target,r),e.index=Et(e.index,r);break}case"prop":{e.target=Et(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Et(e.members[n],r);break}case"or":case"and":{e.left=Et(e.left,r),e.right=Et(e.right,r);break}}if(Mw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Et(e.chain[n],r);return e}const Np=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Fp(t){throw new df(`Reserved word "${t}" cannot be used as variable name.`)}function hA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Np.includes(t.name)&&Fp(t.name);break}case"meta":{t.name!=null&&Np.includes(t.name)&&Fp(t.name);break}case"fn":{for(const r of t.args)Np.includes(r.name)&&Fp(r.name);break}}return t}function pA(t){for(const r of t)Et(r,hA);return t}function Fd(t){return{type:"simple",name:t}}function vA(t,r){return{type:"generic",name:t,inners:r}}function gA(t,r){return{type:"fn",args:t,result:r}}function hh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=hh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>hh(n)).join(", "),e=hh(t.result);return`@(${r}) { ${e} }`}}}function Wf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Fd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Wf(t.inner):r=Fd("any"),vA(t.name,[r])}}throw new df(`Unknown type: '${hh(t)}'`)}else{const r=t.args.map(e=>Wf(e));return gA(r,Wf(t.result))}}function dA(t){switch(t.type){case"def":{t.varType!=null&&Wf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Wf(r.argType);t.retType!=null&&Wf(t.retType);break}}return t}function yA(t){for(const r of t)Et(r,dA);return t}function ph(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=ph(n.expr.children)),r.push(n);else{if(e.length>0)throw new df("invalid attribute.");switch(n.type){case"fn":{n.children=ph(n.children);break}case"block":{n.statements=ph(n.statements);break}}r.push(n)}if(e.length>0)throw new df("invalid attribute.");return r}function wA(t){if(uA(t)&&Mw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=oA(n,p.args,p.loc);break}case"indexChain":{n=fA(n,p.index,p.loc);break}case"propChain":{n=cA(n,p.name,p.loc);break}}return n}return t}function mA(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],wA);return t}function vh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Ew(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return vh(t,r,e);{const{left:n,right:p,info:d}=t;return vh(n,Ew(p,r,e),d)}}function Wo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Wo(t.left),Wo(t.right)]}}const $A={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Wo(t.left),right:Wo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Wo(t.left),right:Wo(t.right)}),priority:3}};function xA(t){const r=t.operators.map(n=>{const p=$A[n];if(p==null)throw new df(`No such operator: ${n}.`);return p});let e=vh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Ew(e,t.operands[2+n],r[1+n]);return Wo(e)}function bA(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],e=>e.type==="infix"?xA(e):e);return t}var Hu;let AA=(Hu=class{constructor(){fe(this,"plugins");this.plugins={validate:[pA,yA],transform:[ph,mA,bA]}}static parse(r){return Hu.instance==null&&(Hu.instance=new Hu),Hu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Nd(r,{startRule:"Preprocess"});e=Nd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new df(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new df(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},fe(Hu,"instance"),Hu);const CA="0.18.0",_A={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Cv=[],oc=null;function PA(t){return Cv=AA.parse(t),JSON.stringify(Cv,null,"	")}async function kA(t){oc==null||oc.abort(),oc=new Bn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:xv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:xv(e.val,!0),print:!1});break}}});try{await oc.exec(Cv)}catch(r){t.err(r)}}const MA=Object.freeze(Object.defineProperty({__proto__:null,exec:kA,parse:PA,samples:_A,version:CA},Symbol.toStringTag,{value:"Module"}));function ws(t,r,e){let n=e.value;return{configurable:!0,get(){const p=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:p}),p},set(p){n=p}}}let rp=class Sw extends Error{constructor(e,n){super(e);fe(this,"name","AiScript");fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Sw)}},EA=class extends rp{constructor(e){super(e.message??`${e}`,e);fe(this,"name","Internal")}},yf=class extends rp{constructor(e,n){super(e,n);fe(this,"name","Syntax")}},Ur=class extends rp{constructor(e,n){super(e,n);fe(this,"name","Runtime")}},Od=class extends Ur{constructor(r,e){super(r,e)}};var No=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let io=class Tw{constructor(r=[],e,n){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Tw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Ur(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Ur(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){const d=p.get(r);if(!d.isMutable)throw new Ur(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Ur(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};No([ws],io.prototype,"log",null);No([ws],io.prototype,"onUpdated",null);No([ws],io.prototype,"createChildScope",null);No([ws],io.prototype,"get",null);No([ws],io.prototype,"exists",null);No([ws],io.prototype,"getAll",null);No([ws],io.prototype,"add",null);No([ws],io.prototype,"assign",null);let Yc;const SA=new Uint8Array(16);function TA(){if(!Yc&&(Yc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yc(SA)}const xn=[];for(let t=0;t<256;++t)xn.push((t+256).toString(16).slice(1));function NA(t,r=0){return xn[t[r+0]]+xn[t[r+1]]+xn[t[r+2]]+xn[t[r+3]]+"-"+xn[t[r+4]]+xn[t[r+5]]+"-"+xn[t[r+6]]+xn[t[r+7]]+"-"+xn[t[r+8]]+xn[t[r+9]]+"-"+xn[t[r+10]]+xn[t[r+11]]+xn[t[r+12]]+xn[t[r+13]]+xn[t[r+14]]+xn[t[r+15]]}const FA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Id={randomUUID:FA};function OA(t,r,e){if(Id.randomUUID&&!r&&!t)return Id.randomUUID();t=t||{};const n=t.random||(t.rng||TA)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,NA(n)}const or={type:"null"},Wi={type:"bool",value:!0},Fi={type:"bool",value:!1},He=t=>({type:"num",value:t}),hr=t=>({type:"str",value:t}),af=t=>({type:"bool",value:t}),Bh=t=>({type:"obj",value:t}),xs=t=>({type:"arr",value:t}),IA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),me=t=>({type:"fn",native:t}),RA=t=>({type:"return",value:t}),jA=()=>({type:"break",value:null}),DA=()=>({type:"continue",value:null}),UA=t=>t.type==="return"?t.value:t,_v=(t,r)=>({type:"error",value:t,info:r});function Di(t){if(t==null)throw new Ur("Expect anything, but got nothing.")}function xa(t){if(t==null)throw new Ur("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Ur(`Expect boolean, but got ${t.type}.`)}function $o(t){if(t==null)throw new Ur("Expect function, but got nothing.");if(t.type!=="fn")throw new Ur(`Expect function, but got ${t.type}.`)}function Es(t){if(t==null)throw new Ur("Expect string, but got nothing.");if(t.type!=="str")throw new Ur(`Expect string, but got ${t.type}.`)}function Be(t){if(t==null)throw new Ur("Expect number, but got nothing.");if(t.type!=="num")throw new Ur(`Expect number, but got ${t.type}.`)}function Ru(t){if(t==null)throw new Ur("Expect object, but got nothing.");if(t.type!=="obj")throw new Ur(`Expect object, but got ${t.type}.`)}function Gf(t){if(t==null)throw new Ur("Expect array, but got nothing.");if(t.type!=="arr")throw new Ur(`Expect array, but got ${t.type}.`)}function Op(t){return t.type==="obj"}function Rd(t){return t.type==="arr"}function Pv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function kv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>kv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Mv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Mv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Mv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ev(t){if(t===null)return or;if(typeof t=="boolean")return af(t);if(typeof t=="string")return hr(t);if(typeof t=="number")return He(t);if(Array.isArray(t))return xs(t.map(r=>Ev(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ev(n));return Bh(r)}return or}function Jf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const p of t.value)n.push(Jf(p,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[p,d]of t.value)n.push(`${p}: ${Jf(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const BA={version:"0.17.0"},LA=BA.version,HA=new TextEncoder,qA=new TextDecoder,VA={help:hr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":hr(LA),"Core:ai":hr("kawaii"),"Core:not":me(([t])=>(xa(t),t.value?Fi:Wi)),"Core:eq":me(([t,r])=>(Di(t),Di(r),Pv(t,r)?Wi:Fi)),"Core:neq":me(([t,r])=>(Di(t),Di(r),Pv(t,r)?Fi:Wi)),"Core:and":me(([t,r])=>(xa(t),t.value?(xa(r),r.value?Wi:Fi):Fi)),"Core:or":me(([t,r])=>(xa(t),t.value?Wi:(xa(r),r.value?Wi:Fi))),"Core:add":me(([t,r])=>(Be(t),Be(r),He(t.value+r.value))),"Core:sub":me(([t,r])=>(Be(t),Be(r),He(t.value-r.value))),"Core:mul":me(([t,r])=>(Be(t),Be(r),He(t.value*r.value))),"Core:pow":me(([t,r])=>{Be(t),Be(r);const e=t.value**r.value;if(isNaN(e))throw new Ur("Invalid operation.");return He(e)}),"Core:div":me(([t,r])=>{Be(t),Be(r);const e=t.value/r.value;if(isNaN(e))throw new Ur("Invalid operation.");return He(e)}),"Core:mod":me(([t,r])=>(Be(t),Be(r),He(t.value%r.value))),"Core:gt":me(([t,r])=>(Be(t),Be(r),t.value>r.value?Wi:Fi)),"Core:lt":me(([t,r])=>(Be(t),Be(r),t.value<r.value?Wi:Fi)),"Core:gteq":me(([t,r])=>(Be(t),Be(r),t.value>=r.value?Wi:Fi)),"Core:lteq":me(([t,r])=>(Be(t),Be(r),t.value<=r.value?Wi:Fi)),"Core:type":me(([t])=>(Di(t),hr(t.type))),"Core:to_str":me(([t])=>(Di(t),hr(Jf(t)))),"Core:range":me(([t,r])=>(Be(t),Be(r),t.value<r.value?xs(Array.from({length:r.value-t.value+1},(e,n)=>He(n+t.value))):t.value>r.value?xs(Array.from({length:t.value-r.value+1},(e,n)=>He(t.value-n))):xs([t]))),"Core:sleep":me(async([t])=>(Be(t),await new Promise(r=>setTimeout(r,t.value)),or)),"Util:uuid":me(()=>hr(OA())),"Json:stringify":me(([t])=>(Di(t),hr(JSON.stringify(Mv(t))))),"Json:parse":me(([t])=>{Es(t);try{return Ev(JSON.parse(t.value))}catch{return _v("not_json")}}),"Json:parsable":me(([t])=>{Es(t);try{JSON.parse(t.value)}catch{return af(!1)}return af(!0)}),"Date:now":me(()=>He(Date.now())),"Date:year":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":me(([t])=>(Es(t),He(new Date(t.value).getTime()))),"Math:Infinity":He(1/0),"Math:E":He(Math.E),"Math:LN2":He(Math.LN2),"Math:LN10":He(Math.LN10),"Math:LOG2E":He(Math.LOG2E),"Math:LOG10E":He(Math.LOG10E),"Math:PI":He(Math.PI),"Math:SQRT1_2":He(Math.SQRT1_2),"Math:SQRT2":He(Math.SQRT2),"Math:abs":me(([t])=>(Be(t),He(Math.abs(t.value)))),"Math:acos":me(([t])=>(Be(t),He(Math.acos(t.value)))),"Math:acosh":me(([t])=>(Be(t),He(Math.acosh(t.value)))),"Math:asin":me(([t])=>(Be(t),He(Math.asin(t.value)))),"Math:asinh":me(([t])=>(Be(t),He(Math.asinh(t.value)))),"Math:atan":me(([t])=>(Be(t),He(Math.atan(t.value)))),"Math:atanh":me(([t])=>(Be(t),He(Math.atanh(t.value)))),"Math:atan2":me(([t,r])=>(Be(t),Be(r),He(Math.atan2(t.value,r.value)))),"Math:cbrt":me(([t])=>(Be(t),He(Math.cbrt(t.value)))),"Math:ceil":me(([t])=>(Be(t),He(Math.ceil(t.value)))),"Math:clz32":me(([t])=>(Be(t),He(Math.clz32(t.value)))),"Math:cos":me(([t])=>(Be(t),He(Math.cos(t.value)))),"Math:cosh":me(([t])=>(Be(t),He(Math.cosh(t.value)))),"Math:exp":me(([t])=>(Be(t),He(Math.exp(t.value)))),"Math:expm1":me(([t])=>(Be(t),He(Math.expm1(t.value)))),"Math:floor":me(([t])=>(Be(t),He(Math.floor(t.value)))),"Math:fround":me(([t])=>(Be(t),He(Math.fround(t.value)))),"Math:hypot":me(([t])=>{Gf(t);const r=[];for(const e of t.value)Be(e),r.push(e.value);return He(Math.hypot(...r))}),"Math:imul":me(([t,r])=>(Be(t),Be(r),He(Math.imul(t.value,r.value)))),"Math:log":me(([t])=>(Be(t),He(Math.log(t.value)))),"Math:log1p":me(([t])=>(Be(t),He(Math.log1p(t.value)))),"Math:log10":me(([t])=>(Be(t),He(Math.log10(t.value)))),"Math:log2":me(([t])=>(Be(t),He(Math.log2(t.value)))),"Math:max":me(([t,r])=>(Be(t),Be(r),He(Math.max(t.value,r.value)))),"Math:min":me(([t,r])=>(Be(t),Be(r),He(Math.min(t.value,r.value)))),"Math:pow":me(([t,r])=>(Be(t),Be(r),He(Math.pow(t.value,r.value)))),"Math:round":me(([t])=>(Be(t),He(Math.round(t.value)))),"Math:sign":me(([t])=>(Be(t),He(Math.sign(t.value)))),"Math:sin":me(([t])=>(Be(t),He(Math.sin(t.value)))),"Math:sinh":me(([t])=>(Be(t),He(Math.sinh(t.value)))),"Math:sqrt":me(([t])=>{Be(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Ur("Invalid operation.");return He(r)}),"Math:tan":me(([t])=>(Be(t),He(Math.tan(t.value)))),"Math:tanh":me(([t])=>(Be(t),He(Math.tanh(t.value)))),"Math:trunc":me(([t])=>(Be(t),He(Math.trunc(t.value)))),"Math:rnd":me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?He(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):He(Math.random())),"Math:gen_rng":me(([t])=>{if(Di(t),t.type!=="num"&&t.type!=="str")return or;const r=To(t.value.toString());return me(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?He(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):He(r()))}),"Num:to_hex":me(([t])=>(Be(t),hr(t.value.toString(16)))),"Num:from_hex":me(([t])=>(Es(t),He(parseInt(t.value,16)))),"Str:lf":hr(`
`),"Str:lt":me(([t,r])=>(Es(t),Es(r),t.value<r.value?He(-1):t.value===r.value?He(0):He(1))),"Str:gt":me(([t,r])=>(Es(t),Es(r),t.value>r.value?He(-1):t.value===r.value?He(0):He(1))),"Str:from_codepoint":me(([t])=>(Be(t),hr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":me(([t])=>(Gf(t),hr(Array.from(t.value.map(r=>(Be(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":me(([t])=>(Gf(t),hr(qA.decode(Uint8Array.from(t.value.map(r=>(Be(r),r.value))))))),"Obj:keys":me(([t])=>(Ru(t),xs(Array.from(t.value.keys()).map(r=>hr(r))))),"Obj:vals":me(([t])=>(Ru(t),xs(Array.from(t.value.values())))),"Obj:kvs":me(([t])=>(Ru(t),xs(Array.from(t.value.entries()).map(([r,e])=>xs([hr(r),e]))))),"Obj:get":me(([t,r])=>(Ru(t),Es(r),t.value.get(r.value)??or)),"Obj:set":me(([t,r,e])=>(Ru(t),Es(r),Di(e),t.value.set(r.value,e),or)),"Obj:has":me(([t,r])=>(Ru(t),Es(r),af(t.value.has(r.value)))),"Obj:copy":me(([t])=>(Ru(t),Bh(new Map(t.value)))),"Obj:merge":me(([t,r])=>(Ru(t),Ru(r),Bh(new Map([...t.value,...r.value])))),"Error:create":me(([t,r])=>(Es(t),_v(t.value,r))),"Async:interval":me(async([t,r,e],n)=>{Be(t),$o(r),e&&(xa(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),me(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":me(async([t,r],e)=>{Be(t),$o(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),me(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},jd={num:{to_str:t=>me(async(r,e)=>hr(t.value.toString()))},str:{to_num:t=>me(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?or:He(n)}),to_arr:t=>me(async(r,e)=>xs(Qs(t.value).map(n=>hr(n)))),to_unicode_arr:t=>me(async(r,e)=>xs([...t.value].map(n=>hr(n)))),to_unicode_codepoint_arr:t=>me(async(r,e)=>xs([...t.value].map(n=>{const p=n.codePointAt(0);return He(p??n.charCodeAt(0))}))),to_char_arr:t=>me(async(r,e)=>xs(t.value.split("").map(n=>hr(n)))),to_charcode_arr:t=>me(async(r,e)=>xs(t.value.split("").map(n=>He(n.charCodeAt(0))))),to_utf8_byte_arr:t=>me(async(r,e)=>xs(Array.from(HA.encode(t.value)).map(n=>He(n)))),len:t=>He(Cf(t.value)),replace:t=>me(async([r,e],n)=>(Es(r),Es(e),hr(t.value.split(r.value).join(e.value)))),index_of:t=>me(async([r],e)=>(Es(r),He(Pf(t.value,r.value)))),incl:t=>me(async([r],e)=>(Es(r),t.value.includes(r.value)?Wi:Fi)),trim:t=>me(async(r,e)=>hr(t.value.trim())),upper:t=>me(async(r,e)=>hr(t.value.toUpperCase())),lower:t=>me(async(r,e)=>hr(t.value.toLowerCase())),split:t=>me(async([r],e)=>(r&&Es(r),xs(r?t.value.split(r?r.value:"").map(n=>hr(n)):Qs(t.value).map(n=>hr(n))))),slice:t=>me(async([r,e],n)=>(Be(r),Be(e),hr(_f(t.value,r.value,e.value)))),pick:t=>me(async([r],e)=>{Be(r);const p=Qs(t.value)[r.value];return p?hr(p):or}),charcode_at:t=>me(([r],e)=>{Be(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?or:He(n)}),codepoint_at:t=>me(([r],e)=>{Be(r);const n=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(n)?or:He(n)})},arr:{len:t=>He(t.value.length),push:t=>me(async([r],e)=>(Di(r),t.value.push(r),t)),unshift:t=>me(async([r],e)=>(Di(r),t.value.unshift(r),t)),pop:t=>me(async(r,e)=>t.value.pop()??or),shift:t=>me(async(r,e)=>t.value.shift()??or),concat:t=>me(async([r],e)=>(Gf(r),xs(t.value.concat(r.value)))),slice:t=>me(async([r,e],n)=>(Be(r),Be(e),xs(t.value.slice(r.value,e.value)))),join:t=>me(async([r],e)=>(r&&Es(r),hr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>me(async([r],e)=>{$o(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,He(d)]));return xs(await Promise.all(n))}),filter:t=>me(async([r],e)=>{$o(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,He(p)]);xa(C),C.value&&n.push(d)}return xs(n)}),reduce:t=>me(async([r,e],n)=>{$o(r);const p=e!=null;let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,He(C)])}return d}),find:t=>me(async([r],e)=>{$o(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,He(n)]);if(xa(d),d.value)return p}return or}),incl:t=>me(async([r],e)=>(Di(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Fi:(p=>p.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Wi:Fi)),reverse:t=>me(async(r,e)=>(t.value.reverse(),or)),copy:t=>me(async(r,e)=>xs([...t.value])),sort:t=>me(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=await n(d.slice(0,P),C),T=await n(d.slice(P),C);return p(M,T,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Be(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return $o(r),Gf(t),t.value=await n(t.value,r),t})},error:{name:t=>hr(t.value),info:t=>t.info??or}};function zA(t,r){if(Object.hasOwn(jd,t.type)){const e=jd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Ur(`No such prop (${r}) in ${t.type}.`)}else throw new Ur(`Cannot read prop of ${t.type}. (reading ${r})`)}const KA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Sa=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const Nw=300,WA=Nw-1;let Ln=class{constructor(r,e={}){fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);fe(this,"vars",{});this.opts=e;const n={print:me(([p])=>{Di(p),this.opts.out&&this.opts.out(p)}),readline:me(async p=>{const d=p[0];if(Es(d),this.opts.in==null)return or;const C=await this.opts.in(d.value);return hr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...VA,...n}).map(([p,d])=>[p,KA.const(d)])),this.scope=new io([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),_v("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof rp?this.opts.err(r):this.opts.err(new EA(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const p={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,p),this.scope.add(r.name+":"+n.name,p);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??or;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const p=r.scope.createChildScope(n);return UA(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return or;if(this.stepCount%Nw===WA&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Ur("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);$o(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(xa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(xa(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return or}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(Pv(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):or}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return or}case"for":{if(r.times){const n=await this._eval(r.times,e);Be(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);Be(n),Be(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:He(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return or}case"each":{const n=await this._eval(r.items,e);Gf(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:p}]])));if(d.type==="break")break;if(d.type==="return")return d}return or}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,{isMutable:r.mut,value:n}),or}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),or}case"addAssign":{const n=await this._eval(r.dest,e);Be(n);const p=await this._eval(r.expr,e);return Be(p),await this.assign(e,r.dest,He(n.value+p.value)),or}case"subAssign":{const n=await this._eval(r.dest,e);Be(n);const p=await this._eval(r.expr,e);return Be(p),await this.assign(e,r.dest,He(n.value-p.value)),or}case"null":return or;case"bool":return af(r.value);case"num":return He(r.value);case"str":return hr(r.value);case"arr":return xs(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return Bh(n)}case"prop":{const n=await this._eval(r.target,e);return Op(n)?n.value.has(r.name)?n.value.get(r.name):or:zA(n,r.name)}case"index":{const n=await this._eval(r.target,e),p=await this._eval(r.index,e);if(Rd(n)){Be(p);const d=n.value[p.value];if(d===void 0)throw new Od(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}else{if(Op(n))return Es(p),n.value.has(p.value)?n.value.get(p.value):or;throw new Ur(`Cannot read prop (${Jf(p)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return xa(n),af(!n.value)}case"fn":return IA(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return af(e.exists(r.identifier.name));case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);n+=Jf(d)}return hr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),RA(n)}case"break":return this.log("block:break",{scope:e.name}),jA();case"continue":return this.log("block:continue",{scope:e.name}),DA();case"ns":return or;case"meta":return or;case"and":{const n=await this._eval(r.left,e);if(xa(n),n.value){const p=await this._eval(r.right,e);return xa(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(xa(n),n.value)return n;{const p=await this._eval(r.right,e);return xa(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=or;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Rd(p)){if(Be(d),p.value[d.value]===void 0)throw new Od(`Index out of range. index: ${d.value} max: ${p.value.length-1}`);p.value[d.value]=n}else if(Op(p))Es(d),p.value.set(d.value,n);else throw new Ur(`Cannot read prop (${Jf(d)}) of ${p.type}.`)}else if(e.type==="prop"){const p=await this._eval(e.target,r);Ru(p),p.value.set(e.name,n)}else throw new Ur("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Sa([ws],Ln.prototype,"exec",null);Sa([ws],Ln.prototype,"execFn",null);Sa([ws],Ln.prototype,"execFnSimple",null);Sa([ws],Ln.prototype,"handleError",null);Sa([ws],Ln.prototype,"log",null);Sa([ws],Ln.prototype,"collectNs",null);Sa([ws],Ln.prototype,"collectNsMember",null);Sa([ws],Ln.prototype,"_fn",null);Sa([ws],Ln.prototype,"_eval",null);Sa([ws],Ln.prototype,"_run",null);Sa([ws],Ln.prototype,"registerAbortHandler",null);Sa([ws],Ln.prototype,"unregisterAbortHandler",null);Sa([ws],Ln.prototype,"abort",null);Sa([ws],Ln.prototype,"assign",null);Sa([ws],Ln,"collectMetadata",null);function GA(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function lf(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,lf.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}GA(lf,Error);function Ip(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}lf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=Ip("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+Ip("",p.column-1," ")+Ip("",B,"^")}else r+=`
 at `+C}return r};lf.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Dd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:hn,Main:es},d=hn,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Hr=">",Yt="+",Sr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",J="if",ee="elif",ce="else",Ce="match",ve="=>",Ae="eval",Re="exists",Ee="`",Se='"',$e="'",it='\\"',qe="\\'",Ye="true",Qe="false",ot="null",Pt=";",xt="@",Ut="@(",yt=`\r
`,lt=/^[A-Z0-9_:]/i,vr=/^[^`{]/,cs=/^[{}`]/,is=/^[+\-]/,Ct=/^[1-9]/,Rt=/^[0-9]/,En=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,el=/^[\r\n]/,tl=/^[ \t\r\n]/,lr=/^[ \t]/,Bt=Bs(),Qr=de("//",!1),qn=de("/*",!1),kt=de("*/",!1),ft=de("(",!1),Tr=de(")",!1),Gt=de("::",!1),st=de("{",!1),Lt=de("}",!1),bs=de("###",!1),Ht=de("let",!1),qt=de(":",!1),Xr=de("=",!1),Da=de("var",!1),Nr=de("<:",!1),hs=de("#[",!1),Fs=de("]",!1),ct=de("each",!1),Ot=de(",",!1),Ys=de("for",!1),Fr=de("return",!1),Or=tr([["A","Z"],["0","9"],"_",":"],!1,!0),rl=de("loop",!1),Ua=de("break",!1),sl=de("continue",!1),nl=de("+=",!1),Ba=de("-=",!1),La=de("\\",!1),al=de("||",!1),il=de("&&",!1),ll=de("==",!1),ul=de("!=",!1),Vn=de("<=",!1),en=de(">=",!1),zn=de("<",!1),Ha=de(">",!1),ol=de("+",!1),qa=de("-",!1),Os=de("*",!1),fl=de("^",!1),cl=de("/",!1),hl=de("%",!1),As=de("!",!1),Is=de("[",!1),Kn=de(".",!1),tn=de("if",!1),rn=de("elif",!1),pl=de("else",!1),sn=de("match",!1),ps=de("=>",!1),Rs=de("eval",!1),Ar=de("exists",!1),nn=de("`",!1),an=tr(["`","{"],!0,!1),ln=tr(["{","}","`"],!1,!1),vs=de('"',!1),un=de("'",!1),js=de('\\"',!1),Va=de("\\'",!1),er=tr(["+","-"],!1,!1),za=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),vl=de("true",!1),on=de("false",!1),gl=de("null",!1),Ds=de(";",!1),dl=de("@",!1),Wn=de("@(",!1),yl=tr([["A","Z"],"_"],!1,!0),Ka=tr([["A","Z"],["0","9"],"_"],!1,!0),wl=de(`\r
`,!1),ml=tr(["\r",`
`],!1,!1),Wa=tr([" ","	","\r",`
`],!1,!1),$l=tr([" ","	"],!1,!1),Ga=function(s){return s.join("")},xl=function(){return ue()},Ja=function(){return ue()},bl=function(){return""},Za=function(){return""},Al=function(s){return s??[]},Gn=function(s,u){return u},Cl=function(s,u){return[s,...u]},Jn=function(s,u){return u},_l=function(s,u){return[s,...u]},Qa=function(s,u){return u},Pl=function(s,u){return[s,...u]},kl=function(s){return s},Ml=function(s,u){return v("ns",{name:s,members:u})},El=function(s,u){return v("meta",{name:s,value:u})},Sl=function(s){return v("meta",{name:null,value:s})},Tl=function(s,u,y){return v("def",{name:s,varType:u,expr:y,mut:!1,attr:[]})},Nl=function(s,u,y){return v("def",{name:s,varType:u,expr:y,mut:!0,attr:[]})},Fl=function(s){return v("identifier",{name:"print",chain:[v("callChain",{args:[s]})]})},Ol=function(s,u){return v("attr",{name:s,value:u??v("bool",{value:!0})})},Il=function(s,u,y){return v("each",{var:s,items:u,for:y})},Rl=function(s,u,y){return v("each",{var:s,items:u,for:y})},jl=function(s,u){return u},Dl=function(s,u,y,h){return v("for",{var:s,from:u??v("num",{value:0}),to:y,for:h})},Ul=function(s,u){return u},Xa=function(s,u,y,h){return v("for",{var:s,from:u??v("num",{value:0}),to:y,for:h})},Bl=function(s,u){return v("for",{times:s,for:u})},Ll=function(s,u){return v("for",{times:s,for:u})},Hl=function(s){return v("return",{expr:s})},ql=function(s){return v("loop",{statements:s})},Vl=function(){return v("break",{})},Zn=function(){return v("continue",{})},zl=function(s,u,y){return u==="+="?v("addAssign",{dest:s,expr:y}):u==="-="?v("subAssign",{dest:s,expr:y}):v("assign",{dest:s,expr:y})},Ya=function(s,u,y){return{op:u,term:y}},Kl=function(s,u){return v("infix",{operands:[s,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Wl=function(){return ue()},Gl=function(s){return v("not",{expr:s})},ei=function(s,u){return s.chain?{...s,chain:[...s.chain,...u]}:{...s,chain:u}},Jl=function(s){return v("callChain",{args:s??[]})},Qn=function(s,u){return u},Zl=function(s,u){return[s,...u]},Ql=function(s){return v("indexChain",{index:s})},Xl=function(s){return v("propChain",{name:s})},Yl=function(s,u,y,h){return v("if",{cond:s,then:u,elseif:y??[],else:h})},eu=function(s,u){return[s,...u]},ti=function(s,u){return{cond:s,then:u}},ri=function(s){return s},si=function(s,u,y){return{q:u,a:y}},ni=function(s,u,y){return v("match",{about:s,qs:u??[],default:y})},tu=function(s){return v("block",{statements:s})},ru=function(s){return v("exists",{identifier:s})},ai=function(s){return v("identifier",{name:s})},su=function(s){return v("tmpl",{tmpl:s})},ii=function(s){return s.join("")},li=function(s){return s},nu=function(s){return v("str",{value:s.join("")})},ui=function(s){return s},au=function(s){return v("str",{value:s.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return v("num",{value:parseFloat(ue())})},fi=function(){return v("num",{value:parseFloat(ue())})},uu=function(){return v("num",{value:parseInt(ue(),10)})},ou=function(){return v("num",{value:parseInt(ue(),10)})},ci=function(){return v("bool",{value:!0})},fu=function(){return v("bool",{value:!1})},hi=function(){return v("null",{})},Xn=function(s,u){return{k:s,v:u}},cu=function(s){const u=new Map;for(const y of s)u.set(y.k,y.v);return v("obj",{value:u})},Yn=function(s){return s},hu=function(s){return v("arr",{value:s})},pu=function(s,u){return{name:s,argType:u}},pi=function(s,u){return[s,...u]},vu=function(s,u,y,h,x,m){return(s.length>0||y.length>0)&&du("Cannot use spaces before or after the function name."),v("def",{name:u,expr:v("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},vi=function(s,u,y){return v("fn",{args:s??[],retType:u},y??[])},gi=function(s){return s},gu=function(s){return v("arr",{value:s})},di=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const y of s)u.set(y.k,y.v);return v("obj",{value:u})},te=function(s,u){return v("fnTypeSource",{args:s??[],result:u})},Cs=function(s,u){return[s,...u]},yr=function(s,u){return v("namedTypeSource",{name:s,inner:u})},fn=function(s){return v("namedTypeSource",{name:s,inner:null})},i=function(){return ue()},N=function(){return ue()},Yr=function(s){return v("block",{statements:s??[]})},o=0,X=0,O=[{line:1,column:1}],R=0,_t=[],F=0,V={},Us;if("startRule"in r){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function ue(){return t.substring(X,o)}function D(){return cn(X,o)}function du(s,u){throw u=u!==void 0?u:cn(X,o),_s(s,u)}function de(s,u){return{type:"literal",text:s,ignoreCase:u}}function tr(s,u,y){return{type:"class",parts:s,inverted:u,ignoreCase:y}}function Bs(){return{type:"any"}}function U(){return{type:"end"}}function yi(s){var u=O[s],y;if(u)return u;for(y=s-1;!O[y];)y--;for(u=O[y],u={line:u.line,column:u.column};y<s;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return O[s]=u,u}function cn(s,u,y){var h=yi(s),x=yi(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function j(s){o<R||(o>R&&(R=o,_t=[]),_t.push(s))}function _s(s,u){return new lf(s,null,null,u)}function ea(s,u,y){return new lf(lf.buildMessage(s,u),s,u,y)}function hn(){var s,u,y,h=o*77+0,x=V[h];if(x)return o=x.nextPos,x.result;for(s=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return X=s,u=Ga(u),s=u,V[h]={nextPos:o,result:s},s}function Ps(){var s,u,y=o*77+1,h=V[y];return h?(o=h.nextPos,h.result):(s=o,u=dn(),u!==e&&(X=s,u=xl()),s=u,s===e&&(s=o,u=oa(),u!==e&&(X=s,u=Ja()),s=u,s===e&&(s=et(),s===e&&(t.length>o?(s=t.charAt(o),o++):(s=e,F===0&&j(Bt))))),V[y]={nextPos:o,result:s},s)}function et(){var s,u,y,h,x,m,_=o*77+2,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&j(Qr)),u!==e){for(y=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=s,s=bl()}else o=s,s=e;if(s===e)if(s=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&j(qn)),u!==e){for(y=[],h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===M?(h=M,o+=2):(h=e,F===0&&j(kt)),h!==e?(X=s,s=Za()):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function es(){var s,u,y,h,x,m=o*77+3,_=V[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=pn(),y===e&&(y=null),h=[],x=l();x!==e;)h.push(x),x=l();return X=s,s=Al(y),V[m]={nextPos:o,result:s},s}function pn(){var s,u,y,h,x,m,_,A,S=o*77+4,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=Xe(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=Cl(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Ir(){var s,u,y,h,x,m,_,A,S=o*77+5,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=gs(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=_l(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Cr(){var s,u,y,h,x,m,_,A,S=o*77+6,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=ks(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=Pl(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Xe(){var s,u=o*77+7,y=V[u];return y?(o=y.nextPos,y.result):(s=mi(),s===e&&(s=yu(),s===e&&(s=ks())),V[u]={nextPos:o,result:s},s)}function gs(){var s,u=o*77+8,y=V[u];return y?(o=y.nextPos,y.result):(s=$i(),s===e&&(s=tt(),s===e&&(s=mi())),V[u]={nextPos:o,result:s},s)}function ks(){var s,u=o*77+9,y=V[u];return y?(o=y.nextPos,y.result):(s=$i(),s===e&&(s=tt(),s===e&&(s=wu(),s===e&&(s=$u(),s===e&&(s=mu(),s===e&&(s=rs(),s===e&&(s=xi(),s===e&&(s=xu(),s===e&&(s=bi(),s===e&&(s=ss(),s===e&&(s=ta(),s===e&&(s=We()))))))))))),V[u]={nextPos:o,result:s},s)}function We(){var s,u=o*77+10,y=V[u];return y?(o=y.nextPos,y.result):(s=Ai(),s===e&&(s=Ls()),V[u]={nextPos:o,result:s},s)}function Ls(){var s,u=o*77+11,y=V[u];return y?(o=y.nextPos,y.result):(s=Pi(),s===e&&(s=Pu(),s===e&&(s=Ci(),s===e&&(s=wi()))),V[u]={nextPos:o,result:s},s)}function wi(){var s,u,y,h,x,m,_=o*77+12,A=V[_];if(A)return o=A.nextPos,A.result;if(s=gn(),s===e&&(s=aa(),s===e&&(s=ia(),s===e&&(s=dn(),s===e&&(s=oa(),s===e&&(s=Ei(),s===e&&(s=va(),s===e&&(s=da(),s===e&&(s=wr(),s===e&&(s=_u(),s===e&&(s=sa(),s===e&&(s=la(),s===e))))))))))))if(s=o,t.charCodeAt(o)===40?(u=T,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e?(X=s,s=kl(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function ts(){var s,u=o*77+13,y=V[u];return y?(o=y.nextPos,y.result):(s=Ei(),s===e&&(s=oa(),s===e&&(s=va(),s===e&&(s=Ms(),s===e&&(s=ur(),s===e&&(s=da()))))),V[u]={nextPos:o,result:s},s)}function mi(){var s,u,y,h,x,m,_,A,S,I,H=o*77+14,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===B?(u=B,o+=2):(u=e,F===0&&j(Gt)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=L,o++):(m=e,F===0&&j(st)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Ir(),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();t.charCodeAt(o)===125?(I=W,o++):(I=e,F===0&&j(Lt)),I!==e?(X=s,s=Ml(h,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function yu(){var s,u,y,h,x,m,_=o*77+15,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=ts(),m!==e?(X=s,s=El(h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();h=ts(),h!==e?(X=s,s=Sl(h)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function $i(){var s,u,y,h,x,m,_,A,S,I=o*77+16,H=V[I];if(H)return o=H.nextPos,H.result;if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Ht)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=Ge(),S!==e?x=S:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=We(),S!==e?(X=s,s=Tl(h,x,S)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===Z?(u=Z,o+=3):(u=e,F===0&&j(Da)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=Ge(),S!==e?x=S:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=We(),S!==e?(X=s,s=Nl(h,x,S)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[I]={nextPos:o,result:s},s}function wu(){var s,u,y,h,x=o*77+17,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&j(Nr)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();h=We(),h!==e?(X=s,s=Fl(h)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function mu(){var s,u,y,h,x,m,_,A=o*77+18,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,t.substr(o,2)===G?(u=G,o+=2):(u=e,F===0&&j(hs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=ts(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=Q,o++):(_=e,F===0&&j(Fs)),_!==e?(X=s,s=Ol(h,x)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[A]={nextPos:o,result:s},s}function rs(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+19,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===ie?(x=ie,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();for(t.charCodeAt(o)===44?(S=Y,o++):(S=e,F===0&&j(Ot)),S===e&&(S=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e)if(t.charCodeAt(o)===41?(z=E,o++):(z=e,F===0&&j(Tr)),z!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(X=s,s=Il(_,H,Fe)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===ie?(h=ie,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();if(I=We(),I!==e){if(H=[],z=l(),z!==e)for(;z!==e;)H.push(z),z=l();else H=e;H!==e?(z=b(),z!==e?(X=s,s=Rl(m,I,z)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function xi(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt=o*77+20,dt=V[gt];if(dt)return o=dt.nextPos,dt.result;if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===ie?(x=ie,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();if(S=o,t.charCodeAt(o)===61?(I=be,o++):(I=e,F===0&&j(Xr)),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();z=We(),z!==e?(X=S,S=jl(_,z)):(o=S,S=e)}else o=S,S=e;for(S===e&&(S=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&j(Ot)),I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();if(z=We(),z!==e)if(t.charCodeAt(o)===41?(se=E,o++):(se=e,F===0&&j(Tr)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=b(),ye!==e?(X=s,s=Dl(_,S,z,ye)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===ie?(h=ie,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(S=be,o++):(S=e,F===0&&j(Xr)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=We(),H!==e?(X=A,A=Ul(m,H)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(S=Y,o++):(S=e,F===0&&j(Ot)),S===e&&(S=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(X=s,s=Xa(m,A,H,se)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(x=We(),x!==e)if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(X=s,s=Bl(x,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(X=s,s=Ll(h,m)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e}}return V[gt]={nextPos:o,result:s},s}function $u(){var s,u,y,h,x,m=o*77+21,_=V[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&j(Fr)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=We(),x!==e?(X=s,s=Hl(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[m]={nextPos:o,result:s},s}function xu(){var s,u,y,h,x,m,_,A,S=o*77+22,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Te?(u=Te,o+=4):(u=e,F===0&&j(rl)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=W,o++):(A=e,F===0&&j(Lt)),A!==e?(X=s,s=ql(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function bi(){var s,u,y,h,x=o*77+23,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Ie?(u=Ie,o+=5):(u=e,F===0&&j(Ua)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=Vl()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ss(){var s,u,y,h,x=o*77+24,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,8)===ke?(u=ke,o+=8):(u=e,F===0&&j(sl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=Zn()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ta(){var s,u,y,h,x,m,_=o*77+25,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&j(nl)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&j(Ba)),h===e&&(t.charCodeAt(o)===61?(h=be,o++):(h=e,F===0&&j(Xr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=We(),m!==e?(X=s,s=zl(u,h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function Ai(){var s,u,y,h,x,m,_,A,S=o*77+26,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=Ls(),u!==e){for(y=[],h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Ls(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Ls(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e}else y=e;y!==e?(X=s,s=Kl(u,y)):(o=s,s=e)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function ns(){var s,u,y,h=o*77+27,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(y=w(),y!==e?(u=[u,y],s=u):(o=s,s=e)):(o=s,s=e),s===e&&(s=$()),V[h]={nextPos:o,result:s},s)}function ra(){var s,u,y=o*77+28,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===At?(u=At,o+=2):(u=e,F===0&&j(al)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&j(il)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&j(ll)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&j(ul)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&j(Vn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&j(en)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&j(zn)),u===e&&(t.charCodeAt(o)===62?(u=Hr,o++):(u=e,F===0&&j(Ha)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&j(ol)),u===e&&(t.charCodeAt(o)===45?(u=Sr,o++):(u=e,F===0&&j(qa)),u===e&&(t.charCodeAt(o)===42?(u=ir,o++):(u=e,F===0&&j(Os)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&j(fl)),u===e&&(t.charCodeAt(o)===47?(u=Jr,o++):(u=e,F===0&&j(cl)),u===e&&(t.charCodeAt(o)===37?(u=nr,o++):(u=e,F===0&&j(hl))))))))))))))),u!==e&&(X=s,u=Wl()),s=u,V[y]={nextPos:o,result:s},s)}function sa(){var s,u,y,h=o*77+29,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===33?(u=Zr,o++):(u=e,F===0&&j(As)),u!==e?(y=We(),y!==e?(X=s,s=Gl(y)):(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function Ci(){var s,u,y,h,x=o*77+30,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,u=wi(),u!==e){if(y=[],h=na(),h===e&&(h=_i(),h===e&&(h=Hs())),h!==e)for(;h!==e;)y.push(h),h=na(),h===e&&(h=_i(),h===e&&(h=Hs()));else y=e;y!==e?(X=s,s=ei(u,y)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function na(){var s,u,y,h,x,m,_=o*77+31,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===40?(u=T,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=bu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e?(X=s,s=Jl(h)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function bu(){var s,u,y,h,x,m,_=o*77+32,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);X=s,s=Zl(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function _i(){var s,u,y,h,x,m,_=o*77+33,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=Ql(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function Hs(){var s,u,y,h=o*77+34,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===46?(u=Pr,o++):(u=e,F===0&&j(Kn)),u!==e?(y=ne(),y!==e?(X=s,s=Xl(y)):(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function Pi(){var s,u,y,h,x,m,_,A,S,I,H=o*77+35,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===J?(u=J,o+=2):(u=e,F===0&&j(tn)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],S=l(),S!==e)for(;S!==e;)A.push(S),S=l();else A=e;if(A!==e?(S=ki(),S!==e?_=S:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;S!==e?(I=Au(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),X=s,s=Yl(h,m,_,A)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ki(){var s,u,y,h,x,m,_=o*77+36,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=vn(),u!==e){for(y=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=vn(),m!==e?h=m:(o=h,h=e);h!==e;){for(y.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=vn(),m!==e?h=m:(o=h,h=e)}X=s,s=eu(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function vn(){var s,u,y,h,x,m,_,A=o*77+37,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&j(rn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(X=s,s=ti(x,_)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e;return V[A]={nextPos:o,result:s},s}function Au(){var s,u,y,h,x,m=o*77+38,_=V[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,4)===ce?(u=ce,o+=4):(u=e,F===0&&j(pl)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(X=s,s=ri(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[m]={nextPos:o,result:s},s}function gn(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt,dt,ku=o*77+39,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(s=o,t.substr(o,5)===Ce?(u=Ce,o+=5):(u=e,F===0&&j(sn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=L,o++):(_=e,F===0&&j(st)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();if(S=[],I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(S.push(I),I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else S=e;if(S!==e){if(I=o,t.charCodeAt(o)===42?(H=ir,o++):(H=e,F===0&&j(Os)),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=ye}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();t.charCodeAt(o)===125?(z=W,o++):(z=e,F===0&&j(Lt)),z!==e?(X=s,s=ni(x,S,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;else o=s,s=e;return V[ku]={nextPos:o,result:s},s}function aa(){var s,u,y,h,x,m,_,A,S=o*77+40,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Ae?(u=Ae,o+=4):(u=e,F===0&&j(Rs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=W,o++):(A=e,F===0&&j(Lt)),A!==e?(X=s,s=tu(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function ia(){var s,u,y,h,x=o*77+41,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,6)===Re?(u=Re,o+=6):(u=e,F===0&&j(Ar)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;y!==e?(h=la(),h!==e?(X=s,s=ru(h)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function la(){var s,u,y=o*77+42,h=V[y];return h?(o=h.nextPos,h.result):(s=o,u=f(),u!==e&&(X=s,u=ai(u)),s=u,V[y]={nextPos:o,result:s},s)}function dn(){var s,u,y,h,x,m,_=o*77+43,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===96?(u=Ee,o++):(u=e,F===0&&j(nn)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ee,o++):(m=e,F===0&&j(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ee,o++):(m=e,F===0&&j(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Ee,o++):(h=e,F===0&&j(nn)),h!==e?(X=s,s=su(y)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function ua(){var s,u,y,h,x,m,_=o*77+44,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=We(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=W,o++):(m=e,F===0&&j(Lt)),m!==e?s=h:(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,u=[],y=yn(),y!==e)for(;y!==e;)u.push(y),y=yn();else u=e;u!==e&&(X=s,u=ii(u)),s=u}return V[_]={nextPos:o,result:s},s}function yn(){var s,u=o*77+45,y=V[u];return y?(o=y.nextPos,y.result):(s=Mi(),s===e&&(vr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(an))),V[u]={nextPos:o,result:s},s)}function Mi(){var s,u,y,h=o*77+46,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(cs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&j(ln)),y!==e?s=y:(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function oa(){var s,u,y,h,x,m,_=o*77+47,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===34?(u=Se,o++):(u=e,F===0&&j(vs)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Se,o++):(h=e,F===0&&j(vs)),h!==e?(X=s,s=nu(y)):(o=s,s=e)}else o=s,s=e;if(s===e)if(s=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&j(un)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&j(un)),h!==e?(X=s,s=au(y)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function fa(){var s,u,y=o*77+48,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===it?(u=it,o+=2):(u=e,F===0&&j(js)),u!==e&&(X=s,u=iu()),s=u,V[y]={nextPos:o,result:s},s)}function ca(){var s,u,y=o*77+49,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===qe?(u=qe,o+=2):(u=e,F===0&&j(Va)),u!==e&&(X=s,u=oi()),s=u,V[y]={nextPos:o,result:s},s)}function Ei(){var s,u=o*77+50,y=V[u];return y?(o=y.nextPos,y.result):(s=ha(),s===e&&(s=pa()),V[u]={nextPos:o,result:s},s)}function ha(){var s,u,y,h,x,m,_=o*77+51,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(h=Pr,o++):(h=e,F===0&&j(Kn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr));else x=e;x!==e?(X=s,s=lu()):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e)if(t.charCodeAt(o)===46?(y=Pr,o++):(y=e,F===0&&j(Kn)),y!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr));else h=e;h!==e?(X=s,s=fi()):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[_]={nextPos:o,result:s},s}function pa(){var s,u,y,h,x=o*77+52,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;y!==e?(X=s,s=uu()):(o=s,s=e)}else o=s,s=e;return s===e&&(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e?(X=s,s=ou()):(o=s,s=e)),V[x]={nextPos:o,result:s},s}function va(){var s,u=o*77+53,y=V[u];return y?(o=y.nextPos,y.result):(s=Cu(),s===e&&(s=ga()),V[u]={nextPos:o,result:s},s)}function Cu(){var s,u,y,h,x=o*77+54,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&j(vl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=ci()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ga(){var s,u,y,h,x=o*77+55,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&j(on)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=fu()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function da(){var s,u,y,h,x=o*77+56,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===ot?(u=ot,o+=4):(u=e,F===0&&j(gl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=hi()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function wr(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+57,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=W,o++):(x=e,F===0&&j(Lt)),x!==e?(X=s,s=cu(h)):(o=s,s=e)}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function _u(){var s,u,y,h,x,m,_,A,S,I,H=o*77+58,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=hu(h)):(o=s,s=e)}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ya(){var s,u,y,h,x,m,_,A=o*77+59,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,u=ne(),u!==e){for(y=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=Ge(),_!==e?y=_:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),X=s,s=pu(u,y)}else o=s,s=e;return V[A]={nextPos:o,result:s},s}function Si(){var s,u,y,h,x,m,_=o*77+60,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ya(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=s,s=pi(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function tt(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt,dt,ku=o*77+61,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(s=o,t.charCodeAt(o)===64?(u=xt,o++):(u=e,F===0&&j(dl)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=T,o++):(m=e,F===0&&j(ft)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Si(),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();if(t.charCodeAt(o)===41?(I=E,o++):(I=e,F===0&&j(Tr)),I!==e){for(H=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=pe,o++):(se=e,F===0&&j(qt)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=Ge(),ye!==e?H=ye:(o=H,H=e)}else o=H,H=e;for(H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=L,o++):(se=e,F===0&&j(st)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();for(ye=Cr(),ye===e&&(ye=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=W,o++):(dt=e,F===0&&j(Lt)),dt!==e?(X=s,s=vu(y,h,x,A,H,ye)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[ku]={nextPos:o,result:s},s}function Pu(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=o*77+62,ye=V[Fe];if(ye)return o=ye.nextPos,ye.result;if(s=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Si(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=o,A=[],S=l();S!==e;)A.push(S),S=l();if(t.charCodeAt(o)===58?(S=pe,o++):(S=e,F===0&&j(qt)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=Ge(),H!==e?_=H:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],S=l();S!==e;)A.push(S),S=l();if(t.charCodeAt(o)===123?(S=L,o++):(S=e,F===0&&j(st)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();for(H=Cr(),H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=W,o++):(se=e,F===0&&j(Lt)),se!==e?(X=s,s=vi(h,_,H)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[Fe]={nextPos:o,result:s},s}function Ms(){var s,u,y,h,x,m,_,A,S,I,H=o*77+63,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=gu(h)):(o=s,s=e)}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ur(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+64,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=W,o++):(x=e,F===0&&j(Lt)),x!==e?(X=s,s=c(h)):(o=s,s=e)}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function Ge(){var s,u=o*77+65,y=V[u];return y?(o=y.nextPos,y.result):(s=Ti(),s===e&&(s=De()),V[u]={nextPos:o,result:s},s)}function Ti(){var s,u,y,h,x,m,_,A,S,I,H=o*77+66,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===ve?(A=ve,o+=2):(A=e,F===0&&j(ps)),A!==e){for(S=[],I=l();I!==e;)S.push(I),I=l();I=Ge(),I!==e?(X=s,s=te(h,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function k(){var s,u,y,h,x,m,_=o*77+67,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ge(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=s,s=Cs(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function De(){var s,u,y,h,x,m,_,A,S=o*77+68,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=ne(),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&j(zn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ge(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Hr,o++):(A=e,F===0&&j(Ha)),A!==e?(X=s,s=yr(u,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return s===e&&(s=o,u=ne(),u!==e&&(X=s,u=fn(u)),s=u),V[S]={nextPos:o,result:s},s}function ne(){var s,u,y,h,x=o*77+69,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,En.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(yl)),u!==e){for(y=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));h!==e;)y.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));X=s,s=i()}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function f(){var s,u,y,h,x,m,_=o*77+70,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ne(),u!==e){for(y=[],h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=s,s=N()}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function g(){var s,u,y,h,x,m=o*77+71,_=V[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&j(Ot)),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,y,h],s=u}else o=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return V[m]={nextPos:o,result:s},s}function b(){var s,u,y,h,x,m,_=o*77+72,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Cr(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=W,o++):(m=e,F===0&&j(Lt)),m!==e?(X=s,s=Yr(h)):(o=s,s=e)}else o=s,s=e;return s===e&&(s=ks()),V[_]={nextPos:o,result:s},s}function w(){var s,u=o*77+73,y=V[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===yt?(s=yt,o+=2):(s=e,F===0&&j(wl)),s===e&&(el.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(ml))),V[u]={nextPos:o,result:s},s)}function a(){var s,u,y=o*77+74,h=V[y];return h?(o=h.nextPos,h.result):(s=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&j(Bt)),F--,u===e?s=void 0:(o=s,s=e),s===e&&(s=w()),V[y]={nextPos:o,result:s},s)}function l(){var s,u=o*77+75,y=V[u];return y?(o=y.nextPos,y.result):(tl.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(Wa)),V[u]={nextPos:o,result:s},s)}function $(){var s,u=o*77+76,y=V[u];return y?(o=y.nextPos,y.result):(lr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j($l)),V[u]={nextPos:o,result:s},s)}function v(s,u,y){const h={type:s};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Us=d(),Us!==e&&o===t.length)return Us;throw Us!==e&&o<t.length&&j(U()),ea(_t,R<t.length?t.charAt(R):null,R<t.length?cn(R,R+1):cn(R,R))}const JA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function ZA(t){return JA.includes(t.type)}function Fw(t){return"chain"in t&&t.chain!==null}function QA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function XA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function YA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function St(t,r){const e=r(t);switch(e.type){case"def":{e.expr=St(e.expr,r);break}case"return":{e.expr=St(e.expr,r);break}case"each":{e.items=St(e.items,r),e.for=St(e.for,r);break}case"for":{e.from!=null&&(e.from=St(e.from,r)),e.to!=null&&(e.to=St(e.to,r)),e.times!=null&&(e.times=St(e.times,r)),e.for=St(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=St(e.expr,r),e.dest=St(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=St(e.operands[n],r);break}case"not":{e.expr=St(e.expr,r);break}case"if":{e.cond=St(e.cond,r),e.then=St(e.then,r);for(const n of e.elseif)n.cond=St(n.cond,r),n.then=St(n.then,r);e.else!=null&&(e.else=St(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=St(e.children[n],r);break}case"match":{e.about=St(e.about,r);for(const n of e.qs)n.q=St(n.q,r),n.a=St(n.a,r);e.default!=null&&(e.default=St(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=St(e.statements[n],r);break}case"exists":{e.identifier=St(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=St(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],St(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=St(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"indexChain":{e.index=St(e.index,r);break}case"call":{e.target=St(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=St(e.args[n],r);break}case"index":{e.target=St(e.target,r),e.index=St(e.index,r);break}case"prop":{e.target=St(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=St(e.members[n],r);break}case"or":case"and":{e.left=St(e.left,r),e.right=St(e.right,r);break}}if(Fw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=St(e.chain[n],r);return e}const Rp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function jp(t){throw new yf(`Reserved word "${t}" cannot be used as variable name.`)}function e2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Rp.includes(t.name)&&jp(t.name);break}case"meta":{t.name!=null&&Rp.includes(t.name)&&jp(t.name);break}case"fn":{for(const r of t.args)Rp.includes(r.name)&&jp(r.name);break}}return t}function t2(t){for(const r of t)St(r,e2);return t}function Ud(t){return{type:"simple",name:t}}function r2(t,r){return{type:"generic",name:t,inners:r}}function s2(t,r){return{type:"fn",args:t,result:r}}function gh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=gh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>gh(n)).join(", "),e=gh(t.result);return`@(${r}) { ${e} }`}}}function Zf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Ud(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Zf(t.inner):r=Ud("any"),r2(t.name,[r])}}throw new yf(`Unknown type: '${gh(t)}'`)}else{const r=t.args.map(e=>Zf(e));return s2(r,Zf(t.result))}}function n2(t){switch(t.type){case"def":{t.varType!=null&&Zf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Zf(r.argType);t.retType!=null&&Zf(t.retType);break}}return t}function a2(t){for(const r of t)St(r,n2);return t}function dh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=dh(n.expr.children)),r.push(n);else{if(e.length>0)throw new yf("invalid attribute.");switch(n.type){case"fn":{n.children=dh(n.children);break}case"block":{n.statements=dh(n.statements);break}}r.push(n)}if(e.length>0)throw new yf("invalid attribute.");return r}function i2(t){if(ZA(t)&&Fw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=QA(n,p.args,p.loc);break}case"indexChain":{n=XA(n,p.index,p.loc);break}case"propChain":{n=YA(n,p.name,p.loc);break}}return n}return t}function l2(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],i2);return t}function yh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Ow(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return yh(t,r,e);{const{left:n,right:p,info:d}=t;return yh(n,Ow(p,r,e),d)}}function Go(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Go(t.left),Go(t.right)]}}const u2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Go(t.left),right:Go(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Go(t.left),right:Go(t.right)}),priority:3}};function o2(t){const r=t.operators.map(n=>{const p=u2[n];if(p==null)throw new yf(`No such operator: ${n}.`);return p});let e=yh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Ow(e,t.operands[2+n],r[1+n]);return Go(e)}function f2(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],e=>e.type==="infix"?o2(e):e);return t}var qu;let c2=(qu=class{constructor(){fe(this,"plugins");this.plugins={validate:[t2,a2],transform:[dh,l2,f2]}}static parse(r){return qu.instance==null&&(qu.instance=new qu),qu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Dd(r,{startRule:"Preprocess"});e=Dd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new yf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new yf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},fe(qu,"instance"),qu);const h2="0.17.0",p2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Sv=[],fc=null;function v2(t){return Sv=c2.parse(t),JSON.stringify(Sv,null,"	")}async function g2(t){fc==null||fc.abort(),fc=new Ln({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:kv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:kv(e.val,!0),print:!1});break}}});try{await fc.exec(Sv)}catch(r){t.err(r)}}const d2=Object.freeze(Object.defineProperty({__proto__:null,exec:g2,parse:v2,samples:p2,version:h2},Symbol.toStringTag,{value:"Module"}));function ms(t,r,e){let n=e.value;return{configurable:!0,get(){const p=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:p}),p},set(p){n=p}}}let sp=class Iw extends Error{constructor(e,n){super(e);fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Iw)}};class y2 extends sp{constructor(r){super(`Internal Error. ${r}`,r)}}class wf extends sp{constructor(r,e){super(r,e)}}class Br extends sp{constructor(r,e){super(r,e)}}class w2 extends Br{constructor(r,e){super(r,e)}}var Fo=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let lo=class Rw{constructor(r=[],e,n){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Rw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new Br(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Br(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){const d=p.get(r);if(!d.isMutable)throw new Br(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Br(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Fo([ms],lo.prototype,"log",null);Fo([ms],lo.prototype,"onUpdated",null);Fo([ms],lo.prototype,"createChildScope",null);Fo([ms],lo.prototype,"get",null);Fo([ms],lo.prototype,"exists",null);Fo([ms],lo.prototype,"getAll",null);Fo([ms],lo.prototype,"add",null);Fo([ms],lo.prototype,"assign",null);let eh;const m2=new Uint8Array(16);function $2(){if(!eh&&(eh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eh(m2)}const bn=[];for(let t=0;t<256;++t)bn.push((t+256).toString(16).slice(1));function x2(t,r=0){return bn[t[r+0]]+bn[t[r+1]]+bn[t[r+2]]+bn[t[r+3]]+"-"+bn[t[r+4]]+bn[t[r+5]]+"-"+bn[t[r+6]]+bn[t[r+7]]+"-"+bn[t[r+8]]+bn[t[r+9]]+"-"+bn[t[r+10]]+bn[t[r+11]]+bn[t[r+12]]+bn[t[r+13]]+bn[t[r+14]]+bn[t[r+15]]}const b2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bd={randomUUID:b2};function A2(t,r,e){if(Bd.randomUUID&&!r&&!t)return Bd.randomUUID();t=t||{};const n=t.random||(t.rng||$2)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,x2(n)}const cr={type:"null"},Gi={type:"bool",value:!0},Oi={type:"bool",value:!1},Ke=t=>({type:"num",value:t}),Dr=t=>({type:"str",value:t}),uf=t=>({type:"bool",value:t}),bg=t=>({type:"obj",value:t}),Tn=t=>({type:"arr",value:t}),C2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),xe=t=>({type:"fn",native:t}),_2=t=>({type:"return",value:t}),P2=()=>({type:"break",value:null}),k2=()=>({type:"continue",value:null}),M2=t=>t.type==="return"?t.value:t,jw=(t,r)=>({type:"error",value:t,info:r});function Ui(t){if(t==null)throw new Br("Expect anything, but got nothing.")}function ba(t){if(t==null)throw new Br("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Br(`Expect boolean, but got ${t.type}.`)}function xo(t){if(t==null)throw new Br("Expect function, but got nothing.");if(t.type!=="fn")throw new Br(`Expect function, but got ${t.type}.`)}function Ts(t){if(t==null)throw new Br("Expect string, but got nothing.");if(t.type!=="str")throw new Br(`Expect string, but got ${t.type}.`)}function Le(t){if(t==null)throw new Br("Expect number, but got nothing.");if(t.type!=="num")throw new Br(`Expect number, but got ${t.type}.`)}function ho(t){if(t==null)throw new Br("Expect object, but got nothing.");if(t.type!=="obj")throw new Br(`Expect object, but got ${t.type}.`)}function Lh(t){if(t==null)throw new Br("Expect array, but got nothing.");if(t.type!=="arr")throw new Br(`Expect array, but got ${t.type}.`)}function Dp(t){return t.type==="obj"}function Ld(t){return t.type==="arr"}function Tv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Nv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Nv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Fv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Fv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Fv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ov(t){if(t===null)return cr;if(typeof t=="boolean")return uf(t);if(typeof t=="string")return Dr(t);if(typeof t=="number")return Ke(t);if(Array.isArray(t))return Tn(t.map(r=>Ov(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Ov(n));return bg(r)}return cr}function Qf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const p of t.value)n.push(Qf(p,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[p,d]of t.value)n.push(`${p}: ${Qf(d,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const E2={help:Dr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Dr("0.16.0"),"Core:ai":Dr("kawaii"),"Core:not":xe(([t])=>(ba(t),t.value?Oi:Gi)),"Core:eq":xe(([t,r])=>(Ui(t),Ui(r),Tv(t,r)?Gi:Oi)),"Core:neq":xe(([t,r])=>(Ui(t),Ui(r),Tv(t,r)?Oi:Gi)),"Core:and":xe(([t,r])=>(ba(t),t.value?(ba(r),r.value?Gi:Oi):Oi)),"Core:or":xe(([t,r])=>(ba(t),t.value?Gi:(ba(r),r.value?Gi:Oi))),"Core:add":xe(([t,r])=>(Le(t),Le(r),Ke(t.value+r.value))),"Core:sub":xe(([t,r])=>(Le(t),Le(r),Ke(t.value-r.value))),"Core:mul":xe(([t,r])=>(Le(t),Le(r),Ke(t.value*r.value))),"Core:pow":xe(([t,r])=>{Le(t),Le(r);const e=t.value**r.value;if(isNaN(e))throw new Br("Invalid operation.");return Ke(e)}),"Core:div":xe(([t,r])=>{Le(t),Le(r);const e=t.value/r.value;if(isNaN(e))throw new Br("Invalid operation.");return Ke(e)}),"Core:mod":xe(([t,r])=>(Le(t),Le(r),Ke(t.value%r.value))),"Core:gt":xe(([t,r])=>(Le(t),Le(r),t.value>r.value?Gi:Oi)),"Core:lt":xe(([t,r])=>(Le(t),Le(r),t.value<r.value?Gi:Oi)),"Core:gteq":xe(([t,r])=>(Le(t),Le(r),t.value>=r.value?Gi:Oi)),"Core:lteq":xe(([t,r])=>(Le(t),Le(r),t.value<=r.value?Gi:Oi)),"Core:type":xe(([t])=>(Ui(t),Dr(t.type))),"Core:to_str":xe(([t])=>(Ui(t),Dr(Qf(t)))),"Core:range":xe(([t,r])=>(Le(t),Le(r),t.value<r.value?Tn(Array.from({length:r.value-t.value+1},(e,n)=>Ke(n+t.value))):t.value>r.value?Tn(Array.from({length:t.value-r.value+1},(e,n)=>Ke(t.value-n))):Tn([t]))),"Core:sleep":xe(async([t])=>(Le(t),await new Promise(r=>setTimeout(r,t.value)),cr)),"Util:uuid":xe(()=>Dr(A2())),"Json:stringify":xe(([t])=>(Ui(t),Dr(JSON.stringify(Fv(t))))),"Json:parse":xe(([t])=>{Ts(t);try{return Ov(JSON.parse(t.value))}catch{return jw("not_json")}}),"Json:parsable":xe(([t])=>{Ts(t);try{JSON.parse(t.value)}catch{return uf(!1)}return uf(!0)}),"Date:now":xe(()=>Ke(Date.now())),"Date:year":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":xe(([t])=>(Ts(t),Ke(new Date(t.value).getTime()))),"Math:Infinity":Ke(1/0),"Math:E":Ke(Math.E),"Math:LN2":Ke(Math.LN2),"Math:LN10":Ke(Math.LN10),"Math:LOG2E":Ke(Math.LOG2E),"Math:LOG10E":Ke(Math.LOG10E),"Math:PI":Ke(Math.PI),"Math:SQRT1_2":Ke(Math.SQRT1_2),"Math:SQRT2":Ke(Math.SQRT2),"Math:abs":xe(([t])=>(Le(t),Ke(Math.abs(t.value)))),"Math:acos":xe(([t])=>(Le(t),Ke(Math.acos(t.value)))),"Math:acosh":xe(([t])=>(Le(t),Ke(Math.acosh(t.value)))),"Math:asin":xe(([t])=>(Le(t),Ke(Math.asin(t.value)))),"Math:asinh":xe(([t])=>(Le(t),Ke(Math.asinh(t.value)))),"Math:atan":xe(([t])=>(Le(t),Ke(Math.atan(t.value)))),"Math:atanh":xe(([t])=>(Le(t),Ke(Math.atanh(t.value)))),"Math:atan2":xe(([t,r])=>(Le(t),Le(r),Ke(Math.atan2(t.value,r.value)))),"Math:cbrt":xe(([t])=>(Le(t),Ke(Math.cbrt(t.value)))),"Math:ceil":xe(([t])=>(Le(t),Ke(Math.ceil(t.value)))),"Math:clz32":xe(([t])=>(Le(t),Ke(Math.clz32(t.value)))),"Math:cos":xe(([t])=>(Le(t),Ke(Math.cos(t.value)))),"Math:cosh":xe(([t])=>(Le(t),Ke(Math.cosh(t.value)))),"Math:exp":xe(([t])=>(Le(t),Ke(Math.exp(t.value)))),"Math:expm1":xe(([t])=>(Le(t),Ke(Math.expm1(t.value)))),"Math:floor":xe(([t])=>(Le(t),Ke(Math.floor(t.value)))),"Math:fround":xe(([t])=>(Le(t),Ke(Math.fround(t.value)))),"Math:hypot":xe(([t])=>{Lh(t);const r=[];for(const e of t.value)Le(e),r.push(e.value);return Ke(Math.hypot(...r))}),"Math:imul":xe(([t,r])=>(Le(t),Le(r),Ke(Math.imul(t.value,r.value)))),"Math:log":xe(([t])=>(Le(t),Ke(Math.log(t.value)))),"Math:log1p":xe(([t])=>(Le(t),Ke(Math.log1p(t.value)))),"Math:log10":xe(([t])=>(Le(t),Ke(Math.log10(t.value)))),"Math:log2":xe(([t])=>(Le(t),Ke(Math.log2(t.value)))),"Math:max":xe(([t,r])=>(Le(t),Le(r),Ke(Math.max(t.value,r.value)))),"Math:min":xe(([t,r])=>(Le(t),Le(r),Ke(Math.min(t.value,r.value)))),"Math:pow":xe(([t,r])=>(Le(t),Le(r),Ke(Math.pow(t.value,r.value)))),"Math:round":xe(([t])=>(Le(t),Ke(Math.round(t.value)))),"Math:sign":xe(([t])=>(Le(t),Ke(Math.sign(t.value)))),"Math:sin":xe(([t])=>(Le(t),Ke(Math.sin(t.value)))),"Math:sinh":xe(([t])=>(Le(t),Ke(Math.sinh(t.value)))),"Math:sqrt":xe(([t])=>{Le(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Br("Invalid operation.");return Ke(r)}),"Math:tan":xe(([t])=>(Le(t),Ke(Math.tan(t.value)))),"Math:tanh":xe(([t])=>(Le(t),Ke(Math.tanh(t.value)))),"Math:trunc":xe(([t])=>(Le(t),Ke(Math.trunc(t.value)))),"Math:rnd":xe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ke(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ke(Math.random())),"Math:gen_rng":xe(([t])=>{if(Ui(t),t.type!=="num"&&t.type!=="str")return cr;const r=To(t.value.toString());return xe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Ke(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ke(r()))}),"Num:to_hex":xe(([t])=>(Le(t),Dr(t.value.toString(16)))),"Num:from_hex":xe(([t])=>(Ts(t),Ke(parseInt(t.value,16)))),"Str:lf":Dr(`
`),"Str:lt":xe(([t,r])=>(Ts(t),Ts(r),t.value<r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:gt":xe(([t,r])=>(Ts(t),Ts(r),t.value>r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:from_codepoint":xe(([t])=>(Le(t),Dr(String.fromCodePoint(t.value)))),"Obj:keys":xe(([t])=>(ho(t),Tn(Array.from(t.value.keys()).map(r=>Dr(r))))),"Obj:vals":xe(([t])=>(ho(t),Tn(Array.from(t.value.values())))),"Obj:kvs":xe(([t])=>(ho(t),Tn(Array.from(t.value.entries()).map(([r,e])=>Tn([Dr(r),e]))))),"Obj:get":xe(([t,r])=>(ho(t),Ts(r),t.value.get(r.value)??cr)),"Obj:set":xe(([t,r,e])=>(ho(t),Ts(r),Ui(e),t.value.set(r.value,e),cr)),"Obj:has":xe(([t,r])=>(ho(t),Ts(r),uf(t.value.has(r.value)))),"Obj:copy":xe(([t])=>(ho(t),bg(new Map(t.value)))),"Async:interval":xe(async([t,r,e],n)=>{Le(t),xo(r),e&&(ba(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.topCall(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),xe(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":xe(async([t,r],e)=>{Le(t),xo(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),xe(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},Hd={num:{to_str:t=>xe(async(r,e)=>Dr(t.value.toString()))},str:{to_num:t=>xe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?cr:Ke(n)}),len:t=>Ke(Cf(t.value)),replace:t=>xe(async([r,e],n)=>(Ts(r),Ts(e),Dr(t.value.split(r.value).join(e.value)))),index_of:t=>xe(async([r],e)=>(Ts(r),Ke(Pf(t.value,r.value)))),incl:t=>xe(async([r],e)=>(Ts(r),t.value.includes(r.value)?Gi:Oi)),trim:t=>xe(async(r,e)=>Dr(t.value.trim())),upper:t=>xe(async(r,e)=>Dr(t.value.toUpperCase())),lower:t=>xe(async(r,e)=>Dr(t.value.toLowerCase())),split:t=>xe(async([r],e)=>(r&&Ts(r),Tn(r?t.value.split(r?r.value:"").map(n=>Dr(n)):Qs(t.value).map(n=>Dr(n))))),slice:t=>xe(async([r,e],n)=>(Le(r),Le(e),Dr(_f(t.value,r.value,e.value)))),pick:t=>xe(async([r],e)=>{Le(r);const p=Qs(t.value)[r.value];return p?Dr(p):cr}),codepoint_at:t=>xe(([r],e)=>{Le(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?cr:Ke(n)})},arr:{len:t=>Ke(t.value.length),push:t=>xe(async([r],e)=>(Ui(r),t.value.push(r),t)),unshift:t=>xe(async([r],e)=>(Ui(r),t.value.unshift(r),t)),pop:t=>xe(async(r,e)=>t.value.pop()??cr),shift:t=>xe(async(r,e)=>t.value.shift()??cr),concat:t=>xe(async([r],e)=>(Lh(r),Tn(t.value.concat(r.value)))),slice:t=>xe(async([r,e],n)=>(Le(r),Le(e),Tn(t.value.slice(r.value,e.value)))),join:t=>xe(async([r],e)=>(r&&Ts(r),Dr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>xe(async([r],e)=>{xo(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,Ke(d)]));return Tn(await Promise.all(n))}),filter:t=>xe(async([r],e)=>{xo(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,Ke(p)]);ba(C),C.value&&n.push(d)}return Tn(n)}),reduce:t=>xe(async([r,e],n)=>{xo(r);const p=e!=null;let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,Ke(C)])}return d}),find:t=>xe(async([r],e)=>{xo(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Ke(n)]);if(ba(d),d.value)return p}return cr}),incl:t=>xe(async([r],e)=>(Ui(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Oi:(p=>p.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Gi:Oi)),reverse:t=>xe(async(r,e)=>(t.value.reverse(),cr)),copy:t=>xe(async(r,e)=>Tn([...t.value])),sort:t=>xe(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=await n(d.slice(0,P),C),T=await n(d.slice(P),C);return p(M,T,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Le(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return xo(r),Lh(t),t.value=await n(t.value,r),t})},error:{name:t=>Dr(t.value),info:t=>t.info??cr}};function S2(t,r){if(Object.hasOwn(Hd,t.type)){const e=Hd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Br(`No such prop (${r}) in ${t.type}.`)}else throw new Br(`Cannot read prop of ${t.type}. (reading ${r})`)}const T2={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ta=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const Dw=300,N2=Dw-1;let Hn=class{constructor(r,e={}){fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);fe(this,"vars",{});this.opts=e;const n={print:xe(([p])=>{Ui(p),this.opts.out&&this.opts.out(p)}),readline:xe(async p=>{const d=p[0];if(Ts(d),this.opts.in==null)return cr;const C=await this.opts.in(d.value);return Dr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...E2,...n}).map(([p,d])=>[p,T2.const(d)])),this.scope=new lo([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),jw("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof sp?this.opts.err(r):this.opts.err(new y2(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const p={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,p),this.scope.add(r.name+":"+n.name,p);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??cr;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],{isMutable:!0,value:e[d]});const p=r.scope.createChildScope(n);return M2(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return cr;if(this.stepCount%Dw===N2&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Br("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);xo(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(ba(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(ba(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return cr}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(Tv(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):cr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return cr}case"for":{if(r.times){const n=await this._eval(r.times,e);Le(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);Le(n),Le(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ke(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return cr}case"each":{const n=await this._eval(r.items,e);Lh(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:p}]])));if(d.type==="break")break;if(d.type==="return")return d}return cr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,{isMutable:r.mut,value:n}),cr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),cr}case"addAssign":{const n=await this._eval(r.dest,e);Le(n);const p=await this._eval(r.expr,e);return Le(p),await this.assign(e,r.dest,Ke(n.value+p.value)),cr}case"subAssign":{const n=await this._eval(r.dest,e);Le(n);const p=await this._eval(r.expr,e);return Le(p),await this.assign(e,r.dest,Ke(n.value-p.value)),cr}case"null":return cr;case"bool":return uf(r.value);case"num":return Ke(r.value);case"str":return Dr(r.value);case"arr":return Tn(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return bg(n)}case"prop":{const n=await this._eval(r.target,e);return Dp(n)?n.value.has(r.name)?n.value.get(r.name):cr:S2(n,r.name)}case"index":{const n=await this._eval(r.target,e),p=await this._eval(r.index,e);if(Ld(n)){Le(p);const d=n.value[p.value];if(d===void 0)throw new w2(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}else{if(Dp(n))return Ts(p),n.value.has(p.value)?n.value.get(p.value):cr;throw new Br(`Cannot read prop (${Qf(p)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return ba(n),uf(!n.value)}case"fn":return C2(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return uf(e.exists(r.identifier.name));case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);n+=Qf(d)}return Dr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),_2(n)}case"break":return this.log("block:break",{scope:e.name}),P2();case"continue":return this.log("block:continue",{scope:e.name}),k2();case"ns":return cr;case"meta":return cr;case"and":{const n=await this._eval(r.left,e);if(ba(n),n.value){const p=await this._eval(r.right,e);return ba(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(ba(n),n.value)return n;{const p=await this._eval(r.right,e);return ba(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=cr;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Ld(p))Le(d),p.value[d.value]=n;else if(Dp(p))Ts(d),p.value.set(d.value,n);else throw new Br(`Cannot read prop (${Qf(d)}) of ${p.type}.`)}else if(e.type==="prop"){const p=await this._eval(e.target,r);ho(p),p.value.set(e.name,n)}else throw new Br("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ta([ms],Hn.prototype,"exec",null);Ta([ms],Hn.prototype,"execFn",null);Ta([ms],Hn.prototype,"execFnSimple",null);Ta([ms],Hn.prototype,"handleError",null);Ta([ms],Hn.prototype,"log",null);Ta([ms],Hn.prototype,"collectNs",null);Ta([ms],Hn.prototype,"collectNsMember",null);Ta([ms],Hn.prototype,"_fn",null);Ta([ms],Hn.prototype,"_eval",null);Ta([ms],Hn.prototype,"_run",null);Ta([ms],Hn.prototype,"registerAbortHandler",null);Ta([ms],Hn.prototype,"unregisterAbortHandler",null);Ta([ms],Hn.prototype,"abort",null);Ta([ms],Hn.prototype,"assign",null);Ta([ms],Hn,"collectMetadata",null);function F2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function of(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,of.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}F2(of,Error);function Up(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}of.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=Up("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+Up("",p.column-1," ")+Up("",B,"^")}else r+=`
 at `+C}return r};of.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function qd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:hn,Main:es},d=hn,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Hr=">",Yt="+",Sr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",J="if",ee="elif",ce="else",Ce="match",ve="=>",Ae="eval",Re="exists",Ee="`",Se='"',$e="'",it='\\"',qe="\\'",Ye="true",Qe="false",ot="null",Pt=";",xt="@",Ut="@(",yt=`\r
`,lt=/^[A-Z0-9_:]/i,vr=/^[^`{]/,cs=/^[{}`]/,is=/^[+\-]/,Ct=/^[1-9]/,Rt=/^[0-9]/,En=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,el=/^[\r\n]/,tl=/^[ \t\r\n]/,lr=/^[ \t]/,Bt=Bs(),Qr=de("//",!1),qn=de("/*",!1),kt=de("*/",!1),ft=de("(",!1),Tr=de(")",!1),Gt=de("::",!1),st=de("{",!1),Lt=de("}",!1),bs=de("###",!1),Ht=de("let",!1),qt=de(":",!1),Xr=de("=",!1),Da=de("var",!1),Nr=de("<:",!1),hs=de("#[",!1),Fs=de("]",!1),ct=de("each",!1),Ot=de(",",!1),Ys=de("for",!1),Fr=de("return",!1),Or=tr([["A","Z"],["0","9"],"_",":"],!1,!0),rl=de("loop",!1),Ua=de("break",!1),sl=de("continue",!1),nl=de("+=",!1),Ba=de("-=",!1),La=de("\\",!1),al=de("||",!1),il=de("&&",!1),ll=de("==",!1),ul=de("!=",!1),Vn=de("<=",!1),en=de(">=",!1),zn=de("<",!1),Ha=de(">",!1),ol=de("+",!1),qa=de("-",!1),Os=de("*",!1),fl=de("^",!1),cl=de("/",!1),hl=de("%",!1),As=de("!",!1),Is=de("[",!1),Kn=de(".",!1),tn=de("if",!1),rn=de("elif",!1),pl=de("else",!1),sn=de("match",!1),ps=de("=>",!1),Rs=de("eval",!1),Ar=de("exists",!1),nn=de("`",!1),an=tr(["`","{"],!0,!1),ln=tr(["{","}","`"],!1,!1),vs=de('"',!1),un=de("'",!1),js=de('\\"',!1),Va=de("\\'",!1),er=tr(["+","-"],!1,!1),za=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),vl=de("true",!1),on=de("false",!1),gl=de("null",!1),Ds=de(";",!1),dl=de("@",!1),Wn=de("@(",!1),yl=tr([["A","Z"],"_"],!1,!0),Ka=tr([["A","Z"],["0","9"],"_"],!1,!0),wl=de(`\r
`,!1),ml=tr(["\r",`
`],!1,!1),Wa=tr([" ","	","\r",`
`],!1,!1),$l=tr([" ","	"],!1,!1),Ga=function(s){return s.join("")},xl=function(){return ue()},Ja=function(){return ue()},bl=function(){return""},Za=function(){return""},Al=function(s){return s??[]},Gn=function(s,u){return u},Cl=function(s,u){return[s,...u]},Jn=function(s,u){return u},_l=function(s,u){return[s,...u]},Qa=function(s,u){return u},Pl=function(s,u){return[s,...u]},kl=function(s){return s},Ml=function(s,u){return v("ns",{name:s,members:u})},El=function(s,u){return v("meta",{name:s,value:u})},Sl=function(s){return v("meta",{name:null,value:s})},Tl=function(s,u,y){return v("def",{name:s,varType:u,expr:y,mut:!1,attr:[]})},Nl=function(s,u,y){return v("def",{name:s,varType:u,expr:y,mut:!0,attr:[]})},Fl=function(s){return v("identifier",{name:"print",chain:[v("callChain",{args:[s]})]})},Ol=function(s,u){return v("attr",{name:s,value:u??v("bool",{value:!0})})},Il=function(s,u,y){return v("each",{var:s,items:u,for:y})},Rl=function(s,u,y){return v("each",{var:s,items:u,for:y})},jl=function(s,u){return u},Dl=function(s,u,y,h){return v("for",{var:s,from:u??v("num",{value:0}),to:y,for:h})},Ul=function(s,u){return u},Xa=function(s,u,y,h){return v("for",{var:s,from:u??v("num",{value:0}),to:y,for:h})},Bl=function(s,u){return v("for",{times:s,for:u})},Ll=function(s,u){return v("for",{times:s,for:u})},Hl=function(s){return v("return",{expr:s})},ql=function(s){return v("loop",{statements:s})},Vl=function(){return v("break",{})},Zn=function(){return v("continue",{})},zl=function(s,u,y){return u==="+="?v("addAssign",{dest:s,expr:y}):u==="-="?v("subAssign",{dest:s,expr:y}):v("assign",{dest:s,expr:y})},Ya=function(s,u,y){return{op:u,term:y}},Kl=function(s,u){return v("infix",{operands:[s,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Wl=function(){return ue()},Gl=function(s){return v("not",{expr:s})},ei=function(s,u){return{...s,chain:u}},Jl=function(s){return v("callChain",{args:s??[]})},Qn=function(s,u){return u},Zl=function(s,u){return[s,...u]},Ql=function(s){return v("indexChain",{index:s})},Xl=function(s){return v("propChain",{name:s})},Yl=function(s,u,y,h){return v("if",{cond:s,then:u,elseif:y??[],else:h})},eu=function(s,u){return[s,...u]},ti=function(s,u){return{cond:s,then:u}},ri=function(s){return s},si=function(s,u,y){return{q:u,a:y}},ni=function(s,u,y){return v("match",{about:s,qs:u??[],default:y})},tu=function(s){return v("block",{statements:s})},ru=function(s){return v("exists",{identifier:s})},ai=function(s){return v("identifier",{name:s})},su=function(s){return v("tmpl",{tmpl:s})},ii=function(s){return s.join("")},li=function(s){return s},nu=function(s){return v("str",{value:s.join("")})},ui=function(s){return s},au=function(s){return v("str",{value:s.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return v("num",{value:parseFloat(ue())})},fi=function(){return v("num",{value:parseFloat(ue())})},uu=function(){return v("num",{value:parseInt(ue(),10)})},ou=function(){return v("num",{value:parseInt(ue(),10)})},ci=function(){return v("bool",{value:!0})},fu=function(){return v("bool",{value:!1})},hi=function(){return v("null",{})},Xn=function(s,u){return{k:s,v:u}},cu=function(s){const u=new Map;for(const y of s)u.set(y.k,y.v);return v("obj",{value:u})},Yn=function(s){return s},hu=function(s){return v("arr",{value:s})},pu=function(s,u){return{name:s,argType:u}},pi=function(s,u){return[s,...u]},vu=function(s,u,y,h,x,m){return(s.length>0||y.length>0)&&du("Cannot use spaces before or after the function name."),v("def",{name:u,expr:v("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},vi=function(s,u,y){return v("fn",{args:s??[],retType:u},y??[])},gi=function(s){return s},gu=function(s){return v("arr",{value:s})},di=function(s,u){return{k:s,v:u}},c=function(s){const u=new Map;for(const y of s)u.set(y.k,y.v);return v("obj",{value:u})},te=function(s,u){return v("fnTypeSource",{args:s??[],result:u})},Cs=function(s,u){return[s,...u]},yr=function(s,u){return v("namedTypeSource",{name:s,inner:u})},fn=function(s){return v("namedTypeSource",{name:s,inner:null})},i=function(){return ue()},N=function(){return ue()},Yr=function(s){return v("block",{statements:s??[]})},o=0,X=0,O=[{line:1,column:1}],R=0,_t=[],F=0,V={},Us;if("startRule"in r){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function ue(){return t.substring(X,o)}function D(){return cn(X,o)}function du(s,u){throw u=u!==void 0?u:cn(X,o),_s(s,u)}function de(s,u){return{type:"literal",text:s,ignoreCase:u}}function tr(s,u,y){return{type:"class",parts:s,inverted:u,ignoreCase:y}}function Bs(){return{type:"any"}}function U(){return{type:"end"}}function yi(s){var u=O[s],y;if(u)return u;for(y=s-1;!O[y];)y--;for(u=O[y],u={line:u.line,column:u.column};y<s;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return O[s]=u,u}function cn(s,u,y){var h=yi(s),x=yi(u),m={source:n,start:{offset:s,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function j(s){o<R||(o>R&&(R=o,_t=[]),_t.push(s))}function _s(s,u){return new of(s,null,null,u)}function ea(s,u,y){return new of(of.buildMessage(s,u),s,u,y)}function hn(){var s,u,y,h=o*77+0,x=V[h];if(x)return o=x.nextPos,x.result;for(s=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return X=s,u=Ga(u),s=u,V[h]={nextPos:o,result:s},s}function Ps(){var s,u,y=o*77+1,h=V[y];return h?(o=h.nextPos,h.result):(s=o,u=dn(),u!==e&&(X=s,u=xl()),s=u,s===e&&(s=o,u=oa(),u!==e&&(X=s,u=Ja()),s=u,s===e&&(s=et(),s===e&&(t.length>o?(s=t.charAt(o),o++):(s=e,F===0&&j(Bt))))),V[y]={nextPos:o,result:s},s)}function et(){var s,u,y,h,x,m,_=o*77+2,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&j(Qr)),u!==e){for(y=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=s,s=bl()}else o=s,s=e;if(s===e)if(s=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&j(qn)),u!==e){for(y=[],h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.substr(o,2)===M?(m=M,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===M?(h=M,o+=2):(h=e,F===0&&j(kt)),h!==e?(X=s,s=Za()):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function es(){var s,u,y,h,x,m=o*77+3,_=V[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=pn(),y===e&&(y=null),h=[],x=l();x!==e;)h.push(x),x=l();return X=s,s=Al(y),V[m]={nextPos:o,result:s},s}function pn(){var s,u,y,h,x,m,_,A,S=o*77+4,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=Xe(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=Cl(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Ir(){var s,u,y,h,x,m,_,A,S=o*77+5,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=gs(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=_l(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Cr(){var s,u,y,h,x,m,_,A,S=o*77+6,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=ks(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e}X=s,s=Pl(u,y)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function Xe(){var s,u=o*77+7,y=V[u];return y?(o=y.nextPos,y.result):(s=mi(),s===e&&(s=yu(),s===e&&(s=ks())),V[u]={nextPos:o,result:s},s)}function gs(){var s,u=o*77+8,y=V[u];return y?(o=y.nextPos,y.result):(s=$i(),s===e&&(s=tt(),s===e&&(s=mi())),V[u]={nextPos:o,result:s},s)}function ks(){var s,u=o*77+9,y=V[u];return y?(o=y.nextPos,y.result):(s=$i(),s===e&&(s=tt(),s===e&&(s=wu(),s===e&&(s=$u(),s===e&&(s=mu(),s===e&&(s=rs(),s===e&&(s=xi(),s===e&&(s=xu(),s===e&&(s=bi(),s===e&&(s=ss(),s===e&&(s=ta(),s===e&&(s=We()))))))))))),V[u]={nextPos:o,result:s},s)}function We(){var s,u=o*77+10,y=V[u];return y?(o=y.nextPos,y.result):(s=Ai(),s===e&&(s=Ls()),V[u]={nextPos:o,result:s},s)}function Ls(){var s,u=o*77+11,y=V[u];return y?(o=y.nextPos,y.result):(s=Pi(),s===e&&(s=Pu(),s===e&&(s=Ci(),s===e&&(s=wi()))),V[u]={nextPos:o,result:s},s)}function wi(){var s,u,y,h,x,m,_=o*77+12,A=V[_];if(A)return o=A.nextPos,A.result;if(s=gn(),s===e&&(s=aa(),s===e&&(s=ia(),s===e&&(s=dn(),s===e&&(s=oa(),s===e&&(s=Ei(),s===e&&(s=va(),s===e&&(s=da(),s===e&&(s=wr(),s===e&&(s=_u(),s===e&&(s=sa(),s===e&&(s=la(),s===e))))))))))))if(s=o,t.charCodeAt(o)===40?(u=T,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e?(X=s,s=kl(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function ts(){var s,u=o*77+13,y=V[u];return y?(o=y.nextPos,y.result):(s=Ei(),s===e&&(s=oa(),s===e&&(s=va(),s===e&&(s=Ms(),s===e&&(s=ur(),s===e&&(s=da()))))),V[u]={nextPos:o,result:s},s)}function mi(){var s,u,y,h,x,m,_,A,S,I,H=o*77+14,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===B?(u=B,o+=2):(u=e,F===0&&j(Gt)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=L,o++):(m=e,F===0&&j(st)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Ir(),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();t.charCodeAt(o)===125?(I=W,o++):(I=e,F===0&&j(Lt)),I!==e?(X=s,s=Ml(h,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function yu(){var s,u,y,h,x,m,_=o*77+15,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=ts(),m!==e?(X=s,s=El(h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();h=ts(),h!==e?(X=s,s=Sl(h)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function $i(){var s,u,y,h,x,m,_,A,S,I=o*77+16,H=V[I];if(H)return o=H.nextPos,H.result;if(s=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Ht)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=Ge(),S!==e?x=S:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=We(),S!==e?(X=s,s=Tl(h,x,S)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===Z?(u=Z,o+=3):(u=e,F===0&&j(Da)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=Ge(),S!==e?x=S:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();S=We(),S!==e?(X=s,s=Nl(h,x,S)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[I]={nextPos:o,result:s},s}function wu(){var s,u,y,h,x=o*77+17,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&j(Nr)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();h=We(),h!==e?(X=s,s=Fl(h)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function mu(){var s,u,y,h,x,m,_,A=o*77+18,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,t.substr(o,2)===G?(u=G,o+=2):(u=e,F===0&&j(hs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=ts(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=Q,o++):(_=e,F===0&&j(Fs)),_!==e?(X=s,s=Ol(h,x)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[A]={nextPos:o,result:s},s}function rs(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+19,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===ie?(x=ie,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();for(t.charCodeAt(o)===44?(S=Y,o++):(S=e,F===0&&j(Ot)),S===e&&(S=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e)if(t.charCodeAt(o)===41?(z=E,o++):(z=e,F===0&&j(Tr)),z!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(X=s,s=Il(_,H,Fe)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===ie?(h=ie,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();if(I=We(),I!==e){if(H=[],z=l(),z!==e)for(;z!==e;)H.push(z),z=l();else H=e;H!==e?(z=b(),z!==e?(X=s,s=Rl(m,I,z)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function xi(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt=o*77+20,dt=V[gt];if(dt)return o=dt.nextPos,dt.result;if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===ie?(x=ie,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();if(S=o,t.charCodeAt(o)===61?(I=be,o++):(I=e,F===0&&j(Xr)),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();z=We(),z!==e?(X=S,S=jl(_,z)):(o=S,S=e)}else o=S,S=e;for(S===e&&(S=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&j(Ot)),I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();if(z=We(),z!==e)if(t.charCodeAt(o)===41?(se=E,o++):(se=e,F===0&&j(Tr)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=b(),ye!==e?(X=s,s=Dl(_,S,z,ye)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===ie?(h=ie,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(S=be,o++):(S=e,F===0&&j(Xr)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=We(),H!==e?(X=A,A=Ul(m,H)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(S=Y,o++):(S=e,F===0&&j(Ot)),S===e&&(S=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(X=s,s=Xa(m,A,H,se)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=T,o++):(h=e,F===0&&j(ft)),h!==e)if(x=We(),x!==e)if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(X=s,s=Bl(x,A)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ys)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(X=s,s=Ll(h,m)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e}}return V[gt]={nextPos:o,result:s},s}function $u(){var s,u,y,h,x,m=o*77+21,_=V[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&j(Fr)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=We(),x!==e?(X=s,s=Hl(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[m]={nextPos:o,result:s},s}function xu(){var s,u,y,h,x,m,_,A,S=o*77+22,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Te?(u=Te,o+=4):(u=e,F===0&&j(rl)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=W,o++):(A=e,F===0&&j(Lt)),A!==e?(X=s,s=ql(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function bi(){var s,u,y,h,x=o*77+23,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Ie?(u=Ie,o+=5):(u=e,F===0&&j(Ua)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=Vl()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ss(){var s,u,y,h,x=o*77+24,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,8)===ke?(u=ke,o+=8):(u=e,F===0&&j(sl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=Zn()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ta(){var s,u,y,h,x,m,_=o*77+25,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&j(nl)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&j(Ba)),h===e&&(t.charCodeAt(o)===61?(h=be,o++):(h=e,F===0&&j(Xr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=We(),m!==e?(X=s,s=zl(u,h,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function Ai(){var s,u,y,h,x,m,_,A,S=o*77+26,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=Ls(),u!==e){for(y=[],h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Ls(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Ls(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e}else y=e;y!==e?(X=s,s=Kl(u,y)):(o=s,s=e)}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function ns(){var s,u,y,h=o*77+27,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(y=w(),y!==e?(u=[u,y],s=u):(o=s,s=e)):(o=s,s=e),s===e&&(s=$()),V[h]={nextPos:o,result:s},s)}function ra(){var s,u,y=o*77+28,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===At?(u=At,o+=2):(u=e,F===0&&j(al)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&j(il)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&j(ll)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&j(ul)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&j(Vn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&j(en)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&j(zn)),u===e&&(t.charCodeAt(o)===62?(u=Hr,o++):(u=e,F===0&&j(Ha)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&j(ol)),u===e&&(t.charCodeAt(o)===45?(u=Sr,o++):(u=e,F===0&&j(qa)),u===e&&(t.charCodeAt(o)===42?(u=ir,o++):(u=e,F===0&&j(Os)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&j(fl)),u===e&&(t.charCodeAt(o)===47?(u=Jr,o++):(u=e,F===0&&j(cl)),u===e&&(t.charCodeAt(o)===37?(u=nr,o++):(u=e,F===0&&j(hl))))))))))))))),u!==e&&(X=s,u=Wl()),s=u,V[y]={nextPos:o,result:s},s)}function sa(){var s,u,y,h=o*77+29,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===33?(u=Zr,o++):(u=e,F===0&&j(As)),u!==e?(y=We(),y!==e?(X=s,s=Gl(y)):(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function Ci(){var s,u,y,h,x=o*77+30,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,u=wi(),u!==e){if(y=[],h=na(),h===e&&(h=_i(),h===e&&(h=Hs())),h!==e)for(;h!==e;)y.push(h),h=na(),h===e&&(h=_i(),h===e&&(h=Hs()));else y=e;y!==e?(X=s,s=ei(u,y)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function na(){var s,u,y,h,x,m,_=o*77+31,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===40?(u=T,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=bu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e?(X=s,s=Jl(h)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function bu(){var s,u,y,h,x,m,_=o*77+32,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=We(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);X=s,s=Zl(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function _i(){var s,u,y,h,x,m,_=o*77+33,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=Ql(h)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function Hs(){var s,u,y,h=o*77+34,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===46?(u=Pr,o++):(u=e,F===0&&j(Kn)),u!==e?(y=ne(),y!==e?(X=s,s=Xl(y)):(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function Pi(){var s,u,y,h,x,m,_,A,S,I,H=o*77+35,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===J?(u=J,o+=2):(u=e,F===0&&j(tn)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],S=l(),S!==e)for(;S!==e;)A.push(S),S=l();else A=e;if(A!==e?(S=ki(),S!==e?_=S:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;S!==e?(I=Au(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),X=s,s=Yl(h,m,_,A)}else o=s,s=e;else o=s,s=e}else o=s,s=e;else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ki(){var s,u,y,h,x,m,_=o*77+36,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=vn(),u!==e){for(y=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=vn(),m!==e?h=m:(o=h,h=e);h!==e;){for(y.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=vn(),m!==e?h=m:(o=h,h=e)}X=s,s=eu(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function vn(){var s,u,y,h,x,m,_,A=o*77+37,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&j(rn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(X=s,s=ti(x,_)):(o=s,s=e)}else o=s,s=e}else o=s,s=e;else o=s,s=e;return V[A]={nextPos:o,result:s},s}function Au(){var s,u,y,h,x,m=o*77+38,_=V[m];if(_)return o=_.nextPos,_.result;if(s=o,t.substr(o,4)===ce?(u=ce,o+=4):(u=e,F===0&&j(pl)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(X=s,s=ri(x)):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[m]={nextPos:o,result:s},s}function gn(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt,dt,ku=o*77+39,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(s=o,t.substr(o,5)===Ce?(u=Ce,o+=5):(u=e,F===0&&j(sn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=L,o++):(_=e,F===0&&j(st)),_!==e){for(A=[],S=l();S!==e;)A.push(S),S=l();if(S=[],I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(S.push(I),I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else S=e;if(S!==e){if(I=o,t.charCodeAt(o)===42?(H=ir,o++):(H=e,F===0&&j(Os)),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=ye}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();t.charCodeAt(o)===125?(z=W,o++):(z=e,F===0&&j(Lt)),z!==e?(X=s,s=ni(x,S,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;else o=s,s=e;return V[ku]={nextPos:o,result:s},s}function aa(){var s,u,y,h,x,m,_,A,S=o*77+40,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,t.substr(o,4)===Ae?(u=Ae,o+=4):(u=e,F===0&&j(Rs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=W,o++):(A=e,F===0&&j(Lt)),A!==e?(X=s,s=tu(m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[S]={nextPos:o,result:s},s}function ia(){var s,u,y,h,x=o*77+41,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,t.substr(o,6)===Re?(u=Re,o+=6):(u=e,F===0&&j(Ar)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;y!==e?(h=la(),h!==e?(X=s,s=ru(h)):(o=s,s=e)):(o=s,s=e)}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function la(){var s,u,y=o*77+42,h=V[y];return h?(o=h.nextPos,h.result):(s=o,u=f(),u!==e&&(X=s,u=ai(u)),s=u,V[y]={nextPos:o,result:s},s)}function dn(){var s,u,y,h,x,m,_=o*77+43,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===96?(u=Ee,o++):(u=e,F===0&&j(nn)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ee,o++):(m=e,F===0&&j(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Ee,o++):(m=e,F===0&&j(nn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Ee,o++):(h=e,F===0&&j(nn)),h!==e?(X=s,s=su(y)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function ua(){var s,u,y,h,x,m,_=o*77+44,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=We(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=W,o++):(m=e,F===0&&j(Lt)),m!==e?s=h:(o=s,s=e)}else o=s,s=e}else o=s,s=e;if(s===e){if(s=o,u=[],y=yn(),y!==e)for(;y!==e;)u.push(y),y=yn();else u=e;u!==e&&(X=s,u=ii(u)),s=u}return V[_]={nextPos:o,result:s},s}function yn(){var s,u=o*77+45,y=V[u];return y?(o=y.nextPos,y.result):(s=Mi(),s===e&&(vr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(an))),V[u]={nextPos:o,result:s},s)}function Mi(){var s,u,y,h=o*77+46,x=V[h];return x?(o=x.nextPos,x.result):(s=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(cs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&j(ln)),y!==e?s=y:(o=s,s=e)):(o=s,s=e),V[h]={nextPos:o,result:s},s)}function oa(){var s,u,y,h,x,m,_=o*77+47,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===34?(u=Se,o++):(u=e,F===0&&j(vs)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Se,o++):(h=e,F===0&&j(vs)),h!==e?(X=s,s=nu(y)):(o=s,s=e)}else o=s,s=e;if(s===e)if(s=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&j(un)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(un)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&j(un)),h!==e?(X=s,s=au(y)):(o=s,s=e)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function fa(){var s,u,y=o*77+48,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===it?(u=it,o+=2):(u=e,F===0&&j(js)),u!==e&&(X=s,u=iu()),s=u,V[y]={nextPos:o,result:s},s)}function ca(){var s,u,y=o*77+49,h=V[y];return h?(o=h.nextPos,h.result):(s=o,t.substr(o,2)===qe?(u=qe,o+=2):(u=e,F===0&&j(Va)),u!==e&&(X=s,u=oi()),s=u,V[y]={nextPos:o,result:s},s)}function Ei(){var s,u=o*77+50,y=V[u];return y?(o=y.nextPos,y.result):(s=ha(),s===e&&(s=pa()),V[u]={nextPos:o,result:s},s)}function ha(){var s,u,y,h,x,m,_=o*77+51,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(h=Pr,o++):(h=e,F===0&&j(Kn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr));else x=e;x!==e?(X=s,s=lu()):(o=s,s=e)}else o=s,s=e;else o=s,s=e}else o=s,s=e;if(s===e)if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e)if(t.charCodeAt(o)===46?(y=Pr,o++):(y=e,F===0&&j(Kn)),y!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr));else h=e;h!==e?(X=s,s=fi()):(o=s,s=e)}else o=s,s=e;else o=s,s=e;return V[_]={nextPos:o,result:s},s}function pa(){var s,u,y,h,x=o*77+52,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;y!==e?(X=s,s=uu()):(o=s,s=e)}else o=s,s=e;return s===e&&(s=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e?(X=s,s=ou()):(o=s,s=e)),V[x]={nextPos:o,result:s},s}function va(){var s,u=o*77+53,y=V[u];return y?(o=y.nextPos,y.result):(s=Cu(),s===e&&(s=ga()),V[u]={nextPos:o,result:s},s)}function Cu(){var s,u,y,h,x=o*77+54,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&j(vl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=ci()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function ga(){var s,u,y,h,x=o*77+55,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&j(on)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=fu()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function da(){var s,u,y,h,x=o*77+56,m=V[x];return m?(o=m.nextPos,m.result):(s=o,t.substr(o,4)===ot?(u=ot,o+=4):(u=e,F===0&&j(gl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Or)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=s,s=hi()):(o=s,s=e)):(o=s,s=e),V[x]={nextPos:o,result:s},s)}function wr(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+57,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=W,o++):(x=e,F===0&&j(Lt)),x!==e?(X=s,s=cu(h)):(o=s,s=e)}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function _u(){var s,u,y,h,x,m,_,A,S,I,H=o*77+58,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=hu(h)):(o=s,s=e)}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ya(){var s,u,y,h,x,m,_,A=o*77+59,S=V[A];if(S)return o=S.nextPos,S.result;if(s=o,u=ne(),u!==e){for(y=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=Ge(),_!==e?y=_:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),X=s,s=pu(u,y)}else o=s,s=e;return V[A]={nextPos:o,result:s},s}function Si(){var s,u,y,h,x,m,_=o*77+60,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ya(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=s,s=pi(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function tt(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye,gt,dt,ku=o*77+61,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(s=o,t.charCodeAt(o)===64?(u=xt,o++):(u=e,F===0&&j(dl)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=T,o++):(m=e,F===0&&j(ft)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Si(),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();if(t.charCodeAt(o)===41?(I=E,o++):(I=e,F===0&&j(Tr)),I!==e){for(H=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=pe,o++):(se=e,F===0&&j(qt)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=Ge(),ye!==e?H=ye:(o=H,H=e)}else o=H,H=e;for(H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=L,o++):(se=e,F===0&&j(st)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();for(ye=Cr(),ye===e&&(ye=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=W,o++):(dt=e,F===0&&j(Lt)),dt!==e?(X=s,s=vu(y,h,x,A,H,ye)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[ku]={nextPos:o,result:s},s}function Pu(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=o*77+62,ye=V[Fe];if(ye)return o=ye.nextPos,ye.result;if(s=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Si(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=o,A=[],S=l();S!==e;)A.push(S),S=l();if(t.charCodeAt(o)===58?(S=pe,o++):(S=e,F===0&&j(qt)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=Ge(),H!==e?_=H:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],S=l();S!==e;)A.push(S),S=l();if(t.charCodeAt(o)===123?(S=L,o++):(S=e,F===0&&j(st)),S!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();for(H=Cr(),H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=W,o++):(se=e,F===0&&j(Lt)),se!==e?(X=s,s=vi(h,_,H)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[Fe]={nextPos:o,result:s},s}function Ms(){var s,u,y,h,x,m,_,A,S,I,H=o*77+63,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),S=[],I=l();I!==e;)S.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Fs)),m!==e?(X=s,s=gu(h)):(o=s,s=e)}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function ur(){var s,u,y,h,x,m,_,A,S,I,H,z,se,Fe,ye=o*77+64,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(S=[],I=l(),I!==e)for(;I!==e;)S.push(I),I=l();else S=e;if(S!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(Ds))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=W,o++):(x=e,F===0&&j(Lt)),x!==e?(X=s,s=c(h)):(o=s,s=e)}else o=s,s=e;return V[ye]={nextPos:o,result:s},s}function Ge(){var s,u=o*77+65,y=V[u];return y?(o=y.nextPos,y.result):(s=Ti(),s===e&&(s=De()),V[u]={nextPos:o,result:s},s)}function Ti(){var s,u,y,h,x,m,_,A,S,I,H=o*77+66,z=V[H];if(z)return o=z.nextPos,z.result;if(s=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=E,o++):(m=e,F===0&&j(Tr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===ve?(A=ve,o+=2):(A=e,F===0&&j(ps)),A!==e){for(S=[],I=l();I!==e;)S.push(I),I=l();I=Ge(),I!==e?(X=s,s=te(h,I)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return V[H]={nextPos:o,result:s},s}function k(){var s,u,y,h,x,m,_=o*77+67,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=Ge(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=s,s=Cs(u,y)}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function De(){var s,u,y,h,x,m,_,A,S=o*77+68,I=V[S];if(I)return o=I.nextPos,I.result;if(s=o,u=ne(),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&j(zn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ge(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Hr,o++):(A=e,F===0&&j(Ha)),A!==e?(X=s,s=yr(u,m)):(o=s,s=e)}else o=s,s=e}else o=s,s=e}else o=s,s=e;return s===e&&(s=o,u=ne(),u!==e&&(X=s,u=fn(u)),s=u),V[S]={nextPos:o,result:s},s}function ne(){var s,u,y,h,x=o*77+69,m=V[x];if(m)return o=m.nextPos,m.result;if(s=o,En.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(yl)),u!==e){for(y=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));h!==e;)y.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));X=s,s=i()}else o=s,s=e;return V[x]={nextPos:o,result:s},s}function f(){var s,u,y,h,x,m,_=o*77+70,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,u=ne(),u!==e){for(y=[],h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=s,s=N()}else o=s,s=e;return V[_]={nextPos:o,result:s},s}function g(){var s,u,y,h,x,m=o*77+71,_=V[m];if(_)return o=_.nextPos,_.result;for(s=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&j(Ot)),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,y,h],s=u}else o=s,s=e;if(s===e)if(s=[],u=l(),u!==e)for(;u!==e;)s.push(u),u=l();else s=e;return V[m]={nextPos:o,result:s},s}function b(){var s,u,y,h,x,m,_=o*77+72,A=V[_];if(A)return o=A.nextPos,A.result;if(s=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Cr(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=W,o++):(m=e,F===0&&j(Lt)),m!==e?(X=s,s=Yr(h)):(o=s,s=e)}else o=s,s=e;return s===e&&(s=ks()),V[_]={nextPos:o,result:s},s}function w(){var s,u=o*77+73,y=V[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===yt?(s=yt,o+=2):(s=e,F===0&&j(wl)),s===e&&(el.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(ml))),V[u]={nextPos:o,result:s},s)}function a(){var s,u,y=o*77+74,h=V[y];return h?(o=h.nextPos,h.result):(s=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&j(Bt)),F--,u===e?s=void 0:(o=s,s=e),s===e&&(s=w()),V[y]={nextPos:o,result:s},s)}function l(){var s,u=o*77+75,y=V[u];return y?(o=y.nextPos,y.result):(tl.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j(Wa)),V[u]={nextPos:o,result:s},s)}function $(){var s,u=o*77+76,y=V[u];return y?(o=y.nextPos,y.result):(lr.test(t.charAt(o))?(s=t.charAt(o),o++):(s=e,F===0&&j($l)),V[u]={nextPos:o,result:s},s)}function v(s,u,y){const h={type:s};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Us=d(),Us!==e&&o===t.length)return Us;throw Us!==e&&o<t.length&&j(U()),ea(_t,R<t.length?t.charAt(R):null,R<t.length?cn(R,R+1):cn(R,R))}const O2=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function I2(t){return O2.includes(t.type)}function Uw(t){return"chain"in t&&t.chain!==null}function R2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function j2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function D2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Tt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Tt(e.expr,r);break}case"return":{e.expr=Tt(e.expr,r);break}case"each":{e.items=Tt(e.items,r),e.for=Tt(e.for,r);break}case"for":{e.from!=null&&(e.from=Tt(e.from,r)),e.to!=null&&(e.to=Tt(e.to,r)),e.times!=null&&(e.times=Tt(e.times,r)),e.for=Tt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Tt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Tt(e.expr,r),e.dest=Tt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Tt(e.operands[n],r);break}case"not":{e.expr=Tt(e.expr,r);break}case"if":{e.cond=Tt(e.cond,r),e.then=Tt(e.then,r);for(const n of e.elseif)n.cond=Tt(n.cond,r),n.then=Tt(n.then,r);e.else!=null&&(e.else=Tt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Tt(e.children[n],r);break}case"match":{e.about=Tt(e.about,r);for(const n of e.qs)n.q=Tt(n.q,r),n.a=Tt(n.a,r);e.default!=null&&(e.default=Tt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Tt(e.statements[n],r);break}case"exists":{e.identifier=Tt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=Tt(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Tt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Tt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Tt(e.args[n],r);break}case"indexChain":{e.index=Tt(e.index,r);break}case"call":{e.target=Tt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Tt(e.args[n],r);break}case"index":{e.target=Tt(e.target,r),e.index=Tt(e.index,r);break}case"prop":{e.target=Tt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Tt(e.members[n],r);break}case"or":case"and":{e.left=Tt(e.left,r),e.right=Tt(e.right,r);break}}if(Uw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Tt(e.chain[n],r);return e}const Bp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Lp(t){throw new wf(`Reserved word "${t}" cannot be used as variable name.`)}function U2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Bp.includes(t.name)&&Lp(t.name);break}case"meta":{t.name!=null&&Bp.includes(t.name)&&Lp(t.name);break}case"fn":{for(const r of t.args)Bp.includes(r.name)&&Lp(r.name);break}}return t}function B2(t){for(const r of t)Tt(r,U2);return t}function Vd(t){return{type:"simple",name:t}}function L2(t,r){return{type:"generic",name:t,inners:r}}function H2(t,r){return{type:"fn",args:t,result:r}}function wh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=wh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>wh(n)).join(", "),e=wh(t.result);return`@(${r}) { ${e} }`}}}function Xf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Vd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Xf(t.inner):r=Vd("any"),L2(t.name,[r])}}throw new wf(`Unknown type: '${wh(t)}'`)}else{const r=t.args.map(e=>Xf(e));return H2(r,Xf(t.result))}}function q2(t){switch(t.type){case"def":{t.varType!=null&&Xf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Xf(r.argType);t.retType!=null&&Xf(t.retType);break}}return t}function V2(t){for(const r of t)Tt(r,q2);return t}function mh(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=mh(n.expr.children)),r.push(n);else{if(e.length>0)throw new wf("invalid attribute.");switch(n.type){case"fn":{n.children=mh(n.children);break}case"block":{n.statements=mh(n.statements);break}}r.push(n)}if(e.length>0)throw new wf("invalid attribute.");return r}function z2(t){if(I2(t)&&Uw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=R2(n,p.args,p.loc);break}case"indexChain":{n=j2(n,p.index,p.loc);break}case"propChain":{n=D2(n,p.name,p.loc);break}}return n}return t}function K2(t){for(let r=0;r<t.length;r++)t[r]=Tt(t[r],z2);return t}function $h(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Bw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return $h(t,r,e);{const{left:n,right:p,info:d}=t;return $h(n,Bw(p,r,e),d)}}function Jo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Jo(t.left),Jo(t.right)]}}const W2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Jo(t.left),right:Jo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Jo(t.left),right:Jo(t.right)}),priority:3}};function G2(t){const r=t.operators.map(n=>{const p=W2[n];if(p==null)throw new wf(`No such operator: ${n}.`);return p});let e=$h(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Bw(e,t.operands[2+n],r[1+n]);return Jo(e)}function J2(t){for(let r=0;r<t.length;r++)t[r]=Tt(t[r],e=>e.type==="infix"?G2(e):e);return t}var Vu;let Z2=(Vu=class{constructor(){fe(this,"plugins");this.plugins={validate:[B2,V2],transform:[mh,K2,J2]}}static parse(r){return Vu.instance==null&&(Vu.instance=new Vu),Vu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=qd(r,{startRule:"Preprocess"});e=qd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new wf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new wf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},fe(Vu,"instance"),Vu);const Q2="0.16.0",X2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Iv=[],cc=null;function Y2(t){return Iv=Z2.parse(t),JSON.stringify(Iv,null,"	")}async function eC(t){cc==null||cc.abort(),cc=new Hn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Nv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Nv(e.val,!0),print:!1});break}}});try{await cc.exec(Iv)}catch(r){t.err(r)}}const tC=Object.freeze(Object.defineProperty({__proto__:null,exec:eC,parse:Y2,samples:X2,version:Q2},Symbol.toStringTag,{value:"Module"}));function xh(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xh=function(e){return typeof e}:xh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xh(t)}function Lw(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(xh(n)));var p=!1;return{configurable:!0,get:function(){if(p||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var C=n.bind(this);return p=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return C},set:function(M){n=M,delete this[r]}}),p=!1,C},set:function(C){n=C}}}function rC(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,Lw(t,e,n))}}),t}function Dt(){return arguments.length===1?rC.apply(void 0,arguments):Lw.apply(void 0,arguments)}let Hw=class qw extends Error{constructor(e,n){super(e);fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,qw)}},mf=class extends Hw{constructor(r,e){super(r,e)}},Wr=class extends Hw{constructor(r,e){super(r,e)}},sC=class extends Wr{constructor(r,e){super(r,e)}};var kf=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};let Oo=class Vw{constructor(r=[],e,n){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Vw(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Wr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Wr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){p.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Wr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};kf([Dt],Oo.prototype,"log",null);kf([Dt],Oo.prototype,"onUpdated",null);kf([Dt],Oo.prototype,"createChildScope",null);kf([Dt],Oo.prototype,"get",null);kf([Dt],Oo.prototype,"getAll",null);kf([Dt],Oo.prototype,"add",null);kf([Dt],Oo.prototype,"assign",null);let th;const nC=new Uint8Array(16);function aC(){if(!th&&(th=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!th))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return th(nC)}const An=[];for(let t=0;t<256;++t)An.push((t+256).toString(16).slice(1));function iC(t,r=0){return(An[t[r+0]]+An[t[r+1]]+An[t[r+2]]+An[t[r+3]]+"-"+An[t[r+4]]+An[t[r+5]]+"-"+An[t[r+6]]+An[t[r+7]]+"-"+An[t[r+8]]+An[t[r+9]]+"-"+An[t[r+10]]+An[t[r+11]]+An[t[r+12]]+An[t[r+13]]+An[t[r+14]]+An[t[r+15]]).toLowerCase()}const lC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zd={randomUUID:lC};function uC(t,r,e){if(zd.randomUUID&&!r&&!t)return zd.randomUUID();t=t||{};const n=t.random||(t.rng||aC)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,iC(n)}const kr={type:"null"},Ji={type:"bool",value:!0},Ii={type:"bool",value:!1},Je=t=>({type:"num",value:t}),Vr=t=>({type:"str",value:t}),Yf=t=>({type:"bool",value:t}),Ag=t=>({type:"obj",value:t}),Nn=t=>({type:"arr",value:t}),oC=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),_e=t=>({type:"fn",native:t}),fC=t=>({type:"return",value:t}),cC=()=>({type:"break",value:null}),hC=()=>({type:"continue",value:null}),pC=t=>t.type==="return"?t.value:t;function Bi(t){if(t==null)throw new Wr("Expect anything, but got nothing.")}function Aa(t){if(t==null)throw new Wr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Wr(`Expect boolean, but got ${t.type}.`)}function bo(t){if(t==null)throw new Wr("Expect function, but got nothing.");if(t.type!=="fn")throw new Wr(`Expect function, but got ${t.type}.`)}function zs(t){if(t==null)throw new Wr("Expect string, but got nothing.");if(t.type!=="str")throw new Wr(`Expect string, but got ${t.type}.`)}function Ve(t){if(t==null)throw new Wr("Expect number, but got nothing.");if(t.type!=="num")throw new Wr(`Expect number, but got ${t.type}.`)}function po(t){if(t==null)throw new Wr("Expect object, but got nothing.");if(t.type!=="obj")throw new Wr(`Expect object, but got ${t.type}.`)}function ec(t){if(t==null)throw new Wr("Expect array, but got nothing.");if(t.type!=="arr")throw new Wr(`Expect array, but got ${t.type}.`)}function vC(t){return t.type==="str"}function gC(t){return t.type==="num"}function dC(t){return t.type==="obj"}function yC(t){return t.type==="arr"}function Rv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function jv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>jv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Dv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Dv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Dv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Uv(t){if(t===null)return kr;if(typeof t=="boolean")return Yf(t);if(typeof t=="string")return Vr(t);if(typeof t=="number")return Je(t);if(Array.isArray(t))return Nn(t.map(r=>Uv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Uv(n));return Ag(r)}return kr}const wC={help:Vr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Vr("0.14.1"),"Core:ai":Vr("kawaii"),"Core:not":_e(([t])=>(Aa(t),t.value?Ii:Ji)),"Core:eq":_e(([t,r])=>(Bi(t),Bi(r),Rv(t,r)?Ji:Ii)),"Core:neq":_e(([t,r])=>(Bi(t),Bi(r),Rv(t,r)?Ii:Ji)),"Core:and":_e(([t,r])=>(Aa(t),t.value?(Aa(r),r.value?Ji:Ii):Ii)),"Core:or":_e(([t,r])=>(Aa(t),t.value?Ji:(Aa(r),r.value?Ji:Ii))),"Core:add":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value+r.value))),"Core:sub":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value-r.value))),"Core:mul":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value*r.value))),"Core:pow":_e(([t,r])=>{Ve(t),Ve(r);const e=t.value**r.value;if(isNaN(e))throw new Wr("Invalid operation.");return Je(e)}),"Core:div":_e(([t,r])=>{Ve(t),Ve(r);const e=t.value/r.value;if(isNaN(e))throw new Wr("Invalid operation.");return Je(e)}),"Core:mod":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value%r.value))),"Core:gt":_e(([t,r])=>(Ve(t),Ve(r),t.value>r.value?Ji:Ii)),"Core:lt":_e(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Ji:Ii)),"Core:gteq":_e(([t,r])=>(Ve(t),Ve(r),t.value>=r.value?Ji:Ii)),"Core:lteq":_e(([t,r])=>(Ve(t),Ve(r),t.value<=r.value?Ji:Ii)),"Core:type":_e(([t])=>(Bi(t),Vr(t.type))),"Core:to_str":_e(([t])=>(Bi(t),t.type==="str"?t:t.type==="num"?Vr(t.value.toString()):Vr("?"))),"Core:range":_e(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Nn(Array.from({length:r.value-t.value+1},(e,n)=>Je(n+t.value))):t.value>r.value?Nn(Array.from({length:t.value-r.value+1},(e,n)=>Je(t.value-n))):Nn([t]))),"Util:uuid":_e(()=>Vr(uC())),"Json:stringify":_e(([t])=>(Bi(t),Vr(JSON.stringify(Dv(t))))),"Json:parse":_e(([t])=>(zs(t),Uv(JSON.parse(t.value)))),"Json:parsable":_e(([t])=>{zs(t);try{JSON.parse(t.value)}catch{return Yf(!1)}return Yf(!0)}),"Date:now":_e(()=>Je(Date.now())),"Date:year":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":_e(([t])=>(zs(t),Je(new Date(t.value).getTime()))),"Math:Infinity":Je(1/0),"Math:E":Je(Math.E),"Math:LN2":Je(Math.LN2),"Math:LN10":Je(Math.LN10),"Math:LOG2E":Je(Math.LOG2E),"Math:LOG10E":Je(Math.LOG10E),"Math:PI":Je(Math.PI),"Math:SQRT1_2":Je(Math.SQRT1_2),"Math:SQRT2":Je(Math.SQRT2),"Math:abs":_e(([t])=>(Ve(t),Je(Math.abs(t.value)))),"Math:acos":_e(([t])=>(Ve(t),Je(Math.acos(t.value)))),"Math:acosh":_e(([t])=>(Ve(t),Je(Math.acosh(t.value)))),"Math:asin":_e(([t])=>(Ve(t),Je(Math.asin(t.value)))),"Math:asinh":_e(([t])=>(Ve(t),Je(Math.asinh(t.value)))),"Math:atan":_e(([t])=>(Ve(t),Je(Math.atan(t.value)))),"Math:atanh":_e(([t])=>(Ve(t),Je(Math.atanh(t.value)))),"Math:atan2":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.atan2(t.value,r.value)))),"Math:cbrt":_e(([t])=>(Ve(t),Je(Math.cbrt(t.value)))),"Math:ceil":_e(([t])=>(Ve(t),Je(Math.ceil(t.value)))),"Math:clz32":_e(([t])=>(Ve(t),Je(Math.clz32(t.value)))),"Math:cos":_e(([t])=>(Ve(t),Je(Math.cos(t.value)))),"Math:cosh":_e(([t])=>(Ve(t),Je(Math.cosh(t.value)))),"Math:exp":_e(([t])=>(Ve(t),Je(Math.exp(t.value)))),"Math:expm1":_e(([t])=>(Ve(t),Je(Math.expm1(t.value)))),"Math:floor":_e(([t])=>(Ve(t),Je(Math.floor(t.value)))),"Math:fround":_e(([t])=>(Ve(t),Je(Math.fround(t.value)))),"Math:hypot":_e(([t])=>{ec(t);const r=[];for(const e of t.value)Ve(e),r.push(e.value);return Je(Math.hypot(...r))}),"Math:imul":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.imul(t.value,r.value)))),"Math:log":_e(([t])=>(Ve(t),Je(Math.log(t.value)))),"Math:log1p":_e(([t])=>(Ve(t),Je(Math.log1p(t.value)))),"Math:log10":_e(([t])=>(Ve(t),Je(Math.log10(t.value)))),"Math:log2":_e(([t])=>(Ve(t),Je(Math.log2(t.value)))),"Math:max":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.max(t.value,r.value)))),"Math:min":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.min(t.value,r.value)))),"Math:pow":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.pow(t.value,r.value)))),"Math:round":_e(([t])=>(Ve(t),Je(Math.round(t.value)))),"Math:sign":_e(([t])=>(Ve(t),Je(Math.sign(t.value)))),"Math:sin":_e(([t])=>(Ve(t),Je(Math.sin(t.value)))),"Math:sinh":_e(([t])=>(Ve(t),Je(Math.sinh(t.value)))),"Math:sqrt":_e(([t])=>{Ve(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Wr("Invalid operation.");return Je(r)}),"Math:tan":_e(([t])=>(Ve(t),Je(Math.tan(t.value)))),"Math:tanh":_e(([t])=>(Ve(t),Je(Math.tanh(t.value)))),"Math:trunc":_e(([t])=>(Ve(t),Je(Math.trunc(t.value)))),"Math:rnd":_e(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Je(Math.random())),"Math:gen_rng":_e(([t])=>{if(Bi(t),t.type!=="num"&&t.type!=="str")return kr;const r=To(t.value.toString());return _e(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Je(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Je(r()))}),"Num:to_hex":_e(([t])=>(Ve(t),Vr(t.value.toString(16)))),"Num:from_hex":_e(([t])=>(zs(t),Je(parseInt(t.value,16)))),"Str:lf":Vr(`
`),"Str:lt":_e(([t,r])=>(zs(t),zs(r),t.value<r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Str:gt":_e(([t,r])=>(zs(t),zs(r),t.value>r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Obj:keys":_e(([t])=>(po(t),Nn(Array.from(t.value.keys()).map(r=>Vr(r))))),"Obj:vals":_e(([t])=>(po(t),Nn(Array.from(t.value.values())))),"Obj:kvs":_e(([t])=>(po(t),Nn(Array.from(t.value.entries()).map(([r,e])=>Nn([Vr(r),e]))))),"Obj:get":_e(([t,r])=>(po(t),zs(r),t.value.get(r.value)??kr)),"Obj:set":_e(([t,r,e])=>(po(t),zs(r),Bi(e),t.value.set(r.value,e),kr)),"Obj:has":_e(([t,r])=>(po(t),zs(r),Yf(t.value.has(r.value)))),"Obj:copy":_e(([t])=>(po(t),Ag(new Map(t.value)))),"Async:interval":_e(async([t,r,e],n)=>{Ve(t),bo(r),e&&(Aa(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),_e(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":_e(async([t,r],e)=>{Ve(t),bo(r);const n=setTimeout(()=>{e.call(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),_e(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},Sf={num:{to_str:t=>_e(async(r,e)=>Vr(t.value.toString()))},str:{to_num:t=>_e(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?kr:Je(n)}),len:t=>Je(Cf(t.value)),replace:t=>_e(async([r,e],n)=>(zs(r),zs(e),Vr(t.value.split(r.value).join(e.value)))),index_of:t=>_e(async([r],e)=>(zs(r),Je(Pf(t.value,r.value)))),incl:t=>_e(async([r],e)=>(zs(r),t.value.includes(r.value)?Ji:Ii)),trim:t=>_e(async(r,e)=>Vr(t.value.trim())),upper:t=>_e(async(r,e)=>Vr(t.value.toUpperCase())),lower:t=>_e(async(r,e)=>Vr(t.value.toLowerCase())),split:t=>_e(async([r],e)=>(r&&zs(r),Nn(r?t.value.split(r?r.value:"").map(n=>Vr(n)):Qs(t.value).map(n=>Vr(n))))),slice:t=>_e(async([r,e],n)=>(Ve(r),Ve(e),Vr(_f(t.value,r.value,e.value)))),pick:t=>_e(async([r],e)=>{Ve(r);const p=Qs(t.value)[r.value];return p?Vr(p):kr})},arr:{len:t=>Je(t.value.length),push:t=>_e(async([r],e)=>(Bi(r),t.value.push(r),t)),unshift:t=>_e(async([r],e)=>(Bi(r),t.value.unshift(r),t)),pop:t=>_e(async(r,e)=>t.value.pop()??kr),shift:t=>_e(async(r,e)=>t.value.shift()??kr),concat:t=>_e(async([r],e)=>(ec(r),Nn(t.value.concat(r.value)))),slice:t=>_e(async([r,e],n)=>(Ve(r),Ve(e),Nn(t.value.slice(r.value,e.value)))),join:t=>_e(async([r],e)=>(r&&zs(r),Vr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>_e(async([r],e)=>{bo(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,Je(d)]));return Nn(await Promise.all(n))}),filter:t=>_e(async([r],e)=>{bo(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,Je(p)]);Aa(C),C.value&&n.push(d)}return Nn(n)}),reduce:t=>_e(async([r,e],n)=>{bo(r);const p=e!=null;let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,Je(C)])}return d}),find:t=>_e(async([r],e)=>{bo(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,Je(n)]);if(Aa(d),d.value)return p}return kr}),incl:t=>_e(async([r],e)=>(Bi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ii:(p=>p.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Ji:Ii)),reverse:t=>_e(async(r,e)=>(t.value.reverse(),kr)),copy:t=>_e(async(r,e)=>Nn([...t.value])),sort:t=>_e(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=await n(d.slice(0,P),C),T=await n(d.slice(P),C);return p(M,T,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);Ve(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return bo(r),ec(t),t.value=await n(t.value,r),t})}};var Vi=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const zw=300,mC=zw-1;let Ra=class{constructor(r,e){fe(this,"vars");fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);this.opts=e??{};const n={print:_e(([p])=>{Bi(p),this.opts.out&&this.opts.out(p)}),readline:_e(async p=>{const d=p[0];if(zs(d),this.opts.in==null)return kr;const C=await this.opts.in(d.value);return Vr(C)})};this.vars={...r,...wC,...n},this.scope=new Oo([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const p=await this._eval(n.expr,e);e.add(n.name,p),this.scope.add(r.name+":"+n.name,p);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??kr;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const p=r.scope.createChildScope(n);return pC(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return kr;if(this.stepCount%zw===mC&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Wr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);bo(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(Aa(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(Aa(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return kr}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(Rv(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):kr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return kr}case"for":{if(r.times){const n=await this._eval(r.times,e);Ve(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);Ve(n),Ve(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,Je(d)]])));if(C.type==="break")break;if(C.type==="return")return C}}return kr}case"each":{const n=await this._eval(r.items,e);ec(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,p]])));if(d.type==="break")break;if(d.type==="return")return d}return kr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,n),kr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),kr}case"addAssign":{const n=await this._eval(r.dest,e);Ve(n);const p=await this._eval(r.expr,e);return Ve(p),await this.assign(e,r.dest,Je(n.value+p.value)),kr}case"subAssign":{const n=await this._eval(r.dest,e);Ve(n);const p=await this._eval(r.expr,e);return Ve(p),await this.assign(e,r.dest,Je(n.value-p.value)),kr}case"null":return kr;case"bool":return Yf(r.value);case"num":return Je(r.value);case"str":return Vr(r.value);case"arr":return Nn(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return Ag(n)}case"prop":{const n=await this._eval(r.target,e);if(dC(n))return n.value.has(r.name)?n.value.get(r.name):kr;if(gC(n)){if(Object.hasOwn(Sf.num,r.name))return Sf.num[r.name](n);throw new Wr(`No such prop (${r.name}) in ${n.type}.`)}else if(vC(n)){if(Object.hasOwn(Sf.str,r.name))return Sf.str[r.name](n);throw new Wr(`No such prop (${r.name}) in ${n.type}.`)}else if(yC(n)){if(Object.hasOwn(Sf.arr,r.name))return Sf.arr[r.name](n);throw new Wr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Wr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);ec(n);const p=await this._eval(r.index,e);Ve(p);const d=n.value[p.value];if(d===void 0)throw new sC(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return Aa(n),Yf(!n.value)}case"fn":return oC(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);let C="";d.type==="str"?C=d.value:d.type==="num"&&(C=d.value.toString()),n+=C}return Vr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),fC(n)}case"break":return this.log("block:break",{scope:e.name}),cC();case"continue":return this.log("block:continue",{scope:e.name}),hC();case"ns":return kr;case"meta":return kr;case"and":{const n=await this._eval(r.left,e);if(Aa(n),n.value){const p=await this._eval(r.right,e);return Aa(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(Aa(n),n.value)return n;{const p=await this._eval(r.right,e);return Aa(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=kr;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r);ec(p);const d=await this._eval(e.index,r);Ve(d),p.value[d.value]=n}else if(e.type==="prop"){const p=await this._eval(e.target,r);po(p),p.value.set(e.name,n)}else throw new Wr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Vi([Dt],Ra.prototype,"exec",null);Vi([Dt],Ra.prototype,"execFn",null);Vi([Dt],Ra.prototype,"log",null);Vi([Dt],Ra.prototype,"collectNs",null);Vi([Dt],Ra.prototype,"collectNsMember",null);Vi([Dt],Ra.prototype,"_fn",null);Vi([Dt],Ra.prototype,"_eval",null);Vi([Dt],Ra.prototype,"_run",null);Vi([Dt],Ra.prototype,"registerAbortHandler",null);Vi([Dt],Ra.prototype,"unregisterAbortHandler",null);Vi([Dt],Ra.prototype,"abort",null);Vi([Dt],Ra.prototype,"assign",null);Vi([Dt],Ra,"collectMetadata",null);function $C(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function ff(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,ff.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}$C(ff,Error);function Hp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}ff.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=Hp("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+Hp("",p.column-1," ")+Hp("",B,"^")}else r+=`
 at `+C}return r};ff.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Kd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:j,Main:hn},d=j,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Hr=">",Yt="+",Sr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",J="if",ee="elif",ce="else",Ce="match",ve="=>",Ae="eval",Re="`",Ee='"',Se="'",$e='\\"',it="\\'",qe="true",Ye="false",Qe="null",ot=";",Pt="@",xt="@(",Ut=`\r
`,yt=/^[A-Z0-9_:]/i,lt=/^[^`{]/,vr=/^[{}`]/,cs=/^[+\-]/,is=/^[1-9]/,Ct=/^[0-9]/,Rt=/^[A-Z_]/i,En=/^[A-Z0-9_]/i,gr=/^[\r\n]/,el=/^[ \t\r\n]/,tl=/^[ \t]/,lr=du(),Bt=ue("//",!1),Qr=ue("/*",!1),qn=ue("*/",!1),kt=ue("(",!1),ft=ue(")",!1),Tr=ue("::",!1),Gt=ue("{",!1),st=ue("}",!1),Lt=ue("###",!1),bs=ue("let",!1),Ht=ue(":",!1),qt=ue("=",!1),Xr=ue("var",!1),Da=ue("<:",!1),Nr=ue("#[",!1),hs=ue("]",!1),Fs=ue("each",!1),ct=ue(",",!1),Ot=ue("for",!1),Ys=ue("return",!1),Fr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Or=ue("loop",!1),rl=ue("break",!1),Ua=ue("continue",!1),sl=ue("+=",!1),nl=ue("-=",!1),Ba=ue("\\",!1),La=ue("||",!1),al=ue("&&",!1),il=ue("==",!1),ll=ue("!=",!1),ul=ue("<=",!1),Vn=ue(">=",!1),en=ue("<",!1),zn=ue(">",!1),Ha=ue("+",!1),ol=ue("-",!1),qa=ue("*",!1),Os=ue("^",!1),fl=ue("/",!1),cl=ue("%",!1),hl=ue("!",!1),As=ue("[",!1),Is=ue(".",!1),Kn=ue("if",!1),tn=ue("elif",!1),rn=ue("else",!1),pl=ue("match",!1),sn=ue("=>",!1),ps=ue("eval",!1),Rs=ue("`",!1),Ar=D(["`","{"],!0,!1),nn=D(["{","}","`"],!1,!1),an=ue('"',!1),ln=ue("'",!1),vs=ue('\\"',!1),un=ue("\\'",!1),js=D(["+","-"],!1,!1),Va=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),za=ue("true",!1),dr=ue("false",!1),vl=ue("null",!1),on=ue(";",!1),gl=ue("@",!1),Ds=ue("@(",!1),dl=D([["A","Z"],"_"],!1,!0),Wn=D([["A","Z"],["0","9"],"_"],!1,!0),yl=ue(`\r
`,!1),Ka=D(["\r",`
`],!1,!1),wl=D([" ","	","\r",`
`],!1,!1),ml=D([" ","	"],!1,!1),Wa=function(a){return a.join("")},$l=function(){return F()},Ga=function(){return F()},xl=function(){return""},Ja=function(){return""},bl=function(a){return a??[]},Za=function(a,l){return l},Al=function(a,l){return[a,...l]},Gn=function(a,l){return l},Cl=function(a,l){return[a,...l]},Jn=function(a,l){return l},_l=function(a,l){return[a,...l]},Qa=function(a){return a},Pl=function(a,l){return w("ns",{name:a,members:l})},kl=function(a,l){return w("meta",{name:a,value:l})},Ml=function(a){return w("meta",{name:null,value:a})},El=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Sl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Tl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Nl=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Fl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ol=function(a,l,$){return w("each",{var:a,items:l,for:$})},Il=function(a,l){return l},Rl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},jl=function(a,l){return l},Dl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},Ul=function(a,l){return w("for",{times:a,for:l})},Xa=function(a,l){return w("for",{times:a,for:l})},Bl=function(a){return w("return",{expr:a})},Ll=function(a){return w("loop",{statements:a})},Hl=function(){return w("break",{})},ql=function(){return w("continue",{})},Vl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Zn=function(a,l,$){return{op:l,term:$}},zl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Ya=function(){return F()},Kl=function(a){return w("not",{expr:a})},Wl=function(a,l){return{...a,chain:l}},Gl=function(a){return w("callChain",{args:a??[]})},ei=function(a,l){return l},Jl=function(a,l){return[a,...l]},Qn=function(a){return w("indexChain",{index:a})},Zl=function(a){return w("propChain",{name:a})},Ql=function(a,l,$,v){return w("if",{cond:a,then:l,elseif:$??[],else:v})},Xl=function(a,l){return[a,...l]},Yl=function(a,l){return{cond:a,then:l}},eu=function(a){return a},ti=function(a,l,$){return{q:l,a:$}},ri=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},si=function(a){return w("block",{statements:a})},ni=function(a){return w("identifier",{name:a})},tu=function(a){return w("tmpl",{tmpl:a})},ru=function(a){return a.join("")},ai=function(a){return a},su=function(a){return w("str",{value:a.join("")})},ii=function(a){return a},li=function(a){return w("str",{value:a.join("")})},nu=function(){return'"'},ui=function(){return"'"},au=function(){return w("num",{value:parseFloat(F())})},iu=function(){return w("num",{value:parseFloat(F())})},oi=function(){return w("num",{value:parseInt(F(),10)})},lu=function(){return w("num",{value:parseInt(F(),10)})},fi=function(){return w("bool",{value:!0})},uu=function(){return w("bool",{value:!1})},ou=function(){return w("null",{})},ci=function(a,l){return{k:a,v:l}},fu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},hi=function(a){return a},Xn=function(a){return w("arr",{value:a})},cu=function(a,l){return{name:a,argType:l}},Yn=function(a,l){return[a,...l]},hu=function(a,l,$,v,s,u){return(a.length>0||$.length>0)&&Us("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:v??[],retType:s},u??[]),mut:!1,attr:[]})},pu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},pi=function(a){return a},vu=function(a){return w("arr",{value:a})},vi=function(a,l){return{k:a,v:l}},gi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},gu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},di=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},yr=function(){return F()},fn=function(a){return w("block",{statements:a??[]})},i=0,N=0,Yr=[{line:1,column:1}],o=0,X=[],O=0,R={},_t;if("startRule"in r){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function F(){return t.substring(N,i)}function V(){return Bs(N,i)}function Us(a,l){throw l=l!==void 0?l:Bs(N,i),yi(a,l)}function ue(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function du(){return{type:"any"}}function de(){return{type:"end"}}function tr(a){var l=Yr[a],$;if(l)return l;for($=a-1;!Yr[$];)$--;for(l=Yr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Yr[a]=l,l}function Bs(a,l,$){var v=tr(a),s=tr(l),u={source:n,start:{offset:a,line:v.line,column:v.column},end:{offset:l,line:s.line,column:s.column}};return u}function U(a){i<o||(i>o&&(o=i,X=[]),X.push(a))}function yi(a,l){return new ff(a,null,null,l)}function cn(a,l,$){return new ff(ff.buildMessage(a,l),a,l,$)}function j(){var a,l,$,v=i*76+0,s=R[v];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return N=a,l=Wa(l),a=l,R[v]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,v=R[$];return v?(i=v.nextPos,v.result):(a=i,l=gn(),l!==e&&(N=a,l=$l()),a=l,a===e&&(a=i,l=dn(),l!==e&&(N=a,l=Ga()),a=l,a===e&&(a=ea(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&U(lr))))),R[$]={nextPos:i,result:a},a)}function ea(){var a,l,$,v,s,u,y=i*76+2,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,O===0&&U(Bt)),l!==e){for($=[],v=i,s=i,O++,u=f(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,u=f(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);N=a,a=xl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&U(Qr)),l!==e){for($=[],v=i,s=i,O++,t.substr(i,2)===M?(u=M,i+=2):(u=e,O===0&&U(qn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.substr(i,2)===M?(u=M,i+=2):(u=e,O===0&&U(qn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);t.substr(i,2)===M?(v=M,i+=2):(v=e,O===0&&U(qn)),v!==e?(N=a,a=Ja()):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function hn(){var a,l,$,v,s,u=i*76+3,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=Ps(),$===e&&($=null),v=[],s=g();s!==e;)v.push(s),s=g();return N=a,a=bl($),R[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,v,s,u,y,h,x=i*76+4,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=pn(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=pn(),h!==e?(N=v,v=Za(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=pn(),h!==e?(N=v,v=Za(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=Al(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function et(){var a,l,$,v,s,u,y,h,x=i*76+5,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ir(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Ir(),h!==e?(N=v,v=Gn(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Ir(),h!==e?(N=v,v=Gn(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=Cl(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function es(){var a,l,$,v,s,u,y,h,x=i*76+6,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Cr(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(N=v,v=Jn(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(N=v,v=Jn(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=_l(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function pn(){var a,l=i*76+7,$=R[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=wi(),a===e&&(a=Cr())),R[l]={nextPos:i,result:a},a)}function Ir(){var a,l=i*76+8,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=Ls())),R[l]={nextPos:i,result:a},a)}function Cr(){var a,l=i*76+9,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=mi(),a===e&&(a=mu(),a===e&&(a=yu(),a===e&&(a=$i(),a===e&&(a=wu(),a===e&&(a=rs(),a===e&&(a=xi(),a===e&&(a=$u(),a===e&&(a=xu(),a===e&&(a=Xe()))))))))))),R[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=R[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=gs()),R[l]={nextPos:i,result:a},a)}function gs(){var a,l=i*76+11,$=R[l];return $?(i=$.nextPos,$.result):(a=bu(),a===e&&(a=_u(),a===e&&(a=ns(),a===e&&(a=ks()))),R[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,v,s,u,y=i*76+12,h=R[y];if(h)return i=h.nextPos,h.result;if(a=ki(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=dn(),a===e&&(a=Mi(),a===e&&(a=ca(),a===e&&(a=pa(),a===e&&(a=va(),a===e&&(a=Cu(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=T,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Xe(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e?(N=a,a=Qa(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function We(){var a,l=i*76+13,$=R[l];return $?(i=$.nextPos,$.result):(a=Mi(),a===e&&(a=dn(),a===e&&(a=ca(),a===e&&(a=ya(),a===e&&(a=Si(),a===e&&(a=pa()))))),R[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,v,s,u,y,h,x,m,_=i*76+14,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===B?(l=B,i+=2):(l=e,O===0&&U(Tr)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=L,i++):(u=e,O===0&&U(Gt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=W,i++):(m=e,O===0&&U(st)),m!==e?(N=a,a=Pl(v,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function wi(){var a,l,$,v,s,u,y=i*76+15,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Ge(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=We(),u!==e?(N=a,a=kl(v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();v=We(),v!==e?(N=a,a=Ml(v)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ts(){var a,l,$,v,s,u,y,h,x,m=i*76+16,_=R[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(bs)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(N=a,a=El(v,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===Z?(l=Z,i+=3):(l=e,O===0&&U(Xr)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(N=a,a=Sl(v,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[m]={nextPos:i,result:a},a}function mi(){var a,l,$,v,s=i*76+17,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,O===0&&U(Da)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();v=Xe(),v!==e?(N=a,a=Tl(v)):(i=a,a=e)}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function yu(){var a,l,$,v,s,u,y,h=i*76+18,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===G?(l=G,i+=2):(l=e,O===0&&U(Nr)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();for(y=We(),y!==e?s=y:(i=s,s=e),s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();t.charCodeAt(i)===93?(y=Q,i++):(y=e,O===0&&U(hs)),y!==e?(N=a,a=Nl(v,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function $i(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+19,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Fs)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(t.substr(i,3)===ie?(s=ie,i+=3):(s=e,O===0&&U(bs)),s!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=E,i++):(A=e,O===0&&U(ft)),A!==e){for(S=[],I=g();I!==e;)S.push(I),I=g();I=De(),I!==e?(N=a,a=Fl(y,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Fs)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(t.substr(i,3)===ie?(v=ie,i+=3):(v=e,O===0&&U(bs)),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(N=a,a=Ol(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function wu(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z=i*76+20,se=R[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(t.substr(i,3)===ie?(s=ie,i+=3):(s=e,O===0&&U(bs)),s!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=be,i++):(m=e,O===0&&U(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(N=x,x=Il(y,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,O===0&&U(ct)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(S=E,i++):(S=e,O===0&&U(ft)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=De(),H!==e?(N=a,a=Rl(y,x,A,H)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(t.substr(i,3)===ie?(v=ie,i+=3):(v=e,O===0&&U(bs)),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=be,i++):(x=e,O===0&&U(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(N=h,h=jl(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],S=g(),S!==e)for(;S!==e;)A.push(S),S=g();else A=e;A!==e?(S=De(),S!==e?(N=a,a=Dl(u,h,_,S)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=De(),h!==e?(N=a,a=Ul(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Xe(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=De(),u!==e?(N=a,a=Xa(v,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return R[z]={nextPos:i,result:a},a}function mu(){var a,l,$,v,s,u=i*76+21,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&U(Ys)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();s=Xe(),s!==e?(N=a,a=Bl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function rs(){var a,l,$,v,s,u,y,h,x=i*76+22,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,O===0&&U(Or)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===123?(v=L,i++):(v=e,O===0&&U(Gt)),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=W,i++):(h=e,O===0&&U(st)),h!==e?(N=a,a=Ll(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function xi(){var a,l,$,v,s=i*76+23,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ie?(l=Ie,i+=5):(l=e,O===0&&U(rl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=Hl()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function $u(){var a,l,$,v,s=i*76+24,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===ke?(l=ke,i+=8):(l=e,O===0&&U(Ua)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=ql()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function xu(){var a,l,$,v,s,u,y=i*76+25,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.substr(i,2)===at?(v=at,i+=2):(v=e,O===0&&U(sl)),v===e&&(t.substr(i,2)===vt?(v=vt,i+=2):(v=e,O===0&&U(nl)),v===e&&(t.charCodeAt(i)===61?(v=be,i++):(v=e,O===0&&U(qt)))),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(N=a,a=Vl(l,v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function bi(){var a,l,$,v,s,u,y,h,x=i*76+26,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=gs(),l!==e){for($=[],v=i,s=[],u=ss();u!==e;)s.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(N=v,v=Zn(l,u,h)):(i=v,v=e)}else i=v,v=e;if(v!==e)for(;v!==e;){for($.push(v),v=i,s=[],u=ss();u!==e;)s.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(N=v,v=Zn(l,u,h)):(i=v,v=e)}else i=v,v=e}else $=e;$!==e?(N=a,a=zl(l,$)):(i=a,a=e)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function ss(){var a,l,$,v=i*76+27,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),R[v]={nextPos:i,result:a},a)}function ta(){var a,l,$=i*76+28,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===At?(l=At,i+=2):(l=e,O===0&&U(La)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&U(al)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&U(il)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&U(ll)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,O===0&&U(ul)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,O===0&&U(Vn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,O===0&&U(en)),l===e&&(t.charCodeAt(i)===62?(l=Hr,i++):(l=e,O===0&&U(zn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,O===0&&U(Ha)),l===e&&(t.charCodeAt(i)===45?(l=Sr,i++):(l=e,O===0&&U(ol)),l===e&&(t.charCodeAt(i)===42?(l=ir,i++):(l=e,O===0&&U(qa)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,O===0&&U(Os)),l===e&&(t.charCodeAt(i)===47?(l=Jr,i++):(l=e,O===0&&U(fl)),l===e&&(t.charCodeAt(i)===37?(l=nr,i++):(l=e,O===0&&U(cl))))))))))))))),l!==e&&(N=a,l=Ya()),a=l,R[$]={nextPos:i,result:a},a)}function Ai(){var a,l,$,v=i*76+29,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=Zr,i++):(l=e,O===0&&U(hl)),l!==e?($=Xe(),$!==e?(N=a,a=Kl($)):(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function ns(){var a,l,$,v,s=i*76+30,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],v=ra(),v===e&&(v=Ci(),v===e&&(v=na())),v!==e)for(;v!==e;)$.push(v),v=ra(),v===e&&(v=Ci(),v===e&&(v=na()));else $=e;$!==e?(N=a,a=Wl(l,$)):(i=a,a=e)}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function ra(){var a,l,$,v,s,u,y=i*76+31,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=T,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=sa(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e?(N=a,a=Gl(v)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function sa(){var a,l,$,v,s,u,y=i*76+32,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],v=i,s=k(),s!==e?(u=Xe(),u!==e?(N=v,v=ei(l,u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=Xe(),u!==e?(N=v,v=ei(l,u)):(i=v,v=e)):(i=v,v=e);N=a,a=Jl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ci(){var a,l,$,v,s,u,y=i*76+33,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Xe(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=Qn(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function na(){var a,l,$,v=i*76+34,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=Pr,i++):(l=e,O===0&&U(Is)),l!==e?($=Ge(),$!==e?(N=a,a=Zl($)):(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function bu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+35,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===J?(l=J,i+=2):(l=e,O===0&&U(Kn)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Xe(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=De(),u!==e){if(y=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=_i(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=Pi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),N=a,a=Ql(v,u,y,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function _i(){var a,l,$,v,s,u,y=i*76+36,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],v=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?v=u:(i=v,v=e);v!==e;){for($.push(v),v=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?v=u:(i=v,v=e)}N=a,a=Xl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Hs(){var a,l,$,v,s,u,y,h=i*76+37,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,O===0&&U(tn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();if(s=Xe(),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=De(),y!==e?(N=a,a=Yl(s,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[h]={nextPos:i,result:a},a}function Pi(){var a,l,$,v,s,u=i*76+38,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===ce?(l=ce,i+=4):(l=e,O===0&&U(rn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();s=De(),s!==e?(N=a,a=eu(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function ki(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=i*76+39,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.substr(i,5)===Ce?(l=Ce,i+=5):(l=e,O===0&&U(pl)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();if(s=Xe(),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===123?(y=L,i++):(y=e,O===0&&U(Gt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();N=m,m=ti(s,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();N=m,m=ti(s,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=ir,i++):(_=e,O===0&&U(qa)),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=H}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=W,i++):(A=e,O===0&&U(st)),A!==e?(N=a,a=ri(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function vn(){var a,l,$,v,s,u,y,h,x=i*76+40,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ae?(l=Ae,i+=4):(l=e,O===0&&U(ps)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===123?(v=L,i++):(v=e,O===0&&U(Gt)),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=W,i++):(h=e,O===0&&U(st)),h!==e?(N=a,a=si(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function Au(){var a,l,$=i*76+41,v=R[$];return v?(i=v.nextPos,v.result):(a=i,l=Ti(),l!==e&&(N=a,l=ni(l)),a=l,R[$]={nextPos:i,result:a},a)}function gn(){var a,l,$,v,s,u,y=i*76+42,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Re,i++):(l=e,O===0&&U(Rs)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Rs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=aa(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Rs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=aa(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===96?(v=Re,i++):(v=e,O===0&&U(Rs)),v!==e?(N=a,a=tu($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function aa(){var a,l,$,v,s,u,y=i*76+43,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Xe(),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=W,i++):(u=e,O===0&&U(st)),u!==e?a=v:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ia(),$!==e)for(;$!==e;)l.push($),$=ia();else l=e;l!==e&&(N=a,l=ru(l)),a=l}return R[y]={nextPos:i,result:a},a}function ia(){var a,l=i*76+44,$=R[l];return $?(i=$.nextPos,$.result):(a=la(),a===e&&(lt.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ar))),R[l]={nextPos:i,result:a},a)}function la(){var a,l,$,v=i*76+45,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?(vr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&U(nn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function dn(){var a,l,$,v,s,u,y=i*76+46,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ee,i++):(l=e,O===0&&U(an)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===34?(u=Ee,i++):(u=e,O===0&&U(an)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ai(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===34?(u=Ee,i++):(u=e,O===0&&U(an)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ai(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===34?(v=Ee,i++):(v=e,O===0&&U(an)),v!==e?(N=a,a=su($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Se,i++):(l=e,O===0&&U(ln)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(ln)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ii(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(ln)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ii(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===39?(v=Se,i++):(v=e,O===0&&U(ln)),v!==e?(N=a,a=li($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ua(){var a,l,$=i*76+47,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&U(vs)),l!==e&&(N=a,l=nu()),a=l,R[$]={nextPos:i,result:a},a)}function yn(){var a,l,$=i*76+48,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===it?(l=it,i+=2):(l=e,O===0&&U(un)),l!==e&&(N=a,l=ui()),a=l,R[$]={nextPos:i,result:a},a)}function Mi(){var a,l=i*76+49,$=R[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(a=fa()),R[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,v,s,u,y=i*76+50,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er)),v!==e)for(;v!==e;)$.push(v),Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(v=Pr,i++):(v=e,O===0&&U(Is)),v!==e){if(s=[],Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er)),u!==e)for(;u!==e;)s.push(u),Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er));else s=e;s!==e?(N=a,a=au()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e)if(t.charCodeAt(i)===46?($=Pr,i++):($=e,O===0&&U(Is)),$!==e){if(v=[],Ct.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&U(er)),s!==e)for(;s!==e;)v.push(s),Ct.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&U(er));else v=e;v!==e?(N=a,a=iu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[y]={nextPos:i,result:a},a}function fa(){var a,l,$,v,s=i*76+51,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er)),v!==e)for(;v!==e;)$.push(v),Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er));else $=e;$!==e?(N=a,a=oi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e?(N=a,a=lu()):(i=a,a=e)),R[s]={nextPos:i,result:a},a}function ca(){var a,l=i*76+52,$=R[l];return $?(i=$.nextPos,$.result):(a=Ei(),a===e&&(a=ha()),R[l]={nextPos:i,result:a},a)}function Ei(){var a,l,$,v,s=i*76+53,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===qe?(l=qe,i+=4):(l=e,O===0&&U(za)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=fi()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function ha(){var a,l,$,v,s=i*76+54,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&U(dr)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=uu()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function pa(){var a,l,$,v,s=i*76+55,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&U(vl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=ou()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function va(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+56,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=ci(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=ci(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=W,i++):(s=e,O===0&&U(st)),s!==e?(N=a,a=fu(v)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function Cu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+57,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=hi(u)}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=hi(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=Xn(v)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function ga(){var a,l,$,v,s,u,y,h=i*76+58,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,l=Ge(),l!==e){for($=i,v=[],s=g();s!==e;)v.push(s),s=g();if(t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=tt(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),N=a,a=cu(l,$)}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function da(){var a,l,$,v,s,u,y=i*76+59,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=ga(),l!==e){for($=[],v=i,s=k(),s!==e?(u=ga(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=ga(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);N=a,a=Yn(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function wr(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=i*76+60,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.charCodeAt(i)===64?(l=Pt,i++):(l=e,O===0&&U(gl)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Ge(),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=T,i++):(u=e,O===0&&U(kt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=da(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=E,i++):(m=e,O===0&&U(ft)),m!==e){for(_=i,A=[],S=g();S!==e;)A.push(S),S=g();if(t.charCodeAt(i)===58?(S=pe,i++):(S=e,O===0&&U(Ht)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=tt(),H!==e?_=H:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],S=g();S!==e;)A.push(S),S=g();if(t.charCodeAt(i)===123?(S=L,i++):(S=e,O===0&&U(Gt)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();for(H=es(),H===e&&(H=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=W,i++):(se=e,O===0&&U(st)),se!==e?(N=a,a=hu($,v,s,h,_,H)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function _u(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I=i*76+61,H=R[I];if(H)return i=H.nextPos,H.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(Ds)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=da(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=pe,i++):(x=e,O===0&&U(Ht)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?y=_:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=L,i++):(x=e,O===0&&U(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=es(),_===e&&(_=null),A=[],S=g();S!==e;)A.push(S),S=g();t.charCodeAt(i)===125?(S=W,i++):(S=e,O===0&&U(st)),S!==e?(N=a,a=pu(v,y,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[I]={nextPos:i,result:a},a}function ya(){var a,l,$,v,s,u,y,h,x,m,_=i*76+62,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=pi(u)}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=pi(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=vu(v)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Si(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+63,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=vi(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=vi(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=W,i++):(s=e,O===0&&U(st)),s!==e?(N=a,a=gi(v)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=R[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=ur()),R[l]={nextPos:i,result:a},a)}function Pu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+65,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(Ds)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=Ms(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.substr(i,2)===ve?(h=ve,i+=2):(h=e,O===0&&U(sn)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(N=a,a=gu(v,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Ms(){var a,l,$,v,s,u,y=i*76+66,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],v=i,s=k(),s!==e?(u=tt(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=tt(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);N=a,a=di(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ur(){var a,l,$,v,s,u,y,h,x=i*76+67,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ge(),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(t.charCodeAt(i)===60?(v=pt,i++):(v=e,O===0&&U(en)),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(y=[],h=b();h!==e;)y.push(h),h=b();t.charCodeAt(i)===62?(h=Hr,i++):(h=e,O===0&&U(zn)),h!==e?(N=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ge(),l!==e&&(N=a,l=te(l)),a=l),R[x]={nextPos:i,result:a},a}function Ge(){var a,l,$,v,s=i*76+68,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(dl)),l!==e){for($=[],En.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Wn));v!==e;)$.push(v),En.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Wn));N=a,a=Cs()}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function Ti(){var a,l,$,v,s,u,y=i*76+69,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ge(),l!==e){for($=[],v=i,t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e?(u=Ge(),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e?(u=Ge(),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);N=a,a=yr()}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function k(){var a,l,$,v,s,u=i*76+70,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=Y,i++):($=e,O===0&&U(ct)),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();l=[l,$,v],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return R[u]={nextPos:i,result:a},a}function De(){var a,l,$,v,s,u,y=i*76+71,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=es(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=W,i++):(u=e,O===0&&U(st)),u!==e?(N=a,a=fn(v)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Cr()),R[y]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=R[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ut?(a=Ut,i+=2):(a=e,O===0&&U(yl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ka))),R[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,v=R[$];return v?(i=v.nextPos,v.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&U(lr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),R[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=R[l];return $?(i=$.nextPos,$.result):(el.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(wl)),R[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=R[l];return $?(i=$.nextPos,$.result):(tl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(ml)),R[l]={nextPos:i,result:a},a)}function w(a,l,$){const v={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(v[u]=l[u]);const s=V();return v.loc={start:s.start.offset,end:s.end.offset-1},v}if(_t=d(),_t!==e&&i===t.length)return _t;throw _t!==e&&i<t.length&&U(de()),cn(X,o<t.length?t.charAt(o):null,o<t.length?Bs(o,o+1):Bs(o,o))}const xC=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function bC(t){return xC.includes(t.type)}function Kw(t){return"chain"in t&&t.chain!==null}function AC(t,r,e){return{type:"call",target:t,args:r,loc:e}}function CC(t,r,e){return{type:"index",target:t,index:r,loc:e}}function _C(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Nt(e.expr,r);break}case"return":{e.expr=Nt(e.expr,r);break}case"each":{e.items=Nt(e.items,r),e.for=Nt(e.for,r);break}case"for":{e.from!=null&&(e.from=Nt(e.from,r)),e.to!=null&&(e.to=Nt(e.to,r)),e.times!=null&&(e.times=Nt(e.times,r)),e.for=Nt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Nt(e.expr,r),e.dest=Nt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=Nt(e.operands[n],r);break}case"not":{e.expr=Nt(e.expr,r);break}case"if":{e.cond=Nt(e.cond,r),e.then=Nt(e.then,r);for(const n of e.elseif)n.cond=Nt(n.cond,r),n.then=Nt(n.then,r);e.else!=null&&(e.else=Nt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=Nt(e.children[n],r);break}case"match":{e.about=Nt(e.about,r);for(const n of e.qs)n.q=Nt(n.q,r),n.a=Nt(n.a,r);e.default!=null&&(e.default=Nt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=Nt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=Nt(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],Nt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=Nt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"indexChain":{e.index=Nt(e.index,r);break}case"call":{e.target=Nt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=Nt(e.args[n],r);break}case"index":{e.target=Nt(e.target,r),e.index=Nt(e.index,r);break}case"prop":{e.target=Nt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=Nt(e.members[n],r);break}case"or":case"and":{e.left=Nt(e.left,r),e.right=Nt(e.right,r);break}}if(Kw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=Nt(e.chain[n],r);return e}const qp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Vp(t){throw new mf(`Reserved word "${t}" cannot be used as variable name.`)}function PC(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{qp.includes(t.name)&&Vp(t.name);break}case"meta":{t.name!=null&&qp.includes(t.name)&&Vp(t.name);break}case"fn":{for(const r of t.args)qp.includes(r.name)&&Vp(r.name);break}}return t}function kC(t){for(const r of t)Nt(r,PC);return t}function Wd(t){return{type:"simple",name:t}}function MC(t,r){return{type:"generic",name:t,inners:r}}function EC(t,r){return{type:"fn",args:t,result:r}}function bh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=bh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>bh(n)).join(", "),e=bh(t.result);return`@(${r}) { ${e} }`}}}function tc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Wd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=tc(t.inner):r=Wd("any"),MC(t.name,[r])}}throw new mf(`Unknown type: '${bh(t)}'`)}else{const r=t.args.map(e=>tc(e));return EC(r,tc(t.result))}}function SC(t){switch(t.type){case"def":{t.varType!=null&&tc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&tc(r.argType);t.retType!=null&&tc(t.retType);break}}return t}function TC(t){for(const r of t)Nt(r,SC);return t}function Ah(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Ah(n.expr.children)),r.push(n);else{if(e.length>0)throw new mf("invalid attribute.");switch(n.type){case"fn":{n.children=Ah(n.children);break}case"block":{n.statements=Ah(n.statements);break}}r.push(n)}if(e.length>0)throw new mf("invalid attribute.");return r}function NC(t){if(bC(t)&&Kw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=AC(n,p.args,p.loc);break}case"indexChain":{n=CC(n,p.index,p.loc);break}case"propChain":{n=_C(n,p.name,p.loc);break}}return n}return t}function FC(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],NC);return t}function Ch(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Ww(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Ch(t,r,e);{const{left:n,right:p,info:d}=t;return Ch(n,Ww(p,r,e),d)}}function Zo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Zo(t.left),Zo(t.right)]}}const OC={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Zo(t.left),right:Zo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Zo(t.left),right:Zo(t.right)}),priority:3}};function IC(t){const r=t.operators.map(n=>{const p=OC[n];if(p==null)throw new mf(`No such operator: ${n}.`);return p});let e=Ch(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Ww(e,t.operands[2+n],r[1+n]);return Zo(e)}function RC(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],e=>e.type==="infix"?IC(e):e);return t}var zu;let jC=(zu=class{constructor(){fe(this,"plugins");this.plugins={validate:[kC,TC],transform:[Ah,FC,RC]}}static parse(r){return zu.instance==null&&(zu.instance=new zu),zu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Kd(r,{startRule:"Preprocess"});e=Kd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new mf(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new mf(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},fe(zu,"instance"),zu);const DC="0.15.0",UC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Bv=[],hc=null;function BC(t){return Bv=jC.parse(t),JSON.stringify(Bv,null,"	")}async function LC(t){hc==null||hc.abort(),hc=new Ra({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:jv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:jv(e.val,!0),print:!1});break}}});try{await hc.exec(Bv)}catch(r){t.err(r)}}const HC=Object.freeze(Object.defineProperty({__proto__:null,exec:LC,parse:BC,samples:UC,version:DC},Symbol.toStringTag,{value:"Module"}));class np extends Error{constructor(e,n){super(e);fe(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,np)}}class $f extends np{constructor(r,e){super(r,e)}}class Gr extends np{constructor(r,e){super(r,e)}}class qC extends Gr{constructor(r,e){super(r,e)}}var Mf=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};class Qu{constructor(r=[],e,n){fe(this,"parent");fe(this,"layerdStates");fe(this,"name");fe(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Qu(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new Gr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new Gr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const p of this.layerdStates){if(p.has(r)){p.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new Gr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}Mf([Dt],Qu.prototype,"log",null);Mf([Dt],Qu.prototype,"onUpdated",null);Mf([Dt],Qu.prototype,"createChildScope",null);Mf([Dt],Qu.prototype,"get",null);Mf([Dt],Qu.prototype,"getAll",null);Mf([Dt],Qu.prototype,"add",null);Mf([Dt],Qu.prototype,"assign",null);let rh;const VC=new Uint8Array(16);function zC(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(VC)}const Cn=[];for(let t=0;t<256;++t)Cn.push((t+256).toString(16).slice(1));function KC(t,r=0){return(Cn[t[r+0]]+Cn[t[r+1]]+Cn[t[r+2]]+Cn[t[r+3]]+"-"+Cn[t[r+4]]+Cn[t[r+5]]+"-"+Cn[t[r+6]]+Cn[t[r+7]]+"-"+Cn[t[r+8]]+Cn[t[r+9]]+"-"+Cn[t[r+10]]+Cn[t[r+11]]+Cn[t[r+12]]+Cn[t[r+13]]+Cn[t[r+14]]+Cn[t[r+15]]).toLowerCase()}const WC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Gd={randomUUID:WC};function GC(t,r,e){if(Gd.randomUUID&&!r&&!t)return Gd.randomUUID();t=t||{};const n=t.random||(t.rng||zC)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,KC(n)}const Mr={type:"null"},Zi={type:"bool",value:!0},Ri={type:"bool",value:!1},ht=t=>({type:"num",value:t}),zr=t=>({type:"str",value:t}),rc=t=>({type:"bool",value:t}),Cg=t=>({type:"obj",value:t}),Fn=t=>({type:"arr",value:t}),JC=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ze=t=>({type:"fn",native:t}),ZC=t=>({type:"return",value:t}),QC=()=>({type:"break",value:null}),XC=()=>({type:"continue",value:null}),YC=t=>t.type==="return"?t.value:t;function Li(t){if(t==null)throw new Gr("Expect anything, but got nothing.")}function Ca(t){if(t==null)throw new Gr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Gr(`Expect boolean, but got ${t.type}.`)}function Ao(t){if(t==null)throw new Gr("Expect function, but got nothing.");if(t.type!=="fn")throw new Gr(`Expect function, but got ${t.type}.`)}function Ks(t){if(t==null)throw new Gr("Expect string, but got nothing.");if(t.type!=="str")throw new Gr(`Expect string, but got ${t.type}.`)}function ut(t){if(t==null)throw new Gr("Expect number, but got nothing.");if(t.type!=="num")throw new Gr(`Expect number, but got ${t.type}.`)}function vo(t){if(t==null)throw new Gr("Expect object, but got nothing.");if(t.type!=="obj")throw new Gr(`Expect object, but got ${t.type}.`)}function Cc(t){if(t==null)throw new Gr("Expect array, but got nothing.");if(t.type!=="arr")throw new Gr(`Expect array, but got ${t.type}.`)}function e_(t){return t.type==="str"}function t_(t){return t.type==="num"}function r_(t){return t.type==="obj"}function s_(t){return t.type==="arr"}function Lv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Hv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Hv(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function qv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>qv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=qv(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Vv(t){if(t===null)return Mr;if(typeof t=="boolean")return rc(t);if(typeof t=="string")return zr(t);if(typeof t=="number")return ht(t);if(Array.isArray(t))return Fn(t.map(r=>Vv(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Vv(n));return Cg(r)}return Mr}const n_={help:zr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zr("0.14.1"),"Core:ai":zr("kawaii"),"Core:not":ze(([t])=>(Ca(t),t.value?Ri:Zi)),"Core:eq":ze(([t,r])=>(Li(t),Li(r),Lv(t,r)?Zi:Ri)),"Core:neq":ze(([t,r])=>(Li(t),Li(r),Lv(t,r)?Ri:Zi)),"Core:and":ze(([t,r])=>(Ca(t),t.value?(Ca(r),r.value?Zi:Ri):Ri)),"Core:or":ze(([t,r])=>(Ca(t),t.value?Zi:(Ca(r),r.value?Zi:Ri))),"Core:add":ze(([t,r])=>(ut(t),ut(r),ht(t.value+r.value))),"Core:sub":ze(([t,r])=>(ut(t),ut(r),ht(t.value-r.value))),"Core:mul":ze(([t,r])=>(ut(t),ut(r),ht(t.value*r.value))),"Core:pow":ze(([t,r])=>{ut(t),ut(r);const e=t.value**r.value;if(isNaN(e))throw new Gr("Invalid operation.");return ht(e)}),"Core:div":ze(([t,r])=>{ut(t),ut(r);const e=t.value/r.value;if(isNaN(e))throw new Gr("Invalid operation.");return ht(e)}),"Core:mod":ze(([t,r])=>(ut(t),ut(r),ht(t.value%r.value))),"Core:gt":ze(([t,r])=>(ut(t),ut(r),t.value>r.value?Zi:Ri)),"Core:lt":ze(([t,r])=>(ut(t),ut(r),t.value<r.value?Zi:Ri)),"Core:gteq":ze(([t,r])=>(ut(t),ut(r),t.value>=r.value?Zi:Ri)),"Core:lteq":ze(([t,r])=>(ut(t),ut(r),t.value<=r.value?Zi:Ri)),"Core:type":ze(([t])=>(Li(t),zr(t.type))),"Core:to_str":ze(([t])=>(Li(t),t.type==="str"?t:t.type==="num"?zr(t.value.toString()):zr("?"))),"Core:range":ze(([t,r])=>(ut(t),ut(r),t.value<r.value?Fn(Array.from({length:r.value-t.value+1},(e,n)=>ht(n+t.value))):t.value>r.value?Fn(Array.from({length:t.value-r.value+1},(e,n)=>ht(t.value-n))):Fn([t]))),"Util:uuid":ze(()=>zr(GC())),"Json:stringify":ze(([t])=>(Li(t),zr(JSON.stringify(qv(t))))),"Json:parse":ze(([t])=>(Ks(t),Vv(JSON.parse(t.value)))),"Json:parsable":ze(([t])=>{Ks(t);try{JSON.parse(t.value)}catch{return rc(!1)}return rc(!0)}),"Date:now":ze(()=>ht(Date.now())),"Date:year":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ze(([t])=>(Ks(t),ht(new Date(t.value).getTime()))),"Math:Infinity":ht(1/0),"Math:PI":ht(Math.PI),"Math:sin":ze(([t])=>(ut(t),ht(Math.sin(t.value)))),"Math:cos":ze(([t])=>(ut(t),ht(Math.cos(t.value)))),"Math:abs":ze(([t])=>(ut(t),ht(Math.abs(t.value)))),"Math:sqrt":ze(([t])=>{ut(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Gr("Invalid operation.");return ht(r)}),"Math:round":ze(([t])=>(ut(t),ht(Math.round(t.value)))),"Math:ceil":ze(([t])=>(ut(t),ht(Math.ceil(t.value)))),"Math:floor":ze(([t])=>(ut(t),ht(Math.floor(t.value)))),"Math:min":ze(([t,r])=>(ut(t),ut(r),ht(Math.min(t.value,r.value)))),"Math:max":ze(([t,r])=>(ut(t),ut(r),ht(Math.max(t.value,r.value)))),"Math:rnd":ze(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ht(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ht(Math.random())),"Math:gen_rng":ze(([t])=>{if(Li(t),t.type!=="num"&&t.type!=="str")return Mr;const r=To(t.value.toString());return ze(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?ht(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ht(r()))}),"Num:to_hex":ze(([t])=>(ut(t),zr(t.value.toString(16)))),"Num:from_hex":ze(([t])=>(Ks(t),ht(parseInt(t.value,16)))),"Str:lf":zr(`
`),"Str:lt":ze(([t,r])=>(Ks(t),Ks(r),t.value<r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Str:gt":ze(([t,r])=>(Ks(t),Ks(r),t.value>r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Obj:keys":ze(([t])=>(vo(t),Fn(Array.from(t.value.keys()).map(r=>zr(r))))),"Obj:vals":ze(([t])=>(vo(t),Fn(Array.from(t.value.values())))),"Obj:kvs":ze(([t])=>(vo(t),Fn(Array.from(t.value.entries()).map(([r,e])=>Fn([zr(r),e]))))),"Obj:get":ze(([t,r])=>(vo(t),Ks(r),t.value.get(r.value)??Mr)),"Obj:set":ze(([t,r,e])=>(vo(t),Ks(r),Li(e),t.value.set(r.value,e),Mr)),"Obj:has":ze(([t,r])=>(vo(t),Ks(r),rc(t.value.has(r.value)))),"Obj:copy":ze(([t])=>(vo(t),Cg(new Map(t.value)))),"Async:interval":ze(async([t,r,e],n)=>{ut(t),Ao(r),e&&(Ca(e),e.value&&n.call(r,[]));const p=setInterval(()=>{n.call(r,[])},t.value),d=()=>{clearInterval(p)};return n.registerAbortHandler(d),ze(([],C)=>{clearInterval(p),C.unregisterAbortHandler(d)})}),"Async:timeout":ze(async([t,r],e)=>{ut(t),Ao(r);const n=setTimeout(()=>{e.call(r,[])},t.value),p=()=>{clearTimeout(n)};return e.registerAbortHandler(p),ze(([],d)=>{clearTimeout(n),d.unregisterAbortHandler(p)})})},Tf={num:{to_str:t=>ze(async(r,e)=>zr(t.value.toString()))},str:{to_num:t=>ze(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Mr:ht(n)}),len:t=>ht(Cf(t.value)),replace:t=>ze(async([r,e],n)=>(Ks(r),Ks(e),zr(t.value.split(r.value).join(e.value)))),index_of:t=>ze(async([r],e)=>(Ks(r),ht(Pf(t.value,r.value)))),incl:t=>ze(async([r],e)=>(Ks(r),t.value.includes(r.value)?Zi:Ri)),trim:t=>ze(async(r,e)=>zr(t.value.trim())),upper:t=>ze(async(r,e)=>zr(t.value.toUpperCase())),lower:t=>ze(async(r,e)=>zr(t.value.toLowerCase())),split:t=>ze(async([r],e)=>(r&&Ks(r),Fn(r?t.value.split(r?r.value:"").map(n=>zr(n)):Qs(t.value).map(n=>zr(n))))),slice:t=>ze(async([r,e],n)=>(ut(r),ut(e),zr(_f(t.value,r.value,e.value)))),pick:t=>ze(async([r],e)=>{ut(r);const p=Qs(t.value)[r.value];return p?zr(p):Mr})},arr:{len:t=>ht(t.value.length),push:t=>ze(async([r],e)=>(Li(r),t.value.push(r),t)),unshift:t=>ze(async([r],e)=>(Li(r),t.value.unshift(r),t)),pop:t=>ze(async(r,e)=>t.value.pop()??Mr),shift:t=>ze(async(r,e)=>t.value.shift()??Mr),concat:t=>ze(async([r],e)=>(Cc(r),Fn(t.value.concat(r.value)))),slice:t=>ze(async([r,e],n)=>(ut(r),ut(e),Fn(t.value.slice(r.value,e.value)))),join:t=>ze(async([r],e)=>(r&&Ks(r),zr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ze(async([r],e)=>{Ao(r);const n=t.value.map(async(p,d)=>await e.call(r,[p,ht(d)]));return Fn(await Promise.all(n))}),filter:t=>ze(async([r],e)=>{Ao(r);const n=[];for(let p=0;p<t.value.length;p++){const d=t.value[p],C=await e.call(r,[d,ht(p)]);Ca(C),C.value&&n.push(d)}return Fn(n)}),reduce:t=>ze(async([r,e],n)=>{Ao(r);const p=e!=null;let d=p?e:t.value[0];for(let C=p?0:1;C<t.value.length;C++){const P=t.value[C];d=await n.call(r,[d,P,ht(C)])}return d}),find:t=>ze(async([r],e)=>{Ao(r);for(let n=0;n<t.value.length;n++){const p=t.value[n],d=await e.call(r,[p,ht(n)]);if(Ca(d),d.value)return p}return Mr}),incl:t=>ze(async([r],e)=>(Li(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ri:(p=>p.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Zi:Ri)),reverse:t=>ze(async(r,e)=>(t.value.reverse(),Mr)),copy:t=>ze(async(r,e)=>Fn([...t.value])),sort:t=>ze(async([r],e)=>{const n=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),M=await n(d.slice(0,P),C),T=await n(d.slice(P),C);return p(M,T,C)},p=async(d,C,P)=>{const M=[];let T=0,E=0;for(;T<d.length&&E<C.length;){const B=d[T],L=C[E],W=await e.call(P,[B,L]);ut(W),W.value<0?(M.push(d[T]),T++):(M.push(C[E]),E++)}return M.concat(d.slice(T)).concat(C.slice(E))};return Ao(r),Cc(t),t.value=await n(t.value,r),t})}};var zi=function(t,r,e,n){var p=arguments.length,d=p<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,n);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(p<3?C(d):p>3?C(r,e,d):C(r,e))||d);return p>3&&d&&Object.defineProperty(r,e,d),d};const Gw=300,a_=Gw-1;class ja{constructor(r,e){fe(this,"vars");fe(this,"opts");fe(this,"stepCount",0);fe(this,"stop",!1);fe(this,"scope");fe(this,"abortHandlers",[]);this.opts=e??{};const n={print:ze(([p])=>{Li(p),this.opts.out&&this.opts.out(p)}),readline:ze(async p=>{const d=p[0];if(Ks(d),this.opts.in==null)return Mr;const C=await this.opts.in(d.value);return zr(C)})};this.vars={...r,...n_,...n},this.scope=new Qu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(p,d)=>{switch(p){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(p){switch(p.type){case"arr":return p.value.map(d=>e(d));case"bool":return p.value;case"null":return null;case"num":return p.value;case"obj":{const d={};for(const[C,P]of p.value.entries())d[C]=e(P);return d}case"str":return p.value;default:return}}const n=new Map;for(const p of r)switch(p.type){case"meta":{n.set(p.name,e(p.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const p=await this._eval(n.expr,e);e.add(n.name,p),this.scope.add(r.name+":"+n.name,p);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Mr;{const n=new Map;for(let d=0;d<(r.args??[]).length;d++)n.set(r.args[d],e[d]);const p=r.scope.createChildScope(n);return YC(await this._run(r.statements,p))}}async _eval(r,e){if(this.stop)return Mr;if(this.stepCount%Gw===a_&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Gr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Ao(n);const p=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(n,p)}case"if":{const n=await this._eval(r.cond,e);if(Ca(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const p of r.elseif){const d=await this._eval(p.cond,e);if(Ca(d),d.value)return this._eval(p.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Mr}case"match":{const n=await this._eval(r.about,e);for(const p of r.qs){const d=await this._eval(p.q,e);if(Lv(n,d))return await this._eval(p.a,e)}return r.default?await this._eval(r.default,e):Mr}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Mr}case"for":{if(r.times){const n=await this._eval(r.times,e);ut(n);for(let p=0;p<n.value;p++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const n=await this._eval(r.from,e),p=await this._eval(r.to,e);ut(n),ut(p);for(let d=n.value;d<n.value+p.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,ht(d)]])));if(C.type==="break")break;if(C.type==="return")return C}}return Mr}case"each":{const n=await this._eval(r.items,e);Cc(n);for(const p of n.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,p]])));if(d.type==="break")break;if(d.type==="return")return d}return Mr}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const p=[];for(const d of r.attr)p.push({name:d.name,value:await this._eval(d.value,e)});n.attr=p}return e.add(r.name,n),Mr}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Mr}case"addAssign":{const n=await this._eval(r.dest,e);ut(n);const p=await this._eval(r.expr,e);return ut(p),await this.assign(e,r.dest,ht(n.value+p.value)),Mr}case"subAssign":{const n=await this._eval(r.dest,e);ut(n);const p=await this._eval(r.expr,e);return ut(p),await this.assign(e,r.dest,ht(n.value-p.value)),Mr}case"null":return Mr;case"bool":return rc(r.value);case"num":return ht(r.value);case"str":return zr(r.value);case"arr":return Fn(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const p of r.value.keys())n.set(p,await this._eval(r.value.get(p),e));return Cg(n)}case"prop":{const n=await this._eval(r.target,e);if(r_(n))return n.value.has(r.name)?n.value.get(r.name):Mr;if(t_(n)){if(Object.hasOwn(Tf.num,r.name))return Tf.num[r.name](n);throw new Gr(`No such prop (${r.name}) in ${n.type}.`)}else if(e_(n)){if(Object.hasOwn(Tf.str,r.name))return Tf.str[r.name](n);throw new Gr(`No such prop (${r.name}) in ${n.type}.`)}else if(s_(n)){if(Object.hasOwn(Tf.arr,r.name))return Tf.arr[r.name](n);throw new Gr(`No such prop (${r.name}) in ${n.type}.`)}else throw new Gr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Cc(n);const p=await this._eval(r.index,e);ut(p);const d=n.value[p.value];if(d===void 0)throw new qC(`Index out of range. index: ${p.value} max: ${n.value.length-1}`);return d}case"not":{const n=await this._eval(r.expr,e);return Ca(n),rc(!n.value)}case"fn":return JC(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const p of r.tmpl)if(typeof p=="string")n+=p;else{const d=await this._eval(p,e);let C="";d.type==="str"?C=d.value:d.type==="num"&&(C=d.value.toString()),n+=C}return zr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),ZC(n)}case"break":return this.log("block:break",{scope:e.name}),QC();case"continue":return this.log("block:continue",{scope:e.name}),XC();case"ns":return Mr;case"meta":return Mr;case"and":{const n=await this._eval(r.left,e);if(Ca(n),n.value){const p=await this._eval(r.right,e);return Ca(p),p}else return n}case"or":{const n=await this._eval(r.left,e);if(Ca(n),n.value)return n;{const p=await this._eval(r.right,e);return Ca(p),p}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Mr;for(let p=0;p<r.length;p++){const d=r[p];if(n=await this._eval(d,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const p=await this._eval(e.target,r);Cc(p);const d=await this._eval(e.index,r);ut(d),p.value[d.value]=n}else if(e.type==="prop"){const p=await this._eval(e.target,r);vo(p),p.value.set(e.name,n)}else throw new Gr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}zi([Dt],ja.prototype,"exec",null);zi([Dt],ja.prototype,"execFn",null);zi([Dt],ja.prototype,"log",null);zi([Dt],ja.prototype,"collectNs",null);zi([Dt],ja.prototype,"collectNsMember",null);zi([Dt],ja.prototype,"_fn",null);zi([Dt],ja.prototype,"_eval",null);zi([Dt],ja.prototype,"_run",null);zi([Dt],ja.prototype,"registerAbortHandler",null);zi([Dt],ja.prototype,"unregisterAbortHandler",null);zi([Dt],ja.prototype,"abort",null);zi([Dt],ja.prototype,"assign",null);zi([Dt],ja,"collectMetadata",null);function i_(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function cf(t,r,e,n){var p=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(p,cf.prototype),p.expected=r,p.found=e,p.location=n,p.name="SyntaxError",p}i_(cf,Error);function zp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}cf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var p=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(p):p,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,M=zp("",d.line.toString().length," "),T=e[p.line-1],E=p.line===P.line?P.column:T.length+1,B=E-p.column||1;r+=`
 --> `+C+`
`+M+` |
`+d.line+" | "+T+`
`+M+" | "+zp("",p.column-1," ")+zp("",B,"^")}else r+=`
 at `+C}return r};cf.buildMessage=function(t,r){var e={literal:function(T){return'"'+p(T.text)+'"'},class:function(T){var E=T.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(T.inverted?"^":"")+E.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(T){return T.description}};function n(T){return T.charCodeAt(0).toString(16).toUpperCase()}function p(T){return T.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function d(T){return T.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(E){return"\\x0"+n(E)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(E){return"\\x"+n(E)})}function C(T){return e[T.type](T)}function P(T){var E=T.map(C),B,L;if(E.sort(),E.length>0){for(B=1,L=1;B<E.length;B++)E[B-1]!==E[B]&&(E[L]=E[B],L++);E.length=L}switch(E.length){case 1:return E[0];case 2:return E[0]+" or "+E[1];default:return E.slice(0,-1).join(", ")+", or "+E[E.length-1]}}function M(T){return T?'"'+p(T)+'"':"end of input"}return"Expected "+P(t)+" but "+M(r)+" found."};function Jd(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,p={Preprocess:j,Main:hn},d=j,C="//",P="/*",M="*/",T="(",E=")",B="::",L="{",W="}",ge="###",ie="let",pe=":",be="=",Z="var",K="<:",G="#[",Q="]",re="each",Y=",",le="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Hr=">",Yt="+",Sr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",J="if",ee="elif",ce="else",Ce="match",ve="=>",Ae="eval",Re="`",Ee='"',Se="'",$e='\\"',it="\\'",qe="true",Ye="false",Qe="null",ot=";",Pt="@",xt="@(",Ut=`\r
`,yt=/^[A-Z0-9_:]/i,lt=/^[^`{]/,vr=/^[{}`]/,cs=/^[+\-]/,is=/^[1-9]/,Ct=/^[0-9]/,Rt=/^[A-Z_]/i,En=/^[A-Z0-9_]/i,gr=/^[\r\n]/,el=/^[ \t\r\n]/,tl=/^[ \t]/,lr=du(),Bt=ue("//",!1),Qr=ue("/*",!1),qn=ue("*/",!1),kt=ue("(",!1),ft=ue(")",!1),Tr=ue("::",!1),Gt=ue("{",!1),st=ue("}",!1),Lt=ue("###",!1),bs=ue("let",!1),Ht=ue(":",!1),qt=ue("=",!1),Xr=ue("var",!1),Da=ue("<:",!1),Nr=ue("#[",!1),hs=ue("]",!1),Fs=ue("each",!1),ct=ue(",",!1),Ot=ue("for",!1),Ys=ue("return",!1),Fr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Or=ue("loop",!1),rl=ue("break",!1),Ua=ue("continue",!1),sl=ue("+=",!1),nl=ue("-=",!1),Ba=ue("\\",!1),La=ue("||",!1),al=ue("&&",!1),il=ue("==",!1),ll=ue("!=",!1),ul=ue("<=",!1),Vn=ue(">=",!1),en=ue("<",!1),zn=ue(">",!1),Ha=ue("+",!1),ol=ue("-",!1),qa=ue("*",!1),Os=ue("^",!1),fl=ue("/",!1),cl=ue("%",!1),hl=ue("!",!1),As=ue("[",!1),Is=ue(".",!1),Kn=ue("if",!1),tn=ue("elif",!1),rn=ue("else",!1),pl=ue("match",!1),sn=ue("=>",!1),ps=ue("eval",!1),Rs=ue("`",!1),Ar=D(["`","{"],!0,!1),nn=D(["{","}","`"],!1,!1),an=ue('"',!1),ln=ue("'",!1),vs=ue('\\"',!1),un=ue("\\'",!1),js=D(["+","-"],!1,!1),Va=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),za=ue("true",!1),dr=ue("false",!1),vl=ue("null",!1),on=ue(";",!1),gl=ue("@",!1),Ds=ue("@(",!1),dl=D([["A","Z"],"_"],!1,!0),Wn=D([["A","Z"],["0","9"],"_"],!1,!0),yl=ue(`\r
`,!1),Ka=D(["\r",`
`],!1,!1),wl=D([" ","	","\r",`
`],!1,!1),ml=D([" ","	"],!1,!1),Wa=function(a){return a.join("")},$l=function(){return F()},Ga=function(){return F()},xl=function(){return""},Ja=function(){return""},bl=function(a){return a??[]},Za=function(a,l){return l},Al=function(a,l){return[a,...l]},Gn=function(a,l){return l},Cl=function(a,l){return[a,...l]},Jn=function(a,l){return l},_l=function(a,l){return[a,...l]},Qa=function(a){return a},Pl=function(a,l){return w("ns",{name:a,members:l})},kl=function(a,l){return w("meta",{name:a,value:l})},Ml=function(a){return w("meta",{name:null,value:a})},El=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Sl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Tl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Nl=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Fl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ol=function(a,l,$){return w("each",{var:a,items:l,for:$})},Il=function(a,l){return l},Rl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},jl=function(a,l){return l},Dl=function(a,l,$,v){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:v})},Ul=function(a,l){return w("for",{times:a,for:l})},Xa=function(a,l){return w("for",{times:a,for:l})},Bl=function(a){return w("return",{expr:a})},Ll=function(a){return w("loop",{statements:a})},Hl=function(){return w("break",{})},ql=function(){return w("continue",{})},Vl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Zn=function(a,l,$){return{op:l,term:$}},zl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Ya=function(){return F()},Kl=function(a){return w("not",{expr:a})},Wl=function(a,l){return{...a,chain:l}},Gl=function(a){return w("callChain",{args:a??[]})},ei=function(a,l){return l},Jl=function(a,l){return[a,...l]},Qn=function(a){return w("indexChain",{index:a})},Zl=function(a){return w("propChain",{name:a})},Ql=function(a,l,$,v){return w("if",{cond:a,then:l,elseif:$??[],else:v})},Xl=function(a,l){return[a,...l]},Yl=function(a,l){return{cond:a,then:l}},eu=function(a){return a},ti=function(a,l,$){return{q:l,a:$}},ri=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},si=function(a){return w("block",{statements:a})},ni=function(a){return w("identifier",{name:a})},tu=function(a){return w("tmpl",{tmpl:a})},ru=function(a){return a.join("")},ai=function(a){return a},su=function(a){return w("str",{value:a.join("")})},ii=function(a){return a},li=function(a){return w("str",{value:a.join("")})},nu=function(){return'"'},ui=function(){return"'"},au=function(){return w("num",{value:parseFloat(F())})},iu=function(){return w("num",{value:parseFloat(F())})},oi=function(){return w("num",{value:parseInt(F(),10)})},lu=function(){return w("num",{value:parseInt(F(),10)})},fi=function(){return w("bool",{value:!0})},uu=function(){return w("bool",{value:!1})},ou=function(){return w("null",{})},ci=function(a,l){return{k:a,v:l}},fu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},hi=function(a){return a},Xn=function(a){return w("arr",{value:a})},cu=function(a,l){return{name:a,argType:l}},Yn=function(a,l){return[a,...l]},hu=function(a,l,$,v,s,u){return(a.length>0||$.length>0)&&Us("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:v??[],retType:s},u??[]),mut:!1,attr:[]})},pu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},pi=function(a){return a},vu=function(a){return w("arr",{value:a})},vi=function(a,l){return{k:a,v:l}},gi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},gu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},di=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},yr=function(){return F()},fn=function(a){return w("block",{statements:a??[]})},i=0,N=0,Yr=[{line:1,column:1}],o=0,X=[],O=0,R={},_t;if("startRule"in r){if(!(r.startRule in p))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=p[r.startRule]}function F(){return t.substring(N,i)}function V(){return Bs(N,i)}function Us(a,l){throw l=l!==void 0?l:Bs(N,i),yi(a,l)}function ue(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function du(){return{type:"any"}}function de(){return{type:"end"}}function tr(a){var l=Yr[a],$;if(l)return l;for($=a-1;!Yr[$];)$--;for(l=Yr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Yr[a]=l,l}function Bs(a,l,$){var v=tr(a),s=tr(l),u={source:n,start:{offset:a,line:v.line,column:v.column},end:{offset:l,line:s.line,column:s.column}};return u}function U(a){i<o||(i>o&&(o=i,X=[]),X.push(a))}function yi(a,l){return new cf(a,null,null,l)}function cn(a,l,$){return new cf(cf.buildMessage(a,l),a,l,$)}function j(){var a,l,$,v=i*76+0,s=R[v];if(s)return i=s.nextPos,s.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return N=a,l=Wa(l),a=l,R[v]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,v=R[$];return v?(i=v.nextPos,v.result):(a=i,l=gn(),l!==e&&(N=a,l=$l()),a=l,a===e&&(a=i,l=dn(),l!==e&&(N=a,l=Ga()),a=l,a===e&&(a=ea(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&U(lr))))),R[$]={nextPos:i,result:a},a)}function ea(){var a,l,$,v,s,u,y=i*76+2,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,O===0&&U(Bt)),l!==e){for($=[],v=i,s=i,O++,u=f(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,u=f(),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);N=a,a=xl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&U(Qr)),l!==e){for($=[],v=i,s=i,O++,t.substr(i,2)===M?(u=M,i+=2):(u=e,O===0&&U(qn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.substr(i,2)===M?(u=M,i+=2):(u=e,O===0&&U(qn)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);t.substr(i,2)===M?(v=M,i+=2):(v=e,O===0&&U(qn)),v!==e?(N=a,a=Ja()):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function hn(){var a,l,$,v,s,u=i*76+3,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=Ps(),$===e&&($=null),v=[],s=g();s!==e;)v.push(s),s=g();return N=a,a=bl($),R[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,v,s,u,y,h,x=i*76+4,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=pn(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=pn(),h!==e?(N=v,v=Za(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=pn(),h!==e?(N=v,v=Za(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=Al(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function et(){var a,l,$,v,s,u,y,h,x=i*76+5,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ir(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Ir(),h!==e?(N=v,v=Gn(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Ir(),h!==e?(N=v,v=Gn(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=Cl(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function es(){var a,l,$,v,s,u,y,h,x=i*76+6,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Cr(),l!==e){for($=[],v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(N=v,v=Jn(l,h)):(i=v,v=e)}else i=v,v=e;for(;v!==e;){for($.push(v),v=i,s=[],u=b();u!==e;)s.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(N=v,v=Jn(l,h)):(i=v,v=e)}else i=v,v=e}N=a,a=_l(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function pn(){var a,l=i*76+7,$=R[l];return $?(i=$.nextPos,$.result):(a=Ls(),a===e&&(a=wi(),a===e&&(a=Cr())),R[l]={nextPos:i,result:a},a)}function Ir(){var a,l=i*76+8,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=Ls())),R[l]={nextPos:i,result:a},a)}function Cr(){var a,l=i*76+9,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=mi(),a===e&&(a=mu(),a===e&&(a=yu(),a===e&&(a=$i(),a===e&&(a=wu(),a===e&&(a=rs(),a===e&&(a=xi(),a===e&&(a=$u(),a===e&&(a=xu(),a===e&&(a=Xe()))))))))))),R[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=R[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=gs()),R[l]={nextPos:i,result:a},a)}function gs(){var a,l=i*76+11,$=R[l];return $?(i=$.nextPos,$.result):(a=bu(),a===e&&(a=_u(),a===e&&(a=ns(),a===e&&(a=ks()))),R[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,v,s,u,y=i*76+12,h=R[y];if(h)return i=h.nextPos,h.result;if(a=ki(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=dn(),a===e&&(a=Mi(),a===e&&(a=ca(),a===e&&(a=pa(),a===e&&(a=va(),a===e&&(a=Cu(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=T,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Xe(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e?(N=a,a=Qa(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function We(){var a,l=i*76+13,$=R[l];return $?(i=$.nextPos,$.result):(a=Mi(),a===e&&(a=dn(),a===e&&(a=ca(),a===e&&(a=ya(),a===e&&(a=Si(),a===e&&(a=pa()))))),R[l]={nextPos:i,result:a},a)}function Ls(){var a,l,$,v,s,u,y,h,x,m,_=i*76+14,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===B?(l=B,i+=2):(l=e,O===0&&U(Tr)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(u=L,i++):(u=e,O===0&&U(Gt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=W,i++):(m=e,O===0&&U(st)),m!==e?(N=a,a=Pl(v,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function wi(){var a,l,$,v,s,u,y=i*76+15,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Ge(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=We(),u!==e?(N=a,a=kl(v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();v=We(),v!==e?(N=a,a=Ml(v)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ts(){var a,l,$,v,s,u,y,h,x,m=i*76+16,_=R[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(bs)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(N=a,a=El(v,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===Z?(l=Z,i+=3):(l=e,O===0&&U(Xr)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?s=x:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(N=a,a=Sl(v,s,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[m]={nextPos:i,result:a},a}function mi(){var a,l,$,v,s=i*76+17,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,O===0&&U(Da)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();v=Xe(),v!==e?(N=a,a=Tl(v)):(i=a,a=e)}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function yu(){var a,l,$,v,s,u,y,h=i*76+18,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===G?(l=G,i+=2):(l=e,O===0&&U(Nr)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Ge(),v!==e){for(s=i,u=[],y=g();y!==e;)u.push(y),y=g();for(y=We(),y!==e?s=y:(i=s,s=e),s===e&&(s=null),u=[],y=g();y!==e;)u.push(y),y=g();t.charCodeAt(i)===93?(y=Q,i++):(y=e,O===0&&U(hs)),y!==e?(N=a,a=Nl(v,s)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function $i(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+19,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Fs)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(t.substr(i,3)===ie?(s=ie,i+=3):(s=e,O===0&&U(bs)),s!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=E,i++):(A=e,O===0&&U(ft)),A!==e){for(S=[],I=g();I!==e;)S.push(I),I=g();I=De(),I!==e?(N=a,a=Fl(y,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Fs)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(t.substr(i,3)===ie?(v=ie,i+=3):(v=e,O===0&&U(bs)),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(N=a,a=Ol(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function wu(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z=i*76+20,se=R[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(t.substr(i,3)===ie?(s=ie,i+=3):(s=e,O===0&&U(bs)),s!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=be,i++):(m=e,O===0&&U(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(N=x,x=Il(y,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,O===0&&U(ct)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(S=E,i++):(S=e,O===0&&U(ft)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=De(),H!==e?(N=a,a=Rl(y,x,A,H)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(t.substr(i,3)===ie?(v=ie,i+=3):(v=e,O===0&&U(bs)),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=be,i++):(x=e,O===0&&U(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(N=h,h=jl(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],S=g(),S!==e)for(;S!==e;)A.push(S),S=g();else A=e;A!==e?(S=De(),S!==e?(N=a,a=Dl(u,h,_,S)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===40?(v=T,i++):(v=e,O===0&&U(kt)),v!==e)if(s=Xe(),s!==e)if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=De(),h!==e?(N=a,a=Ul(s,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Xe(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;s!==e?(u=De(),u!==e?(N=a,a=Xa(v,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return R[z]={nextPos:i,result:a},a}function mu(){var a,l,$,v,s,u=i*76+21,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&U(Ys)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();s=Xe(),s!==e?(N=a,a=Bl(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function rs(){var a,l,$,v,s,u,y,h,x=i*76+22,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,O===0&&U(Or)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===123?(v=L,i++):(v=e,O===0&&U(Gt)),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=W,i++):(h=e,O===0&&U(st)),h!==e?(N=a,a=Ll(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function xi(){var a,l,$,v,s=i*76+23,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ie?(l=Ie,i+=5):(l=e,O===0&&U(rl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=Hl()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function $u(){var a,l,$,v,s=i*76+24,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===ke?(l=ke,i+=8):(l=e,O===0&&U(Ua)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=ql()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function xu(){var a,l,$,v,s,u,y=i*76+25,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.substr(i,2)===at?(v=at,i+=2):(v=e,O===0&&U(sl)),v===e&&(t.substr(i,2)===vt?(v=vt,i+=2):(v=e,O===0&&U(nl)),v===e&&(t.charCodeAt(i)===61?(v=be,i++):(v=e,O===0&&U(qt)))),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();u=Xe(),u!==e?(N=a,a=Vl(l,v,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function bi(){var a,l,$,v,s,u,y,h,x=i*76+26,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=gs(),l!==e){for($=[],v=i,s=[],u=ss();u!==e;)s.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(N=v,v=Zn(l,u,h)):(i=v,v=e)}else i=v,v=e;if(v!==e)for(;v!==e;){for($.push(v),v=i,s=[],u=ss();u!==e;)s.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(N=v,v=Zn(l,u,h)):(i=v,v=e)}else i=v,v=e}else $=e;$!==e?(N=a,a=zl(l,$)):(i=a,a=e)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function ss(){var a,l,$,v=i*76+27,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),R[v]={nextPos:i,result:a},a)}function ta(){var a,l,$=i*76+28,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===At?(l=At,i+=2):(l=e,O===0&&U(La)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&U(al)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&U(il)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&U(ll)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,O===0&&U(ul)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,O===0&&U(Vn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,O===0&&U(en)),l===e&&(t.charCodeAt(i)===62?(l=Hr,i++):(l=e,O===0&&U(zn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,O===0&&U(Ha)),l===e&&(t.charCodeAt(i)===45?(l=Sr,i++):(l=e,O===0&&U(ol)),l===e&&(t.charCodeAt(i)===42?(l=ir,i++):(l=e,O===0&&U(qa)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,O===0&&U(Os)),l===e&&(t.charCodeAt(i)===47?(l=Jr,i++):(l=e,O===0&&U(fl)),l===e&&(t.charCodeAt(i)===37?(l=nr,i++):(l=e,O===0&&U(cl))))))))))))))),l!==e&&(N=a,l=Ya()),a=l,R[$]={nextPos:i,result:a},a)}function Ai(){var a,l,$,v=i*76+29,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===33?(l=Zr,i++):(l=e,O===0&&U(hl)),l!==e?($=Xe(),$!==e?(N=a,a=Kl($)):(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function ns(){var a,l,$,v,s=i*76+30,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],v=ra(),v===e&&(v=Ci(),v===e&&(v=na())),v!==e)for(;v!==e;)$.push(v),v=ra(),v===e&&(v=Ci(),v===e&&(v=na()));else $=e;$!==e?(N=a,a=Wl(l,$)):(i=a,a=e)}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function ra(){var a,l,$,v,s,u,y=i*76+31,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=T,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=sa(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e?(N=a,a=Gl(v)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function sa(){var a,l,$,v,s,u,y=i*76+32,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],v=i,s=k(),s!==e?(u=Xe(),u!==e?(N=v,v=ei(l,u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=Xe(),u!==e?(N=v,v=ei(l,u)):(i=v,v=e)):(i=v,v=e);N=a,a=Jl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ci(){var a,l,$,v,s,u,y=i*76+33,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=Xe(),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=Qn(v)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function na(){var a,l,$,v=i*76+34,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===46?(l=Pr,i++):(l=e,O===0&&U(Is)),l!==e?($=Ge(),$!==e?(N=a,a=Zl($)):(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function bu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+35,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===J?(l=J,i+=2):(l=e,O===0&&U(Kn)),l!==e){if($=[],v=g(),v!==e)for(;v!==e;)$.push(v),v=g();else $=e;if($!==e)if(v=Xe(),v!==e){if(s=[],u=g(),u!==e)for(;u!==e;)s.push(u),u=g();else s=e;if(s!==e)if(u=De(),u!==e){if(y=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=_i(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=Pi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),N=a,a=Ql(v,u,y,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function _i(){var a,l,$,v,s,u,y=i*76+36,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Hs(),l!==e){for($=[],v=i,s=[],u=g();u!==e;)s.push(u),u=g();for(u=Hs(),u!==e?v=u:(i=v,v=e);v!==e;){for($.push(v),v=i,s=[],u=g();u!==e;)s.push(u),u=g();u=Hs(),u!==e?v=u:(i=v,v=e)}N=a,a=Xl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Hs(){var a,l,$,v,s,u,y,h=i*76+37,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,O===0&&U(tn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();if(s=Xe(),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=De(),y!==e?(N=a,a=Yl(s,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[h]={nextPos:i,result:a},a}function Pi(){var a,l,$,v,s,u=i*76+38,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===ce?(l=ce,i+=4):(l=e,O===0&&U(rn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();s=De(),s!==e?(N=a,a=eu(s)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function ki(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=i*76+39,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.substr(i,5)===Ce?(l=Ce,i+=5):(l=e,O===0&&U(pl)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();if(s=Xe(),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===123?(y=L,i++):(y=e,O===0&&U(Gt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();N=m,m=ti(s,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();N=m,m=ti(s,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=ir,i++):(_=e,O===0&&U(qa)),_!==e){for(A=[],S=g();S!==e;)A.push(S),S=g();if(t.substr(i,2)===ve?(S=ve,i+=2):(S=e,O===0&&U(sn)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=H}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=W,i++):(A=e,O===0&&U(st)),A!==e?(N=a,a=ri(s,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function vn(){var a,l,$,v,s,u,y,h,x=i*76+40,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ae?(l=Ae,i+=4):(l=e,O===0&&U(ps)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(t.charCodeAt(i)===123?(v=L,i++):(v=e,O===0&&U(Gt)),v!==e){for(s=[],u=g();u!==e;)s.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=W,i++):(h=e,O===0&&U(st)),h!==e?(N=a,a=si(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function Au(){var a,l,$=i*76+41,v=R[$];return v?(i=v.nextPos,v.result):(a=i,l=Ti(),l!==e&&(N=a,l=ni(l)),a=l,R[$]={nextPos:i,result:a},a)}function gn(){var a,l,$,v,s,u,y=i*76+42,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Re,i++):(l=e,O===0&&U(Rs)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Rs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=aa(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Rs)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=aa(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===96?(v=Re,i++):(v=e,O===0&&U(Rs)),v!==e?(N=a,a=tu($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function aa(){var a,l,$,v,s,u,y=i*76+43,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Xe(),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();t.charCodeAt(i)===125?(u=W,i++):(u=e,O===0&&U(st)),u!==e?a=v:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ia(),$!==e)for(;$!==e;)l.push($),$=ia();else l=e;l!==e&&(N=a,l=ru(l)),a=l}return R[y]={nextPos:i,result:a},a}function ia(){var a,l=i*76+44,$=R[l];return $?(i=$.nextPos,$.result):(a=la(),a===e&&(lt.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ar))),R[l]={nextPos:i,result:a},a)}function la(){var a,l,$,v=i*76+45,s=R[v];return s?(i=s.nextPos,s.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?(vr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&U(nn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),R[v]={nextPos:i,result:a},a)}function dn(){var a,l,$,v,s,u,y=i*76+46,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Ee,i++):(l=e,O===0&&U(an)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===34?(u=Ee,i++):(u=e,O===0&&U(an)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ai(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===34?(u=Ee,i++):(u=e,O===0&&U(an)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ai(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===34?(v=Ee,i++):(v=e,O===0&&U(an)),v!==e?(N=a,a=su($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Se,i++):(l=e,O===0&&U(ln)),l!==e){for($=[],v=i,s=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(ln)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ii(u)):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(ln)),O--,u===e?s=void 0:(i=s,s=e),s!==e?(u=yn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(N=v,v=ii(u)):(i=v,v=e)):(i=v,v=e);t.charCodeAt(i)===39?(v=Se,i++):(v=e,O===0&&U(ln)),v!==e?(N=a,a=li($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ua(){var a,l,$=i*76+47,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&U(vs)),l!==e&&(N=a,l=nu()),a=l,R[$]={nextPos:i,result:a},a)}function yn(){var a,l,$=i*76+48,v=R[$];return v?(i=v.nextPos,v.result):(a=i,t.substr(i,2)===it?(l=it,i+=2):(l=e,O===0&&U(un)),l!==e&&(N=a,l=ui()),a=l,R[$]={nextPos:i,result:a},a)}function Mi(){var a,l=i*76+49,$=R[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(a=fa()),R[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,v,s,u,y=i*76+50,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er)),v!==e)for(;v!==e;)$.push(v),Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(v=Pr,i++):(v=e,O===0&&U(Is)),v!==e){if(s=[],Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er)),u!==e)for(;u!==e;)s.push(u),Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er));else s=e;s!==e?(N=a,a=au()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e)if(t.charCodeAt(i)===46?($=Pr,i++):($=e,O===0&&U(Is)),$!==e){if(v=[],Ct.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&U(er)),s!==e)for(;s!==e;)v.push(s),Ct.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,O===0&&U(er));else v=e;v!==e?(N=a,a=iu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[y]={nextPos:i,result:a},a}function fa(){var a,l,$,v,s=i*76+51,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er)),v!==e)for(;v!==e;)$.push(v),Ct.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(er));else $=e;$!==e?(N=a,a=oi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(js),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e?(N=a,a=lu()):(i=a,a=e)),R[s]={nextPos:i,result:a},a}function ca(){var a,l=i*76+52,$=R[l];return $?(i=$.nextPos,$.result):(a=Ei(),a===e&&(a=ha()),R[l]={nextPos:i,result:a},a)}function Ei(){var a,l,$,v,s=i*76+53,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===qe?(l=qe,i+=4):(l=e,O===0&&U(za)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=fi()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function ha(){var a,l,$,v,s=i*76+54,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&U(dr)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=uu()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function pa(){var a,l,$,v,s=i*76+55,u=R[s];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&U(vl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Fr)),O--,v===e?$=void 0:(i=$,$=e),$!==e?(N=a,a=ou()):(i=a,a=e)):(i=a,a=e),R[s]={nextPos:i,result:a},a)}function va(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+56,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=ci(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=ci(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=W,i++):(s=e,O===0&&U(st)),s!==e?(N=a,a=fu(v)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function Cu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+57,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=hi(u)}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=hi(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=Xn(v)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function ga(){var a,l,$,v,s,u,y,h=i*76+58,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,l=Ge(),l!==e){for($=i,v=[],s=g();s!==e;)v.push(s),s=g();if(t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=tt(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),N=a,a=cu(l,$)}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function da(){var a,l,$,v,s,u,y=i*76+59,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=ga(),l!==e){for($=[],v=i,s=k(),s!==e?(u=ga(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=ga(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);N=a,a=Yn(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function wr(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H,z,se,Fe=i*76+60,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.charCodeAt(i)===64?(l=Pt,i++):(l=e,O===0&&U(gl)),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(v=Ge(),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(t.charCodeAt(i)===40?(u=T,i++):(u=e,O===0&&U(kt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=da(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=E,i++):(m=e,O===0&&U(ft)),m!==e){for(_=i,A=[],S=g();S!==e;)A.push(S),S=g();if(t.charCodeAt(i)===58?(S=pe,i++):(S=e,O===0&&U(Ht)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=tt(),H!==e?_=H:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],S=g();S!==e;)A.push(S),S=g();if(t.charCodeAt(i)===123?(S=L,i++):(S=e,O===0&&U(Gt)),S!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();for(H=es(),H===e&&(H=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=W,i++):(se=e,O===0&&U(st)),se!==e?(N=a,a=hu($,v,s,h,_,H)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function _u(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I=i*76+61,H=R[I];if(H)return i=H.nextPos,H.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(Ds)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=da(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=pe,i++):(x=e,O===0&&U(Ht)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?y=_:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=L,i++):(x=e,O===0&&U(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=es(),_===e&&(_=null),A=[],S=g();S!==e;)A.push(S),S=g();t.charCodeAt(i)===125?(S=W,i++):(S=e,O===0&&U(st)),S!==e?(N=a,a=pu(v,y,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[I]={nextPos:i,result:a},a}function ya(){var a,l,$,v,s,u,y,h,x,m,_=i*76+62,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=pi(u)}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();N=s,s=pi(u)}else i=s,s=e;for(s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(N=a,a=vu(v)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Si(){var a,l,$,v,s,u,y,h,x,m,_,A,S,I,H=i*76+63,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();if(v=[],s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=vi(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(v.push(s),s=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(on))),A===e&&(A=null),S=[],I=g();I!==e;)S.push(I),I=g();N=s,s=vi(u,m)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=W,i++):(s=e,O===0&&U(st)),s!==e?(N=a,a=gi(v)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=R[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=ur()),R[l]={nextPos:i,result:a},a)}function Pu(){var a,l,$,v,s,u,y,h,x,m,_=i*76+65,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(Ds)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=Ms(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();if(t.charCodeAt(i)===41?(u=E,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.substr(i,2)===ve?(h=ve,i+=2):(h=e,O===0&&U(sn)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(N=a,a=gu(v,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Ms(){var a,l,$,v,s,u,y=i*76+66,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],v=i,s=k(),s!==e?(u=tt(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,s=k(),s!==e?(u=tt(),u!==e?v=u:(i=v,v=e)):(i=v,v=e);N=a,a=di(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ur(){var a,l,$,v,s,u,y,h,x=i*76+67,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ge(),l!==e){for($=[],v=b();v!==e;)$.push(v),v=b();if(t.charCodeAt(i)===60?(v=pt,i++):(v=e,O===0&&U(en)),v!==e){for(s=[],u=b();u!==e;)s.push(u),u=b();if(u=tt(),u!==e){for(y=[],h=b();h!==e;)y.push(h),h=b();t.charCodeAt(i)===62?(h=Hr,i++):(h=e,O===0&&U(zn)),h!==e?(N=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ge(),l!==e&&(N=a,l=te(l)),a=l),R[x]={nextPos:i,result:a},a}function Ge(){var a,l,$,v,s=i*76+68,u=R[s];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(dl)),l!==e){for($=[],En.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Wn));v!==e;)$.push(v),En.test(t.charAt(i))?(v=t.charAt(i),i++):(v=e,O===0&&U(Wn));N=a,a=Cs()}else i=a,a=e;return R[s]={nextPos:i,result:a},a}function Ti(){var a,l,$,v,s,u,y=i*76+69,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ge(),l!==e){for($=[],v=i,t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e?(u=Ge(),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);v!==e;)$.push(v),v=i,t.charCodeAt(i)===58?(s=pe,i++):(s=e,O===0&&U(Ht)),s!==e?(u=Ge(),u!==e?(s=[s,u],v=s):(i=v,v=e)):(i=v,v=e);N=a,a=yr()}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function k(){var a,l,$,v,s,u=i*76+70,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=Y,i++):($=e,O===0&&U(ct)),$!==e){for(v=[],s=g();s!==e;)v.push(s),s=g();l=[l,$,v],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return R[u]={nextPos:i,result:a},a}function De(){var a,l,$,v,s,u,y=i*76+71,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],v=g();v!==e;)$.push(v),v=g();for(v=es(),v===e&&(v=null),s=[],u=g();u!==e;)s.push(u),u=g();t.charCodeAt(i)===125?(u=W,i++):(u=e,O===0&&U(st)),u!==e?(N=a,a=fn(v)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Cr()),R[y]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=R[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ut?(a=Ut,i+=2):(a=e,O===0&&U(yl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ka))),R[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,v=R[$];return v?(i=v.nextPos,v.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&U(lr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),R[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=R[l];return $?(i=$.nextPos,$.result):(el.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(wl)),R[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=R[l];return $?(i=$.nextPos,$.result):(tl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(ml)),R[l]={nextPos:i,result:a},a)}function w(a,l,$){const v={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(v[u]=l[u]);const s=V();return v.loc={start:s.start.offset,end:s.end.offset-1},v}if(_t=d(),_t!==e&&i===t.length)return _t;throw _t!==e&&i<t.length&&U(de()),cn(X,o<t.length?t.charAt(o):null,o<t.length?Bs(o,o+1):Bs(o,o))}const l_=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function u_(t){return l_.includes(t.type)}function Jw(t){return"chain"in t&&t.chain!==null}function o_(t,r,e){return{type:"call",target:t,args:r,loc:e}}function f_(t,r,e){return{type:"index",target:t,index:r,loc:e}}function c_(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function jt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=jt(e.expr,r);break}case"return":{e.expr=jt(e.expr,r);break}case"each":{e.items=jt(e.items,r),e.for=jt(e.for,r);break}case"for":{e.from!=null&&(e.from=jt(e.from,r)),e.to!=null&&(e.to=jt(e.to,r)),e.times!=null&&(e.times=jt(e.times,r)),e.for=jt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=jt(e.expr,r),e.dest=jt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=jt(e.operands[n],r);break}case"not":{e.expr=jt(e.expr,r);break}case"if":{e.cond=jt(e.cond,r),e.then=jt(e.then,r);for(const n of e.elseif)n.cond=jt(n.cond,r),n.then=jt(n.then,r);e.else!=null&&(e.else=jt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=jt(e.children[n],r);break}case"match":{e.about=jt(e.about,r);for(const n of e.qs)n.q=jt(n.q,r),n.a=jt(n.a,r);e.default!=null&&(e.default=jt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=jt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const p=e.tmpl[n];typeof p!="string"&&(e.tmpl[n]=jt(p,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],jt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=jt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"indexChain":{e.index=jt(e.index,r);break}case"call":{e.target=jt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=jt(e.args[n],r);break}case"index":{e.target=jt(e.target,r),e.index=jt(e.index,r);break}case"prop":{e.target=jt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=jt(e.members[n],r);break}}if(Jw(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=jt(e.chain[n],r);return e}const Kp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Wp(t){throw new $f(`Reserved word "${t}" cannot be used as variable name.`)}function h_(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Kp.includes(t.name)&&Wp(t.name);break}case"meta":{t.name!=null&&Kp.includes(t.name)&&Wp(t.name);break}case"fn":{for(const r of t.args)Kp.includes(r.name)&&Wp(r.name);break}}return t}function p_(t){for(const r of t)jt(r,h_);return t}function Zd(t){return{type:"simple",name:t}}function v_(t,r){return{type:"generic",name:t,inners:r}}function g_(t,r){return{type:"fn",args:t,result:r}}function _h(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=_h(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>_h(n)).join(", "),e=_h(t.result);return`@(${r}) { ${e} }`}}}function sc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Zd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=sc(t.inner):r=Zd("any"),v_(t.name,[r])}}throw new $f(`Unknown type: '${_h(t)}'`)}else{const r=t.args.map(e=>sc(e));return g_(r,sc(t.result))}}function d_(t){switch(t.type){case"def":{t.varType!=null&&sc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&sc(r.argType);t.retType!=null&&sc(t.retType);break}}return t}function y_(t){for(const r of t)jt(r,d_);return t}function Ph(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Ph(n.expr.children)),r.push(n);else{if(e.length>0)throw new $f("invalid attribute.");switch(n.type){case"fn":{n.children=Ph(n.children);break}case"block":{n.statements=Ph(n.statements);break}}r.push(n)}if(e.length>0)throw new $f("invalid attribute.");return r}function w_(t){if(u_(t)&&Jw(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const p of r)switch(p.type){case"callChain":{n=o_(n,p.args,p.loc);break}case"indexChain":{n=f_(n,p.index,p.loc);break}case"propChain":{n=c_(n,p.name,p.loc);break}}return n}return t}function m_(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],w_);return t}function kh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Zw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return kh(t,r,e);{const{left:n,right:p,info:d}=t;return kh(n,Zw(p,r,e),d)}}function Qo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Qo(t.left),Qo(t.right)]}}const $_={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Qo(t.left),right:Qo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Qo(t.left),right:Qo(t.right)}),priority:3}};function x_(t){const r=t.operators.map(n=>{const p=$_[n];if(p==null)throw new $f(`No such operator: ${n}.`);return p});let e=kh(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Zw(e,t.operands[2+n],r[1+n]);return Qo(e)}function b_(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],e=>e.type==="infix"?x_(e):e);return t}const qo=class qo{constructor(){fe(this,"plugins");this.plugins={validate:[p_,y_],transform:[Ph,m_,b_]}}static parse(r){return qo.instance==null&&(qo.instance=new qo),qo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Jd(r,{startRule:"Preprocess"});e=Jd(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new $f(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new $f(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};fe(qo,"instance");let zv=qo;const A_="0.14.1",C_={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Kv=[],pc=null;function __(t){return Kv=zv.parse(t),JSON.stringify(Kv,null,"	")}async function P_(t){pc==null||pc.abort(),pc=new ja({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Hv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Hv(e.val,!0),print:!1});break}}});try{await pc.exec(Kv)}catch(r){t.err(r)}}const k_=Object.freeze(Object.defineProperty({__proto__:null,exec:P_,parse:__,samples:C_,version:A_},Symbol.toStringTag,{value:"Module"})),M_={id:"root"},E_={id:"grid1"},S_={class:"type"},T_={id:"grid2"},Qd=["develop","0.19.0","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],Xd="0.19.0",N_=jc({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:n,version:p,samples:d}={develop:Zb,"0.19.0":U1,"0.18.0":MA,"0.17.0":d2,"0.16.0":tC,"0.15.0":HC,"0.14.1":k_}[r.ver],C=Vo(window.localStorage.getItem(p)??'<: "Hello, AiScript!"'),P=Vo([]),M=Vo(""),T=Vo(null);xc(C,()=>{window.localStorage.setItem(p,C.value);try{M.value=e(C.value),T.value=null}catch(B){const L=B;T.value=L.message,console.error("info"in L?L.info:L);return}},{immediate:!0});function E(){P.value=[],n({in:B=>new Promise(L=>{const W=window.prompt(B);L(W??"")}),out:B=>P.value.push(B),end:B=>P.value.push(B),err:B=>{console.error(B),window.alert(`${B}`)}})}return(B,L)=>(us(),qs("div",M_,[Xi("div",E_,[ys(fx,{modelValue:C.value,"onUpdate:modelValue":L[0]||(L[0]=W=>C.value=W),samples:Mc(d),parseError:T.value,onRun:E},null,8,["modelValue","samples","parseError"]),ys(gc,{id:"logs"},{header:Ia(()=>L[1]||(L[1]=[Tu("Output")])),default:Ia(()=>[(us(!0),qs(Mn,null,Th(P.value,W=>(us(),qs("div",{class:jn(["log",[{print:W.print},W.type]]),key:W.id},[Xi("span",S_,_o(W.type),1),Tu(" "+_o(W.text),1)],2))),128))]),_:1})]),Xi("div",T_,[ys(gc,{id:"ast"},{header:Ia(()=>L[2]||(L[2]=[Tu("AST")])),default:Ia(()=>[Xi("pre",null,_o(M.value),1)]),_:1}),ys(gc,{id:"bin"},{header:Ia(()=>L[3]||(L[3]=[Tu("Bytecode")])),default:Ia(()=>[L[4]||(L[4]=Xi("header",null,null,-1))]),_:1}),ys(gc,{id:"debugger"},{header:Ia(()=>L[5]||(L[5]=[Tu("Debugger")])),_:1})])]))}}),F_=Uc(N_,[["__scopeId","data-v-6365c473"]]),O_={id:"wrapper"},I_=jc({__name:"App",setup(t){const r=Vo(window.localStorage.getItem("version")??Xd),e=Object.fromEntries(Qd.map(p=>[p,p+(p==Xd?"(latest)":"")]));function n(p){r.value=p,window.localStorage.setItem("version",r.value)}return(p,d)=>(us(),qs("div",O_,[Xi("h1",null,[d[0]||(d[0]=Tu(" AiScript ( ")),ys(cw,{id:"version",options:Mc(e),onSelect:n},{default:Ia(()=>[Tu(_o(r.value),1)]),_:1},8,["options"]),d[1]||(d[1]=Tu(" ) Playground "))]),(us(!0),qs(Mn,null,Th(Mc(Qd),C=>(us(),qs("div",null,[C==r.value?(us(),Nc(F_,{key:0,ver:C},null,8,["ver"])):nc("",!0)]))),256))]))}}),R_=Uc(I_,[["__scopeId","data-v-caf8f745"]]);_$(R_).mount("#app");
