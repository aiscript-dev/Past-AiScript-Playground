var Td=Object.defineProperty;var jd=(t,r,e)=>r in t?Td(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var be=(t,r,e)=>(jd(t,typeof r!="symbol"?r+"":r,e),e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const $ of g.addedNodes)$.tagName==="LINK"&&$.rel==="modulepreload"&&n($)}).observe(document,{childList:!0,subtree:!0});function e(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function n(c){if(c.ep)return;c.ep=!0;const g=e(c);fetch(c.href,g)}})();function Rh(t,r){const e=Object.create(null),n=t.split(",");for(let c=0;c<n.length;c++)e[n[c]]=!0;return r?c=>!!e[c.toLowerCase()]:c=>!!e[c]}const pr={},Su=[],qn=()=>{},Rd=()=>!1,Dd=/^on[^a-z]/,ic=t=>Dd.test(t),Dh=t=>t.startsWith("onUpdate:"),Lr=Object.assign,Lh=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},Ld=Object.prototype.hasOwnProperty,_t=(t,r)=>Ld.call(t,r),Qe=Array.isArray,Fu=t=>oc(t)==="[object Map]",eg=t=>oc(t)==="[object Set]",ht=t=>typeof t=="function",jr=t=>typeof t=="string",lc=t=>typeof t=="symbol",hr=t=>t!==null&&typeof t=="object",tg=t=>(hr(t)||ht(t))&&ht(t.then)&&ht(t.catch),rg=Object.prototype.toString,oc=t=>rg.call(t),Bd=t=>oc(t).slice(8,-1),sg=t=>oc(t)==="[object Object]",Bh=t=>jr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ff=Rh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uc=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},Hd=/-(\w)/g,Vu=uc(t=>t.replace(Hd,(r,e)=>e?e.toUpperCase():"")),Ud=/\B([A-Z])/g,Gu=uc(t=>t.replace(Ud,"-$1").toLowerCase()),ng=uc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Cc=uc(t=>t?`on${ng(t)}`:""),uu=(t,r)=>!Object.is(t,r),kc=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},Xf=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},qd=t=>{const r=parseFloat(t);return isNaN(r)?t:r},zd=t=>{const r=jr(t)?Number(t):NaN;return isNaN(r)?t:r};let Ip;const Zc=()=>Ip||(Ip=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hh(t){if(Qe(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],c=jr(n)?Jd(n):Hh(n);if(c)for(const g in c)r[g]=c[g]}return r}else if(jr(t)||hr(t))return t}const Vd=/;(?![^(]*\))/g,Wd=/:([^]+)/,Kd=/\/\*[^]*?\*\//g;function Jd(t){const r={};return t.replace(Kd,"").split(Vd).forEach(e=>{if(e){const n=e.split(Wd);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function Tr(t){let r="";if(jr(t))r=t;else if(Qe(t))for(let e=0;e<t.length;e++){const n=Tr(t[e]);n&&(r+=n+" ")}else if(hr(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const Xd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Gd=Rh(Xd);function ag(t){return!!t||t===""}const Dr=t=>jr(t)?t:t==null?"":Qe(t)||hr(t)&&(t.toString===rg||!ht(t.toString))?JSON.stringify(t,ig,2):String(t),ig=(t,r)=>r&&r.__v_isRef?ig(t,r.value):Fu(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,c])=>(e[`${n} =>`]=c,e),{})}:eg(r)?{[`Set(${r.size})`]:[...r.values()]}:hr(r)&&!Qe(r)&&!sg(r)?String(r):r;let Bn;class Zd{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Bn,!r&&Bn&&(this.index=(Bn.scopes||(Bn.scopes=[])).push(this)-1)}get active(){return this._active}run(r){if(this._active){const e=Bn;try{return Bn=this,r()}finally{Bn=e}}}on(){Bn=this}off(){Bn=this.parent}stop(r){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0,this._active=!1}}}function Qd(t,r=Bn){r&&r.active&&r.effects.push(t)}function Yd(){return Bn}const Uh=t=>{const r=new Set(t);return r.w=0,r.n=0,r},lg=t=>(t.w&Pi)>0,og=t=>(t.n&Pi)>0,e0=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=Pi},t0=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const c=r[n];lg(c)&&!og(c)?c.delete(t):r[e++]=c,c.w&=~Pi,c.n&=~Pi}r.length=e}},Qc=new WeakMap;let ef=0,Pi=1;const Yc=30;let Hn;const eu=Symbol(""),eh=Symbol("");class qh{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,Qd(this,n)}run(){if(!this.active)return this.fn();let r=Hn,e=_i;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=Hn,Hn=this,_i=!0,Pi=1<<++ef,ef<=Yc?e0(this):Tp(this),this.fn()}finally{ef<=Yc&&t0(this),Pi=1<<--ef,Hn=this.parent,_i=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Hn===this?this.deferStop=!0:this.active&&(Tp(this),this.onStop&&this.onStop(),this.active=!1)}}function Tp(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let _i=!0;const ug=[];function Zu(){ug.push(_i),_i=!1}function Qu(){const t=ug.pop();_i=t===void 0?!0:t}function Ss(t,r,e){if(_i&&Hn){let n=Qc.get(t);n||Qc.set(t,n=new Map);let c=n.get(e);c||n.set(e,c=Uh()),fg(c)}}function fg(t,r){let e=!1;ef<=Yc?og(t)||(t.n|=Pi,e=!lg(t)):e=!t.has(Hn),e&&(t.add(Hn),Hn.deps.push(t))}function ti(t,r,e,n,c,g){const $=Qc.get(t);if(!$)return;let x=[];if(r==="clear")x=[...$.values()];else if(e==="length"&&Qe(t)){const m=Number(n);$.forEach((A,C)=>{(C==="length"||!lc(C)&&C>=m)&&x.push(A)})}else switch(e!==void 0&&x.push($.get(e)),r){case"add":Qe(t)?Bh(e)&&x.push($.get("length")):(x.push($.get(eu)),Fu(t)&&x.push($.get(eh)));break;case"delete":Qe(t)||(x.push($.get(eu)),Fu(t)&&x.push($.get(eh)));break;case"set":Fu(t)&&x.push($.get(eu));break}if(x.length===1)x[0]&&th(x[0]);else{const m=[];for(const A of x)A&&m.push(...A);th(Uh(m))}}function th(t,r){const e=Qe(t)?t:[...t];for(const n of e)n.computed&&jp(n);for(const n of e)n.computed||jp(n)}function jp(t,r){(t!==Hn||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const r0=Rh("__proto__,__v_isRef,__isVue"),cg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(lc)),Rp=s0();function s0(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=St(this);for(let g=0,$=this.length;g<$;g++)Ss(n,"get",g+"");const c=n[r](...e);return c===-1||c===!1?n[r](...e.map(St)):c}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){Zu();const n=St(this)[r].apply(this,e);return Qu(),n}}),t}function n0(t){const r=St(this);return Ss(r,"has",t),r.hasOwnProperty(t)}class hg{constructor(r=!1,e=!1){this._isReadonly=r,this._shallow=e}get(r,e,n){const c=this._isReadonly,g=this._shallow;if(e==="__v_isReactive")return!c;if(e==="__v_isReadonly")return c;if(e==="__v_isShallow")return g;if(e==="__v_raw"&&n===(c?g?y0:dg:g?gg:vg).get(r))return r;const $=Qe(r);if(!c){if($&&_t(Rp,e))return Reflect.get(Rp,e,n);if(e==="hasOwnProperty")return n0}const x=Reflect.get(r,e,n);return(lc(e)?cg.has(e):r0(e))||(c||Ss(r,"get",e),g)?x:us(x)?$&&Bh(e)?x:x.value:hr(x)?c?yg(x):Wh(x):x}}class pg extends hg{constructor(r=!1){super(!1,r)}set(r,e,n,c){let g=r[e];if(Wu(g)&&us(g)&&!us(n))return!1;if(!this._shallow&&(!Gf(n)&&!Wu(n)&&(g=St(g),n=St(n)),!Qe(r)&&us(g)&&!us(n)))return g.value=n,!0;const $=Qe(r)&&Bh(e)?Number(e)<r.length:_t(r,e),x=Reflect.set(r,e,n,c);return r===St(c)&&($?uu(n,g)&&ti(r,"set",e,n):ti(r,"add",e,n)),x}deleteProperty(r,e){const n=_t(r,e);r[e];const c=Reflect.deleteProperty(r,e);return c&&n&&ti(r,"delete",e,void 0),c}has(r,e){const n=Reflect.has(r,e);return(!lc(e)||!cg.has(e))&&Ss(r,"has",e),n}ownKeys(r){return Ss(r,"iterate",Qe(r)?"length":eu),Reflect.ownKeys(r)}}class a0 extends hg{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const i0=new pg,l0=new a0,o0=new pg(!0),zh=t=>t,fc=t=>Reflect.getPrototypeOf(t);function wf(t,r,e=!1,n=!1){t=t.__v_raw;const c=St(t),g=St(r);e||(uu(r,g)&&Ss(c,"get",r),Ss(c,"get",g));const{has:$}=fc(c),x=n?zh:e?Jh:of;if($.call(c,r))return x(t.get(r));if($.call(c,g))return x(t.get(g));t!==c&&t.get(r)}function mf(t,r=!1){const e=this.__v_raw,n=St(e),c=St(t);return r||(uu(t,c)&&Ss(n,"has",t),Ss(n,"has",c)),t===c?e.has(t):e.has(t)||e.has(c)}function xf(t,r=!1){return t=t.__v_raw,!r&&Ss(St(t),"iterate",eu),Reflect.get(t,"size",t)}function Dp(t){t=St(t);const r=St(this);return fc(r).has.call(r,t)||(r.add(t),ti(r,"add",t,t)),this}function Lp(t,r){r=St(r);const e=St(this),{has:n,get:c}=fc(e);let g=n.call(e,t);g||(t=St(t),g=n.call(e,t));const $=c.call(e,t);return e.set(t,r),g?uu(r,$)&&ti(e,"set",t,r):ti(e,"add",t,r),this}function Bp(t){const r=St(this),{has:e,get:n}=fc(r);let c=e.call(r,t);c||(t=St(t),c=e.call(r,t)),n&&n.call(r,t);const g=r.delete(t);return c&&ti(r,"delete",t,void 0),g}function Hp(){const t=St(this),r=t.size!==0,e=t.clear();return r&&ti(t,"clear",void 0,void 0),e}function $f(t,r){return function(n,c){const g=this,$=g.__v_raw,x=St($),m=r?zh:t?Jh:of;return!t&&Ss(x,"iterate",eu),$.forEach((A,C)=>n.call(c,m(A),m(C),g))}}function bf(t,r,e){return function(...n){const c=this.__v_raw,g=St(c),$=Fu(g),x=t==="entries"||t===Symbol.iterator&&$,m=t==="keys"&&$,A=c[t](...n),C=e?zh:r?Jh:of;return!r&&Ss(g,"iterate",m?eh:eu),{next(){const{value:P,done:S}=A.next();return S?{value:P,done:S}:{value:x?[C(P[0]),C(P[1])]:C(P),done:S}},[Symbol.iterator](){return this}}}}function ui(t){return function(...r){return t==="delete"?!1:this}}function u0(){const t={get(g){return wf(this,g)},get size(){return xf(this)},has:mf,add:Dp,set:Lp,delete:Bp,clear:Hp,forEach:$f(!1,!1)},r={get(g){return wf(this,g,!1,!0)},get size(){return xf(this)},has:mf,add:Dp,set:Lp,delete:Bp,clear:Hp,forEach:$f(!1,!0)},e={get(g){return wf(this,g,!0)},get size(){return xf(this,!0)},has(g){return mf.call(this,g,!0)},add:ui("add"),set:ui("set"),delete:ui("delete"),clear:ui("clear"),forEach:$f(!0,!1)},n={get(g){return wf(this,g,!0,!0)},get size(){return xf(this,!0)},has(g){return mf.call(this,g,!0)},add:ui("add"),set:ui("set"),delete:ui("delete"),clear:ui("clear"),forEach:$f(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{t[g]=bf(g,!1,!1),e[g]=bf(g,!0,!1),r[g]=bf(g,!1,!0),n[g]=bf(g,!0,!0)}),[t,e,r,n]}const[f0,c0,h0,p0]=u0();function Vh(t,r){const e=r?t?p0:h0:t?c0:f0;return(n,c,g)=>c==="__v_isReactive"?!t:c==="__v_isReadonly"?t:c==="__v_raw"?n:Reflect.get(_t(e,c)&&c in n?e:n,c,g)}const v0={get:Vh(!1,!1)},g0={get:Vh(!1,!0)},d0={get:Vh(!0,!1)},vg=new WeakMap,gg=new WeakMap,dg=new WeakMap,y0=new WeakMap;function w0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function m0(t){return t.__v_skip||!Object.isExtensible(t)?0:w0(Bd(t))}function Wh(t){return Wu(t)?t:Kh(t,!1,i0,v0,vg)}function x0(t){return Kh(t,!1,o0,g0,gg)}function yg(t){return Kh(t,!0,l0,d0,dg)}function Kh(t,r,e,n,c){if(!hr(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const g=c.get(t);if(g)return g;const $=m0(t);if($===0)return t;const x=new Proxy(t,$===2?n:e);return c.set(t,x),x}function Ou(t){return Wu(t)?Ou(t.__v_raw):!!(t&&t.__v_isReactive)}function Wu(t){return!!(t&&t.__v_isReadonly)}function Gf(t){return!!(t&&t.__v_isShallow)}function wg(t){return Ou(t)||Wu(t)}function St(t){const r=t&&t.__v_raw;return r?St(r):t}function mg(t){return Xf(t,"__v_skip",!0),t}const of=t=>hr(t)?Wh(t):t,Jh=t=>hr(t)?yg(t):t;function xg(t){_i&&Hn&&(t=St(t),fg(t.dep||(t.dep=Uh())))}function $g(t,r){t=St(t);const e=t.dep;e&&th(e)}function us(t){return!!(t&&t.__v_isRef===!0)}function wr(t){return $0(t,!1)}function $0(t,r){return us(t)?t:new b0(t,r)}class b0{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:St(r),this._value=e?r:of(r)}get value(){return xg(this),this._value}set value(r){const e=this.__v_isShallow||Gf(r)||Wu(r);r=e?r:St(r),uu(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:of(r),$g(this))}}function Mi(t){return us(t)?t.value:t}const A0={get:(t,r,e)=>Mi(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const c=t[r];return us(c)&&!us(e)?(c.value=e,!0):Reflect.set(t,r,e,n)}};function bg(t){return Ou(t)?t:new Proxy(t,A0)}class _0{constructor(r,e,n,c){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new qh(r,()=>{this._dirty||(this._dirty=!0,$g(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!c,this.__v_isReadonly=n}get value(){const r=St(this);return xg(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}function C0(t,r,e=!1){let n,c;const g=ht(t);return g?(n=t,c=qn):(n=t.get,c=t.set),new _0(n,c,g||!c,e)}function Ci(t,r,e,n){let c;try{c=n?t(...n):t()}catch(g){cc(g,r,e)}return c}function wn(t,r,e,n){if(ht(t)){const g=Ci(t,r,e,n);return g&&tg(g)&&g.catch($=>{cc($,r,e)}),g}const c=[];for(let g=0;g<t.length;g++)c.push(wn(t[g],r,e,n));return c}function cc(t,r,e,n=!0){const c=r?r.vnode:null;if(r){let g=r.parent;const $=r.proxy,x=e;for(;g;){const A=g.ec;if(A){for(let C=0;C<A.length;C++)if(A[C](t,$,x)===!1)return}g=g.parent}const m=r.appContext.config.errorHandler;if(m){Ci(m,null,10,[t,$,x]);return}}k0(t,e,c,n)}function k0(t,r,e,n=!0){console.error(t)}let uf=!1,rh=!1;const os=[];let Jn=0;const Nu=[];let Ga=null,Wo=0;const Ag=Promise.resolve();let Xh=null;function P0(t){const r=Xh||Ag;return t?r.then(this?t.bind(this):t):r}function E0(t){let r=Jn+1,e=os.length;for(;r<e;){const n=r+e>>>1,c=os[n],g=ff(c);g<t||g===t&&c.pre?r=n+1:e=n}return r}function Gh(t){(!os.length||!os.includes(t,uf&&t.allowRecurse?Jn+1:Jn))&&(t.id==null?os.push(t):os.splice(E0(t.id),0,t),_g())}function _g(){!uf&&!rh&&(rh=!0,Xh=Ag.then(kg))}function M0(t){const r=os.indexOf(t);r>Jn&&os.splice(r,1)}function S0(t){Qe(t)?Nu.push(...t):(!Ga||!Ga.includes(t,t.allowRecurse?Wo+1:Wo))&&Nu.push(t),_g()}function Up(t,r=uf?Jn+1:0){for(;r<os.length;r++){const e=os[r];e&&e.pre&&(os.splice(r,1),r--,e())}}function Cg(t){if(Nu.length){const r=[...new Set(Nu)];if(Nu.length=0,Ga){Ga.push(...r);return}for(Ga=r,Ga.sort((e,n)=>ff(e)-ff(n)),Wo=0;Wo<Ga.length;Wo++)Ga[Wo]();Ga=null,Wo=0}}const ff=t=>t.id==null?1/0:t.id,F0=(t,r)=>{const e=ff(t)-ff(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function kg(t){rh=!1,uf=!0,os.sort(F0);const r=qn;try{for(Jn=0;Jn<os.length;Jn++){const e=os[Jn];e&&e.active!==!1&&Ci(e,null,14)}}finally{Jn=0,os.length=0,Cg(),uf=!1,Xh=null,(os.length||Nu.length)&&kg()}}function O0(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||pr;let c=e;const g=r.startsWith("update:"),$=g&&r.slice(7);if($&&$ in n){const C=`${$==="modelValue"?"model":$}Modifiers`,{number:P,trim:S}=n[C]||pr;S&&(c=e.map(I=>jr(I)?I.trim():I)),P&&(c=e.map(qd))}let x,m=n[x=Cc(r)]||n[x=Cc(Vu(r))];!m&&g&&(m=n[x=Cc(Gu(r))]),m&&wn(m,t,6,c);const A=n[x+"Once"];if(A){if(!t.emitted)t.emitted={};else if(t.emitted[x])return;t.emitted[x]=!0,wn(A,t,6,c)}}function Pg(t,r,e=!1){const n=r.emitsCache,c=n.get(t);if(c!==void 0)return c;const g=t.emits;let $={},x=!1;if(!ht(t)){const m=A=>{const C=Pg(A,r,!0);C&&(x=!0,Lr($,C))};!e&&r.mixins.length&&r.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}return!g&&!x?(hr(t)&&n.set(t,null),null):(Qe(g)?g.forEach(m=>$[m]=null):Lr($,g),hr(t)&&n.set(t,$),$)}function hc(t,r){return!t||!ic(r)?!1:(r=r.slice(2).replace(/Once$/,""),_t(t,r[0].toLowerCase()+r.slice(1))||_t(t,Gu(r))||_t(t,r))}let ks=null,pc=null;function Zf(t){const r=ks;return ks=t,pc=t&&t.type.__scopeId||null,r}function vf(t){pc=t}function gf(){pc=null}function ot(t,r=ks,e){if(!r||t._n)return t;const n=(...c)=>{n._d&&Yp(-1);const g=Zf(r);let $;try{$=t(...c)}finally{Zf(g),n._d&&Yp(1)}return $};return n._n=!0,n._c=!0,n._d=!0,n}function Pc(t){const{type:r,vnode:e,proxy:n,withProxy:c,props:g,propsOptions:[$],slots:x,attrs:m,emit:A,render:C,renderCache:P,data:S,setupState:I,ctx:G,inheritAttrs:ee}=t;let re,ge;const q=Zf(t);try{if(e.shapeFlag&4){const L=c||n;re=Kn(C.call(L,L,P,g,I,S,G)),ge=m}else{const L=r;re=Kn(L.length>1?L(g,{attrs:m,slots:x,emit:A}):L(g,null)),ge=r.props?m:N0(m)}}catch(L){nf.length=0,cc(L,t,1),re=nt(mn)}let U=re;if(ge&&ee!==!1){const L=Object.keys(ge),{shapeFlag:H}=U;L.length&&H&7&&($&&L.some(Dh)&&(ge=I0(ge,$)),U=Ei(U,ge))}return e.dirs&&(U=Ei(U),U.dirs=U.dirs?U.dirs.concat(e.dirs):e.dirs),e.transition&&(U.transition=e.transition),re=U,Zf(q),re}const N0=t=>{let r;for(const e in t)(e==="class"||e==="style"||ic(e))&&((r||(r={}))[e]=t[e]);return r},I0=(t,r)=>{const e={};for(const n in t)(!Dh(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function T0(t,r,e){const{props:n,children:c,component:g}=t,{props:$,children:x,patchFlag:m}=r,A=g.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&m>=0){if(m&1024)return!0;if(m&16)return n?qp(n,$,A):!!$;if(m&8){const C=r.dynamicProps;for(let P=0;P<C.length;P++){const S=C[P];if($[S]!==n[S]&&!hc(A,S))return!0}}}else return(c||x)&&(!x||!x.$stable)?!0:n===$?!1:n?$?qp(n,$,A):!0:!!$;return!1}function qp(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let c=0;c<n.length;c++){const g=n[c];if(r[g]!==t[g]&&!hc(e,g))return!0}return!1}function j0({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const R0=t=>t.__isSuspense;function D0(t,r){r&&r.pendingBranch?Qe(t)?r.effects.push(...t):r.effects.push(t):S0(t)}const Af={};function ri(t,r,e){return Eg(t,r,e)}function Eg(t,r,{immediate:e,deep:n,flush:c,onTrack:g,onTrigger:$}=pr){var x;const m=Yd()===((x=es)==null?void 0:x.scope)?es:null;let A,C=!1,P=!1;if(us(t)?(A=()=>t.value,C=Gf(t)):Ou(t)?(A=()=>t,n=!0):Qe(t)?(P=!0,C=t.some(L=>Ou(L)||Gf(L)),A=()=>t.map(L=>{if(us(L))return L.value;if(Ou(L))return Mu(L);if(ht(L))return Ci(L,m,2)})):ht(t)?r?A=()=>Ci(t,m,2):A=()=>{if(!(m&&m.isUnmounted))return S&&S(),wn(t,m,3,[I])}:A=qn,r&&n){const L=A;A=()=>Mu(L())}let S,I=L=>{S=q.onStop=()=>{Ci(L,m,4)}},G;if(hf)if(I=qn,r?e&&wn(r,m,3,[A(),P?[]:void 0,I]):A(),c==="sync"){const L=Iy();G=L.__watcherHandles||(L.__watcherHandles=[])}else return qn;let ee=P?new Array(t.length).fill(Af):Af;const re=()=>{if(q.active)if(r){const L=q.run();(n||C||(P?L.some((H,W)=>uu(H,ee[W])):uu(L,ee)))&&(S&&S(),wn(r,m,3,[L,ee===Af?void 0:P&&ee[0]===Af?[]:ee,I]),ee=L)}else q.run()};re.allowRecurse=!!r;let ge;c==="sync"?ge=re:c==="post"?ge=()=>Ms(re,m&&m.suspense):(re.pre=!0,m&&(re.id=m.uid),ge=()=>Gh(re));const q=new qh(A,ge);r?e?re():ee=q.run():c==="post"?Ms(q.run.bind(q),m&&m.suspense):q.run();const U=()=>{q.stop(),m&&m.scope&&Lh(m.scope.effects,q)};return G&&G.push(U),U}function L0(t,r,e){const n=this.proxy,c=jr(t)?t.includes(".")?Mg(n,t):()=>n[t]:t.bind(n,n);let g;ht(r)?g=r:(g=r.handler,e=r);const $=es;Ku(this);const x=Eg(c,g.bind(n),e);return $?Ku($):tu(),x}function Mg(t,r){const e=r.split(".");return()=>{let n=t;for(let c=0;c<e.length&&n;c++)n=n[e[c]];return n}}function Mu(t,r){if(!hr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),us(t))Mu(t.value,r);else if(Qe(t))for(let e=0;e<t.length;e++)Mu(t[e],r);else if(eg(t)||Fu(t))t.forEach(e=>{Mu(e,r)});else if(sg(t))for(const e in t)Mu(t[e],r);return t}function Uo(t,r,e,n){const c=t.dirs,g=r&&r.dirs;for(let $=0;$<c.length;$++){const x=c[$];g&&(x.oldValue=g[$].value);let m=x.dir[n];m&&(Zu(),wn(m,e,8,[t.el,x,t,r]),Qu())}}const di=Symbol("_leaveCb"),_f=Symbol("_enterCb");function B0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ig(()=>{t.isMounted=!0}),Tg(()=>{t.isUnmounting=!0}),t}const hn=[Function,Array],Sg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},H0={name:"BaseTransition",props:Sg,setup(t,{slots:r}){const e=ky(),n=B0();let c;return()=>{const g=r.default&&Og(r.default(),!0);if(!g||!g.length)return;let $=g[0];if(g.length>1){for(const ee of g)if(ee.type!==mn){$=ee;break}}const x=St(t),{mode:m}=x;if(n.isLeaving)return Ec($);const A=zp($);if(!A)return Ec($);const C=sh(A,x,n,e);nh(A,C);const P=e.subTree,S=P&&zp(P);let I=!1;const{getTransitionKey:G}=A.type;if(G){const ee=G();c===void 0?c=ee:ee!==c&&(c=ee,I=!0)}if(S&&S.type!==mn&&(!Ko(A,S)||I)){const ee=sh(S,x,n,e);if(nh(S,ee),m==="out-in")return n.isLeaving=!0,ee.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},Ec($);m==="in-out"&&A.type!==mn&&(ee.delayLeave=(re,ge,q)=>{const U=Fg(n,S);U[String(S.key)]=S,re[di]=()=>{ge(),re[di]=void 0,delete C.delayedLeave},C.delayedLeave=q})}return $}}},U0=H0;function Fg(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function sh(t,r,e,n){const{appear:c,mode:g,persisted:$=!1,onBeforeEnter:x,onEnter:m,onAfterEnter:A,onEnterCancelled:C,onBeforeLeave:P,onLeave:S,onAfterLeave:I,onLeaveCancelled:G,onBeforeAppear:ee,onAppear:re,onAfterAppear:ge,onAppearCancelled:q}=r,U=String(t.key),L=Fg(e,t),H=(J,Y)=>{J&&wn(J,n,9,Y)},W=(J,Y)=>{const ue=Y[1];H(J,Y),Qe(J)?J.every(de=>de.length<=1)&&ue():J.length<=1&&ue()},V={mode:g,persisted:$,beforeEnter(J){let Y=x;if(!e.isMounted)if(c)Y=ee||x;else return;J[di]&&J[di](!0);const ue=L[U];ue&&Ko(t,ue)&&ue.el[di]&&ue.el[di](),H(Y,[J])},enter(J){let Y=m,ue=A,de=C;if(!e.isMounted)if(c)Y=re||m,ue=ge||A,de=q||C;else return;let le=!1;const Ie=J[_f]=ze=>{le||(le=!0,ze?H(de,[J]):H(ue,[J]),V.delayedLeave&&V.delayedLeave(),J[_f]=void 0)};Y?W(Y,[J,Ie]):Ie()},leave(J,Y){const ue=String(t.key);if(J[_f]&&J[_f](!0),e.isUnmounting)return Y();H(P,[J]);let de=!1;const le=J[di]=Ie=>{de||(de=!0,Y(),Ie?H(G,[J]):H(I,[J]),J[di]=void 0,L[ue]===t&&delete L[ue])};L[ue]=t,S?W(S,[J,le]):le()},clone(J){return sh(J,r,e,n)}};return V}function Ec(t){if(vc(t))return t=Ei(t),t.children=null,t}function zp(t){return vc(t)?t.children?t.children[0]:void 0:t}function nh(t,r){t.shapeFlag&6&&t.component?nh(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function Og(t,r=!1,e){let n=[],c=0;for(let g=0;g<t.length;g++){let $=t[g];const x=e==null?$.key:String(e)+String($.key!=null?$.key:g);$.type===Ir?($.patchFlag&128&&c++,n=n.concat(Og($.children,r,x))):(r||$.type!==mn)&&n.push(x!=null?Ei($,{key:x}):$)}if(c>1)for(let g=0;g<n.length;g++)n[g].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function si(t,r){return ht(t)?(()=>Lr({name:t.name},r,{setup:t}))():t}const rf=t=>!!t.type.__asyncLoader,vc=t=>t.type.__isKeepAlive;function q0(t,r){Ng(t,"a",r)}function z0(t,r){Ng(t,"da",r)}function Ng(t,r,e=es){const n=t.__wdc||(t.__wdc=()=>{let c=e;for(;c;){if(c.isDeactivated)return;c=c.parent}return t()});if(gc(r,n,e),e){let c=e.parent;for(;c&&c.parent;)vc(c.parent.vnode)&&V0(n,r,e,c),c=c.parent}}function V0(t,r,e,n){const c=gc(r,t,n,!0);jg(()=>{Lh(n[r],c)},e)}function gc(t,r,e=es,n=!1){if(e){const c=e[t]||(e[t]=[]),g=r.__weh||(r.__weh=(...$)=>{if(e.isUnmounted)return;Zu(),Ku(e);const x=wn(r,e,t,$);return tu(),Qu(),x});return n?c.unshift(g):c.push(g),g}}const ni=t=>(r,e=es)=>(!hf||t==="sp")&&gc(t,(...n)=>r(...n),e),W0=ni("bm"),Ig=ni("m"),K0=ni("bu"),J0=ni("u"),Tg=ni("bum"),jg=ni("um"),X0=ni("sp"),G0=ni("rtg"),Z0=ni("rtc");function Q0(t,r=es){gc("ec",t,r)}const Y0=Symbol.for("v-ndc");function fu(t,r,e,n){let c;const g=e&&e[n];if(Qe(t)||jr(t)){c=new Array(t.length);for(let $=0,x=t.length;$<x;$++)c[$]=r(t[$],$,void 0,g&&g[$])}else if(typeof t=="number"){c=new Array(t);for(let $=0;$<t;$++)c[$]=r($+1,$,void 0,g&&g[$])}else if(hr(t))if(t[Symbol.iterator])c=Array.from(t,($,x)=>r($,x,void 0,g&&g[x]));else{const $=Object.keys(t);c=new Array($.length);for(let x=0,m=$.length;x<m;x++){const A=$[x];c[x]=r(t[A],A,x,g&&g[x])}}else c=[];return e&&(e[n]=c),c}function Of(t,r,e={},n,c){if(ks.isCE||ks.parent&&rf(ks.parent)&&ks.parent.isCE)return r!=="default"&&(e.name=r),nt("slot",e,n&&n());let g=t[r];g&&g._c&&(g._d=!1),wt();const $=g&&Rg(g(e)),x=wi(Ir,{key:e.key||$&&$.key||`_${r}`},$||(n?n():[]),$&&t._===1?64:-2);return!c&&x.scopeId&&(x.slotScopeIds=[x.scopeId+"-s"]),g&&g._c&&(g._d=!0),x}function Rg(t){return t.some(r=>ec(r)?!(r.type===mn||r.type===Ir&&!Rg(r.children)):!0)?t:null}const ah=t=>t?Jg(t)?tp(t)||t.proxy:ah(t.parent):null,sf=Lr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ah(t.parent),$root:t=>ah(t.root),$emit:t=>t.emit,$options:t=>Zh(t),$forceUpdate:t=>t.f||(t.f=()=>Gh(t.update)),$nextTick:t=>t.n||(t.n=P0.bind(t.proxy)),$watch:t=>L0.bind(t)}),Mc=(t,r)=>t!==pr&&!t.__isScriptSetup&&_t(t,r),ey={get({_:t},r){const{ctx:e,setupState:n,data:c,props:g,accessCache:$,type:x,appContext:m}=t;let A;if(r[0]!=="$"){const I=$[r];if(I!==void 0)switch(I){case 1:return n[r];case 2:return c[r];case 4:return e[r];case 3:return g[r]}else{if(Mc(n,r))return $[r]=1,n[r];if(c!==pr&&_t(c,r))return $[r]=2,c[r];if((A=t.propsOptions[0])&&_t(A,r))return $[r]=3,g[r];if(e!==pr&&_t(e,r))return $[r]=4,e[r];ih&&($[r]=0)}}const C=sf[r];let P,S;if(C)return r==="$attrs"&&Ss(t,"get",r),C(t);if((P=x.__cssModules)&&(P=P[r]))return P;if(e!==pr&&_t(e,r))return $[r]=4,e[r];if(S=m.config.globalProperties,_t(S,r))return S[r]},set({_:t},r,e){const{data:n,setupState:c,ctx:g}=t;return Mc(c,r)?(c[r]=e,!0):n!==pr&&_t(n,r)?(n[r]=e,!0):_t(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(g[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:c,propsOptions:g}},$){let x;return!!e[$]||t!==pr&&_t(t,$)||Mc(r,$)||(x=g[0])&&_t(x,$)||_t(n,$)||_t(sf,$)||_t(c.config.globalProperties,$)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:_t(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function Vp(t){return Qe(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let ih=!0;function ty(t){const r=Zh(t),e=t.proxy,n=t.ctx;ih=!1,r.beforeCreate&&Wp(r.beforeCreate,t,"bc");const{data:c,computed:g,methods:$,watch:x,provide:m,inject:A,created:C,beforeMount:P,mounted:S,beforeUpdate:I,updated:G,activated:ee,deactivated:re,beforeDestroy:ge,beforeUnmount:q,destroyed:U,unmounted:L,render:H,renderTracked:W,renderTriggered:V,errorCaptured:J,serverPrefetch:Y,expose:ue,inheritAttrs:de,components:le,directives:Ie,filters:ze}=r;if(A&&ry(A,n,null),$)for(const ft in $){const je=$[ft];ht(je)&&(n[ft]=je.bind(e))}if(c){const ft=c.call(e,e);hr(ft)&&(t.data=Wh(ft))}if(ih=!0,g)for(const ft in g){const je=g[ft],ut=ht(je)?je.bind(e,e):ht(je.get)?je.get.bind(e,e):qn,jt=!ht(je)&&ht(je.set)?je.set.bind(e):qn,Rt=Oy({get:ut,set:jt});Object.defineProperty(n,ft,{enumerable:!0,configurable:!0,get:()=>Rt.value,set:Ye=>Rt.value=Ye})}if(x)for(const ft in x)Dg(x[ft],n,e,ft);if(m){const ft=ht(m)?m.call(e):m;Reflect.ownKeys(ft).forEach(je=>{oy(je,ft[je])})}C&&Wp(C,t,"c");function Ke(ft,je){Qe(je)?je.forEach(ut=>ft(ut.bind(e))):je&&ft(je.bind(e))}if(Ke(W0,P),Ke(Ig,S),Ke(K0,I),Ke(J0,G),Ke(q0,ee),Ke(z0,re),Ke(Q0,J),Ke(Z0,W),Ke(G0,V),Ke(Tg,q),Ke(jg,L),Ke(X0,Y),Qe(ue))if(ue.length){const ft=t.exposed||(t.exposed={});ue.forEach(je=>{Object.defineProperty(ft,je,{get:()=>e[je],set:ut=>e[je]=ut})})}else t.exposed||(t.exposed={});H&&t.render===qn&&(t.render=H),de!=null&&(t.inheritAttrs=de),le&&(t.components=le),Ie&&(t.directives=Ie)}function ry(t,r,e=qn){Qe(t)&&(t=lh(t));for(const n in t){const c=t[n];let g;hr(c)?"default"in c?g=Nf(c.from||n,c.default,!0):g=Nf(c.from||n):g=Nf(c),us(g)?Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:()=>g.value,set:$=>g.value=$}):r[n]=g}}function Wp(t,r,e){wn(Qe(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function Dg(t,r,e,n){const c=n.includes(".")?Mg(e,n):()=>e[n];if(jr(t)){const g=r[t];ht(g)&&ri(c,g)}else if(ht(t))ri(c,t.bind(e));else if(hr(t))if(Qe(t))t.forEach(g=>Dg(g,r,e,n));else{const g=ht(t.handler)?t.handler.bind(e):r[t.handler];ht(g)&&ri(c,g,t)}}function Zh(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:c,optionsCache:g,config:{optionMergeStrategies:$}}=t.appContext,x=g.get(r);let m;return x?m=x:!c.length&&!e&&!n?m=r:(m={},c.length&&c.forEach(A=>Qf(m,A,$,!0)),Qf(m,r,$)),hr(r)&&g.set(r,m),m}function Qf(t,r,e,n=!1){const{mixins:c,extends:g}=r;g&&Qf(t,g,e,!0),c&&c.forEach($=>Qf(t,$,e,!0));for(const $ in r)if(!(n&&$==="expose")){const x=sy[$]||e&&e[$];t[$]=x?x(t[$],r[$]):r[$]}return t}const sy={data:Kp,props:Jp,emits:Jp,methods:tf,computed:tf,beforeCreate:xs,created:xs,beforeMount:xs,mounted:xs,beforeUpdate:xs,updated:xs,beforeDestroy:xs,beforeUnmount:xs,destroyed:xs,unmounted:xs,activated:xs,deactivated:xs,errorCaptured:xs,serverPrefetch:xs,components:tf,directives:tf,watch:ay,provide:Kp,inject:ny};function Kp(t,r){return r?t?function(){return Lr(ht(t)?t.call(this,this):t,ht(r)?r.call(this,this):r)}:r:t}function ny(t,r){return tf(lh(t),lh(r))}function lh(t){if(Qe(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function xs(t,r){return t?[...new Set([].concat(t,r))]:r}function tf(t,r){return t?Lr(Object.create(null),t,r):r}function Jp(t,r){return t?Qe(t)&&Qe(r)?[...new Set([...t,...r])]:Lr(Object.create(null),Vp(t),Vp(r??{})):r}function ay(t,r){if(!t)return r;if(!r)return t;const e=Lr(Object.create(null),t);for(const n in r)e[n]=xs(t[n],r[n]);return e}function Lg(){return{app:null,config:{isNativeTag:Rd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iy=0;function ly(t,r){return function(n,c=null){ht(n)||(n=Lr({},n)),c!=null&&!hr(c)&&(c=null);const g=Lg(),$=new WeakSet;let x=!1;const m=g.app={_uid:iy++,_component:n,_props:c,_container:null,_context:g,_instance:null,version:Ty,get config(){return g.config},set config(A){},use(A,...C){return $.has(A)||(A&&ht(A.install)?($.add(A),A.install(m,...C)):ht(A)&&($.add(A),A(m,...C))),m},mixin(A){return g.mixins.includes(A)||g.mixins.push(A),m},component(A,C){return C?(g.components[A]=C,m):g.components[A]},directive(A,C){return C?(g.directives[A]=C,m):g.directives[A]},mount(A,C,P){if(!x){const S=nt(n,c);return S.appContext=g,C&&r?r(S,A):t(S,A,P),x=!0,m._container=A,A.__vue_app__=m,tp(S.component)||S.component.proxy}},unmount(){x&&(t(null,m._container),delete m._container.__vue_app__)},provide(A,C){return g.provides[A]=C,m},runWithContext(A){Yf=m;try{return A()}finally{Yf=null}}};return m}}let Yf=null;function oy(t,r){if(es){let e=es.provides;const n=es.parent&&es.parent.provides;n===e&&(e=es.provides=Object.create(n)),e[t]=r}}function Nf(t,r,e=!1){const n=es||ks;if(n||Yf){const c=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Yf._context.provides;if(c&&t in c)return c[t];if(arguments.length>1)return e&&ht(r)?r.call(n&&n.proxy):r}}function uy(t,r,e,n=!1){const c={},g={};Xf(g,yc,1),t.propsDefaults=Object.create(null),Bg(t,r,c,g);for(const $ in t.propsOptions[0])$ in c||(c[$]=void 0);e?t.props=n?c:x0(c):t.type.props?t.props=c:t.props=g,t.attrs=g}function fy(t,r,e,n){const{props:c,attrs:g,vnode:{patchFlag:$}}=t,x=St(c),[m]=t.propsOptions;let A=!1;if((n||$>0)&&!($&16)){if($&8){const C=t.vnode.dynamicProps;for(let P=0;P<C.length;P++){let S=C[P];if(hc(t.emitsOptions,S))continue;const I=r[S];if(m)if(_t(g,S))I!==g[S]&&(g[S]=I,A=!0);else{const G=Vu(S);c[G]=oh(m,x,G,I,t,!1)}else I!==g[S]&&(g[S]=I,A=!0)}}}else{Bg(t,r,c,g)&&(A=!0);let C;for(const P in x)(!r||!_t(r,P)&&((C=Gu(P))===P||!_t(r,C)))&&(m?e&&(e[P]!==void 0||e[C]!==void 0)&&(c[P]=oh(m,x,P,void 0,t,!0)):delete c[P]);if(g!==x)for(const P in g)(!r||!_t(r,P))&&(delete g[P],A=!0)}A&&ti(t,"set","$attrs")}function Bg(t,r,e,n){const[c,g]=t.propsOptions;let $=!1,x;if(r)for(let m in r){if(Ff(m))continue;const A=r[m];let C;c&&_t(c,C=Vu(m))?!g||!g.includes(C)?e[C]=A:(x||(x={}))[C]=A:hc(t.emitsOptions,m)||(!(m in n)||A!==n[m])&&(n[m]=A,$=!0)}if(g){const m=St(e),A=x||pr;for(let C=0;C<g.length;C++){const P=g[C];e[P]=oh(c,m,P,A[P],t,!_t(A,P))}}return $}function oh(t,r,e,n,c,g){const $=t[e];if($!=null){const x=_t($,"default");if(x&&n===void 0){const m=$.default;if($.type!==Function&&!$.skipFactory&&ht(m)){const{propsDefaults:A}=c;e in A?n=A[e]:(Ku(c),n=A[e]=m.call(null,r),tu())}else n=m}$[0]&&(g&&!x?n=!1:$[1]&&(n===""||n===Gu(e))&&(n=!0))}return n}function Hg(t,r,e=!1){const n=r.propsCache,c=n.get(t);if(c)return c;const g=t.props,$={},x=[];let m=!1;if(!ht(t)){const C=P=>{m=!0;const[S,I]=Hg(P,r,!0);Lr($,S),I&&x.push(...I)};!e&&r.mixins.length&&r.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}if(!g&&!m)return hr(t)&&n.set(t,Su),Su;if(Qe(g))for(let C=0;C<g.length;C++){const P=Vu(g[C]);Xp(P)&&($[P]=pr)}else if(g)for(const C in g){const P=Vu(C);if(Xp(P)){const S=g[C],I=$[P]=Qe(S)||ht(S)?{type:S}:Lr({},S);if(I){const G=Qp(Boolean,I.type),ee=Qp(String,I.type);I[0]=G>-1,I[1]=ee<0||G<ee,(G>-1||_t(I,"default"))&&x.push(P)}}}const A=[$,x];return hr(t)&&n.set(t,A),A}function Xp(t){return t[0]!=="$"}function Gp(t){const r=t&&t.toString().match(/^\s*(function|class) (\w+)/);return r?r[2]:t===null?"null":""}function Zp(t,r){return Gp(t)===Gp(r)}function Qp(t,r){return Qe(r)?r.findIndex(e=>Zp(e,t)):ht(r)&&Zp(r,t)?0:-1}const Ug=t=>t[0]==="_"||t==="$stable",Qh=t=>Qe(t)?t.map(Kn):[Kn(t)],cy=(t,r,e)=>{if(r._n)return r;const n=ot((...c)=>Qh(r(...c)),e);return n._c=!1,n},qg=(t,r,e)=>{const n=t._ctx;for(const c in t){if(Ug(c))continue;const g=t[c];if(ht(g))r[c]=cy(c,g,n);else if(g!=null){const $=Qh(g);r[c]=()=>$}}},zg=(t,r)=>{const e=Qh(r);t.slots.default=()=>e},hy=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=St(r),Xf(r,"_",e)):qg(r,t.slots={})}else t.slots={},r&&zg(t,r);Xf(t.slots,yc,1)},py=(t,r,e)=>{const{vnode:n,slots:c}=t;let g=!0,$=pr;if(n.shapeFlag&32){const x=r._;x?e&&x===1?g=!1:(Lr(c,r),!e&&x===1&&delete c._):(g=!r.$stable,qg(r,c)),$=r}else r&&(zg(t,r),$={default:1});if(g)for(const x in c)!Ug(x)&&$[x]==null&&delete c[x]};function uh(t,r,e,n,c=!1){if(Qe(t)){t.forEach((S,I)=>uh(S,r&&(Qe(r)?r[I]:r),e,n,c));return}if(rf(n)&&!c)return;const g=n.shapeFlag&4?tp(n.component)||n.component.proxy:n.el,$=c?null:g,{i:x,r:m}=t,A=r&&r.r,C=x.refs===pr?x.refs={}:x.refs,P=x.setupState;if(A!=null&&A!==m&&(jr(A)?(C[A]=null,_t(P,A)&&(P[A]=null)):us(A)&&(A.value=null)),ht(m))Ci(m,x,12,[$,C]);else{const S=jr(m),I=us(m);if(S||I){const G=()=>{if(t.f){const ee=S?_t(P,m)?P[m]:C[m]:m.value;c?Qe(ee)&&Lh(ee,g):Qe(ee)?ee.includes(g)||ee.push(g):S?(C[m]=[g],_t(P,m)&&(P[m]=C[m])):(m.value=[g],t.k&&(C[t.k]=m.value))}else S?(C[m]=$,_t(P,m)&&(P[m]=$)):I&&(m.value=$,t.k&&(C[t.k]=$))};$?(G.id=-1,Ms(G,e)):G()}}}const Ms=D0;function vy(t){return gy(t)}function gy(t,r){const e=Zc();e.__VUE__=!0;const{insert:n,remove:c,patchProp:g,createElement:$,createText:x,createComment:m,setText:A,setElementText:C,parentNode:P,nextSibling:S,setScopeId:I=qn,insertStaticContent:G}=t,ee=(z,Z,se,ve=null,ye=null,oe=null,Ne=!1,me=null,$e=!!Z.dynamicChildren)=>{if(z===Z)return;z&&!Ko(z,Z)&&(ve=br(z),Ye(z,ye,oe,!0),z=null),Z.patchFlag===-2&&($e=!1,Z.dynamicChildren=null);const{type:he,ref:Le,shapeFlag:Re}=Z;switch(he){case dc:re(z,Z,se,ve);break;case mn:ge(z,Z,se,ve);break;case Sc:z==null&&q(Z,se,ve,Ne);break;case Ir:le(z,Z,se,ve,ye,oe,Ne,me,$e);break;default:Re&1?H(z,Z,se,ve,ye,oe,Ne,me,$e):Re&6?Ie(z,Z,se,ve,ye,oe,Ne,me,$e):(Re&64||Re&128)&&he.process(z,Z,se,ve,ye,oe,Ne,me,$e,Or)}Le!=null&&ye&&uh(Le,z&&z.ref,oe,Z||z,!Z)},re=(z,Z,se,ve)=>{if(z==null)n(Z.el=x(Z.children),se,ve);else{const ye=Z.el=z.el;Z.children!==z.children&&A(ye,Z.children)}},ge=(z,Z,se,ve)=>{z==null?n(Z.el=m(Z.children||""),se,ve):Z.el=z.el},q=(z,Z,se,ve)=>{[z.el,z.anchor]=G(z.children,Z,se,ve,z.el,z.anchor)},U=({el:z,anchor:Z},se,ve)=>{let ye;for(;z&&z!==Z;)ye=S(z),n(z,se,ve),z=ye;n(Z,se,ve)},L=({el:z,anchor:Z})=>{let se;for(;z&&z!==Z;)se=S(z),c(z),z=se;c(Z)},H=(z,Z,se,ve,ye,oe,Ne,me,$e)=>{Ne=Ne||Z.type==="svg",z==null?W(Z,se,ve,ye,oe,Ne,me,$e):Y(z,Z,ye,oe,Ne,me,$e)},W=(z,Z,se,ve,ye,oe,Ne,me)=>{let $e,he;const{type:Le,props:Re,shapeFlag:He,transition:We,dirs:Ze}=z;if($e=z.el=$(z.type,oe,Re&&Re.is,Re),He&8?C($e,z.children):He&16&&J(z.children,$e,null,ve,ye,oe&&Le!=="foreignObject",Ne,me),Ze&&Uo(z,null,ve,"created"),V($e,z,z.scopeId,Ne,ve),Re){for(const it in Re)it!=="value"&&!Ff(it)&&g($e,it,null,Re[it],oe,z.children,ve,ye,Ft);"value"in Re&&g($e,"value",null,Re.value),(he=Re.onVnodeBeforeMount)&&zn(he,ve,z)}Ze&&Uo(z,null,ve,"beforeMount");const at=dy(ye,We);at&&We.beforeEnter($e),n($e,Z,se),((he=Re&&Re.onVnodeMounted)||at||Ze)&&Ms(()=>{he&&zn(he,ve,z),at&&We.enter($e),Ze&&Uo(z,null,ve,"mounted")},ye)},V=(z,Z,se,ve,ye)=>{if(se&&I(z,se),ve)for(let oe=0;oe<ve.length;oe++)I(z,ve[oe]);if(ye){let oe=ye.subTree;if(Z===oe){const Ne=ye.vnode;V(z,Ne,Ne.scopeId,Ne.slotScopeIds,ye.parent)}}},J=(z,Z,se,ve,ye,oe,Ne,me,$e=0)=>{for(let he=$e;he<z.length;he++){const Le=z[he]=me?yi(z[he]):Kn(z[he]);ee(null,Le,Z,se,ve,ye,oe,Ne,me)}},Y=(z,Z,se,ve,ye,oe,Ne)=>{const me=Z.el=z.el;let{patchFlag:$e,dynamicChildren:he,dirs:Le}=Z;$e|=z.patchFlag&16;const Re=z.props||pr,He=Z.props||pr;let We;se&&qo(se,!1),(We=He.onVnodeBeforeUpdate)&&zn(We,se,Z,z),Le&&Uo(Z,z,se,"beforeUpdate"),se&&qo(se,!0);const Ze=ye&&Z.type!=="foreignObject";if(he?ue(z.dynamicChildren,he,me,se,ve,Ze,oe):Ne||je(z,Z,me,null,se,ve,Ze,oe,!1),$e>0){if($e&16)de(me,Z,Re,He,se,ve,ye);else if($e&2&&Re.class!==He.class&&g(me,"class",null,He.class,ye),$e&4&&g(me,"style",Re.style,He.style,ye),$e&8){const at=Z.dynamicProps;for(let it=0;it<at.length;it++){const bt=at[it],Kt=Re[bt],Ct=He[bt];(Ct!==Kt||bt==="value")&&g(me,bt,Kt,Ct,ye,z.children,se,ve,Ft)}}$e&1&&z.children!==Z.children&&C(me,Z.children)}else!Ne&&he==null&&de(me,Z,Re,He,se,ve,ye);((We=He.onVnodeUpdated)||Le)&&Ms(()=>{We&&zn(We,se,Z,z),Le&&Uo(Z,z,se,"updated")},ve)},ue=(z,Z,se,ve,ye,oe,Ne)=>{for(let me=0;me<Z.length;me++){const $e=z[me],he=Z[me],Le=$e.el&&($e.type===Ir||!Ko($e,he)||$e.shapeFlag&70)?P($e.el):se;ee($e,he,Le,null,ve,ye,oe,Ne,!0)}},de=(z,Z,se,ve,ye,oe,Ne)=>{if(se!==ve){if(se!==pr)for(const me in se)!Ff(me)&&!(me in ve)&&g(z,me,se[me],null,Ne,Z.children,ye,oe,Ft);for(const me in ve){if(Ff(me))continue;const $e=ve[me],he=se[me];$e!==he&&me!=="value"&&g(z,me,he,$e,Ne,Z.children,ye,oe,Ft)}"value"in ve&&g(z,"value",se.value,ve.value)}},le=(z,Z,se,ve,ye,oe,Ne,me,$e)=>{const he=Z.el=z?z.el:x(""),Le=Z.anchor=z?z.anchor:x("");let{patchFlag:Re,dynamicChildren:He,slotScopeIds:We}=Z;We&&(me=me?me.concat(We):We),z==null?(n(he,se,ve),n(Le,se,ve),J(Z.children,se,Le,ye,oe,Ne,me,$e)):Re>0&&Re&64&&He&&z.dynamicChildren?(ue(z.dynamicChildren,He,se,ye,oe,Ne,me),(Z.key!=null||ye&&Z===ye.subTree)&&Vg(z,Z,!0)):je(z,Z,se,Le,ye,oe,Ne,me,$e)},Ie=(z,Z,se,ve,ye,oe,Ne,me,$e)=>{Z.slotScopeIds=me,z==null?Z.shapeFlag&512?ye.ctx.activate(Z,se,ve,Ne,$e):ze(Z,se,ve,ye,oe,Ne,$e):mt(z,Z,$e)},ze=(z,Z,se,ve,ye,oe,Ne)=>{const me=z.component=Cy(z,ve,ye);if(vc(z)&&(me.ctx.renderer=Or),Py(me),me.asyncDep){if(ye&&ye.registerDep(me,Ke),!z.el){const $e=me.subTree=nt(mn);ge(null,$e,Z,se)}return}Ke(me,z,Z,se,ye,oe,Ne)},mt=(z,Z,se)=>{const ve=Z.component=z.component;if(T0(z,Z,se))if(ve.asyncDep&&!ve.asyncResolved){ft(ve,Z,se);return}else ve.next=Z,M0(ve.update),ve.update();else Z.el=z.el,ve.vnode=Z},Ke=(z,Z,se,ve,ye,oe,Ne)=>{const me=()=>{if(z.isMounted){let{next:Le,bu:Re,u:He,parent:We,vnode:Ze}=z,at=Le,it;qo(z,!1),Le?(Le.el=Ze.el,ft(z,Le,Ne)):Le=Ze,Re&&kc(Re),(it=Le.props&&Le.props.onVnodeBeforeUpdate)&&zn(it,We,Le,Ze),qo(z,!0);const bt=Pc(z),Kt=z.subTree;z.subTree=bt,ee(Kt,bt,P(Kt.el),br(Kt),z,ye,oe),Le.el=bt.el,at===null&&j0(z,bt.el),He&&Ms(He,ye),(it=Le.props&&Le.props.onVnodeUpdated)&&Ms(()=>zn(it,We,Le,Ze),ye)}else{let Le;const{el:Re,props:He}=Z,{bm:We,m:Ze,parent:at}=z,it=rf(Z);if(qo(z,!1),We&&kc(We),!it&&(Le=He&&He.onVnodeBeforeMount)&&zn(Le,at,Z),qo(z,!0),Re&&Dt){const bt=()=>{z.subTree=Pc(z),Dt(Re,z.subTree,z,ye,null)};it?Z.type.__asyncLoader().then(()=>!z.isUnmounted&&bt()):bt()}else{const bt=z.subTree=Pc(z);ee(null,bt,se,ve,z,ye,oe),Z.el=bt.el}if(Ze&&Ms(Ze,ye),!it&&(Le=He&&He.onVnodeMounted)){const bt=Z;Ms(()=>zn(Le,at,bt),ye)}(Z.shapeFlag&256||at&&rf(at.vnode)&&at.vnode.shapeFlag&256)&&z.a&&Ms(z.a,ye),z.isMounted=!0,Z=se=ve=null}},$e=z.effect=new qh(me,()=>Gh(he),z.scope),he=z.update=()=>$e.run();he.id=z.uid,qo(z,!0),he()},ft=(z,Z,se)=>{Z.component=z;const ve=z.vnode.props;z.vnode=Z,z.next=null,fy(z,Z.props,ve,se),py(z,Z.children,se),Zu(),Up(),Qu()},je=(z,Z,se,ve,ye,oe,Ne,me,$e=!1)=>{const he=z&&z.children,Le=z?z.shapeFlag:0,Re=Z.children,{patchFlag:He,shapeFlag:We}=Z;if(He>0){if(He&128){jt(he,Re,se,ve,ye,oe,Ne,me,$e);return}else if(He&256){ut(he,Re,se,ve,ye,oe,Ne,me,$e);return}}We&8?(Le&16&&Ft(he,ye,oe),Re!==he&&C(se,Re)):Le&16?We&16?jt(he,Re,se,ve,ye,oe,Ne,me,$e):Ft(he,ye,oe,!0):(Le&8&&C(se,""),We&16&&J(Re,se,ve,ye,oe,Ne,me,$e))},ut=(z,Z,se,ve,ye,oe,Ne,me,$e)=>{z=z||Su,Z=Z||Su;const he=z.length,Le=Z.length,Re=Math.min(he,Le);let He;for(He=0;He<Re;He++){const We=Z[He]=$e?yi(Z[He]):Kn(Z[He]);ee(z[He],We,se,null,ye,oe,Ne,me,$e)}he>Le?Ft(z,ye,oe,!0,!1,Re):J(Z,se,ve,ye,oe,Ne,me,$e,Re)},jt=(z,Z,se,ve,ye,oe,Ne,me,$e)=>{let he=0;const Le=Z.length;let Re=z.length-1,He=Le-1;for(;he<=Re&&he<=He;){const We=z[he],Ze=Z[he]=$e?yi(Z[he]):Kn(Z[he]);if(Ko(We,Ze))ee(We,Ze,se,null,ye,oe,Ne,me,$e);else break;he++}for(;he<=Re&&he<=He;){const We=z[Re],Ze=Z[He]=$e?yi(Z[He]):Kn(Z[He]);if(Ko(We,Ze))ee(We,Ze,se,null,ye,oe,Ne,me,$e);else break;Re--,He--}if(he>Re){if(he<=He){const We=He+1,Ze=We<Le?Z[We].el:ve;for(;he<=He;)ee(null,Z[he]=$e?yi(Z[he]):Kn(Z[he]),se,Ze,ye,oe,Ne,me,$e),he++}}else if(he>He)for(;he<=Re;)Ye(z[he],ye,oe,!0),he++;else{const We=he,Ze=he,at=new Map;for(he=Ze;he<=He;he++){const Lt=Z[he]=$e?yi(Z[he]):Kn(Z[he]);Lt.key!=null&&at.set(Lt.key,he)}let it,bt=0;const Kt=He-Ze+1;let Ct=!1,sr=0;const Ns=new Array(Kt);for(he=0;he<Kt;he++)Ns[he]=0;for(he=We;he<=Re;he++){const Lt=z[he];if(bt>=Kt){Ye(Lt,ye,oe,!0);continue}let vt;if(Lt.key!=null)vt=at.get(Lt.key);else for(it=Ze;it<=He;it++)if(Ns[it-Ze]===0&&Ko(Lt,Z[it])){vt=it;break}vt===void 0?Ye(Lt,ye,oe,!0):(Ns[vt-Ze]=he+1,vt>=sr?sr=vt:Ct=!0,ee(Lt,Z[vt],se,null,ye,oe,Ne,me,$e),bt++)}const rs=Ct?yy(Ns):Su;for(it=rs.length-1,he=Kt-1;he>=0;he--){const Lt=Ze+he,vt=Z[Lt],qt=Lt+1<Le?Z[Lt+1].el:ve;Ns[he]===0?ee(null,vt,se,qt,ye,oe,Ne,me,$e):Ct&&(it<0||he!==rs[it]?Rt(vt,se,qt,2):it--)}}},Rt=(z,Z,se,ve,ye=null)=>{const{el:oe,type:Ne,transition:me,children:$e,shapeFlag:he}=z;if(he&6){Rt(z.component.subTree,Z,se,ve);return}if(he&128){z.suspense.move(Z,se,ve);return}if(he&64){Ne.move(z,Z,se,Or);return}if(Ne===Ir){n(oe,Z,se);for(let Re=0;Re<$e.length;Re++)Rt($e[Re],Z,se,ve);n(z.anchor,Z,se);return}if(Ne===Sc){U(z,Z,se);return}if(ve!==2&&he&1&&me)if(ve===0)me.beforeEnter(oe),n(oe,Z,se),Ms(()=>me.enter(oe),ye);else{const{leave:Re,delayLeave:He,afterLeave:We}=me,Ze=()=>n(oe,Z,se),at=()=>{Re(oe,()=>{Ze(),We&&We()})};He?He(oe,Ze,at):at()}else n(oe,Z,se)},Ye=(z,Z,se,ve=!1,ye=!1)=>{const{type:oe,props:Ne,ref:me,children:$e,dynamicChildren:he,shapeFlag:Le,patchFlag:Re,dirs:He}=z;if(me!=null&&uh(me,null,se,z,!0),Le&256){Z.ctx.deactivate(z);return}const We=Le&1&&He,Ze=!rf(z);let at;if(Ze&&(at=Ne&&Ne.onVnodeBeforeUnmount)&&zn(at,Z,z),Le&6)Ar(z.component,se,ve);else{if(Le&128){z.suspense.unmount(se,ve);return}We&&Uo(z,null,Z,"beforeUnmount"),Le&64?z.type.remove(z,Z,se,ye,Or,ve):he&&(oe!==Ir||Re>0&&Re&64)?Ft(he,Z,se,!1,!0):(oe===Ir&&Re&384||!ye&&Le&16)&&Ft($e,Z,se),ve&&Br(z)}(Ze&&(at=Ne&&Ne.onVnodeUnmounted)||We)&&Ms(()=>{at&&zn(at,Z,z),We&&Uo(z,null,Z,"unmounted")},se)},Br=z=>{const{type:Z,el:se,anchor:ve,transition:ye}=z;if(Z===Ir){Wt(se,ve);return}if(Z===Sc){L(z);return}const oe=()=>{c(se),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(z.shapeFlag&1&&ye&&!ye.persisted){const{leave:Ne,delayLeave:me}=ye,$e=()=>Ne(se,oe);me?me(z.el,oe,$e):$e()}else oe()},Wt=(z,Z)=>{let se;for(;z!==Z;)se=S(z),c(z),z=se;c(Z)},Ar=(z,Z,se)=>{const{bum:ve,scope:ye,update:oe,subTree:Ne,um:me}=z;ve&&kc(ve),ye.stop(),oe&&(oe.active=!1,Ye(Ne,z,Z,se)),me&&Ms(me,Z),Ms(()=>{z.isUnmounted=!0},Z),Z&&Z.pendingBranch&&!Z.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===Z.pendingId&&(Z.deps--,Z.deps===0&&Z.resolve())},Ft=(z,Z,se,ve=!1,ye=!1,oe=0)=>{for(let Ne=oe;Ne<z.length;Ne++)Ye(z[Ne],Z,se,ve,ye)},br=z=>z.shapeFlag&6?br(z.component.subTree):z.shapeFlag&128?z.suspense.next():S(z.anchor||z.el),Hr=(z,Z,se)=>{z==null?Z._vnode&&Ye(Z._vnode,null,null,!0):ee(Z._vnode||null,z,Z,null,null,null,se),Up(),Cg(),Z._vnode=z},Or={p:ee,um:Ye,m:Rt,r:Br,mt:ze,mc:J,pc:je,pbc:ue,n:br,o:t};let Rr,Dt;return r&&([Rr,Dt]=r(Or)),{render:Hr,hydrate:Rr,createApp:ly(Hr,Rr)}}function qo({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function dy(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function Vg(t,r,e=!1){const n=t.children,c=r.children;if(Qe(n)&&Qe(c))for(let g=0;g<n.length;g++){const $=n[g];let x=c[g];x.shapeFlag&1&&!x.dynamicChildren&&((x.patchFlag<=0||x.patchFlag===32)&&(x=c[g]=yi(c[g]),x.el=$.el),e||Vg($,x)),x.type===dc&&(x.el=$.el)}}function yy(t){const r=t.slice(),e=[0];let n,c,g,$,x;const m=t.length;for(n=0;n<m;n++){const A=t[n];if(A!==0){if(c=e[e.length-1],t[c]<A){r[n]=c,e.push(n);continue}for(g=0,$=e.length-1;g<$;)x=g+$>>1,t[e[x]]<A?g=x+1:$=x;A<t[e[g]]&&(g>0&&(r[n]=e[g-1]),e[g]=n)}}for(g=e.length,$=e[g-1];g-- >0;)e[g]=$,$=r[$];return e}const wy=t=>t.__isTeleport,Ir=Symbol.for("v-fgt"),dc=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),Sc=Symbol.for("v-stc"),nf=[];let Un=null;function wt(t=!1){nf.push(Un=t?null:[])}function my(){nf.pop(),Un=nf[nf.length-1]||null}let cf=1;function Yp(t){cf+=t}function Wg(t){return t.dynamicChildren=cf>0?Un||Su:null,my(),cf>0&&Un&&Un.push(t),t}function Ut(t,r,e,n,c,g){return Wg(Mt(t,r,e,n,c,g,!0))}function wi(t,r,e,n,c){return Wg(nt(t,r,e,n,c,!0))}function ec(t){return t?t.__v_isVNode===!0:!1}function Ko(t,r){return t.type===r.type&&t.key===r.key}const yc="__vInternal",Kg=({key:t})=>t??null,If=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?jr(t)||us(t)||ht(t)?{i:ks,r:t,k:r,f:!!e}:t:null);function Mt(t,r=null,e=null,n=0,c=null,g=t===Ir?0:1,$=!1,x=!1){const m={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&Kg(r),ref:r&&If(r),scopeId:pc,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:n,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:ks};return x?(Yh(m,e),g&128&&t.normalize(m)):e&&(m.shapeFlag|=jr(e)?8:16),cf>0&&!$&&Un&&(m.patchFlag>0||g&6)&&m.patchFlag!==32&&Un.push(m),m}const nt=xy;function xy(t,r=null,e=null,n=0,c=null,g=!1){if((!t||t===Y0)&&(t=mn),ec(t)){const x=Ei(t,r,!0);return e&&Yh(x,e),cf>0&&!g&&Un&&(x.shapeFlag&6?Un[Un.indexOf(t)]=x:Un.push(x)),x.patchFlag|=-2,x}if(Fy(t)&&(t=t.__vccOpts),r){r=$y(r);let{class:x,style:m}=r;x&&!jr(x)&&(r.class=Tr(x)),hr(m)&&(wg(m)&&!Qe(m)&&(m=Lr({},m)),r.style=Hh(m))}const $=jr(t)?1:R0(t)?128:wy(t)?64:hr(t)?4:ht(t)?2:0;return Mt(t,r,e,n,c,$,g,!0)}function $y(t){return t?wg(t)||yc in t?Lr({},t):t:null}function Ei(t,r,e=!1){const{props:n,ref:c,patchFlag:g,children:$}=t,x=r?by(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:x,key:x&&Kg(x),ref:r&&r.ref?e&&c?Qe(c)?c.concat(If(r)):[c,If(r)]:If(r):c,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:$,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Ir?g===-1?16:g|16:g,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ei(t.ssContent),ssFallback:t.ssFallback&&Ei(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function It(t=" ",r=0){return nt(dc,null,t,r)}function Xn(t="",r=!1){return r?(wt(),wi(mn,null,t)):nt(mn,null,t)}function Kn(t){return t==null||typeof t=="boolean"?nt(mn):Qe(t)?nt(Ir,null,t.slice()):typeof t=="object"?yi(t):nt(dc,null,String(t))}function yi(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ei(t)}function Yh(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(Qe(r))e=16;else if(typeof r=="object")if(n&65){const c=r.default;c&&(c._c&&(c._d=!1),Yh(t,c()),c._c&&(c._d=!0));return}else{e=32;const c=r._;!c&&!(yc in r)?r._ctx=ks:c===3&&ks&&(ks.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else ht(r)?(r={default:r,_ctx:ks},e=32):(r=String(r),n&64?(e=16,r=[It(r)]):e=8);t.children=r,t.shapeFlag|=e}function by(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const c in n)if(c==="class")r.class!==n.class&&(r.class=Tr([r.class,n.class]));else if(c==="style")r.style=Hh([r.style,n.style]);else if(ic(c)){const g=r[c],$=n[c];$&&g!==$&&!(Qe(g)&&g.includes($))&&(r[c]=g?[].concat(g,$):$)}else c!==""&&(r[c]=n[c])}return r}function zn(t,r,e,n=null){wn(t,r,7,[e,n])}const Ay=Lg();let _y=0;function Cy(t,r,e){const n=t.type,c=(r?r.appContext:t.appContext)||Ay,g={uid:_y++,vnode:t,type:n,parent:r,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(c.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hg(n,c),emitsOptions:Pg(n,c),emit:null,emitted:null,propsDefaults:pr,inheritAttrs:n.inheritAttrs,ctx:pr,data:pr,props:pr,attrs:pr,slots:pr,refs:pr,setupState:pr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=r?r.root:g,g.emit=O0.bind(null,g),t.ce&&t.ce(g),g}let es=null;const ky=()=>es||ks;let ep,_u,ev="__VUE_INSTANCE_SETTERS__";(_u=Zc()[ev])||(_u=Zc()[ev]=[]),_u.push(t=>es=t),ep=t=>{_u.length>1?_u.forEach(r=>r(t)):_u[0](t)};const Ku=t=>{ep(t),t.scope.on()},tu=()=>{es&&es.scope.off(),ep(null)};function Jg(t){return t.vnode.shapeFlag&4}let hf=!1;function Py(t,r=!1){hf=r;const{props:e,children:n}=t.vnode,c=Jg(t);uy(t,e,c,r),hy(t,n);const g=c?Ey(t,r):void 0;return hf=!1,g}function Ey(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=mg(new Proxy(t.ctx,ey));const{setup:n}=e;if(n){const c=t.setupContext=n.length>1?Sy(t):null;Ku(t),Zu();const g=Ci(n,t,0,[t.props,c]);if(Qu(),tu(),tg(g)){if(g.then(tu,tu),r)return g.then($=>{tv(t,$,r)}).catch($=>{cc($,t,0)});t.asyncDep=g}else tv(t,g,r)}else Xg(t,r)}function tv(t,r,e){ht(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:hr(r)&&(t.setupState=bg(r)),Xg(t,e)}let rv;function Xg(t,r,e){const n=t.type;if(!t.render){if(!r&&rv&&!n.render){const c=n.template||Zh(t).template;if(c){const{isCustomElement:g,compilerOptions:$}=t.appContext.config,{delimiters:x,compilerOptions:m}=n,A=Lr(Lr({isCustomElement:g,delimiters:x},$),m);n.render=rv(c,A)}}t.render=n.render||qn}{Ku(t),Zu();try{ty(t)}finally{Qu(),tu()}}}function My(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(r,e){return Ss(t,"get","$attrs"),r[e]}}))}function Sy(t){const r=e=>{t.exposed=e||{}};return{get attrs(){return My(t)},slots:t.slots,emit:t.emit,expose:r}}function tp(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(bg(mg(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in sf)return sf[e](t)},has(r,e){return e in r||e in sf}}))}function Fy(t){return ht(t)&&"__vccOpts"in t}const Oy=(t,r)=>C0(t,r,hf);function hi(t,r,e){const n=arguments.length;return n===2?hr(r)&&!Qe(r)?ec(r)?nt(t,null,[r]):nt(t,r):nt(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&ec(e)&&(e=[e]),nt(t,r,e))}const Ny=Symbol.for("v-scx"),Iy=()=>Nf(Ny),Ty="3.3.7",jy="http://www.w3.org/2000/svg",Jo=typeof document<"u"?document:null,sv=Jo&&Jo.createElement("template"),Ry={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const c=r?Jo.createElementNS(jy,t):Jo.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&c.setAttribute("multiple",n.multiple),c},createText:t=>Jo.createTextNode(t),createComment:t=>Jo.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Jo.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,c,g){const $=e?e.previousSibling:r.lastChild;if(c&&(c===g||c.nextSibling))for(;r.insertBefore(c.cloneNode(!0),e),!(c===g||!(c=c.nextSibling)););else{sv.innerHTML=n?`<svg>${t}</svg>`:t;const x=sv.content;if(n){const m=x.firstChild;for(;m.firstChild;)x.appendChild(m.firstChild);x.removeChild(m)}r.insertBefore(x,e)}return[$?$.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},fi="transition",Yu="animation",pf=Symbol("_vtc"),rp=(t,{slots:r})=>hi(U0,Dy(t),r);rp.displayName="Transition";const Gg={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};rp.props=Lr({},Sg,Gg);const zo=(t,r=[])=>{Qe(t)?t.forEach(e=>e(...r)):t&&t(...r)},nv=t=>t?Qe(t)?t.some(r=>r.length>1):t.length>1:!1;function Dy(t){const r={};for(const le in t)le in Gg||(r[le]=t[le]);if(t.css===!1)return r;const{name:e="v",type:n,duration:c,enterFromClass:g=`${e}-enter-from`,enterActiveClass:$=`${e}-enter-active`,enterToClass:x=`${e}-enter-to`,appearFromClass:m=g,appearActiveClass:A=$,appearToClass:C=x,leaveFromClass:P=`${e}-leave-from`,leaveActiveClass:S=`${e}-leave-active`,leaveToClass:I=`${e}-leave-to`}=t,G=Ly(c),ee=G&&G[0],re=G&&G[1],{onBeforeEnter:ge,onEnter:q,onEnterCancelled:U,onLeave:L,onLeaveCancelled:H,onBeforeAppear:W=ge,onAppear:V=q,onAppearCancelled:J=U}=r,Y=(le,Ie,ze)=>{Vo(le,Ie?C:x),Vo(le,Ie?A:$),ze&&ze()},ue=(le,Ie)=>{le._isLeaving=!1,Vo(le,P),Vo(le,I),Vo(le,S),Ie&&Ie()},de=le=>(Ie,ze)=>{const mt=le?V:q,Ke=()=>Y(Ie,le,ze);zo(mt,[Ie,Ke]),av(()=>{Vo(Ie,le?m:g),ci(Ie,le?C:x),nv(mt)||iv(Ie,n,ee,Ke)})};return Lr(r,{onBeforeEnter(le){zo(ge,[le]),ci(le,g),ci(le,$)},onBeforeAppear(le){zo(W,[le]),ci(le,m),ci(le,A)},onEnter:de(!1),onAppear:de(!0),onLeave(le,Ie){le._isLeaving=!0;const ze=()=>ue(le,Ie);ci(le,P),Uy(),ci(le,S),av(()=>{le._isLeaving&&(Vo(le,P),ci(le,I),nv(L)||iv(le,n,re,ze))}),zo(L,[le,ze])},onEnterCancelled(le){Y(le,!1),zo(U,[le])},onAppearCancelled(le){Y(le,!0),zo(J,[le])},onLeaveCancelled(le){ue(le),zo(H,[le])}})}function Ly(t){if(t==null)return null;if(hr(t))return[Fc(t.enter),Fc(t.leave)];{const r=Fc(t);return[r,r]}}function Fc(t){return zd(t)}function ci(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[pf]||(t[pf]=new Set)).add(r)}function Vo(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const e=t[pf];e&&(e.delete(r),e.size||(t[pf]=void 0))}function av(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let By=0;function iv(t,r,e,n){const c=t._endId=++By,g=()=>{c===t._endId&&n()};if(e)return setTimeout(g,e);const{type:$,timeout:x,propCount:m}=Hy(t,r);if(!$)return n();const A=$+"end";let C=0;const P=()=>{t.removeEventListener(A,S),g()},S=I=>{I.target===t&&++C>=m&&P()};setTimeout(()=>{C<m&&P()},x+1),t.addEventListener(A,S)}function Hy(t,r){const e=window.getComputedStyle(t),n=G=>(e[G]||"").split(", "),c=n(`${fi}Delay`),g=n(`${fi}Duration`),$=lv(c,g),x=n(`${Yu}Delay`),m=n(`${Yu}Duration`),A=lv(x,m);let C=null,P=0,S=0;r===fi?$>0&&(C=fi,P=$,S=g.length):r===Yu?A>0&&(C=Yu,P=A,S=m.length):(P=Math.max($,A),C=P>0?$>A?fi:Yu:null,S=C?C===fi?g.length:m.length:0);const I=C===fi&&/\b(transform|all)(,|$)/.test(n(`${fi}Property`).toString());return{type:C,timeout:P,propCount:S,hasTransform:I}}function lv(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>ov(e)+ov(t[n])))}function ov(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Uy(){return document.body.offsetHeight}function qy(t,r,e){const n=t[pf];n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const zy=Symbol("_vod");function Vy(t,r,e){const n=t.style,c=jr(e);if(e&&!c){if(r&&!jr(r))for(const g in r)e[g]==null&&fh(n,g,"");for(const g in e)fh(n,g,e[g])}else{const g=n.display;c?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),zy in t&&(n.display=g)}}const uv=/\s*!important$/;function fh(t,r,e){if(Qe(e))e.forEach(n=>fh(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=Wy(t,r);uv.test(e)?t.setProperty(Gu(n),e.replace(uv,""),"important"):t[n]=e}}const fv=["Webkit","Moz","ms"],Oc={};function Wy(t,r){const e=Oc[r];if(e)return e;let n=Vu(r);if(n!=="filter"&&n in t)return Oc[r]=n;n=ng(n);for(let c=0;c<fv.length;c++){const g=fv[c]+n;if(g in t)return Oc[r]=g}return r}const cv="http://www.w3.org/1999/xlink";function Ky(t,r,e,n,c){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(cv,r.slice(6,r.length)):t.setAttributeNS(cv,r,e);else{const g=Gd(r);e==null||g&&!ag(e)?t.removeAttribute(r):t.setAttribute(r,g?"":e)}}function Jy(t,r,e,n,c,g,$){if(r==="innerHTML"||r==="textContent"){n&&$(n,c,g),t[r]=e??"";return}const x=t.tagName;if(r==="value"&&x!=="PROGRESS"&&!x.includes("-")){t._value=e;const A=x==="OPTION"?t.getAttribute("value"):t.value,C=e??"";A!==C&&(t.value=C),e==null&&t.removeAttribute(r);return}let m=!1;if(e===""||e==null){const A=typeof t[r];A==="boolean"?e=ag(e):e==null&&A==="string"?(e="",m=!0):A==="number"&&(e=0,m=!0)}try{t[r]=e}catch{}m&&t.removeAttribute(r)}function Xy(t,r,e,n){t.addEventListener(r,e,n)}function Gy(t,r,e,n){t.removeEventListener(r,e,n)}const hv=Symbol("_vei");function Zy(t,r,e,n,c=null){const g=t[hv]||(t[hv]={}),$=g[r];if(n&&$)$.value=n;else{const[x,m]=Qy(r);if(n){const A=g[r]=tw(n,c);Xy(t,x,A,m)}else $&&(Gy(t,x,$,m),g[r]=void 0)}}const pv=/(?:Once|Passive|Capture)$/;function Qy(t){let r;if(pv.test(t)){r={};let n;for(;n=t.match(pv);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gu(t.slice(2)),r]}let Nc=0;const Yy=Promise.resolve(),ew=()=>Nc||(Yy.then(()=>Nc=0),Nc=Date.now());function tw(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;wn(rw(n,e.value),r,5,[n])};return e.value=t,e.attached=ew(),e}function rw(t,r){if(Qe(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>c=>!c._stopped&&n&&n(c))}else return r}const vv=/^on[a-z]/,sw=(t,r,e,n,c=!1,g,$,x,m)=>{r==="class"?qy(t,n,c):r==="style"?Vy(t,e,n):ic(r)?Dh(r)||Zy(t,r,e,n,$):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):nw(t,r,n,c))?Jy(t,r,n,g,$,x,m):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),Ky(t,r,n,c))};function nw(t,r,e,n){return n?!!(r==="innerHTML"||r==="textContent"||r in t&&vv.test(r)&&ht(e)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||vv.test(r)&&jr(e)?!1:r in t}const aw=Lr({patchProp:sw},Ry);let gv;function iw(){return gv||(gv=vy(aw))}const lw=(...t)=>{const r=iw().createApp(...t),{mount:e}=r;return r.mount=n=>{const c=ow(n);if(!c)return;const g=r._component;!ht(g)&&!g.render&&!g.template&&(g.template=c.innerHTML),c.innerHTML="";const $=e(c,!1,c instanceof SVGElement);return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),$},r};function ow(t){return jr(t)?document.querySelector(t):t}const uw={key:0},fw=["onClick"],cw={key:1},hw=["onClick"],pw=si({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=wr(!1),n=r;return(c,g)=>(wt(),Ut("div",{class:Tr(c.$style.wrapper)},[Mt("button",{onClick:g[0]||(g[0]=$=>e.value=!e.value)},[Of(c.$slots,"default")]),nt(rp,null,{default:ot(()=>[e.value?(wt(),Ut("div",{key:0,class:Tr(c.$style.menu)},[c.options instanceof Array?(wt(),Ut("div",uw,[(wt(!0),Ut(Ir,null,fu(c.options,$=>(wt(),Ut("div",{class:Tr(c.$style.opt),onClick:x=>{e.value=!1,n("select",$)}},Dr($),11,fw))),256))])):(wt(),Ut("div",cw,[(wt(!0),Ut(Ir,null,fu(Object.keys(c.options),$=>(wt(),Ut("div",{class:Tr(c.$style.opt),onClick:x=>{e.value=!1,n("select",$)}},Dr(c.options[$]),11,hw))),256))]))],2)):Xn("",!0)]),_:1})],2))}}),vw="_wrapper_1dk0z_2",gw="_menu_1dk0z_5",dw="_opt_1dk0z_12",yw={wrapper:vw,menu:gw,opt:dw},ai=(t,r)=>{const e=t.__vccOpts||t;for(const[n,c]of r)e[n]=c;return e},ww={$style:yw},Zg=ai(pw,[["__cssModules",ww]]);function vr(t,r,e){let n=e.value;return{configurable:!0,get(){const c=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:c}),c},set(c){n=c}}}let Ju=class Qg extends Error{constructor(e,n){super(e);be(this,"name","AiScript");be(this,"info");be(this,"loc");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Qg)}},dv=class extends Ju{constructor(e){super(e.message??`${e}`,e);be(this,"name","Internal")}},yt=class extends Ju{constructor(e,n,c){super(`${e} (Line ${n.line}, Column ${n.column})`,c);be(this,"loc");be(this,"name","Syntax");this.loc=n}};class yv extends Ju{constructor(e,n,c){super(`${e} (Line ${n.line}, Column ${n.column})`,c);be(this,"loc");be(this,"name","Namespace");this.loc=n}}let er=class extends Ju{constructor(e,n){super(e,n);be(this,"name","Runtime")}},mw=class extends er{constructor(r,e){super(r,e)}};var Si=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};let ii=class Yg{constructor(r=[],e,n){be(this,"parent");be(this,"layerdStates");be(this,"name");be(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Yg(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new er(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const c of this.layerdStates){if(c.has(r)){const g=c.get(r);if(!g.isMutable)throw new er(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new er(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Si([vr],ii.prototype,"log",null);Si([vr],ii.prototype,"onUpdated",null);Si([vr],ii.prototype,"createChildScope",null);Si([vr],ii.prototype,"get",null);Si([vr],ii.prototype,"exists",null);Si([vr],ii.prototype,"getAll",null);Si([vr],ii.prototype,"add",null);Si([vr],ii.prototype,"assign",null);let Cf;const xw=new Uint8Array(16);function $w(){if(!Cf&&(Cf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cf(xw)}const Xr=[];for(let t=0;t<256;++t)Xr.push((t+256).toString(16).slice(1));function bw(t,r=0){return Xr[t[r+0]]+Xr[t[r+1]]+Xr[t[r+2]]+Xr[t[r+3]]+"-"+Xr[t[r+4]]+Xr[t[r+5]]+"-"+Xr[t[r+6]]+Xr[t[r+7]]+"-"+Xr[t[r+8]]+Xr[t[r+9]]+"-"+Xr[t[r+10]]+Xr[t[r+11]]+Xr[t[r+12]]+Xr[t[r+13]]+Xr[t[r+14]]+Xr[t[r+15]]}const Aw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wv={randomUUID:Aw};function _w(t,r,e){if(wv.randomUUID&&!r&&!t)return wv.randomUUID();t=t||{};const n=t.random||(t.rng||$w)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let c=0;c<16;++c)r[e+c]=n[c];return r}return bw(n)}var Tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Cw(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){return this instanceof n?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var c=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,c.get?c:{enumerable:!0,get:function(){return t[n]}})}),e}var np={exports:{}};np.exports;(function(t){(function(r,e,n){function c(m){var A=this,C=x();A.next=function(){var P=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=P-(A.c=P|0)},A.c=1,A.s0=C(" "),A.s1=C(" "),A.s2=C(" "),A.s0-=C(m),A.s0<0&&(A.s0+=1),A.s1-=C(m),A.s1<0&&(A.s1+=1),A.s2-=C(m),A.s2<0&&(A.s2+=1),C=null}function g(m,A){return A.c=m.c,A.s0=m.s0,A.s1=m.s1,A.s2=m.s2,A}function $(m,A){var C=new c(m),P=A&&A.state,S=C.next;return S.int32=function(){return C.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,P&&(typeof P=="object"&&g(P,C),S.state=function(){return g(C,{})}),S}function x(){var m=4022871197,A=function(C){C=String(C);for(var P=0;P<C.length;P++){m+=C.charCodeAt(P);var S=.02519603282416938*m;m=S>>>0,S-=m,S*=m,m=S>>>0,S-=m,m+=S*4294967296}return(m>>>0)*23283064365386963e-26};return A}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.alea=$})(Tt,t,!1)})(np);var kw=np.exports,ap={exports:{}};ap.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var P=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^P^P>>>8},x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor128=$})(Tt,t,!1)})(ap);var Pw=ap.exports,ip={exports:{}};ip.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(P^P<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,C==A.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m.v=x.v,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorwow=$})(Tt,t,!1)})(ip);var Ew=ip.exports,lp={exports:{}};lp.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.x,P=m.i,S,I;return S=C[P],S^=S>>>7,I=S^S<<24,S=C[P+1&7],I^=S^S>>>10,S=C[P+3&7],I^=S^S>>>3,S=C[P+4&7],I^=S^S<<7,S=C[P+7&7],S=S^S<<13,I^=S^S<<9,C[P]=I,m.i=P+1&7,I};function A(C,P){var S,I=[];if(P===(P|0))I[0]=P;else for(P=""+P,S=0;S<P.length;++S)I[S&7]=I[S&7]<<15^P.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],C.x=I,C.i=0,S=256;S>0;--S)C.next()}A(m,x)}function g(x,m){return m.x=x.x.slice(),m.i=x.i,m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.x&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorshift7=$})(Tt,t,!1)})(lp);var Mw=lp.exports,op={exports:{}};op.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.w,P=m.X,S=m.i,I,G;return m.w=C=C+1640531527|0,G=P[S+34&127],I=P[S=S+1&127],G^=G<<13,I^=I<<17,G^=G>>>15,I^=I>>>12,G=P[S]=G^I,m.i=S,G+(C^C>>>16)|0};function A(C,P){var S,I,G,ee,re,ge=[],q=128;for(P===(P|0)?(I=P,P=null):(P=P+"\0",I=0,q=Math.max(q,P.length)),G=0,ee=-32;ee<q;++ee)P&&(I^=P.charCodeAt((ee+32)%P.length)),ee===0&&(re=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,ee>=0&&(re=re+1640531527|0,S=ge[ee&127]^=I+re,G=S==0?G+1:0);for(G>=128&&(ge[(P&&P.length||0)&127]=-1),G=127,ee=4*128;ee>0;--ee)I=ge[G+34&127],S=ge[G=G+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,ge[G]=I^S;C.w=re,C.X=ge,C.i=G}A(m,x)}function g(x,m){return m.i=x.i,m.w=x.w,m.X=x.X.slice(),m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.X&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor4096=$})(Tt,t,!1)})(op);var Sw=op.exports,up={exports:{}};up.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.b,S=m.c,I=m.d,G=m.a;return P=P<<25^P>>>7^S,S=S-I|0,I=I<<24^I>>>8^G,G=G-P|0,m.b=P=P<<20^P>>>12^S,m.c=S=S-I|0,m.d=I<<16^S>>>16^G,m.a=G-P|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,x===Math.floor(x)?(m.a=x/4294967296|0,m.b=x|0):A+=x;for(var C=0;C<A.length+20;C++)m.b^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.a=x.a,m.b=x.b,m.c=x.c,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.tychei=$})(Tt,t,!1)})(up);var Fw=up.exports,ed={exports:{}};const Ow={},Nw=Object.freeze(Object.defineProperty({__proto__:null,default:Ow},Symbol.toStringTag,{value:"Module"})),fp=Cw(Nw);(function(t){(function(r,e,n){var c=256,g=6,$=52,x="random",m=n.pow(c,g),A=n.pow(2,$),C=A*2,P=c-1,S;function I(L,H,W){var V=[];H=H==!0?{entropy:!0}:H||{};var J=ge(re(H.entropy?[L,U(e)]:L??q(),3),V),Y=new G(V),ue=function(){for(var de=Y.g(g),le=m,Ie=0;de<A;)de=(de+Ie)*c,le*=c,Ie=Y.g(1);for(;de>=C;)de/=2,le/=2,Ie>>>=1;return(de+Ie)/le};return ue.int32=function(){return Y.g(4)|0},ue.quick=function(){return Y.g(4)/4294967296},ue.double=ue,ge(U(Y.S),e),(H.pass||W||function(de,le,Ie,ze){return ze&&(ze.S&&ee(ze,Y),de.state=function(){return ee(Y,{})}),Ie?(n[x]=de,le):de})(ue,J,"global"in H?H.global:this==n,H.state)}function G(L){var H,W=L.length,V=this,J=0,Y=V.i=V.j=0,ue=V.S=[];for(W||(L=[W++]);J<c;)ue[J]=J++;for(J=0;J<c;J++)ue[J]=ue[Y=P&Y+L[J%W]+(H=ue[J])],ue[Y]=H;(V.g=function(de){for(var le,Ie=0,ze=V.i,mt=V.j,Ke=V.S;de--;)le=Ke[ze=P&ze+1],Ie=Ie*c+Ke[P&(Ke[ze]=Ke[mt=P&mt+le])+(Ke[mt]=le)];return V.i=ze,V.j=mt,Ie})(c)}function ee(L,H){return H.i=L.i,H.j=L.j,H.S=L.S.slice(),H}function re(L,H){var W=[],V=typeof L,J;if(H&&V=="object")for(J in L)try{W.push(re(L[J],H-1))}catch{}return W.length?W:V=="string"?L:L+"\0"}function ge(L,H){for(var W=L+"",V,J=0;J<W.length;)H[P&J]=P&(V^=H[P&J]*19)+W.charCodeAt(J++);return U(H)}function q(){try{var L;return S&&(L=S.randomBytes)?L=L(c):(L=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(L)),U(L)}catch{var H=r.navigator,W=H&&H.plugins;return[+new Date,r,W,r.screen,U(e)]}}function U(L){return String.fromCharCode.apply(0,L)}if(ge(n.random(),e),t.exports){t.exports=I;try{S=fp}catch{}}else n["seed"+x]=I})(typeof self<"u"?self:Tt,[],Math)})(ed);var Iw=ed.exports,Tw=kw,jw=Pw,Rw=Ew,Dw=Mw,Lw=Sw,Bw=Fw,du=Iw;du.alea=Tw;du.xor128=jw;du.xorwow=Rw;du.xorshift7=Dw;du.xor4096=Lw;du.tychei=Bw;var Hw=du;const Uw=sp(Hw),kt={type:"null"},pn={type:"bool",value:!0},Ys={type:"bool",value:!1},Me=t=>({type:"num",value:t}),Zt=t=>({type:"str",value:t}),ru=t=>({type:"bool",value:t}),tc=t=>({type:"obj",value:t}),ss=t=>({type:"arr",value:t}),qw=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),fe=t=>({type:"fn",native:t}),zw=t=>({type:"return",value:t}),Vw=()=>({type:"break",value:null}),Ww=()=>({type:"continue",value:null}),Kw=t=>t.type==="return"?t.value:t,ch=(t,r)=>({type:"error",value:t,info:r});function nn(t){if(t==null)throw new er("Expect anything, but got nothing.")}function $s(t){if(t==null)throw new er("Expect boolean, but got nothing.");if(t.type!=="bool")throw new er(`Expect boolean, but got ${t.type}.`)}function mi(t){if(t==null)throw new er("Expect function, but got nothing.");if(t.type!=="fn")throw new er(`Expect function, but got ${t.type}.`)}function Mr(t){if(t==null)throw new er("Expect string, but got nothing.");if(t.type!=="str")throw new er(`Expect string, but got ${t.type}.`)}function _e(t){if(t==null)throw new er("Expect number, but got nothing.");if(t.type!=="num")throw new er(`Expect number, but got ${t.type}.`)}function Vn(t){if(t==null)throw new er("Expect object, but got nothing.");if(t.type!=="obj")throw new er(`Expect object, but got ${t.type}.`)}function rc(t){if(t==null)throw new er("Expect array, but got nothing.");if(t.type!=="arr")throw new er(`Expect array, but got ${t.type}.`)}function Ic(t){return t.type==="obj"}function mv(t){return t.type==="arr"}function hh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function ph(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>ph(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function vh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>vh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=vh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function gh(t){if(t===null)return kt;if(typeof t=="boolean")return ru(t);if(typeof t=="string")return Zt(t);if(typeof t=="number")return Me(t);if(Array.isArray(t))return ss(t.map(r=>gh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,gh(n));return tc(r)}return kt}function Iu(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const c of t.value)n.push(Iu(c,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[c,g]of t.value)n.push(`${c}: ${Iu(g,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Jw={help:Zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Zt("0.16.0"),"Core:ai":Zt("kawaii"),"Core:not":fe(([t])=>($s(t),t.value?Ys:pn)),"Core:eq":fe(([t,r])=>(nn(t),nn(r),hh(t,r)?pn:Ys)),"Core:neq":fe(([t,r])=>(nn(t),nn(r),hh(t,r)?Ys:pn)),"Core:and":fe(([t,r])=>($s(t),t.value?($s(r),r.value?pn:Ys):Ys)),"Core:or":fe(([t,r])=>($s(t),t.value?pn:($s(r),r.value?pn:Ys))),"Core:add":fe(([t,r])=>(_e(t),_e(r),Me(t.value+r.value))),"Core:sub":fe(([t,r])=>(_e(t),_e(r),Me(t.value-r.value))),"Core:mul":fe(([t,r])=>(_e(t),_e(r),Me(t.value*r.value))),"Core:pow":fe(([t,r])=>{_e(t),_e(r);const e=t.value**r.value;if(isNaN(e))throw new er("Invalid operation.");return Me(e)}),"Core:div":fe(([t,r])=>{_e(t),_e(r);const e=t.value/r.value;if(isNaN(e))throw new er("Invalid operation.");return Me(e)}),"Core:mod":fe(([t,r])=>(_e(t),_e(r),Me(t.value%r.value))),"Core:gt":fe(([t,r])=>(_e(t),_e(r),t.value>r.value?pn:Ys)),"Core:lt":fe(([t,r])=>(_e(t),_e(r),t.value<r.value?pn:Ys)),"Core:gteq":fe(([t,r])=>(_e(t),_e(r),t.value>=r.value?pn:Ys)),"Core:lteq":fe(([t,r])=>(_e(t),_e(r),t.value<=r.value?pn:Ys)),"Core:type":fe(([t])=>(nn(t),Zt(t.type))),"Core:to_str":fe(([t])=>(nn(t),Zt(Iu(t)))),"Core:range":fe(([t,r])=>(_e(t),_e(r),t.value<r.value?ss(Array.from({length:r.value-t.value+1},(e,n)=>Me(n+t.value))):t.value>r.value?ss(Array.from({length:t.value-r.value+1},(e,n)=>Me(t.value-n))):ss([t]))),"Core:sleep":fe(async([t])=>(_e(t),await new Promise(r=>setTimeout(r,t.value)),kt)),"Util:uuid":fe(()=>Zt(_w())),"Json:stringify":fe(([t])=>(nn(t),Zt(JSON.stringify(vh(t))))),"Json:parse":fe(([t])=>{Mr(t);try{return gh(JSON.parse(t.value))}catch{return ch("not_json")}}),"Json:parsable":fe(([t])=>{Mr(t);try{JSON.parse(t.value)}catch{return ru(!1)}return ru(!0)}),"Date:now":fe(()=>Me(Date.now())),"Date:year":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":fe(([t])=>(t&&_e(t),Me(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":fe(([t])=>(Mr(t),Me(new Date(t.value).getTime()))),"Math:Infinity":Me(1/0),"Math:E":Me(Math.E),"Math:LN2":Me(Math.LN2),"Math:LN10":Me(Math.LN10),"Math:LOG2E":Me(Math.LOG2E),"Math:LOG10E":Me(Math.LOG10E),"Math:PI":Me(Math.PI),"Math:SQRT1_2":Me(Math.SQRT1_2),"Math:SQRT2":Me(Math.SQRT2),"Math:abs":fe(([t])=>(_e(t),Me(Math.abs(t.value)))),"Math:acos":fe(([t])=>(_e(t),Me(Math.acos(t.value)))),"Math:acosh":fe(([t])=>(_e(t),Me(Math.acosh(t.value)))),"Math:asin":fe(([t])=>(_e(t),Me(Math.asin(t.value)))),"Math:asinh":fe(([t])=>(_e(t),Me(Math.asinh(t.value)))),"Math:atan":fe(([t])=>(_e(t),Me(Math.atan(t.value)))),"Math:atanh":fe(([t])=>(_e(t),Me(Math.atanh(t.value)))),"Math:atan2":fe(([t,r])=>(_e(t),_e(r),Me(Math.atan2(t.value,r.value)))),"Math:cbrt":fe(([t])=>(_e(t),Me(Math.cbrt(t.value)))),"Math:ceil":fe(([t])=>(_e(t),Me(Math.ceil(t.value)))),"Math:clz32":fe(([t])=>(_e(t),Me(Math.clz32(t.value)))),"Math:cos":fe(([t])=>(_e(t),Me(Math.cos(t.value)))),"Math:cosh":fe(([t])=>(_e(t),Me(Math.cosh(t.value)))),"Math:exp":fe(([t])=>(_e(t),Me(Math.exp(t.value)))),"Math:expm1":fe(([t])=>(_e(t),Me(Math.expm1(t.value)))),"Math:floor":fe(([t])=>(_e(t),Me(Math.floor(t.value)))),"Math:fround":fe(([t])=>(_e(t),Me(Math.fround(t.value)))),"Math:hypot":fe(([t])=>{rc(t);const r=[];for(const e of t.value)_e(e),r.push(e.value);return Me(Math.hypot(...r))}),"Math:imul":fe(([t,r])=>(_e(t),_e(r),Me(Math.imul(t.value,r.value)))),"Math:log":fe(([t])=>(_e(t),Me(Math.log(t.value)))),"Math:log1p":fe(([t])=>(_e(t),Me(Math.log1p(t.value)))),"Math:log10":fe(([t])=>(_e(t),Me(Math.log10(t.value)))),"Math:log2":fe(([t])=>(_e(t),Me(Math.log2(t.value)))),"Math:max":fe(([t,r])=>(_e(t),_e(r),Me(Math.max(t.value,r.value)))),"Math:min":fe(([t,r])=>(_e(t),_e(r),Me(Math.min(t.value,r.value)))),"Math:pow":fe(([t,r])=>(_e(t),_e(r),Me(Math.pow(t.value,r.value)))),"Math:round":fe(([t])=>(_e(t),Me(Math.round(t.value)))),"Math:sign":fe(([t])=>(_e(t),Me(Math.sign(t.value)))),"Math:sin":fe(([t])=>(_e(t),Me(Math.sin(t.value)))),"Math:sinh":fe(([t])=>(_e(t),Me(Math.sinh(t.value)))),"Math:sqrt":fe(([t])=>{_e(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new er("Invalid operation.");return Me(r)}),"Math:tan":fe(([t])=>(_e(t),Me(Math.tan(t.value)))),"Math:tanh":fe(([t])=>(_e(t),Me(Math.tanh(t.value)))),"Math:trunc":fe(([t])=>(_e(t),Me(Math.trunc(t.value)))),"Math:rnd":fe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Me(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Me(Math.random())),"Math:gen_rng":fe(([t])=>{if(nn(t),t.type!=="num"&&t.type!=="str")return kt;const r=Uw(t.value.toString());return fe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Me(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Me(r()))}),"Num:to_hex":fe(([t])=>(_e(t),Zt(t.value.toString(16)))),"Num:from_hex":fe(([t])=>(Mr(t),Me(parseInt(t.value,16)))),"Str:lf":Zt(`
`),"Str:lt":fe(([t,r])=>(Mr(t),Mr(r),t.value<r.value?Me(-1):t.value===r.value?Me(0):Me(1))),"Str:gt":fe(([t,r])=>(Mr(t),Mr(r),t.value>r.value?Me(-1):t.value===r.value?Me(0):Me(1))),"Str:from_codepoint":fe(([t])=>(_e(t),Zt(String.fromCodePoint(t.value)))),"Obj:keys":fe(([t])=>(Vn(t),ss(Array.from(t.value.keys()).map(r=>Zt(r))))),"Obj:vals":fe(([t])=>(Vn(t),ss(Array.from(t.value.values())))),"Obj:kvs":fe(([t])=>(Vn(t),ss(Array.from(t.value.entries()).map(([r,e])=>ss([Zt(r),e]))))),"Obj:get":fe(([t,r])=>(Vn(t),Mr(r),t.value.get(r.value)??kt)),"Obj:set":fe(([t,r,e])=>(Vn(t),Mr(r),nn(e),t.value.set(r.value,e),kt)),"Obj:has":fe(([t,r])=>(Vn(t),Mr(r),ru(t.value.has(r.value)))),"Obj:copy":fe(([t])=>(Vn(t),tc(new Map(t.value)))),"Obj:merge":fe(([t,r])=>(Vn(t),Vn(r),tc(new Map([...t.value,...r.value])))),"Error:create":fe(([t,r])=>(Mr(t),ch(t.value,r))),"Async:interval":fe(async([t,r,e],n)=>{_e(t),mi(r),e&&($s(e),e.value&&n.call(r,[]));const c=setInterval(()=>{n.topCall(r,[])},t.value),g=()=>{clearInterval(c)};return n.registerAbortHandler(g),fe(([],$)=>{clearInterval(c),$.unregisterAbortHandler(g)})}),"Async:timeout":fe(async([t,r],e)=>{_e(t),mi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),c=()=>{clearTimeout(n)};return e.registerAbortHandler(c),fe(([],g)=>{clearTimeout(n),g.unregisterAbortHandler(c)})})};var yu={},Xw=()=>{const t="\\ud800-\\udfff",r="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",c="\\u1ab0-\\u1aff",g="\\u1dc0-\\u1dff",$=r+e+n+c+g,x="\\ufe0e\\ufe0f",m="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",A=`[${t}]`,C=`[${$}]`,P="\\ud83c[\\udffb-\\udfff]",S=`(?:${C}|${P})`,I=`[^${t}]`,G="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",re="\\u200d",ge="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",q=`[${m}]`,U=`${S}?`,L=`[${x}]?`,H=`(?:${re}(?:${[I,G,ee].join("|")})${L+U})*`,W=L+U+H,J=`(?:${[`${I}${C}?`,C,G,ee,A,q].join("|")})`;return new RegExp(`${ge}|${P}(?=${P})|${J+W}`,"g")},Gw=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yu,"__esModule",{value:!0});var wc=Gw(Xw);function dh(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(wc.default())||[]}var xv=yu.toArray=dh;function cp(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(wc.default());return r===null?0:r.length}var Zw=yu.length=cp;function td(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(wc.default());return n?n.slice(r,e).join(""):""}var Qw=yu.substring=td;function Yw(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=cp(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var c;typeof e>"u"?c=n:(typeof e!="number"&&(e=parseInt(e,10)),c=e>=0?e+r:r);var g=t.match(wc.default());return g?g.slice(r,c).join(""):""}yu.substr=Yw;function em(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var c=cp(t);if(c>r)return td(t,0,r);if(c<r){var g=e.repeat(r-c);return n==="left"?g+t:t+g}return t}yu.limit=em;function tm(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=dh(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var c=dh(r),g=!1,$;for($=e;$<n.length;$+=1){for(var x=0;x<c.length&&c[x]===n[$+x];)x+=1;if(x===c.length&&c[x-1]===n[$+x-1]){g=!0;break}}return g?$:-1}var rm=yu.indexOf=tm;const $v={num:{to_str:t=>fe(async(r,e)=>Zt(t.value.toString()))},str:{to_num:t=>fe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?kt:Me(n)}),len:t=>Me(Zw(t.value)),replace:t=>fe(async([r,e],n)=>(Mr(r),Mr(e),Zt(t.value.split(r.value).join(e.value)))),index_of:t=>fe(async([r],e)=>(Mr(r),Me(rm(t.value,r.value)))),incl:t=>fe(async([r],e)=>(Mr(r),t.value.includes(r.value)?pn:Ys)),trim:t=>fe(async(r,e)=>Zt(t.value.trim())),upper:t=>fe(async(r,e)=>Zt(t.value.toUpperCase())),lower:t=>fe(async(r,e)=>Zt(t.value.toLowerCase())),split:t=>fe(async([r],e)=>(r&&Mr(r),ss(r?t.value.split(r?r.value:"").map(n=>Zt(n)):xv(t.value).map(n=>Zt(n))))),slice:t=>fe(async([r,e],n)=>(_e(r),_e(e),Zt(Qw(t.value,r.value,e.value)))),pick:t=>fe(async([r],e)=>{_e(r);const c=xv(t.value)[r.value];return c?Zt(c):kt}),codepoint_at:t=>fe(([r],e)=>{_e(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?kt:Me(n)})},arr:{len:t=>Me(t.value.length),push:t=>fe(async([r],e)=>(nn(r),t.value.push(r),t)),unshift:t=>fe(async([r],e)=>(nn(r),t.value.unshift(r),t)),pop:t=>fe(async(r,e)=>t.value.pop()??kt),shift:t=>fe(async(r,e)=>t.value.shift()??kt),concat:t=>fe(async([r],e)=>(rc(r),ss(t.value.concat(r.value)))),slice:t=>fe(async([r,e],n)=>(_e(r),_e(e),ss(t.value.slice(r.value,e.value)))),join:t=>fe(async([r],e)=>(r&&Mr(r),Zt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>fe(async([r],e)=>{mi(r);const n=t.value.map(async(c,g)=>await e.call(r,[c,Me(g)]));return ss(await Promise.all(n))}),filter:t=>fe(async([r],e)=>{mi(r);const n=[];for(let c=0;c<t.value.length;c++){const g=t.value[c],$=await e.call(r,[g,Me(c)]);$s($),$.value&&n.push(g)}return ss(n)}),reduce:t=>fe(async([r,e],n)=>{mi(r);const c=e!=null;let g=c?e:t.value[0];for(let $=c?0:1;$<t.value.length;$++){const x=t.value[$];g=await n.call(r,[g,x,Me($)])}return g}),find:t=>fe(async([r],e)=>{mi(r);for(let n=0;n<t.value.length;n++){const c=t.value[n],g=await e.call(r,[c,Me(n)]);if($s(g),g.value)return c}return kt}),incl:t=>fe(async([r],e)=>(nn(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ys:(c=>c.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?pn:Ys)),reverse:t=>fe(async(r,e)=>(t.value.reverse(),kt)),copy:t=>fe(async(r,e)=>ss([...t.value])),sort:t=>fe(async([r],e)=>{const n=async(g,$)=>{if(g.length<=1)return g;const x=Math.floor(g.length/2),m=await n(g.slice(0,x),$),A=await n(g.slice(x),$);return c(m,A,$)},c=async(g,$,x)=>{const m=[];let A=0,C=0;for(;A<g.length&&C<$.length;){const P=g[A],S=$[C],I=await e.call(x,[P,S]);_e(I),I.value<0?(m.push(g[A]),A++):(m.push($[C]),C++)}return m.concat(g.slice(A)).concat($.slice(C))};return mi(r),rc(t),t.value=await n(t.value,r),t})},error:{name:t=>Zt(t.value),info:t=>t.info??kt}};function sm(t,r){if(Object.hasOwn($v,t.type)){const e=$v[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new er(`No such prop (${r}) in ${t.type}.`)}else throw new er(`Cannot read prop of ${t.type}. (reading ${r})`)}const nm={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var fs=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};const rd=300,am=rd-1;let ts=class{constructor(r,e={}){be(this,"opts");be(this,"stepCount",0);be(this,"stop",!1);be(this,"scope");be(this,"abortHandlers",[]);be(this,"vars",{});this.opts=e;const n={print:fe(([c])=>{nn(c),this.opts.out&&this.opts.out(c)}),readline:fe(async c=>{const g=c[0];if(Mr(g),this.opts.in==null)return kt;const $=await this.opts.in(g.value);return Zt($)})};this.vars=Object.fromEntries(Object.entries({...r,...Jw,...n}).map(([c,g])=>[c,nm.const(g)])),this.scope=new ii([new Map(Object.entries(this.vars))]),this.scope.opts.log=(c,g)=>{switch(c){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),ch("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(c){switch(c.type){case"arr":return c.value.map(g=>e(g));case"bool":return c.value;case"null":return null;case"num":return c.value;case"obj":{const g={};for(const[$,x]of c.value.entries())g[$]=e(x);return g}case"str":return c.value;default:return}}const n=new Map;for(const c of r)switch(c.type){case"meta":{n.set(c.name,e(c.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof Ju?this.opts.err(r):this.opts.err(new dv(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new yv('No "var" in namespace declaration: '+n.name,n.loc);const c={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,c),this.scope.add(r.name+":"+n.name,c);break}case"ns":break;default:{const g=n;throw new yv("invalid ns member type: "+g.type,g.loc)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??kt;{const n=new Map;for(let g=0;g<(r.args??[]).length;g++)n.set(r.args[g],{isMutable:!0,value:e[g]});const c=r.scope.createChildScope(n);return Kw(await this._run(r.statements,c))}}_eval(r,e){return this.__eval(r,e).catch(n=>{if(n.loc)throw n;{const c=n instanceof Ju?n:new dv(n);throw c.loc=r.loc,c.message=`${c.message} (Line ${r.loc.line}, Column ${r.loc.column})`,c}})}async __eval(r,e){if(this.stop)return kt;if(this.stepCount%rd===am&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new er("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);mi(n);const c=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(n,c)}case"if":{const n=await this._eval(r.cond,e);if($s(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const c of r.elseif){const g=await this._eval(c.cond,e);if($s(g),g.value)return this._eval(c.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return kt}case"match":{const n=await this._eval(r.about,e);for(const c of r.qs){const g=await this._eval(c.q,e);if(hh(n,g))return await this._eval(c.a,e)}return r.default?await this._eval(r.default,e):kt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return kt}case"for":{if(r.times){const n=await this._eval(r.times,e);_e(n);for(let c=0;c<n.value;c++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const n=await this._eval(r.from,e),c=await this._eval(r.to,e);_e(n),_e(c);for(let g=n.value;g<n.value+c.value;g++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Me(g)}]])));if($.type==="break")break;if($.type==="return")return $}}return kt}case"each":{const n=await this._eval(r.items,e);rc(n);for(const c of n.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:c}]])));if(g.type==="break")break;if(g.type==="return")return g}return kt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const c=[];for(const g of r.attr)c.push({name:g.name,value:await this._eval(g.value,e)});n.attr=c}return e.add(r.name,{isMutable:r.mut,value:n}),kt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),kt}case"addAssign":{const n=await this._eval(r.dest,e);_e(n);const c=await this._eval(r.expr,e);return _e(c),await this.assign(e,r.dest,Me(n.value+c.value)),kt}case"subAssign":{const n=await this._eval(r.dest,e);_e(n);const c=await this._eval(r.expr,e);return _e(c),await this.assign(e,r.dest,Me(n.value-c.value)),kt}case"null":return kt;case"bool":return ru(r.value);case"num":return Me(r.value);case"str":return Zt(r.value);case"arr":return ss(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const c of r.value.keys())n.set(c,await this._eval(r.value.get(c),e));return tc(n)}case"prop":{const n=await this._eval(r.target,e);return Ic(n)?n.value.has(r.name)?n.value.get(r.name):kt:sm(n,r.name)}case"index":{const n=await this._eval(r.target,e),c=await this._eval(r.index,e);if(mv(n)){_e(c);const g=n.value[c.value];if(g===void 0)throw new mw(`Index out of range. index: ${c.value} max: ${n.value.length-1}`);return g}else{if(Ic(n))return Mr(c),n.value.has(c.value)?n.value.get(c.value):kt;throw new er(`Cannot read prop (${Iu(c)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return $s(n),ru(!n.value)}case"fn":return qw(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return ru(e.exists(r.identifier.name));case"tmpl":{let n="";for(const c of r.tmpl)if(typeof c=="string")n+=c;else{const g=await this._eval(c,e);n+=Iu(g)}return Zt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),zw(n)}case"break":return this.log("block:break",{scope:e.name}),Vw();case"continue":return this.log("block:continue",{scope:e.name}),Ww();case"ns":return kt;case"meta":return kt;case"and":{const n=await this._eval(r.left,e);if($s(n),n.value){const c=await this._eval(r.right,e);return $s(c),c}else return n}case"or":{const n=await this._eval(r.left,e);if($s(n),n.value)return n;{const c=await this._eval(r.right,e);return $s(c),c}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=kt;for(let c=0;c<r.length;c++){const g=r[c];if(n=await this._eval(g,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const c=await this._eval(e.target,r),g=await this._eval(e.index,r);if(mv(c))_e(g),c.value[g.value]=n;else if(Ic(c))Mr(g),c.value.set(g.value,n);else throw new er(`Cannot read prop (${Iu(g)}) of ${c.type}.`)}else if(e.type==="prop"){const c=await this._eval(e.target,r);Vn(c),c.value.set(e.name,n)}else throw new er("The left-hand side of an assignment expression must be a variable or a property/index access.")}};fs([vr],ts.prototype,"exec",null);fs([vr],ts.prototype,"execFn",null);fs([vr],ts.prototype,"execFnSimple",null);fs([vr],ts.prototype,"handleError",null);fs([vr],ts.prototype,"log",null);fs([vr],ts.prototype,"collectNs",null);fs([vr],ts.prototype,"collectNsMember",null);fs([vr],ts.prototype,"_fn",null);fs([vr],ts.prototype,"_eval",null);fs([vr],ts.prototype,"__eval",null);fs([vr],ts.prototype,"_run",null);fs([vr],ts.prototype,"registerAbortHandler",null);fs([vr],ts.prototype,"unregisterAbortHandler",null);fs([vr],ts.prototype,"abort",null);fs([vr],ts.prototype,"assign",null);fs([vr],ts,"collectMetadata",null);class im{constructor(r,e){be(this,"pages");be(this,"firstPageIndex");be(this,"lastPageIndex");be(this,"pageIndex");be(this,"address");be(this,"_char");be(this,"line");be(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var j;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.BreakKeyword=14]="BreakKeyword",t[t.ContinueKeyword=15]="ContinueKeyword",t[t.MatchKeyword=16]="MatchKeyword",t[t.CaseKeyword=17]="CaseKeyword",t[t.DefaultKeyword=18]="DefaultKeyword",t[t.IfKeyword=19]="IfKeyword",t[t.ElifKeyword=20]="ElifKeyword",t[t.ElseKeyword=21]="ElseKeyword",t[t.ReturnKeyword=22]="ReturnKeyword",t[t.EvalKeyword=23]="EvalKeyword",t[t.VarKeyword=24]="VarKeyword",t[t.LetKeyword=25]="LetKeyword",t[t.ExistsKeyword=26]="ExistsKeyword",t[t.Not=27]="Not",t[t.NotEq=28]="NotEq",t[t.OpenSharpBracket=29]="OpenSharpBracket",t[t.Sharp3=30]="Sharp3",t[t.Percent=31]="Percent",t[t.And2=32]="And2",t[t.OpenParen=33]="OpenParen",t[t.CloseParen=34]="CloseParen",t[t.Asterisk=35]="Asterisk",t[t.Plus=36]="Plus",t[t.PlusEq=37]="PlusEq",t[t.Comma=38]="Comma",t[t.Minus=39]="Minus",t[t.MinusEq=40]="MinusEq",t[t.Dot=41]="Dot",t[t.Slash=42]="Slash",t[t.Colon=43]="Colon",t[t.Colon2=44]="Colon2",t[t.SemiColon=45]="SemiColon",t[t.Lt=46]="Lt",t[t.LtEq=47]="LtEq",t[t.Out=48]="Out",t[t.Eq=49]="Eq",t[t.Eq2=50]="Eq2",t[t.Arrow=51]="Arrow",t[t.Gt=52]="Gt",t[t.GtEq=53]="GtEq",t[t.At=54]="At",t[t.OpenBracket=55]="OpenBracket",t[t.BackSlash=56]="BackSlash",t[t.CloseBracket=57]="CloseBracket",t[t.Hat=58]="Hat",t[t.OpenBrace=59]="OpenBrace",t[t.Or2=60]="Or2",t[t.CloseBrace=61]="CloseBrace"})(j||(j={}));class lm{constructor(r,e,n=!1,c,g){be(this,"kind");be(this,"loc");be(this,"hasLeftSpacing");be(this,"value");be(this,"children");this.kind=r,this.loc=e,this.hasLeftSpacing=n,this.value=c,this.children=g}}function Be(t,r,e){return new lm(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const bv=[" ","	"],om=["\r",`
`],Av=/^[0-9]$/,um=/^[A-Za-z0-9_]$/;class fm{constructor(r){be(this,"stream");be(this,"_tokens",[]);typeof r=="string"?this.stream=new im(r):this.stream=r,this._tokens.push(this.readToken())}get token(){return this._tokens[0]}get kind(){return this.token.kind}next(){this._tokens[0].kind!==j.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(this.kind!==r)throw new yt(`unexpected token: ${j[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}readToken(){let r,e=!1;for(;;){if(this.stream.eof){r=Be(j.EOF,this.stream.getPos(),{hasLeftSpacing:e});break}if(bv.includes(this.stream.char)){this.stream.next(),e=!0;continue}const n=this.stream.getPos();if(om.includes(this.stream.char))return this.stream.next(),r=Be(j.NewLine,n,{hasLeftSpacing:e}),r;switch(this.stream.char){case"!":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.NotEq,n,{hasLeftSpacing:e})):r=Be(j.Not,n,{hasLeftSpacing:e});break}case'"':case"'":{r=this.readStringLiteral(e);break}case"#":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")this.stream.next(),!this.stream.eof&&this.stream.char==="#"&&(this.stream.next(),r=Be(j.Sharp3,n,{hasLeftSpacing:e}));else if(!this.stream.eof&&this.stream.char==="[")this.stream.next(),r=Be(j.OpenSharpBracket,n,{hasLeftSpacing:e});else throw new yt('invalid character: "#"',n);break}case"%":{this.stream.next(),r=Be(j.Percent,n,{hasLeftSpacing:e});break}case"&":{this.stream.next(),!this.stream.eof&&this.stream.char==="&"&&(this.stream.next(),r=Be(j.And2,n,{hasLeftSpacing:e}));break}case"(":{this.stream.next(),r=Be(j.OpenParen,n,{hasLeftSpacing:e});break}case")":{this.stream.next(),r=Be(j.CloseParen,n,{hasLeftSpacing:e});break}case"*":{this.stream.next(),r=Be(j.Asterisk,n,{hasLeftSpacing:e});break}case"+":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.PlusEq,n,{hasLeftSpacing:e})):r=Be(j.Plus,n,{hasLeftSpacing:e});break}case",":{this.stream.next(),r=Be(j.Comma,n,{hasLeftSpacing:e});break}case"-":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.MinusEq,n,{hasLeftSpacing:e})):r=Be(j.Minus,n,{hasLeftSpacing:e});break}case".":{this.stream.next(),r=Be(j.Dot,n,{hasLeftSpacing:e});break}case"/":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else r=Be(j.Slash,n,{hasLeftSpacing:e});break}case":":{this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Be(j.Colon2,n,{hasLeftSpacing:e})):r=Be(j.Colon,n,{hasLeftSpacing:e});break}case";":{this.stream.next(),r=Be(j.SemiColon,n,{hasLeftSpacing:e});break}case"<":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.LtEq,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),r=Be(j.Out,n,{hasLeftSpacing:e})):r=Be(j.Lt,n,{hasLeftSpacing:e});break}case"=":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.Eq2,n,{hasLeftSpacing:e})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),r=Be(j.Arrow,n,{hasLeftSpacing:e})):r=Be(j.Eq,n,{hasLeftSpacing:e});break}case">":{this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),r=Be(j.GtEq,n,{hasLeftSpacing:e})):r=Be(j.Gt,n,{hasLeftSpacing:e});break}case"@":{this.stream.next(),r=Be(j.At,n,{hasLeftSpacing:e});break}case"[":{this.stream.next(),r=Be(j.OpenBracket,n,{hasLeftSpacing:e});break}case"\\":{this.stream.next(),r=Be(j.BackSlash,n,{hasLeftSpacing:e});break}case"]":{this.stream.next(),r=Be(j.CloseBracket,n,{hasLeftSpacing:e});break}case"^":{this.stream.next(),r=Be(j.Hat,n,{hasLeftSpacing:e});break}case"`":{r=this.readTemplate(e);break}case"{":{this.stream.next(),r=Be(j.OpenBrace,n,{hasLeftSpacing:e});break}case"|":{this.stream.next(),!this.stream.eof&&this.stream.char==="|"&&(this.stream.next(),r=Be(j.Or2,n,{hasLeftSpacing:e}));break}case"}":{this.stream.next(),r=Be(j.CloseBrace,n,{hasLeftSpacing:e});break}}if(r==null){const c=this.tryReadDigits(e);if(c){r=c;break}const g=this.tryReadWord(e);if(g){r=g;break}throw new yt(`invalid character: "${this.stream.char}"`,n)}break}return r}tryReadWord(r){let e="";const n=this.stream.getPos();for(;!this.stream.eof&&um.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return Be(j.NullKeyword,n,{hasLeftSpacing:r});case"true":return Be(j.TrueKeyword,n,{hasLeftSpacing:r});case"false":return Be(j.FalseKeyword,n,{hasLeftSpacing:r});case"each":return Be(j.EachKeyword,n,{hasLeftSpacing:r});case"for":return Be(j.ForKeyword,n,{hasLeftSpacing:r});case"loop":return Be(j.LoopKeyword,n,{hasLeftSpacing:r});case"break":return Be(j.BreakKeyword,n,{hasLeftSpacing:r});case"continue":return Be(j.ContinueKeyword,n,{hasLeftSpacing:r});case"match":return Be(j.MatchKeyword,n,{hasLeftSpacing:r});case"case":return Be(j.CaseKeyword,n,{hasLeftSpacing:r});case"default":return Be(j.DefaultKeyword,n,{hasLeftSpacing:r});case"if":return Be(j.IfKeyword,n,{hasLeftSpacing:r});case"elif":return Be(j.ElifKeyword,n,{hasLeftSpacing:r});case"else":return Be(j.ElseKeyword,n,{hasLeftSpacing:r});case"return":return Be(j.ReturnKeyword,n,{hasLeftSpacing:r});case"eval":return Be(j.EvalKeyword,n,{hasLeftSpacing:r});case"var":return Be(j.VarKeyword,n,{hasLeftSpacing:r});case"let":return Be(j.LetKeyword,n,{hasLeftSpacing:r});case"exists":return Be(j.ExistsKeyword,n,{hasLeftSpacing:r});default:return Be(j.Identifier,n,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",n="";const c=this.stream.getPos();for(;!this.stream.eof&&Av.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Av.test(this.stream.char);)n+=this.stream.char,this.stream.next();if(n.length===0)throw new yt("digit expected",c)}let g;return n.length>0?g=e+"."+n:g=e,Be(j.NumberLiteral,c,{hasLeftSpacing:r,value:g})}readStringLiteral(r){let e="";const n=this.stream.char;let c="string";const g=this.stream.getPos();for(this.stream.next();c!=="finish";)switch(c){case"string":{if(this.stream.eof)throw new yt("unexpected EOF",g);if(this.stream.char==="\\"){this.stream.next(),c="escape";break}if(this.stream.char===n){this.stream.next(),c="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new yt("unexpected EOF",g);e+=this.stream.char,this.stream.next(),c="string";break}}return Be(j.StringLiteral,g,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let n="",c=[],g="string";const $=this.stream.getPos();let x=$;for(this.stream.next();g!=="finish";)switch(g){case"string":{if(this.stream.eof)throw new yt("unexpected EOF",$);if(this.stream.char==="\\"){this.stream.next(),g="escape";break}if(this.stream.char==="`"){this.stream.next(),n.length>0&&e.push(Be(j.TemplateStringElement,x,{hasLeftSpacing:r,value:n})),g="finish";break}if(this.stream.char==="{"){this.stream.next(),n.length>0&&(e.push(Be(j.TemplateStringElement,x,{hasLeftSpacing:r,value:n})),n=""),x=this.stream.getPos(),g="expr";break}n+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new yt("unexpected EOF",$);n+=this.stream.char,this.stream.next(),g="string";break}case"expr":{if(this.stream.eof)throw new yt("unexpected EOF",$);if(bv.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){this.stream.next(),e.push(Be(j.TemplateExprElement,x,{hasLeftSpacing:r,children:c})),c=[],x=this.stream.getPos(),g="string";break}const m=this.readToken();c.push(m);break}}return Be(j.Template,$,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!this.stream.eof;){if(this.stream.char===`
`){this.stream.next();break}this.stream.next()}}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function et(t,r,e){const n={type:t};for(const c of Object.keys(r))r[c]!==void 0&&(n[c]=r[c]);return n.loc=e,n}function Qs(t,r,e){return et("call",{target:et("identifier",{name:t},e),args:r},e)}function sd(t){const r=[];for(t.nextWith(j.OpenParen),t.kind===j.NewLine&&t.next();t.kind!==j.CloseParen;){t.expect(j.Identifier);const e=t.token.value;t.next();let n;switch(t.kind===j.Colon&&(t.next(),n=cu(t)),r.push({name:e,argType:n}),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.CloseParen:break;default:throw new yt("separator expected",t.token.loc)}}return t.nextWith(j.CloseParen),r}function df(t){for(t.nextWith(j.OpenBrace);t.kind===j.NewLine;)t.next();const r=[];for(;t.kind!==j.CloseBrace;)switch(r.push(mc(t)),t.kind){case j.NewLine:case j.SemiColon:{for(;[j.NewLine,j.SemiColon].includes(t.kind);)t.next();break}case j.CloseBrace:break;default:throw new yt("Multiple statements cannot be placed on a single line.",t.token.loc)}return t.nextWith(j.CloseBrace),r}function cu(t){return t.kind===j.At?cm(t):hm(t)}function cm(t){const r=t.token.loc;t.nextWith(j.At),t.nextWith(j.OpenParen);const e=[];for(;t.kind!==j.CloseParen;){if(e.length>0)switch(t.kind){case j.Comma:{t.next();break}default:throw new yt("separator expected",t.token.loc)}const c=cu(t);e.push(c)}t.nextWith(j.CloseParen),t.nextWith(j.Arrow);const n=cu(t);return et("fnTypeSource",{args:e,result:n},r)}function hm(t){const r=t.token.loc;t.expect(j.Identifier);const e=t.token.value;t.next();let n=null;return t.kind===j.Lt&&(t.next(),n=cu(t),t.nextWith(j.Gt)),et("namedTypeSource",{name:e,inner:n},r)}class pm{constructor(r){be(this,"source");be(this,"index");be(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}get token(){return this.eof?Be(j.EOF,{line:-1,column:-1}):this._token}get kind(){return this.token.kind}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:Be(j.EOF,{line:-1,column:-1})}expect(r){if(this.kind!==r)throw new yt(`unexpected token: ${j[this.kind]}`,this.token.loc)}nextWith(r){this.expect(r),this.next()}load(){this.eof?this._token=Be(j.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function mr(t,r){return r?nd(t,!0):hp(t,0)}const Tc=[{opKind:"postfix",kind:j.OpenParen,bp:20},{opKind:"postfix",kind:j.OpenBracket,bp:20},{opKind:"infix",kind:j.Dot,lbp:18,rbp:19},{opKind:"infix",kind:j.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:j.Plus,bp:14},{opKind:"prefix",kind:j.Minus,bp:14},{opKind:"prefix",kind:j.Not,bp:14},{opKind:"infix",kind:j.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:j.Slash,lbp:12,rbp:13},{opKind:"infix",kind:j.Percent,lbp:12,rbp:13},{opKind:"infix",kind:j.Plus,lbp:10,rbp:11},{opKind:"infix",kind:j.Minus,lbp:10,rbp:11},{opKind:"infix",kind:j.Lt,lbp:8,rbp:9},{opKind:"infix",kind:j.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:j.Gt,lbp:8,rbp:9},{opKind:"infix",kind:j.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:j.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:j.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:j.And2,lbp:4,rbp:5},{opKind:"infix",kind:j.Or2,lbp:2,rbp:3}];function vm(t,r){const e=t.token.loc,n=t.kind;t.next(),t.kind===j.BackSlash&&(t.next(),t.nextWith(j.NewLine));const c=hp(t,r);switch(n){case j.Plus:{if(c.type==="num")return et("num",{value:c.value},e);throw new yt("currently, sign is only supported for number literal.",e)}case j.Minus:{if(c.type==="num")return et("num",{value:-1*c.value},e);throw new yt("currently, sign is only supported for number literal.",e)}case j.Not:return et("not",{expr:c},e);default:throw new yt(`unexpected token: ${j[n]}`,e)}}function gm(t,r,e){const n=t.token.loc,c=t.kind;if(t.next(),t.kind===j.BackSlash&&(t.next(),t.nextWith(j.NewLine)),c===j.Dot){t.expect(j.Identifier);const g=t.token.value;return t.next(),et("prop",{target:r,name:g},n)}else{const g=hp(t,e);switch(c){case j.Hat:return Qs("Core:pow",[r,g],n);case j.Asterisk:return Qs("Core:mul",[r,g],n);case j.Slash:return Qs("Core:div",[r,g],n);case j.Percent:return Qs("Core:mod",[r,g],n);case j.Plus:return Qs("Core:add",[r,g],n);case j.Minus:return Qs("Core:sub",[r,g],n);case j.Lt:return Qs("Core:lt",[r,g],n);case j.LtEq:return Qs("Core:lteq",[r,g],n);case j.Gt:return Qs("Core:gt",[r,g],n);case j.GtEq:return Qs("Core:gteq",[r,g],n);case j.Eq2:return Qs("Core:eq",[r,g],n);case j.NotEq:return Qs("Core:neq",[r,g],n);case j.And2:return et("and",{left:r,right:g},n);case j.Or2:return et("or",{left:r,right:g},n);default:throw new yt(`unexpected token: ${j[c]}`,n)}}}function dm(t,r){const e=t.token.loc,n=t.kind;switch(n){case j.OpenParen:return ym(t,r);case j.OpenBracket:{t.next();const c=mr(t,!1);return t.nextWith(j.CloseBracket),et("index",{target:r,index:c},e)}default:throw new yt(`unexpected token: ${j[n]}`,e)}}function nd(t,r){const e=t.token.loc;switch(t.kind){case j.IfKeyword:{if(r)break;return wm(t)}case j.At:{if(r)break;return mm(t)}case j.MatchKeyword:{if(r)break;return xm(t)}case j.EvalKeyword:{if(r)break;return $m(t)}case j.ExistsKeyword:{if(r)break;return bm(t)}case j.Template:{const n=[];if(r)break;for(const c of t.token.children)switch(c.kind){case j.TemplateStringElement:{n.push(et("str",{value:c.value},c.loc));break}case j.TemplateExprElement:{const g=new pm(c.children),$=mr(g,!1);if(g.kind!==j.EOF)throw new yt(`unexpected token: ${j[g.token.kind]}`,g.token.loc);n.push($);break}default:throw new yt(`unexpected token: ${j[c.kind]}`,c.loc)}return t.next(),et("tmpl",{tmpl:n},e)}case j.StringLiteral:{const n=t.token.value;return t.next(),et("str",{value:n},e)}case j.NumberLiteral:{const n=Number(t.token.value);return t.next(),et("num",{value:n},e)}case j.TrueKeyword:case j.FalseKeyword:{const n=t.kind===j.TrueKeyword;return t.next(),et("bool",{value:n},e)}case j.NullKeyword:return t.next(),et("null",{},e);case j.OpenBrace:return Am(t,r);case j.OpenBracket:return _m(t,r);case j.Identifier:{if(r)break;return ad(t)}case j.OpenParen:{t.next();const n=mr(t,r);return t.nextWith(j.CloseParen),n}}throw new yt(`unexpected token: ${j[t.kind]}`,e)}function ym(t,r){const e=t.token.loc,n=[];for(t.nextWith(j.OpenParen),t.kind===j.NewLine&&t.next();t.kind!==j.CloseParen;)switch(n.push(mr(t,!1)),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.CloseParen:break;default:throw new yt("separator expected",t.token.loc)}return t.nextWith(j.CloseParen),et("call",{target:r,args:n},e)}function wm(t){const r=t.token.loc;t.nextWith(j.IfKeyword);const e=mr(t,!1),n=ki(t);t.kind===j.NewLine&&[j.ElifKeyword,j.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const c=[];for(;t.kind===j.ElifKeyword;){t.next();const $=mr(t,!1),x=ki(t);t.kind===j.NewLine&&[j.ElifKeyword,j.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),c.push({cond:$,then:x})}let g;return t.kind===j.ElseKeyword&&(t.next(),g=ki(t)),et("if",{cond:e,then:n,elseif:c,else:g},r)}function mm(t){const r=t.token.loc;t.nextWith(j.At);const e=sd(t);let n;t.kind===j.Colon&&(t.next(),n=cu(t));const c=df(t);return et("fn",{args:e,retType:n,children:c},r)}function xm(t){const r=t.token.loc;t.nextWith(j.MatchKeyword);const e=mr(t,!1);t.nextWith(j.OpenBrace),t.kind===j.NewLine&&t.next();const n=[];for(;t.kind!==j.DefaultKeyword&&t.kind!==j.CloseBrace;){t.nextWith(j.CaseKeyword);const g=mr(t,!1);t.nextWith(j.Arrow);const $=ki(t);switch(n.push({q:g,a:$}),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.DefaultKeyword:case j.CloseBrace:break;default:throw new yt("separator expected",t.token.loc)}}let c;if(t.kind===j.DefaultKeyword)switch(t.next(),t.nextWith(j.Arrow),c=ki(t),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.CloseBrace:break;default:throw new yt("separator expected",t.token.loc)}return t.nextWith(j.CloseBrace),et("match",{about:e,qs:n,default:c},r)}function $m(t){const r=t.token.loc;t.nextWith(j.EvalKeyword);const e=df(t);return et("block",{statements:e},r)}function bm(t){const r=t.token.loc;t.nextWith(j.ExistsKeyword);const e=ad(t);return et("exists",{identifier:e},r)}function ad(t){const r=t.token.loc,e=[];for(;;){if(e.length>0)if(t.kind===j.Colon){if(t.token.hasLeftSpacing)throw new yt("Cannot use spaces in a reference.",t.token.loc);if(t.next(),t.token.hasLeftSpacing)throw new yt("Cannot use spaces in a reference.",t.token.loc)}else break;t.expect(j.Identifier),e.push(t.token.value),t.next()}return et("identifier",{name:e.join(":")},r)}function Am(t,r){const e=t.token.loc;t.nextWith(j.OpenBrace),t.kind===j.NewLine&&t.next();const n=new Map;for(;t.kind!==j.CloseBrace;){t.expect(j.Identifier);const c=t.token.value;t.next(),t.nextWith(j.Colon);const g=mr(t,r);switch(n.set(c,g),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.CloseBrace:break;default:throw new yt("separator expected",t.token.loc)}}return t.nextWith(j.CloseBrace),et("obj",{value:n},e)}function _m(t,r){const e=t.token.loc;t.nextWith(j.OpenBracket),t.kind===j.NewLine&&t.next();const n=[];for(;t.kind!==j.CloseBracket;)switch(n.push(mr(t,r)),t.kind){case j.NewLine:{t.next();break}case j.Comma:{t.next(),t.kind===j.NewLine&&t.next();break}case j.CloseBracket:break;default:throw new yt("separator expected",t.token.loc)}return t.nextWith(j.CloseBracket),et("arr",{value:n},e)}function hp(t,r){let e;const n=t.kind,c=Tc.find(g=>g.opKind==="prefix"&&g.kind===n);for(c!=null?e=vm(t,c.bp):e=nd(t,!1);;){t.kind===j.BackSlash&&(t.next(),t.nextWith(j.NewLine));const g=t.kind,$=Tc.find(m=>m.opKind==="postfix"&&m.kind===g);if($!=null){if($.bp<r)break;if(!([j.OpenBracket,j.OpenParen].includes(g)&&t.token.hasLeftSpacing)){e=dm(t,e);continue}}const x=Tc.find(m=>m.opKind==="infix"&&m.kind===g);if(x!=null){if(x.lbp<r)break;e=gm(t,e,x.rbp);continue}break}return e}function mc(t){const r=t.token.loc;switch(t.kind){case j.VarKeyword:case j.LetKeyword:return id(t);case j.At:{if(t.lookahead(1).kind===j.Identifier)return ld(t);break}case j.Out:return km(t);case j.ReturnKeyword:return Mm(t);case j.OpenSharpBracket:return Sm(t);case j.EachKeyword:return Pm(t);case j.ForKeyword:return Em(t);case j.LoopKeyword:return Om(t);case j.BreakKeyword:return t.next(),et("break",{},r);case j.ContinueKeyword:return t.next(),et("continue",{},r)}const e=mr(t,!1),n=Nm(t,e);return n||e}function Cm(t){switch(t.kind){case j.VarKeyword:case j.LetKeyword:return id(t);case j.At:return ld(t);default:throw new yt(`unexpected token: ${j[t.kind]}`,t.token.loc)}}function ki(t){const r=t.token.loc;if(t.kind===j.OpenBrace){const e=df(t);return et("block",{statements:e},r)}else return mc(t)}function id(t){const r=t.token.loc;let e;switch(t.kind){case j.LetKeyword:{e=!1;break}case j.VarKeyword:{e=!0;break}default:throw new yt(`unexpected token: ${j[t.kind]}`,t.token.loc)}t.next(),t.expect(j.Identifier);const n=t.token.value;t.next();let c;t.kind===j.Colon&&(t.next(),c=cu(t)),t.nextWith(j.Eq),t.kind===j.NewLine&&t.next();const g=mr(t,!1);return et("def",{name:n,varType:c,expr:g,mut:e,attr:[]},r)}function ld(t){const r=t.token.loc;t.nextWith(j.At),t.expect(j.Identifier);const e=t.token.value;t.next();const n=sd(t);let c;t.kind===j.Colon&&(t.next(),c=cu(t));const g=df(t);return et("def",{name:e,expr:et("fn",{args:n,retType:c,children:g},r),mut:!1,attr:[]},r)}function km(t){const r=t.token.loc;t.nextWith(j.Out);const e=mr(t,!1);return Qs("print",[e],r)}function Pm(t){const r=t.token.loc;let e=!1;t.nextWith(j.EachKeyword),t.kind===j.OpenParen&&(e=!0,t.next()),t.nextWith(j.LetKeyword),t.expect(j.Identifier);const n=t.token.value;if(t.next(),t.kind===j.Comma)t.next();else throw new yt("separator expected",t.token.loc);const c=mr(t,!1);e&&t.nextWith(j.CloseParen);const g=ki(t);return et("each",{var:n,items:c,for:g},r)}function Em(t){const r=t.token.loc;let e=!1;if(t.nextWith(j.ForKeyword),t.kind===j.OpenParen&&(e=!0,t.next()),t.kind===j.LetKeyword){t.next();const n=t.token.loc;t.expect(j.Identifier);const c=t.token.value;t.next();let g;if(t.kind===j.Eq?(t.next(),g=mr(t,!1)):g=et("num",{value:0},n),t.kind===j.Comma)t.next();else throw new yt("separator expected",t.token.loc);const $=mr(t,!1);e&&t.nextWith(j.CloseParen);const x=ki(t);return et("for",{var:c,from:g,to:$,for:x},r)}else{const n=mr(t,!1);e&&t.nextWith(j.CloseParen);const c=ki(t);return et("for",{times:n,for:c},r)}}function Mm(t){const r=t.token.loc;t.nextWith(j.ReturnKeyword);const e=mr(t,!1);return et("return",{expr:e},r)}function Sm(t){const r=[];for(;t.kind===j.OpenSharpBracket;)r.push(Fm(t)),t.nextWith(j.NewLine);const e=mc(t);if(e.type!=="def")throw new yt("invalid attribute.",e.loc);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function Fm(t){const r=t.token.loc;t.nextWith(j.OpenSharpBracket),t.expect(j.Identifier);const e=t.token.value;t.next();let n;return t.kind!==j.CloseBracket?n=mr(t,!0):n=et("bool",{value:!0},r),t.nextWith(j.CloseBracket),et("attr",{name:e,value:n},r)}function Om(t){const r=t.token.loc;t.nextWith(j.LoopKeyword);const e=df(t);return et("loop",{statements:e},r)}function Nm(t,r){const e=t.token.loc;switch(t.kind){case j.Eq:{t.next();const n=mr(t,!1);return et("assign",{dest:r,expr:n},e)}case j.PlusEq:{t.next();const n=mr(t,!1);return et("addAssign",{dest:r,expr:n},e)}case j.MinusEq:{t.next();const n=mr(t,!1);return et("subAssign",{dest:r,expr:n},e)}default:return}}function Im(t){const r=[];for(;t.kind===j.NewLine;)t.next();for(;t.kind!==j.EOF;){switch(t.kind){case j.Colon2:{r.push(od(t));break}case j.Sharp3:{r.push(Tm(t));break}default:{r.push(mc(t));break}}switch(t.kind){case j.NewLine:case j.SemiColon:{for(;[j.NewLine,j.SemiColon].includes(t.kind);)t.next();break}case j.EOF:break;default:throw new yt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return r}function od(t){const r=t.token.loc;t.nextWith(j.Colon2),t.expect(j.Identifier);const e=t.token.value;t.next();const n=[];for(t.nextWith(j.OpenBrace);t.kind===j.NewLine;)t.next();for(;t.kind!==j.CloseBrace;){switch(t.kind){case j.VarKeyword:case j.LetKeyword:case j.At:{n.push(Cm(t));break}case j.Colon2:{n.push(od(t));break}}switch(t.kind){case j.NewLine:case j.SemiColon:{for(;[j.NewLine,j.SemiColon].includes(t.kind);)t.next();break}case j.CloseBrace:break;default:throw new yt("Multiple statements cannot be placed on a single line.",t.token.loc)}}return t.nextWith(j.CloseBrace),et("ns",{name:e,members:n},r)}function Tm(t){const r=t.token.loc;t.nextWith(j.Sharp3);let e=null;t.kind===j.Identifier&&(e=t.token.value,t.next());const n=mr(t,!0);return et("meta",{name:e,value:n},r)}function dt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=dt(e.expr,r);break}case"return":{e.expr=dt(e.expr,r);break}case"each":{e.items=dt(e.items,r),e.for=dt(e.for,r);break}case"for":{e.from!=null&&(e.from=dt(e.from,r)),e.to!=null&&(e.to=dt(e.to,r)),e.times!=null&&(e.times=dt(e.times,r)),e.for=dt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=dt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=dt(e.expr,r),e.dest=dt(e.dest,r);break}case"not":{e.expr=dt(e.expr,r);break}case"if":{e.cond=dt(e.cond,r),e.then=dt(e.then,r);for(const n of e.elseif)n.cond=dt(n.cond,r),n.then=dt(n.then,r);e.else!=null&&(e.else=dt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=dt(e.children[n],r);break}case"match":{e.about=dt(e.about,r);for(const n of e.qs)n.q=dt(n.q,r),n.a=dt(n.a,r);e.default!=null&&(e.default=dt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=dt(e.statements[n],r);break}case"exists":{e.identifier=dt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const c=e.tmpl[n];typeof c!="string"&&(e.tmpl[n]=dt(c,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],dt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=dt(e.value[n],r);break}case"call":{e.target=dt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=dt(e.args[n],r);break}case"index":{e.target=dt(e.target,r),e.index=dt(e.index,r);break}case"prop":{e.target=dt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=dt(e.members[n],r);break}case"or":case"and":{e.left=dt(e.left,r),e.right=dt(e.right,r);break}}return e}const Cu=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","do","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","while","yield","import","is","meta","module","namespace","new"];function ku(t,r){throw new yt(`Reserved word "${t}" cannot be used as variable name.`,r)}function jm(t){switch(t.type){case"ns":case"def":case"attr":case"identifier":case"prop":{Cu.includes(t.name)&&ku(t.name,t.loc);break}case"meta":{t.name!=null&&Cu.includes(t.name)&&ku(t.name,t.loc);break}case"each":{Cu.includes(t.var)&&ku(t.var,t.loc);break}case"for":{t.var!=null&&Cu.includes(t.var)&&ku(t.var,t.loc);break}case"fn":{for(const r of t.args)Cu.includes(r.name)&&ku(r.name,t.loc);break}case"obj":{for(const r of t.value.keys())Cu.includes(r)&&ku(r,t.loc);break}}return t}function Rm(t){for(const r of t)dt(r,jm);return t}function _v(t){return{type:"simple",name:t}}function Dm(t,r){return{type:"generic",name:t,inners:r}}function Lm(t,r){return{type:"fn",args:t,result:r}}function Tf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Tf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Tf(n)).join(", "),e=Tf(t.result);return`@(${r}) { ${e} }`}}}function Tu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return _v(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Tu(t.inner):r=_v("any"),Dm(t.name,[r])}}throw new yt(`Unknown type: '${Tf(t)}'`,t.loc)}else{const r=t.args.map(e=>Tu(e));return Lm(r,Tu(t.result))}}function Bm(t){switch(t.type){case"def":{t.varType!=null&&Tu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Tu(r.argType);t.retType!=null&&Tu(t.retType);break}}return t}function Hm(t){for(const r of t)dt(r,Bm);return t}var Za;let Um=(Za=class{constructor(){be(this,"plugins");this.plugins={validate:[Rm,Hm],transform:[]}}static parse(r){return Za.instance==null&&(Za.instance=new Za),Za.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const n=new fm(r);e=Im(n);for(const c of this.plugins.validate)e=c(e);for(const c of this.plugins.transform)e=c(e);return e}},be(Za,"instance"),Za);const Cv="next",qm={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};function af(){return af=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},af.apply(this,arguments)}var zm=13,Vm=9,Wm=8,Km=89,kf=90,Jm=77,kv=57,Pv=219,Ev=222,Mv=192,Xm=27,Sv=100,Gm=3e3,Zm=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),jc=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Qm=si({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(r);this.$nextTick(function(){var c="border-top-left-radius",g="border-bottom-left-radius";if(e){e.style[c]=n[c],e.style[g]=n[g],r.style[c]="0",r.style[g]="0";var $=["background-color","margin-top","padding-top","font-family","font-size","line-height"];$.forEach(function(x){e.style[x]=n[x]}),e.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,n=r.selectionStart,c=r.selectionEnd;this._recordChange({value:e,selectionStart:n,selectionEnd:c})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&e&&(this.history.stack[this.history.offset]=af({},n,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var n=this.history,c=n.stack,g=n.offset;if(c.length&&g>-1){this.history.stack=c.slice(0,g+1);var $=this.history.stack.length;if($>Sv){var x=$-Sv;this.history.stack=c.slice(x,$),this.history.offset=Math.max(this.history.offset-x,0)}}var m=Date.now();if(e){var A=this.history.stack[this.history.offset];if(A&&m-A.timestamp<Gm){var C,P,S=/[^a-z0-9]([a-z0-9]+)$/i,I=(C=this._getLines(A.value,A.selectionStart).pop())===null||C===void 0?void 0:C.match(S),G=(P=this._getLines(r.value,r.selectionStart).pop())===null||P===void 0?void 0:P.match(S);if(I&&G&&G[1].startsWith(I[1])){this.history.stack[this.history.offset]=af({},r,{timestamp:m});return}}}this.history.stack.push(af({},r,{timestamp:m})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,n=e.value,c=e.selectionStart,g=e.selectionEnd;this._recordChange({value:n,selectionStart:c,selectionEnd:g},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var r=this.history,e=r.stack,n=r.offset,c=e[n-1];c&&(this._updateInput(c),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,n=r.offset,c=e[n+1];c&&(this._updateInput(c),this.history.offset=Math.min(n+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,n=this.insertSpaces,c=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===Xm&&(r.target.blur(),this.$emit("blur",r));var g=r.target,$=g.value,x=g.selectionStart,m=g.selectionEnd,A=(n?" ":"	").repeat(e);if(r.keyCode===Vm&&!c&&this.capture)if(r.preventDefault(),r.shiftKey){var C=this._getLines($,x),P=C.length-1,S=this._getLines($,m).length-1,I=$.split(`
`).map(function(le,Ie){return Ie>=P&&Ie<=S&&le.startsWith(A)?le.substring(A.length):le}).join(`
`);if($!==I){var G=C[P];this._applyEdits({value:I,selectionStart:G.startsWith(A)?x-A.length:x,selectionEnd:m-($.length-I.length)})}}else if(x!==m){var ee=this._getLines($,x),re=ee.length-1,ge=this._getLines($,m).length-1,q=ee[re];this._applyEdits({value:$.split(`
`).map(function(le,Ie){return Ie>=re&&Ie<=ge?A+le:le}).join(`
`),selectionStart:/\S/.test(q)?x+A.length:x,selectionEnd:m+A.length*(ge-re+1)})}else{var U=x+A.length;this._applyEdits({value:$.substring(0,x)+A+$.substring(m),selectionStart:U,selectionEnd:U})}else if(r.keyCode===Wm){var L=x!==m,H=$.substring(0,x);if(H.endsWith(A)&&!L){r.preventDefault();var W=x-A.length;this._applyEdits({value:$.substring(0,x-A.length)+$.substring(m),selectionStart:W,selectionEnd:W})}}else if(r.keyCode===zm){if(x===m){var V=this._getLines($,x).pop(),J=V==null?void 0:V.match(/^\s+/);if(J&&J[0]){r.preventDefault();var Y=`
`+J[0],ue=x+Y.length;this._applyEdits({value:$.substring(0,x)+Y+$.substring(m),selectionStart:ue,selectionEnd:ue})}}}else if(r.keyCode===kv||r.keyCode===Pv||r.keyCode===Ev||r.keyCode===Mv){var de;r.keyCode===kv&&r.shiftKey?de=["(",")"]:r.keyCode===Pv?r.shiftKey?de=["{","}"]:de=["[","]"]:r.keyCode===Ev?r.shiftKey?de=['"','"']:de=["'","'"]:r.keyCode===Mv&&!r.shiftKey&&(de=["`","`"]),x!==m&&de&&(r.preventDefault(),this._applyEdits({value:$.substring(0,x)+de[0]+$.substring(x,m)+de[1]+$.substring(m),selectionStart:x,selectionEnd:m+2}))}else(jc?r.metaKey&&r.keyCode===kf:r.ctrlKey&&r.keyCode===kf)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(jc?r.metaKey&&r.keyCode===kf&&r.shiftKey:Zm?r.ctrlKey&&r.keyCode===Km:r.ctrlKey&&r.keyCode===kf&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===Jm&&r.ctrlKey&&(!jc||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=hi("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=hi("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(x,m){return hi("div",{class:"prism-editor__line-number token comment"},""+ ++m)})]),c=hi("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(m){r.$emit("click",m)},onKeyup:function(m){r.$emit("keyup",m)},onFocus:function(m){r.$emit("focus",m)},onBlur:function(m){r.$emit("blur",m)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),g=hi("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),$=hi("div",{class:"prism-editor__container"},[c,g]);return hi("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,$])}});var Ym={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var c=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,g=0,$={},x={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function q(U){return U instanceof m?new m(U.type,q(U.content),U.alias):Array.isArray(U)?U.map(q):U.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(q){return Object.prototype.toString.call(q).slice(8,-1)},objId:function(q){return q.__id||Object.defineProperty(q,"__id",{value:++g}),q.__id},clone:function q(U,L){L=L||{};var H,W;switch(x.util.type(U)){case"Object":if(W=x.util.objId(U),L[W])return L[W];H={},L[W]=H;for(var V in U)U.hasOwnProperty(V)&&(H[V]=q(U[V],L));return H;case"Array":return W=x.util.objId(U),L[W]?L[W]:(H=[],L[W]=H,U.forEach(function(J,Y){H[Y]=q(J,L)}),H);default:return U}},getLanguage:function(q){for(;q;){var U=c.exec(q.className);if(U)return U[1].toLowerCase();q=q.parentElement}return"none"},setLanguage:function(q,U){q.className=q.className.replace(RegExp(c,"gi"),""),q.classList.add("language-"+U)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(H){var q=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(H.stack)||[])[1];if(q){var U=document.getElementsByTagName("script");for(var L in U)if(U[L].src==q)return U[L]}return null}},isActive:function(q,U,L){for(var H="no-"+U;q;){var W=q.classList;if(W.contains(U))return!0;if(W.contains(H))return!1;q=q.parentElement}return!!L}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(q,U){var L=x.util.clone(x.languages[q]);for(var H in U)L[H]=U[H];return L},insertBefore:function(q,U,L,H){H=H||x.languages;var W=H[q],V={};for(var J in W)if(W.hasOwnProperty(J)){if(J==U)for(var Y in L)L.hasOwnProperty(Y)&&(V[Y]=L[Y]);L.hasOwnProperty(J)||(V[J]=W[J])}var ue=H[q];return H[q]=V,x.languages.DFS(x.languages,function(de,le){le===ue&&de!=q&&(this[de]=V)}),V},DFS:function q(U,L,H,W){W=W||{};var V=x.util.objId;for(var J in U)if(U.hasOwnProperty(J)){L.call(U,J,U[J],H||J);var Y=U[J],ue=x.util.type(Y);ue==="Object"&&!W[V(Y)]?(W[V(Y)]=!0,q(Y,L,null,W)):ue==="Array"&&!W[V(Y)]&&(W[V(Y)]=!0,q(Y,L,J,W))}}},plugins:{},highlightAll:function(q,U){x.highlightAllUnder(document,q,U)},highlightAllUnder:function(q,U,L){var H={callback:L,container:q,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};x.hooks.run("before-highlightall",H),H.elements=Array.prototype.slice.apply(H.container.querySelectorAll(H.selector)),x.hooks.run("before-all-elements-highlight",H);for(var W=0,V;V=H.elements[W++];)x.highlightElement(V,U===!0,H.callback)},highlightElement:function(q,U,L){var H=x.util.getLanguage(q),W=x.languages[H];x.util.setLanguage(q,H);var V=q.parentElement;V&&V.nodeName.toLowerCase()==="pre"&&x.util.setLanguage(V,H);var J=q.textContent,Y={element:q,language:H,grammar:W,code:J};function ue(le){Y.highlightedCode=le,x.hooks.run("before-insert",Y),Y.element.innerHTML=Y.highlightedCode,x.hooks.run("after-highlight",Y),x.hooks.run("complete",Y),L&&L.call(Y.element)}if(x.hooks.run("before-sanity-check",Y),V=Y.element.parentElement,V&&V.nodeName.toLowerCase()==="pre"&&!V.hasAttribute("tabindex")&&V.setAttribute("tabindex","0"),!Y.code){x.hooks.run("complete",Y),L&&L.call(Y.element);return}if(x.hooks.run("before-highlight",Y),!Y.grammar){ue(x.util.encode(Y.code));return}if(U&&n.Worker){var de=new Worker(x.filename);de.onmessage=function(le){ue(le.data)},de.postMessage(JSON.stringify({language:Y.language,code:Y.code,immediateClose:!0}))}else ue(x.highlight(Y.code,Y.grammar,Y.language))},highlight:function(q,U,L){var H={code:q,grammar:U,language:L};if(x.hooks.run("before-tokenize",H),!H.grammar)throw new Error('The language "'+H.language+'" has no grammar.');return H.tokens=x.tokenize(H.code,H.grammar),x.hooks.run("after-tokenize",H),m.stringify(x.util.encode(H.tokens),H.language)},tokenize:function(q,U){var L=U.rest;if(L){for(var H in L)U[H]=L[H];delete U.rest}var W=new P;return S(W,W.head,q),C(q,W,U,W.head,0),G(W)},hooks:{all:{},add:function(q,U){var L=x.hooks.all;L[q]=L[q]||[],L[q].push(U)},run:function(q,U){var L=x.hooks.all[q];if(!(!L||!L.length))for(var H=0,W;W=L[H++];)W(U)}},Token:m};n.Prism=x;function m(q,U,L,H){this.type=q,this.content=U,this.alias=L,this.length=(H||"").length|0}m.stringify=function q(U,L){if(typeof U=="string")return U;if(Array.isArray(U)){var H="";return U.forEach(function(ue){H+=q(ue,L)}),H}var W={type:U.type,content:q(U.content,L),tag:"span",classes:["token",U.type],attributes:{},language:L},V=U.alias;V&&(Array.isArray(V)?Array.prototype.push.apply(W.classes,V):W.classes.push(V)),x.hooks.run("wrap",W);var J="";for(var Y in W.attributes)J+=" "+Y+'="'+(W.attributes[Y]||"").replace(/"/g,"&quot;")+'"';return"<"+W.tag+' class="'+W.classes.join(" ")+'"'+J+">"+W.content+"</"+W.tag+">"};function A(q,U,L,H){q.lastIndex=U;var W=q.exec(L);if(W&&H&&W[1]){var V=W[1].length;W.index+=V,W[0]=W[0].slice(V)}return W}function C(q,U,L,H,W,V){for(var J in L)if(!(!L.hasOwnProperty(J)||!L[J])){var Y=L[J];Y=Array.isArray(Y)?Y:[Y];for(var ue=0;ue<Y.length;++ue){if(V&&V.cause==J+","+ue)return;var de=Y[ue],le=de.inside,Ie=!!de.lookbehind,ze=!!de.greedy,mt=de.alias;if(ze&&!de.pattern.global){var Ke=de.pattern.toString().match(/[imsuy]*$/)[0];de.pattern=RegExp(de.pattern.source,Ke+"g")}for(var ft=de.pattern||de,je=H.next,ut=W;je!==U.tail&&!(V&&ut>=V.reach);ut+=je.value.length,je=je.next){var jt=je.value;if(U.length>q.length)return;if(!(jt instanceof m)){var Rt=1,Ye;if(ze){if(Ye=A(ft,ut,q,Ie),!Ye||Ye.index>=q.length)break;var Ft=Ye.index,Br=Ye.index+Ye[0].length,Wt=ut;for(Wt+=je.value.length;Ft>=Wt;)je=je.next,Wt+=je.value.length;if(Wt-=je.value.length,ut=Wt,je.value instanceof m)continue;for(var Ar=je;Ar!==U.tail&&(Wt<Br||typeof Ar.value=="string");Ar=Ar.next)Rt++,Wt+=Ar.value.length;Rt--,jt=q.slice(ut,Wt),Ye.index-=ut}else if(Ye=A(ft,0,jt,Ie),!Ye)continue;var Ft=Ye.index,br=Ye[0],Hr=jt.slice(0,Ft),Or=jt.slice(Ft+br.length),Rr=ut+jt.length;V&&Rr>V.reach&&(V.reach=Rr);var Dt=je.prev;Hr&&(Dt=S(U,Dt,Hr),ut+=Hr.length),I(U,Dt,Rt);var z=new m(J,le?x.tokenize(br,le):br,mt,br);if(je=S(U,Dt,z),Or&&S(U,je,Or),Rt>1){var Z={cause:J+","+ue,reach:Rr};C(q,U,L,je.prev,ut,Z),V&&Z.reach>V.reach&&(V.reach=Z.reach)}}}}}}function P(){var q={value:null,prev:null,next:null},U={value:null,prev:q,next:null};q.next=U,this.head=q,this.tail=U,this.length=0}function S(q,U,L){var H=U.next,W={value:L,prev:U,next:H};return U.next=W,H.prev=W,q.length++,W}function I(q,U,L){for(var H=U.next,W=0;W<L&&H!==q.tail;W++)H=H.next;U.next=H,H.prev=U,q.length-=W}function G(q){for(var U=[],L=q.head.next;L!==q.tail;)U.push(L.value),L=L.next;return U}if(!n.document)return n.addEventListener&&(x.disableWorkerMessageHandler||n.addEventListener("message",function(q){var U=JSON.parse(q.data),L=U.language,H=U.code,W=U.immediateClose;n.postMessage(x.highlight(H,x.languages[L],L)),W&&n.close()},!1)),x;var ee=x.util.currentScript();ee&&(x.filename=ee.src,ee.hasAttribute("data-manual")&&(x.manual=!0));function re(){x.manual||x.highlightAll()}if(!x.manual){var ge=document.readyState;ge==="loading"||ge==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",re):window.requestAnimationFrame?window.requestAnimationFrame(re):window.setTimeout(re,16)}return x}(r);t.exports&&(t.exports=e),typeof Tt<"u"&&(Tt.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(c,g){var $={};$["language-"+g]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[g]},$.cdata=/^<!\[CDATA\[|\]\]>$/i;var x={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:$}};x["language-"+g]={pattern:/[\s\S]+/,inside:e.languages[g]};var m={};m[c]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return c}),"i"),lookbehind:!0,greedy:!0,inside:x},e.languages.insertBefore("markup","cdata",m)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(n,c){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[c,"language-"+c],inside:e.languages[c]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(n){var c=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+c.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+c.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+c.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+c.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:c,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var g=n.languages.markup;g&&(g.tag.addInlined("style","css"),g.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",c=function(ee,re){return"✖ Error "+ee+" while fetching file: "+re},g="✖ Error: File does not exist or is empty",$={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},x="data-src-status",m="loading",A="loaded",C="failed",P="pre[data-src]:not(["+x+'="'+A+'"]):not(['+x+'="'+m+'"])';function S(ee,re,ge){var q=new XMLHttpRequest;q.open("GET",ee,!0),q.onreadystatechange=function(){q.readyState==4&&(q.status<400&&q.responseText?re(q.responseText):q.status>=400?ge(c(q.status,q.statusText)):ge(g))},q.send(null)}function I(ee){var re=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(ee||"");if(re){var ge=Number(re[1]),q=re[2],U=re[3];return q?U?[ge,Number(U)]:[ge,void 0]:[ge,ge]}}e.hooks.add("before-highlightall",function(ee){ee.selector+=", "+P}),e.hooks.add("before-sanity-check",function(ee){var re=ee.element;if(re.matches(P)){ee.code="",re.setAttribute(x,m);var ge=re.appendChild(document.createElement("CODE"));ge.textContent=n;var q=re.getAttribute("data-src"),U=ee.language;if(U==="none"){var L=(/\.(\w+)$/.exec(q)||[,"none"])[1];U=$[L]||L}e.util.setLanguage(ge,U),e.util.setLanguage(re,U);var H=e.plugins.autoloader;H&&H.loadLanguages(U),S(q,function(W){re.setAttribute(x,A);var V=I(re.getAttribute("data-range"));if(V){var J=W.split(/\r\n?|\n/g),Y=V[0],ue=V[1]==null?J.length:V[1];Y<0&&(Y+=J.length),Y=Math.max(0,Math.min(Y-1,J.length)),ue<0&&(ue+=J.length),ue=Math.max(0,Math.min(ue,J.length)),W=J.slice(Y,ue).join(`
`),re.hasAttribute("data-start")||re.setAttribute("data-start",String(Y+1))}ge.textContent=W,e.highlightElement(ge)},function(W){re.setAttribute(x,C),ge.textContent=W})}}),e.plugins.fileHighlight={highlight:function(re){for(var ge=(re||document).querySelectorAll(P),q=0,U;U=ge[q++];)e.highlightElement(U)}};var G=!1;e.fileHighlight=function(){G||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),G=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(Ym);var ud={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(n){var c=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,g=0,$={},x={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function q(U){return U instanceof m?new m(U.type,q(U.content),U.alias):Array.isArray(U)?U.map(q):U.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(q){return Object.prototype.toString.call(q).slice(8,-1)},objId:function(q){return q.__id||Object.defineProperty(q,"__id",{value:++g}),q.__id},clone:function q(U,L){L=L||{};var H,W;switch(x.util.type(U)){case"Object":if(W=x.util.objId(U),L[W])return L[W];H={},L[W]=H;for(var V in U)U.hasOwnProperty(V)&&(H[V]=q(U[V],L));return H;case"Array":return W=x.util.objId(U),L[W]?L[W]:(H=[],L[W]=H,U.forEach(function(J,Y){H[Y]=q(J,L)}),H);default:return U}},getLanguage:function(q){for(;q;){var U=c.exec(q.className);if(U)return U[1].toLowerCase();q=q.parentElement}return"none"},setLanguage:function(q,U){q.className=q.className.replace(RegExp(c,"gi"),""),q.classList.add("language-"+U)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(H){var q=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(H.stack)||[])[1];if(q){var U=document.getElementsByTagName("script");for(var L in U)if(U[L].src==q)return U[L]}return null}},isActive:function(q,U,L){for(var H="no-"+U;q;){var W=q.classList;if(W.contains(U))return!0;if(W.contains(H))return!1;q=q.parentElement}return!!L}},languages:{plain:$,plaintext:$,text:$,txt:$,extend:function(q,U){var L=x.util.clone(x.languages[q]);for(var H in U)L[H]=U[H];return L},insertBefore:function(q,U,L,H){H=H||x.languages;var W=H[q],V={};for(var J in W)if(W.hasOwnProperty(J)){if(J==U)for(var Y in L)L.hasOwnProperty(Y)&&(V[Y]=L[Y]);L.hasOwnProperty(J)||(V[J]=W[J])}var ue=H[q];return H[q]=V,x.languages.DFS(x.languages,function(de,le){le===ue&&de!=q&&(this[de]=V)}),V},DFS:function q(U,L,H,W){W=W||{};var V=x.util.objId;for(var J in U)if(U.hasOwnProperty(J)){L.call(U,J,U[J],H||J);var Y=U[J],ue=x.util.type(Y);ue==="Object"&&!W[V(Y)]?(W[V(Y)]=!0,q(Y,L,null,W)):ue==="Array"&&!W[V(Y)]&&(W[V(Y)]=!0,q(Y,L,J,W))}}},plugins:{},highlightAll:function(q,U){x.highlightAllUnder(document,q,U)},highlightAllUnder:function(q,U,L){var H={callback:L,container:q,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};x.hooks.run("before-highlightall",H),H.elements=Array.prototype.slice.apply(H.container.querySelectorAll(H.selector)),x.hooks.run("before-all-elements-highlight",H);for(var W=0,V;V=H.elements[W++];)x.highlightElement(V,U===!0,H.callback)},highlightElement:function(q,U,L){var H=x.util.getLanguage(q),W=x.languages[H];x.util.setLanguage(q,H);var V=q.parentElement;V&&V.nodeName.toLowerCase()==="pre"&&x.util.setLanguage(V,H);var J=q.textContent,Y={element:q,language:H,grammar:W,code:J};function ue(le){Y.highlightedCode=le,x.hooks.run("before-insert",Y),Y.element.innerHTML=Y.highlightedCode,x.hooks.run("after-highlight",Y),x.hooks.run("complete",Y),L&&L.call(Y.element)}if(x.hooks.run("before-sanity-check",Y),V=Y.element.parentElement,V&&V.nodeName.toLowerCase()==="pre"&&!V.hasAttribute("tabindex")&&V.setAttribute("tabindex","0"),!Y.code){x.hooks.run("complete",Y),L&&L.call(Y.element);return}if(x.hooks.run("before-highlight",Y),!Y.grammar){ue(x.util.encode(Y.code));return}if(U&&n.Worker){var de=new Worker(x.filename);de.onmessage=function(le){ue(le.data)},de.postMessage(JSON.stringify({language:Y.language,code:Y.code,immediateClose:!0}))}else ue(x.highlight(Y.code,Y.grammar,Y.language))},highlight:function(q,U,L){var H={code:q,grammar:U,language:L};if(x.hooks.run("before-tokenize",H),!H.grammar)throw new Error('The language "'+H.language+'" has no grammar.');return H.tokens=x.tokenize(H.code,H.grammar),x.hooks.run("after-tokenize",H),m.stringify(x.util.encode(H.tokens),H.language)},tokenize:function(q,U){var L=U.rest;if(L){for(var H in L)U[H]=L[H];delete U.rest}var W=new P;return S(W,W.head,q),C(q,W,U,W.head,0),G(W)},hooks:{all:{},add:function(q,U){var L=x.hooks.all;L[q]=L[q]||[],L[q].push(U)},run:function(q,U){var L=x.hooks.all[q];if(!(!L||!L.length))for(var H=0,W;W=L[H++];)W(U)}},Token:m};n.Prism=x;function m(q,U,L,H){this.type=q,this.content=U,this.alias=L,this.length=(H||"").length|0}m.stringify=function q(U,L){if(typeof U=="string")return U;if(Array.isArray(U)){var H="";return U.forEach(function(ue){H+=q(ue,L)}),H}var W={type:U.type,content:q(U.content,L),tag:"span",classes:["token",U.type],attributes:{},language:L},V=U.alias;V&&(Array.isArray(V)?Array.prototype.push.apply(W.classes,V):W.classes.push(V)),x.hooks.run("wrap",W);var J="";for(var Y in W.attributes)J+=" "+Y+'="'+(W.attributes[Y]||"").replace(/"/g,"&quot;")+'"';return"<"+W.tag+' class="'+W.classes.join(" ")+'"'+J+">"+W.content+"</"+W.tag+">"};function A(q,U,L,H){q.lastIndex=U;var W=q.exec(L);if(W&&H&&W[1]){var V=W[1].length;W.index+=V,W[0]=W[0].slice(V)}return W}function C(q,U,L,H,W,V){for(var J in L)if(!(!L.hasOwnProperty(J)||!L[J])){var Y=L[J];Y=Array.isArray(Y)?Y:[Y];for(var ue=0;ue<Y.length;++ue){if(V&&V.cause==J+","+ue)return;var de=Y[ue],le=de.inside,Ie=!!de.lookbehind,ze=!!de.greedy,mt=de.alias;if(ze&&!de.pattern.global){var Ke=de.pattern.toString().match(/[imsuy]*$/)[0];de.pattern=RegExp(de.pattern.source,Ke+"g")}for(var ft=de.pattern||de,je=H.next,ut=W;je!==U.tail&&!(V&&ut>=V.reach);ut+=je.value.length,je=je.next){var jt=je.value;if(U.length>q.length)return;if(!(jt instanceof m)){var Rt=1,Ye;if(ze){if(Ye=A(ft,ut,q,Ie),!Ye||Ye.index>=q.length)break;var Ft=Ye.index,Br=Ye.index+Ye[0].length,Wt=ut;for(Wt+=je.value.length;Ft>=Wt;)je=je.next,Wt+=je.value.length;if(Wt-=je.value.length,ut=Wt,je.value instanceof m)continue;for(var Ar=je;Ar!==U.tail&&(Wt<Br||typeof Ar.value=="string");Ar=Ar.next)Rt++,Wt+=Ar.value.length;Rt--,jt=q.slice(ut,Wt),Ye.index-=ut}else if(Ye=A(ft,0,jt,Ie),!Ye)continue;var Ft=Ye.index,br=Ye[0],Hr=jt.slice(0,Ft),Or=jt.slice(Ft+br.length),Rr=ut+jt.length;V&&Rr>V.reach&&(V.reach=Rr);var Dt=je.prev;Hr&&(Dt=S(U,Dt,Hr),ut+=Hr.length),I(U,Dt,Rt);var z=new m(J,le?x.tokenize(br,le):br,mt,br);if(je=S(U,Dt,z),Or&&S(U,je,Or),Rt>1){var Z={cause:J+","+ue,reach:Rr};C(q,U,L,je.prev,ut,Z),V&&Z.reach>V.reach&&(V.reach=Z.reach)}}}}}}function P(){var q={value:null,prev:null,next:null},U={value:null,prev:q,next:null};q.next=U,this.head=q,this.tail=U,this.length=0}function S(q,U,L){var H=U.next,W={value:L,prev:U,next:H};return U.next=W,H.prev=W,q.length++,W}function I(q,U,L){for(var H=U.next,W=0;W<L&&H!==q.tail;W++)H=H.next;U.next=H,H.prev=U,q.length-=W}function G(q){for(var U=[],L=q.head.next;L!==q.tail;)U.push(L.value),L=L.next;return U}if(!n.document)return n.addEventListener&&(x.disableWorkerMessageHandler||n.addEventListener("message",function(q){var U=JSON.parse(q.data),L=U.language,H=U.code,W=U.immediateClose;n.postMessage(x.highlight(H,x.languages[L],L)),W&&n.close()},!1)),x;var ee=x.util.currentScript();ee&&(x.filename=ee.src,ee.hasAttribute("data-manual")&&(x.manual=!0));function re(){x.manual||x.highlightAll()}if(!x.manual){var ge=document.readyState;ge==="loading"||ge==="interactive"&&ee&&ee.defer?document.addEventListener("DOMContentLoaded",re):window.requestAnimationFrame?window.requestAnimationFrame(re):window.setTimeout(re,16)}return x}(r);t.exports&&(t.exports=e),typeof Tt<"u"&&(Tt.Prism=e)})(ud);var Fv=ud.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const ex={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},tx="_container_zhbxc_2",rx="_header_zhbxc_9",sx="_main_zhbxc_14",nx="_footer_zhbxc_19",ax={container:tx,header:rx,main:sx,footer:nx};function ix(t,r,e,n,c,g){return wt(),Ut("div",{class:Tr(t.$style.container)},[g.hasHeader?(wt(),Ut("header",{key:0,class:Tr(t.$style.header)},[Of(t.$slots,"header")],2)):Xn("",!0),Mt("main",{class:Tr(t.$style.main)},[Of(t.$slots,"default")],2),g.hasFooter?(wt(),Ut("footer",{key:1,class:Tr(t.$style.footer)},[Of(t.$slots,"footer")],2)):Xn("",!0)],2)}const lx={$style:ax},Fr=ai(ex,[["render",ix],["__cssModules",lx]]),ox=si({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,n=r,c=wr(e.modelValue);ri(c,()=>{n("update:modelValue",c.value)},{immediate:!0});function g(x){c.value=e.samples[x]}const $=x=>Fv.highlight(x,Fv.languages.js,"javascript");return(x,m)=>(wt(),wi(Fr,null,{header:ot(()=>[It(" Input "),e.samples?(wt(),Ut("div",{key:0,class:Tr(x.$style.actions)},[nt(Zg,{options:Object.keys(e.samples),onSelect:g},{default:ot(()=>[It("Samples")]),_:1},8,["options"])],2)):Xn("",!0)]),footer:ot(()=>[e.parseError?(wt(),Ut("span",{key:0,class:Tr(x.$style.parseError)},Dr(e.parseError),3)):Xn("",!0),Mt("div",{class:Tr(x.$style.actions)},[Mt("button",{onClick:m[1]||(m[1]=A=>n("run"))},"RUN")],2)]),default:ot(()=>[nt(Mi(Qm),{class:Tr(x.$style.code),modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=A=>c.value=A),highlight:$,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),ux="_code_af8rl_2",fx="_parseError_af8rl_6",cx="_actions_af8rl_9",hx={code:ux,parseError:fx,actions:cx},px={$style:hx},yf=ai(ox,[["__cssModules",px]]),vx=t=>(vf("data-v-e967291d"),t=t(),gf(),t),gx={id:"root"},dx={id:"grid1"},yx={class:"type"},wx={id:"grid2"},mx=vx(()=>Mt("header",null,null,-1)),xx=si({__name:"index",setup(t){const r=wr(window.localStorage.getItem(Cv)??'<: "Hello, AiScript!"'),e=wr(null),n=wr([]),c=wr(null);ri(r,()=>{window.localStorage.setItem(Cv,r.value);try{e.value=Um.parse(r.value),c.value=null}catch(x){const m=x;c.value=m.message,console.error("info"in m?m.info:m);return}},{immediate:!0});let g=null;const $=async()=>{n.value=[],g==null||g.abort(),g=new ts({},{in:x=>new Promise(m=>{const A=window.prompt(x);m(A??"")}),out:x=>{n.value.push({id:Math.random(),type:x.type,text:ph(x,!0),print:!0})},err:x=>{window.alert(x.toString())},log:(x,m)=>{switch(x){case"end":n.value.push({id:Math.random(),text:ph(m.val,!0),print:!1});break}}});try{await g.exec(e.value)}catch(x){console.error(x),window.alert("Internal Error: "+x)}};return(x,m)=>(wt(),Ut("div",gx,[Mt("div",dx,[nt(yf,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=A=>r.value=A),samples:Mi(qm),parseError:c.value,onRun:$},null,8,["modelValue","samples","parseError"]),nt(Fr,{id:"logs"},{header:ot(()=>[It("Output")]),default:ot(()=>[(wt(!0),Ut(Ir,null,fu(n.value,A=>(wt(),Ut("div",{class:Tr(["log",[{print:A.print},A.type]]),key:A.id},[Mt("span",yx,Dr(A.type),1),It(" "+Dr(A.text),1)],2))),128))]),_:1})]),Mt("div",wx,[nt(Fr,{id:"ast"},{header:ot(()=>[It("AST")]),default:ot(()=>[Mt("pre",null,Dr(JSON.stringify(e.value,null,"	")),1)]),_:1}),nt(Fr,{id:"bin"},{header:ot(()=>[It("Bytecode")]),default:ot(()=>[mx]),_:1}),nt(Fr,{id:"debugger"},{header:ot(()=>[It("Debugger")]),_:1})])]))}});const $x=ai(xx,[["__scopeId","data-v-e967291d"]]);function xr(t,r,e){let n=e.value;return{configurable:!0,get(){const c=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:c}),c},set(c){n=c}}}let xc=class fd extends Error{constructor(e,n){super(e);be(this,"name","AiScript");be(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,fd)}},bx=class extends xc{constructor(e){super(e.message??`${e}`,e);be(this,"name","Internal")}},hu=class extends xc{constructor(e,n){super(e,n);be(this,"name","Syntax")}},tr=class extends xc{constructor(e,n){super(e,n);be(this,"name","Runtime")}},Ax=class extends tr{constructor(r,e){super(r,e)}};var Fi=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};let li=class cd{constructor(r=[],e,n){be(this,"parent");be(this,"layerdStates");be(this,"name");be(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new cd(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new tr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const c of this.layerdStates){if(c.has(r)){const g=c.get(r);if(!g.isMutable)throw new tr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new tr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Fi([xr],li.prototype,"log",null);Fi([xr],li.prototype,"onUpdated",null);Fi([xr],li.prototype,"createChildScope",null);Fi([xr],li.prototype,"get",null);Fi([xr],li.prototype,"exists",null);Fi([xr],li.prototype,"getAll",null);Fi([xr],li.prototype,"add",null);Fi([xr],li.prototype,"assign",null);let Pf;const _x=new Uint8Array(16);function Cx(){if(!Pf&&(Pf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Pf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Pf(_x)}const Gr=[];for(let t=0;t<256;++t)Gr.push((t+256).toString(16).slice(1));function kx(t,r=0){return Gr[t[r+0]]+Gr[t[r+1]]+Gr[t[r+2]]+Gr[t[r+3]]+"-"+Gr[t[r+4]]+Gr[t[r+5]]+"-"+Gr[t[r+6]]+Gr[t[r+7]]+"-"+Gr[t[r+8]]+Gr[t[r+9]]+"-"+Gr[t[r+10]]+Gr[t[r+11]]+Gr[t[r+12]]+Gr[t[r+13]]+Gr[t[r+14]]+Gr[t[r+15]]}const Px=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ov={randomUUID:Px};function Ex(t,r,e){if(Ov.randomUUID&&!r&&!t)return Ov.randomUUID();t=t||{};const n=t.random||(t.rng||Cx)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let c=0;c<16;++c)r[e+c]=n[c];return r}return kx(n)}var pp={exports:{}};pp.exports;(function(t){(function(r,e,n){function c(m){var A=this,C=x();A.next=function(){var P=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=P-(A.c=P|0)},A.c=1,A.s0=C(" "),A.s1=C(" "),A.s2=C(" "),A.s0-=C(m),A.s0<0&&(A.s0+=1),A.s1-=C(m),A.s1<0&&(A.s1+=1),A.s2-=C(m),A.s2<0&&(A.s2+=1),C=null}function g(m,A){return A.c=m.c,A.s0=m.s0,A.s1=m.s1,A.s2=m.s2,A}function $(m,A){var C=new c(m),P=A&&A.state,S=C.next;return S.int32=function(){return C.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,P&&(typeof P=="object"&&g(P,C),S.state=function(){return g(C,{})}),S}function x(){var m=4022871197,A=function(C){C=String(C);for(var P=0;P<C.length;P++){m+=C.charCodeAt(P);var S=.02519603282416938*m;m=S>>>0,S-=m,S*=m,m=S>>>0,S-=m,m+=S*4294967296}return(m>>>0)*23283064365386963e-26};return A}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.alea=$})(Tt,t,!1)})(pp);var Mx=pp.exports,vp={exports:{}};vp.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var P=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^P^P>>>8},x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor128=$})(Tt,t,!1)})(vp);var Sx=vp.exports,gp={exports:{}};gp.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(P^P<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,C==A.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m.v=x.v,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorwow=$})(Tt,t,!1)})(gp);var Fx=gp.exports,dp={exports:{}};dp.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.x,P=m.i,S,I;return S=C[P],S^=S>>>7,I=S^S<<24,S=C[P+1&7],I^=S^S>>>10,S=C[P+3&7],I^=S^S>>>3,S=C[P+4&7],I^=S^S<<7,S=C[P+7&7],S=S^S<<13,I^=S^S<<9,C[P]=I,m.i=P+1&7,I};function A(C,P){var S,I=[];if(P===(P|0))I[0]=P;else for(P=""+P,S=0;S<P.length;++S)I[S&7]=I[S&7]<<15^P.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],C.x=I,C.i=0,S=256;S>0;--S)C.next()}A(m,x)}function g(x,m){return m.x=x.x.slice(),m.i=x.i,m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.x&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorshift7=$})(Tt,t,!1)})(dp);var Ox=dp.exports,yp={exports:{}};yp.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.w,P=m.X,S=m.i,I,G;return m.w=C=C+1640531527|0,G=P[S+34&127],I=P[S=S+1&127],G^=G<<13,I^=I<<17,G^=G>>>15,I^=I>>>12,G=P[S]=G^I,m.i=S,G+(C^C>>>16)|0};function A(C,P){var S,I,G,ee,re,ge=[],q=128;for(P===(P|0)?(I=P,P=null):(P=P+"\0",I=0,q=Math.max(q,P.length)),G=0,ee=-32;ee<q;++ee)P&&(I^=P.charCodeAt((ee+32)%P.length)),ee===0&&(re=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,ee>=0&&(re=re+1640531527|0,S=ge[ee&127]^=I+re,G=S==0?G+1:0);for(G>=128&&(ge[(P&&P.length||0)&127]=-1),G=127,ee=4*128;ee>0;--ee)I=ge[G+34&127],S=ge[G=G+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,ge[G]=I^S;C.w=re,C.X=ge,C.i=G}A(m,x)}function g(x,m){return m.i=x.i,m.w=x.w,m.X=x.X.slice(),m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.X&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor4096=$})(Tt,t,!1)})(yp);var Nx=yp.exports,wp={exports:{}};wp.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.b,S=m.c,I=m.d,G=m.a;return P=P<<25^P>>>7^S,S=S-I|0,I=I<<24^I>>>8^G,G=G-P|0,m.b=P=P<<20^P>>>12^S,m.c=S=S-I|0,m.d=I<<16^S>>>16^G,m.a=G-P|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,x===Math.floor(x)?(m.a=x/4294967296|0,m.b=x|0):A+=x;for(var C=0;C<A.length+20;C++)m.b^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.a=x.a,m.b=x.b,m.c=x.c,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.tychei=$})(Tt,t,!1)})(wp);var Ix=wp.exports,hd={exports:{}};(function(t){(function(r,e,n){var c=256,g=6,$=52,x="random",m=n.pow(c,g),A=n.pow(2,$),C=A*2,P=c-1,S;function I(L,H,W){var V=[];H=H==!0?{entropy:!0}:H||{};var J=ge(re(H.entropy?[L,U(e)]:L??q(),3),V),Y=new G(V),ue=function(){for(var de=Y.g(g),le=m,Ie=0;de<A;)de=(de+Ie)*c,le*=c,Ie=Y.g(1);for(;de>=C;)de/=2,le/=2,Ie>>>=1;return(de+Ie)/le};return ue.int32=function(){return Y.g(4)|0},ue.quick=function(){return Y.g(4)/4294967296},ue.double=ue,ge(U(Y.S),e),(H.pass||W||function(de,le,Ie,ze){return ze&&(ze.S&&ee(ze,Y),de.state=function(){return ee(Y,{})}),Ie?(n[x]=de,le):de})(ue,J,"global"in H?H.global:this==n,H.state)}function G(L){var H,W=L.length,V=this,J=0,Y=V.i=V.j=0,ue=V.S=[];for(W||(L=[W++]);J<c;)ue[J]=J++;for(J=0;J<c;J++)ue[J]=ue[Y=P&Y+L[J%W]+(H=ue[J])],ue[Y]=H;(V.g=function(de){for(var le,Ie=0,ze=V.i,mt=V.j,Ke=V.S;de--;)le=Ke[ze=P&ze+1],Ie=Ie*c+Ke[P&(Ke[ze]=Ke[mt=P&mt+le])+(Ke[mt]=le)];return V.i=ze,V.j=mt,Ie})(c)}function ee(L,H){return H.i=L.i,H.j=L.j,H.S=L.S.slice(),H}function re(L,H){var W=[],V=typeof L,J;if(H&&V=="object")for(J in L)try{W.push(re(L[J],H-1))}catch{}return W.length?W:V=="string"?L:L+"\0"}function ge(L,H){for(var W=L+"",V,J=0;J<W.length;)H[P&J]=P&(V^=H[P&J]*19)+W.charCodeAt(J++);return U(H)}function q(){try{var L;return S&&(L=S.randomBytes)?L=L(c):(L=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(L)),U(L)}catch{var H=r.navigator,W=H&&H.plugins;return[+new Date,r,W,r.screen,U(e)]}}function U(L){return String.fromCharCode.apply(0,L)}if(ge(n.random(),e),t.exports){t.exports=I;try{S=fp}catch{}}else n["seed"+x]=I})(typeof self<"u"?self:Tt,[],Math)})(hd);var Tx=hd.exports,jx=Mx,Rx=Sx,Dx=Fx,Lx=Ox,Bx=Nx,Hx=Ix,wu=Tx;wu.alea=jx;wu.xor128=Rx;wu.xorwow=Dx;wu.xorshift7=Lx;wu.xor4096=Bx;wu.tychei=Hx;var Ux=wu;const qx=sp(Ux),Pt={type:"null"},vn={type:"bool",value:!0},en={type:"bool",value:!1},Se=t=>({type:"num",value:t}),Qt=t=>({type:"str",value:t}),su=t=>({type:"bool",value:t}),sc=t=>({type:"obj",value:t}),ns=t=>({type:"arr",value:t}),zx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ce=t=>({type:"fn",native:t}),Vx=t=>({type:"return",value:t}),Wx=()=>({type:"break",value:null}),Kx=()=>({type:"continue",value:null}),Jx=t=>t.type==="return"?t.value:t,yh=(t,r)=>({type:"error",value:t,info:r});function an(t){if(t==null)throw new tr("Expect anything, but got nothing.")}function bs(t){if(t==null)throw new tr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new tr(`Expect boolean, but got ${t.type}.`)}function xi(t){if(t==null)throw new tr("Expect function, but got nothing.");if(t.type!=="fn")throw new tr(`Expect function, but got ${t.type}.`)}function Sr(t){if(t==null)throw new tr("Expect string, but got nothing.");if(t.type!=="str")throw new tr(`Expect string, but got ${t.type}.`)}function Ce(t){if(t==null)throw new tr("Expect number, but got nothing.");if(t.type!=="num")throw new tr(`Expect number, but got ${t.type}.`)}function Wn(t){if(t==null)throw new tr("Expect object, but got nothing.");if(t.type!=="obj")throw new tr(`Expect object, but got ${t.type}.`)}function nc(t){if(t==null)throw new tr("Expect array, but got nothing.");if(t.type!=="arr")throw new tr(`Expect array, but got ${t.type}.`)}function Rc(t){return t.type==="obj"}function Nv(t){return t.type==="arr"}function wh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function mh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>mh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function xh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>xh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=xh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function $h(t){if(t===null)return Pt;if(typeof t=="boolean")return su(t);if(typeof t=="string")return Qt(t);if(typeof t=="number")return Se(t);if(Array.isArray(t))return ns(t.map(r=>$h(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,$h(n));return sc(r)}return Pt}function ju(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const c of t.value)n.push(ju(c,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[c,g]of t.value)n.push(`${c}: ${ju(g,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const Xx={help:Qt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Qt("0.16.0"),"Core:ai":Qt("kawaii"),"Core:not":ce(([t])=>(bs(t),t.value?en:vn)),"Core:eq":ce(([t,r])=>(an(t),an(r),wh(t,r)?vn:en)),"Core:neq":ce(([t,r])=>(an(t),an(r),wh(t,r)?en:vn)),"Core:and":ce(([t,r])=>(bs(t),t.value?(bs(r),r.value?vn:en):en)),"Core:or":ce(([t,r])=>(bs(t),t.value?vn:(bs(r),r.value?vn:en))),"Core:add":ce(([t,r])=>(Ce(t),Ce(r),Se(t.value+r.value))),"Core:sub":ce(([t,r])=>(Ce(t),Ce(r),Se(t.value-r.value))),"Core:mul":ce(([t,r])=>(Ce(t),Ce(r),Se(t.value*r.value))),"Core:pow":ce(([t,r])=>{Ce(t),Ce(r);const e=t.value**r.value;if(isNaN(e))throw new tr("Invalid operation.");return Se(e)}),"Core:div":ce(([t,r])=>{Ce(t),Ce(r);const e=t.value/r.value;if(isNaN(e))throw new tr("Invalid operation.");return Se(e)}),"Core:mod":ce(([t,r])=>(Ce(t),Ce(r),Se(t.value%r.value))),"Core:gt":ce(([t,r])=>(Ce(t),Ce(r),t.value>r.value?vn:en)),"Core:lt":ce(([t,r])=>(Ce(t),Ce(r),t.value<r.value?vn:en)),"Core:gteq":ce(([t,r])=>(Ce(t),Ce(r),t.value>=r.value?vn:en)),"Core:lteq":ce(([t,r])=>(Ce(t),Ce(r),t.value<=r.value?vn:en)),"Core:type":ce(([t])=>(an(t),Qt(t.type))),"Core:to_str":ce(([t])=>(an(t),Qt(ju(t)))),"Core:range":ce(([t,r])=>(Ce(t),Ce(r),t.value<r.value?ns(Array.from({length:r.value-t.value+1},(e,n)=>Se(n+t.value))):t.value>r.value?ns(Array.from({length:t.value-r.value+1},(e,n)=>Se(t.value-n))):ns([t]))),"Core:sleep":ce(async([t])=>(Ce(t),await new Promise(r=>setTimeout(r,t.value)),Pt)),"Util:uuid":ce(()=>Qt(Ex())),"Json:stringify":ce(([t])=>(an(t),Qt(JSON.stringify(xh(t))))),"Json:parse":ce(([t])=>{Sr(t);try{return $h(JSON.parse(t.value))}catch{return yh("not_json")}}),"Json:parsable":ce(([t])=>{Sr(t);try{JSON.parse(t.value)}catch{return su(!1)}return su(!0)}),"Date:now":ce(()=>Se(Date.now())),"Date:year":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ce(([t])=>(t&&Ce(t),Se(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ce(([t])=>(Sr(t),Se(new Date(t.value).getTime()))),"Math:Infinity":Se(1/0),"Math:E":Se(Math.E),"Math:LN2":Se(Math.LN2),"Math:LN10":Se(Math.LN10),"Math:LOG2E":Se(Math.LOG2E),"Math:LOG10E":Se(Math.LOG10E),"Math:PI":Se(Math.PI),"Math:SQRT1_2":Se(Math.SQRT1_2),"Math:SQRT2":Se(Math.SQRT2),"Math:abs":ce(([t])=>(Ce(t),Se(Math.abs(t.value)))),"Math:acos":ce(([t])=>(Ce(t),Se(Math.acos(t.value)))),"Math:acosh":ce(([t])=>(Ce(t),Se(Math.acosh(t.value)))),"Math:asin":ce(([t])=>(Ce(t),Se(Math.asin(t.value)))),"Math:asinh":ce(([t])=>(Ce(t),Se(Math.asinh(t.value)))),"Math:atan":ce(([t])=>(Ce(t),Se(Math.atan(t.value)))),"Math:atanh":ce(([t])=>(Ce(t),Se(Math.atanh(t.value)))),"Math:atan2":ce(([t,r])=>(Ce(t),Ce(r),Se(Math.atan2(t.value,r.value)))),"Math:cbrt":ce(([t])=>(Ce(t),Se(Math.cbrt(t.value)))),"Math:ceil":ce(([t])=>(Ce(t),Se(Math.ceil(t.value)))),"Math:clz32":ce(([t])=>(Ce(t),Se(Math.clz32(t.value)))),"Math:cos":ce(([t])=>(Ce(t),Se(Math.cos(t.value)))),"Math:cosh":ce(([t])=>(Ce(t),Se(Math.cosh(t.value)))),"Math:exp":ce(([t])=>(Ce(t),Se(Math.exp(t.value)))),"Math:expm1":ce(([t])=>(Ce(t),Se(Math.expm1(t.value)))),"Math:floor":ce(([t])=>(Ce(t),Se(Math.floor(t.value)))),"Math:fround":ce(([t])=>(Ce(t),Se(Math.fround(t.value)))),"Math:hypot":ce(([t])=>{nc(t);const r=[];for(const e of t.value)Ce(e),r.push(e.value);return Se(Math.hypot(...r))}),"Math:imul":ce(([t,r])=>(Ce(t),Ce(r),Se(Math.imul(t.value,r.value)))),"Math:log":ce(([t])=>(Ce(t),Se(Math.log(t.value)))),"Math:log1p":ce(([t])=>(Ce(t),Se(Math.log1p(t.value)))),"Math:log10":ce(([t])=>(Ce(t),Se(Math.log10(t.value)))),"Math:log2":ce(([t])=>(Ce(t),Se(Math.log2(t.value)))),"Math:max":ce(([t,r])=>(Ce(t),Ce(r),Se(Math.max(t.value,r.value)))),"Math:min":ce(([t,r])=>(Ce(t),Ce(r),Se(Math.min(t.value,r.value)))),"Math:pow":ce(([t,r])=>(Ce(t),Ce(r),Se(Math.pow(t.value,r.value)))),"Math:round":ce(([t])=>(Ce(t),Se(Math.round(t.value)))),"Math:sign":ce(([t])=>(Ce(t),Se(Math.sign(t.value)))),"Math:sin":ce(([t])=>(Ce(t),Se(Math.sin(t.value)))),"Math:sinh":ce(([t])=>(Ce(t),Se(Math.sinh(t.value)))),"Math:sqrt":ce(([t])=>{Ce(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new tr("Invalid operation.");return Se(r)}),"Math:tan":ce(([t])=>(Ce(t),Se(Math.tan(t.value)))),"Math:tanh":ce(([t])=>(Ce(t),Se(Math.tanh(t.value)))),"Math:trunc":ce(([t])=>(Ce(t),Se(Math.trunc(t.value)))),"Math:rnd":ce(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Se(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Se(Math.random())),"Math:gen_rng":ce(([t])=>{if(an(t),t.type!=="num"&&t.type!=="str")return Pt;const r=qx(t.value.toString());return ce(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Se(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Se(r()))}),"Num:to_hex":ce(([t])=>(Ce(t),Qt(t.value.toString(16)))),"Num:from_hex":ce(([t])=>(Sr(t),Se(parseInt(t.value,16)))),"Str:lf":Qt(`
`),"Str:lt":ce(([t,r])=>(Sr(t),Sr(r),t.value<r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:gt":ce(([t,r])=>(Sr(t),Sr(r),t.value>r.value?Se(-1):t.value===r.value?Se(0):Se(1))),"Str:from_codepoint":ce(([t])=>(Ce(t),Qt(String.fromCodePoint(t.value)))),"Obj:keys":ce(([t])=>(Wn(t),ns(Array.from(t.value.keys()).map(r=>Qt(r))))),"Obj:vals":ce(([t])=>(Wn(t),ns(Array.from(t.value.values())))),"Obj:kvs":ce(([t])=>(Wn(t),ns(Array.from(t.value.entries()).map(([r,e])=>ns([Qt(r),e]))))),"Obj:get":ce(([t,r])=>(Wn(t),Sr(r),t.value.get(r.value)??Pt)),"Obj:set":ce(([t,r,e])=>(Wn(t),Sr(r),an(e),t.value.set(r.value,e),Pt)),"Obj:has":ce(([t,r])=>(Wn(t),Sr(r),su(t.value.has(r.value)))),"Obj:copy":ce(([t])=>(Wn(t),sc(new Map(t.value)))),"Obj:merge":ce(([t,r])=>(Wn(t),Wn(r),sc(new Map([...t.value,...r.value])))),"Error:create":ce(([t,r])=>(Sr(t),yh(t.value,r))),"Async:interval":ce(async([t,r,e],n)=>{Ce(t),xi(r),e&&(bs(e),e.value&&n.call(r,[]));const c=setInterval(()=>{n.topCall(r,[])},t.value),g=()=>{clearInterval(c)};return n.registerAbortHandler(g),ce(([],$)=>{clearInterval(c),$.unregisterAbortHandler(g)})}),"Async:timeout":ce(async([t,r],e)=>{Ce(t),xi(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),c=()=>{clearTimeout(n)};return e.registerAbortHandler(c),ce(([],g)=>{clearTimeout(n),g.unregisterAbortHandler(c)})})};var mu={},Gx=()=>{const t="\\ud800-\\udfff",r="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",c="\\u1ab0-\\u1aff",g="\\u1dc0-\\u1dff",$=r+e+n+c+g,x="\\ufe0e\\ufe0f",m="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",A=`[${t}]`,C=`[${$}]`,P="\\ud83c[\\udffb-\\udfff]",S=`(?:${C}|${P})`,I=`[^${t}]`,G="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",re="\\u200d",ge="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",q=`[${m}]`,U=`${S}?`,L=`[${x}]?`,H=`(?:${re}(?:${[I,G,ee].join("|")})${L+U})*`,W=L+U+H,J=`(?:${[`${I}${C}?`,C,G,ee,A,q].join("|")})`;return new RegExp(`${ge}|${P}(?=${P})|${J+W}`,"g")},Zx=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mu,"__esModule",{value:!0});var $c=Zx(Gx);function bh(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match($c.default())||[]}var Iv=mu.toArray=bh;function mp(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match($c.default());return r===null?0:r.length}var Qx=mu.length=mp;function pd(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match($c.default());return n?n.slice(r,e).join(""):""}var Yx=mu.substring=pd;function e$(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=mp(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var c;typeof e>"u"?c=n:(typeof e!="number"&&(e=parseInt(e,10)),c=e>=0?e+r:r);var g=t.match($c.default());return g?g.slice(r,c).join(""):""}mu.substr=e$;function t$(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var c=mp(t);if(c>r)return pd(t,0,r);if(c<r){var g=e.repeat(r-c);return n==="left"?g+t:t+g}return t}mu.limit=t$;function r$(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=bh(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var c=bh(r),g=!1,$;for($=e;$<n.length;$+=1){for(var x=0;x<c.length&&c[x]===n[$+x];)x+=1;if(x===c.length&&c[x-1]===n[$+x-1]){g=!0;break}}return g?$:-1}var s$=mu.indexOf=r$;const Tv={num:{to_str:t=>ce(async(r,e)=>Qt(t.value.toString()))},str:{to_num:t=>ce(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Pt:Se(n)}),len:t=>Se(Qx(t.value)),replace:t=>ce(async([r,e],n)=>(Sr(r),Sr(e),Qt(t.value.split(r.value).join(e.value)))),index_of:t=>ce(async([r],e)=>(Sr(r),Se(s$(t.value,r.value)))),incl:t=>ce(async([r],e)=>(Sr(r),t.value.includes(r.value)?vn:en)),trim:t=>ce(async(r,e)=>Qt(t.value.trim())),upper:t=>ce(async(r,e)=>Qt(t.value.toUpperCase())),lower:t=>ce(async(r,e)=>Qt(t.value.toLowerCase())),split:t=>ce(async([r],e)=>(r&&Sr(r),ns(r?t.value.split(r?r.value:"").map(n=>Qt(n)):Iv(t.value).map(n=>Qt(n))))),slice:t=>ce(async([r,e],n)=>(Ce(r),Ce(e),Qt(Yx(t.value,r.value,e.value)))),pick:t=>ce(async([r],e)=>{Ce(r);const c=Iv(t.value)[r.value];return c?Qt(c):Pt}),codepoint_at:t=>ce(([r],e)=>{Ce(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Pt:Se(n)})},arr:{len:t=>Se(t.value.length),push:t=>ce(async([r],e)=>(an(r),t.value.push(r),t)),unshift:t=>ce(async([r],e)=>(an(r),t.value.unshift(r),t)),pop:t=>ce(async(r,e)=>t.value.pop()??Pt),shift:t=>ce(async(r,e)=>t.value.shift()??Pt),concat:t=>ce(async([r],e)=>(nc(r),ns(t.value.concat(r.value)))),slice:t=>ce(async([r,e],n)=>(Ce(r),Ce(e),ns(t.value.slice(r.value,e.value)))),join:t=>ce(async([r],e)=>(r&&Sr(r),Qt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>ce(async([r],e)=>{xi(r);const n=t.value.map(async(c,g)=>await e.call(r,[c,Se(g)]));return ns(await Promise.all(n))}),filter:t=>ce(async([r],e)=>{xi(r);const n=[];for(let c=0;c<t.value.length;c++){const g=t.value[c],$=await e.call(r,[g,Se(c)]);bs($),$.value&&n.push(g)}return ns(n)}),reduce:t=>ce(async([r,e],n)=>{xi(r);const c=e!=null;let g=c?e:t.value[0];for(let $=c?0:1;$<t.value.length;$++){const x=t.value[$];g=await n.call(r,[g,x,Se($)])}return g}),find:t=>ce(async([r],e)=>{xi(r);for(let n=0;n<t.value.length;n++){const c=t.value[n],g=await e.call(r,[c,Se(n)]);if(bs(g),g.value)return c}return Pt}),incl:t=>ce(async([r],e)=>(an(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?en:(c=>c.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?vn:en)),reverse:t=>ce(async(r,e)=>(t.value.reverse(),Pt)),copy:t=>ce(async(r,e)=>ns([...t.value])),sort:t=>ce(async([r],e)=>{const n=async(g,$)=>{if(g.length<=1)return g;const x=Math.floor(g.length/2),m=await n(g.slice(0,x),$),A=await n(g.slice(x),$);return c(m,A,$)},c=async(g,$,x)=>{const m=[];let A=0,C=0;for(;A<g.length&&C<$.length;){const P=g[A],S=$[C],I=await e.call(x,[P,S]);Ce(I),I.value<0?(m.push(g[A]),A++):(m.push($[C]),C++)}return m.concat(g.slice(A)).concat($.slice(C))};return xi(r),nc(t),t.value=await n(t.value,r),t})},error:{name:t=>Qt(t.value),info:t=>t.info??Pt}};function n$(t,r){if(Object.hasOwn(Tv,t.type)){const e=Tv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new tr(`No such prop (${r}) in ${t.type}.`)}else throw new tr(`Cannot read prop of ${t.type}. (reading ${r})`)}const a$={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ps=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};const vd=300,i$=vd-1;let cs=class{constructor(r,e={}){be(this,"opts");be(this,"stepCount",0);be(this,"stop",!1);be(this,"scope");be(this,"abortHandlers",[]);be(this,"vars",{});this.opts=e;const n={print:ce(([c])=>{an(c),this.opts.out&&this.opts.out(c)}),readline:ce(async c=>{const g=c[0];if(Sr(g),this.opts.in==null)return Pt;const $=await this.opts.in(g.value);return Qt($)})};this.vars=Object.fromEntries(Object.entries({...r,...Xx,...n}).map(([c,g])=>[c,a$.const(g)])),this.scope=new li([new Map(Object.entries(this.vars))]),this.scope.opts.log=(c,g)=>{switch(c){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),yh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(c){switch(c.type){case"arr":return c.value.map(g=>e(g));case"bool":return c.value;case"null":return null;case"num":return c.value;case"obj":{const g={};for(const[$,x]of c.value.entries())g[$]=e(x);return g}case"str":return c.value;default:return}}const n=new Map;for(const c of r)switch(c.type){case"meta":{n.set(c.name,e(c.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof xc?this.opts.err(r):this.opts.err(new bx(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const c={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,c),this.scope.add(r.name+":"+n.name,c);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Pt;{const n=new Map;for(let g=0;g<(r.args??[]).length;g++)n.set(r.args[g],{isMutable:!0,value:e[g]});const c=r.scope.createChildScope(n);return Jx(await this._run(r.statements,c))}}async _eval(r,e){if(this.stop)return Pt;if(this.stepCount%vd===i$&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new tr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);xi(n);const c=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(n,c)}case"if":{const n=await this._eval(r.cond,e);if(bs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const c of r.elseif){const g=await this._eval(c.cond,e);if(bs(g),g.value)return this._eval(c.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Pt}case"match":{const n=await this._eval(r.about,e);for(const c of r.qs){const g=await this._eval(c.q,e);if(wh(n,g))return await this._eval(c.a,e)}return r.default?await this._eval(r.default,e):Pt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Pt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ce(n);for(let c=0;c<n.value;c++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const n=await this._eval(r.from,e),c=await this._eval(r.to,e);Ce(n),Ce(c);for(let g=n.value;g<n.value+c.value;g++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Se(g)}]])));if($.type==="break")break;if($.type==="return")return $}}return Pt}case"each":{const n=await this._eval(r.items,e);nc(n);for(const c of n.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:c}]])));if(g.type==="break")break;if(g.type==="return")return g}return Pt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const c=[];for(const g of r.attr)c.push({name:g.name,value:await this._eval(g.value,e)});n.attr=c}return e.add(r.name,{isMutable:r.mut,value:n}),Pt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Pt}case"addAssign":{const n=await this._eval(r.dest,e);Ce(n);const c=await this._eval(r.expr,e);return Ce(c),await this.assign(e,r.dest,Se(n.value+c.value)),Pt}case"subAssign":{const n=await this._eval(r.dest,e);Ce(n);const c=await this._eval(r.expr,e);return Ce(c),await this.assign(e,r.dest,Se(n.value-c.value)),Pt}case"null":return Pt;case"bool":return su(r.value);case"num":return Se(r.value);case"str":return Qt(r.value);case"arr":return ns(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const c of r.value.keys())n.set(c,await this._eval(r.value.get(c),e));return sc(n)}case"prop":{const n=await this._eval(r.target,e);return Rc(n)?n.value.has(r.name)?n.value.get(r.name):Pt:n$(n,r.name)}case"index":{const n=await this._eval(r.target,e),c=await this._eval(r.index,e);if(Nv(n)){Ce(c);const g=n.value[c.value];if(g===void 0)throw new Ax(`Index out of range. index: ${c.value} max: ${n.value.length-1}`);return g}else{if(Rc(n))return Sr(c),n.value.has(c.value)?n.value.get(c.value):Pt;throw new tr(`Cannot read prop (${ju(c)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return bs(n),su(!n.value)}case"fn":return zx(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return su(e.exists(r.identifier.name));case"tmpl":{let n="";for(const c of r.tmpl)if(typeof c=="string")n+=c;else{const g=await this._eval(c,e);n+=ju(g)}return Qt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Vx(n)}case"break":return this.log("block:break",{scope:e.name}),Wx();case"continue":return this.log("block:continue",{scope:e.name}),Kx();case"ns":return Pt;case"meta":return Pt;case"and":{const n=await this._eval(r.left,e);if(bs(n),n.value){const c=await this._eval(r.right,e);return bs(c),c}else return n}case"or":{const n=await this._eval(r.left,e);if(bs(n),n.value)return n;{const c=await this._eval(r.right,e);return bs(c),c}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Pt;for(let c=0;c<r.length;c++){const g=r[c];if(n=await this._eval(g,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const c=await this._eval(e.target,r),g=await this._eval(e.index,r);if(Nv(c))Ce(g),c.value[g.value]=n;else if(Rc(c))Sr(g),c.value.set(g.value,n);else throw new tr(`Cannot read prop (${ju(g)}) of ${c.type}.`)}else if(e.type==="prop"){const c=await this._eval(e.target,r);Wn(c),c.value.set(e.name,n)}else throw new tr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ps([xr],cs.prototype,"exec",null);Ps([xr],cs.prototype,"execFn",null);Ps([xr],cs.prototype,"execFnSimple",null);Ps([xr],cs.prototype,"handleError",null);Ps([xr],cs.prototype,"log",null);Ps([xr],cs.prototype,"collectNs",null);Ps([xr],cs.prototype,"collectNsMember",null);Ps([xr],cs.prototype,"_fn",null);Ps([xr],cs.prototype,"_eval",null);Ps([xr],cs.prototype,"_run",null);Ps([xr],cs.prototype,"registerAbortHandler",null);Ps([xr],cs.prototype,"unregisterAbortHandler",null);Ps([xr],cs.prototype,"abort",null);Ps([xr],cs.prototype,"assign",null);Ps([xr],cs,"collectMetadata",null);function l$(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function nu(t,r,e,n){var c=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(c,nu.prototype),c.expected=r,c.found=e,c.location=n,c.name="SyntaxError",c}l$(nu,Error);function Dc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}nu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var c=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(c):c,$=this.location.source+":"+g.line+":"+g.column;if(e){var x=this.location.end,m=Dc("",g.line.toString().length," "),A=e[c.line-1],C=c.line===x.line?x.column:A.length+1,P=C-c.column||1;r+=`
 --> `+$+`
`+m+` |
`+g.line+" | "+A+`
`+m+" | "+Dc("",c.column-1," ")+Dc("",P,"^")}else r+=`
 at `+$}return r};nu.buildMessage=function(t,r){var e={literal:function(A){return'"'+c(A.text)+'"'},class:function(A){var C=A.parts.map(function(P){return Array.isArray(P)?g(P[0])+"-"+g(P[1]):g(P)});return"["+(A.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function n(A){return A.charCodeAt(0).toString(16).toUpperCase()}function c(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function g(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function $(A){return e[A.type](A)}function x(A){var C=A.map($),P,S;if(C.sort(),C.length>0){for(P=1,S=1;P<C.length;P++)C[P-1]!==C[P]&&(C[S]=C[P],S++);C.length=S}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function m(A){return A?'"'+c(A)+'"':"end of input"}return"Expected "+x(t)+" but "+m(r)+" found."};function jv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,c={Preprocess:Sa,Main:ys},g=Sa,$="//",x="/*",m="*/",A="(",C=")",P="::",S="{",I="}",G="###",ee="let",re=":",ge="=",q="var",U="<:",L="#[",H="]",W="each",V=",",J="for",Y="return",ue="loop",de="break",le="continue",Ie="+=",ze="-=",mt="\\",Ke="||",ft="&&",je="==",ut="!=",jt="<=",Rt=">=",Ye="<",Br=">",Wt="+",Ar="-",Ft="*",br="^",Hr="/",Or="%",Rr="!",Dt="[",z=".",Z="if",se="elif",ve="else",ye="match",oe="=>",Ne="eval",me="exists",$e="`",he='"',Le="'",Re='\\"',He="\\'",We="true",Ze="false",at="null",it=";",bt="@",Kt="@(",Ct=`\r
`,sr=/^[A-Z0-9_:]/i,Ns=/^[^`{]/,rs=/^[{}`]/,Lt=/^[+\-]/,vt=/^[1-9]/,qt=/^[0-9]/,Zn=/^[A-Z_]/i,Qn=/^[A-Z0-9_]/i,Ii=/^[\r\n]/,Ti=/^[ \t\r\n]/,or=/^[ \t]/,ur=Js(),ji=ae("//",!1),xn=ae("/*",!1),_r=ae("*/",!1),Ot=ae("(",!1),Cr=ae(")",!1),fr=ae("::",!1),tt=ae("{",!1),Jt=ae("}",!1),zr=ae("###",!1),xt=ae("let",!1),$t=ae(":",!1),ps=ae("=",!1),Ri=ae("var",!1),Di=ae("<:",!1),Is=ae("#[",!1),vs=ae("]",!1),At=ae("each",!1),gt=ae(",",!1),Ts=ae("for",!1),gr=ae("return",!1),dr=Bt([["A","Z"],["0","9"],"_",":"],!1,!0),Li=ae("loop",!1),Bi=ae("break",!1),Hi=ae("continue",!1),Ui=ae("+=",!1),Yn=ae("-=",!1),ea=ae("\\",!1),qi=ae("||",!1),zi=ae("&&",!1),Vi=ae("==",!1),Wi=ae("!=",!1),Ki=ae("<=",!1),ta=ae(">=",!1),$n=ae("<",!1),ra=ae(">",!1),Ji=ae("+",!1),sa=ae("-",!1),na=ae("*",!1),Xi=ae("^",!1),Gi=ae("/",!1),Zi=ae("%",!1),bn=ae("!",!1),gs=ae("[",!1),An=ae(".",!1),Qi=ae("if",!1),Yi=ae("elif",!1),el=ae("else",!1),js=ae("match",!1),Rs=ae("=>",!1),Ds=ae("eval",!1),tl=ae("exists",!1),Ls=ae("`",!1),Bs=Bt(["`","{"],!0,!1),Hs=Bt(["{","}","`"],!1,!1),Us=ae('"',!1),qs=ae("'",!1),zs=ae('\\"',!1),aa=ae("\\'",!1),Nt=Bt(["+","-"],!1,!1),ia=Bt([["1","9"]],!1,!1),cr=Bt([["0","9"]],!1,!1),rl=ae("true",!1),Vs=ae("false",!1),sl=ae("null",!1),ds=ae(";",!1),nl=ae("@",!1),_n=ae("@(",!1),al=Bt([["A","Z"],"_"],!1,!0),la=Bt([["A","Z"],["0","9"],"_"],!1,!0),il=ae(`\r
`,!1),ll=Bt(["\r",`
`],!1,!1),ol=Bt([" ","	","\r",`
`],!1,!1),ul=Bt([" ","	"],!1,!1),fl=function(s){return s.join("")},cl=function(){return te()},hl=function(){return te()},pl=function(){return""},oa=function(){return""},vl=function(s){return s??[]},Cn=function(s,o){return o},gl=function(s,o){return[s,...o]},kn=function(s,o){return o},dl=function(s,o){return[s,...o]},ua=function(s,o){return o},yl=function(s,o){return[s,...o]},wl=function(s){return s},ml=function(s,o){return h("ns",{name:s,members:o})},xl=function(s,o){return h("meta",{name:s,value:o})},$l=function(s){return h("meta",{name:null,value:s})},bl=function(s,o,p){return h("def",{name:s,varType:o,expr:p,mut:!1,attr:[]})},Al=function(s,o,p){return h("def",{name:s,varType:o,expr:p,mut:!0,attr:[]})},_l=function(s){return h("identifier",{name:"print",chain:[h("callChain",{args:[s]})]})},Cl=function(s,o){return h("attr",{name:s,value:o??h("bool",{value:!0})})},kl=function(s,o,p){return h("each",{var:s,items:o,for:p})},Pl=function(s,o,p){return h("each",{var:s,items:o,for:p})},El=function(s,o){return o},Ml=function(s,o,p,u){return h("for",{var:s,from:o??h("num",{value:0}),to:p,for:u})},Sl=function(s,o){return o},Fl=function(s,o,p,u){return h("for",{var:s,from:o??h("num",{value:0}),to:p,for:u})},Ol=function(s,o){return h("for",{times:s,for:o})},Nl=function(s,o){return h("for",{times:s,for:o})},Il=function(s){return h("return",{expr:s})},Tl=function(s){return h("loop",{statements:s})},jl=function(){return h("break",{})},fa=function(){return h("continue",{})},Rl=function(s,o,p){return o==="+="?h("addAssign",{dest:s,expr:p}):o==="-="?h("subAssign",{dest:s,expr:p}):h("assign",{dest:s,expr:p})},ca=function(s,o,p){return{op:o,term:p}},Dl=function(s,o){return h("infix",{operands:[s,...o.map(p=>p.term)],operators:o.map(p=>p.op)})},Ll=function(){return te()},Bl=function(s){return h("not",{expr:s})},ha=function(s,o){return s.chain?{...s,chain:[...s.chain,...o]}:{...s,chain:o}},Hl=function(s){return h("callChain",{args:s??[]})},pa=function(s,o){return o},Ul=function(s,o){return[s,...o]},ql=function(s){return h("indexChain",{index:s})},zl=function(s){return h("propChain",{name:s})},Vl=function(s,o,p,u){return h("if",{cond:s,then:o,elseif:p??[],else:u})},Wl=function(s,o){return[s,...o]},va=function(s,o){return{cond:s,then:o}},Kl=function(s){return s},ga=function(s,o,p){return{q:o,a:p}},Jl=function(s,o,p){return h("match",{about:s,qs:o??[],default:p})},Xl=function(s){return h("block",{statements:s})},Gl=function(s){return h("exists",{identifier:s})},da=function(s){return h("identifier",{name:s})},Zl=function(s){return h("tmpl",{tmpl:s})},ya=function(s){return s.join("")},wa=function(s){return s},Ql=function(s){return h("str",{value:s.join("")})},ma=function(s){return s},Yl=function(s){return h("str",{value:s.join("")})},eo=function(){return'"'},to=function(){return"'"},ro=function(){return h("num",{value:parseFloat(te())})},so=function(){return h("num",{value:parseFloat(te())})},no=function(){return h("num",{value:parseInt(te(),10)})},ao=function(){return h("num",{value:parseInt(te(),10)})},xa=function(){return h("bool",{value:!0})},io=function(){return h("bool",{value:!1})},$a=function(){return h("null",{})},ba=function(s,o){return{k:s,v:o}},lo=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return h("obj",{value:o})},Aa=function(s){return s},oo=function(s){return h("arr",{value:s})},uo=function(s,o){return{name:s,argType:o}},_a=function(s,o){return[s,...o]},fo=function(s,o,p,u,d,v){return(s.length>0||p.length>0)&&wo("Cannot use spaces before or after the function name."),h("def",{name:o,expr:h("fn",{args:u??[],retType:d},v??[]),mut:!1,attr:[]})},Ca=function(s,o,p){return h("fn",{args:s??[],retType:o},p??[])},ka=function(s){return s},co=function(s){return h("arr",{value:s})},Pa=function(s,o){return{k:s,v:o}},ho=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return h("obj",{value:o})},po=function(s,o){return h("fnTypeSource",{args:s??[],result:o})},vo=function(s,o){return[s,...o]},go=function(s,o){return h("namedTypeSource",{name:s,inner:o})},yo=function(s){return h("namedTypeSource",{name:s,inner:null})},i=function(){return te()},X=function(){return te()},Ws=function(s){return h("block",{statements:s??[]})},a=0,K=0,E=[{line:1,column:1}],T=0,Vr=[],k=0,R={},Ks;if("startRule"in r){if(!(r.startRule in c))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=c[r.startRule]}function te(){return t.substring(K,a)}function Xt(){return Xs(K,a)}function wo(s,o){throw o=o!==void 0?o:Xs(K,a),Ma(s,o)}function ae(s,o){return{type:"literal",text:s,ignoreCase:o}}function Bt(s,o,p){return{type:"class",parts:s,inverted:o,ignoreCase:p}}function Js(){return{type:"any"}}function N(){return{type:"end"}}function Ea(s){var o=E[s],p;if(o)return o;for(p=s-1;!E[p];)p--;for(o=E[p],o={line:o.line,column:o.column};p<s;)t.charCodeAt(p)===10?(o.line++,o.column=1):o.column++,p++;return E[s]=o,o}function Xs(s,o,p){var u=Ea(s),d=Ea(o),v={source:n,start:{offset:s,line:u.line,column:u.column},end:{offset:o,line:d.line,column:d.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function O(s){a<T||(a>T&&(T=a,Vr=[]),Vr.push(s))}function Ma(s,o){return new nu(s,null,null,o)}function mo(s,o,p){return new nu(nu.buildMessage(s,o),s,o,p)}function Sa(){var s,o,p,u=a*77+0,d=R[u];if(d)return a=d.nextPos,d.result;for(s=a,o=[],p=Fa();p!==e;)o.push(p),p=Fa();return K=s,o=fl(o),s=o,R[u]={nextPos:a,result:s},s}function Fa(){var s,o,p=a*77+1,u=R[p];return u?(a=u.nextPos,u.result):(s=a,o=Zs(),o!==e&&(K=s,o=cl()),s=o,s===e&&(s=a,o=In(),o!==e&&(K=s,o=hl()),s=o,s===e&&(s=xo(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,k===0&&O(ur))))),R[p]={nextPos:a,result:s},s)}function xo(){var s,o,p,u,d,v,b=a*77+2,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(o=$,a+=2):(o=e,k===0&&O(ji)),o!==e){for(p=[],u=a,d=a,k++,v=l(),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,v=l(),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);K=s,s=pl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===x?(o=x,a+=2):(o=e,k===0&&O(xn)),o!==e){for(p=[],u=a,d=a,k++,t.substr(a,2)===m?(v=m,a+=2):(v=e,k===0&&O(_r)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.substr(a,2)===m?(v=m,a+=2):(v=e,k===0&&O(_r)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);t.substr(a,2)===m?(u=m,a+=2):(u=e,k===0&&O(_r)),u!==e?(K=s,s=oa()):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function ys(){var s,o,p,u,d,v=a*77+3,b=R[v];if(b)return a=b.nextPos,b.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();for(p=Pn(),p===e&&(p=null),u=[],d=f();d!==e;)u.push(d),d=f();return K=s,s=vl(p),R[v]={nextPos:a,result:s},s}function Pn(){var s,o,p,u,d,v,b,w,M=a*77+4,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=De(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=De(),w!==e?(K=u,u=Cn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=De(),w!==e?(K=u,u=Cn(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=gl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function En(){var s,o,p,u,d,v,b,w,M=a*77+5,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=Wr(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Wr(),w!==e?(K=u,u=kn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Wr(),w!==e?(K=u,u=kn(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=dl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function yr(){var s,o,p,u,d,v,b,w,M=a*77+6,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=Kr(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Kr(),w!==e?(K=u,u=ua(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Kr(),w!==e?(K=u,u=ua(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=yl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function De(){var s,o=a*77+7,p=R[o];return p?(a=p.nextPos,p.result):(s=Na(),s===e&&(s=$o(),s===e&&(s=Kr())),R[o]={nextPos:a,result:s},s)}function Wr(){var s,o=a*77+8,p=R[o];return p?(a=p.nextPos,p.result):(s=Ia(),s===e&&(s=Gt(),s===e&&(s=Na())),R[o]={nextPos:a,result:s},s)}function Kr(){var s,o=a*77+9,p=R[o];return p?(a=p.nextPos,p.result):(s=Ia(),s===e&&(s=Gt(),s===e&&(s=bo(),s===e&&(s=ko(),s===e&&(s=Ao(),s===e&&(s=_o(),s===e&&(s=Co(),s===e&&(s=Po(),s===e&&(s=Eo(),s===e&&(s=Pr(),s===e&&(s=Ta(),s===e&&(s=Te()))))))))))),R[o]={nextPos:a,result:s},s)}function Te(){var s,o=a*77+10,p=R[o];return p?(a=p.nextPos,p.result):(s=Mo(),s===e&&(s=ws()),R[o]={nextPos:a,result:s},s)}function ws(){var s,o=a*77+11,p=R[o];return p?(a=p.nextPos,p.result):(s=Oo(),s===e&&(s=Do(),s===e&&(s=ja(),s===e&&(s=Oa()))),R[o]={nextPos:a,result:s},s)}function Oa(){var s,o,p,u,d,v,b=a*77+12,w=R[b];if(w)return a=w.nextPos,w.result;if(s=Da(),s===e&&(s=La(),s===e&&(s=Ba(),s===e&&(s=Zs(),s===e&&(s=In(),s===e&&(s=za(),s===e&&(s=Wa(),s===e&&(s=Rn(),s===e&&(s=Ka(),s===e&&(s=Ro(),s===e&&(s=So(),s===e&&(s=Ha(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(o=A,a++):(o=e,k===0&&O(Ot)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e?(K=s,s=wl(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function kr(){var s,o=a*77+13,p=R[o];return p?(a=p.nextPos,p.result):(s=za(),s===e&&(s=In(),s===e&&(s=Wa(),s===e&&(s=Lo(),s===e&&(s=Bo(),s===e&&(s=Rn()))))),R[o]={nextPos:a,result:s},s)}function Na(){var s,o,p,u,d,v,b,w,M,F,D=a*77+14,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===P?(o=P,a+=2):(o=e,k===0&&O(fr)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(t.charCodeAt(a)===123?(v=S,a++):(v=e,k===0&&O(tt)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(w=En(),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();t.charCodeAt(a)===125?(F=I,a++):(F=e,k===0&&O(Jt)),F!==e?(K=s,s=ml(u,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function $o(){var s,o,p,u,d,v,b=a*77+15,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===G?(o=G,a+=3):(o=e,k===0&&O(zr)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=qe(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();v=kr(),v!==e?(K=s,s=xl(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===G?(o=G,a+=3):(o=e,k===0&&O(zr)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();u=kr(),u!==e?(K=s,s=$l(u)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ia(){var s,o,p,u,d,v,b,w,M,F=a*77+16,D=R[F];if(D)return a=D.nextPos,D.result;if(s=a,t.substr(a,3)===ee?(o=ee,a+=3):(o=e,k===0&&O(xt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===58?(b=re,a++):(b=e,k===0&&O($t)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Ue(),M!==e?d=M:(a=d,d=e)}else a=d,d=e;for(d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===61?(b=ge,a++):(b=e,k===0&&O(ps)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Te(),M!==e?(K=s,s=bl(u,d,M)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===q?(o=q,a+=3):(o=e,k===0&&O(Ri)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===58?(b=re,a++):(b=e,k===0&&O($t)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Ue(),M!==e?d=M:(a=d,d=e)}else a=d,d=e;for(d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===61?(b=ge,a++):(b=e,k===0&&O(ps)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Te(),M!==e?(K=s,s=Al(u,d,M)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[F]={nextPos:a,result:s},s}function bo(){var s,o,p,u,d=a*77+17,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===U?(o=U,a+=2):(o=e,k===0&&O(Di)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();u=Te(),u!==e?(K=s,s=_l(u)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Ao(){var s,o,p,u,d,v,b,w=a*77+18,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,t.substr(a,2)===L?(o=L,a+=2):(o=e,k===0&&O(Is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();for(b=kr(),b!==e?d=b:(a=d,d=e),d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();t.charCodeAt(a)===93?(b=H,a++):(b=e,k===0&&O(vs)),b!==e?(K=s,s=Cl(u,d)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[w]={nextPos:a,result:s},s}function _o(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+19,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.substr(a,4)===W?(o=W,a+=4):(o=e,k===0&&O(At)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(t.substr(a,3)===ee?(d=ee,a+=3):(d=e,k===0&&O(xt)),d!==e){if(v=[],b=f(),b!==e)for(;b!==e;)v.push(b),b=f();else v=e;if(v!==e)if(b=qe(),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();for(t.charCodeAt(a)===44?(M=V,a++):(M=e,k===0&&O(gt)),M===e&&(M=null),F=[],D=f();D!==e;)F.push(D),D=f();if(D=Te(),D!==e)if(t.charCodeAt(a)===41?(B=C,a++):(B=e,k===0&&O(Cr)),B!==e){for(Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();xe=Ae(),xe!==e?(K=s,s=kl(b,D,xe)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===W?(o=W,a+=4):(o=e,k===0&&O(At)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,k===0&&O(xt)),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();if(F=Te(),F!==e){if(D=[],B=f(),B!==e)for(;B!==e;)D.push(B),B=f();else D=e;D!==e?(B=Ae(),B!==e?(K=s,s=Pl(v,F,B)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Co(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe=a*77+20,Ge=R[Xe];if(Ge)return a=Ge.nextPos,Ge.result;if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(t.substr(a,3)===ee?(d=ee,a+=3):(d=e,k===0&&O(xt)),d!==e){if(v=[],b=f(),b!==e)for(;b!==e;)v.push(b),b=f();else v=e;if(v!==e)if(b=qe(),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();if(M=a,t.charCodeAt(a)===61?(F=ge,a++):(F=e,k===0&&O(ps)),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();B=Te(),B!==e?(K=M,M=El(b,B)):(a=M,M=e)}else a=M,M=e;for(M===e&&(M=null),t.charCodeAt(a)===44?(F=V,a++):(F=e,k===0&&O(gt)),F===e&&(F=null),D=[],B=f();B!==e;)D.push(B),B=f();if(B=Te(),B!==e)if(t.charCodeAt(a)===41?(Q=C,a++):(Q=e,k===0&&O(Cr)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();ne=Ae(),ne!==e?(K=s,s=Ml(b,M,B,ne)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,k===0&&O(xt)),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(M=ge,a++):(M=e,k===0&&O(ps)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();D=Te(),D!==e?(K=w,w=Sl(v,D)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(M=V,a++):(M=e,k===0&&O(gt)),M===e&&(M=null),F=[],D=f();D!==e;)F.push(D),D=f();if(D=Te(),D!==e){if(B=[],Q=f(),Q!==e)for(;Q!==e;)B.push(Q),Q=f();else B=e;B!==e?(Q=Ae(),Q!==e?(K=s,s=Fl(v,w,D,Q)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(d=Te(),d!==e)if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Ae(),w!==e?(K=s,s=Ol(d,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;d!==e?(v=Ae(),v!==e?(K=s,s=Nl(u,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return R[Xe]={nextPos:a,result:s},s}function ko(){var s,o,p,u,d,v=a*77+21,b=R[v];if(b)return a=b.nextPos,b.result;if(s=a,t.substr(a,6)===Y?(o=Y,a+=6):(o=e,k===0&&O(gr)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();d=Te(),d!==e?(K=s,s=Il(d)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[v]={nextPos:a,result:s},s}function Po(){var s,o,p,u,d,v,b,w,M=a*77+22,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,t.substr(a,4)===ue?(o=ue,a+=4):(o=e,k===0&&O(Li)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=S,a++):(u=e,k===0&&O(tt)),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();if(v=yr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();t.charCodeAt(a)===125?(w=I,a++):(w=e,k===0&&O(Jt)),w!==e?(K=s,s=Tl(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Eo(){var s,o,p,u,d=a*77+23,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===de?(o=de,a+=5):(o=e,k===0&&O(Bi)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=jl()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Pr(){var s,o,p,u,d=a*77+24,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===le?(o=le,a+=8):(o=e,k===0&&O(Hi)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=fa()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Ta(){var s,o,p,u,d,v,b=a*77+25,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.substr(a,2)===Ie?(u=Ie,a+=2):(u=e,k===0&&O(Ui)),u===e&&(t.substr(a,2)===ze?(u=ze,a+=2):(u=e,k===0&&O(Yn)),u===e&&(t.charCodeAt(a)===61?(u=ge,a++):(u=e,k===0&&O(ps)))),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();v=Te(),v!==e?(K=s,s=Rl(o,u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Mo(){var s,o,p,u,d,v,b,w,M=a*77+26,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=ws(),o!==e){for(p=[],u=a,d=[],v=Er();v!==e;)d.push(v),v=Er();if(v=Mn(),v!==e){for(b=[],w=Er();w!==e;)b.push(w),w=Er();w=ws(),w!==e?(K=u,u=ca(o,v,w)):(a=u,u=e)}else a=u,u=e;if(u!==e)for(;u!==e;){for(p.push(u),u=a,d=[],v=Er();v!==e;)d.push(v),v=Er();if(v=Mn(),v!==e){for(b=[],w=Er();w!==e;)b.push(w),w=Er();w=ws(),w!==e?(K=u,u=ca(o,v,w)):(a=u,u=e)}else a=u,u=e}else p=e;p!==e?(K=s,s=Dl(o,p)):(a=s,s=e)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Er(){var s,o,p,u=a*77+27,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===92?(o=mt,a++):(o=e,k===0&&O(ea)),o!==e?(p=ie(),p!==e?(o=[o,p],s=o):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),R[u]={nextPos:a,result:s},s)}function Mn(){var s,o,p=a*77+28,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Ke?(o=Ke,a+=2):(o=e,k===0&&O(qi)),o===e&&(t.substr(a,2)===ft?(o=ft,a+=2):(o=e,k===0&&O(zi)),o===e&&(t.substr(a,2)===je?(o=je,a+=2):(o=e,k===0&&O(Vi)),o===e&&(t.substr(a,2)===ut?(o=ut,a+=2):(o=e,k===0&&O(Wi)),o===e&&(t.substr(a,2)===jt?(o=jt,a+=2):(o=e,k===0&&O(Ki)),o===e&&(t.substr(a,2)===Rt?(o=Rt,a+=2):(o=e,k===0&&O(ta)),o===e&&(t.charCodeAt(a)===60?(o=Ye,a++):(o=e,k===0&&O($n)),o===e&&(t.charCodeAt(a)===62?(o=Br,a++):(o=e,k===0&&O(ra)),o===e&&(t.charCodeAt(a)===43?(o=Wt,a++):(o=e,k===0&&O(Ji)),o===e&&(t.charCodeAt(a)===45?(o=Ar,a++):(o=e,k===0&&O(sa)),o===e&&(t.charCodeAt(a)===42?(o=Ft,a++):(o=e,k===0&&O(na)),o===e&&(t.charCodeAt(a)===94?(o=br,a++):(o=e,k===0&&O(Xi)),o===e&&(t.charCodeAt(a)===47?(o=Hr,a++):(o=e,k===0&&O(Gi)),o===e&&(t.charCodeAt(a)===37?(o=Or,a++):(o=e,k===0&&O(Zi))))))))))))))),o!==e&&(K=s,o=Ll()),s=o,R[p]={nextPos:a,result:s},s)}function So(){var s,o,p,u=a*77+29,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===33?(o=Rr,a++):(o=e,k===0&&O(bn)),o!==e?(p=Te(),p!==e?(K=s,s=Bl(p)):(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function ja(){var s,o,p,u,d=a*77+30,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,o=Oa(),o!==e){if(p=[],u=Sn(),u===e&&(u=Ra(),u===e&&(u=Gs())),u!==e)for(;u!==e;)p.push(u),u=Sn(),u===e&&(u=Ra(),u===e&&(u=Gs()));else p=e;p!==e?(K=s,s=ha(o,p)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Sn(){var s,o,p,u,d,v,b=a*77+31,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(o=A,a++):(o=e,k===0&&O(Ot)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Fo(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e?(K=s,s=Hl(u)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Fo(){var s,o,p,u,d,v,b=a*77+32,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Te(),v!==e?(K=u,u=pa(o,v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Te(),v!==e?(K=u,u=pa(o,v)):(a=u,u=e)):(a=u,u=e);K=s,s=Ul(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ra(){var s,o,p,u,d,v,b=a*77+33,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=ql(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Gs(){var s,o,p,u=a*77+34,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===46?(o=z,a++):(o=e,k===0&&O(An)),o!==e?(p=qe(),p!==e?(K=s,s=zl(p)):(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function Oo(){var s,o,p,u,d,v,b,w,M,F,D=a*77+35,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===Z?(o=Z,a+=2):(o=e,k===0&&O(Qi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=Ae(),v!==e){if(b=a,w=[],M=f(),M!==e)for(;M!==e;)w.push(M),M=f();else w=e;if(w!==e?(M=No(),M!==e?b=M:(a=b,b=e)):(a=b,b=e),b===e&&(b=null),w=a,M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;M!==e?(F=Io(),F!==e?w=F:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),K=s,s=Vl(u,v,b,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function No(){var s,o,p,u,d,v,b=a*77+36,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Fn(),o!==e){for(p=[],u=a,d=[],v=f();v!==e;)d.push(v),v=f();for(v=Fn(),v!==e?u=v:(a=u,u=e);u!==e;){for(p.push(u),u=a,d=[],v=f();v!==e;)d.push(v),v=f();v=Fn(),v!==e?u=v:(a=u,u=e)}K=s,s=Wl(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Fn(){var s,o,p,u,d,v,b,w=a*77+37,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,t.substr(a,4)===se?(o=se,a+=4):(o=e,k===0&&O(Yi)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();if(d=Te(),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();b=Ae(),b!==e?(K=s,s=va(d,b)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return R[w]={nextPos:a,result:s},s}function Io(){var s,o,p,u,d,v=a*77+38,b=R[v];if(b)return a=b.nextPos,b.result;if(s=a,t.substr(a,4)===ve?(o=ve,a+=4):(o=e,k===0&&O(el)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();d=Ae(),d!==e?(K=s,s=Kl(d)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[v]={nextPos:a,result:s},s}function Da(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe,Ge,Ln=a*77+39,ms=R[Ln];if(ms)return a=ms.nextPos,ms.result;if(s=a,t.substr(a,5)===ye?(o=ye,a+=5):(o=e,k===0&&O(js)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();if(d=Te(),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===123?(b=S,a++):(b=e,k===0&&O(tt)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();if(M=[],F=a,D=Te(),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();K=F,F=ga(d,D,ne)}else a=F,F=e}else a=F,F=e}else a=F,F=e;if(F!==e)for(;F!==e;)if(M.push(F),F=a,D=Te(),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();K=F,F=ga(d,D,ne)}else a=F,F=e}else a=F,F=e}else a=F,F=e;else M=e;if(M!==e){if(F=a,t.charCodeAt(a)===42?(D=Ft,a++):(D=e,k===0&&O(na)),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();F=ne}else a=F,F=e}else a=F,F=e}else a=F,F=e;for(F===e&&(F=null),D=[],B=f();B!==e;)D.push(B),B=f();t.charCodeAt(a)===125?(B=I,a++):(B=e,k===0&&O(Jt)),B!==e?(K=s,s=Jl(d,M,F)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return R[Ln]={nextPos:a,result:s},s}function La(){var s,o,p,u,d,v,b,w,M=a*77+40,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,t.substr(a,4)===Ne?(o=Ne,a+=4):(o=e,k===0&&O(Ds)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=S,a++):(u=e,k===0&&O(tt)),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();if(v=yr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();t.charCodeAt(a)===125?(w=I,a++):(w=e,k===0&&O(Jt)),w!==e?(K=s,s=Xl(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Ba(){var s,o,p,u,d=a*77+41,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===me?(o=me,a+=6):(o=e,k===0&&O(tl)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;p!==e?(u=Ha(),u!==e?(K=s,s=Gl(u)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Ha(){var s,o,p=a*77+42,u=R[p];return u?(a=u.nextPos,u.result):(s=a,o=Xa(),o!==e&&(K=s,o=da(o)),s=o,R[p]={nextPos:a,result:s},s)}function Zs(){var s,o,p,u,d,v,b=a*77+43,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(o=$e,a++):(o=e,k===0&&O(Ls)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===96?(v=$e,a++):(v=e,k===0&&O(Ls)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===96?(v=$e,a++):(v=e,k===0&&O(Ls)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===96?(u=$e,a++):(u=e,k===0&&O(Ls)),u!==e?(K=s,s=Zl(p)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function On(){var s,o,p,u,d,v,b=a*77+44,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Te(),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();t.charCodeAt(a)===125?(v=I,a++):(v=e,k===0&&O(Jt)),v!==e?s=u:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,o=[],p=Nn(),p!==e)for(;p!==e;)o.push(p),p=Nn();else o=e;o!==e&&(K=s,o=ya(o)),s=o}return R[b]={nextPos:a,result:s},s}function Nn(){var s,o=a*77+45,p=R[o];return p?(a=p.nextPos,p.result):(s=Ua(),s===e&&(Ns.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(Bs))),R[o]={nextPos:a,result:s},s)}function Ua(){var s,o,p,u=a*77+46,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===92?(o=mt,a++):(o=e,k===0&&O(ea)),o!==e?(rs.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,k===0&&O(Hs)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function In(){var s,o,p,u,d,v,b=a*77+47,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(o=he,a++):(o=e,k===0&&O(Us)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===34?(v=he,a++):(v=e,k===0&&O(Us)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=qa(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=wa(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===34?(v=he,a++):(v=e,k===0&&O(Us)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=qa(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=wa(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===34?(u=he,a++):(u=e,k===0&&O(Us)),u!==e?(K=s,s=Ql(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(o=Le,a++):(o=e,k===0&&O(qs)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===39?(v=Le,a++):(v=e,k===0&&O(qs)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=Tn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=ma(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===39?(v=Le,a++):(v=e,k===0&&O(qs)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=Tn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=ma(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===39?(u=Le,a++):(u=e,k===0&&O(qs)),u!==e?(K=s,s=Yl(p)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function qa(){var s,o,p=a*77+48,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Re?(o=Re,a+=2):(o=e,k===0&&O(zs)),o!==e&&(K=s,o=eo()),s=o,R[p]={nextPos:a,result:s},s)}function Tn(){var s,o,p=a*77+49,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===He?(o=He,a+=2):(o=e,k===0&&O(aa)),o!==e&&(K=s,o=to()),s=o,R[p]={nextPos:a,result:s},s)}function za(){var s,o=a*77+50,p=R[o];return p?(a=p.nextPos,p.result):(s=To(),s===e&&(s=Va()),R[o]={nextPos:a,result:s},s)}function To(){var s,o,p,u,d,v,b=a*77+51,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),vt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(ia)),o!==e){if(p=[],qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr)),u!==e)for(;u!==e;)p.push(u),qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(u=z,a++):(u=e,k===0&&O(An)),u!==e){if(d=[],qt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,k===0&&O(cr)),v!==e)for(;v!==e;)d.push(v),qt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,k===0&&O(cr));else d=e;d!==e?(K=s,s=ro()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),qt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(cr)),o!==e)if(t.charCodeAt(a)===46?(p=z,a++):(p=e,k===0&&O(An)),p!==e){if(u=[],qt.test(t.charAt(a))?(d=t.charAt(a),a++):(d=e,k===0&&O(cr)),d!==e)for(;d!==e;)u.push(d),qt.test(t.charAt(a))?(d=t.charAt(a),a++):(d=e,k===0&&O(cr));else u=e;u!==e?(K=s,s=so()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Va(){var s,o,p,u,d=a*77+52,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),vt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(ia)),o!==e){if(p=[],qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr)),u!==e)for(;u!==e;)p.push(u),qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr));else p=e;p!==e?(K=s,s=no()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),qt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(cr)),o!==e?(K=s,s=ao()):(a=s,s=e)),R[d]={nextPos:a,result:s},s}function Wa(){var s,o=a*77+53,p=R[o];return p?(a=p.nextPos,p.result):(s=jo(),s===e&&(s=jn()),R[o]={nextPos:a,result:s},s)}function jo(){var s,o,p,u,d=a*77+54,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(o=We,a+=4):(o=e,k===0&&O(rl)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=xa()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function jn(){var s,o,p,u,d=a*77+55,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(o=Ze,a+=5):(o=e,k===0&&O(Vs)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=io()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Rn(){var s,o,p,u,d=a*77+56,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===at?(o=at,a+=4):(o=e,k===0&&O(sl)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=$a()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Ka(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+57,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=Te(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=ba(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=Te(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=ba(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;t.charCodeAt(a)===125?(d=I,a++):(d=e,k===0&&O(Jt)),d!==e?(K=s,s=lo(u)):(a=s,s=e)}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Ro(){var s,o,p,u,d,v,b,w,M,F,D=a*77+58,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=Te(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=Aa(v)}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=Te(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=Aa(v)}else a=d,d=e;for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=oo(u)):(a=s,s=e)}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Dn(){var s,o,p,u,d,v,b,w=a*77+59,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,o=qe(),o!==e){for(p=a,u=[],d=f();d!==e;)u.push(d),d=f();if(t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();b=Ue(),b!==e?p=b:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),K=s,s=uo(o,p)}else a=s,s=e;return R[w]={nextPos:a,result:s},s}function Ja(){var s,o,p,u,d,v,b=a*77+60,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Dn(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Dn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Dn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);K=s,s=_a(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Gt(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe,Ge,Ln=a*77+61,ms=R[Ln];if(ms)return a=ms.nextPos,ms.result;if(s=a,t.charCodeAt(a)===64?(o=bt,a++):(o=e,k===0&&O(nl)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=qe(),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();if(t.charCodeAt(a)===40?(v=A,a++):(v=e,k===0&&O(Ot)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(w=Ja(),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();if(t.charCodeAt(a)===41?(F=C,a++):(F=e,k===0&&O(Cr)),F!==e){for(D=a,B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.charCodeAt(a)===58?(Q=re,a++):(Q=e,k===0&&O($t)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();ne=Ue(),ne!==e?D=ne:(a=D,D=e)}else a=D,D=e;for(D===e&&(D=null),B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.charCodeAt(a)===123?(Q=S,a++):(Q=e,k===0&&O(tt)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();for(ne=yr(),ne===e&&(ne=null),Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();t.charCodeAt(a)===125?(Ge=I,a++):(Ge=e,k===0&&O(Jt)),Ge!==e?(K=s,s=fo(p,u,d,w,D,ne)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[Ln]={nextPos:a,result:s},s}function Do(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=a*77+62,ne=R[xe];if(ne)return a=ne.nextPos,ne.result;if(s=a,t.substr(a,2)===Kt?(o=Kt,a+=2):(o=e,k===0&&O(_n)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Ja(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=a,w=[],M=f();M!==e;)w.push(M),M=f();if(t.charCodeAt(a)===58?(M=re,a++):(M=e,k===0&&O($t)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();D=Ue(),D!==e?b=D:(a=b,b=e)}else a=b,b=e;for(b===e&&(b=null),w=[],M=f();M!==e;)w.push(M),M=f();if(t.charCodeAt(a)===123?(M=S,a++):(M=e,k===0&&O(tt)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();for(D=yr(),D===e&&(D=null),B=[],Q=f();Q!==e;)B.push(Q),Q=f();t.charCodeAt(a)===125?(Q=I,a++):(Q=e,k===0&&O(Jt)),Q!==e?(K=s,s=Ca(u,b,D)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[xe]={nextPos:a,result:s},s}function Lo(){var s,o,p,u,d,v,b,w,M,F,D=a*77+63,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=kr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=ka(v)}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=kr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=ka(v)}else a=d,d=e;for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=co(u)):(a=s,s=e)}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Bo(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+64,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=kr(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=Pa(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=kr(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=Pa(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;t.charCodeAt(a)===125?(d=I,a++):(d=e,k===0&&O(Jt)),d!==e?(K=s,s=ho(u)):(a=s,s=e)}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Ue(){var s,o=a*77+65,p=R[o];return p?(a=p.nextPos,p.result):(s=Ho(),s===e&&(s=Ht()),R[o]={nextPos:a,result:s},s)}function Ho(){var s,o,p,u,d,v,b,w,M,F,D=a*77+66,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===Kt?(o=Kt,a+=2):(o=e,k===0&&O(_n)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Jr(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.substr(a,2)===oe?(w=oe,a+=2):(w=e,k===0&&O(Rs)),w!==e){for(M=[],F=f();F!==e;)M.push(F),F=f();F=Ue(),F!==e?(K=s,s=po(u,F)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Jr(){var s,o,p,u,d,v,b=a*77+67,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Ue(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Ue(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Ue(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);K=s,s=vo(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ht(){var s,o,p,u,d,v,b,w,M=a*77+68,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=qe(),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(t.charCodeAt(a)===60?(u=Ye,a++):(u=e,k===0&&O($n)),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();if(v=Ue(),v!==e){for(b=[],w=y();w!==e;)b.push(w),w=y();t.charCodeAt(a)===62?(w=Br,a++):(w=e,k===0&&O(ra)),w!==e?(K=s,s=go(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,o=qe(),o!==e&&(K=s,o=yo(o)),s=o),R[M]={nextPos:a,result:s},s}function qe(){var s,o,p,u,d=a*77+69,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,Zn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(al)),o!==e){for(p=[],Qn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(la));u!==e;)p.push(u),Qn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(la));K=s,s=i()}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Xa(){var s,o,p,u,d,v,b=a*77+70,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=qe(),o!==e){for(p=[],u=a,t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e?(v=qe(),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e?(v=qe(),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);K=s,s=X()}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function _(){var s,o,p,u,d,v=a*77+71,b=R[v];if(b)return a=b.nextPos,b.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();if(t.charCodeAt(a)===44?(p=V,a++):(p=e,k===0&&O(gt)),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();o=[o,p,u],s=o}else a=s,s=e;if(s===e)if(s=[],o=f(),o!==e)for(;o!==e;)s.push(o),o=f();else s=e;return R[v]={nextPos:a,result:s},s}function Ae(){var s,o,p,u,d,v,b=a*77+72,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=yr(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===125?(v=I,a++):(v=e,k===0&&O(Jt)),v!==e?(K=s,s=Ws(u)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Kr()),R[b]={nextPos:a,result:s},s}function ie(){var s,o=a*77+73,p=R[o];return p?(a=p.nextPos,p.result):(t.substr(a,2)===Ct?(s=Ct,a+=2):(s=e,k===0&&O(il)),s===e&&(Ii.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ll))),R[o]={nextPos:a,result:s},s)}function l(){var s,o,p=a*77+74,u=R[p];return u?(a=u.nextPos,u.result):(s=a,k++,t.length>a?(o=t.charAt(a),a++):(o=e,k===0&&O(ur)),k--,o===e?s=void 0:(a=s,s=e),s===e&&(s=ie()),R[p]={nextPos:a,result:s},s)}function f(){var s,o=a*77+75,p=R[o];return p?(a=p.nextPos,p.result):(Ti.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ol)),R[o]={nextPos:a,result:s},s)}function y(){var s,o=a*77+76,p=R[o];return p?(a=p.nextPos,p.result):(or.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ul)),R[o]={nextPos:a,result:s},s)}function h(s,o,p){const u={type:s};o.children=p;for(const v of Object.keys(o))o[v]!==void 0&&(u[v]=o[v]);const d=Xt();return u.loc={start:d.start.offset,end:d.end.offset-1},u}if(Ks=g(),Ks!==e&&a===t.length)return Ks;throw Ks!==e&&a<t.length&&O(N()),mo(Vr,T<t.length?t.charAt(T):null,T<t.length?Xs(T,T+1):Xs(T,T))}const o$=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function u$(t){return o$.includes(t.type)}function gd(t){return"chain"in t&&t.chain!==null}function f$(t,r,e){return{type:"call",target:t,args:r,loc:e}}function c$(t,r,e){return{type:"index",target:t,index:r,loc:e}}function h$(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function rt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=rt(e.expr,r);break}case"return":{e.expr=rt(e.expr,r);break}case"each":{e.items=rt(e.items,r),e.for=rt(e.for,r);break}case"for":{e.from!=null&&(e.from=rt(e.from,r)),e.to!=null&&(e.to=rt(e.to,r)),e.times!=null&&(e.times=rt(e.times,r)),e.for=rt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=rt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=rt(e.expr,r),e.dest=rt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=rt(e.operands[n],r);break}case"not":{e.expr=rt(e.expr,r);break}case"if":{e.cond=rt(e.cond,r),e.then=rt(e.then,r);for(const n of e.elseif)n.cond=rt(n.cond,r),n.then=rt(n.then,r);e.else!=null&&(e.else=rt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=rt(e.children[n],r);break}case"match":{e.about=rt(e.about,r);for(const n of e.qs)n.q=rt(n.q,r),n.a=rt(n.a,r);e.default!=null&&(e.default=rt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=rt(e.statements[n],r);break}case"exists":{e.identifier=rt(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const c=e.tmpl[n];typeof c!="string"&&(e.tmpl[n]=rt(c,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],rt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=rt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=rt(e.args[n],r);break}case"indexChain":{e.index=rt(e.index,r);break}case"call":{e.target=rt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=rt(e.args[n],r);break}case"index":{e.target=rt(e.target,r),e.index=rt(e.index,r);break}case"prop":{e.target=rt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=rt(e.members[n],r);break}case"or":case"and":{e.left=rt(e.left,r),e.right=rt(e.right,r);break}}if(gd(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=rt(e.chain[n],r);return e}const Lc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Bc(t){throw new hu(`Reserved word "${t}" cannot be used as variable name.`)}function p$(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Lc.includes(t.name)&&Bc(t.name);break}case"meta":{t.name!=null&&Lc.includes(t.name)&&Bc(t.name);break}case"fn":{for(const r of t.args)Lc.includes(r.name)&&Bc(r.name);break}}return t}function v$(t){for(const r of t)rt(r,p$);return t}function Rv(t){return{type:"simple",name:t}}function g$(t,r){return{type:"generic",name:t,inners:r}}function d$(t,r){return{type:"fn",args:t,result:r}}function jf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=jf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>jf(n)).join(", "),e=jf(t.result);return`@(${r}) { ${e} }`}}}function Ru(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Rv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Ru(t.inner):r=Rv("any"),g$(t.name,[r])}}throw new hu(`Unknown type: '${jf(t)}'`)}else{const r=t.args.map(e=>Ru(e));return d$(r,Ru(t.result))}}function y$(t){switch(t.type){case"def":{t.varType!=null&&Ru(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Ru(r.argType);t.retType!=null&&Ru(t.retType);break}}return t}function w$(t){for(const r of t)rt(r,y$);return t}function Rf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Rf(n.expr.children)),r.push(n);else{if(e.length>0)throw new hu("invalid attribute.");switch(n.type){case"fn":{n.children=Rf(n.children);break}case"block":{n.statements=Rf(n.statements);break}}r.push(n)}if(e.length>0)throw new hu("invalid attribute.");return r}function m$(t){if(u$(t)&&gd(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const c of r)switch(c.type){case"callChain":{n=f$(n,c.args,c.loc);break}case"indexChain":{n=c$(n,c.index,c.loc);break}case"propChain":{n=h$(n,c.name,c.loc);break}}return n}return t}function x$(t){for(let r=0;r<t.length;r++)t[r]=rt(t[r],m$);return t}function Df(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function dd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Df(t,r,e);{const{left:n,right:c,info:g}=t;return Df(n,dd(c,r,e),g)}}function Go(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Go(t.left),Go(t.right)]}}const $$={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Go(t.left),right:Go(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Go(t.left),right:Go(t.right)}),priority:3}};function b$(t){const r=t.operators.map(n=>{const c=$$[n];if(c==null)throw new hu(`No such operator: ${n}.`);return c});let e=Df(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=dd(e,t.operands[2+n],r[1+n]);return Go(e)}function A$(t){for(let r=0;r<t.length;r++)t[r]=rt(t[r],e=>e.type==="infix"?b$(e):e);return t}var Qa;let _$=(Qa=class{constructor(){be(this,"plugins");this.plugins={validate:[v$,w$],transform:[Rf,x$,A$]}}static parse(r){return Qa.instance==null&&(Qa.instance=new Qa),Qa.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=jv(r,{startRule:"Preprocess"});e=jv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new hu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new hu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},be(Qa,"instance"),Qa);const Dv="develop",C$={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`},k$=t=>(vf("data-v-0a685ae4"),t=t(),gf(),t),P$={id:"root"},E$={id:"grid1"},M$={class:"type"},S$={id:"grid2"},F$=k$(()=>Mt("header",null,null,-1)),O$=si({__name:"index",setup(t){const r=wr(window.localStorage.getItem(Dv)??'<: "Hello, AiScript!"'),e=wr(null),n=wr([]),c=wr(null);ri(r,()=>{window.localStorage.setItem(Dv,r.value);try{e.value=_$.parse(r.value),c.value=null}catch(x){const m=x;c.value=m.message,console.error("info"in m?m.info:m);return}},{immediate:!0});let g=null;const $=async()=>{n.value=[],g==null||g.abort(),g=new cs({},{in:x=>new Promise(m=>{const A=window.prompt(x);m(A??"")}),out:x=>{n.value.push({id:Math.random(),type:x.type,text:mh(x,!0),print:!0})},err:x=>{window.alert(x.toString())},log:(x,m)=>{switch(x){case"end":n.value.push({id:Math.random(),text:mh(m.val,!0),print:!1});break}}});try{await g.exec(e.value)}catch(x){console.error(x),window.alert("Internal Error: "+x)}};return(x,m)=>(wt(),Ut("div",P$,[Mt("div",E$,[nt(yf,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=A=>r.value=A),samples:Mi(C$),parseError:c.value,onRun:$},null,8,["modelValue","samples","parseError"]),nt(Fr,{id:"logs"},{header:ot(()=>[It("Output")]),default:ot(()=>[(wt(!0),Ut(Ir,null,fu(n.value,A=>(wt(),Ut("div",{class:Tr(["log",[{print:A.print},A.type]]),key:A.id},[Mt("span",M$,Dr(A.type),1),It(" "+Dr(A.text),1)],2))),128))]),_:1})]),Mt("div",S$,[nt(Fr,{id:"ast"},{header:ot(()=>[It("AST")]),default:ot(()=>[Mt("pre",null,Dr(JSON.stringify(e.value,null,"	")),1)]),_:1}),nt(Fr,{id:"bin"},{header:ot(()=>[It("Bytecode")]),default:ot(()=>[F$]),_:1}),nt(Fr,{id:"debugger"},{header:ot(()=>[It("Debugger")]),_:1})])]))}});const N$=ai(O$,[["__scopeId","data-v-0a685ae4"]]);function $r(t,r,e){let n=e.value;return{configurable:!0,get(){const c=n.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:c}),c},set(c){n=c}}}let bc=class yd extends Error{constructor(e,n){super(e);be(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,yd)}};class I$ extends bc{constructor(r){super(`Internal Error. ${r}`,r)}}class pu extends bc{constructor(r,e){super(r,e)}}class rr extends bc{constructor(r,e){super(r,e)}}class T$ extends rr{constructor(r,e){super(r,e)}}var Oi=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};let oi=class wd{constructor(r=[],e,n){be(this,"parent");be(this,"layerdStates");be(this,"name");be(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new wd(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r).value;return this.log("read",{var:r,val:n}),n}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new rr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let n=1;for(const c of this.layerdStates){if(c.has(r)){const g=c.get(r);if(!g.isMutable)throw new rr(`Cannot assign to an immutable variable ${r}.`);g.value=e,this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Oi([$r],oi.prototype,"log",null);Oi([$r],oi.prototype,"onUpdated",null);Oi([$r],oi.prototype,"createChildScope",null);Oi([$r],oi.prototype,"get",null);Oi([$r],oi.prototype,"exists",null);Oi([$r],oi.prototype,"getAll",null);Oi([$r],oi.prototype,"add",null);Oi([$r],oi.prototype,"assign",null);let Ef;const j$=new Uint8Array(16);function R$(){if(!Ef&&(Ef=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ef))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ef(j$)}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function D$(t,r=0){return Zr[t[r+0]]+Zr[t[r+1]]+Zr[t[r+2]]+Zr[t[r+3]]+"-"+Zr[t[r+4]]+Zr[t[r+5]]+"-"+Zr[t[r+6]]+Zr[t[r+7]]+"-"+Zr[t[r+8]]+Zr[t[r+9]]+"-"+Zr[t[r+10]]+Zr[t[r+11]]+Zr[t[r+12]]+Zr[t[r+13]]+Zr[t[r+14]]+Zr[t[r+15]]}const L$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lv={randomUUID:L$};function B$(t,r,e){if(Lv.randomUUID&&!r&&!t)return Lv.randomUUID();t=t||{};const n=t.random||(t.rng||R$)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let c=0;c<16;++c)r[e+c]=n[c];return r}return D$(n)}var xp={exports:{}};xp.exports;(function(t){(function(r,e,n){function c(m){var A=this,C=x();A.next=function(){var P=2091639*A.s0+A.c*23283064365386963e-26;return A.s0=A.s1,A.s1=A.s2,A.s2=P-(A.c=P|0)},A.c=1,A.s0=C(" "),A.s1=C(" "),A.s2=C(" "),A.s0-=C(m),A.s0<0&&(A.s0+=1),A.s1-=C(m),A.s1<0&&(A.s1+=1),A.s2-=C(m),A.s2<0&&(A.s2+=1),C=null}function g(m,A){return A.c=m.c,A.s0=m.s0,A.s1=m.s1,A.s2=m.s2,A}function $(m,A){var C=new c(m),P=A&&A.state,S=C.next;return S.int32=function(){return C.next()*4294967296|0},S.double=function(){return S()+(S()*2097152|0)*11102230246251565e-32},S.quick=S,P&&(typeof P=="object"&&g(P,C),S.state=function(){return g(C,{})}),S}function x(){var m=4022871197,A=function(C){C=String(C);for(var P=0;P<C.length;P++){m+=C.charCodeAt(P);var S=.02519603282416938*m;m=S>>>0,S-=m,S*=m,m=S>>>0,S-=m,m+=S*4294967296}return(m>>>0)*23283064365386963e-26};return A}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.alea=$})(Tt,t,!1)})(xp);var H$=xp.exports,$p={exports:{}};$p.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.x=0,m.y=0,m.z=0,m.w=0,m.next=function(){var P=m.x^m.x<<11;return m.x=m.y,m.y=m.z,m.z=m.w,m.w^=m.w>>>19^P^P>>>8},x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor128=$})(Tt,t,!1)})($p);var U$=$p.exports,bp={exports:{}};bp.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.x^m.x>>>2;return m.x=m.y,m.y=m.z,m.z=m.w,m.w=m.v,(m.d=m.d+362437|0)+(m.v=m.v^m.v<<4^(P^P<<1))|0},m.x=0,m.y=0,m.z=0,m.w=0,m.v=0,x===(x|0)?m.x=x:A+=x;for(var C=0;C<A.length+64;C++)m.x^=A.charCodeAt(C)|0,C==A.length&&(m.d=m.x<<10^m.x>>>4),m.next()}function g(x,m){return m.x=x.x,m.y=x.y,m.z=x.z,m.w=x.w,m.v=x.v,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorwow=$})(Tt,t,!1)})(bp);var q$=bp.exports,Ap={exports:{}};Ap.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.x,P=m.i,S,I;return S=C[P],S^=S>>>7,I=S^S<<24,S=C[P+1&7],I^=S^S>>>10,S=C[P+3&7],I^=S^S>>>3,S=C[P+4&7],I^=S^S<<7,S=C[P+7&7],S=S^S<<13,I^=S^S<<9,C[P]=I,m.i=P+1&7,I};function A(C,P){var S,I=[];if(P===(P|0))I[0]=P;else for(P=""+P,S=0;S<P.length;++S)I[S&7]=I[S&7]<<15^P.charCodeAt(S)+I[S+1&7]<<13;for(;I.length<8;)I.push(0);for(S=0;S<8&&I[S]===0;++S);for(S==8?I[7]=-1:I[S],C.x=I,C.i=0,S=256;S>0;--S)C.next()}A(m,x)}function g(x,m){return m.x=x.x.slice(),m.i=x.i,m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.x&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xorshift7=$})(Tt,t,!1)})(Ap);var z$=Ap.exports,_p={exports:{}};_p.exports;(function(t){(function(r,e,n){function c(x){var m=this;m.next=function(){var C=m.w,P=m.X,S=m.i,I,G;return m.w=C=C+1640531527|0,G=P[S+34&127],I=P[S=S+1&127],G^=G<<13,I^=I<<17,G^=G>>>15,I^=I>>>12,G=P[S]=G^I,m.i=S,G+(C^C>>>16)|0};function A(C,P){var S,I,G,ee,re,ge=[],q=128;for(P===(P|0)?(I=P,P=null):(P=P+"\0",I=0,q=Math.max(q,P.length)),G=0,ee=-32;ee<q;++ee)P&&(I^=P.charCodeAt((ee+32)%P.length)),ee===0&&(re=I),I^=I<<10,I^=I>>>15,I^=I<<4,I^=I>>>13,ee>=0&&(re=re+1640531527|0,S=ge[ee&127]^=I+re,G=S==0?G+1:0);for(G>=128&&(ge[(P&&P.length||0)&127]=-1),G=127,ee=4*128;ee>0;--ee)I=ge[G+34&127],S=ge[G=G+1&127],I^=I<<13,S^=S<<17,I^=I>>>15,S^=S>>>12,ge[G]=I^S;C.w=re,C.X=ge,C.i=G}A(m,x)}function g(x,m){return m.i=x.i,m.w=x.w,m.X=x.X.slice(),m}function $(x,m){x==null&&(x=+new Date);var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(C.X&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.xor4096=$})(Tt,t,!1)})(_p);var V$=_p.exports,Cp={exports:{}};Cp.exports;(function(t){(function(r,e,n){function c(x){var m=this,A="";m.next=function(){var P=m.b,S=m.c,I=m.d,G=m.a;return P=P<<25^P>>>7^S,S=S-I|0,I=I<<24^I>>>8^G,G=G-P|0,m.b=P=P<<20^P>>>12^S,m.c=S=S-I|0,m.d=I<<16^S>>>16^G,m.a=G-P|0},m.a=0,m.b=0,m.c=-1640531527,m.d=1367130551,x===Math.floor(x)?(m.a=x/4294967296|0,m.b=x|0):A+=x;for(var C=0;C<A.length+20;C++)m.b^=A.charCodeAt(C)|0,m.next()}function g(x,m){return m.a=x.a,m.b=x.b,m.c=x.c,m.d=x.d,m}function $(x,m){var A=new c(x),C=m&&m.state,P=function(){return(A.next()>>>0)/4294967296};return P.double=function(){do var S=A.next()>>>11,I=(A.next()>>>0)/4294967296,G=(S+I)/(1<<21);while(G===0);return G},P.int32=A.next,P.quick=P,C&&(typeof C=="object"&&g(C,A),P.state=function(){return g(A,{})}),P}e&&e.exports?e.exports=$:n&&n.amd?n(function(){return $}):this.tychei=$})(Tt,t,!1)})(Cp);var W$=Cp.exports,md={exports:{}};(function(t){(function(r,e,n){var c=256,g=6,$=52,x="random",m=n.pow(c,g),A=n.pow(2,$),C=A*2,P=c-1,S;function I(L,H,W){var V=[];H=H==!0?{entropy:!0}:H||{};var J=ge(re(H.entropy?[L,U(e)]:L??q(),3),V),Y=new G(V),ue=function(){for(var de=Y.g(g),le=m,Ie=0;de<A;)de=(de+Ie)*c,le*=c,Ie=Y.g(1);for(;de>=C;)de/=2,le/=2,Ie>>>=1;return(de+Ie)/le};return ue.int32=function(){return Y.g(4)|0},ue.quick=function(){return Y.g(4)/4294967296},ue.double=ue,ge(U(Y.S),e),(H.pass||W||function(de,le,Ie,ze){return ze&&(ze.S&&ee(ze,Y),de.state=function(){return ee(Y,{})}),Ie?(n[x]=de,le):de})(ue,J,"global"in H?H.global:this==n,H.state)}function G(L){var H,W=L.length,V=this,J=0,Y=V.i=V.j=0,ue=V.S=[];for(W||(L=[W++]);J<c;)ue[J]=J++;for(J=0;J<c;J++)ue[J]=ue[Y=P&Y+L[J%W]+(H=ue[J])],ue[Y]=H;(V.g=function(de){for(var le,Ie=0,ze=V.i,mt=V.j,Ke=V.S;de--;)le=Ke[ze=P&ze+1],Ie=Ie*c+Ke[P&(Ke[ze]=Ke[mt=P&mt+le])+(Ke[mt]=le)];return V.i=ze,V.j=mt,Ie})(c)}function ee(L,H){return H.i=L.i,H.j=L.j,H.S=L.S.slice(),H}function re(L,H){var W=[],V=typeof L,J;if(H&&V=="object")for(J in L)try{W.push(re(L[J],H-1))}catch{}return W.length?W:V=="string"?L:L+"\0"}function ge(L,H){for(var W=L+"",V,J=0;J<W.length;)H[P&J]=P&(V^=H[P&J]*19)+W.charCodeAt(J++);return U(H)}function q(){try{var L;return S&&(L=S.randomBytes)?L=L(c):(L=new Uint8Array(c),(r.crypto||r.msCrypto).getRandomValues(L)),U(L)}catch{var H=r.navigator,W=H&&H.plugins;return[+new Date,r,W,r.screen,U(e)]}}function U(L){return String.fromCharCode.apply(0,L)}if(ge(n.random(),e),t.exports){t.exports=I;try{S=fp}catch{}}else n["seed"+x]=I})(typeof self<"u"?self:Tt,[],Math)})(md);var K$=md.exports,J$=H$,X$=U$,G$=q$,Z$=z$,Q$=V$,Y$=W$,xu=K$;xu.alea=J$;xu.xor128=X$;xu.xorwow=G$;xu.xorshift7=Z$;xu.xor4096=Q$;xu.tychei=Y$;var eb=xu;const kp=sp(eb),Et={type:"null"},gn={type:"bool",value:!0},tn={type:"bool",value:!1},Fe=t=>({type:"num",value:t}),Yt=t=>({type:"str",value:t}),au=t=>({type:"bool",value:t}),Pp=t=>({type:"obj",value:t}),as=t=>({type:"arr",value:t}),tb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),pe=t=>({type:"fn",native:t}),rb=t=>({type:"return",value:t}),sb=()=>({type:"break",value:null}),nb=()=>({type:"continue",value:null}),ab=t=>t.type==="return"?t.value:t,xd=(t,r)=>({type:"error",value:t,info:r});function ln(t){if(t==null)throw new rr("Expect anything, but got nothing.")}function As(t){if(t==null)throw new rr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new rr(`Expect boolean, but got ${t.type}.`)}function $i(t){if(t==null)throw new rr("Expect function, but got nothing.");if(t.type!=="fn")throw new rr(`Expect function, but got ${t.type}.`)}function Nr(t){if(t==null)throw new rr("Expect string, but got nothing.");if(t.type!=="str")throw new rr(`Expect string, but got ${t.type}.`)}function ke(t){if(t==null)throw new rr("Expect number, but got nothing.");if(t.type!=="num")throw new rr(`Expect number, but got ${t.type}.`)}function pi(t){if(t==null)throw new rr("Expect object, but got nothing.");if(t.type!=="obj")throw new rr(`Expect object, but got ${t.type}.`)}function ac(t){if(t==null)throw new rr("Expect array, but got nothing.");if(t.type!=="arr")throw new rr(`Expect array, but got ${t.type}.`)}function Hc(t){return t.type==="obj"}function Bv(t){return t.type==="arr"}function Ah(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function _h(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>_h(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ch(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ch(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Ch(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function kh(t){if(t===null)return Et;if(typeof t=="boolean")return au(t);if(typeof t=="string")return Yt(t);if(typeof t=="number")return Fe(t);if(Array.isArray(t))return as(t.map(r=>kh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,kh(n));return Pp(r)}return Et}function Du(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,n=>`\\${n}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const n=[];for(const c of t.value)n.push(Du(c,!0,e));return"[ "+n.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const n=[];for(const[c,g]of t.value)n.push(`${c}: ${Du(g,!0,e)}`);return"{ "+n.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const ib={help:Yt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Yt("0.16.0"),"Core:ai":Yt("kawaii"),"Core:not":pe(([t])=>(As(t),t.value?tn:gn)),"Core:eq":pe(([t,r])=>(ln(t),ln(r),Ah(t,r)?gn:tn)),"Core:neq":pe(([t,r])=>(ln(t),ln(r),Ah(t,r)?tn:gn)),"Core:and":pe(([t,r])=>(As(t),t.value?(As(r),r.value?gn:tn):tn)),"Core:or":pe(([t,r])=>(As(t),t.value?gn:(As(r),r.value?gn:tn))),"Core:add":pe(([t,r])=>(ke(t),ke(r),Fe(t.value+r.value))),"Core:sub":pe(([t,r])=>(ke(t),ke(r),Fe(t.value-r.value))),"Core:mul":pe(([t,r])=>(ke(t),ke(r),Fe(t.value*r.value))),"Core:pow":pe(([t,r])=>{ke(t),ke(r);const e=t.value**r.value;if(isNaN(e))throw new rr("Invalid operation.");return Fe(e)}),"Core:div":pe(([t,r])=>{ke(t),ke(r);const e=t.value/r.value;if(isNaN(e))throw new rr("Invalid operation.");return Fe(e)}),"Core:mod":pe(([t,r])=>(ke(t),ke(r),Fe(t.value%r.value))),"Core:gt":pe(([t,r])=>(ke(t),ke(r),t.value>r.value?gn:tn)),"Core:lt":pe(([t,r])=>(ke(t),ke(r),t.value<r.value?gn:tn)),"Core:gteq":pe(([t,r])=>(ke(t),ke(r),t.value>=r.value?gn:tn)),"Core:lteq":pe(([t,r])=>(ke(t),ke(r),t.value<=r.value?gn:tn)),"Core:type":pe(([t])=>(ln(t),Yt(t.type))),"Core:to_str":pe(([t])=>(ln(t),Yt(Du(t)))),"Core:range":pe(([t,r])=>(ke(t),ke(r),t.value<r.value?as(Array.from({length:r.value-t.value+1},(e,n)=>Fe(n+t.value))):t.value>r.value?as(Array.from({length:t.value-r.value+1},(e,n)=>Fe(t.value-n))):as([t]))),"Core:sleep":pe(async([t])=>(ke(t),await new Promise(r=>setTimeout(r,t.value)),Et)),"Util:uuid":pe(()=>Yt(B$())),"Json:stringify":pe(([t])=>(ln(t),Yt(JSON.stringify(Ch(t))))),"Json:parse":pe(([t])=>{Nr(t);try{return kh(JSON.parse(t.value))}catch{return xd("not_json")}}),"Json:parsable":pe(([t])=>{Nr(t);try{JSON.parse(t.value)}catch{return au(!1)}return au(!0)}),"Date:now":pe(()=>Fe(Date.now())),"Date:year":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":pe(([t])=>(t&&ke(t),Fe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":pe(([t])=>(Nr(t),Fe(new Date(t.value).getTime()))),"Math:Infinity":Fe(1/0),"Math:E":Fe(Math.E),"Math:LN2":Fe(Math.LN2),"Math:LN10":Fe(Math.LN10),"Math:LOG2E":Fe(Math.LOG2E),"Math:LOG10E":Fe(Math.LOG10E),"Math:PI":Fe(Math.PI),"Math:SQRT1_2":Fe(Math.SQRT1_2),"Math:SQRT2":Fe(Math.SQRT2),"Math:abs":pe(([t])=>(ke(t),Fe(Math.abs(t.value)))),"Math:acos":pe(([t])=>(ke(t),Fe(Math.acos(t.value)))),"Math:acosh":pe(([t])=>(ke(t),Fe(Math.acosh(t.value)))),"Math:asin":pe(([t])=>(ke(t),Fe(Math.asin(t.value)))),"Math:asinh":pe(([t])=>(ke(t),Fe(Math.asinh(t.value)))),"Math:atan":pe(([t])=>(ke(t),Fe(Math.atan(t.value)))),"Math:atanh":pe(([t])=>(ke(t),Fe(Math.atanh(t.value)))),"Math:atan2":pe(([t,r])=>(ke(t),ke(r),Fe(Math.atan2(t.value,r.value)))),"Math:cbrt":pe(([t])=>(ke(t),Fe(Math.cbrt(t.value)))),"Math:ceil":pe(([t])=>(ke(t),Fe(Math.ceil(t.value)))),"Math:clz32":pe(([t])=>(ke(t),Fe(Math.clz32(t.value)))),"Math:cos":pe(([t])=>(ke(t),Fe(Math.cos(t.value)))),"Math:cosh":pe(([t])=>(ke(t),Fe(Math.cosh(t.value)))),"Math:exp":pe(([t])=>(ke(t),Fe(Math.exp(t.value)))),"Math:expm1":pe(([t])=>(ke(t),Fe(Math.expm1(t.value)))),"Math:floor":pe(([t])=>(ke(t),Fe(Math.floor(t.value)))),"Math:fround":pe(([t])=>(ke(t),Fe(Math.fround(t.value)))),"Math:hypot":pe(([t])=>{ac(t);const r=[];for(const e of t.value)ke(e),r.push(e.value);return Fe(Math.hypot(...r))}),"Math:imul":pe(([t,r])=>(ke(t),ke(r),Fe(Math.imul(t.value,r.value)))),"Math:log":pe(([t])=>(ke(t),Fe(Math.log(t.value)))),"Math:log1p":pe(([t])=>(ke(t),Fe(Math.log1p(t.value)))),"Math:log10":pe(([t])=>(ke(t),Fe(Math.log10(t.value)))),"Math:log2":pe(([t])=>(ke(t),Fe(Math.log2(t.value)))),"Math:max":pe(([t,r])=>(ke(t),ke(r),Fe(Math.max(t.value,r.value)))),"Math:min":pe(([t,r])=>(ke(t),ke(r),Fe(Math.min(t.value,r.value)))),"Math:pow":pe(([t,r])=>(ke(t),ke(r),Fe(Math.pow(t.value,r.value)))),"Math:round":pe(([t])=>(ke(t),Fe(Math.round(t.value)))),"Math:sign":pe(([t])=>(ke(t),Fe(Math.sign(t.value)))),"Math:sin":pe(([t])=>(ke(t),Fe(Math.sin(t.value)))),"Math:sinh":pe(([t])=>(ke(t),Fe(Math.sinh(t.value)))),"Math:sqrt":pe(([t])=>{ke(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new rr("Invalid operation.");return Fe(r)}),"Math:tan":pe(([t])=>(ke(t),Fe(Math.tan(t.value)))),"Math:tanh":pe(([t])=>(ke(t),Fe(Math.tanh(t.value)))),"Math:trunc":pe(([t])=>(ke(t),Fe(Math.trunc(t.value)))),"Math:rnd":pe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Fe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Fe(Math.random())),"Math:gen_rng":pe(([t])=>{if(ln(t),t.type!=="num"&&t.type!=="str")return Et;const r=kp(t.value.toString());return pe(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Fe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Fe(r()))}),"Num:to_hex":pe(([t])=>(ke(t),Yt(t.value.toString(16)))),"Num:from_hex":pe(([t])=>(Nr(t),Fe(parseInt(t.value,16)))),"Str:lf":Yt(`
`),"Str:lt":pe(([t,r])=>(Nr(t),Nr(r),t.value<r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:gt":pe(([t,r])=>(Nr(t),Nr(r),t.value>r.value?Fe(-1):t.value===r.value?Fe(0):Fe(1))),"Str:from_codepoint":pe(([t])=>(ke(t),Yt(String.fromCodePoint(t.value)))),"Obj:keys":pe(([t])=>(pi(t),as(Array.from(t.value.keys()).map(r=>Yt(r))))),"Obj:vals":pe(([t])=>(pi(t),as(Array.from(t.value.values())))),"Obj:kvs":pe(([t])=>(pi(t),as(Array.from(t.value.entries()).map(([r,e])=>as([Yt(r),e]))))),"Obj:get":pe(([t,r])=>(pi(t),Nr(r),t.value.get(r.value)??Et)),"Obj:set":pe(([t,r,e])=>(pi(t),Nr(r),ln(e),t.value.set(r.value,e),Et)),"Obj:has":pe(([t,r])=>(pi(t),Nr(r),au(t.value.has(r.value)))),"Obj:copy":pe(([t])=>(pi(t),Pp(new Map(t.value)))),"Async:interval":pe(async([t,r,e],n)=>{ke(t),$i(r),e&&(As(e),e.value&&n.call(r,[]));const c=setInterval(()=>{n.topCall(r,[])},t.value),g=()=>{clearInterval(c)};return n.registerAbortHandler(g),pe(([],$)=>{clearInterval(c),$.unregisterAbortHandler(g)})}),"Async:timeout":pe(async([t,r],e)=>{ke(t),$i(r);const n=setTimeout(()=>{e.topCall(r,[])},t.value),c=()=>{clearTimeout(n)};return e.registerAbortHandler(c),pe(([],g)=>{clearTimeout(n),g.unregisterAbortHandler(c)})})};var $u={},lb=()=>{const t="\\ud800-\\udfff",r="\\u0300-\\u036f",e="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",c="\\u1ab0-\\u1aff",g="\\u1dc0-\\u1dff",$=r+e+n+c+g,x="\\ufe0e\\ufe0f",m="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",A=`[${t}]`,C=`[${$}]`,P="\\ud83c[\\udffb-\\udfff]",S=`(?:${C}|${P})`,I=`[^${t}]`,G="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",re="\\u200d",ge="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",q=`[${m}]`,U=`${S}?`,L=`[${x}]?`,H=`(?:${re}(?:${[I,G,ee].join("|")})${L+U})*`,W=L+U+H,J=`(?:${[`${I}${C}?`,C,G,ee,A,q].join("|")})`;return new RegExp(`${ge}|${P}(?=${P})|${J+W}`,"g")},ob=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty($u,"__esModule",{value:!0});var Ac=ob(lb);function Ph(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(Ac.default())||[]}var Xu=$u.toArray=Ph;function Ep(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(Ac.default());return r===null?0:r.length}var Mp=$u.length=Ep;function $d(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var n=t.match(Ac.default());return n?n.slice(r,e).join(""):""}var Sp=$u.substring=$d;function ub(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var n=Ep(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=n)return"";r<0&&(r+=n);var c;typeof e>"u"?c=n:(typeof e!="number"&&(e=parseInt(e,10)),c=e>=0?e+r:r);var g=t.match(Ac.default());return g?g.slice(r,c).join(""):""}$u.substr=ub;function fb(t,r,e,n){if(r===void 0&&(r=16),e===void 0&&(e="#"),n===void 0&&(n="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(n)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var c=Ep(t);if(c>r)return $d(t,0,r);if(c<r){var g=e.repeat(r-c);return n==="left"?g+t:t+g}return t}$u.limit=fb;function cb(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var n=Ph(t);if(e>=n.length)return r===""?n.length:-1;if(r==="")return e;var c=Ph(r),g=!1,$;for($=e;$<n.length;$+=1){for(var x=0;x<c.length&&c[x]===n[$+x];)x+=1;if(x===c.length&&c[x-1]===n[$+x-1]){g=!0;break}}return g?$:-1}var Fp=$u.indexOf=cb;const Hv={num:{to_str:t=>pe(async(r,e)=>Yt(t.value.toString()))},str:{to_num:t=>pe(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Et:Fe(n)}),len:t=>Fe(Mp(t.value)),replace:t=>pe(async([r,e],n)=>(Nr(r),Nr(e),Yt(t.value.split(r.value).join(e.value)))),index_of:t=>pe(async([r],e)=>(Nr(r),Fe(Fp(t.value,r.value)))),incl:t=>pe(async([r],e)=>(Nr(r),t.value.includes(r.value)?gn:tn)),trim:t=>pe(async(r,e)=>Yt(t.value.trim())),upper:t=>pe(async(r,e)=>Yt(t.value.toUpperCase())),lower:t=>pe(async(r,e)=>Yt(t.value.toLowerCase())),split:t=>pe(async([r],e)=>(r&&Nr(r),as(r?t.value.split(r?r.value:"").map(n=>Yt(n)):Xu(t.value).map(n=>Yt(n))))),slice:t=>pe(async([r,e],n)=>(ke(r),ke(e),Yt(Sp(t.value,r.value,e.value)))),pick:t=>pe(async([r],e)=>{ke(r);const c=Xu(t.value)[r.value];return c?Yt(c):Et}),codepoint_at:t=>pe(([r],e)=>{ke(r);const n=t.value.charCodeAt(r.value);return Number.isNaN(n)?Et:Fe(n)})},arr:{len:t=>Fe(t.value.length),push:t=>pe(async([r],e)=>(ln(r),t.value.push(r),t)),unshift:t=>pe(async([r],e)=>(ln(r),t.value.unshift(r),t)),pop:t=>pe(async(r,e)=>t.value.pop()??Et),shift:t=>pe(async(r,e)=>t.value.shift()??Et),concat:t=>pe(async([r],e)=>(ac(r),as(t.value.concat(r.value)))),slice:t=>pe(async([r,e],n)=>(ke(r),ke(e),as(t.value.slice(r.value,e.value)))),join:t=>pe(async([r],e)=>(r&&Nr(r),Yt(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>pe(async([r],e)=>{$i(r);const n=t.value.map(async(c,g)=>await e.call(r,[c,Fe(g)]));return as(await Promise.all(n))}),filter:t=>pe(async([r],e)=>{$i(r);const n=[];for(let c=0;c<t.value.length;c++){const g=t.value[c],$=await e.call(r,[g,Fe(c)]);As($),$.value&&n.push(g)}return as(n)}),reduce:t=>pe(async([r,e],n)=>{$i(r);const c=e!=null;let g=c?e:t.value[0];for(let $=c?0:1;$<t.value.length;$++){const x=t.value[$];g=await n.call(r,[g,x,Fe($)])}return g}),find:t=>pe(async([r],e)=>{$i(r);for(let n=0;n<t.value.length;n++){const c=t.value[n],g=await e.call(r,[c,Fe(n)]);if(As(g),g.value)return c}return Et}),incl:t=>pe(async([r],e)=>(ln(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?tn:(c=>c.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?gn:tn)),reverse:t=>pe(async(r,e)=>(t.value.reverse(),Et)),copy:t=>pe(async(r,e)=>as([...t.value])),sort:t=>pe(async([r],e)=>{const n=async(g,$)=>{if(g.length<=1)return g;const x=Math.floor(g.length/2),m=await n(g.slice(0,x),$),A=await n(g.slice(x),$);return c(m,A,$)},c=async(g,$,x)=>{const m=[];let A=0,C=0;for(;A<g.length&&C<$.length;){const P=g[A],S=$[C],I=await e.call(x,[P,S]);ke(I),I.value<0?(m.push(g[A]),A++):(m.push($[C]),C++)}return m.concat(g.slice(A)).concat($.slice(C))};return $i(r),ac(t),t.value=await n(t.value,r),t})},error:{name:t=>Yt(t.value),info:t=>t.info??Et}};function hb(t,r){if(Object.hasOwn(Hv,t.type)){const e=Hv[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new rr(`No such prop (${r}) in ${t.type}.`)}else throw new rr(`Cannot read prop of ${t.type}. (reading ${r})`)}const pb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Es=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};const bd=300,vb=bd-1;let hs=class{constructor(r,e={}){be(this,"opts");be(this,"stepCount",0);be(this,"stop",!1);be(this,"scope");be(this,"abortHandlers",[]);be(this,"vars",{});this.opts=e;const n={print:pe(([c])=>{ln(c),this.opts.out&&this.opts.out(c)}),readline:pe(async c=>{const g=c[0];if(Nr(g),this.opts.in==null)return Et;const $=await this.opts.in(g.value);return Yt($)})};this.vars=Object.fromEntries(Object.entries({...r,...ib,...n}).map(([c,g])=>[c,pb.const(g)])),this.scope=new oi([new Map(Object.entries(this.vars))]),this.scope.opts.log=(c,g)=>{switch(c){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(n=>(this.handleError(n),xd("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(c){switch(c.type){case"arr":return c.value.map(g=>e(g));case"bool":return c.value;case"null":return null;case"num":return c.value;case"obj":{const g={};for(const[$,x]of c.value.entries())g[$]=e(x);return g}case"str":return c.value;default:return}}const n=new Map;for(const c of r)switch(c.type){case"meta":{n.set(c.name,e(c.value));break}}return n}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof bc?this.opts.err(r):this.opts.err(new I$(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{if(n.mut)throw new Error("Namespaces cannot include mutable variable: "+n.name);const c={isMutable:n.mut,value:await this._eval(n.expr,e)};e.add(n.name,c),this.scope.add(r.name+":"+n.name,c);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Et;{const n=new Map;for(let g=0;g<(r.args??[]).length;g++)n.set(r.args[g],{isMutable:!0,value:e[g]});const c=r.scope.createChildScope(n);return ab(await this._run(r.statements,c))}}async _eval(r,e){if(this.stop)return Et;if(this.stepCount%bd===vb&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new rr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);$i(n);const c=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(n,c)}case"if":{const n=await this._eval(r.cond,e);if(As(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const c of r.elseif){const g=await this._eval(c.cond,e);if(As(g),g.value)return this._eval(c.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Et}case"match":{const n=await this._eval(r.about,e);for(const c of r.qs){const g=await this._eval(c.q,e);if(Ah(n,g))return await this._eval(c.a,e)}return r.default?await this._eval(r.default,e):Et}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Et}case"for":{if(r.times){const n=await this._eval(r.times,e);ke(n);for(let c=0;c<n.value;c++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const n=await this._eval(r.from,e),c=await this._eval(r.to,e);ke(n),ke(c);for(let g=n.value;g<n.value+c.value;g++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Fe(g)}]])));if($.type==="break")break;if($.type==="return")return $}}return Et}case"each":{const n=await this._eval(r.items,e);ac(n);for(const c of n.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:c}]])));if(g.type==="break")break;if(g.type==="return")return g}return Et}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const c=[];for(const g of r.attr)c.push({name:g.name,value:await this._eval(g.value,e)});n.attr=c}return e.add(r.name,{isMutable:r.mut,value:n}),Et}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Et}case"addAssign":{const n=await this._eval(r.dest,e);ke(n);const c=await this._eval(r.expr,e);return ke(c),await this.assign(e,r.dest,Fe(n.value+c.value)),Et}case"subAssign":{const n=await this._eval(r.dest,e);ke(n);const c=await this._eval(r.expr,e);return ke(c),await this.assign(e,r.dest,Fe(n.value-c.value)),Et}case"null":return Et;case"bool":return au(r.value);case"num":return Fe(r.value);case"str":return Yt(r.value);case"arr":return as(await Promise.all(r.value.map(n=>this._eval(n,e))));case"obj":{const n=new Map;for(const c of r.value.keys())n.set(c,await this._eval(r.value.get(c),e));return Pp(n)}case"prop":{const n=await this._eval(r.target,e);return Hc(n)?n.value.has(r.name)?n.value.get(r.name):Et:hb(n,r.name)}case"index":{const n=await this._eval(r.target,e),c=await this._eval(r.index,e);if(Bv(n)){ke(c);const g=n.value[c.value];if(g===void 0)throw new T$(`Index out of range. index: ${c.value} max: ${n.value.length-1}`);return g}else{if(Hc(n))return Nr(c),n.value.has(c.value)?n.value.get(c.value):Et;throw new rr(`Cannot read prop (${Du(c)}) of ${n.type}.`)}}case"not":{const n=await this._eval(r.expr,e);return As(n),au(!n.value)}case"fn":return tb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return au(e.exists(r.identifier.name));case"tmpl":{let n="";for(const c of r.tmpl)if(typeof c=="string")n+=c;else{const g=await this._eval(c,e);n+=Du(g)}return Yt(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),rb(n)}case"break":return this.log("block:break",{scope:e.name}),sb();case"continue":return this.log("block:continue",{scope:e.name}),nb();case"ns":return Et;case"meta":return Et;case"and":{const n=await this._eval(r.left,e);if(As(n),n.value){const c=await this._eval(r.right,e);return As(c),c}else return n}case"or":{const n=await this._eval(r.left,e);if(As(n),n.value)return n;{const c=await this._eval(r.right,e);return As(c),c}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Et;for(let c=0;c<r.length;c++){const g=r[c];if(n=await this._eval(g,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const c=await this._eval(e.target,r),g=await this._eval(e.index,r);if(Bv(c))ke(g),c.value[g.value]=n;else if(Hc(c))Nr(g),c.value.set(g.value,n);else throw new rr(`Cannot read prop (${Du(g)}) of ${c.type}.`)}else if(e.type==="prop"){const c=await this._eval(e.target,r);pi(c),c.value.set(e.name,n)}else throw new rr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Es([$r],hs.prototype,"exec",null);Es([$r],hs.prototype,"execFn",null);Es([$r],hs.prototype,"execFnSimple",null);Es([$r],hs.prototype,"handleError",null);Es([$r],hs.prototype,"log",null);Es([$r],hs.prototype,"collectNs",null);Es([$r],hs.prototype,"collectNsMember",null);Es([$r],hs.prototype,"_fn",null);Es([$r],hs.prototype,"_eval",null);Es([$r],hs.prototype,"_run",null);Es([$r],hs.prototype,"registerAbortHandler",null);Es([$r],hs.prototype,"unregisterAbortHandler",null);Es([$r],hs.prototype,"abort",null);Es([$r],hs.prototype,"assign",null);Es([$r],hs,"collectMetadata",null);function gb(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function iu(t,r,e,n){var c=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(c,iu.prototype),c.expected=r,c.found=e,c.location=n,c.name="SyntaxError",c}gb(iu,Error);function Uc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}iu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var c=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(c):c,$=this.location.source+":"+g.line+":"+g.column;if(e){var x=this.location.end,m=Uc("",g.line.toString().length," "),A=e[c.line-1],C=c.line===x.line?x.column:A.length+1,P=C-c.column||1;r+=`
 --> `+$+`
`+m+` |
`+g.line+" | "+A+`
`+m+" | "+Uc("",c.column-1," ")+Uc("",P,"^")}else r+=`
 at `+$}return r};iu.buildMessage=function(t,r){var e={literal:function(A){return'"'+c(A.text)+'"'},class:function(A){var C=A.parts.map(function(P){return Array.isArray(P)?g(P[0])+"-"+g(P[1]):g(P)});return"["+(A.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function n(A){return A.charCodeAt(0).toString(16).toUpperCase()}function c(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function g(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function $(A){return e[A.type](A)}function x(A){var C=A.map($),P,S;if(C.sort(),C.length>0){for(P=1,S=1;P<C.length;P++)C[P-1]!==C[P]&&(C[S]=C[P],S++);C.length=S}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function m(A){return A?'"'+c(A)+'"':"end of input"}return"Expected "+x(t)+" but "+m(r)+" found."};function Uv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,c={Preprocess:Sa,Main:ys},g=Sa,$="//",x="/*",m="*/",A="(",C=")",P="::",S="{",I="}",G="###",ee="let",re=":",ge="=",q="var",U="<:",L="#[",H="]",W="each",V=",",J="for",Y="return",ue="loop",de="break",le="continue",Ie="+=",ze="-=",mt="\\",Ke="||",ft="&&",je="==",ut="!=",jt="<=",Rt=">=",Ye="<",Br=">",Wt="+",Ar="-",Ft="*",br="^",Hr="/",Or="%",Rr="!",Dt="[",z=".",Z="if",se="elif",ve="else",ye="match",oe="=>",Ne="eval",me="exists",$e="`",he='"',Le="'",Re='\\"',He="\\'",We="true",Ze="false",at="null",it=";",bt="@",Kt="@(",Ct=`\r
`,sr=/^[A-Z0-9_:]/i,Ns=/^[^`{]/,rs=/^[{}`]/,Lt=/^[+\-]/,vt=/^[1-9]/,qt=/^[0-9]/,Zn=/^[A-Z_]/i,Qn=/^[A-Z0-9_]/i,Ii=/^[\r\n]/,Ti=/^[ \t\r\n]/,or=/^[ \t]/,ur=Js(),ji=ae("//",!1),xn=ae("/*",!1),_r=ae("*/",!1),Ot=ae("(",!1),Cr=ae(")",!1),fr=ae("::",!1),tt=ae("{",!1),Jt=ae("}",!1),zr=ae("###",!1),xt=ae("let",!1),$t=ae(":",!1),ps=ae("=",!1),Ri=ae("var",!1),Di=ae("<:",!1),Is=ae("#[",!1),vs=ae("]",!1),At=ae("each",!1),gt=ae(",",!1),Ts=ae("for",!1),gr=ae("return",!1),dr=Bt([["A","Z"],["0","9"],"_",":"],!1,!0),Li=ae("loop",!1),Bi=ae("break",!1),Hi=ae("continue",!1),Ui=ae("+=",!1),Yn=ae("-=",!1),ea=ae("\\",!1),qi=ae("||",!1),zi=ae("&&",!1),Vi=ae("==",!1),Wi=ae("!=",!1),Ki=ae("<=",!1),ta=ae(">=",!1),$n=ae("<",!1),ra=ae(">",!1),Ji=ae("+",!1),sa=ae("-",!1),na=ae("*",!1),Xi=ae("^",!1),Gi=ae("/",!1),Zi=ae("%",!1),bn=ae("!",!1),gs=ae("[",!1),An=ae(".",!1),Qi=ae("if",!1),Yi=ae("elif",!1),el=ae("else",!1),js=ae("match",!1),Rs=ae("=>",!1),Ds=ae("eval",!1),tl=ae("exists",!1),Ls=ae("`",!1),Bs=Bt(["`","{"],!0,!1),Hs=Bt(["{","}","`"],!1,!1),Us=ae('"',!1),qs=ae("'",!1),zs=ae('\\"',!1),aa=ae("\\'",!1),Nt=Bt(["+","-"],!1,!1),ia=Bt([["1","9"]],!1,!1),cr=Bt([["0","9"]],!1,!1),rl=ae("true",!1),Vs=ae("false",!1),sl=ae("null",!1),ds=ae(";",!1),nl=ae("@",!1),_n=ae("@(",!1),al=Bt([["A","Z"],"_"],!1,!0),la=Bt([["A","Z"],["0","9"],"_"],!1,!0),il=ae(`\r
`,!1),ll=Bt(["\r",`
`],!1,!1),ol=Bt([" ","	","\r",`
`],!1,!1),ul=Bt([" ","	"],!1,!1),fl=function(s){return s.join("")},cl=function(){return te()},hl=function(){return te()},pl=function(){return""},oa=function(){return""},vl=function(s){return s??[]},Cn=function(s,o){return o},gl=function(s,o){return[s,...o]},kn=function(s,o){return o},dl=function(s,o){return[s,...o]},ua=function(s,o){return o},yl=function(s,o){return[s,...o]},wl=function(s){return s},ml=function(s,o){return h("ns",{name:s,members:o})},xl=function(s,o){return h("meta",{name:s,value:o})},$l=function(s){return h("meta",{name:null,value:s})},bl=function(s,o,p){return h("def",{name:s,varType:o,expr:p,mut:!1,attr:[]})},Al=function(s,o,p){return h("def",{name:s,varType:o,expr:p,mut:!0,attr:[]})},_l=function(s){return h("identifier",{name:"print",chain:[h("callChain",{args:[s]})]})},Cl=function(s,o){return h("attr",{name:s,value:o??h("bool",{value:!0})})},kl=function(s,o,p){return h("each",{var:s,items:o,for:p})},Pl=function(s,o,p){return h("each",{var:s,items:o,for:p})},El=function(s,o){return o},Ml=function(s,o,p,u){return h("for",{var:s,from:o??h("num",{value:0}),to:p,for:u})},Sl=function(s,o){return o},Fl=function(s,o,p,u){return h("for",{var:s,from:o??h("num",{value:0}),to:p,for:u})},Ol=function(s,o){return h("for",{times:s,for:o})},Nl=function(s,o){return h("for",{times:s,for:o})},Il=function(s){return h("return",{expr:s})},Tl=function(s){return h("loop",{statements:s})},jl=function(){return h("break",{})},fa=function(){return h("continue",{})},Rl=function(s,o,p){return o==="+="?h("addAssign",{dest:s,expr:p}):o==="-="?h("subAssign",{dest:s,expr:p}):h("assign",{dest:s,expr:p})},ca=function(s,o,p){return{op:o,term:p}},Dl=function(s,o){return h("infix",{operands:[s,...o.map(p=>p.term)],operators:o.map(p=>p.op)})},Ll=function(){return te()},Bl=function(s){return h("not",{expr:s})},ha=function(s,o){return{...s,chain:o}},Hl=function(s){return h("callChain",{args:s??[]})},pa=function(s,o){return o},Ul=function(s,o){return[s,...o]},ql=function(s){return h("indexChain",{index:s})},zl=function(s){return h("propChain",{name:s})},Vl=function(s,o,p,u){return h("if",{cond:s,then:o,elseif:p??[],else:u})},Wl=function(s,o){return[s,...o]},va=function(s,o){return{cond:s,then:o}},Kl=function(s){return s},ga=function(s,o,p){return{q:o,a:p}},Jl=function(s,o,p){return h("match",{about:s,qs:o??[],default:p})},Xl=function(s){return h("block",{statements:s})},Gl=function(s){return h("exists",{identifier:s})},da=function(s){return h("identifier",{name:s})},Zl=function(s){return h("tmpl",{tmpl:s})},ya=function(s){return s.join("")},wa=function(s){return s},Ql=function(s){return h("str",{value:s.join("")})},ma=function(s){return s},Yl=function(s){return h("str",{value:s.join("")})},eo=function(){return'"'},to=function(){return"'"},ro=function(){return h("num",{value:parseFloat(te())})},so=function(){return h("num",{value:parseFloat(te())})},no=function(){return h("num",{value:parseInt(te(),10)})},ao=function(){return h("num",{value:parseInt(te(),10)})},xa=function(){return h("bool",{value:!0})},io=function(){return h("bool",{value:!1})},$a=function(){return h("null",{})},ba=function(s,o){return{k:s,v:o}},lo=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return h("obj",{value:o})},Aa=function(s){return s},oo=function(s){return h("arr",{value:s})},uo=function(s,o){return{name:s,argType:o}},_a=function(s,o){return[s,...o]},fo=function(s,o,p,u,d,v){return(s.length>0||p.length>0)&&wo("Cannot use spaces before or after the function name."),h("def",{name:o,expr:h("fn",{args:u??[],retType:d},v??[]),mut:!1,attr:[]})},Ca=function(s,o,p){return h("fn",{args:s??[],retType:o},p??[])},ka=function(s){return s},co=function(s){return h("arr",{value:s})},Pa=function(s,o){return{k:s,v:o}},ho=function(s){const o=new Map;for(const p of s)o.set(p.k,p.v);return h("obj",{value:o})},po=function(s,o){return h("fnTypeSource",{args:s??[],result:o})},vo=function(s,o){return[s,...o]},go=function(s,o){return h("namedTypeSource",{name:s,inner:o})},yo=function(s){return h("namedTypeSource",{name:s,inner:null})},i=function(){return te()},X=function(){return te()},Ws=function(s){return h("block",{statements:s??[]})},a=0,K=0,E=[{line:1,column:1}],T=0,Vr=[],k=0,R={},Ks;if("startRule"in r){if(!(r.startRule in c))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=c[r.startRule]}function te(){return t.substring(K,a)}function Xt(){return Xs(K,a)}function wo(s,o){throw o=o!==void 0?o:Xs(K,a),Ma(s,o)}function ae(s,o){return{type:"literal",text:s,ignoreCase:o}}function Bt(s,o,p){return{type:"class",parts:s,inverted:o,ignoreCase:p}}function Js(){return{type:"any"}}function N(){return{type:"end"}}function Ea(s){var o=E[s],p;if(o)return o;for(p=s-1;!E[p];)p--;for(o=E[p],o={line:o.line,column:o.column};p<s;)t.charCodeAt(p)===10?(o.line++,o.column=1):o.column++,p++;return E[s]=o,o}function Xs(s,o,p){var u=Ea(s),d=Ea(o),v={source:n,start:{offset:s,line:u.line,column:u.column},end:{offset:o,line:d.line,column:d.column}};return p&&n&&typeof n.offset=="function"&&(v.start=n.offset(v.start),v.end=n.offset(v.end)),v}function O(s){a<T||(a>T&&(T=a,Vr=[]),Vr.push(s))}function Ma(s,o){return new iu(s,null,null,o)}function mo(s,o,p){return new iu(iu.buildMessage(s,o),s,o,p)}function Sa(){var s,o,p,u=a*77+0,d=R[u];if(d)return a=d.nextPos,d.result;for(s=a,o=[],p=Fa();p!==e;)o.push(p),p=Fa();return K=s,o=fl(o),s=o,R[u]={nextPos:a,result:s},s}function Fa(){var s,o,p=a*77+1,u=R[p];return u?(a=u.nextPos,u.result):(s=a,o=Zs(),o!==e&&(K=s,o=cl()),s=o,s===e&&(s=a,o=In(),o!==e&&(K=s,o=hl()),s=o,s===e&&(s=xo(),s===e&&(t.length>a?(s=t.charAt(a),a++):(s=e,k===0&&O(ur))))),R[p]={nextPos:a,result:s},s)}function xo(){var s,o,p,u,d,v,b=a*77+2,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,2)===$?(o=$,a+=2):(o=e,k===0&&O(ji)),o!==e){for(p=[],u=a,d=a,k++,v=l(),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,v=l(),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);K=s,s=pl()}else a=s,s=e;if(s===e)if(s=a,t.substr(a,2)===x?(o=x,a+=2):(o=e,k===0&&O(xn)),o!==e){for(p=[],u=a,d=a,k++,t.substr(a,2)===m?(v=m,a+=2):(v=e,k===0&&O(_r)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.substr(a,2)===m?(v=m,a+=2):(v=e,k===0&&O(_r)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur)),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);t.substr(a,2)===m?(u=m,a+=2):(u=e,k===0&&O(_r)),u!==e?(K=s,s=oa()):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function ys(){var s,o,p,u,d,v=a*77+3,b=R[v];if(b)return a=b.nextPos,b.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();for(p=Pn(),p===e&&(p=null),u=[],d=f();d!==e;)u.push(d),d=f();return K=s,s=vl(p),R[v]={nextPos:a,result:s},s}function Pn(){var s,o,p,u,d,v,b,w,M=a*77+4,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=De(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=De(),w!==e?(K=u,u=Cn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=De(),w!==e?(K=u,u=Cn(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=gl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function En(){var s,o,p,u,d,v,b,w,M=a*77+5,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=Wr(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Wr(),w!==e?(K=u,u=kn(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Wr(),w!==e?(K=u,u=kn(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=dl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function yr(){var s,o,p,u,d,v,b,w,M=a*77+6,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=Kr(),o!==e){for(p=[],u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Kr(),w!==e?(K=u,u=ua(o,w)):(a=u,u=e)}else a=u,u=e;for(;u!==e;){for(p.push(u),u=a,d=[],v=y();v!==e;)d.push(v),v=y();if(v=ie(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Kr(),w!==e?(K=u,u=ua(o,w)):(a=u,u=e)}else a=u,u=e}K=s,s=yl(o,p)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function De(){var s,o=a*77+7,p=R[o];return p?(a=p.nextPos,p.result):(s=Na(),s===e&&(s=$o(),s===e&&(s=Kr())),R[o]={nextPos:a,result:s},s)}function Wr(){var s,o=a*77+8,p=R[o];return p?(a=p.nextPos,p.result):(s=Ia(),s===e&&(s=Gt(),s===e&&(s=Na())),R[o]={nextPos:a,result:s},s)}function Kr(){var s,o=a*77+9,p=R[o];return p?(a=p.nextPos,p.result):(s=Ia(),s===e&&(s=Gt(),s===e&&(s=bo(),s===e&&(s=ko(),s===e&&(s=Ao(),s===e&&(s=_o(),s===e&&(s=Co(),s===e&&(s=Po(),s===e&&(s=Eo(),s===e&&(s=Pr(),s===e&&(s=Ta(),s===e&&(s=Te()))))))))))),R[o]={nextPos:a,result:s},s)}function Te(){var s,o=a*77+10,p=R[o];return p?(a=p.nextPos,p.result):(s=Mo(),s===e&&(s=ws()),R[o]={nextPos:a,result:s},s)}function ws(){var s,o=a*77+11,p=R[o];return p?(a=p.nextPos,p.result):(s=Oo(),s===e&&(s=Do(),s===e&&(s=ja(),s===e&&(s=Oa()))),R[o]={nextPos:a,result:s},s)}function Oa(){var s,o,p,u,d,v,b=a*77+12,w=R[b];if(w)return a=w.nextPos,w.result;if(s=Da(),s===e&&(s=La(),s===e&&(s=Ba(),s===e&&(s=Zs(),s===e&&(s=In(),s===e&&(s=za(),s===e&&(s=Wa(),s===e&&(s=Rn(),s===e&&(s=Ka(),s===e&&(s=Ro(),s===e&&(s=So(),s===e&&(s=Ha(),s===e))))))))))))if(s=a,t.charCodeAt(a)===40?(o=A,a++):(o=e,k===0&&O(Ot)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e?(K=s,s=wl(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function kr(){var s,o=a*77+13,p=R[o];return p?(a=p.nextPos,p.result):(s=za(),s===e&&(s=In(),s===e&&(s=Wa(),s===e&&(s=Lo(),s===e&&(s=Bo(),s===e&&(s=Rn()))))),R[o]={nextPos:a,result:s},s)}function Na(){var s,o,p,u,d,v,b,w,M,F,D=a*77+14,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===P?(o=P,a+=2):(o=e,k===0&&O(fr)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(t.charCodeAt(a)===123?(v=S,a++):(v=e,k===0&&O(tt)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(w=En(),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();t.charCodeAt(a)===125?(F=I,a++):(F=e,k===0&&O(Jt)),F!==e?(K=s,s=ml(u,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function $o(){var s,o,p,u,d,v,b=a*77+15,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.substr(a,3)===G?(o=G,a+=3):(o=e,k===0&&O(zr)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=qe(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();v=kr(),v!==e?(K=s,s=xl(u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===G?(o=G,a+=3):(o=e,k===0&&O(zr)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();u=kr(),u!==e?(K=s,s=$l(u)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ia(){var s,o,p,u,d,v,b,w,M,F=a*77+16,D=R[F];if(D)return a=D.nextPos,D.result;if(s=a,t.substr(a,3)===ee?(o=ee,a+=3):(o=e,k===0&&O(xt)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===58?(b=re,a++):(b=e,k===0&&O($t)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Ue(),M!==e?d=M:(a=d,d=e)}else a=d,d=e;for(d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===61?(b=ge,a++):(b=e,k===0&&O(ps)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Te(),M!==e?(K=s,s=bl(u,d,M)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===q?(o=q,a+=3):(o=e,k===0&&O(Ri)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===58?(b=re,a++):(b=e,k===0&&O($t)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Ue(),M!==e?d=M:(a=d,d=e)}else a=d,d=e;for(d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===61?(b=ge,a++):(b=e,k===0&&O(ps)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();M=Te(),M!==e?(K=s,s=Al(u,d,M)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[F]={nextPos:a,result:s},s}function bo(){var s,o,p,u,d=a*77+17,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,2)===U?(o=U,a+=2):(o=e,k===0&&O(Di)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();u=Te(),u!==e?(K=s,s=_l(u)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Ao(){var s,o,p,u,d,v,b,w=a*77+18,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,t.substr(a,2)===L?(o=L,a+=2):(o=e,k===0&&O(Is)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=qe(),u!==e){for(d=a,v=[],b=f();b!==e;)v.push(b),b=f();for(b=kr(),b!==e?d=b:(a=d,d=e),d===e&&(d=null),v=[],b=f();b!==e;)v.push(b),b=f();t.charCodeAt(a)===93?(b=H,a++):(b=e,k===0&&O(vs)),b!==e?(K=s,s=Cl(u,d)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[w]={nextPos:a,result:s},s}function _o(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+19,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.substr(a,4)===W?(o=W,a+=4):(o=e,k===0&&O(At)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(t.substr(a,3)===ee?(d=ee,a+=3):(d=e,k===0&&O(xt)),d!==e){if(v=[],b=f(),b!==e)for(;b!==e;)v.push(b),b=f();else v=e;if(v!==e)if(b=qe(),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();for(t.charCodeAt(a)===44?(M=V,a++):(M=e,k===0&&O(gt)),M===e&&(M=null),F=[],D=f();D!==e;)F.push(D),D=f();if(D=Te(),D!==e)if(t.charCodeAt(a)===41?(B=C,a++):(B=e,k===0&&O(Cr)),B!==e){for(Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();xe=Ae(),xe!==e?(K=s,s=kl(b,D,xe)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,4)===W?(o=W,a+=4):(o=e,k===0&&O(At)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,k===0&&O(xt)),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();if(F=Te(),F!==e){if(D=[],B=f(),B!==e)for(;B!==e;)D.push(B),B=f();else D=e;D!==e?(B=Ae(),B!==e?(K=s,s=Pl(v,F,B)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Co(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe=a*77+20,Ge=R[Xe];if(Ge)return a=Ge.nextPos,Ge.result;if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(t.substr(a,3)===ee?(d=ee,a+=3):(d=e,k===0&&O(xt)),d!==e){if(v=[],b=f(),b!==e)for(;b!==e;)v.push(b),b=f();else v=e;if(v!==e)if(b=qe(),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();if(M=a,t.charCodeAt(a)===61?(F=ge,a++):(F=e,k===0&&O(ps)),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();B=Te(),B!==e?(K=M,M=El(b,B)):(a=M,M=e)}else a=M,M=e;for(M===e&&(M=null),t.charCodeAt(a)===44?(F=V,a++):(F=e,k===0&&O(gt)),F===e&&(F=null),D=[],B=f();B!==e;)D.push(B),B=f();if(B=Te(),B!==e)if(t.charCodeAt(a)===41?(Q=C,a++):(Q=e,k===0&&O(Cr)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();ne=Ae(),ne!==e?(K=s,s=Ml(b,M,B,ne)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(t.substr(a,3)===ee?(u=ee,a+=3):(u=e,k===0&&O(xt)),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(w=a,t.charCodeAt(a)===61?(M=ge,a++):(M=e,k===0&&O(ps)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();D=Te(),D!==e?(K=w,w=Sl(v,D)):(a=w,w=e)}else a=w,w=e;for(w===e&&(w=null),t.charCodeAt(a)===44?(M=V,a++):(M=e,k===0&&O(gt)),M===e&&(M=null),F=[],D=f();D!==e;)F.push(D),D=f();if(D=Te(),D!==e){if(B=[],Q=f(),Q!==e)for(;Q!==e;)B.push(Q),Q=f();else B=e;B!==e?(Q=Ae(),Q!==e?(K=s,s=Fl(v,w,D,Q)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===40?(u=A,a++):(u=e,k===0&&O(Ot)),u!==e)if(d=Te(),d!==e)if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();w=Ae(),w!==e?(K=s,s=Ol(d,w)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,t.substr(a,3)===J?(o=J,a+=3):(o=e,k===0&&O(Ts)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;d!==e?(v=Ae(),v!==e?(K=s,s=Nl(u,v)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e}}return R[Xe]={nextPos:a,result:s},s}function ko(){var s,o,p,u,d,v=a*77+21,b=R[v];if(b)return a=b.nextPos,b.result;if(s=a,t.substr(a,6)===Y?(o=Y,a+=6):(o=e,k===0&&O(gr)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();d=Te(),d!==e?(K=s,s=Il(d)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[v]={nextPos:a,result:s},s}function Po(){var s,o,p,u,d,v,b,w,M=a*77+22,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,t.substr(a,4)===ue?(o=ue,a+=4):(o=e,k===0&&O(Li)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=S,a++):(u=e,k===0&&O(tt)),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();if(v=yr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();t.charCodeAt(a)===125?(w=I,a++):(w=e,k===0&&O(Jt)),w!==e?(K=s,s=Tl(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Eo(){var s,o,p,u,d=a*77+23,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===de?(o=de,a+=5):(o=e,k===0&&O(Bi)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=jl()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Pr(){var s,o,p,u,d=a*77+24,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,8)===le?(o=le,a+=8):(o=e,k===0&&O(Hi)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=fa()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Ta(){var s,o,p,u,d,v,b=a*77+25,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.substr(a,2)===Ie?(u=Ie,a+=2):(u=e,k===0&&O(Ui)),u===e&&(t.substr(a,2)===ze?(u=ze,a+=2):(u=e,k===0&&O(Yn)),u===e&&(t.charCodeAt(a)===61?(u=ge,a++):(u=e,k===0&&O(ps)))),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();v=Te(),v!==e?(K=s,s=Rl(o,u,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Mo(){var s,o,p,u,d,v,b,w,M=a*77+26,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=ws(),o!==e){for(p=[],u=a,d=[],v=Er();v!==e;)d.push(v),v=Er();if(v=Mn(),v!==e){for(b=[],w=Er();w!==e;)b.push(w),w=Er();w=ws(),w!==e?(K=u,u=ca(o,v,w)):(a=u,u=e)}else a=u,u=e;if(u!==e)for(;u!==e;){for(p.push(u),u=a,d=[],v=Er();v!==e;)d.push(v),v=Er();if(v=Mn(),v!==e){for(b=[],w=Er();w!==e;)b.push(w),w=Er();w=ws(),w!==e?(K=u,u=ca(o,v,w)):(a=u,u=e)}else a=u,u=e}else p=e;p!==e?(K=s,s=Dl(o,p)):(a=s,s=e)}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Er(){var s,o,p,u=a*77+27,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===92?(o=mt,a++):(o=e,k===0&&O(ea)),o!==e?(p=ie(),p!==e?(o=[o,p],s=o):(a=s,s=e)):(a=s,s=e),s===e&&(s=y()),R[u]={nextPos:a,result:s},s)}function Mn(){var s,o,p=a*77+28,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Ke?(o=Ke,a+=2):(o=e,k===0&&O(qi)),o===e&&(t.substr(a,2)===ft?(o=ft,a+=2):(o=e,k===0&&O(zi)),o===e&&(t.substr(a,2)===je?(o=je,a+=2):(o=e,k===0&&O(Vi)),o===e&&(t.substr(a,2)===ut?(o=ut,a+=2):(o=e,k===0&&O(Wi)),o===e&&(t.substr(a,2)===jt?(o=jt,a+=2):(o=e,k===0&&O(Ki)),o===e&&(t.substr(a,2)===Rt?(o=Rt,a+=2):(o=e,k===0&&O(ta)),o===e&&(t.charCodeAt(a)===60?(o=Ye,a++):(o=e,k===0&&O($n)),o===e&&(t.charCodeAt(a)===62?(o=Br,a++):(o=e,k===0&&O(ra)),o===e&&(t.charCodeAt(a)===43?(o=Wt,a++):(o=e,k===0&&O(Ji)),o===e&&(t.charCodeAt(a)===45?(o=Ar,a++):(o=e,k===0&&O(sa)),o===e&&(t.charCodeAt(a)===42?(o=Ft,a++):(o=e,k===0&&O(na)),o===e&&(t.charCodeAt(a)===94?(o=br,a++):(o=e,k===0&&O(Xi)),o===e&&(t.charCodeAt(a)===47?(o=Hr,a++):(o=e,k===0&&O(Gi)),o===e&&(t.charCodeAt(a)===37?(o=Or,a++):(o=e,k===0&&O(Zi))))))))))))))),o!==e&&(K=s,o=Ll()),s=o,R[p]={nextPos:a,result:s},s)}function So(){var s,o,p,u=a*77+29,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===33?(o=Rr,a++):(o=e,k===0&&O(bn)),o!==e?(p=Te(),p!==e?(K=s,s=Bl(p)):(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function ja(){var s,o,p,u,d=a*77+30,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,o=Oa(),o!==e){if(p=[],u=Sn(),u===e&&(u=Ra(),u===e&&(u=Gs())),u!==e)for(;u!==e;)p.push(u),u=Sn(),u===e&&(u=Ra(),u===e&&(u=Gs()));else p=e;p!==e?(K=s,s=ha(o,p)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Sn(){var s,o,p,u,d,v,b=a*77+31,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===40?(o=A,a++):(o=e,k===0&&O(Ot)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Fo(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e?(K=s,s=Hl(u)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Fo(){var s,o,p,u,d,v,b=a*77+32,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Te(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Te(),v!==e?(K=u,u=pa(o,v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Te(),v!==e?(K=u,u=pa(o,v)):(a=u,u=e)):(a=u,u=e);K=s,s=Ul(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ra(){var s,o,p,u,d,v,b=a*77+33,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=Te(),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=ql(u)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Gs(){var s,o,p,u=a*77+34,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===46?(o=z,a++):(o=e,k===0&&O(An)),o!==e?(p=qe(),p!==e?(K=s,s=zl(p)):(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function Oo(){var s,o,p,u,d,v,b,w,M,F,D=a*77+35,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===Z?(o=Z,a+=2):(o=e,k===0&&O(Qi)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;if(p!==e)if(u=Te(),u!==e){if(d=[],v=f(),v!==e)for(;v!==e;)d.push(v),v=f();else d=e;if(d!==e)if(v=Ae(),v!==e){if(b=a,w=[],M=f(),M!==e)for(;M!==e;)w.push(M),M=f();else w=e;if(w!==e?(M=No(),M!==e?b=M:(a=b,b=e)):(a=b,b=e),b===e&&(b=null),w=a,M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;M!==e?(F=Io(),F!==e?w=F:(a=w,w=e)):(a=w,w=e),w===e&&(w=null),K=s,s=Vl(u,v,b,w)}else a=s,s=e;else a=s,s=e}else a=s,s=e;else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function No(){var s,o,p,u,d,v,b=a*77+36,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Fn(),o!==e){for(p=[],u=a,d=[],v=f();v!==e;)d.push(v),v=f();for(v=Fn(),v!==e?u=v:(a=u,u=e);u!==e;){for(p.push(u),u=a,d=[],v=f();v!==e;)d.push(v),v=f();v=Fn(),v!==e?u=v:(a=u,u=e)}K=s,s=Wl(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Fn(){var s,o,p,u,d,v,b,w=a*77+37,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,t.substr(a,4)===se?(o=se,a+=4):(o=e,k===0&&O(Yi)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();if(d=Te(),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();b=Ae(),b!==e?(K=s,s=va(d,b)):(a=s,s=e)}else a=s,s=e}else a=s,s=e;else a=s,s=e;return R[w]={nextPos:a,result:s},s}function Io(){var s,o,p,u,d,v=a*77+38,b=R[v];if(b)return a=b.nextPos,b.result;if(s=a,t.substr(a,4)===ve?(o=ve,a+=4):(o=e,k===0&&O(el)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();d=Ae(),d!==e?(K=s,s=Kl(d)):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[v]={nextPos:a,result:s},s}function Da(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe,Ge,Ln=a*77+39,ms=R[Ln];if(ms)return a=ms.nextPos,ms.result;if(s=a,t.substr(a,5)===ye?(o=ye,a+=5):(o=e,k===0&&O(js)),o!==e)if(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();if(d=Te(),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();if(t.charCodeAt(a)===123?(b=S,a++):(b=e,k===0&&O(tt)),b!==e){for(w=[],M=f();M!==e;)w.push(M),M=f();if(M=[],F=a,D=Te(),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();K=F,F=ga(d,D,ne)}else a=F,F=e}else a=F,F=e}else a=F,F=e;if(F!==e)for(;F!==e;)if(M.push(F),F=a,D=Te(),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();K=F,F=ga(d,D,ne)}else a=F,F=e}else a=F,F=e}else a=F,F=e;else M=e;if(M!==e){if(F=a,t.charCodeAt(a)===42?(D=Ft,a++):(D=e,k===0&&O(na)),D!==e){for(B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.substr(a,2)===oe?(Q=oe,a+=2):(Q=e,k===0&&O(Rs)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();if(ne=Ae(),ne!==e){for(Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();F=ne}else a=F,F=e}else a=F,F=e}else a=F,F=e;for(F===e&&(F=null),D=[],B=f();B!==e;)D.push(B),B=f();t.charCodeAt(a)===125?(B=I,a++):(B=e,k===0&&O(Jt)),B!==e?(K=s,s=Jl(d,M,F)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;else a=s,s=e;return R[Ln]={nextPos:a,result:s},s}function La(){var s,o,p,u,d,v,b,w,M=a*77+40,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,t.substr(a,4)===Ne?(o=Ne,a+=4):(o=e,k===0&&O(Ds)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(t.charCodeAt(a)===123?(u=S,a++):(u=e,k===0&&O(tt)),u!==e){for(d=[],v=f();v!==e;)d.push(v),v=f();if(v=yr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();t.charCodeAt(a)===125?(w=I,a++):(w=e,k===0&&O(Jt)),w!==e?(K=s,s=Xl(v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[M]={nextPos:a,result:s},s}function Ba(){var s,o,p,u,d=a*77+41,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,t.substr(a,6)===me?(o=me,a+=6):(o=e,k===0&&O(tl)),o!==e){if(p=[],u=f(),u!==e)for(;u!==e;)p.push(u),u=f();else p=e;p!==e?(u=Ha(),u!==e?(K=s,s=Gl(u)):(a=s,s=e)):(a=s,s=e)}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Ha(){var s,o,p=a*77+42,u=R[p];return u?(a=u.nextPos,u.result):(s=a,o=Xa(),o!==e&&(K=s,o=da(o)),s=o,R[p]={nextPos:a,result:s},s)}function Zs(){var s,o,p,u,d,v,b=a*77+43,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===96?(o=$e,a++):(o=e,k===0&&O(Ls)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===96?(v=$e,a++):(v=e,k===0&&O(Ls)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===96?(v=$e,a++):(v=e,k===0&&O(Ls)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=On(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===96?(u=$e,a++):(u=e,k===0&&O(Ls)),u!==e?(K=s,s=Zl(p)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function On(){var s,o,p,u,d,v,b=a*77+44,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=Te(),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();t.charCodeAt(a)===125?(v=I,a++):(v=e,k===0&&O(Jt)),v!==e?s=u:(a=s,s=e)}else a=s,s=e}else a=s,s=e;if(s===e){if(s=a,o=[],p=Nn(),p!==e)for(;p!==e;)o.push(p),p=Nn();else o=e;o!==e&&(K=s,o=ya(o)),s=o}return R[b]={nextPos:a,result:s},s}function Nn(){var s,o=a*77+45,p=R[o];return p?(a=p.nextPos,p.result):(s=Ua(),s===e&&(Ns.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(Bs))),R[o]={nextPos:a,result:s},s)}function Ua(){var s,o,p,u=a*77+46,d=R[u];return d?(a=d.nextPos,d.result):(s=a,t.charCodeAt(a)===92?(o=mt,a++):(o=e,k===0&&O(ea)),o!==e?(rs.test(t.charAt(a))?(p=t.charAt(a),a++):(p=e,k===0&&O(Hs)),p!==e?s=p:(a=s,s=e)):(a=s,s=e),R[u]={nextPos:a,result:s},s)}function In(){var s,o,p,u,d,v,b=a*77+47,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===34?(o=he,a++):(o=e,k===0&&O(Us)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===34?(v=he,a++):(v=e,k===0&&O(Us)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=qa(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=wa(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===34?(v=he,a++):(v=e,k===0&&O(Us)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=qa(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=wa(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===34?(u=he,a++):(u=e,k===0&&O(Us)),u!==e?(K=s,s=Ql(p)):(a=s,s=e)}else a=s,s=e;if(s===e)if(s=a,t.charCodeAt(a)===39?(o=Le,a++):(o=e,k===0&&O(qs)),o!==e){for(p=[],u=a,d=a,k++,t.charCodeAt(a)===39?(v=Le,a++):(v=e,k===0&&O(qs)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=Tn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=ma(v)):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=a,k++,t.charCodeAt(a)===39?(v=Le,a++):(v=e,k===0&&O(qs)),k--,v===e?d=void 0:(a=d,d=e),d!==e?(v=Tn(),v===e&&(t.length>a?(v=t.charAt(a),a++):(v=e,k===0&&O(ur))),v!==e?(K=u,u=ma(v)):(a=u,u=e)):(a=u,u=e);t.charCodeAt(a)===39?(u=Le,a++):(u=e,k===0&&O(qs)),u!==e?(K=s,s=Yl(p)):(a=s,s=e)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function qa(){var s,o,p=a*77+48,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===Re?(o=Re,a+=2):(o=e,k===0&&O(zs)),o!==e&&(K=s,o=eo()),s=o,R[p]={nextPos:a,result:s},s)}function Tn(){var s,o,p=a*77+49,u=R[p];return u?(a=u.nextPos,u.result):(s=a,t.substr(a,2)===He?(o=He,a+=2):(o=e,k===0&&O(aa)),o!==e&&(K=s,o=to()),s=o,R[p]={nextPos:a,result:s},s)}function za(){var s,o=a*77+50,p=R[o];return p?(a=p.nextPos,p.result):(s=To(),s===e&&(s=Va()),R[o]={nextPos:a,result:s},s)}function To(){var s,o,p,u,d,v,b=a*77+51,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),vt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(ia)),o!==e){if(p=[],qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr)),u!==e)for(;u!==e;)p.push(u),qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr));else p=e;if(p!==e)if(t.charCodeAt(a)===46?(u=z,a++):(u=e,k===0&&O(An)),u!==e){if(d=[],qt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,k===0&&O(cr)),v!==e)for(;v!==e;)d.push(v),qt.test(t.charAt(a))?(v=t.charAt(a),a++):(v=e,k===0&&O(cr));else d=e;d!==e?(K=s,s=ro()):(a=s,s=e)}else a=s,s=e;else a=s,s=e}else a=s,s=e;if(s===e)if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),qt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(cr)),o!==e)if(t.charCodeAt(a)===46?(p=z,a++):(p=e,k===0&&O(An)),p!==e){if(u=[],qt.test(t.charAt(a))?(d=t.charAt(a),a++):(d=e,k===0&&O(cr)),d!==e)for(;d!==e;)u.push(d),qt.test(t.charAt(a))?(d=t.charAt(a),a++):(d=e,k===0&&O(cr));else u=e;u!==e?(K=s,s=so()):(a=s,s=e)}else a=s,s=e;else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Va(){var s,o,p,u,d=a*77+52,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),vt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(ia)),o!==e){if(p=[],qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr)),u!==e)for(;u!==e;)p.push(u),qt.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(cr));else p=e;p!==e?(K=s,s=no()):(a=s,s=e)}else a=s,s=e;return s===e&&(s=a,Lt.test(t.charAt(a))?(t.charAt(a),a++):k===0&&O(Nt),qt.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(cr)),o!==e?(K=s,s=ao()):(a=s,s=e)),R[d]={nextPos:a,result:s},s}function Wa(){var s,o=a*77+53,p=R[o];return p?(a=p.nextPos,p.result):(s=jo(),s===e&&(s=jn()),R[o]={nextPos:a,result:s},s)}function jo(){var s,o,p,u,d=a*77+54,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===We?(o=We,a+=4):(o=e,k===0&&O(rl)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=xa()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function jn(){var s,o,p,u,d=a*77+55,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,5)===Ze?(o=Ze,a+=5):(o=e,k===0&&O(Vs)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=io()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Rn(){var s,o,p,u,d=a*77+56,v=R[d];return v?(a=v.nextPos,v.result):(s=a,t.substr(a,4)===at?(o=at,a+=4):(o=e,k===0&&O(sl)),o!==e?(p=a,k++,sr.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(dr)),k--,u===e?p=void 0:(a=p,p=e),p!==e?(K=s,s=$a()):(a=s,s=e)):(a=s,s=e),R[d]={nextPos:a,result:s},s)}function Ka(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+57,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=Te(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=ba(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=Te(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=ba(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;t.charCodeAt(a)===125?(d=I,a++):(d=e,k===0&&O(Jt)),d!==e?(K=s,s=lo(u)):(a=s,s=e)}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Ro(){var s,o,p,u,d,v,b,w,M,F,D=a*77+58,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=Te(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=Aa(v)}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=Te(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=Aa(v)}else a=d,d=e;for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=oo(u)):(a=s,s=e)}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Dn(){var s,o,p,u,d,v,b,w=a*77+59,M=R[w];if(M)return a=M.nextPos,M.result;if(s=a,o=qe(),o!==e){for(p=a,u=[],d=f();d!==e;)u.push(d),d=f();if(t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e){for(v=[],b=f();b!==e;)v.push(b),b=f();b=Ue(),b!==e?p=b:(a=p,p=e)}else a=p,p=e;p===e&&(p=null),K=s,s=uo(o,p)}else a=s,s=e;return R[w]={nextPos:a,result:s},s}function Ja(){var s,o,p,u,d,v,b=a*77+60,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Dn(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Dn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Dn(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);K=s,s=_a(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Gt(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne,Xe,Ge,Ln=a*77+61,ms=R[Ln];if(ms)return a=ms.nextPos,ms.result;if(s=a,t.charCodeAt(a)===64?(o=bt,a++):(o=e,k===0&&O(nl)),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(u=qe(),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();if(t.charCodeAt(a)===40?(v=A,a++):(v=e,k===0&&O(Ot)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(w=Ja(),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();if(t.charCodeAt(a)===41?(F=C,a++):(F=e,k===0&&O(Cr)),F!==e){for(D=a,B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.charCodeAt(a)===58?(Q=re,a++):(Q=e,k===0&&O($t)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();ne=Ue(),ne!==e?D=ne:(a=D,D=e)}else a=D,D=e;for(D===e&&(D=null),B=[],Q=f();Q!==e;)B.push(Q),Q=f();if(t.charCodeAt(a)===123?(Q=S,a++):(Q=e,k===0&&O(tt)),Q!==e){for(xe=[],ne=f();ne!==e;)xe.push(ne),ne=f();for(ne=yr(),ne===e&&(ne=null),Xe=[],Ge=f();Ge!==e;)Xe.push(Ge),Ge=f();t.charCodeAt(a)===125?(Ge=I,a++):(Ge=e,k===0&&O(Jt)),Ge!==e?(K=s,s=fo(p,u,d,w,D,ne)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[Ln]={nextPos:a,result:s},s}function Do(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=a*77+62,ne=R[xe];if(ne)return a=ne.nextPos,ne.result;if(s=a,t.substr(a,2)===Kt?(o=Kt,a+=2):(o=e,k===0&&O(_n)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Ja(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=a,w=[],M=f();M!==e;)w.push(M),M=f();if(t.charCodeAt(a)===58?(M=re,a++):(M=e,k===0&&O($t)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();D=Ue(),D!==e?b=D:(a=b,b=e)}else a=b,b=e;for(b===e&&(b=null),w=[],M=f();M!==e;)w.push(M),M=f();if(t.charCodeAt(a)===123?(M=S,a++):(M=e,k===0&&O(tt)),M!==e){for(F=[],D=f();D!==e;)F.push(D),D=f();for(D=yr(),D===e&&(D=null),B=[],Q=f();Q!==e;)B.push(Q),Q=f();t.charCodeAt(a)===125?(Q=I,a++):(Q=e,k===0&&O(Jt)),Q!==e?(K=s,s=Ca(u,b,D)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[xe]={nextPos:a,result:s},s}function Lo(){var s,o,p,u,d,v,b,w,M,F,D=a*77+63,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.charCodeAt(a)===91?(o=Dt,a++):(o=e,k===0&&O(gs)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=kr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=ka(v)}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=kr(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();for(t.charCodeAt(a)===44?(w=V,a++):(w=e,k===0&&O(gt)),w===e&&(w=null),M=[],F=f();F!==e;)M.push(F),F=f();K=d,d=ka(v)}else a=d,d=e;for(d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===93?(v=H,a++):(v=e,k===0&&O(vs)),v!==e?(K=s,s=co(u)):(a=s,s=e)}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Bo(){var s,o,p,u,d,v,b,w,M,F,D,B,Q,xe,ne=a*77+64,Xe=R[ne];if(Xe)return a=Xe.nextPos,Xe.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();if(u=[],d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=kr(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=Pa(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;for(;d!==e;)if(u.push(d),d=a,v=qe(),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.charCodeAt(a)===58?(w=re,a++):(w=e,k===0&&O($t)),w!==e){if(M=[],F=f(),F!==e)for(;F!==e;)M.push(F),F=f();else M=e;if(M!==e)if(F=kr(),F!==e){for(D=[],B=f();B!==e;)D.push(B),B=f();for(t.charCodeAt(a)===44?(B=V,a++):(B=e,k===0&&O(gt)),B===e&&(t.charCodeAt(a)===59?(B=it,a++):(B=e,k===0&&O(ds))),B===e&&(B=null),Q=[],xe=f();xe!==e;)Q.push(xe),xe=f();K=d,d=Pa(v,F)}else a=d,d=e;else a=d,d=e}else a=d,d=e}else a=d,d=e;t.charCodeAt(a)===125?(d=I,a++):(d=e,k===0&&O(Jt)),d!==e?(K=s,s=ho(u)):(a=s,s=e)}else a=s,s=e;return R[ne]={nextPos:a,result:s},s}function Ue(){var s,o=a*77+65,p=R[o];return p?(a=p.nextPos,p.result):(s=Ho(),s===e&&(s=Ht()),R[o]={nextPos:a,result:s},s)}function Ho(){var s,o,p,u,d,v,b,w,M,F,D=a*77+66,B=R[D];if(B)return a=B.nextPos,B.result;if(s=a,t.substr(a,2)===Kt?(o=Kt,a+=2):(o=e,k===0&&O(_n)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=Jr(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();if(t.charCodeAt(a)===41?(v=C,a++):(v=e,k===0&&O(Cr)),v!==e){for(b=[],w=f();w!==e;)b.push(w),w=f();if(t.substr(a,2)===oe?(w=oe,a+=2):(w=e,k===0&&O(Rs)),w!==e){for(M=[],F=f();F!==e;)M.push(F),F=f();F=Ue(),F!==e?(K=s,s=po(u,F)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return R[D]={nextPos:a,result:s},s}function Jr(){var s,o,p,u,d,v,b=a*77+67,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=Ue(),o!==e){for(p=[],u=a,d=_(),d!==e?(v=Ue(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,d=_(),d!==e?(v=Ue(),v!==e?u=v:(a=u,u=e)):(a=u,u=e);K=s,s=vo(o,p)}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function Ht(){var s,o,p,u,d,v,b,w,M=a*77+68,F=R[M];if(F)return a=F.nextPos,F.result;if(s=a,o=qe(),o!==e){for(p=[],u=y();u!==e;)p.push(u),u=y();if(t.charCodeAt(a)===60?(u=Ye,a++):(u=e,k===0&&O($n)),u!==e){for(d=[],v=y();v!==e;)d.push(v),v=y();if(v=Ue(),v!==e){for(b=[],w=y();w!==e;)b.push(w),w=y();t.charCodeAt(a)===62?(w=Br,a++):(w=e,k===0&&O(ra)),w!==e?(K=s,s=go(o,v)):(a=s,s=e)}else a=s,s=e}else a=s,s=e}else a=s,s=e;return s===e&&(s=a,o=qe(),o!==e&&(K=s,o=yo(o)),s=o),R[M]={nextPos:a,result:s},s}function qe(){var s,o,p,u,d=a*77+69,v=R[d];if(v)return a=v.nextPos,v.result;if(s=a,Zn.test(t.charAt(a))?(o=t.charAt(a),a++):(o=e,k===0&&O(al)),o!==e){for(p=[],Qn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(la));u!==e;)p.push(u),Qn.test(t.charAt(a))?(u=t.charAt(a),a++):(u=e,k===0&&O(la));K=s,s=i()}else a=s,s=e;return R[d]={nextPos:a,result:s},s}function Xa(){var s,o,p,u,d,v,b=a*77+70,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,o=qe(),o!==e){for(p=[],u=a,t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e?(v=qe(),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);u!==e;)p.push(u),u=a,t.charCodeAt(a)===58?(d=re,a++):(d=e,k===0&&O($t)),d!==e?(v=qe(),v!==e?(d=[d,v],u=d):(a=u,u=e)):(a=u,u=e);K=s,s=X()}else a=s,s=e;return R[b]={nextPos:a,result:s},s}function _(){var s,o,p,u,d,v=a*77+71,b=R[v];if(b)return a=b.nextPos,b.result;for(s=a,o=[],p=f();p!==e;)o.push(p),p=f();if(t.charCodeAt(a)===44?(p=V,a++):(p=e,k===0&&O(gt)),p!==e){for(u=[],d=f();d!==e;)u.push(d),d=f();o=[o,p,u],s=o}else a=s,s=e;if(s===e)if(s=[],o=f(),o!==e)for(;o!==e;)s.push(o),o=f();else s=e;return R[v]={nextPos:a,result:s},s}function Ae(){var s,o,p,u,d,v,b=a*77+72,w=R[b];if(w)return a=w.nextPos,w.result;if(s=a,t.charCodeAt(a)===123?(o=S,a++):(o=e,k===0&&O(tt)),o!==e){for(p=[],u=f();u!==e;)p.push(u),u=f();for(u=yr(),u===e&&(u=null),d=[],v=f();v!==e;)d.push(v),v=f();t.charCodeAt(a)===125?(v=I,a++):(v=e,k===0&&O(Jt)),v!==e?(K=s,s=Ws(u)):(a=s,s=e)}else a=s,s=e;return s===e&&(s=Kr()),R[b]={nextPos:a,result:s},s}function ie(){var s,o=a*77+73,p=R[o];return p?(a=p.nextPos,p.result):(t.substr(a,2)===Ct?(s=Ct,a+=2):(s=e,k===0&&O(il)),s===e&&(Ii.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ll))),R[o]={nextPos:a,result:s},s)}function l(){var s,o,p=a*77+74,u=R[p];return u?(a=u.nextPos,u.result):(s=a,k++,t.length>a?(o=t.charAt(a),a++):(o=e,k===0&&O(ur)),k--,o===e?s=void 0:(a=s,s=e),s===e&&(s=ie()),R[p]={nextPos:a,result:s},s)}function f(){var s,o=a*77+75,p=R[o];return p?(a=p.nextPos,p.result):(Ti.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ol)),R[o]={nextPos:a,result:s},s)}function y(){var s,o=a*77+76,p=R[o];return p?(a=p.nextPos,p.result):(or.test(t.charAt(a))?(s=t.charAt(a),a++):(s=e,k===0&&O(ul)),R[o]={nextPos:a,result:s},s)}function h(s,o,p){const u={type:s};o.children=p;for(const v of Object.keys(o))o[v]!==void 0&&(u[v]=o[v]);const d=Xt();return u.loc={start:d.start.offset,end:d.end.offset-1},u}if(Ks=g(),Ks!==e&&a===t.length)return Ks;throw Ks!==e&&a<t.length&&O(N()),mo(Vr,T<t.length?t.charAt(T):null,T<t.length?Xs(T,T+1):Xs(T,T))}const db=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function yb(t){return db.includes(t.type)}function Ad(t){return"chain"in t&&t.chain!==null}function wb(t,r,e){return{type:"call",target:t,args:r,loc:e}}function mb(t,r,e){return{type:"index",target:t,index:r,loc:e}}function xb(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function st(t,r){const e=r(t);switch(e.type){case"def":{e.expr=st(e.expr,r);break}case"return":{e.expr=st(e.expr,r);break}case"each":{e.items=st(e.items,r),e.for=st(e.for,r);break}case"for":{e.from!=null&&(e.from=st(e.from,r)),e.to!=null&&(e.to=st(e.to,r)),e.times!=null&&(e.times=st(e.times,r)),e.for=st(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=st(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=st(e.expr,r),e.dest=st(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=st(e.operands[n],r);break}case"not":{e.expr=st(e.expr,r);break}case"if":{e.cond=st(e.cond,r),e.then=st(e.then,r);for(const n of e.elseif)n.cond=st(n.cond,r),n.then=st(n.then,r);e.else!=null&&(e.else=st(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=st(e.children[n],r);break}case"match":{e.about=st(e.about,r);for(const n of e.qs)n.q=st(n.q,r),n.a=st(n.a,r);e.default!=null&&(e.default=st(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=st(e.statements[n],r);break}case"exists":{e.identifier=st(e.identifier,r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const c=e.tmpl[n];typeof c!="string"&&(e.tmpl[n]=st(c,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],st(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=st(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=st(e.args[n],r);break}case"indexChain":{e.index=st(e.index,r);break}case"call":{e.target=st(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=st(e.args[n],r);break}case"index":{e.target=st(e.target,r),e.index=st(e.index,r);break}case"prop":{e.target=st(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=st(e.members[n],r);break}case"or":case"and":{e.left=st(e.left,r),e.right=st(e.right,r);break}}if(Ad(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=st(e.chain[n],r);return e}const qc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function zc(t){throw new pu(`Reserved word "${t}" cannot be used as variable name.`)}function $b(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{qc.includes(t.name)&&zc(t.name);break}case"meta":{t.name!=null&&qc.includes(t.name)&&zc(t.name);break}case"fn":{for(const r of t.args)qc.includes(r.name)&&zc(r.name);break}}return t}function bb(t){for(const r of t)st(r,$b);return t}function qv(t){return{type:"simple",name:t}}function Ab(t,r){return{type:"generic",name:t,inners:r}}function _b(t,r){return{type:"fn",args:t,result:r}}function Lf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Lf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Lf(n)).join(", "),e=Lf(t.result);return`@(${r}) { ${e} }`}}}function Lu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return qv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Lu(t.inner):r=qv("any"),Ab(t.name,[r])}}throw new pu(`Unknown type: '${Lf(t)}'`)}else{const r=t.args.map(e=>Lu(e));return _b(r,Lu(t.result))}}function Cb(t){switch(t.type){case"def":{t.varType!=null&&Lu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Lu(r.argType);t.retType!=null&&Lu(t.retType);break}}return t}function kb(t){for(const r of t)st(r,Cb);return t}function Bf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Bf(n.expr.children)),r.push(n);else{if(e.length>0)throw new pu("invalid attribute.");switch(n.type){case"fn":{n.children=Bf(n.children);break}case"block":{n.statements=Bf(n.statements);break}}r.push(n)}if(e.length>0)throw new pu("invalid attribute.");return r}function Pb(t){if(yb(t)&&Ad(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const c of r)switch(c.type){case"callChain":{n=wb(n,c.args,c.loc);break}case"indexChain":{n=mb(n,c.index,c.loc);break}case"propChain":{n=xb(n,c.name,c.loc);break}}return n}return t}function Eb(t){for(let r=0;r<t.length;r++)t[r]=st(t[r],Pb);return t}function Hf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function _d(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Hf(t,r,e);{const{left:n,right:c,info:g}=t;return Hf(n,_d(c,r,e),g)}}function Zo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Zo(t.left),Zo(t.right)]}}const Mb={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Zo(t.left),right:Zo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Zo(t.left),right:Zo(t.right)}),priority:3}};function Sb(t){const r=t.operators.map(n=>{const c=Mb[n];if(c==null)throw new pu(`No such operator: ${n}.`);return c});let e=Hf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=_d(e,t.operands[2+n],r[1+n]);return Zo(e)}function Fb(t){for(let r=0;r<t.length;r++)t[r]=st(t[r],e=>e.type==="infix"?Sb(e):e);return t}var Ya;let Ob=(Ya=class{constructor(){be(this,"plugins");this.plugins={validate:[bb,kb],transform:[Bf,Eb,Fb]}}static parse(r){return Ya.instance==null&&(Ya.instance=new Ya),Ya.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Uv(r,{startRule:"Preprocess"});e=Uv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new pu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`,n):new pu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`,n):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},be(Ya,"instance"),Ya);const zv="0.16.0",Nb={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`},Ib=t=>(vf("data-v-bd000d19"),t=t(),gf(),t),Tb={id:"root"},jb={id:"grid1"},Rb={class:"type"},Db={id:"grid2"},Lb=Ib(()=>Mt("header",null,null,-1)),Bb=si({__name:"index",setup(t){const r=wr(window.localStorage.getItem(zv)??'<: "Hello, AiScript!"'),e=wr(null),n=wr([]),c=wr(null);ri(r,()=>{window.localStorage.setItem(zv,r.value);try{e.value=Ob.parse(r.value),c.value=null}catch(x){const m=x;c.value=m.message,console.error("info"in m?m.info:m);return}},{immediate:!0});let g=null;const $=async()=>{n.value=[],g==null||g.abort(),g=new hs({},{in:x=>new Promise(m=>{const A=window.prompt(x);m(A??"")}),out:x=>{n.value.push({id:Math.random(),type:x.type,text:_h(x,!0),print:!0})},err:x=>{window.alert(x.toString())},log:(x,m)=>{switch(x){case"end":n.value.push({id:Math.random(),text:_h(m.val,!0),print:!1});break}}});try{await g.exec(e.value)}catch(x){console.error(x),window.alert("Internal Error: "+x)}};return(x,m)=>(wt(),Ut("div",Tb,[Mt("div",jb,[nt(yf,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=A=>r.value=A),samples:Mi(Nb),parseError:c.value,onRun:$},null,8,["modelValue","samples","parseError"]),nt(Fr,{id:"logs"},{header:ot(()=>[It("Output")]),default:ot(()=>[(wt(!0),Ut(Ir,null,fu(n.value,A=>(wt(),Ut("div",{class:Tr(["log",[{print:A.print},A.type]]),key:A.id},[Mt("span",Rb,Dr(A.type),1),It(" "+Dr(A.text),1)],2))),128))]),_:1})]),Mt("div",Db,[nt(Fr,{id:"ast"},{header:ot(()=>[It("AST")]),default:ot(()=>[Mt("pre",null,Dr(JSON.stringify(e.value,null,"	")),1)]),_:1}),nt(Fr,{id:"bin"},{header:ot(()=>[It("Bytecode")]),default:ot(()=>[Lb]),_:1}),nt(Fr,{id:"debugger"},{header:ot(()=>[It("Debugger")]),_:1})])]))}});const Hb=ai(Bb,[["__scopeId","data-v-bd000d19"]]);function Uf(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Uf=function(e){return typeof e}:Uf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function Cd(t,r,e){var n=e.value;if(typeof n!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Uf(n)));var c=!1;return{configurable:!0,get:function(){if(c||this===t.prototype||this.hasOwnProperty(r)||typeof n!="function")return n;var $=n.bind(this);return c=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return $},set:function(m){n=m,delete this[r]}}),c=!1,$},set:function($){n=$}}}function Ub(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var n=Object.getOwnPropertyDescriptor(t.prototype,e);typeof n.value=="function"&&Object.defineProperty(t.prototype,e,Cd(t,e,n))}}),t}function pt(){return arguments.length===1?Ub.apply(void 0,arguments):Cd.apply(void 0,arguments)}let kd=class Pd extends Error{constructor(e,n){super(e);be(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,Pd)}},vu=class extends kd{constructor(r,e){super(r,e)}},ir=class extends kd{constructor(r,e){super(r,e)}},qb=class extends ir{constructor(r,e){super(r,e)}};var bu=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};let Ni=class Ed{constructor(r=[],e,n){be(this,"parent");be(this,"layerdStates");be(this,"name");be(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Ed(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new ir(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new ir(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const c of this.layerdStates){if(c.has(r)){c.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new ir(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};bu([pt],Ni.prototype,"log",null);bu([pt],Ni.prototype,"onUpdated",null);bu([pt],Ni.prototype,"createChildScope",null);bu([pt],Ni.prototype,"get",null);bu([pt],Ni.prototype,"getAll",null);bu([pt],Ni.prototype,"add",null);bu([pt],Ni.prototype,"assign",null);let Mf;const zb=new Uint8Array(16);function Vb(){if(!Mf&&(Mf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Mf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Mf(zb)}const Qr=[];for(let t=0;t<256;++t)Qr.push((t+256).toString(16).slice(1));function Wb(t,r=0){return(Qr[t[r+0]]+Qr[t[r+1]]+Qr[t[r+2]]+Qr[t[r+3]]+"-"+Qr[t[r+4]]+Qr[t[r+5]]+"-"+Qr[t[r+6]]+Qr[t[r+7]]+"-"+Qr[t[r+8]]+Qr[t[r+9]]+"-"+Qr[t[r+10]]+Qr[t[r+11]]+Qr[t[r+12]]+Qr[t[r+13]]+Qr[t[r+14]]+Qr[t[r+15]]).toLowerCase()}const Kb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Vv={randomUUID:Kb};function Jb(t,r,e){if(Vv.randomUUID&&!r&&!t)return Vv.randomUUID();t=t||{};const n=t.random||(t.rng||Vb)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let c=0;c<16;++c)r[e+c]=n[c];return r}return Wb(n)}const zt={type:"null"},dn={type:"bool",value:!0},rn={type:"bool",value:!1},Oe=t=>({type:"num",value:t}),nr=t=>({type:"str",value:t}),Bu=t=>({type:"bool",value:t}),Op=t=>({type:"obj",value:t}),is=t=>({type:"arr",value:t}),Xb=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),we=t=>({type:"fn",native:t}),Gb=t=>({type:"return",value:t}),Zb=()=>({type:"break",value:null}),Qb=()=>({type:"continue",value:null}),Yb=t=>t.type==="return"?t.value:t;function on(t){if(t==null)throw new ir("Expect anything, but got nothing.")}function _s(t){if(t==null)throw new ir("Expect boolean, but got nothing.");if(t.type!=="bool")throw new ir(`Expect boolean, but got ${t.type}.`)}function bi(t){if(t==null)throw new ir("Expect function, but got nothing.");if(t.type!=="fn")throw new ir(`Expect function, but got ${t.type}.`)}function Ur(t){if(t==null)throw new ir("Expect string, but got nothing.");if(t.type!=="str")throw new ir(`Expect string, but got ${t.type}.`)}function Pe(t){if(t==null)throw new ir("Expect number, but got nothing.");if(t.type!=="num")throw new ir(`Expect number, but got ${t.type}.`)}function vi(t){if(t==null)throw new ir("Expect object, but got nothing.");if(t.type!=="obj")throw new ir(`Expect object, but got ${t.type}.`)}function Hu(t){if(t==null)throw new ir("Expect array, but got nothing.");if(t.type!=="arr")throw new ir(`Expect array, but got ${t.type}.`)}function e1(t){return t.type==="str"}function t1(t){return t.type==="num"}function r1(t){return t.type==="obj"}function s1(t){return t.type==="arr"}function Eh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Mh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Mh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Sh(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Sh(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Sh(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Fh(t){if(t===null)return zt;if(typeof t=="boolean")return Bu(t);if(typeof t=="string")return nr(t);if(typeof t=="number")return Oe(t);if(Array.isArray(t))return is(t.map(r=>Fh(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Fh(n));return Op(r)}return zt}const n1={help:nr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":nr("0.14.1"),"Core:ai":nr("kawaii"),"Core:not":we(([t])=>(_s(t),t.value?rn:dn)),"Core:eq":we(([t,r])=>(on(t),on(r),Eh(t,r)?dn:rn)),"Core:neq":we(([t,r])=>(on(t),on(r),Eh(t,r)?rn:dn)),"Core:and":we(([t,r])=>(_s(t),t.value?(_s(r),r.value?dn:rn):rn)),"Core:or":we(([t,r])=>(_s(t),t.value?dn:(_s(r),r.value?dn:rn))),"Core:add":we(([t,r])=>(Pe(t),Pe(r),Oe(t.value+r.value))),"Core:sub":we(([t,r])=>(Pe(t),Pe(r),Oe(t.value-r.value))),"Core:mul":we(([t,r])=>(Pe(t),Pe(r),Oe(t.value*r.value))),"Core:pow":we(([t,r])=>{Pe(t),Pe(r);const e=t.value**r.value;if(isNaN(e))throw new ir("Invalid operation.");return Oe(e)}),"Core:div":we(([t,r])=>{Pe(t),Pe(r);const e=t.value/r.value;if(isNaN(e))throw new ir("Invalid operation.");return Oe(e)}),"Core:mod":we(([t,r])=>(Pe(t),Pe(r),Oe(t.value%r.value))),"Core:gt":we(([t,r])=>(Pe(t),Pe(r),t.value>r.value?dn:rn)),"Core:lt":we(([t,r])=>(Pe(t),Pe(r),t.value<r.value?dn:rn)),"Core:gteq":we(([t,r])=>(Pe(t),Pe(r),t.value>=r.value?dn:rn)),"Core:lteq":we(([t,r])=>(Pe(t),Pe(r),t.value<=r.value?dn:rn)),"Core:type":we(([t])=>(on(t),nr(t.type))),"Core:to_str":we(([t])=>(on(t),t.type==="str"?t:t.type==="num"?nr(t.value.toString()):nr("?"))),"Core:range":we(([t,r])=>(Pe(t),Pe(r),t.value<r.value?is(Array.from({length:r.value-t.value+1},(e,n)=>Oe(n+t.value))):t.value>r.value?is(Array.from({length:t.value-r.value+1},(e,n)=>Oe(t.value-n))):is([t]))),"Util:uuid":we(()=>nr(Jb())),"Json:stringify":we(([t])=>(on(t),nr(JSON.stringify(Sh(t))))),"Json:parse":we(([t])=>(Ur(t),Fh(JSON.parse(t.value)))),"Json:parsable":we(([t])=>{Ur(t);try{JSON.parse(t.value)}catch{return Bu(!1)}return Bu(!0)}),"Date:now":we(()=>Oe(Date.now())),"Date:year":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":we(([t])=>(t&&Pe(t),Oe(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":we(([t])=>(Ur(t),Oe(new Date(t.value).getTime()))),"Math:Infinity":Oe(1/0),"Math:E":Oe(Math.E),"Math:LN2":Oe(Math.LN2),"Math:LN10":Oe(Math.LN10),"Math:LOG2E":Oe(Math.LOG2E),"Math:LOG10E":Oe(Math.LOG10E),"Math:PI":Oe(Math.PI),"Math:SQRT1_2":Oe(Math.SQRT1_2),"Math:SQRT2":Oe(Math.SQRT2),"Math:abs":we(([t])=>(Pe(t),Oe(Math.abs(t.value)))),"Math:acos":we(([t])=>(Pe(t),Oe(Math.acos(t.value)))),"Math:acosh":we(([t])=>(Pe(t),Oe(Math.acosh(t.value)))),"Math:asin":we(([t])=>(Pe(t),Oe(Math.asin(t.value)))),"Math:asinh":we(([t])=>(Pe(t),Oe(Math.asinh(t.value)))),"Math:atan":we(([t])=>(Pe(t),Oe(Math.atan(t.value)))),"Math:atanh":we(([t])=>(Pe(t),Oe(Math.atanh(t.value)))),"Math:atan2":we(([t,r])=>(Pe(t),Pe(r),Oe(Math.atan2(t.value,r.value)))),"Math:cbrt":we(([t])=>(Pe(t),Oe(Math.cbrt(t.value)))),"Math:ceil":we(([t])=>(Pe(t),Oe(Math.ceil(t.value)))),"Math:clz32":we(([t])=>(Pe(t),Oe(Math.clz32(t.value)))),"Math:cos":we(([t])=>(Pe(t),Oe(Math.cos(t.value)))),"Math:cosh":we(([t])=>(Pe(t),Oe(Math.cosh(t.value)))),"Math:exp":we(([t])=>(Pe(t),Oe(Math.exp(t.value)))),"Math:expm1":we(([t])=>(Pe(t),Oe(Math.expm1(t.value)))),"Math:floor":we(([t])=>(Pe(t),Oe(Math.floor(t.value)))),"Math:fround":we(([t])=>(Pe(t),Oe(Math.fround(t.value)))),"Math:hypot":we(([t])=>{Hu(t);const r=[];for(const e of t.value)Pe(e),r.push(e.value);return Oe(Math.hypot(...r))}),"Math:imul":we(([t,r])=>(Pe(t),Pe(r),Oe(Math.imul(t.value,r.value)))),"Math:log":we(([t])=>(Pe(t),Oe(Math.log(t.value)))),"Math:log1p":we(([t])=>(Pe(t),Oe(Math.log1p(t.value)))),"Math:log10":we(([t])=>(Pe(t),Oe(Math.log10(t.value)))),"Math:log2":we(([t])=>(Pe(t),Oe(Math.log2(t.value)))),"Math:max":we(([t,r])=>(Pe(t),Pe(r),Oe(Math.max(t.value,r.value)))),"Math:min":we(([t,r])=>(Pe(t),Pe(r),Oe(Math.min(t.value,r.value)))),"Math:pow":we(([t,r])=>(Pe(t),Pe(r),Oe(Math.pow(t.value,r.value)))),"Math:round":we(([t])=>(Pe(t),Oe(Math.round(t.value)))),"Math:sign":we(([t])=>(Pe(t),Oe(Math.sign(t.value)))),"Math:sin":we(([t])=>(Pe(t),Oe(Math.sin(t.value)))),"Math:sinh":we(([t])=>(Pe(t),Oe(Math.sinh(t.value)))),"Math:sqrt":we(([t])=>{Pe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new ir("Invalid operation.");return Oe(r)}),"Math:tan":we(([t])=>(Pe(t),Oe(Math.tan(t.value)))),"Math:tanh":we(([t])=>(Pe(t),Oe(Math.tanh(t.value)))),"Math:trunc":we(([t])=>(Pe(t),Oe(Math.trunc(t.value)))),"Math:rnd":we(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Oe(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Oe(Math.random())),"Math:gen_rng":we(([t])=>{if(on(t),t.type!=="num"&&t.type!=="str")return zt;const r=kp(t.value.toString());return we(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Oe(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Oe(r()))}),"Num:to_hex":we(([t])=>(Pe(t),nr(t.value.toString(16)))),"Num:from_hex":we(([t])=>(Ur(t),Oe(parseInt(t.value,16)))),"Str:lf":nr(`
`),"Str:lt":we(([t,r])=>(Ur(t),Ur(r),t.value<r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:gt":we(([t,r])=>(Ur(t),Ur(r),t.value>r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Obj:keys":we(([t])=>(vi(t),is(Array.from(t.value.keys()).map(r=>nr(r))))),"Obj:vals":we(([t])=>(vi(t),is(Array.from(t.value.values())))),"Obj:kvs":we(([t])=>(vi(t),is(Array.from(t.value.entries()).map(([r,e])=>is([nr(r),e]))))),"Obj:get":we(([t,r])=>(vi(t),Ur(r),t.value.get(r.value)??zt)),"Obj:set":we(([t,r,e])=>(vi(t),Ur(r),on(e),t.value.set(r.value,e),zt)),"Obj:has":we(([t,r])=>(vi(t),Ur(r),Bu(t.value.has(r.value)))),"Obj:copy":we(([t])=>(vi(t),Op(new Map(t.value)))),"Async:interval":we(async([t,r,e],n)=>{Pe(t),bi(r),e&&(_s(e),e.value&&n.call(r,[]));const c=setInterval(()=>{n.call(r,[])},t.value),g=()=>{clearInterval(c)};return n.registerAbortHandler(g),we(([],$)=>{clearInterval(c),$.unregisterAbortHandler(g)})}),"Async:timeout":we(async([t,r],e)=>{Pe(t),bi(r);const n=setTimeout(()=>{e.call(r,[])},t.value),c=()=>{clearTimeout(n)};return e.registerAbortHandler(c),we(([],g)=>{clearTimeout(n),g.unregisterAbortHandler(c)})})},Pu={num:{to_str:t=>we(async(r,e)=>nr(t.value.toString()))},str:{to_num:t=>we(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?zt:Oe(n)}),len:t=>Oe(Mp(t.value)),replace:t=>we(async([r,e],n)=>(Ur(r),Ur(e),nr(t.value.split(r.value).join(e.value)))),index_of:t=>we(async([r],e)=>(Ur(r),Oe(Fp(t.value,r.value)))),incl:t=>we(async([r],e)=>(Ur(r),t.value.includes(r.value)?dn:rn)),trim:t=>we(async(r,e)=>nr(t.value.trim())),upper:t=>we(async(r,e)=>nr(t.value.toUpperCase())),lower:t=>we(async(r,e)=>nr(t.value.toLowerCase())),split:t=>we(async([r],e)=>(r&&Ur(r),is(r?t.value.split(r?r.value:"").map(n=>nr(n)):Xu(t.value).map(n=>nr(n))))),slice:t=>we(async([r,e],n)=>(Pe(r),Pe(e),nr(Sp(t.value,r.value,e.value)))),pick:t=>we(async([r],e)=>{Pe(r);const c=Xu(t.value)[r.value];return c?nr(c):zt})},arr:{len:t=>Oe(t.value.length),push:t=>we(async([r],e)=>(on(r),t.value.push(r),t)),unshift:t=>we(async([r],e)=>(on(r),t.value.unshift(r),t)),pop:t=>we(async(r,e)=>t.value.pop()??zt),shift:t=>we(async(r,e)=>t.value.shift()??zt),concat:t=>we(async([r],e)=>(Hu(r),is(t.value.concat(r.value)))),slice:t=>we(async([r,e],n)=>(Pe(r),Pe(e),is(t.value.slice(r.value,e.value)))),join:t=>we(async([r],e)=>(r&&Ur(r),nr(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>we(async([r],e)=>{bi(r);const n=t.value.map(async(c,g)=>await e.call(r,[c,Oe(g)]));return is(await Promise.all(n))}),filter:t=>we(async([r],e)=>{bi(r);const n=[];for(let c=0;c<t.value.length;c++){const g=t.value[c],$=await e.call(r,[g,Oe(c)]);_s($),$.value&&n.push(g)}return is(n)}),reduce:t=>we(async([r,e],n)=>{bi(r);const c=e!=null;let g=c?e:t.value[0];for(let $=c?0:1;$<t.value.length;$++){const x=t.value[$];g=await n.call(r,[g,x,Oe($)])}return g}),find:t=>we(async([r],e)=>{bi(r);for(let n=0;n<t.value.length;n++){const c=t.value[n],g=await e.call(r,[c,Oe(n)]);if(_s(g),g.value)return c}return zt}),incl:t=>we(async([r],e)=>(on(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?rn:(c=>c.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?dn:rn)),reverse:t=>we(async(r,e)=>(t.value.reverse(),zt)),copy:t=>we(async(r,e)=>is([...t.value])),sort:t=>we(async([r],e)=>{const n=async(g,$)=>{if(g.length<=1)return g;const x=Math.floor(g.length/2),m=await n(g.slice(0,x),$),A=await n(g.slice(x),$);return c(m,A,$)},c=async(g,$,x)=>{const m=[];let A=0,C=0;for(;A<g.length&&C<$.length;){const P=g[A],S=$[C],I=await e.call(x,[P,S]);Pe(I),I.value<0?(m.push(g[A]),A++):(m.push($[C]),C++)}return m.concat(g.slice(A)).concat($.slice(C))};return bi(r),Hu(t),t.value=await n(t.value,r),t})}};var fn=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};const Md=300,a1=Md-1;let Fs=class{constructor(r,e){be(this,"vars");be(this,"opts");be(this,"stepCount",0);be(this,"stop",!1);be(this,"scope");be(this,"abortHandlers",[]);this.opts=e??{};const n={print:we(([c])=>{on(c),this.opts.out&&this.opts.out(c)}),readline:we(async c=>{const g=c[0];if(Ur(g),this.opts.in==null)return zt;const $=await this.opts.in(g.value);return nr($)})};this.vars={...r,...n1,...n},this.scope=new Ni([new Map(Object.entries(this.vars))]),this.scope.opts.log=(c,g)=>{switch(c){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(c){switch(c.type){case"arr":return c.value.map(g=>e(g));case"bool":return c.value;case"null":return null;case"num":return c.value;case"obj":{const g={};for(const[$,x]of c.value.entries())g[$]=e(x);return g}case"str":return c.value;default:return}}const n=new Map;for(const c of r)switch(c.type){case"meta":{n.set(c.name,e(c.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const c=await this._eval(n.expr,e);e.add(n.name,c),this.scope.add(r.name+":"+n.name,c);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??zt;{const n=new Map;for(let g=0;g<(r.args??[]).length;g++)n.set(r.args[g],e[g]);const c=r.scope.createChildScope(n);return Yb(await this._run(r.statements,c))}}async _eval(r,e){if(this.stop)return zt;if(this.stepCount%Md===a1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new ir("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);bi(n);const c=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(n,c)}case"if":{const n=await this._eval(r.cond,e);if(_s(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const c of r.elseif){const g=await this._eval(c.cond,e);if(_s(g),g.value)return this._eval(c.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return zt}case"match":{const n=await this._eval(r.about,e);for(const c of r.qs){const g=await this._eval(c.q,e);if(Eh(n,g))return await this._eval(c.a,e)}return r.default?await this._eval(r.default,e):zt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return zt}case"for":{if(r.times){const n=await this._eval(r.times,e);Pe(n);for(let c=0;c<n.value;c++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const n=await this._eval(r.from,e),c=await this._eval(r.to,e);Pe(n),Pe(c);for(let g=n.value;g<n.value+c.value;g++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Oe(g)]])));if($.type==="break")break;if($.type==="return")return $}}return zt}case"each":{const n=await this._eval(r.items,e);Hu(n);for(const c of n.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,c]])));if(g.type==="break")break;if(g.type==="return")return g}return zt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const c=[];for(const g of r.attr)c.push({name:g.name,value:await this._eval(g.value,e)});n.attr=c}return e.add(r.name,n),zt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),zt}case"addAssign":{const n=await this._eval(r.dest,e);Pe(n);const c=await this._eval(r.expr,e);return Pe(c),await this.assign(e,r.dest,Oe(n.value+c.value)),zt}case"subAssign":{const n=await this._eval(r.dest,e);Pe(n);const c=await this._eval(r.expr,e);return Pe(c),await this.assign(e,r.dest,Oe(n.value-c.value)),zt}case"null":return zt;case"bool":return Bu(r.value);case"num":return Oe(r.value);case"str":return nr(r.value);case"arr":return is(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const c of r.value.keys())n.set(c,await this._eval(r.value.get(c),e));return Op(n)}case"prop":{const n=await this._eval(r.target,e);if(r1(n))return n.value.has(r.name)?n.value.get(r.name):zt;if(t1(n)){if(Object.hasOwn(Pu.num,r.name))return Pu.num[r.name](n);throw new ir(`No such prop (${r.name}) in ${n.type}.`)}else if(e1(n)){if(Object.hasOwn(Pu.str,r.name))return Pu.str[r.name](n);throw new ir(`No such prop (${r.name}) in ${n.type}.`)}else if(s1(n)){if(Object.hasOwn(Pu.arr,r.name))return Pu.arr[r.name](n);throw new ir(`No such prop (${r.name}) in ${n.type}.`)}else throw new ir(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);Hu(n);const c=await this._eval(r.index,e);Pe(c);const g=n.value[c.value];if(g===void 0)throw new qb(`Index out of range. index: ${c.value} max: ${n.value.length-1}`);return g}case"not":{const n=await this._eval(r.expr,e);return _s(n),Bu(!n.value)}case"fn":return Xb(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const c of r.tmpl)if(typeof c=="string")n+=c;else{const g=await this._eval(c,e);let $="";g.type==="str"?$=g.value:g.type==="num"&&($=g.value.toString()),n+=$}return nr(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),Gb(n)}case"break":return this.log("block:break",{scope:e.name}),Zb();case"continue":return this.log("block:continue",{scope:e.name}),Qb();case"ns":return zt;case"meta":return zt;case"and":{const n=await this._eval(r.left,e);if(_s(n),n.value){const c=await this._eval(r.right,e);return _s(c),c}else return n}case"or":{const n=await this._eval(r.left,e);if(_s(n),n.value)return n;{const c=await this._eval(r.right,e);return _s(c),c}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=zt;for(let c=0;c<r.length;c++){const g=r[c];if(n=await this._eval(g,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const c=await this._eval(e.target,r);Hu(c);const g=await this._eval(e.index,r);Pe(g),c.value[g.value]=n}else if(e.type==="prop"){const c=await this._eval(e.target,r);vi(c),c.value.set(e.name,n)}else throw new ir("The left-hand side of an assignment expression must be a variable or a property/index access.")}};fn([pt],Fs.prototype,"exec",null);fn([pt],Fs.prototype,"execFn",null);fn([pt],Fs.prototype,"log",null);fn([pt],Fs.prototype,"collectNs",null);fn([pt],Fs.prototype,"collectNsMember",null);fn([pt],Fs.prototype,"_fn",null);fn([pt],Fs.prototype,"_eval",null);fn([pt],Fs.prototype,"_run",null);fn([pt],Fs.prototype,"registerAbortHandler",null);fn([pt],Fs.prototype,"unregisterAbortHandler",null);fn([pt],Fs.prototype,"abort",null);fn([pt],Fs.prototype,"assign",null);fn([pt],Fs,"collectMetadata",null);function i1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function lu(t,r,e,n){var c=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(c,lu.prototype),c.expected=r,c.found=e,c.location=n,c.name="SyntaxError",c}i1(lu,Error);function Vc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}lu.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var c=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(c):c,$=this.location.source+":"+g.line+":"+g.column;if(e){var x=this.location.end,m=Vc("",g.line.toString().length," "),A=e[c.line-1],C=c.line===x.line?x.column:A.length+1,P=C-c.column||1;r+=`
 --> `+$+`
`+m+` |
`+g.line+" | "+A+`
`+m+" | "+Vc("",c.column-1," ")+Vc("",P,"^")}else r+=`
 at `+$}return r};lu.buildMessage=function(t,r){var e={literal:function(A){return'"'+c(A.text)+'"'},class:function(A){var C=A.parts.map(function(P){return Array.isArray(P)?g(P[0])+"-"+g(P[1]):g(P)});return"["+(A.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function n(A){return A.charCodeAt(0).toString(16).toUpperCase()}function c(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function g(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function $(A){return e[A.type](A)}function x(A){var C=A.map($),P,S;if(C.sort(),C.length>0){for(P=1,S=1;P<C.length;P++)C[P-1]!==C[P]&&(C[S]=C[P],S++);C.length=S}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function m(A){return A?'"'+c(A)+'"':"end of input"}return"Expected "+x(t)+" but "+m(r)+" found."};function Wv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,c={Preprocess:O,Main:Sa},g=O,$="//",x="/*",m="*/",A="(",C=")",P="::",S="{",I="}",G="###",ee="let",re=":",ge="=",q="var",U="<:",L="#[",H="]",W="each",V=",",J="for",Y="return",ue="loop",de="break",le="continue",Ie="+=",ze="-=",mt="\\",Ke="||",ft="&&",je="==",ut="!=",jt="<=",Rt=">=",Ye="<",Br=">",Wt="+",Ar="-",Ft="*",br="^",Hr="/",Or="%",Rr="!",Dt="[",z=".",Z="if",se="elif",ve="else",ye="match",oe="=>",Ne="eval",me="`",$e='"',he="'",Le='\\"',Re="\\'",He="true",We="false",Ze="null",at=";",it="@",bt="@(",Kt=`\r
`,Ct=/^[A-Z0-9_:]/i,sr=/^[^`{]/,Ns=/^[{}`]/,rs=/^[+\-]/,Lt=/^[1-9]/,vt=/^[0-9]/,qt=/^[A-Z_]/i,Zn=/^[A-Z0-9_]/i,Qn=/^[\r\n]/,Ii=/^[ \t\r\n]/,Ti=/^[ \t]/,or=wo(),ur=te("//",!1),ji=te("/*",!1),xn=te("*/",!1),_r=te("(",!1),Ot=te(")",!1),Cr=te("::",!1),fr=te("{",!1),tt=te("}",!1),Jt=te("###",!1),zr=te("let",!1),xt=te(":",!1),$t=te("=",!1),ps=te("var",!1),Ri=te("<:",!1),Di=te("#[",!1),Is=te("]",!1),vs=te("each",!1),At=te(",",!1),gt=te("for",!1),Ts=te("return",!1),gr=Xt([["A","Z"],["0","9"],"_",":"],!1,!0),dr=te("loop",!1),Li=te("break",!1),Bi=te("continue",!1),Hi=te("+=",!1),Ui=te("-=",!1),Yn=te("\\",!1),ea=te("||",!1),qi=te("&&",!1),zi=te("==",!1),Vi=te("!=",!1),Wi=te("<=",!1),Ki=te(">=",!1),ta=te("<",!1),$n=te(">",!1),ra=te("+",!1),Ji=te("-",!1),sa=te("*",!1),na=te("^",!1),Xi=te("/",!1),Gi=te("%",!1),Zi=te("!",!1),bn=te("[",!1),gs=te(".",!1),An=te("if",!1),Qi=te("elif",!1),Yi=te("else",!1),el=te("match",!1),js=te("=>",!1),Rs=te("eval",!1),Ds=te("`",!1),tl=Xt(["`","{"],!0,!1),Ls=Xt(["{","}","`"],!1,!1),Bs=te('"',!1),Hs=te("'",!1),Us=te('\\"',!1),qs=te("\\'",!1),zs=Xt(["+","-"],!1,!1),aa=Xt([["1","9"]],!1,!1),Nt=Xt([["0","9"]],!1,!1),ia=te("true",!1),cr=te("false",!1),rl=te("null",!1),Vs=te(";",!1),sl=te("@",!1),ds=te("@(",!1),nl=Xt([["A","Z"],"_"],!1,!0),_n=Xt([["A","Z"],["0","9"],"_"],!1,!0),al=te(`\r
`,!1),la=Xt(["\r",`
`],!1,!1),il=Xt([" ","	","\r",`
`],!1,!1),ll=Xt([" ","	"],!1,!1),ol=function(l){return l.join("")},ul=function(){return k()},fl=function(){return k()},cl=function(){return""},hl=function(){return""},pl=function(l){return l??[]},oa=function(l,f){return f},vl=function(l,f){return[l,...f]},Cn=function(l,f){return f},gl=function(l,f){return[l,...f]},kn=function(l,f){return f},dl=function(l,f){return[l,...f]},ua=function(l){return l},yl=function(l,f){return ie("ns",{name:l,members:f})},wl=function(l,f){return ie("meta",{name:l,value:f})},ml=function(l){return ie("meta",{name:null,value:l})},xl=function(l,f,y){return ie("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},$l=function(l,f,y){return ie("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},bl=function(l){return ie("identifier",{name:"print",chain:[ie("callChain",{args:[l]})]})},Al=function(l,f){return ie("attr",{name:l,value:f??ie("bool",{value:!0})})},_l=function(l,f,y){return ie("each",{var:l,items:f,for:y})},Cl=function(l,f,y){return ie("each",{var:l,items:f,for:y})},kl=function(l,f){return f},Pl=function(l,f,y,h){return ie("for",{var:l,from:f??ie("num",{value:0}),to:y,for:h})},El=function(l,f){return f},Ml=function(l,f,y,h){return ie("for",{var:l,from:f??ie("num",{value:0}),to:y,for:h})},Sl=function(l,f){return ie("for",{times:l,for:f})},Fl=function(l,f){return ie("for",{times:l,for:f})},Ol=function(l){return ie("return",{expr:l})},Nl=function(l){return ie("loop",{statements:l})},Il=function(){return ie("break",{})},Tl=function(){return ie("continue",{})},jl=function(l,f,y){return f==="+="?ie("addAssign",{dest:l,expr:y}):f==="-="?ie("subAssign",{dest:l,expr:y}):ie("assign",{dest:l,expr:y})},fa=function(l,f,y){return{op:f,term:y}},Rl=function(l,f){return ie("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ca=function(){return k()},Dl=function(l){return ie("not",{expr:l})},Ll=function(l,f){return{...l,chain:f}},Bl=function(l){return ie("callChain",{args:l??[]})},ha=function(l,f){return f},Hl=function(l,f){return[l,...f]},pa=function(l){return ie("indexChain",{index:l})},Ul=function(l){return ie("propChain",{name:l})},ql=function(l,f,y,h){return ie("if",{cond:l,then:f,elseif:y??[],else:h})},zl=function(l,f){return[l,...f]},Vl=function(l,f){return{cond:l,then:f}},Wl=function(l){return l},va=function(l,f,y){return{q:f,a:y}},Kl=function(l,f,y){return ie("match",{about:l,qs:f??[],default:y})},ga=function(l){return ie("block",{statements:l})},Jl=function(l){return ie("identifier",{name:l})},Xl=function(l){return ie("tmpl",{tmpl:l})},Gl=function(l){return l.join("")},da=function(l){return l},Zl=function(l){return ie("str",{value:l.join("")})},ya=function(l){return l},wa=function(l){return ie("str",{value:l.join("")})},Ql=function(){return'"'},ma=function(){return"'"},Yl=function(){return ie("num",{value:parseFloat(k())})},eo=function(){return ie("num",{value:parseFloat(k())})},to=function(){return ie("num",{value:parseInt(k(),10)})},ro=function(){return ie("num",{value:parseInt(k(),10)})},so=function(){return ie("bool",{value:!0})},no=function(){return ie("bool",{value:!1})},ao=function(){return ie("null",{})},xa=function(l,f){return{k:l,v:f}},io=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ie("obj",{value:f})},$a=function(l){return l},ba=function(l){return ie("arr",{value:l})},lo=function(l,f){return{name:l,argType:f}},Aa=function(l,f){return[l,...f]},oo=function(l,f,y,h,s,o){return(l.length>0||y.length>0)&&Ks("Cannot use spaces before or after the function name."),ie("def",{name:f,expr:ie("fn",{args:h??[],retType:s},o??[]),mut:!1,attr:[]})},uo=function(l,f,y){return ie("fn",{args:l??[],retType:f},y??[])},_a=function(l){return l},fo=function(l){return ie("arr",{value:l})},Ca=function(l,f){return{k:l,v:f}},ka=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ie("obj",{value:f})},co=function(l,f){return ie("fnTypeSource",{args:l??[],result:f})},Pa=function(l,f){return[l,...f]},ho=function(l,f){return ie("namedTypeSource",{name:l,inner:f})},po=function(l){return ie("namedTypeSource",{name:l,inner:null})},vo=function(){return k()},go=function(){return k()},yo=function(l){return ie("block",{statements:l??[]})},i=0,X=0,Ws=[{line:1,column:1}],a=0,K=[],E=0,T={},Vr;if("startRule"in r){if(!(r.startRule in c))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=c[r.startRule]}function k(){return t.substring(X,i)}function R(){return Js(X,i)}function Ks(l,f){throw f=f!==void 0?f:Js(X,i),Ea(l,f)}function te(l,f){return{type:"literal",text:l,ignoreCase:f}}function Xt(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function wo(){return{type:"any"}}function ae(){return{type:"end"}}function Bt(l){var f=Ws[l],y;if(f)return f;for(y=l-1;!Ws[y];)y--;for(f=Ws[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ws[l]=f,f}function Js(l,f,y){var h=Bt(l),s=Bt(f),o={source:n,start:{offset:l,line:h.line,column:h.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(o.start=n.offset(o.start),o.end=n.offset(o.end)),o}function N(l){i<a||(i>a&&(a=i,K=[]),K.push(l))}function Ea(l,f){return new lu(l,null,null,f)}function Xs(l,f,y){return new lu(lu.buildMessage(l,f),l,f,y)}function O(){var l,f,y,h=i*76+0,s=T[h];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ma();y!==e;)f.push(y),y=Ma();return X=l,f=ol(f),l=f,T[h]={nextPos:i,result:l},l}function Ma(){var l,f,y=i*76+1,h=T[y];return h?(i=h.nextPos,h.result):(l=i,f=Da(),f!==e&&(X=l,f=ul()),l=f,l===e&&(l=i,f=Zs(),f!==e&&(X=l,f=fl()),l=f,l===e&&(l=mo(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,E===0&&N(or))))),T[y]={nextPos:i,result:l},l)}function mo(){var l,f,y,h,s,o,p=i*76+2,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,E===0&&N(ur)),f!==e){for(y=[],h=i,s=i,E++,o=Xa(),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,o=Xa(),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);X=l,l=cl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===x?(f=x,i+=2):(f=e,E===0&&N(ji)),f!==e){for(y=[],h=i,s=i,E++,t.substr(i,2)===m?(o=m,i+=2):(o=e,E===0&&N(xn)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.substr(i,2)===m?(o=m,i+=2):(o=e,E===0&&N(xn)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);t.substr(i,2)===m?(h=m,i+=2):(h=e,E===0&&N(xn)),h!==e?(X=l,l=hl()):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Sa(){var l,f,y,h,s,o=i*76+3,p=T[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=_();y!==e;)f.push(y),y=_();for(y=Fa(),y===e&&(y=null),h=[],s=_();s!==e;)h.push(s),s=_();return X=l,l=pl(y),T[o]={nextPos:i,result:l},l}function Fa(){var l,f,y,h,s,o,p,u,d=i*76+4,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Pn(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Pn(),u!==e?(X=h,h=oa(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Pn(),u!==e?(X=h,h=oa(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=vl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function xo(){var l,f,y,h,s,o,p,u,d=i*76+5,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=En(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=En(),u!==e?(X=h,h=Cn(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=En(),u!==e?(X=h,h=Cn(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=gl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function ys(){var l,f,y,h,s,o,p,u,d=i*76+6,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=yr(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=yr(),u!==e?(X=h,h=kn(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=yr(),u!==e?(X=h,h=kn(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=dl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Pn(){var l,f=i*76+7,y=T[f];return y?(i=y.nextPos,y.result):(l=ws(),l===e&&(l=Oa(),l===e&&(l=yr())),T[f]={nextPos:i,result:l},l)}function En(){var l,f=i*76+8,y=T[f];return y?(i=y.nextPos,y.result):(l=kr(),l===e&&(l=Ka(),l===e&&(l=ws())),T[f]={nextPos:i,result:l},l)}function yr(){var l,f=i*76+9,y=T[f];return y?(i=y.nextPos,y.result):(l=kr(),l===e&&(l=Ka(),l===e&&(l=Na(),l===e&&(l=Ao(),l===e&&(l=$o(),l===e&&(l=Ia(),l===e&&(l=bo(),l===e&&(l=_o(),l===e&&(l=Co(),l===e&&(l=ko(),l===e&&(l=Po(),l===e&&(l=De()))))))))))),T[f]={nextPos:i,result:l},l)}function De(){var l,f=i*76+10,y=T[f];return y?(i=y.nextPos,y.result):(l=Eo(),l===e&&(l=Wr()),T[f]={nextPos:i,result:l},l)}function Wr(){var l,f=i*76+11,y=T[f];return y?(i=y.nextPos,y.result):(l=Fo(),l===e&&(l=Ro(),l===e&&(l=Er(),l===e&&(l=Kr()))),T[f]={nextPos:i,result:l},l)}function Kr(){var l,f,y,h,s,o,p=i*76+12,u=T[p];if(u)return i=u.nextPos,u.result;if(l=No(),l===e&&(l=Fn(),l===e&&(l=Da(),l===e&&(l=Zs(),l===e&&(l=Ua(),l===e&&(l=Tn(),l===e&&(l=Va(),l===e&&(l=Wa(),l===e&&(l=jo(),l===e&&(l=Mo(),l===e&&(l=Io(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=A,i++):(f=e,E===0&&N(_r)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=De(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e?(X=l,l=ua(h)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=T[f];return y?(i=y.nextPos,y.result):(l=Ua(),l===e&&(l=Zs(),l===e&&(l=Tn(),l===e&&(l=Dn(),l===e&&(l=Ja(),l===e&&(l=Va()))))),T[f]={nextPos:i,result:l},l)}function ws(){var l,f,y,h,s,o,p,u,d,v,b=i*76+14,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===P?(f=P,i+=2):(f=e,E===0&&N(Cr)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(o=S,i++):(o=e,E===0&&N(fr)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(u=xo(),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();t.charCodeAt(i)===125?(v=I,i++):(v=e,E===0&&N(tt)),v!==e?(X=l,l=yl(h,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Oa(){var l,f,y,h,s,o,p=i*76+15,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,3)===G?(f=G,i+=3):(f=e,E===0&&N(Jt)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=Ue(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();o=Te(),o!==e?(X=l,l=wl(h,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===G?(f=G,i+=3):(f=e,E===0&&N(Jt)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();h=Te(),h!==e?(X=l,l=ml(h)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function kr(){var l,f,y,h,s,o,p,u,d,v=i*76+16,b=T[v];if(b)return i=b.nextPos,b.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,E===0&&N(zr)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===58?(p=re,i++):(p=e,E===0&&N(xt)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=Gt(),d!==e?s=d:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===61?(p=ge,i++):(p=e,E===0&&N($t)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=De(),d!==e?(X=l,l=xl(h,s,d)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===q?(f=q,i+=3):(f=e,E===0&&N(ps)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===58?(p=re,i++):(p=e,E===0&&N(xt)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=Gt(),d!==e?s=d:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===61?(p=ge,i++):(p=e,E===0&&N($t)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=De(),d!==e?(X=l,l=$l(h,s,d)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[v]={nextPos:i,result:l},l}function Na(){var l,f,y,h,s=i*76+17,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===U?(f=U,i+=2):(f=e,E===0&&N(Ri)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();h=De(),h!==e?(X=l,l=bl(h)):(i=l,l=e)}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function $o(){var l,f,y,h,s,o,p,u=i*76+18,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,E===0&&N(Di)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();t.charCodeAt(i)===93?(p=H,i++):(p=e,E===0&&N(Is)),p!==e?(X=l,l=Al(h,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Ia(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+19,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.substr(i,4)===W?(f=W,i+=4):(f=e,E===0&&N(vs)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,E===0&&N(zr)),s!==e){if(o=[],p=_(),p!==e)for(;p!==e;)o.push(p),p=_();else o=e;if(o!==e)if(p=Ue(),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();for(t.charCodeAt(i)===44?(d=V,i++):(d=e,E===0&&N(At)),d===e&&(d=null),v=[],b=_();b!==e;)v.push(b),b=_();if(b=De(),b!==e)if(t.charCodeAt(i)===41?(w=C,i++):(w=e,E===0&&N(Ot)),w!==e){for(M=[],F=_();F!==e;)M.push(F),F=_();F=Ht(),F!==e?(X=l,l=_l(p,b,F)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===W?(f=W,i+=4):(f=e,E===0&&N(vs)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(t.substr(i,3)===ee?(h=ee,i+=3):(h=e,E===0&&N(zr)),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();if(v=De(),v!==e){if(b=[],w=_(),w!==e)for(;w!==e;)b.push(w),w=_();else b=e;b!==e?(w=Ht(),w!==e?(X=l,l=Cl(o,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function bo(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B=i*76+20,Q=T[B];if(Q)return i=Q.nextPos,Q.result;if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,E===0&&N(zr)),s!==e){if(o=[],p=_(),p!==e)for(;p!==e;)o.push(p),p=_();else o=e;if(o!==e)if(p=Ue(),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();if(d=i,t.charCodeAt(i)===61?(v=ge,i++):(v=e,E===0&&N($t)),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();w=De(),w!==e?(X=d,d=kl(p,w)):(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),t.charCodeAt(i)===44?(v=V,i++):(v=e,E===0&&N(At)),v===e&&(v=null),b=[],w=_();w!==e;)b.push(w),w=_();if(w=De(),w!==e)if(t.charCodeAt(i)===41?(M=C,i++):(M=e,E===0&&N(Ot)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();D=Ht(),D!==e?(X=l,l=Pl(p,d,w,D)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(t.substr(i,3)===ee?(h=ee,i+=3):(h=e,E===0&&N(zr)),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(u=i,t.charCodeAt(i)===61?(d=ge,i++):(d=e,E===0&&N($t)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();b=De(),b!==e?(X=u,u=El(o,b)):(i=u,u=e)}else i=u,u=e;for(u===e&&(u=null),t.charCodeAt(i)===44?(d=V,i++):(d=e,E===0&&N(At)),d===e&&(d=null),v=[],b=_();b!==e;)v.push(b),b=_();if(b=De(),b!==e){if(w=[],M=_(),M!==e)for(;M!==e;)w.push(M),M=_();else w=e;w!==e?(M=Ht(),M!==e?(X=l,l=Ml(o,u,b,M)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(s=De(),s!==e)if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Ht(),u!==e?(X=l,l=Sl(s,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=De(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;s!==e?(o=Ht(),o!==e?(X=l,l=Fl(h,o)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return T[B]={nextPos:i,result:l},l}function Ao(){var l,f,y,h,s,o=i*76+21,p=T[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===Y?(f=Y,i+=6):(f=e,E===0&&N(Ts)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();s=De(),s!==e?(X=l,l=Ol(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[o]={nextPos:i,result:l},l}function _o(){var l,f,y,h,s,o,p,u,d=i*76+22,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===ue?(f=ue,i+=4):(f=e,E===0&&N(dr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===123?(h=S,i++):(h=e,E===0&&N(fr)),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();if(o=ys(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();t.charCodeAt(i)===125?(u=I,i++):(u=e,E===0&&N(tt)),u!==e?(X=l,l=Nl(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Co(){var l,f,y,h,s=i*76+23,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===de?(f=de,i+=5):(f=e,E===0&&N(Li)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=Il()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function ko(){var l,f,y,h,s=i*76+24,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,8)===le?(f=le,i+=8):(f=e,E===0&&N(Bi)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=Tl()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Po(){var l,f,y,h,s,o,p=i*76+25,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=De(),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.substr(i,2)===Ie?(h=Ie,i+=2):(h=e,E===0&&N(Hi)),h===e&&(t.substr(i,2)===ze?(h=ze,i+=2):(h=e,E===0&&N(Ui)),h===e&&(t.charCodeAt(i)===61?(h=ge,i++):(h=e,E===0&&N($t)))),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();o=De(),o!==e?(X=l,l=jl(f,h,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Eo(){var l,f,y,h,s,o,p,u,d=i*76+26,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Wr(),f!==e){for(y=[],h=i,s=[],o=Pr();o!==e;)s.push(o),o=Pr();if(o=Ta(),o!==e){for(p=[],u=Pr();u!==e;)p.push(u),u=Pr();u=Wr(),u!==e?(X=h,h=fa(f,o,u)):(i=h,h=e)}else i=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=i,s=[],o=Pr();o!==e;)s.push(o),o=Pr();if(o=Ta(),o!==e){for(p=[],u=Pr();u!==e;)p.push(u),u=Pr();u=Wr(),u!==e?(X=h,h=fa(f,o,u)):(i=h,h=e)}else i=h,h=e}else y=e;y!==e?(X=l,l=Rl(f,y)):(i=l,l=e)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Pr(){var l,f,y,h=i*76+27,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=mt,i++):(f=e,E===0&&N(Yn)),f!==e?(y=qe(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=Ae()),T[h]={nextPos:i,result:l},l)}function Ta(){var l,f,y=i*76+28,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Ke?(f=Ke,i+=2):(f=e,E===0&&N(ea)),f===e&&(t.substr(i,2)===ft?(f=ft,i+=2):(f=e,E===0&&N(qi)),f===e&&(t.substr(i,2)===je?(f=je,i+=2):(f=e,E===0&&N(zi)),f===e&&(t.substr(i,2)===ut?(f=ut,i+=2):(f=e,E===0&&N(Vi)),f===e&&(t.substr(i,2)===jt?(f=jt,i+=2):(f=e,E===0&&N(Wi)),f===e&&(t.substr(i,2)===Rt?(f=Rt,i+=2):(f=e,E===0&&N(Ki)),f===e&&(t.charCodeAt(i)===60?(f=Ye,i++):(f=e,E===0&&N(ta)),f===e&&(t.charCodeAt(i)===62?(f=Br,i++):(f=e,E===0&&N($n)),f===e&&(t.charCodeAt(i)===43?(f=Wt,i++):(f=e,E===0&&N(ra)),f===e&&(t.charCodeAt(i)===45?(f=Ar,i++):(f=e,E===0&&N(Ji)),f===e&&(t.charCodeAt(i)===42?(f=Ft,i++):(f=e,E===0&&N(sa)),f===e&&(t.charCodeAt(i)===94?(f=br,i++):(f=e,E===0&&N(na)),f===e&&(t.charCodeAt(i)===47?(f=Hr,i++):(f=e,E===0&&N(Xi)),f===e&&(t.charCodeAt(i)===37?(f=Or,i++):(f=e,E===0&&N(Gi))))))))))))))),f!==e&&(X=l,f=ca()),l=f,T[y]={nextPos:i,result:l},l)}function Mo(){var l,f,y,h=i*76+29,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Rr,i++):(f=e,E===0&&N(Zi)),f!==e?(y=De(),y!==e?(X=l,l=Dl(y)):(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Er(){var l,f,y,h,s=i*76+30,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,f=Kr(),f!==e){if(y=[],h=Mn(),h===e&&(h=ja(),h===e&&(h=Sn())),h!==e)for(;h!==e;)y.push(h),h=Mn(),h===e&&(h=ja(),h===e&&(h=Sn()));else y=e;y!==e?(X=l,l=Ll(f,y)):(i=l,l=e)}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function Mn(){var l,f,y,h,s,o,p=i*76+31,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===40?(f=A,i++):(f=e,E===0&&N(_r)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=So(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e?(X=l,l=Bl(h)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function So(){var l,f,y,h,s,o,p=i*76+32,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=De(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=De(),o!==e?(X=h,h=ha(f,o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=De(),o!==e?(X=h,h=ha(f,o)):(i=h,h=e)):(i=h,h=e);X=l,l=Hl(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function ja(){var l,f,y,h,s,o,p=i*76+33,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=De(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=pa(h)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Sn(){var l,f,y,h=i*76+34,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=z,i++):(f=e,E===0&&N(gs)),f!==e?(y=Ue(),y!==e?(X=l,l=Ul(y)):(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Fo(){var l,f,y,h,s,o,p,u,d,v,b=i*76+35,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===Z?(f=Z,i+=2):(f=e,E===0&&N(An)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=De(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ht(),o!==e){if(p=i,u=[],d=_(),d!==e)for(;d!==e;)u.push(d),d=_();else u=e;if(u!==e?(d=Ra(),d!==e?p=d:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),u=i,d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;d!==e?(v=Oo(),v!==e?u=v:(i=u,u=e)):(i=u,u=e),u===e&&(u=null),X=l,l=ql(h,o,p,u)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Ra(){var l,f,y,h,s,o,p=i*76+36,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Gs(),f!==e){for(y=[],h=i,s=[],o=_();o!==e;)s.push(o),o=_();for(o=Gs(),o!==e?h=o:(i=h,h=e);h!==e;){for(y.push(h),h=i,s=[],o=_();o!==e;)s.push(o),o=_();o=Gs(),o!==e?h=o:(i=h,h=e)}X=l,l=zl(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Gs(){var l,f,y,h,s,o,p,u=i*76+37,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,t.substr(i,4)===se?(f=se,i+=4):(f=e,E===0&&N(Qi)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();if(s=De(),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();p=Ht(),p!==e?(X=l,l=Vl(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Oo(){var l,f,y,h,s,o=i*76+38,p=T[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ve?(f=ve,i+=4):(f=e,E===0&&N(Yi)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();s=Ht(),s!==e?(X=l,l=Wl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[o]={nextPos:i,result:l},l}function No(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=i*76+39,ne=T[xe];if(ne)return i=ne.nextPos,ne.result;if(l=i,t.substr(i,5)===ye?(f=ye,i+=5):(f=e,E===0&&N(el)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();if(s=De(),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===123?(p=S,i++):(p=e,E===0&&N(fr)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();if(d=[],v=i,b=De(),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();X=v,v=va(s,b,D)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(d.push(v),v=i,b=De(),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();X=v,v=va(s,b,D)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else d=e;if(d!==e){if(v=i,t.charCodeAt(i)===42?(b=Ft,i++):(b=e,E===0&&N(sa)),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();v=D}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),b=[],w=_();w!==e;)b.push(w),w=_();t.charCodeAt(i)===125?(w=I,i++):(w=e,E===0&&N(tt)),w!==e?(X=l,l=Kl(s,d,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return T[xe]={nextPos:i,result:l},l}function Fn(){var l,f,y,h,s,o,p,u,d=i*76+40,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Ne?(f=Ne,i+=4):(f=e,E===0&&N(Rs)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===123?(h=S,i++):(h=e,E===0&&N(fr)),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();if(o=ys(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();t.charCodeAt(i)===125?(u=I,i++):(u=e,E===0&&N(tt)),u!==e?(X=l,l=ga(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Io(){var l,f,y=i*76+41,h=T[y];return h?(i=h.nextPos,h.result):(l=i,f=Ho(),f!==e&&(X=l,f=Jl(f)),l=f,T[y]={nextPos:i,result:l},l)}function Da(){var l,f,y,h,s,o,p=i*76+42,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===96?(f=me,i++):(f=e,E===0&&N(Ds)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===96?(o=me,i++):(o=e,E===0&&N(Ds)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=La(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===96?(o=me,i++):(o=e,E===0&&N(Ds)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=La(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===96?(h=me,i++):(h=e,E===0&&N(Ds)),h!==e?(X=l,l=Xl(y)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function La(){var l,f,y,h,s,o,p=i*76+43,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=De(),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();t.charCodeAt(i)===125?(o=I,i++):(o=e,E===0&&N(tt)),o!==e?l=h:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ba(),y!==e)for(;y!==e;)f.push(y),y=Ba();else f=e;f!==e&&(X=l,f=Gl(f)),l=f}return T[p]={nextPos:i,result:l},l}function Ba(){var l,f=i*76+44,y=T[f];return y?(i=y.nextPos,y.result):(l=Ha(),l===e&&(sr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(tl))),T[f]={nextPos:i,result:l},l)}function Ha(){var l,f,y,h=i*76+45,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=mt,i++):(f=e,E===0&&N(Yn)),f!==e?(Ns.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,E===0&&N(Ls)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Zs(){var l,f,y,h,s,o,p=i*76+46,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===34?(f=$e,i++):(f=e,E===0&&N(Bs)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===34?(o=$e,i++):(o=e,E===0&&N(Bs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=On(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=da(o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===34?(o=$e,i++):(o=e,E===0&&N(Bs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=On(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=da(o)):(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===34?(h=$e,i++):(h=e,E===0&&N(Bs)),h!==e?(X=l,l=Zl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=he,i++):(f=e,E===0&&N(Hs)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===39?(o=he,i++):(o=e,E===0&&N(Hs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Nn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=ya(o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===39?(o=he,i++):(o=e,E===0&&N(Hs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Nn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=ya(o)):(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===39?(h=he,i++):(h=e,E===0&&N(Hs)),h!==e?(X=l,l=wa(y)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function On(){var l,f,y=i*76+47,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Le?(f=Le,i+=2):(f=e,E===0&&N(Us)),f!==e&&(X=l,f=Ql()),l=f,T[y]={nextPos:i,result:l},l)}function Nn(){var l,f,y=i*76+48,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Re?(f=Re,i+=2):(f=e,E===0&&N(qs)),f!==e&&(X=l,f=ma()),l=f,T[y]={nextPos:i,result:l},l)}function Ua(){var l,f=i*76+49,y=T[f];return y?(i=y.nextPos,y.result):(l=In(),l===e&&(l=qa()),T[f]={nextPos:i,result:l},l)}function In(){var l,f,y,h,s,o,p=i*76+50,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),Lt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(aa)),f!==e){if(y=[],vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt)),h!==e)for(;h!==e;)y.push(h),vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(h=z,i++):(h=e,E===0&&N(gs)),h!==e){if(s=[],vt.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,E===0&&N(Nt)),o!==e)for(;o!==e;)s.push(o),vt.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,E===0&&N(Nt));else s=e;s!==e?(X=l,l=Yl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),vt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(Nt)),f!==e)if(t.charCodeAt(i)===46?(y=z,i++):(y=e,E===0&&N(gs)),y!==e){if(h=[],vt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,E===0&&N(Nt)),s!==e)for(;s!==e;)h.push(s),vt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,E===0&&N(Nt));else h=e;h!==e?(X=l,l=eo()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[p]={nextPos:i,result:l},l}function qa(){var l,f,y,h,s=i*76+51,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),Lt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(aa)),f!==e){if(y=[],vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt)),h!==e)for(;h!==e;)y.push(h),vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt));else y=e;y!==e?(X=l,l=to()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),vt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(Nt)),f!==e?(X=l,l=ro()):(i=l,l=e)),T[s]={nextPos:i,result:l},l}function Tn(){var l,f=i*76+52,y=T[f];return y?(i=y.nextPos,y.result):(l=za(),l===e&&(l=To()),T[f]={nextPos:i,result:l},l)}function za(){var l,f,y,h,s=i*76+53,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===He?(f=He,i+=4):(f=e,E===0&&N(ia)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=so()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function To(){var l,f,y,h,s=i*76+54,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,E===0&&N(cr)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=no()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Va(){var l,f,y,h,s=i*76+55,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,E===0&&N(rl)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=ao()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Wa(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+56,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=De(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=xa(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=De(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=xa(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=I,i++):(s=e,E===0&&N(tt)),s!==e?(X=l,l=io(h)):(i=l,l=e)}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function jo(){var l,f,y,h,s,o,p,u,d,v,b=i*76+57,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=De(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=$a(o)}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=De(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=$a(o)}else i=s,s=e;for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=ba(h)):(i=l,l=e)}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function jn(){var l,f,y,h,s,o,p,u=i*76+58,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,f=Ue(),f!==e){for(y=i,h=[],s=_();s!==e;)h.push(s),s=_();if(t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();p=Gt(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),X=l,l=lo(f,y)}else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Rn(){var l,f,y,h,s,o,p=i*76+59,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=jn(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=jn(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=jn(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);X=l,l=Aa(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Ka(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=i*76+60,ne=T[xe];if(ne)return i=ne.nextPos,ne.result;if(l=i,t.charCodeAt(i)===64?(f=it,i++):(f=e,E===0&&N(sl)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=Ue(),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(t.charCodeAt(i)===40?(o=A,i++):(o=e,E===0&&N(_r)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(u=Rn(),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();if(t.charCodeAt(i)===41?(v=C,i++):(v=e,E===0&&N(Ot)),v!==e){for(b=i,w=[],M=_();M!==e;)w.push(M),M=_();if(t.charCodeAt(i)===58?(M=re,i++):(M=e,E===0&&N(xt)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();D=Gt(),D!==e?b=D:(i=b,b=e)}else i=b,b=e;for(b===e&&(b=null),w=[],M=_();M!==e;)w.push(M),M=_();if(t.charCodeAt(i)===123?(M=S,i++):(M=e,E===0&&N(fr)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();for(D=ys(),D===e&&(D=null),B=[],Q=_();Q!==e;)B.push(Q),Q=_();t.charCodeAt(i)===125?(Q=I,i++):(Q=e,E===0&&N(tt)),Q!==e?(X=l,l=oo(y,h,s,u,b,D)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[xe]={nextPos:i,result:l},l}function Ro(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F=i*76+61,D=T[F];if(D)return i=D.nextPos,D.result;if(l=i,t.substr(i,2)===bt?(f=bt,i+=2):(f=e,E===0&&N(ds)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=Rn(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=i,u=[],d=_();d!==e;)u.push(d),d=_();if(t.charCodeAt(i)===58?(d=re,i++):(d=e,E===0&&N(xt)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();b=Gt(),b!==e?p=b:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),u=[],d=_();d!==e;)u.push(d),d=_();if(t.charCodeAt(i)===123?(d=S,i++):(d=e,E===0&&N(fr)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();for(b=ys(),b===e&&(b=null),w=[],M=_();M!==e;)w.push(M),M=_();t.charCodeAt(i)===125?(M=I,i++):(M=e,E===0&&N(tt)),M!==e?(X=l,l=uo(h,p,b)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[F]={nextPos:i,result:l},l}function Dn(){var l,f,y,h,s,o,p,u,d,v,b=i*76+62,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Te(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=_a(o)}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Te(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=_a(o)}else i=s,s=e;for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=fo(h)):(i=l,l=e)}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Ja(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+63,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=Te(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=Ca(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=Te(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=Ca(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=I,i++):(s=e,E===0&&N(tt)),s!==e?(X=l,l=ka(h)):(i=l,l=e)}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function Gt(){var l,f=i*76+64,y=T[f];return y?(i=y.nextPos,y.result):(l=Do(),l===e&&(l=Bo()),T[f]={nextPos:i,result:l},l)}function Do(){var l,f,y,h,s,o,p,u,d,v,b=i*76+65,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===bt?(f=bt,i+=2):(f=e,E===0&&N(ds)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=Lo(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.substr(i,2)===oe?(u=oe,i+=2):(u=e,E===0&&N(js)),u!==e){for(d=[],v=_();v!==e;)d.push(v),v=_();v=Gt(),v!==e?(X=l,l=co(h,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Lo(){var l,f,y,h,s,o,p=i*76+66,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Gt(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=Gt(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=Gt(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);X=l,l=Pa(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Bo(){var l,f,y,h,s,o,p,u,d=i*76+67,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Ue(),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(t.charCodeAt(i)===60?(h=Ye,i++):(h=e,E===0&&N(ta)),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=Gt(),o!==e){for(p=[],u=Ae();u!==e;)p.push(u),u=Ae();t.charCodeAt(i)===62?(u=Br,i++):(u=e,E===0&&N($n)),u!==e?(X=l,l=ho(f,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=Ue(),f!==e&&(X=l,f=po(f)),l=f),T[d]={nextPos:i,result:l},l}function Ue(){var l,f,y,h,s=i*76+68,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,qt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(nl)),f!==e){for(y=[],Zn.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(_n));h!==e;)y.push(h),Zn.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(_n));X=l,l=vo()}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function Ho(){var l,f,y,h,s,o,p=i*76+69,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Ue(),f!==e){for(y=[],h=i,t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e?(o=Ue(),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e?(o=Ue(),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);X=l,l=go()}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Jr(){var l,f,y,h,s,o=i*76+70,p=T[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=_();y!==e;)f.push(y),y=_();if(t.charCodeAt(i)===44?(y=V,i++):(y=e,E===0&&N(At)),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();f=[f,y,h],l=f}else i=l,l=e;if(l===e)if(l=[],f=_(),f!==e)for(;f!==e;)l.push(f),f=_();else l=e;return T[o]={nextPos:i,result:l},l}function Ht(){var l,f,y,h,s,o,p=i*76+71,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=ys(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===125?(o=I,i++):(o=e,E===0&&N(tt)),o!==e?(X=l,l=yo(h)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=yr()),T[p]={nextPos:i,result:l},l}function qe(){var l,f=i*76+72,y=T[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Kt?(l=Kt,i+=2):(l=e,E===0&&N(al)),l===e&&(Qn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(la))),T[f]={nextPos:i,result:l},l)}function Xa(){var l,f,y=i*76+73,h=T[y];return h?(i=h.nextPos,h.result):(l=i,E++,t.length>i?(f=t.charAt(i),i++):(f=e,E===0&&N(or)),E--,f===e?l=void 0:(i=l,l=e),l===e&&(l=qe()),T[y]={nextPos:i,result:l},l)}function _(){var l,f=i*76+74,y=T[f];return y?(i=y.nextPos,y.result):(Ii.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(il)),T[f]={nextPos:i,result:l},l)}function Ae(){var l,f=i*76+75,y=T[f];return y?(i=y.nextPos,y.result):(Ti.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(ll)),T[f]={nextPos:i,result:l},l)}function ie(l,f,y){const h={type:l};f.children=y;for(const o of Object.keys(f))f[o]!==void 0&&(h[o]=f[o]);const s=R();return h.loc={start:s.start.offset,end:s.end.offset-1},h}if(Vr=g(),Vr!==e&&i===t.length)return Vr;throw Vr!==e&&i<t.length&&N(ae()),Xs(K,a<t.length?t.charAt(a):null,a<t.length?Js(a,a+1):Js(a,a))}const l1=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function o1(t){return l1.includes(t.type)}function Sd(t){return"chain"in t&&t.chain!==null}function u1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function f1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function c1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function lt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=lt(e.expr,r);break}case"return":{e.expr=lt(e.expr,r);break}case"each":{e.items=lt(e.items,r),e.for=lt(e.for,r);break}case"for":{e.from!=null&&(e.from=lt(e.from,r)),e.to!=null&&(e.to=lt(e.to,r)),e.times!=null&&(e.times=lt(e.times,r)),e.for=lt(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=lt(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=lt(e.expr,r),e.dest=lt(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=lt(e.operands[n],r);break}case"not":{e.expr=lt(e.expr,r);break}case"if":{e.cond=lt(e.cond,r),e.then=lt(e.then,r);for(const n of e.elseif)n.cond=lt(n.cond,r),n.then=lt(n.then,r);e.else!=null&&(e.else=lt(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=lt(e.children[n],r);break}case"match":{e.about=lt(e.about,r);for(const n of e.qs)n.q=lt(n.q,r),n.a=lt(n.a,r);e.default!=null&&(e.default=lt(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=lt(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const c=e.tmpl[n];typeof c!="string"&&(e.tmpl[n]=lt(c,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],lt(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=lt(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=lt(e.args[n],r);break}case"indexChain":{e.index=lt(e.index,r);break}case"call":{e.target=lt(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=lt(e.args[n],r);break}case"index":{e.target=lt(e.target,r),e.index=lt(e.index,r);break}case"prop":{e.target=lt(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=lt(e.members[n],r);break}case"or":case"and":{e.left=lt(e.left,r),e.right=lt(e.right,r);break}}if(Sd(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=lt(e.chain[n],r);return e}const Wc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Kc(t){throw new vu(`Reserved word "${t}" cannot be used as variable name.`)}function h1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Wc.includes(t.name)&&Kc(t.name);break}case"meta":{t.name!=null&&Wc.includes(t.name)&&Kc(t.name);break}case"fn":{for(const r of t.args)Wc.includes(r.name)&&Kc(r.name);break}}return t}function p1(t){for(const r of t)lt(r,h1);return t}function Kv(t){return{type:"simple",name:t}}function v1(t,r){return{type:"generic",name:t,inners:r}}function g1(t,r){return{type:"fn",args:t,result:r}}function qf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=qf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>qf(n)).join(", "),e=qf(t.result);return`@(${r}) { ${e} }`}}}function Uu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Kv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Uu(t.inner):r=Kv("any"),v1(t.name,[r])}}throw new vu(`Unknown type: '${qf(t)}'`)}else{const r=t.args.map(e=>Uu(e));return g1(r,Uu(t.result))}}function d1(t){switch(t.type){case"def":{t.varType!=null&&Uu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Uu(r.argType);t.retType!=null&&Uu(t.retType);break}}return t}function y1(t){for(const r of t)lt(r,d1);return t}function zf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=zf(n.expr.children)),r.push(n);else{if(e.length>0)throw new vu("invalid attribute.");switch(n.type){case"fn":{n.children=zf(n.children);break}case"block":{n.statements=zf(n.statements);break}}r.push(n)}if(e.length>0)throw new vu("invalid attribute.");return r}function w1(t){if(o1(t)&&Sd(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const c of r)switch(c.type){case"callChain":{n=u1(n,c.args,c.loc);break}case"indexChain":{n=f1(n,c.index,c.loc);break}case"propChain":{n=c1(n,c.name,c.loc);break}}return n}return t}function m1(t){for(let r=0;r<t.length;r++)t[r]=lt(t[r],w1);return t}function Vf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Fd(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Vf(t,r,e);{const{left:n,right:c,info:g}=t;return Vf(n,Fd(c,r,e),g)}}function Qo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Qo(t.left),Qo(t.right)]}}const x1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Qo(t.left),right:Qo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Qo(t.left),right:Qo(t.right)}),priority:3}};function $1(t){const r=t.operators.map(n=>{const c=x1[n];if(c==null)throw new vu(`No such operator: ${n}.`);return c});let e=Vf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Fd(e,t.operands[2+n],r[1+n]);return Qo(e)}function b1(t){for(let r=0;r<t.length;r++)t[r]=lt(t[r],e=>e.type==="infix"?$1(e):e);return t}var ei;let A1=(ei=class{constructor(){be(this,"plugins");this.plugins={validate:[p1,y1],transform:[zf,m1,b1]}}static parse(r){return ei.instance==null&&(ei.instance=new ei),ei.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Wv(r,{startRule:"Preprocess"});e=Wv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new vu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new vu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}},be(ei,"instance"),ei);const Jv="0.15.0",_1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`},C1=t=>(vf("data-v-ef2e895c"),t=t(),gf(),t),k1={id:"root"},P1={id:"grid1"},E1={class:"type"},M1={id:"grid2"},S1=C1(()=>Mt("header",null,null,-1)),F1=si({__name:"index",setup(t){const r=wr(window.localStorage.getItem(Jv)??'<: "Hello, AiScript!"'),e=wr(null),n=wr([]),c=wr(null);ri(r,()=>{window.localStorage.setItem(Jv,r.value);try{e.value=A1.parse(r.value),c.value=null}catch(x){const m=x;c.value=m.message,console.error("info"in m?m.info:m);return}},{immediate:!0});let g=null;const $=async()=>{n.value=[],g==null||g.abort(),g=new Fs({},{in:x=>new Promise(m=>{const A=window.prompt(x);m(A??"")}),out:x=>{n.value.push({id:Math.random(),type:x.type,text:Mh(x,!0),print:!0})},log:(x,m)=>{switch(x){case"end":n.value.push({id:Math.random(),text:Mh(m.val,!0),print:!1});break}}});try{await g.exec(e.value)}catch(x){console.error(x),window.alert("{e}")}};return(x,m)=>(wt(),Ut("div",k1,[Mt("div",P1,[nt(yf,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=A=>r.value=A),samples:Mi(_1),parseError:c.value,onRun:$},null,8,["modelValue","samples","parseError"]),nt(Fr,{id:"logs"},{header:ot(()=>[It("Output")]),default:ot(()=>[(wt(!0),Ut(Ir,null,fu(n.value,A=>(wt(),Ut("div",{class:Tr(["log",[{print:A.print},A.type]]),key:A.id},[Mt("span",E1,Dr(A.type),1),It(" "+Dr(A.text),1)],2))),128))]),_:1})]),Mt("div",M1,[nt(Fr,{id:"ast"},{header:ot(()=>[It("AST")]),default:ot(()=>[Mt("pre",null,Dr(JSON.stringify(e.value,null,"	")),1)]),_:1}),nt(Fr,{id:"bin"},{header:ot(()=>[It("Bytecode")]),default:ot(()=>[S1]),_:1}),nt(Fr,{id:"debugger"},{header:ot(()=>[It("Debugger")]),_:1})])]))}});const O1=ai(F1,[["__scopeId","data-v-ef2e895c"]]);class _c extends Error{constructor(e,n){super(e);be(this,"info");this.info=n,Error.captureStackTrace&&Error.captureStackTrace(this,_c)}}class gu extends _c{constructor(r,e){super(r,e)}}class lr extends _c{constructor(r,e){super(r,e)}}class N1 extends lr{constructor(r,e){super(r,e)}}var Au=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};class Gn{constructor(r=[],e,n){be(this,"parent");be(this,"layerdStates");be(this,"name");be(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=n||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const n=[r,...this.layerdStates];return new Gn(n,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const n=e.get(r);return this.log("read",{var:r,val:n}),n}throw new lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,n)=>[...e,...n],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const n=this.layerdStates[0];if(n.has(r))throw new lr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});n.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let n=1;for(const c of this.layerdStates){if(c.has(r)){c.set(r,e),this.log("assign",{var:r,val:e}),n===this.layerdStates.length&&this.onUpdated(r,e);return}n++}throw new lr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}Au([pt],Gn.prototype,"log",null);Au([pt],Gn.prototype,"onUpdated",null);Au([pt],Gn.prototype,"createChildScope",null);Au([pt],Gn.prototype,"get",null);Au([pt],Gn.prototype,"getAll",null);Au([pt],Gn.prototype,"add",null);Au([pt],Gn.prototype,"assign",null);let Sf;const I1=new Uint8Array(16);function T1(){if(!Sf&&(Sf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Sf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Sf(I1)}const Yr=[];for(let t=0;t<256;++t)Yr.push((t+256).toString(16).slice(1));function j1(t,r=0){return(Yr[t[r+0]]+Yr[t[r+1]]+Yr[t[r+2]]+Yr[t[r+3]]+"-"+Yr[t[r+4]]+Yr[t[r+5]]+"-"+Yr[t[r+6]]+Yr[t[r+7]]+"-"+Yr[t[r+8]]+Yr[t[r+9]]+"-"+Yr[t[r+10]]+Yr[t[r+11]]+Yr[t[r+12]]+Yr[t[r+13]]+Yr[t[r+14]]+Yr[t[r+15]]).toLowerCase()}const R1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xv={randomUUID:R1};function D1(t,r,e){if(Xv.randomUUID&&!r&&!t)return Xv.randomUUID();t=t||{};const n=t.random||(t.rng||T1)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){e=e||0;for(let c=0;c<16;++c)r[e+c]=n[c];return r}return j1(n)}const Vt={type:"null"},yn={type:"bool",value:!0},sn={type:"bool",value:!1},Je=t=>({type:"num",value:t}),ar=t=>({type:"str",value:t}),qu=t=>({type:"bool",value:t}),Np=t=>({type:"obj",value:t}),ls=t=>({type:"arr",value:t}),L1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),Ee=t=>({type:"fn",native:t}),B1=t=>({type:"return",value:t}),H1=()=>({type:"break",value:null}),U1=()=>({type:"continue",value:null}),q1=t=>t.type==="return"?t.value:t;function un(t){if(t==null)throw new lr("Expect anything, but got nothing.")}function Cs(t){if(t==null)throw new lr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new lr(`Expect boolean, but got ${t.type}.`)}function Ai(t){if(t==null)throw new lr("Expect function, but got nothing.");if(t.type!=="fn")throw new lr(`Expect function, but got ${t.type}.`)}function qr(t){if(t==null)throw new lr("Expect string, but got nothing.");if(t.type!=="str")throw new lr(`Expect string, but got ${t.type}.`)}function Ve(t){if(t==null)throw new lr("Expect number, but got nothing.");if(t.type!=="num")throw new lr(`Expect number, but got ${t.type}.`)}function gi(t){if(t==null)throw new lr("Expect object, but got nothing.");if(t.type!=="obj")throw new lr(`Expect object, but got ${t.type}.`)}function lf(t){if(t==null)throw new lr("Expect array, but got nothing.");if(t.type!=="arr")throw new lr(`Expect array, but got ${t.type}.`)}function z1(t){return t.type==="str"}function V1(t){return t.type==="num"}function W1(t){return t.type==="obj"}function K1(t){return t.type==="arr"}function Oh(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Nh(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(n=>Nh(n,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ih(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ih(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,n]of t.value.entries())r[e]=Ih(n);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Th(t){if(t===null)return Vt;if(typeof t=="boolean")return qu(t);if(typeof t=="string")return ar(t);if(typeof t=="number")return Je(t);if(Array.isArray(t))return ls(t.map(r=>Th(r)));if(typeof t=="object"){const r=new Map;for(const[e,n]of Object.entries(t))r.set(e,Th(n));return Np(r)}return Vt}const J1={help:ar("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":ar("0.14.1"),"Core:ai":ar("kawaii"),"Core:not":Ee(([t])=>(Cs(t),t.value?sn:yn)),"Core:eq":Ee(([t,r])=>(un(t),un(r),Oh(t,r)?yn:sn)),"Core:neq":Ee(([t,r])=>(un(t),un(r),Oh(t,r)?sn:yn)),"Core:and":Ee(([t,r])=>(Cs(t),t.value?(Cs(r),r.value?yn:sn):sn)),"Core:or":Ee(([t,r])=>(Cs(t),t.value?yn:(Cs(r),r.value?yn:sn))),"Core:add":Ee(([t,r])=>(Ve(t),Ve(r),Je(t.value+r.value))),"Core:sub":Ee(([t,r])=>(Ve(t),Ve(r),Je(t.value-r.value))),"Core:mul":Ee(([t,r])=>(Ve(t),Ve(r),Je(t.value*r.value))),"Core:pow":Ee(([t,r])=>{Ve(t),Ve(r);const e=t.value**r.value;if(isNaN(e))throw new lr("Invalid operation.");return Je(e)}),"Core:div":Ee(([t,r])=>{Ve(t),Ve(r);const e=t.value/r.value;if(isNaN(e))throw new lr("Invalid operation.");return Je(e)}),"Core:mod":Ee(([t,r])=>(Ve(t),Ve(r),Je(t.value%r.value))),"Core:gt":Ee(([t,r])=>(Ve(t),Ve(r),t.value>r.value?yn:sn)),"Core:lt":Ee(([t,r])=>(Ve(t),Ve(r),t.value<r.value?yn:sn)),"Core:gteq":Ee(([t,r])=>(Ve(t),Ve(r),t.value>=r.value?yn:sn)),"Core:lteq":Ee(([t,r])=>(Ve(t),Ve(r),t.value<=r.value?yn:sn)),"Core:type":Ee(([t])=>(un(t),ar(t.type))),"Core:to_str":Ee(([t])=>(un(t),t.type==="str"?t:t.type==="num"?ar(t.value.toString()):ar("?"))),"Core:range":Ee(([t,r])=>(Ve(t),Ve(r),t.value<r.value?ls(Array.from({length:r.value-t.value+1},(e,n)=>Je(n+t.value))):t.value>r.value?ls(Array.from({length:t.value-r.value+1},(e,n)=>Je(t.value-n))):ls([t]))),"Util:uuid":Ee(()=>ar(D1())),"Json:stringify":Ee(([t])=>(un(t),ar(JSON.stringify(Ih(t))))),"Json:parse":Ee(([t])=>(qr(t),Th(JSON.parse(t.value)))),"Json:parsable":Ee(([t])=>{qr(t);try{JSON.parse(t.value)}catch{return qu(!1)}return qu(!0)}),"Date:now":Ee(()=>Je(Date.now())),"Date:year":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":Ee(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":Ee(([t])=>(qr(t),Je(new Date(t.value).getTime()))),"Math:Infinity":Je(1/0),"Math:PI":Je(Math.PI),"Math:sin":Ee(([t])=>(Ve(t),Je(Math.sin(t.value)))),"Math:cos":Ee(([t])=>(Ve(t),Je(Math.cos(t.value)))),"Math:abs":Ee(([t])=>(Ve(t),Je(Math.abs(t.value)))),"Math:sqrt":Ee(([t])=>{Ve(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new lr("Invalid operation.");return Je(r)}),"Math:round":Ee(([t])=>(Ve(t),Je(Math.round(t.value)))),"Math:ceil":Ee(([t])=>(Ve(t),Je(Math.ceil(t.value)))),"Math:floor":Ee(([t])=>(Ve(t),Je(Math.floor(t.value)))),"Math:min":Ee(([t,r])=>(Ve(t),Ve(r),Je(Math.min(t.value,r.value)))),"Math:max":Ee(([t,r])=>(Ve(t),Ve(r),Je(Math.max(t.value,r.value)))),"Math:rnd":Ee(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Je(Math.random())),"Math:gen_rng":Ee(([t])=>{if(un(t),t.type!=="num"&&t.type!=="str")return Vt;const r=kp(t.value.toString());return Ee(([e,n])=>e&&e.type==="num"&&n&&n.type==="num"?Je(Math.floor(r()*(Math.floor(n.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Je(r()))}),"Num:to_hex":Ee(([t])=>(Ve(t),ar(t.value.toString(16)))),"Num:from_hex":Ee(([t])=>(qr(t),Je(parseInt(t.value,16)))),"Str:lf":ar(`
`),"Str:lt":Ee(([t,r])=>(qr(t),qr(r),t.value<r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Str:gt":Ee(([t,r])=>(qr(t),qr(r),t.value>r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Obj:keys":Ee(([t])=>(gi(t),ls(Array.from(t.value.keys()).map(r=>ar(r))))),"Obj:vals":Ee(([t])=>(gi(t),ls(Array.from(t.value.values())))),"Obj:kvs":Ee(([t])=>(gi(t),ls(Array.from(t.value.entries()).map(([r,e])=>ls([ar(r),e]))))),"Obj:get":Ee(([t,r])=>(gi(t),qr(r),t.value.get(r.value)??Vt)),"Obj:set":Ee(([t,r,e])=>(gi(t),qr(r),un(e),t.value.set(r.value,e),Vt)),"Obj:has":Ee(([t,r])=>(gi(t),qr(r),qu(t.value.has(r.value)))),"Obj:copy":Ee(([t])=>(gi(t),Np(new Map(t.value)))),"Async:interval":Ee(async([t,r,e],n)=>{Ve(t),Ai(r),e&&(Cs(e),e.value&&n.call(r,[]));const c=setInterval(()=>{n.call(r,[])},t.value),g=()=>{clearInterval(c)};return n.registerAbortHandler(g),Ee(([],$)=>{clearInterval(c),$.unregisterAbortHandler(g)})}),"Async:timeout":Ee(async([t,r],e)=>{Ve(t),Ai(r);const n=setTimeout(()=>{e.call(r,[])},t.value),c=()=>{clearTimeout(n)};return e.registerAbortHandler(c),Ee(([],g)=>{clearTimeout(n),g.unregisterAbortHandler(c)})})},Eu={num:{to_str:t=>Ee(async(r,e)=>ar(t.value.toString()))},str:{to_num:t=>Ee(async(r,e)=>{const n=parseInt(t.value,10);return isNaN(n)?Vt:Je(n)}),len:t=>Je(Mp(t.value)),replace:t=>Ee(async([r,e],n)=>(qr(r),qr(e),ar(t.value.split(r.value).join(e.value)))),index_of:t=>Ee(async([r],e)=>(qr(r),Je(Fp(t.value,r.value)))),incl:t=>Ee(async([r],e)=>(qr(r),t.value.includes(r.value)?yn:sn)),trim:t=>Ee(async(r,e)=>ar(t.value.trim())),upper:t=>Ee(async(r,e)=>ar(t.value.toUpperCase())),lower:t=>Ee(async(r,e)=>ar(t.value.toLowerCase())),split:t=>Ee(async([r],e)=>(r&&qr(r),ls(r?t.value.split(r?r.value:"").map(n=>ar(n)):Xu(t.value).map(n=>ar(n))))),slice:t=>Ee(async([r,e],n)=>(Ve(r),Ve(e),ar(Sp(t.value,r.value,e.value)))),pick:t=>Ee(async([r],e)=>{Ve(r);const c=Xu(t.value)[r.value];return c?ar(c):Vt})},arr:{len:t=>Je(t.value.length),push:t=>Ee(async([r],e)=>(un(r),t.value.push(r),t)),unshift:t=>Ee(async([r],e)=>(un(r),t.value.unshift(r),t)),pop:t=>Ee(async(r,e)=>t.value.pop()??Vt),shift:t=>Ee(async(r,e)=>t.value.shift()??Vt),concat:t=>Ee(async([r],e)=>(lf(r),ls(t.value.concat(r.value)))),slice:t=>Ee(async([r,e],n)=>(Ve(r),Ve(e),ls(t.value.slice(r.value,e.value)))),join:t=>Ee(async([r],e)=>(r&&qr(r),ar(t.value.map(n=>n.type==="str"?n.value:"").join(r?r.value:"")))),map:t=>Ee(async([r],e)=>{Ai(r);const n=t.value.map(async(c,g)=>await e.call(r,[c,Je(g)]));return ls(await Promise.all(n))}),filter:t=>Ee(async([r],e)=>{Ai(r);const n=[];for(let c=0;c<t.value.length;c++){const g=t.value[c],$=await e.call(r,[g,Je(c)]);Cs($),$.value&&n.push(g)}return ls(n)}),reduce:t=>Ee(async([r,e],n)=>{Ai(r);const c=e!=null;let g=c?e:t.value[0];for(let $=c?0:1;$<t.value.length;$++){const x=t.value[$];g=await n.call(r,[g,x,Je($)])}return g}),find:t=>Ee(async([r],e)=>{Ai(r);for(let n=0;n<t.value.length;n++){const c=t.value[n],g=await e.call(r,[c,Je(n)]);if(Cs(g),g.value)return c}return Vt}),incl:t=>Ee(async([r],e)=>(un(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?sn:(c=>c.value.map(g=>g.type==="str"||g.type==="num"||g.type==="bool"?g.value:g.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?yn:sn)),reverse:t=>Ee(async(r,e)=>(t.value.reverse(),Vt)),copy:t=>Ee(async(r,e)=>ls([...t.value])),sort:t=>Ee(async([r],e)=>{const n=async(g,$)=>{if(g.length<=1)return g;const x=Math.floor(g.length/2),m=await n(g.slice(0,x),$),A=await n(g.slice(x),$);return c(m,A,$)},c=async(g,$,x)=>{const m=[];let A=0,C=0;for(;A<g.length&&C<$.length;){const P=g[A],S=$[C],I=await e.call(x,[P,S]);Ve(I),I.value<0?(m.push(g[A]),A++):(m.push($[C]),C++)}return m.concat(g.slice(A)).concat($.slice(C))};return Ai(r),lf(t),t.value=await n(t.value,r),t})}};var cn=globalThis&&globalThis.__decorate||function(t,r,e,n){var c=arguments.length,g=c<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(t,r,e,n);else for(var x=t.length-1;x>=0;x--)($=t[x])&&(g=(c<3?$(g):c>3?$(r,e,g):$(r,e))||g);return c>3&&g&&Object.defineProperty(r,e,g),g};const Od=300,X1=Od-1;class Os{constructor(r,e){be(this,"vars");be(this,"opts");be(this,"stepCount",0);be(this,"stop",!1);be(this,"scope");be(this,"abortHandlers",[]);this.opts=e??{};const n={print:Ee(([c])=>{un(c),this.opts.out&&this.opts.out(c)}),readline:Ee(async c=>{const g=c[0];if(qr(g),this.opts.in==null)return Vt;const $=await this.opts.in(g.value);return ar($)})};this.vars={...r,...J1,...n},this.scope=new Gn([new Map(Object.entries(this.vars))]),this.scope.opts.log=(c,g)=>{switch(c){case"add":this.log("var:add",g);break;case"read":this.log("var:read",g);break;case"write":this.log("var:write",g);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(c){switch(c.type){case"arr":return c.value.map(g=>e(g));case"bool":return c.value;case"null":return null;case"num":return c.value;case"obj":{const g={};for(const[$,x]of c.value.entries())g[$]=e(x);return g}case"str":return c.value;default:return}}const n=new Map;for(const c of r)switch(c.type){case"meta":{n.set(c.name,e(c.value));break}}return n}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const n of r.members)switch(n.type){case"def":{const c=await this._eval(n.expr,e);e.add(n.name,c),this.scope.add(r.name+":"+n.name,c);break}case"ns":break;default:throw new Error("invalid ns member type: "+n.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Vt;{const n=new Map;for(let g=0;g<(r.args??[]).length;g++)n.set(r.args[g],e[g]);const c=r.scope.createChildScope(n);return q1(await this._run(r.statements,c))}}async _eval(r,e){if(this.stop)return Vt;if(this.stepCount%Od===X1&&await new Promise(n=>setTimeout(n,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new lr("max step exceeded");switch(r.type){case"call":{const n=await this._eval(r.target,e);Ai(n);const c=await Promise.all(r.args.map(g=>this._eval(g,e)));return this._fn(n,c)}case"if":{const n=await this._eval(r.cond,e);if(Cs(n),n.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const c of r.elseif){const g=await this._eval(c.cond,e);if(Cs(g),g.value)return this._eval(c.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Vt}case"match":{const n=await this._eval(r.about,e);for(const c of r.qs){const g=await this._eval(c.q,e);if(Oh(n,g))return await this._eval(c.a,e)}return r.default?await this._eval(r.default,e):Vt}case"loop":{for(;;){const n=await this._run(r.statements,e.createChildScope());if(n.type==="break")break;if(n.type==="return")return n}return Vt}case"for":{if(r.times){const n=await this._eval(r.times,e);Ve(n);for(let c=0;c<n.value;c++){const g=await this._eval(r.for,e);if(g.type==="break")break;if(g.type==="return")return g}}else{const n=await this._eval(r.from,e),c=await this._eval(r.to,e);Ve(n),Ve(c);for(let g=n.value;g<n.value+c.value;g++){const $=await this._eval(r.for,e.createChildScope(new Map([[r.var,Je(g)]])));if($.type==="break")break;if($.type==="return")return $}}return Vt}case"each":{const n=await this._eval(r.items,e);lf(n);for(const c of n.value){const g=await this._eval(r.for,e.createChildScope(new Map([[r.var,c]])));if(g.type==="break")break;if(g.type==="return")return g}return Vt}case"def":{const n=await this._eval(r.expr,e);if(r.attr.length>0){const c=[];for(const g of r.attr)c.push({name:g.name,value:await this._eval(g.value,e)});n.attr=c}return e.add(r.name,n),Vt}case"identifier":return e.get(r.name);case"assign":{const n=await this._eval(r.expr,e);return await this.assign(e,r.dest,n),Vt}case"addAssign":{const n=await this._eval(r.dest,e);Ve(n);const c=await this._eval(r.expr,e);return Ve(c),await this.assign(e,r.dest,Je(n.value+c.value)),Vt}case"subAssign":{const n=await this._eval(r.dest,e);Ve(n);const c=await this._eval(r.expr,e);return Ve(c),await this.assign(e,r.dest,Je(n.value-c.value)),Vt}case"null":return Vt;case"bool":return qu(r.value);case"num":return Je(r.value);case"str":return ar(r.value);case"arr":return ls(await Promise.all(r.value.map(async n=>await this._eval(n,e))));case"obj":{const n=new Map;for(const c of r.value.keys())n.set(c,await this._eval(r.value.get(c),e));return Np(n)}case"prop":{const n=await this._eval(r.target,e);if(W1(n))return n.value.has(r.name)?n.value.get(r.name):Vt;if(V1(n)){if(Object.hasOwn(Eu.num,r.name))return Eu.num[r.name](n);throw new lr(`No such prop (${r.name}) in ${n.type}.`)}else if(z1(n)){if(Object.hasOwn(Eu.str,r.name))return Eu.str[r.name](n);throw new lr(`No such prop (${r.name}) in ${n.type}.`)}else if(K1(n)){if(Object.hasOwn(Eu.arr,r.name))return Eu.arr[r.name](n);throw new lr(`No such prop (${r.name}) in ${n.type}.`)}else throw new lr(`Cannot read prop (${r.name}) of ${n.type}.`)}case"index":{const n=await this._eval(r.target,e);lf(n);const c=await this._eval(r.index,e);Ve(c);const g=n.value[c.value];if(g===void 0)throw new N1(`Index out of range. index: ${c.value} max: ${n.value.length-1}`);return g}case"not":{const n=await this._eval(r.expr,e);return Cs(n),qu(!n.value)}case"fn":return L1(r.args.map(n=>n.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let n="";for(const c of r.tmpl)if(typeof c=="string")n+=c;else{const g=await this._eval(c,e);let $="";g.type==="str"?$=g.value:g.type==="num"&&($=g.value.toString()),n+=$}return ar(n)}case"return":{const n=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:n}),B1(n)}case"break":return this.log("block:break",{scope:e.name}),H1();case"continue":return this.log("block:continue",{scope:e.name}),U1();case"ns":return Vt;case"meta":return Vt;case"and":{const n=await this._eval(r.left,e);if(Cs(n),n.value){const c=await this._eval(r.right,e);return Cs(c),c}else return n}case"or":{const n=await this._eval(r.left,e);if(Cs(n),n.value)return n;{const c=await this._eval(r.right,e);return Cs(c),c}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let n=Vt;for(let c=0;c<r.length;c++){const g=r[c];if(n=await this._eval(g,e),n.type==="return")return this.log("block:return",{scope:e.name,val:n.value}),n;if(n.type==="break")return this.log("block:break",{scope:e.name}),n;if(n.type==="continue")return this.log("block:continue",{scope:e.name}),n}return this.log("block:leave",{scope:e.name,val:n}),n}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,n){if(e.type==="identifier")r.assign(e.name,n);else if(e.type==="index"){const c=await this._eval(e.target,r);lf(c);const g=await this._eval(e.index,r);Ve(g),c.value[g.value]=n}else if(e.type==="prop"){const c=await this._eval(e.target,r);gi(c),c.value.set(e.name,n)}else throw new lr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}cn([pt],Os.prototype,"exec",null);cn([pt],Os.prototype,"execFn",null);cn([pt],Os.prototype,"log",null);cn([pt],Os.prototype,"collectNs",null);cn([pt],Os.prototype,"collectNsMember",null);cn([pt],Os.prototype,"_fn",null);cn([pt],Os.prototype,"_eval",null);cn([pt],Os.prototype,"_run",null);cn([pt],Os.prototype,"registerAbortHandler",null);cn([pt],Os.prototype,"unregisterAbortHandler",null);cn([pt],Os.prototype,"abort",null);cn([pt],Os.prototype,"assign",null);cn([pt],Os,"collectMetadata",null);function G1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function ou(t,r,e,n){var c=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(c,ou.prototype),c.expected=r,c.found=e,c.location=n,c.name="SyntaxError",c}G1(ou,Error);function Jc(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}ou.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,n;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){e=t[n].text.split(/\r\n|\n|\r/g);break}var c=this.location.start,g=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(c):c,$=this.location.source+":"+g.line+":"+g.column;if(e){var x=this.location.end,m=Jc("",g.line.toString().length," "),A=e[c.line-1],C=c.line===x.line?x.column:A.length+1,P=C-c.column||1;r+=`
 --> `+$+`
`+m+` |
`+g.line+" | "+A+`
`+m+" | "+Jc("",c.column-1," ")+Jc("",P,"^")}else r+=`
 at `+$}return r};ou.buildMessage=function(t,r){var e={literal:function(A){return'"'+c(A.text)+'"'},class:function(A){var C=A.parts.map(function(P){return Array.isArray(P)?g(P[0])+"-"+g(P[1]):g(P)});return"["+(A.inverted?"^":"")+C.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(A){return A.description}};function n(A){return A.charCodeAt(0).toString(16).toUpperCase()}function c(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function g(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(C){return"\\x0"+n(C)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(C){return"\\x"+n(C)})}function $(A){return e[A.type](A)}function x(A){var C=A.map($),P,S;if(C.sort(),C.length>0){for(P=1,S=1;P<C.length;P++)C[P-1]!==C[P]&&(C[S]=C[P],S++);C.length=S}switch(C.length){case 1:return C[0];case 2:return C[0]+" or "+C[1];default:return C.slice(0,-1).join(", ")+", or "+C[C.length-1]}}function m(A){return A?'"'+c(A)+'"':"end of input"}return"Expected "+x(t)+" but "+m(r)+" found."};function Gv(t,r){r=r!==void 0?r:{};var e={},n=r.grammarSource,c={Preprocess:O,Main:Sa},g=O,$="//",x="/*",m="*/",A="(",C=")",P="::",S="{",I="}",G="###",ee="let",re=":",ge="=",q="var",U="<:",L="#[",H="]",W="each",V=",",J="for",Y="return",ue="loop",de="break",le="continue",Ie="+=",ze="-=",mt="\\",Ke="||",ft="&&",je="==",ut="!=",jt="<=",Rt=">=",Ye="<",Br=">",Wt="+",Ar="-",Ft="*",br="^",Hr="/",Or="%",Rr="!",Dt="[",z=".",Z="if",se="elif",ve="else",ye="match",oe="=>",Ne="eval",me="`",$e='"',he="'",Le='\\"',Re="\\'",He="true",We="false",Ze="null",at=";",it="@",bt="@(",Kt=`\r
`,Ct=/^[A-Z0-9_:]/i,sr=/^[^`{]/,Ns=/^[{}`]/,rs=/^[+\-]/,Lt=/^[1-9]/,vt=/^[0-9]/,qt=/^[A-Z_]/i,Zn=/^[A-Z0-9_]/i,Qn=/^[\r\n]/,Ii=/^[ \t\r\n]/,Ti=/^[ \t]/,or=wo(),ur=te("//",!1),ji=te("/*",!1),xn=te("*/",!1),_r=te("(",!1),Ot=te(")",!1),Cr=te("::",!1),fr=te("{",!1),tt=te("}",!1),Jt=te("###",!1),zr=te("let",!1),xt=te(":",!1),$t=te("=",!1),ps=te("var",!1),Ri=te("<:",!1),Di=te("#[",!1),Is=te("]",!1),vs=te("each",!1),At=te(",",!1),gt=te("for",!1),Ts=te("return",!1),gr=Xt([["A","Z"],["0","9"],"_",":"],!1,!0),dr=te("loop",!1),Li=te("break",!1),Bi=te("continue",!1),Hi=te("+=",!1),Ui=te("-=",!1),Yn=te("\\",!1),ea=te("||",!1),qi=te("&&",!1),zi=te("==",!1),Vi=te("!=",!1),Wi=te("<=",!1),Ki=te(">=",!1),ta=te("<",!1),$n=te(">",!1),ra=te("+",!1),Ji=te("-",!1),sa=te("*",!1),na=te("^",!1),Xi=te("/",!1),Gi=te("%",!1),Zi=te("!",!1),bn=te("[",!1),gs=te(".",!1),An=te("if",!1),Qi=te("elif",!1),Yi=te("else",!1),el=te("match",!1),js=te("=>",!1),Rs=te("eval",!1),Ds=te("`",!1),tl=Xt(["`","{"],!0,!1),Ls=Xt(["{","}","`"],!1,!1),Bs=te('"',!1),Hs=te("'",!1),Us=te('\\"',!1),qs=te("\\'",!1),zs=Xt(["+","-"],!1,!1),aa=Xt([["1","9"]],!1,!1),Nt=Xt([["0","9"]],!1,!1),ia=te("true",!1),cr=te("false",!1),rl=te("null",!1),Vs=te(";",!1),sl=te("@",!1),ds=te("@(",!1),nl=Xt([["A","Z"],"_"],!1,!0),_n=Xt([["A","Z"],["0","9"],"_"],!1,!0),al=te(`\r
`,!1),la=Xt(["\r",`
`],!1,!1),il=Xt([" ","	","\r",`
`],!1,!1),ll=Xt([" ","	"],!1,!1),ol=function(l){return l.join("")},ul=function(){return k()},fl=function(){return k()},cl=function(){return""},hl=function(){return""},pl=function(l){return l??[]},oa=function(l,f){return f},vl=function(l,f){return[l,...f]},Cn=function(l,f){return f},gl=function(l,f){return[l,...f]},kn=function(l,f){return f},dl=function(l,f){return[l,...f]},ua=function(l){return l},yl=function(l,f){return ie("ns",{name:l,members:f})},wl=function(l,f){return ie("meta",{name:l,value:f})},ml=function(l){return ie("meta",{name:null,value:l})},xl=function(l,f,y){return ie("def",{name:l,varType:f,expr:y,mut:!1,attr:[]})},$l=function(l,f,y){return ie("def",{name:l,varType:f,expr:y,mut:!0,attr:[]})},bl=function(l){return ie("identifier",{name:"print",chain:[ie("callChain",{args:[l]})]})},Al=function(l,f){return ie("attr",{name:l,value:f??ie("bool",{value:!0})})},_l=function(l,f,y){return ie("each",{var:l,items:f,for:y})},Cl=function(l,f,y){return ie("each",{var:l,items:f,for:y})},kl=function(l,f){return f},Pl=function(l,f,y,h){return ie("for",{var:l,from:f??ie("num",{value:0}),to:y,for:h})},El=function(l,f){return f},Ml=function(l,f,y,h){return ie("for",{var:l,from:f??ie("num",{value:0}),to:y,for:h})},Sl=function(l,f){return ie("for",{times:l,for:f})},Fl=function(l,f){return ie("for",{times:l,for:f})},Ol=function(l){return ie("return",{expr:l})},Nl=function(l){return ie("loop",{statements:l})},Il=function(){return ie("break",{})},Tl=function(){return ie("continue",{})},jl=function(l,f,y){return f==="+="?ie("addAssign",{dest:l,expr:y}):f==="-="?ie("subAssign",{dest:l,expr:y}):ie("assign",{dest:l,expr:y})},fa=function(l,f,y){return{op:f,term:y}},Rl=function(l,f){return ie("infix",{operands:[l,...f.map(y=>y.term)],operators:f.map(y=>y.op)})},ca=function(){return k()},Dl=function(l){return ie("not",{expr:l})},Ll=function(l,f){return{...l,chain:f}},Bl=function(l){return ie("callChain",{args:l??[]})},ha=function(l,f){return f},Hl=function(l,f){return[l,...f]},pa=function(l){return ie("indexChain",{index:l})},Ul=function(l){return ie("propChain",{name:l})},ql=function(l,f,y,h){return ie("if",{cond:l,then:f,elseif:y??[],else:h})},zl=function(l,f){return[l,...f]},Vl=function(l,f){return{cond:l,then:f}},Wl=function(l){return l},va=function(l,f,y){return{q:f,a:y}},Kl=function(l,f,y){return ie("match",{about:l,qs:f??[],default:y})},ga=function(l){return ie("block",{statements:l})},Jl=function(l){return ie("identifier",{name:l})},Xl=function(l){return ie("tmpl",{tmpl:l})},Gl=function(l){return l.join("")},da=function(l){return l},Zl=function(l){return ie("str",{value:l.join("")})},ya=function(l){return l},wa=function(l){return ie("str",{value:l.join("")})},Ql=function(){return'"'},ma=function(){return"'"},Yl=function(){return ie("num",{value:parseFloat(k())})},eo=function(){return ie("num",{value:parseFloat(k())})},to=function(){return ie("num",{value:parseInt(k(),10)})},ro=function(){return ie("num",{value:parseInt(k(),10)})},so=function(){return ie("bool",{value:!0})},no=function(){return ie("bool",{value:!1})},ao=function(){return ie("null",{})},xa=function(l,f){return{k:l,v:f}},io=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ie("obj",{value:f})},$a=function(l){return l},ba=function(l){return ie("arr",{value:l})},lo=function(l,f){return{name:l,argType:f}},Aa=function(l,f){return[l,...f]},oo=function(l,f,y,h,s,o){return(l.length>0||y.length>0)&&Ks("Cannot use spaces before or after the function name."),ie("def",{name:f,expr:ie("fn",{args:h??[],retType:s},o??[]),mut:!1,attr:[]})},uo=function(l,f,y){return ie("fn",{args:l??[],retType:f},y??[])},_a=function(l){return l},fo=function(l){return ie("arr",{value:l})},Ca=function(l,f){return{k:l,v:f}},ka=function(l){const f=new Map;for(const y of l)f.set(y.k,y.v);return ie("obj",{value:f})},co=function(l,f){return ie("fnTypeSource",{args:l??[],result:f})},Pa=function(l,f){return[l,...f]},ho=function(l,f){return ie("namedTypeSource",{name:l,inner:f})},po=function(l){return ie("namedTypeSource",{name:l,inner:null})},vo=function(){return k()},go=function(){return k()},yo=function(l){return ie("block",{statements:l??[]})},i=0,X=0,Ws=[{line:1,column:1}],a=0,K=[],E=0,T={},Vr;if("startRule"in r){if(!(r.startRule in c))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');g=c[r.startRule]}function k(){return t.substring(X,i)}function R(){return Js(X,i)}function Ks(l,f){throw f=f!==void 0?f:Js(X,i),Ea(l,f)}function te(l,f){return{type:"literal",text:l,ignoreCase:f}}function Xt(l,f,y){return{type:"class",parts:l,inverted:f,ignoreCase:y}}function wo(){return{type:"any"}}function ae(){return{type:"end"}}function Bt(l){var f=Ws[l],y;if(f)return f;for(y=l-1;!Ws[y];)y--;for(f=Ws[y],f={line:f.line,column:f.column};y<l;)t.charCodeAt(y)===10?(f.line++,f.column=1):f.column++,y++;return Ws[l]=f,f}function Js(l,f,y){var h=Bt(l),s=Bt(f),o={source:n,start:{offset:l,line:h.line,column:h.column},end:{offset:f,line:s.line,column:s.column}};return y&&n&&typeof n.offset=="function"&&(o.start=n.offset(o.start),o.end=n.offset(o.end)),o}function N(l){i<a||(i>a&&(a=i,K=[]),K.push(l))}function Ea(l,f){return new ou(l,null,null,f)}function Xs(l,f,y){return new ou(ou.buildMessage(l,f),l,f,y)}function O(){var l,f,y,h=i*76+0,s=T[h];if(s)return i=s.nextPos,s.result;for(l=i,f=[],y=Ma();y!==e;)f.push(y),y=Ma();return X=l,f=ol(f),l=f,T[h]={nextPos:i,result:l},l}function Ma(){var l,f,y=i*76+1,h=T[y];return h?(i=h.nextPos,h.result):(l=i,f=Da(),f!==e&&(X=l,f=ul()),l=f,l===e&&(l=i,f=Zs(),f!==e&&(X=l,f=fl()),l=f,l===e&&(l=mo(),l===e&&(t.length>i?(l=t.charAt(i),i++):(l=e,E===0&&N(or))))),T[y]={nextPos:i,result:l},l)}function mo(){var l,f,y,h,s,o,p=i*76+2,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,2)===$?(f=$,i+=2):(f=e,E===0&&N(ur)),f!==e){for(y=[],h=i,s=i,E++,o=Xa(),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,o=Xa(),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);X=l,l=cl()}else i=l,l=e;if(l===e)if(l=i,t.substr(i,2)===x?(f=x,i+=2):(f=e,E===0&&N(ji)),f!==e){for(y=[],h=i,s=i,E++,t.substr(i,2)===m?(o=m,i+=2):(o=e,E===0&&N(xn)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.substr(i,2)===m?(o=m,i+=2):(o=e,E===0&&N(xn)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or)),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);t.substr(i,2)===m?(h=m,i+=2):(h=e,E===0&&N(xn)),h!==e?(X=l,l=hl()):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Sa(){var l,f,y,h,s,o=i*76+3,p=T[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=_();y!==e;)f.push(y),y=_();for(y=Fa(),y===e&&(y=null),h=[],s=_();s!==e;)h.push(s),s=_();return X=l,l=pl(y),T[o]={nextPos:i,result:l},l}function Fa(){var l,f,y,h,s,o,p,u,d=i*76+4,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Pn(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Pn(),u!==e?(X=h,h=oa(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Pn(),u!==e?(X=h,h=oa(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=vl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function xo(){var l,f,y,h,s,o,p,u,d=i*76+5,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=En(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=En(),u!==e?(X=h,h=Cn(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=En(),u!==e?(X=h,h=Cn(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=gl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function ys(){var l,f,y,h,s,o,p,u,d=i*76+6,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=yr(),f!==e){for(y=[],h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=yr(),u!==e?(X=h,h=kn(f,u)):(i=h,h=e)}else i=h,h=e;for(;h!==e;){for(y.push(h),h=i,s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=qe(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=yr(),u!==e?(X=h,h=kn(f,u)):(i=h,h=e)}else i=h,h=e}X=l,l=dl(f,y)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Pn(){var l,f=i*76+7,y=T[f];return y?(i=y.nextPos,y.result):(l=ws(),l===e&&(l=Oa(),l===e&&(l=yr())),T[f]={nextPos:i,result:l},l)}function En(){var l,f=i*76+8,y=T[f];return y?(i=y.nextPos,y.result):(l=kr(),l===e&&(l=Ka(),l===e&&(l=ws())),T[f]={nextPos:i,result:l},l)}function yr(){var l,f=i*76+9,y=T[f];return y?(i=y.nextPos,y.result):(l=kr(),l===e&&(l=Ka(),l===e&&(l=Na(),l===e&&(l=Ao(),l===e&&(l=$o(),l===e&&(l=Ia(),l===e&&(l=bo(),l===e&&(l=_o(),l===e&&(l=Co(),l===e&&(l=ko(),l===e&&(l=Po(),l===e&&(l=De()))))))))))),T[f]={nextPos:i,result:l},l)}function De(){var l,f=i*76+10,y=T[f];return y?(i=y.nextPos,y.result):(l=Eo(),l===e&&(l=Wr()),T[f]={nextPos:i,result:l},l)}function Wr(){var l,f=i*76+11,y=T[f];return y?(i=y.nextPos,y.result):(l=Fo(),l===e&&(l=Ro(),l===e&&(l=Er(),l===e&&(l=Kr()))),T[f]={nextPos:i,result:l},l)}function Kr(){var l,f,y,h,s,o,p=i*76+12,u=T[p];if(u)return i=u.nextPos,u.result;if(l=No(),l===e&&(l=Fn(),l===e&&(l=Da(),l===e&&(l=Zs(),l===e&&(l=Ua(),l===e&&(l=Tn(),l===e&&(l=Va(),l===e&&(l=Wa(),l===e&&(l=jo(),l===e&&(l=Mo(),l===e&&(l=Io(),l===e)))))))))))if(l=i,t.charCodeAt(i)===40?(f=A,i++):(f=e,E===0&&N(_r)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=De(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e?(X=l,l=ua(h)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Te(){var l,f=i*76+13,y=T[f];return y?(i=y.nextPos,y.result):(l=Ua(),l===e&&(l=Zs(),l===e&&(l=Tn(),l===e&&(l=Dn(),l===e&&(l=Ja(),l===e&&(l=Va()))))),T[f]={nextPos:i,result:l},l)}function ws(){var l,f,y,h,s,o,p,u,d,v,b=i*76+14,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===P?(f=P,i+=2):(f=e,E===0&&N(Cr)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(t.charCodeAt(i)===123?(o=S,i++):(o=e,E===0&&N(fr)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(u=xo(),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();t.charCodeAt(i)===125?(v=I,i++):(v=e,E===0&&N(tt)),v!==e?(X=l,l=yl(h,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Oa(){var l,f,y,h,s,o,p=i*76+15,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.substr(i,3)===G?(f=G,i+=3):(f=e,E===0&&N(Jt)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=Ue(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();o=Te(),o!==e?(X=l,l=wl(h,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===G?(f=G,i+=3):(f=e,E===0&&N(Jt)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();h=Te(),h!==e?(X=l,l=ml(h)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function kr(){var l,f,y,h,s,o,p,u,d,v=i*76+16,b=T[v];if(b)return i=b.nextPos,b.result;if(l=i,t.substr(i,3)===ee?(f=ee,i+=3):(f=e,E===0&&N(zr)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===58?(p=re,i++):(p=e,E===0&&N(xt)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=Gt(),d!==e?s=d:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===61?(p=ge,i++):(p=e,E===0&&N($t)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=De(),d!==e?(X=l,l=xl(h,s,d)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===q?(f=q,i+=3):(f=e,E===0&&N(ps)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===58?(p=re,i++):(p=e,E===0&&N(xt)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=Gt(),d!==e?s=d:(i=s,s=e)}else i=s,s=e;for(s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===61?(p=ge,i++):(p=e,E===0&&N($t)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();d=De(),d!==e?(X=l,l=$l(h,s,d)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[v]={nextPos:i,result:l},l}function Na(){var l,f,y,h,s=i*76+17,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,t.substr(i,2)===U?(f=U,i+=2):(f=e,E===0&&N(Ri)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();h=De(),h!==e?(X=l,l=bl(h)):(i=l,l=e)}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function $o(){var l,f,y,h,s,o,p,u=i*76+18,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,t.substr(i,2)===L?(f=L,i+=2):(f=e,E===0&&N(Di)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=Ue(),h!==e){for(s=i,o=[],p=_();p!==e;)o.push(p),p=_();for(p=Te(),p!==e?s=p:(i=s,s=e),s===e&&(s=null),o=[],p=_();p!==e;)o.push(p),p=_();t.charCodeAt(i)===93?(p=H,i++):(p=e,E===0&&N(Is)),p!==e?(X=l,l=Al(h,s)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Ia(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+19,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.substr(i,4)===W?(f=W,i+=4):(f=e,E===0&&N(vs)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,E===0&&N(zr)),s!==e){if(o=[],p=_(),p!==e)for(;p!==e;)o.push(p),p=_();else o=e;if(o!==e)if(p=Ue(),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();for(t.charCodeAt(i)===44?(d=V,i++):(d=e,E===0&&N(At)),d===e&&(d=null),v=[],b=_();b!==e;)v.push(b),b=_();if(b=De(),b!==e)if(t.charCodeAt(i)===41?(w=C,i++):(w=e,E===0&&N(Ot)),w!==e){for(M=[],F=_();F!==e;)M.push(F),F=_();F=Ht(),F!==e?(X=l,l=_l(p,b,F)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,4)===W?(f=W,i+=4):(f=e,E===0&&N(vs)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(t.substr(i,3)===ee?(h=ee,i+=3):(h=e,E===0&&N(zr)),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();if(v=De(),v!==e){if(b=[],w=_(),w!==e)for(;w!==e;)b.push(w),w=_();else b=e;b!==e?(w=Ht(),w!==e?(X=l,l=Cl(o,v,w)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function bo(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B=i*76+20,Q=T[B];if(Q)return i=Q.nextPos,Q.result;if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(t.substr(i,3)===ee?(s=ee,i+=3):(s=e,E===0&&N(zr)),s!==e){if(o=[],p=_(),p!==e)for(;p!==e;)o.push(p),p=_();else o=e;if(o!==e)if(p=Ue(),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();if(d=i,t.charCodeAt(i)===61?(v=ge,i++):(v=e,E===0&&N($t)),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();w=De(),w!==e?(X=d,d=kl(p,w)):(i=d,d=e)}else i=d,d=e;for(d===e&&(d=null),t.charCodeAt(i)===44?(v=V,i++):(v=e,E===0&&N(At)),v===e&&(v=null),b=[],w=_();w!==e;)b.push(w),w=_();if(w=De(),w!==e)if(t.charCodeAt(i)===41?(M=C,i++):(M=e,E===0&&N(Ot)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();D=Ht(),D!==e?(X=l,l=Pl(p,d,w,D)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(t.substr(i,3)===ee?(h=ee,i+=3):(h=e,E===0&&N(zr)),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(u=i,t.charCodeAt(i)===61?(d=ge,i++):(d=e,E===0&&N($t)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();b=De(),b!==e?(X=u,u=El(o,b)):(i=u,u=e)}else i=u,u=e;for(u===e&&(u=null),t.charCodeAt(i)===44?(d=V,i++):(d=e,E===0&&N(At)),d===e&&(d=null),v=[],b=_();b!==e;)v.push(b),b=_();if(b=De(),b!==e){if(w=[],M=_(),M!==e)for(;M!==e;)w.push(M),M=_();else w=e;w!==e?(M=Ht(),M!==e?(X=l,l=Ml(o,u,b,M)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===40?(h=A,i++):(h=e,E===0&&N(_r)),h!==e)if(s=De(),s!==e)if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();u=Ht(),u!==e?(X=l,l=Sl(s,u)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,t.substr(i,3)===J?(f=J,i+=3):(f=e,E===0&&N(gt)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=De(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;s!==e?(o=Ht(),o!==e?(X=l,l=Fl(h,o)):(i=l,l=e)):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e}}return T[B]={nextPos:i,result:l},l}function Ao(){var l,f,y,h,s,o=i*76+21,p=T[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,6)===Y?(f=Y,i+=6):(f=e,E===0&&N(Ts)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();s=De(),s!==e?(X=l,l=Ol(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[o]={nextPos:i,result:l},l}function _o(){var l,f,y,h,s,o,p,u,d=i*76+22,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===ue?(f=ue,i+=4):(f=e,E===0&&N(dr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===123?(h=S,i++):(h=e,E===0&&N(fr)),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();if(o=ys(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();t.charCodeAt(i)===125?(u=I,i++):(u=e,E===0&&N(tt)),u!==e?(X=l,l=Nl(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Co(){var l,f,y,h,s=i*76+23,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===de?(f=de,i+=5):(f=e,E===0&&N(Li)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=Il()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function ko(){var l,f,y,h,s=i*76+24,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,8)===le?(f=le,i+=8):(f=e,E===0&&N(Bi)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=Tl()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Po(){var l,f,y,h,s,o,p=i*76+25,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=De(),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.substr(i,2)===Ie?(h=Ie,i+=2):(h=e,E===0&&N(Hi)),h===e&&(t.substr(i,2)===ze?(h=ze,i+=2):(h=e,E===0&&N(Ui)),h===e&&(t.charCodeAt(i)===61?(h=ge,i++):(h=e,E===0&&N($t)))),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();o=De(),o!==e?(X=l,l=jl(f,h,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Eo(){var l,f,y,h,s,o,p,u,d=i*76+26,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Wr(),f!==e){for(y=[],h=i,s=[],o=Pr();o!==e;)s.push(o),o=Pr();if(o=Ta(),o!==e){for(p=[],u=Pr();u!==e;)p.push(u),u=Pr();u=Wr(),u!==e?(X=h,h=fa(f,o,u)):(i=h,h=e)}else i=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=i,s=[],o=Pr();o!==e;)s.push(o),o=Pr();if(o=Ta(),o!==e){for(p=[],u=Pr();u!==e;)p.push(u),u=Pr();u=Wr(),u!==e?(X=h,h=fa(f,o,u)):(i=h,h=e)}else i=h,h=e}else y=e;y!==e?(X=l,l=Rl(f,y)):(i=l,l=e)}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Pr(){var l,f,y,h=i*76+27,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=mt,i++):(f=e,E===0&&N(Yn)),f!==e?(y=qe(),y!==e?(f=[f,y],l=f):(i=l,l=e)):(i=l,l=e),l===e&&(l=Ae()),T[h]={nextPos:i,result:l},l)}function Ta(){var l,f,y=i*76+28,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Ke?(f=Ke,i+=2):(f=e,E===0&&N(ea)),f===e&&(t.substr(i,2)===ft?(f=ft,i+=2):(f=e,E===0&&N(qi)),f===e&&(t.substr(i,2)===je?(f=je,i+=2):(f=e,E===0&&N(zi)),f===e&&(t.substr(i,2)===ut?(f=ut,i+=2):(f=e,E===0&&N(Vi)),f===e&&(t.substr(i,2)===jt?(f=jt,i+=2):(f=e,E===0&&N(Wi)),f===e&&(t.substr(i,2)===Rt?(f=Rt,i+=2):(f=e,E===0&&N(Ki)),f===e&&(t.charCodeAt(i)===60?(f=Ye,i++):(f=e,E===0&&N(ta)),f===e&&(t.charCodeAt(i)===62?(f=Br,i++):(f=e,E===0&&N($n)),f===e&&(t.charCodeAt(i)===43?(f=Wt,i++):(f=e,E===0&&N(ra)),f===e&&(t.charCodeAt(i)===45?(f=Ar,i++):(f=e,E===0&&N(Ji)),f===e&&(t.charCodeAt(i)===42?(f=Ft,i++):(f=e,E===0&&N(sa)),f===e&&(t.charCodeAt(i)===94?(f=br,i++):(f=e,E===0&&N(na)),f===e&&(t.charCodeAt(i)===47?(f=Hr,i++):(f=e,E===0&&N(Xi)),f===e&&(t.charCodeAt(i)===37?(f=Or,i++):(f=e,E===0&&N(Gi))))))))))))))),f!==e&&(X=l,f=ca()),l=f,T[y]={nextPos:i,result:l},l)}function Mo(){var l,f,y,h=i*76+29,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===33?(f=Rr,i++):(f=e,E===0&&N(Zi)),f!==e?(y=De(),y!==e?(X=l,l=Dl(y)):(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Er(){var l,f,y,h,s=i*76+30,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,f=Kr(),f!==e){if(y=[],h=Mn(),h===e&&(h=ja(),h===e&&(h=Sn())),h!==e)for(;h!==e;)y.push(h),h=Mn(),h===e&&(h=ja(),h===e&&(h=Sn()));else y=e;y!==e?(X=l,l=Ll(f,y)):(i=l,l=e)}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function Mn(){var l,f,y,h,s,o,p=i*76+31,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===40?(f=A,i++):(f=e,E===0&&N(_r)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=So(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e?(X=l,l=Bl(h)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function So(){var l,f,y,h,s,o,p=i*76+32,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=De(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=De(),o!==e?(X=h,h=ha(f,o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=De(),o!==e?(X=h,h=ha(f,o)):(i=h,h=e)):(i=h,h=e);X=l,l=Hl(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function ja(){var l,f,y,h,s,o,p=i*76+33,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=De(),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=pa(h)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Sn(){var l,f,y,h=i*76+34,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===46?(f=z,i++):(f=e,E===0&&N(gs)),f!==e?(y=Ue(),y!==e?(X=l,l=Ul(y)):(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Fo(){var l,f,y,h,s,o,p,u,d,v,b=i*76+35,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===Z?(f=Z,i+=2):(f=e,E===0&&N(An)),f!==e){if(y=[],h=_(),h!==e)for(;h!==e;)y.push(h),h=_();else y=e;if(y!==e)if(h=De(),h!==e){if(s=[],o=_(),o!==e)for(;o!==e;)s.push(o),o=_();else s=e;if(s!==e)if(o=Ht(),o!==e){if(p=i,u=[],d=_(),d!==e)for(;d!==e;)u.push(d),d=_();else u=e;if(u!==e?(d=Ra(),d!==e?p=d:(i=p,p=e)):(i=p,p=e),p===e&&(p=null),u=i,d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;d!==e?(v=Oo(),v!==e?u=v:(i=u,u=e)):(i=u,u=e),u===e&&(u=null),X=l,l=ql(h,o,p,u)}else i=l,l=e;else i=l,l=e}else i=l,l=e;else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Ra(){var l,f,y,h,s,o,p=i*76+36,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Gs(),f!==e){for(y=[],h=i,s=[],o=_();o!==e;)s.push(o),o=_();for(o=Gs(),o!==e?h=o:(i=h,h=e);h!==e;){for(y.push(h),h=i,s=[],o=_();o!==e;)s.push(o),o=_();o=Gs(),o!==e?h=o:(i=h,h=e)}X=l,l=zl(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Gs(){var l,f,y,h,s,o,p,u=i*76+37,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,t.substr(i,4)===se?(f=se,i+=4):(f=e,E===0&&N(Qi)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();if(s=De(),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();p=Ht(),p!==e?(X=l,l=Vl(s,p)):(i=l,l=e)}else i=l,l=e}else i=l,l=e;else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Oo(){var l,f,y,h,s,o=i*76+38,p=T[o];if(p)return i=p.nextPos,p.result;if(l=i,t.substr(i,4)===ve?(f=ve,i+=4):(f=e,E===0&&N(Yi)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();s=Ht(),s!==e?(X=l,l=Wl(s)):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[o]={nextPos:i,result:l},l}function No(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=i*76+39,ne=T[xe];if(ne)return i=ne.nextPos,ne.result;if(l=i,t.substr(i,5)===ye?(f=ye,i+=5):(f=e,E===0&&N(el)),f!==e)if(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();if(s=De(),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();if(t.charCodeAt(i)===123?(p=S,i++):(p=e,E===0&&N(fr)),p!==e){for(u=[],d=_();d!==e;)u.push(d),d=_();if(d=[],v=i,b=De(),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();X=v,v=va(s,b,D)}else i=v,v=e}else i=v,v=e}else i=v,v=e;if(v!==e)for(;v!==e;)if(d.push(v),v=i,b=De(),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();X=v,v=va(s,b,D)}else i=v,v=e}else i=v,v=e}else i=v,v=e;else d=e;if(d!==e){if(v=i,t.charCodeAt(i)===42?(b=Ft,i++):(b=e,E===0&&N(sa)),b!==e){for(w=[],M=_();M!==e;)w.push(M),M=_();if(t.substr(i,2)===oe?(M=oe,i+=2):(M=e,E===0&&N(js)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();if(D=Ht(),D!==e){for(B=[],Q=_();Q!==e;)B.push(Q),Q=_();v=D}else i=v,v=e}else i=v,v=e}else i=v,v=e;for(v===e&&(v=null),b=[],w=_();w!==e;)b.push(w),w=_();t.charCodeAt(i)===125?(w=I,i++):(w=e,E===0&&N(tt)),w!==e?(X=l,l=Kl(s,d,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;else i=l,l=e;return T[xe]={nextPos:i,result:l},l}function Fn(){var l,f,y,h,s,o,p,u,d=i*76+40,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,t.substr(i,4)===Ne?(f=Ne,i+=4):(f=e,E===0&&N(Rs)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(t.charCodeAt(i)===123?(h=S,i++):(h=e,E===0&&N(fr)),h!==e){for(s=[],o=_();o!==e;)s.push(o),o=_();if(o=ys(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();t.charCodeAt(i)===125?(u=I,i++):(u=e,E===0&&N(tt)),u!==e?(X=l,l=ga(o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[d]={nextPos:i,result:l},l}function Io(){var l,f,y=i*76+41,h=T[y];return h?(i=h.nextPos,h.result):(l=i,f=Ho(),f!==e&&(X=l,f=Jl(f)),l=f,T[y]={nextPos:i,result:l},l)}function Da(){var l,f,y,h,s,o,p=i*76+42,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===96?(f=me,i++):(f=e,E===0&&N(Ds)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===96?(o=me,i++):(o=e,E===0&&N(Ds)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=La(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===96?(o=me,i++):(o=e,E===0&&N(Ds)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=La(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===96?(h=me,i++):(h=e,E===0&&N(Ds)),h!==e?(X=l,l=Xl(y)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function La(){var l,f,y,h,s,o,p=i*76+43,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=De(),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();t.charCodeAt(i)===125?(o=I,i++):(o=e,E===0&&N(tt)),o!==e?l=h:(i=l,l=e)}else i=l,l=e}else i=l,l=e;if(l===e){if(l=i,f=[],y=Ba(),y!==e)for(;y!==e;)f.push(y),y=Ba();else f=e;f!==e&&(X=l,f=Gl(f)),l=f}return T[p]={nextPos:i,result:l},l}function Ba(){var l,f=i*76+44,y=T[f];return y?(i=y.nextPos,y.result):(l=Ha(),l===e&&(sr.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(tl))),T[f]={nextPos:i,result:l},l)}function Ha(){var l,f,y,h=i*76+45,s=T[h];return s?(i=s.nextPos,s.result):(l=i,t.charCodeAt(i)===92?(f=mt,i++):(f=e,E===0&&N(Yn)),f!==e?(Ns.test(t.charAt(i))?(y=t.charAt(i),i++):(y=e,E===0&&N(Ls)),y!==e?l=y:(i=l,l=e)):(i=l,l=e),T[h]={nextPos:i,result:l},l)}function Zs(){var l,f,y,h,s,o,p=i*76+46,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===34?(f=$e,i++):(f=e,E===0&&N(Bs)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===34?(o=$e,i++):(o=e,E===0&&N(Bs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=On(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=da(o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===34?(o=$e,i++):(o=e,E===0&&N(Bs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=On(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=da(o)):(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===34?(h=$e,i++):(h=e,E===0&&N(Bs)),h!==e?(X=l,l=Zl(y)):(i=l,l=e)}else i=l,l=e;if(l===e)if(l=i,t.charCodeAt(i)===39?(f=he,i++):(f=e,E===0&&N(Hs)),f!==e){for(y=[],h=i,s=i,E++,t.charCodeAt(i)===39?(o=he,i++):(o=e,E===0&&N(Hs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Nn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=ya(o)):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=i,E++,t.charCodeAt(i)===39?(o=he,i++):(o=e,E===0&&N(Hs)),E--,o===e?s=void 0:(i=s,s=e),s!==e?(o=Nn(),o===e&&(t.length>i?(o=t.charAt(i),i++):(o=e,E===0&&N(or))),o!==e?(X=h,h=ya(o)):(i=h,h=e)):(i=h,h=e);t.charCodeAt(i)===39?(h=he,i++):(h=e,E===0&&N(Hs)),h!==e?(X=l,l=wa(y)):(i=l,l=e)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function On(){var l,f,y=i*76+47,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Le?(f=Le,i+=2):(f=e,E===0&&N(Us)),f!==e&&(X=l,f=Ql()),l=f,T[y]={nextPos:i,result:l},l)}function Nn(){var l,f,y=i*76+48,h=T[y];return h?(i=h.nextPos,h.result):(l=i,t.substr(i,2)===Re?(f=Re,i+=2):(f=e,E===0&&N(qs)),f!==e&&(X=l,f=ma()),l=f,T[y]={nextPos:i,result:l},l)}function Ua(){var l,f=i*76+49,y=T[f];return y?(i=y.nextPos,y.result):(l=In(),l===e&&(l=qa()),T[f]={nextPos:i,result:l},l)}function In(){var l,f,y,h,s,o,p=i*76+50,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),Lt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(aa)),f!==e){if(y=[],vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt)),h!==e)for(;h!==e;)y.push(h),vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt));else y=e;if(y!==e)if(t.charCodeAt(i)===46?(h=z,i++):(h=e,E===0&&N(gs)),h!==e){if(s=[],vt.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,E===0&&N(Nt)),o!==e)for(;o!==e;)s.push(o),vt.test(t.charAt(i))?(o=t.charAt(i),i++):(o=e,E===0&&N(Nt));else s=e;s!==e?(X=l,l=Yl()):(i=l,l=e)}else i=l,l=e;else i=l,l=e}else i=l,l=e;if(l===e)if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),vt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(Nt)),f!==e)if(t.charCodeAt(i)===46?(y=z,i++):(y=e,E===0&&N(gs)),y!==e){if(h=[],vt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,E===0&&N(Nt)),s!==e)for(;s!==e;)h.push(s),vt.test(t.charAt(i))?(s=t.charAt(i),i++):(s=e,E===0&&N(Nt));else h=e;h!==e?(X=l,l=eo()):(i=l,l=e)}else i=l,l=e;else i=l,l=e;return T[p]={nextPos:i,result:l},l}function qa(){var l,f,y,h,s=i*76+51,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),Lt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(aa)),f!==e){if(y=[],vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt)),h!==e)for(;h!==e;)y.push(h),vt.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(Nt));else y=e;y!==e?(X=l,l=to()):(i=l,l=e)}else i=l,l=e;return l===e&&(l=i,rs.test(t.charAt(i))?(t.charAt(i),i++):E===0&&N(zs),vt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(Nt)),f!==e?(X=l,l=ro()):(i=l,l=e)),T[s]={nextPos:i,result:l},l}function Tn(){var l,f=i*76+52,y=T[f];return y?(i=y.nextPos,y.result):(l=za(),l===e&&(l=To()),T[f]={nextPos:i,result:l},l)}function za(){var l,f,y,h,s=i*76+53,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===He?(f=He,i+=4):(f=e,E===0&&N(ia)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=so()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function To(){var l,f,y,h,s=i*76+54,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,5)===We?(f=We,i+=5):(f=e,E===0&&N(cr)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=no()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Va(){var l,f,y,h,s=i*76+55,o=T[s];return o?(i=o.nextPos,o.result):(l=i,t.substr(i,4)===Ze?(f=Ze,i+=4):(f=e,E===0&&N(rl)),f!==e?(y=i,E++,Ct.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(gr)),E--,h===e?y=void 0:(i=y,y=e),y!==e?(X=l,l=ao()):(i=l,l=e)):(i=l,l=e),T[s]={nextPos:i,result:l},l)}function Wa(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+56,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=De(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=xa(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=De(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=xa(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=I,i++):(s=e,E===0&&N(tt)),s!==e?(X=l,l=io(h)):(i=l,l=e)}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function jo(){var l,f,y,h,s,o,p,u,d,v,b=i*76+57,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=De(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=$a(o)}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=De(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=$a(o)}else i=s,s=e;for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=ba(h)):(i=l,l=e)}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function jn(){var l,f,y,h,s,o,p,u=i*76+58,d=T[u];if(d)return i=d.nextPos,d.result;if(l=i,f=Ue(),f!==e){for(y=i,h=[],s=_();s!==e;)h.push(s),s=_();if(t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e){for(o=[],p=_();p!==e;)o.push(p),p=_();p=Gt(),p!==e?y=p:(i=y,y=e)}else i=y,y=e;y===e&&(y=null),X=l,l=lo(f,y)}else i=l,l=e;return T[u]={nextPos:i,result:l},l}function Rn(){var l,f,y,h,s,o,p=i*76+59,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=jn(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=jn(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=jn(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);X=l,l=Aa(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Ka(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D,B,Q,xe=i*76+60,ne=T[xe];if(ne)return i=ne.nextPos,ne.result;if(l=i,t.charCodeAt(i)===64?(f=it,i++):(f=e,E===0&&N(sl)),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(h=Ue(),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(t.charCodeAt(i)===40?(o=A,i++):(o=e,E===0&&N(_r)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(u=Rn(),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();if(t.charCodeAt(i)===41?(v=C,i++):(v=e,E===0&&N(Ot)),v!==e){for(b=i,w=[],M=_();M!==e;)w.push(M),M=_();if(t.charCodeAt(i)===58?(M=re,i++):(M=e,E===0&&N(xt)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();D=Gt(),D!==e?b=D:(i=b,b=e)}else i=b,b=e;for(b===e&&(b=null),w=[],M=_();M!==e;)w.push(M),M=_();if(t.charCodeAt(i)===123?(M=S,i++):(M=e,E===0&&N(fr)),M!==e){for(F=[],D=_();D!==e;)F.push(D),D=_();for(D=ys(),D===e&&(D=null),B=[],Q=_();Q!==e;)B.push(Q),Q=_();t.charCodeAt(i)===125?(Q=I,i++):(Q=e,E===0&&N(tt)),Q!==e?(X=l,l=oo(y,h,s,u,b,D)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[xe]={nextPos:i,result:l},l}function Ro(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F=i*76+61,D=T[F];if(D)return i=D.nextPos,D.result;if(l=i,t.substr(i,2)===bt?(f=bt,i+=2):(f=e,E===0&&N(ds)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=Rn(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=i,u=[],d=_();d!==e;)u.push(d),d=_();if(t.charCodeAt(i)===58?(d=re,i++):(d=e,E===0&&N(xt)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();b=Gt(),b!==e?p=b:(i=p,p=e)}else i=p,p=e;for(p===e&&(p=null),u=[],d=_();d!==e;)u.push(d),d=_();if(t.charCodeAt(i)===123?(d=S,i++):(d=e,E===0&&N(fr)),d!==e){for(v=[],b=_();b!==e;)v.push(b),b=_();for(b=ys(),b===e&&(b=null),w=[],M=_();M!==e;)w.push(M),M=_();t.charCodeAt(i)===125?(M=I,i++):(M=e,E===0&&N(tt)),M!==e?(X=l,l=uo(h,p,b)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[F]={nextPos:i,result:l},l}function Dn(){var l,f,y,h,s,o,p,u,d,v,b=i*76+62,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.charCodeAt(i)===91?(f=Dt,i++):(f=e,E===0&&N(bn)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Te(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=_a(o)}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Te(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();for(t.charCodeAt(i)===44?(u=V,i++):(u=e,E===0&&N(At)),u===e&&(u=null),d=[],v=_();v!==e;)d.push(v),v=_();X=s,s=_a(o)}else i=s,s=e;for(s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===93?(o=H,i++):(o=e,E===0&&N(Is)),o!==e?(X=l,l=fo(h)):(i=l,l=e)}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Ja(){var l,f,y,h,s,o,p,u,d,v,b,w,M,F,D=i*76+63,B=T[D];if(B)return i=B.nextPos,B.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();if(h=[],s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=Te(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=Ca(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;for(;s!==e;)if(h.push(s),s=i,o=Ue(),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.charCodeAt(i)===58?(u=re,i++):(u=e,E===0&&N(xt)),u!==e){if(d=[],v=_(),v!==e)for(;v!==e;)d.push(v),v=_();else d=e;if(d!==e)if(v=Te(),v!==e){for(b=[],w=_();w!==e;)b.push(w),w=_();for(t.charCodeAt(i)===44?(w=V,i++):(w=e,E===0&&N(At)),w===e&&(t.charCodeAt(i)===59?(w=at,i++):(w=e,E===0&&N(Vs))),w===e&&(w=null),M=[],F=_();F!==e;)M.push(F),F=_();X=s,s=Ca(o,v)}else i=s,s=e;else i=s,s=e}else i=s,s=e}else i=s,s=e;t.charCodeAt(i)===125?(s=I,i++):(s=e,E===0&&N(tt)),s!==e?(X=l,l=ka(h)):(i=l,l=e)}else i=l,l=e;return T[D]={nextPos:i,result:l},l}function Gt(){var l,f=i*76+64,y=T[f];return y?(i=y.nextPos,y.result):(l=Do(),l===e&&(l=Bo()),T[f]={nextPos:i,result:l},l)}function Do(){var l,f,y,h,s,o,p,u,d,v,b=i*76+65,w=T[b];if(w)return i=w.nextPos,w.result;if(l=i,t.substr(i,2)===bt?(f=bt,i+=2):(f=e,E===0&&N(ds)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=Lo(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();if(t.charCodeAt(i)===41?(o=C,i++):(o=e,E===0&&N(Ot)),o!==e){for(p=[],u=_();u!==e;)p.push(u),u=_();if(t.substr(i,2)===oe?(u=oe,i+=2):(u=e,E===0&&N(js)),u!==e){for(d=[],v=_();v!==e;)d.push(v),v=_();v=Gt(),v!==e?(X=l,l=co(h,v)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return T[b]={nextPos:i,result:l},l}function Lo(){var l,f,y,h,s,o,p=i*76+66,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Gt(),f!==e){for(y=[],h=i,s=Jr(),s!==e?(o=Gt(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,s=Jr(),s!==e?(o=Gt(),o!==e?h=o:(i=h,h=e)):(i=h,h=e);X=l,l=Pa(f,y)}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Bo(){var l,f,y,h,s,o,p,u,d=i*76+67,v=T[d];if(v)return i=v.nextPos,v.result;if(l=i,f=Ue(),f!==e){for(y=[],h=Ae();h!==e;)y.push(h),h=Ae();if(t.charCodeAt(i)===60?(h=Ye,i++):(h=e,E===0&&N(ta)),h!==e){for(s=[],o=Ae();o!==e;)s.push(o),o=Ae();if(o=Gt(),o!==e){for(p=[],u=Ae();u!==e;)p.push(u),u=Ae();t.charCodeAt(i)===62?(u=Br,i++):(u=e,E===0&&N($n)),u!==e?(X=l,l=ho(f,o)):(i=l,l=e)}else i=l,l=e}else i=l,l=e}else i=l,l=e;return l===e&&(l=i,f=Ue(),f!==e&&(X=l,f=po(f)),l=f),T[d]={nextPos:i,result:l},l}function Ue(){var l,f,y,h,s=i*76+68,o=T[s];if(o)return i=o.nextPos,o.result;if(l=i,qt.test(t.charAt(i))?(f=t.charAt(i),i++):(f=e,E===0&&N(nl)),f!==e){for(y=[],Zn.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(_n));h!==e;)y.push(h),Zn.test(t.charAt(i))?(h=t.charAt(i),i++):(h=e,E===0&&N(_n));X=l,l=vo()}else i=l,l=e;return T[s]={nextPos:i,result:l},l}function Ho(){var l,f,y,h,s,o,p=i*76+69,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,f=Ue(),f!==e){for(y=[],h=i,t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e?(o=Ue(),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);h!==e;)y.push(h),h=i,t.charCodeAt(i)===58?(s=re,i++):(s=e,E===0&&N(xt)),s!==e?(o=Ue(),o!==e?(s=[s,o],h=s):(i=h,h=e)):(i=h,h=e);X=l,l=go()}else i=l,l=e;return T[p]={nextPos:i,result:l},l}function Jr(){var l,f,y,h,s,o=i*76+70,p=T[o];if(p)return i=p.nextPos,p.result;for(l=i,f=[],y=_();y!==e;)f.push(y),y=_();if(t.charCodeAt(i)===44?(y=V,i++):(y=e,E===0&&N(At)),y!==e){for(h=[],s=_();s!==e;)h.push(s),s=_();f=[f,y,h],l=f}else i=l,l=e;if(l===e)if(l=[],f=_(),f!==e)for(;f!==e;)l.push(f),f=_();else l=e;return T[o]={nextPos:i,result:l},l}function Ht(){var l,f,y,h,s,o,p=i*76+71,u=T[p];if(u)return i=u.nextPos,u.result;if(l=i,t.charCodeAt(i)===123?(f=S,i++):(f=e,E===0&&N(fr)),f!==e){for(y=[],h=_();h!==e;)y.push(h),h=_();for(h=ys(),h===e&&(h=null),s=[],o=_();o!==e;)s.push(o),o=_();t.charCodeAt(i)===125?(o=I,i++):(o=e,E===0&&N(tt)),o!==e?(X=l,l=yo(h)):(i=l,l=e)}else i=l,l=e;return l===e&&(l=yr()),T[p]={nextPos:i,result:l},l}function qe(){var l,f=i*76+72,y=T[f];return y?(i=y.nextPos,y.result):(t.substr(i,2)===Kt?(l=Kt,i+=2):(l=e,E===0&&N(al)),l===e&&(Qn.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(la))),T[f]={nextPos:i,result:l},l)}function Xa(){var l,f,y=i*76+73,h=T[y];return h?(i=h.nextPos,h.result):(l=i,E++,t.length>i?(f=t.charAt(i),i++):(f=e,E===0&&N(or)),E--,f===e?l=void 0:(i=l,l=e),l===e&&(l=qe()),T[y]={nextPos:i,result:l},l)}function _(){var l,f=i*76+74,y=T[f];return y?(i=y.nextPos,y.result):(Ii.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(il)),T[f]={nextPos:i,result:l},l)}function Ae(){var l,f=i*76+75,y=T[f];return y?(i=y.nextPos,y.result):(Ti.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,E===0&&N(ll)),T[f]={nextPos:i,result:l},l)}function ie(l,f,y){const h={type:l};f.children=y;for(const o of Object.keys(f))f[o]!==void 0&&(h[o]=f[o]);const s=R();return h.loc={start:s.start.offset,end:s.end.offset-1},h}if(Vr=g(),Vr!==e&&i===t.length)return Vr;throw Vr!==e&&i<t.length&&N(ae()),Xs(K,a<t.length?t.charAt(a):null,a<t.length?Js(a,a+1):Js(a,a))}const Z1=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function Q1(t){return Z1.includes(t.type)}function Nd(t){return"chain"in t&&t.chain!==null}function Y1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function eA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function tA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function ct(t,r){const e=r(t);switch(e.type){case"def":{e.expr=ct(e.expr,r);break}case"return":{e.expr=ct(e.expr,r);break}case"each":{e.items=ct(e.items,r),e.for=ct(e.for,r);break}case"for":{e.from!=null&&(e.from=ct(e.from,r)),e.to!=null&&(e.to=ct(e.to,r)),e.times!=null&&(e.times=ct(e.times,r)),e.for=ct(e.for,r);break}case"loop":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ct(e.statements[n],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=ct(e.expr,r),e.dest=ct(e.dest,r);break}case"infix":{for(let n=0;n<e.operands.length;n++)e.operands[n]=ct(e.operands[n],r);break}case"not":{e.expr=ct(e.expr,r);break}case"if":{e.cond=ct(e.cond,r),e.then=ct(e.then,r);for(const n of e.elseif)n.cond=ct(n.cond,r),n.then=ct(n.then,r);e.else!=null&&(e.else=ct(e.else,r));break}case"fn":{for(let n=0;n<e.children.length;n++)e.children[n]=ct(e.children[n],r);break}case"match":{e.about=ct(e.about,r);for(const n of e.qs)n.q=ct(n.q,r),n.a=ct(n.a,r);e.default!=null&&(e.default=ct(e.default,r));break}case"block":{for(let n=0;n<e.statements.length;n++)e.statements[n]=ct(e.statements[n],r);break}case"tmpl":{for(let n=0;n<e.tmpl.length;n++){const c=e.tmpl[n];typeof c!="string"&&(e.tmpl[n]=ct(c,r))}break}case"obj":{for(const n of e.value)e.value.set(n[0],ct(n[1],r));break}case"arr":{for(let n=0;n<e.value.length;n++)e.value[n]=ct(e.value[n],r);break}case"callChain":{for(let n=0;n<e.args.length;n++)e.args[n]=ct(e.args[n],r);break}case"indexChain":{e.index=ct(e.index,r);break}case"call":{e.target=ct(e.target,r);for(let n=0;n<e.args.length;n++)e.args[n]=ct(e.args[n],r);break}case"index":{e.target=ct(e.target,r),e.index=ct(e.index,r);break}case"prop":{e.target=ct(e.target,r);break}case"ns":{for(let n=0;n<e.members.length;n++)e.members[n]=ct(e.members[n],r);break}}if(Nd(e)&&e.chain!=null)for(let n=0;n<e.chain.length;n++)e.chain[n]=ct(e.chain[n],r);return e}const Xc=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Gc(t){throw new gu(`Reserved word "${t}" cannot be used as variable name.`)}function rA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Xc.includes(t.name)&&Gc(t.name);break}case"meta":{t.name!=null&&Xc.includes(t.name)&&Gc(t.name);break}case"fn":{for(const r of t.args)Xc.includes(r.name)&&Gc(r.name);break}}return t}function sA(t){for(const r of t)ct(r,rA);return t}function Zv(t){return{type:"simple",name:t}}function nA(t,r){return{type:"generic",name:t,inners:r}}function aA(t,r){return{type:"fn",args:t,result:r}}function Wf(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Wf(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(n=>Wf(n)).join(", "),e=Wf(t.result);return`@(${r}) { ${e} }`}}}function zu(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Zv(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=zu(t.inner):r=Zv("any"),nA(t.name,[r])}}throw new gu(`Unknown type: '${Wf(t)}'`)}else{const r=t.args.map(e=>zu(e));return aA(r,zu(t.result))}}function iA(t){switch(t.type){case"def":{t.varType!=null&&zu(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&zu(r.argType);t.retType!=null&&zu(t.retType);break}}return t}function lA(t){for(const r of t)ct(r,iA);return t}function Kf(t){const r=[],e=[];for(const n of t)if(n.type==="attr")e.push(n);else if(n.type==="def")n.attr==null&&(n.attr=[]),n.attr.push(...e),e.splice(0,e.length),n.expr.type==="fn"&&(n.expr.children=Kf(n.expr.children)),r.push(n);else{if(e.length>0)throw new gu("invalid attribute.");switch(n.type){case"fn":{n.children=Kf(n.children);break}case"block":{n.statements=Kf(n.statements);break}}r.push(n)}if(e.length>0)throw new gu("invalid attribute.");return r}function oA(t){if(Q1(t)&&Nd(t)&&t.chain!=null){const{chain:r,...e}=t;let n=e;for(const c of r)switch(c.type){case"callChain":{n=Y1(n,c.args,c.loc);break}case"indexChain":{n=eA(n,c.index,c.loc);break}case"propChain":{n=tA(n,c.name,c.loc);break}}return n}return t}function uA(t){for(let r=0;r<t.length;r++)t[r]=ct(t[r],oA);return t}function Jf(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Id(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Jf(t,r,e);{const{left:n,right:c,info:g}=t;return Jf(n,Id(c,r,e),g)}}function Yo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Yo(t.left),Yo(t.right)]}}const fA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Yo(t.left),right:Yo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Yo(t.left),right:Yo(t.right)}),priority:3}};function cA(t){const r=t.operators.map(n=>{const c=fA[n];if(c==null)throw new gu(`No such operator: ${n}.`);return c});let e=Jf(t.operands[0],t.operands[1],r[0]);for(let n=0;n<r.length-1;n++)e=Id(e,t.operands[2+n],r[1+n]);return Yo(e)}function hA(t){for(let r=0;r<t.length;r++)t[r]=ct(t[r],e=>e.type==="infix"?cA(e):e);return t}const Xo=class Xo{constructor(){be(this,"plugins");this.plugins={validate:[sA,lA],transform:[Kf,uA,hA]}}static parse(r){return Xo.instance==null&&(Xo.instance=new Xo),Xo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const n=Gv(r,{startRule:"Preprocess"});e=Gv(n,{startRule:"Main"})}catch(n){throw n.location?n.expected?new gu(`Parsing error. (Line ${n.location.start.line}:${n.location.start.column})`):new gu(`${n.message} (Line ${n.location.start.line}:${n.location.start.column})`):n}for(const n of this.plugins.validate)e=n(e);for(const n of this.plugins.transform)e=n(e);return e}};be(Xo,"instance");let jh=Xo;const Qv="0.14.1",pA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`},vA=t=>(vf("data-v-6e06e43e"),t=t(),gf(),t),gA={id:"root"},dA={id:"grid1"},yA={class:"type"},wA={id:"grid2"},mA=vA(()=>Mt("header",null,null,-1)),xA=si({__name:"index",setup(t){const r=wr(window.localStorage.getItem(Qv)??'<: "Hello, AiScript!"'),e=wr(null),n=wr([]),c=wr(null);ri(r,()=>{window.localStorage.setItem(Qv,r.value);try{e.value=jh.parse(r.value),c.value=null}catch(x){const m=x;c.value=m.message,console.error("info"in m?m.info:m);return}},{immediate:!0});let g=null;const $=async()=>{n.value=[],g==null||g.abort(),g=new Os({},{in:x=>new Promise(m=>{const A=window.prompt(x);m(A??"")}),out:x=>{n.value.push({id:Math.random(),type:x.type,text:Nh(x,!0),print:!0})},log:(x,m)=>{switch(x){case"end":n.value.push({id:Math.random(),text:Nh(m.val,!0),print:!1});break}}});try{await g.exec(e.value)}catch(x){console.error(x),window.alert("{e}")}};return(x,m)=>(wt(),Ut("div",gA,[Mt("div",dA,[nt(yf,{modelValue:r.value,"onUpdate:modelValue":m[0]||(m[0]=A=>r.value=A),samples:Mi(pA),parseError:c.value,onRun:$},null,8,["modelValue","samples","parseError"]),nt(Fr,{id:"logs"},{header:ot(()=>[It("Output")]),default:ot(()=>[(wt(!0),Ut(Ir,null,fu(n.value,A=>(wt(),Ut("div",{class:Tr(["log",[{print:A.print},A.type]]),key:A.id},[Mt("span",yA,Dr(A.type),1),It(" "+Dr(A.text),1)],2))),128))]),_:1})]),Mt("div",wA,[nt(Fr,{id:"ast"},{header:ot(()=>[It("AST")]),default:ot(()=>[Mt("pre",null,Dr(JSON.stringify(e.value,null,"	")),1)]),_:1}),nt(Fr,{id:"bin"},{header:ot(()=>[It("Bytecode")]),default:ot(()=>[mA]),_:1}),nt(Fr,{id:"debugger"},{header:ot(()=>[It("Debugger")]),_:1})])]))}});const $A=ai(xA,[["__scopeId","data-v-6e06e43e"]]),Yv="0.16.0",bA=si({__name:"App",setup(t){const r=["next","develop","0.16.0","0.15.0","0.14.1"],e=wr(window.localStorage.getItem("version")??Yv),n=Object.fromEntries(r.map(g=>[g,g+(g==Yv?"(latest)":"")]));function c(g){e.value=g,window.localStorage.setItem("version",e.value)}return(g,$)=>(wt(),Ut(Ir,null,[Mt("h1",null,[It(" AiScript ( "),nt(Zg,{id:"version",options:Mi(n),onSelect:c},{default:ot(()=>[It(Dr(e.value),1)]),_:1},8,["options"]),It(" ) Playground ")]),e.value==="next"?(wt(),wi($x,{key:0})):Xn("",!0),e.value==="develop"?(wt(),wi(N$,{key:1})):Xn("",!0),e.value==="0.16.0"?(wt(),wi(Hb,{key:2})):Xn("",!0),e.value==="0.15.0"?(wt(),wi(O1,{key:3})):Xn("",!0),e.value==="0.14.1"?(wt(),wi($A,{key:4})):Xn("",!0)],64))}});const AA=ai(bA,[["__scopeId","data-v-b862702f"]]);lw(AA).mount("#app");
