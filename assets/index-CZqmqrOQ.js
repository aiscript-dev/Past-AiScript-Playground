var t0=Object.defineProperty;var r0=(t,r,e)=>r in t?t0(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var he=(t,r,e)=>r0(t,typeof r!="symbol"?r+"":r,e);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const v of document.querySelectorAll('link[rel="modulepreload"]'))s(v);new MutationObserver(v=>{for(const d of v)if(d.type==="childList")for(const C of d.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&s(C)}).observe(document,{childList:!0,subtree:!0});function e(v){const d={};return v.integrity&&(d.integrity=v.integrity),v.referrerPolicy&&(d.referrerPolicy=v.referrerPolicy),v.crossOrigin==="use-credentials"?d.credentials="include":v.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(v){if(v.ep)return;v.ep=!0;const d=e(v);fetch(v.href,d)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Wv(t){const r=Object.create(null);for(const e of t.split(","))r[e]=1;return e=>e in r}const zr={},Ff=[],zu=()=>{},s0=()=>!1,Vh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Gv=t=>t.startsWith("onUpdate:"),qs=Object.assign,Jv=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},n0=Object.prototype.hasOwnProperty,br=(t,r)=>n0.call(t,r),bt=Array.isArray,Of=t=>zh(t)==="[object Map]",ty=t=>zh(t)==="[object Set]",Ft=t=>typeof t=="function",Ss=t=>typeof t=="string",Mo=t=>typeof t=="symbol",as=t=>t!==null&&typeof t=="object",ry=t=>(as(t)||Ft(t))&&Ft(t.then)&&Ft(t.catch),sy=Object.prototype.toString,zh=t=>sy.call(t),a0=t=>zh(t).slice(8,-1),ny=t=>zh(t)==="[object Object]",Zv=t=>Ss(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,wc=Wv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kh=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},i0=/-(\w)/g,Po=Kh(t=>t.replace(i0,(r,e)=>e?e.toUpperCase():"")),l0=/\B([A-Z])/g,xf=Kh(t=>t.replace(l0,"-$1").toLowerCase()),ay=Kh(t=>t.charAt(0).toUpperCase()+t.slice(1)),up=Kh(t=>t?`on${ay(t)}`:""),ko=(t,r)=>!Object.is(t,r),op=(t,...r)=>{for(let e=0;e<t.length;e++)t[e](...r)},iy=(t,r,e,s=!1)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,writable:s,value:e})},u0=t=>{const r=parseFloat(t);return isNaN(r)?t:r},o0=t=>{const r=Ss(t)?Number(t):NaN;return isNaN(r)?t:r};let kg;const ly=()=>kg||(kg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qv(t){if(bt(t)){const r={};for(let e=0;e<t.length;e++){const s=t[e],v=Ss(s)?p0(s):Qv(s);if(v)for(const d in v)r[d]=v[d]}return r}else if(Ss(t)||as(t))return t}const f0=/;(?![^(]*\))/g,c0=/:([^]+)/,h0=/\/\*[^]*?\*\//g;function p0(t){const r={};return t.replace(h0,"").split(f0).forEach(e=>{if(e){const s=e.split(c0);s.length>1&&(r[s[0].trim()]=s[1].trim())}}),r}function Rn(t){let r="";if(Ss(t))r=t;else if(bt(t))for(let e=0;e<t.length;e++){const s=Rn(t[e]);s&&(r+=s+" ")}else if(as(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}const v0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",g0=Wv(v0);function uy(t){return!!t||t===""}const oy=t=>!!(t&&t.__v_isRef===!0),Co=t=>Ss(t)?t:t==null?"":bt(t)||as(t)&&(t.toString===sy||!Ft(t.toString))?oy(t)?Co(t.value):JSON.stringify(t,fy,2):String(t),fy=(t,r)=>oy(r)?fy(t,r.value):Of(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[s,v],d)=>(e[fp(s,d)+" =>"]=v,e),{})}:ty(r)?{[`Set(${r.size})`]:[...r.values()].map(e=>fp(e))}:Mo(r)?fp(r):as(r)&&!bt(r)&&!ny(r)?String(r):r,fp=(t,r="")=>{var e;return Mo(t)?`Symbol(${(e=t.description)!=null?e:r})`:t};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ji;class d0{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ji,!r&&ji&&(this.index=(ji.scopes||(ji.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].pause();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,e;if(this.scopes)for(r=0,e=this.scopes.length;r<e;r++)this.scopes[r].resume();for(r=0,e=this.effects.length;r<e;r++)this.effects[r].resume()}}run(r){if(this._active){const e=ji;try{return ji=this,r()}finally{ji=e}}}on(){ji=this}off(){ji=this.parent}stop(r){if(this._active){let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const v=this.parent.scopes.pop();v&&v!==this&&(this.parent.scopes[this.index]=v,v.index=this.index)}this.parent=void 0,this._active=!1}}}function y0(){return ji}let Hr;const cp=new WeakSet;class cy{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ji&&ji.active&&ji.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cp.has(this)&&(cp.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||py(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Eg(this),vy(this);const r=Hr,e=Nu;Hr=this,Nu=!0;try{return this.fn()}finally{gy(this),Hr=r,Nu=e,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)eg(r);this.deps=this.depsTail=void 0,Eg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cp.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zp(this)&&this.run()}get dirty(){return Zp(this)}}let hy=0,mc,$c;function py(t,r=!1){if(t.flags|=8,r){t.next=$c,$c=t;return}t.next=mc,mc=t}function Xv(){hy++}function Yv(){if(--hy>0)return;if($c){let r=$c;for($c=void 0;r;){const e=r.next;r.next=void 0,r.flags&=-9,r=e}}let t;for(;mc;){let r=mc;for(mc=void 0;r;){const e=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(s){t||(t=s)}r=e}}if(t)throw t}function vy(t){for(let r=t.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function gy(t){let r,e=t.depsTail,s=e;for(;s;){const v=s.prevDep;s.version===-1?(s===e&&(e=v),eg(s),w0(s)):r=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=v}t.deps=r,t.depsTail=e}function Zp(t){for(let r=t.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(dy(r.dep.computed)||r.dep.version!==r.version))return!0;return!!t._dirty}function dy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===kc))return;t.globalVersion=kc;const r=t.dep;if(t.flags|=2,r.version>0&&!t.isSSR&&t.deps&&!Zp(t)){t.flags&=-3;return}const e=Hr,s=Nu;Hr=t,Nu=!0;try{vy(t);const v=t.fn(t._value);(r.version===0||ko(v,t._value))&&(t._value=v,r.version++)}catch(v){throw r.version++,v}finally{Hr=e,Nu=s,gy(t),t.flags&=-3}}function eg(t,r=!1){const{dep:e,prevSub:s,nextSub:v}=t;if(s&&(s.nextSub=v,t.prevSub=void 0),v&&(v.prevSub=s,t.nextSub=void 0),e.subs===t&&(e.subs=s),!e.subs&&e.computed){e.computed.flags&=-5;for(let d=e.computed.deps;d;d=d.nextDep)eg(d,!0)}!r&&!--e.sc&&e.map&&e.map.delete(e.key)}function w0(t){const{prevDep:r,nextDep:e}=t;r&&(r.nextDep=e,t.prevDep=void 0),e&&(e.prevDep=r,t.nextDep=void 0)}let Nu=!0;const yy=[];function So(){yy.push(Nu),Nu=!1}function To(){const t=yy.pop();Nu=t===void 0?!0:t}function Eg(t){const{cleanup:r}=t;if(t.cleanup=void 0,r){const e=Hr;Hr=void 0;try{r()}finally{Hr=e}}}let kc=0;class m0{constructor(r,e){this.sub=r,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class tg{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!Hr||!Nu||Hr===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Hr)e=this.activeLink=new m0(Hr,this),Hr.deps?(e.prevDep=Hr.depsTail,Hr.depsTail.nextDep=e,Hr.depsTail=e):Hr.deps=Hr.depsTail=e,wy(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Hr.depsTail,e.nextDep=void 0,Hr.depsTail.nextDep=e,Hr.depsTail=e,Hr.deps===e&&(Hr.deps=s)}return e}trigger(r){this.version++,kc++,this.notify(r)}notify(r){Xv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Yv()}}}function wy(t){if(t.dep.sc++,t.sub.flags&4){const r=t.dep.computed;if(r&&!t.dep.subs){r.flags|=20;for(let s=r.deps;s;s=s.nextDep)wy(s)}const e=t.dep.subs;e!==t&&(t.prevSub=e,e&&(e.nextSub=t)),t.dep.subs=t}}const Qp=new WeakMap,Yo=Symbol(""),Xp=Symbol(""),Ec=Symbol("");function Dn(t,r,e){if(Nu&&Hr){let s=Qp.get(t);s||Qp.set(t,s=new Map);let v=s.get(e);v||(s.set(e,v=new tg),v.map=s,v.key=e),v.track()}}function Yu(t,r,e,s,v,d){const C=Qp.get(t);if(!C){kc++;return}const P=E=>{E&&E.trigger()};if(Xv(),r==="clear")C.forEach(P);else{const E=bt(t),N=E&&Zv(e);if(E&&e==="length"){const S=Number(s);C.forEach((B,L)=>{(L==="length"||L===Ec||!Mo(L)&&L>=S)&&P(B)})}else switch(e!==void 0&&P(C.get(e)),N&&P(C.get(Ec)),r){case"add":E?N&&P(C.get("length")):(P(C.get(Yo)),Of(t)&&P(C.get(Xp)));break;case"delete":E||(P(C.get(Yo)),Of(t)&&P(C.get(Xp)));break;case"set":Of(t)&&P(C.get(Yo));break}}Yv()}function Mf(t){const r=mr(t);return r===t?r:(Dn(r,"iterate",Ec),Yi(t)?r:r.map(On))}function Wh(t){return Dn(t=mr(t),"iterate",Ec),t}const $0={__proto__:null,[Symbol.iterator](){return hp(this,Symbol.iterator,On)},concat(...t){return Mf(this).concat(...t.map(r=>bt(r)?Mf(r):r))},entries(){return hp(this,"entries",t=>(t[1]=On(t[1]),t))},every(t,r){return Qu(this,"every",t,r,void 0,arguments)},filter(t,r){return Qu(this,"filter",t,r,e=>e.map(On),arguments)},find(t,r){return Qu(this,"find",t,r,On,arguments)},findIndex(t,r){return Qu(this,"findIndex",t,r,void 0,arguments)},findLast(t,r){return Qu(this,"findLast",t,r,On,arguments)},findLastIndex(t,r){return Qu(this,"findLastIndex",t,r,void 0,arguments)},forEach(t,r){return Qu(this,"forEach",t,r,void 0,arguments)},includes(...t){return pp(this,"includes",t)},indexOf(...t){return pp(this,"indexOf",t)},join(t){return Mf(this).join(t)},lastIndexOf(...t){return pp(this,"lastIndexOf",t)},map(t,r){return Qu(this,"map",t,r,void 0,arguments)},pop(){return ic(this,"pop")},push(...t){return ic(this,"push",t)},reduce(t,...r){return Mg(this,"reduce",t,r)},reduceRight(t,...r){return Mg(this,"reduceRight",t,r)},shift(){return ic(this,"shift")},some(t,r){return Qu(this,"some",t,r,void 0,arguments)},splice(...t){return ic(this,"splice",t)},toReversed(){return Mf(this).toReversed()},toSorted(t){return Mf(this).toSorted(t)},toSpliced(...t){return Mf(this).toSpliced(...t)},unshift(...t){return ic(this,"unshift",t)},values(){return hp(this,"values",On)}};function hp(t,r,e){const s=Wh(t),v=s[r]();return s!==t&&!Yi(t)&&(v._next=v.next,v.next=()=>{const d=v._next();return d.value&&(d.value=e(d.value)),d}),v}const x0=Array.prototype;function Qu(t,r,e,s,v,d){const C=Wh(t),P=C!==t&&!Yi(t),E=C[r];if(E!==x0[r]){const B=E.apply(t,d);return P?On(B):B}let N=e;C!==t&&(P?N=function(B,L){return e.call(this,On(B),L,t)}:e.length>2&&(N=function(B,L){return e.call(this,B,L,t)}));const S=E.call(C,N,s);return P&&v?v(S):S}function Mg(t,r,e,s){const v=Wh(t);let d=e;return v!==t&&(Yi(t)?e.length>3&&(d=function(C,P,E){return e.call(this,C,P,E,t)}):d=function(C,P,E){return e.call(this,C,On(P),E,t)}),v[r](d,...s)}function pp(t,r,e){const s=mr(t);Dn(s,"iterate",Ec);const v=s[r](...e);return(v===-1||v===!1)&&ig(e[0])?(e[0]=mr(e[0]),s[r](...e)):v}function ic(t,r,e=[]){So(),Xv();const s=mr(t)[r].apply(t,e);return Yv(),To(),s}const b0=Wv("__proto__,__v_isRef,__isVue"),my=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Mo));function A0(t){Mo(t)||(t=String(t));const r=mr(this);return Dn(r,"has",t),r.hasOwnProperty(t)}class $y{constructor(r=!1,e=!1){this._isReadonly=r,this._isShallow=e}get(r,e,s){const v=this._isReadonly,d=this._isShallow;if(e==="__v_isReactive")return!v;if(e==="__v_isReadonly")return v;if(e==="__v_isShallow")return d;if(e==="__v_raw")return s===(v?d?R0:Cy:d?Ay:by).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(s)?r:void 0;const C=bt(r);if(!v){let E;if(C&&(E=$0[e]))return E;if(e==="hasOwnProperty")return A0}const P=Reflect.get(r,e,jn(r)?r:s);return(Mo(e)?my.has(e):b0(e))||(v||Dn(r,"get",e),d)?P:jn(P)?C&&Zv(e)?P:P.value:as(P)?v?_y(P):ng(P):P}}class xy extends $y{constructor(r=!1){super(!1,r)}set(r,e,s,v){let d=r[e];if(!this._isShallow){const E=pf(d);if(!Yi(s)&&!pf(s)&&(d=mr(d),s=mr(s)),!bt(r)&&jn(d)&&!jn(s))return E?!1:(d.value=s,!0)}const C=bt(r)&&Zv(e)?Number(e)<r.length:br(r,e),P=Reflect.set(r,e,s,jn(r)?r:v);return r===mr(v)&&(C?ko(s,d)&&Yu(r,"set",e,s):Yu(r,"add",e,s)),P}deleteProperty(r,e){const s=br(r,e);r[e];const v=Reflect.deleteProperty(r,e);return v&&s&&Yu(r,"delete",e,void 0),v}has(r,e){const s=Reflect.has(r,e);return(!Mo(e)||!my.has(e))&&Dn(r,"has",e),s}ownKeys(r){return Dn(r,"iterate",bt(r)?"length":Yo),Reflect.ownKeys(r)}}class C0 extends $y{constructor(r=!1){super(!0,r)}set(r,e){return!0}deleteProperty(r,e){return!0}}const _0=new xy,P0=new C0,k0=new xy(!0);const rg=t=>t,Gh=t=>Reflect.getPrototypeOf(t);function Lc(t,r,e=!1,s=!1){t=t.__v_raw;const v=mr(t),d=mr(r);e||(ko(r,d)&&Dn(v,"get",r),Dn(v,"get",d));const{has:C}=Gh(v),P=s?rg:e?lg:On;if(C.call(v,r))return P(t.get(r));if(C.call(v,d))return P(t.get(d));t!==v&&t.get(r)}function Hc(t,r=!1){const e=this.__v_raw,s=mr(e),v=mr(t);return r||(ko(t,v)&&Dn(s,"has",t),Dn(s,"has",v)),t===v?e.has(t):e.has(t)||e.has(v)}function qc(t,r=!1){return t=t.__v_raw,!r&&Dn(mr(t),"iterate",Yo),Reflect.get(t,"size",t)}function Sg(t,r=!1){!r&&!Yi(t)&&!pf(t)&&(t=mr(t));const e=mr(this);return Gh(e).has.call(e,t)||(e.add(t),Yu(e,"add",t,t)),this}function Tg(t,r,e=!1){!e&&!Yi(r)&&!pf(r)&&(r=mr(r));const s=mr(this),{has:v,get:d}=Gh(s);let C=v.call(s,t);C||(t=mr(t),C=v.call(s,t));const P=d.call(s,t);return s.set(t,r),C?ko(r,P)&&Yu(s,"set",t,r):Yu(s,"add",t,r),this}function Ng(t){const r=mr(this),{has:e,get:s}=Gh(r);let v=e.call(r,t);v||(t=mr(t),v=e.call(r,t)),s&&s.call(r,t);const d=r.delete(t);return v&&Yu(r,"delete",t,void 0),d}function Fg(){const t=mr(this),r=t.size!==0,e=t.clear();return r&&Yu(t,"clear",void 0,void 0),e}function Vc(t,r){return function(s,v){const d=this,C=d.__v_raw,P=mr(C),E=r?rg:t?lg:On;return!t&&Dn(P,"iterate",Yo),C.forEach((N,S)=>s.call(v,E(N),E(S),d))}}function zc(t,r,e){return function(...s){const v=this.__v_raw,d=mr(v),C=Of(d),P=t==="entries"||t===Symbol.iterator&&C,E=t==="keys"&&C,N=v[t](...s),S=e?rg:r?lg:On;return!r&&Dn(d,"iterate",E?Xp:Yo),{next(){const{value:B,done:L}=N.next();return L?{value:B,done:L}:{value:P?[S(B[0]),S(B[1])]:S(B),done:L}},[Symbol.iterator](){return this}}}}function lo(t){return function(...r){return t==="delete"?!1:t==="clear"?void 0:this}}function E0(){const t={get(d){return Lc(this,d)},get size(){return qc(this)},has:Hc,add:Sg,set:Tg,delete:Ng,clear:Fg,forEach:Vc(!1,!1)},r={get(d){return Lc(this,d,!1,!0)},get size(){return qc(this)},has:Hc,add(d){return Sg.call(this,d,!0)},set(d,C){return Tg.call(this,d,C,!0)},delete:Ng,clear:Fg,forEach:Vc(!1,!0)},e={get(d){return Lc(this,d,!0)},get size(){return qc(this,!0)},has(d){return Hc.call(this,d,!0)},add:lo("add"),set:lo("set"),delete:lo("delete"),clear:lo("clear"),forEach:Vc(!0,!1)},s={get(d){return Lc(this,d,!0,!0)},get size(){return qc(this,!0)},has(d){return Hc.call(this,d,!0)},add:lo("add"),set:lo("set"),delete:lo("delete"),clear:lo("clear"),forEach:Vc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(d=>{t[d]=zc(d,!1,!1),e[d]=zc(d,!0,!1),r[d]=zc(d,!1,!0),s[d]=zc(d,!0,!0)}),[t,e,r,s]}const[M0,S0,T0,N0]=E0();function sg(t,r){const e=r?t?N0:T0:t?S0:M0;return(s,v,d)=>v==="__v_isReactive"?!t:v==="__v_isReadonly"?t:v==="__v_raw"?s:Reflect.get(br(e,v)&&v in s?e:s,v,d)}const F0={get:sg(!1,!1)},O0={get:sg(!1,!0)},I0={get:sg(!0,!1)};const by=new WeakMap,Ay=new WeakMap,Cy=new WeakMap,R0=new WeakMap;function j0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function D0(t){return t.__v_skip||!Object.isExtensible(t)?0:j0(a0(t))}function ng(t){return pf(t)?t:ag(t,!1,_0,F0,by)}function U0(t){return ag(t,!1,k0,O0,Ay)}function _y(t){return ag(t,!0,P0,I0,Cy)}function ag(t,r,e,s,v){if(!as(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const d=v.get(t);if(d)return d;const C=D0(t);if(C===0)return t;const P=new Proxy(t,C===2?s:e);return v.set(t,P),P}function If(t){return pf(t)?If(t.__v_raw):!!(t&&t.__v_isReactive)}function pf(t){return!!(t&&t.__v_isReadonly)}function Yi(t){return!!(t&&t.__v_isShallow)}function ig(t){return t?!!t.__v_raw:!1}function mr(t){const r=t&&t.__v_raw;return r?mr(r):t}function B0(t){return!br(t,"__v_skip")&&Object.isExtensible(t)&&iy(t,"__v_skip",!0),t}const On=t=>as(t)?ng(t):t,lg=t=>as(t)?_y(t):t;function jn(t){return t?t.__v_isRef===!0:!1}function zo(t){return L0(t,!1)}function L0(t,r){return jn(t)?t:new H0(t,r)}class H0{constructor(r,e){this.dep=new tg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?r:mr(r),this._value=e?r:On(r),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(r){const e=this._rawValue,s=this.__v_isShallow||Yi(r)||pf(r);r=s?r:mr(r),ko(r,e)&&(this._rawValue=r,this._value=s?r:On(r),this.dep.trigger())}}function Mc(t){return jn(t)?t.value:t}const q0={get:(t,r,e)=>r==="__v_raw"?t:Mc(Reflect.get(t,r,e)),set:(t,r,e,s)=>{const v=t[r];return jn(v)&&!jn(e)?(v.value=e,!0):Reflect.set(t,r,e,s)}};function Py(t){return If(t)?t:new Proxy(t,q0)}class V0{constructor(r,e,s){this.fn=r,this.setter=e,this._value=void 0,this.dep=new tg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=kc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Hr!==this)return py(this,!0),!0}get value(){const r=this.dep.track();return dy(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function z0(t,r,e=!1){let s,v;return Ft(t)?s=t:(s=t.get,v=t.set),new V0(s,v,e)}const Kc={},Sh=new WeakMap;let Lo;function K0(t,r=!1,e=Lo){if(e){let s=Sh.get(e);s||Sh.set(e,s=[]),s.push(t)}}function W0(t,r,e=zr){const{immediate:s,deep:v,once:d,scheduler:C,augmentJob:P,call:E}=e,N=W=>v?W:Yi(W)||v===!1||v===0?mo(W,1):mo(W);let S,B,L,Z,ge=!1,le=!1;if(jn(t)?(B=()=>t.value,ge=Yi(t)):If(t)?(B=()=>N(t),ge=!0):bt(t)?(le=!0,ge=t.some(W=>If(W)||Yi(W)),B=()=>t.map(W=>{if(jn(W))return W.value;if(If(W))return N(W);if(Ft(W))return E?E(W,2):W()})):Ft(t)?r?B=E?()=>E(t,2):t:B=()=>{if(L){So();try{L()}finally{To()}}const W=Lo;Lo=S;try{return E?E(t,3,[Z]):t(Z)}finally{Lo=W}}:B=zu,r&&v){const W=B,Q=v===!0?1/0:v;B=()=>mo(W(),Q)}const pe=y0(),be=()=>{S.stop(),pe&&Jv(pe.effects,S)};if(d&&r){const W=r;r=(...Q)=>{W(...Q),be()}}let J=le?new Array(t.length).fill(Kc):Kc;const K=W=>{if(!(!(S.flags&1)||!S.dirty&&!W))if(r){const Q=S.run();if(v||ge||(le?Q.some((re,Y)=>ko(re,J[Y])):ko(Q,J))){L&&L();const re=Lo;Lo=S;try{const Y=[Q,J===Kc?void 0:le&&J[0]===Kc?[]:J,Z];E?E(r,3,Y):r(...Y),J=Q}finally{Lo=re}}}else S.run()};return P&&P(K),S=new cy(B),S.scheduler=C?()=>C(K,!1):K,Z=W=>K0(W,!1,S),L=S.onStop=()=>{const W=Sh.get(S);if(W){if(E)E(W,4);else for(const Q of W)Q();Sh.delete(S)}},r?s?K(!0):J=S.run():C?C(K.bind(null,!0),!0):S.run(),be.pause=S.pause.bind(S),be.resume=S.resume.bind(S),be.stop=be,be}function mo(t,r=1/0,e){if(r<=0||!as(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),r--,jn(t))mo(t.value,r,e);else if(bt(t))for(let s=0;s<t.length;s++)mo(t[s],r,e);else if(ty(t)||Of(t))t.forEach(s=>{mo(s,r,e)});else if(ny(t)){for(const s in t)mo(t[s],r,e);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&mo(t[s],r,e)}return t}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rc(t,r,e,s){try{return s?t(...s):t()}catch(v){Jh(v,r,e)}}function Fu(t,r,e,s){if(Ft(t)){const v=Rc(t,r,e,s);return v&&ry(v)&&v.catch(d=>{Jh(d,r,e)}),v}if(bt(t)){const v=[];for(let d=0;d<t.length;d++)v.push(Fu(t[d],r,e,s));return v}}function Jh(t,r,e,s=!0){const v=r?r.vnode:null,{errorHandler:d,throwUnhandledErrorInProduction:C}=r&&r.appContext.config||zr;if(r){let P=r.parent;const E=r.proxy,N=`https://vuejs.org/error-reference/#runtime-${e}`;for(;P;){const S=P.ec;if(S){for(let B=0;B<S.length;B++)if(S[B](t,E,N)===!1)return}P=P.parent}if(d){So(),Rc(d,null,10,[t,E,N]),To();return}}G0(t,e,v,s,C)}function G0(t,r,e,s=!0,v=!1){if(v)throw t;console.error(t)}const _a=[];let Ru=-1;const Rf=[];let go=null,Nf=0;const ky=Promise.resolve();let Th=null;function J0(t){const r=Th||ky;return t?r.then(this?t.bind(this):t):r}function Z0(t){let r=Ru+1,e=_a.length;for(;r<e;){const s=r+e>>>1,v=_a[s],d=Sc(v);d<t||d===t&&v.flags&2?r=s+1:e=s}return r}function ug(t){if(!(t.flags&1)){const r=Sc(t),e=_a[_a.length-1];!e||!(t.flags&2)&&r>=Sc(e)?_a.push(t):_a.splice(Z0(r),0,t),t.flags|=1,Ey()}}function Ey(){Th||(Th=ky.then(Sy))}function Q0(t){bt(t)?Rf.push(...t):go&&t.id===-1?go.splice(Nf+1,0,t):t.flags&1||(Rf.push(t),t.flags|=1),Ey()}function Og(t,r,e=Ru+1){for(;e<_a.length;e++){const s=_a[e];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;_a.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function My(t){if(Rf.length){const r=[...new Set(Rf)].sort((e,s)=>Sc(e)-Sc(s));if(Rf.length=0,go){go.push(...r);return}for(go=r,Nf=0;Nf<go.length;Nf++){const e=go[Nf];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}go=null,Nf=0}}const Sc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Sy(t){try{for(Ru=0;Ru<_a.length;Ru++){const r=_a[Ru];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),Rc(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;Ru<_a.length;Ru++){const r=_a[Ru];r&&(r.flags&=-2)}Ru=-1,_a.length=0,My(),Th=null,(_a.length||Rf.length)&&Sy()}}let ka=null,Ty=null;function Nh(t){const r=ka;return ka=t,Ty=t&&t.type.__scopeId||null,r}function Ia(t,r=ka,e){if(!r||t._n)return t;const s=(...v)=>{s._d&&qg(-1);const d=Nh(r);let C;try{C=t(...v)}finally{Nh(d),s._d&&qg(1)}return C};return s._n=!0,s._c=!0,s._d=!0,s}function Ro(t,r,e,s){const v=t.dirs,d=r&&r.dirs;for(let C=0;C<v.length;C++){const P=v[C];d&&(P.oldValue=d[C].value);let E=P.dir[s];E&&(So(),Fu(E,e,8,[t.el,P,t,r]),To())}}const X0=Symbol("_vte"),Ny=t=>t.__isTeleport,yo=Symbol("_leaveCb"),Wc=Symbol("_enterCb");function Y0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return By(()=>{t.isMounted=!0}),Ly(()=>{t.isUnmounting=!0}),t}const Ki=[Function,Array],Fy={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ki,onEnter:Ki,onAfterEnter:Ki,onEnterCancelled:Ki,onBeforeLeave:Ki,onLeave:Ki,onAfterLeave:Ki,onLeaveCancelled:Ki,onBeforeAppear:Ki,onAppear:Ki,onAfterAppear:Ki,onAppearCancelled:Ki},Oy=t=>{const r=t.subTree;return r.component?Oy(r.component):r},em={name:"BaseTransition",props:Fy,setup(t,{slots:r}){const e=Jm(),s=Y0();return()=>{const v=r.default&&jy(r.default(),!0);if(!v||!v.length)return;const d=Iy(v),C=mr(t),{mode:P}=C;if(s.isLeaving)return vp(d);const E=Ig(d);if(!E)return vp(d);let N=Yp(E,C,s,e,L=>N=L);E.type!==Pa&&Tc(E,N);const S=e.subTree,B=S&&Ig(S);if(B&&B.type!==Pa&&!Ho(E,B)&&Oy(e).type!==Pa){const L=Yp(B,C,s,e);if(Tc(B,L),P==="out-in"&&E.type!==Pa)return s.isLeaving=!0,L.afterLeave=()=>{s.isLeaving=!1,e.job.flags&8||e.update(),delete L.afterLeave},vp(d);P==="in-out"&&E.type!==Pa&&(L.delayLeave=(Z,ge,le)=>{const pe=Ry(s,B);pe[String(B.key)]=B,Z[yo]=()=>{ge(),Z[yo]=void 0,delete N.delayedLeave},N.delayedLeave=le})}return d}}};function Iy(t){let r=t[0];if(t.length>1){for(const e of t)if(e.type!==Pa){r=e;break}}return r}const tm=em;function Ry(t,r){const{leavingVNodes:e}=t;let s=e.get(r.type);return s||(s=Object.create(null),e.set(r.type,s)),s}function Yp(t,r,e,s,v){const{appear:d,mode:C,persisted:P=!1,onBeforeEnter:E,onEnter:N,onAfterEnter:S,onEnterCancelled:B,onBeforeLeave:L,onLeave:Z,onAfterLeave:ge,onLeaveCancelled:le,onBeforeAppear:pe,onAppear:be,onAfterAppear:J,onAppearCancelled:K}=r,W=String(t.key),Q=Ry(e,t),re=(ae,Te)=>{ae&&Fu(ae,s,9,Te)},Y=(ae,Te)=>{const Ie=Te[1];re(ae,Te),bt(ae)?ae.every(ke=>ke.length<=1)&&Ie():ae.length<=1&&Ie()},ie={mode:C,persisted:P,beforeEnter(ae){let Te=E;if(!e.isMounted)if(d)Te=pe||E;else return;ae[yo]&&ae[yo](!0);const Ie=Q[W];Ie&&Ho(t,Ie)&&Ie.el[yo]&&Ie.el[yo](),re(Te,[ae])},enter(ae){let Te=N,Ie=S,ke=B;if(!e.isMounted)if(d)Te=be||N,Ie=J||S,ke=K||B;else return;let at=!1;const vt=ae[Wc]=sr=>{at||(at=!0,sr?re(ke,[ae]):re(Ie,[ae]),ie.delayedLeave&&ie.delayedLeave(),ae[Wc]=void 0)};Te?Y(Te,[ae,vt]):vt()},leave(ae,Te){const Ie=String(t.key);if(ae[Wc]&&ae[Wc](!0),e.isUnmounting)return Te();re(L,[ae]);let ke=!1;const at=ae[yo]=vt=>{ke||(ke=!0,Te(),vt?re(le,[ae]):re(ge,[ae]),ae[yo]=void 0,Q[Ie]===t&&delete Q[Ie])};Q[Ie]=t,Z?Y(Z,[ae,at]):at()},clone(ae){const Te=Yp(ae,r,e,s,v);return v&&v(Te),Te}};return ie}function vp(t){if(Zh(t))return t=Eo(t),t.children=null,t}function Ig(t){if(!Zh(t))return Ny(t.type)&&t.children?Iy(t.children):t;const{shapeFlag:r,children:e}=t;if(e){if(r&16)return e[0];if(r&32&&Ft(e.default))return e.default()}}function Tc(t,r){t.shapeFlag&6&&t.component?(t.transition=r,Tc(t.component.subTree,r)):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function jy(t,r=!1,e){let s=[],v=0;for(let d=0;d<t.length;d++){let C=t[d];const P=e==null?C.key:String(e)+String(C.key!=null?C.key:d);C.type===kn?(C.patchFlag&128&&v++,s=s.concat(jy(C.children,r,P))):(r||C.type!==Pa)&&s.push(P!=null?Eo(C,{key:P}):C)}if(v>1)for(let d=0;d<s.length;d++)s[d].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function jc(t,r){return Ft(t)?qs({name:t.name},r,{setup:t}):t}function Dy(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ev(t,r,e,s,v=!1){if(bt(t)){t.forEach((ge,le)=>ev(ge,r&&(bt(r)?r[le]:r),e,s,v));return}if(jf(s)&&!v)return;const d=s.shapeFlag&4?hg(s.component):s.el,C=v?null:d,{i:P,r:E}=t,N=r&&r.r,S=P.refs===zr?P.refs={}:P.refs,B=P.setupState,L=mr(B),Z=B===zr?()=>!1:ge=>br(L,ge);if(N!=null&&N!==E&&(Ss(N)?(S[N]=null,Z(N)&&(B[N]=null)):jn(N)&&(N.value=null)),Ft(E))Rc(E,P,12,[C,S]);else{const ge=Ss(E),le=jn(E);if(ge||le){const pe=()=>{if(t.f){const be=ge?Z(E)?B[E]:S[E]:E.value;v?bt(be)&&Jv(be,d):bt(be)?be.includes(d)||be.push(d):ge?(S[E]=[d],Z(E)&&(B[E]=S[E])):(E.value=[d],t.k&&(S[t.k]=E.value))}else ge?(S[E]=C,Z(E)&&(B[E]=C)):le&&(E.value=C,t.k&&(S[t.k]=C))};C?(pe.id=-1,Ni(pe,e)):pe()}}}const jf=t=>!!t.type.__asyncLoader,Zh=t=>t.type.__isKeepAlive;function rm(t,r){Uy(t,"a",r)}function sm(t,r){Uy(t,"da",r)}function Uy(t,r,e=In){const s=t.__wdc||(t.__wdc=()=>{let v=e;for(;v;){if(v.isDeactivated)return;v=v.parent}return t()});if(Qh(r,s,e),e){let v=e.parent;for(;v&&v.parent;)Zh(v.parent.vnode)&&nm(s,r,e,v),v=v.parent}}function nm(t,r,e,s){const v=Qh(r,t,s,!0);Hy(()=>{Jv(s[r],v)},e)}function Qh(t,r,e=In,s=!1){if(e){const v=e[t]||(e[t]=[]),d=r.__weh||(r.__weh=(...C)=>{So();const P=Dc(e),E=Fu(r,e,t,C);return P(),To(),E});return s?v.unshift(d):v.push(d),d}}const to=t=>(r,e=In)=>{(!ep||t==="sp")&&Qh(t,(...s)=>r(...s),e)},am=to("bm"),By=to("m"),im=to("bu"),lm=to("u"),Ly=to("bum"),Hy=to("um"),um=to("sp"),om=to("rtg"),fm=to("rtc");function cm(t,r=In){Qh("ec",t,r)}const hm=Symbol.for("v-ndc");function Fh(t,r,e,s){let v;const d=e,C=bt(t);if(C||Ss(t)){const P=C&&If(t);let E=!1;P&&(E=!Yi(t),t=Wh(t)),v=new Array(t.length);for(let N=0,S=t.length;N<S;N++)v[N]=r(E?On(t[N]):t[N],N,void 0,d)}else if(typeof t=="number"){v=new Array(t);for(let P=0;P<t;P++)v[P]=r(P+1,P,void 0,d)}else if(as(t))if(t[Symbol.iterator])v=Array.from(t,(P,E)=>r(P,E,void 0,d));else{const P=Object.keys(t);v=new Array(P.length);for(let E=0,N=P.length;E<N;E++){const S=P[E];v[E]=r(t[S],S,E,d)}}else v=[];return v}function ah(t,r,e={},s,v){if(ka.ce||ka.parent&&jf(ka.parent)&&ka.parent.ce)return r!=="default"&&(e.name=r),us(),Fc(kn,null,[ys("slot",e,s)],64);let d=t[r];d&&d._c&&(d._d=!1),us();const C=d&&qy(d(e)),P=Fc(kn,{key:(e.key||C&&C.key||`_${r}`)+(!C&&s?"_fb":"")},C||[],C&&t._===1?64:-2);return P.scopeId&&(P.slotScopeIds=[P.scopeId+"-s"]),d&&d._c&&(d._d=!0),P}function qy(t){return t.some(r=>Oc(r)?!(r.type===Pa||r.type===kn&&!qy(r.children)):!0)?t:null}const tv=t=>t?ow(t)?hg(t):tv(t.parent):null,xc=qs(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>tv(t.parent),$root:t=>tv(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>og(t),$forceUpdate:t=>t.f||(t.f=()=>{ug(t.update)}),$nextTick:t=>t.n||(t.n=J0.bind(t.proxy)),$watch:t=>Om.bind(t)}),gp=(t,r)=>t!==zr&&!t.__isScriptSetup&&br(t,r),pm={get({_:t},r){if(r==="__v_skip")return!0;const{ctx:e,setupState:s,data:v,props:d,accessCache:C,type:P,appContext:E}=t;let N;if(r[0]!=="$"){const Z=C[r];if(Z!==void 0)switch(Z){case 1:return s[r];case 2:return v[r];case 4:return e[r];case 3:return d[r]}else{if(gp(s,r))return C[r]=1,s[r];if(v!==zr&&br(v,r))return C[r]=2,v[r];if((N=t.propsOptions[0])&&br(N,r))return C[r]=3,d[r];if(e!==zr&&br(e,r))return C[r]=4,e[r];rv&&(C[r]=0)}}const S=xc[r];let B,L;if(S)return r==="$attrs"&&Dn(t.attrs,"get",""),S(t);if((B=P.__cssModules)&&(B=B[r]))return B;if(e!==zr&&br(e,r))return C[r]=4,e[r];if(L=E.config.globalProperties,br(L,r))return L[r]},set({_:t},r,e){const{data:s,setupState:v,ctx:d}=t;return gp(v,r)?(v[r]=e,!0):s!==zr&&br(s,r)?(s[r]=e,!0):br(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(d[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:s,appContext:v,propsOptions:d}},C){let P;return!!e[C]||t!==zr&&br(t,C)||gp(r,C)||(P=d[0])&&br(P,C)||br(s,C)||br(xc,C)||br(v.config.globalProperties,C)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:br(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};function Rg(t){return bt(t)?t.reduce((r,e)=>(r[e]=null,r),{}):t}let rv=!0;function vm(t){const r=og(t),e=t.proxy,s=t.ctx;rv=!1,r.beforeCreate&&jg(r.beforeCreate,t,"bc");const{data:v,computed:d,methods:C,watch:P,provide:E,inject:N,created:S,beforeMount:B,mounted:L,beforeUpdate:Z,updated:ge,activated:le,deactivated:pe,beforeDestroy:be,beforeUnmount:J,destroyed:K,unmounted:W,render:Q,renderTracked:re,renderTriggered:Y,errorCaptured:ie,serverPrefetch:ae,expose:Te,inheritAttrs:Ie,components:ke,directives:at,filters:vt}=r;if(N&&gm(N,s,null),C)for(const mt in C){const Ze=C[mt];Ft(Ze)&&(s[mt]=Ze.bind(e))}if(v){const mt=v.call(e,e);as(mt)&&(t.data=ng(mt))}if(rv=!0,d)for(const mt in d){const Ze=d[mt],$t=Ft(Ze)?Ze.bind(e,e):Ft(Ze.get)?Ze.get.bind(e,e):zu,Qt=!Ft(Ze)&&Ft(Ze.set)?Ze.set.bind(e):zu,Xt=t$({get:$t,set:Qt});Object.defineProperty(s,mt,{enumerable:!0,configurable:!0,get:()=>Xt.value,set:pt=>Xt.value=pt})}if(P)for(const mt in P)Vy(P[mt],s,e,mt);if(E){const mt=Ft(E)?E.call(e):E;Reflect.ownKeys(mt).forEach(Ze=>{xm(Ze,mt[Ze])})}S&&jg(S,t,"c");function At(mt,Ze){bt(Ze)?Ze.forEach($t=>mt($t.bind(e))):Ze&&mt(Ze.bind(e))}if(At(am,B),At(By,L),At(im,Z),At(lm,ge),At(rm,le),At(sm,pe),At(cm,ie),At(fm,re),At(om,Y),At(Ly,J),At(Hy,W),At(um,ae),bt(Te))if(Te.length){const mt=t.exposed||(t.exposed={});Te.forEach(Ze=>{Object.defineProperty(mt,Ze,{get:()=>e[Ze],set:$t=>e[Ze]=$t})})}else t.exposed||(t.exposed={});Q&&t.render===zu&&(t.render=Q),Ie!=null&&(t.inheritAttrs=Ie),ke&&(t.components=ke),at&&(t.directives=at),ae&&Dy(t)}function gm(t,r,e=zu){bt(t)&&(t=sv(t));for(const s in t){const v=t[s];let d;as(v)?"default"in v?d=ih(v.from||s,v.default,!0):d=ih(v.from||s):d=ih(v),jn(d)?Object.defineProperty(r,s,{enumerable:!0,configurable:!0,get:()=>d.value,set:C=>d.value=C}):r[s]=d}}function jg(t,r,e){Fu(bt(t)?t.map(s=>s.bind(r.proxy)):t.bind(r.proxy),r,e)}function Vy(t,r,e,s){let v=s.includes(".")?nw(e,s):()=>e[s];if(Ss(t)){const d=r[t];Ft(d)&&bc(v,d)}else if(Ft(t))bc(v,t.bind(e));else if(as(t))if(bt(t))t.forEach(d=>Vy(d,r,e,s));else{const d=Ft(t.handler)?t.handler.bind(e):r[t.handler];Ft(d)&&bc(v,d,t)}}function og(t){const r=t.type,{mixins:e,extends:s}=r,{mixins:v,optionsCache:d,config:{optionMergeStrategies:C}}=t.appContext,P=d.get(r);let E;return P?E=P:!v.length&&!e&&!s?E=r:(E={},v.length&&v.forEach(N=>Oh(E,N,C,!0)),Oh(E,r,C)),as(r)&&d.set(r,E),E}function Oh(t,r,e,s=!1){const{mixins:v,extends:d}=r;d&&Oh(t,d,e,!0),v&&v.forEach(C=>Oh(t,C,e,!0));for(const C in r)if(!(s&&C==="expose")){const P=dm[C]||e&&e[C];t[C]=P?P(t[C],r[C]):r[C]}return t}const dm={data:Dg,props:Ug,emits:Ug,methods:gc,computed:gc,beforeCreate:ma,created:ma,beforeMount:ma,mounted:ma,beforeUpdate:ma,updated:ma,beforeDestroy:ma,beforeUnmount:ma,destroyed:ma,unmounted:ma,activated:ma,deactivated:ma,errorCaptured:ma,serverPrefetch:ma,components:gc,directives:gc,watch:wm,provide:Dg,inject:ym};function Dg(t,r){return r?t?function(){return qs(Ft(t)?t.call(this,this):t,Ft(r)?r.call(this,this):r)}:r:t}function ym(t,r){return gc(sv(t),sv(r))}function sv(t){if(bt(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function ma(t,r){return t?[...new Set([].concat(t,r))]:r}function gc(t,r){return t?qs(Object.create(null),t,r):r}function Ug(t,r){return t?bt(t)&&bt(r)?[...new Set([...t,...r])]:qs(Object.create(null),Rg(t),Rg(r??{})):r}function wm(t,r){if(!t)return r;if(!r)return t;const e=qs(Object.create(null),t);for(const s in r)e[s]=ma(t[s],r[s]);return e}function zy(){return{app:null,config:{isNativeTag:s0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mm=0;function $m(t,r){return function(s,v=null){Ft(s)||(s=qs({},s)),v!=null&&!as(v)&&(v=null);const d=zy(),C=new WeakSet,P=[];let E=!1;const N=d.app={_uid:mm++,_component:s,_props:v,_container:null,_context:d,_instance:null,version:r$,get config(){return d.config},set config(S){},use(S,...B){return C.has(S)||(S&&Ft(S.install)?(C.add(S),S.install(N,...B)):Ft(S)&&(C.add(S),S(N,...B))),N},mixin(S){return d.mixins.includes(S)||d.mixins.push(S),N},component(S,B){return B?(d.components[S]=B,N):d.components[S]},directive(S,B){return B?(d.directives[S]=B,N):d.directives[S]},mount(S,B,L){if(!E){const Z=N._ceVNode||ys(s,v);return Z.appContext=d,L===!0?L="svg":L===!1&&(L=void 0),B&&r?r(Z,S):t(Z,S,L),E=!0,N._container=S,S.__vue_app__=N,hg(Z.component)}},onUnmount(S){P.push(S)},unmount(){E&&(Fu(P,N._instance,16),t(null,N._container),delete N._container.__vue_app__)},provide(S,B){return d.provides[S]=B,N},runWithContext(S){const B=Df;Df=N;try{return S()}finally{Df=B}}};return N}}let Df=null;function xm(t,r){if(In){let e=In.provides;const s=In.parent&&In.parent.provides;s===e&&(e=In.provides=Object.create(s)),e[t]=r}}function ih(t,r,e=!1){const s=In||ka;if(s||Df){const v=Df?Df._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(v&&t in v)return v[t];if(arguments.length>1)return e&&Ft(r)?r.call(s&&s.proxy):r}}const Ky={},Wy=()=>Object.create(Ky),Gy=t=>Object.getPrototypeOf(t)===Ky;function bm(t,r,e,s=!1){const v={},d=Wy();t.propsDefaults=Object.create(null),Jy(t,r,v,d);for(const C in t.propsOptions[0])C in v||(v[C]=void 0);e?t.props=s?v:U0(v):t.type.props?t.props=v:t.props=d,t.attrs=d}function Am(t,r,e,s){const{props:v,attrs:d,vnode:{patchFlag:C}}=t,P=mr(v),[E]=t.propsOptions;let N=!1;if((s||C>0)&&!(C&16)){if(C&8){const S=t.vnode.dynamicProps;for(let B=0;B<S.length;B++){let L=S[B];if(Xh(t.emitsOptions,L))continue;const Z=r[L];if(E)if(br(d,L))Z!==d[L]&&(d[L]=Z,N=!0);else{const ge=Po(L);v[ge]=nv(E,P,ge,Z,t,!1)}else Z!==d[L]&&(d[L]=Z,N=!0)}}}else{Jy(t,r,v,d)&&(N=!0);let S;for(const B in P)(!r||!br(r,B)&&((S=xf(B))===B||!br(r,S)))&&(E?e&&(e[B]!==void 0||e[S]!==void 0)&&(v[B]=nv(E,P,B,void 0,t,!0)):delete v[B]);if(d!==P)for(const B in d)(!r||!br(r,B))&&(delete d[B],N=!0)}N&&Yu(t.attrs,"set","")}function Jy(t,r,e,s){const[v,d]=t.propsOptions;let C=!1,P;if(r)for(let E in r){if(wc(E))continue;const N=r[E];let S;v&&br(v,S=Po(E))?!d||!d.includes(S)?e[S]=N:(P||(P={}))[S]=N:Xh(t.emitsOptions,E)||(!(E in s)||N!==s[E])&&(s[E]=N,C=!0)}if(d){const E=mr(e),N=P||zr;for(let S=0;S<d.length;S++){const B=d[S];e[B]=nv(v,E,B,N[B],t,!br(N,B))}}return C}function nv(t,r,e,s,v,d){const C=t[e];if(C!=null){const P=br(C,"default");if(P&&s===void 0){const E=C.default;if(C.type!==Function&&!C.skipFactory&&Ft(E)){const{propsDefaults:N}=v;if(e in N)s=N[e];else{const S=Dc(v);s=N[e]=E.call(null,r),S()}}else s=E;v.ce&&v.ce._setProp(e,s)}C[0]&&(d&&!P?s=!1:C[1]&&(s===""||s===xf(e))&&(s=!0))}return s}const Cm=new WeakMap;function Zy(t,r,e=!1){const s=e?Cm:r.propsCache,v=s.get(t);if(v)return v;const d=t.props,C={},P=[];let E=!1;if(!Ft(t)){const S=B=>{E=!0;const[L,Z]=Zy(B,r,!0);qs(C,L),Z&&P.push(...Z)};!e&&r.mixins.length&&r.mixins.forEach(S),t.extends&&S(t.extends),t.mixins&&t.mixins.forEach(S)}if(!d&&!E)return as(t)&&s.set(t,Ff),Ff;if(bt(d))for(let S=0;S<d.length;S++){const B=Po(d[S]);Bg(B)&&(C[B]=zr)}else if(d)for(const S in d){const B=Po(S);if(Bg(B)){const L=d[S],Z=C[B]=bt(L)||Ft(L)?{type:L}:qs({},L),ge=Z.type;let le=!1,pe=!0;if(bt(ge))for(let be=0;be<ge.length;++be){const J=ge[be],K=Ft(J)&&J.name;if(K==="Boolean"){le=!0;break}else K==="String"&&(pe=!1)}else le=Ft(ge)&&ge.name==="Boolean";Z[0]=le,Z[1]=pe,(le||br(Z,"default"))&&P.push(B)}}const N=[C,P];return as(t)&&s.set(t,N),N}function Bg(t){return t[0]!=="$"&&!wc(t)}const Qy=t=>t[0]==="_"||t==="$stable",fg=t=>bt(t)?t.map(Du):[Du(t)],_m=(t,r,e)=>{if(r._n)return r;const s=Ia((...v)=>fg(r(...v)),e);return s._c=!1,s},Xy=(t,r,e)=>{const s=t._ctx;for(const v in t){if(Qy(v))continue;const d=t[v];if(Ft(d))r[v]=_m(v,d,s);else if(d!=null){const C=fg(d);r[v]=()=>C}}},Yy=(t,r)=>{const e=fg(r);t.slots.default=()=>e},ew=(t,r,e)=>{for(const s in r)(e||s!=="_")&&(t[s]=r[s])},Pm=(t,r,e)=>{const s=t.slots=Wy();if(t.vnode.shapeFlag&32){const v=r._;v?(ew(s,r,e),e&&iy(s,"_",v,!0)):Xy(r,s)}else r&&Yy(t,r)},km=(t,r,e)=>{const{vnode:s,slots:v}=t;let d=!0,C=zr;if(s.shapeFlag&32){const P=r._;P?e&&P===1?d=!1:ew(v,r,e):(d=!r.$stable,Xy(r,v)),C=r}else r&&(Yy(t,r),C={default:1});if(d)for(const P in v)!Qy(P)&&C[P]==null&&delete v[P]},Ni=Lm;function Em(t){return Mm(t)}function Mm(t,r){const e=ly();e.__VUE__=!0;const{insert:s,remove:v,patchProp:d,createElement:C,createText:P,createComment:E,setText:N,setElementText:S,parentNode:B,nextSibling:L,setScopeId:Z=zu,insertStaticContent:ge}=t,le=(G,ee,fe,Ce=null,ve=null,Ae=null,Re=void 0,Me=null,Se=!!ee.dynamicChildren)=>{if(G===ee)return;G&&!Ho(G,ee)&&(Ce=_r(G),pt(G,ve,Ae,!0),G=null),ee.patchFlag===-2&&(Se=!1,ee.dynamicChildren=null);const{type:$e,ref:it,shapeFlag:qe}=ee;switch($e){case Yh:pe(G,ee,fe,Ce);break;case Pa:be(G,ee,fe,Ce);break;case wp:G==null&&J(ee,fe,Ce,Re);break;case kn:ke(G,ee,fe,Ce,ve,Ae,Re,Me,Se);break;default:qe&1?Q(G,ee,fe,Ce,ve,Ae,Re,Me,Se):qe&6?at(G,ee,fe,Ce,ve,Ae,Re,Me,Se):(qe&64||qe&128)&&$e.process(G,ee,fe,Ce,ve,Ae,Re,Me,Se,Zr)}it!=null&&ve&&ev(it,G&&G.ref,Ae,ee||G,!ee)},pe=(G,ee,fe,Ce)=>{if(G==null)s(ee.el=P(ee.children),fe,Ce);else{const ve=ee.el=G.el;ee.children!==G.children&&N(ve,ee.children)}},be=(G,ee,fe,Ce)=>{G==null?s(ee.el=E(ee.children||""),fe,Ce):ee.el=G.el},J=(G,ee,fe,Ce)=>{[G.el,G.anchor]=ge(G.children,ee,fe,Ce,G.el,G.anchor)},K=({el:G,anchor:ee},fe,Ce)=>{let ve;for(;G&&G!==ee;)ve=L(G),s(G,fe,Ce),G=ve;s(ee,fe,Ce)},W=({el:G,anchor:ee})=>{let fe;for(;G&&G!==ee;)fe=L(G),v(G),G=fe;v(ee)},Q=(G,ee,fe,Ce,ve,Ae,Re,Me,Se)=>{ee.type==="svg"?Re="svg":ee.type==="math"&&(Re="mathml"),G==null?re(ee,fe,Ce,ve,Ae,Re,Me,Se):ae(G,ee,ve,Ae,Re,Me,Se)},re=(G,ee,fe,Ce,ve,Ae,Re,Me)=>{let Se,$e;const{props:it,shapeFlag:qe,transition:Ye,dirs:Qe}=G;if(Se=G.el=C(G.type,Ae,it&&it.is,it),qe&8?S(Se,G.children):qe&16&&ie(G.children,Se,null,Ce,ve,dp(G,Ae),Re,Me),Qe&&Ro(G,null,Ce,"created"),Y(Se,G,G.scopeId,Re,Ce),it){for(const Pt in it)Pt!=="value"&&!wc(Pt)&&d(Se,Pt,null,it[Pt],Ae,Ce);"value"in it&&d(Se,"value",null,it.value,Ae),($e=it.onVnodeBeforeMount)&&Ou($e,Ce,G)}Qe&&Ro(G,null,Ce,"beforeMount");const ot=Sm(ve,Ye);ot&&Ye.beforeEnter(Se),s(Se,ee,fe),(($e=it&&it.onVnodeMounted)||ot||Qe)&&Ni(()=>{$e&&Ou($e,Ce,G),ot&&Ye.enter(Se),Qe&&Ro(G,null,Ce,"mounted")},ve)},Y=(G,ee,fe,Ce,ve)=>{if(fe&&Z(G,fe),Ce)for(let Ae=0;Ae<Ce.length;Ae++)Z(G,Ce[Ae]);if(ve){let Ae=ve.subTree;if(ee===Ae||iw(Ae.type)&&(Ae.ssContent===ee||Ae.ssFallback===ee)){const Re=ve.vnode;Y(G,Re,Re.scopeId,Re.slotScopeIds,ve.parent)}}},ie=(G,ee,fe,Ce,ve,Ae,Re,Me,Se=0)=>{for(let $e=Se;$e<G.length;$e++){const it=G[$e]=Me?wo(G[$e]):Du(G[$e]);le(null,it,ee,fe,Ce,ve,Ae,Re,Me)}},ae=(G,ee,fe,Ce,ve,Ae,Re)=>{const Me=ee.el=G.el;let{patchFlag:Se,dynamicChildren:$e,dirs:it}=ee;Se|=G.patchFlag&16;const qe=G.props||zr,Ye=ee.props||zr;let Qe;if(fe&&jo(fe,!1),(Qe=Ye.onVnodeBeforeUpdate)&&Ou(Qe,fe,ee,G),it&&Ro(ee,G,fe,"beforeUpdate"),fe&&jo(fe,!0),(qe.innerHTML&&Ye.innerHTML==null||qe.textContent&&Ye.textContent==null)&&S(Me,""),$e?Te(G.dynamicChildren,$e,Me,fe,Ce,dp(ee,ve),Ae):Re||Ze(G,ee,Me,null,fe,Ce,dp(ee,ve),Ae,!1),Se>0){if(Se&16)Ie(Me,qe,Ye,fe,ve);else if(Se&2&&qe.class!==Ye.class&&d(Me,"class",null,Ye.class,ve),Se&4&&d(Me,"style",qe.style,Ye.style,ve),Se&8){const ot=ee.dynamicProps;for(let Pt=0;Pt<ot.length;Pt++){const xt=ot[Pt],Ut=qe[xt],yt=Ye[xt];(yt!==Ut||xt==="value")&&d(Me,xt,Ut,yt,ve,fe)}}Se&1&&G.children!==ee.children&&S(Me,ee.children)}else!Re&&$e==null&&Ie(Me,qe,Ye,fe,ve);((Qe=Ye.onVnodeUpdated)||it)&&Ni(()=>{Qe&&Ou(Qe,fe,ee,G),it&&Ro(ee,G,fe,"updated")},Ce)},Te=(G,ee,fe,Ce,ve,Ae,Re)=>{for(let Me=0;Me<ee.length;Me++){const Se=G[Me],$e=ee[Me],it=Se.el&&(Se.type===kn||!Ho(Se,$e)||Se.shapeFlag&70)?B(Se.el):fe;le(Se,$e,it,null,Ce,ve,Ae,Re,!0)}},Ie=(G,ee,fe,Ce,ve)=>{if(ee!==fe){if(ee!==zr)for(const Ae in ee)!wc(Ae)&&!(Ae in fe)&&d(G,Ae,ee[Ae],null,ve,Ce);for(const Ae in fe){if(wc(Ae))continue;const Re=fe[Ae],Me=ee[Ae];Re!==Me&&Ae!=="value"&&d(G,Ae,Me,Re,ve,Ce)}"value"in fe&&d(G,"value",ee.value,fe.value,ve)}},ke=(G,ee,fe,Ce,ve,Ae,Re,Me,Se)=>{const $e=ee.el=G?G.el:P(""),it=ee.anchor=G?G.anchor:P("");let{patchFlag:qe,dynamicChildren:Ye,slotScopeIds:Qe}=ee;Qe&&(Me=Me?Me.concat(Qe):Qe),G==null?(s($e,fe,Ce),s(it,fe,Ce),ie(ee.children||[],fe,it,ve,Ae,Re,Me,Se)):qe>0&&qe&64&&Ye&&G.dynamicChildren?(Te(G.dynamicChildren,Ye,fe,ve,Ae,Re,Me),(ee.key!=null||ve&&ee===ve.subTree)&&tw(G,ee,!0)):Ze(G,ee,fe,it,ve,Ae,Re,Me,Se)},at=(G,ee,fe,Ce,ve,Ae,Re,Me,Se)=>{ee.slotScopeIds=Me,G==null?ee.shapeFlag&512?ve.ctx.activate(ee,fe,Ce,Re,Se):vt(ee,fe,Ce,ve,Ae,Re,Se):sr(G,ee,Se)},vt=(G,ee,fe,Ce,ve,Ae,Re)=>{const Me=G.component=Gm(G,Ce,ve);if(Zh(G)&&(Me.ctx.renderer=Zr),Zm(Me,!1,Re),Me.asyncDep){if(ve&&ve.registerDep(Me,At,Re),!G.el){const Se=Me.subTree=ys(Pa);be(null,Se,ee,fe)}}else At(Me,G,ee,fe,ve,Ae,Re)},sr=(G,ee,fe)=>{const Ce=ee.component=G.component;if(Um(G,ee,fe))if(Ce.asyncDep&&!Ce.asyncResolved){mt(Ce,ee,fe);return}else Ce.next=ee,Ce.update();else ee.el=G.el,Ce.vnode=ee},At=(G,ee,fe,Ce,ve,Ae,Re)=>{const Me=()=>{if(G.isMounted){let{next:qe,bu:Ye,u:Qe,parent:ot,vnode:Pt}=G;{const vr=rw(G);if(vr){qe&&(qe.el=Pt.el,mt(G,qe,Re)),vr.asyncDep.then(()=>{G.isUnmounted||Me()});return}}let xt=qe,Ut;jo(G,!1),qe?(qe.el=Pt.el,mt(G,qe,Re)):qe=Pt,Ye&&op(Ye),(Ut=qe.props&&qe.props.onVnodeBeforeUpdate)&&Ou(Ut,ot,qe,Pt),jo(G,!0);const yt=yp(G),lt=G.subTree;G.subTree=yt,le(lt,yt,B(lt.el),_r(lt),G,ve,Ae),qe.el=yt.el,xt===null&&Bm(G,yt.el),Qe&&Ni(Qe,ve),(Ut=qe.props&&qe.props.onVnodeUpdated)&&Ni(()=>Ou(Ut,ot,qe,Pt),ve)}else{let qe;const{el:Ye,props:Qe}=ee,{bm:ot,m:Pt,parent:xt,root:Ut,type:yt}=G,lt=jf(ee);if(jo(G,!1),ot&&op(ot),!lt&&(qe=Qe&&Qe.onVnodeBeforeMount)&&Ou(qe,xt,ee),jo(G,!0),Ye&&Pr){const vr=()=>{G.subTree=yp(G),Pr(Ye,G.subTree,G,ve,null)};lt&&yt.__asyncHydrate?yt.__asyncHydrate(Ye,G,vr):vr()}else{Ut.ce&&Ut.ce._injectChildStyle(yt);const vr=G.subTree=yp(G);le(null,vr,fe,Ce,G,ve,Ae),ee.el=vr.el}if(Pt&&Ni(Pt,ve),!lt&&(qe=Qe&&Qe.onVnodeMounted)){const vr=ee;Ni(()=>Ou(qe,xt,vr),ve)}(ee.shapeFlag&256||xt&&jf(xt.vnode)&&xt.vnode.shapeFlag&256)&&G.a&&Ni(G.a,ve),G.isMounted=!0,ee=fe=Ce=null}};G.scope.on();const Se=G.effect=new cy(Me);G.scope.off();const $e=G.update=Se.run.bind(Se),it=G.job=Se.runIfDirty.bind(Se);it.i=G,it.id=G.uid,Se.scheduler=()=>ug(it),jo(G,!0),$e()},mt=(G,ee,fe)=>{ee.component=G;const Ce=G.vnode.props;G.vnode=ee,G.next=null,Am(G,ee.props,Ce,fe),km(G,ee.children,fe),So(),Og(G),To()},Ze=(G,ee,fe,Ce,ve,Ae,Re,Me,Se=!1)=>{const $e=G&&G.children,it=G?G.shapeFlag:0,qe=ee.children,{patchFlag:Ye,shapeFlag:Qe}=ee;if(Ye>0){if(Ye&128){Qt($e,qe,fe,Ce,ve,Ae,Re,Me,Se);return}else if(Ye&256){$t($e,qe,fe,Ce,ve,Ae,Re,Me,Se);return}}Qe&8?(it&16&&ir($e,ve,Ae),qe!==$e&&S(fe,qe)):it&16?Qe&16?Qt($e,qe,fe,Ce,ve,Ae,Re,Me,Se):ir($e,ve,Ae,!0):(it&8&&S(fe,""),Qe&16&&ie(qe,fe,Ce,ve,Ae,Re,Me,Se))},$t=(G,ee,fe,Ce,ve,Ae,Re,Me,Se)=>{G=G||Ff,ee=ee||Ff;const $e=G.length,it=ee.length,qe=Math.min($e,it);let Ye;for(Ye=0;Ye<qe;Ye++){const Qe=ee[Ye]=Se?wo(ee[Ye]):Du(ee[Ye]);le(G[Ye],Qe,fe,null,ve,Ae,Re,Me,Se)}$e>it?ir(G,ve,Ae,!0,!1,qe):ie(ee,fe,Ce,ve,Ae,Re,Me,Se,qe)},Qt=(G,ee,fe,Ce,ve,Ae,Re,Me,Se)=>{let $e=0;const it=ee.length;let qe=G.length-1,Ye=it-1;for(;$e<=qe&&$e<=Ye;){const Qe=G[$e],ot=ee[$e]=Se?wo(ee[$e]):Du(ee[$e]);if(Ho(Qe,ot))le(Qe,ot,fe,null,ve,Ae,Re,Me,Se);else break;$e++}for(;$e<=qe&&$e<=Ye;){const Qe=G[qe],ot=ee[Ye]=Se?wo(ee[Ye]):Du(ee[Ye]);if(Ho(Qe,ot))le(Qe,ot,fe,null,ve,Ae,Re,Me,Se);else break;qe--,Ye--}if($e>qe){if($e<=Ye){const Qe=Ye+1,ot=Qe<it?ee[Qe].el:Ce;for(;$e<=Ye;)le(null,ee[$e]=Se?wo(ee[$e]):Du(ee[$e]),fe,ot,ve,Ae,Re,Me,Se),$e++}}else if($e>Ye)for(;$e<=qe;)pt(G[$e],ve,Ae,!0),$e++;else{const Qe=$e,ot=$e,Pt=new Map;for($e=ot;$e<=Ye;$e++){const Ct=ee[$e]=Se?wo(ee[$e]):Du(ee[$e]);Ct.key!=null&&Pt.set(Ct.key,$e)}let xt,Ut=0;const yt=Ye-ot+1;let lt=!1,vr=0;const cs=new Array(yt);for($e=0;$e<yt;$e++)cs[$e]=0;for($e=Qe;$e<=qe;$e++){const Ct=G[$e];if(Ut>=yt){pt(Ct,ve,Ae,!0);continue}let Rt;if(Ct.key!=null)Rt=Pt.get(Ct.key);else for(xt=ot;xt<=Ye;xt++)if(cs[xt-ot]===0&&Ho(Ct,ee[xt])){Rt=xt;break}Rt===void 0?pt(Ct,ve,Ae,!0):(cs[Rt-ot]=$e+1,Rt>=vr?vr=Rt:lt=!0,le(Ct,ee[Rt],fe,null,ve,Ae,Re,Me,Se),Ut++)}const is=lt?Tm(cs):Ff;for(xt=is.length-1,$e=yt-1;$e>=0;$e--){const Ct=ot+$e,Rt=ee[Ct],Mn=Ct+1<it?ee[Ct+1].el:Ce;cs[$e]===0?le(null,Rt,fe,Mn,ve,Ae,Re,Me,Se):lt&&(xt<0||$e!==is[xt]?Xt(Rt,fe,Mn,2):xt--)}}},Xt=(G,ee,fe,Ce,ve=null)=>{const{el:Ae,type:Re,transition:Me,children:Se,shapeFlag:$e}=G;if($e&6){Xt(G.component.subTree,ee,fe,Ce);return}if($e&128){G.suspense.move(ee,fe,Ce);return}if($e&64){Re.move(G,ee,fe,Zr);return}if(Re===kn){s(Ae,ee,fe);for(let qe=0;qe<Se.length;qe++)Xt(Se[qe],ee,fe,Ce);s(G.anchor,ee,fe);return}if(Re===wp){K(G,ee,fe);return}if(Ce!==2&&$e&1&&Me)if(Ce===0)Me.beforeEnter(Ae),s(Ae,ee,fe),Ni(()=>Me.enter(Ae),ve);else{const{leave:qe,delayLeave:Ye,afterLeave:Qe}=Me,ot=()=>s(Ae,ee,fe),Pt=()=>{qe(Ae,()=>{ot(),Qe&&Qe()})};Ye?Ye(Ae,ot,Pt):Pt()}else s(Ae,ee,fe)},pt=(G,ee,fe,Ce=!1,ve=!1)=>{const{type:Ae,props:Re,ref:Me,children:Se,dynamicChildren:$e,shapeFlag:it,patchFlag:qe,dirs:Ye,cacheIndex:Qe}=G;if(qe===-2&&(ve=!1),Me!=null&&ev(Me,null,fe,G,!0),Qe!=null&&(ee.renderCache[Qe]=void 0),it&256){ee.ctx.deactivate(G);return}const ot=it&1&&Ye,Pt=!jf(G);let xt;if(Pt&&(xt=Re&&Re.onVnodeBeforeUnmount)&&Ou(xt,ee,G),it&6)Mr(G.component,fe,Ce);else{if(it&128){G.suspense.unmount(fe,Ce);return}ot&&Ro(G,null,ee,"beforeUnmount"),it&64?G.type.remove(G,ee,fe,Zr,Ce):$e&&!$e.hasOnce&&(Ae!==kn||qe>0&&qe&64)?ir($e,ee,fe,!1,!0):(Ae===kn&&qe&384||!ve&&it&16)&&ir(Se,ee,fe),Ce&&Lr(G)}(Pt&&(xt=Re&&Re.onVnodeUnmounted)||ot)&&Ni(()=>{xt&&Ou(xt,ee,G),ot&&Ro(G,null,ee,"unmounted")},fe)},Lr=G=>{const{type:ee,el:fe,anchor:Ce,transition:ve}=G;if(ee===kn){Yt(fe,Ce);return}if(ee===wp){W(G);return}const Ae=()=>{v(fe),ve&&!ve.persisted&&ve.afterLeave&&ve.afterLeave()};if(G.shapeFlag&1&&ve&&!ve.persisted){const{leave:Re,delayLeave:Me}=ve,Se=()=>Re(fe,Ae);Me?Me(G.el,Ae,Se):Se()}else Ae()},Yt=(G,ee)=>{let fe;for(;G!==ee;)fe=L(G),v(G),G=fe;v(ee)},Mr=(G,ee,fe)=>{const{bum:Ce,scope:ve,job:Ae,subTree:Re,um:Me,m:Se,a:$e}=G;Lg(Se),Lg($e),Ce&&op(Ce),ve.stop(),Ae&&(Ae.flags|=8,pt(Re,G,ee,fe)),Me&&Ni(Me,ee),Ni(()=>{G.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},ir=(G,ee,fe,Ce=!1,ve=!1,Ae=0)=>{for(let Re=Ae;Re<G.length;Re++)pt(G[Re],ee,fe,Ce,ve)},_r=G=>{if(G.shapeFlag&6)return _r(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const ee=L(G.anchor||G.el),fe=ee&&ee[X0];return fe?L(fe):ee};let Jr=!1;const nr=(G,ee,fe)=>{G==null?ee._vnode&&pt(ee._vnode,null,null,!0):le(ee._vnode||null,G,ee,null,null,null,fe),ee._vnode=G,Jr||(Jr=!0,Og(),My(),Jr=!1)},Zr={p:le,um:pt,m:Xt,r:Lr,mt:vt,mc:ie,pc:Ze,pbc:Te,n:_r,o:t};let ar,Pr;return{render:nr,hydrate:ar,createApp:$m(nr,ar)}}function dp({type:t,props:r},e){return e==="svg"&&t==="foreignObject"||e==="mathml"&&t==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:e}function jo({effect:t,job:r},e){e?(t.flags|=32,r.flags|=4):(t.flags&=-33,r.flags&=-5)}function Sm(t,r){return(!t||t&&!t.pendingBranch)&&r&&!r.persisted}function tw(t,r,e=!1){const s=t.children,v=r.children;if(bt(s)&&bt(v))for(let d=0;d<s.length;d++){const C=s[d];let P=v[d];P.shapeFlag&1&&!P.dynamicChildren&&((P.patchFlag<=0||P.patchFlag===32)&&(P=v[d]=wo(v[d]),P.el=C.el),!e&&P.patchFlag!==-2&&tw(C,P)),P.type===Yh&&(P.el=C.el)}}function Tm(t){const r=t.slice(),e=[0];let s,v,d,C,P;const E=t.length;for(s=0;s<E;s++){const N=t[s];if(N!==0){if(v=e[e.length-1],t[v]<N){r[s]=v,e.push(s);continue}for(d=0,C=e.length-1;d<C;)P=d+C>>1,t[e[P]]<N?d=P+1:C=P;N<t[e[d]]&&(d>0&&(r[s]=e[d-1]),e[d]=s)}}for(d=e.length,C=e[d-1];d-- >0;)e[d]=C,C=r[C];return e}function rw(t){const r=t.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:rw(r)}function Lg(t){if(t)for(let r=0;r<t.length;r++)t[r].flags|=8}const Nm=Symbol.for("v-scx"),Fm=()=>ih(Nm);function bc(t,r,e){return sw(t,r,e)}function sw(t,r,e=zr){const{immediate:s,deep:v,flush:d,once:C}=e,P=qs({},e);let E;if(ep)if(d==="sync"){const L=Fm();E=L.__watcherHandles||(L.__watcherHandles=[])}else if(!r||s)P.once=!0;else{const L=()=>{};return L.stop=zu,L.resume=zu,L.pause=zu,L}const N=In;P.call=(L,Z,ge)=>Fu(L,N,Z,ge);let S=!1;d==="post"?P.scheduler=L=>{Ni(L,N&&N.suspense)}:d!=="sync"&&(S=!0,P.scheduler=(L,Z)=>{Z?L():ug(L)}),P.augmentJob=L=>{r&&(L.flags|=4),S&&(L.flags|=2,N&&(L.id=N.uid,L.i=N))};const B=W0(t,r,P);return E&&E.push(B),B}function Om(t,r,e){const s=this.proxy,v=Ss(t)?t.includes(".")?nw(s,t):()=>s[t]:t.bind(s,s);let d;Ft(r)?d=r:(d=r.handler,e=r);const C=Dc(this),P=sw(v,d.bind(s),e);return C(),P}function nw(t,r){const e=r.split(".");return()=>{let s=t;for(let v=0;v<e.length&&s;v++)s=s[e[v]];return s}}const Im=(t,r)=>r==="modelValue"||r==="model-value"?t.modelModifiers:t[`${r}Modifiers`]||t[`${Po(r)}Modifiers`]||t[`${xf(r)}Modifiers`];function Rm(t,r,...e){if(t.isUnmounted)return;const s=t.vnode.props||zr;let v=e;const d=r.startsWith("update:"),C=d&&Im(s,r.slice(7));C&&(C.trim&&(v=e.map(S=>Ss(S)?S.trim():S)),C.number&&(v=e.map(u0)));let P,E=s[P=up(r)]||s[P=up(Po(r))];!E&&d&&(E=s[P=up(xf(r))]),E&&Fu(E,t,6,v);const N=s[P+"Once"];if(N){if(!t.emitted)t.emitted={};else if(t.emitted[P])return;t.emitted[P]=!0,Fu(N,t,6,v)}}function aw(t,r,e=!1){const s=r.emitsCache,v=s.get(t);if(v!==void 0)return v;const d=t.emits;let C={},P=!1;if(!Ft(t)){const E=N=>{const S=aw(N,r,!0);S&&(P=!0,qs(C,S))};!e&&r.mixins.length&&r.mixins.forEach(E),t.extends&&E(t.extends),t.mixins&&t.mixins.forEach(E)}return!d&&!P?(as(t)&&s.set(t,null),null):(bt(d)?d.forEach(E=>C[E]=null):qs(C,d),as(t)&&s.set(t,C),C)}function Xh(t,r){return!t||!Vh(r)?!1:(r=r.slice(2).replace(/Once$/,""),br(t,r[0].toLowerCase()+r.slice(1))||br(t,xf(r))||br(t,r))}function yp(t){const{type:r,vnode:e,proxy:s,withProxy:v,propsOptions:[d],slots:C,attrs:P,emit:E,render:N,renderCache:S,props:B,data:L,setupState:Z,ctx:ge,inheritAttrs:le}=t,pe=Nh(t);let be,J;try{if(e.shapeFlag&4){const W=v||s,Q=W;be=Du(N.call(Q,W,S,B,Z,L,ge)),J=P}else{const W=r;be=Du(W.length>1?W(B,{attrs:P,slots:C,emit:E}):W(B,null)),J=r.props?P:jm(P)}}catch(W){Ac.length=0,Jh(W,t,1),be=ys(Pa)}let K=be;if(J&&le!==!1){const W=Object.keys(J),{shapeFlag:Q}=K;W.length&&Q&7&&(d&&W.some(Gv)&&(J=Dm(J,d)),K=Eo(K,J,!1,!0))}return e.dirs&&(K=Eo(K,null,!1,!0),K.dirs=K.dirs?K.dirs.concat(e.dirs):e.dirs),e.transition&&Tc(K,e.transition),be=K,Nh(pe),be}const jm=t=>{let r;for(const e in t)(e==="class"||e==="style"||Vh(e))&&((r||(r={}))[e]=t[e]);return r},Dm=(t,r)=>{const e={};for(const s in t)(!Gv(s)||!(s.slice(9)in r))&&(e[s]=t[s]);return e};function Um(t,r,e){const{props:s,children:v,component:d}=t,{props:C,children:P,patchFlag:E}=r,N=d.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&E>=0){if(E&1024)return!0;if(E&16)return s?Hg(s,C,N):!!C;if(E&8){const S=r.dynamicProps;for(let B=0;B<S.length;B++){const L=S[B];if(C[L]!==s[L]&&!Xh(N,L))return!0}}}else return(v||P)&&(!P||!P.$stable)?!0:s===C?!1:s?C?Hg(s,C,N):!0:!!C;return!1}function Hg(t,r,e){const s=Object.keys(r);if(s.length!==Object.keys(t).length)return!0;for(let v=0;v<s.length;v++){const d=s[v];if(r[d]!==t[d]&&!Xh(e,d))return!0}return!1}function Bm({vnode:t,parent:r},e){for(;r;){const s=r.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=r.vnode).el=e,r=r.parent;else break}}const iw=t=>t.__isSuspense;function Lm(t,r){r&&r.pendingBranch?bt(t)?r.effects.push(...t):r.effects.push(t):Q0(t)}const kn=Symbol.for("v-fgt"),Yh=Symbol.for("v-txt"),Pa=Symbol.for("v-cmt"),wp=Symbol.for("v-stc"),Ac=[];let Hi=null;function us(t=!1){Ac.push(Hi=t?null:[])}function Hm(){Ac.pop(),Hi=Ac[Ac.length-1]||null}let Nc=1;function qg(t){Nc+=t,t<0&&Hi&&(Hi.hasOnce=!0)}function lw(t){return t.dynamicChildren=Nc>0?Hi||Ff:null,Hm(),Nc>0&&Hi&&Hi.push(t),t}function Hs(t,r,e,s,v,d){return lw(Xi(t,r,e,s,v,d,!0))}function Fc(t,r,e,s,v){return lw(ys(t,r,e,s,v,!0))}function Oc(t){return t?t.__v_isVNode===!0:!1}function Ho(t,r){return t.type===r.type&&t.key===r.key}const uw=({key:t})=>t??null,lh=({ref:t,ref_key:r,ref_for:e})=>(typeof t=="number"&&(t=""+t),t!=null?Ss(t)||jn(t)||Ft(t)?{i:ka,r:t,k:r,f:!!e}:t:null);function Xi(t,r=null,e=null,s=0,v=null,d=t===kn?0:1,C=!1,P=!1){const E={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&uw(r),ref:r&&lh(r),scopeId:Ty,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:d,patchFlag:s,dynamicProps:v,dynamicChildren:null,appContext:null,ctx:ka};return P?(cg(E,e),d&128&&t.normalize(E)):e&&(E.shapeFlag|=Ss(e)?8:16),Nc>0&&!C&&Hi&&(E.patchFlag>0||d&6)&&E.patchFlag!==32&&Hi.push(E),E}const ys=qm;function qm(t,r=null,e=null,s=0,v=null,d=!1){if((!t||t===hm)&&(t=Pa),Oc(t)){const P=Eo(t,r,!0);return e&&cg(P,e),Nc>0&&!d&&Hi&&(P.shapeFlag&6?Hi[Hi.indexOf(t)]=P:Hi.push(P)),P.patchFlag=-2,P}if(e$(t)&&(t=t.__vccOpts),r){r=Vm(r);let{class:P,style:E}=r;P&&!Ss(P)&&(r.class=Rn(P)),as(E)&&(ig(E)&&!bt(E)&&(E=qs({},E)),r.style=Qv(E))}const C=Ss(t)?1:iw(t)?128:Ny(t)?64:as(t)?4:Ft(t)?2:0;return Xi(t,r,e,s,v,C,d,!0)}function Vm(t){return t?ig(t)||Gy(t)?qs({},t):t:null}function Eo(t,r,e=!1,s=!1){const{props:v,ref:d,patchFlag:C,children:P,transition:E}=t,N=r?zm(v||{},r):v,S={__v_isVNode:!0,__v_skip:!0,type:t.type,props:N,key:N&&uw(N),ref:r&&r.ref?e&&d?bt(d)?d.concat(lh(r)):[d,lh(r)]:lh(r):d,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:P,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==kn?C===-1?16:C|16:C,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:E,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Eo(t.ssContent),ssFallback:t.ssFallback&&Eo(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return E&&s&&Tc(S,E.clone(S)),S}function Tu(t=" ",r=0){return ys(Yh,null,t,r)}function nc(t="",r=!1){return r?(us(),Fc(Pa,null,t)):ys(Pa,null,t)}function Du(t){return t==null||typeof t=="boolean"?ys(Pa):bt(t)?ys(kn,null,t.slice()):Oc(t)?wo(t):ys(Yh,null,String(t))}function wo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Eo(t)}function cg(t,r){let e=0;const{shapeFlag:s}=t;if(r==null)r=null;else if(bt(r))e=16;else if(typeof r=="object")if(s&65){const v=r.default;v&&(v._c&&(v._d=!1),cg(t,v()),v._c&&(v._d=!0));return}else{e=32;const v=r._;!v&&!Gy(r)?r._ctx=ka:v===3&&ka&&(ka.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else Ft(r)?(r={default:r,_ctx:ka},e=32):(r=String(r),s&64?(e=16,r=[Tu(r)]):e=8);t.children=r,t.shapeFlag|=e}function zm(...t){const r={};for(let e=0;e<t.length;e++){const s=t[e];for(const v in s)if(v==="class")r.class!==s.class&&(r.class=Rn([r.class,s.class]));else if(v==="style")r.style=Qv([r.style,s.style]);else if(Vh(v)){const d=r[v],C=s[v];C&&d!==C&&!(bt(d)&&d.includes(C))&&(r[v]=d?[].concat(d,C):C)}else v!==""&&(r[v]=s[v])}return r}function Ou(t,r,e,s=null){Fu(t,r,7,[e,s])}const Km=zy();let Wm=0;function Gm(t,r,e){const s=t.type,v=(r?r.appContext:t.appContext)||Km,d={uid:Wm++,vnode:t,type:s,parent:r,appContext:v,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new d0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(v.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zy(s,v),emitsOptions:aw(s,v),emit:null,emitted:null,propsDefaults:zr,inheritAttrs:s.inheritAttrs,ctx:zr,data:zr,props:zr,attrs:zr,slots:zr,refs:zr,setupState:zr,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return d.ctx={_:d},d.root=r?r.root:d,d.emit=Rm.bind(null,d),t.ce&&t.ce(d),d}let In=null;const Jm=()=>In||ka;let Ih,av;{const t=ly(),r=(e,s)=>{let v;return(v=t[e])||(v=t[e]=[]),v.push(s),d=>{v.length>1?v.forEach(C=>C(d)):v[0](d)}};Ih=r("__VUE_INSTANCE_SETTERS__",e=>In=e),av=r("__VUE_SSR_SETTERS__",e=>ep=e)}const Dc=t=>{const r=In;return Ih(t),t.scope.on(),()=>{t.scope.off(),Ih(r)}},Vg=()=>{In&&In.scope.off(),Ih(null)};function ow(t){return t.vnode.shapeFlag&4}let ep=!1;function Zm(t,r=!1,e=!1){r&&av(r);const{props:s,children:v}=t.vnode,d=ow(t);bm(t,s,d,r),Pm(t,v,e);const C=d?Qm(t,r):void 0;return r&&av(!1),C}function Qm(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,pm);const{setup:s}=e;if(s){const v=t.setupContext=s.length>1?Ym(t):null,d=Dc(t);So();const C=Rc(s,t,0,[t.props,v]);if(To(),d(),ry(C)){if(jf(t)||Dy(t),C.then(Vg,Vg),r)return C.then(P=>{zg(t,P,r)}).catch(P=>{Jh(P,t,0)});t.asyncDep=C}else zg(t,C,r)}else fw(t,r)}function zg(t,r,e){Ft(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:as(r)&&(t.setupState=Py(r)),fw(t,e)}let Kg;function fw(t,r,e){const s=t.type;if(!t.render){if(!r&&Kg&&!s.render){const v=s.template||og(t).template;if(v){const{isCustomElement:d,compilerOptions:C}=t.appContext.config,{delimiters:P,compilerOptions:E}=s,N=qs(qs({isCustomElement:d,delimiters:P},C),E);s.render=Kg(v,N)}}t.render=s.render||zu}{const v=Dc(t);So();try{vm(t)}finally{To(),v()}}}const Xm={get(t,r){return Dn(t,"get",""),t[r]}};function Ym(t){const r=e=>{t.exposed=e||{}};return{attrs:new Proxy(t.attrs,Xm),slots:t.slots,emit:t.emit,expose:r}}function hg(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Py(B0(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in xc)return xc[e](t)},has(r,e){return e in r||e in xc}})):t.proxy}function e$(t){return Ft(t)&&"__vccOpts"in t}const t$=(t,r)=>z0(t,r,ep);function co(t,r,e){const s=arguments.length;return s===2?as(r)&&!bt(r)?Oc(r)?ys(t,null,[r]):ys(t,r):ys(t,null,r):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Oc(e)&&(e=[e]),ys(t,r,e))}const r$="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let iv;const Wg=typeof window<"u"&&window.trustedTypes;if(Wg)try{iv=Wg.createPolicy("vue",{createHTML:t=>t})}catch{}const cw=iv?t=>iv.createHTML(t):t=>t,s$="http://www.w3.org/2000/svg",n$="http://www.w3.org/1998/Math/MathML",Xu=typeof document<"u"?document:null,Gg=Xu&&Xu.createElement("template"),a$={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,s)=>{const v=r==="svg"?Xu.createElementNS(s$,t):r==="mathml"?Xu.createElementNS(n$,t):e?Xu.createElement(t,{is:e}):Xu.createElement(t);return t==="select"&&s&&s.multiple!=null&&v.setAttribute("multiple",s.multiple),v},createText:t=>Xu.createTextNode(t),createComment:t=>Xu.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xu.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,s,v,d){const C=e?e.previousSibling:r.lastChild;if(v&&(v===d||v.nextSibling))for(;r.insertBefore(v.cloneNode(!0),e),!(v===d||!(v=v.nextSibling)););else{Gg.innerHTML=cw(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const P=Gg.content;if(s==="svg"||s==="mathml"){const E=P.firstChild;for(;E.firstChild;)P.appendChild(E.firstChild);P.removeChild(E)}r.insertBefore(P,e)}return[C?C.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}},uo="transition",lc="animation",Ic=Symbol("_vtc"),hw={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},i$=qs({},Fy,hw),l$=t=>(t.displayName="Transition",t.props=i$,t),u$=l$((t,{slots:r})=>co(tm,o$(t),r)),Do=(t,r=[])=>{bt(t)?t.forEach(e=>e(...r)):t&&t(...r)},Jg=t=>t?bt(t)?t.some(r=>r.length>1):t.length>1:!1;function o$(t){const r={};for(const ke in t)ke in hw||(r[ke]=t[ke]);if(t.css===!1)return r;const{name:e="v",type:s,duration:v,enterFromClass:d=`${e}-enter-from`,enterActiveClass:C=`${e}-enter-active`,enterToClass:P=`${e}-enter-to`,appearFromClass:E=d,appearActiveClass:N=C,appearToClass:S=P,leaveFromClass:B=`${e}-leave-from`,leaveActiveClass:L=`${e}-leave-active`,leaveToClass:Z=`${e}-leave-to`}=t,ge=f$(v),le=ge&&ge[0],pe=ge&&ge[1],{onBeforeEnter:be,onEnter:J,onEnterCancelled:K,onLeave:W,onLeaveCancelled:Q,onBeforeAppear:re=be,onAppear:Y=J,onAppearCancelled:ie=K}=r,ae=(ke,at,vt)=>{Uo(ke,at?S:P),Uo(ke,at?N:C),vt&&vt()},Te=(ke,at)=>{ke._isLeaving=!1,Uo(ke,B),Uo(ke,Z),Uo(ke,L),at&&at()},Ie=ke=>(at,vt)=>{const sr=ke?Y:J,At=()=>ae(at,ke,vt);Do(sr,[at,At]),Zg(()=>{Uo(at,ke?E:d),oo(at,ke?S:P),Jg(sr)||Qg(at,s,le,At)})};return qs(r,{onBeforeEnter(ke){Do(be,[ke]),oo(ke,d),oo(ke,C)},onBeforeAppear(ke){Do(re,[ke]),oo(ke,E),oo(ke,N)},onEnter:Ie(!1),onAppear:Ie(!0),onLeave(ke,at){ke._isLeaving=!0;const vt=()=>Te(ke,at);oo(ke,B),oo(ke,L),p$(),Zg(()=>{ke._isLeaving&&(Uo(ke,B),oo(ke,Z),Jg(W)||Qg(ke,s,pe,vt))}),Do(W,[ke,vt])},onEnterCancelled(ke){ae(ke,!1),Do(K,[ke])},onAppearCancelled(ke){ae(ke,!0),Do(ie,[ke])},onLeaveCancelled(ke){Te(ke),Do(Q,[ke])}})}function f$(t){if(t==null)return null;if(as(t))return[mp(t.enter),mp(t.leave)];{const r=mp(t);return[r,r]}}function mp(t){return o0(t)}function oo(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t[Ic]||(t[Ic]=new Set)).add(r)}function Uo(t,r){r.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const e=t[Ic];e&&(e.delete(r),e.size||(t[Ic]=void 0))}function Zg(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let c$=0;function Qg(t,r,e,s){const v=t._endId=++c$,d=()=>{v===t._endId&&s()};if(e!=null)return setTimeout(d,e);const{type:C,timeout:P,propCount:E}=h$(t,r);if(!C)return s();const N=C+"end";let S=0;const B=()=>{t.removeEventListener(N,L),d()},L=Z=>{Z.target===t&&++S>=E&&B()};setTimeout(()=>{S<E&&B()},P+1),t.addEventListener(N,L)}function h$(t,r){const e=window.getComputedStyle(t),s=ge=>(e[ge]||"").split(", "),v=s(`${uo}Delay`),d=s(`${uo}Duration`),C=Xg(v,d),P=s(`${lc}Delay`),E=s(`${lc}Duration`),N=Xg(P,E);let S=null,B=0,L=0;r===uo?C>0&&(S=uo,B=C,L=d.length):r===lc?N>0&&(S=lc,B=N,L=E.length):(B=Math.max(C,N),S=B>0?C>N?uo:lc:null,L=S?S===uo?d.length:E.length:0);const Z=S===uo&&/\b(transform|all)(,|$)/.test(s(`${uo}Property`).toString());return{type:S,timeout:B,propCount:L,hasTransform:Z}}function Xg(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,s)=>Yg(e)+Yg(t[s])))}function Yg(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function p$(){return document.body.offsetHeight}function v$(t,r,e){const s=t[Ic];s&&(r=(r?[r,...s]:[...s]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}const ed=Symbol("_vod"),g$=Symbol("_vsh"),d$=Symbol(""),y$=/(^|;)\s*display\s*:/;function w$(t,r,e){const s=t.style,v=Ss(e);let d=!1;if(e&&!v){if(r)if(Ss(r))for(const C of r.split(";")){const P=C.slice(0,C.indexOf(":")).trim();e[P]==null&&uh(s,P,"")}else for(const C in r)e[C]==null&&uh(s,C,"");for(const C in e)C==="display"&&(d=!0),uh(s,C,e[C])}else if(v){if(r!==e){const C=s[d$];C&&(e+=";"+C),s.cssText=e,d=y$.test(e)}}else r&&t.removeAttribute("style");ed in t&&(t[ed]=d?s.display:"",t[g$]&&(s.display="none"))}const td=/\s*!important$/;function uh(t,r,e){if(bt(e))e.forEach(s=>uh(t,r,s));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const s=m$(t,r);td.test(e)?t.setProperty(xf(s),e.replace(td,""),"important"):t[s]=e}}const rd=["Webkit","Moz","ms"],$p={};function m$(t,r){const e=$p[r];if(e)return e;let s=Po(r);if(s!=="filter"&&s in t)return $p[r]=s;s=ay(s);for(let v=0;v<rd.length;v++){const d=rd[v]+s;if(d in t)return $p[r]=d}return r}const sd="http://www.w3.org/1999/xlink";function nd(t,r,e,s,v,d=g0(r)){s&&r.startsWith("xlink:")?e==null?t.removeAttributeNS(sd,r.slice(6,r.length)):t.setAttributeNS(sd,r,e):e==null||d&&!uy(e)?t.removeAttribute(r):t.setAttribute(r,d?"":Mo(e)?String(e):e)}function ad(t,r,e,s){if(r==="innerHTML"||r==="textContent"){e!=null&&(t[r]=r==="innerHTML"?cw(e):e);return}const v=t.tagName;if(r==="value"&&v!=="PROGRESS"&&!v.includes("-")){const C=v==="OPTION"?t.getAttribute("value")||"":t.value,P=e==null?t.type==="checkbox"?"on":"":String(e);(C!==P||!("_value"in t))&&(t.value=P),e==null&&t.removeAttribute(r),t._value=e;return}let d=!1;if(e===""||e==null){const C=typeof t[r];C==="boolean"?e=uy(e):e==null&&C==="string"?(e="",d=!0):C==="number"&&(e=0,d=!0)}try{t[r]=e}catch{}d&&t.removeAttribute(r)}function $$(t,r,e,s){t.addEventListener(r,e,s)}function x$(t,r,e,s){t.removeEventListener(r,e,s)}const id=Symbol("_vei");function b$(t,r,e,s,v=null){const d=t[id]||(t[id]={}),C=d[r];if(s&&C)C.value=s;else{const[P,E]=A$(r);if(s){const N=d[r]=P$(s,v);$$(t,P,N,E)}else C&&(x$(t,P,C,E),d[r]=void 0)}}const ld=/(?:Once|Passive|Capture)$/;function A$(t){let r;if(ld.test(t)){r={};let s;for(;s=t.match(ld);)t=t.slice(0,t.length-s[0].length),r[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):xf(t.slice(2)),r]}let xp=0;const C$=Promise.resolve(),_$=()=>xp||(C$.then(()=>xp=0),xp=Date.now());function P$(t,r){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Fu(k$(s,e.value),r,5,[s])};return e.value=t,e.attached=_$(),e}function k$(t,r){if(bt(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(s=>v=>!v._stopped&&s&&s(v))}else return r}const ud=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,E$=(t,r,e,s,v,d)=>{const C=v==="svg";r==="class"?v$(t,s,C):r==="style"?w$(t,e,s):Vh(r)?Gv(r)||b$(t,r,e,s,d):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):M$(t,r,s,C))?(ad(t,r,s),!t.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&nd(t,r,s,C,d,r!=="value")):t._isVueCE&&(/[A-Z]/.test(r)||!Ss(s))?ad(t,Po(r),s):(r==="true-value"?t._trueValue=s:r==="false-value"&&(t._falseValue=s),nd(t,r,s,C))};function M$(t,r,e,s){if(s)return!!(r==="innerHTML"||r==="textContent"||r in t&&ud(r)&&Ft(e));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const v=t.tagName;if(v==="IMG"||v==="VIDEO"||v==="CANVAS"||v==="SOURCE")return!1}return ud(r)&&Ss(e)?!1:r in t}const S$=qs({patchProp:E$},a$);let od;function T$(){return od||(od=Em(S$))}const N$=(...t)=>{const r=T$().createApp(...t),{mount:e}=r;return r.mount=s=>{const v=O$(s);if(!v)return;const d=r._component;!Ft(d)&&!d.render&&!d.template&&(d.template=v.innerHTML),v.nodeType===1&&(v.textContent="");const C=e(v,!1,F$(v));return v instanceof Element&&(v.removeAttribute("v-cloak"),v.setAttribute("data-v-app","")),C},r};function F$(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function O$(t){return Ss(t)?document.querySelector(t):t}function Cc(){return Cc=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Cc.apply(this,arguments)}var I$=13,R$=9,j$=8,D$=89,Gc=90,U$=77,fd=57,cd=219,hd=222,pd=192,B$=27,vd=100,L$=3e3,H$=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),bp=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),q$=jc({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(r){r?this.codeData=r:this.codeData=""}},content:{immediate:!0,handler:function(){var r=this;this.lineNumbers&&this.$nextTick(function(){r.setLineNumbersHeight()})}},lineNumbers:function(){var r=this;this.$nextTick(function(){r.styleLineNumbers(),r.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var r=this.highlight(this.codeData)+"<br />";return r},lineNumbersCount:function(){var r=this.codeData.split(/\r\n|\n/).length;return r}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var r=this.$refs.pre,e=this.$el.querySelector(".prism-editor__line-numbers"),s=window.getComputedStyle(r);this.$nextTick(function(){var v="border-top-left-radius",d="border-bottom-left-radius";if(e){e.style[v]=s[v],e.style[d]=s[d],r.style[v]="0",r.style[d]="0";var C=["background-color","margin-top","padding-top","font-family","font-size","line-height"];C.forEach(function(P){e.style[P]=s[P]}),e.style["margin-bottom"]="-"+s["padding-top"]}})}},_recordCurrentState:function(){var r=this.$refs.textarea;if(r){var e=r.value,s=r.selectionStart,v=r.selectionEnd;this._recordChange({value:e,selectionStart:s,selectionEnd:v})}},_getLines:function(r,e){return r.substring(0,e).split(`
`)},_applyEdits:function(r){var e=this.$refs.textarea,s=this.history.stack[this.history.offset];s&&e&&(this.history.stack[this.history.offset]=Cc({},s,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),this._recordChange(r),this._updateInput(r)},_recordChange:function(r,e){e===void 0&&(e=!1);var s=this.history,v=s.stack,d=s.offset;if(v.length&&d>-1){this.history.stack=v.slice(0,d+1);var C=this.history.stack.length;if(C>vd){var P=C-vd;this.history.stack=v.slice(P,C),this.history.offset=Math.max(this.history.offset-P,0)}}var E=Date.now();if(e){var N=this.history.stack[this.history.offset];if(N&&E-N.timestamp<L$){var S,B,L=/[^a-z0-9]([a-z0-9]+)$/i,Z=(S=this._getLines(N.value,N.selectionStart).pop())===null||S===void 0?void 0:S.match(L),ge=(B=this._getLines(r.value,r.selectionStart).pop())===null||B===void 0?void 0:B.match(L);if(Z&&ge&&ge[1].startsWith(Z[1])){this.history.stack[this.history.offset]=Cc({},r,{timestamp:E});return}}}this.history.stack.push(Cc({},r,{timestamp:E})),this.history.offset++},_updateInput:function(r){var e=this.$refs.textarea;e&&(e.value=r.value,e.selectionStart=r.selectionStart,e.selectionEnd=r.selectionEnd,this.$emit("update:modelValue",r.value))},handleChange:function(r){var e=r.target,s=e.value,v=e.selectionStart,d=e.selectionEnd;this._recordChange({value:s,selectionStart:v,selectionEnd:d},!0),this.$emit("update:modelValue",s)},_undoEdit:function(){var r=this.history,e=r.stack,s=r.offset,v=e[s-1];v&&(this._updateInput(v),this.history.offset=Math.max(s-1,0))},_redoEdit:function(){var r=this.history,e=r.stack,s=r.offset,v=e[s+1];v&&(this._updateInput(v),this.history.offset=Math.min(s+1,e.length-1))},handleKeyDown:function(r){var e=this.tabSize,s=this.insertSpaces,v=this.ignoreTabKey;if(this.$emit("keydown",r),!r.defaultPrevented){r.keyCode===B$&&(r.target.blur(),this.$emit("blur",r));var d=r.target,C=d.value,P=d.selectionStart,E=d.selectionEnd,N=(s?" ":"	").repeat(e);if(r.keyCode===R$&&!v&&this.capture)if(r.preventDefault(),r.shiftKey){var S=this._getLines(C,P),B=S.length-1,L=this._getLines(C,E).length-1,Z=C.split(`
`).map(function(ke,at){return at>=B&&at<=L&&ke.startsWith(N)?ke.substring(N.length):ke}).join(`
`);if(C!==Z){var ge=S[B];this._applyEdits({value:Z,selectionStart:ge.startsWith(N)?P-N.length:P,selectionEnd:E-(C.length-Z.length)})}}else if(P!==E){var le=this._getLines(C,P),pe=le.length-1,be=this._getLines(C,E).length-1,J=le[pe];this._applyEdits({value:C.split(`
`).map(function(ke,at){return at>=pe&&at<=be?N+ke:ke}).join(`
`),selectionStart:/\S/.test(J)?P+N.length:P,selectionEnd:E+N.length*(be-pe+1)})}else{var K=P+N.length;this._applyEdits({value:C.substring(0,P)+N+C.substring(E),selectionStart:K,selectionEnd:K})}else if(r.keyCode===j$){var W=P!==E,Q=C.substring(0,P);if(Q.endsWith(N)&&!W){r.preventDefault();var re=P-N.length;this._applyEdits({value:C.substring(0,P-N.length)+C.substring(E),selectionStart:re,selectionEnd:re})}}else if(r.keyCode===I$){if(P===E){var Y=this._getLines(C,P).pop(),ie=Y==null?void 0:Y.match(/^\s+/);if(ie&&ie[0]){r.preventDefault();var ae=`
`+ie[0],Te=P+ae.length;this._applyEdits({value:C.substring(0,P)+ae+C.substring(E),selectionStart:Te,selectionEnd:Te})}}}else if(r.keyCode===fd||r.keyCode===cd||r.keyCode===hd||r.keyCode===pd){var Ie;r.keyCode===fd&&r.shiftKey?Ie=["(",")"]:r.keyCode===cd?r.shiftKey?Ie=["{","}"]:Ie=["[","]"]:r.keyCode===hd?r.shiftKey?Ie=['"','"']:Ie=["'","'"]:r.keyCode===pd&&!r.shiftKey&&(Ie=["`","`"]),P!==E&&Ie&&(r.preventDefault(),this._applyEdits({value:C.substring(0,P)+Ie[0]+C.substring(P,E)+Ie[1]+C.substring(E),selectionStart:P,selectionEnd:E+2}))}else(bp?r.metaKey&&r.keyCode===Gc:r.ctrlKey&&r.keyCode===Gc)&&!r.shiftKey&&!r.altKey?(r.preventDefault(),this._undoEdit()):(bp?r.metaKey&&r.keyCode===Gc&&r.shiftKey:H$?r.ctrlKey&&r.keyCode===D$:r.ctrlKey&&r.keyCode===Gc&&r.shiftKey)&&!r.altKey?(r.preventDefault(),this._redoEdit()):r.keyCode===U$&&r.ctrlKey&&(!bp||r.shiftKey)&&(r.preventDefault(),this.capture=!this.capture)}}},render:function(){var r=this,e=co("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),s=co("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[e,Array.from(Array(this.lineNumbersCount).keys()).map(function(P,E){return co("div",{class:"prism-editor__line-number token comment"},""+ ++E)})]),v=co("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(E){r.$emit("click",E)},onKeyup:function(E){r.$emit("keyup",E)},onFocus:function(E){r.$emit("focus",E)},onBlur:function(E){r.$emit("blur",E)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),d=co("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),C=co("div",{class:"prism-editor__container"},[v,d]);return co("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&s,C])}}),qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function z$(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function s(){return this instanceof s?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var v=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,v.get?v:{enumerable:!0,get:function(){return t[s]}})}),e}var K$={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(s){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,C={},P={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function J(K){return K instanceof E?new E(K.type,J(K.content),K.alias):Array.isArray(K)?K.map(J):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(J){return Object.prototype.toString.call(J).slice(8,-1)},objId:function(J){return J.__id||Object.defineProperty(J,"__id",{value:++d}),J.__id},clone:function J(K,W){W=W||{};var Q,re;switch(P.util.type(K)){case"Object":if(re=P.util.objId(K),W[re])return W[re];Q={},W[re]=Q;for(var Y in K)K.hasOwnProperty(Y)&&(Q[Y]=J(K[Y],W));return Q;case"Array":return re=P.util.objId(K),W[re]?W[re]:(Q=[],W[re]=Q,K.forEach(function(ie,ae){Q[ae]=J(ie,W)}),Q);default:return K}},getLanguage:function(J){for(;J;){var K=v.exec(J.className);if(K)return K[1].toLowerCase();J=J.parentElement}return"none"},setLanguage:function(J,K){J.className=J.className.replace(RegExp(v,"gi"),""),J.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var J=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(J){var K=document.getElementsByTagName("script");for(var W in K)if(K[W].src==J)return K[W]}return null}},isActive:function(J,K,W){for(var Q="no-"+K;J;){var re=J.classList;if(re.contains(K))return!0;if(re.contains(Q))return!1;J=J.parentElement}return!!W}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(J,K){var W=P.util.clone(P.languages[J]);for(var Q in K)W[Q]=K[Q];return W},insertBefore:function(J,K,W,Q){Q=Q||P.languages;var re=Q[J],Y={};for(var ie in re)if(re.hasOwnProperty(ie)){if(ie==K)for(var ae in W)W.hasOwnProperty(ae)&&(Y[ae]=W[ae]);W.hasOwnProperty(ie)||(Y[ie]=re[ie])}var Te=Q[J];return Q[J]=Y,P.languages.DFS(P.languages,function(Ie,ke){ke===Te&&Ie!=J&&(this[Ie]=Y)}),Y},DFS:function J(K,W,Q,re){re=re||{};var Y=P.util.objId;for(var ie in K)if(K.hasOwnProperty(ie)){W.call(K,ie,K[ie],Q||ie);var ae=K[ie],Te=P.util.type(ae);Te==="Object"&&!re[Y(ae)]?(re[Y(ae)]=!0,J(ae,W,null,re)):Te==="Array"&&!re[Y(ae)]&&(re[Y(ae)]=!0,J(ae,W,ie,re))}}},plugins:{},highlightAll:function(J,K){P.highlightAllUnder(document,J,K)},highlightAllUnder:function(J,K,W){var Q={callback:W,container:J,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var re=0,Y;Y=Q.elements[re++];)P.highlightElement(Y,K===!0,Q.callback)},highlightElement:function(J,K,W){var Q=P.util.getLanguage(J),re=P.languages[Q];P.util.setLanguage(J,Q);var Y=J.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(Y,Q);var ie=J.textContent,ae={element:J,language:Q,grammar:re,code:ie};function Te(ke){ae.highlightedCode=ke,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),W&&W.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),Y=ae.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),W&&W.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Te(P.util.encode(ae.code));return}if(K&&s.Worker){var Ie=new Worker(P.filename);Ie.onmessage=function(ke){Te(ke.data)},Ie.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Te(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(J,K,W){var Q={code:J,grammar:K,language:W};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),E.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(J,K){var W=K.rest;if(W){for(var Q in W)K[Q]=W[Q];delete K.rest}var re=new B;return L(re,re.head,J),S(J,re,K,re.head,0),ge(re)},hooks:{all:{},add:function(J,K){var W=P.hooks.all;W[J]=W[J]||[],W[J].push(K)},run:function(J,K){var W=P.hooks.all[J];if(!(!W||!W.length))for(var Q=0,re;re=W[Q++];)re(K)}},Token:E};s.Prism=P;function E(J,K,W,Q){this.type=J,this.content=K,this.alias=W,this.length=(Q||"").length|0}E.stringify=function J(K,W){if(typeof K=="string")return K;if(Array.isArray(K)){var Q="";return K.forEach(function(Te){Q+=J(Te,W)}),Q}var re={type:K.type,content:J(K.content,W),tag:"span",classes:["token",K.type],attributes:{},language:W},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(re.classes,Y):re.classes.push(Y)),P.hooks.run("wrap",re);var ie="";for(var ae in re.attributes)ie+=" "+ae+'="'+(re.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+re.tag+' class="'+re.classes.join(" ")+'"'+ie+">"+re.content+"</"+re.tag+">"};function N(J,K,W,Q){J.lastIndex=K;var re=J.exec(W);if(re&&Q&&re[1]){var Y=re[1].length;re.index+=Y,re[0]=re[0].slice(Y)}return re}function S(J,K,W,Q,re,Y){for(var ie in W)if(!(!W.hasOwnProperty(ie)||!W[ie])){var ae=W[ie];ae=Array.isArray(ae)?ae:[ae];for(var Te=0;Te<ae.length;++Te){if(Y&&Y.cause==ie+","+Te)return;var Ie=ae[Te],ke=Ie.inside,at=!!Ie.lookbehind,vt=!!Ie.greedy,sr=Ie.alias;if(vt&&!Ie.pattern.global){var At=Ie.pattern.toString().match(/[imsuy]*$/)[0];Ie.pattern=RegExp(Ie.pattern.source,At+"g")}for(var mt=Ie.pattern||Ie,Ze=Q.next,$t=re;Ze!==K.tail&&!(Y&&$t>=Y.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(K.length>J.length)return;if(!(Qt instanceof E)){var Xt=1,pt;if(vt){if(pt=N(mt,$t,J,at),!pt||pt.index>=J.length)break;var ir=pt.index,Lr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;ir>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof E)continue;for(var Mr=Ze;Mr!==K.tail&&(Yt<Lr||typeof Mr.value=="string");Mr=Mr.next)Xt++,Yt+=Mr.value.length;Xt--,Qt=J.slice($t,Yt),pt.index-=$t}else if(pt=N(mt,0,Qt,at),!pt)continue;var ir=pt.index,_r=pt[0],Jr=Qt.slice(0,ir),nr=Qt.slice(ir+_r.length),Zr=$t+Qt.length;Y&&Zr>Y.reach&&(Y.reach=Zr);var ar=Ze.prev;Jr&&(ar=L(K,ar,Jr),$t+=Jr.length),Z(K,ar,Xt);var Pr=new E(ie,ke?P.tokenize(_r,ke):_r,sr,_r);if(Ze=L(K,ar,Pr),nr&&L(K,Ze,nr),Xt>1){var G={cause:ie+","+Te,reach:Zr};S(J,K,W,Ze.prev,$t,G),Y&&G.reach>Y.reach&&(Y.reach=G.reach)}}}}}}function B(){var J={value:null,prev:null,next:null},K={value:null,prev:J,next:null};J.next=K,this.head=J,this.tail=K,this.length=0}function L(J,K,W){var Q=K.next,re={value:W,prev:K,next:Q};return K.next=re,Q.prev=re,J.length++,re}function Z(J,K,W){for(var Q=K.next,re=0;re<W&&Q!==J.tail;re++)Q=Q.next;K.next=Q,Q.prev=K,J.length-=re}function ge(J){for(var K=[],W=J.head.next;W!==J.tail;)K.push(W.value),W=W.next;return K}if(!s.document)return s.addEventListener&&(P.disableWorkerMessageHandler||s.addEventListener("message",function(J){var K=JSON.parse(J.data),W=K.language,Q=K.code,re=K.immediateClose;s.postMessage(P.highlight(Q,P.languages[W],W)),re&&s.close()},!1)),P;var le=P.util.currentScript();le&&(P.filename=le.src,le.hasAttribute("data-manual")&&(P.manual=!0));function pe(){P.manual||P.highlightAll()}if(!P.manual){var be=document.readyState;be==="loading"||be==="interactive"&&le&&le.defer?document.addEventListener("DOMContentLoaded",pe):window.requestAnimationFrame?window.requestAnimationFrame(pe):window.setTimeout(pe,16)}return P}(r);t.exports&&(t.exports=e),typeof qi<"u"&&(qi.Prism=e),e.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},e.languages.markup.tag.inside["attr-value"].inside.entity=e.languages.markup.entity,e.languages.markup.doctype.inside["internal-subset"].inside=e.languages.markup,e.hooks.add("wrap",function(s){s.type==="entity"&&(s.attributes.title=s.content.replace(/&amp;/,"&"))}),Object.defineProperty(e.languages.markup.tag,"addInlined",{value:function(v,d){var C={};C["language-"+d]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:e.languages[d]},C.cdata=/^<!\[CDATA\[|\]\]>$/i;var P={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:C}};P["language-"+d]={pattern:/[\s\S]+/,inside:e.languages[d]};var E={};E[v]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return v}),"i"),lookbehind:!0,greedy:!0,inside:P},e.languages.insertBefore("markup","cdata",E)}}),Object.defineProperty(e.languages.markup.tag,"addAttribute",{value:function(s,v){e.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+s+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[v,"language-"+v],inside:e.languages[v]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),e.languages.html=e.languages.markup,e.languages.mathml=e.languages.markup,e.languages.svg=e.languages.markup,e.languages.xml=e.languages.extend("markup",{}),e.languages.ssml=e.languages.xml,e.languages.atom=e.languages.xml,e.languages.rss=e.languages.xml,function(s){var v=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;s.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+v.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+v.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+v.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+v.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:v,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},s.languages.css.atrule.inside.rest=s.languages.css;var d=s.languages.markup;d&&(d.tag.addInlined("style","css"),d.tag.addAttribute("style","css"))}(e),e.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},e.languages.javascript=e.languages.extend("clike",{"class-name":[e.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),e.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,e.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:e.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:e.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:e.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:e.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:e.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),e.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:e.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),e.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),e.languages.markup&&(e.languages.markup.tag.addInlined("script","javascript"),e.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),e.languages.js=e.languages.javascript,function(){if(typeof e>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var s="Loading",v=function(le,pe){return" Error "+le+" while fetching file: "+pe},d=" Error: File does not exist or is empty",C={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},P="data-src-status",E="loading",N="loaded",S="failed",B="pre[data-src]:not(["+P+'="'+N+'"]):not(['+P+'="'+E+'"])';function L(le,pe,be){var J=new XMLHttpRequest;J.open("GET",le,!0),J.onreadystatechange=function(){J.readyState==4&&(J.status<400&&J.responseText?pe(J.responseText):J.status>=400?be(v(J.status,J.statusText)):be(d))},J.send(null)}function Z(le){var pe=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(le||"");if(pe){var be=Number(pe[1]),J=pe[2],K=pe[3];return J?K?[be,Number(K)]:[be,void 0]:[be,be]}}e.hooks.add("before-highlightall",function(le){le.selector+=", "+B}),e.hooks.add("before-sanity-check",function(le){var pe=le.element;if(pe.matches(B)){le.code="",pe.setAttribute(P,E);var be=pe.appendChild(document.createElement("CODE"));be.textContent=s;var J=pe.getAttribute("data-src"),K=le.language;if(K==="none"){var W=(/\.(\w+)$/.exec(J)||[,"none"])[1];K=C[W]||W}e.util.setLanguage(be,K),e.util.setLanguage(pe,K);var Q=e.plugins.autoloader;Q&&Q.loadLanguages(K),L(J,function(re){pe.setAttribute(P,N);var Y=Z(pe.getAttribute("data-range"));if(Y){var ie=re.split(/\r\n?|\n/g),ae=Y[0],Te=Y[1]==null?ie.length:Y[1];ae<0&&(ae+=ie.length),ae=Math.max(0,Math.min(ae-1,ie.length)),Te<0&&(Te+=ie.length),Te=Math.max(0,Math.min(Te,ie.length)),re=ie.slice(ae,Te).join(`
`),pe.hasAttribute("data-start")||pe.setAttribute("data-start",String(ae+1))}be.textContent=re,e.highlightElement(be)},function(re){pe.setAttribute(P,S),be.textContent=re})}}),e.plugins.fileHighlight={highlight:function(pe){for(var be=(pe||document).querySelectorAll(B),J=0,K;K=be[J++];)e.highlightElement(K)}};var ge=!1;e.fileHighlight=function(){ge||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),ge=!0),e.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(K$);var pw={exports:{}};(function(t){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var e=function(s){var v=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,d=0,C={},P={manual:s.Prism&&s.Prism.manual,disableWorkerMessageHandler:s.Prism&&s.Prism.disableWorkerMessageHandler,util:{encode:function J(K){return K instanceof E?new E(K.type,J(K.content),K.alias):Array.isArray(K)?K.map(J):K.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(J){return Object.prototype.toString.call(J).slice(8,-1)},objId:function(J){return J.__id||Object.defineProperty(J,"__id",{value:++d}),J.__id},clone:function J(K,W){W=W||{};var Q,re;switch(P.util.type(K)){case"Object":if(re=P.util.objId(K),W[re])return W[re];Q={},W[re]=Q;for(var Y in K)K.hasOwnProperty(Y)&&(Q[Y]=J(K[Y],W));return Q;case"Array":return re=P.util.objId(K),W[re]?W[re]:(Q=[],W[re]=Q,K.forEach(function(ie,ae){Q[ae]=J(ie,W)}),Q);default:return K}},getLanguage:function(J){for(;J;){var K=v.exec(J.className);if(K)return K[1].toLowerCase();J=J.parentElement}return"none"},setLanguage:function(J,K){J.className=J.className.replace(RegExp(v,"gi"),""),J.classList.add("language-"+K)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(Q){var J=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(Q.stack)||[])[1];if(J){var K=document.getElementsByTagName("script");for(var W in K)if(K[W].src==J)return K[W]}return null}},isActive:function(J,K,W){for(var Q="no-"+K;J;){var re=J.classList;if(re.contains(K))return!0;if(re.contains(Q))return!1;J=J.parentElement}return!!W}},languages:{plain:C,plaintext:C,text:C,txt:C,extend:function(J,K){var W=P.util.clone(P.languages[J]);for(var Q in K)W[Q]=K[Q];return W},insertBefore:function(J,K,W,Q){Q=Q||P.languages;var re=Q[J],Y={};for(var ie in re)if(re.hasOwnProperty(ie)){if(ie==K)for(var ae in W)W.hasOwnProperty(ae)&&(Y[ae]=W[ae]);W.hasOwnProperty(ie)||(Y[ie]=re[ie])}var Te=Q[J];return Q[J]=Y,P.languages.DFS(P.languages,function(Ie,ke){ke===Te&&Ie!=J&&(this[Ie]=Y)}),Y},DFS:function J(K,W,Q,re){re=re||{};var Y=P.util.objId;for(var ie in K)if(K.hasOwnProperty(ie)){W.call(K,ie,K[ie],Q||ie);var ae=K[ie],Te=P.util.type(ae);Te==="Object"&&!re[Y(ae)]?(re[Y(ae)]=!0,J(ae,W,null,re)):Te==="Array"&&!re[Y(ae)]&&(re[Y(ae)]=!0,J(ae,W,ie,re))}}},plugins:{},highlightAll:function(J,K){P.highlightAllUnder(document,J,K)},highlightAllUnder:function(J,K,W){var Q={callback:W,container:J,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};P.hooks.run("before-highlightall",Q),Q.elements=Array.prototype.slice.apply(Q.container.querySelectorAll(Q.selector)),P.hooks.run("before-all-elements-highlight",Q);for(var re=0,Y;Y=Q.elements[re++];)P.highlightElement(Y,K===!0,Q.callback)},highlightElement:function(J,K,W){var Q=P.util.getLanguage(J),re=P.languages[Q];P.util.setLanguage(J,Q);var Y=J.parentElement;Y&&Y.nodeName.toLowerCase()==="pre"&&P.util.setLanguage(Y,Q);var ie=J.textContent,ae={element:J,language:Q,grammar:re,code:ie};function Te(ke){ae.highlightedCode=ke,P.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,P.hooks.run("after-highlight",ae),P.hooks.run("complete",ae),W&&W.call(ae.element)}if(P.hooks.run("before-sanity-check",ae),Y=ae.element.parentElement,Y&&Y.nodeName.toLowerCase()==="pre"&&!Y.hasAttribute("tabindex")&&Y.setAttribute("tabindex","0"),!ae.code){P.hooks.run("complete",ae),W&&W.call(ae.element);return}if(P.hooks.run("before-highlight",ae),!ae.grammar){Te(P.util.encode(ae.code));return}if(K&&s.Worker){var Ie=new Worker(P.filename);Ie.onmessage=function(ke){Te(ke.data)},Ie.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else Te(P.highlight(ae.code,ae.grammar,ae.language))},highlight:function(J,K,W){var Q={code:J,grammar:K,language:W};if(P.hooks.run("before-tokenize",Q),!Q.grammar)throw new Error('The language "'+Q.language+'" has no grammar.');return Q.tokens=P.tokenize(Q.code,Q.grammar),P.hooks.run("after-tokenize",Q),E.stringify(P.util.encode(Q.tokens),Q.language)},tokenize:function(J,K){var W=K.rest;if(W){for(var Q in W)K[Q]=W[Q];delete K.rest}var re=new B;return L(re,re.head,J),S(J,re,K,re.head,0),ge(re)},hooks:{all:{},add:function(J,K){var W=P.hooks.all;W[J]=W[J]||[],W[J].push(K)},run:function(J,K){var W=P.hooks.all[J];if(!(!W||!W.length))for(var Q=0,re;re=W[Q++];)re(K)}},Token:E};s.Prism=P;function E(J,K,W,Q){this.type=J,this.content=K,this.alias=W,this.length=(Q||"").length|0}E.stringify=function J(K,W){if(typeof K=="string")return K;if(Array.isArray(K)){var Q="";return K.forEach(function(Te){Q+=J(Te,W)}),Q}var re={type:K.type,content:J(K.content,W),tag:"span",classes:["token",K.type],attributes:{},language:W},Y=K.alias;Y&&(Array.isArray(Y)?Array.prototype.push.apply(re.classes,Y):re.classes.push(Y)),P.hooks.run("wrap",re);var ie="";for(var ae in re.attributes)ie+=" "+ae+'="'+(re.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+re.tag+' class="'+re.classes.join(" ")+'"'+ie+">"+re.content+"</"+re.tag+">"};function N(J,K,W,Q){J.lastIndex=K;var re=J.exec(W);if(re&&Q&&re[1]){var Y=re[1].length;re.index+=Y,re[0]=re[0].slice(Y)}return re}function S(J,K,W,Q,re,Y){for(var ie in W)if(!(!W.hasOwnProperty(ie)||!W[ie])){var ae=W[ie];ae=Array.isArray(ae)?ae:[ae];for(var Te=0;Te<ae.length;++Te){if(Y&&Y.cause==ie+","+Te)return;var Ie=ae[Te],ke=Ie.inside,at=!!Ie.lookbehind,vt=!!Ie.greedy,sr=Ie.alias;if(vt&&!Ie.pattern.global){var At=Ie.pattern.toString().match(/[imsuy]*$/)[0];Ie.pattern=RegExp(Ie.pattern.source,At+"g")}for(var mt=Ie.pattern||Ie,Ze=Q.next,$t=re;Ze!==K.tail&&!(Y&&$t>=Y.reach);$t+=Ze.value.length,Ze=Ze.next){var Qt=Ze.value;if(K.length>J.length)return;if(!(Qt instanceof E)){var Xt=1,pt;if(vt){if(pt=N(mt,$t,J,at),!pt||pt.index>=J.length)break;var ir=pt.index,Lr=pt.index+pt[0].length,Yt=$t;for(Yt+=Ze.value.length;ir>=Yt;)Ze=Ze.next,Yt+=Ze.value.length;if(Yt-=Ze.value.length,$t=Yt,Ze.value instanceof E)continue;for(var Mr=Ze;Mr!==K.tail&&(Yt<Lr||typeof Mr.value=="string");Mr=Mr.next)Xt++,Yt+=Mr.value.length;Xt--,Qt=J.slice($t,Yt),pt.index-=$t}else if(pt=N(mt,0,Qt,at),!pt)continue;var ir=pt.index,_r=pt[0],Jr=Qt.slice(0,ir),nr=Qt.slice(ir+_r.length),Zr=$t+Qt.length;Y&&Zr>Y.reach&&(Y.reach=Zr);var ar=Ze.prev;Jr&&(ar=L(K,ar,Jr),$t+=Jr.length),Z(K,ar,Xt);var Pr=new E(ie,ke?P.tokenize(_r,ke):_r,sr,_r);if(Ze=L(K,ar,Pr),nr&&L(K,Ze,nr),Xt>1){var G={cause:ie+","+Te,reach:Zr};S(J,K,W,Ze.prev,$t,G),Y&&G.reach>Y.reach&&(Y.reach=G.reach)}}}}}}function B(){var J={value:null,prev:null,next:null},K={value:null,prev:J,next:null};J.next=K,this.head=J,this.tail=K,this.length=0}function L(J,K,W){var Q=K.next,re={value:W,prev:K,next:Q};return K.next=re,Q.prev=re,J.length++,re}function Z(J,K,W){for(var Q=K.next,re=0;re<W&&Q!==J.tail;re++)Q=Q.next;K.next=Q,Q.prev=K,J.length-=re}function ge(J){for(var K=[],W=J.head.next;W!==J.tail;)K.push(W.value),W=W.next;return K}if(!s.document)return s.addEventListener&&(P.disableWorkerMessageHandler||s.addEventListener("message",function(J){var K=JSON.parse(J.data),W=K.language,Q=K.code,re=K.immediateClose;s.postMessage(P.highlight(Q,P.languages[W],W)),re&&s.close()},!1)),P;var le=P.util.currentScript();le&&(P.filename=le.src,le.hasAttribute("data-manual")&&(P.manual=!0));function pe(){P.manual||P.highlightAll()}if(!P.manual){var be=document.readyState;be==="loading"||be==="interactive"&&le&&le.defer?document.addEventListener("DOMContentLoaded",pe):window.requestAnimationFrame?window.requestAnimationFrame(pe):window.setTimeout(pe,16)}return P}(r);t.exports&&(t.exports=e),typeof qi<"u"&&(qi.Prism=e)})(pw);var gd=pw.exports;Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const W$={computed:{hasHeader(){return!!this.$slots.header},hasFooter(){return!!this.$slots.footer}}},G$="_container_zhbxc_2",J$="_header_zhbxc_9",Z$="_main_zhbxc_14",Q$="_footer_zhbxc_19",X$={container:G$,header:J$,main:Z$,footer:Q$},Uc=(t,r)=>{const e=t.__vccOpts||t;for(const[s,v]of r)e[s]=v;return e};function Y$(t,r,e,s,v,d){return us(),Hs("div",{class:Rn(t.$style.container)},[d.hasHeader?(us(),Hs("header",{key:0,class:Rn(t.$style.header)},[ah(t.$slots,"header")],2)):nc("",!0),Xi("main",{class:Rn(t.$style.main)},[ah(t.$slots,"default")],2),d.hasFooter?(us(),Hs("footer",{key:1,class:Rn(t.$style.footer)},[ah(t.$slots,"footer")],2)):nc("",!0)],2)}const ex={$style:X$},dc=Uc(W$,[["render",Y$],["__cssModules",ex]]),tx={key:0},rx=["onClick"],sx={key:1},nx=["onClick"],ax=jc({__name:"MenuButton",props:{options:{}},emits:["select"],setup(t,{emit:r}){const e=zo(!1),s=r;return(v,d)=>(us(),Hs("div",{class:Rn(v.$style.wrapper)},[Xi("button",{onClick:d[0]||(d[0]=C=>e.value=!e.value)},[ah(v.$slots,"default")]),ys(u$,null,{default:Ia(()=>[e.value?(us(),Hs("div",{key:0,class:Rn(v.$style.menu)},[v.options instanceof Array?(us(),Hs("div",tx,[(us(!0),Hs(kn,null,Fh(v.options,C=>(us(),Hs("div",{class:Rn(v.$style.opt),onClick:P=>{e.value=!1,s("select",C)}},Co(C),11,rx))),256))])):(us(),Hs("div",sx,[(us(!0),Hs(kn,null,Fh(Object.keys(v.options),C=>(us(),Hs("div",{class:Rn(v.$style.opt),onClick:P=>{e.value=!1,s("select",C)}},Co(v.options[C]),11,nx))),256))]))],2)):nc("",!0)]),_:1})],2))}}),ix="_wrapper_1dk0z_2",lx="_menu_1dk0z_5",ux="_opt_1dk0z_12",ox={wrapper:ix,menu:lx,opt:ux},fx={$style:ox},vw=Uc(ax,[["__cssModules",fx]]),cx=jc({__name:"Editor",props:{modelValue:{},samples:{},parseError:{}},emits:["run","update:modelValue"],setup(t,{emit:r}){const e=t,s=r,v=zo(e.modelValue);bc(v,()=>{s("update:modelValue",v.value)},{immediate:!0});function d(P){v.value=e.samples[P]}const C=P=>gd.highlight(P,gd.languages.js,"javascript");return(P,E)=>(us(),Fc(dc,null,{header:Ia(()=>[E[3]||(E[3]=Tu(" Input ")),e.samples?(us(),Hs("div",{key:0,class:Rn(P.$style.actions)},[ys(vw,{options:Object.keys(e.samples),onSelect:d},{default:Ia(()=>E[2]||(E[2]=[Tu("Samples")])),_:1},8,["options"])],2)):nc("",!0)]),footer:Ia(()=>[e.parseError?(us(),Hs("span",{key:0,class:Rn(P.$style.parseError)},Co(e.parseError),3)):nc("",!0),Xi("div",{class:Rn(P.$style.actions)},[Xi("button",{onClick:E[1]||(E[1]=N=>s("run"))},"RUN")],2)]),default:Ia(()=>[ys(Mc(q$),{class:Rn(P.$style.code),modelValue:v.value,"onUpdate:modelValue":E[0]||(E[0]=N=>v.value=N),highlight:C,"line-numbers":!1},null,8,["class","modelValue"])]),_:1}))}}),hx="_code_af8rl_2",px="_parseError_af8rl_6",vx="_actions_af8rl_9",gx={code:hx,parseError:px,actions:vx},dx={$style:gx},yx=Uc(cx,[["__cssModules",dx]]);function Gr(t,r,e){let s=e.value;return{configurable:!0,get(){const v=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){s=v}}}let ac=class gw extends Error{constructor(e,s){super(e);he(this,"name","AiScript");he(this,"info");he(this,"pos");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,gw)}},dd=class extends ac{constructor(e){const s=String((e==null?void 0:e.message)??e);super(s,e);he(this,"name","Internal")}},Wt=class extends ac{constructor(e,s,v){super(`${e} (Line ${s.line}, Column ${s.column})`,v);he(this,"pos");he(this,"name","Syntax");this.pos=s}};class Ap extends ac{constructor(e,s,v){super(`${e} (Line ${s.line}, Column ${s.column})`,v);he(this,"pos");he(this,"name","Namespace");this.pos=s}}let Zt=class extends ac{constructor(e,s){super(e,s);he(this,"name","Runtime")}},yd=class extends Zt{constructor(r,e){super(r,e)}},wx=class extends Zt{constructor(e,s){super(e,s);he(this,"name","")}};var ro=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Wu=class lv{constructor(r=[],e,s,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new lv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const v=[e,...this.layerdStates];return new lv(v,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new Zt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Zt(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new Zt(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Zt(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};ro([Gr],Wu.prototype,"log",null);ro([Gr],Wu.prototype,"onUpdated",null);ro([Gr],Wu.prototype,"createChildScope",null);ro([Gr],Wu.prototype,"createChildNamespaceScope",null);ro([Gr],Wu.prototype,"get",null);ro([Gr],Wu.prototype,"exists",null);ro([Gr],Wu.prototype,"getAll",null);ro([Gr],Wu.prototype,"add",null);ro([Gr],Wu.prototype,"assign",null);var yn=[];for(var Cp=0;Cp<256;++Cp)yn.push((Cp+256).toString(16).slice(1));function mx(t,r=0){return(yn[t[r+0]]+yn[t[r+1]]+yn[t[r+2]]+yn[t[r+3]]+"-"+yn[t[r+4]]+yn[t[r+5]]+"-"+yn[t[r+6]]+yn[t[r+7]]+"-"+yn[t[r+8]]+yn[t[r+9]]+"-"+yn[t[r+10]]+yn[t[r+11]]+yn[t[r+12]]+yn[t[r+13]]+yn[t[r+14]]+yn[t[r+15]]).toLowerCase()}var Jc,$x=new Uint8Array(16);function xx(){if(!Jc&&(Jc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jc($x)}var bx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const wd={randomUUID:bx};function Ax(t,r,e){if(wd.randomUUID&&!r&&!t)return wd.randomUUID();t=t||{};var s=t.random||(t.rng||xx)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,mx(s)}const wt={type:"null"},Ks={type:"bool",value:!0},Ws={type:"bool",value:!1},Oe=t=>({type:"num",value:t}),Kt=t=>({type:"str",value:t}),ef=t=>({type:"bool",value:t}),Rh=t=>({type:"obj",value:t}),Ir=t=>({type:"arr",value:t}),Cx=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),oe=t=>({type:"fn",native:t}),_x=t=>({type:"return",value:t}),Px=()=>({type:"break",value:null}),kx=()=>({type:"continue",value:null}),Ex=t=>t.type==="return"?t.value:t,oh=(t,r)=>({type:"error",value:t,info:r});function Sn(t){if(t==null)throw new Zt("Expect anything, but got nothing.")}function Cn(t){if(t==null)throw new Zt("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Zt(`Expect boolean, but got ${t.type}.`)}function ds(t){if(t==null)throw new Zt("Expect function, but got nothing.");if(t.type!=="fn")throw new Zt(`Expect function, but got ${t.type}.`)}function $r(t){if(t==null)throw new Zt("Expect string, but got nothing.");if(t.type!=="str")throw new Zt(`Expect string, but got ${t.type}.`)}function Ee(t){if(t==null)throw new Zt("Expect number, but got nothing.");if(t.type!=="num")throw new Zt(`Expect number, but got ${t.type}.`)}function Qi(t){if(t==null)throw new Zt("Expect object, but got nothing.");if(t.type!=="obj")throw new Zt(`Expect object, but got ${t.type}.`)}function eo(t){if(t==null)throw new Zt("Expect array, but got nothing.");if(t.type!=="arr")throw new Zt(`Expect array, but got ${t.type}.`)}function _p(t){return t.type==="obj"}function jh(t){return t.type==="arr"}function Uf(t,r){return t.type==="fn"&&r.type==="fn"?t.native&&r.native?t.native===r.native:t===r:t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function uv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>uv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function ov(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>ov(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=ov(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function fv(t){if(t===null)return wt;if(typeof t=="boolean")return ef(t);if(typeof t=="string")return Kt(t);if(typeof t=="number")return Oe(t);if(Array.isArray(t))return Ir(t.map(r=>fv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,fv(s));return Rh(r)}return wt}function Bf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const v of t.value)s.push(Bf(v,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[v,d]of t.value)s.push(`${v}: ${Bf(d,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?t.native?"@( ?? ) { native code }":`@( ${t.args.map(s=>s.dest.type==="identifier"?s.dest.name:"?").join(", ")} ) { ... }`:"?"}const Mx={version:"1.0.0-dev.20240914"},Sx=Mx.version,dw=new TextEncoder,Tx=new TextDecoder,qo=Math.ceil(Math.log2(Number.MAX_SAFE_INTEGER));BigInt(qo);const Nx=qo-1;BigInt(Nx);class pg{generateNumber0To1(){let r=this.generateBigUintByBits(qo),e=1022,s=qo-md(r);for(;s>0&&e>=qo;)e-=s,r<<=BigInt(s),r|=this.generateBigUintByBits(s),s=qo-md(r);if(s>0){const v=Math.min(e-1,s);r<<=BigInt(v),r|=this.generateBigUintByBits(v),e=Math.max(e-v,0)}return Number(r)*.5**qo*.5**(1022-e)}generateUniform(r){if(r<1)return 0n;const e=r.toString(2).length,s=Math.ceil(e/8),v=BigInt(s*8-e);let d;do d=this.generateBigUintByBytes(s)>>v;while(d>r);return d}generateRandomIntegerInRange(r,e){const s=Math.ceil(r),v=Math.floor(e),d=v-s;if(d===0)return s;const C=Math.abs(d),P=Math.sign(d);if(!Number.isSafeInteger(C)||!Number.isSafeInteger(s)||!Number.isSafeInteger(v))return null;const E=BigInt(C);return Number(this.generateUniform(E))*P+s}}function md(t){return t===0n?0:t.toString(2).length}function Fx(t){if(t.byteLength===0)return null;if(t.byteLength<8){const r=new Uint8Array(8);return r.set(new Uint8Array(t)),new DataView(r.buffer).getBigUint64(0,!0)}return new DataView(t).getBigUint64(0,!0)}function vg(t){if(t.byteLength===0)return null;if(t.byteLength<=8)return Fx(t);const r=new DataView(t);let e=0n,s=0n,v=0;for(;v<r.byteLength-7;v+=8,e+=64n){const d=r.getBigUint64(v,!0);s|=d<<e}if(v<r.byteLength){const d=new Uint8Array(8);d.set(new Uint8Array(t,v)),s|=new DataView(d.buffer).getBigUint64(0,!0)<<e}return s}const Pc=class Pc extends pg{static get instance(){return Pc._instance}constructor(){super()}generateBigUintByBytes(r){let e=new Uint8Array(Math.ceil(r/8)*8);return e.length<1||!Number.isSafeInteger(r)?0n:(e=this.generateBytes(e.subarray(0,r)),vg(e.buffer)??0n)}generateBigUintByBits(r){if(r<1||!Number.isSafeInteger(r))return 0n;const e=Math.ceil(r/8),s=BigInt(e*8-r);return this.generateBigUintByBytes(e)>>s}generateBytes(r){return crypto.getRandomValues(r)}};he(Pc,"_instance",new Pc);let Dh=Pc;var gg={exports:{}};gg.exports;(function(t){(function(r,e,s){function v(E){var N=this,S=P();N.next=function(){var B=2091639*N.s0+N.c*23283064365386963e-26;return N.s0=N.s1,N.s1=N.s2,N.s2=B-(N.c=B|0)},N.c=1,N.s0=S(" "),N.s1=S(" "),N.s2=S(" "),N.s0-=S(E),N.s0<0&&(N.s0+=1),N.s1-=S(E),N.s1<0&&(N.s1+=1),N.s2-=S(E),N.s2<0&&(N.s2+=1),S=null}function d(E,N){return N.c=E.c,N.s0=E.s0,N.s1=E.s1,N.s2=E.s2,N}function C(E,N){var S=new v(E),B=N&&N.state,L=S.next;return L.int32=function(){return S.next()*4294967296|0},L.double=function(){return L()+(L()*2097152|0)*11102230246251565e-32},L.quick=L,B&&(typeof B=="object"&&d(B,S),L.state=function(){return d(S,{})}),L}function P(){var E=4022871197,N=function(S){S=String(S);for(var B=0;B<S.length;B++){E+=S.charCodeAt(B);var L=.02519603282416938*E;E=L>>>0,L-=E,L*=E,E=L>>>0,L-=E,E+=L*4294967296}return(E>>>0)*23283064365386963e-26};return N}e&&e.exports?e.exports=C:this.alea=C})(qi,t)})(gg);var Ox=gg.exports,dg={exports:{}};dg.exports;(function(t){(function(r,e,s){function v(P){var E=this,N="";E.x=0,E.y=0,E.z=0,E.w=0,E.next=function(){var B=E.x^E.x<<11;return E.x=E.y,E.y=E.z,E.z=E.w,E.w^=E.w>>>19^B^B>>>8},P===(P|0)?E.x=P:N+=P;for(var S=0;S<N.length+64;S++)E.x^=N.charCodeAt(S)|0,E.next()}function d(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E}function C(P,E){var N=new v(P),S=E&&E.state,B=function(){return(N.next()>>>0)/4294967296};return B.double=function(){do var L=N.next()>>>11,Z=(N.next()>>>0)/4294967296,ge=(L+Z)/(1<<21);while(ge===0);return ge},B.int32=N.next,B.quick=B,S&&(typeof S=="object"&&d(S,N),B.state=function(){return d(N,{})}),B}e&&e.exports?e.exports=C:this.xor128=C})(qi,t)})(dg);var Ix=dg.exports,yg={exports:{}};yg.exports;(function(t){(function(r,e,s){function v(P){var E=this,N="";E.next=function(){var B=E.x^E.x>>>2;return E.x=E.y,E.y=E.z,E.z=E.w,E.w=E.v,(E.d=E.d+362437|0)+(E.v=E.v^E.v<<4^(B^B<<1))|0},E.x=0,E.y=0,E.z=0,E.w=0,E.v=0,P===(P|0)?E.x=P:N+=P;for(var S=0;S<N.length+64;S++)E.x^=N.charCodeAt(S)|0,S==N.length&&(E.d=E.x<<10^E.x>>>4),E.next()}function d(P,E){return E.x=P.x,E.y=P.y,E.z=P.z,E.w=P.w,E.v=P.v,E.d=P.d,E}function C(P,E){var N=new v(P),S=E&&E.state,B=function(){return(N.next()>>>0)/4294967296};return B.double=function(){do var L=N.next()>>>11,Z=(N.next()>>>0)/4294967296,ge=(L+Z)/(1<<21);while(ge===0);return ge},B.int32=N.next,B.quick=B,S&&(typeof S=="object"&&d(S,N),B.state=function(){return d(N,{})}),B}e&&e.exports?e.exports=C:this.xorwow=C})(qi,t)})(yg);var Rx=yg.exports,wg={exports:{}};wg.exports;(function(t){(function(r,e,s){function v(P){var E=this;E.next=function(){var S=E.x,B=E.i,L,Z;return L=S[B],L^=L>>>7,Z=L^L<<24,L=S[B+1&7],Z^=L^L>>>10,L=S[B+3&7],Z^=L^L>>>3,L=S[B+4&7],Z^=L^L<<7,L=S[B+7&7],L=L^L<<13,Z^=L^L<<9,S[B]=Z,E.i=B+1&7,Z};function N(S,B){var L,Z=[];if(B===(B|0))Z[0]=B;else for(B=""+B,L=0;L<B.length;++L)Z[L&7]=Z[L&7]<<15^B.charCodeAt(L)+Z[L+1&7]<<13;for(;Z.length<8;)Z.push(0);for(L=0;L<8&&Z[L]===0;++L);for(L==8?Z[7]=-1:Z[L],S.x=Z,S.i=0,L=256;L>0;--L)S.next()}N(E,P)}function d(P,E){return E.x=P.x.slice(),E.i=P.i,E}function C(P,E){P==null&&(P=+new Date);var N=new v(P),S=E&&E.state,B=function(){return(N.next()>>>0)/4294967296};return B.double=function(){do var L=N.next()>>>11,Z=(N.next()>>>0)/4294967296,ge=(L+Z)/(1<<21);while(ge===0);return ge},B.int32=N.next,B.quick=B,S&&(S.x&&d(S,N),B.state=function(){return d(N,{})}),B}e&&e.exports?e.exports=C:this.xorshift7=C})(qi,t)})(wg);var jx=wg.exports,mg={exports:{}};mg.exports;(function(t){(function(r,e,s){function v(P){var E=this;E.next=function(){var S=E.w,B=E.X,L=E.i,Z,ge;return E.w=S=S+1640531527|0,ge=B[L+34&127],Z=B[L=L+1&127],ge^=ge<<13,Z^=Z<<17,ge^=ge>>>15,Z^=Z>>>12,ge=B[L]=ge^Z,E.i=L,ge+(S^S>>>16)|0};function N(S,B){var L,Z,ge,le,pe,be=[],J=128;for(B===(B|0)?(Z=B,B=null):(B=B+"\0",Z=0,J=Math.max(J,B.length)),ge=0,le=-32;le<J;++le)B&&(Z^=B.charCodeAt((le+32)%B.length)),le===0&&(pe=Z),Z^=Z<<10,Z^=Z>>>15,Z^=Z<<4,Z^=Z>>>13,le>=0&&(pe=pe+1640531527|0,L=be[le&127]^=Z+pe,ge=L==0?ge+1:0);for(ge>=128&&(be[(B&&B.length||0)&127]=-1),ge=127,le=4*128;le>0;--le)Z=be[ge+34&127],L=be[ge=ge+1&127],Z^=Z<<13,L^=L<<17,Z^=Z>>>15,L^=L>>>12,be[ge]=Z^L;S.w=pe,S.X=be,S.i=ge}N(E,P)}function d(P,E){return E.i=P.i,E.w=P.w,E.X=P.X.slice(),E}function C(P,E){P==null&&(P=+new Date);var N=new v(P),S=E&&E.state,B=function(){return(N.next()>>>0)/4294967296};return B.double=function(){do var L=N.next()>>>11,Z=(N.next()>>>0)/4294967296,ge=(L+Z)/(1<<21);while(ge===0);return ge},B.int32=N.next,B.quick=B,S&&(S.X&&d(S,N),B.state=function(){return d(N,{})}),B}e&&e.exports?e.exports=C:this.xor4096=C})(qi,t)})(mg);var Dx=mg.exports,$g={exports:{}};$g.exports;(function(t){(function(r,e,s){function v(P){var E=this,N="";E.next=function(){var B=E.b,L=E.c,Z=E.d,ge=E.a;return B=B<<25^B>>>7^L,L=L-Z|0,Z=Z<<24^Z>>>8^ge,ge=ge-B|0,E.b=B=B<<20^B>>>12^L,E.c=L=L-Z|0,E.d=Z<<16^L>>>16^ge,E.a=ge-B|0},E.a=0,E.b=0,E.c=-1640531527,E.d=1367130551,P===Math.floor(P)?(E.a=P/4294967296|0,E.b=P|0):N+=P;for(var S=0;S<N.length+20;S++)E.b^=N.charCodeAt(S)|0,E.next()}function d(P,E){return E.a=P.a,E.b=P.b,E.c=P.c,E.d=P.d,E}function C(P,E){var N=new v(P),S=E&&E.state,B=function(){return(N.next()>>>0)/4294967296};return B.double=function(){do var L=N.next()>>>11,Z=(N.next()>>>0)/4294967296,ge=(L+Z)/(1<<21);while(ge===0);return ge},B.int32=N.next,B.quick=B,S&&(typeof S=="object"&&d(S,N),B.state=function(){return d(N,{})}),B}e&&e.exports?e.exports=C:this.tychei=C})(qi,t)})($g);var Ux=$g.exports,yw={exports:{}};const Bx={},Lx=Object.freeze(Object.defineProperty({__proto__:null,default:Bx},Symbol.toStringTag,{value:"Module"})),Hx=z$(Lx);(function(t){(function(r,e,s){var v=256,d=6,C=52,P="random",E=s.pow(v,d),N=s.pow(2,C),S=N*2,B=v-1,L;function Z(W,Q,re){var Y=[];Q=Q==!0?{entropy:!0}:Q||{};var ie=be(pe(Q.entropy?[W,K(e)]:W??J(),3),Y),ae=new ge(Y),Te=function(){for(var Ie=ae.g(d),ke=E,at=0;Ie<N;)Ie=(Ie+at)*v,ke*=v,at=ae.g(1);for(;Ie>=S;)Ie/=2,ke/=2,at>>>=1;return(Ie+at)/ke};return Te.int32=function(){return ae.g(4)|0},Te.quick=function(){return ae.g(4)/4294967296},Te.double=Te,be(K(ae.S),e),(Q.pass||re||function(Ie,ke,at,vt){return vt&&(vt.S&&le(vt,ae),Ie.state=function(){return le(ae,{})}),at?(s[P]=Ie,ke):Ie})(Te,ie,"global"in Q?Q.global:this==s,Q.state)}function ge(W){var Q,re=W.length,Y=this,ie=0,ae=Y.i=Y.j=0,Te=Y.S=[];for(re||(W=[re++]);ie<v;)Te[ie]=ie++;for(ie=0;ie<v;ie++)Te[ie]=Te[ae=B&ae+W[ie%re]+(Q=Te[ie])],Te[ae]=Q;(Y.g=function(Ie){for(var ke,at=0,vt=Y.i,sr=Y.j,At=Y.S;Ie--;)ke=At[vt=B&vt+1],at=at*v+At[B&(At[vt]=At[sr=B&sr+ke])+(At[sr]=ke)];return Y.i=vt,Y.j=sr,at})(v)}function le(W,Q){return Q.i=W.i,Q.j=W.j,Q.S=W.S.slice(),Q}function pe(W,Q){var re=[],Y=typeof W,ie;if(Q&&Y=="object")for(ie in W)try{re.push(pe(W[ie],Q-1))}catch{}return re.length?re:Y=="string"?W:W+"\0"}function be(W,Q){for(var re=W+"",Y,ie=0;ie<re.length;)Q[B&ie]=B&(Y^=Q[B&ie]*19)+re.charCodeAt(ie++);return K(Q)}function J(){try{var W;return L&&(W=L.randomBytes)?W=W(v):(W=new Uint8Array(v),(r.crypto||r.msCrypto).getRandomValues(W)),K(W)}catch{var Q=r.navigator,re=Q&&Q.plugins;return[+new Date,r,re,r.screen,K(e)]}}function K(W){return String.fromCharCode.apply(0,W)}if(be(s.random(),e),t.exports){t.exports=Z;try{L=Hx}catch{}}else s["seed"+P]=Z})(typeof self<"u"?self:qi,[],Math)})(yw);var qx=yw.exports,Vx=Ox,zx=Ix,Kx=Rx,Wx=jx,Gx=Dx,Jx=Ux,bf=qx;bf.alea=Vx;bf.xor128=zx;bf.xorwow=Kx;bf.xorshift7=Wx;bf.xor4096=Gx;bf.tychei=Jx;var Zx=bf;const No=V$(Zx),Bo=Int32Array.BYTES_PER_ELEMENT;class Qx extends pg{constructor(e){super();he(this,"rng");he(this,"buffer");he(this,"filledBuffer");this.rng=No(e.toString()),this.buffer=new Uint8Array(Bo),this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%Bo!==0)throw new Error(`SeedRandomWrapper.fillBufferDirect should always be called with the buffer with the length a multiple-of-${Bo}!`);const s=e.length/Bo,v=new DataView(e.buffer);let d=0;for(let C=0;C<s;C++,d+=Bo)v.setInt32(d,this.rng.int32(),!1);return e}generateBigUintByBytes(e){let s=new Uint8Array(Math.ceil(e/8)*8);return s.length<1||!Number.isSafeInteger(e)?0n:(s=this.generateBytes(s.subarray(0,e)),vg(s.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const s=Math.ceil(e/8),v=BigInt(s*8-e);return this.generateBigUintByBytes(s)>>v}generateBytes(e){if(e.length<1)return e;e.fill(0);let s=e;if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;for(;s.length>0;){if(this.filledBuffer.length===0){if(s.length>=Bo){const v=s.subarray(0,s.length-s.length%Bo);this.fillBufferDirect(v),s=s.subarray(v.length);continue}this.fillBuffer()}if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;s.set(this.filledBuffer),s=s.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}const Zc=64,Xx=20,Qc=32,$d=8;function Xc(t,r){return t<<r|t>>>32-r}function fo(t,r,e,s,v){if(t.length<16)return;let d=t[r],C=t[e],P=t[s],E=t[v];d===void 0||C===void 0||P===void 0||E===void 0||(d=d+C|0,E=Xc(E^d,16),P=P+E|0,C=Xc(C^P,12),d=d+C|0,E=Xc(E^d,8),P=P+E|0,C=Xc(C^P,7),t[r]=d,t[e]=C,t[s]=P,t[v]=E)}function Yx(t,r){if(!(t.length<16||r.length<16)){t.set(r);for(let e=0;e<Xx;e+=2)fo(t,0,4,8,12),fo(t,1,5,9,13),fo(t,2,6,10,14),fo(t,3,7,11,15),fo(t,0,5,10,15),fo(t,1,6,11,12),fo(t,2,7,8,13),fo(t,3,4,9,14);for(let e=0;e<16;e++){let s=t[e];const v=r[e];if(s===void 0||v===void 0)throw new Error("generateChaCha20: Something went wrong!");s=s+v|0,t[e]=s}}}class eb extends pg{constructor(e){const s=$d+Qc;super();he(this,"keynonce");he(this,"state");he(this,"buffer");he(this,"filledBuffer");he(this,"counter");let v;if(typeof e>"u")v=crypto.getRandomValues(new Uint8Array(s));else if(v=e,v.byteLength>s&&(v=e.subarray(0,s)),v.byteLength<s){const E=new Uint8Array(s);E.set(v),v=E}const d=v.subarray(0,Qc),C=v.subarray(Qc,Qc+$d),P=new Uint8Array(16*4);P.set([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),P.set(d,4*4),P.set(C,14*4),this.keynonce=new Uint32Array(P.buffer),this.state=new Uint32Array(16),this.buffer=new Uint8Array(Zc),this.counter=0n,this.filledBuffer=new Uint8Array(0)}fillBuffer(){this.buffer.fill(0),this.buffer=this.fillBufferDirect(this.buffer),this.filledBuffer=this.buffer}fillBufferDirect(e){if(e.length%Zc!==0)throw new Error("ChaCha20.fillBufferDirect should always be called with the buffer with the length a multiple-of-64!");e.fill(0);let s=this.counter;const v=this.state,d=new BigUint64Array(v.buffer);let C=e;for(;C.length>0;){const P=C.subarray(0,v.byteLength),E=new Uint32Array(P.buffer);v.set(this.keynonce),d[6]=BigInt.asUintN(64,s),Yx(E,v),C=C.subarray(P.length),s=BigInt.asUintN(64,s+1n)}return this.counter=s,e}generateBigUintByBytes(e){let s=new Uint8Array(Math.ceil(e/8)*8);return s.length<1||!Number.isSafeInteger(e)?0n:(s=this.generateBytes(s.subarray(0,e)),vg(s.buffer)??0n)}generateBigUintByBits(e){if(e<1||!Number.isSafeInteger(e))return 0n;const s=Math.ceil(e/8),v=BigInt(s*8-e);return this.generateBigUintByBytes(s)>>v}generateBytes(e){if(e.length<1)return e;e.fill(0);let s=e;if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;for(;s.length>0;){if(this.filledBuffer.length===0){if(s.length>=Zc){const v=s.subarray(0,s.length-s.length%Zc);this.fillBufferDirect(v),s=s.subarray(v.length);continue}this.fillBuffer()}if(s.length<=this.filledBuffer.length)return s.set(this.filledBuffer.subarray(0,s.length)),this.filledBuffer=this.filledBuffer.subarray(s.length),e;s.set(this.filledBuffer),s=s.subarray(this.filledBuffer.length),this.fillBuffer()}return e}}function tb(t){if(!t||t.type!=="num"&&t.type!=="str")return wt;const r=No(t.value.toString());return oe(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Oe(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Oe(r()))}function rb(t){if(!t||t.type!=="num"&&t.type!=="str")return wt;const r=new Qx(t.value);return oe(([e,s])=>{if(e&&e.type==="num"&&s&&s.type==="num"){const v=r.generateRandomIntegerInRange(e.value,s.value);return typeof v=="number"?Oe(v):wt}return Oe(r.generateNumber0To1())})}async function sb(t){if(!t||t.type!=="num"&&t.type!=="str"&&t.type!=="null")return wt;let r;t.type==="num"?r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(new Float64Array([t.value])))):t.type==="str"&&(r=new Uint8Array(await crypto.subtle.digest("SHA-384",new Uint8Array(dw.encode(t.value)))));const e=new eb(r);return oe(([s,v])=>{if(s&&s.type==="num"&&v&&v.type==="num"){const d=e.generateRandomIntegerInRange(s.value,v.value);return typeof d=="number"?Oe(d):wt}return Oe(e.generateNumber0To1())})}const nb={help:Kt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Kt(Sx),"Core:ai":Kt("kawaii"),"Core:not":oe(([t])=>(Cn(t),t.value?Ws:Ks)),"Core:eq":oe(([t,r])=>(Sn(t),Sn(r),Uf(t,r)?Ks:Ws)),"Core:neq":oe(([t,r])=>(Sn(t),Sn(r),Uf(t,r)?Ws:Ks)),"Core:and":oe(([t,r])=>(Cn(t),t.value?(Cn(r),r.value?Ks:Ws):Ws)),"Core:or":oe(([t,r])=>(Cn(t),t.value?Ks:(Cn(r),r.value?Ks:Ws))),"Core:add":oe(([t,r])=>(Ee(t),Ee(r),Oe(t.value+r.value))),"Core:sub":oe(([t,r])=>(Ee(t),Ee(r),Oe(t.value-r.value))),"Core:mul":oe(([t,r])=>(Ee(t),Ee(r),Oe(t.value*r.value))),"Core:pow":oe(([t,r])=>{Ee(t),Ee(r);const e=t.value**r.value;return Oe(e)}),"Core:div":oe(([t,r])=>{Ee(t),Ee(r);const e=t.value/r.value;return Oe(e)}),"Core:mod":oe(([t,r])=>(Ee(t),Ee(r),Oe(t.value%r.value))),"Core:gt":oe(([t,r])=>(Ee(t),Ee(r),t.value>r.value?Ks:Ws)),"Core:lt":oe(([t,r])=>(Ee(t),Ee(r),t.value<r.value?Ks:Ws)),"Core:gteq":oe(([t,r])=>(Ee(t),Ee(r),t.value>=r.value?Ks:Ws)),"Core:lteq":oe(([t,r])=>(Ee(t),Ee(r),t.value<=r.value?Ks:Ws)),"Core:type":oe(([t])=>(Sn(t),Kt(t.type))),"Core:to_str":oe(([t])=>(Sn(t),Kt(Bf(t)))),"Core:range":oe(([t,r])=>(Ee(t),Ee(r),t.value<r.value?Ir(Array.from({length:r.value-t.value+1},(e,s)=>Oe(s+t.value))):t.value>r.value?Ir(Array.from({length:t.value-r.value+1},(e,s)=>Oe(t.value-s))):Ir([t]))),"Core:sleep":oe(async([t])=>(Ee(t),await new Promise(r=>setTimeout(r,t.value)),wt)),"Core:abort":oe(async([t])=>{throw $r(t),new wx(t.value)}),"Util:uuid":oe(()=>Kt(Ax())),"Json:stringify":oe(([t])=>(Sn(t),Kt(JSON.stringify(ov(t))))),"Json:parse":oe(([t])=>{$r(t);try{return fv(JSON.parse(t.value))}catch{return oh("not_json")}}),"Json:parsable":oe(([t])=>{$r(t);try{JSON.parse(t.value)}catch{return ef(!1)}return ef(!0)}),"Date:now":oe(()=>Oe(Date.now())),"Date:year":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":oe(([t])=>(t&&Ee(t),Oe(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":oe(([t])=>{$r(t);const r=new Date(t.value).getTime();return r===r?Oe(r):oh("not_date")}),"Date:to_iso_str":oe(([t,r])=>{t&&Ee(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ee(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(s===0)v="Z";else{const L=Math.sign(s),Z=Math.floor(Math.abs(s)/60),ge=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+L*Z),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const le=s>0?"+":"-",pe=Z.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");v=`${le}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),S=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return Kt(`${d}-${C}-${P}T${E}:${N}:${S}.${B}${v}`)}),"Math:Infinity":Oe(1/0),"Math:E":Oe(Math.E),"Math:LN2":Oe(Math.LN2),"Math:LN10":Oe(Math.LN10),"Math:LOG2E":Oe(Math.LOG2E),"Math:LOG10E":Oe(Math.LOG10E),"Math:PI":Oe(Math.PI),"Math:SQRT1_2":Oe(Math.SQRT1_2),"Math:SQRT2":Oe(Math.SQRT2),"Math:abs":oe(([t])=>(Ee(t),Oe(Math.abs(t.value)))),"Math:acos":oe(([t])=>(Ee(t),Oe(Math.acos(t.value)))),"Math:acosh":oe(([t])=>(Ee(t),Oe(Math.acosh(t.value)))),"Math:asin":oe(([t])=>(Ee(t),Oe(Math.asin(t.value)))),"Math:asinh":oe(([t])=>(Ee(t),Oe(Math.asinh(t.value)))),"Math:atan":oe(([t])=>(Ee(t),Oe(Math.atan(t.value)))),"Math:atanh":oe(([t])=>(Ee(t),Oe(Math.atanh(t.value)))),"Math:atan2":oe(([t,r])=>(Ee(t),Ee(r),Oe(Math.atan2(t.value,r.value)))),"Math:cbrt":oe(([t])=>(Ee(t),Oe(Math.cbrt(t.value)))),"Math:ceil":oe(([t])=>(Ee(t),Oe(Math.ceil(t.value)))),"Math:clz32":oe(([t])=>(Ee(t),Oe(Math.clz32(t.value)))),"Math:cos":oe(([t])=>(Ee(t),Oe(Math.cos(t.value)))),"Math:cosh":oe(([t])=>(Ee(t),Oe(Math.cosh(t.value)))),"Math:exp":oe(([t])=>(Ee(t),Oe(Math.exp(t.value)))),"Math:expm1":oe(([t])=>(Ee(t),Oe(Math.expm1(t.value)))),"Math:floor":oe(([t])=>(Ee(t),Oe(Math.floor(t.value)))),"Math:fround":oe(([t])=>(Ee(t),Oe(Math.fround(t.value)))),"Math:hypot":oe(([t])=>{eo(t);const r=[];for(const e of t.value)Ee(e),r.push(e.value);return Oe(Math.hypot(...r))}),"Math:imul":oe(([t,r])=>(Ee(t),Ee(r),Oe(Math.imul(t.value,r.value)))),"Math:log":oe(([t])=>(Ee(t),Oe(Math.log(t.value)))),"Math:log1p":oe(([t])=>(Ee(t),Oe(Math.log1p(t.value)))),"Math:log10":oe(([t])=>(Ee(t),Oe(Math.log10(t.value)))),"Math:log2":oe(([t])=>(Ee(t),Oe(Math.log2(t.value)))),"Math:max":oe(([t,r])=>(Ee(t),Ee(r),Oe(Math.max(t.value,r.value)))),"Math:min":oe(([t,r])=>(Ee(t),Ee(r),Oe(Math.min(t.value,r.value)))),"Math:pow":oe(([t,r])=>(Ee(t),Ee(r),Oe(Math.pow(t.value,r.value)))),"Math:round":oe(([t])=>(Ee(t),Oe(Math.round(t.value)))),"Math:sign":oe(([t])=>(Ee(t),Oe(Math.sign(t.value)))),"Math:sin":oe(([t])=>(Ee(t),Oe(Math.sin(t.value)))),"Math:sinh":oe(([t])=>(Ee(t),Oe(Math.sinh(t.value)))),"Math:sqrt":oe(([t])=>{Ee(t);const r=Math.sqrt(t.value);return Oe(r)}),"Math:tan":oe(([t])=>(Ee(t),Oe(Math.tan(t.value)))),"Math:tanh":oe(([t])=>(Ee(t),Oe(Math.tanh(t.value)))),"Math:trunc":oe(([t])=>(Ee(t),Oe(Math.trunc(t.value)))),"Math:rnd":oe(([t,r])=>{if(t&&t.type==="num"&&r&&r.type==="num"){const e=Dh.instance.generateRandomIntegerInRange(t.value,r.value);return e===null?wt:Oe(e)}return Oe(Dh.instance.generateNumber0To1())}),"Math:gen_rng":oe(async([t,r])=>{Sn(t);let e="chacha20";if((r==null?void 0:r.type)==="obj"){const s=r.value.get("algorithm");if((s==null?void 0:s.type)!=="str")throw new Zt("`options.algorithm` must be string.");e=s.value}else if((r==null?void 0:r.type)!==void 0)throw new Zt("`options` must be an object if specified.");if(t.type!=="num"&&t.type!=="str"&&t.type!=="null")throw new Zt("`seed` must be either number or string if specified.");switch(e){case"rc4_legacy":return tb(t);case"rc4":return rb(t);case"chacha20":return await sb(t);default:throw new Zt("`options.algorithm` must be one of these: `chacha20`, `rc4`, or `rc4_legacy`.")}}),"Num:from_hex":oe(([t])=>($r(t),Oe(parseInt(t.value,16)))),"Str:lf":Kt(`
`),"Str:lt":oe(([t,r])=>($r(t),$r(r),t.value<r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:gt":oe(([t,r])=>($r(t),$r(r),t.value>r.value?Oe(-1):t.value===r.value?Oe(0):Oe(1))),"Str:from_codepoint":oe(([t])=>(Ee(t),Kt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":oe(([t])=>(eo(t),Kt(Array.from(t.value.map(r=>(Ee(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":oe(([t])=>(eo(t),Kt(Tx.decode(Uint8Array.from(t.value.map(r=>(Ee(r),r.value))))))),"Uri:encode_full":oe(([t])=>($r(t),Kt(encodeURI(t.value)))),"Uri:encode_component":oe(([t])=>($r(t),Kt(encodeURIComponent(t.value)))),"Uri:decode_full":oe(([t])=>($r(t),Kt(decodeURI(t.value)))),"Uri:decode_component":oe(([t])=>($r(t),Kt(decodeURIComponent(t.value)))),"Arr:create":oe(([t,r])=>{Ee(t);try{return Ir(Array(t.value).fill(r??wt))}catch(e){throw t.value<0?new Zt("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new Zt("Arr:create expected integer, got non-integer")}}),"Obj:keys":oe(([t])=>(Qi(t),Ir(Array.from(t.value.keys()).map(r=>Kt(r))))),"Obj:vals":oe(([t])=>(Qi(t),Ir(Array.from(t.value.values())))),"Obj:kvs":oe(([t])=>(Qi(t),Ir(Array.from(t.value.entries()).map(([r,e])=>Ir([Kt(r),e]))))),"Obj:get":oe(([t,r])=>(Qi(t),$r(r),t.value.get(r.value)??wt)),"Obj:set":oe(([t,r,e])=>(Qi(t),$r(r),Sn(e),t.value.set(r.value,e),wt)),"Obj:has":oe(([t,r])=>(Qi(t),$r(r),ef(t.value.has(r.value)))),"Obj:copy":oe(([t])=>(Qi(t),Rh(new Map(t.value)))),"Obj:merge":oe(([t,r])=>(Qi(t),Qi(r),Rh(new Map([...t.value,...r.value])))),"Error:create":oe(([t,r])=>($r(t),oh(t.value,r))),"Async:interval":oe(async([t,r,e],s)=>{Ee(t),ds(r),e&&(Cn(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),oe(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":oe(async([t,r],e)=>{Ee(t),ds(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),oe(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})};var Af={},ab=()=>{const t="\\ud800-\\udfff",C="\\u0300-\\u036f"+"\\ufe20-\\ufe2f"+"\\u20d0-\\u20ff"+"\\u1ab0-\\u1aff"+"\\u1dc0-\\u1dff",P="\\ufe0e\\ufe0f",E="\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93",N=`[${t}]`,S=`[${C}]`,B="\\ud83c[\\udffb-\\udfff]",L=`(?:${S}|${B})`,Z=`[^${t}]`,ge="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",le="[\\ud800-\\udbff][\\udc00-\\udfff]",pe="\\u200d",be="(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)",J=`[${E}]`,K=`${L}?`,W=`[${P}]?`,Q=`(?:${pe}(?:${[Z,ge,le].join("|")})${W+K})*`,re=W+K+Q,ie=`(?:${[`${Z}${S}?`,S,ge,le,N,J].join("|")})`;return new RegExp(`${be}|${B}(?=${B})|${ie+re}`,"g")},ib=qi&&qi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});var tp=ib(ab);function cv(t){if(typeof t!="string")throw new Error("A string is expected as input");return t.match(tp.default())||[]}var Zs=Af.toArray=cv;function xg(t){if(typeof t!="string")throw new Error("Input must be a string");var r=t.match(tp.default());return r===null?0:r.length}var Cf=Af.length=xg;function ww(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");(typeof r!="number"||r<0)&&(r=0),typeof e=="number"&&e<0&&(e=0);var s=t.match(tp.default());return s?s.slice(r,e).join(""):""}var _f=Af.substring=ww;function lb(t,r,e){if(r===void 0&&(r=0),typeof t!="string")throw new Error("Input must be a string");var s=xg(t);if(typeof r!="number"&&(r=parseInt(r,10)),r>=s)return"";r<0&&(r+=s);var v;typeof e>"u"?v=s:(typeof e!="number"&&(e=parseInt(e,10)),v=e>=0?e+r:r);var d=t.match(tp.default());return d?d.slice(r,v).join(""):""}Af.substr=lb;function ub(t,r,e,s){if(r===void 0&&(r=16),e===void 0&&(e="#"),s===void 0&&(s="right"),typeof t!="string"||typeof r!="number")throw new Error("Invalid arguments specified");if(["left","right"].indexOf(s)===-1)throw new Error("Pad position should be either left or right");typeof e!="string"&&(e=String(e));var v=xg(t);if(v>r)return ww(t,0,r);if(v<r){var d=e.repeat(r-v);return s==="left"?d+t:t+d}return t}Af.limit=ub;function ob(t,r,e){if(e===void 0&&(e=0),typeof t!="string")throw new Error("Input must be a string");if(t==="")return r===""?0:-1;e=Number(e),e=isNaN(e)?0:e,r=String(r);var s=cv(t);if(e>=s.length)return r===""?s.length:-1;if(r==="")return e;var v=cv(r),d=!1,C;for(C=e;C<s.length;C+=1){for(var P=0;P<v.length&&v[P]===s[C+P];)P+=1;if(P===v.length&&v[P-1]===s[C+P-1]){d=!0;break}}return d?C:-1}var Pf=Af.indexOf=ob;const xd={num:{to_str:t=>oe(async(r,e)=>Kt(t.value.toString())),to_hex:t=>oe(async(r,e)=>Kt(t.value.toString(16)))},str:{to_num:t=>oe(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?wt:Oe(s)}),to_arr:t=>oe(async(r,e)=>Ir(Zs(t.value).map(s=>Kt(s)))),to_unicode_arr:t=>oe(async(r,e)=>Ir([...t.value].map(s=>Kt(s)))),to_unicode_codepoint_arr:t=>oe(async(r,e)=>Ir([...t.value].map(s=>{const v=s.codePointAt(0);return Oe(v??s.charCodeAt(0))}))),to_char_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(s=>Kt(s)))),to_charcode_arr:t=>oe(async(r,e)=>Ir(t.value.split("").map(s=>Oe(s.charCodeAt(0))))),to_utf8_byte_arr:t=>oe(async(r,e)=>Ir(Array.from(dw.encode(t.value)).map(s=>Oe(s)))),len:t=>Oe(Cf(t.value)),replace:t=>oe(async([r,e],s)=>($r(r),$r(e),Kt(t.value.split(r.value).join(e.value)))),index_of:t=>oe(async([r,e],s)=>{$r(r),e&&Ee(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Oe(Pf(t.value,r.value,v))}),incl:t=>oe(async([r],e)=>($r(r),t.value.includes(r.value)?Ks:Ws)),trim:t=>oe(async(r,e)=>Kt(t.value.trim())),upper:t=>oe(async(r,e)=>Kt(t.value.toUpperCase())),lower:t=>oe(async(r,e)=>Kt(t.value.toLowerCase())),split:t=>oe(async([r],e)=>(r&&$r(r),Ir(r?t.value.split(r?r.value:"").map(s=>Kt(s)):Zs(t.value).map(s=>Kt(s))))),slice:t=>oe(async([r,e],s)=>(Ee(r),Ee(e),Kt(_f(t.value,r.value,e.value)))),pick:t=>oe(async([r],e)=>{Ee(r);const v=Zs(t.value)[r.value];return v?Kt(v):wt}),charcode_at:t=>oe(([r],e)=>{Ee(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?wt:Oe(s)}),codepoint_at:t=>oe(([r],e)=>{Ee(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?wt:Oe(s)}),starts_with:t=>oe(async([r,e],s)=>{if($r(r),!r.value)return Ks;e&&Ee(e);const v=(e==null?void 0:e.value)??0;if(v<-t.value.length||v>t.value.length)return Ws;const d=v>=0?v:t.value.length+v;return t.value.startsWith(r.value,d)?Ks:Ws}),ends_with:t=>oe(async([r,e],s)=>{if($r(r),!r.value)return Ks;e&&Ee(e);const v=(e==null?void 0:e.value)??t.value.length;if(v<-t.value.length||v>t.value.length)return Ws;const d=v>=0?v:t.value.length+v;return t.value.endsWith(r.value,d)?Ks:Ws}),pad_start:t=>oe(([r,e],s)=>{Ee(r);const v=e?($r(e),e.value):" ";return Kt(t.value.padStart(r.value,v))}),pad_end:t=>oe(([r,e],s)=>{Ee(r);const v=e?($r(e),e.value):" ";return Kt(t.value.padEnd(r.value,v))})},arr:{len:t=>Oe(t.value.length),push:t=>oe(async([r],e)=>(Sn(r),t.value.push(r),t)),unshift:t=>oe(async([r],e)=>(Sn(r),t.value.unshift(r),t)),pop:t=>oe(async(r,e)=>t.value.pop()??wt),shift:t=>oe(async(r,e)=>t.value.shift()??wt),concat:t=>oe(async([r],e)=>(eo(r),Ir(t.value.concat(r.value)))),slice:t=>oe(async([r,e],s)=>(Ee(r),Ee(e),Ir(t.value.slice(r.value,e.value)))),join:t=>oe(async([r],e)=>(r&&$r(r),Kt(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>oe(async([r],e)=>{ds(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,Oe(d)]));return Ir(await Promise.all(s))}),filter:t=>oe(async([r],e)=>{ds(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,Oe(v)]);Cn(C),C.value&&s.push(d)}return Ir(s)}),reduce:t=>oe(async([r,e],s)=>{ds(r);const v=e!=null;if(!v&&t.value.length===0)throw new Zt("Reduce of empty array without initial value");let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,Oe(C)])}return d}),find:t=>oe(async([r],e)=>{ds(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Oe(s)]);if(Cn(d),d.value)return v}return wt}),incl:t=>oe(async([r],e)=>(Sn(r),t.value.some(s=>Uf(r,s))?Ks:Ws)),index_of:t=>oe(async([r,e],s)=>{if(Sn(r),e){Ee(e);const v=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>Uf(C,r));return Oe(d<0?d:d+v)}else return Oe(t.value.findIndex(v=>Uf(v,r)))}),reverse:t=>oe(async(r,e)=>(t.value.reverse(),wt)),copy:t=>oe(async(r,e)=>Ir([...t.value])),sort:t=>oe(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=s(d.slice(0,P),C),N=s(d.slice(P),C),[S,B]=await Promise.all([E,N]);return v(S,B,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Ee(Z),Z.value<=0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return ds(r),eo(t),t.value=await s(t.value,r),t}),fill:t=>oe(async([r,e,s],v)=>{const d=r??wt,C=e&&(Ee(e),e.value),P=s&&(Ee(s),s.value);return t.value.fill(d,C,P),t}),repeat:t=>oe(async([r],e)=>{Ee(r);try{return Ir(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new Zt("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new Zt("arr.repeat expected integer, got non-integer")}}),splice:t=>oe(async([r,e,s],v)=>{Ee(r);const d=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(Ee(e),e.value):t.value.length-d,P=s!=null?(eo(s),s.value):[],E=t.value.splice(d,C,...P);return Ir(E)}),flat:t=>oe(async([r],e)=>{if(r=r??Oe(1),Ee(r),!Number.isInteger(r.value))throw new Zt("arr.flat expected integer, got non-integer");if(r.value<0)throw new Zt("arr.flat expected non-negative number, got negative");const s=(d,C,P)=>{if(C===0){P.push(...d);return}for(const E of d)jh(E)?s(E.value,C-1,P):P.push(E)},v=[];return s(t.value,r.value,v),Ir(v)}),flat_map:t=>oe(async([r],e)=>{ds(r);const s=t.value.map(async(d,C)=>{const P=await e.call(r,[d,Oe(C)]);return jh(P)?P.value:P}),v=await Promise.all(s);return Ir(v.flat())}),every:t=>oe(async([r],e)=>{ds(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Oe(s)]);if(Cn(d),!d.value)return Ws}return Ks}),some:t=>oe(async([r],e)=>{ds(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Oe(s)]);if(Cn(d),d.value)return Ks}return Ws}),insert:t=>oe(async([r,e],s)=>(Ee(r),Sn(e),t.value.splice(r.value,0,e),wt)),remove:t=>oe(async([r],e)=>(Ee(r),t.value.splice(r.value,1)[0]??wt)),at:t=>oe(async([r,e],s)=>(Ee(r),t.value.at(r.value)??e??wt))},error:{name:t=>Kt(t.value),info:t=>t.info??wt}};function fb(t,r){if(Object.hasOwn(xd,t.type)){const e=xd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Zt(`No such prop (${r}) in ${t.type}.`)}else throw new Zt(`Cannot read prop of ${t.type}. (reading ${r})`)}const cb={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var En=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const mw=300,hb=mw-1;let Qs=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const s={print:oe(([v])=>{Sn(v),this.opts.out&&this.opts.out(v)}),readline:oe(async v=>{const d=v[0];if($r(d),this.opts.in==null)return wt;const C=await this.opts.in(d.value);return Kt(C)})};this.vars=Object.fromEntries(Object.entries({...r,...nb,...s}).map(([v,d])=>[v,cb.const(d)])),this.scope=new Wu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),oh("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof ac?this.opts.err(r):this.opts.err(new dd(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const v of r.members)switch(v.type){case"def":{if(v.dest.type!=="identifier")throw new Ap("Destructuring assignment is invalid in namespace declarations.",v.loc.start);if(v.mut)throw new Ap('No "var" in namespace declaration: '+v.dest.name,v.loc.start);const d=await this._eval(v.expr,s);await this.define(s,v.dest,d,v.mut);break}case"ns":break;default:{const C=v;throw new Ap("invalid ns member type: "+C.type,C.loc.start)}}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??wt;{const s=r.scope.createChildScope();for(const v of r.args.keys()){const d=r.args[v];d.default||Sn(e[v]),this.define(s,d.dest,e[v]??d.default,!0)}return Ex(await this._run(r.statements,s))}}_eval(r,e){return this.__eval(r,e).catch(s=>{if(s.pos)throw s;{const v=s instanceof ac?s:new dd(s);throw v.pos=r.loc.start,v.message=`${v.message} (Line ${v.pos.line}, Column ${v.pos.column})`,v}})}async __eval(r,e){if(this.stop)return wt;if(this.stepCount%mw===hb&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Zt("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);ds(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(Cn(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Cn(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return wt}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Uf(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):wt}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return wt}case"for":{if(r.times){const s=await this._eval(r.times,e);Ee(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Ee(s),Ee(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Oe(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return wt}case"each":{const s=await this._eval(r.items,e);eo(s);for(const v of s.value){const d=e.createChildScope();this.define(d,r.var,v,!1);const C=await this._eval(r.for,d);if(C.type==="break")break;if(C.type==="return")return C}return wt}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return await this.define(e,r.dest,s,r.mut),wt}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),wt}case"addAssign":{const s=await this._eval(r.dest,e);Ee(s);const v=await this._eval(r.expr,e);return Ee(v),await this.assign(e,r.dest,Oe(s.value+v.value)),wt}case"subAssign":{const s=await this._eval(r.dest,e);Ee(s);const v=await this._eval(r.expr,e);return Ee(v),await this.assign(e,r.dest,Oe(s.value-v.value)),wt}case"null":return wt;case"bool":return ef(r.value);case"num":return Oe(r.value);case"str":return Kt(r.value);case"arr":return Ir(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const[v,d]of r.value)s.set(v,await this._eval(d,e));return Rh(s)}case"prop":{const s=await this._eval(r.target,e);return _p(s)?s.value.has(r.name)?s.value.get(r.name):wt:fb(s,r.name)}case"index":{const s=await this._eval(r.target,e),v=await this._eval(r.index,e);if(jh(s)){Ee(v);const d=s.value[v.value];if(d===void 0)throw new yd(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}else{if(_p(s))return $r(v),s.value.has(v.value)?s.value.get(v.value):wt;throw new Zt(`Cannot read prop (${Bf(v)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return Cn(s),ef(!s.value)}case"fn":return Cx(await Promise.all(r.args.map(async s=>({dest:s.dest,default:s.default?await this._eval(s.default,e):s.optional?wt:void 0}))),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return ef(e.exists(r.identifier.name));case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);s+=Bf(d)}return Kt(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),_x(s)}case"break":return this.log("block:break",{scope:e.name}),Px();case"continue":return this.log("block:continue",{scope:e.name}),kx();case"ns":return wt;case"meta":return wt;case"pow":{const s=e.get("Core:pow");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"mul":{const s=e.get("Core:mul");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"div":{const s=e.get("Core:div");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"rem":{const s=e.get("Core:mod");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"add":{const s=e.get("Core:add");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"sub":{const s=e.get("Core:sub");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"lt":{const s=e.get("Core:lt");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"lteq":{const s=e.get("Core:lteq");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"gt":{const s=e.get("Core:gt");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"gteq":{const s=e.get("Core:gteq");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"eq":{const s=e.get("Core:eq");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"neq":{const s=e.get("Core:neq");ds(s);const v=await this._eval(r.left,e),d=await this._eval(r.right,e);return this._fn(s,[v,d])}case"and":{const s=await this._eval(r.left,e);if(Cn(s),s.value){const v=await this._eval(r.right,e);return Cn(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(Cn(s),s.value)return s;{const v=await this._eval(r.right,e);return Cn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=wt;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async define(r,e,s,v){switch(e.type){case"identifier":{r.add(e.name,{isMutable:v,value:s});break}case"arr":{eo(s),await Promise.all(e.value.map((d,C)=>this.define(r,d,s.value[C]??wt,v)));break}case"obj":{Qi(s),await Promise.all([...e.value].map(([d,C])=>this.define(r,C,s.value.get(d)??wt,v)));break}default:throw new Zt("The left-hand side of an definition expression must be a variable.")}}async assign(r,e,s){switch(e.type){case"identifier":{r.assign(e.name,s);break}case"index":{const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(jh(v)){if(Ee(d),v.value[d.value]===void 0)throw new yd(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=s}else if(_p(v))$r(d),v.value.set(d.value,s);else throw new Zt(`Cannot read prop (${Bf(d)}) of ${v.type}.`);break}case"prop":{const v=await this._eval(e.target,r);Qi(v),v.value.set(e.name,s);break}case"arr":{eo(s),await Promise.all(e.value.map((v,d)=>this.assign(r,v,s.value[d]??wt)));break}case"obj":{Qi(s),await Promise.all([...e.value].map(([v,d])=>this.assign(r,d,s.value.get(v)??wt)));break}default:throw new Zt("The left-hand side of an assignment expression must be a variable or a property/index access.")}}};En([Gr],Qs.prototype,"exec",null);En([Gr],Qs.prototype,"execFn",null);En([Gr],Qs.prototype,"execFnSimple",null);En([Gr],Qs.prototype,"handleError",null);En([Gr],Qs.prototype,"log",null);En([Gr],Qs.prototype,"collectNs",null);En([Gr],Qs.prototype,"collectNsMember",null);En([Gr],Qs.prototype,"_fn",null);En([Gr],Qs.prototype,"_eval",null);En([Gr],Qs.prototype,"__eval",null);En([Gr],Qs.prototype,"_run",null);En([Gr],Qs.prototype,"registerAbortHandler",null);En([Gr],Qs.prototype,"unregisterAbortHandler",null);En([Gr],Qs.prototype,"abort",null);En([Gr],Qs.prototype,"define",null);En([Gr],Qs.prototype,"assign",null);En([Gr],Qs,"collectMetadata",null);class pb{constructor(r,e){he(this,"pages");he(this,"firstPageIndex");he(this,"lastPageIndex");he(this,"pageIndex");he(this,"address");he(this,"_char");he(this,"line");he(this,"column");this.pages=new Map,this.pages.set(0,r),this.firstPageIndex=0,this.lastPageIndex=0,this.pageIndex=0,this.address=0,this.line=(e==null?void 0:e.line)??0,this.column=(e==null?void 0:e.column)??0,this.moveNext()}get eof(){return this.endOfPage&&this.isLastPage}get char(){if(this.eof)throw new Error("end of stream");return this._char}getPos(){return{line:this.line+1,column:this.column+1}}next(){!this.eof&&this._char===`
`?(this.line++,this.column=0):this.column++,this.incAddr(),this.moveNext()}prev(){this.decAddr(),this.movePrev()}get isFirstPage(){return this.pageIndex<=this.firstPageIndex}get isLastPage(){return this.pageIndex>=this.lastPageIndex}get endOfPage(){const r=this.pages.get(this.pageIndex);return this.address>=r.length}moveNext(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.incAddr(),this.loadChar();continue}break}}incAddr(){this.endOfPage?this.isLastPage||(this.pageIndex++,this.address=0):this.address++}movePrev(){for(this.loadChar();;){if(!this.eof&&this._char==="\r"){this.decAddr(),this.loadChar();continue}break}}decAddr(){this.address>0?this.address--:this.isFirstPage||(this.pageIndex--,this.address=this.pages.get(this.pageIndex).length-1)}loadChar(){this.eof?this._char=void 0:this._char=this.pages.get(this.pageIndex)[this.address]}}var q;(function(t){t[t.EOF=0]="EOF",t[t.NewLine=1]="NewLine",t[t.Identifier=2]="Identifier",t[t.NumberLiteral=3]="NumberLiteral",t[t.StringLiteral=4]="StringLiteral",t[t.Template=5]="Template",t[t.TemplateStringElement=6]="TemplateStringElement",t[t.TemplateExprElement=7]="TemplateExprElement",t[t.NullKeyword=8]="NullKeyword",t[t.TrueKeyword=9]="TrueKeyword",t[t.FalseKeyword=10]="FalseKeyword",t[t.EachKeyword=11]="EachKeyword",t[t.ForKeyword=12]="ForKeyword",t[t.LoopKeyword=13]="LoopKeyword",t[t.DoKeyword=14]="DoKeyword",t[t.WhileKeyword=15]="WhileKeyword",t[t.BreakKeyword=16]="BreakKeyword",t[t.ContinueKeyword=17]="ContinueKeyword",t[t.MatchKeyword=18]="MatchKeyword",t[t.CaseKeyword=19]="CaseKeyword",t[t.DefaultKeyword=20]="DefaultKeyword",t[t.IfKeyword=21]="IfKeyword",t[t.ElifKeyword=22]="ElifKeyword",t[t.ElseKeyword=23]="ElseKeyword",t[t.ReturnKeyword=24]="ReturnKeyword",t[t.EvalKeyword=25]="EvalKeyword",t[t.VarKeyword=26]="VarKeyword",t[t.LetKeyword=27]="LetKeyword",t[t.ExistsKeyword=28]="ExistsKeyword",t[t.Not=29]="Not",t[t.NotEq=30]="NotEq",t[t.OpenSharpBracket=31]="OpenSharpBracket",t[t.Sharp3=32]="Sharp3",t[t.Percent=33]="Percent",t[t.And2=34]="And2",t[t.OpenParen=35]="OpenParen",t[t.CloseParen=36]="CloseParen",t[t.Asterisk=37]="Asterisk",t[t.Plus=38]="Plus",t[t.PlusEq=39]="PlusEq",t[t.Comma=40]="Comma",t[t.Minus=41]="Minus",t[t.MinusEq=42]="MinusEq",t[t.Dot=43]="Dot",t[t.Slash=44]="Slash",t[t.Colon=45]="Colon",t[t.Colon2=46]="Colon2",t[t.SemiColon=47]="SemiColon",t[t.Lt=48]="Lt",t[t.LtEq=49]="LtEq",t[t.Out=50]="Out",t[t.Eq=51]="Eq",t[t.Eq2=52]="Eq2",t[t.Arrow=53]="Arrow",t[t.Gt=54]="Gt",t[t.GtEq=55]="GtEq",t[t.Question=56]="Question",t[t.At=57]="At",t[t.OpenBracket=58]="OpenBracket",t[t.BackSlash=59]="BackSlash",t[t.CloseBracket=60]="CloseBracket",t[t.Hat=61]="Hat",t[t.OpenBrace=62]="OpenBrace",t[t.Or2=63]="Or2",t[t.CloseBrace=64]="CloseBrace"})(q||(q={}));class vb{constructor(r,e,s=!1,v,d){he(this,"kind");he(this,"pos");he(this,"hasLeftSpacing");he(this,"value");he(this,"children");this.kind=r,this.pos=e,this.hasLeftSpacing=s,this.value=v,this.children=d}}function rt(t,r,e){return new vb(t,r,e==null?void 0:e.hasLeftSpacing,e==null?void 0:e.value,e==null?void 0:e.children)}const bd=[" ","	"],gb=["\r",`
`],Ad=/^[0-9]$/,db=/^[A-Za-z0-9_]$/;class yb{constructor(r){he(this,"stream");he(this,"_tokens",[]);typeof r=="string"?this.stream=new pb(r):this.stream=r,this._tokens.push(this.readToken())}getToken(){return this._tokens[0]}is(r){return this.getTokenKind()===r}getTokenKind(){return this.getToken().kind}getTokenValue(){return this.getToken().value}getPos(){return this.getToken().pos}next(){this._tokens[0].kind!==q.EOF&&(this._tokens.shift(),this._tokens.length===0&&this._tokens.push(this.readToken()))}lookahead(r){for(;this._tokens.length<=r;)this._tokens.push(this.readToken());return this._tokens[r]}expect(r){if(!this.is(r))throw new Wt(`unexpected token: ${q[this.getTokenKind()]}`,this.getPos())}readToken(){let r=!1;for(;;){if(this.stream.eof)return rt(q.EOF,this.stream.getPos(),{hasLeftSpacing:r});if(bd.includes(this.stream.char)){this.stream.next(),r=!0;continue}const e=this.stream.getPos();if(gb.includes(this.stream.char))return this.stream.next(),rt(q.NewLine,e,{hasLeftSpacing:r});switch(this.stream.char){case"!":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.NotEq,e,{hasLeftSpacing:r})):rt(q.Not,e,{hasLeftSpacing:r});case'"':case"'":return this.readStringLiteral(r);case"#":if(this.stream.next(),!this.stream.eof&&this.stream.char==="#"){if(this.stream.next(),!this.stream.eof&&this.stream.char==="#")return this.stream.next(),rt(q.Sharp3,e,{hasLeftSpacing:r});throw new Wt('invalid sequence of characters: "##"',e)}else{if(!this.stream.eof&&this.stream.char==="[")return this.stream.next(),rt(q.OpenSharpBracket,e,{hasLeftSpacing:r});throw new Wt('invalid character: "#"',e)}case"%":return this.stream.next(),rt(q.Percent,e,{hasLeftSpacing:r});case"&":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="&")return this.stream.next(),rt(q.And2,e,{hasLeftSpacing:r});throw new Wt('invalid character: "&"',e)}case"(":return this.stream.next(),rt(q.OpenParen,e,{hasLeftSpacing:r});case")":return this.stream.next(),rt(q.CloseParen,e,{hasLeftSpacing:r});case"*":return this.stream.next(),rt(q.Asterisk,e,{hasLeftSpacing:r});case"+":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.PlusEq,e,{hasLeftSpacing:r})):rt(q.Plus,e,{hasLeftSpacing:r});case",":return this.stream.next(),rt(q.Comma,e,{hasLeftSpacing:r});case"-":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.MinusEq,e,{hasLeftSpacing:r})):rt(q.Minus,e,{hasLeftSpacing:r});case".":return this.stream.next(),rt(q.Dot,e,{hasLeftSpacing:r});case"/":if(this.stream.next(),!this.stream.eof&&this.stream.char==="*"){this.stream.next(),this.skipCommentRange();continue}else if(!this.stream.eof&&this.stream.char==="/"){this.stream.next(),this.skipCommentLine();continue}else return rt(q.Slash,e,{hasLeftSpacing:r});case":":return this.stream.next(),!this.stream.eof&&this.stream.char===":"?(this.stream.next(),rt(q.Colon2,e,{hasLeftSpacing:r})):rt(q.Colon,e,{hasLeftSpacing:r});case";":return this.stream.next(),rt(q.SemiColon,e,{hasLeftSpacing:r});case"<":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.LtEq,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===":"?(this.stream.next(),rt(q.Out,e,{hasLeftSpacing:r})):rt(q.Lt,e,{hasLeftSpacing:r});case"=":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.Eq2,e,{hasLeftSpacing:r})):!this.stream.eof&&this.stream.char===">"?(this.stream.next(),rt(q.Arrow,e,{hasLeftSpacing:r})):rt(q.Eq,e,{hasLeftSpacing:r});case">":return this.stream.next(),!this.stream.eof&&this.stream.char==="="?(this.stream.next(),rt(q.GtEq,e,{hasLeftSpacing:r})):rt(q.Gt,e,{hasLeftSpacing:r});case"?":return this.stream.next(),rt(q.Question,e,{hasLeftSpacing:r});case"@":return this.stream.next(),rt(q.At,e,{hasLeftSpacing:r});case"[":return this.stream.next(),rt(q.OpenBracket,e,{hasLeftSpacing:r});case"\\":return this.stream.next(),rt(q.BackSlash,e,{hasLeftSpacing:r});case"]":return this.stream.next(),rt(q.CloseBracket,e,{hasLeftSpacing:r});case"^":return this.stream.next(),rt(q.Hat,e,{hasLeftSpacing:r});case"`":return this.readTemplate(r);case"{":return this.stream.next(),rt(q.OpenBrace,e,{hasLeftSpacing:r});case"|":{if(this.stream.next(),!this.stream.eof&&this.stream.char==="|")return this.stream.next(),rt(q.Or2,e,{hasLeftSpacing:r});throw new Wt('invalid character: "|"',e)}case"}":return this.stream.next(),rt(q.CloseBrace,e,{hasLeftSpacing:r});default:{const s=this.tryReadDigits(r);if(s)return s;const v=this.tryReadWord(r);if(v)return v;throw new Wt(`invalid character: "${this.stream.char}"`,e)}}break}}tryReadWord(r){let e="";const s=this.stream.getPos();for(;!this.stream.eof&&db.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length!==0)switch(e){case"null":return rt(q.NullKeyword,s,{hasLeftSpacing:r});case"true":return rt(q.TrueKeyword,s,{hasLeftSpacing:r});case"false":return rt(q.FalseKeyword,s,{hasLeftSpacing:r});case"each":return rt(q.EachKeyword,s,{hasLeftSpacing:r});case"for":return rt(q.ForKeyword,s,{hasLeftSpacing:r});case"loop":return rt(q.LoopKeyword,s,{hasLeftSpacing:r});case"do":return rt(q.DoKeyword,s,{hasLeftSpacing:r});case"while":return rt(q.WhileKeyword,s,{hasLeftSpacing:r});case"break":return rt(q.BreakKeyword,s,{hasLeftSpacing:r});case"continue":return rt(q.ContinueKeyword,s,{hasLeftSpacing:r});case"match":return rt(q.MatchKeyword,s,{hasLeftSpacing:r});case"case":return rt(q.CaseKeyword,s,{hasLeftSpacing:r});case"default":return rt(q.DefaultKeyword,s,{hasLeftSpacing:r});case"if":return rt(q.IfKeyword,s,{hasLeftSpacing:r});case"elif":return rt(q.ElifKeyword,s,{hasLeftSpacing:r});case"else":return rt(q.ElseKeyword,s,{hasLeftSpacing:r});case"return":return rt(q.ReturnKeyword,s,{hasLeftSpacing:r});case"eval":return rt(q.EvalKeyword,s,{hasLeftSpacing:r});case"var":return rt(q.VarKeyword,s,{hasLeftSpacing:r});case"let":return rt(q.LetKeyword,s,{hasLeftSpacing:r});case"exists":return rt(q.ExistsKeyword,s,{hasLeftSpacing:r});default:return rt(q.Identifier,s,{hasLeftSpacing:r,value:e})}}tryReadDigits(r){let e="",s="";const v=this.stream.getPos();for(;!this.stream.eof&&Ad.test(this.stream.char);)e+=this.stream.char,this.stream.next();if(e.length===0)return;if(!this.stream.eof&&this.stream.char==="."){for(this.stream.next();!this.stream.eof&&Ad.test(this.stream.char);)s+=this.stream.char,this.stream.next();if(s.length===0)throw new Wt("digit expected",v)}let d;return s.length>0?d=e+"."+s:d=e,rt(q.NumberLiteral,v,{hasLeftSpacing:r,value:d})}readStringLiteral(r){let e="";const s=this.stream.char;let v="string";const d=this.stream.getPos();for(this.stream.next();v!=="finish";)switch(v){case"string":{if(this.stream.eof)throw new Wt("unexpected EOF",d);if(this.stream.char==="\\"){this.stream.next(),v="escape";break}if(this.stream.char===s){this.stream.next(),v="finish";break}e+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Wt("unexpected EOF",d);e+=this.stream.char,this.stream.next(),v="string";break}}return rt(q.StringLiteral,d,{hasLeftSpacing:r,value:e})}readTemplate(r){const e=[];let s="",v=[],d="string";const C=this.stream.getPos();let P=C;for(this.stream.next();d!=="finish";)switch(d){case"string":{if(this.stream.eof)throw new Wt("unexpected EOF",C);if(this.stream.char==="\\"){this.stream.next(),d="escape";break}if(this.stream.char==="`"){this.stream.next(),s.length>0&&e.push(rt(q.TemplateStringElement,P,{hasLeftSpacing:r,value:s})),d="finish";break}if(this.stream.char==="{"){this.stream.next(),s.length>0&&(e.push(rt(q.TemplateStringElement,P,{hasLeftSpacing:r,value:s})),s=""),P=this.stream.getPos(),d="expr";break}s+=this.stream.char,this.stream.next();break}case"escape":{if(this.stream.eof)throw new Wt("unexpected EOF",C);s+=this.stream.char,this.stream.next(),d="string";break}case"expr":{if(this.stream.eof)throw new Wt("unexpected EOF",C);if(bd.includes(this.stream.char)){this.stream.next();continue}if(this.stream.char==="}"){e.push(rt(q.TemplateExprElement,P,{hasLeftSpacing:r,children:v})),P=this.stream.getPos(),v.push(rt(q.EOF,P)),v=[],d="string",this.stream.next();break}const E=this.readToken();v.push(E);break}}return rt(q.Template,C,{hasLeftSpacing:r,children:e})}skipCommentLine(){for(;!(this.stream.eof||this.stream.char===`
`);)this.stream.next()}skipCommentRange(){for(;!this.stream.eof;){if(this.stream.char==="*"){if(this.stream.next(),this.stream.char==="/"){this.stream.next();break}continue}this.stream.next()}}}function nt(t,r,e,s){const v={type:t};for(const d of Object.keys(r))r[d]!==void 0&&(v[d]=r[d]);return v.loc={start:e,end:s},v}function wb(t,r,e,s){return nt("call",{target:nt("identifier",{name:t},e,e),args:r},e,s)}class mb{constructor(r){he(this,"source");he(this,"index");he(this,"_token");this.source=r,this.index=0,this.load()}get eof(){return this.index>=this.source.length}getToken(){return this.eof?rt(q.EOF,{line:-1,column:-1}):this._token}is(r){return this.getTokenKind()===r}getTokenValue(){return this.getToken().value}getTokenKind(){return this.getToken().kind}getPos(){return this.getToken().pos}next(){this.eof||this.index++,this.load()}lookahead(r){return this.index+r<this.source.length?this.source[this.index+r]:rt(q.EOF,{line:-1,column:-1})}expect(r){if(!this.is(r))throw new Wt(`unexpected token: ${q[this.getTokenKind()]}`,this.getPos())}load(){this.eof?this._token=rt(q.EOF,{line:-1,column:-1}):this._token=this.source[this.index]}}function Br(t,r){return r?$w(t,!0):bg(t,0)}const Pp=[{opKind:"postfix",kind:q.OpenParen,bp:20},{opKind:"postfix",kind:q.OpenBracket,bp:20},{opKind:"infix",kind:q.Dot,lbp:18,rbp:19},{opKind:"infix",kind:q.Hat,lbp:17,rbp:16},{opKind:"prefix",kind:q.Plus,bp:14},{opKind:"prefix",kind:q.Minus,bp:14},{opKind:"prefix",kind:q.Not,bp:14},{opKind:"infix",kind:q.Asterisk,lbp:12,rbp:13},{opKind:"infix",kind:q.Slash,lbp:12,rbp:13},{opKind:"infix",kind:q.Percent,lbp:12,rbp:13},{opKind:"infix",kind:q.Plus,lbp:10,rbp:11},{opKind:"infix",kind:q.Minus,lbp:10,rbp:11},{opKind:"infix",kind:q.Lt,lbp:8,rbp:9},{opKind:"infix",kind:q.LtEq,lbp:8,rbp:9},{opKind:"infix",kind:q.Gt,lbp:8,rbp:9},{opKind:"infix",kind:q.GtEq,lbp:8,rbp:9},{opKind:"infix",kind:q.Eq2,lbp:6,rbp:7},{opKind:"infix",kind:q.NotEq,lbp:6,rbp:7},{opKind:"infix",kind:q.And2,lbp:4,rbp:5},{opKind:"infix",kind:q.Or2,lbp:2,rbp:3}];function $b(t,r){const e=t.getPos(),s=t.getTokenKind();t.next(),t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next());const v=bg(t,r),d=v.loc.end;switch(s){case q.Plus:{if(v.type==="num")return nt("num",{value:v.value},e,d);throw new Wt("currently, sign is only supported for number literal.",e)}case q.Minus:{if(v.type==="num")return nt("num",{value:-1*v.value},e,d);throw new Wt("currently, sign is only supported for number literal.",e)}case q.Not:return nt("not",{expr:v},e,d);default:throw new Wt(`unexpected token: ${q[s]}`,e)}}function xb(t,r,e){const s=t.getPos(),v=t.getTokenKind();if(t.next(),t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next()),v===q.Dot){t.expect(q.Identifier);const d=t.getTokenValue();return t.next(),nt("prop",{target:r,name:d},s,t.getPos())}else{const d=bg(t,e),C=t.getPos();switch(v){case q.Hat:return nt("pow",{left:r,right:d},s,C);case q.Asterisk:return nt("mul",{left:r,right:d},s,C);case q.Slash:return nt("div",{left:r,right:d},s,C);case q.Percent:return nt("rem",{left:r,right:d},s,C);case q.Plus:return nt("add",{left:r,right:d},s,C);case q.Minus:return nt("sub",{left:r,right:d},s,C);case q.Lt:return nt("lt",{left:r,right:d},s,C);case q.LtEq:return nt("lteq",{left:r,right:d},s,C);case q.Gt:return nt("gt",{left:r,right:d},s,C);case q.GtEq:return nt("gteq",{left:r,right:d},s,C);case q.Eq2:return nt("eq",{left:r,right:d},s,C);case q.NotEq:return nt("neq",{left:r,right:d},s,C);case q.And2:return nt("and",{left:r,right:d},s,C);case q.Or2:return nt("or",{left:r,right:d},s,C);default:throw new Wt(`unexpected token: ${q[v]}`,s)}}}function bb(t,r){const e=t.getPos(),s=t.getTokenKind();switch(s){case q.OpenParen:return Ab(t,r);case q.OpenBracket:{t.next();const v=Br(t,!1);return t.expect(q.CloseBracket),t.next(),nt("index",{target:r,index:v},e,t.getPos())}default:throw new Wt(`unexpected token: ${q[s]}`,e)}}function $w(t,r){const e=t.getPos();switch(t.getTokenKind()){case q.IfKeyword:{if(r)break;return Cb(t)}case q.At:{if(r)break;return _b(t)}case q.MatchKeyword:{if(r)break;return Pb(t)}case q.EvalKeyword:{if(r)break;return kb(t)}case q.ExistsKeyword:{if(r)break;return Eb(t)}case q.Template:{const s=[];if(r)break;for(const[v,d]of t.getToken().children.entries())switch(d.kind){case q.TemplateStringElement:{const C=t.getToken().children[v+1]??t.lookahead(1);s.push(nt("str",{value:d.value},d.pos,C.pos));break}case q.TemplateExprElement:{const C=new mb(d.children),P=Br(C,!1);C.expect(q.EOF),s.push(P);break}default:throw new Wt(`unexpected token: ${q[d.kind]}`,d.pos)}return t.next(),nt("tmpl",{tmpl:s},e,t.getPos())}case q.StringLiteral:{const s=t.getTokenValue();return t.next(),nt("str",{value:s},e,t.getPos())}case q.NumberLiteral:{const s=Number(t.getTokenValue());return t.next(),nt("num",{value:s},e,t.getPos())}case q.TrueKeyword:case q.FalseKeyword:{const s=t.is(q.TrueKeyword);return t.next(),nt("bool",{value:s},e,t.getPos())}case q.NullKeyword:return t.next(),nt("null",{},e,t.getPos());case q.OpenBrace:return Mb(t,r);case q.OpenBracket:return Sb(t,r);case q.Identifier:{if(r)break;return xw(t)}case q.OpenParen:{t.next();const s=Br(t,r);return t.expect(q.CloseParen),t.next(),s}}throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,e)}function Ab(t,r){const e=t.getPos(),s=[];for(t.expect(q.OpenParen),t.next(),t.is(q.NewLine)&&t.next();!t.is(q.CloseParen);)switch(s.push(Br(t,!1)),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.CloseParen:break;default:throw new Wt("separator expected",t.getPos())}return t.expect(q.CloseParen),t.next(),nt("call",{target:r,args:s},e,t.getPos())}function Cb(t){const r=t.getPos();t.expect(q.IfKeyword),t.next();const e=Br(t,!1),s=Ku(t);t.is(q.NewLine)&&[q.ElifKeyword,q.ElseKeyword].includes(t.lookahead(1).kind)&&t.next();const v=[];for(;t.is(q.ElifKeyword);){t.next();const C=Br(t,!1),P=Ku(t);t.is(q.NewLine)&&[q.ElifKeyword,q.ElseKeyword].includes(t.lookahead(1).kind)&&t.next(),v.push({cond:C,then:P})}let d;return t.is(q.ElseKeyword)&&(t.next(),d=Ku(t)),nt("if",{cond:e,then:s,elseif:v,else:d},r,t.getPos())}function _b(t){const r=t.getPos();t.expect(q.At),t.next();const e=bw(t);let s;t.is(q.Colon)&&(t.next(),s=vf(t));const v=Bc(t);return nt("fn",{args:e,retType:s,children:v},r,t.getPos())}function Pb(t){const r=t.getPos();t.expect(q.MatchKeyword),t.next();const e=Br(t,!1);t.expect(q.OpenBrace),t.next(),t.is(q.NewLine)&&t.next();const s=[];for(;!t.is(q.DefaultKeyword)&&!t.is(q.CloseBrace);){t.expect(q.CaseKeyword),t.next();const d=Br(t,!1);t.expect(q.Arrow),t.next();const C=Ku(t);switch(s.push({q:d,a:C}),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.DefaultKeyword:case q.CloseBrace:break;default:throw new Wt("separator expected",t.getPos())}}let v;if(t.is(q.DefaultKeyword))switch(t.next(),t.expect(q.Arrow),t.next(),v=Ku(t),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.CloseBrace:break;default:throw new Wt("separator expected",t.getPos())}return t.expect(q.CloseBrace),t.next(),nt("match",{about:e,qs:s,default:v},r,t.getPos())}function kb(t){const r=t.getPos();t.expect(q.EvalKeyword),t.next();const e=Bc(t);return nt("block",{statements:e},r,t.getPos())}function Eb(t){const r=t.getPos();t.expect(q.ExistsKeyword),t.next();const e=xw(t);return nt("exists",{identifier:e},r,t.getPos())}function xw(t){const r=t.getPos(),e=[];for(;;){if(e.length>0)if(t.is(q.Colon)){if(t.getToken().hasLeftSpacing)throw new Wt("Cannot use spaces in a reference.",t.getPos());if(t.next(),t.getToken().hasLeftSpacing)throw new Wt("Cannot use spaces in a reference.",t.getPos())}else break;t.expect(q.Identifier),e.push(t.getTokenValue()),t.next()}return nt("identifier",{name:e.join(":")},r,t.getPos())}function Mb(t,r){const e=t.getPos();for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();const s=new Map;for(;!t.is(q.CloseBrace);){t.expect(q.Identifier);const v=t.getTokenValue();t.next(),t.expect(q.Colon),t.next();const d=Br(t,r);switch(s.set(v,d),t.getTokenKind()){case q.NewLine:case q.Comma:{for(t.next();t.is(q.NewLine);)t.next();break}case q.CloseBrace:break;default:throw new Wt("separator expected",t.getPos())}}return t.expect(q.CloseBrace),t.next(),nt("obj",{value:s},e,t.getPos())}function Sb(t,r){const e=t.getPos();for(t.expect(q.OpenBracket),t.next();t.is(q.NewLine);)t.next();const s=[];for(;!t.is(q.CloseBracket);)switch(s.push(Br(t,r)),t.getTokenKind()){case q.NewLine:case q.Comma:{for(t.next();t.is(q.NewLine);)t.next();break}case q.CloseBracket:break;default:throw new Wt("separator expected",t.getPos())}return t.expect(q.CloseBracket),t.next(),nt("arr",{value:s},e,t.getPos())}function bg(t,r){let e;const s=t.getTokenKind(),v=Pp.find(d=>d.opKind==="prefix"&&d.kind===s);for(v!=null?e=$b(t,v.bp):e=$w(t,!1);;){t.is(q.BackSlash)&&(t.next(),t.expect(q.NewLine),t.next());const d=t.getTokenKind(),C=Pp.find(E=>E.opKind==="postfix"&&E.kind===d);if(C!=null){if(C.bp<r)break;if(!([q.OpenBracket,q.OpenParen].includes(d)&&t.getToken().hasLeftSpacing)){e=bb(t,e);continue}}const P=Pp.find(E=>E.opKind==="infix"&&E.kind===d);if(P!=null){if(P.lbp<r)break;e=xb(t,e,P.rbp);continue}break}return e}function Ag(t){if(t.is(q.Identifier)){const r=t.getPos(),e=t.getTokenValue();return t.next(),nt("identifier",{name:e},r,t.getPos())}else return Br(t,!1)}function bw(t){const r=[];for(t.expect(q.OpenParen),t.next(),t.is(q.NewLine)&&t.next();!t.is(q.CloseParen);){const e=Ag(t);let s=!1,v;t.is(q.Question)?(t.next(),s=!0):t.is(q.Eq)&&(t.next(),v=Br(t,!1));let d;switch(t.is(q.Colon)&&(t.next(),d=vf(t)),r.push({dest:e,optional:s,default:v,argType:d}),t.getTokenKind()){case q.NewLine:{t.next();break}case q.Comma:{t.next(),t.is(q.NewLine)&&t.next();break}case q.CloseParen:break;default:throw new Wt("separator expected",t.getPos())}}return t.expect(q.CloseParen),t.next(),r}function Bc(t){for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();const r=[];for(;!t.is(q.CloseBrace);)switch(r.push(rp(t)),t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.CloseBrace:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}return t.expect(q.CloseBrace),t.next(),r}function vf(t){return t.is(q.At)?Tb(t):Nb(t)}function Tb(t){const r=t.getPos();t.expect(q.At),t.next(),t.expect(q.OpenParen),t.next();const e=[];for(;!t.is(q.CloseParen);){if(e.length>0)switch(t.getTokenKind()){case q.Comma:{t.next();break}default:throw new Wt("separator expected",t.getPos())}const v=vf(t);e.push(v)}t.expect(q.CloseParen),t.next(),t.expect(q.Arrow),t.next();const s=vf(t);return nt("fnTypeSource",{args:e,result:s},r,t.getPos())}function Nb(t){const r=t.getPos();t.expect(q.Identifier);const e=t.getTokenValue();t.next();let s;return t.is(q.Lt)&&(t.next(),s=vf(t),t.expect(q.Gt),t.next()),nt("namedTypeSource",{name:e,inner:s},r,t.getPos())}function rp(t){const r=t.getPos();switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:return Aw(t);case q.At:{if(t.lookahead(1).kind===q.Identifier)return Cw(t);break}case q.Out:return Ob(t);case q.ReturnKeyword:return jb(t);case q.OpenSharpBracket:return Db(t);case q.EachKeyword:return Ib(t);case q.ForKeyword:return Rb(t);case q.LoopKeyword:return Bb(t);case q.DoKeyword:return Lb(t);case q.WhileKeyword:return Hb(t);case q.BreakKeyword:return t.next(),nt("break",{},r,t.getPos());case q.ContinueKeyword:return t.next(),nt("continue",{},r,t.getPos())}const e=Br(t,!1),s=qb(t,e);return s||e}function Fb(t){switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:return Aw(t);case q.At:return Cw(t);default:throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,t.getPos())}}function Ku(t){if(t.is(q.OpenBrace)){const r=t.getPos(),e=Bc(t);return nt("block",{statements:e},r,t.getPos())}else return rp(t)}function Aw(t){const r=t.getPos();let e;switch(t.getTokenKind()){case q.LetKeyword:{e=!1;break}case q.VarKeyword:{e=!0;break}default:throw new Wt(`unexpected token: ${q[t.getTokenKind()]}`,t.getPos())}t.next();const s=Ag(t);let v;t.is(q.Colon)&&(t.next(),v=vf(t)),t.expect(q.Eq),t.next(),t.is(q.NewLine)&&t.next();const d=Br(t,!1);return nt("def",{dest:s,varType:v,expr:d,mut:e,attr:[]},r,t.getPos())}function Cw(t){const r=t.getPos();t.expect(q.At),t.next(),t.expect(q.Identifier);const e=t.getPos(),s=t.getTokenValue();t.next();const v=nt("identifier",{name:s},e,t.getPos()),d=bw(t);let C;t.is(q.Colon)&&(t.next(),C=vf(t));const P=Bc(t),E=t.getPos();return nt("def",{dest:v,expr:nt("fn",{args:d,retType:C,children:P},r,E),mut:!1,attr:[]},r,E)}function Ob(t){const r=t.getPos();t.expect(q.Out),t.next();const e=Br(t,!1);return wb("print",[e],r,t.getPos())}function Ib(t){const r=t.getPos();let e=!1;t.expect(q.EachKeyword),t.next(),t.is(q.OpenParen)&&(e=!0,t.next()),t.expect(q.LetKeyword),t.next();const s=Ag(t);if(t.is(q.Comma))t.next();else throw new Wt("separator expected",t.getPos());const v=Br(t,!1);e&&(t.expect(q.CloseParen),t.next());const d=Ku(t);return nt("each",{var:s,items:v,for:d},r,t.getPos())}function Rb(t){const r=t.getPos();let e=!1;if(t.expect(q.ForKeyword),t.next(),t.is(q.OpenParen)&&(e=!0,t.next()),t.is(q.LetKeyword)){t.next();const s=t.getPos();t.expect(q.Identifier);const v=t.getTokenValue();t.next();let d;if(t.is(q.Eq)?(t.next(),d=Br(t,!1)):d=nt("num",{value:0},s,s),t.is(q.Comma))t.next();else throw new Wt("separator expected",t.getPos());const C=Br(t,!1);e&&(t.expect(q.CloseParen),t.next());const P=Ku(t);return nt("for",{var:v,from:d,to:C,for:P},r,t.getPos())}else{const s=Br(t,!1);e&&(t.expect(q.CloseParen),t.next());const v=Ku(t);return nt("for",{times:s,for:v},r,t.getPos())}}function jb(t){const r=t.getPos();t.expect(q.ReturnKeyword),t.next();const e=Br(t,!1);return nt("return",{expr:e},r,t.getPos())}function Db(t){const r=[];for(;t.is(q.OpenSharpBracket);)r.push(Ub(t)),t.expect(q.NewLine),t.next();const e=rp(t);if(e.type!=="def")throw new Wt("invalid attribute.",e.loc.start);return e.attr!=null?e.attr.push(...r):e.attr=r,e}function Ub(t){const r=t.getPos();t.expect(q.OpenSharpBracket),t.next(),t.expect(q.Identifier);const e=t.getTokenValue();t.next();let s;if(!t.is(q.CloseBracket))s=Br(t,!0);else{const v=t.getPos();s=nt("bool",{value:!0},v,v)}return t.expect(q.CloseBracket),t.next(),nt("attr",{name:e,value:s},r,t.getPos())}function Bb(t){const r=t.getPos();t.expect(q.LoopKeyword),t.next();const e=Bc(t);return nt("loop",{statements:e},r,t.getPos())}function Lb(t){const r=t.getPos();t.expect(q.DoKeyword),t.next();const e=Ku(t),s=t.getPos();t.expect(q.WhileKeyword),t.next();const v=Br(t,!1),d=t.getPos();return nt("loop",{statements:[e,nt("if",{cond:nt("not",{expr:v},s,d),then:nt("break",{},d,d),elseif:[]},s,d)]},r,d)}function Hb(t){const r=t.getPos();t.expect(q.WhileKeyword),t.next();const e=Br(t,!1),s=t.getPos(),v=Ku(t);return nt("loop",{statements:[nt("if",{cond:nt("not",{expr:e},r,s),then:nt("break",{},s,s),elseif:[]},r,s),v]},r,t.getPos())}function qb(t,r){const e=t.getPos();switch(t.getTokenKind()){case q.Eq:{t.next();const s=Br(t,!1);return nt("assign",{dest:r,expr:s},e,t.getPos())}case q.PlusEq:{t.next();const s=Br(t,!1);return nt("addAssign",{dest:r,expr:s},e,t.getPos())}case q.MinusEq:{t.next();const s=Br(t,!1);return nt("subAssign",{dest:r,expr:s},e,t.getPos())}default:return}}function Vb(t){const r=[];for(;t.is(q.NewLine);)t.next();for(;!t.is(q.EOF);){switch(t.getTokenKind()){case q.Colon2:{r.push(_w(t));break}case q.Sharp3:{r.push(zb(t));break}default:{r.push(rp(t));break}}switch(t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.EOF:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}}return r}function _w(t){const r=t.getPos();t.expect(q.Colon2),t.next(),t.expect(q.Identifier);const e=t.getTokenValue();t.next();const s=[];for(t.expect(q.OpenBrace),t.next();t.is(q.NewLine);)t.next();for(;!t.is(q.CloseBrace);){switch(t.getTokenKind()){case q.VarKeyword:case q.LetKeyword:case q.At:{s.push(Fb(t));break}case q.Colon2:{s.push(_w(t));break}}switch(t.getTokenKind()){case q.NewLine:case q.SemiColon:{for(;t.is(q.NewLine)||t.is(q.SemiColon);)t.next();break}case q.CloseBrace:break;default:throw new Wt("Multiple statements cannot be placed on a single line.",t.getPos())}}return t.expect(q.CloseBrace),t.next(),nt("ns",{name:e,members:s},r,t.getPos())}function zb(t){const r=t.getPos();t.expect(q.Sharp3),t.next();let e=null;t.is(q.Identifier)&&(e=t.getTokenValue(),t.next());const s=Br(t,!0);return nt("meta",{name:e,value:s},r,s.loc.end)}function Vt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Vt(e.expr,r);break}case"return":{e.expr=Vt(e.expr,r);break}case"each":{e.items=Vt(e.items,r),e.for=Vt(e.for,r);break}case"for":{e.from!=null&&(e.from=Vt(e.from,r)),e.to!=null&&(e.to=Vt(e.to,r)),e.times!=null&&(e.times=Vt(e.times,r)),e.for=Vt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Vt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Vt(e.expr,r),e.dest=Vt(e.dest,r);break}case"not":{e.expr=Vt(e.expr,r);break}case"if":{e.cond=Vt(e.cond,r),e.then=Vt(e.then,r);for(const s of e.elseif)s.cond=Vt(s.cond,r),s.then=Vt(s.then,r);e.else!=null&&(e.else=Vt(e.else,r));break}case"fn":{for(const s of e.args.keys())e.args[s].default&&(e.args[s].default=Vt(e.args[s].default,r));for(let s=0;s<e.children.length;s++)e.children[s]=Vt(e.children[s],r);break}case"match":{e.about=Vt(e.about,r);for(const s of e.qs)s.q=Vt(s.q,r),s.a=Vt(s.a,r);e.default!=null&&(e.default=Vt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Vt(e.statements[s],r);break}case"exists":{e.identifier=Vt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=Vt(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Vt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Vt(e.value[s],r);break}case"call":{e.target=Vt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Vt(e.args[s],r);break}case"index":{e.target=Vt(e.target,r),e.index=Vt(e.index,r);break}case"prop":{e.target=Vt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Vt(e.members[s],r);break}case"pow":case"mul":case"div":case"rem":case"add":case"sub":case"lt":case"lteq":case"gt":case"gteq":case"eq":case"neq":case"and":case"or":{e.left=Vt(e.left,r),e.right=Vt(e.right,r);break}}return e}const yc=["as","async","attr","attribute","await","catch","class","component","constructor","dictionary","enum","export","finally","fn","hash","in","interface","out","private","public","ref","static","struct","table","this","throw","trait","try","undefined","use","using","when","yield","import","is","meta","module","namespace","new"];function Ko(t,r){throw new Wt(`Reserved word "${t}" cannot be used as variable name.`,r.start)}function kp(t){return Vt(t,r=>{switch(r.type){case"null":{Ko(r.type,r.loc);break}case"bool":{Ko(`${r.value}`,r.loc);break}case"identifier":{yc.includes(r.name)&&Ko(r.name,r.loc);break}}return r})}function Kb(t){switch(t.type){case"def":{kp(t.dest);break}case"ns":case"attr":case"identifier":case"prop":{yc.includes(t.name)&&Ko(t.name,t.loc);break}case"meta":{t.name!=null&&yc.includes(t.name)&&Ko(t.name,t.loc);break}case"each":{kp(t.var);break}case"for":{t.var!=null&&yc.includes(t.var)&&Ko(t.var,t.loc);break}case"fn":{for(const r of t.args)kp(r.dest);break}case"obj":{for(const r of t.value.keys())yc.includes(r)&&Ko(r,t.loc);break}}return t}function Wb(t){for(const r of t)Vt(r,Kb);return t}function Cd(t){return{type:"simple",name:t}}function Gb(t,r){return{type:"generic",name:t,inners:r}}function Jb(t,r){return{type:"fn",args:t,result:r}}function fh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=fh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>fh(s)).join(", "),e=fh(t.result);return`@(${r}) { ${e} }`}}}function Lf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Cd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Lf(t.inner):r=Cd("any"),Gb(t.name,[r])}}throw new Wt(`Unknown type: '${fh(t)}'`,t.loc.start)}else{const r=t.args.map(e=>Lf(e));return Jb(r,Lf(t.result))}}function Zb(t){switch(t.type){case"def":{t.varType!=null&&Lf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Lf(r.argType);t.retType!=null&&Lf(t.retType);break}}return t}function Qb(t){for(const r of t)Vt(r,Zb);return t}var Uu;let Xb=(Uu=class{constructor(){he(this,"plugins");this.plugins={validate:[Wb,Qb],transform:[]}}static parse(r){return Uu.instance==null&&(Uu.instance=new Uu),Uu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;const s=new yb(r);e=Vb(s);for(const v of this.plugins.validate)e=v(e);for(const v of this.plugins.transform)e=v(e);return e}},he(Uu,"instance"),Uu);const Yb="develop",e1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let hv=[],uc=null;function t1(t){return hv=Xb.parse(t),JSON.stringify(hv,null,"	")}async function r1(t){uc==null||uc.abort(),uc=new Qs({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:uv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:uv(e.val,!0),print:!1});break}}});try{await uc.exec(hv)}catch(r){t.err(r)}}const s1=Object.freeze(Object.defineProperty({__proto__:null,exec:r1,parse:t1,samples:e1,version:Yb},Symbol.toStringTag,{value:"Module"}));function os(t,r,e){let s=e.value;return{configurable:!0,get(){const v=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){s=v}}}let sp=class Pw extends Error{constructor(e,s){super(e);he(this,"name","AiScript");he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,Pw)}},n1=class extends sp{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},gf=class extends sp{constructor(e,s){super(e,s);he(this,"name","Syntax")}},rr=class extends sp{constructor(e,s){super(e,s);he(this,"name","Runtime")}},_d=class extends rr{constructor(r,e){super(r,e)}},a1=class extends rr{constructor(e,s){super(e,s);he(this,"name","")}};var so=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Gu=class pv{constructor(r=[],e,s,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new pv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const v=[e,...this.layerdStates];return new pv(v,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new rr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new rr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new rr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};so([os],Gu.prototype,"log",null);so([os],Gu.prototype,"onUpdated",null);so([os],Gu.prototype,"createChildScope",null);so([os],Gu.prototype,"createChildNamespaceScope",null);so([os],Gu.prototype,"get",null);so([os],Gu.prototype,"exists",null);so([os],Gu.prototype,"getAll",null);so([os],Gu.prototype,"add",null);so([os],Gu.prototype,"assign",null);let Yc;const i1=new Uint8Array(16);function l1(){if(!Yc&&(Yc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yc(i1)}const wn=[];for(let t=0;t<256;++t)wn.push((t+256).toString(16).slice(1));function u1(t,r=0){return wn[t[r+0]]+wn[t[r+1]]+wn[t[r+2]]+wn[t[r+3]]+"-"+wn[t[r+4]]+wn[t[r+5]]+"-"+wn[t[r+6]]+wn[t[r+7]]+"-"+wn[t[r+8]]+wn[t[r+9]]+"-"+wn[t[r+10]]+wn[t[r+11]]+wn[t[r+12]]+wn[t[r+13]]+wn[t[r+14]]+wn[t[r+15]]}const o1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Pd={randomUUID:o1};function f1(t,r,e){if(Pd.randomUUID&&!r&&!t)return Pd.randomUUID();t=t||{};const s=t.random||(t.rng||l1)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,u1(s)}const It={type:"null"},Gs={type:"bool",value:!0},Js={type:"bool",value:!1},je=t=>({type:"num",value:t}),zt=t=>({type:"str",value:t}),tf=t=>({type:"bool",value:t}),Uh=t=>({type:"obj",value:t}),Rr=t=>({type:"arr",value:t}),c1=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ce=t=>({type:"fn",native:t}),h1=t=>({type:"return",value:t}),p1=()=>({type:"break",value:null}),v1=()=>({type:"continue",value:null}),g1=t=>t.type==="return"?t.value:t,vv=(t,r)=>({type:"error",value:t,info:r});function $a(t){if(t==null)throw new rr("Expect anything, but got nothing.")}function _n(t){if(t==null)throw new rr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new rr(`Expect boolean, but got ${t.type}.`)}function Su(t){if(t==null)throw new rr("Expect function, but got nothing.");if(t.type!=="fn")throw new rr(`Expect function, but got ${t.type}.`)}function xr(t){if(t==null)throw new rr("Expect string, but got nothing.");if(t.type!=="str")throw new rr(`Expect string, but got ${t.type}.`)}function Pe(t){if(t==null)throw new rr("Expect number, but got nothing.");if(t.type!=="num")throw new rr(`Expect number, but got ${t.type}.`)}function Eu(t){if(t==null)throw new rr("Expect object, but got nothing.");if(t.type!=="obj")throw new rr(`Expect object, but got ${t.type}.`)}function _o(t){if(t==null)throw new rr("Expect array, but got nothing.");if(t.type!=="arr")throw new rr(`Expect array, but got ${t.type}.`)}function Ep(t){return t.type==="obj"}function Bh(t){return t.type==="arr"}function Hf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function gv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>gv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function dv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>dv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=dv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function yv(t){if(t===null)return It;if(typeof t=="boolean")return tf(t);if(typeof t=="string")return zt(t);if(typeof t=="number")return je(t);if(Array.isArray(t))return Rr(t.map(r=>yv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,yv(s));return Uh(r)}return It}function qf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const v of t.value)s.push(qf(v,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[v,d]of t.value)s.push(`${v}: ${qf(d,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const d1={version:"0.19.0"},y1=d1.version,w1=new TextEncoder,m1=new TextDecoder,$1={help:zt("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":zt(y1),"Core:ai":zt("kawaii"),"Core:not":ce(([t])=>(_n(t),t.value?Js:Gs)),"Core:eq":ce(([t,r])=>($a(t),$a(r),Hf(t,r)?Gs:Js)),"Core:neq":ce(([t,r])=>($a(t),$a(r),Hf(t,r)?Js:Gs)),"Core:and":ce(([t,r])=>(_n(t),t.value?(_n(r),r.value?Gs:Js):Js)),"Core:or":ce(([t,r])=>(_n(t),t.value?Gs:(_n(r),r.value?Gs:Js))),"Core:add":ce(([t,r])=>(Pe(t),Pe(r),je(t.value+r.value))),"Core:sub":ce(([t,r])=>(Pe(t),Pe(r),je(t.value-r.value))),"Core:mul":ce(([t,r])=>(Pe(t),Pe(r),je(t.value*r.value))),"Core:pow":ce(([t,r])=>{Pe(t),Pe(r);const e=t.value**r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:div":ce(([t,r])=>{Pe(t),Pe(r);const e=t.value/r.value;if(isNaN(e))throw new rr("Invalid operation.");return je(e)}),"Core:mod":ce(([t,r])=>(Pe(t),Pe(r),je(t.value%r.value))),"Core:gt":ce(([t,r])=>(Pe(t),Pe(r),t.value>r.value?Gs:Js)),"Core:lt":ce(([t,r])=>(Pe(t),Pe(r),t.value<r.value?Gs:Js)),"Core:gteq":ce(([t,r])=>(Pe(t),Pe(r),t.value>=r.value?Gs:Js)),"Core:lteq":ce(([t,r])=>(Pe(t),Pe(r),t.value<=r.value?Gs:Js)),"Core:type":ce(([t])=>($a(t),zt(t.type))),"Core:to_str":ce(([t])=>($a(t),zt(qf(t)))),"Core:range":ce(([t,r])=>(Pe(t),Pe(r),t.value<r.value?Rr(Array.from({length:r.value-t.value+1},(e,s)=>je(s+t.value))):t.value>r.value?Rr(Array.from({length:t.value-r.value+1},(e,s)=>je(t.value-s))):Rr([t]))),"Core:sleep":ce(async([t])=>(Pe(t),await new Promise(r=>setTimeout(r,t.value)),It)),"Core:abort":ce(async([t])=>{throw xr(t),new a1(t.value)}),"Util:uuid":ce(()=>zt(f1())),"Json:stringify":ce(([t])=>($a(t),zt(JSON.stringify(dv(t))))),"Json:parse":ce(([t])=>{xr(t);try{return yv(JSON.parse(t.value))}catch{return vv("not_json")}}),"Json:parsable":ce(([t])=>{xr(t);try{JSON.parse(t.value)}catch{return tf(!1)}return tf(!0)}),"Date:now":ce(()=>je(Date.now())),"Date:year":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getFullYear()))),"Date:month":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMonth()+1))),"Date:day":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getDate()))),"Date:hour":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getHours()))),"Date:minute":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMinutes()))),"Date:second":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getSeconds()))),"Date:millisecond":ce(([t])=>(t&&Pe(t),je(new Date((t==null?void 0:t.value)??Date.now()).getMilliseconds()))),"Date:parse":ce(([t])=>(xr(t),je(new Date(t.value).getTime()))),"Date:to_iso_str":ce(([t,r])=>{t&&Pe(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Pe(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(s===0)v="Z";else{const L=Math.sign(s),Z=Math.floor(Math.abs(s)/60),ge=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+L*Z),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const le=s>0?"+":"-",pe=Z.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");v=`${le}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),S=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return zt(`${d}-${C}-${P}T${E}:${N}:${S}.${B}${v}`)}),"Math:Infinity":je(1/0),"Math:E":je(Math.E),"Math:LN2":je(Math.LN2),"Math:LN10":je(Math.LN10),"Math:LOG2E":je(Math.LOG2E),"Math:LOG10E":je(Math.LOG10E),"Math:PI":je(Math.PI),"Math:SQRT1_2":je(Math.SQRT1_2),"Math:SQRT2":je(Math.SQRT2),"Math:abs":ce(([t])=>(Pe(t),je(Math.abs(t.value)))),"Math:acos":ce(([t])=>(Pe(t),je(Math.acos(t.value)))),"Math:acosh":ce(([t])=>(Pe(t),je(Math.acosh(t.value)))),"Math:asin":ce(([t])=>(Pe(t),je(Math.asin(t.value)))),"Math:asinh":ce(([t])=>(Pe(t),je(Math.asinh(t.value)))),"Math:atan":ce(([t])=>(Pe(t),je(Math.atan(t.value)))),"Math:atanh":ce(([t])=>(Pe(t),je(Math.atanh(t.value)))),"Math:atan2":ce(([t,r])=>(Pe(t),Pe(r),je(Math.atan2(t.value,r.value)))),"Math:cbrt":ce(([t])=>(Pe(t),je(Math.cbrt(t.value)))),"Math:ceil":ce(([t])=>(Pe(t),je(Math.ceil(t.value)))),"Math:clz32":ce(([t])=>(Pe(t),je(Math.clz32(t.value)))),"Math:cos":ce(([t])=>(Pe(t),je(Math.cos(t.value)))),"Math:cosh":ce(([t])=>(Pe(t),je(Math.cosh(t.value)))),"Math:exp":ce(([t])=>(Pe(t),je(Math.exp(t.value)))),"Math:expm1":ce(([t])=>(Pe(t),je(Math.expm1(t.value)))),"Math:floor":ce(([t])=>(Pe(t),je(Math.floor(t.value)))),"Math:fround":ce(([t])=>(Pe(t),je(Math.fround(t.value)))),"Math:hypot":ce(([t])=>{_o(t);const r=[];for(const e of t.value)Pe(e),r.push(e.value);return je(Math.hypot(...r))}),"Math:imul":ce(([t,r])=>(Pe(t),Pe(r),je(Math.imul(t.value,r.value)))),"Math:log":ce(([t])=>(Pe(t),je(Math.log(t.value)))),"Math:log1p":ce(([t])=>(Pe(t),je(Math.log1p(t.value)))),"Math:log10":ce(([t])=>(Pe(t),je(Math.log10(t.value)))),"Math:log2":ce(([t])=>(Pe(t),je(Math.log2(t.value)))),"Math:max":ce(([t,r])=>(Pe(t),Pe(r),je(Math.max(t.value,r.value)))),"Math:min":ce(([t,r])=>(Pe(t),Pe(r),je(Math.min(t.value,r.value)))),"Math:pow":ce(([t,r])=>(Pe(t),Pe(r),je(Math.pow(t.value,r.value)))),"Math:round":ce(([t])=>(Pe(t),je(Math.round(t.value)))),"Math:sign":ce(([t])=>(Pe(t),je(Math.sign(t.value)))),"Math:sin":ce(([t])=>(Pe(t),je(Math.sin(t.value)))),"Math:sinh":ce(([t])=>(Pe(t),je(Math.sinh(t.value)))),"Math:sqrt":ce(([t])=>{Pe(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new rr("Invalid operation.");return je(r)}),"Math:tan":ce(([t])=>(Pe(t),je(Math.tan(t.value)))),"Math:tanh":ce(([t])=>(Pe(t),je(Math.tanh(t.value)))),"Math:trunc":ce(([t])=>(Pe(t),je(Math.trunc(t.value)))),"Math:rnd":ce(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):je(Math.random())),"Math:gen_rng":ce(([t])=>{if($a(t),t.type!=="num"&&t.type!=="str")return It;const r=No(t.value.toString());return ce(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?je(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):je(r()))}),"Num:to_hex":ce(([t])=>(Pe(t),zt(t.value.toString(16)))),"Num:from_hex":ce(([t])=>(xr(t),je(parseInt(t.value,16)))),"Str:lf":zt(`
`),"Str:lt":ce(([t,r])=>(xr(t),xr(r),t.value<r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:gt":ce(([t,r])=>(xr(t),xr(r),t.value>r.value?je(-1):t.value===r.value?je(0):je(1))),"Str:from_codepoint":ce(([t])=>(Pe(t),zt(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":ce(([t])=>(_o(t),zt(Array.from(t.value.map(r=>(Pe(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":ce(([t])=>(_o(t),zt(m1.decode(Uint8Array.from(t.value.map(r=>(Pe(r),r.value))))))),"Uri:encode_full":ce(([t])=>(xr(t),zt(encodeURI(t.value)))),"Uri:encode_component":ce(([t])=>(xr(t),zt(encodeURIComponent(t.value)))),"Uri:decode_full":ce(([t])=>(xr(t),zt(decodeURI(t.value)))),"Uri:decode_component":ce(([t])=>(xr(t),zt(decodeURIComponent(t.value)))),"Arr:create":ce(([t,r])=>{Pe(t);try{return Rr(Array(t.value).fill(r??It))}catch(e){throw t.value<0?new rr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new rr("Arr:create expected integer, got non-integer")}}),"Obj:keys":ce(([t])=>(Eu(t),Rr(Array.from(t.value.keys()).map(r=>zt(r))))),"Obj:vals":ce(([t])=>(Eu(t),Rr(Array.from(t.value.values())))),"Obj:kvs":ce(([t])=>(Eu(t),Rr(Array.from(t.value.entries()).map(([r,e])=>Rr([zt(r),e]))))),"Obj:get":ce(([t,r])=>(Eu(t),xr(r),t.value.get(r.value)??It)),"Obj:set":ce(([t,r,e])=>(Eu(t),xr(r),$a(e),t.value.set(r.value,e),It)),"Obj:has":ce(([t,r])=>(Eu(t),xr(r),tf(t.value.has(r.value)))),"Obj:copy":ce(([t])=>(Eu(t),Uh(new Map(t.value)))),"Obj:merge":ce(([t,r])=>(Eu(t),Eu(r),Uh(new Map([...t.value,...r.value])))),"Error:create":ce(([t,r])=>(xr(t),vv(t.value,r))),"Async:interval":ce(async([t,r,e],s)=>{Pe(t),Su(r),e&&(_n(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),ce(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":ce(async([t,r],e)=>{Pe(t),Su(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),ce(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},kd={num:{to_str:t=>ce(async(r,e)=>zt(t.value.toString()))},str:{to_num:t=>ce(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?It:je(s)}),to_arr:t=>ce(async(r,e)=>Rr(Zs(t.value).map(s=>zt(s)))),to_unicode_arr:t=>ce(async(r,e)=>Rr([...t.value].map(s=>zt(s)))),to_unicode_codepoint_arr:t=>ce(async(r,e)=>Rr([...t.value].map(s=>{const v=s.codePointAt(0);return je(v??s.charCodeAt(0))}))),to_char_arr:t=>ce(async(r,e)=>Rr(t.value.split("").map(s=>zt(s)))),to_charcode_arr:t=>ce(async(r,e)=>Rr(t.value.split("").map(s=>je(s.charCodeAt(0))))),to_utf8_byte_arr:t=>ce(async(r,e)=>Rr(Array.from(w1.encode(t.value)).map(s=>je(s)))),len:t=>je(Cf(t.value)),replace:t=>ce(async([r,e],s)=>(xr(r),xr(e),zt(t.value.split(r.value).join(e.value)))),index_of:t=>ce(async([r,e],s)=>{xr(r),e&&Pe(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return je(Pf(t.value,r.value,v))}),incl:t=>ce(async([r],e)=>(xr(r),t.value.includes(r.value)?Gs:Js)),trim:t=>ce(async(r,e)=>zt(t.value.trim())),upper:t=>ce(async(r,e)=>zt(t.value.toUpperCase())),lower:t=>ce(async(r,e)=>zt(t.value.toLowerCase())),split:t=>ce(async([r],e)=>(r&&xr(r),Rr(r?t.value.split(r?r.value:"").map(s=>zt(s)):Zs(t.value).map(s=>zt(s))))),slice:t=>ce(async([r,e],s)=>(Pe(r),Pe(e),zt(_f(t.value,r.value,e.value)))),pick:t=>ce(async([r],e)=>{Pe(r);const v=Zs(t.value)[r.value];return v?zt(v):It}),charcode_at:t=>ce(([r],e)=>{Pe(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?It:je(s)}),codepoint_at:t=>ce(([r],e)=>{Pe(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?It:je(s)}),starts_with:t=>ce(async([r,e],s)=>{if(xr(r),!r.value)return Gs;e&&Pe(e);const v=(e==null?void 0:e.value)??0;if(v<-t.value.length||v>t.value.length)return Js;const d=v>=0?v:t.value.length+v;return t.value.startsWith(r.value,d)?Gs:Js}),ends_with:t=>ce(async([r,e],s)=>{if(xr(r),!r.value)return Gs;e&&Pe(e);const v=(e==null?void 0:e.value)??t.value.length;if(v<-t.value.length||v>t.value.length)return Js;const d=v>=0?v:t.value.length+v;return t.value.endsWith(r.value,d)?Gs:Js}),pad_start:t=>ce(([r,e],s)=>{Pe(r);const v=e?(xr(e),e.value):" ";return zt(t.value.padStart(r.value,v))}),pad_end:t=>ce(([r,e],s)=>{Pe(r);const v=e?(xr(e),e.value):" ";return zt(t.value.padEnd(r.value,v))})},arr:{len:t=>je(t.value.length),push:t=>ce(async([r],e)=>($a(r),t.value.push(r),t)),unshift:t=>ce(async([r],e)=>($a(r),t.value.unshift(r),t)),pop:t=>ce(async(r,e)=>t.value.pop()??It),shift:t=>ce(async(r,e)=>t.value.shift()??It),concat:t=>ce(async([r],e)=>(_o(r),Rr(t.value.concat(r.value)))),slice:t=>ce(async([r,e],s)=>(Pe(r),Pe(e),Rr(t.value.slice(r.value,e.value)))),join:t=>ce(async([r],e)=>(r&&xr(r),zt(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>ce(async([r],e)=>{Su(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,je(d)]));return Rr(await Promise.all(s))}),filter:t=>ce(async([r],e)=>{Su(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,je(v)]);_n(C),C.value&&s.push(d)}return Rr(s)}),reduce:t=>ce(async([r,e],s)=>{Su(r);const v=e!=null;if(!v&&t.value.length===0)throw new rr("Reduce of empty array without initial value");let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,je(C)])}return d}),find:t=>ce(async([r],e)=>{Su(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,je(s)]);if(_n(d),d.value)return v}return It}),incl:t=>ce(async([r],e)=>($a(r),t.value.some(s=>Hf(r,s))?Gs:Js)),index_of:t=>ce(async([r,e],s)=>{if($a(r),e){Pe(e);const v=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>Hf(C,r));return je(d<0?d:d+v)}else return je(t.value.findIndex(v=>Hf(v,r)))}),reverse:t=>ce(async(r,e)=>(t.value.reverse(),It)),copy:t=>ce(async(r,e)=>Rr([...t.value])),sort:t=>ce(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=s(d.slice(0,P),C),N=s(d.slice(P),C),[S,B]=await Promise.all([E,N]);return v(S,B,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Pe(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return Su(r),_o(t),t.value=await s(t.value,r),t}),fill:t=>ce(async([r,e,s],v)=>{const d=r??It,C=e&&(Pe(e),e.value),P=s&&(Pe(s),s.value);return t.value.fill(d,C,P),t}),repeat:t=>ce(async([r],e)=>{Pe(r);try{return Rr(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new rr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new rr("arr.repeat expected integer, got non-integer")}}),splice:t=>ce(async([r,e,s],v)=>{Pe(r);const d=r.value<-t.value.length?0:r.value<0?t.value.length+r.value:r.value>=t.value.length?t.value.length:r.value,C=e!=null?(Pe(e),e.value):t.value.length-d,P=s!=null?(_o(s),s.value):[],E=t.value.splice(d,C,...P);return Rr(E)}),flat:t=>ce(async([r],e)=>{if(r=r??je(1),Pe(r),!Number.isInteger(r.value))throw new rr("arr.flat expected integer, got non-integer");if(r.value<0)throw new rr("arr.flat expected non-negative number, got negative");const s=(d,C,P)=>{if(C===0){P.push(...d);return}for(const E of d)Bh(E)?s(E.value,C-1,P):P.push(E)},v=[];return s(t.value,r.value,v),Rr(v)}),flat_map:t=>ce(async([r],e)=>{Su(r);const s=t.value.map(async(d,C)=>{const P=await e.call(r,[d,je(C)]);return Bh(P)?P.value:P}),v=await Promise.all(s);return Rr(v.flat())}),every:t=>ce(async([r],e)=>{Su(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,je(s)]);if(_n(d),!d.value)return Js}return Gs}),some:t=>ce(async([r],e)=>{Su(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,je(s)]);if(_n(d),d.value)return Gs}return Js}),insert:t=>ce(async([r,e],s)=>(Pe(r),$a(e),t.value.splice(r.value,0,e),It)),remove:t=>ce(async([r],e)=>(Pe(r),t.value.splice(r.value,1)[0]??It)),at:t=>ce(async([r,e],s)=>(Pe(r),t.value.at(r.value)??e??It))},error:{name:t=>zt(t.value),info:t=>t.info??It}};function x1(t,r){if(Object.hasOwn(kd,t.type)){const e=kd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new rr(`No such prop (${r}) in ${t.type}.`)}else throw new rr(`Cannot read prop of ${t.type}. (reading ${r})`)}const b1={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ea=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const kw=300,A1=kw-1;let Un=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const s={print:ce(([v])=>{$a(v),this.opts.out&&this.opts.out(v)}),readline:ce(async v=>{const d=v[0];if(xr(d),this.opts.in==null)return It;const C=await this.opts.in(d.value);return zt(C)})};this.vars=Object.fromEntries(Object.entries({...r,...$1,...s}).map(([v,d])=>[v,b1.const(d)])),this.scope=new Gu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),vv("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}handleError(r){if(!this.opts.err)throw r;if(this.opts.abortOnError){if(this.stop)return;this.abort()}r instanceof sp?this.opts.err(r):this.opts.err(new n1(r))}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const d={isMutable:v.mut,value:await this._eval(v.expr,s)};s.add(v.name,d);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??It;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],{isMutable:!0,value:e[d]??It});const v=r.scope.createChildScope(s);return g1(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return It;if(this.stepCount%kw===A1&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new rr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);Su(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(_n(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(_n(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return It}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Hf(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):It}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return It}case"for":{if(r.times){const s=await this._eval(r.times,e);Pe(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Pe(s),Pe(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:je(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return It}case"each":{const s=await this._eval(r.items,e);_o(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return It}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,{isMutable:r.mut,value:s}),It}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),It}case"addAssign":{const s=await this._eval(r.dest,e);Pe(s);const v=await this._eval(r.expr,e);return Pe(v),await this.assign(e,r.dest,je(s.value+v.value)),It}case"subAssign":{const s=await this._eval(r.dest,e);Pe(s);const v=await this._eval(r.expr,e);return Pe(v),await this.assign(e,r.dest,je(s.value-v.value)),It}case"null":return It;case"bool":return tf(r.value);case"num":return je(r.value);case"str":return zt(r.value);case"arr":return Rr(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return Uh(s)}case"prop":{const s=await this._eval(r.target,e);return Ep(s)?s.value.has(r.name)?s.value.get(r.name):It:x1(s,r.name)}case"index":{const s=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Bh(s)){Pe(v);const d=s.value[v.value];if(d===void 0)throw new _d(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}else{if(Ep(s))return xr(v),s.value.has(v.value)?s.value.get(v.value):It;throw new rr(`Cannot read prop (${qf(v)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return _n(s),tf(!s.value)}case"fn":return c1(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return tf(e.exists(r.identifier.name));case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);s+=qf(d)}return zt(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),h1(s)}case"break":return this.log("block:break",{scope:e.name}),p1();case"continue":return this.log("block:continue",{scope:e.name}),v1();case"ns":return It;case"meta":return It;case"and":{const s=await this._eval(r.left,e);if(_n(s),s.value){const v=await this._eval(r.right,e);return _n(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(_n(s),s.value)return s;{const v=await this._eval(r.right,e);return _n(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=It;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Bh(v)){if(Pe(d),v.value[d.value]===void 0)throw new _d(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=s}else if(Ep(v))xr(d),v.value.set(d.value,s);else throw new rr(`Cannot read prop (${qf(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Eu(v),v.value.set(e.name,s)}else if(e.type==="arr")_o(s),await Promise.all(e.value.map((v,d)=>this.assign(r,v,s.value[d]??It)));else if(e.type==="obj")Eu(s),await Promise.all([...e.value].map(([v,d])=>this.assign(r,d,s.value.get(v)??It)));else throw new rr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ea([os],Un.prototype,"exec",null);Ea([os],Un.prototype,"execFn",null);Ea([os],Un.prototype,"execFnSimple",null);Ea([os],Un.prototype,"handleError",null);Ea([os],Un.prototype,"log",null);Ea([os],Un.prototype,"collectNs",null);Ea([os],Un.prototype,"collectNsMember",null);Ea([os],Un.prototype,"_fn",null);Ea([os],Un.prototype,"_eval",null);Ea([os],Un.prototype,"_run",null);Ea([os],Un.prototype,"registerAbortHandler",null);Ea([os],Un.prototype,"unregisterAbortHandler",null);Ea([os],Un.prototype,"abort",null);Ea([os],Un.prototype,"assign",null);Ea([os],Un,"collectMetadata",null);function C1(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function rf(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,rf.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}C1(rf,Error);function Mp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}rf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=Mp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+Mp("",v.column-1," ")+Mp("",B,"^")}else r+=`
 at `+C}return r};rf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Ed(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:tr,Main:yi},d=tr,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Lr="[",Yt=".",Mr="if",ir="elif",_r="else",Jr="match",nr="=>",Zr="*",ar="eval",Pr="exists",G="`",ee='"',fe="'",Ce='\\"',ve="\\'",Ae="true",Re="false",Me="null",Se="@",$e="@(",it="<",qe=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,ot=/^[%*-+\-\/<>\^]/,Pt=/^[^`{]/,xt=/^[{}`]/,Ut=/^[+\-]/,yt=/^[1-9]/,lt=/^[0-9]/,vr=/^[,;]/,cs=/^[A-Z_]/i,is=/^[A-Z0-9_]/i,Ct=/^[\r\n]/,Rt=/^[ \t\r\n]/,Mn=/^[ \t]/,gr=F(),el=R("//",!1),tl=R("/*",!1),lr=R("*/",!1),Bt=R("(",!1),Qr=R(")",!1),qn=R("::",!1),kt=R("{",!1),ft=R("}",!1),Sr=R("###",!1),Gt=R("let",!1),st=R(":",!1),Lt=R("=",!1),bs=R("var",!1),Ht=R("<:",!1),qt=R("#[",!1),Xr=R("]",!1),Da=R("each",!1),Tr=R(",",!1),hs=R("for",!1),Ns=R("return",!1),ct=_t([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=R("loop",!1),Xs=R("break",!1),Nr=R("continue",!1),Fr=R("+=",!1),rl=R("-=",!1),Ua=R("\\",!1),sl=R("||",!1),nl=R("&&",!1),Ba=R("==",!1),La=R("!=",!1),al=R("<=",!1),il=R(">=",!1),ll=_t(["%",["*","+"],"-","/","<",">","^"],!1,!1),ul=R("!",!1),Vn=R("[",!1),Ys=R(".",!1),zn=R("if",!1),Ha=R("elif",!1),ol=R("else",!1),qa=R("match",!1),Fs=R("=>",!1),fl=R("*",!1),cl=R("eval",!1),hl=R("exists",!1),As=R("`",!1),Os=_t(["`","{"],!0,!1),Kn=_t(["{","}","`"],!1,!1),en=R('"',!1),tn=R("'",!1),pl=R('\\"',!1),rn=R("\\'",!1),ps=_t(["+","-"],!1,!1),Is=_t([["1","9"]],!1,!1),Ar=_t([["0","9"]],!1,!1),sn=R("true",!1),nn=R("false",!1),an=R("null",!1),vs=_t([",",";"],!1,!1),ln=R("@",!1),Rs=R("@(",!1),Va=R("<",!1),er=R(">",!1),za=_t([["A","Z"],"_"],!1,!0),dr=_t([["A","Z"],["0","9"],"_"],!1,!0),vl=R(`\r
`,!1),un=_t(["\r",`
`],!1,!1),gl=_t([" ","	","\r",`
`],!1,!1),js=_t([" ","	"],!1,!1),dl=function(f){return f.join("")},Wn=function(){return o()},yl=function(){return o()},Ka=function(){return" ".repeat(o().length)},wl=function(){return o().replace(/[^\n]/g," ")},ml=function(f){return f??[]},Wa=function(f,g){return g},$l=function(f,g){return[f,...g]},Ga=function(f,g){return g},xl=function(f,g){return[f,...g]},Ja=function(f,g){return g},bl=function(f,g){return[f,...g]},Za=function(f){return f},Al=function(f,g){return ne("ns",{name:f,members:g})},Gn=function(f,g){return ne("meta",{name:f,value:g})},Cl=function(f){return ne("meta",{name:null,value:f})},Jn=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},_l=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},Qa=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},Pl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},kl=function(f,g,b){return ne("each",{var:f,items:g,for:b})},El=function(f,g,b){return ne("each",{var:f,items:g,for:b})},Ml=function(f,g){return g},Sl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Tl=function(f,g){return g},Nl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Fl=function(f,g){return ne("for",{times:f,for:g})},Ol=function(f,g){return ne("for",{times:f,for:g})},Il=function(f){return ne("return",{expr:f})},Rl=function(f){return ne("loop",{statements:f})},jl=function(){return ne("break",{})},Dl=function(){return ne("continue",{})},Ul=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Xa=function(f,g,b){return{op:g,term:b}},Bl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op.value),operatorLocs:g.map(b=>b.op.loc)})},Ll=function(){const f=X();return{value:o(),loc:{start:f.start.offset,end:f.end.offset-1}}},Hl=function(f){return ne("not",{expr:f})},ql=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},Vl=function(f){return ne("callChain",{args:f??[]})},Zn=function(f,g){return g},zl=function(f,g){return[f,...g]},Ya=function(f){return ne("indexChain",{index:f})},Kl=function(f){return ne("propChain",{name:f})},Wl=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Gl=function(f,g){return[f,...g]},ei=function(f,g){return{cond:f,then:g}},Jl=function(f){return f},Qn=function(f,g,b){return{q:g,a:b}},Zl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},Ql=function(f){return ne("block",{statements:f})},Xl=function(f){return ne("exists",{identifier:f})},Yl=function(f){return ne("identifier",{name:f})},eu=function(f){return ne("tmpl",{tmpl:f})},ti=function(f){return f.join("")},ri=function(f){return f},si=function(f){return ne("str",{value:f.join("")})},ni=function(f){return f},tu=function(f){return ne("str",{value:f.join("")})},ru=function(){return'"'},ai=function(){return"'"},su=function(){return ne("num",{value:parseFloat(o())})},ii=function(){return ne("num",{value:parseFloat(o())})},li=function(){return ne("num",{value:parseInt(o(),10)})},nu=function(){return ne("num",{value:parseInt(o(),10)})},ui=function(){return ne("bool",{value:!0})},au=function(){return ne("bool",{value:!1})},iu=function(){return ne("null",{})},oi=function(f,g){return{k:f,v:g}},lu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},fi=function(f){return f},uu=function(f){return ne("arr",{value:f})},ou=function(f,g){return{name:f,argType:g}},ci=function(f,g){return[f,...g]},fu=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},hi=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Xn=function(f){return f},cu=function(f){return ne("arr",{value:f})},Yn=function(f,g){return{k:f,v:g}},hu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},pu=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},pi=function(f,g){return[f,...g]},vu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},vi=function(f){return ne("namedTypeSource",{name:f,inner:null})},gi=function(){return o()},gu=function(){return o()},di=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,Cs=[{line:1,column:1}],yr=c,on=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,T={},Yr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function o(){return t.substring(te,c)}function X(){return ue(te,c)}function O(f,g){throw g=g!==void 0?g:ue(te,c),du(f,g)}function R(f,g){return{type:"literal",text:f,ignoreCase:g}}function _t(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function V(){return{type:"end"}}function Ds(f){var g=Cs[f],b;if(g)return g;if(f>=Cs.length)b=Cs.length-1;else for(b=f;!Cs[--b];);for(g=Cs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return Cs[f]=g,g}function ue(f,g,b){var w=Ds(f),a=Ds(g),l={source:s,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,on=[]),on.push(f))}function du(f,g){return new rf(f,null,null,g)}function de(f,g,b){return new rf(rf.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=T[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Us();b!==e;)g.push(b),b=Us();return te=f,g=dl(g),f=g,T[w]={nextPos:c,result:f},f}function Us(){var f,g,b=c*77+1,w=T[b];return w?(c=w.nextPos,w.result):(f=c,g=Pi(),g!==e&&(te=f,g=Wn()),f=g,f===e&&(f=c,g=vn(),g!==e&&(te=f,g=yl()),f=g,f===e&&(f=U(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),T[b]={nextPos:c,result:f},f)}function U(){var f,g,b,w,a,l,$=c*77+2,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(el)),g!==e){for(b=[],w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ka()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(tl)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===E?(w=E,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=wl()):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w,a,l=c*77+3,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=fn(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=ml(b),T[l]={nextPos:c,result:f},f}function fn(){var f,g,b,w,a,l,$,p,n=c*77+4,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=ea(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ea(),p!==e?(te=w,w=Wa(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ea(),p!==e?(te=w,w=Wa(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=$l(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function j(){var f,g,b,w,a,l,$,p,n=c*77+5,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=cn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=cn(),p!==e?(te=w,w=Ga(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=cn(),p!==e?(te=w,w=Ga(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=xl(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a,l,$,p,n=c*77+6,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=Ps(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Ps(),p!==e?(te=w,w=Ja(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Ps(),p!==e?(te=w,w=Ja(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=bl(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ea(){var f,g=c*77+7,b=T[g];return b?(c=b.nextPos,b.result):(f=Cr(),f===e&&(f=Xe(),f===e&&(f=Ps())),T[g]={nextPos:c,result:f},f)}function cn(){var f,g=c*77+8,b=T[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=Cr())),T[g]={nextPos:c,result:f},f)}function Ps(){var f,g=c*77+9,b=T[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=ks(),f===e&&(f=ts(),f===e&&(f=We(),f===e&&(f=Bs(),f===e&&(f=wi(),f===e&&(f=mi(),f===e&&(f=yu(),f===e&&(f=$i(),f===e&&(f=wu(),f===e&&(f=et()))))))))))),T[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=T[g];return b?(c=b.nextPos,b.result):(f=mu(),f===e&&(f=es()),T[g]={nextPos:c,result:f},f)}function es(){var f,g=c*77+11,b=T[g];return b?(c=b.nextPos,b.result):(f=ns(),f===e&&(f=Cu(),f===e&&(f=xu(),f===e&&(f=hn()))),T[g]={nextPos:c,result:f},f)}function hn(){var f,g,b,w,a,l,$=c*77+12,p=T[$];if(p)return c=p.nextPos,p.result;if(f=na(),f===e&&(f=bu(),f===e&&(f=_i(),f===e&&(f=Pi(),f===e&&(f=vn(),f===e&&(f=la(),f===e&&(f=dn(),f===e&&(f=fa(),f===e&&(f=ca(),f===e&&(f=Mi(),f===e&&(f=$u(),f===e&&(f=Ls(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Za(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Or(){var f,g=c*77+13,b=T[g];return b?(c=b.nextPos,b.result):(f=la(),f===e&&(f=vn(),f===e&&(f=dn(),f===e&&(f=ga(),f===e&&(f=da(),f===e&&(f=fa()))))),T[g]={nextPos:c,result:f},f)}function Cr(){var f,g,b,w,a,l,$,p,n,u,y=c*77+14,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===B?(g=B,c+=2):(g=e,i===0&&D(qn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=L,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=j(),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();t.charCodeAt(c)===125?(u=Z,c++):(u=e,i===0&&D(ft)),u!==e?(te=f,f=Al(w,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Sr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Or(),l!==e?(te=f,f=Gn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Sr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Or(),w!==e?(te=f,f=Cl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function gs(){var f,g,b,w,a,l,$,p,n,u=c*77+16,y=T[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=wr(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=et(),n!==e?(te=f,f=Jn(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===J?(g=J,c+=3):(g=e,i===0&&D(bs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=wr(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=et(),n!==e?(te=f,f=_l(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[u]={nextPos:c,result:f},f}function ks(){var f,g,b,w,a=c*77+17,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(g=K,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=Qa(w)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function We(){var f,g,b,w,a,l,$,p=c*77+18,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,2)===W?(g=W,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Or(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(Xr)),$!==e?(te=f,f=Pl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[p]={nextPos:c,result:f},f}function Bs(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+19,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===le?(a=le,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();for(t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&D(Tr)),n===e&&(n=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e)if(t.charCodeAt(c)===41?(h=S,c++):(h=e,i===0&&D(Qr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=kl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===le?(w=le,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();if(u=et(),u!==e){if(y=[],h=k(),h!==e)for(;h!==e;)y.push(h),h=k();else y=e;y!==e?(h=ur(),h!==e?(te=f,f=El(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A=c*77+20,M=T[A];if(M)return c=M.nextPos,M.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===le?(a=le,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();if(n=c,t.charCodeAt(c)===61?(u=be,c++):(u=e,i===0&&D(Lt)),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();h=et(),h!==e?(te=n,n=Ml($,h)):(c=n,n=e)}else c=n,n=e;for(n===e&&(n=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&D(Tr)),u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=S,c++):(x=e,i===0&&D(Qr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=Sl($,n,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===le?(w=le,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(n=be,c++):(n=e,i===0&&D(Lt)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=et(),y!==e?(te=p,p=Tl(l,y)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&D(Tr)),n===e&&(n=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=Nl(l,p,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ur(),p!==e?(te=f,f=Fl(a,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Ol(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return T[A]={nextPos:c,result:f},f}function ts(){var f,g,b,w,a,l=c*77+21,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=Il(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a,l,$,p,n=c*77+22,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=Z,c++):(p=e,i===0&&D(ft)),p!==e?(te=f,f=Rl(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function yu(){var f,g,b,w,a=c*77+23,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=jl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a=c*77+24,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===ke?(g=ke,c+=8):(g=e,i===0&&D(Nr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Dl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function wu(){var f,g,b,w,a,l,$=c*77+25,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Fr)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(rl)),w===e&&(t.charCodeAt(c)===61?(w=be,c++):(w=e,i===0&&D(Lt)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Ul(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function mu(){var f,g,b,w,a,l,$,p,n=c*77+26,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=es(),g!==e){for(b=[],w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],p=rs();p!==e;)$.push(p),p=rs();p=es(),p!==e?(te=w,w=Xa(g,l,p)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],p=rs();p!==e;)$.push(p),p=rs();p=es(),p!==e?(te=w,w=Xa(g,l,p)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Bl(g,b)):(c=f,f=e)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function rs(){var f,g,b,w=c*77+27,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=Ge(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),T[w]={nextPos:c,result:f},f)}function xi(){var f,g,b=c*77+28,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===At?(g=At,c+=2):(g=e,i===0&&D(sl)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(nl)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ba)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(La)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(al)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(il)),g===e&&(g=t.charAt(c),ot.test(g)?c++:(g=e,i===0&&D(ll)))))))),g!==e&&(te=f,g=Ll()),f=g,T[b]={nextPos:c,result:f},f)}function $u(){var f,g,b,w=c*77+29,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(ul)),g!==e?(b=et(),b!==e?(te=f,f=Hl(b)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function xu(){var f,g,b,w,a=c*77+30,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,g=hn(),g!==e){if(b=[],w=bi(),w===e&&(w=ta(),w===e&&(w=Ai())),w!==e)for(;w!==e;)b.push(w),w=bi(),w===e&&(w=ta(),w===e&&(w=Ai()));else b=e;b!==e?(te=f,f=ql(g,b)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function bi(){var f,g,b,w,a,l,$=c*77+31,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ss(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Vl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ss(){var f,g,b,w,a,l,$=c*77+32,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=zl(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ta(){var f,g,b,w,a,l,$=c*77+33,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=Ya(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ai(){var f,g,b,w=c*77+34,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(Ys)),g!==e?(b=tt(),b!==e?(te=f,f=Kl(b)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function ns(){var f,g,b,w,a,l,$,p,n,u,y=c*77+35,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Mr?(g=Mr,c+=2):(g=e,i===0&&D(zn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,p=[],n=k(),n!==e)for(;n!==e;)p.push(n),n=k();else p=e;if(p!==e?(n=ra(),n!==e?$=n:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;n!==e?(u=Ci(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=f,f=Wl(w,l,$,p)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ra(){var f,g,b,w,a,l,$=c*77+36,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=sa(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=sa(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=sa(),l!==e?w=l:(c=w,w=e)}te=f,f=Gl(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function sa(){var f,g,b,w,a,l,$,p=c*77+37,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(Ha)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=ei(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[p]={nextPos:c,result:f},f}function Ci(){var f,g,b,w,a,l=c*77+38,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(ol)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Jl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A,M,I=c*77+39,H=T[I];if(H)return c=H.nextPos,H.result;if(f=c,t.substr(c,5)===Jr?(g=Jr,c+=5):(g=e,i===0&&D(qa)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=L,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();if(n=[],u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(n.push(u),u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else n=e;if(n!==e){if(u=c,t.charCodeAt(c)===42?(y=Zr,c++):(y=e,i===0&&D(fl)),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();t.charCodeAt(c)===125?(h=Z,c++):(h=e,i===0&&D(ft)),h!==e?(te=f,f=Zl(a,n,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[I]={nextPos:c,result:f},f}function bu(){var f,g,b,w,a,l,$,p,n=c*77+40,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ar?(g=ar,c+=4):(g=e,i===0&&D(cl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=Z,c++):(p=e,i===0&&D(ft)),p!==e?(te=f,f=Ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a=c*77+41,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Pr?(g=Pr,c+=6):(g=e,i===0&&D(hl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Ls(),w!==e?(te=f,f=Xl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Ls(){var f,g,b=c*77+42,w=T[b];return w?(c=w.nextPos,w.result):(f=c,g=Pu(),g!==e&&(te=f,g=Yl(g)),f=g,T[b]={nextPos:c,result:f},f)}function Pi(){var f,g,b,w,a,l,$=c*77+43,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===96?(g=G,c++):(g=e,i===0&&D(As)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=G,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=G,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=G,c++):(w=e,i===0&&D(As)),w!==e?(te=f,f=eu(b)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ki(){var f,g,b,w,a,l,$=c*77+44,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=Z,c++):(l=e,i===0&&D(ft)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=pn(),b!==e)for(;b!==e;)g.push(b),b=pn();else g=e;g!==e&&(te=f,g=ti(g)),f=g}return T[$]={nextPos:c,result:f},f}function pn(){var f,g=c*77+45,b=T[g];return b?(c=b.nextPos,b.result):(f=Au(),f===e&&(f=t.charAt(c),Pt.test(f)?c++:(f=e,i===0&&D(Os))),T[g]={nextPos:c,result:f},f)}function Au(){var f,g,b,w=c*77+46,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=t.charAt(c),xt.test(b)?c++:(b=e,i===0&&D(Kn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function vn(){var f,g,b,w,a,l,$=c*77+47,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===34?(g=ee,c++):(g=e,i===0&&D(en)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(en)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(en)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=ee,c++):(w=e,i===0&&D(en)),w!==e?(te=f,f=si(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(tn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=fe,c++):(w=e,i===0&&D(tn)),w!==e?(te=f,f=tu(b)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function aa(){var f,g,b=c*77+48,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Ce?(g=Ce,c+=2):(g=e,i===0&&D(pl)),g!==e&&(te=f,g=ru()),f=g,T[b]={nextPos:c,result:f},f)}function ia(){var f,g,b=c*77+49,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ve?(g=ve,c+=2):(g=e,i===0&&D(rn)),g!==e&&(te=f,g=ai()),f=g,T[b]={nextPos:c,result:f},f)}function la(){var f,g=c*77+50,b=T[g];return b?(c=b.nextPos,b.result):(f=gn(),f===e&&(f=ua()),T[g]={nextPos:c,result:f},f)}function gn(){var f,g,b,w,a,l,$,p=c*77+51,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Is)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(Ys)),a!==e){if(l=[],$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar));else l=e;l!==e?(te=f,f=su()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(Ys)),w!==e){if(a=[],l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar));else a=e;a!==e?(te=f,f=ii()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[p]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l=c*77+52,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Is)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;w!==e?(te=f,f=li()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e?(te=f,f=nu()):(c=f,f=e)),T[l]={nextPos:c,result:f},f}function dn(){var f,g=c*77+53,b=T[g];return b?(c=b.nextPos,b.result):(f=Ei(),f===e&&(f=oa()),T[g]={nextPos:c,result:f},f)}function Ei(){var f,g,b,w,a=c*77+54,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(sn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ui()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function oa(){var f,g,b,w,a=c*77+55,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Re?(g=Re,c+=5):(g=e,i===0&&D(nn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=au()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function fa(){var f,g,b,w,a=c*77+56,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(an)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=iu()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ca(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+57,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=Z,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=lu(w)):(c=f,f=e)}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function Mi(){var f,g,b,w,a,l,$,p,n,u,y=c*77+58,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=uu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ha(){var f,g,b,w,a,l,$,p=c*77+59,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=ou(g,b)}else c=f,f=e;return T[p]={nextPos:c,result:f},f}function pa(){var f,g,b,w,a,l,$=c*77+60,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=ha(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ci(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function va(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A,M,I=c*77+61,H=T[I];if(H)return c=H.nextPos,H.result;if(f=c,t.charCodeAt(c)===64?(g=Se,c++):(g=e,i===0&&D(ln)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Bt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=pa(),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();if(t.charCodeAt(c)===41?(u=S,c++):(u=e,i===0&&D(Qr)),u!==e){for(y=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=pe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?y=_:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=L,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=_s(),_===e&&(_=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=Z,c++):(M=e,i===0&&D(ft)),M!==e?(te=f,f=fu(b,w,a,p,y,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Cu(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m=c*77+62,_=T[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Rs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=pa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=c,p=[],n=k();n!==e;)p.push(n),n=k();if(t.charCodeAt(c)===58?(n=pe,c++):(n=e,i===0&&D(st)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=wr(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],n=k();n!==e;)p.push(n),n=k();if(t.charCodeAt(c)===123?(n=L,c++):(n=e,i===0&&D(kt)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();for(y=_s(),y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=Z,c++):(x=e,i===0&&D(ft)),x!==e?(te=f,f=hi(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[m]={nextPos:c,result:f},f}function ga(){var f,g,b,w,a,l,$,p,n,u,y=c*77+63,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function da(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+64,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=Or(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=Or(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=Z,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=T[g];return b?(c=b.nextPos,b.result):(f=_u(),f===e&&(f=Si()),T[g]={nextPos:c,result:f},f)}function _u(){var f,g,b,w,a,l,$,p,n,u,y=c*77+66,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Rs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ya(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===nr?(p=nr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(n=[],u=k();u!==e;)n.push(u),u=k();u=wr(),u!==e?(te=f,f=pu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ya(){var f,g,b,w,a,l,$=c*77+67,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=pi(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Si(){var f,g,b,w,a,l,$,p,n=c*77+68,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=it,c++):(w=e,i===0&&D(Va)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],p=De();p!==e;)$.push(p),p=De();t.charCodeAt(c)===62?(p=qe,c++):(p=e,i===0&&D(er)),p!==e?(te=f,f=vu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=vi(g)),f=g),T[n]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),cs.test(g)?c++:(g=e,i===0&&D(za)),g!==e){for(b=[],w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=gi()}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Pu(){var f,g,b,w,a,l,$=c*77+70,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=gu()}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Es(){var f,g,b,w,a,l=c*77+71,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=Y,c++):(b=e,i===0&&D(Tr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return T[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=_s(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=Z,c++):(l=e,i===0&&D(ft)),l!==e?(te=f,f=di(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),T[$]={nextPos:c,result:f},f}function Ge(){var f,g=c*77+73,b=T[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(vl)),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(un))),T[g]={nextPos:c,result:f},f)}function Ti(){var f,g,b=c*77+74,w=T[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=Ge()),T[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=T[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(gl)),T[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=T[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Mn.test(f)?c++:(f=e,i===0&&D(js)),T[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=X();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Yr=d(),r.peg$library)return{peg$result:Yr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:on,peg$maxFailPos:yr};if(Yr!==e&&c===t.length)return Yr;throw Yr!==e&&c<t.length&&D(V()),de(on,yr<t.length?t.charAt(yr):null,yr<t.length?ue(yr,yr+1):ue(yr,yr))}const _1=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function P1(t){return _1.includes(t.type)}function Ew(t){return"chain"in t&&t.chain!==null}function k1(t,r,e){return{type:"call",target:t,args:r,loc:e}}function E1(t,r,e){return{type:"index",target:t,index:r,loc:e}}function M1(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Et(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Et(e.expr,r);break}case"return":{e.expr=Et(e.expr,r);break}case"each":{e.items=Et(e.items,r),e.for=Et(e.for,r);break}case"for":{e.from!=null&&(e.from=Et(e.from,r)),e.to!=null&&(e.to=Et(e.to,r)),e.times!=null&&(e.times=Et(e.times,r)),e.for=Et(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Et(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Et(e.expr,r),e.dest=Et(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Et(e.operands[s],r);break}case"not":{e.expr=Et(e.expr,r);break}case"if":{e.cond=Et(e.cond,r),e.then=Et(e.then,r);for(const s of e.elseif)s.cond=Et(s.cond,r),s.then=Et(s.then,r);e.else!=null&&(e.else=Et(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Et(e.children[s],r);break}case"match":{e.about=Et(e.about,r);for(const s of e.qs)s.q=Et(s.q,r),s.a=Et(s.a,r);e.default!=null&&(e.default=Et(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Et(e.statements[s],r);break}case"exists":{e.identifier=Et(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=Et(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Et(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Et(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Et(e.args[s],r);break}case"indexChain":{e.index=Et(e.index,r);break}case"call":{e.target=Et(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Et(e.args[s],r);break}case"index":{e.target=Et(e.target,r),e.index=Et(e.index,r);break}case"prop":{e.target=Et(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Et(e.members[s],r);break}case"or":case"and":{e.left=Et(e.left,r),e.right=Et(e.right,r);break}}if(Ew(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Et(e.chain[s],r);return e}const Sp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Tp(t){throw new gf(`Reserved word "${t}" cannot be used as variable name.`)}function S1(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Sp.includes(t.name)&&Tp(t.name);break}case"meta":{t.name!=null&&Sp.includes(t.name)&&Tp(t.name);break}case"fn":{for(const r of t.args)Sp.includes(r.name)&&Tp(r.name);break}}return t}function T1(t){for(const r of t)Et(r,S1);return t}function Md(t){return{type:"simple",name:t}}function N1(t,r){return{type:"generic",name:t,inners:r}}function F1(t,r){return{type:"fn",args:t,result:r}}function ch(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=ch(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>ch(s)).join(", "),e=ch(t.result);return`@(${r}) { ${e} }`}}}function Vf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Md(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Vf(t.inner):r=Md("any"),N1(t.name,[r])}}throw new gf(`Unknown type: '${ch(t)}'`)}else{const r=t.args.map(e=>Vf(e));return F1(r,Vf(t.result))}}function O1(t){switch(t.type){case"def":{t.varType!=null&&Vf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Vf(r.argType);t.retType!=null&&Vf(t.retType);break}}return t}function I1(t){for(const r of t)Et(r,O1);return t}function hh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=hh(s.expr.children)),r.push(s);else{if(e.length>0)throw new gf("invalid attribute.");switch(s.type){case"fn":{s.children=hh(s.children);break}case"block":{s.statements=hh(s.statements);break}}r.push(s)}if(e.length>0)throw new gf("invalid attribute.");return r}function R1(t){if(P1(t)&&Ew(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=k1(s,v.args,v.loc);break}case"indexChain":{s=E1(s,v.index,v.loc);break}case"propChain":{s=M1(s,v.name,v.loc);break}}return s}return t}function j1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],R1);return t}function ph(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Mw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return ph(t,r,e);{const{left:s,right:v,info:d}=t;return ph(s,Mw(v,r,e),d)}}function Wo(t){if(t.type!=="infixTree")return t;if(t.info.mapFn)return t.info.mapFn(t);{const r=Wo(t.left),e=Wo(t.right);return{type:"call",target:{type:"identifier",name:t.info.func,loc:t.info.opLoc},args:[r,e],loc:{start:r.loc.start,end:e.loc.end}}}}const D1={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>{const r=Wo(t.left),e=Wo(t.right);return{type:"and",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3},"||":{mapFn:t=>{const r=Wo(t.left),e=Wo(t.right);return{type:"or",left:r,right:e,loc:{start:r.loc.start,end:e.loc.end},operatorLoc:t.info.opLoc}},priority:3}};function U1(t){const r=t.operators.map((s,v)=>{const d=D1[s];if(d==null)throw new gf(`No such operator: ${s}.`);return{...d,opLoc:t.operatorLocs[v]}});let e=ph(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=Mw(e,t.operands[2+s],r[1+s]);return Wo(e)}function B1(t){for(let r=0;r<t.length;r++)t[r]=Et(t[r],e=>e.type==="infix"?U1(e):e);return t}var Bu;let L1=(Bu=class{constructor(){he(this,"plugins");this.plugins={validate:[T1,I1],transform:[hh,j1,B1]}}static parse(r){return Bu.instance==null&&(Bu.instance=new Bu),Bu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Ed(r,{startRule:"Preprocess"});e=Ed(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new gf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new gf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},he(Bu,"instance"),Bu);const H1="0.19.0",q1={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let wv=[],oc=null;function V1(t){return wv=L1.parse(t),JSON.stringify(wv,null,"	")}async function z1(t){oc==null||oc.abort(),oc=new Un({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:gv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:gv(e.val,!0),print:!1});break}}});try{await oc.exec(wv)}catch(r){t.err(r)}}const K1=Object.freeze(Object.defineProperty({__proto__:null,exec:z1,parse:V1,samples:q1,version:H1},Symbol.toStringTag,{value:"Module"}));function fs(t,r,e){let s=e.value;return{configurable:!0,get(){const v=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){s=v}}}let np=class Sw extends Error{constructor(e,s){super(e);he(this,"name","AiScript");he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,Sw)}},W1=class extends np{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},df=class extends np{constructor(e,s){super(e,s);he(this,"name","Syntax")}},pr=class extends np{constructor(e,s){super(e,s);he(this,"name","Runtime")}},Sd=class extends pr{constructor(r,e){super(r,e)}};class G1 extends pr{constructor(e,s){super(e,s);he(this,"name","")}}var no=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Ju=class mv{constructor(r=[],e,s,v){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});he(this,"nsName");this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>"),this.nsName=v}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new mv(s,this,e)}createChildNamespaceScope(r,e=new Map,s){const v=[e,...this.layerdStates];return new mv(v,this,s,r)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new pr(`Variable '${r}' already exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null?this.onUpdated(r,e.value):this.nsName!=null&&this.parent.add(this.nsName+":"+r,e)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new pr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new pr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};no([fs],Ju.prototype,"log",null);no([fs],Ju.prototype,"onUpdated",null);no([fs],Ju.prototype,"createChildScope",null);no([fs],Ju.prototype,"createChildNamespaceScope",null);no([fs],Ju.prototype,"get",null);no([fs],Ju.prototype,"exists",null);no([fs],Ju.prototype,"getAll",null);no([fs],Ju.prototype,"add",null);no([fs],Ju.prototype,"assign",null);let eh;const J1=new Uint8Array(16);function Z1(){if(!eh&&(eh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!eh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return eh(J1)}const mn=[];for(let t=0;t<256;++t)mn.push((t+256).toString(16).slice(1));function Q1(t,r=0){return mn[t[r+0]]+mn[t[r+1]]+mn[t[r+2]]+mn[t[r+3]]+"-"+mn[t[r+4]]+mn[t[r+5]]+"-"+mn[t[r+6]]+mn[t[r+7]]+"-"+mn[t[r+8]]+mn[t[r+9]]+"-"+mn[t[r+10]]+mn[t[r+11]]+mn[t[r+12]]+mn[t[r+13]]+mn[t[r+14]]+mn[t[r+15]]}const X1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Td={randomUUID:X1};function Y1(t,r,e){if(Td.randomUUID&&!r&&!t)return Td.randomUUID();t=t||{};const s=t.random||(t.rng||Z1)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Q1(s)}const Jt={type:"null"},Na={type:"bool",value:!0},Fa={type:"bool",value:!1},Ue=t=>({type:"num",value:t}),fr=t=>({type:"str",value:t}),sf=t=>({type:"bool",value:t}),Lh=t=>({type:"obj",value:t}),ls=t=>({type:"arr",value:t}),eA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),we=t=>({type:"fn",native:t}),tA=t=>({type:"return",value:t}),rA=()=>({type:"break",value:null}),sA=()=>({type:"continue",value:null}),nA=t=>t.type==="return"?t.value:t,$v=(t,r)=>({type:"error",value:t,info:r});function Oa(t){if(t==null)throw new pr("Expect anything, but got nothing.")}function Pn(t){if(t==null)throw new pr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new pr(`Expect boolean, but got ${t.type}.`)}function ju(t){if(t==null)throw new pr("Expect function, but got nothing.");if(t.type!=="fn")throw new pr(`Expect function, but got ${t.type}.`)}function $s(t){if(t==null)throw new pr("Expect string, but got nothing.");if(t.type!=="str")throw new pr(`Expect string, but got ${t.type}.`)}function Ne(t){if(t==null)throw new pr("Expect number, but got nothing.");if(t.type!=="num")throw new pr(`Expect number, but got ${t.type}.`)}function Mu(t){if(t==null)throw new pr("Expect object, but got nothing.");if(t.type!=="obj")throw new pr(`Expect object, but got ${t.type}.`)}function nf(t){if(t==null)throw new pr("Expect array, but got nothing.");if(t.type!=="arr")throw new pr(`Expect array, but got ${t.type}.`)}function Np(t){return t.type==="obj"}function Nd(t){return t.type==="arr"}function zf(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function xv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>xv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function bv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>bv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=bv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Av(t){if(t===null)return Jt;if(typeof t=="boolean")return sf(t);if(typeof t=="string")return fr(t);if(typeof t=="number")return Ue(t);if(Array.isArray(t))return ls(t.map(r=>Av(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Av(s));return Lh(r)}return Jt}function Kf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const v of t.value)s.push(Kf(v,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[v,d]of t.value)s.push(`${v}: ${Kf(d,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const aA={version:"0.18.0"},iA=aA.version,lA=new TextEncoder,uA=new TextDecoder,oA={help:fr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":fr(iA),"Core:ai":fr("kawaii"),"Core:not":we(([t])=>(Pn(t),t.value?Fa:Na)),"Core:eq":we(([t,r])=>(Oa(t),Oa(r),zf(t,r)?Na:Fa)),"Core:neq":we(([t,r])=>(Oa(t),Oa(r),zf(t,r)?Fa:Na)),"Core:and":we(([t,r])=>(Pn(t),t.value?(Pn(r),r.value?Na:Fa):Fa)),"Core:or":we(([t,r])=>(Pn(t),t.value?Na:(Pn(r),r.value?Na:Fa))),"Core:add":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value+r.value))),"Core:sub":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value-r.value))),"Core:mul":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value*r.value))),"Core:pow":we(([t,r])=>{Ne(t),Ne(r);const e=t.value**r.value;if(isNaN(e))throw new pr("Invalid operation.");return Ue(e)}),"Core:div":we(([t,r])=>{Ne(t),Ne(r);const e=t.value/r.value;if(isNaN(e))throw new pr("Invalid operation.");return Ue(e)}),"Core:mod":we(([t,r])=>(Ne(t),Ne(r),Ue(t.value%r.value))),"Core:gt":we(([t,r])=>(Ne(t),Ne(r),t.value>r.value?Na:Fa)),"Core:lt":we(([t,r])=>(Ne(t),Ne(r),t.value<r.value?Na:Fa)),"Core:gteq":we(([t,r])=>(Ne(t),Ne(r),t.value>=r.value?Na:Fa)),"Core:lteq":we(([t,r])=>(Ne(t),Ne(r),t.value<=r.value?Na:Fa)),"Core:type":we(([t])=>(Oa(t),fr(t.type))),"Core:to_str":we(([t])=>(Oa(t),fr(Kf(t)))),"Core:range":we(([t,r])=>(Ne(t),Ne(r),t.value<r.value?ls(Array.from({length:r.value-t.value+1},(e,s)=>Ue(s+t.value))):t.value>r.value?ls(Array.from({length:t.value-r.value+1},(e,s)=>Ue(t.value-s))):ls([t]))),"Core:sleep":we(async([t])=>(Ne(t),await new Promise(r=>setTimeout(r,t.value)),Jt)),"Core:abort":we(async([t])=>{throw $s(t),new G1(t.value)}),"Util:uuid":we(()=>fr(Y1())),"Json:stringify":we(([t])=>(Oa(t),fr(JSON.stringify(bv(t))))),"Json:parse":we(([t])=>{$s(t);try{return Av(JSON.parse(t.value))}catch{return $v("not_json")}}),"Json:parsable":we(([t])=>{$s(t);try{JSON.parse(t.value)}catch{return sf(!1)}return sf(!0)}),"Date:now":we(()=>Ue(Date.now())),"Date:year":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:millisecond":we(([t])=>(t&&Ne(t),Ue(new Date((t==null?void 0:t.value)||Date.now()).getMilliseconds()))),"Date:parse":we(([t])=>($s(t),Ue(new Date(t.value).getTime()))),"Date:to_iso_str":we(([t,r])=>{t&&Ne(t);const e=new Date((t==null?void 0:t.value)??Date.now());r&&Ne(r);const s=(r==null?void 0:r.value)??-e.getTimezoneOffset();let v;if(s===0)v="Z";else{const L=Math.sign(s),Z=Math.floor(Math.abs(s)/60),ge=Math.abs(s)%60;e.setUTCHours(e.getUTCHours()+L*Z),e.setUTCMinutes(e.getUTCMinutes()+L*ge);const le=s>0?"+":"-",pe=Z.toString().padStart(2,"0"),be=ge.toString().padStart(2,"0");v=`${le}${pe}:${be}`}const d=e.getUTCFullYear().toString().padStart(4,"0"),C=(e.getUTCMonth()+1).toString().padStart(2,"0"),P=e.getUTCDate().toString().padStart(2,"0"),E=e.getUTCHours().toString().padStart(2,"0"),N=e.getUTCMinutes().toString().padStart(2,"0"),S=e.getUTCSeconds().toString().padStart(2,"0"),B=e.getUTCMilliseconds().toString().padStart(3,"0");return fr(`${d}-${C}-${P}T${E}:${N}:${S}.${B}${v}`)}),"Math:Infinity":Ue(1/0),"Math:E":Ue(Math.E),"Math:LN2":Ue(Math.LN2),"Math:LN10":Ue(Math.LN10),"Math:LOG2E":Ue(Math.LOG2E),"Math:LOG10E":Ue(Math.LOG10E),"Math:PI":Ue(Math.PI),"Math:SQRT1_2":Ue(Math.SQRT1_2),"Math:SQRT2":Ue(Math.SQRT2),"Math:abs":we(([t])=>(Ne(t),Ue(Math.abs(t.value)))),"Math:acos":we(([t])=>(Ne(t),Ue(Math.acos(t.value)))),"Math:acosh":we(([t])=>(Ne(t),Ue(Math.acosh(t.value)))),"Math:asin":we(([t])=>(Ne(t),Ue(Math.asin(t.value)))),"Math:asinh":we(([t])=>(Ne(t),Ue(Math.asinh(t.value)))),"Math:atan":we(([t])=>(Ne(t),Ue(Math.atan(t.value)))),"Math:atanh":we(([t])=>(Ne(t),Ue(Math.atanh(t.value)))),"Math:atan2":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.atan2(t.value,r.value)))),"Math:cbrt":we(([t])=>(Ne(t),Ue(Math.cbrt(t.value)))),"Math:ceil":we(([t])=>(Ne(t),Ue(Math.ceil(t.value)))),"Math:clz32":we(([t])=>(Ne(t),Ue(Math.clz32(t.value)))),"Math:cos":we(([t])=>(Ne(t),Ue(Math.cos(t.value)))),"Math:cosh":we(([t])=>(Ne(t),Ue(Math.cosh(t.value)))),"Math:exp":we(([t])=>(Ne(t),Ue(Math.exp(t.value)))),"Math:expm1":we(([t])=>(Ne(t),Ue(Math.expm1(t.value)))),"Math:floor":we(([t])=>(Ne(t),Ue(Math.floor(t.value)))),"Math:fround":we(([t])=>(Ne(t),Ue(Math.fround(t.value)))),"Math:hypot":we(([t])=>{nf(t);const r=[];for(const e of t.value)Ne(e),r.push(e.value);return Ue(Math.hypot(...r))}),"Math:imul":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.imul(t.value,r.value)))),"Math:log":we(([t])=>(Ne(t),Ue(Math.log(t.value)))),"Math:log1p":we(([t])=>(Ne(t),Ue(Math.log1p(t.value)))),"Math:log10":we(([t])=>(Ne(t),Ue(Math.log10(t.value)))),"Math:log2":we(([t])=>(Ne(t),Ue(Math.log2(t.value)))),"Math:max":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.max(t.value,r.value)))),"Math:min":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.min(t.value,r.value)))),"Math:pow":we(([t,r])=>(Ne(t),Ne(r),Ue(Math.pow(t.value,r.value)))),"Math:round":we(([t])=>(Ne(t),Ue(Math.round(t.value)))),"Math:sign":we(([t])=>(Ne(t),Ue(Math.sign(t.value)))),"Math:sin":we(([t])=>(Ne(t),Ue(Math.sin(t.value)))),"Math:sinh":we(([t])=>(Ne(t),Ue(Math.sinh(t.value)))),"Math:sqrt":we(([t])=>{Ne(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new pr("Invalid operation.");return Ue(r)}),"Math:tan":we(([t])=>(Ne(t),Ue(Math.tan(t.value)))),"Math:tanh":we(([t])=>(Ne(t),Ue(Math.tanh(t.value)))),"Math:trunc":we(([t])=>(Ne(t),Ue(Math.trunc(t.value)))),"Math:rnd":we(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ue(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ue(Math.random())),"Math:gen_rng":we(([t])=>{if(Oa(t),t.type!=="num"&&t.type!=="str")return Jt;const r=No(t.value.toString());return we(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Ue(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ue(r()))}),"Num:to_hex":we(([t])=>(Ne(t),fr(t.value.toString(16)))),"Num:from_hex":we(([t])=>($s(t),Ue(parseInt(t.value,16)))),"Str:lf":fr(`
`),"Str:lt":we(([t,r])=>($s(t),$s(r),t.value<r.value?Ue(-1):t.value===r.value?Ue(0):Ue(1))),"Str:gt":we(([t,r])=>($s(t),$s(r),t.value>r.value?Ue(-1):t.value===r.value?Ue(0):Ue(1))),"Str:from_codepoint":we(([t])=>(Ne(t),fr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":we(([t])=>(nf(t),fr(Array.from(t.value.map(r=>(Ne(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":we(([t])=>(nf(t),fr(uA.decode(Uint8Array.from(t.value.map(r=>(Ne(r),r.value))))))),"Arr:create":we(([t,r])=>{Ne(t);try{return ls(Array(t.value).fill(r??Jt))}catch(e){throw t.value<0?new pr("Arr:create expected non-negative number, got negative"):Number.isInteger(t.value)?e:new pr("Arr:create expected integer, got non-integer")}}),"Obj:keys":we(([t])=>(Mu(t),ls(Array.from(t.value.keys()).map(r=>fr(r))))),"Obj:vals":we(([t])=>(Mu(t),ls(Array.from(t.value.values())))),"Obj:kvs":we(([t])=>(Mu(t),ls(Array.from(t.value.entries()).map(([r,e])=>ls([fr(r),e]))))),"Obj:get":we(([t,r])=>(Mu(t),$s(r),t.value.get(r.value)??Jt)),"Obj:set":we(([t,r,e])=>(Mu(t),$s(r),Oa(e),t.value.set(r.value,e),Jt)),"Obj:has":we(([t,r])=>(Mu(t),$s(r),sf(t.value.has(r.value)))),"Obj:copy":we(([t])=>(Mu(t),Lh(new Map(t.value)))),"Obj:merge":we(([t,r])=>(Mu(t),Mu(r),Lh(new Map([...t.value,...r.value])))),"Error:create":we(([t,r])=>($s(t),$v(t.value,r))),"Async:interval":we(async([t,r,e],s)=>{Ne(t),ju(r),e&&(Pn(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),we(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":we(async([t,r],e)=>{Ne(t),ju(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),we(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},Fd={num:{to_str:t=>we(async(r,e)=>fr(t.value.toString()))},str:{to_num:t=>we(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Jt:Ue(s)}),to_arr:t=>we(async(r,e)=>ls(Zs(t.value).map(s=>fr(s)))),to_unicode_arr:t=>we(async(r,e)=>ls([...t.value].map(s=>fr(s)))),to_unicode_codepoint_arr:t=>we(async(r,e)=>ls([...t.value].map(s=>{const v=s.codePointAt(0);return Ue(v??s.charCodeAt(0))}))),to_char_arr:t=>we(async(r,e)=>ls(t.value.split("").map(s=>fr(s)))),to_charcode_arr:t=>we(async(r,e)=>ls(t.value.split("").map(s=>Ue(s.charCodeAt(0))))),to_utf8_byte_arr:t=>we(async(r,e)=>ls(Array.from(lA.encode(t.value)).map(s=>Ue(s)))),len:t=>Ue(Cf(t.value)),replace:t=>we(async([r,e],s)=>($s(r),$s(e),fr(t.value.split(r.value).join(e.value)))),index_of:t=>we(async([r,e],s)=>{$s(r),e&&Ne(e);const v=e?e.value<0?t.value.length+e.value:e.value:void 0;return Ue(Pf(t.value,r.value,v))}),incl:t=>we(async([r],e)=>($s(r),t.value.includes(r.value)?Na:Fa)),trim:t=>we(async(r,e)=>fr(t.value.trim())),upper:t=>we(async(r,e)=>fr(t.value.toUpperCase())),lower:t=>we(async(r,e)=>fr(t.value.toLowerCase())),split:t=>we(async([r],e)=>(r&&$s(r),ls(r?t.value.split(r?r.value:"").map(s=>fr(s)):Zs(t.value).map(s=>fr(s))))),slice:t=>we(async([r,e],s)=>(Ne(r),Ne(e),fr(_f(t.value,r.value,e.value)))),pick:t=>we(async([r],e)=>{Ne(r);const v=Zs(t.value)[r.value];return v?fr(v):Jt}),charcode_at:t=>we(([r],e)=>{Ne(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?Jt:Ue(s)}),codepoint_at:t=>we(([r],e)=>{Ne(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?Jt:Ue(s)})},arr:{len:t=>Ue(t.value.length),push:t=>we(async([r],e)=>(Oa(r),t.value.push(r),t)),unshift:t=>we(async([r],e)=>(Oa(r),t.value.unshift(r),t)),pop:t=>we(async(r,e)=>t.value.pop()??Jt),shift:t=>we(async(r,e)=>t.value.shift()??Jt),concat:t=>we(async([r],e)=>(nf(r),ls(t.value.concat(r.value)))),slice:t=>we(async([r,e],s)=>(Ne(r),Ne(e),ls(t.value.slice(r.value,e.value)))),join:t=>we(async([r],e)=>(r&&$s(r),fr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>we(async([r],e)=>{ju(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,Ue(d)]));return ls(await Promise.all(s))}),filter:t=>we(async([r],e)=>{ju(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,Ue(v)]);Pn(C),C.value&&s.push(d)}return ls(s)}),reduce:t=>we(async([r,e],s)=>{ju(r);const v=e!=null;let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,Ue(C)])}return d}),find:t=>we(async([r],e)=>{ju(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Ue(s)]);if(Pn(d),d.value)return v}return Jt}),incl:t=>we(async([r],e)=>(Oa(r),t.value.some(s=>zf(r,s))?Na:Fa)),index_of:t=>we(async([r,e],s)=>{if(Oa(r),e){Ne(e);const v=t.value.slice(0,e.value).length,d=t.value.slice(e.value).findIndex(C=>zf(C,r));return Ue(d<0?d:d+v)}else return Ue(t.value.findIndex(v=>zf(v,r)))}),reverse:t=>we(async(r,e)=>(t.value.reverse(),Jt)),copy:t=>we(async(r,e)=>ls([...t.value])),sort:t=>we(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=await s(d.slice(0,P),C),N=await s(d.slice(P),C);return v(E,N,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Ne(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return ju(r),nf(t),t.value=await s(t.value,r),t}),fill:t=>we(async([r,e,s],v)=>{const d=r??Jt,C=e&&(Ne(e),e.value),P=s&&(Ne(s),s.value);return t.value.fill(d,C,P),t}),repeat:t=>we(async([r],e)=>{Ne(r);try{return ls(Array(r.value).fill(t.value).flat())}catch(s){throw r.value<0?new pr("arr.repeat expected non-negative number, got negative"):Number.isInteger(r.value)?s:new pr("arr.repeat expected integer, got non-integer")}}),every:t=>we(async([r],e)=>{ju(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Ue(s)]);if(Pn(d),!d.value)return Fa}return Na}),some:t=>we(async([r],e)=>{ju(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Ue(s)]);if(Pn(d),d.value)return Na}return Fa})},error:{name:t=>fr(t.value),info:t=>t.info??Jt}};function fA(t,r){if(Object.hasOwn(Fd,t.type)){const e=Fd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new pr(`No such prop (${r}) in ${t.type}.`)}else throw new pr(`Cannot read prop of ${t.type}. (reading ${r})`)}const cA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ma=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Tw=300,hA=Tw-1;let Bn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const s={print:we(([v])=>{Oa(v),this.opts.out&&this.opts.out(v)}),readline:we(async v=>{const d=v[0];if($s(d),this.opts.in==null)return Jt;const C=await this.opts.in(d.value);return fr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...oA,...s}).map(([v,d])=>[v,cA.const(d)])),this.scope=new Ju([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),$v("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof np?this.opts.err(r):this.opts.err(new W1(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r,e=this.scope){for(const s of r)switch(s.type){case"ns":{await this.collectNsMember(s,e);break}}}async collectNsMember(r,e=this.scope){const s=e.createChildNamespaceScope(r.name);await this.collectNs(r.members,s);for(const v of r.members)switch(v.type){case"def":{if(v.mut)throw new Error("Namespaces cannot include mutable variable: "+v.name);const d={isMutable:v.mut,value:await this._eval(v.expr,s)};s.add(v.name,d);break}case"ns":break;default:throw new Error("invalid ns member type: "+v.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Jt;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(s);return nA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Jt;if(this.stepCount%Tw===hA&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new pr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);ju(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(Pn(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Pn(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Jt}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(zf(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Jt}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return Jt}case"for":{if(r.times){const s=await this._eval(r.times,e);Ne(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Ne(s),Ne(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ue(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return Jt}case"each":{const s=await this._eval(r.items,e);nf(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return Jt}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,{isMutable:r.mut,value:s}),Jt}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),Jt}case"addAssign":{const s=await this._eval(r.dest,e);Ne(s);const v=await this._eval(r.expr,e);return Ne(v),await this.assign(e,r.dest,Ue(s.value+v.value)),Jt}case"subAssign":{const s=await this._eval(r.dest,e);Ne(s);const v=await this._eval(r.expr,e);return Ne(v),await this.assign(e,r.dest,Ue(s.value-v.value)),Jt}case"null":return Jt;case"bool":return sf(r.value);case"num":return Ue(r.value);case"str":return fr(r.value);case"arr":return ls(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return Lh(s)}case"prop":{const s=await this._eval(r.target,e);return Np(s)?s.value.has(r.name)?s.value.get(r.name):Jt:fA(s,r.name)}case"index":{const s=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Nd(s)){Ne(v);const d=s.value[v.value];if(d===void 0)throw new Sd(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}else{if(Np(s))return $s(v),s.value.has(v.value)?s.value.get(v.value):Jt;throw new pr(`Cannot read prop (${Kf(v)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return Pn(s),sf(!s.value)}case"fn":return eA(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return sf(e.exists(r.identifier.name));case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);s+=Kf(d)}return fr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),tA(s)}case"break":return this.log("block:break",{scope:e.name}),rA();case"continue":return this.log("block:continue",{scope:e.name}),sA();case"ns":return Jt;case"meta":return Jt;case"and":{const s=await this._eval(r.left,e);if(Pn(s),s.value){const v=await this._eval(r.right,e);return Pn(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(Pn(s),s.value)return s;{const v=await this._eval(r.right,e);return Pn(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=Jt;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Nd(v)){if(Ne(d),v.value[d.value]===void 0)throw new Sd(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=s}else if(Np(v))$s(d),v.value.set(d.value,s);else throw new pr(`Cannot read prop (${Kf(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Mu(v),v.value.set(e.name,s)}else if(e.type==="arr")nf(s),await Promise.all(e.value.map((v,d)=>this.assign(r,v,s.value[d]??Jt)));else if(e.type==="obj")Mu(s),await Promise.all([...e.value].map(([v,d])=>this.assign(r,d,s.value.get(v)??Jt)));else throw new pr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ma([fs],Bn.prototype,"exec",null);Ma([fs],Bn.prototype,"execFn",null);Ma([fs],Bn.prototype,"execFnSimple",null);Ma([fs],Bn.prototype,"handleError",null);Ma([fs],Bn.prototype,"log",null);Ma([fs],Bn.prototype,"collectNs",null);Ma([fs],Bn.prototype,"collectNsMember",null);Ma([fs],Bn.prototype,"_fn",null);Ma([fs],Bn.prototype,"_eval",null);Ma([fs],Bn.prototype,"_run",null);Ma([fs],Bn.prototype,"registerAbortHandler",null);Ma([fs],Bn.prototype,"unregisterAbortHandler",null);Ma([fs],Bn.prototype,"abort",null);Ma([fs],Bn.prototype,"assign",null);Ma([fs],Bn,"collectMetadata",null);function pA(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function af(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,af.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}pA(af,Error);function Fp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}af.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=Fp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+Fp("",v.column-1," ")+Fp("",B,"^")}else r+=`
 at `+C}return r};af.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Od(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:tr,Main:yi},d=tr,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="!",Lr="[",Yt=".",Mr="if",ir="elif",_r="else",Jr="match",nr="=>",Zr="*",ar="eval",Pr="exists",G="`",ee='"',fe="'",Ce='\\"',ve="\\'",Ae="true",Re="false",Me="null",Se="@",$e="@(",it="<",qe=">",Ye=`\r
`,Qe=/^[A-Z0-9_:]/i,ot=/^[%*-+\-\/<>\^]/,Pt=/^[^`{]/,xt=/^[{}`]/,Ut=/^[+\-]/,yt=/^[1-9]/,lt=/^[0-9]/,vr=/^[,;]/,cs=/^[A-Z_]/i,is=/^[A-Z0-9_]/i,Ct=/^[\r\n]/,Rt=/^[ \t\r\n]/,Mn=/^[ \t]/,gr=F(),el=R("//",!1),tl=R("/*",!1),lr=R("*/",!1),Bt=R("(",!1),Qr=R(")",!1),qn=R("::",!1),kt=R("{",!1),ft=R("}",!1),Sr=R("###",!1),Gt=R("let",!1),st=R(":",!1),Lt=R("=",!1),bs=R("var",!1),Ht=R("<:",!1),qt=R("#[",!1),Xr=R("]",!1),Da=R("each",!1),Tr=R(",",!1),hs=R("for",!1),Ns=R("return",!1),ct=_t([["A","Z"],["0","9"],"_",":"],!1,!0),Ot=R("loop",!1),Xs=R("break",!1),Nr=R("continue",!1),Fr=R("+=",!1),rl=R("-=",!1),Ua=R("\\",!1),sl=R("||",!1),nl=R("&&",!1),Ba=R("==",!1),La=R("!=",!1),al=R("<=",!1),il=R(">=",!1),ll=_t(["%",["*","+"],"-","/","<",">","^"],!1,!1),ul=R("!",!1),Vn=R("[",!1),Ys=R(".",!1),zn=R("if",!1),Ha=R("elif",!1),ol=R("else",!1),qa=R("match",!1),Fs=R("=>",!1),fl=R("*",!1),cl=R("eval",!1),hl=R("exists",!1),As=R("`",!1),Os=_t(["`","{"],!0,!1),Kn=_t(["{","}","`"],!1,!1),en=R('"',!1),tn=R("'",!1),pl=R('\\"',!1),rn=R("\\'",!1),ps=_t(["+","-"],!1,!1),Is=_t([["1","9"]],!1,!1),Ar=_t([["0","9"]],!1,!1),sn=R("true",!1),nn=R("false",!1),an=R("null",!1),vs=_t([",",";"],!1,!1),ln=R("@",!1),Rs=R("@(",!1),Va=R("<",!1),er=R(">",!1),za=_t([["A","Z"],"_"],!1,!0),dr=_t([["A","Z"],["0","9"],"_"],!1,!0),vl=R(`\r
`,!1),un=_t(["\r",`
`],!1,!1),gl=_t([" ","	","\r",`
`],!1,!1),js=_t([" ","	"],!1,!1),dl=function(f){return f.join("")},Wn=function(){return o()},yl=function(){return o()},Ka=function(){return""},wl=function(){return""},ml=function(f){return f??[]},Wa=function(f,g){return g},$l=function(f,g){return[f,...g]},Ga=function(f,g){return g},xl=function(f,g){return[f,...g]},Ja=function(f,g){return g},bl=function(f,g){return[f,...g]},Za=function(f){return f},Al=function(f,g){return ne("ns",{name:f,members:g})},Gn=function(f,g){return ne("meta",{name:f,value:g})},Cl=function(f){return ne("meta",{name:null,value:f})},Jn=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!1,attr:[]})},_l=function(f,g,b){return ne("def",{name:f,varType:g,expr:b,mut:!0,attr:[]})},Qa=function(f){return ne("identifier",{name:"print",chain:[ne("callChain",{args:[f]})]})},Pl=function(f,g){return ne("attr",{name:f,value:g??ne("bool",{value:!0})})},kl=function(f,g,b){return ne("each",{var:f,items:g,for:b})},El=function(f,g,b){return ne("each",{var:f,items:g,for:b})},Ml=function(f,g){return g},Sl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Tl=function(f,g){return g},Nl=function(f,g,b,w){return ne("for",{var:f,from:g??ne("num",{value:0}),to:b,for:w})},Fl=function(f,g){return ne("for",{times:f,for:g})},Ol=function(f,g){return ne("for",{times:f,for:g})},Il=function(f){return ne("return",{expr:f})},Rl=function(f){return ne("loop",{statements:f})},jl=function(){return ne("break",{})},Dl=function(){return ne("continue",{})},Ul=function(f,g,b){return g==="+="?ne("addAssign",{dest:f,expr:b}):g==="-="?ne("subAssign",{dest:f,expr:b}):ne("assign",{dest:f,expr:b})},Xa=function(f,g,b){return{op:g,term:b}},Bl=function(f,g){return ne("infix",{operands:[f,...g.map(b=>b.term)],operators:g.map(b=>b.op)})},Ll=function(){return o()},Hl=function(f){return ne("not",{expr:f})},ql=function(f,g){return f.chain?{...f,chain:[...f.chain,...g]}:{...f,chain:g}},Vl=function(f){return ne("callChain",{args:f??[]})},Zn=function(f,g){return g},zl=function(f,g){return[f,...g]},Ya=function(f){return ne("indexChain",{index:f})},Kl=function(f){return ne("propChain",{name:f})},Wl=function(f,g,b,w){return ne("if",{cond:f,then:g,elseif:b??[],else:w})},Gl=function(f,g){return[f,...g]},ei=function(f,g){return{cond:f,then:g}},Jl=function(f){return f},Qn=function(f,g,b){return{q:g,a:b}},Zl=function(f,g,b){return ne("match",{about:f,qs:g??[],default:b})},Ql=function(f){return ne("block",{statements:f})},Xl=function(f){return ne("exists",{identifier:f})},Yl=function(f){return ne("identifier",{name:f})},eu=function(f){return ne("tmpl",{tmpl:f})},ti=function(f){return f.join("")},ri=function(f){return f},si=function(f){return ne("str",{value:f.join("")})},ni=function(f){return f},tu=function(f){return ne("str",{value:f.join("")})},ru=function(){return'"'},ai=function(){return"'"},su=function(){return ne("num",{value:parseFloat(o())})},ii=function(){return ne("num",{value:parseFloat(o())})},li=function(){return ne("num",{value:parseInt(o(),10)})},nu=function(){return ne("num",{value:parseInt(o(),10)})},ui=function(){return ne("bool",{value:!0})},au=function(){return ne("bool",{value:!1})},iu=function(){return ne("null",{})},oi=function(f,g){return{k:f,v:g}},lu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},fi=function(f){return f},uu=function(f){return ne("arr",{value:f})},ou=function(f,g){return{name:f,argType:g}},ci=function(f,g){return[f,...g]},fu=function(f,g,b,w,a,l){return(f.length>0||b.length>0)&&O("Cannot use spaces before or after the function name."),ne("def",{name:g,expr:ne("fn",{args:w??[],retType:a},l??[]),mut:!1,attr:[]})},hi=function(f,g,b){return ne("fn",{args:f??[],retType:g},b??[])},Xn=function(f){return f},cu=function(f){return ne("arr",{value:f})},Yn=function(f,g){return{k:f,v:g}},hu=function(f){const g=new Map;for(const b of f)g.set(b.k,b.v);return ne("obj",{value:g})},pu=function(f,g){return ne("fnTypeSource",{args:f??[],result:g})},pi=function(f,g){return[f,...g]},vu=function(f,g){return ne("namedTypeSource",{name:f,inner:g})},vi=function(f){return ne("namedTypeSource",{name:f,inner:null})},gi=function(){return o()},gu=function(){return o()},di=function(f){return ne("block",{statements:f??[]})},c=r.peg$currPos|0,te=c,Cs=[{line:1,column:1}],yr=c,on=r.peg$maxFailExpected||[],i=r.peg$silentFails|0,T={},Yr;if(r.startRule){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function o(){return t.substring(te,c)}function X(){return ue(te,c)}function O(f,g){throw g=g!==void 0?g:ue(te,c),du(f,g)}function R(f,g){return{type:"literal",text:f,ignoreCase:g}}function _t(f,g,b){return{type:"class",parts:f,inverted:g,ignoreCase:b}}function F(){return{type:"any"}}function V(){return{type:"end"}}function Ds(f){var g=Cs[f],b;if(g)return g;if(f>=Cs.length)b=Cs.length-1;else for(b=f;!Cs[--b];);for(g=Cs[b],g={line:g.line,column:g.column};b<f;)t.charCodeAt(b)===10?(g.line++,g.column=1):g.column++,b++;return Cs[f]=g,g}function ue(f,g,b){var w=Ds(f),a=Ds(g),l={source:s,start:{offset:f,line:w.line,column:w.column},end:{offset:g,line:a.line,column:a.column}};return l}function D(f){c<yr||(c>yr&&(yr=c,on=[]),on.push(f))}function du(f,g){return new af(f,null,null,g)}function de(f,g,b){return new af(af.buildMessage(f,g),f,g,b)}function tr(){var f,g,b,w=c*77+0,a=T[w];if(a)return c=a.nextPos,a.result;for(f=c,g=[],b=Us();b!==e;)g.push(b),b=Us();return te=f,g=dl(g),f=g,T[w]={nextPos:c,result:f},f}function Us(){var f,g,b=c*77+1,w=T[b];return w?(c=w.nextPos,w.result):(f=c,g=Pi(),g!==e&&(te=f,g=Wn()),f=g,f===e&&(f=c,g=vn(),g!==e&&(te=f,g=yl()),f=g,f===e&&(f=U(),f===e&&(t.length>c?(f=t.charAt(c),c++):(f=e,i===0&&D(gr))))),T[b]={nextPos:c,result:f},f)}function U(){var f,g,b,w,a,l,$=c*77+2,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,2)===C?(g=C,c+=2):(g=e,i===0&&D(el)),g!==e){for(b=[],w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,l=Ti(),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=Ka()}else c=f,f=e;if(f===e)if(f=c,t.substr(c,2)===P?(g=P,c+=2):(g=e,i===0&&D(tl)),g!==e){for(b=[],w=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.substr(c,2)===E?(l=E,c+=2):(l=e,i===0&&D(lr)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr)),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);t.substr(c,2)===E?(w=E,c+=2):(w=e,i===0&&D(lr)),w!==e?(te=f,f=wl()):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function yi(){var f,g,b,w,a,l=c*77+3,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();for(b=fn(),b===e&&(b=null),w=[],a=k();a!==e;)w.push(a),a=k();return te=f,f=ml(b),T[l]={nextPos:c,result:f},f}function fn(){var f,g,b,w,a,l,$,p,n=c*77+4,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=ea(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ea(),p!==e?(te=w,w=Wa(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ea(),p!==e?(te=w,w=Wa(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=$l(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function j(){var f,g,b,w,a,l,$,p,n=c*77+5,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=cn(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=cn(),p!==e?(te=w,w=Ga(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=cn(),p!==e?(te=w,w=Ga(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=xl(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _s(){var f,g,b,w,a,l,$,p,n=c*77+6,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=Ps(),g!==e){for(b=[],w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Ps(),p!==e?(te=w,w=Ja(g,p)):(c=w,w=e)}else c=w,w=e;for(;w!==e;){for(b.push(w),w=c,a=[],l=De();l!==e;)a.push(l),l=De();if(l=Ge(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=Ps(),p!==e?(te=w,w=Ja(g,p)):(c=w,w=e)}else c=w,w=e}te=f,f=bl(g,b)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function ea(){var f,g=c*77+7,b=T[g];return b?(c=b.nextPos,b.result):(f=Cr(),f===e&&(f=Xe(),f===e&&(f=Ps())),T[g]={nextPos:c,result:f},f)}function cn(){var f,g=c*77+8,b=T[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=Cr())),T[g]={nextPos:c,result:f},f)}function Ps(){var f,g=c*77+9,b=T[g];return b?(c=b.nextPos,b.result):(f=gs(),f===e&&(f=va(),f===e&&(f=ks(),f===e&&(f=ts(),f===e&&(f=We(),f===e&&(f=Bs(),f===e&&(f=wi(),f===e&&(f=mi(),f===e&&(f=yu(),f===e&&(f=$i(),f===e&&(f=wu(),f===e&&(f=et()))))))))))),T[g]={nextPos:c,result:f},f)}function et(){var f,g=c*77+10,b=T[g];return b?(c=b.nextPos,b.result):(f=mu(),f===e&&(f=es()),T[g]={nextPos:c,result:f},f)}function es(){var f,g=c*77+11,b=T[g];return b?(c=b.nextPos,b.result):(f=ns(),f===e&&(f=Cu(),f===e&&(f=xu(),f===e&&(f=hn()))),T[g]={nextPos:c,result:f},f)}function hn(){var f,g,b,w,a,l,$=c*77+12,p=T[$];if(p)return c=p.nextPos,p.result;if(f=na(),f===e&&(f=bu(),f===e&&(f=_i(),f===e&&(f=Pi(),f===e&&(f=vn(),f===e&&(f=la(),f===e&&(f=dn(),f===e&&(f=fa(),f===e&&(f=ca(),f===e&&(f=Mi(),f===e&&(f=$u(),f===e&&(f=Ls(),f===e))))))))))))if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Za(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Or(){var f,g=c*77+13,b=T[g];return b?(c=b.nextPos,b.result):(f=la(),f===e&&(f=vn(),f===e&&(f=dn(),f===e&&(f=ga(),f===e&&(f=da(),f===e&&(f=fa()))))),T[g]={nextPos:c,result:f},f)}function Cr(){var f,g,b,w,a,l,$,p,n,u,y=c*77+14,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===B?(g=B,c+=2):(g=e,i===0&&D(qn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(t.charCodeAt(c)===123?(l=L,c++):(l=e,i===0&&D(kt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=j(),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();t.charCodeAt(c)===125?(u=Z,c++):(u=e,i===0&&D(ft)),u!==e?(te=f,f=Al(w,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function Xe(){var f,g,b,w,a,l,$=c*77+15,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Sr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=Or(),l!==e?(te=f,f=Gn(w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ge?(g=ge,c+=3):(g=e,i===0&&D(Sr)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();w=Or(),w!==e?(te=f,f=Cl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function gs(){var f,g,b,w,a,l,$,p,n,u=c*77+16,y=T[u];if(y)return c=y.nextPos,y.result;if(f=c,t.substr(c,3)===le?(g=le,c+=3):(g=e,i===0&&D(Gt)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=wr(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=et(),n!==e?(te=f,f=Jn(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===J?(g=J,c+=3):(g=e,i===0&&D(bs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===58?($=pe,c++):($=e,i===0&&D(st)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=wr(),n!==e?a=n:(c=a,a=e)}else c=a,a=e;for(a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===61?($=be,c++):($=e,i===0&&D(Lt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();n=et(),n!==e?(te=f,f=_l(w,a,n)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[u]={nextPos:c,result:f},f}function ks(){var f,g,b,w,a=c*77+17,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,2)===K?(g=K,c+=2):(g=e,i===0&&D(Ht)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();w=et(),w!==e?(te=f,f=Qa(w)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function We(){var f,g,b,w,a,l,$,p=c*77+18,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,2)===W?(g=W,c+=2):(g=e,i===0&&D(qt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=tt(),w!==e){for(a=c,l=[],$=k();$!==e;)l.push($),$=k();for($=Or(),$!==e?a=$:(c=a,a=e),a===e&&(a=null),l=[],$=k();$!==e;)l.push($),$=k();t.charCodeAt(c)===93?($=Q,c++):($=e,i===0&&D(Xr)),$!==e?(te=f,f=Pl(w,a)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[p]={nextPos:c,result:f},f}function Bs(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+19,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===le?(a=le,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();for(t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&D(Tr)),n===e&&(n=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e)if(t.charCodeAt(c)===41?(h=S,c++):(h=e,i===0&&D(Qr)),h!==e){for(x=[],m=k();m!==e;)x.push(m),m=k();m=ur(),m!==e?(te=f,f=kl($,y,m)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,4)===re?(g=re,c+=4):(g=e,i===0&&D(Da)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===le?(w=le,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();if(u=et(),u!==e){if(y=[],h=k(),h!==e)for(;h!==e;)y.push(h),h=k();else y=e;y!==e?(h=ur(),h!==e?(te=f,f=El(l,u,h)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function wi(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A=c*77+20,M=T[A];if(M)return c=M.nextPos,M.result;if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(t.substr(c,3)===le?(a=le,c+=3):(a=e,i===0&&D(Gt)),a!==e){if(l=[],$=k(),$!==e)for(;$!==e;)l.push($),$=k();else l=e;if(l!==e)if($=tt(),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();if(n=c,t.charCodeAt(c)===61?(u=be,c++):(u=e,i===0&&D(Lt)),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();h=et(),h!==e?(te=n,n=Ml($,h)):(c=n,n=e)}else c=n,n=e;for(n===e&&(n=null),t.charCodeAt(c)===44?(u=Y,c++):(u=e,i===0&&D(Tr)),u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();if(h=et(),h!==e)if(t.charCodeAt(c)===41?(x=S,c++):(x=e,i===0&&D(Qr)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=ur(),_!==e?(te=f,f=Sl($,n,h,_)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(t.substr(c,3)===le?(w=le,c+=3):(w=e,i===0&&D(Gt)),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(p=c,t.charCodeAt(c)===61?(n=be,c++):(n=e,i===0&&D(Lt)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=et(),y!==e?(te=p,p=Tl(l,y)):(c=p,p=e)}else c=p,p=e;for(p===e&&(p=null),t.charCodeAt(c)===44?(n=Y,c++):(n=e,i===0&&D(Tr)),n===e&&(n=null),u=[],y=k();y!==e;)u.push(y),y=k();if(y=et(),y!==e){if(h=[],x=k(),x!==e)for(;x!==e;)h.push(x),x=k();else h=e;h!==e?(x=ur(),x!==e?(te=f,f=Nl(l,p,y,x)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===40?(w=N,c++):(w=e,i===0&&D(Bt)),w!==e)if(a=et(),a!==e)if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();p=ur(),p!==e?(te=f,f=Fl(a,p)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,t.substr(c,3)===ie?(g=ie,c+=3):(g=e,i===0&&D(hs)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;a!==e?(l=ur(),l!==e?(te=f,f=Ol(w,l)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e}}return T[A]={nextPos:c,result:f},f}function ts(){var f,g,b,w,a,l=c*77+21,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,6)===ae?(g=ae,c+=6):(g=e,i===0&&D(Ns)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=et(),a!==e?(te=f,f=Il(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function mi(){var f,g,b,w,a,l,$,p,n=c*77+22,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===Te?(g=Te,c+=4):(g=e,i===0&&D(Ot)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=Z,c++):(p=e,i===0&&D(ft)),p!==e?(te=f,f=Rl(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function yu(){var f,g,b,w,a=c*77+23,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Ie?(g=Ie,c+=5):(g=e,i===0&&D(Xs)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=jl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function $i(){var f,g,b,w,a=c*77+24,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,8)===ke?(g=ke,c+=8):(g=e,i===0&&D(Nr)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=Dl()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function wu(){var f,g,b,w,a,l,$=c*77+25,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.substr(c,2)===at?(w=at,c+=2):(w=e,i===0&&D(Fr)),w===e&&(t.substr(c,2)===vt?(w=vt,c+=2):(w=e,i===0&&D(rl)),w===e&&(t.charCodeAt(c)===61?(w=be,c++):(w=e,i===0&&D(Lt)))),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();l=et(),l!==e?(te=f,f=Ul(g,w,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function mu(){var f,g,b,w,a,l,$,p,n=c*77+26,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=es(),g!==e){for(b=[],w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],p=rs();p!==e;)$.push(p),p=rs();p=es(),p!==e?(te=w,w=Xa(g,l,p)):(c=w,w=e)}else c=w,w=e;if(w!==e)for(;w!==e;){for(b.push(w),w=c,a=[],l=rs();l!==e;)a.push(l),l=rs();if(l=xi(),l!==e){for($=[],p=rs();p!==e;)$.push(p),p=rs();p=es(),p!==e?(te=w,w=Xa(g,l,p)):(c=w,w=e)}else c=w,w=e}else b=e;b!==e?(te=f,f=Bl(g,b)):(c=f,f=e)}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function rs(){var f,g,b,w=c*77+27,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=Ge(),b!==e?(g=[g,b],f=g):(c=f,f=e)):(c=f,f=e),f===e&&(f=De()),T[w]={nextPos:c,result:f},f)}function xi(){var f,g,b=c*77+28,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===At?(g=At,c+=2):(g=e,i===0&&D(sl)),g===e&&(t.substr(c,2)===mt?(g=mt,c+=2):(g=e,i===0&&D(nl)),g===e&&(t.substr(c,2)===Ze?(g=Ze,c+=2):(g=e,i===0&&D(Ba)),g===e&&(t.substr(c,2)===$t?(g=$t,c+=2):(g=e,i===0&&D(La)),g===e&&(t.substr(c,2)===Qt?(g=Qt,c+=2):(g=e,i===0&&D(al)),g===e&&(t.substr(c,2)===Xt?(g=Xt,c+=2):(g=e,i===0&&D(il)),g===e&&(g=t.charAt(c),ot.test(g)?c++:(g=e,i===0&&D(ll)))))))),g!==e&&(te=f,g=Ll()),f=g,T[b]={nextPos:c,result:f},f)}function $u(){var f,g,b,w=c*77+29,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===33?(g=pt,c++):(g=e,i===0&&D(ul)),g!==e?(b=et(),b!==e?(te=f,f=Hl(b)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function xu(){var f,g,b,w,a=c*77+30,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,g=hn(),g!==e){if(b=[],w=bi(),w===e&&(w=ta(),w===e&&(w=Ai())),w!==e)for(;w!==e;)b.push(w),w=bi(),w===e&&(w=ta(),w===e&&(w=Ai()));else b=e;b!==e?(te=f,f=ql(g,b)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function bi(){var f,g,b,w,a,l,$=c*77+31,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===40?(g=N,c++):(g=e,i===0&&D(Bt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ss(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e?(te=f,f=Vl(w)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ss(){var f,g,b,w,a,l,$=c*77+32,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=et(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=et(),l!==e?(te=w,w=Zn(g,l)):(c=w,w=e)):(c=w,w=e);te=f,f=zl(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ta(){var f,g,b,w,a,l,$=c*77+33,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=et(),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=Ya(w)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Ai(){var f,g,b,w=c*77+34,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===46?(g=Yt,c++):(g=e,i===0&&D(Ys)),g!==e?(b=tt(),b!==e?(te=f,f=Kl(b)):(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function ns(){var f,g,b,w,a,l,$,p,n,u,y=c*77+35,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===Mr?(g=Mr,c+=2):(g=e,i===0&&D(zn)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;if(b!==e)if(w=et(),w!==e){if(a=[],l=k(),l!==e)for(;l!==e;)a.push(l),l=k();else a=e;if(a!==e)if(l=ur(),l!==e){if($=c,p=[],n=k(),n!==e)for(;n!==e;)p.push(n),n=k();else p=e;if(p!==e?(n=ra(),n!==e?$=n:(c=$,$=e)):(c=$,$=e),$===e&&($=null),p=c,n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;n!==e?(u=Ci(),u!==e?p=u:(c=p,p=e)):(c=p,p=e),p===e&&(p=null),te=f,f=Wl(w,l,$,p)}else c=f,f=e;else c=f,f=e}else c=f,f=e;else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ra(){var f,g,b,w,a,l,$=c*77+36,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=sa(),g!==e){for(b=[],w=c,a=[],l=k();l!==e;)a.push(l),l=k();for(l=sa(),l!==e?w=l:(c=w,w=e);w!==e;){for(b.push(w),w=c,a=[],l=k();l!==e;)a.push(l),l=k();l=sa(),l!==e?w=l:(c=w,w=e)}te=f,f=Gl(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function sa(){var f,g,b,w,a,l,$,p=c*77+37,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,t.substr(c,4)===ir?(g=ir,c+=4):(g=e,i===0&&D(Ha)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=ur(),$!==e?(te=f,f=ei(a,$)):(c=f,f=e)}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[p]={nextPos:c,result:f},f}function Ci(){var f,g,b,w,a,l=c*77+38,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,t.substr(c,4)===_r?(g=_r,c+=4):(g=e,i===0&&D(ol)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();a=ur(),a!==e?(te=f,f=Jl(a)):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[l]={nextPos:c,result:f},f}function na(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A,M,I=c*77+39,H=T[I];if(H)return c=H.nextPos,H.result;if(f=c,t.substr(c,5)===Jr?(g=Jr,c+=5):(g=e,i===0&&D(qa)),g!==e)if(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();if(a=et(),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();if(t.charCodeAt(c)===123?($=L,c++):($=e,i===0&&D(kt)),$!==e){for(p=[],n=k();n!==e;)p.push(n),n=k();if(n=[],u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;if(u!==e)for(;u!==e;)if(n.push(u),u=c,y=et(),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();te=u,u=Qn(a,y,_)}else c=u,u=e}else c=u,u=e}else c=u,u=e;else n=e;if(n!==e){if(u=c,t.charCodeAt(c)===42?(y=Zr,c++):(y=e,i===0&&D(fl)),y!==e){for(h=[],x=k();x!==e;)h.push(x),x=k();if(t.substr(c,2)===nr?(x=nr,c+=2):(x=e,i===0&&D(Fs)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();if(_=ur(),_!==e){for(A=[],M=k();M!==e;)A.push(M),M=k();u=_}else c=u,u=e}else c=u,u=e}else c=u,u=e;for(u===e&&(u=null),y=[],h=k();h!==e;)y.push(h),h=k();t.charCodeAt(c)===125?(h=Z,c++):(h=e,i===0&&D(ft)),h!==e?(te=f,f=Zl(a,n,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;else c=f,f=e;return T[I]={nextPos:c,result:f},f}function bu(){var f,g,b,w,a,l,$,p,n=c*77+40,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,t.substr(c,4)===ar?(g=ar,c+=4):(g=e,i===0&&D(cl)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(t.charCodeAt(c)===123?(w=L,c++):(w=e,i===0&&D(kt)),w!==e){for(a=[],l=k();l!==e;)a.push(l),l=k();if(l=_s(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();t.charCodeAt(c)===125?(p=Z,c++):(p=e,i===0&&D(ft)),p!==e?(te=f,f=Ql(l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[n]={nextPos:c,result:f},f}function _i(){var f,g,b,w,a=c*77+41,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,t.substr(c,6)===Pr?(g=Pr,c+=6):(g=e,i===0&&D(hl)),g!==e){if(b=[],w=k(),w!==e)for(;w!==e;)b.push(w),w=k();else b=e;b!==e?(w=Ls(),w!==e?(te=f,f=Xl(w)):(c=f,f=e)):(c=f,f=e)}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Ls(){var f,g,b=c*77+42,w=T[b];return w?(c=w.nextPos,w.result):(f=c,g=Pu(),g!==e&&(te=f,g=Yl(g)),f=g,T[b]={nextPos:c,result:f},f)}function Pi(){var f,g,b,w,a,l,$=c*77+43,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===96?(g=G,c++):(g=e,i===0&&D(As)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===96?(l=G,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===96?(l=G,c++):(l=e,i===0&&D(As)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ki(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===96?(w=G,c++):(w=e,i===0&&D(As)),w!==e?(te=f,f=eu(b)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function ki(){var f,g,b,w,a,l,$=c*77+44,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=et(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();t.charCodeAt(c)===125?(l=Z,c++):(l=e,i===0&&D(ft)),l!==e?f=w:(c=f,f=e)}else c=f,f=e}else c=f,f=e;if(f===e){if(f=c,g=[],b=pn(),b!==e)for(;b!==e;)g.push(b),b=pn();else g=e;g!==e&&(te=f,g=ti(g)),f=g}return T[$]={nextPos:c,result:f},f}function pn(){var f,g=c*77+45,b=T[g];return b?(c=b.nextPos,b.result):(f=Au(),f===e&&(f=t.charAt(c),Pt.test(f)?c++:(f=e,i===0&&D(Os))),T[g]={nextPos:c,result:f},f)}function Au(){var f,g,b,w=c*77+46,a=T[w];return a?(c=a.nextPos,a.result):(f=c,t.charCodeAt(c)===92?(g=sr,c++):(g=e,i===0&&D(Ua)),g!==e?(b=t.charAt(c),xt.test(b)?c++:(b=e,i===0&&D(Kn)),b!==e?f=b:(c=f,f=e)):(c=f,f=e),T[w]={nextPos:c,result:f},f)}function vn(){var f,g,b,w,a,l,$=c*77+47,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===34?(g=ee,c++):(g=e,i===0&&D(en)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(en)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===34?(l=ee,c++):(l=e,i===0&&D(en)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=aa(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ri(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===34?(w=ee,c++):(w=e,i===0&&D(en)),w!==e?(te=f,f=si(b)):(c=f,f=e)}else c=f,f=e;if(f===e)if(f=c,t.charCodeAt(c)===39?(g=fe,c++):(g=e,i===0&&D(tn)),g!==e){for(b=[],w=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=c,i++,t.charCodeAt(c)===39?(l=fe,c++):(l=e,i===0&&D(tn)),i--,l===e?a=void 0:(c=a,a=e),a!==e?(l=ia(),l===e&&(t.length>c?(l=t.charAt(c),c++):(l=e,i===0&&D(gr))),l!==e?(te=w,w=ni(l)):(c=w,w=e)):(c=w,w=e);t.charCodeAt(c)===39?(w=fe,c++):(w=e,i===0&&D(tn)),w!==e?(te=f,f=tu(b)):(c=f,f=e)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function aa(){var f,g,b=c*77+48,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===Ce?(g=Ce,c+=2):(g=e,i===0&&D(pl)),g!==e&&(te=f,g=ru()),f=g,T[b]={nextPos:c,result:f},f)}function ia(){var f,g,b=c*77+49,w=T[b];return w?(c=w.nextPos,w.result):(f=c,t.substr(c,2)===ve?(g=ve,c+=2):(g=e,i===0&&D(rn)),g!==e&&(te=f,g=ai()),f=g,T[b]={nextPos:c,result:f},f)}function la(){var f,g=c*77+50,b=T[g];return b?(c=b.nextPos,b.result):(f=gn(),f===e&&(f=ua()),T[g]={nextPos:c,result:f},f)}function gn(){var f,g,b,w,a,l,$,p=c*77+51,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Is)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;if(w!==e)if(t.charCodeAt(c)===46?(a=Yt,c++):(a=e,i===0&&D(Ys)),a!==e){if(l=[],$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar)),$!==e)for(;$!==e;)l.push($),$=t.charAt(c),lt.test($)?c++:($=e,i===0&&D(Ar));else l=e;l!==e?(te=f,f=su()):(c=f,f=e)}else c=f,f=e;else c=f,f=e}else c=f,f=e;if(f===e)if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e)if(t.charCodeAt(c)===46?(w=Yt,c++):(w=e,i===0&&D(Ys)),w!==e){if(a=[],l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar)),l!==e)for(;l!==e;)a.push(l),l=t.charAt(c),lt.test(l)?c++:(l=e,i===0&&D(Ar));else a=e;a!==e?(te=f,f=ii()):(c=f,f=e)}else c=f,f=e;else c=f,f=e;return T[p]={nextPos:c,result:f},f}function ua(){var f,g,b,w,a,l=c*77+52,$=T[l];if($)return c=$.nextPos,$.result;if(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),yt.test(b)?c++:(b=e,i===0&&D(Is)),b!==e){if(w=[],a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar)),a!==e)for(;a!==e;)w.push(a),a=t.charAt(c),lt.test(a)?c++:(a=e,i===0&&D(Ar));else w=e;w!==e?(te=f,f=li()):(c=f,f=e)}else c=f,f=e;return f===e&&(f=c,g=t.charAt(c),Ut.test(g)?c++:(g=e,i===0&&D(ps)),g===e&&(g=null),b=t.charAt(c),lt.test(b)?c++:(b=e,i===0&&D(Ar)),b!==e?(te=f,f=nu()):(c=f,f=e)),T[l]={nextPos:c,result:f},f}function dn(){var f,g=c*77+53,b=T[g];return b?(c=b.nextPos,b.result):(f=Ei(),f===e&&(f=oa()),T[g]={nextPos:c,result:f},f)}function Ei(){var f,g,b,w,a=c*77+54,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Ae?(g=Ae,c+=4):(g=e,i===0&&D(sn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=ui()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function oa(){var f,g,b,w,a=c*77+55,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,5)===Re?(g=Re,c+=5):(g=e,i===0&&D(nn)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=au()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function fa(){var f,g,b,w,a=c*77+56,l=T[a];return l?(c=l.nextPos,l.result):(f=c,t.substr(c,4)===Me?(g=Me,c+=4):(g=e,i===0&&D(an)),g!==e?(b=c,i++,w=t.charAt(c),Qe.test(w)?c++:(w=e,i===0&&D(ct)),i--,w===e?b=void 0:(c=b,b=e),b!==e?(te=f,f=iu()):(c=f,f=e)):(c=f,f=e),T[a]={nextPos:c,result:f},f)}function ca(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+57,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=et(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=oi(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=Z,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=lu(w)):(c=f,f=e)}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function Mi(){var f,g,b,w,a,l,$,p,n,u,y=c*77+58,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=et(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=fi(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=uu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ha(){var f,g,b,w,a,l,$,p=c*77+59,n=T[p];if(n)return c=n.nextPos,n.result;if(f=c,g=tt(),g!==e){for(b=c,w=[],a=k();a!==e;)w.push(a),a=k();if(t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e){for(l=[],$=k();$!==e;)l.push($),$=k();$=wr(),$!==e?b=$:(c=b,b=e)}else c=b,b=e;b===e&&(b=null),te=f,f=ou(g,b)}else c=f,f=e;return T[p]={nextPos:c,result:f},f}function pa(){var f,g,b,w,a,l,$=c*77+60,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=ha(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=ha(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=ci(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function va(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_,A,M,I=c*77+61,H=T[I];if(H)return c=H.nextPos,H.result;if(f=c,t.charCodeAt(c)===64?(g=Se,c++):(g=e,i===0&&D(ln)),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(w=tt(),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(t.charCodeAt(c)===40?(l=N,c++):(l=e,i===0&&D(Bt)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(p=pa(),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();if(t.charCodeAt(c)===41?(u=S,c++):(u=e,i===0&&D(Qr)),u!==e){for(y=c,h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===58?(x=pe,c++):(x=e,i===0&&D(st)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();_=wr(),_!==e?y=_:(c=y,y=e)}else c=y,y=e;for(y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();if(t.charCodeAt(c)===123?(x=L,c++):(x=e,i===0&&D(kt)),x!==e){for(m=[],_=k();_!==e;)m.push(_),_=k();for(_=_s(),_===e&&(_=null),A=[],M=k();M!==e;)A.push(M),M=k();t.charCodeAt(c)===125?(M=Z,c++):(M=e,i===0&&D(ft)),M!==e?(te=f,f=fu(b,w,a,p,y,_)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[I]={nextPos:c,result:f},f}function Cu(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m=c*77+62,_=T[m];if(_)return c=_.nextPos,_.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Rs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=pa(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=c,p=[],n=k();n!==e;)p.push(n),n=k();if(t.charCodeAt(c)===58?(n=pe,c++):(n=e,i===0&&D(st)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();y=wr(),y!==e?$=y:(c=$,$=e)}else c=$,$=e;for($===e&&($=null),p=[],n=k();n!==e;)p.push(n),n=k();if(t.charCodeAt(c)===123?(n=L,c++):(n=e,i===0&&D(kt)),n!==e){for(u=[],y=k();y!==e;)u.push(y),y=k();for(y=_s(),y===e&&(y=null),h=[],x=k();x!==e;)h.push(x),x=k();t.charCodeAt(c)===125?(x=Z,c++):(x=e,i===0&&D(ft)),x!==e?(te=f,f=hi(w,$,y)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[m]={nextPos:c,result:f},f}function ga(){var f,g,b,w,a,l,$,p,n,u,y=c*77+63,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.charCodeAt(c)===91?(g=Lr,c++):(g=e,i===0&&D(Vn)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=Or(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();for(t.charCodeAt(c)===44?(p=Y,c++):(p=e,i===0&&D(Tr)),p===e&&(p=null),n=[],u=k();u!==e;)n.push(u),u=k();te=a,a=Xn(l)}else c=a,a=e;for(a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===93?(l=Q,c++):(l=e,i===0&&D(Xr)),l!==e?(te=f,f=cu(w)):(c=f,f=e)}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function da(){var f,g,b,w,a,l,$,p,n,u,y,h,x,m,_=c*77+64,A=T[_];if(A)return c=A.nextPos,A.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();if(w=[],a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=Or(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;for(;a!==e;)if(w.push(a),a=c,l=tt(),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.charCodeAt(c)===58?(p=pe,c++):(p=e,i===0&&D(st)),p!==e){if(n=[],u=k(),u!==e)for(;u!==e;)n.push(u),u=k();else n=e;if(n!==e)if(u=Or(),u!==e){for(y=[],h=k();h!==e;)y.push(h),h=k();for(h=t.charAt(c),vr.test(h)?c++:(h=e,i===0&&D(vs)),h===e&&(h=null),x=[],m=k();m!==e;)x.push(m),m=k();te=a,a=Yn(l,u)}else c=a,a=e;else c=a,a=e}else c=a,a=e}else c=a,a=e;t.charCodeAt(c)===125?(a=Z,c++):(a=e,i===0&&D(ft)),a!==e?(te=f,f=hu(w)):(c=f,f=e)}else c=f,f=e;return T[_]={nextPos:c,result:f},f}function wr(){var f,g=c*77+65,b=T[g];return b?(c=b.nextPos,b.result):(f=_u(),f===e&&(f=Si()),T[g]={nextPos:c,result:f},f)}function _u(){var f,g,b,w,a,l,$,p,n,u,y=c*77+66,h=T[y];if(h)return c=h.nextPos,h.result;if(f=c,t.substr(c,2)===$e?(g=$e,c+=2):(g=e,i===0&&D(Rs)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=ya(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();if(t.charCodeAt(c)===41?(l=S,c++):(l=e,i===0&&D(Qr)),l!==e){for($=[],p=k();p!==e;)$.push(p),p=k();if(t.substr(c,2)===nr?(p=nr,c+=2):(p=e,i===0&&D(Fs)),p!==e){for(n=[],u=k();u!==e;)n.push(u),u=k();u=wr(),u!==e?(te=f,f=pu(w,u)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return T[y]={nextPos:c,result:f},f}function ya(){var f,g,b,w,a,l,$=c*77+67,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=wr(),g!==e){for(b=[],w=c,a=Es(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,a=Es(),a!==e?(l=wr(),l!==e?w=l:(c=w,w=e)):(c=w,w=e);te=f,f=pi(g,b)}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Si(){var f,g,b,w,a,l,$,p,n=c*77+68,u=T[n];if(u)return c=u.nextPos,u.result;if(f=c,g=tt(),g!==e){for(b=[],w=De();w!==e;)b.push(w),w=De();if(t.charCodeAt(c)===60?(w=it,c++):(w=e,i===0&&D(Va)),w!==e){for(a=[],l=De();l!==e;)a.push(l),l=De();if(l=wr(),l!==e){for($=[],p=De();p!==e;)$.push(p),p=De();t.charCodeAt(c)===62?(p=qe,c++):(p=e,i===0&&D(er)),p!==e?(te=f,f=vu(g,l)):(c=f,f=e)}else c=f,f=e}else c=f,f=e}else c=f,f=e;return f===e&&(f=c,g=tt(),g!==e&&(te=f,g=vi(g)),f=g),T[n]={nextPos:c,result:f},f}function tt(){var f,g,b,w,a=c*77+69,l=T[a];if(l)return c=l.nextPos,l.result;if(f=c,g=t.charAt(c),cs.test(g)?c++:(g=e,i===0&&D(za)),g!==e){for(b=[],w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));w!==e;)b.push(w),w=t.charAt(c),is.test(w)?c++:(w=e,i===0&&D(dr));te=f,f=gi()}else c=f,f=e;return T[a]={nextPos:c,result:f},f}function Pu(){var f,g,b,w,a,l,$=c*77+70,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,g=tt(),g!==e){for(b=[],w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);w!==e;)b.push(w),w=c,t.charCodeAt(c)===58?(a=pe,c++):(a=e,i===0&&D(st)),a!==e?(l=tt(),l!==e?(a=[a,l],w=a):(c=w,w=e)):(c=w,w=e);te=f,f=gu()}else c=f,f=e;return T[$]={nextPos:c,result:f},f}function Es(){var f,g,b,w,a,l=c*77+71,$=T[l];if($)return c=$.nextPos,$.result;for(f=c,g=[],b=k();b!==e;)g.push(b),b=k();if(t.charCodeAt(c)===44?(b=Y,c++):(b=e,i===0&&D(Tr)),b!==e){for(w=[],a=k();a!==e;)w.push(a),a=k();g=[g,b,w],f=g}else c=f,f=e;if(f===e)if(f=[],g=k(),g!==e)for(;g!==e;)f.push(g),g=k();else f=e;return T[l]={nextPos:c,result:f},f}function ur(){var f,g,b,w,a,l,$=c*77+72,p=T[$];if(p)return c=p.nextPos,p.result;if(f=c,t.charCodeAt(c)===123?(g=L,c++):(g=e,i===0&&D(kt)),g!==e){for(b=[],w=k();w!==e;)b.push(w),w=k();for(w=_s(),w===e&&(w=null),a=[],l=k();l!==e;)a.push(l),l=k();t.charCodeAt(c)===125?(l=Z,c++):(l=e,i===0&&D(ft)),l!==e?(te=f,f=di(w)):(c=f,f=e)}else c=f,f=e;return f===e&&(f=Ps()),T[$]={nextPos:c,result:f},f}function Ge(){var f,g=c*77+73,b=T[g];return b?(c=b.nextPos,b.result):(t.substr(c,2)===Ye?(f=Ye,c+=2):(f=e,i===0&&D(vl)),f===e&&(f=t.charAt(c),Ct.test(f)?c++:(f=e,i===0&&D(un))),T[g]={nextPos:c,result:f},f)}function Ti(){var f,g,b=c*77+74,w=T[b];return w?(c=w.nextPos,w.result):(f=c,i++,t.length>c?(g=t.charAt(c),c++):(g=e,i===0&&D(gr)),i--,g===e?f=void 0:(c=f,f=e),f===e&&(f=Ge()),T[b]={nextPos:c,result:f},f)}function k(){var f,g=c*77+75,b=T[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Rt.test(f)?c++:(f=e,i===0&&D(gl)),T[g]={nextPos:c,result:f},f)}function De(){var f,g=c*77+76,b=T[g];return b?(c=b.nextPos,b.result):(f=t.charAt(c),Mn.test(f)?c++:(f=e,i===0&&D(js)),T[g]={nextPos:c,result:f},f)}function ne(f,g,b){const w={type:f};g.children=b;for(const l of Object.keys(g))g[l]!==void 0&&(w[l]=g[l]);const a=X();return w.loc={start:a.start.offset,end:a.end.offset-1},w}if(Yr=d(),r.peg$library)return{peg$result:Yr,peg$currPos:c,peg$FAILED:e,peg$maxFailExpected:on,peg$maxFailPos:yr};if(Yr!==e&&c===t.length)return Yr;throw Yr!==e&&c<t.length&&D(V()),de(on,yr<t.length?t.charAt(yr):null,yr<t.length?ue(yr,yr+1):ue(yr,yr))}const vA=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function gA(t){return vA.includes(t.type)}function Nw(t){return"chain"in t&&t.chain!==null}function dA(t,r,e){return{type:"call",target:t,args:r,loc:e}}function yA(t,r,e){return{type:"index",target:t,index:r,loc:e}}function wA(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Mt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Mt(e.expr,r);break}case"return":{e.expr=Mt(e.expr,r);break}case"each":{e.items=Mt(e.items,r),e.for=Mt(e.for,r);break}case"for":{e.from!=null&&(e.from=Mt(e.from,r)),e.to!=null&&(e.to=Mt(e.to,r)),e.times!=null&&(e.times=Mt(e.times,r)),e.for=Mt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Mt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Mt(e.expr,r),e.dest=Mt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Mt(e.operands[s],r);break}case"not":{e.expr=Mt(e.expr,r);break}case"if":{e.cond=Mt(e.cond,r),e.then=Mt(e.then,r);for(const s of e.elseif)s.cond=Mt(s.cond,r),s.then=Mt(s.then,r);e.else!=null&&(e.else=Mt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Mt(e.children[s],r);break}case"match":{e.about=Mt(e.about,r);for(const s of e.qs)s.q=Mt(s.q,r),s.a=Mt(s.a,r);e.default!=null&&(e.default=Mt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Mt(e.statements[s],r);break}case"exists":{e.identifier=Mt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=Mt(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Mt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Mt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Mt(e.args[s],r);break}case"indexChain":{e.index=Mt(e.index,r);break}case"call":{e.target=Mt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Mt(e.args[s],r);break}case"index":{e.target=Mt(e.target,r),e.index=Mt(e.index,r);break}case"prop":{e.target=Mt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Mt(e.members[s],r);break}case"or":case"and":{e.left=Mt(e.left,r),e.right=Mt(e.right,r);break}}if(Nw(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Mt(e.chain[s],r);return e}const Op=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Ip(t){throw new df(`Reserved word "${t}" cannot be used as variable name.`)}function mA(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Op.includes(t.name)&&Ip(t.name);break}case"meta":{t.name!=null&&Op.includes(t.name)&&Ip(t.name);break}case"fn":{for(const r of t.args)Op.includes(r.name)&&Ip(r.name);break}}return t}function $A(t){for(const r of t)Mt(r,mA);return t}function Id(t){return{type:"simple",name:t}}function xA(t,r){return{type:"generic",name:t,inners:r}}function bA(t,r){return{type:"fn",args:t,result:r}}function vh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=vh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>vh(s)).join(", "),e=vh(t.result);return`@(${r}) { ${e} }`}}}function Wf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Id(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Wf(t.inner):r=Id("any"),xA(t.name,[r])}}throw new df(`Unknown type: '${vh(t)}'`)}else{const r=t.args.map(e=>Wf(e));return bA(r,Wf(t.result))}}function AA(t){switch(t.type){case"def":{t.varType!=null&&Wf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Wf(r.argType);t.retType!=null&&Wf(t.retType);break}}return t}function CA(t){for(const r of t)Mt(r,AA);return t}function gh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=gh(s.expr.children)),r.push(s);else{if(e.length>0)throw new df("invalid attribute.");switch(s.type){case"fn":{s.children=gh(s.children);break}case"block":{s.statements=gh(s.statements);break}}r.push(s)}if(e.length>0)throw new df("invalid attribute.");return r}function _A(t){if(gA(t)&&Nw(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=dA(s,v.args,v.loc);break}case"indexChain":{s=yA(s,v.index,v.loc);break}case"propChain":{s=wA(s,v.name,v.loc);break}}return s}return t}function PA(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],_A);return t}function dh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Fw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return dh(t,r,e);{const{left:s,right:v,info:d}=t;return dh(s,Fw(v,r,e),d)}}function Go(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Go(t.left),Go(t.right)]}}const kA={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Go(t.left),right:Go(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Go(t.left),right:Go(t.right)}),priority:3}};function EA(t){const r=t.operators.map(s=>{const v=kA[s];if(v==null)throw new df(`No such operator: ${s}.`);return v});let e=dh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=Fw(e,t.operands[2+s],r[1+s]);return Go(e)}function MA(t){for(let r=0;r<t.length;r++)t[r]=Mt(t[r],e=>e.type==="infix"?EA(e):e);return t}var Lu;let SA=(Lu=class{constructor(){he(this,"plugins");this.plugins={validate:[$A,CA],transform:[gh,PA,MA]}}static parse(r){return Lu.instance==null&&(Lu.instance=new Lu),Lu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Od(r,{startRule:"Preprocess"});e=Od(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new df(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new df(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},he(Lu,"instance"),Lu);const TA="0.18.0",NA={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Cv=[],fc=null;function FA(t){return Cv=SA.parse(t),JSON.stringify(Cv,null,"	")}async function OA(t){fc==null||fc.abort(),fc=new Bn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:xv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:xv(e.val,!0),print:!1});break}}});try{await fc.exec(Cv)}catch(r){t.err(r)}}const IA=Object.freeze(Object.defineProperty({__proto__:null,exec:OA,parse:FA,samples:NA,version:TA},Symbol.toStringTag,{value:"Module"}));function ws(t,r,e){let s=e.value;return{configurable:!0,get(){const v=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){s=v}}}let ap=class Ow extends Error{constructor(e,s){super(e);he(this,"name","AiScript");he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,Ow)}},RA=class extends ap{constructor(e){super(e.message??`${e}`,e);he(this,"name","Internal")}},yf=class extends ap{constructor(e,s){super(e,s);he(this,"name","Syntax")}},Dr=class extends ap{constructor(e,s){super(e,s);he(this,"name","Runtime")}},Rd=class extends Dr{constructor(r,e){super(r,e)}};var Fo=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let ao=class Iw{constructor(r=[],e,s){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Iw(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new Dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Dr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new Dr(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Dr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Fo([ws],ao.prototype,"log",null);Fo([ws],ao.prototype,"onUpdated",null);Fo([ws],ao.prototype,"createChildScope",null);Fo([ws],ao.prototype,"get",null);Fo([ws],ao.prototype,"exists",null);Fo([ws],ao.prototype,"getAll",null);Fo([ws],ao.prototype,"add",null);Fo([ws],ao.prototype,"assign",null);let th;const jA=new Uint8Array(16);function DA(){if(!th&&(th=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!th))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return th(jA)}const $n=[];for(let t=0;t<256;++t)$n.push((t+256).toString(16).slice(1));function UA(t,r=0){return $n[t[r+0]]+$n[t[r+1]]+$n[t[r+2]]+$n[t[r+3]]+"-"+$n[t[r+4]]+$n[t[r+5]]+"-"+$n[t[r+6]]+$n[t[r+7]]+"-"+$n[t[r+8]]+$n[t[r+9]]+"-"+$n[t[r+10]]+$n[t[r+11]]+$n[t[r+12]]+$n[t[r+13]]+$n[t[r+14]]+$n[t[r+15]]}const BA=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jd={randomUUID:BA};function LA(t,r,e){if(jd.randomUUID&&!r&&!t)return jd.randomUUID();t=t||{};const s=t.random||(t.rng||DA)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,UA(s)}const or={type:"null"},Wi={type:"bool",value:!0},Fi={type:"bool",value:!1},He=t=>({type:"num",value:t}),hr=t=>({type:"str",value:t}),lf=t=>({type:"bool",value:t}),Hh=t=>({type:"obj",value:t}),xs=t=>({type:"arr",value:t}),HA=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),me=t=>({type:"fn",native:t}),qA=t=>({type:"return",value:t}),VA=()=>({type:"break",value:null}),zA=()=>({type:"continue",value:null}),KA=t=>t.type==="return"?t.value:t,_v=(t,r)=>({type:"error",value:t,info:r});function Di(t){if(t==null)throw new Dr("Expect anything, but got nothing.")}function xa(t){if(t==null)throw new Dr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Dr(`Expect boolean, but got ${t.type}.`)}function $o(t){if(t==null)throw new Dr("Expect function, but got nothing.");if(t.type!=="fn")throw new Dr(`Expect function, but got ${t.type}.`)}function Ms(t){if(t==null)throw new Dr("Expect string, but got nothing.");if(t.type!=="str")throw new Dr(`Expect string, but got ${t.type}.`)}function Be(t){if(t==null)throw new Dr("Expect number, but got nothing.");if(t.type!=="num")throw new Dr(`Expect number, but got ${t.type}.`)}function Iu(t){if(t==null)throw new Dr("Expect object, but got nothing.");if(t.type!=="obj")throw new Dr(`Expect object, but got ${t.type}.`)}function Gf(t){if(t==null)throw new Dr("Expect array, but got nothing.");if(t.type!=="arr")throw new Dr(`Expect array, but got ${t.type}.`)}function Rp(t){return t.type==="obj"}function Dd(t){return t.type==="arr"}function Pv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function kv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>kv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Ev(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Ev(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Ev(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Mv(t){if(t===null)return or;if(typeof t=="boolean")return lf(t);if(typeof t=="string")return hr(t);if(typeof t=="number")return He(t);if(Array.isArray(t))return xs(t.map(r=>Mv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Mv(s));return Hh(r)}return or}function Jf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const v of t.value)s.push(Jf(v,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[v,d]of t.value)s.push(`${v}: ${Jf(d,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const WA={version:"0.17.0"},GA=WA.version,JA=new TextEncoder,ZA=new TextDecoder,QA={help:hr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":hr(GA),"Core:ai":hr("kawaii"),"Core:not":me(([t])=>(xa(t),t.value?Fi:Wi)),"Core:eq":me(([t,r])=>(Di(t),Di(r),Pv(t,r)?Wi:Fi)),"Core:neq":me(([t,r])=>(Di(t),Di(r),Pv(t,r)?Fi:Wi)),"Core:and":me(([t,r])=>(xa(t),t.value?(xa(r),r.value?Wi:Fi):Fi)),"Core:or":me(([t,r])=>(xa(t),t.value?Wi:(xa(r),r.value?Wi:Fi))),"Core:add":me(([t,r])=>(Be(t),Be(r),He(t.value+r.value))),"Core:sub":me(([t,r])=>(Be(t),Be(r),He(t.value-r.value))),"Core:mul":me(([t,r])=>(Be(t),Be(r),He(t.value*r.value))),"Core:pow":me(([t,r])=>{Be(t),Be(r);const e=t.value**r.value;if(isNaN(e))throw new Dr("Invalid operation.");return He(e)}),"Core:div":me(([t,r])=>{Be(t),Be(r);const e=t.value/r.value;if(isNaN(e))throw new Dr("Invalid operation.");return He(e)}),"Core:mod":me(([t,r])=>(Be(t),Be(r),He(t.value%r.value))),"Core:gt":me(([t,r])=>(Be(t),Be(r),t.value>r.value?Wi:Fi)),"Core:lt":me(([t,r])=>(Be(t),Be(r),t.value<r.value?Wi:Fi)),"Core:gteq":me(([t,r])=>(Be(t),Be(r),t.value>=r.value?Wi:Fi)),"Core:lteq":me(([t,r])=>(Be(t),Be(r),t.value<=r.value?Wi:Fi)),"Core:type":me(([t])=>(Di(t),hr(t.type))),"Core:to_str":me(([t])=>(Di(t),hr(Jf(t)))),"Core:range":me(([t,r])=>(Be(t),Be(r),t.value<r.value?xs(Array.from({length:r.value-t.value+1},(e,s)=>He(s+t.value))):t.value>r.value?xs(Array.from({length:t.value-r.value+1},(e,s)=>He(t.value-s))):xs([t]))),"Core:sleep":me(async([t])=>(Be(t),await new Promise(r=>setTimeout(r,t.value)),or)),"Util:uuid":me(()=>hr(LA())),"Json:stringify":me(([t])=>(Di(t),hr(JSON.stringify(Ev(t))))),"Json:parse":me(([t])=>{Ms(t);try{return Mv(JSON.parse(t.value))}catch{return _v("not_json")}}),"Json:parsable":me(([t])=>{Ms(t);try{JSON.parse(t.value)}catch{return lf(!1)}return lf(!0)}),"Date:now":me(()=>He(Date.now())),"Date:year":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":me(([t])=>(t&&Be(t),He(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":me(([t])=>(Ms(t),He(new Date(t.value).getTime()))),"Math:Infinity":He(1/0),"Math:E":He(Math.E),"Math:LN2":He(Math.LN2),"Math:LN10":He(Math.LN10),"Math:LOG2E":He(Math.LOG2E),"Math:LOG10E":He(Math.LOG10E),"Math:PI":He(Math.PI),"Math:SQRT1_2":He(Math.SQRT1_2),"Math:SQRT2":He(Math.SQRT2),"Math:abs":me(([t])=>(Be(t),He(Math.abs(t.value)))),"Math:acos":me(([t])=>(Be(t),He(Math.acos(t.value)))),"Math:acosh":me(([t])=>(Be(t),He(Math.acosh(t.value)))),"Math:asin":me(([t])=>(Be(t),He(Math.asin(t.value)))),"Math:asinh":me(([t])=>(Be(t),He(Math.asinh(t.value)))),"Math:atan":me(([t])=>(Be(t),He(Math.atan(t.value)))),"Math:atanh":me(([t])=>(Be(t),He(Math.atanh(t.value)))),"Math:atan2":me(([t,r])=>(Be(t),Be(r),He(Math.atan2(t.value,r.value)))),"Math:cbrt":me(([t])=>(Be(t),He(Math.cbrt(t.value)))),"Math:ceil":me(([t])=>(Be(t),He(Math.ceil(t.value)))),"Math:clz32":me(([t])=>(Be(t),He(Math.clz32(t.value)))),"Math:cos":me(([t])=>(Be(t),He(Math.cos(t.value)))),"Math:cosh":me(([t])=>(Be(t),He(Math.cosh(t.value)))),"Math:exp":me(([t])=>(Be(t),He(Math.exp(t.value)))),"Math:expm1":me(([t])=>(Be(t),He(Math.expm1(t.value)))),"Math:floor":me(([t])=>(Be(t),He(Math.floor(t.value)))),"Math:fround":me(([t])=>(Be(t),He(Math.fround(t.value)))),"Math:hypot":me(([t])=>{Gf(t);const r=[];for(const e of t.value)Be(e),r.push(e.value);return He(Math.hypot(...r))}),"Math:imul":me(([t,r])=>(Be(t),Be(r),He(Math.imul(t.value,r.value)))),"Math:log":me(([t])=>(Be(t),He(Math.log(t.value)))),"Math:log1p":me(([t])=>(Be(t),He(Math.log1p(t.value)))),"Math:log10":me(([t])=>(Be(t),He(Math.log10(t.value)))),"Math:log2":me(([t])=>(Be(t),He(Math.log2(t.value)))),"Math:max":me(([t,r])=>(Be(t),Be(r),He(Math.max(t.value,r.value)))),"Math:min":me(([t,r])=>(Be(t),Be(r),He(Math.min(t.value,r.value)))),"Math:pow":me(([t,r])=>(Be(t),Be(r),He(Math.pow(t.value,r.value)))),"Math:round":me(([t])=>(Be(t),He(Math.round(t.value)))),"Math:sign":me(([t])=>(Be(t),He(Math.sign(t.value)))),"Math:sin":me(([t])=>(Be(t),He(Math.sin(t.value)))),"Math:sinh":me(([t])=>(Be(t),He(Math.sinh(t.value)))),"Math:sqrt":me(([t])=>{Be(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Dr("Invalid operation.");return He(r)}),"Math:tan":me(([t])=>(Be(t),He(Math.tan(t.value)))),"Math:tanh":me(([t])=>(Be(t),He(Math.tanh(t.value)))),"Math:trunc":me(([t])=>(Be(t),He(Math.trunc(t.value)))),"Math:rnd":me(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?He(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):He(Math.random())),"Math:gen_rng":me(([t])=>{if(Di(t),t.type!=="num"&&t.type!=="str")return or;const r=No(t.value.toString());return me(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?He(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):He(r()))}),"Num:to_hex":me(([t])=>(Be(t),hr(t.value.toString(16)))),"Num:from_hex":me(([t])=>(Ms(t),He(parseInt(t.value,16)))),"Str:lf":hr(`
`),"Str:lt":me(([t,r])=>(Ms(t),Ms(r),t.value<r.value?He(-1):t.value===r.value?He(0):He(1))),"Str:gt":me(([t,r])=>(Ms(t),Ms(r),t.value>r.value?He(-1):t.value===r.value?He(0):He(1))),"Str:from_codepoint":me(([t])=>(Be(t),hr(String.fromCodePoint(t.value)))),"Str:from_unicode_codepoints":me(([t])=>(Gf(t),hr(Array.from(t.value.map(r=>(Be(r),String.fromCodePoint(r.value)))).join("")))),"Str:from_utf8_bytes":me(([t])=>(Gf(t),hr(ZA.decode(Uint8Array.from(t.value.map(r=>(Be(r),r.value))))))),"Obj:keys":me(([t])=>(Iu(t),xs(Array.from(t.value.keys()).map(r=>hr(r))))),"Obj:vals":me(([t])=>(Iu(t),xs(Array.from(t.value.values())))),"Obj:kvs":me(([t])=>(Iu(t),xs(Array.from(t.value.entries()).map(([r,e])=>xs([hr(r),e]))))),"Obj:get":me(([t,r])=>(Iu(t),Ms(r),t.value.get(r.value)??or)),"Obj:set":me(([t,r,e])=>(Iu(t),Ms(r),Di(e),t.value.set(r.value,e),or)),"Obj:has":me(([t,r])=>(Iu(t),Ms(r),lf(t.value.has(r.value)))),"Obj:copy":me(([t])=>(Iu(t),Hh(new Map(t.value)))),"Obj:merge":me(([t,r])=>(Iu(t),Iu(r),Hh(new Map([...t.value,...r.value])))),"Error:create":me(([t,r])=>(Ms(t),_v(t.value,r))),"Async:interval":me(async([t,r,e],s)=>{Be(t),$o(r),e&&(xa(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),me(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":me(async([t,r],e)=>{Be(t),$o(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),me(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},Ud={num:{to_str:t=>me(async(r,e)=>hr(t.value.toString()))},str:{to_num:t=>me(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?or:He(s)}),to_arr:t=>me(async(r,e)=>xs(Zs(t.value).map(s=>hr(s)))),to_unicode_arr:t=>me(async(r,e)=>xs([...t.value].map(s=>hr(s)))),to_unicode_codepoint_arr:t=>me(async(r,e)=>xs([...t.value].map(s=>{const v=s.codePointAt(0);return He(v??s.charCodeAt(0))}))),to_char_arr:t=>me(async(r,e)=>xs(t.value.split("").map(s=>hr(s)))),to_charcode_arr:t=>me(async(r,e)=>xs(t.value.split("").map(s=>He(s.charCodeAt(0))))),to_utf8_byte_arr:t=>me(async(r,e)=>xs(Array.from(JA.encode(t.value)).map(s=>He(s)))),len:t=>He(Cf(t.value)),replace:t=>me(async([r,e],s)=>(Ms(r),Ms(e),hr(t.value.split(r.value).join(e.value)))),index_of:t=>me(async([r],e)=>(Ms(r),He(Pf(t.value,r.value)))),incl:t=>me(async([r],e)=>(Ms(r),t.value.includes(r.value)?Wi:Fi)),trim:t=>me(async(r,e)=>hr(t.value.trim())),upper:t=>me(async(r,e)=>hr(t.value.toUpperCase())),lower:t=>me(async(r,e)=>hr(t.value.toLowerCase())),split:t=>me(async([r],e)=>(r&&Ms(r),xs(r?t.value.split(r?r.value:"").map(s=>hr(s)):Zs(t.value).map(s=>hr(s))))),slice:t=>me(async([r,e],s)=>(Be(r),Be(e),hr(_f(t.value,r.value,e.value)))),pick:t=>me(async([r],e)=>{Be(r);const v=Zs(t.value)[r.value];return v?hr(v):or}),charcode_at:t=>me(([r],e)=>{Be(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?or:He(s)}),codepoint_at:t=>me(([r],e)=>{Be(r);const s=t.value.codePointAt(r.value)??t.value.charCodeAt(r.value);return Number.isNaN(s)?or:He(s)})},arr:{len:t=>He(t.value.length),push:t=>me(async([r],e)=>(Di(r),t.value.push(r),t)),unshift:t=>me(async([r],e)=>(Di(r),t.value.unshift(r),t)),pop:t=>me(async(r,e)=>t.value.pop()??or),shift:t=>me(async(r,e)=>t.value.shift()??or),concat:t=>me(async([r],e)=>(Gf(r),xs(t.value.concat(r.value)))),slice:t=>me(async([r,e],s)=>(Be(r),Be(e),xs(t.value.slice(r.value,e.value)))),join:t=>me(async([r],e)=>(r&&Ms(r),hr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>me(async([r],e)=>{$o(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,He(d)]));return xs(await Promise.all(s))}),filter:t=>me(async([r],e)=>{$o(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,He(v)]);xa(C),C.value&&s.push(d)}return xs(s)}),reduce:t=>me(async([r,e],s)=>{$o(r);const v=e!=null;let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,He(C)])}return d}),find:t=>me(async([r],e)=>{$o(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,He(s)]);if(xa(d),d.value)return v}return or}),incl:t=>me(async([r],e)=>(Di(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Fi:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Wi:Fi)),reverse:t=>me(async(r,e)=>(t.value.reverse(),or)),copy:t=>me(async(r,e)=>xs([...t.value])),sort:t=>me(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=await s(d.slice(0,P),C),N=await s(d.slice(P),C);return v(E,N,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Be(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return $o(r),Gf(t),t.value=await s(t.value,r),t})},error:{name:t=>hr(t.value),info:t=>t.info??or}};function XA(t,r){if(Object.hasOwn(Ud,t.type)){const e=Ud[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Dr(`No such prop (${r}) in ${t.type}.`)}else throw new Dr(`Cannot read prop of ${t.type}. (reading ${r})`)}const YA={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Sa=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Rw=300,e2=Rw-1;let Ln=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const s={print:me(([v])=>{Di(v),this.opts.out&&this.opts.out(v)}),readline:me(async v=>{const d=v[0];if(Ms(d),this.opts.in==null)return or;const C=await this.opts.in(d.value);return hr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...QA,...s}).map(([v,d])=>[v,YA.const(d)])),this.scope=new ao([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),_v("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof ap?this.opts.err(r):this.opts.err(new RA(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{if(s.mut)throw new Error("Namespaces cannot include mutable variable: "+s.name);const v={isMutable:s.mut,value:await this._eval(s.expr,e)};e.add(s.name,v),this.scope.add(r.name+":"+s.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??or;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(s);return KA(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return or;if(this.stepCount%Rw===e2&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Dr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);$o(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(xa(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(xa(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return or}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Pv(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):or}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return or}case"for":{if(r.times){const s=await this._eval(r.times,e);Be(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Be(s),Be(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:He(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return or}case"each":{const s=await this._eval(r.items,e);Gf(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return or}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,{isMutable:r.mut,value:s}),or}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),or}case"addAssign":{const s=await this._eval(r.dest,e);Be(s);const v=await this._eval(r.expr,e);return Be(v),await this.assign(e,r.dest,He(s.value+v.value)),or}case"subAssign":{const s=await this._eval(r.dest,e);Be(s);const v=await this._eval(r.expr,e);return Be(v),await this.assign(e,r.dest,He(s.value-v.value)),or}case"null":return or;case"bool":return lf(r.value);case"num":return He(r.value);case"str":return hr(r.value);case"arr":return xs(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return Hh(s)}case"prop":{const s=await this._eval(r.target,e);return Rp(s)?s.value.has(r.name)?s.value.get(r.name):or:XA(s,r.name)}case"index":{const s=await this._eval(r.target,e),v=await this._eval(r.index,e);if(Dd(s)){Be(v);const d=s.value[v.value];if(d===void 0)throw new Rd(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}else{if(Rp(s))return Ms(v),s.value.has(v.value)?s.value.get(v.value):or;throw new Dr(`Cannot read prop (${Jf(v)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return xa(s),lf(!s.value)}case"fn":return HA(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return lf(e.exists(r.identifier.name));case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);s+=Jf(d)}return hr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),qA(s)}case"break":return this.log("block:break",{scope:e.name}),VA();case"continue":return this.log("block:continue",{scope:e.name}),zA();case"ns":return or;case"meta":return or;case"and":{const s=await this._eval(r.left,e);if(xa(s),s.value){const v=await this._eval(r.right,e);return xa(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(xa(s),s.value)return s;{const v=await this._eval(r.right,e);return xa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=or;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(Dd(v)){if(Be(d),v.value[d.value]===void 0)throw new Rd(`Index out of range. index: ${d.value} max: ${v.value.length-1}`);v.value[d.value]=s}else if(Rp(v))Ms(d),v.value.set(d.value,s);else throw new Dr(`Cannot read prop (${Jf(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);Iu(v),v.value.set(e.name,s)}else throw new Dr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Sa([ws],Ln.prototype,"exec",null);Sa([ws],Ln.prototype,"execFn",null);Sa([ws],Ln.prototype,"execFnSimple",null);Sa([ws],Ln.prototype,"handleError",null);Sa([ws],Ln.prototype,"log",null);Sa([ws],Ln.prototype,"collectNs",null);Sa([ws],Ln.prototype,"collectNsMember",null);Sa([ws],Ln.prototype,"_fn",null);Sa([ws],Ln.prototype,"_eval",null);Sa([ws],Ln.prototype,"_run",null);Sa([ws],Ln.prototype,"registerAbortHandler",null);Sa([ws],Ln.prototype,"unregisterAbortHandler",null);Sa([ws],Ln.prototype,"abort",null);Sa([ws],Ln.prototype,"assign",null);Sa([ws],Ln,"collectMetadata",null);function t2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function uf(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,uf.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}t2(uf,Error);function jp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}uf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=jp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+jp("",v.column-1," ")+jp("",B,"^")}else r+=`
 at `+C}return r};uf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Bd(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:cn,Main:es},d=cn,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",G="if",ee="elif",fe="else",Ce="match",ve="=>",Ae="eval",Re="exists",Me="`",Se='"',$e="'",it='\\"',qe="\\'",Ye="true",Qe="false",ot="null",Pt=";",xt="@",Ut="@(",yt=`\r
`,lt=/^[A-Z0-9_:]/i,vr=/^[^`{]/,cs=/^[{}`]/,is=/^[+\-]/,Ct=/^[1-9]/,Rt=/^[0-9]/,Mn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,el=/^[\r\n]/,tl=/^[ \t\r\n]/,lr=/^[ \t]/,Bt=Us(),Qr=de("//",!1),qn=de("/*",!1),kt=de("*/",!1),ft=de("(",!1),Sr=de(")",!1),Gt=de("::",!1),st=de("{",!1),Lt=de("}",!1),bs=de("###",!1),Ht=de("let",!1),qt=de(":",!1),Xr=de("=",!1),Da=de("var",!1),Tr=de("<:",!1),hs=de("#[",!1),Ns=de("]",!1),ct=de("each",!1),Ot=de(",",!1),Xs=de("for",!1),Nr=de("return",!1),Fr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),rl=de("loop",!1),Ua=de("break",!1),sl=de("continue",!1),nl=de("+=",!1),Ba=de("-=",!1),La=de("\\",!1),al=de("||",!1),il=de("&&",!1),ll=de("==",!1),ul=de("!=",!1),Vn=de("<=",!1),Ys=de(">=",!1),zn=de("<",!1),Ha=de(">",!1),ol=de("+",!1),qa=de("-",!1),Fs=de("*",!1),fl=de("^",!1),cl=de("/",!1),hl=de("%",!1),As=de("!",!1),Os=de("[",!1),Kn=de(".",!1),en=de("if",!1),tn=de("elif",!1),pl=de("else",!1),rn=de("match",!1),ps=de("=>",!1),Is=de("eval",!1),Ar=de("exists",!1),sn=de("`",!1),nn=tr(["`","{"],!0,!1),an=tr(["{","}","`"],!1,!1),vs=de('"',!1),ln=de("'",!1),Rs=de('\\"',!1),Va=de("\\'",!1),er=tr(["+","-"],!1,!1),za=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),vl=de("true",!1),un=de("false",!1),gl=de("null",!1),js=de(";",!1),dl=de("@",!1),Wn=de("@(",!1),yl=tr([["A","Z"],"_"],!1,!0),Ka=tr([["A","Z"],["0","9"],"_"],!1,!0),wl=de(`\r
`,!1),ml=tr(["\r",`
`],!1,!1),Wa=tr([" ","	","\r",`
`],!1,!1),$l=tr([" ","	"],!1,!1),Ga=function(n){return n.join("")},xl=function(){return ue()},Ja=function(){return ue()},bl=function(){return""},Za=function(){return""},Al=function(n){return n??[]},Gn=function(n,u){return u},Cl=function(n,u){return[n,...u]},Jn=function(n,u){return u},_l=function(n,u){return[n,...u]},Qa=function(n,u){return u},Pl=function(n,u){return[n,...u]},kl=function(n){return n},El=function(n,u){return p("ns",{name:n,members:u})},Ml=function(n,u){return p("meta",{name:n,value:u})},Sl=function(n){return p("meta",{name:null,value:n})},Tl=function(n,u,y){return p("def",{name:n,varType:u,expr:y,mut:!1,attr:[]})},Nl=function(n,u,y){return p("def",{name:n,varType:u,expr:y,mut:!0,attr:[]})},Fl=function(n){return p("identifier",{name:"print",chain:[p("callChain",{args:[n]})]})},Ol=function(n,u){return p("attr",{name:n,value:u??p("bool",{value:!0})})},Il=function(n,u,y){return p("each",{var:n,items:u,for:y})},Rl=function(n,u,y){return p("each",{var:n,items:u,for:y})},jl=function(n,u){return u},Dl=function(n,u,y,h){return p("for",{var:n,from:u??p("num",{value:0}),to:y,for:h})},Ul=function(n,u){return u},Xa=function(n,u,y,h){return p("for",{var:n,from:u??p("num",{value:0}),to:y,for:h})},Bl=function(n,u){return p("for",{times:n,for:u})},Ll=function(n,u){return p("for",{times:n,for:u})},Hl=function(n){return p("return",{expr:n})},ql=function(n){return p("loop",{statements:n})},Vl=function(){return p("break",{})},Zn=function(){return p("continue",{})},zl=function(n,u,y){return u==="+="?p("addAssign",{dest:n,expr:y}):u==="-="?p("subAssign",{dest:n,expr:y}):p("assign",{dest:n,expr:y})},Ya=function(n,u,y){return{op:u,term:y}},Kl=function(n,u){return p("infix",{operands:[n,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Wl=function(){return ue()},Gl=function(n){return p("not",{expr:n})},ei=function(n,u){return n.chain?{...n,chain:[...n.chain,...u]}:{...n,chain:u}},Jl=function(n){return p("callChain",{args:n??[]})},Qn=function(n,u){return u},Zl=function(n,u){return[n,...u]},Ql=function(n){return p("indexChain",{index:n})},Xl=function(n){return p("propChain",{name:n})},Yl=function(n,u,y,h){return p("if",{cond:n,then:u,elseif:y??[],else:h})},eu=function(n,u){return[n,...u]},ti=function(n,u){return{cond:n,then:u}},ri=function(n){return n},si=function(n,u,y){return{q:u,a:y}},ni=function(n,u,y){return p("match",{about:n,qs:u??[],default:y})},tu=function(n){return p("block",{statements:n})},ru=function(n){return p("exists",{identifier:n})},ai=function(n){return p("identifier",{name:n})},su=function(n){return p("tmpl",{tmpl:n})},ii=function(n){return n.join("")},li=function(n){return n},nu=function(n){return p("str",{value:n.join("")})},ui=function(n){return n},au=function(n){return p("str",{value:n.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return p("num",{value:parseFloat(ue())})},fi=function(){return p("num",{value:parseFloat(ue())})},uu=function(){return p("num",{value:parseInt(ue(),10)})},ou=function(){return p("num",{value:parseInt(ue(),10)})},ci=function(){return p("bool",{value:!0})},fu=function(){return p("bool",{value:!1})},hi=function(){return p("null",{})},Xn=function(n,u){return{k:n,v:u}},cu=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return p("obj",{value:u})},Yn=function(n){return n},hu=function(n){return p("arr",{value:n})},pu=function(n,u){return{name:n,argType:u}},pi=function(n,u){return[n,...u]},vu=function(n,u,y,h,x,m){return(n.length>0||y.length>0)&&du("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},vi=function(n,u,y){return p("fn",{args:n??[],retType:u},y??[])},gi=function(n){return n},gu=function(n){return p("arr",{value:n})},di=function(n,u){return{k:n,v:u}},c=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return p("obj",{value:u})},te=function(n,u){return p("fnTypeSource",{args:n??[],result:u})},Cs=function(n,u){return[n,...u]},yr=function(n,u){return p("namedTypeSource",{name:n,inner:u})},on=function(n){return p("namedTypeSource",{name:n,inner:null})},i=function(){return ue()},T=function(){return ue()},Yr=function(n){return p("block",{statements:n??[]})},o=0,X=0,O=[{line:1,column:1}],R=0,_t=[],F=0,V={},Ds;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function ue(){return t.substring(X,o)}function D(){return fn(X,o)}function du(n,u){throw u=u!==void 0?u:fn(X,o),_s(n,u)}function de(n,u){return{type:"literal",text:n,ignoreCase:u}}function tr(n,u,y){return{type:"class",parts:n,inverted:u,ignoreCase:y}}function Us(){return{type:"any"}}function U(){return{type:"end"}}function yi(n){var u=O[n],y;if(u)return u;for(y=n-1;!O[y];)y--;for(u=O[y],u={line:u.line,column:u.column};y<n;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return O[n]=u,u}function fn(n,u,y){var h=yi(n),x=yi(u),m={source:s,start:{offset:n,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function j(n){o<R||(o>R&&(R=o,_t=[]),_t.push(n))}function _s(n,u){return new uf(n,null,null,u)}function ea(n,u,y){return new uf(uf.buildMessage(n,u),n,u,y)}function cn(){var n,u,y,h=o*77+0,x=V[h];if(x)return o=x.nextPos,x.result;for(n=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return X=n,u=Ga(u),n=u,V[h]={nextPos:o,result:n},n}function Ps(){var n,u,y=o*77+1,h=V[y];return h?(o=h.nextPos,h.result):(n=o,u=gn(),u!==e&&(X=n,u=xl()),n=u,n===e&&(n=o,u=oa(),u!==e&&(X=n,u=Ja()),n=u,n===e&&(n=et(),n===e&&(t.length>o?(n=t.charAt(o),o++):(n=e,F===0&&j(Bt))))),V[y]={nextPos:o,result:n},n)}function et(){var n,u,y,h,x,m,_=o*77+2,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&j(Qr)),u!==e){for(y=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=n,n=bl()}else o=n,n=e;if(n===e)if(n=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&j(qn)),u!==e){for(y=[],h=o,x=o,F++,t.substr(o,2)===E?(m=E,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.substr(o,2)===E?(m=E,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===E?(h=E,o+=2):(h=e,F===0&&j(kt)),h!==e?(X=n,n=Za()):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function es(){var n,u,y,h,x,m=o*77+3,_=V[m];if(_)return o=_.nextPos,_.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=hn(),y===e&&(y=null),h=[],x=l();x!==e;)h.push(x),x=l();return X=n,n=Al(y),V[m]={nextPos:o,result:n},n}function hn(){var n,u,y,h,x,m,_,A,M=o*77+4,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=Xe(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=Cl(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Or(){var n,u,y,h,x,m,_,A,M=o*77+5,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=gs(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=_l(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Cr(){var n,u,y,h,x,m,_,A,M=o*77+6,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=ks(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=Pl(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Xe(){var n,u=o*77+7,y=V[u];return y?(o=y.nextPos,y.result):(n=mi(),n===e&&(n=yu(),n===e&&(n=ks())),V[u]={nextPos:o,result:n},n)}function gs(){var n,u=o*77+8,y=V[u];return y?(o=y.nextPos,y.result):(n=$i(),n===e&&(n=tt(),n===e&&(n=mi())),V[u]={nextPos:o,result:n},n)}function ks(){var n,u=o*77+9,y=V[u];return y?(o=y.nextPos,y.result):(n=$i(),n===e&&(n=tt(),n===e&&(n=wu(),n===e&&(n=$u(),n===e&&(n=mu(),n===e&&(n=rs(),n===e&&(n=xi(),n===e&&(n=xu(),n===e&&(n=bi(),n===e&&(n=ss(),n===e&&(n=ta(),n===e&&(n=We()))))))))))),V[u]={nextPos:o,result:n},n)}function We(){var n,u=o*77+10,y=V[u];return y?(o=y.nextPos,y.result):(n=Ai(),n===e&&(n=Bs()),V[u]={nextPos:o,result:n},n)}function Bs(){var n,u=o*77+11,y=V[u];return y?(o=y.nextPos,y.result):(n=Pi(),n===e&&(n=Pu(),n===e&&(n=Ci(),n===e&&(n=wi()))),V[u]={nextPos:o,result:n},n)}function wi(){var n,u,y,h,x,m,_=o*77+12,A=V[_];if(A)return o=A.nextPos,A.result;if(n=vn(),n===e&&(n=aa(),n===e&&(n=ia(),n===e&&(n=gn(),n===e&&(n=oa(),n===e&&(n=Mi(),n===e&&(n=va(),n===e&&(n=da(),n===e&&(n=wr(),n===e&&(n=_u(),n===e&&(n=sa(),n===e&&(n=la(),n===e))))))))))))if(n=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e?(X=n,n=kl(h)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function ts(){var n,u=o*77+13,y=V[u];return y?(o=y.nextPos,y.result):(n=Mi(),n===e&&(n=oa(),n===e&&(n=va(),n===e&&(n=Es(),n===e&&(n=ur(),n===e&&(n=da()))))),V[u]={nextPos:o,result:n},n)}function mi(){var n,u,y,h,x,m,_,A,M,I,H=o*77+14,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===B?(u=B,o+=2):(u=e,F===0&&j(Gt)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=L,o++):(m=e,F===0&&j(st)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Or(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(o)===125?(I=Z,o++):(I=e,F===0&&j(Lt)),I!==e?(X=n,n=El(h,A)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function yu(){var n,u,y,h,x,m,_=o*77+15,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=ts(),m!==e?(X=n,n=Ml(h,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();h=ts(),h!==e?(X=n,n=Sl(h)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function $i(){var n,u,y,h,x,m,_,A,M,I=o*77+16,H=V[I];if(H)return o=H.nextPos,H.result;if(n=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ht)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ge(),M!==e?x=M:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?(X=n,n=Tl(h,x,M)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===J?(u=J,o+=3):(u=e,F===0&&j(Da)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ge(),M!==e?x=M:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?(X=n,n=Nl(h,x,M)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[I]={nextPos:o,result:n},n}function wu(){var n,u,y,h,x=o*77+17,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&j(Tr)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();h=We(),h!==e?(X=n,n=Fl(h)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function mu(){var n,u,y,h,x,m,_,A=o*77+18,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,t.substr(o,2)===W?(u=W,o+=2):(u=e,F===0&&j(hs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=ts(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=Q,o++):(_=e,F===0&&j(Ns)),_!==e?(X=n,n=Ol(h,x)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[A]={nextPos:o,result:n},n}function rs(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+19,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===le?(x=le,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(o)===44?(M=Y,o++):(M=e,F===0&&j(Ot)),M===e&&(M=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e)if(t.charCodeAt(o)===41?(z=S,o++):(z=e,F===0&&j(Sr)),z!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(X=n,n=Il(_,H,Fe)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===le?(h=le,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=We(),I!==e){if(H=[],z=l(),z!==e)for(;z!==e;)H.push(z),z=l();else H=e;H!==e?(z=b(),z!==e?(X=n,n=Rl(m,I,z)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function xi(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt=o*77+20,dt=V[gt];if(dt)return o=dt.nextPos,dt.result;if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===le?(x=le,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=o,t.charCodeAt(o)===61?(I=be,o++):(I=e,F===0&&j(Xr)),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();z=We(),z!==e?(X=M,M=jl(_,z)):(o=M,M=e)}else o=M,M=e;for(M===e&&(M=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&j(Ot)),I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();if(z=We(),z!==e)if(t.charCodeAt(o)===41?(se=S,o++):(se=e,F===0&&j(Sr)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=b(),ye!==e?(X=n,n=Dl(_,M,z,ye)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===le?(h=le,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(M=be,o++):(M=e,F===0&&j(Xr)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=We(),H!==e?(X=A,A=Ul(m,H)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(M=Y,o++):(M=e,F===0&&j(Ot)),M===e&&(M=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(X=n,n=Xa(m,A,H,se)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(x=We(),x!==e)if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(X=n,n=Bl(x,A)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(X=n,n=Ll(h,m)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e}}return V[gt]={nextPos:o,result:n},n}function $u(){var n,u,y,h,x,m=o*77+21,_=V[m];if(_)return o=_.nextPos,_.result;if(n=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&j(Nr)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=We(),x!==e?(X=n,n=Hl(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[m]={nextPos:o,result:n},n}function xu(){var n,u,y,h,x,m,_,A,M=o*77+22,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Te?(u=Te,o+=4):(u=e,F===0&&j(rl)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=Z,o++):(A=e,F===0&&j(Lt)),A!==e?(X=n,n=ql(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function bi(){var n,u,y,h,x=o*77+23,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===Ie?(u=Ie,o+=5):(u=e,F===0&&j(Ua)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=Vl()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ss(){var n,u,y,h,x=o*77+24,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,8)===ke?(u=ke,o+=8):(u=e,F===0&&j(sl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=Zn()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ta(){var n,u,y,h,x,m,_=o*77+25,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=We(),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&j(nl)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&j(Ba)),h===e&&(t.charCodeAt(o)===61?(h=be,o++):(h=e,F===0&&j(Xr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=We(),m!==e?(X=n,n=zl(u,h,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function Ai(){var n,u,y,h,x,m,_,A,M=o*77+26,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=Bs(),u!==e){for(y=[],h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Bs(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Bs(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e}else y=e;y!==e?(X=n,n=Kl(u,y)):(o=n,n=e)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function ns(){var n,u,y,h=o*77+27,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(y=w(),y!==e?(u=[u,y],n=u):(o=n,n=e)):(o=n,n=e),n===e&&(n=$()),V[h]={nextPos:o,result:n},n)}function ra(){var n,u,y=o*77+28,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===At?(u=At,o+=2):(u=e,F===0&&j(al)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&j(il)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&j(ll)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&j(ul)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&j(Vn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&j(Ys)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&j(zn)),u===e&&(t.charCodeAt(o)===62?(u=Lr,o++):(u=e,F===0&&j(Ha)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&j(ol)),u===e&&(t.charCodeAt(o)===45?(u=Mr,o++):(u=e,F===0&&j(qa)),u===e&&(t.charCodeAt(o)===42?(u=ir,o++):(u=e,F===0&&j(Fs)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&j(fl)),u===e&&(t.charCodeAt(o)===47?(u=Jr,o++):(u=e,F===0&&j(cl)),u===e&&(t.charCodeAt(o)===37?(u=nr,o++):(u=e,F===0&&j(hl))))))))))))))),u!==e&&(X=n,u=Wl()),n=u,V[y]={nextPos:o,result:n},n)}function sa(){var n,u,y,h=o*77+29,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===33?(u=Zr,o++):(u=e,F===0&&j(As)),u!==e?(y=We(),y!==e?(X=n,n=Gl(y)):(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function Ci(){var n,u,y,h,x=o*77+30,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,u=wi(),u!==e){if(y=[],h=na(),h===e&&(h=_i(),h===e&&(h=Ls())),h!==e)for(;h!==e;)y.push(h),h=na(),h===e&&(h=_i(),h===e&&(h=Ls()));else y=e;y!==e?(X=n,n=ei(u,y)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function na(){var n,u,y,h,x,m,_=o*77+31,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=bu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e?(X=n,n=Jl(h)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function bu(){var n,u,y,h,x,m,_=o*77+32,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=We(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);X=n,n=Zl(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function _i(){var n,u,y,h,x,m,_=o*77+33,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=Ql(h)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function Ls(){var n,u,y,h=o*77+34,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===46?(u=Pr,o++):(u=e,F===0&&j(Kn)),u!==e?(y=ne(),y!==e?(X=n,n=Xl(y)):(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function Pi(){var n,u,y,h,x,m,_,A,M,I,H=o*77+35,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===G?(u=G,o+=2):(u=e,F===0&&j(en)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=ki(),M!==e?_=M:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=Au(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),X=n,n=Yl(h,m,_,A)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ki(){var n,u,y,h,x,m,_=o*77+36,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=pn(),u!==e){for(y=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=pn(),m!==e?h=m:(o=h,h=e);h!==e;){for(y.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=pn(),m!==e?h=m:(o=h,h=e)}X=n,n=eu(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function pn(){var n,u,y,h,x,m,_,A=o*77+37,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&j(tn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(X=n,n=ti(x,_)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e;return V[A]={nextPos:o,result:n},n}function Au(){var n,u,y,h,x,m=o*77+38,_=V[m];if(_)return o=_.nextPos,_.result;if(n=o,t.substr(o,4)===fe?(u=fe,o+=4):(u=e,F===0&&j(pl)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(X=n,n=ri(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[m]={nextPos:o,result:n},n}function vn(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt,dt,ku=o*77+39,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(n=o,t.substr(o,5)===Ce?(u=Ce,o+=5):(u=e,F===0&&j(rn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=L,o++):(_=e,F===0&&j(st)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else M=e;if(M!==e){if(I=o,t.charCodeAt(o)===42?(H=ir,o++):(H=e,F===0&&j(Fs)),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=ye}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();t.charCodeAt(o)===125?(z=Z,o++):(z=e,F===0&&j(Lt)),z!==e?(X=n,n=ni(x,M,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;else o=n,n=e;return V[ku]={nextPos:o,result:n},n}function aa(){var n,u,y,h,x,m,_,A,M=o*77+40,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Ae?(u=Ae,o+=4):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=Z,o++):(A=e,F===0&&j(Lt)),A!==e?(X=n,n=tu(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function ia(){var n,u,y,h,x=o*77+41,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,6)===Re?(u=Re,o+=6):(u=e,F===0&&j(Ar)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;y!==e?(h=la(),h!==e?(X=n,n=ru(h)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function la(){var n,u,y=o*77+42,h=V[y];return h?(o=h.nextPos,h.result):(n=o,u=f(),u!==e&&(X=n,u=ai(u)),n=u,V[y]={nextPos:o,result:n},n)}function gn(){var n,u,y,h,x,m,_=o*77+43,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===96?(u=Me,o++):(u=e,F===0&&j(sn)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Me,o++):(m=e,F===0&&j(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Me,o++):(m=e,F===0&&j(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Me,o++):(h=e,F===0&&j(sn)),h!==e?(X=n,n=su(y)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function ua(){var n,u,y,h,x,m,_=o*77+44,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=We(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=Z,o++):(m=e,F===0&&j(Lt)),m!==e?n=h:(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,u=[],y=dn(),y!==e)for(;y!==e;)u.push(y),y=dn();else u=e;u!==e&&(X=n,u=ii(u)),n=u}return V[_]={nextPos:o,result:n},n}function dn(){var n,u=o*77+45,y=V[u];return y?(o=y.nextPos,y.result):(n=Ei(),n===e&&(vr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(nn))),V[u]={nextPos:o,result:n},n)}function Ei(){var n,u,y,h=o*77+46,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(cs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&j(an)),y!==e?n=y:(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function oa(){var n,u,y,h,x,m,_=o*77+47,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===34?(u=Se,o++):(u=e,F===0&&j(vs)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Se,o++):(h=e,F===0&&j(vs)),h!==e?(X=n,n=nu(y)):(o=n,n=e)}else o=n,n=e;if(n===e)if(n=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&j(ln)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(ln)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(ln)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&j(ln)),h!==e?(X=n,n=au(y)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function fa(){var n,u,y=o*77+48,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===it?(u=it,o+=2):(u=e,F===0&&j(Rs)),u!==e&&(X=n,u=iu()),n=u,V[y]={nextPos:o,result:n},n)}function ca(){var n,u,y=o*77+49,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===qe?(u=qe,o+=2):(u=e,F===0&&j(Va)),u!==e&&(X=n,u=oi()),n=u,V[y]={nextPos:o,result:n},n)}function Mi(){var n,u=o*77+50,y=V[u];return y?(o=y.nextPos,y.result):(n=ha(),n===e&&(n=pa()),V[u]={nextPos:o,result:n},n)}function ha(){var n,u,y,h,x,m,_=o*77+51,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(h=Pr,o++):(h=e,F===0&&j(Kn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr));else x=e;x!==e?(X=n,n=lu()):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e)if(t.charCodeAt(o)===46?(y=Pr,o++):(y=e,F===0&&j(Kn)),y!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr));else h=e;h!==e?(X=n,n=fi()):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[_]={nextPos:o,result:n},n}function pa(){var n,u,y,h,x=o*77+52,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;y!==e?(X=n,n=uu()):(o=n,n=e)}else o=n,n=e;return n===e&&(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e?(X=n,n=ou()):(o=n,n=e)),V[x]={nextPos:o,result:n},n}function va(){var n,u=o*77+53,y=V[u];return y?(o=y.nextPos,y.result):(n=Cu(),n===e&&(n=ga()),V[u]={nextPos:o,result:n},n)}function Cu(){var n,u,y,h,x=o*77+54,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&j(vl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=ci()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ga(){var n,u,y,h,x=o*77+55,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&j(un)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=fu()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function da(){var n,u,y,h,x=o*77+56,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===ot?(u=ot,o+=4):(u=e,F===0&&j(gl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=hi()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function wr(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+57,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=Z,o++):(x=e,F===0&&j(Lt)),x!==e?(X=n,n=cu(h)):(o=n,n=e)}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function _u(){var n,u,y,h,x,m,_,A,M,I,H=o*77+58,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=hu(h)):(o=n,n=e)}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ya(){var n,u,y,h,x,m,_,A=o*77+59,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,u=ne(),u!==e){for(y=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=Ge(),_!==e?y=_:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),X=n,n=pu(u,y)}else o=n,n=e;return V[A]={nextPos:o,result:n},n}function Si(){var n,u,y,h,x,m,_=o*77+60,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=ya(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=n,n=pi(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function tt(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt,dt,ku=o*77+61,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(n=o,t.charCodeAt(o)===64?(u=xt,o++):(u=e,F===0&&j(dl)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=N,o++):(m=e,F===0&&j(ft)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Si(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(o)===41?(I=S,o++):(I=e,F===0&&j(Sr)),I!==e){for(H=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=pe,o++):(se=e,F===0&&j(qt)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=Ge(),ye!==e?H=ye:(o=H,H=e)}else o=H,H=e;for(H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=L,o++):(se=e,F===0&&j(st)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();for(ye=Cr(),ye===e&&(ye=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=Z,o++):(dt=e,F===0&&j(Lt)),dt!==e?(X=n,n=vu(y,h,x,A,H,ye)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[ku]={nextPos:o,result:n},n}function Pu(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=o*77+62,ye=V[Fe];if(ye)return o=ye.nextPos,ye.result;if(n=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Si(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=o,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(o)===58?(M=pe,o++):(M=e,F===0&&j(qt)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=Ge(),H!==e?_=H:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(o)===123?(M=L,o++):(M=e,F===0&&j(st)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();for(H=Cr(),H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=Z,o++):(se=e,F===0&&j(Lt)),se!==e?(X=n,n=vi(h,_,H)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[Fe]={nextPos:o,result:n},n}function Es(){var n,u,y,h,x,m,_,A,M,I,H=o*77+63,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=gu(h)):(o=n,n=e)}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ur(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+64,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=Z,o++):(x=e,F===0&&j(Lt)),x!==e?(X=n,n=c(h)):(o=n,n=e)}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function Ge(){var n,u=o*77+65,y=V[u];return y?(o=y.nextPos,y.result):(n=Ti(),n===e&&(n=De()),V[u]={nextPos:o,result:n},n)}function Ti(){var n,u,y,h,x,m,_,A,M,I,H=o*77+66,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===ve?(A=ve,o+=2):(A=e,F===0&&j(ps)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=Ge(),I!==e?(X=n,n=te(h,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function k(){var n,u,y,h,x,m,_=o*77+67,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=Ge(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=n,n=Cs(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function De(){var n,u,y,h,x,m,_,A,M=o*77+68,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=ne(),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&j(zn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ge(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Lr,o++):(A=e,F===0&&j(Ha)),A!==e?(X=n,n=yr(u,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return n===e&&(n=o,u=ne(),u!==e&&(X=n,u=on(u)),n=u),V[M]={nextPos:o,result:n},n}function ne(){var n,u,y,h,x=o*77+69,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,Mn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(yl)),u!==e){for(y=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));h!==e;)y.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));X=n,n=i()}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function f(){var n,u,y,h,x,m,_=o*77+70,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=ne(),u!==e){for(y=[],h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=n,n=T()}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function g(){var n,u,y,h,x,m=o*77+71,_=V[m];if(_)return o=_.nextPos,_.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&j(Ot)),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,y,h],n=u}else o=n,n=e;if(n===e)if(n=[],u=l(),u!==e)for(;u!==e;)n.push(u),u=l();else n=e;return V[m]={nextPos:o,result:n},n}function b(){var n,u,y,h,x,m,_=o*77+72,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Cr(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=Z,o++):(m=e,F===0&&j(Lt)),m!==e?(X=n,n=Yr(h)):(o=n,n=e)}else o=n,n=e;return n===e&&(n=ks()),V[_]={nextPos:o,result:n},n}function w(){var n,u=o*77+73,y=V[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===yt?(n=yt,o+=2):(n=e,F===0&&j(wl)),n===e&&(el.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(ml))),V[u]={nextPos:o,result:n},n)}function a(){var n,u,y=o*77+74,h=V[y];return h?(o=h.nextPos,h.result):(n=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&j(Bt)),F--,u===e?n=void 0:(o=n,n=e),n===e&&(n=w()),V[y]={nextPos:o,result:n},n)}function l(){var n,u=o*77+75,y=V[u];return y?(o=y.nextPos,y.result):(tl.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(Wa)),V[u]={nextPos:o,result:n},n)}function $(){var n,u=o*77+76,y=V[u];return y?(o=y.nextPos,y.result):(lr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j($l)),V[u]={nextPos:o,result:n},n)}function p(n,u,y){const h={type:n};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Ds=d(),Ds!==e&&o===t.length)return Ds;throw Ds!==e&&o<t.length&&j(U()),ea(_t,R<t.length?t.charAt(R):null,R<t.length?fn(R,R+1):fn(R,R))}const r2=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function s2(t){return r2.includes(t.type)}function jw(t){return"chain"in t&&t.chain!==null}function n2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function a2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function i2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function St(t,r){const e=r(t);switch(e.type){case"def":{e.expr=St(e.expr,r);break}case"return":{e.expr=St(e.expr,r);break}case"each":{e.items=St(e.items,r),e.for=St(e.for,r);break}case"for":{e.from!=null&&(e.from=St(e.from,r)),e.to!=null&&(e.to=St(e.to,r)),e.times!=null&&(e.times=St(e.times,r)),e.for=St(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=St(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=St(e.expr,r),e.dest=St(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=St(e.operands[s],r);break}case"not":{e.expr=St(e.expr,r);break}case"if":{e.cond=St(e.cond,r),e.then=St(e.then,r);for(const s of e.elseif)s.cond=St(s.cond,r),s.then=St(s.then,r);e.else!=null&&(e.else=St(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=St(e.children[s],r);break}case"match":{e.about=St(e.about,r);for(const s of e.qs)s.q=St(s.q,r),s.a=St(s.a,r);e.default!=null&&(e.default=St(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=St(e.statements[s],r);break}case"exists":{e.identifier=St(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=St(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],St(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=St(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=St(e.args[s],r);break}case"indexChain":{e.index=St(e.index,r);break}case"call":{e.target=St(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=St(e.args[s],r);break}case"index":{e.target=St(e.target,r),e.index=St(e.index,r);break}case"prop":{e.target=St(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=St(e.members[s],r);break}case"or":case"and":{e.left=St(e.left,r),e.right=St(e.right,r);break}}if(jw(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=St(e.chain[s],r);return e}const Dp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Up(t){throw new yf(`Reserved word "${t}" cannot be used as variable name.`)}function l2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Dp.includes(t.name)&&Up(t.name);break}case"meta":{t.name!=null&&Dp.includes(t.name)&&Up(t.name);break}case"fn":{for(const r of t.args)Dp.includes(r.name)&&Up(r.name);break}}return t}function u2(t){for(const r of t)St(r,l2);return t}function Ld(t){return{type:"simple",name:t}}function o2(t,r){return{type:"generic",name:t,inners:r}}function f2(t,r){return{type:"fn",args:t,result:r}}function yh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=yh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>yh(s)).join(", "),e=yh(t.result);return`@(${r}) { ${e} }`}}}function Zf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Ld(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Zf(t.inner):r=Ld("any"),o2(t.name,[r])}}throw new yf(`Unknown type: '${yh(t)}'`)}else{const r=t.args.map(e=>Zf(e));return f2(r,Zf(t.result))}}function c2(t){switch(t.type){case"def":{t.varType!=null&&Zf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Zf(r.argType);t.retType!=null&&Zf(t.retType);break}}return t}function h2(t){for(const r of t)St(r,c2);return t}function wh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=wh(s.expr.children)),r.push(s);else{if(e.length>0)throw new yf("invalid attribute.");switch(s.type){case"fn":{s.children=wh(s.children);break}case"block":{s.statements=wh(s.statements);break}}r.push(s)}if(e.length>0)throw new yf("invalid attribute.");return r}function p2(t){if(s2(t)&&jw(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=n2(s,v.args,v.loc);break}case"indexChain":{s=a2(s,v.index,v.loc);break}case"propChain":{s=i2(s,v.name,v.loc);break}}return s}return t}function v2(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],p2);return t}function mh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Dw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return mh(t,r,e);{const{left:s,right:v,info:d}=t;return mh(s,Dw(v,r,e),d)}}function Jo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Jo(t.left),Jo(t.right)]}}const g2={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Jo(t.left),right:Jo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Jo(t.left),right:Jo(t.right)}),priority:3}};function d2(t){const r=t.operators.map(s=>{const v=g2[s];if(v==null)throw new yf(`No such operator: ${s}.`);return v});let e=mh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=Dw(e,t.operands[2+s],r[1+s]);return Jo(e)}function y2(t){for(let r=0;r<t.length;r++)t[r]=St(t[r],e=>e.type==="infix"?d2(e):e);return t}var Hu;let w2=(Hu=class{constructor(){he(this,"plugins");this.plugins={validate:[u2,h2],transform:[wh,v2,y2]}}static parse(r){return Hu.instance==null&&(Hu.instance=new Hu),Hu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Bd(r,{startRule:"Preprocess"});e=Bd(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new yf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new yf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},he(Hu,"instance"),Hu);const m2="0.17.0",$2={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Sv=[],cc=null;function x2(t){return Sv=w2.parse(t),JSON.stringify(Sv,null,"	")}async function b2(t){cc==null||cc.abort(),cc=new Ln({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:kv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:kv(e.val,!0),print:!1});break}}});try{await cc.exec(Sv)}catch(r){t.err(r)}}const A2=Object.freeze(Object.defineProperty({__proto__:null,exec:b2,parse:x2,samples:$2,version:m2},Symbol.toStringTag,{value:"Module"}));function ms(t,r,e){let s=e.value;return{configurable:!0,get(){const v=s.bind(this);return Object.defineProperty(this,r,{configurable:!0,writable:!0,value:v}),v},set(v){s=v}}}let ip=class Uw extends Error{constructor(e,s){super(e);he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,Uw)}};class C2 extends ip{constructor(r){super(`Internal Error. ${r}`,r)}}class wf extends ip{constructor(r,e){super(r,e)}}class Ur extends ip{constructor(r,e){super(r,e)}}class _2 extends Ur{constructor(r,e){super(r,e)}}var Oo=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let io=class Bw{constructor(r=[],e,s){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Bw(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r).value;return this.log("read",{var:r,val:s}),s}throw new Ur(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}exists(r){for(const e of this.layerdStates)if(e.has(r))return this.log("exists",{var:r}),!0;return this.log("not exists",{var:r}),!1}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Ur(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e.value)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){const d=v.get(r);if(!d.isMutable)throw new Ur(`Cannot assign to an immutable variable ${r}.`);d.value=e,this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Ur(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};Oo([ms],io.prototype,"log",null);Oo([ms],io.prototype,"onUpdated",null);Oo([ms],io.prototype,"createChildScope",null);Oo([ms],io.prototype,"get",null);Oo([ms],io.prototype,"exists",null);Oo([ms],io.prototype,"getAll",null);Oo([ms],io.prototype,"add",null);Oo([ms],io.prototype,"assign",null);let rh;const P2=new Uint8Array(16);function k2(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(P2)}const xn=[];for(let t=0;t<256;++t)xn.push((t+256).toString(16).slice(1));function E2(t,r=0){return xn[t[r+0]]+xn[t[r+1]]+xn[t[r+2]]+xn[t[r+3]]+"-"+xn[t[r+4]]+xn[t[r+5]]+"-"+xn[t[r+6]]+xn[t[r+7]]+"-"+xn[t[r+8]]+xn[t[r+9]]+"-"+xn[t[r+10]]+xn[t[r+11]]+xn[t[r+12]]+xn[t[r+13]]+xn[t[r+14]]+xn[t[r+15]]}const M2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hd={randomUUID:M2};function S2(t,r,e){if(Hd.randomUUID&&!r&&!t)return Hd.randomUUID();t=t||{};const s=t.random||(t.rng||k2)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,E2(s)}const cr={type:"null"},Gi={type:"bool",value:!0},Oi={type:"bool",value:!1},Ke=t=>({type:"num",value:t}),jr=t=>({type:"str",value:t}),of=t=>({type:"bool",value:t}),Cg=t=>({type:"obj",value:t}),Tn=t=>({type:"arr",value:t}),T2=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),xe=t=>({type:"fn",native:t}),N2=t=>({type:"return",value:t}),F2=()=>({type:"break",value:null}),O2=()=>({type:"continue",value:null}),I2=t=>t.type==="return"?t.value:t,Lw=(t,r)=>({type:"error",value:t,info:r});function Ui(t){if(t==null)throw new Ur("Expect anything, but got nothing.")}function ba(t){if(t==null)throw new Ur("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Ur(`Expect boolean, but got ${t.type}.`)}function xo(t){if(t==null)throw new Ur("Expect function, but got nothing.");if(t.type!=="fn")throw new Ur(`Expect function, but got ${t.type}.`)}function Ts(t){if(t==null)throw new Ur("Expect string, but got nothing.");if(t.type!=="str")throw new Ur(`Expect string, but got ${t.type}.`)}function Le(t){if(t==null)throw new Ur("Expect number, but got nothing.");if(t.type!=="num")throw new Ur(`Expect number, but got ${t.type}.`)}function ho(t){if(t==null)throw new Ur("Expect object, but got nothing.");if(t.type!=="obj")throw new Ur(`Expect object, but got ${t.type}.`)}function qh(t){if(t==null)throw new Ur("Expect array, but got nothing.");if(t.type!=="arr")throw new Ur(`Expect array, but got ${t.type}.`)}function Bp(t){return t.type==="obj"}function qd(t){return t.type==="arr"}function Tv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Nv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>Nv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Fv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Fv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Fv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Ov(t){if(t===null)return cr;if(typeof t=="boolean")return of(t);if(typeof t=="string")return jr(t);if(typeof t=="number")return Ke(t);if(Array.isArray(t))return Tn(t.map(r=>Ov(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Ov(s));return Cg(r)}return cr}function Qf(t,r=!1,e=new Set){if((t.type==="arr"||t.type==="obj")&&e.has(t.value))return"...";if(r&&t.type==="str")return'"'+t.value.replace(/["\\\r\n]/g,s=>`\\${s}`)+'"';if(t.type==="str")return t.value;if(t.type==="num")return t.value.toString();if(t.type==="arr"){e.add(t.value);const s=[];for(const v of t.value)s.push(Qf(v,!0,e));return"[ "+s.join(", ")+" ]"}if(t.type==="obj"){e.add(t.value);const s=[];for(const[v,d]of t.value)s.push(`${v}: ${Qf(d,!0,e)}`);return"{ "+s.join(", ")+" }"}return t.type==="bool"?t.value.toString():t.type==="null"?"null":t.type==="fn"?`@( ${(t.args??[]).join(", ")} ) { ... }`:"?"}const R2={help:jr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":jr("0.16.0"),"Core:ai":jr("kawaii"),"Core:not":xe(([t])=>(ba(t),t.value?Oi:Gi)),"Core:eq":xe(([t,r])=>(Ui(t),Ui(r),Tv(t,r)?Gi:Oi)),"Core:neq":xe(([t,r])=>(Ui(t),Ui(r),Tv(t,r)?Oi:Gi)),"Core:and":xe(([t,r])=>(ba(t),t.value?(ba(r),r.value?Gi:Oi):Oi)),"Core:or":xe(([t,r])=>(ba(t),t.value?Gi:(ba(r),r.value?Gi:Oi))),"Core:add":xe(([t,r])=>(Le(t),Le(r),Ke(t.value+r.value))),"Core:sub":xe(([t,r])=>(Le(t),Le(r),Ke(t.value-r.value))),"Core:mul":xe(([t,r])=>(Le(t),Le(r),Ke(t.value*r.value))),"Core:pow":xe(([t,r])=>{Le(t),Le(r);const e=t.value**r.value;if(isNaN(e))throw new Ur("Invalid operation.");return Ke(e)}),"Core:div":xe(([t,r])=>{Le(t),Le(r);const e=t.value/r.value;if(isNaN(e))throw new Ur("Invalid operation.");return Ke(e)}),"Core:mod":xe(([t,r])=>(Le(t),Le(r),Ke(t.value%r.value))),"Core:gt":xe(([t,r])=>(Le(t),Le(r),t.value>r.value?Gi:Oi)),"Core:lt":xe(([t,r])=>(Le(t),Le(r),t.value<r.value?Gi:Oi)),"Core:gteq":xe(([t,r])=>(Le(t),Le(r),t.value>=r.value?Gi:Oi)),"Core:lteq":xe(([t,r])=>(Le(t),Le(r),t.value<=r.value?Gi:Oi)),"Core:type":xe(([t])=>(Ui(t),jr(t.type))),"Core:to_str":xe(([t])=>(Ui(t),jr(Qf(t)))),"Core:range":xe(([t,r])=>(Le(t),Le(r),t.value<r.value?Tn(Array.from({length:r.value-t.value+1},(e,s)=>Ke(s+t.value))):t.value>r.value?Tn(Array.from({length:t.value-r.value+1},(e,s)=>Ke(t.value-s))):Tn([t]))),"Core:sleep":xe(async([t])=>(Le(t),await new Promise(r=>setTimeout(r,t.value)),cr)),"Util:uuid":xe(()=>jr(S2())),"Json:stringify":xe(([t])=>(Ui(t),jr(JSON.stringify(Fv(t))))),"Json:parse":xe(([t])=>{Ts(t);try{return Ov(JSON.parse(t.value))}catch{return Lw("not_json")}}),"Json:parsable":xe(([t])=>{Ts(t);try{JSON.parse(t.value)}catch{return of(!1)}return of(!0)}),"Date:now":xe(()=>Ke(Date.now())),"Date:year":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":xe(([t])=>(t&&Le(t),Ke(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":xe(([t])=>(Ts(t),Ke(new Date(t.value).getTime()))),"Math:Infinity":Ke(1/0),"Math:E":Ke(Math.E),"Math:LN2":Ke(Math.LN2),"Math:LN10":Ke(Math.LN10),"Math:LOG2E":Ke(Math.LOG2E),"Math:LOG10E":Ke(Math.LOG10E),"Math:PI":Ke(Math.PI),"Math:SQRT1_2":Ke(Math.SQRT1_2),"Math:SQRT2":Ke(Math.SQRT2),"Math:abs":xe(([t])=>(Le(t),Ke(Math.abs(t.value)))),"Math:acos":xe(([t])=>(Le(t),Ke(Math.acos(t.value)))),"Math:acosh":xe(([t])=>(Le(t),Ke(Math.acosh(t.value)))),"Math:asin":xe(([t])=>(Le(t),Ke(Math.asin(t.value)))),"Math:asinh":xe(([t])=>(Le(t),Ke(Math.asinh(t.value)))),"Math:atan":xe(([t])=>(Le(t),Ke(Math.atan(t.value)))),"Math:atanh":xe(([t])=>(Le(t),Ke(Math.atanh(t.value)))),"Math:atan2":xe(([t,r])=>(Le(t),Le(r),Ke(Math.atan2(t.value,r.value)))),"Math:cbrt":xe(([t])=>(Le(t),Ke(Math.cbrt(t.value)))),"Math:ceil":xe(([t])=>(Le(t),Ke(Math.ceil(t.value)))),"Math:clz32":xe(([t])=>(Le(t),Ke(Math.clz32(t.value)))),"Math:cos":xe(([t])=>(Le(t),Ke(Math.cos(t.value)))),"Math:cosh":xe(([t])=>(Le(t),Ke(Math.cosh(t.value)))),"Math:exp":xe(([t])=>(Le(t),Ke(Math.exp(t.value)))),"Math:expm1":xe(([t])=>(Le(t),Ke(Math.expm1(t.value)))),"Math:floor":xe(([t])=>(Le(t),Ke(Math.floor(t.value)))),"Math:fround":xe(([t])=>(Le(t),Ke(Math.fround(t.value)))),"Math:hypot":xe(([t])=>{qh(t);const r=[];for(const e of t.value)Le(e),r.push(e.value);return Ke(Math.hypot(...r))}),"Math:imul":xe(([t,r])=>(Le(t),Le(r),Ke(Math.imul(t.value,r.value)))),"Math:log":xe(([t])=>(Le(t),Ke(Math.log(t.value)))),"Math:log1p":xe(([t])=>(Le(t),Ke(Math.log1p(t.value)))),"Math:log10":xe(([t])=>(Le(t),Ke(Math.log10(t.value)))),"Math:log2":xe(([t])=>(Le(t),Ke(Math.log2(t.value)))),"Math:max":xe(([t,r])=>(Le(t),Le(r),Ke(Math.max(t.value,r.value)))),"Math:min":xe(([t,r])=>(Le(t),Le(r),Ke(Math.min(t.value,r.value)))),"Math:pow":xe(([t,r])=>(Le(t),Le(r),Ke(Math.pow(t.value,r.value)))),"Math:round":xe(([t])=>(Le(t),Ke(Math.round(t.value)))),"Math:sign":xe(([t])=>(Le(t),Ke(Math.sign(t.value)))),"Math:sin":xe(([t])=>(Le(t),Ke(Math.sin(t.value)))),"Math:sinh":xe(([t])=>(Le(t),Ke(Math.sinh(t.value)))),"Math:sqrt":xe(([t])=>{Le(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Ur("Invalid operation.");return Ke(r)}),"Math:tan":xe(([t])=>(Le(t),Ke(Math.tan(t.value)))),"Math:tanh":xe(([t])=>(Le(t),Ke(Math.tanh(t.value)))),"Math:trunc":xe(([t])=>(Le(t),Ke(Math.trunc(t.value)))),"Math:rnd":xe(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Ke(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Ke(Math.random())),"Math:gen_rng":xe(([t])=>{if(Ui(t),t.type!=="num"&&t.type!=="str")return cr;const r=No(t.value.toString());return xe(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Ke(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Ke(r()))}),"Num:to_hex":xe(([t])=>(Le(t),jr(t.value.toString(16)))),"Num:from_hex":xe(([t])=>(Ts(t),Ke(parseInt(t.value,16)))),"Str:lf":jr(`
`),"Str:lt":xe(([t,r])=>(Ts(t),Ts(r),t.value<r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:gt":xe(([t,r])=>(Ts(t),Ts(r),t.value>r.value?Ke(-1):t.value===r.value?Ke(0):Ke(1))),"Str:from_codepoint":xe(([t])=>(Le(t),jr(String.fromCodePoint(t.value)))),"Obj:keys":xe(([t])=>(ho(t),Tn(Array.from(t.value.keys()).map(r=>jr(r))))),"Obj:vals":xe(([t])=>(ho(t),Tn(Array.from(t.value.values())))),"Obj:kvs":xe(([t])=>(ho(t),Tn(Array.from(t.value.entries()).map(([r,e])=>Tn([jr(r),e]))))),"Obj:get":xe(([t,r])=>(ho(t),Ts(r),t.value.get(r.value)??cr)),"Obj:set":xe(([t,r,e])=>(ho(t),Ts(r),Ui(e),t.value.set(r.value,e),cr)),"Obj:has":xe(([t,r])=>(ho(t),Ts(r),of(t.value.has(r.value)))),"Obj:copy":xe(([t])=>(ho(t),Cg(new Map(t.value)))),"Async:interval":xe(async([t,r,e],s)=>{Le(t),xo(r),e&&(ba(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.topCall(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),xe(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":xe(async([t,r],e)=>{Le(t),xo(r);const s=setTimeout(()=>{e.topCall(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),xe(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},Vd={num:{to_str:t=>xe(async(r,e)=>jr(t.value.toString()))},str:{to_num:t=>xe(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?cr:Ke(s)}),len:t=>Ke(Cf(t.value)),replace:t=>xe(async([r,e],s)=>(Ts(r),Ts(e),jr(t.value.split(r.value).join(e.value)))),index_of:t=>xe(async([r],e)=>(Ts(r),Ke(Pf(t.value,r.value)))),incl:t=>xe(async([r],e)=>(Ts(r),t.value.includes(r.value)?Gi:Oi)),trim:t=>xe(async(r,e)=>jr(t.value.trim())),upper:t=>xe(async(r,e)=>jr(t.value.toUpperCase())),lower:t=>xe(async(r,e)=>jr(t.value.toLowerCase())),split:t=>xe(async([r],e)=>(r&&Ts(r),Tn(r?t.value.split(r?r.value:"").map(s=>jr(s)):Zs(t.value).map(s=>jr(s))))),slice:t=>xe(async([r,e],s)=>(Le(r),Le(e),jr(_f(t.value,r.value,e.value)))),pick:t=>xe(async([r],e)=>{Le(r);const v=Zs(t.value)[r.value];return v?jr(v):cr}),codepoint_at:t=>xe(([r],e)=>{Le(r);const s=t.value.charCodeAt(r.value);return Number.isNaN(s)?cr:Ke(s)})},arr:{len:t=>Ke(t.value.length),push:t=>xe(async([r],e)=>(Ui(r),t.value.push(r),t)),unshift:t=>xe(async([r],e)=>(Ui(r),t.value.unshift(r),t)),pop:t=>xe(async(r,e)=>t.value.pop()??cr),shift:t=>xe(async(r,e)=>t.value.shift()??cr),concat:t=>xe(async([r],e)=>(qh(r),Tn(t.value.concat(r.value)))),slice:t=>xe(async([r,e],s)=>(Le(r),Le(e),Tn(t.value.slice(r.value,e.value)))),join:t=>xe(async([r],e)=>(r&&Ts(r),jr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>xe(async([r],e)=>{xo(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,Ke(d)]));return Tn(await Promise.all(s))}),filter:t=>xe(async([r],e)=>{xo(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,Ke(v)]);ba(C),C.value&&s.push(d)}return Tn(s)}),reduce:t=>xe(async([r,e],s)=>{xo(r);const v=e!=null;let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,Ke(C)])}return d}),find:t=>xe(async([r],e)=>{xo(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Ke(s)]);if(ba(d),d.value)return v}return cr}),incl:t=>xe(async([r],e)=>(Ui(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Oi:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Gi:Oi)),reverse:t=>xe(async(r,e)=>(t.value.reverse(),cr)),copy:t=>xe(async(r,e)=>Tn([...t.value])),sort:t=>xe(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=await s(d.slice(0,P),C),N=await s(d.slice(P),C);return v(E,N,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Le(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return xo(r),qh(t),t.value=await s(t.value,r),t})},error:{name:t=>jr(t.value),info:t=>t.info??cr}};function j2(t,r){if(Object.hasOwn(Vd,t.type)){const e=Vd[t.type];if(Object.hasOwn(e,r))return e[r](t);throw new Ur(`No such prop (${r}) in ${t.type}.`)}else throw new Ur(`Cannot read prop of ${t.type}. (reading ${r})`)}const D2={mut(t){return{isMutable:!0,value:t}},const(t){return{isMutable:!1,value:t}}};var Ta=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Hw=300,U2=Hw-1;let Hn=class{constructor(r,e={}){he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);he(this,"vars",{});this.opts=e;const s={print:xe(([v])=>{Ui(v),this.opts.out&&this.opts.out(v)}),readline:xe(async v=>{const d=v[0];if(Ts(d),this.opts.in==null)return cr;const C=await this.opts.in(d.value);return jr(C)})};this.vars=Object.fromEntries(Object.entries({...r,...R2,...s}).map(([v,d])=>[v,D2.const(d)])),this.scope=new io([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(!(r==null||r.length===0))try{await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}catch(e){this.handleError(e)}}async execFn(r,e){return await this._fn(r,e).catch(s=>(this.handleError(s),Lw("func_failed")))}execFnSimple(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}handleError(r){if(this.opts.err)this.stop||(this.abort(),r instanceof ip?this.opts.err(r):this.opts.err(new C2(r)));else throw r}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{if(s.mut)throw new Error("Namespaces cannot include mutable variable: "+s.name);const v={isMutable:s.mut,value:await this._eval(s.expr,e)};e.add(s.name,v),this.scope.add(r.name+":"+s.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this.execFnSimple,topCall:this.execFn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??cr;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],{isMutable:!0,value:e[d]});const v=r.scope.createChildScope(s);return I2(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return cr;if(this.stepCount%Hw===U2&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Ur("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);xo(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(ba(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(ba(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return cr}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Tv(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):cr}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return cr}case"for":{if(r.times){const s=await this._eval(r.times,e);Le(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Le(s),Le(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:Ke(d)}]])));if(C.type==="break")break;if(C.type==="return")return C}}return cr}case"each":{const s=await this._eval(r.items,e);qh(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,{isMutable:!1,value:v}]])));if(d.type==="break")break;if(d.type==="return")return d}return cr}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,{isMutable:r.mut,value:s}),cr}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),cr}case"addAssign":{const s=await this._eval(r.dest,e);Le(s);const v=await this._eval(r.expr,e);return Le(v),await this.assign(e,r.dest,Ke(s.value+v.value)),cr}case"subAssign":{const s=await this._eval(r.dest,e);Le(s);const v=await this._eval(r.expr,e);return Le(v),await this.assign(e,r.dest,Ke(s.value-v.value)),cr}case"null":return cr;case"bool":return of(r.value);case"num":return Ke(r.value);case"str":return jr(r.value);case"arr":return Tn(await Promise.all(r.value.map(s=>this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return Cg(s)}case"prop":{const s=await this._eval(r.target,e);return Bp(s)?s.value.has(r.name)?s.value.get(r.name):cr:j2(s,r.name)}case"index":{const s=await this._eval(r.target,e),v=await this._eval(r.index,e);if(qd(s)){Le(v);const d=s.value[v.value];if(d===void 0)throw new _2(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}else{if(Bp(s))return Ts(v),s.value.has(v.value)?s.value.get(v.value):cr;throw new Ur(`Cannot read prop (${Qf(v)}) of ${s.type}.`)}}case"not":{const s=await this._eval(r.expr,e);return ba(s),of(!s.value)}case"fn":return T2(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"exists":return of(e.exists(r.identifier.name));case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);s+=Qf(d)}return jr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),N2(s)}case"break":return this.log("block:break",{scope:e.name}),F2();case"continue":return this.log("block:continue",{scope:e.name}),O2();case"ns":return cr;case"meta":return cr;case"and":{const s=await this._eval(r.left,e);if(ba(s),s.value){const v=await this._eval(r.right,e);return ba(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(ba(s),s.value)return s;{const v=await this._eval(r.right,e);return ba(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=cr;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r),d=await this._eval(e.index,r);if(qd(v))Le(d),v.value[d.value]=s;else if(Bp(v))Ts(d),v.value.set(d.value,s);else throw new Ur(`Cannot read prop (${Qf(d)}) of ${v.type}.`)}else if(e.type==="prop"){const v=await this._eval(e.target,r);ho(v),v.value.set(e.name,s)}else throw new Ur("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Ta([ms],Hn.prototype,"exec",null);Ta([ms],Hn.prototype,"execFn",null);Ta([ms],Hn.prototype,"execFnSimple",null);Ta([ms],Hn.prototype,"handleError",null);Ta([ms],Hn.prototype,"log",null);Ta([ms],Hn.prototype,"collectNs",null);Ta([ms],Hn.prototype,"collectNsMember",null);Ta([ms],Hn.prototype,"_fn",null);Ta([ms],Hn.prototype,"_eval",null);Ta([ms],Hn.prototype,"_run",null);Ta([ms],Hn.prototype,"registerAbortHandler",null);Ta([ms],Hn.prototype,"unregisterAbortHandler",null);Ta([ms],Hn.prototype,"abort",null);Ta([ms],Hn.prototype,"assign",null);Ta([ms],Hn,"collectMetadata",null);function B2(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function ff(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,ff.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}B2(ff,Error);function Lp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}ff.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=Lp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+Lp("",v.column-1," ")+Lp("",B,"^")}else r+=`
 at `+C}return r};ff.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function zd(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:cn,Main:es},d=cn,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",G="if",ee="elif",fe="else",Ce="match",ve="=>",Ae="eval",Re="exists",Me="`",Se='"',$e="'",it='\\"',qe="\\'",Ye="true",Qe="false",ot="null",Pt=";",xt="@",Ut="@(",yt=`\r
`,lt=/^[A-Z0-9_:]/i,vr=/^[^`{]/,cs=/^[{}`]/,is=/^[+\-]/,Ct=/^[1-9]/,Rt=/^[0-9]/,Mn=/^[A-Z_]/i,gr=/^[A-Z0-9_]/i,el=/^[\r\n]/,tl=/^[ \t\r\n]/,lr=/^[ \t]/,Bt=Us(),Qr=de("//",!1),qn=de("/*",!1),kt=de("*/",!1),ft=de("(",!1),Sr=de(")",!1),Gt=de("::",!1),st=de("{",!1),Lt=de("}",!1),bs=de("###",!1),Ht=de("let",!1),qt=de(":",!1),Xr=de("=",!1),Da=de("var",!1),Tr=de("<:",!1),hs=de("#[",!1),Ns=de("]",!1),ct=de("each",!1),Ot=de(",",!1),Xs=de("for",!1),Nr=de("return",!1),Fr=tr([["A","Z"],["0","9"],"_",":"],!1,!0),rl=de("loop",!1),Ua=de("break",!1),sl=de("continue",!1),nl=de("+=",!1),Ba=de("-=",!1),La=de("\\",!1),al=de("||",!1),il=de("&&",!1),ll=de("==",!1),ul=de("!=",!1),Vn=de("<=",!1),Ys=de(">=",!1),zn=de("<",!1),Ha=de(">",!1),ol=de("+",!1),qa=de("-",!1),Fs=de("*",!1),fl=de("^",!1),cl=de("/",!1),hl=de("%",!1),As=de("!",!1),Os=de("[",!1),Kn=de(".",!1),en=de("if",!1),tn=de("elif",!1),pl=de("else",!1),rn=de("match",!1),ps=de("=>",!1),Is=de("eval",!1),Ar=de("exists",!1),sn=de("`",!1),nn=tr(["`","{"],!0,!1),an=tr(["{","}","`"],!1,!1),vs=de('"',!1),ln=de("'",!1),Rs=de('\\"',!1),Va=de("\\'",!1),er=tr(["+","-"],!1,!1),za=tr([["1","9"]],!1,!1),dr=tr([["0","9"]],!1,!1),vl=de("true",!1),un=de("false",!1),gl=de("null",!1),js=de(";",!1),dl=de("@",!1),Wn=de("@(",!1),yl=tr([["A","Z"],"_"],!1,!0),Ka=tr([["A","Z"],["0","9"],"_"],!1,!0),wl=de(`\r
`,!1),ml=tr(["\r",`
`],!1,!1),Wa=tr([" ","	","\r",`
`],!1,!1),$l=tr([" ","	"],!1,!1),Ga=function(n){return n.join("")},xl=function(){return ue()},Ja=function(){return ue()},bl=function(){return""},Za=function(){return""},Al=function(n){return n??[]},Gn=function(n,u){return u},Cl=function(n,u){return[n,...u]},Jn=function(n,u){return u},_l=function(n,u){return[n,...u]},Qa=function(n,u){return u},Pl=function(n,u){return[n,...u]},kl=function(n){return n},El=function(n,u){return p("ns",{name:n,members:u})},Ml=function(n,u){return p("meta",{name:n,value:u})},Sl=function(n){return p("meta",{name:null,value:n})},Tl=function(n,u,y){return p("def",{name:n,varType:u,expr:y,mut:!1,attr:[]})},Nl=function(n,u,y){return p("def",{name:n,varType:u,expr:y,mut:!0,attr:[]})},Fl=function(n){return p("identifier",{name:"print",chain:[p("callChain",{args:[n]})]})},Ol=function(n,u){return p("attr",{name:n,value:u??p("bool",{value:!0})})},Il=function(n,u,y){return p("each",{var:n,items:u,for:y})},Rl=function(n,u,y){return p("each",{var:n,items:u,for:y})},jl=function(n,u){return u},Dl=function(n,u,y,h){return p("for",{var:n,from:u??p("num",{value:0}),to:y,for:h})},Ul=function(n,u){return u},Xa=function(n,u,y,h){return p("for",{var:n,from:u??p("num",{value:0}),to:y,for:h})},Bl=function(n,u){return p("for",{times:n,for:u})},Ll=function(n,u){return p("for",{times:n,for:u})},Hl=function(n){return p("return",{expr:n})},ql=function(n){return p("loop",{statements:n})},Vl=function(){return p("break",{})},Zn=function(){return p("continue",{})},zl=function(n,u,y){return u==="+="?p("addAssign",{dest:n,expr:y}):u==="-="?p("subAssign",{dest:n,expr:y}):p("assign",{dest:n,expr:y})},Ya=function(n,u,y){return{op:u,term:y}},Kl=function(n,u){return p("infix",{operands:[n,...u.map(y=>y.term)],operators:u.map(y=>y.op)})},Wl=function(){return ue()},Gl=function(n){return p("not",{expr:n})},ei=function(n,u){return{...n,chain:u}},Jl=function(n){return p("callChain",{args:n??[]})},Qn=function(n,u){return u},Zl=function(n,u){return[n,...u]},Ql=function(n){return p("indexChain",{index:n})},Xl=function(n){return p("propChain",{name:n})},Yl=function(n,u,y,h){return p("if",{cond:n,then:u,elseif:y??[],else:h})},eu=function(n,u){return[n,...u]},ti=function(n,u){return{cond:n,then:u}},ri=function(n){return n},si=function(n,u,y){return{q:u,a:y}},ni=function(n,u,y){return p("match",{about:n,qs:u??[],default:y})},tu=function(n){return p("block",{statements:n})},ru=function(n){return p("exists",{identifier:n})},ai=function(n){return p("identifier",{name:n})},su=function(n){return p("tmpl",{tmpl:n})},ii=function(n){return n.join("")},li=function(n){return n},nu=function(n){return p("str",{value:n.join("")})},ui=function(n){return n},au=function(n){return p("str",{value:n.join("")})},iu=function(){return'"'},oi=function(){return"'"},lu=function(){return p("num",{value:parseFloat(ue())})},fi=function(){return p("num",{value:parseFloat(ue())})},uu=function(){return p("num",{value:parseInt(ue(),10)})},ou=function(){return p("num",{value:parseInt(ue(),10)})},ci=function(){return p("bool",{value:!0})},fu=function(){return p("bool",{value:!1})},hi=function(){return p("null",{})},Xn=function(n,u){return{k:n,v:u}},cu=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return p("obj",{value:u})},Yn=function(n){return n},hu=function(n){return p("arr",{value:n})},pu=function(n,u){return{name:n,argType:u}},pi=function(n,u){return[n,...u]},vu=function(n,u,y,h,x,m){return(n.length>0||y.length>0)&&du("Cannot use spaces before or after the function name."),p("def",{name:u,expr:p("fn",{args:h??[],retType:x},m??[]),mut:!1,attr:[]})},vi=function(n,u,y){return p("fn",{args:n??[],retType:u},y??[])},gi=function(n){return n},gu=function(n){return p("arr",{value:n})},di=function(n,u){return{k:n,v:u}},c=function(n){const u=new Map;for(const y of n)u.set(y.k,y.v);return p("obj",{value:u})},te=function(n,u){return p("fnTypeSource",{args:n??[],result:u})},Cs=function(n,u){return[n,...u]},yr=function(n,u){return p("namedTypeSource",{name:n,inner:u})},on=function(n){return p("namedTypeSource",{name:n,inner:null})},i=function(){return ue()},T=function(){return ue()},Yr=function(n){return p("block",{statements:n??[]})},o=0,X=0,O=[{line:1,column:1}],R=0,_t=[],F=0,V={},Ds;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function ue(){return t.substring(X,o)}function D(){return fn(X,o)}function du(n,u){throw u=u!==void 0?u:fn(X,o),_s(n,u)}function de(n,u){return{type:"literal",text:n,ignoreCase:u}}function tr(n,u,y){return{type:"class",parts:n,inverted:u,ignoreCase:y}}function Us(){return{type:"any"}}function U(){return{type:"end"}}function yi(n){var u=O[n],y;if(u)return u;for(y=n-1;!O[y];)y--;for(u=O[y],u={line:u.line,column:u.column};y<n;)t.charCodeAt(y)===10?(u.line++,u.column=1):u.column++,y++;return O[n]=u,u}function fn(n,u,y){var h=yi(n),x=yi(u),m={source:s,start:{offset:n,line:h.line,column:h.column},end:{offset:u,line:x.line,column:x.column}};return m}function j(n){o<R||(o>R&&(R=o,_t=[]),_t.push(n))}function _s(n,u){return new ff(n,null,null,u)}function ea(n,u,y){return new ff(ff.buildMessage(n,u),n,u,y)}function cn(){var n,u,y,h=o*77+0,x=V[h];if(x)return o=x.nextPos,x.result;for(n=o,u=[],y=Ps();y!==e;)u.push(y),y=Ps();return X=n,u=Ga(u),n=u,V[h]={nextPos:o,result:n},n}function Ps(){var n,u,y=o*77+1,h=V[y];return h?(o=h.nextPos,h.result):(n=o,u=gn(),u!==e&&(X=n,u=xl()),n=u,n===e&&(n=o,u=oa(),u!==e&&(X=n,u=Ja()),n=u,n===e&&(n=et(),n===e&&(t.length>o?(n=t.charAt(o),o++):(n=e,F===0&&j(Bt))))),V[y]={nextPos:o,result:n},n)}function et(){var n,u,y,h,x,m,_=o*77+2,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.substr(o,2)===C?(u=C,o+=2):(u=e,F===0&&j(Qr)),u!==e){for(y=[],h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,m=a(),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=n,n=bl()}else o=n,n=e;if(n===e)if(n=o,t.substr(o,2)===P?(u=P,o+=2):(u=e,F===0&&j(qn)),u!==e){for(y=[],h=o,x=o,F++,t.substr(o,2)===E?(m=E,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.substr(o,2)===E?(m=E,o+=2):(m=e,F===0&&j(kt)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt)),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);t.substr(o,2)===E?(h=E,o+=2):(h=e,F===0&&j(kt)),h!==e?(X=n,n=Za()):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function es(){var n,u,y,h,x,m=o*77+3,_=V[m];if(_)return o=_.nextPos,_.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();for(y=hn(),y===e&&(y=null),h=[],x=l();x!==e;)h.push(x),x=l();return X=n,n=Al(y),V[m]={nextPos:o,result:n},n}function hn(){var n,u,y,h,x,m,_,A,M=o*77+4,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=Xe(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=Xe(),A!==e?(X=h,h=Gn(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=Cl(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Or(){var n,u,y,h,x,m,_,A,M=o*77+5,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=gs(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=gs(),A!==e?(X=h,h=Jn(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=_l(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Cr(){var n,u,y,h,x,m,_,A,M=o*77+6,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=ks(),u!==e){for(y=[],h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e;for(;h!==e;){for(y.push(h),h=o,x=[],m=$();m!==e;)x.push(m),m=$();if(m=w(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=ks(),A!==e?(X=h,h=Qa(u,A)):(o=h,h=e)}else o=h,h=e}X=n,n=Pl(u,y)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function Xe(){var n,u=o*77+7,y=V[u];return y?(o=y.nextPos,y.result):(n=mi(),n===e&&(n=yu(),n===e&&(n=ks())),V[u]={nextPos:o,result:n},n)}function gs(){var n,u=o*77+8,y=V[u];return y?(o=y.nextPos,y.result):(n=$i(),n===e&&(n=tt(),n===e&&(n=mi())),V[u]={nextPos:o,result:n},n)}function ks(){var n,u=o*77+9,y=V[u];return y?(o=y.nextPos,y.result):(n=$i(),n===e&&(n=tt(),n===e&&(n=wu(),n===e&&(n=$u(),n===e&&(n=mu(),n===e&&(n=rs(),n===e&&(n=xi(),n===e&&(n=xu(),n===e&&(n=bi(),n===e&&(n=ss(),n===e&&(n=ta(),n===e&&(n=We()))))))))))),V[u]={nextPos:o,result:n},n)}function We(){var n,u=o*77+10,y=V[u];return y?(o=y.nextPos,y.result):(n=Ai(),n===e&&(n=Bs()),V[u]={nextPos:o,result:n},n)}function Bs(){var n,u=o*77+11,y=V[u];return y?(o=y.nextPos,y.result):(n=Pi(),n===e&&(n=Pu(),n===e&&(n=Ci(),n===e&&(n=wi()))),V[u]={nextPos:o,result:n},n)}function wi(){var n,u,y,h,x,m,_=o*77+12,A=V[_];if(A)return o=A.nextPos,A.result;if(n=vn(),n===e&&(n=aa(),n===e&&(n=ia(),n===e&&(n=gn(),n===e&&(n=oa(),n===e&&(n=Mi(),n===e&&(n=va(),n===e&&(n=da(),n===e&&(n=wr(),n===e&&(n=_u(),n===e&&(n=sa(),n===e&&(n=la(),n===e))))))))))))if(n=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e?(X=n,n=kl(h)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function ts(){var n,u=o*77+13,y=V[u];return y?(o=y.nextPos,y.result):(n=Mi(),n===e&&(n=oa(),n===e&&(n=va(),n===e&&(n=Es(),n===e&&(n=ur(),n===e&&(n=da()))))),V[u]={nextPos:o,result:n},n)}function mi(){var n,u,y,h,x,m,_,A,M,I,H=o*77+14,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===B?(u=B,o+=2):(u=e,F===0&&j(Gt)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(t.charCodeAt(o)===123?(m=L,o++):(m=e,F===0&&j(st)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Or(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();t.charCodeAt(o)===125?(I=Z,o++):(I=e,F===0&&j(Lt)),I!==e?(X=n,n=El(h,A)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function yu(){var n,u,y,h,x,m,_=o*77+15,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=ts(),m!==e?(X=n,n=Ml(h,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ge?(u=ge,o+=3):(u=e,F===0&&j(bs)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();h=ts(),h!==e?(X=n,n=Sl(h)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function $i(){var n,u,y,h,x,m,_,A,M,I=o*77+16,H=V[I];if(H)return o=H.nextPos,H.result;if(n=o,t.substr(o,3)===le?(u=le,o+=3):(u=e,F===0&&j(Ht)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ge(),M!==e?x=M:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?(X=n,n=Tl(h,x,M)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===J?(u=J,o+=3):(u=e,F===0&&j(Da)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===58?(_=pe,o++):(_=e,F===0&&j(qt)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=Ge(),M!==e?x=M:(o=x,x=e)}else o=x,x=e;for(x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===61?(_=be,o++):(_=e,F===0&&j(Xr)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();M=We(),M!==e?(X=n,n=Nl(h,x,M)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[I]={nextPos:o,result:n},n}function wu(){var n,u,y,h,x=o*77+17,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,2)===K?(u=K,o+=2):(u=e,F===0&&j(Tr)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();h=We(),h!==e?(X=n,n=Fl(h)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function mu(){var n,u,y,h,x,m,_,A=o*77+18,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,t.substr(o,2)===W?(u=W,o+=2):(u=e,F===0&&j(hs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=ne(),h!==e){for(x=o,m=[],_=l();_!==e;)m.push(_),_=l();for(_=ts(),_!==e?x=_:(o=x,x=e),x===e&&(x=null),m=[],_=l();_!==e;)m.push(_),_=l();t.charCodeAt(o)===93?(_=Q,o++):(_=e,F===0&&j(Ns)),_!==e?(X=n,n=Ol(h,x)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[A]={nextPos:o,result:n},n}function rs(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+19,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===le?(x=le,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();for(t.charCodeAt(o)===44?(M=Y,o++):(M=e,F===0&&j(Ot)),M===e&&(M=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e)if(t.charCodeAt(o)===41?(z=S,o++):(z=e,F===0&&j(Sr)),z!==e){for(se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();Fe=b(),Fe!==e?(X=n,n=Il(_,H,Fe)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,4)===re?(u=re,o+=4):(u=e,F===0&&j(ct)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===le?(h=le,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(I=We(),I!==e){if(H=[],z=l(),z!==e)for(;z!==e;)H.push(z),z=l();else H=e;H!==e?(z=b(),z!==e?(X=n,n=Rl(m,I,z)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function xi(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt=o*77+20,dt=V[gt];if(dt)return o=dt.nextPos,dt.result;if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(t.substr(o,3)===le?(x=le,o+=3):(x=e,F===0&&j(Ht)),x!==e){if(m=[],_=l(),_!==e)for(;_!==e;)m.push(_),_=l();else m=e;if(m!==e)if(_=ne(),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=o,t.charCodeAt(o)===61?(I=be,o++):(I=e,F===0&&j(Xr)),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();z=We(),z!==e?(X=M,M=jl(_,z)):(o=M,M=e)}else o=M,M=e;for(M===e&&(M=null),t.charCodeAt(o)===44?(I=Y,o++):(I=e,F===0&&j(Ot)),I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();if(z=We(),z!==e)if(t.charCodeAt(o)===41?(se=S,o++):(se=e,F===0&&j(Sr)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=b(),ye!==e?(X=n,n=Dl(_,M,z,ye)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(t.substr(o,3)===le?(h=le,o+=3):(h=e,F===0&&j(Ht)),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(A=o,t.charCodeAt(o)===61?(M=be,o++):(M=e,F===0&&j(Xr)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=We(),H!==e?(X=A,A=Ul(m,H)):(o=A,A=e)}else o=A,A=e;for(A===e&&(A=null),t.charCodeAt(o)===44?(M=Y,o++):(M=e,F===0&&j(Ot)),M===e&&(M=null),I=[],H=l();H!==e;)I.push(H),H=l();if(H=We(),H!==e){if(z=[],se=l(),se!==e)for(;se!==e;)z.push(se),se=l();else z=e;z!==e?(se=b(),se!==e?(X=n,n=Xa(m,A,H,se)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===40?(h=N,o++):(h=e,F===0&&j(ft)),h!==e)if(x=We(),x!==e)if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();A=b(),A!==e?(X=n,n=Bl(x,A)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,t.substr(o,3)===ie?(u=ie,o+=3):(u=e,F===0&&j(Xs)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;x!==e?(m=b(),m!==e?(X=n,n=Ll(h,m)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e}}return V[gt]={nextPos:o,result:n},n}function $u(){var n,u,y,h,x,m=o*77+21,_=V[m];if(_)return o=_.nextPos,_.result;if(n=o,t.substr(o,6)===ae?(u=ae,o+=6):(u=e,F===0&&j(Nr)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=We(),x!==e?(X=n,n=Hl(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[m]={nextPos:o,result:n},n}function xu(){var n,u,y,h,x,m,_,A,M=o*77+22,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Te?(u=Te,o+=4):(u=e,F===0&&j(rl)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=Z,o++):(A=e,F===0&&j(Lt)),A!==e?(X=n,n=ql(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function bi(){var n,u,y,h,x=o*77+23,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===Ie?(u=Ie,o+=5):(u=e,F===0&&j(Ua)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=Vl()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ss(){var n,u,y,h,x=o*77+24,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,8)===ke?(u=ke,o+=8):(u=e,F===0&&j(sl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=Zn()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ta(){var n,u,y,h,x,m,_=o*77+25,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=We(),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.substr(o,2)===at?(h=at,o+=2):(h=e,F===0&&j(nl)),h===e&&(t.substr(o,2)===vt?(h=vt,o+=2):(h=e,F===0&&j(Ba)),h===e&&(t.charCodeAt(o)===61?(h=be,o++):(h=e,F===0&&j(Xr)))),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();m=We(),m!==e?(X=n,n=zl(u,h,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function Ai(){var n,u,y,h,x,m,_,A,M=o*77+26,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=Bs(),u!==e){for(y=[],h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Bs(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e;if(h!==e)for(;h!==e;){for(y.push(h),h=o,x=[],m=ns();m!==e;)x.push(m),m=ns();if(m=ra(),m!==e){for(_=[],A=ns();A!==e;)_.push(A),A=ns();A=Bs(),A!==e?(X=h,h=Ya(u,m,A)):(o=h,h=e)}else o=h,h=e}else y=e;y!==e?(X=n,n=Kl(u,y)):(o=n,n=e)}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function ns(){var n,u,y,h=o*77+27,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(y=w(),y!==e?(u=[u,y],n=u):(o=n,n=e)):(o=n,n=e),n===e&&(n=$()),V[h]={nextPos:o,result:n},n)}function ra(){var n,u,y=o*77+28,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===At?(u=At,o+=2):(u=e,F===0&&j(al)),u===e&&(t.substr(o,2)===mt?(u=mt,o+=2):(u=e,F===0&&j(il)),u===e&&(t.substr(o,2)===Ze?(u=Ze,o+=2):(u=e,F===0&&j(ll)),u===e&&(t.substr(o,2)===$t?(u=$t,o+=2):(u=e,F===0&&j(ul)),u===e&&(t.substr(o,2)===Qt?(u=Qt,o+=2):(u=e,F===0&&j(Vn)),u===e&&(t.substr(o,2)===Xt?(u=Xt,o+=2):(u=e,F===0&&j(Ys)),u===e&&(t.charCodeAt(o)===60?(u=pt,o++):(u=e,F===0&&j(zn)),u===e&&(t.charCodeAt(o)===62?(u=Lr,o++):(u=e,F===0&&j(Ha)),u===e&&(t.charCodeAt(o)===43?(u=Yt,o++):(u=e,F===0&&j(ol)),u===e&&(t.charCodeAt(o)===45?(u=Mr,o++):(u=e,F===0&&j(qa)),u===e&&(t.charCodeAt(o)===42?(u=ir,o++):(u=e,F===0&&j(Fs)),u===e&&(t.charCodeAt(o)===94?(u=_r,o++):(u=e,F===0&&j(fl)),u===e&&(t.charCodeAt(o)===47?(u=Jr,o++):(u=e,F===0&&j(cl)),u===e&&(t.charCodeAt(o)===37?(u=nr,o++):(u=e,F===0&&j(hl))))))))))))))),u!==e&&(X=n,u=Wl()),n=u,V[y]={nextPos:o,result:n},n)}function sa(){var n,u,y,h=o*77+29,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===33?(u=Zr,o++):(u=e,F===0&&j(As)),u!==e?(y=We(),y!==e?(X=n,n=Gl(y)):(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function Ci(){var n,u,y,h,x=o*77+30,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,u=wi(),u!==e){if(y=[],h=na(),h===e&&(h=_i(),h===e&&(h=Ls())),h!==e)for(;h!==e;)y.push(h),h=na(),h===e&&(h=_i(),h===e&&(h=Ls()));else y=e;y!==e?(X=n,n=ei(u,y)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function na(){var n,u,y,h,x,m,_=o*77+31,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===40?(u=N,o++):(u=e,F===0&&j(ft)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=bu(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e?(X=n,n=Jl(h)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function bu(){var n,u,y,h,x,m,_=o*77+32,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=We(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=We(),m!==e?(X=h,h=Qn(u,m)):(o=h,h=e)):(o=h,h=e);X=n,n=Zl(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function _i(){var n,u,y,h,x,m,_=o*77+33,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=We(),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=Ql(h)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function Ls(){var n,u,y,h=o*77+34,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===46?(u=Pr,o++):(u=e,F===0&&j(Kn)),u!==e?(y=ne(),y!==e?(X=n,n=Xl(y)):(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function Pi(){var n,u,y,h,x,m,_,A,M,I,H=o*77+35,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===G?(u=G,o+=2):(u=e,F===0&&j(en)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;if(y!==e)if(h=We(),h!==e){if(x=[],m=l(),m!==e)for(;m!==e;)x.push(m),m=l();else x=e;if(x!==e)if(m=b(),m!==e){if(_=o,A=[],M=l(),M!==e)for(;M!==e;)A.push(M),M=l();else A=e;if(A!==e?(M=ki(),M!==e?_=M:(o=_,_=e)):(o=_,_=e),_===e&&(_=null),A=o,M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;M!==e?(I=Au(),I!==e?A=I:(o=A,A=e)):(o=A,A=e),A===e&&(A=null),X=n,n=Yl(h,m,_,A)}else o=n,n=e;else o=n,n=e}else o=n,n=e;else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ki(){var n,u,y,h,x,m,_=o*77+36,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=pn(),u!==e){for(y=[],h=o,x=[],m=l();m!==e;)x.push(m),m=l();for(m=pn(),m!==e?h=m:(o=h,h=e);h!==e;){for(y.push(h),h=o,x=[],m=l();m!==e;)x.push(m),m=l();m=pn(),m!==e?h=m:(o=h,h=e)}X=n,n=eu(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function pn(){var n,u,y,h,x,m,_,A=o*77+37,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,t.substr(o,4)===ee?(u=ee,o+=4):(u=e,F===0&&j(tn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=b(),_!==e?(X=n,n=ti(x,_)):(o=n,n=e)}else o=n,n=e}else o=n,n=e;else o=n,n=e;return V[A]={nextPos:o,result:n},n}function Au(){var n,u,y,h,x,m=o*77+38,_=V[m];if(_)return o=_.nextPos,_.result;if(n=o,t.substr(o,4)===fe?(u=fe,o+=4):(u=e,F===0&&j(pl)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();x=b(),x!==e?(X=n,n=ri(x)):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[m]={nextPos:o,result:n},n}function vn(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt,dt,ku=o*77+39,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(n=o,t.substr(o,5)===Ce?(u=Ce,o+=5):(u=e,F===0&&j(rn)),u!==e)if(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();if(x=We(),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();if(t.charCodeAt(o)===123?(_=L,o++):(_=e,F===0&&j(st)),_!==e){for(A=[],M=l();M!==e;)A.push(M),M=l();if(M=[],I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;if(I!==e)for(;I!==e;)if(M.push(I),I=o,H=We(),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();X=I,I=si(x,H,ye)}else o=I,I=e}else o=I,I=e}else o=I,I=e;else M=e;if(M!==e){if(I=o,t.charCodeAt(o)===42?(H=ir,o++):(H=e,F===0&&j(Fs)),H!==e){for(z=[],se=l();se!==e;)z.push(se),se=l();if(t.substr(o,2)===ve?(se=ve,o+=2):(se=e,F===0&&j(ps)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();if(ye=b(),ye!==e){for(gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();I=ye}else o=I,I=e}else o=I,I=e}else o=I,I=e;for(I===e&&(I=null),H=[],z=l();z!==e;)H.push(z),z=l();t.charCodeAt(o)===125?(z=Z,o++):(z=e,F===0&&j(Lt)),z!==e?(X=n,n=ni(x,M,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;else o=n,n=e;return V[ku]={nextPos:o,result:n},n}function aa(){var n,u,y,h,x,m,_,A,M=o*77+40,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,t.substr(o,4)===Ae?(u=Ae,o+=4):(u=e,F===0&&j(Is)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(t.charCodeAt(o)===123?(h=L,o++):(h=e,F===0&&j(st)),h!==e){for(x=[],m=l();m!==e;)x.push(m),m=l();if(m=Cr(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();t.charCodeAt(o)===125?(A=Z,o++):(A=e,F===0&&j(Lt)),A!==e?(X=n,n=tu(m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[M]={nextPos:o,result:n},n}function ia(){var n,u,y,h,x=o*77+41,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,t.substr(o,6)===Re?(u=Re,o+=6):(u=e,F===0&&j(Ar)),u!==e){if(y=[],h=l(),h!==e)for(;h!==e;)y.push(h),h=l();else y=e;y!==e?(h=la(),h!==e?(X=n,n=ru(h)):(o=n,n=e)):(o=n,n=e)}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function la(){var n,u,y=o*77+42,h=V[y];return h?(o=h.nextPos,h.result):(n=o,u=f(),u!==e&&(X=n,u=ai(u)),n=u,V[y]={nextPos:o,result:n},n)}function gn(){var n,u,y,h,x,m,_=o*77+43,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===96?(u=Me,o++):(u=e,F===0&&j(sn)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===96?(m=Me,o++):(m=e,F===0&&j(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===96?(m=Me,o++):(m=e,F===0&&j(sn)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ua(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===96?(h=Me,o++):(h=e,F===0&&j(sn)),h!==e?(X=n,n=su(y)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function ua(){var n,u,y,h,x,m,_=o*77+44,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=We(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();t.charCodeAt(o)===125?(m=Z,o++):(m=e,F===0&&j(Lt)),m!==e?n=h:(o=n,n=e)}else o=n,n=e}else o=n,n=e;if(n===e){if(n=o,u=[],y=dn(),y!==e)for(;y!==e;)u.push(y),y=dn();else u=e;u!==e&&(X=n,u=ii(u)),n=u}return V[_]={nextPos:o,result:n},n}function dn(){var n,u=o*77+45,y=V[u];return y?(o=y.nextPos,y.result):(n=Ei(),n===e&&(vr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(nn))),V[u]={nextPos:o,result:n},n)}function Ei(){var n,u,y,h=o*77+46,x=V[h];return x?(o=x.nextPos,x.result):(n=o,t.charCodeAt(o)===92?(u=sr,o++):(u=e,F===0&&j(La)),u!==e?(cs.test(t.charAt(o))?(y=t.charAt(o),o++):(y=e,F===0&&j(an)),y!==e?n=y:(o=n,n=e)):(o=n,n=e),V[h]={nextPos:o,result:n},n)}function oa(){var n,u,y,h,x,m,_=o*77+47,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===34?(u=Se,o++):(u=e,F===0&&j(vs)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===34?(m=Se,o++):(m=e,F===0&&j(vs)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=fa(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=li(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===34?(h=Se,o++):(h=e,F===0&&j(vs)),h!==e?(X=n,n=nu(y)):(o=n,n=e)}else o=n,n=e;if(n===e)if(n=o,t.charCodeAt(o)===39?(u=$e,o++):(u=e,F===0&&j(ln)),u!==e){for(y=[],h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(ln)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=o,F++,t.charCodeAt(o)===39?(m=$e,o++):(m=e,F===0&&j(ln)),F--,m===e?x=void 0:(o=x,x=e),x!==e?(m=ca(),m===e&&(t.length>o?(m=t.charAt(o),o++):(m=e,F===0&&j(Bt))),m!==e?(X=h,h=ui(m)):(o=h,h=e)):(o=h,h=e);t.charCodeAt(o)===39?(h=$e,o++):(h=e,F===0&&j(ln)),h!==e?(X=n,n=au(y)):(o=n,n=e)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function fa(){var n,u,y=o*77+48,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===it?(u=it,o+=2):(u=e,F===0&&j(Rs)),u!==e&&(X=n,u=iu()),n=u,V[y]={nextPos:o,result:n},n)}function ca(){var n,u,y=o*77+49,h=V[y];return h?(o=h.nextPos,h.result):(n=o,t.substr(o,2)===qe?(u=qe,o+=2):(u=e,F===0&&j(Va)),u!==e&&(X=n,u=oi()),n=u,V[y]={nextPos:o,result:n},n)}function Mi(){var n,u=o*77+50,y=V[u];return y?(o=y.nextPos,y.result):(n=ha(),n===e&&(n=pa()),V[u]={nextPos:o,result:n},n)}function ha(){var n,u,y,h,x,m,_=o*77+51,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;if(y!==e)if(t.charCodeAt(o)===46?(h=Pr,o++):(h=e,F===0&&j(Kn)),h!==e){if(x=[],Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr)),m!==e)for(;m!==e;)x.push(m),Rt.test(t.charAt(o))?(m=t.charAt(o),o++):(m=e,F===0&&j(dr));else x=e;x!==e?(X=n,n=lu()):(o=n,n=e)}else o=n,n=e;else o=n,n=e}else o=n,n=e;if(n===e)if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e)if(t.charCodeAt(o)===46?(y=Pr,o++):(y=e,F===0&&j(Kn)),y!==e){if(h=[],Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr)),x!==e)for(;x!==e;)h.push(x),Rt.test(t.charAt(o))?(x=t.charAt(o),o++):(x=e,F===0&&j(dr));else h=e;h!==e?(X=n,n=fi()):(o=n,n=e)}else o=n,n=e;else o=n,n=e;return V[_]={nextPos:o,result:n},n}function pa(){var n,u,y,h,x=o*77+52,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Ct.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(za)),u!==e){if(y=[],Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr)),h!==e)for(;h!==e;)y.push(h),Rt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(dr));else y=e;y!==e?(X=n,n=uu()):(o=n,n=e)}else o=n,n=e;return n===e&&(n=o,is.test(t.charAt(o))?(t.charAt(o),o++):F===0&&j(er),Rt.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(dr)),u!==e?(X=n,n=ou()):(o=n,n=e)),V[x]={nextPos:o,result:n},n}function va(){var n,u=o*77+53,y=V[u];return y?(o=y.nextPos,y.result):(n=Cu(),n===e&&(n=ga()),V[u]={nextPos:o,result:n},n)}function Cu(){var n,u,y,h,x=o*77+54,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===Ye?(u=Ye,o+=4):(u=e,F===0&&j(vl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=ci()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function ga(){var n,u,y,h,x=o*77+55,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,5)===Qe?(u=Qe,o+=5):(u=e,F===0&&j(un)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=fu()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function da(){var n,u,y,h,x=o*77+56,m=V[x];return m?(o=m.nextPos,m.result):(n=o,t.substr(o,4)===ot?(u=ot,o+=4):(u=e,F===0&&j(gl)),u!==e?(y=o,F++,lt.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Fr)),F--,h===e?y=void 0:(o=y,y=e),y!==e?(X=n,n=hi()):(o=n,n=e)):(o=n,n=e),V[x]={nextPos:o,result:n},n)}function wr(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+57,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=We(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=Xn(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=Z,o++):(x=e,F===0&&j(Lt)),x!==e?(X=n,n=cu(h)):(o=n,n=e)}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function _u(){var n,u,y,h,x,m,_,A,M,I,H=o*77+58,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=We(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=Yn(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=hu(h)):(o=n,n=e)}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ya(){var n,u,y,h,x,m,_,A=o*77+59,M=V[A];if(M)return o=M.nextPos,M.result;if(n=o,u=ne(),u!==e){for(y=o,h=[],x=l();x!==e;)h.push(x),x=l();if(t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e){for(m=[],_=l();_!==e;)m.push(_),_=l();_=Ge(),_!==e?y=_:(o=y,y=e)}else o=y,y=e;y===e&&(y=null),X=n,n=pu(u,y)}else o=n,n=e;return V[A]={nextPos:o,result:n},n}function Si(){var n,u,y,h,x,m,_=o*77+60,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=ya(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=ya(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=n,n=pi(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function tt(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye,gt,dt,ku=o*77+61,wa=V[ku];if(wa)return o=wa.nextPos,wa.result;if(n=o,t.charCodeAt(o)===64?(u=xt,o++):(u=e,F===0&&j(dl)),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(h=ne(),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(t.charCodeAt(o)===40?(m=N,o++):(m=e,F===0&&j(ft)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(A=Si(),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();if(t.charCodeAt(o)===41?(I=S,o++):(I=e,F===0&&j(Sr)),I!==e){for(H=o,z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===58?(se=pe,o++):(se=e,F===0&&j(qt)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();ye=Ge(),ye!==e?H=ye:(o=H,H=e)}else o=H,H=e;for(H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();if(t.charCodeAt(o)===123?(se=L,o++):(se=e,F===0&&j(st)),se!==e){for(Fe=[],ye=l();ye!==e;)Fe.push(ye),ye=l();for(ye=Cr(),ye===e&&(ye=null),gt=[],dt=l();dt!==e;)gt.push(dt),dt=l();t.charCodeAt(o)===125?(dt=Z,o++):(dt=e,F===0&&j(Lt)),dt!==e?(X=n,n=vu(y,h,x,A,H,ye)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[ku]={nextPos:o,result:n},n}function Pu(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=o*77+62,ye=V[Fe];if(ye)return o=ye.nextPos,ye.result;if(n=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Si(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=o,A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(o)===58?(M=pe,o++):(M=e,F===0&&j(qt)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();H=Ge(),H!==e?_=H:(o=_,_=e)}else o=_,_=e;for(_===e&&(_=null),A=[],M=l();M!==e;)A.push(M),M=l();if(t.charCodeAt(o)===123?(M=L,o++):(M=e,F===0&&j(st)),M!==e){for(I=[],H=l();H!==e;)I.push(H),H=l();for(H=Cr(),H===e&&(H=null),z=[],se=l();se!==e;)z.push(se),se=l();t.charCodeAt(o)===125?(se=Z,o++):(se=e,F===0&&j(Lt)),se!==e?(X=n,n=vi(h,_,H)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[Fe]={nextPos:o,result:n},n}function Es(){var n,u,y,h,x,m,_,A,M,I,H=o*77+63,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.charCodeAt(o)===91?(u=ar,o++):(u=e,F===0&&j(Os)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ts(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();for(t.charCodeAt(o)===44?(A=Y,o++):(A=e,F===0&&j(Ot)),A===e&&(A=null),M=[],I=l();I!==e;)M.push(I),I=l();X=x,x=gi(m)}else o=x,x=e;for(x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===93?(m=Q,o++):(m=e,F===0&&j(Ns)),m!==e?(X=n,n=gu(h)):(o=n,n=e)}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function ur(){var n,u,y,h,x,m,_,A,M,I,H,z,se,Fe,ye=o*77+64,gt=V[ye];if(gt)return o=gt.nextPos,gt.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();if(h=[],x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;for(;x!==e;)if(h.push(x),x=o,m=ne(),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.charCodeAt(o)===58?(A=pe,o++):(A=e,F===0&&j(qt)),A!==e){if(M=[],I=l(),I!==e)for(;I!==e;)M.push(I),I=l();else M=e;if(M!==e)if(I=ts(),I!==e){for(H=[],z=l();z!==e;)H.push(z),z=l();for(t.charCodeAt(o)===44?(z=Y,o++):(z=e,F===0&&j(Ot)),z===e&&(t.charCodeAt(o)===59?(z=Pt,o++):(z=e,F===0&&j(js))),z===e&&(z=null),se=[],Fe=l();Fe!==e;)se.push(Fe),Fe=l();X=x,x=di(m,I)}else o=x,x=e;else o=x,x=e}else o=x,x=e}else o=x,x=e;t.charCodeAt(o)===125?(x=Z,o++):(x=e,F===0&&j(Lt)),x!==e?(X=n,n=c(h)):(o=n,n=e)}else o=n,n=e;return V[ye]={nextPos:o,result:n},n}function Ge(){var n,u=o*77+65,y=V[u];return y?(o=y.nextPos,y.result):(n=Ti(),n===e&&(n=De()),V[u]={nextPos:o,result:n},n)}function Ti(){var n,u,y,h,x,m,_,A,M,I,H=o*77+66,z=V[H];if(z)return o=z.nextPos,z.result;if(n=o,t.substr(o,2)===Ut?(u=Ut,o+=2):(u=e,F===0&&j(Wn)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=k(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();if(t.charCodeAt(o)===41?(m=S,o++):(m=e,F===0&&j(Sr)),m!==e){for(_=[],A=l();A!==e;)_.push(A),A=l();if(t.substr(o,2)===ve?(A=ve,o+=2):(A=e,F===0&&j(ps)),A!==e){for(M=[],I=l();I!==e;)M.push(I),I=l();I=Ge(),I!==e?(X=n,n=te(h,I)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return V[H]={nextPos:o,result:n},n}function k(){var n,u,y,h,x,m,_=o*77+67,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=Ge(),u!==e){for(y=[],h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,x=g(),x!==e?(m=Ge(),m!==e?h=m:(o=h,h=e)):(o=h,h=e);X=n,n=Cs(u,y)}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function De(){var n,u,y,h,x,m,_,A,M=o*77+68,I=V[M];if(I)return o=I.nextPos,I.result;if(n=o,u=ne(),u!==e){for(y=[],h=$();h!==e;)y.push(h),h=$();if(t.charCodeAt(o)===60?(h=pt,o++):(h=e,F===0&&j(zn)),h!==e){for(x=[],m=$();m!==e;)x.push(m),m=$();if(m=Ge(),m!==e){for(_=[],A=$();A!==e;)_.push(A),A=$();t.charCodeAt(o)===62?(A=Lr,o++):(A=e,F===0&&j(Ha)),A!==e?(X=n,n=yr(u,m)):(o=n,n=e)}else o=n,n=e}else o=n,n=e}else o=n,n=e;return n===e&&(n=o,u=ne(),u!==e&&(X=n,u=on(u)),n=u),V[M]={nextPos:o,result:n},n}function ne(){var n,u,y,h,x=o*77+69,m=V[x];if(m)return o=m.nextPos,m.result;if(n=o,Mn.test(t.charAt(o))?(u=t.charAt(o),o++):(u=e,F===0&&j(yl)),u!==e){for(y=[],gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));h!==e;)y.push(h),gr.test(t.charAt(o))?(h=t.charAt(o),o++):(h=e,F===0&&j(Ka));X=n,n=i()}else o=n,n=e;return V[x]={nextPos:o,result:n},n}function f(){var n,u,y,h,x,m,_=o*77+70,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,u=ne(),u!==e){for(y=[],h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);h!==e;)y.push(h),h=o,t.charCodeAt(o)===58?(x=pe,o++):(x=e,F===0&&j(qt)),x!==e?(m=ne(),m!==e?(x=[x,m],h=x):(o=h,h=e)):(o=h,h=e);X=n,n=T()}else o=n,n=e;return V[_]={nextPos:o,result:n},n}function g(){var n,u,y,h,x,m=o*77+71,_=V[m];if(_)return o=_.nextPos,_.result;for(n=o,u=[],y=l();y!==e;)u.push(y),y=l();if(t.charCodeAt(o)===44?(y=Y,o++):(y=e,F===0&&j(Ot)),y!==e){for(h=[],x=l();x!==e;)h.push(x),x=l();u=[u,y,h],n=u}else o=n,n=e;if(n===e)if(n=[],u=l(),u!==e)for(;u!==e;)n.push(u),u=l();else n=e;return V[m]={nextPos:o,result:n},n}function b(){var n,u,y,h,x,m,_=o*77+72,A=V[_];if(A)return o=A.nextPos,A.result;if(n=o,t.charCodeAt(o)===123?(u=L,o++):(u=e,F===0&&j(st)),u!==e){for(y=[],h=l();h!==e;)y.push(h),h=l();for(h=Cr(),h===e&&(h=null),x=[],m=l();m!==e;)x.push(m),m=l();t.charCodeAt(o)===125?(m=Z,o++):(m=e,F===0&&j(Lt)),m!==e?(X=n,n=Yr(h)):(o=n,n=e)}else o=n,n=e;return n===e&&(n=ks()),V[_]={nextPos:o,result:n},n}function w(){var n,u=o*77+73,y=V[u];return y?(o=y.nextPos,y.result):(t.substr(o,2)===yt?(n=yt,o+=2):(n=e,F===0&&j(wl)),n===e&&(el.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(ml))),V[u]={nextPos:o,result:n},n)}function a(){var n,u,y=o*77+74,h=V[y];return h?(o=h.nextPos,h.result):(n=o,F++,t.length>o?(u=t.charAt(o),o++):(u=e,F===0&&j(Bt)),F--,u===e?n=void 0:(o=n,n=e),n===e&&(n=w()),V[y]={nextPos:o,result:n},n)}function l(){var n,u=o*77+75,y=V[u];return y?(o=y.nextPos,y.result):(tl.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j(Wa)),V[u]={nextPos:o,result:n},n)}function $(){var n,u=o*77+76,y=V[u];return y?(o=y.nextPos,y.result):(lr.test(t.charAt(o))?(n=t.charAt(o),o++):(n=e,F===0&&j($l)),V[u]={nextPos:o,result:n},n)}function p(n,u,y){const h={type:n};u.children=y;for(const m of Object.keys(u))u[m]!==void 0&&(h[m]=u[m]);const x=D();return h.loc={start:x.start.offset,end:x.end.offset-1},h}if(Ds=d(),Ds!==e&&o===t.length)return Ds;throw Ds!==e&&o<t.length&&j(U()),ea(_t,R<t.length?t.charAt(R):null,R<t.length?fn(R,R+1):fn(R,R))}const L2=["infix","if","fn","match","block","exists","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function H2(t){return L2.includes(t.type)}function qw(t){return"chain"in t&&t.chain!==null}function q2(t,r,e){return{type:"call",target:t,args:r,loc:e}}function V2(t,r,e){return{type:"index",target:t,index:r,loc:e}}function z2(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Tt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Tt(e.expr,r);break}case"return":{e.expr=Tt(e.expr,r);break}case"each":{e.items=Tt(e.items,r),e.for=Tt(e.for,r);break}case"for":{e.from!=null&&(e.from=Tt(e.from,r)),e.to!=null&&(e.to=Tt(e.to,r)),e.times!=null&&(e.times=Tt(e.times,r)),e.for=Tt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Tt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Tt(e.expr,r),e.dest=Tt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Tt(e.operands[s],r);break}case"not":{e.expr=Tt(e.expr,r);break}case"if":{e.cond=Tt(e.cond,r),e.then=Tt(e.then,r);for(const s of e.elseif)s.cond=Tt(s.cond,r),s.then=Tt(s.then,r);e.else!=null&&(e.else=Tt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Tt(e.children[s],r);break}case"match":{e.about=Tt(e.about,r);for(const s of e.qs)s.q=Tt(s.q,r),s.a=Tt(s.a,r);e.default!=null&&(e.default=Tt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Tt(e.statements[s],r);break}case"exists":{e.identifier=Tt(e.identifier,r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=Tt(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Tt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Tt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Tt(e.args[s],r);break}case"indexChain":{e.index=Tt(e.index,r);break}case"call":{e.target=Tt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Tt(e.args[s],r);break}case"index":{e.target=Tt(e.target,r),e.index=Tt(e.index,r);break}case"prop":{e.target=Tt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Tt(e.members[s],r);break}case"or":case"and":{e.left=Tt(e.left,r),e.right=Tt(e.right,r);break}}if(qw(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Tt(e.chain[s],r);return e}const Hp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","exists","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function qp(t){throw new wf(`Reserved word "${t}" cannot be used as variable name.`)}function K2(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Hp.includes(t.name)&&qp(t.name);break}case"meta":{t.name!=null&&Hp.includes(t.name)&&qp(t.name);break}case"fn":{for(const r of t.args)Hp.includes(r.name)&&qp(r.name);break}}return t}function W2(t){for(const r of t)Tt(r,K2);return t}function Kd(t){return{type:"simple",name:t}}function G2(t,r){return{type:"generic",name:t,inners:r}}function J2(t,r){return{type:"fn",args:t,result:r}}function $h(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=$h(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>$h(s)).join(", "),e=$h(t.result);return`@(${r}) { ${e} }`}}}function Xf(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Kd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=Xf(t.inner):r=Kd("any"),G2(t.name,[r])}}throw new wf(`Unknown type: '${$h(t)}'`)}else{const r=t.args.map(e=>Xf(e));return J2(r,Xf(t.result))}}function Z2(t){switch(t.type){case"def":{t.varType!=null&&Xf(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&Xf(r.argType);t.retType!=null&&Xf(t.retType);break}}return t}function Q2(t){for(const r of t)Tt(r,Z2);return t}function xh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=xh(s.expr.children)),r.push(s);else{if(e.length>0)throw new wf("invalid attribute.");switch(s.type){case"fn":{s.children=xh(s.children);break}case"block":{s.statements=xh(s.statements);break}}r.push(s)}if(e.length>0)throw new wf("invalid attribute.");return r}function X2(t){if(H2(t)&&qw(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=q2(s,v.args,v.loc);break}case"indexChain":{s=V2(s,v.index,v.loc);break}case"propChain":{s=z2(s,v.name,v.loc);break}}return s}return t}function Y2(t){for(let r=0;r<t.length;r++)t[r]=Tt(t[r],X2);return t}function bh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Vw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return bh(t,r,e);{const{left:s,right:v,info:d}=t;return bh(s,Vw(v,r,e),d)}}function Zo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Zo(t.left),Zo(t.right)]}}const eC={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Zo(t.left),right:Zo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Zo(t.left),right:Zo(t.right)}),priority:3}};function tC(t){const r=t.operators.map(s=>{const v=eC[s];if(v==null)throw new wf(`No such operator: ${s}.`);return v});let e=bh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=Vw(e,t.operands[2+s],r[1+s]);return Zo(e)}function rC(t){for(let r=0;r<t.length;r++)t[r]=Tt(t[r],e=>e.type==="infix"?tC(e):e);return t}var qu;let sC=(qu=class{constructor(){he(this,"plugins");this.plugins={validate:[W2,Q2],transform:[xh,Y2,rC]}}static parse(r){return qu.instance==null&&(qu.instance=new qu),qu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=zd(r,{startRule:"Preprocess"});e=zd(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new wf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`,s):new wf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`,s):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},he(qu,"instance"),qu);const nC="0.16.0",aC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Iv=[],hc=null;function iC(t){return Iv=sC.parse(t),JSON.stringify(Iv,null,"	")}async function lC(t){hc==null||hc.abort(),hc=new Hn({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Nv(r,!0),print:!0})},err:t.err,log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Nv(e.val,!0),print:!1});break}}});try{await hc.exec(Iv)}catch(r){t.err(r)}}const uC=Object.freeze(Object.defineProperty({__proto__:null,exec:lC,parse:iC,samples:aC,version:nC},Symbol.toStringTag,{value:"Module"}));function Ah(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(e){return typeof e}:Ah=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(t)}function zw(t,r,e){var s=e.value;if(typeof s!="function")throw new TypeError("@boundMethod decorator can only be applied to methods not: ".concat(Ah(s)));var v=!1;return{configurable:!0,get:function(){if(v||this===t.prototype||this.hasOwnProperty(r)||typeof s!="function")return s;var C=s.bind(this);return v=!0,Object.defineProperty(this,r,{configurable:!0,get:function(){return C},set:function(E){s=E,delete this[r]}}),v=!1,C},set:function(C){s=C}}}function oC(t){var r;return typeof Reflect<"u"&&typeof Reflect.ownKeys=="function"?r=Reflect.ownKeys(t.prototype):(r=Object.getOwnPropertyNames(t.prototype),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t.prototype)))),r.forEach(function(e){if(e!=="constructor"){var s=Object.getOwnPropertyDescriptor(t.prototype,e);typeof s.value=="function"&&Object.defineProperty(t.prototype,e,zw(t,e,s))}}),t}function Dt(){return arguments.length===1?oC.apply(void 0,arguments):zw.apply(void 0,arguments)}let Kw=class Ww extends Error{constructor(e,s){super(e);he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,Ww)}},mf=class extends Kw{constructor(r,e){super(r,e)}},Kr=class extends Kw{constructor(r,e){super(r,e)}},fC=class extends Kr{constructor(r,e){super(r,e)}};var kf=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};let Io=class Gw{constructor(r=[],e,s){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Gw(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r);return this.log("read",{var:r,val:s}),s}throw new Kr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Kr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Kr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}};kf([Dt],Io.prototype,"log",null);kf([Dt],Io.prototype,"onUpdated",null);kf([Dt],Io.prototype,"createChildScope",null);kf([Dt],Io.prototype,"get",null);kf([Dt],Io.prototype,"getAll",null);kf([Dt],Io.prototype,"add",null);kf([Dt],Io.prototype,"assign",null);let sh;const cC=new Uint8Array(16);function hC(){if(!sh&&(sh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!sh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sh(cC)}const bn=[];for(let t=0;t<256;++t)bn.push((t+256).toString(16).slice(1));function pC(t,r=0){return(bn[t[r+0]]+bn[t[r+1]]+bn[t[r+2]]+bn[t[r+3]]+"-"+bn[t[r+4]]+bn[t[r+5]]+"-"+bn[t[r+6]]+bn[t[r+7]]+"-"+bn[t[r+8]]+bn[t[r+9]]+"-"+bn[t[r+10]]+bn[t[r+11]]+bn[t[r+12]]+bn[t[r+13]]+bn[t[r+14]]+bn[t[r+15]]).toLowerCase()}const vC=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Wd={randomUUID:vC};function gC(t,r,e){if(Wd.randomUUID&&!r&&!t)return Wd.randomUUID();t=t||{};const s=t.random||(t.rng||hC)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,pC(s)}const kr={type:"null"},Ji={type:"bool",value:!0},Ii={type:"bool",value:!1},Je=t=>({type:"num",value:t}),qr=t=>({type:"str",value:t}),Yf=t=>({type:"bool",value:t}),_g=t=>({type:"obj",value:t}),Nn=t=>({type:"arr",value:t}),dC=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),_e=t=>({type:"fn",native:t}),yC=t=>({type:"return",value:t}),wC=()=>({type:"break",value:null}),mC=()=>({type:"continue",value:null}),$C=t=>t.type==="return"?t.value:t;function Bi(t){if(t==null)throw new Kr("Expect anything, but got nothing.")}function Aa(t){if(t==null)throw new Kr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Kr(`Expect boolean, but got ${t.type}.`)}function bo(t){if(t==null)throw new Kr("Expect function, but got nothing.");if(t.type!=="fn")throw new Kr(`Expect function, but got ${t.type}.`)}function Vs(t){if(t==null)throw new Kr("Expect string, but got nothing.");if(t.type!=="str")throw new Kr(`Expect string, but got ${t.type}.`)}function Ve(t){if(t==null)throw new Kr("Expect number, but got nothing.");if(t.type!=="num")throw new Kr(`Expect number, but got ${t.type}.`)}function po(t){if(t==null)throw new Kr("Expect object, but got nothing.");if(t.type!=="obj")throw new Kr(`Expect object, but got ${t.type}.`)}function ec(t){if(t==null)throw new Kr("Expect array, but got nothing.");if(t.type!=="arr")throw new Kr(`Expect array, but got ${t.type}.`)}function xC(t){return t.type==="str"}function bC(t){return t.type==="num"}function AC(t){return t.type==="obj"}function CC(t){return t.type==="arr"}function Rv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function jv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>jv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function Dv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>Dv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=Dv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Uv(t){if(t===null)return kr;if(typeof t=="boolean")return Yf(t);if(typeof t=="string")return qr(t);if(typeof t=="number")return Je(t);if(Array.isArray(t))return Nn(t.map(r=>Uv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Uv(s));return _g(r)}return kr}const _C={help:qr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":qr("0.14.1"),"Core:ai":qr("kawaii"),"Core:not":_e(([t])=>(Aa(t),t.value?Ii:Ji)),"Core:eq":_e(([t,r])=>(Bi(t),Bi(r),Rv(t,r)?Ji:Ii)),"Core:neq":_e(([t,r])=>(Bi(t),Bi(r),Rv(t,r)?Ii:Ji)),"Core:and":_e(([t,r])=>(Aa(t),t.value?(Aa(r),r.value?Ji:Ii):Ii)),"Core:or":_e(([t,r])=>(Aa(t),t.value?Ji:(Aa(r),r.value?Ji:Ii))),"Core:add":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value+r.value))),"Core:sub":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value-r.value))),"Core:mul":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value*r.value))),"Core:pow":_e(([t,r])=>{Ve(t),Ve(r);const e=t.value**r.value;if(isNaN(e))throw new Kr("Invalid operation.");return Je(e)}),"Core:div":_e(([t,r])=>{Ve(t),Ve(r);const e=t.value/r.value;if(isNaN(e))throw new Kr("Invalid operation.");return Je(e)}),"Core:mod":_e(([t,r])=>(Ve(t),Ve(r),Je(t.value%r.value))),"Core:gt":_e(([t,r])=>(Ve(t),Ve(r),t.value>r.value?Ji:Ii)),"Core:lt":_e(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Ji:Ii)),"Core:gteq":_e(([t,r])=>(Ve(t),Ve(r),t.value>=r.value?Ji:Ii)),"Core:lteq":_e(([t,r])=>(Ve(t),Ve(r),t.value<=r.value?Ji:Ii)),"Core:type":_e(([t])=>(Bi(t),qr(t.type))),"Core:to_str":_e(([t])=>(Bi(t),t.type==="str"?t:t.type==="num"?qr(t.value.toString()):qr("?"))),"Core:range":_e(([t,r])=>(Ve(t),Ve(r),t.value<r.value?Nn(Array.from({length:r.value-t.value+1},(e,s)=>Je(s+t.value))):t.value>r.value?Nn(Array.from({length:t.value-r.value+1},(e,s)=>Je(t.value-s))):Nn([t]))),"Util:uuid":_e(()=>qr(gC())),"Json:stringify":_e(([t])=>(Bi(t),qr(JSON.stringify(Dv(t))))),"Json:parse":_e(([t])=>(Vs(t),Uv(JSON.parse(t.value)))),"Json:parsable":_e(([t])=>{Vs(t);try{JSON.parse(t.value)}catch{return Yf(!1)}return Yf(!0)}),"Date:now":_e(()=>Je(Date.now())),"Date:year":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":_e(([t])=>(t&&Ve(t),Je(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":_e(([t])=>(Vs(t),Je(new Date(t.value).getTime()))),"Math:Infinity":Je(1/0),"Math:E":Je(Math.E),"Math:LN2":Je(Math.LN2),"Math:LN10":Je(Math.LN10),"Math:LOG2E":Je(Math.LOG2E),"Math:LOG10E":Je(Math.LOG10E),"Math:PI":Je(Math.PI),"Math:SQRT1_2":Je(Math.SQRT1_2),"Math:SQRT2":Je(Math.SQRT2),"Math:abs":_e(([t])=>(Ve(t),Je(Math.abs(t.value)))),"Math:acos":_e(([t])=>(Ve(t),Je(Math.acos(t.value)))),"Math:acosh":_e(([t])=>(Ve(t),Je(Math.acosh(t.value)))),"Math:asin":_e(([t])=>(Ve(t),Je(Math.asin(t.value)))),"Math:asinh":_e(([t])=>(Ve(t),Je(Math.asinh(t.value)))),"Math:atan":_e(([t])=>(Ve(t),Je(Math.atan(t.value)))),"Math:atanh":_e(([t])=>(Ve(t),Je(Math.atanh(t.value)))),"Math:atan2":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.atan2(t.value,r.value)))),"Math:cbrt":_e(([t])=>(Ve(t),Je(Math.cbrt(t.value)))),"Math:ceil":_e(([t])=>(Ve(t),Je(Math.ceil(t.value)))),"Math:clz32":_e(([t])=>(Ve(t),Je(Math.clz32(t.value)))),"Math:cos":_e(([t])=>(Ve(t),Je(Math.cos(t.value)))),"Math:cosh":_e(([t])=>(Ve(t),Je(Math.cosh(t.value)))),"Math:exp":_e(([t])=>(Ve(t),Je(Math.exp(t.value)))),"Math:expm1":_e(([t])=>(Ve(t),Je(Math.expm1(t.value)))),"Math:floor":_e(([t])=>(Ve(t),Je(Math.floor(t.value)))),"Math:fround":_e(([t])=>(Ve(t),Je(Math.fround(t.value)))),"Math:hypot":_e(([t])=>{ec(t);const r=[];for(const e of t.value)Ve(e),r.push(e.value);return Je(Math.hypot(...r))}),"Math:imul":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.imul(t.value,r.value)))),"Math:log":_e(([t])=>(Ve(t),Je(Math.log(t.value)))),"Math:log1p":_e(([t])=>(Ve(t),Je(Math.log1p(t.value)))),"Math:log10":_e(([t])=>(Ve(t),Je(Math.log10(t.value)))),"Math:log2":_e(([t])=>(Ve(t),Je(Math.log2(t.value)))),"Math:max":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.max(t.value,r.value)))),"Math:min":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.min(t.value,r.value)))),"Math:pow":_e(([t,r])=>(Ve(t),Ve(r),Je(Math.pow(t.value,r.value)))),"Math:round":_e(([t])=>(Ve(t),Je(Math.round(t.value)))),"Math:sign":_e(([t])=>(Ve(t),Je(Math.sign(t.value)))),"Math:sin":_e(([t])=>(Ve(t),Je(Math.sin(t.value)))),"Math:sinh":_e(([t])=>(Ve(t),Je(Math.sinh(t.value)))),"Math:sqrt":_e(([t])=>{Ve(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Kr("Invalid operation.");return Je(r)}),"Math:tan":_e(([t])=>(Ve(t),Je(Math.tan(t.value)))),"Math:tanh":_e(([t])=>(Ve(t),Je(Math.tanh(t.value)))),"Math:trunc":_e(([t])=>(Ve(t),Je(Math.trunc(t.value)))),"Math:rnd":_e(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?Je(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):Je(Math.random())),"Math:gen_rng":_e(([t])=>{if(Bi(t),t.type!=="num"&&t.type!=="str")return kr;const r=No(t.value.toString());return _e(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?Je(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):Je(r()))}),"Num:to_hex":_e(([t])=>(Ve(t),qr(t.value.toString(16)))),"Num:from_hex":_e(([t])=>(Vs(t),Je(parseInt(t.value,16)))),"Str:lf":qr(`
`),"Str:lt":_e(([t,r])=>(Vs(t),Vs(r),t.value<r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Str:gt":_e(([t,r])=>(Vs(t),Vs(r),t.value>r.value?Je(-1):t.value===r.value?Je(0):Je(1))),"Obj:keys":_e(([t])=>(po(t),Nn(Array.from(t.value.keys()).map(r=>qr(r))))),"Obj:vals":_e(([t])=>(po(t),Nn(Array.from(t.value.values())))),"Obj:kvs":_e(([t])=>(po(t),Nn(Array.from(t.value.entries()).map(([r,e])=>Nn([qr(r),e]))))),"Obj:get":_e(([t,r])=>(po(t),Vs(r),t.value.get(r.value)??kr)),"Obj:set":_e(([t,r,e])=>(po(t),Vs(r),Bi(e),t.value.set(r.value,e),kr)),"Obj:has":_e(([t,r])=>(po(t),Vs(r),Yf(t.value.has(r.value)))),"Obj:copy":_e(([t])=>(po(t),_g(new Map(t.value)))),"Async:interval":_e(async([t,r,e],s)=>{Ve(t),bo(r),e&&(Aa(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.call(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),_e(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":_e(async([t,r],e)=>{Ve(t),bo(r);const s=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),_e(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},Sf={num:{to_str:t=>_e(async(r,e)=>qr(t.value.toString()))},str:{to_num:t=>_e(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?kr:Je(s)}),len:t=>Je(Cf(t.value)),replace:t=>_e(async([r,e],s)=>(Vs(r),Vs(e),qr(t.value.split(r.value).join(e.value)))),index_of:t=>_e(async([r],e)=>(Vs(r),Je(Pf(t.value,r.value)))),incl:t=>_e(async([r],e)=>(Vs(r),t.value.includes(r.value)?Ji:Ii)),trim:t=>_e(async(r,e)=>qr(t.value.trim())),upper:t=>_e(async(r,e)=>qr(t.value.toUpperCase())),lower:t=>_e(async(r,e)=>qr(t.value.toLowerCase())),split:t=>_e(async([r],e)=>(r&&Vs(r),Nn(r?t.value.split(r?r.value:"").map(s=>qr(s)):Zs(t.value).map(s=>qr(s))))),slice:t=>_e(async([r,e],s)=>(Ve(r),Ve(e),qr(_f(t.value,r.value,e.value)))),pick:t=>_e(async([r],e)=>{Ve(r);const v=Zs(t.value)[r.value];return v?qr(v):kr})},arr:{len:t=>Je(t.value.length),push:t=>_e(async([r],e)=>(Bi(r),t.value.push(r),t)),unshift:t=>_e(async([r],e)=>(Bi(r),t.value.unshift(r),t)),pop:t=>_e(async(r,e)=>t.value.pop()??kr),shift:t=>_e(async(r,e)=>t.value.shift()??kr),concat:t=>_e(async([r],e)=>(ec(r),Nn(t.value.concat(r.value)))),slice:t=>_e(async([r,e],s)=>(Ve(r),Ve(e),Nn(t.value.slice(r.value,e.value)))),join:t=>_e(async([r],e)=>(r&&Vs(r),qr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>_e(async([r],e)=>{bo(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,Je(d)]));return Nn(await Promise.all(s))}),filter:t=>_e(async([r],e)=>{bo(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,Je(v)]);Aa(C),C.value&&s.push(d)}return Nn(s)}),reduce:t=>_e(async([r,e],s)=>{bo(r);const v=e!=null;let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,Je(C)])}return d}),find:t=>_e(async([r],e)=>{bo(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,Je(s)]);if(Aa(d),d.value)return v}return kr}),incl:t=>_e(async([r],e)=>(Bi(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ii:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Ji:Ii)),reverse:t=>_e(async(r,e)=>(t.value.reverse(),kr)),copy:t=>_e(async(r,e)=>Nn([...t.value])),sort:t=>_e(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=await s(d.slice(0,P),C),N=await s(d.slice(P),C);return v(E,N,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);Ve(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return bo(r),ec(t),t.value=await s(t.value,r),t})}};var Vi=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Jw=300,PC=Jw-1;let Ra=class{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const s={print:_e(([v])=>{Bi(v),this.opts.out&&this.opts.out(v)}),readline:_e(async v=>{const d=v[0];if(Vs(d),this.opts.in==null)return kr;const C=await this.opts.in(d.value);return qr(C)})};this.vars={...r,..._C,...s},this.scope=new Io([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{const v=await this._eval(s.expr,e);e.add(s.name,v),this.scope.add(r.name+":"+s.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??kr;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],e[d]);const v=r.scope.createChildScope(s);return $C(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return kr;if(this.stepCount%Jw===PC&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Kr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);bo(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(Aa(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Aa(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return kr}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Rv(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):kr}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return kr}case"for":{if(r.times){const s=await this._eval(r.times,e);Ve(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);Ve(s),Ve(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,Je(d)]])));if(C.type==="break")break;if(C.type==="return")return C}}return kr}case"each":{const s=await this._eval(r.items,e);ec(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(d.type==="break")break;if(d.type==="return")return d}return kr}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,s),kr}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),kr}case"addAssign":{const s=await this._eval(r.dest,e);Ve(s);const v=await this._eval(r.expr,e);return Ve(v),await this.assign(e,r.dest,Je(s.value+v.value)),kr}case"subAssign":{const s=await this._eval(r.dest,e);Ve(s);const v=await this._eval(r.expr,e);return Ve(v),await this.assign(e,r.dest,Je(s.value-v.value)),kr}case"null":return kr;case"bool":return Yf(r.value);case"num":return Je(r.value);case"str":return qr(r.value);case"arr":return Nn(await Promise.all(r.value.map(async s=>await this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return _g(s)}case"prop":{const s=await this._eval(r.target,e);if(AC(s))return s.value.has(r.name)?s.value.get(r.name):kr;if(bC(s)){if(Object.hasOwn(Sf.num,r.name))return Sf.num[r.name](s);throw new Kr(`No such prop (${r.name}) in ${s.type}.`)}else if(xC(s)){if(Object.hasOwn(Sf.str,r.name))return Sf.str[r.name](s);throw new Kr(`No such prop (${r.name}) in ${s.type}.`)}else if(CC(s)){if(Object.hasOwn(Sf.arr,r.name))return Sf.arr[r.name](s);throw new Kr(`No such prop (${r.name}) in ${s.type}.`)}else throw new Kr(`Cannot read prop (${r.name}) of ${s.type}.`)}case"index":{const s=await this._eval(r.target,e);ec(s);const v=await this._eval(r.index,e);Ve(v);const d=s.value[v.value];if(d===void 0)throw new fC(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}case"not":{const s=await this._eval(r.expr,e);return Aa(s),Yf(!s.value)}case"fn":return dC(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);let C="";d.type==="str"?C=d.value:d.type==="num"&&(C=d.value.toString()),s+=C}return qr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),yC(s)}case"break":return this.log("block:break",{scope:e.name}),wC();case"continue":return this.log("block:continue",{scope:e.name}),mC();case"ns":return kr;case"meta":return kr;case"and":{const s=await this._eval(r.left,e);if(Aa(s),s.value){const v=await this._eval(r.right,e);return Aa(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(Aa(s),s.value)return s;{const v=await this._eval(r.right,e);return Aa(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=kr;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r);ec(v);const d=await this._eval(e.index,r);Ve(d),v.value[d.value]=s}else if(e.type==="prop"){const v=await this._eval(e.target,r);po(v),v.value.set(e.name,s)}else throw new Kr("The left-hand side of an assignment expression must be a variable or a property/index access.")}};Vi([Dt],Ra.prototype,"exec",null);Vi([Dt],Ra.prototype,"execFn",null);Vi([Dt],Ra.prototype,"log",null);Vi([Dt],Ra.prototype,"collectNs",null);Vi([Dt],Ra.prototype,"collectNsMember",null);Vi([Dt],Ra.prototype,"_fn",null);Vi([Dt],Ra.prototype,"_eval",null);Vi([Dt],Ra.prototype,"_run",null);Vi([Dt],Ra.prototype,"registerAbortHandler",null);Vi([Dt],Ra.prototype,"unregisterAbortHandler",null);Vi([Dt],Ra.prototype,"abort",null);Vi([Dt],Ra.prototype,"assign",null);Vi([Dt],Ra,"collectMetadata",null);function kC(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function cf(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,cf.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}kC(cf,Error);function Vp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}cf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=Vp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+Vp("",v.column-1," ")+Vp("",B,"^")}else r+=`
 at `+C}return r};cf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Gd(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:j,Main:cn},d=j,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",G="if",ee="elif",fe="else",Ce="match",ve="=>",Ae="eval",Re="`",Me='"',Se="'",$e='\\"',it="\\'",qe="true",Ye="false",Qe="null",ot=";",Pt="@",xt="@(",Ut=`\r
`,yt=/^[A-Z0-9_:]/i,lt=/^[^`{]/,vr=/^[{}`]/,cs=/^[+\-]/,is=/^[1-9]/,Ct=/^[0-9]/,Rt=/^[A-Z_]/i,Mn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,el=/^[ \t\r\n]/,tl=/^[ \t]/,lr=du(),Bt=ue("//",!1),Qr=ue("/*",!1),qn=ue("*/",!1),kt=ue("(",!1),ft=ue(")",!1),Sr=ue("::",!1),Gt=ue("{",!1),st=ue("}",!1),Lt=ue("###",!1),bs=ue("let",!1),Ht=ue(":",!1),qt=ue("=",!1),Xr=ue("var",!1),Da=ue("<:",!1),Tr=ue("#[",!1),hs=ue("]",!1),Ns=ue("each",!1),ct=ue(",",!1),Ot=ue("for",!1),Xs=ue("return",!1),Nr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Fr=ue("loop",!1),rl=ue("break",!1),Ua=ue("continue",!1),sl=ue("+=",!1),nl=ue("-=",!1),Ba=ue("\\",!1),La=ue("||",!1),al=ue("&&",!1),il=ue("==",!1),ll=ue("!=",!1),ul=ue("<=",!1),Vn=ue(">=",!1),Ys=ue("<",!1),zn=ue(">",!1),Ha=ue("+",!1),ol=ue("-",!1),qa=ue("*",!1),Fs=ue("^",!1),fl=ue("/",!1),cl=ue("%",!1),hl=ue("!",!1),As=ue("[",!1),Os=ue(".",!1),Kn=ue("if",!1),en=ue("elif",!1),tn=ue("else",!1),pl=ue("match",!1),rn=ue("=>",!1),ps=ue("eval",!1),Is=ue("`",!1),Ar=D(["`","{"],!0,!1),sn=D(["{","}","`"],!1,!1),nn=ue('"',!1),an=ue("'",!1),vs=ue('\\"',!1),ln=ue("\\'",!1),Rs=D(["+","-"],!1,!1),Va=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),za=ue("true",!1),dr=ue("false",!1),vl=ue("null",!1),un=ue(";",!1),gl=ue("@",!1),js=ue("@(",!1),dl=D([["A","Z"],"_"],!1,!0),Wn=D([["A","Z"],["0","9"],"_"],!1,!0),yl=ue(`\r
`,!1),Ka=D(["\r",`
`],!1,!1),wl=D([" ","	","\r",`
`],!1,!1),ml=D([" ","	"],!1,!1),Wa=function(a){return a.join("")},$l=function(){return F()},Ga=function(){return F()},xl=function(){return""},Ja=function(){return""},bl=function(a){return a??[]},Za=function(a,l){return l},Al=function(a,l){return[a,...l]},Gn=function(a,l){return l},Cl=function(a,l){return[a,...l]},Jn=function(a,l){return l},_l=function(a,l){return[a,...l]},Qa=function(a){return a},Pl=function(a,l){return w("ns",{name:a,members:l})},kl=function(a,l){return w("meta",{name:a,value:l})},El=function(a){return w("meta",{name:null,value:a})},Ml=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Sl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Tl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Nl=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Fl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ol=function(a,l,$){return w("each",{var:a,items:l,for:$})},Il=function(a,l){return l},Rl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},jl=function(a,l){return l},Dl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},Ul=function(a,l){return w("for",{times:a,for:l})},Xa=function(a,l){return w("for",{times:a,for:l})},Bl=function(a){return w("return",{expr:a})},Ll=function(a){return w("loop",{statements:a})},Hl=function(){return w("break",{})},ql=function(){return w("continue",{})},Vl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Zn=function(a,l,$){return{op:l,term:$}},zl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Ya=function(){return F()},Kl=function(a){return w("not",{expr:a})},Wl=function(a,l){return{...a,chain:l}},Gl=function(a){return w("callChain",{args:a??[]})},ei=function(a,l){return l},Jl=function(a,l){return[a,...l]},Qn=function(a){return w("indexChain",{index:a})},Zl=function(a){return w("propChain",{name:a})},Ql=function(a,l,$,p){return w("if",{cond:a,then:l,elseif:$??[],else:p})},Xl=function(a,l){return[a,...l]},Yl=function(a,l){return{cond:a,then:l}},eu=function(a){return a},ti=function(a,l,$){return{q:l,a:$}},ri=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},si=function(a){return w("block",{statements:a})},ni=function(a){return w("identifier",{name:a})},tu=function(a){return w("tmpl",{tmpl:a})},ru=function(a){return a.join("")},ai=function(a){return a},su=function(a){return w("str",{value:a.join("")})},ii=function(a){return a},li=function(a){return w("str",{value:a.join("")})},nu=function(){return'"'},ui=function(){return"'"},au=function(){return w("num",{value:parseFloat(F())})},iu=function(){return w("num",{value:parseFloat(F())})},oi=function(){return w("num",{value:parseInt(F(),10)})},lu=function(){return w("num",{value:parseInt(F(),10)})},fi=function(){return w("bool",{value:!0})},uu=function(){return w("bool",{value:!1})},ou=function(){return w("null",{})},ci=function(a,l){return{k:a,v:l}},fu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},hi=function(a){return a},Xn=function(a){return w("arr",{value:a})},cu=function(a,l){return{name:a,argType:l}},Yn=function(a,l){return[a,...l]},hu=function(a,l,$,p,n,u){return(a.length>0||$.length>0)&&Ds("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:p??[],retType:n},u??[]),mut:!1,attr:[]})},pu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},pi=function(a){return a},vu=function(a){return w("arr",{value:a})},vi=function(a,l){return{k:a,v:l}},gi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},gu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},di=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},yr=function(){return F()},on=function(a){return w("block",{statements:a??[]})},i=0,T=0,Yr=[{line:1,column:1}],o=0,X=[],O=0,R={},_t;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function F(){return t.substring(T,i)}function V(){return Us(T,i)}function Ds(a,l){throw l=l!==void 0?l:Us(T,i),yi(a,l)}function ue(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function du(){return{type:"any"}}function de(){return{type:"end"}}function tr(a){var l=Yr[a],$;if(l)return l;for($=a-1;!Yr[$];)$--;for(l=Yr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Yr[a]=l,l}function Us(a,l,$){var p=tr(a),n=tr(l),u={source:s,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:n.line,column:n.column}};return u}function U(a){i<o||(i>o&&(o=i,X=[]),X.push(a))}function yi(a,l){return new cf(a,null,null,l)}function fn(a,l,$){return new cf(cf.buildMessage(a,l),a,l,$)}function j(){var a,l,$,p=i*76+0,n=R[p];if(n)return i=n.nextPos,n.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return T=a,l=Wa(l),a=l,R[p]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,p=R[$];return p?(i=p.nextPos,p.result):(a=i,l=vn(),l!==e&&(T=a,l=$l()),a=l,a===e&&(a=i,l=gn(),l!==e&&(T=a,l=Ga()),a=l,a===e&&(a=ea(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&U(lr))))),R[$]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,n,u,y=i*76+2,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,O===0&&U(Bt)),l!==e){for($=[],p=i,n=i,O++,u=f(),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,u=f(),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);T=a,a=xl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&U(Qr)),l!==e){for($=[],p=i,n=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&U(qn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&U(qn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,O===0&&U(qn)),p!==e?(T=a,a=Ja()):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function cn(){var a,l,$,p,n,u=i*76+3,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=Ps(),$===e&&($=null),p=[],n=g();n!==e;)p.push(n),n=g();return T=a,a=bl($),R[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,p,n,u,y,h,x=i*76+4,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=hn(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=hn(),h!==e?(T=p,p=Za(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=hn(),h!==e?(T=p,p=Za(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=Al(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,n,u,y,h,x=i*76+5,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Or(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Or(),h!==e?(T=p,p=Gn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Or(),h!==e?(T=p,p=Gn(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=Cl(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function es(){var a,l,$,p,n,u,y,h,x=i*76+6,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Cr(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(T=p,p=Jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(T=p,p=Jn(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=_l(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function hn(){var a,l=i*76+7,$=R[l];return $?(i=$.nextPos,$.result):(a=Bs(),a===e&&(a=wi(),a===e&&(a=Cr())),R[l]={nextPos:i,result:a},a)}function Or(){var a,l=i*76+8,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=Bs())),R[l]={nextPos:i,result:a},a)}function Cr(){var a,l=i*76+9,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=mi(),a===e&&(a=mu(),a===e&&(a=yu(),a===e&&(a=$i(),a===e&&(a=wu(),a===e&&(a=rs(),a===e&&(a=xi(),a===e&&(a=$u(),a===e&&(a=xu(),a===e&&(a=Xe()))))))))))),R[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=R[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=gs()),R[l]={nextPos:i,result:a},a)}function gs(){var a,l=i*76+11,$=R[l];return $?(i=$.nextPos,$.result):(a=bu(),a===e&&(a=_u(),a===e&&(a=ns(),a===e&&(a=ks()))),R[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,p,n,u,y=i*76+12,h=R[y];if(h)return i=h.nextPos,h.result;if(a=ki(),a===e&&(a=pn(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=Ei(),a===e&&(a=ca(),a===e&&(a=pa(),a===e&&(a=va(),a===e&&(a=Cu(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e?(T=a,a=Qa(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function We(){var a,l=i*76+13,$=R[l];return $?(i=$.nextPos,$.result):(a=Ei(),a===e&&(a=gn(),a===e&&(a=ca(),a===e&&(a=ya(),a===e&&(a=Si(),a===e&&(a=pa()))))),R[l]={nextPos:i,result:a},a)}function Bs(){var a,l,$,p,n,u,y,h,x,m,_=i*76+14,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===B?(l=B,i+=2):(l=e,O===0&&U(Sr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(t.charCodeAt(i)===123?(u=L,i++):(u=e,O===0&&U(Gt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=Z,i++):(m=e,O===0&&U(st)),m!==e?(T=a,a=Pl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function wi(){var a,l,$,p,n,u,y=i*76+15,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Ge(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();u=We(),u!==e?(T=a,a=kl(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=We(),p!==e?(T=a,a=El(p)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ts(){var a,l,$,p,n,u,y,h,x,m=i*76+16,_=R[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(bs)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(T=a,a=Ml(p,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===J?(l=J,i+=3):(l=e,O===0&&U(Xr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(T=a,a=Sl(p,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[m]={nextPos:i,result:a},a}function mi(){var a,l,$,p,n=i*76+17,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,O===0&&U(Da)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(T=a,a=Tl(p)):(i=a,a=e)}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function yu(){var a,l,$,p,n,u,y,h=i*76+18,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,O===0&&U(Tr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();for(y=We(),y!==e?n=y:(i=n,n=e),n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();t.charCodeAt(i)===93?(y=Q,i++):(y=e,O===0&&U(hs)),y!==e?(T=a,a=Nl(p,n)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+19,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(t.substr(i,3)===le?(n=le,i+=3):(n=e,O===0&&U(bs)),n!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=S,i++):(A=e,O===0&&U(ft)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=De(),I!==e?(T=a,a=Fl(y,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===le?(p=le,i+=3):(p=e,O===0&&U(bs)),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(T=a,a=Ol(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function wu(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z=i*76+20,se=R[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(t.substr(i,3)===le?(n=le,i+=3):(n=e,O===0&&U(bs)),n!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=be,i++):(m=e,O===0&&U(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(T=x,x=Il(y,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,O===0&&U(ct)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=S,i++):(M=e,O===0&&U(ft)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=De(),H!==e?(T=a,a=Rl(y,x,A,H)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===le?(p=le,i+=3):(p=e,O===0&&U(bs)),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=be,i++):(x=e,O===0&&U(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(T=h,h=jl(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=De(),M!==e?(T=a,a=Dl(u,h,_,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(n=Xe(),n!==e)if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=De(),h!==e?(T=a,a=Ul(n,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;n!==e?(u=De(),u!==e?(T=a,a=Xa(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return R[z]={nextPos:i,result:a},a}function mu(){var a,l,$,p,n,u=i*76+21,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&U(Xs)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();n=Xe(),n!==e?(T=a,a=Bl(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function rs(){var a,l,$,p,n,u,y,h,x=i*76+22,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,O===0&&U(Fr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=L,i++):(p=e,O===0&&U(Gt)),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=Z,i++):(h=e,O===0&&U(st)),h!==e?(T=a,a=Ll(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function xi(){var a,l,$,p,n=i*76+23,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ie?(l=Ie,i+=5):(l=e,O===0&&U(rl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Hl()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function $u(){var a,l,$,p,n=i*76+24,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===ke?(l=ke,i+=8):(l=e,O===0&&U(Ua)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=ql()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function xu(){var a,l,$,p,n,u,y=i*76+25,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,O===0&&U(sl)),p===e&&(t.substr(i,2)===vt?(p=vt,i+=2):(p=e,O===0&&U(nl)),p===e&&(t.charCodeAt(i)===61?(p=be,i++):(p=e,O===0&&U(qt)))),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();u=Xe(),u!==e?(T=a,a=Vl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function bi(){var a,l,$,p,n,u,y,h,x=i*76+26,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=gs(),l!==e){for($=[],p=i,n=[],u=ss();u!==e;)n.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(T=p,p=Zn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,n=[],u=ss();u!==e;)n.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(T=p,p=Zn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(T=a,a=zl(l,$)):(i=a,a=e)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function ss(){var a,l,$,p=i*76+27,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),R[p]={nextPos:i,result:a},a)}function ta(){var a,l,$=i*76+28,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===At?(l=At,i+=2):(l=e,O===0&&U(La)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&U(al)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&U(il)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&U(ll)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,O===0&&U(ul)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,O===0&&U(Vn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,O===0&&U(Ys)),l===e&&(t.charCodeAt(i)===62?(l=Lr,i++):(l=e,O===0&&U(zn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,O===0&&U(Ha)),l===e&&(t.charCodeAt(i)===45?(l=Mr,i++):(l=e,O===0&&U(ol)),l===e&&(t.charCodeAt(i)===42?(l=ir,i++):(l=e,O===0&&U(qa)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,O===0&&U(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Jr,i++):(l=e,O===0&&U(fl)),l===e&&(t.charCodeAt(i)===37?(l=nr,i++):(l=e,O===0&&U(cl))))))))))))))),l!==e&&(T=a,l=Ya()),a=l,R[$]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p=i*76+29,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===33?(l=Zr,i++):(l=e,O===0&&U(hl)),l!==e?($=Xe(),$!==e?(T=a,a=Kl($)):(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function ns(){var a,l,$,p,n=i*76+30,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],p=ra(),p===e&&(p=Ci(),p===e&&(p=na())),p!==e)for(;p!==e;)$.push(p),p=ra(),p===e&&(p=Ci(),p===e&&(p=na()));else $=e;$!==e?(T=a,a=Wl(l,$)):(i=a,a=e)}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function ra(){var a,l,$,p,n,u,y=i*76+31,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e?(T=a,a=Gl(p)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function sa(){var a,l,$,p,n,u,y=i*76+32,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,n=k(),n!==e?(u=Xe(),u!==e?(T=p,p=ei(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=Xe(),u!==e?(T=p,p=ei(l,u)):(i=p,p=e)):(i=p,p=e);T=a,a=Jl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,n,u,y=i*76+33,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=Qn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function na(){var a,l,$,p=i*76+34,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===46?(l=Pr,i++):(l=e,O===0&&U(Os)),l!==e?($=Ge(),$!==e?(T=a,a=Zl($)):(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function bu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+35,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===G?(l=G,i+=2):(l=e,O===0&&U(Kn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=De(),u!==e){if(y=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=_i(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=Pi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),T=a,a=Ql(p,u,y,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function _i(){var a,l,$,p,n,u,y=i*76+36,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ls(),l!==e){for($=[],p=i,n=[],u=g();u!==e;)n.push(u),u=g();for(u=Ls(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,n=[],u=g();u!==e;)n.push(u),u=g();u=Ls(),u!==e?p=u:(i=p,p=e)}T=a,a=Xl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ls(){var a,l,$,p,n,u,y,h=i*76+37,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,O===0&&U(en)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();if(n=Xe(),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=De(),y!==e?(T=a,a=Yl(n,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[h]={nextPos:i,result:a},a}function Pi(){var a,l,$,p,n,u=i*76+38,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,O===0&&U(tn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();n=De(),n!==e?(T=a,a=eu(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function ki(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=i*76+39,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.substr(i,5)===Ce?(l=Ce,i+=5):(l=e,O===0&&U(pl)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();if(n=Xe(),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===123?(y=L,i++):(y=e,O===0&&U(Gt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();T=m,m=ti(n,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();T=m,m=ti(n,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=ir,i++):(_=e,O===0&&U(qa)),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=H}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=Z,i++):(A=e,O===0&&U(st)),A!==e?(T=a,a=ri(n,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function pn(){var a,l,$,p,n,u,y,h,x=i*76+40,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ae?(l=Ae,i+=4):(l=e,O===0&&U(ps)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=L,i++):(p=e,O===0&&U(Gt)),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=Z,i++):(h=e,O===0&&U(st)),h!==e?(T=a,a=si(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function Au(){var a,l,$=i*76+41,p=R[$];return p?(i=p.nextPos,p.result):(a=i,l=Ti(),l!==e&&(T=a,l=ni(l)),a=l,R[$]={nextPos:i,result:a},a)}function vn(){var a,l,$,p,n,u,y=i*76+42,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Re,i++):(l=e,O===0&&U(Is)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Is)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=aa(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Is)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=aa(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Re,i++):(p=e,O===0&&U(Is)),p!==e?(T=a,a=tu($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function aa(){var a,l,$,p,n,u,y=i*76+43,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();t.charCodeAt(i)===125?(u=Z,i++):(u=e,O===0&&U(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ia(),$!==e)for(;$!==e;)l.push($),$=ia();else l=e;l!==e&&(T=a,l=ru(l)),a=l}return R[y]={nextPos:i,result:a},a}function ia(){var a,l=i*76+44,$=R[l];return $?(i=$.nextPos,$.result):(a=la(),a===e&&(lt.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ar))),R[l]={nextPos:i,result:a},a)}function la(){var a,l,$,p=i*76+45,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?(vr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&U(sn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function gn(){var a,l,$,p,n,u,y=i*76+46,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Me,i++):(l=e,O===0&&U(nn)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===34?(u=Me,i++):(u=e,O===0&&U(nn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ai(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===34?(u=Me,i++):(u=e,O===0&&U(nn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ai(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Me,i++):(p=e,O===0&&U(nn)),p!==e?(T=a,a=su($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Se,i++):(l=e,O===0&&U(an)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(an)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=dn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ii(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(an)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=dn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ii(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Se,i++):(p=e,O===0&&U(an)),p!==e?(T=a,a=li($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ua(){var a,l,$=i*76+47,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&U(vs)),l!==e&&(T=a,l=nu()),a=l,R[$]={nextPos:i,result:a},a)}function dn(){var a,l,$=i*76+48,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===it?(l=it,i+=2):(l=e,O===0&&U(ln)),l!==e&&(T=a,l=ui()),a=l,R[$]={nextPos:i,result:a},a)}function Ei(){var a,l=i*76+49,$=R[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(a=fa()),R[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,p,n,u,y=i*76+50,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er)),p!==e)for(;p!==e;)$.push(p),Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=Pr,i++):(p=e,O===0&&U(Os)),p!==e){if(n=[],Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er)),u!==e)for(;u!==e;)n.push(u),Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er));else n=e;n!==e?(T=a,a=au()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e)if(t.charCodeAt(i)===46?($=Pr,i++):($=e,O===0&&U(Os)),$!==e){if(p=[],Ct.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,O===0&&U(er)),n!==e)for(;n!==e;)p.push(n),Ct.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,O===0&&U(er));else p=e;p!==e?(T=a,a=iu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[y]={nextPos:i,result:a},a}function fa(){var a,l,$,p,n=i*76+51,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er)),p!==e)for(;p!==e;)$.push(p),Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er));else $=e;$!==e?(T=a,a=oi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e?(T=a,a=lu()):(i=a,a=e)),R[n]={nextPos:i,result:a},a}function ca(){var a,l=i*76+52,$=R[l];return $?(i=$.nextPos,$.result):(a=Mi(),a===e&&(a=ha()),R[l]={nextPos:i,result:a},a)}function Mi(){var a,l,$,p,n=i*76+53,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===qe?(l=qe,i+=4):(l=e,O===0&&U(za)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=fi()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function ha(){var a,l,$,p,n=i*76+54,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&U(dr)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=uu()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function pa(){var a,l,$,p,n=i*76+55,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&U(vl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=ou()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function va(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+56,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=ci(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=ci(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=Z,i++):(n=e,O===0&&U(st)),n!==e?(T=a,a=fu(p)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function Cu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+57,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=hi(u)}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=hi(u)}else i=n,n=e;for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=Xn(p)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function ga(){var a,l,$,p,n,u,y,h=i*76+58,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,l=Ge(),l!==e){for($=i,p=[],n=g();n!==e;)p.push(n),n=g();if(t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=tt(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),T=a,a=cu(l,$)}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function da(){var a,l,$,p,n,u,y=i*76+59,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=ga(),l!==e){for($=[],p=i,n=k(),n!==e?(u=ga(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=ga(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);T=a,a=Yn(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function wr(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=i*76+60,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.charCodeAt(i)===64?(l=Pt,i++):(l=e,O===0&&U(gl)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Ge(),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,O===0&&U(kt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=da(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=S,i++):(m=e,O===0&&U(ft)),m!==e){for(_=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=pe,i++):(M=e,O===0&&U(Ht)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=tt(),H!==e?_=H:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=L,i++):(M=e,O===0&&U(Gt)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();for(H=es(),H===e&&(H=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=Z,i++):(se=e,O===0&&U(st)),se!==e?(T=a,a=hu($,p,n,h,_,H)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function _u(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I=i*76+61,H=R[I];if(H)return i=H.nextPos,H.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=da(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=pe,i++):(x=e,O===0&&U(Ht)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?y=_:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=L,i++):(x=e,O===0&&U(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=es(),_===e&&(_=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=Z,i++):(M=e,O===0&&U(st)),M!==e?(T=a,a=pu(p,y,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[I]={nextPos:i,result:a},a}function ya(){var a,l,$,p,n,u,y,h,x,m,_=i*76+62,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=pi(u)}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=pi(u)}else i=n,n=e;for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=vu(p)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Si(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+63,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=vi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=vi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=Z,i++):(n=e,O===0&&U(st)),n!==e?(T=a,a=gi(p)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=R[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=ur()),R[l]={nextPos:i,result:a},a)}function Pu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+65,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Es(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.substr(i,2)===ve?(h=ve,i+=2):(h=e,O===0&&U(rn)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(T=a,a=gu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Es(){var a,l,$,p,n,u,y=i*76+66,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,n=k(),n!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);T=a,a=di(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ur(){var a,l,$,p,n,u,y,h,x=i*76+67,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ge(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=pt,i++):(p=e,O===0&&U(Ys)),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();if(u=tt(),u!==e){for(y=[],h=b();h!==e;)y.push(h),h=b();t.charCodeAt(i)===62?(h=Lr,i++):(h=e,O===0&&U(zn)),h!==e?(T=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ge(),l!==e&&(T=a,l=te(l)),a=l),R[x]={nextPos:i,result:a},a}function Ge(){var a,l,$,p,n=i*76+68,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(dl)),l!==e){for($=[],Mn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Wn));p!==e;)$.push(p),Mn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Wn));T=a,a=Cs()}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function Ti(){var a,l,$,p,n,u,y=i*76+69,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ge(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e?(u=Ge(),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e?(u=Ge(),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);T=a,a=yr()}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function k(){var a,l,$,p,n,u=i*76+70,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=Y,i++):($=e,O===0&&U(ct)),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return R[u]={nextPos:i,result:a},a}function De(){var a,l,$,p,n,u,y=i*76+71,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=es(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===125?(u=Z,i++):(u=e,O===0&&U(st)),u!==e?(T=a,a=on(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Cr()),R[y]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=R[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ut?(a=Ut,i+=2):(a=e,O===0&&U(yl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ka))),R[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,p=R[$];return p?(i=p.nextPos,p.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&U(lr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),R[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=R[l];return $?(i=$.nextPos,$.result):(el.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(wl)),R[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=R[l];return $?(i=$.nextPos,$.result):(tl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(ml)),R[l]={nextPos:i,result:a},a)}function w(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const n=V();return p.loc={start:n.start.offset,end:n.end.offset-1},p}if(_t=d(),_t!==e&&i===t.length)return _t;throw _t!==e&&i<t.length&&U(de()),fn(X,o<t.length?t.charAt(o):null,o<t.length?Us(o,o+1):Us(o,o))}const EC=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function MC(t){return EC.includes(t.type)}function Zw(t){return"chain"in t&&t.chain!==null}function SC(t,r,e){return{type:"call",target:t,args:r,loc:e}}function TC(t,r,e){return{type:"index",target:t,index:r,loc:e}}function NC(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function Nt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=Nt(e.expr,r);break}case"return":{e.expr=Nt(e.expr,r);break}case"each":{e.items=Nt(e.items,r),e.for=Nt(e.for,r);break}case"for":{e.from!=null&&(e.from=Nt(e.from,r)),e.to!=null&&(e.to=Nt(e.to,r)),e.times!=null&&(e.times=Nt(e.times,r)),e.for=Nt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Nt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=Nt(e.expr,r),e.dest=Nt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=Nt(e.operands[s],r);break}case"not":{e.expr=Nt(e.expr,r);break}case"if":{e.cond=Nt(e.cond,r),e.then=Nt(e.then,r);for(const s of e.elseif)s.cond=Nt(s.cond,r),s.then=Nt(s.then,r);e.else!=null&&(e.else=Nt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=Nt(e.children[s],r);break}case"match":{e.about=Nt(e.about,r);for(const s of e.qs)s.q=Nt(s.q,r),s.a=Nt(s.a,r);e.default!=null&&(e.default=Nt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=Nt(e.statements[s],r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=Nt(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],Nt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=Nt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=Nt(e.args[s],r);break}case"indexChain":{e.index=Nt(e.index,r);break}case"call":{e.target=Nt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=Nt(e.args[s],r);break}case"index":{e.target=Nt(e.target,r),e.index=Nt(e.index,r);break}case"prop":{e.target=Nt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=Nt(e.members[s],r);break}case"or":case"and":{e.left=Nt(e.left,r),e.right=Nt(e.right,r);break}}if(Zw(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=Nt(e.chain[s],r);return e}const zp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Kp(t){throw new mf(`Reserved word "${t}" cannot be used as variable name.`)}function FC(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{zp.includes(t.name)&&Kp(t.name);break}case"meta":{t.name!=null&&zp.includes(t.name)&&Kp(t.name);break}case"fn":{for(const r of t.args)zp.includes(r.name)&&Kp(r.name);break}}return t}function OC(t){for(const r of t)Nt(r,FC);return t}function Jd(t){return{type:"simple",name:t}}function IC(t,r){return{type:"generic",name:t,inners:r}}function RC(t,r){return{type:"fn",args:t,result:r}}function Ch(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=Ch(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>Ch(s)).join(", "),e=Ch(t.result);return`@(${r}) { ${e} }`}}}function tc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Jd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=tc(t.inner):r=Jd("any"),IC(t.name,[r])}}throw new mf(`Unknown type: '${Ch(t)}'`)}else{const r=t.args.map(e=>tc(e));return RC(r,tc(t.result))}}function jC(t){switch(t.type){case"def":{t.varType!=null&&tc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&tc(r.argType);t.retType!=null&&tc(t.retType);break}}return t}function DC(t){for(const r of t)Nt(r,jC);return t}function _h(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=_h(s.expr.children)),r.push(s);else{if(e.length>0)throw new mf("invalid attribute.");switch(s.type){case"fn":{s.children=_h(s.children);break}case"block":{s.statements=_h(s.statements);break}}r.push(s)}if(e.length>0)throw new mf("invalid attribute.");return r}function UC(t){if(MC(t)&&Zw(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=SC(s,v.args,v.loc);break}case"indexChain":{s=TC(s,v.index,v.loc);break}case"propChain":{s=NC(s,v.name,v.loc);break}}return s}return t}function BC(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],UC);return t}function Ph(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function Qw(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Ph(t,r,e);{const{left:s,right:v,info:d}=t;return Ph(s,Qw(v,r,e),d)}}function Qo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Qo(t.left),Qo(t.right)]}}const LC={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Qo(t.left),right:Qo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Qo(t.left),right:Qo(t.right)}),priority:3}};function HC(t){const r=t.operators.map(s=>{const v=LC[s];if(v==null)throw new mf(`No such operator: ${s}.`);return v});let e=Ph(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=Qw(e,t.operands[2+s],r[1+s]);return Qo(e)}function qC(t){for(let r=0;r<t.length;r++)t[r]=Nt(t[r],e=>e.type==="infix"?HC(e):e);return t}var Vu;let VC=(Vu=class{constructor(){he(this,"plugins");this.plugins={validate:[OC,DC],transform:[_h,BC,qC]}}static parse(r){return Vu.instance==null&&(Vu.instance=new Vu),Vu.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Gd(r,{startRule:"Preprocess"});e=Gd(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new mf(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`):new mf(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}},he(Vu,"instance"),Vu);const zC="0.15.0",KC={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Bv=[],pc=null;function WC(t){return Bv=VC.parse(t),JSON.stringify(Bv,null,"	")}async function GC(t){pc==null||pc.abort(),pc=new Ra({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:jv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:jv(e.val,!0),print:!1});break}}});try{await pc.exec(Bv)}catch(r){t.err(r)}}const JC=Object.freeze(Object.defineProperty({__proto__:null,exec:GC,parse:WC,samples:KC,version:zC},Symbol.toStringTag,{value:"Module"}));class lp extends Error{constructor(e,s){super(e);he(this,"info");this.info=s,Error.captureStackTrace&&Error.captureStackTrace(this,lp)}}class $f extends lp{constructor(r,e){super(r,e)}}class Wr extends lp{constructor(r,e){super(r,e)}}class ZC extends Wr{constructor(r,e){super(r,e)}}var Ef=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};class Zu{constructor(r=[],e,s){he(this,"parent");he(this,"layerdStates");he(this,"name");he(this,"opts",{});this.layerdStates=r,this.parent=e,this.name=s||(r.length===1?"<root>":"<anonymous>")}log(r,e){this.parent?this.parent.log(r,e):this.opts.log&&this.opts.log(r,e)}onUpdated(r,e){this.parent?this.parent.onUpdated(r,e):this.opts.onUpdated&&this.opts.onUpdated(r,e)}createChildScope(r=new Map,e){const s=[r,...this.layerdStates];return new Zu(s,this,e)}get(r){for(const e of this.layerdStates)if(e.has(r)){const s=e.get(r);return this.log("read",{var:r,val:s}),s}throw new Wr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}getAll(){const r=this.layerdStates.reduce((e,s)=>[...e,...s],[]);return new Map(r)}add(r,e){this.log("add",{var:r,val:e});const s=this.layerdStates[0];if(s.has(r))throw new Wr(`Variable '${r}' is alerady exists in scope '${this.name}'`,{scope:this.layerdStates});s.set(r,e),this.parent==null&&this.onUpdated(r,e)}assign(r,e){let s=1;for(const v of this.layerdStates){if(v.has(r)){v.set(r,e),this.log("assign",{var:r,val:e}),s===this.layerdStates.length&&this.onUpdated(r,e);return}s++}throw new Wr(`No such variable '${r}' in scope '${this.name}'`,{scope:this.layerdStates})}}Ef([Dt],Zu.prototype,"log",null);Ef([Dt],Zu.prototype,"onUpdated",null);Ef([Dt],Zu.prototype,"createChildScope",null);Ef([Dt],Zu.prototype,"get",null);Ef([Dt],Zu.prototype,"getAll",null);Ef([Dt],Zu.prototype,"add",null);Ef([Dt],Zu.prototype,"assign",null);let nh;const QC=new Uint8Array(16);function XC(){if(!nh&&(nh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!nh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nh(QC)}const An=[];for(let t=0;t<256;++t)An.push((t+256).toString(16).slice(1));function YC(t,r=0){return(An[t[r+0]]+An[t[r+1]]+An[t[r+2]]+An[t[r+3]]+"-"+An[t[r+4]]+An[t[r+5]]+"-"+An[t[r+6]]+An[t[r+7]]+"-"+An[t[r+8]]+An[t[r+9]]+"-"+An[t[r+10]]+An[t[r+11]]+An[t[r+12]]+An[t[r+13]]+An[t[r+14]]+An[t[r+15]]).toLowerCase()}const e_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Zd={randomUUID:e_};function t_(t,r,e){if(Zd.randomUUID&&!r&&!t)return Zd.randomUUID();t=t||{};const s=t.random||(t.rng||XC)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,YC(s)}const Er={type:"null"},Zi={type:"bool",value:!0},Ri={type:"bool",value:!1},ht=t=>({type:"num",value:t}),Vr=t=>({type:"str",value:t}),rc=t=>({type:"bool",value:t}),Pg=t=>({type:"obj",value:t}),Fn=t=>({type:"arr",value:t}),r_=(t,r,e)=>({type:"fn",args:t,statements:r,scope:e}),ze=t=>({type:"fn",native:t}),s_=t=>({type:"return",value:t}),n_=()=>({type:"break",value:null}),a_=()=>({type:"continue",value:null}),i_=t=>t.type==="return"?t.value:t;function Li(t){if(t==null)throw new Wr("Expect anything, but got nothing.")}function Ca(t){if(t==null)throw new Wr("Expect boolean, but got nothing.");if(t.type!=="bool")throw new Wr(`Expect boolean, but got ${t.type}.`)}function Ao(t){if(t==null)throw new Wr("Expect function, but got nothing.");if(t.type!=="fn")throw new Wr(`Expect function, but got ${t.type}.`)}function zs(t){if(t==null)throw new Wr("Expect string, but got nothing.");if(t.type!=="str")throw new Wr(`Expect string, but got ${t.type}.`)}function ut(t){if(t==null)throw new Wr("Expect number, but got nothing.");if(t.type!=="num")throw new Wr(`Expect number, but got ${t.type}.`)}function vo(t){if(t==null)throw new Wr("Expect object, but got nothing.");if(t.type!=="obj")throw new Wr(`Expect object, but got ${t.type}.`)}function _c(t){if(t==null)throw new Wr("Expect array, but got nothing.");if(t.type!=="arr")throw new Wr(`Expect array, but got ${t.type}.`)}function l_(t){return t.type==="str"}function u_(t){return t.type==="num"}function o_(t){return t.type==="obj"}function f_(t){return t.type==="arr"}function Lv(t,r){return t.type==="fn"||r.type==="fn"?!1:t.type==="null"&&r.type==="null"?!0:t.type==="null"||r.type==="null"?!1:t.value===r.value}function Hv(t,r=!1){if(r){if(t.type==="num")return t.value.toString();if(t.type==="bool")return t.value?"true":"false";if(t.type==="str")return`"${t.value}"`;if(t.type==="arr")return`[${t.value.map(s=>Hv(s,!0)).join(", ")}]`;if(t.type==="null")return"(null)"}const e=t.type==="num"||t.type==="bool"?t.value:t.type==="str"?`"${t.value}"`:t.type==="fn"||t.type==="obj"?"...":t.type==="null"?"":null;return`${t.type}<${e}>`}function qv(t){switch(t.type){case"fn":return"<function>";case"arr":return t.value.map(r=>qv(r));case"bool":return t.value;case"null":return null;case"num":return t.value;case"obj":{const r={};for(const[e,s]of t.value.entries())r[e]=qv(s);return r}case"str":return t.value;default:throw new Error(`Unrecognized value type: ${t.type}`)}}function Vv(t){if(t===null)return Er;if(typeof t=="boolean")return rc(t);if(typeof t=="string")return Vr(t);if(typeof t=="number")return ht(t);if(Array.isArray(t))return Fn(t.map(r=>Vv(r)));if(typeof t=="object"){const r=new Map;for(const[e,s]of Object.entries(t))r.set(e,Vv(s));return Pg(r)}return Er}const c_={help:Vr("SEE: https://github.com/syuilo/aiscript/blob/master/docs/get-started.md"),"Core:v":Vr("0.14.1"),"Core:ai":Vr("kawaii"),"Core:not":ze(([t])=>(Ca(t),t.value?Ri:Zi)),"Core:eq":ze(([t,r])=>(Li(t),Li(r),Lv(t,r)?Zi:Ri)),"Core:neq":ze(([t,r])=>(Li(t),Li(r),Lv(t,r)?Ri:Zi)),"Core:and":ze(([t,r])=>(Ca(t),t.value?(Ca(r),r.value?Zi:Ri):Ri)),"Core:or":ze(([t,r])=>(Ca(t),t.value?Zi:(Ca(r),r.value?Zi:Ri))),"Core:add":ze(([t,r])=>(ut(t),ut(r),ht(t.value+r.value))),"Core:sub":ze(([t,r])=>(ut(t),ut(r),ht(t.value-r.value))),"Core:mul":ze(([t,r])=>(ut(t),ut(r),ht(t.value*r.value))),"Core:pow":ze(([t,r])=>{ut(t),ut(r);const e=t.value**r.value;if(isNaN(e))throw new Wr("Invalid operation.");return ht(e)}),"Core:div":ze(([t,r])=>{ut(t),ut(r);const e=t.value/r.value;if(isNaN(e))throw new Wr("Invalid operation.");return ht(e)}),"Core:mod":ze(([t,r])=>(ut(t),ut(r),ht(t.value%r.value))),"Core:gt":ze(([t,r])=>(ut(t),ut(r),t.value>r.value?Zi:Ri)),"Core:lt":ze(([t,r])=>(ut(t),ut(r),t.value<r.value?Zi:Ri)),"Core:gteq":ze(([t,r])=>(ut(t),ut(r),t.value>=r.value?Zi:Ri)),"Core:lteq":ze(([t,r])=>(ut(t),ut(r),t.value<=r.value?Zi:Ri)),"Core:type":ze(([t])=>(Li(t),Vr(t.type))),"Core:to_str":ze(([t])=>(Li(t),t.type==="str"?t:t.type==="num"?Vr(t.value.toString()):Vr("?"))),"Core:range":ze(([t,r])=>(ut(t),ut(r),t.value<r.value?Fn(Array.from({length:r.value-t.value+1},(e,s)=>ht(s+t.value))):t.value>r.value?Fn(Array.from({length:t.value-r.value+1},(e,s)=>ht(t.value-s))):Fn([t]))),"Util:uuid":ze(()=>Vr(t_())),"Json:stringify":ze(([t])=>(Li(t),Vr(JSON.stringify(qv(t))))),"Json:parse":ze(([t])=>(zs(t),Vv(JSON.parse(t.value)))),"Json:parsable":ze(([t])=>{zs(t);try{JSON.parse(t.value)}catch{return rc(!1)}return rc(!0)}),"Date:now":ze(()=>ht(Date.now())),"Date:year":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getFullYear()))),"Date:month":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMonth()+1))),"Date:day":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getDate()))),"Date:hour":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getHours()))),"Date:minute":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getMinutes()))),"Date:second":ze(([t])=>(t&&ut(t),ht(new Date((t==null?void 0:t.value)||Date.now()).getSeconds()))),"Date:parse":ze(([t])=>(zs(t),ht(new Date(t.value).getTime()))),"Math:Infinity":ht(1/0),"Math:PI":ht(Math.PI),"Math:sin":ze(([t])=>(ut(t),ht(Math.sin(t.value)))),"Math:cos":ze(([t])=>(ut(t),ht(Math.cos(t.value)))),"Math:abs":ze(([t])=>(ut(t),ht(Math.abs(t.value)))),"Math:sqrt":ze(([t])=>{ut(t);const r=Math.sqrt(t.value);if(isNaN(r))throw new Wr("Invalid operation.");return ht(r)}),"Math:round":ze(([t])=>(ut(t),ht(Math.round(t.value)))),"Math:ceil":ze(([t])=>(ut(t),ht(Math.ceil(t.value)))),"Math:floor":ze(([t])=>(ut(t),ht(Math.floor(t.value)))),"Math:min":ze(([t,r])=>(ut(t),ut(r),ht(Math.min(t.value,r.value)))),"Math:max":ze(([t,r])=>(ut(t),ut(r),ht(Math.max(t.value,r.value)))),"Math:rnd":ze(([t,r])=>t&&t.type==="num"&&r&&r.type==="num"?ht(Math.floor(Math.random()*(Math.floor(r.value)-Math.ceil(t.value)+1)+Math.ceil(t.value))):ht(Math.random())),"Math:gen_rng":ze(([t])=>{if(Li(t),t.type!=="num"&&t.type!=="str")return Er;const r=No(t.value.toString());return ze(([e,s])=>e&&e.type==="num"&&s&&s.type==="num"?ht(Math.floor(r()*(Math.floor(s.value)-Math.ceil(e.value)+1)+Math.ceil(e.value))):ht(r()))}),"Num:to_hex":ze(([t])=>(ut(t),Vr(t.value.toString(16)))),"Num:from_hex":ze(([t])=>(zs(t),ht(parseInt(t.value,16)))),"Str:lf":Vr(`
`),"Str:lt":ze(([t,r])=>(zs(t),zs(r),t.value<r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Str:gt":ze(([t,r])=>(zs(t),zs(r),t.value>r.value?ht(-1):t.value===r.value?ht(0):ht(1))),"Obj:keys":ze(([t])=>(vo(t),Fn(Array.from(t.value.keys()).map(r=>Vr(r))))),"Obj:vals":ze(([t])=>(vo(t),Fn(Array.from(t.value.values())))),"Obj:kvs":ze(([t])=>(vo(t),Fn(Array.from(t.value.entries()).map(([r,e])=>Fn([Vr(r),e]))))),"Obj:get":ze(([t,r])=>(vo(t),zs(r),t.value.get(r.value)??Er)),"Obj:set":ze(([t,r,e])=>(vo(t),zs(r),Li(e),t.value.set(r.value,e),Er)),"Obj:has":ze(([t,r])=>(vo(t),zs(r),rc(t.value.has(r.value)))),"Obj:copy":ze(([t])=>(vo(t),Pg(new Map(t.value)))),"Async:interval":ze(async([t,r,e],s)=>{ut(t),Ao(r),e&&(Ca(e),e.value&&s.call(r,[]));const v=setInterval(()=>{s.call(r,[])},t.value),d=()=>{clearInterval(v)};return s.registerAbortHandler(d),ze(([],C)=>{clearInterval(v),C.unregisterAbortHandler(d)})}),"Async:timeout":ze(async([t,r],e)=>{ut(t),Ao(r);const s=setTimeout(()=>{e.call(r,[])},t.value),v=()=>{clearTimeout(s)};return e.registerAbortHandler(v),ze(([],d)=>{clearTimeout(s),d.unregisterAbortHandler(v)})})},Tf={num:{to_str:t=>ze(async(r,e)=>Vr(t.value.toString()))},str:{to_num:t=>ze(async(r,e)=>{const s=parseInt(t.value,10);return isNaN(s)?Er:ht(s)}),len:t=>ht(Cf(t.value)),replace:t=>ze(async([r,e],s)=>(zs(r),zs(e),Vr(t.value.split(r.value).join(e.value)))),index_of:t=>ze(async([r],e)=>(zs(r),ht(Pf(t.value,r.value)))),incl:t=>ze(async([r],e)=>(zs(r),t.value.includes(r.value)?Zi:Ri)),trim:t=>ze(async(r,e)=>Vr(t.value.trim())),upper:t=>ze(async(r,e)=>Vr(t.value.toUpperCase())),lower:t=>ze(async(r,e)=>Vr(t.value.toLowerCase())),split:t=>ze(async([r],e)=>(r&&zs(r),Fn(r?t.value.split(r?r.value:"").map(s=>Vr(s)):Zs(t.value).map(s=>Vr(s))))),slice:t=>ze(async([r,e],s)=>(ut(r),ut(e),Vr(_f(t.value,r.value,e.value)))),pick:t=>ze(async([r],e)=>{ut(r);const v=Zs(t.value)[r.value];return v?Vr(v):Er})},arr:{len:t=>ht(t.value.length),push:t=>ze(async([r],e)=>(Li(r),t.value.push(r),t)),unshift:t=>ze(async([r],e)=>(Li(r),t.value.unshift(r),t)),pop:t=>ze(async(r,e)=>t.value.pop()??Er),shift:t=>ze(async(r,e)=>t.value.shift()??Er),concat:t=>ze(async([r],e)=>(_c(r),Fn(t.value.concat(r.value)))),slice:t=>ze(async([r,e],s)=>(ut(r),ut(e),Fn(t.value.slice(r.value,e.value)))),join:t=>ze(async([r],e)=>(r&&zs(r),Vr(t.value.map(s=>s.type==="str"?s.value:"").join(r?r.value:"")))),map:t=>ze(async([r],e)=>{Ao(r);const s=t.value.map(async(v,d)=>await e.call(r,[v,ht(d)]));return Fn(await Promise.all(s))}),filter:t=>ze(async([r],e)=>{Ao(r);const s=[];for(let v=0;v<t.value.length;v++){const d=t.value[v],C=await e.call(r,[d,ht(v)]);Ca(C),C.value&&s.push(d)}return Fn(s)}),reduce:t=>ze(async([r,e],s)=>{Ao(r);const v=e!=null;let d=v?e:t.value[0];for(let C=v?0:1;C<t.value.length;C++){const P=t.value[C];d=await s.call(r,[d,P,ht(C)])}return d}),find:t=>ze(async([r],e)=>{Ao(r);for(let s=0;s<t.value.length;s++){const v=t.value[s],d=await e.call(r,[v,ht(s)]);if(Ca(d),d.value)return v}return Er}),incl:t=>ze(async([r],e)=>(Li(r),r.type!=="str"&&r.type!=="num"&&r.type!=="bool"&&r.type!=="null"?Ri:(v=>v.value.map(d=>d.type==="str"||d.type==="num"||d.type==="bool"?d.value:d.type==="null"?null:Symbol()))(t).includes(r.type==="null"?null:r.value)?Zi:Ri)),reverse:t=>ze(async(r,e)=>(t.value.reverse(),Er)),copy:t=>ze(async(r,e)=>Fn([...t.value])),sort:t=>ze(async([r],e)=>{const s=async(d,C)=>{if(d.length<=1)return d;const P=Math.floor(d.length/2),E=await s(d.slice(0,P),C),N=await s(d.slice(P),C);return v(E,N,C)},v=async(d,C,P)=>{const E=[];let N=0,S=0;for(;N<d.length&&S<C.length;){const B=d[N],L=C[S],Z=await e.call(P,[B,L]);ut(Z),Z.value<0?(E.push(d[N]),N++):(E.push(C[S]),S++)}return E.concat(d.slice(N)).concat(C.slice(S))};return Ao(r),_c(t),t.value=await s(t.value,r),t})}};var zi=function(t,r,e,s){var v=arguments.length,d=v<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,e):s,C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(t,r,e,s);else for(var P=t.length-1;P>=0;P--)(C=t[P])&&(d=(v<3?C(d):v>3?C(r,e,d):C(r,e))||d);return v>3&&d&&Object.defineProperty(r,e,d),d};const Xw=300,h_=Xw-1;class ja{constructor(r,e){he(this,"vars");he(this,"opts");he(this,"stepCount",0);he(this,"stop",!1);he(this,"scope");he(this,"abortHandlers",[]);this.opts=e??{};const s={print:ze(([v])=>{Li(v),this.opts.out&&this.opts.out(v)}),readline:ze(async v=>{const d=v[0];if(zs(d),this.opts.in==null)return Er;const C=await this.opts.in(d.value);return Vr(C)})};this.vars={...r,...c_,...s},this.scope=new Zu([new Map(Object.entries(this.vars))]),this.scope.opts.log=(v,d)=>{switch(v){case"add":this.log("var:add",d);break;case"read":this.log("var:read",d);break;case"write":this.log("var:write",d);break}}}async exec(r){if(r==null||r.length===0)return;await this.collectNs(r);const e=await this._run(r,this.scope);this.log("end",{val:e})}async execFn(r,e){return this._fn(r,e)}static collectMetadata(r){if(r==null||r.length===0)return;function e(v){switch(v.type){case"arr":return v.value.map(d=>e(d));case"bool":return v.value;case"null":return null;case"num":return v.value;case"obj":{const d={};for(const[C,P]of v.value.entries())d[C]=e(P);return d}case"str":return v.value;default:return}}const s=new Map;for(const v of r)switch(v.type){case"meta":{s.set(v.name,e(v.value));break}}return s}log(r,e){this.opts.log&&this.opts.log(r,e)}async collectNs(r){for(const e of r)switch(e.type){case"ns":{await this.collectNsMember(e);break}}}async collectNsMember(r){const e=this.scope.createChildScope();for(const s of r.members)switch(s.type){case"def":{const v=await this._eval(s.expr,e);e.add(s.name,v),this.scope.add(r.name+":"+s.name,v);break}case"ns":break;default:throw new Error("invalid ns member type: "+s.type)}}async _fn(r,e){if(r.native)return r.native(e,{call:this._fn,registerAbortHandler:this.registerAbortHandler,unregisterAbortHandler:this.unregisterAbortHandler})??Er;{const s=new Map;for(let d=0;d<(r.args??[]).length;d++)s.set(r.args[d],e[d]);const v=r.scope.createChildScope(s);return i_(await this._run(r.statements,v))}}async _eval(r,e){if(this.stop)return Er;if(this.stepCount%Xw===h_&&await new Promise(s=>setTimeout(s,5)),this.stepCount++,this.opts.maxStep&&this.stepCount>this.opts.maxStep)throw new Wr("max step exceeded");switch(r.type){case"call":{const s=await this._eval(r.target,e);Ao(s);const v=await Promise.all(r.args.map(d=>this._eval(d,e)));return this._fn(s,v)}case"if":{const s=await this._eval(r.cond,e);if(Ca(s),s.value)return this._eval(r.then,e);if(r.elseif&&r.elseif.length>0){for(const v of r.elseif){const d=await this._eval(v.cond,e);if(Ca(d),d.value)return this._eval(v.then,e)}if(r.else)return this._eval(r.else,e)}else if(r.else)return this._eval(r.else,e);return Er}case"match":{const s=await this._eval(r.about,e);for(const v of r.qs){const d=await this._eval(v.q,e);if(Lv(s,d))return await this._eval(v.a,e)}return r.default?await this._eval(r.default,e):Er}case"loop":{for(;;){const s=await this._run(r.statements,e.createChildScope());if(s.type==="break")break;if(s.type==="return")return s}return Er}case"for":{if(r.times){const s=await this._eval(r.times,e);ut(s);for(let v=0;v<s.value;v++){const d=await this._eval(r.for,e);if(d.type==="break")break;if(d.type==="return")return d}}else{const s=await this._eval(r.from,e),v=await this._eval(r.to,e);ut(s),ut(v);for(let d=s.value;d<s.value+v.value;d++){const C=await this._eval(r.for,e.createChildScope(new Map([[r.var,ht(d)]])));if(C.type==="break")break;if(C.type==="return")return C}}return Er}case"each":{const s=await this._eval(r.items,e);_c(s);for(const v of s.value){const d=await this._eval(r.for,e.createChildScope(new Map([[r.var,v]])));if(d.type==="break")break;if(d.type==="return")return d}return Er}case"def":{const s=await this._eval(r.expr,e);if(r.attr.length>0){const v=[];for(const d of r.attr)v.push({name:d.name,value:await this._eval(d.value,e)});s.attr=v}return e.add(r.name,s),Er}case"identifier":return e.get(r.name);case"assign":{const s=await this._eval(r.expr,e);return await this.assign(e,r.dest,s),Er}case"addAssign":{const s=await this._eval(r.dest,e);ut(s);const v=await this._eval(r.expr,e);return ut(v),await this.assign(e,r.dest,ht(s.value+v.value)),Er}case"subAssign":{const s=await this._eval(r.dest,e);ut(s);const v=await this._eval(r.expr,e);return ut(v),await this.assign(e,r.dest,ht(s.value-v.value)),Er}case"null":return Er;case"bool":return rc(r.value);case"num":return ht(r.value);case"str":return Vr(r.value);case"arr":return Fn(await Promise.all(r.value.map(async s=>await this._eval(s,e))));case"obj":{const s=new Map;for(const v of r.value.keys())s.set(v,await this._eval(r.value.get(v),e));return Pg(s)}case"prop":{const s=await this._eval(r.target,e);if(o_(s))return s.value.has(r.name)?s.value.get(r.name):Er;if(u_(s)){if(Object.hasOwn(Tf.num,r.name))return Tf.num[r.name](s);throw new Wr(`No such prop (${r.name}) in ${s.type}.`)}else if(l_(s)){if(Object.hasOwn(Tf.str,r.name))return Tf.str[r.name](s);throw new Wr(`No such prop (${r.name}) in ${s.type}.`)}else if(f_(s)){if(Object.hasOwn(Tf.arr,r.name))return Tf.arr[r.name](s);throw new Wr(`No such prop (${r.name}) in ${s.type}.`)}else throw new Wr(`Cannot read prop (${r.name}) of ${s.type}.`)}case"index":{const s=await this._eval(r.target,e);_c(s);const v=await this._eval(r.index,e);ut(v);const d=s.value[v.value];if(d===void 0)throw new ZC(`Index out of range. index: ${v.value} max: ${s.value.length-1}`);return d}case"not":{const s=await this._eval(r.expr,e);return Ca(s),rc(!s.value)}case"fn":return r_(r.args.map(s=>s.name),r.children,e);case"block":return this._run(r.statements,e.createChildScope());case"tmpl":{let s="";for(const v of r.tmpl)if(typeof v=="string")s+=v;else{const d=await this._eval(v,e);let C="";d.type==="str"?C=d.value:d.type==="num"&&(C=d.value.toString()),s+=C}return Vr(s)}case"return":{const s=await this._eval(r.expr,e);return this.log("block:return",{scope:e.name,val:s}),s_(s)}case"break":return this.log("block:break",{scope:e.name}),n_();case"continue":return this.log("block:continue",{scope:e.name}),a_();case"ns":return Er;case"meta":return Er;case"and":{const s=await this._eval(r.left,e);if(Ca(s),s.value){const v=await this._eval(r.right,e);return Ca(v),v}else return s}case"or":{const s=await this._eval(r.left,e);if(Ca(s),s.value)return s;{const v=await this._eval(r.right,e);return Ca(v),v}}default:throw new Error("invalid node type")}}async _run(r,e){this.log("block:enter",{scope:e.name});let s=Er;for(let v=0;v<r.length;v++){const d=r[v];if(s=await this._eval(d,e),s.type==="return")return this.log("block:return",{scope:e.name,val:s.value}),s;if(s.type==="break")return this.log("block:break",{scope:e.name}),s;if(s.type==="continue")return this.log("block:continue",{scope:e.name}),s}return this.log("block:leave",{scope:e.name,val:s}),s}registerAbortHandler(r){this.abortHandlers.push(r)}unregisterAbortHandler(r){this.abortHandlers=this.abortHandlers.filter(e=>e!==r)}abort(){this.stop=!0;for(const r of this.abortHandlers)r();this.abortHandlers=[]}async assign(r,e,s){if(e.type==="identifier")r.assign(e.name,s);else if(e.type==="index"){const v=await this._eval(e.target,r);_c(v);const d=await this._eval(e.index,r);ut(d),v.value[d.value]=s}else if(e.type==="prop"){const v=await this._eval(e.target,r);vo(v),v.value.set(e.name,s)}else throw new Wr("The left-hand side of an assignment expression must be a variable or a property/index access.")}}zi([Dt],ja.prototype,"exec",null);zi([Dt],ja.prototype,"execFn",null);zi([Dt],ja.prototype,"log",null);zi([Dt],ja.prototype,"collectNs",null);zi([Dt],ja.prototype,"collectNsMember",null);zi([Dt],ja.prototype,"_fn",null);zi([Dt],ja.prototype,"_eval",null);zi([Dt],ja.prototype,"_run",null);zi([Dt],ja.prototype,"registerAbortHandler",null);zi([Dt],ja.prototype,"unregisterAbortHandler",null);zi([Dt],ja.prototype,"abort",null);zi([Dt],ja.prototype,"assign",null);zi([Dt],ja,"collectMetadata",null);function p_(t,r){function e(){this.constructor=t}e.prototype=r.prototype,t.prototype=new e}function hf(t,r,e,s){var v=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(v,hf.prototype),v.expected=r,v.found=e,v.location=s,v.name="SyntaxError",v}p_(hf,Error);function Wp(t,r,e){return e=e||" ",t.length>r?t:(r-=t.length,e+=e.repeat(r),t+e.slice(0,r))}hf.prototype.format=function(t){var r="Error: "+this.message;if(this.location){var e=null,s;for(s=0;s<t.length;s++)if(t[s].source===this.location.source){e=t[s].text.split(/\r\n|\n|\r/g);break}var v=this.location.start,d=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(v):v,C=this.location.source+":"+d.line+":"+d.column;if(e){var P=this.location.end,E=Wp("",d.line.toString().length," "),N=e[v.line-1],S=v.line===P.line?P.column:N.length+1,B=S-v.column||1;r+=`
 --> `+C+`
`+E+` |
`+d.line+" | "+N+`
`+E+" | "+Wp("",v.column-1," ")+Wp("",B,"^")}else r+=`
 at `+C}return r};hf.buildMessage=function(t,r){var e={literal:function(N){return'"'+v(N.text)+'"'},class:function(N){var S=N.parts.map(function(B){return Array.isArray(B)?d(B[0])+"-"+d(B[1]):d(B)});return"["+(N.inverted?"^":"")+S.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(N){return N.description}};function s(N){return N.charCodeAt(0).toString(16).toUpperCase()}function v(N){return N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function d(N){return N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(S){return"\\x0"+s(S)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(S){return"\\x"+s(S)})}function C(N){return e[N.type](N)}function P(N){var S=N.map(C),B,L;if(S.sort(),S.length>0){for(B=1,L=1;B<S.length;B++)S[B-1]!==S[B]&&(S[L]=S[B],L++);S.length=L}switch(S.length){case 1:return S[0];case 2:return S[0]+" or "+S[1];default:return S.slice(0,-1).join(", ")+", or "+S[S.length-1]}}function E(N){return N?'"'+v(N)+'"':"end of input"}return"Expected "+P(t)+" but "+E(r)+" found."};function Qd(t,r){r=r!==void 0?r:{};var e={},s=r.grammarSource,v={Preprocess:j,Main:cn},d=j,C="//",P="/*",E="*/",N="(",S=")",B="::",L="{",Z="}",ge="###",le="let",pe=":",be="=",J="var",K="<:",W="#[",Q="]",re="each",Y=",",ie="for",ae="return",Te="loop",Ie="break",ke="continue",at="+=",vt="-=",sr="\\",At="||",mt="&&",Ze="==",$t="!=",Qt="<=",Xt=">=",pt="<",Lr=">",Yt="+",Mr="-",ir="*",_r="^",Jr="/",nr="%",Zr="!",ar="[",Pr=".",G="if",ee="elif",fe="else",Ce="match",ve="=>",Ae="eval",Re="`",Me='"',Se="'",$e='\\"',it="\\'",qe="true",Ye="false",Qe="null",ot=";",Pt="@",xt="@(",Ut=`\r
`,yt=/^[A-Z0-9_:]/i,lt=/^[^`{]/,vr=/^[{}`]/,cs=/^[+\-]/,is=/^[1-9]/,Ct=/^[0-9]/,Rt=/^[A-Z_]/i,Mn=/^[A-Z0-9_]/i,gr=/^[\r\n]/,el=/^[ \t\r\n]/,tl=/^[ \t]/,lr=du(),Bt=ue("//",!1),Qr=ue("/*",!1),qn=ue("*/",!1),kt=ue("(",!1),ft=ue(")",!1),Sr=ue("::",!1),Gt=ue("{",!1),st=ue("}",!1),Lt=ue("###",!1),bs=ue("let",!1),Ht=ue(":",!1),qt=ue("=",!1),Xr=ue("var",!1),Da=ue("<:",!1),Tr=ue("#[",!1),hs=ue("]",!1),Ns=ue("each",!1),ct=ue(",",!1),Ot=ue("for",!1),Xs=ue("return",!1),Nr=D([["A","Z"],["0","9"],"_",":"],!1,!0),Fr=ue("loop",!1),rl=ue("break",!1),Ua=ue("continue",!1),sl=ue("+=",!1),nl=ue("-=",!1),Ba=ue("\\",!1),La=ue("||",!1),al=ue("&&",!1),il=ue("==",!1),ll=ue("!=",!1),ul=ue("<=",!1),Vn=ue(">=",!1),Ys=ue("<",!1),zn=ue(">",!1),Ha=ue("+",!1),ol=ue("-",!1),qa=ue("*",!1),Fs=ue("^",!1),fl=ue("/",!1),cl=ue("%",!1),hl=ue("!",!1),As=ue("[",!1),Os=ue(".",!1),Kn=ue("if",!1),en=ue("elif",!1),tn=ue("else",!1),pl=ue("match",!1),rn=ue("=>",!1),ps=ue("eval",!1),Is=ue("`",!1),Ar=D(["`","{"],!0,!1),sn=D(["{","}","`"],!1,!1),nn=ue('"',!1),an=ue("'",!1),vs=ue('\\"',!1),ln=ue("\\'",!1),Rs=D(["+","-"],!1,!1),Va=D([["1","9"]],!1,!1),er=D([["0","9"]],!1,!1),za=ue("true",!1),dr=ue("false",!1),vl=ue("null",!1),un=ue(";",!1),gl=ue("@",!1),js=ue("@(",!1),dl=D([["A","Z"],"_"],!1,!0),Wn=D([["A","Z"],["0","9"],"_"],!1,!0),yl=ue(`\r
`,!1),Ka=D(["\r",`
`],!1,!1),wl=D([" ","	","\r",`
`],!1,!1),ml=D([" ","	"],!1,!1),Wa=function(a){return a.join("")},$l=function(){return F()},Ga=function(){return F()},xl=function(){return""},Ja=function(){return""},bl=function(a){return a??[]},Za=function(a,l){return l},Al=function(a,l){return[a,...l]},Gn=function(a,l){return l},Cl=function(a,l){return[a,...l]},Jn=function(a,l){return l},_l=function(a,l){return[a,...l]},Qa=function(a){return a},Pl=function(a,l){return w("ns",{name:a,members:l})},kl=function(a,l){return w("meta",{name:a,value:l})},El=function(a){return w("meta",{name:null,value:a})},Ml=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!1,attr:[]})},Sl=function(a,l,$){return w("def",{name:a,varType:l,expr:$,mut:!0,attr:[]})},Tl=function(a){return w("identifier",{name:"print",chain:[w("callChain",{args:[a]})]})},Nl=function(a,l){return w("attr",{name:a,value:l??w("bool",{value:!0})})},Fl=function(a,l,$){return w("each",{var:a,items:l,for:$})},Ol=function(a,l,$){return w("each",{var:a,items:l,for:$})},Il=function(a,l){return l},Rl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},jl=function(a,l){return l},Dl=function(a,l,$,p){return w("for",{var:a,from:l??w("num",{value:0}),to:$,for:p})},Ul=function(a,l){return w("for",{times:a,for:l})},Xa=function(a,l){return w("for",{times:a,for:l})},Bl=function(a){return w("return",{expr:a})},Ll=function(a){return w("loop",{statements:a})},Hl=function(){return w("break",{})},ql=function(){return w("continue",{})},Vl=function(a,l,$){return l==="+="?w("addAssign",{dest:a,expr:$}):l==="-="?w("subAssign",{dest:a,expr:$}):w("assign",{dest:a,expr:$})},Zn=function(a,l,$){return{op:l,term:$}},zl=function(a,l){return w("infix",{operands:[a,...l.map($=>$.term)],operators:l.map($=>$.op)})},Ya=function(){return F()},Kl=function(a){return w("not",{expr:a})},Wl=function(a,l){return{...a,chain:l}},Gl=function(a){return w("callChain",{args:a??[]})},ei=function(a,l){return l},Jl=function(a,l){return[a,...l]},Qn=function(a){return w("indexChain",{index:a})},Zl=function(a){return w("propChain",{name:a})},Ql=function(a,l,$,p){return w("if",{cond:a,then:l,elseif:$??[],else:p})},Xl=function(a,l){return[a,...l]},Yl=function(a,l){return{cond:a,then:l}},eu=function(a){return a},ti=function(a,l,$){return{q:l,a:$}},ri=function(a,l,$){return w("match",{about:a,qs:l??[],default:$})},si=function(a){return w("block",{statements:a})},ni=function(a){return w("identifier",{name:a})},tu=function(a){return w("tmpl",{tmpl:a})},ru=function(a){return a.join("")},ai=function(a){return a},su=function(a){return w("str",{value:a.join("")})},ii=function(a){return a},li=function(a){return w("str",{value:a.join("")})},nu=function(){return'"'},ui=function(){return"'"},au=function(){return w("num",{value:parseFloat(F())})},iu=function(){return w("num",{value:parseFloat(F())})},oi=function(){return w("num",{value:parseInt(F(),10)})},lu=function(){return w("num",{value:parseInt(F(),10)})},fi=function(){return w("bool",{value:!0})},uu=function(){return w("bool",{value:!1})},ou=function(){return w("null",{})},ci=function(a,l){return{k:a,v:l}},fu=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},hi=function(a){return a},Xn=function(a){return w("arr",{value:a})},cu=function(a,l){return{name:a,argType:l}},Yn=function(a,l){return[a,...l]},hu=function(a,l,$,p,n,u){return(a.length>0||$.length>0)&&Ds("Cannot use spaces before or after the function name."),w("def",{name:l,expr:w("fn",{args:p??[],retType:n},u??[]),mut:!1,attr:[]})},pu=function(a,l,$){return w("fn",{args:a??[],retType:l},$??[])},pi=function(a){return a},vu=function(a){return w("arr",{value:a})},vi=function(a,l){return{k:a,v:l}},gi=function(a){const l=new Map;for(const $ of a)l.set($.k,$.v);return w("obj",{value:l})},gu=function(a,l){return w("fnTypeSource",{args:a??[],result:l})},di=function(a,l){return[a,...l]},c=function(a,l){return w("namedTypeSource",{name:a,inner:l})},te=function(a){return w("namedTypeSource",{name:a,inner:null})},Cs=function(){return F()},yr=function(){return F()},on=function(a){return w("block",{statements:a??[]})},i=0,T=0,Yr=[{line:1,column:1}],o=0,X=[],O=0,R={},_t;if("startRule"in r){if(!(r.startRule in v))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');d=v[r.startRule]}function F(){return t.substring(T,i)}function V(){return Us(T,i)}function Ds(a,l){throw l=l!==void 0?l:Us(T,i),yi(a,l)}function ue(a,l){return{type:"literal",text:a,ignoreCase:l}}function D(a,l,$){return{type:"class",parts:a,inverted:l,ignoreCase:$}}function du(){return{type:"any"}}function de(){return{type:"end"}}function tr(a){var l=Yr[a],$;if(l)return l;for($=a-1;!Yr[$];)$--;for(l=Yr[$],l={line:l.line,column:l.column};$<a;)t.charCodeAt($)===10?(l.line++,l.column=1):l.column++,$++;return Yr[a]=l,l}function Us(a,l,$){var p=tr(a),n=tr(l),u={source:s,start:{offset:a,line:p.line,column:p.column},end:{offset:l,line:n.line,column:n.column}};return u}function U(a){i<o||(i>o&&(o=i,X=[]),X.push(a))}function yi(a,l){return new hf(a,null,null,l)}function fn(a,l,$){return new hf(hf.buildMessage(a,l),a,l,$)}function j(){var a,l,$,p=i*76+0,n=R[p];if(n)return i=n.nextPos,n.result;for(a=i,l=[],$=_s();$!==e;)l.push($),$=_s();return T=a,l=Wa(l),a=l,R[p]={nextPos:i,result:a},a}function _s(){var a,l,$=i*76+1,p=R[$];return p?(i=p.nextPos,p.result):(a=i,l=vn(),l!==e&&(T=a,l=$l()),a=l,a===e&&(a=i,l=gn(),l!==e&&(T=a,l=Ga()),a=l,a===e&&(a=ea(),a===e&&(t.length>i?(a=t.charAt(i),i++):(a=e,O===0&&U(lr))))),R[$]={nextPos:i,result:a},a)}function ea(){var a,l,$,p,n,u,y=i*76+2,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,2)===C?(l=C,i+=2):(l=e,O===0&&U(Bt)),l!==e){for($=[],p=i,n=i,O++,u=f(),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,u=f(),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);T=a,a=xl()}else i=a,a=e;if(a===e)if(a=i,t.substr(i,2)===P?(l=P,i+=2):(l=e,O===0&&U(Qr)),l!==e){for($=[],p=i,n=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&U(qn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.substr(i,2)===E?(u=E,i+=2):(u=e,O===0&&U(qn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr)),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);t.substr(i,2)===E?(p=E,i+=2):(p=e,O===0&&U(qn)),p!==e?(T=a,a=Ja()):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function cn(){var a,l,$,p,n,u=i*76+3,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();for($=Ps(),$===e&&($=null),p=[],n=g();n!==e;)p.push(n),n=g();return T=a,a=bl($),R[u]={nextPos:i,result:a},a}function Ps(){var a,l,$,p,n,u,y,h,x=i*76+4,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=hn(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=hn(),h!==e?(T=p,p=Za(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=hn(),h!==e?(T=p,p=Za(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=Al(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function et(){var a,l,$,p,n,u,y,h,x=i*76+5,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Or(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Or(),h!==e?(T=p,p=Gn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Or(),h!==e?(T=p,p=Gn(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=Cl(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function es(){var a,l,$,p,n,u,y,h,x=i*76+6,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Cr(),l!==e){for($=[],p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(T=p,p=Jn(l,h)):(i=p,p=e)}else i=p,p=e;for(;p!==e;){for($.push(p),p=i,n=[],u=b();u!==e;)n.push(u),u=b();if(u=ne(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=Cr(),h!==e?(T=p,p=Jn(l,h)):(i=p,p=e)}else i=p,p=e}T=a,a=_l(l,$)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function hn(){var a,l=i*76+7,$=R[l];return $?(i=$.nextPos,$.result):(a=Bs(),a===e&&(a=wi(),a===e&&(a=Cr())),R[l]={nextPos:i,result:a},a)}function Or(){var a,l=i*76+8,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=Bs())),R[l]={nextPos:i,result:a},a)}function Cr(){var a,l=i*76+9,$=R[l];return $?(i=$.nextPos,$.result):(a=ts(),a===e&&(a=wr(),a===e&&(a=mi(),a===e&&(a=mu(),a===e&&(a=yu(),a===e&&(a=$i(),a===e&&(a=wu(),a===e&&(a=rs(),a===e&&(a=xi(),a===e&&(a=$u(),a===e&&(a=xu(),a===e&&(a=Xe()))))))))))),R[l]={nextPos:i,result:a},a)}function Xe(){var a,l=i*76+10,$=R[l];return $?(i=$.nextPos,$.result):(a=bi(),a===e&&(a=gs()),R[l]={nextPos:i,result:a},a)}function gs(){var a,l=i*76+11,$=R[l];return $?(i=$.nextPos,$.result):(a=bu(),a===e&&(a=_u(),a===e&&(a=ns(),a===e&&(a=ks()))),R[l]={nextPos:i,result:a},a)}function ks(){var a,l,$,p,n,u,y=i*76+12,h=R[y];if(h)return i=h.nextPos,h.result;if(a=ki(),a===e&&(a=pn(),a===e&&(a=vn(),a===e&&(a=gn(),a===e&&(a=Ei(),a===e&&(a=ca(),a===e&&(a=pa(),a===e&&(a=va(),a===e&&(a=Cu(),a===e&&(a=Ai(),a===e&&(a=Au(),a===e)))))))))))if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e?(T=a,a=Qa(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function We(){var a,l=i*76+13,$=R[l];return $?(i=$.nextPos,$.result):(a=Ei(),a===e&&(a=gn(),a===e&&(a=ca(),a===e&&(a=ya(),a===e&&(a=Si(),a===e&&(a=pa()))))),R[l]={nextPos:i,result:a},a)}function Bs(){var a,l,$,p,n,u,y,h,x,m,_=i*76+14,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===B?(l=B,i+=2):(l=e,O===0&&U(Sr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(t.charCodeAt(i)===123?(u=L,i++):(u=e,O===0&&U(Gt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=et(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();t.charCodeAt(i)===125?(m=Z,i++):(m=e,O===0&&U(st)),m!==e?(T=a,a=Pl(p,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function wi(){var a,l,$,p,n,u,y=i*76+15,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Ge(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();u=We(),u!==e?(T=a,a=kl(p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ge?(l=ge,i+=3):(l=e,O===0&&U(Lt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();p=We(),p!==e?(T=a,a=El(p)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ts(){var a,l,$,p,n,u,y,h,x,m=i*76+16,_=R[m];if(_)return i=_.nextPos,_.result;if(a=i,t.substr(i,3)===le?(l=le,i+=3):(l=e,O===0&&U(bs)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(T=a,a=Ml(p,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===J?(l=J,i+=3):(l=e,O===0&&U(Xr)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===58?(y=pe,i++):(y=e,O===0&&U(Ht)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=tt(),x!==e?n=x:(i=n,n=e)}else i=n,n=e;for(n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===61?(y=be,i++):(y=e,O===0&&U(qt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();x=Xe(),x!==e?(T=a,a=Sl(p,n,x)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[m]={nextPos:i,result:a},a}function mi(){var a,l,$,p,n=i*76+17,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,t.substr(i,2)===K?(l=K,i+=2):(l=e,O===0&&U(Da)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();p=Xe(),p!==e?(T=a,a=Tl(p)):(i=a,a=e)}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function yu(){var a,l,$,p,n,u,y,h=i*76+18,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,2)===W?(l=W,i+=2):(l=e,O===0&&U(Tr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Ge(),p!==e){for(n=i,u=[],y=g();y!==e;)u.push(y),y=g();for(y=We(),y!==e?n=y:(i=n,n=e),n===e&&(n=null),u=[],y=g();y!==e;)u.push(y),y=g();t.charCodeAt(i)===93?(y=Q,i++):(y=e,O===0&&U(hs)),y!==e?(T=a,a=Nl(p,n)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function $i(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+19,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Ns)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(t.substr(i,3)===le?(n=le,i+=3):(n=e,O===0&&U(bs)),n!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();for(t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e)if(t.charCodeAt(i)===41?(A=S,i++):(A=e,O===0&&U(ft)),A!==e){for(M=[],I=g();I!==e;)M.push(I),I=g();I=De(),I!==e?(T=a,a=Fl(y,_,I)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,4)===re?(l=re,i+=4):(l=e,O===0&&U(Ns)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===le?(p=le,i+=3):(p=e,O===0&&U(bs)),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(m=Xe(),m!==e){if(_=[],A=g(),A!==e)for(;A!==e;)_.push(A),A=g();else _=e;_!==e?(A=De(),A!==e?(T=a,a=Ol(u,m,A)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function wu(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z=i*76+20,se=R[z];if(se)return i=se.nextPos,se.result;if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(t.substr(i,3)===le?(n=le,i+=3):(n=e,O===0&&U(bs)),n!==e){if(u=[],y=g(),y!==e)for(;y!==e;)u.push(y),y=g();else u=e;if(u!==e)if(y=Ge(),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=i,t.charCodeAt(i)===61?(m=be,i++):(m=e,O===0&&U(qt)),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();A=Xe(),A!==e?(T=x,x=Il(y,A)):(i=x,x=e)}else i=x,x=e;for(x===e&&(x=null),t.charCodeAt(i)===44?(m=Y,i++):(m=e,O===0&&U(ct)),m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();if(A=Xe(),A!==e)if(t.charCodeAt(i)===41?(M=S,i++):(M=e,O===0&&U(ft)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=De(),H!==e?(T=a,a=Rl(y,x,A,H)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(t.substr(i,3)===le?(p=le,i+=3):(p=e,O===0&&U(bs)),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(h=i,t.charCodeAt(i)===61?(x=be,i++):(x=e,O===0&&U(qt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=Xe(),_!==e?(T=h,h=jl(u,_)):(i=h,h=e)}else i=h,h=e;for(h===e&&(h=null),t.charCodeAt(i)===44?(x=Y,i++):(x=e,O===0&&U(ct)),x===e&&(x=null),m=[],_=g();_!==e;)m.push(_),_=g();if(_=Xe(),_!==e){if(A=[],M=g(),M!==e)for(;M!==e;)A.push(M),M=g();else A=e;A!==e?(M=De(),M!==e?(T=a,a=Dl(u,h,_,M)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===40?(p=N,i++):(p=e,O===0&&U(kt)),p!==e)if(n=Xe(),n!==e)if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();h=De(),h!==e?(T=a,a=Ul(n,h)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,t.substr(i,3)===ie?(l=ie,i+=3):(l=e,O===0&&U(Ot)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;n!==e?(u=De(),u!==e?(T=a,a=Xa(p,u)):(i=a,a=e)):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e}}return R[z]={nextPos:i,result:a},a}function mu(){var a,l,$,p,n,u=i*76+21,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,6)===ae?(l=ae,i+=6):(l=e,O===0&&U(Xs)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();n=Xe(),n!==e?(T=a,a=Bl(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function rs(){var a,l,$,p,n,u,y,h,x=i*76+22,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Te?(l=Te,i+=4):(l=e,O===0&&U(Fr)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=L,i++):(p=e,O===0&&U(Gt)),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=Z,i++):(h=e,O===0&&U(st)),h!==e?(T=a,a=Ll(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function xi(){var a,l,$,p,n=i*76+23,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ie?(l=Ie,i+=5):(l=e,O===0&&U(rl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=Hl()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function $u(){var a,l,$,p,n=i*76+24,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,8)===ke?(l=ke,i+=8):(l=e,O===0&&U(Ua)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=ql()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function xu(){var a,l,$,p,n,u,y=i*76+25,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.substr(i,2)===at?(p=at,i+=2):(p=e,O===0&&U(sl)),p===e&&(t.substr(i,2)===vt?(p=vt,i+=2):(p=e,O===0&&U(nl)),p===e&&(t.charCodeAt(i)===61?(p=be,i++):(p=e,O===0&&U(qt)))),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();u=Xe(),u!==e?(T=a,a=Vl(l,p,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function bi(){var a,l,$,p,n,u,y,h,x=i*76+26,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=gs(),l!==e){for($=[],p=i,n=[],u=ss();u!==e;)n.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(T=p,p=Zn(l,u,h)):(i=p,p=e)}else i=p,p=e;if(p!==e)for(;p!==e;){for($.push(p),p=i,n=[],u=ss();u!==e;)n.push(u),u=ss();if(u=ta(),u!==e){for(y=[],h=ss();h!==e;)y.push(h),h=ss();h=gs(),h!==e?(T=p,p=Zn(l,u,h)):(i=p,p=e)}else i=p,p=e}else $=e;$!==e?(T=a,a=zl(l,$)):(i=a,a=e)}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function ss(){var a,l,$,p=i*76+27,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?($=ne(),$!==e?(l=[l,$],a=l):(i=a,a=e)):(i=a,a=e),a===e&&(a=b()),R[p]={nextPos:i,result:a},a)}function ta(){var a,l,$=i*76+28,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===At?(l=At,i+=2):(l=e,O===0&&U(La)),l===e&&(t.substr(i,2)===mt?(l=mt,i+=2):(l=e,O===0&&U(al)),l===e&&(t.substr(i,2)===Ze?(l=Ze,i+=2):(l=e,O===0&&U(il)),l===e&&(t.substr(i,2)===$t?(l=$t,i+=2):(l=e,O===0&&U(ll)),l===e&&(t.substr(i,2)===Qt?(l=Qt,i+=2):(l=e,O===0&&U(ul)),l===e&&(t.substr(i,2)===Xt?(l=Xt,i+=2):(l=e,O===0&&U(Vn)),l===e&&(t.charCodeAt(i)===60?(l=pt,i++):(l=e,O===0&&U(Ys)),l===e&&(t.charCodeAt(i)===62?(l=Lr,i++):(l=e,O===0&&U(zn)),l===e&&(t.charCodeAt(i)===43?(l=Yt,i++):(l=e,O===0&&U(Ha)),l===e&&(t.charCodeAt(i)===45?(l=Mr,i++):(l=e,O===0&&U(ol)),l===e&&(t.charCodeAt(i)===42?(l=ir,i++):(l=e,O===0&&U(qa)),l===e&&(t.charCodeAt(i)===94?(l=_r,i++):(l=e,O===0&&U(Fs)),l===e&&(t.charCodeAt(i)===47?(l=Jr,i++):(l=e,O===0&&U(fl)),l===e&&(t.charCodeAt(i)===37?(l=nr,i++):(l=e,O===0&&U(cl))))))))))))))),l!==e&&(T=a,l=Ya()),a=l,R[$]={nextPos:i,result:a},a)}function Ai(){var a,l,$,p=i*76+29,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===33?(l=Zr,i++):(l=e,O===0&&U(hl)),l!==e?($=Xe(),$!==e?(T=a,a=Kl($)):(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function ns(){var a,l,$,p,n=i*76+30,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,l=ks(),l!==e){if($=[],p=ra(),p===e&&(p=Ci(),p===e&&(p=na())),p!==e)for(;p!==e;)$.push(p),p=ra(),p===e&&(p=Ci(),p===e&&(p=na()));else $=e;$!==e?(T=a,a=Wl(l,$)):(i=a,a=e)}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function ra(){var a,l,$,p,n,u,y=i*76+31,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===40?(l=N,i++):(l=e,O===0&&U(kt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=sa(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e?(T=a,a=Gl(p)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function sa(){var a,l,$,p,n,u,y=i*76+32,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Xe(),l!==e){for($=[],p=i,n=k(),n!==e?(u=Xe(),u!==e?(T=p,p=ei(l,u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=Xe(),u!==e?(T=p,p=ei(l,u)):(i=p,p=e)):(i=p,p=e);T=a,a=Jl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ci(){var a,l,$,p,n,u,y=i*76+33,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=Xe(),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=Qn(p)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function na(){var a,l,$,p=i*76+34,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===46?(l=Pr,i++):(l=e,O===0&&U(Os)),l!==e?($=Ge(),$!==e?(T=a,a=Zl($)):(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function bu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+35,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===G?(l=G,i+=2):(l=e,O===0&&U(Kn)),l!==e){if($=[],p=g(),p!==e)for(;p!==e;)$.push(p),p=g();else $=e;if($!==e)if(p=Xe(),p!==e){if(n=[],u=g(),u!==e)for(;u!==e;)n.push(u),u=g();else n=e;if(n!==e)if(u=De(),u!==e){if(y=i,h=[],x=g(),x!==e)for(;x!==e;)h.push(x),x=g();else h=e;if(h!==e?(x=_i(),x!==e?y=x:(i=y,y=e)):(i=y,y=e),y===e&&(y=null),h=i,x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;x!==e?(m=Pi(),m!==e?h=m:(i=h,h=e)):(i=h,h=e),h===e&&(h=null),T=a,a=Ql(p,u,y,h)}else i=a,a=e;else i=a,a=e}else i=a,a=e;else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function _i(){var a,l,$,p,n,u,y=i*76+36,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ls(),l!==e){for($=[],p=i,n=[],u=g();u!==e;)n.push(u),u=g();for(u=Ls(),u!==e?p=u:(i=p,p=e);p!==e;){for($.push(p),p=i,n=[],u=g();u!==e;)n.push(u),u=g();u=Ls(),u!==e?p=u:(i=p,p=e)}T=a,a=Xl(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function Ls(){var a,l,$,p,n,u,y,h=i*76+37,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,t.substr(i,4)===ee?(l=ee,i+=4):(l=e,O===0&&U(en)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();if(n=Xe(),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=De(),y!==e?(T=a,a=Yl(n,y)):(i=a,a=e)}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[h]={nextPos:i,result:a},a}function Pi(){var a,l,$,p,n,u=i*76+38,y=R[u];if(y)return i=y.nextPos,y.result;if(a=i,t.substr(i,4)===fe?(l=fe,i+=4):(l=e,O===0&&U(tn)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();n=De(),n!==e?(T=a,a=eu(n)):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[u]={nextPos:i,result:a},a}function ki(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=i*76+39,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.substr(i,5)===Ce?(l=Ce,i+=5):(l=e,O===0&&U(pl)),l!==e)if($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();if(n=Xe(),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();if(t.charCodeAt(i)===123?(y=L,i++):(y=e,O===0&&U(Gt)),y!==e){for(h=[],x=g();x!==e;)h.push(x),x=g();if(x=[],m=i,_=Xe(),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();T=m,m=ti(n,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;if(m!==e)for(;m!==e;)if(x.push(m),m=i,_=Xe(),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();T=m,m=ti(n,_,H)}else i=m,m=e}else i=m,m=e}else i=m,m=e;else x=e;if(x!==e){if(m=i,t.charCodeAt(i)===42?(_=ir,i++):(_=e,O===0&&U(qa)),_!==e){for(A=[],M=g();M!==e;)A.push(M),M=g();if(t.substr(i,2)===ve?(M=ve,i+=2):(M=e,O===0&&U(rn)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();if(H=De(),H!==e){for(z=[],se=g();se!==e;)z.push(se),se=g();m=H}else i=m,m=e}else i=m,m=e}else i=m,m=e;for(m===e&&(m=null),_=[],A=g();A!==e;)_.push(A),A=g();t.charCodeAt(i)===125?(A=Z,i++):(A=e,O===0&&U(st)),A!==e?(T=a,a=ri(n,x,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function pn(){var a,l,$,p,n,u,y,h,x=i*76+40,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,t.substr(i,4)===Ae?(l=Ae,i+=4):(l=e,O===0&&U(ps)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(t.charCodeAt(i)===123?(p=L,i++):(p=e,O===0&&U(Gt)),p!==e){for(n=[],u=g();u!==e;)n.push(u),u=g();if(u=es(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();t.charCodeAt(i)===125?(h=Z,i++):(h=e,O===0&&U(st)),h!==e?(T=a,a=si(u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[x]={nextPos:i,result:a},a}function Au(){var a,l,$=i*76+41,p=R[$];return p?(i=p.nextPos,p.result):(a=i,l=Ti(),l!==e&&(T=a,l=ni(l)),a=l,R[$]={nextPos:i,result:a},a)}function vn(){var a,l,$,p,n,u,y=i*76+42,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===96?(l=Re,i++):(l=e,O===0&&U(Is)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Is)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=aa(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===96?(u=Re,i++):(u=e,O===0&&U(Is)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=aa(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===96?(p=Re,i++):(p=e,O===0&&U(Is)),p!==e?(T=a,a=tu($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function aa(){var a,l,$,p,n,u,y=i*76+43,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Xe(),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();t.charCodeAt(i)===125?(u=Z,i++):(u=e,O===0&&U(st)),u!==e?a=p:(i=a,a=e)}else i=a,a=e}else i=a,a=e;if(a===e){if(a=i,l=[],$=ia(),$!==e)for(;$!==e;)l.push($),$=ia();else l=e;l!==e&&(T=a,l=ru(l)),a=l}return R[y]={nextPos:i,result:a},a}function ia(){var a,l=i*76+44,$=R[l];return $?(i=$.nextPos,$.result):(a=la(),a===e&&(lt.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ar))),R[l]={nextPos:i,result:a},a)}function la(){var a,l,$,p=i*76+45,n=R[p];return n?(i=n.nextPos,n.result):(a=i,t.charCodeAt(i)===92?(l=sr,i++):(l=e,O===0&&U(Ba)),l!==e?(vr.test(t.charAt(i))?($=t.charAt(i),i++):($=e,O===0&&U(sn)),$!==e?a=$:(i=a,a=e)):(i=a,a=e),R[p]={nextPos:i,result:a},a)}function gn(){var a,l,$,p,n,u,y=i*76+46,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===34?(l=Me,i++):(l=e,O===0&&U(nn)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===34?(u=Me,i++):(u=e,O===0&&U(nn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ai(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===34?(u=Me,i++):(u=e,O===0&&U(nn)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=ua(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ai(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===34?(p=Me,i++):(p=e,O===0&&U(nn)),p!==e?(T=a,a=su($)):(i=a,a=e)}else i=a,a=e;if(a===e)if(a=i,t.charCodeAt(i)===39?(l=Se,i++):(l=e,O===0&&U(an)),l!==e){for($=[],p=i,n=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(an)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=dn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ii(u)):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=i,O++,t.charCodeAt(i)===39?(u=Se,i++):(u=e,O===0&&U(an)),O--,u===e?n=void 0:(i=n,n=e),n!==e?(u=dn(),u===e&&(t.length>i?(u=t.charAt(i),i++):(u=e,O===0&&U(lr))),u!==e?(T=p,p=ii(u)):(i=p,p=e)):(i=p,p=e);t.charCodeAt(i)===39?(p=Se,i++):(p=e,O===0&&U(an)),p!==e?(T=a,a=li($)):(i=a,a=e)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ua(){var a,l,$=i*76+47,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===$e?(l=$e,i+=2):(l=e,O===0&&U(vs)),l!==e&&(T=a,l=nu()),a=l,R[$]={nextPos:i,result:a},a)}function dn(){var a,l,$=i*76+48,p=R[$];return p?(i=p.nextPos,p.result):(a=i,t.substr(i,2)===it?(l=it,i+=2):(l=e,O===0&&U(ln)),l!==e&&(T=a,l=ui()),a=l,R[$]={nextPos:i,result:a},a)}function Ei(){var a,l=i*76+49,$=R[l];return $?(i=$.nextPos,$.result):(a=oa(),a===e&&(a=fa()),R[l]={nextPos:i,result:a},a)}function oa(){var a,l,$,p,n,u,y=i*76+50,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er)),p!==e)for(;p!==e;)$.push(p),Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er));else $=e;if($!==e)if(t.charCodeAt(i)===46?(p=Pr,i++):(p=e,O===0&&U(Os)),p!==e){if(n=[],Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er)),u!==e)for(;u!==e;)n.push(u),Ct.test(t.charAt(i))?(u=t.charAt(i),i++):(u=e,O===0&&U(er));else n=e;n!==e?(T=a,a=au()):(i=a,a=e)}else i=a,a=e;else i=a,a=e}else i=a,a=e;if(a===e)if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e)if(t.charCodeAt(i)===46?($=Pr,i++):($=e,O===0&&U(Os)),$!==e){if(p=[],Ct.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,O===0&&U(er)),n!==e)for(;n!==e;)p.push(n),Ct.test(t.charAt(i))?(n=t.charAt(i),i++):(n=e,O===0&&U(er));else p=e;p!==e?(T=a,a=iu()):(i=a,a=e)}else i=a,a=e;else i=a,a=e;return R[y]={nextPos:i,result:a},a}function fa(){var a,l,$,p,n=i*76+51,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),is.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(Va)),l!==e){if($=[],Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er)),p!==e)for(;p!==e;)$.push(p),Ct.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(er));else $=e;$!==e?(T=a,a=oi()):(i=a,a=e)}else i=a,a=e;return a===e&&(a=i,cs.test(t.charAt(i))?(t.charAt(i),i++):O===0&&U(Rs),Ct.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(er)),l!==e?(T=a,a=lu()):(i=a,a=e)),R[n]={nextPos:i,result:a},a}function ca(){var a,l=i*76+52,$=R[l];return $?(i=$.nextPos,$.result):(a=Mi(),a===e&&(a=ha()),R[l]={nextPos:i,result:a},a)}function Mi(){var a,l,$,p,n=i*76+53,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===qe?(l=qe,i+=4):(l=e,O===0&&U(za)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=fi()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function ha(){var a,l,$,p,n=i*76+54,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,5)===Ye?(l=Ye,i+=5):(l=e,O===0&&U(dr)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=uu()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function pa(){var a,l,$,p,n=i*76+55,u=R[n];return u?(i=u.nextPos,u.result):(a=i,t.substr(i,4)===Qe?(l=Qe,i+=4):(l=e,O===0&&U(vl)),l!==e?($=i,O++,yt.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Nr)),O--,p===e?$=void 0:(i=$,$=e),$!==e?(T=a,a=ou()):(i=a,a=e)):(i=a,a=e),R[n]={nextPos:i,result:a},a)}function va(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+56,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=ci(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=Xe(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=ci(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=Z,i++):(n=e,O===0&&U(st)),n!==e?(T=a,a=fu(p)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function Cu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+57,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=hi(u)}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Xe(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=hi(u)}else i=n,n=e;for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=Xn(p)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function ga(){var a,l,$,p,n,u,y,h=i*76+58,x=R[h];if(x)return i=x.nextPos,x.result;if(a=i,l=Ge(),l!==e){for($=i,p=[],n=g();n!==e;)p.push(n),n=g();if(t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e){for(u=[],y=g();y!==e;)u.push(y),y=g();y=tt(),y!==e?$=y:(i=$,$=e)}else i=$,$=e;$===e&&($=null),T=a,a=cu(l,$)}else i=a,a=e;return R[h]={nextPos:i,result:a},a}function da(){var a,l,$,p,n,u,y=i*76+59,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=ga(),l!==e){for($=[],p=i,n=k(),n!==e?(u=ga(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=ga(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);T=a,a=Yn(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function wr(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H,z,se,Fe=i*76+60,ye=R[Fe];if(ye)return i=ye.nextPos,ye.result;if(a=i,t.charCodeAt(i)===64?(l=Pt,i++):(l=e,O===0&&U(gl)),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(p=Ge(),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();if(t.charCodeAt(i)===40?(u=N,i++):(u=e,O===0&&U(kt)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(h=da(),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();if(t.charCodeAt(i)===41?(m=S,i++):(m=e,O===0&&U(ft)),m!==e){for(_=i,A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===58?(M=pe,i++):(M=e,O===0&&U(Ht)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();H=tt(),H!==e?_=H:(i=_,_=e)}else i=_,_=e;for(_===e&&(_=null),A=[],M=g();M!==e;)A.push(M),M=g();if(t.charCodeAt(i)===123?(M=L,i++):(M=e,O===0&&U(Gt)),M!==e){for(I=[],H=g();H!==e;)I.push(H),H=g();for(H=es(),H===e&&(H=null),z=[],se=g();se!==e;)z.push(se),se=g();t.charCodeAt(i)===125?(se=Z,i++):(se=e,O===0&&U(st)),se!==e?(T=a,a=hu($,p,n,h,_,H)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[Fe]={nextPos:i,result:a},a}function _u(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I=i*76+61,H=R[I];if(H)return i=H.nextPos,H.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=da(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=i,h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===58?(x=pe,i++):(x=e,O===0&&U(Ht)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();_=tt(),_!==e?y=_:(i=y,y=e)}else i=y,y=e;for(y===e&&(y=null),h=[],x=g();x!==e;)h.push(x),x=g();if(t.charCodeAt(i)===123?(x=L,i++):(x=e,O===0&&U(Gt)),x!==e){for(m=[],_=g();_!==e;)m.push(_),_=g();for(_=es(),_===e&&(_=null),A=[],M=g();M!==e;)A.push(M),M=g();t.charCodeAt(i)===125?(M=Z,i++):(M=e,O===0&&U(st)),M!==e?(T=a,a=pu(p,y,_)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[I]={nextPos:i,result:a},a}function ya(){var a,l,$,p,n,u,y,h,x,m,_=i*76+62,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.charCodeAt(i)===91?(l=ar,i++):(l=e,O===0&&U(As)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=pi(u)}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=We(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();for(t.charCodeAt(i)===44?(h=Y,i++):(h=e,O===0&&U(ct)),h===e&&(h=null),x=[],m=g();m!==e;)x.push(m),m=g();T=n,n=pi(u)}else i=n,n=e;for(n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===93?(u=Q,i++):(u=e,O===0&&U(hs)),u!==e?(T=a,a=vu(p)):(i=a,a=e)}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Si(){var a,l,$,p,n,u,y,h,x,m,_,A,M,I,H=i*76+63,z=R[H];if(z)return i=z.nextPos,z.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();if(p=[],n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=vi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;for(;n!==e;)if(p.push(n),n=i,u=Ge(),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.charCodeAt(i)===58?(h=pe,i++):(h=e,O===0&&U(Ht)),h!==e){if(x=[],m=g(),m!==e)for(;m!==e;)x.push(m),m=g();else x=e;if(x!==e)if(m=We(),m!==e){for(_=[],A=g();A!==e;)_.push(A),A=g();for(t.charCodeAt(i)===44?(A=Y,i++):(A=e,O===0&&U(ct)),A===e&&(t.charCodeAt(i)===59?(A=ot,i++):(A=e,O===0&&U(un))),A===e&&(A=null),M=[],I=g();I!==e;)M.push(I),I=g();T=n,n=vi(u,m)}else i=n,n=e;else i=n,n=e}else i=n,n=e}else i=n,n=e;t.charCodeAt(i)===125?(n=Z,i++):(n=e,O===0&&U(st)),n!==e?(T=a,a=gi(p)):(i=a,a=e)}else i=a,a=e;return R[H]={nextPos:i,result:a},a}function tt(){var a,l=i*76+64,$=R[l];return $?(i=$.nextPos,$.result):(a=Pu(),a===e&&(a=ur()),R[l]={nextPos:i,result:a},a)}function Pu(){var a,l,$,p,n,u,y,h,x,m,_=i*76+65,A=R[_];if(A)return i=A.nextPos,A.result;if(a=i,t.substr(i,2)===xt?(l=xt,i+=2):(l=e,O===0&&U(js)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=Es(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();if(t.charCodeAt(i)===41?(u=S,i++):(u=e,O===0&&U(ft)),u!==e){for(y=[],h=g();h!==e;)y.push(h),h=g();if(t.substr(i,2)===ve?(h=ve,i+=2):(h=e,O===0&&U(rn)),h!==e){for(x=[],m=g();m!==e;)x.push(m),m=g();m=tt(),m!==e?(T=a,a=gu(p,m)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return R[_]={nextPos:i,result:a},a}function Es(){var a,l,$,p,n,u,y=i*76+66,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=tt(),l!==e){for($=[],p=i,n=k(),n!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,n=k(),n!==e?(u=tt(),u!==e?p=u:(i=p,p=e)):(i=p,p=e);T=a,a=di(l,$)}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function ur(){var a,l,$,p,n,u,y,h,x=i*76+67,m=R[x];if(m)return i=m.nextPos,m.result;if(a=i,l=Ge(),l!==e){for($=[],p=b();p!==e;)$.push(p),p=b();if(t.charCodeAt(i)===60?(p=pt,i++):(p=e,O===0&&U(Ys)),p!==e){for(n=[],u=b();u!==e;)n.push(u),u=b();if(u=tt(),u!==e){for(y=[],h=b();h!==e;)y.push(h),h=b();t.charCodeAt(i)===62?(h=Lr,i++):(h=e,O===0&&U(zn)),h!==e?(T=a,a=c(l,u)):(i=a,a=e)}else i=a,a=e}else i=a,a=e}else i=a,a=e;return a===e&&(a=i,l=Ge(),l!==e&&(T=a,l=te(l)),a=l),R[x]={nextPos:i,result:a},a}function Ge(){var a,l,$,p,n=i*76+68,u=R[n];if(u)return i=u.nextPos,u.result;if(a=i,Rt.test(t.charAt(i))?(l=t.charAt(i),i++):(l=e,O===0&&U(dl)),l!==e){for($=[],Mn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Wn));p!==e;)$.push(p),Mn.test(t.charAt(i))?(p=t.charAt(i),i++):(p=e,O===0&&U(Wn));T=a,a=Cs()}else i=a,a=e;return R[n]={nextPos:i,result:a},a}function Ti(){var a,l,$,p,n,u,y=i*76+69,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,l=Ge(),l!==e){for($=[],p=i,t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e?(u=Ge(),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);p!==e;)$.push(p),p=i,t.charCodeAt(i)===58?(n=pe,i++):(n=e,O===0&&U(Ht)),n!==e?(u=Ge(),u!==e?(n=[n,u],p=n):(i=p,p=e)):(i=p,p=e);T=a,a=yr()}else i=a,a=e;return R[y]={nextPos:i,result:a},a}function k(){var a,l,$,p,n,u=i*76+70,y=R[u];if(y)return i=y.nextPos,y.result;for(a=i,l=[],$=g();$!==e;)l.push($),$=g();if(t.charCodeAt(i)===44?($=Y,i++):($=e,O===0&&U(ct)),$!==e){for(p=[],n=g();n!==e;)p.push(n),n=g();l=[l,$,p],a=l}else i=a,a=e;if(a===e)if(a=[],l=g(),l!==e)for(;l!==e;)a.push(l),l=g();else a=e;return R[u]={nextPos:i,result:a},a}function De(){var a,l,$,p,n,u,y=i*76+71,h=R[y];if(h)return i=h.nextPos,h.result;if(a=i,t.charCodeAt(i)===123?(l=L,i++):(l=e,O===0&&U(Gt)),l!==e){for($=[],p=g();p!==e;)$.push(p),p=g();for(p=es(),p===e&&(p=null),n=[],u=g();u!==e;)n.push(u),u=g();t.charCodeAt(i)===125?(u=Z,i++):(u=e,O===0&&U(st)),u!==e?(T=a,a=on(p)):(i=a,a=e)}else i=a,a=e;return a===e&&(a=Cr()),R[y]={nextPos:i,result:a},a}function ne(){var a,l=i*76+72,$=R[l];return $?(i=$.nextPos,$.result):(t.substr(i,2)===Ut?(a=Ut,i+=2):(a=e,O===0&&U(yl)),a===e&&(gr.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(Ka))),R[l]={nextPos:i,result:a},a)}function f(){var a,l,$=i*76+73,p=R[$];return p?(i=p.nextPos,p.result):(a=i,O++,t.length>i?(l=t.charAt(i),i++):(l=e,O===0&&U(lr)),O--,l===e?a=void 0:(i=a,a=e),a===e&&(a=ne()),R[$]={nextPos:i,result:a},a)}function g(){var a,l=i*76+74,$=R[l];return $?(i=$.nextPos,$.result):(el.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(wl)),R[l]={nextPos:i,result:a},a)}function b(){var a,l=i*76+75,$=R[l];return $?(i=$.nextPos,$.result):(tl.test(t.charAt(i))?(a=t.charAt(i),i++):(a=e,O===0&&U(ml)),R[l]={nextPos:i,result:a},a)}function w(a,l,$){const p={type:a};l.children=$;for(const u of Object.keys(l))l[u]!==void 0&&(p[u]=l[u]);const n=V();return p.loc={start:n.start.offset,end:n.end.offset-1},p}if(_t=d(),_t!==e&&i===t.length)return _t;throw _t!==e&&i<t.length&&U(de()),fn(X,o<t.length?t.charAt(o):null,o<t.length?Us(o,o+1):Us(o,o))}const v_=["infix","if","fn","match","block","tmpl","str","num","bool","null","obj","arr","identifier","call","index","prop"];function g_(t){return v_.includes(t.type)}function Yw(t){return"chain"in t&&t.chain!==null}function d_(t,r,e){return{type:"call",target:t,args:r,loc:e}}function y_(t,r,e){return{type:"index",target:t,index:r,loc:e}}function w_(t,r,e){return{type:"prop",target:t,name:r,loc:e}}function jt(t,r){const e=r(t);switch(e.type){case"def":{e.expr=jt(e.expr,r);break}case"return":{e.expr=jt(e.expr,r);break}case"each":{e.items=jt(e.items,r),e.for=jt(e.for,r);break}case"for":{e.from!=null&&(e.from=jt(e.from,r)),e.to!=null&&(e.to=jt(e.to,r)),e.times!=null&&(e.times=jt(e.times,r)),e.for=jt(e.for,r);break}case"loop":{for(let s=0;s<e.statements.length;s++)e.statements[s]=jt(e.statements[s],r);break}case"addAssign":case"subAssign":case"assign":{e.expr=jt(e.expr,r),e.dest=jt(e.dest,r);break}case"infix":{for(let s=0;s<e.operands.length;s++)e.operands[s]=jt(e.operands[s],r);break}case"not":{e.expr=jt(e.expr,r);break}case"if":{e.cond=jt(e.cond,r),e.then=jt(e.then,r);for(const s of e.elseif)s.cond=jt(s.cond,r),s.then=jt(s.then,r);e.else!=null&&(e.else=jt(e.else,r));break}case"fn":{for(let s=0;s<e.children.length;s++)e.children[s]=jt(e.children[s],r);break}case"match":{e.about=jt(e.about,r);for(const s of e.qs)s.q=jt(s.q,r),s.a=jt(s.a,r);e.default!=null&&(e.default=jt(e.default,r));break}case"block":{for(let s=0;s<e.statements.length;s++)e.statements[s]=jt(e.statements[s],r);break}case"tmpl":{for(let s=0;s<e.tmpl.length;s++){const v=e.tmpl[s];typeof v!="string"&&(e.tmpl[s]=jt(v,r))}break}case"obj":{for(const s of e.value)e.value.set(s[0],jt(s[1],r));break}case"arr":{for(let s=0;s<e.value.length;s++)e.value[s]=jt(e.value[s],r);break}case"callChain":{for(let s=0;s<e.args.length;s++)e.args[s]=jt(e.args[s],r);break}case"indexChain":{e.index=jt(e.index,r);break}case"call":{e.target=jt(e.target,r);for(let s=0;s<e.args.length;s++)e.args[s]=jt(e.args[s],r);break}case"index":{e.target=jt(e.target,r),e.index=jt(e.index,r);break}case"prop":{e.target=jt(e.target,r);break}case"ns":{for(let s=0;s<e.members.length;s++)e.members[s]=jt(e.members[s],r);break}}if(Yw(e)&&e.chain!=null)for(let s=0;s<e.chain.length;s++)e.chain[s]=jt(e.chain[s],r);return e}const Gp=["null","true","false","each","for","loop","break","continue","match","if","elif","else","return","eval","var","let","fn","namespace","meta","attr","attribute","static","class","struct","module","while","import","export"];function Jp(t){throw new $f(`Reserved word "${t}" cannot be used as variable name.`)}function m_(t){switch(t.type){case"def":case"attr":case"ns":case"identifier":case"propChain":{Gp.includes(t.name)&&Jp(t.name);break}case"meta":{t.name!=null&&Gp.includes(t.name)&&Jp(t.name);break}case"fn":{for(const r of t.args)Gp.includes(r.name)&&Jp(r.name);break}}return t}function $_(t){for(const r of t)jt(r,m_);return t}function Xd(t){return{type:"simple",name:t}}function x_(t,r){return{type:"generic",name:t,inners:r}}function b_(t,r){return{type:"fn",args:t,result:r}}function kh(t){switch(t.type){case"namedTypeSource":if(t.inner){const r=kh(t.inner);return`${t.name}<${r}>`}else return t.name;case"fnTypeSource":{const r=t.args.map(s=>kh(s)).join(", "),e=kh(t.result);return`@(${r}) { ${e} }`}}}function sc(t){if(t.type==="namedTypeSource"){switch(t.name){case"null":case"bool":case"num":case"str":case"any":case"void":{if(t.inner==null)return Xd(t.name);break}case"arr":case"obj":{let r;return t.inner!=null?r=sc(t.inner):r=Xd("any"),x_(t.name,[r])}}throw new $f(`Unknown type: '${kh(t)}'`)}else{const r=t.args.map(e=>sc(e));return b_(r,sc(t.result))}}function A_(t){switch(t.type){case"def":{t.varType!=null&&sc(t.varType);break}case"fn":{for(const r of t.args)r.argType!=null&&sc(r.argType);t.retType!=null&&sc(t.retType);break}}return t}function C_(t){for(const r of t)jt(r,A_);return t}function Eh(t){const r=[],e=[];for(const s of t)if(s.type==="attr")e.push(s);else if(s.type==="def")s.attr==null&&(s.attr=[]),s.attr.push(...e),e.splice(0,e.length),s.expr.type==="fn"&&(s.expr.children=Eh(s.expr.children)),r.push(s);else{if(e.length>0)throw new $f("invalid attribute.");switch(s.type){case"fn":{s.children=Eh(s.children);break}case"block":{s.statements=Eh(s.statements);break}}r.push(s)}if(e.length>0)throw new $f("invalid attribute.");return r}function __(t){if(g_(t)&&Yw(t)&&t.chain!=null){const{chain:r,...e}=t;let s=e;for(const v of r)switch(v.type){case"callChain":{s=d_(s,v.args,v.loc);break}case"indexChain":{s=y_(s,v.index,v.loc);break}case"propChain":{s=w_(s,v.name,v.loc);break}}return s}return t}function P_(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],__);return t}function Mh(t,r,e){return{type:"infixTree",left:t,right:r,info:e}}function e0(t,r,e){if(t.type!=="infixTree"||e.priority<=t.info.priority)return Mh(t,r,e);{const{left:s,right:v,info:d}=t;return Mh(s,e0(v,r,e),d)}}function Xo(t){return t.type!=="infixTree"?t:t.info.mapFn?t.info.mapFn(t):{type:"call",target:{type:"identifier",name:t.info.func},args:[Xo(t.left),Xo(t.right)]}}const k_={"*":{func:"Core:mul",priority:7},"^":{func:"Core:pow",priority:7},"/":{func:"Core:div",priority:7},"%":{func:"Core:mod",priority:7},"+":{func:"Core:add",priority:6},"-":{func:"Core:sub",priority:6},"==":{func:"Core:eq",priority:4},"!=":{func:"Core:neq",priority:4},"<":{func:"Core:lt",priority:4},">":{func:"Core:gt",priority:4},"<=":{func:"Core:lteq",priority:4},">=":{func:"Core:gteq",priority:4},"&&":{mapFn:t=>({type:"and",left:Xo(t.left),right:Xo(t.right)}),priority:3},"||":{mapFn:t=>({type:"or",left:Xo(t.left),right:Xo(t.right)}),priority:3}};function E_(t){const r=t.operators.map(s=>{const v=k_[s];if(v==null)throw new $f(`No such operator: ${s}.`);return v});let e=Mh(t.operands[0],t.operands[1],r[0]);for(let s=0;s<r.length-1;s++)e=e0(e,t.operands[2+s],r[1+s]);return Xo(e)}function M_(t){for(let r=0;r<t.length;r++)t[r]=jt(t[r],e=>e.type==="infix"?E_(e):e);return t}const Vo=class Vo{constructor(){he(this,"plugins");this.plugins={validate:[$_,C_],transform:[Eh,P_,M_]}}static parse(r){return Vo.instance==null&&(Vo.instance=new Vo),Vo.instance.parse(r)}addPlugin(r,e){switch(r){case"validate":this.plugins.validate.push(e);break;case"transform":this.plugins.transform.push(e);break;default:throw new Error("unknown plugin type")}}parse(r){let e;try{const s=Qd(r,{startRule:"Preprocess"});e=Qd(s,{startRule:"Main"})}catch(s){throw s.location?s.expected?new $f(`Parsing error. (Line ${s.location.start.line}:${s.location.start.column})`):new $f(`${s.message} (Line ${s.location.start.line}:${s.location.start.column})`):s}for(const s of this.plugins.validate)e=s(e);for(const s of this.plugins.transform)e=s(e);return e}};he(Vo,"instance");let zv=Vo;const S_="0.14.1",T_={"Hello AiScript":'<: "Hello, AiScript!"',FizzBazz:`for (let i, 100) {
		<: if (i % 15 == 0) "FizzBuzz"
			elif (i % 3 == 0) "Fizz"
		elif (i % 5 == 0) "Buzz"
		else i
	}`};let Kv=[],vc=null;function N_(t){return Kv=zv.parse(t),JSON.stringify(Kv,null,"	")}async function F_(t){vc==null||vc.abort(),vc=new ja({},{in:t.in,out:r=>{t.out({id:Math.random(),type:r.type,text:Hv(r,!0),print:!0})},log:(r,e)=>{switch(r){case"end":t.end({id:Math.random(),text:Hv(e.val,!0),print:!1});break}}});try{await vc.exec(Kv)}catch(r){t.err(r)}}const O_=Object.freeze(Object.defineProperty({__proto__:null,exec:F_,parse:N_,samples:T_,version:S_},Symbol.toStringTag,{value:"Module"})),I_={id:"root"},R_={id:"grid1"},j_={class:"type"},D_={id:"grid2"},Yd=["develop","0.19.0","0.18.0","0.17.0","0.16.0","0.15.0","0.14.1"],ey="0.19.0",U_=jc({__name:"MainArea",props:{ver:{}},setup(t){const r=t,{parse:e,exec:s,version:v,samples:d}={develop:s1,"0.19.0":K1,"0.18.0":IA,"0.17.0":A2,"0.16.0":uC,"0.15.0":JC,"0.14.1":O_}[r.ver],C=zo(window.localStorage.getItem(v)??'<: "Hello, AiScript!"'),P=zo([]),E=zo(""),N=zo(null);bc(C,()=>{window.localStorage.setItem(v,C.value);try{E.value=e(C.value),N.value=null}catch(B){const L=B;N.value=L.message,console.error("info"in L?L.info:L);return}},{immediate:!0});function S(){P.value=[],s({in:B=>new Promise(L=>{const Z=window.prompt(B);L(Z??"")}),out:B=>P.value.push(B),end:B=>P.value.push(B),err:B=>{console.error(B),window.alert(`${B}`)}})}return(B,L)=>(us(),Hs("div",I_,[Xi("div",R_,[ys(yx,{modelValue:C.value,"onUpdate:modelValue":L[0]||(L[0]=Z=>C.value=Z),samples:Mc(d),parseError:N.value,onRun:S},null,8,["modelValue","samples","parseError"]),ys(dc,{id:"logs"},{header:Ia(()=>L[1]||(L[1]=[Tu("Output")])),default:Ia(()=>[(us(!0),Hs(kn,null,Fh(P.value,Z=>(us(),Hs("div",{class:Rn(["log",[{print:Z.print},Z.type]]),key:Z.id},[Xi("span",j_,Co(Z.type),1),Tu(" "+Co(Z.text),1)],2))),128))]),_:1})]),Xi("div",D_,[ys(dc,{id:"ast"},{header:Ia(()=>L[2]||(L[2]=[Tu("AST")])),default:Ia(()=>[Xi("pre",null,Co(E.value),1)]),_:1}),ys(dc,{id:"bin"},{header:Ia(()=>L[3]||(L[3]=[Tu("Bytecode")])),default:Ia(()=>[L[4]||(L[4]=Xi("header",null,null,-1))]),_:1}),ys(dc,{id:"debugger"},{header:Ia(()=>L[5]||(L[5]=[Tu("Debugger")])),_:1})])]))}}),B_=Uc(U_,[["__scopeId","data-v-6365c473"]]),L_={id:"wrapper"},H_=jc({__name:"App",setup(t){const r=zo(window.localStorage.getItem("version")??ey),e=Object.fromEntries(Yd.map(v=>[v,v+(v==ey?"(latest)":"")]));function s(v){r.value=v,window.localStorage.setItem("version",r.value)}return(v,d)=>(us(),Hs("div",L_,[Xi("h1",null,[d[0]||(d[0]=Tu(" AiScript ( ")),ys(vw,{id:"version",options:Mc(e),onSelect:s},{default:Ia(()=>[Tu(Co(r.value),1)]),_:1},8,["options"]),d[1]||(d[1]=Tu(" ) Playground "))]),(us(!0),Hs(kn,null,Fh(Mc(Yd),C=>(us(),Hs("div",null,[C==r.value?(us(),Fc(B_,{key:0,ver:C},null,8,["ver"])):nc("",!0)]))),256))]))}}),q_=Uc(H_,[["__scopeId","data-v-caf8f745"]]);N$(q_).mount("#app");
